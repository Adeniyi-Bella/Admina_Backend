"use strict";var wde=Object.create;var Hm=Object.defineProperty;var Ade=Object.getOwnPropertyDescriptor;var Nrt=Object.getOwnPropertyNames;var Frt=Object.getPrototypeOf,Brt=Object.prototype.hasOwnProperty;var Cde=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),K4=t=>{throw TypeError(t)};var qrt=(t,e,r)=>e in t?Hm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var _de=(t,e)=>Hm(t,"name",{value:e,configurable:!0});var le=(t,e)=>()=>(t&&(e=t(t=0)),e);var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),aa=(t,e)=>{for(var r in e)Hm(t,r,{get:e[r],enumerable:!0})},Tde=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Nrt(e))!Brt.call(t,i)&&i!==r&&Hm(t,i,{get:()=>e[i],enumerable:!(n=Ade(e,i))||n.enumerable});return t};var Dt=(t,e,r)=>(r=t!=null?wde(Frt(t)):{},Tde(e||!t||!t.__esModule?Hm(r,"default",{value:t,enumerable:!0}):r,t)),Jt=t=>Tde(Hm({},"__esModule",{value:!0}),t);var d1=t=>[,,,wde(t?.[Cde("metadata")]??null)],Ode=["class","method","getter","setter","accessor","field","value","get","set"],$4=t=>t!==void 0&&typeof t!="function"?K4("Function expected"):t,Lrt=(t,e,r,n,i)=>({kind:Ode[t],name:e,metadata:n,addInitializer:s=>r._?K4("Already initialized"):i.push($4(s||null))}),jrt=(t,e)=>qrt(e,Cde("metadata"),t[3]),p1=(t,e,r,n)=>{for(var i=0,s=t[e>>1],o=s&&s.length;i<o;i++)e&1?s[i].call(r):n=s[i].call(r,n);return n},f1=(t,e,r,n,i,s)=>{var o,a,u,c,l,d=e&7,p=!!(e&8),f=!!(e&16),h=d>3?t.length+1:d?p?1:2:0,g=Ode[d+5],_=d>3&&(t[h-1]=[]),S=t[h]||(t[h]=[]),w=d&&(!f&&!p&&(i=i.prototype),d<5&&(d>3||!f)&&Ade(d<4?i:{get[r](){return vde(this,s)},set[r](A){return Sde(this,s,A)}},r));d?f&&d<4&&_de(s,(d>2?"set ":d>1?"get ":"")+r):_de(i,r);for(var C=n.length-1;C>=0;C--)c=Lrt(d,r,u={},t[3],S),d&&(c.static=p,c.private=f,l=c.access={has:f?A=>$rt(i,A):A=>r in A},d^3&&(l.get=f?A=>(d^1?vde:Krt)(A,i,d^4?s:w.get):A=>A[r]),d>2&&(l.set=f?(A,O)=>Sde(A,i,O,d^4?s:w.set):(A,O)=>A[r]=O)),a=(0,n[C])(d?d<4?f?s:w[g]:d>4?void 0:{get:w.get,set:w.set}:i,c),u._=1,d^4||a===void 0?$4(a)&&(d>4?_.unshift(a):d?f?s=a:w[g]=a:i=a):typeof a!="object"||a===null?K4("Object expected"):($4(o=a.get)&&(w.get=o),$4(o=a.set)&&(w.set=o),$4(o=a.init)&&_.unshift(o));return d||jrt(t,i),w&&Hm(i,r,w),f?d^4?s:w:i};var dL=(t,e,r)=>e.has(t)||K4("Cannot "+r),$rt=(t,e)=>Object(e)!==e?K4('Cannot use the "in" operator on this value'):t.has(e),vde=(t,e,r)=>(dL(t,e,"read from private field"),r?r.call(t):e.get(t));var Sde=(t,e,r,n)=>(dL(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Krt=(t,e,r)=>(dL(t,e,"access private method"),r);var Ide=m(()=>{var xde;(function(t){(function(e){var r=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:a(),n=i(t);typeof r.Reflect<"u"&&(n=i(r.Reflect,n)),e(n,r),typeof r.Reflect>"u"&&(r.Reflect=t);function i(u,c){return function(l,d){Object.defineProperty(u,l,{configurable:!0,writable:!0,value:d}),c&&c(l,d)}}function s(){try{return Function("return this;")()}catch{}}function o(){try{return(0,eval)("(function() { return this; })()")}catch{}}function a(){return s()||o()}})(function(e,r){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",s=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",u={__proto__:[]}instanceof Array,c=!a&&!u,l={create:a?function(){return Fu(Object.create(null))}:u?function(){return Fu({__proto__:null})}:function(){return Fu({})},has:c?function(Z,oe){return n.call(Z,oe)}:function(Z,oe){return oe in Z},get:c?function(Z,oe){return n.call(Z,oe)?Z[oe]:void 0}:function(Z,oe){return Z[oe]}},d=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ur(),f=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:kn(),h=typeof WeakMap=="function"?WeakMap:Wc(),g=i?Symbol.for("@reflect-metadata:registry"):void 0,_=zt(),S=Nr(_);function w(Z,oe,D,N){if(Me(D)){if(!G(Z))throw new TypeError;if(!Y(oe))throw new TypeError;return U(Z,oe)}else{if(!G(Z))throw new TypeError;if(!_t(oe))throw new TypeError;if(!_t(N)&&!Me(N)&&!Ce(N))throw new TypeError;return Ce(N)&&(N=void 0),D=$(D),k(Z,oe,D,N)}}e("decorate",w);function C(Z,oe){function D(N,K){if(!_t(N))throw new TypeError;if(!Me(K)&&!te(K))throw new TypeError;Ee(Z,oe,N,K)}return D}e("metadata",C);function A(Z,oe,D,N){if(!_t(D))throw new TypeError;return Me(N)||(N=$(N)),Ee(Z,oe,D,N)}e("defineMetadata",A);function O(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),H(Z,oe,D)}e("hasMetadata",O);function x(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),ie(Z,oe,D)}e("hasOwnMetadata",x);function R(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),j(Z,oe,D)}e("getMetadata",R);function M(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),V(Z,oe,D)}e("getOwnMetadata",M);function I(Z,oe){if(!_t(Z))throw new TypeError;return Me(oe)||(oe=$(oe)),Re(Z,oe)}e("getMetadataKeys",I);function F(Z,oe){if(!_t(Z))throw new TypeError;return Me(oe)||(oe=$(oe)),fe(Z,oe)}e("getOwnMetadataKeys",F);function B(Z,oe,D){if(!_t(oe))throw new TypeError;if(Me(D)||(D=$(D)),!_t(oe))throw new TypeError;Me(D)||(D=$(D));var N=Rt(oe,D,!1);return Me(N)?!1:N.OrdinaryDeleteMetadata(Z,oe,D)}e("deleteMetadata",B);function U(Z,oe){for(var D=Z.length-1;D>=0;--D){var N=Z[D],K=N(oe);if(!Me(K)&&!Ce(K)){if(!Y(K))throw new TypeError;oe=K}}return oe}function k(Z,oe,D,N){for(var K=Z.length-1;K>=0;--K){var Q=Z[K],Oe=Q(oe,D,N);if(!Me(Oe)&&!Ce(Oe)){if(!_t(Oe))throw new TypeError;N=Oe}}return N}function H(Z,oe,D){var N=ie(Z,oe,D);if(N)return!0;var K=He(oe);return Ce(K)?!1:H(Z,K,D)}function ie(Z,oe,D){var N=Rt(oe,D,!1);return Me(N)?!1:tr(N.OrdinaryHasOwnMetadata(Z,oe,D))}function j(Z,oe,D){var N=ie(Z,oe,D);if(N)return V(Z,oe,D);var K=He(oe);if(!Ce(K))return j(Z,K,D)}function V(Z,oe,D){var N=Rt(oe,D,!1);if(!Me(N))return N.OrdinaryGetOwnMetadata(Z,oe,D)}function Ee(Z,oe,D,N){var K=Rt(D,N,!0);K.OrdinaryDefineOwnMetadata(Z,oe,D,N)}function Re(Z,oe){var D=fe(Z,oe),N=He(Z);if(N===null)return D;var K=Re(N,oe);if(K.length<=0)return D;if(D.length<=0)return K;for(var Q=new f,Oe=[],Ie=0,be=D;Ie<be.length;Ie++){var xe=be[Ie],Fe=Q.has(xe);Fe||(Q.add(xe),Oe.push(xe))}for(var je=0,ft=K;je<ft.length;je++){var xe=ft[je],Fe=Q.has(xe);Fe||(Q.add(xe),Oe.push(xe))}return Oe}function fe(Z,oe){var D=Rt(Z,oe,!1);return D?D.OrdinaryOwnMetadataKeys(Z,oe):[]}function Ve(Z){if(Z===null)return 1;switch(typeof Z){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Z===null?1:6;default:return 6}}function Me(Z){return Z===void 0}function Ce(Z){return Z===null}function Rr(Z){return typeof Z=="symbol"}function _t(Z){return typeof Z=="object"?Z!==null:typeof Z=="function"}function sa(Z,oe){switch(Ve(Z)){case 0:return Z;case 1:return Z;case 2:return Z;case 3:return Z;case 4:return Z;case 5:return Z}var D=oe===3?"string":oe===5?"number":"default",N=z(Z,s);if(N!==void 0){var K=N.call(Z,D);if(_t(K))throw new TypeError;return K}return hi(Z,D==="default"?"number":D)}function hi(Z,oe){if(oe==="string"){var D=Z.toString;if(ne(D)){var N=D.call(Z);if(!_t(N))return N}var K=Z.valueOf;if(ne(K)){var N=K.call(Z);if(!_t(N))return N}}else{var K=Z.valueOf;if(ne(K)){var N=K.call(Z);if(!_t(N))return N}var Q=Z.toString;if(ne(Q)){var N=Q.call(Z);if(!_t(N))return N}}throw new TypeError}function tr(Z){return!!Z}function P(Z){return""+Z}function $(Z){var oe=sa(Z,3);return Rr(oe)?oe:P(oe)}function G(Z){return Array.isArray?Array.isArray(Z):Z instanceof Object?Z instanceof Array:Object.prototype.toString.call(Z)==="[object Array]"}function ne(Z){return typeof Z=="function"}function Y(Z){return typeof Z=="function"}function te(Z){switch(Ve(Z)){case 3:return!0;case 4:return!0;default:return!1}}function de(Z,oe){return Z===oe||Z!==Z&&oe!==oe}function z(Z,oe){var D=Z[oe];if(D!=null){if(!ne(D))throw new TypeError;return D}}function X(Z){var oe=z(Z,o);if(!ne(oe))throw new TypeError;var D=oe.call(Z);if(!_t(D))throw new TypeError;return D}function ue(Z){return Z.value}function se(Z){var oe=Z.next();return oe.done?!1:oe}function Se(Z){var oe=Z.return;oe&&oe.call(Z)}function He(Z){var oe=Object.getPrototypeOf(Z);if(typeof Z!="function"||Z===d||oe!==d)return oe;var D=Z.prototype,N=D&&Object.getPrototypeOf(D);if(N==null||N===Object.prototype)return oe;var K=N.constructor;return typeof K!="function"||K===Z?oe:K}function tt(){var Z;!Me(g)&&typeof r.Reflect<"u"&&!(g in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(Z=Lr(r.Reflect));var oe,D,N,K=new h,Q={registerProvider:Oe,getProvider:be,setProvider:Fe};return Q;function Oe(je){if(!Object.isExtensible(Q))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case Z===je:break;case Me(oe):oe=je;break;case oe===je:break;case Me(D):D=je;break;case D===je:break;default:N===void 0&&(N=new f),N.add(je);break}}function Ie(je,ft){if(!Me(oe)){if(oe.isProviderFor(je,ft))return oe;if(!Me(D)){if(D.isProviderFor(je,ft))return oe;if(!Me(N))for(var cr=X(N);;){var vn=se(cr);if(!vn)return;var Ga=ue(vn);if(Ga.isProviderFor(je,ft))return Se(cr),Ga}}}if(!Me(Z)&&Z.isProviderFor(je,ft))return Z}function be(je,ft){var cr=K.get(je),vn;return Me(cr)||(vn=cr.get(ft)),Me(vn)&&(vn=Ie(je,ft),Me(vn)||(Me(cr)&&(cr=new p,K.set(je,cr)),cr.set(ft,vn))),vn}function xe(je){if(Me(je))throw new TypeError;return oe===je||D===je||!Me(N)&&N.has(je)}function Fe(je,ft,cr){if(!xe(cr))throw new Error("Metadata provider not registered.");var vn=be(je,ft);if(vn!==cr){if(!Me(vn))return!1;var Ga=K.get(je);Me(Ga)&&(Ga=new p,K.set(je,Ga)),Ga.set(ft,cr)}return!0}}function zt(){var Z;return!Me(g)&&_t(r.Reflect)&&Object.isExtensible(r.Reflect)&&(Z=r.Reflect[g]),Me(Z)&&(Z=tt()),!Me(g)&&_t(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,g,{enumerable:!1,configurable:!1,writable:!1,value:Z}),Z}function Nr(Z){var oe=new h,D={isProviderFor:function(xe,Fe){var je=oe.get(xe);return Me(je)?!1:je.has(Fe)},OrdinaryDefineOwnMetadata:Oe,OrdinaryHasOwnMetadata:K,OrdinaryGetOwnMetadata:Q,OrdinaryOwnMetadataKeys:Ie,OrdinaryDeleteMetadata:be};return _.registerProvider(D),D;function N(xe,Fe,je){var ft=oe.get(xe),cr=!1;if(Me(ft)){if(!je)return;ft=new p,oe.set(xe,ft),cr=!0}var vn=ft.get(Fe);if(Me(vn)){if(!je)return;if(vn=new p,ft.set(Fe,vn),!Z.setProvider(xe,Fe,D))throw ft.delete(Fe),cr&&oe.delete(xe),new Error("Wrong provider for target.")}return vn}function K(xe,Fe,je){var ft=N(Fe,je,!1);return Me(ft)?!1:tr(ft.has(xe))}function Q(xe,Fe,je){var ft=N(Fe,je,!1);if(!Me(ft))return ft.get(xe)}function Oe(xe,Fe,je,ft){var cr=N(je,ft,!0);cr.set(xe,Fe)}function Ie(xe,Fe){var je=[],ft=N(xe,Fe,!1);if(Me(ft))return je;for(var cr=ft.keys(),vn=X(cr),Ga=0;;){var S8=se(vn);if(!S8)return je.length=Ga,je;var qq=ue(S8);try{je[Ga]=qq}catch(w8){try{Se(vn)}finally{throw w8}}Ga++}}function be(xe,Fe,je){var ft=N(Fe,je,!1);if(Me(ft)||!ft.delete(xe))return!1;if(ft.size===0){var cr=oe.get(Fe);Me(cr)||(cr.delete(je),cr.size===0&&oe.delete(cr))}return!0}}function Lr(Z){var oe=Z.defineMetadata,D=Z.hasOwnMetadata,N=Z.getOwnMetadata,K=Z.getOwnMetadataKeys,Q=Z.deleteMetadata,Oe=new h,Ie={isProviderFor:function(be,xe){var Fe=Oe.get(be);return!Me(Fe)&&Fe.has(xe)?!0:K(be,xe).length?(Me(Fe)&&(Fe=new f,Oe.set(be,Fe)),Fe.add(xe),!0):!1},OrdinaryDefineOwnMetadata:oe,OrdinaryHasOwnMetadata:D,OrdinaryGetOwnMetadata:N,OrdinaryOwnMetadataKeys:K,OrdinaryDeleteMetadata:Q};return Ie}function Rt(Z,oe,D){var N=_.getProvider(Z,oe);if(!Me(N))return N;if(D){if(_.setProvider(Z,oe,S))return S;throw new Error("Illegal state.")}}function ur(){var Z={},oe=[],D=(function(){function Ie(be,xe,Fe){this._index=0,this._keys=be,this._values=xe,this._selector=Fe}return Ie.prototype["@@iterator"]=function(){return this},Ie.prototype[o]=function(){return this},Ie.prototype.next=function(){var be=this._index;if(be>=0&&be<this._keys.length){var xe=this._selector(this._keys[be],this._values[be]);return be+1>=this._keys.length?(this._index=-1,this._keys=oe,this._values=oe):this._index++,{value:xe,done:!1}}return{value:void 0,done:!0}},Ie.prototype.throw=function(be){throw this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),be},Ie.prototype.return=function(be){return this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),{value:be,done:!0}},Ie})(),N=(function(){function Ie(){this._keys=[],this._values=[],this._cacheKey=Z,this._cacheIndex=-2}return Object.defineProperty(Ie.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ie.prototype.has=function(be){return this._find(be,!1)>=0},Ie.prototype.get=function(be){var xe=this._find(be,!1);return xe>=0?this._values[xe]:void 0},Ie.prototype.set=function(be,xe){var Fe=this._find(be,!0);return this._values[Fe]=xe,this},Ie.prototype.delete=function(be){var xe=this._find(be,!1);if(xe>=0){for(var Fe=this._keys.length,je=xe+1;je<Fe;je++)this._keys[je-1]=this._keys[je],this._values[je-1]=this._values[je];return this._keys.length--,this._values.length--,de(be,this._cacheKey)&&(this._cacheKey=Z,this._cacheIndex=-2),!0}return!1},Ie.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Z,this._cacheIndex=-2},Ie.prototype.keys=function(){return new D(this._keys,this._values,K)},Ie.prototype.values=function(){return new D(this._keys,this._values,Q)},Ie.prototype.entries=function(){return new D(this._keys,this._values,Oe)},Ie.prototype["@@iterator"]=function(){return this.entries()},Ie.prototype[o]=function(){return this.entries()},Ie.prototype._find=function(be,xe){if(!de(this._cacheKey,be)){this._cacheIndex=-1;for(var Fe=0;Fe<this._keys.length;Fe++)if(de(this._keys[Fe],be)){this._cacheIndex=Fe;break}}return this._cacheIndex<0&&xe&&(this._cacheIndex=this._keys.length,this._keys.push(be),this._values.push(void 0)),this._cacheIndex},Ie})();return N;function K(Ie,be){return Ie}function Q(Ie,be){return be}function Oe(Ie,be){return[Ie,be]}}function kn(){var Z=(function(){function oe(){this._map=new p}return Object.defineProperty(oe.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),oe.prototype.has=function(D){return this._map.has(D)},oe.prototype.add=function(D){return this._map.set(D,D),this},oe.prototype.delete=function(D){return this._map.delete(D)},oe.prototype.clear=function(){this._map.clear()},oe.prototype.keys=function(){return this._map.keys()},oe.prototype.values=function(){return this._map.keys()},oe.prototype.entries=function(){return this._map.entries()},oe.prototype["@@iterator"]=function(){return this.keys()},oe.prototype[o]=function(){return this.keys()},oe})();return Z}function Wc(){var Z=16,oe=l.create(),D=N();return(function(){function be(){this._key=N()}return be.prototype.has=function(xe){var Fe=K(xe,!1);return Fe!==void 0?l.has(Fe,this._key):!1},be.prototype.get=function(xe){var Fe=K(xe,!1);return Fe!==void 0?l.get(Fe,this._key):void 0},be.prototype.set=function(xe,Fe){var je=K(xe,!0);return je[this._key]=Fe,this},be.prototype.delete=function(xe){var Fe=K(xe,!1);return Fe!==void 0?delete Fe[this._key]:!1},be.prototype.clear=function(){this._key=N()},be})();function N(){var be;do be="@@WeakMap@@"+Ie();while(l.has(oe,be));return oe[be]=!0,be}function K(be,xe){if(!n.call(be,D)){if(!xe)return;Object.defineProperty(be,D,{value:l.create()})}return be[D]}function Q(be,xe){for(var Fe=0;Fe<xe;++Fe)be[Fe]=Math.random()*255|0;return be}function Oe(be){if(typeof Uint8Array=="function"){var xe=new Uint8Array(be);return typeof crypto<"u"?crypto.getRandomValues(xe):typeof msCrypto<"u"?msCrypto.getRandomValues(xe):Q(xe,be),xe}return Q(new Array(be),be)}function Ie(){var be=Oe(Z);be[6]=be[6]&79|64,be[8]=be[8]&191|128;for(var xe="",Fe=0;Fe<Z;++Fe){var je=be[Fe];(Fe===4||Fe===6||Fe===8)&&(xe+="-"),je<16&&(xe+="0"),xe+=je.toString(16).toLowerCase()}return xe}}function Fu(Z){return Z.__=void 0,delete Z.__,Z}})})(xde||(xde={}))});var Y8={};aa(Y8,{__assign:()=>fL,__asyncDelegator:()=>tnt,__asyncGenerator:()=>ent,__asyncValues:()=>rnt,__await:()=>U4,__awaiter:()=>Wrt,__classPrivateFieldGet:()=>ont,__classPrivateFieldSet:()=>ant,__createBinding:()=>Yrt,__decorate:()=>Grt,__exportStar:()=>Qrt,__extends:()=>Urt,__generator:()=>Jrt,__importDefault:()=>snt,__importStar:()=>int,__makeTemplateObject:()=>nnt,__metadata:()=>zrt,__param:()=>Hrt,__read:()=>Rde,__rest:()=>Vrt,__spread:()=>Xrt,__spreadArrays:()=>Zrt,__values:()=>hL});function Urt(t,e){pL(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Vrt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Grt(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Hrt(t,e){return function(r,n){e(r,n,t)}}function zrt(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Wrt(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function Jrt(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Yrt(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Qrt(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function hL(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rde(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Xrt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rde(arguments[e]));return t}function Zrt(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function U4(t){return this instanceof U4?(this.v=t,this):new U4(t)}function ent(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(f){return new Promise(function(h,g){s.push([p,f,h,g])>1||a(p,f)})})}function a(p,f){try{u(n[p](f))}catch(h){d(s[0][3],h)}}function u(p){p.value instanceof U4?Promise.resolve(p.value.v).then(c,l):d(s[0][2],p)}function c(p){a("next",p)}function l(p){a("throw",p)}function d(p,f){p(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function tnt(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:U4(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function rnt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof hL=="function"?hL(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function nnt(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function int(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function snt(t){return t&&t.__esModule?t:{default:t}}function ont(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ant(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var pL,fL,Q8=le(()=>{pL=function(t,e){return pL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},pL(t,e)};fL=function(){return fL=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fL.apply(this,arguments)}});var gL=m(yL=>{"use strict";Object.defineProperty(yL,"__esModule",{value:!0});var mL;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(mL||(mL={}));yL.default=mL});var Dde=m(EL=>{"use strict";Object.defineProperty(EL,"__esModule",{value:!0});var unt=gL();Object.defineProperty(EL,"Lifecycle",{enumerable:!0,get:function(){return unt.default}})});var zm=m(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.defineInjectionTokenMetadata=Xc.getParamInfo=Xc.INJECTION_TOKEN_METADATA_KEY=void 0;Xc.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function cnt(t){let e=Reflect.getMetadata("design:paramtypes",t)||[],r=Reflect.getOwnMetadata(Xc.INJECTION_TOKEN_METADATA_KEY,t)||{};return Object.keys(r).forEach(n=>{e[+n]=r[n]}),e}Xc.getParamInfo=cnt;function lnt(t,e){return function(r,n,i){let s=Reflect.getOwnMetadata(Xc.INJECTION_TOKEN_METADATA_KEY,r)||{};s[i]=e?{token:t,transform:e.transformToken,transformArgs:e.args||[]}:t,Reflect.defineMetadata(Xc.INJECTION_TOKEN_METADATA_KEY,s,r)}}Xc.defineInjectionTokenMetadata=lnt});var bL=m(X8=>{"use strict";Object.defineProperty(X8,"__esModule",{value:!0});X8.isClassProvider=void 0;function dnt(t){return!!t.useClass}X8.isClassProvider=dnt});var _L=m(Z8=>{"use strict";Object.defineProperty(Z8,"__esModule",{value:!0});Z8.isFactoryProvider=void 0;function pnt(t){return!!t.useFactory}Z8.isFactoryProvider=pnt});var t5=m(k2=>{"use strict";Object.defineProperty(k2,"__esModule",{value:!0});k2.delay=k2.DelayedConstructor=void 0;var e5=class{constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let r={},n=!1,i,s=()=>(n||(i=e(this.wrap()),n=!0),i);return new Proxy(r,this.createHandler(s))}createHandler(e){let r={},n=i=>{r[i]=(...s)=>{s[0]=e();let o=Reflect[i];return o(...s)}};return this.reflectMethods.forEach(n),r}};k2.DelayedConstructor=e5;function fnt(t){if(typeof t>"u")throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new e5(t)}k2.delay=fnt});var r5=m(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.isConstructorToken=ld.isTransformDescriptor=ld.isTokenDescriptor=ld.isNormalToken=void 0;var hnt=t5();function mnt(t){return typeof t=="string"||typeof t=="symbol"}ld.isNormalToken=mnt;function ynt(t){return typeof t=="object"&&"token"in t&&"multiple"in t}ld.isTokenDescriptor=ynt;function gnt(t){return typeof t=="object"&&"token"in t&&"transform"in t}ld.isTransformDescriptor=gnt;function Ent(t){return typeof t=="function"||t instanceof hnt.DelayedConstructor}ld.isConstructorToken=Ent});var vL=m(n5=>{"use strict";Object.defineProperty(n5,"__esModule",{value:!0});n5.isTokenProvider=void 0;function bnt(t){return!!t.useToken}n5.isTokenProvider=bnt});var SL=m(i5=>{"use strict";Object.defineProperty(i5,"__esModule",{value:!0});i5.isValueProvider=void 0;function _nt(t){return t.useValue!=null}i5.isValueProvider=_nt});var wL=m(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});var vnt=bL();Object.defineProperty(Wm,"isClassProvider",{enumerable:!0,get:function(){return vnt.isClassProvider}});var Snt=_L();Object.defineProperty(Wm,"isFactoryProvider",{enumerable:!0,get:function(){return Snt.isFactoryProvider}});var wnt=r5();Object.defineProperty(Wm,"isNormalToken",{enumerable:!0,get:function(){return wnt.isNormalToken}});var Ant=vL();Object.defineProperty(Wm,"isTokenProvider",{enumerable:!0,get:function(){return Ant.isTokenProvider}});var Cnt=SL();Object.defineProperty(Wm,"isValueProvider",{enumerable:!0,get:function(){return Cnt.isValueProvider}})});var kde=m(s5=>{"use strict";Object.defineProperty(s5,"__esModule",{value:!0});s5.isProvider=void 0;var Tnt=bL(),Ont=SL(),xnt=vL(),Int=_L();function Rnt(t){return Tnt.isClassProvider(t)||Ont.isValueProvider(t)||xnt.isTokenProvider(t)||Int.isFactoryProvider(t)}s5.isProvider=Rnt});var TL=m(CL=>{"use strict";Object.defineProperty(CL,"__esModule",{value:!0});var AL=class{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);let r=this._registryMap.get(e);return r[r.length-1]||null}set(e,r){this.ensure(e),this._registryMap.get(e).push(r)}setAll(e,r){this._registryMap.set(e,r)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}};CL.default=AL});var Mde=m(xL=>{"use strict";Object.defineProperty(xL,"__esModule",{value:!0});var Dnt=TL(),OL=class extends Dnt.default{};xL.default=OL});var Pde=m(RL=>{"use strict";Object.defineProperty(RL,"__esModule",{value:!0});var IL=class{constructor(){this.scopedResolutions=new Map}};RL.default=IL});var DL=m(o5=>{"use strict";Object.defineProperty(o5,"__esModule",{value:!0});o5.formatErrorCtor=void 0;function knt(t,e){return t===null?`at position #${e}`:`"${t.split(",")[e].trim()}" at position #${e}`}function Mnt(t,e,r="    "){return[t,...e.message.split(`
`).map(n=>r+n)].join(`
`)}function Pnt(t,e,r){let[,n=null]=t.toString().match(/constructor\(([\w, ]+)\)/)||[],i=knt(n,e);return Mnt(`Cannot inject the dependency ${i} of "${t.name}" constructor. Reason:`,r)}o5.formatErrorCtor=Pnt});var Nde=m(a5=>{"use strict";Object.defineProperty(a5,"__esModule",{value:!0});a5.isDisposable=void 0;function Nnt(t){return!(typeof t.dispose!="function"||t.dispose.length>0)}a5.isDisposable=Nnt});var Bde=m(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.PostResolutionInterceptors=Jm.PreResolutionInterceptors=void 0;var Fde=TL(),u5=class extends Fde.default{};Jm.PreResolutionInterceptors=u5;var c5=class extends Fde.default{};Jm.PostResolutionInterceptors=c5;var kL=class{constructor(){this.preResolution=new u5,this.postResolution=new c5}};Jm.default=kL});var h1=m(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.instance=gp.typeInfo=void 0;var Fnt=(Q8(),Jt(Y8)),Oo=wL(),Bnt=kde(),l5=r5(),qnt=Mde(),ua=gL(),d5=Pde(),Lnt=DL(),jnt=t5(),$nt=Nde(),Knt=Bde();gp.typeInfo=new Map;var ML=class t{constructor(e){this.parent=e,this._registry=new qnt.default,this.interceptors=new Knt.default,this.disposed=!1,this.disposables=new Set}register(e,r,n={lifecycle:ua.default.Transient}){this.ensureNotDisposed();let i;if(Bnt.isProvider(r)?i=r:i={useClass:r},Oo.isTokenProvider(i)){let s=[e],o=i;for(;o!=null;){let a=o.useToken;if(s.includes(a))throw new Error(`Token registration cycle detected! ${[...s,a].join(" -> ")}`);s.push(a);let u=this._registry.get(a);u&&Oo.isTokenProvider(u.provider)?o=u.provider:o=null}}if((n.lifecycle===ua.default.Singleton||n.lifecycle==ua.default.ContainerScoped||n.lifecycle==ua.default.ResolutionScoped)&&(Oo.isValueProvider(i)||Oo.isFactoryProvider(i)))throw new Error(`Cannot use lifecycle "${ua.default[n.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:i,options:n}),this}registerType(e,r){return this.ensureNotDisposed(),Oo.isNormalToken(r)?this.register(e,{useToken:r}):this.register(e,{useClass:r})}registerInstance(e,r){return this.ensureNotDisposed(),this.register(e,{useValue:r})}registerSingleton(e,r){if(this.ensureNotDisposed(),Oo.isNormalToken(e)){if(Oo.isNormalToken(r))return this.register(e,{useToken:r},{lifecycle:ua.default.Singleton});if(r)return this.register(e,{useClass:r},{lifecycle:ua.default.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let n=e;return r&&!Oo.isNormalToken(r)&&(n=r),this.register(e,{useClass:n},{lifecycle:ua.default.Singleton})}resolve(e,r=new d5.default,n=!1){this.ensureNotDisposed();let i=this.getRegistration(e);if(!i&&Oo.isNormalToken(e)){if(n)return;throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"Single"),i){let s=this.resolveRegistration(i,r);return this.executePostResolutionInterceptor(e,s,"Single"),s}if(l5.isConstructorToken(e)){let s=this.construct(e,r);return this.executePostResolutionInterceptor(e,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,r){if(this.interceptors.preResolution.has(e)){let n=[];for(let i of this.interceptors.preResolution.getAll(e))i.options.frequency!="Once"&&n.push(i),i.callback(e,r);this.interceptors.preResolution.setAll(e,n)}}executePostResolutionInterceptor(e,r,n){if(this.interceptors.postResolution.has(e)){let i=[];for(let s of this.interceptors.postResolution.getAll(e))s.options.frequency!="Once"&&i.push(s),s.callback(e,r,n);this.interceptors.postResolution.setAll(e,i)}}resolveRegistration(e,r){if(this.ensureNotDisposed(),e.options.lifecycle===ua.default.ResolutionScoped&&r.scopedResolutions.has(e))return r.scopedResolutions.get(e);let n=e.options.lifecycle===ua.default.Singleton,i=e.options.lifecycle===ua.default.ContainerScoped,s=n||i,o;return Oo.isValueProvider(e.provider)?o=e.provider.useValue:Oo.isTokenProvider(e.provider)?o=s?e.instance||(e.instance=this.resolve(e.provider.useToken,r)):this.resolve(e.provider.useToken,r):Oo.isClassProvider(e.provider)?o=s?e.instance||(e.instance=this.construct(e.provider.useClass,r)):this.construct(e.provider.useClass,r):Oo.isFactoryProvider(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,r),e.options.lifecycle===ua.default.ResolutionScoped&&r.scopedResolutions.set(e,o),o}resolveAll(e,r=new d5.default,n=!1){this.ensureNotDisposed();let i=this.getAllRegistrations(e);if(!i&&Oo.isNormalToken(e)){if(n)return[];throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"All"),i){let o=i.map(a=>this.resolveRegistration(a,r));return this.executePostResolutionInterceptor(e,o,"All"),o}let s=[this.construct(e,r)];return this.executePostResolutionInterceptor(e,s,"All"),s}isRegistered(e,r=!1){return this.ensureNotDisposed(),this._registry.has(e)||r&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(let[e,r]of this._registry.entries())this._registry.setAll(e,r.filter(n=>!Oo.isValueProvider(n.provider)).map(n=>(n.instance=void 0,n)))}createChildContainer(){this.ensureNotDisposed();let e=new t(this);for(let[r,n]of this._registry.entries())n.some(({options:i})=>i.lifecycle===ua.default.ContainerScoped)&&e._registry.setAll(r,n.map(i=>i.options.lifecycle===ua.default.ContainerScoped?{provider:i.provider,options:i.options}:i));return e}beforeResolution(e,r,n={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:r,options:n})}afterResolution(e,r,n={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:r,options:n})}dispose(){return Fnt.__awaiter(this,void 0,void 0,function*(){this.disposed=!0;let e=[];this.disposables.forEach(r=>{let n=r.dispose();n&&e.push(n)}),yield Promise.all(e)})}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,r){if(e instanceof jnt.DelayedConstructor)return e.createProxy(i=>this.resolve(i,r));let n=(()=>{let i=gp.typeInfo.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}let s=i.map(this.resolveParams(r,e));return new e(...s)})();return $nt.isDisposable(n)&&this.disposables.add(n),n}resolveParams(e,r){return(n,i)=>{try{return l5.isTokenDescriptor(n)?l5.isTransformDescriptor(n)?n.multiple?this.resolve(n.transform).transform(this.resolveAll(n.token,new d5.default,n.isOptional),...n.transformArgs):this.resolve(n.transform).transform(this.resolve(n.token,e,n.isOptional),...n.transformArgs):n.multiple?this.resolveAll(n.token,new d5.default,n.isOptional):this.resolve(n.token,e,n.isOptional):l5.isTransformDescriptor(n)?this.resolve(n.transform,e).transform(this.resolve(n.token,e),...n.transformArgs):this.resolve(n,e)}catch(s){throw new Error(Lnt.formatErrorCtor(r,i,s))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}};gp.instance=new ML;gp.default=gp.instance});var qde=m(NL=>{"use strict";Object.defineProperty(NL,"__esModule",{value:!0});var Unt=zm(),Ep=h1(),PL=r5(),Vnt=DL();function Gnt(){return function(t){let e=Unt.getParamInfo(t);return class extends t{constructor(...r){super(...r.concat(e.slice(r.length).map((n,i)=>{try{return PL.isTokenDescriptor(n)?PL.isTransformDescriptor(n)?n.multiple?Ep.instance.resolve(n.transform).transform(Ep.instance.resolveAll(n.token),...n.transformArgs):Ep.instance.resolve(n.transform).transform(Ep.instance.resolve(n.token),...n.transformArgs):n.multiple?Ep.instance.resolveAll(n.token):Ep.instance.resolve(n.token):PL.isTransformDescriptor(n)?Ep.instance.resolve(n.transform).transform(Ep.instance.resolve(n.token),...n.transformArgs):Ep.instance.resolve(n)}catch(s){let o=i+r.length;throw new Error(Vnt.formatErrorCtor(t,o,s))}})))}}}}NL.default=Gnt});var Lde=m(FL=>{"use strict";Object.defineProperty(FL,"__esModule",{value:!0});var Hnt=zm();function znt(t,e){let r={token:t,multiple:!1,isOptional:e&&e.isOptional};return Hnt.defineInjectionTokenMetadata(r)}FL.default=znt});var p5=m(BL=>{"use strict";Object.defineProperty(BL,"__esModule",{value:!0});var Wnt=zm(),Jnt=h1(),jde=h1();function Ynt(t){return function(e){Jnt.typeInfo.set(e,Wnt.getParamInfo(e)),t&&t.token&&(Array.isArray(t.token)?t.token.forEach(r=>{jde.instance.register(r,e)}):jde.instance.register(t.token,e))}}BL.default=Ynt});var $de=m(qL=>{"use strict";Object.defineProperty(qL,"__esModule",{value:!0});var Qnt=(Q8(),Jt(Y8)),Xnt=h1();function Znt(t=[]){return function(e){return t.forEach(r=>{var{token:n,options:i}=r,s=Qnt.__rest(r,["token","options"]);return Xnt.instance.register(n,s,i)}),e}}qL.default=Znt});var Kde=m(LL=>{"use strict";Object.defineProperty(LL,"__esModule",{value:!0});var eit=p5(),tit=h1();function rit(){return function(t){eit.default()(t),tit.instance.registerSingleton(t)}}LL.default=rit});var Ude=m(jL=>{"use strict";Object.defineProperty(jL,"__esModule",{value:!0});var nit=zm();function iit(t,e){let r={token:t,multiple:!0,isOptional:e&&e.isOptional};return nit.defineInjectionTokenMetadata(r)}jL.default=iit});var Vde=m($L=>{"use strict";Object.defineProperty($L,"__esModule",{value:!0});var sit=zm();function oit(t,e,...r){let n={token:t,multiple:!0,transform:e,transformArgs:r};return sit.defineInjectionTokenMetadata(n)}$L.default=oit});var Gde=m(KL=>{"use strict";Object.defineProperty(KL,"__esModule",{value:!0});var ait=zm();function uit(t,e,...r){return ait.defineInjectionTokenMetadata(t,{transformToken:e,args:r})}KL.default=uit});var Hde=m(UL=>{"use strict";Object.defineProperty(UL,"__esModule",{value:!0});var cit=p5(),lit=h1();function dit(t,e){return function(r){cit.default()(r),lit.instance.register(e||r,r,{lifecycle:t})}}UL.default=dit});var zde=m(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});var pit=qde();Object.defineProperty(Zc,"autoInjectable",{enumerable:!0,get:function(){return pit.default}});var fit=Lde();Object.defineProperty(Zc,"inject",{enumerable:!0,get:function(){return fit.default}});var hit=p5();Object.defineProperty(Zc,"injectable",{enumerable:!0,get:function(){return hit.default}});var mit=$de();Object.defineProperty(Zc,"registry",{enumerable:!0,get:function(){return mit.default}});var yit=Kde();Object.defineProperty(Zc,"singleton",{enumerable:!0,get:function(){return yit.default}});var git=Ude();Object.defineProperty(Zc,"injectAll",{enumerable:!0,get:function(){return git.default}});var Eit=Vde();Object.defineProperty(Zc,"injectAllWithTransform",{enumerable:!0,get:function(){return Eit.default}});var bit=Gde();Object.defineProperty(Zc,"injectWithTransform",{enumerable:!0,get:function(){return bit.default}});var _it=Hde();Object.defineProperty(Zc,"scoped",{enumerable:!0,get:function(){return _it.default}})});var Wde=m(VL=>{"use strict";Object.defineProperty(VL,"__esModule",{value:!0});function vit(t){let e;return r=>(e==null&&(e=t(r)),e)}VL.default=vit});var Jde=m(GL=>{"use strict";Object.defineProperty(GL,"__esModule",{value:!0});function Sit(t){let e=new WeakMap;return r=>{let n=e.get(r);return n==null&&(n=t(r),e.set(r,n)),n}}GL.default=Sit});var Yde=m(HL=>{"use strict";Object.defineProperty(HL,"__esModule",{value:!0});function wit(t,e,r,n=!0){let i,s;return o=>{let a=t(o);return(!n||s!==a)&&((s=a)?i=o.resolve(e):i=o.resolve(r)),i}}HL.default=wit});var Qde=m(V4=>{"use strict";Object.defineProperty(V4,"__esModule",{value:!0});var Ait=Wde();Object.defineProperty(V4,"instanceCachingFactory",{enumerable:!0,get:function(){return Ait.default}});var Cit=Jde();Object.defineProperty(V4,"instancePerContainerCachingFactory",{enumerable:!0,get:function(){return Cit.default}});var Tit=Yde();Object.defineProperty(V4,"predicateAwareClassFactory",{enumerable:!0,get:function(){return Tit.default}})});var Ym=m(m1=>{"use strict";Object.defineProperty(m1,"__esModule",{value:!0});var zL=(Q8(),Jt(Y8));if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Oit=Dde();Object.defineProperty(m1,"Lifecycle",{enumerable:!0,get:function(){return Oit.Lifecycle}});zL.__exportStar(zde(),m1);zL.__exportStar(Qde(),m1);zL.__exportStar(wL(),m1);var xit=t5();Object.defineProperty(m1,"delay",{enumerable:!0,get:function(){return xit.delay}});var Iit=h1();Object.defineProperty(m1,"container",{enumerable:!0,get:function(){return Iit.instance}})});var ca=m(Fr=>{"use strict";var Rit=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function N2(t){return Rit(t)==="Uint8Array"}function bj(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function F2(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function _j(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function B2(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function za(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:_j(n)?Object.fromEntries(n):n)}function Dit(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var Xm=6,j2=Symbol.for("@@mdb.bson.version"),J4=2147483647,Y4=-2147483648,fpe=Math.pow(2,63)-1,hpe=-Math.pow(2,63),mpe=Math.pow(2,53),ype=-Math.pow(2,53),vj=1,gpe=2,Sj=3,Epe=4,wj=5,kit=6,bpe=7,_pe=8,vpe=9,Aj=10,m5=11,Mit=12,Cj=13,Spe=14,wpe=15,z4=16,Ape=17,Tj=18,Cpe=19,Tpe=255,Ope=127,Pit=0,Oj=4,xpe=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),ge=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},Sp=class extends ge{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${Xm}.x.x`)}},$2=class extends ge{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},ju=class extends ge{get name(){return"BSONOffsetError"}constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},Xde,Zde;function Ipe(t,e,r,n){if(n){Xde??=new TextDecoder("utf8",{fatal:!0});try{return Xde.decode(t.subarray(e,r))}catch(i){throw new ge("Invalid UTF-8 string in BSON document",{cause:i})}}return Zde??=new TextDecoder("utf8",{fatal:!1}),Zde.decode(t.subarray(e,r))}function Rpe(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let i=[];for(let s=e;s<r;s++){let o=t[s];if(o>127)return null;i.push(o)}return String.fromCharCode(...i)}function Nit(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,i=r;n<e.length;n++,i++){let s=e.charCodeAt(n);if(s>127)return null;t[i]=s}return e.length}function Fit(t){return _p.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var Bit=(()=>{try{return require("crypto").randomBytes}catch{return Fit}})(),_p={toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new ge("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},equals(t,e){return _p.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},toBase64(t){return _p.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return _p.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return _p.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let i=r-e<=20?Rpe(t,e,r):null;if(i!=null)return i;let s=_p.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let o=0;o<s.length;o++)if(s.charCodeAt(o)===65533){Ipe(t,e,r,!0);break}}return s},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=Nit(t,e,r);return n??_p.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:Bit,swap32(t){return _p.toLocalBufferType(t).swap32()}};function qit(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function Lit(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return W4.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var jit=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(W4.allocate(e));if(qit()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return Lit})(),epe=/(\d|[a-f])/i,W4={toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new ge("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return W4.allocate(t)},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},toBase64(t){return btoa(W4.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];if(!epe.test(i)||!epe.test(s))break;let o=Number.parseInt(`${i}${s}`,16);r.push(o)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let i=r-e<=20?Rpe(t,e,r):null;return i??Ipe(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:jit,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],i=t[e+2],s=t[e+3];t[e]=s,t[e+1]=i,t[e+2]=n,t[e+3]=r}return t}},$it=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,ye=$it?_p:W4,Zs=class{get[j2](){return Xm}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},q2=new Float64Array(1),Cr=new Uint8Array(q2.buffer,0,8);q2[0]=-1;var WL=Cr[7]===0,ht={isBigEndian:WL,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=BigInt(t[e+4]+t[e+5]*256+t[e+6]*65536+(t[e+7]<<24)),n=BigInt(t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216);return(r<<BigInt(32))+n},getFloat64LE:WL?(t,e)=>(Cr[7]=t[e],Cr[6]=t[e+1],Cr[5]=t[e+2],Cr[4]=t[e+3],Cr[3]=t[e+4],Cr[2]=t[e+5],Cr[1]=t[e+6],Cr[0]=t[e+7],q2[0]):(t,e)=>(Cr[0]=t[e],Cr[1]=t[e+1],Cr[2]=t[e+2],Cr[3]=t[e+3],Cr[4]=t[e+4],Cr[5]=t[e+5],Cr[6]=t[e+6],Cr[7]=t[e+7],q2[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=BigInt(4294967295),i=Number(r&n);t[e]=i,i>>=8,t[e+1]=i,i>>=8,t[e+2]=i,i>>=8,t[e+3]=i;let s=Number(r>>BigInt(32)&n);return t[e+4]=s,s>>=8,t[e+5]=s,s>>=8,t[e+6]=s,s>>=8,t[e+7]=s,8},setFloat64LE:WL?(t,e,r)=>(q2[0]=r,t[e]=Cr[7],t[e+1]=Cr[6],t[e+2]=Cr[5],t[e+3]=Cr[4],t[e+4]=Cr[3],t[e+5]=Cr[2],t[e+6]=Cr[1],t[e+7]=Cr[0],8):(t,e,r)=>(q2[0]=r,t[e]=Cr[0],t[e+1]=Cr[1],t[e+2]=Cr[2],t[e+3]=Cr[3],t[e+4]=Cr[4],t[e+5]=Cr[5],t[e+6]=Cr[6],t[e+7]=Cr[7],8)},dr=class t extends Zs{get _bsontype(){return"Binary"}constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!bj(e)&&!Array.isArray(e))throw new ge("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=ye.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?ye.fromNumberArray(e):ye.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new ge("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new ge("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new ge("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=ye.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=ye.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(ye.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new ge("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return ye.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?ye.toHex(this.buffer.subarray(0,this.position)):e==="base64"?ye.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?ye.toUTF8(this.buffer,0,this.position,!1):ye.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&bp(this);let r=ye.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new g1(this.buffer.subarray(0,this.position));throw new ge(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(ye.fromHex(e),r)}static createFromBase64(e,r){return new t(ye.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=ye.fromBase64(e.$binary)):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=ye.fromBase64(e.$binary.base64)):"$uuid"in e&&(i=4,n=g1.bytesFromString(e.$uuid)),!n)throw new ge(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return i===Oj?new g1(n):new t(n,i)}inspect(e,r,n){n??=za;let i=ye.toBase64(this.buffer.subarray(0,this.position)),s=n(i,r),o=n(this.sub_type,r);return`Binary.createFromBase64(${s}, ${o})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new ge("Binary datatype field is not Int8");return bp(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new ge("Binary datatype field is not Float32");bp(this);let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return ht.isBigEndian&&ye.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new ge("Binary datatype field is not packed bit");return bp(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new ge("Binary datatype field is not packed bit");bp(this);let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let i=0;i<n.length;i++){let s=i/8|0,o=this.buffer[s+2],a=7-i%8,u=o>>a&1;n[i]=u}return n}static fromInt8Array(e){let r=ye.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2);let i=new this(r,this.SUBTYPE_VECTOR);return bp(i),i}static fromFloat32Array(e){let r=ye.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2),ht.isBigEndian&&ye.swap32(new Uint8Array(r.buffer,2));let i=new this(r,this.SUBTYPE_VECTOR);return bp(i),i}static fromPackedBits(e,r=0){let n=ye.allocate(e.byteLength+2);n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2);let i=new this(n,this.SUBTYPE_VECTOR);return bp(i),i}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let i=e.length%8;n[1]=i===0?0:8-i;for(let s=0;s<e.length;s++){let o=s>>>3,a=e[s];if(a!==0&&a!==1)throw new ge(`Invalid bit value at ${s}: must be 0 or 1, found ${e[s]}`);if(a===0)continue;let u=7-s%8;n[o+2]|=a<<u}return new this(n,t.SUBTYPE_VECTOR)}};dr.BSON_BINARY_SUBTYPE_DEFAULT=0;dr.BUFFER_SIZE=256;dr.SUBTYPE_DEFAULT=0;dr.SUBTYPE_FUNCTION=1;dr.SUBTYPE_BYTE_ARRAY=2;dr.SUBTYPE_UUID_OLD=3;dr.SUBTYPE_UUID=4;dr.SUBTYPE_MD5=5;dr.SUBTYPE_ENCRYPTED=6;dr.SUBTYPE_COLUMN=7;dr.SUBTYPE_SENSITIVE=8;dr.SUBTYPE_VECTOR=9;dr.SUBTYPE_USER_DEFINED=128;dr.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function bp(t){if(t.sub_type!==dr.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===dr.VECTOR_TYPE.Float32||r===dr.VECTOR_TYPE.Int8)&&n!==0)throw new ge("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===dr.VECTOR_TYPE.Float32&&e!==0&&e-2!==0&&(e-2)%4!==0)throw new ge("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===dr.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new ge("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===dr.VECTOR_TYPE.PackedBit&&n>7)throw new ge(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var JL=16,Kit=/^[0-9A-F]{32}$/i,Uit=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,g1=class t extends dr{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=ye.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===JL)r=ye.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new ge("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,Oj)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[ye.toHex(this.buffer.subarray(0,4)),ye.toHex(this.buffer.subarray(4,6)),ye.toHex(this.buffer.subarray(6,8)),ye.toHex(this.buffer.subarray(8,10)),ye.toHex(this.buffer.subarray(10,16))].join("-"):ye.toHex(this.buffer)}toString(e){return e==="hex"?ye.toHex(this.id):e==="base64"?ye.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return ye.equals(e.id,this.id);try{return ye.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new dr(this.id,dr.SUBTYPE_UUID)}static generate(){let e=ye.randomBytes(JL);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):N2(e)?e.byteLength===JL:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(ye.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new ge("UUID string representation must be 32 hex digits or canonical hyphenated representation");return ye.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return Kit.test(e)||Uit.test(e)}inspect(e,r,n){return n??=za,`new UUID(${n(this.toHexString(),r)})`}},wp=class t extends Zs{get _bsontype(){return"Code"}constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=za;let i=n(this.code,r),s=i.includes(`
`);this.scope!=null&&(i+=`,${s?`
`:" "}${n(this.scope,r)}`);let o=s&&this.scope===null;return`new Code(${s?`
`:""}${i}${o?`
`:""})`}};function Dpe(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var dd=class t extends Zs{get _bsontype(){return"DBRef"}constructor(e,r,n,i){super();let s=e.split(".");s.length===2&&(n=s.shift(),e=s.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=za;let i=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return i[1]=n===za?`new ObjectId(${i[1]})`:i[1],`new DBRef(${i.join(", ")})`}};function kpe(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let i=!1;for(;e<t.length&&t[e]==="0";++e)i=!0;return i?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function Vit(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var Lu;try{Lu=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var tpe=65536,Git=1<<24,L2=tpe*tpe,Mpe=L2*L2,Hit=Mpe/2,rpe={},npe={},zit=20,Wit=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,Le=class t extends Zs{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,r,n){super();let i=typeof r=="boolean"?r:!!n,s=typeof r=="number"?r:0,o=typeof e=="string"?t.fromString(e,i):typeof e=="bigint"?t.fromBigInt(e,i):{low:e|0,high:s|0,unsigned:i};this.low=o.low,this.high=o.high,this.unsigned=o.unsigned}static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,i,s;return r?(e>>>=0,(s=0<=e&&e<256)&&(i=npe[e],i)?i:(n=t.fromBits(e,(e|0)<0?-1:0,!0),s&&(npe[e]=n),n)):(e|=0,(s=-128<=e&&e<128)&&(i=rpe[e],i)?i:(n=t.fromBits(e,e<0?-1:0,!1),s&&(rpe[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=Mpe)return t.MAX_UNSIGNED_VALUE}else{if(e<=-9223372036854776e3)return t.MIN_VALUE;if(e+1>=Hit)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%L2|0,e/L2|0,r)}static fromBigInt(e,r){let n=BigInt(4294967295),i=BigInt(32);return new t(Number(e&n),Number(e>>i&n),r)}static _fromString(e,r,n){if(e.length===0)throw new ge("empty string");if(n<2||36<n)throw new ge("radix");let i;if((i=e.indexOf("-"))>0)throw new ge("interior hyphen");if(i===0)return t._fromString(e.substring(1),r,n).neg();let s=t.fromNumber(Math.pow(n,8)),o=t.ZERO;for(let a=0;a<e.length;a+=8){let u=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+u),n);if(u<8){let l=t.fromNumber(Math.pow(n,u));o=o.mul(l).add(t.fromNumber(c))}else o=o.mul(s),o=o.add(t.fromNumber(c))}return o.unsigned=r,o}static fromStringStrict(e,r,n){let i=!1;if(typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e.trim()!==e)throw new ge(`Input: '${e}' contains leading and/or trailing whitespace`);if(!Vit(e,n))throw new ge(`Input: '${e}' contains invalid characters for radix: ${n}`);let s=kpe(e),o=t._fromString(s,i,n);if(o.toString(n).toLowerCase()!==s.toLowerCase())throw new ge(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return o}static fromString(e,r,n){let i=!1;return typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,i,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,d=0,p=0,f=0;return f+=s+c,p+=f>>>16,f&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=n+a,l+=d>>>16,d&=65535,l+=r+o,l&=65535,t.fromBits(p<<16|f,l<<16|d,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new ge("division by zero");if(Lu){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let s=(this.unsigned?Lu.div_u:Lu.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(s,Lu.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;i=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),i=r.add(n.div(e)),i));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let s=Math.ceil(Math.log(r)/Math.LN2),o=s<=48?1:Math.pow(2,s-48),a=t.fromNumber(r),u=a.mul(e);for(;u.isNegative()||u.gt(n);)r-=o,a=t.fromNumber(r,this.unsigned),u=a.mul(e);a.isZero()&&(a=t.ONE),i=i.add(a),n=n.sub(u)}return i}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),Lu){let r=(this.unsigned?Lu.rem_u:Lu.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Lu.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Lu){let h=Lu.mul(this.low,this.high,e.low,e.high);return t.fromBits(h,Lu.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,d=0,p=0,f=0;return f+=s*c,p+=f>>>16,f&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=s*u,d+=p>>>16,p&=65535,d+=n*c,l+=d>>>16,d&=65535,d+=i*u,l+=d>>>16,d&=65535,d+=s*a,l+=d>>>16,d&=65535,l+=r*c+n*u+i*a+s*o,l&=65535,t.fromBits(p<<16|f,l<<16|d,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*L2+(this.low>>>0):this.high*L2+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new ge("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let s=t.fromNumber(e),o=this.div(s),a=o.mul(s).sub(this);return o.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,i="";for(;;){let s=n.div(r),a=(n.sub(s.mul(r)).toInt()>>>0).toString(e);if(n=s,n.isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:i=!0}={...r};if(e.$numberLong.length>zit)throw new ge("$numberLong string is too long");if(!Wit.test(e.$numberLong))throw new ge(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let o=BigInt(e.$numberLong);return BigInt.asIntN(64,o)}let s=t.fromString(e.$numberLong);return i?s.toNumber():s}inspect(e,r,n){n??=za;let i=n(this.toString(),r),s=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${i}${s})`}};Le.TWO_PWR_24=Le.fromInt(Git);Le.MAX_UNSIGNED_VALUE=Le.fromBits(-1,-1,!0);Le.ZERO=Le.fromInt(0);Le.UZERO=Le.fromInt(0,!0);Le.ONE=Le.fromInt(1);Le.UONE=Le.fromInt(1,!0);Le.NEG_ONE=Le.fromInt(-1);Le.MAX_VALUE=Le.fromBits(-1,2147483647,!1);Le.MIN_VALUE=Le.fromBits(0,-2147483648,!1);var Jit=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Yit=/^(\+|-)?(Infinity|inf)$/i,Qit=/^(\+|-)?NaN$/i,M2=6111,G4=-6176,ipe=6176,spe=34,YL=ye.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ope=ye.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ape=ye.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Xit=/^([-+])?(\d+)?$/,Zit=31,upe=16383,est=30,tst=31;function cpe(t){return!isNaN(parseInt(t,10))}function rst(t){let e=Le.fromNumber(1e9),r=Le.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new Le(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function nst(t,e){if(!t&&!e)return{high:Le.fromNumber(0),low:Le.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new Le(t.getLowBits(),0),i=e.shiftRightUnsigned(32),s=new Le(e.getLowBits(),0),o=r.multiply(i),a=r.multiply(s),u=n.multiply(i),c=n.multiply(s);return o=o.add(a.shiftRightUnsigned(32)),a=new Le(a.getLowBits(),0).add(u).add(c.shiftRightUnsigned(32)),o=o.add(a.shiftRightUnsigned(32)),c=a.shiftLeft(32).add(new Le(c.getLowBits(),0)),{high:o,low:c}}function ist(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let i=t.low>>>0,s=e.low>>>0;if(i<s)return!0}return!1}function el(t,e){throw new ge(`"${t}" is not a valid Decimal128 string - ${e}`)}var Zm=class t extends Zs{get _bsontype(){return"Decimal128"}constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||N2(e)){if(e.byteLength!==16)throw new ge("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new ge("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,i=!1,s=!1,o=!1,a=0,u=0,c=0,l=0,d=0,p=[0],f=0,h=0,g=0,_=0,S=new Le(0,0),w=new Le(0,0),C=0,A=0;if(e.length>=7e3)throw new ge(""+e+" not a valid Decimal128 string");let O=e.match(Jit),x=e.match(Yit),R=e.match(Qit);if(!O&&!x&&!R||e.length===0)throw new ge(""+e+" not a valid Decimal128 string");if(O){let B=O[2],U=O[4],k=O[5],H=O[6];U&&H===void 0&&el(e,"missing exponent power"),U&&B===void 0&&el(e,"missing exponent base"),U===void 0&&(k||H)&&el(e,"missing e before exponent")}if((e[A]==="+"||e[A]==="-")&&(i=!0,n=e[A++]==="-"),!cpe(e[A])&&e[A]!=="."){if(e[A]==="i"||e[A]==="I")return new t(n?ope:ape);if(e[A]==="N")return new t(YL)}for(;cpe(e[A])||e[A]===".";){if(e[A]==="."){s&&el(e,"contains multiple periods"),s=!0,A=A+1;continue}f<spe&&(e[A]!=="0"||o)&&(o||(d=u),o=!0,p[h++]=parseInt(e[A],10),f=f+1),o&&(c=c+1),s&&(l=l+1),u=u+1,A=A+1}if(s&&!u)throw new ge(""+e+" not a valid Decimal128 string");if(e[A]==="e"||e[A]==="E"){let B=e.substr(++A).match(Xit);if(!B||!B[2])return new t(YL);_=parseInt(B[0],10),A=A+B[0].length}if(e[A])return new t(YL);if(!f)p[0]=0,c=1,f=1,a=0;else if(g=f-1,a=c,a!==1)for(;e[d+a-1+Number(i)+Number(s)]==="0";)a=a-1;for(_<=l&&l>_+16384?_=G4:_=_-l;_>M2;){if(g=g+1,g>=spe){if(a===0){_=M2;break}el(e,"overflow")}_=_-1}if(r.allowRounding){for(;_<G4||f<c;){if(g===0&&a<f){_=G4,a=0;break}if(f<c?c=c-1:g=g-1,_<M2)_=_+1;else{if(p.join("").match(/^0+$/)){_=M2;break}el(e,"overflow")}}if(g+1<a){let B=u;s&&(d=d+1,B=B+1),i&&(d=d+1,B=B+1);let U=parseInt(e[d+g+1],10),k=0;if(U>=5&&(k=1,U===5)){k=p[g]%2===1?1:0;for(let H=d+g+2;H<B;H++)if(parseInt(e[H],10)){k=1;break}}if(k){let H=g;for(;H>=0&&++p[H]>9;H--)if(p[H]=0,H===0)if(_<M2)_=_+1,p[H]=1;else return new t(n?ope:ape)}}}else{for(;_<G4||f<c;){if(g===0){if(a===0){_=G4;break}el(e,"exponent underflow")}f<c?(e[c-1+Number(i)+Number(s)]!=="0"&&a!==0&&el(e,"inexact rounding"),c=c-1):(p[g]!==0&&el(e,"inexact rounding"),g=g-1),_<M2?_=_+1:el(e,"overflow")}g+1<a&&(s&&(d=d+1),i&&(d=d+1),parseInt(e[d+g+1],10)!==0&&el(e,"inexact rounding"))}if(S=Le.fromNumber(0),w=Le.fromNumber(0),a===0)S=Le.fromNumber(0),w=Le.fromNumber(0);else if(g<17){let B=0;for(w=Le.fromNumber(p[B++]),S=new Le(0,0);B<=g;B++)w=w.multiply(Le.fromNumber(10)),w=w.add(Le.fromNumber(p[B]))}else{let B=0;for(S=Le.fromNumber(p[B++]);B<=g-17;B++)S=S.multiply(Le.fromNumber(10)),S=S.add(Le.fromNumber(p[B]));for(w=Le.fromNumber(p[B++]);B<=g;B++)w=w.multiply(Le.fromNumber(10)),w=w.add(Le.fromNumber(p[B]))}let M=nst(S,Le.fromString("100000000000000000"));M.low=M.low.add(w),ist(M.low,w)&&(M.high=M.high.add(Le.fromNumber(1))),C=_+ipe;let I={low:Le.fromNumber(0),high:Le.fromNumber(0)};M.high.shiftRightUnsigned(49).and(Le.fromNumber(1)).equals(Le.fromNumber(1))?(I.high=I.high.or(Le.fromNumber(3).shiftLeft(61)),I.high=I.high.or(Le.fromNumber(C).and(Le.fromNumber(16383).shiftLeft(47))),I.high=I.high.or(M.high.and(Le.fromNumber(0x7fffffffffff)))):(I.high=I.high.or(Le.fromNumber(C&16383).shiftLeft(49)),I.high=I.high.or(M.high.and(Le.fromNumber(562949953421311)))),I.low=M.low,n&&(I.high=I.high.or(Le.fromString("9223372036854775808")));let F=ye.allocateUnsafe(16);return A=0,F[A++]=I.low.low&255,F[A++]=I.low.low>>8&255,F[A++]=I.low.low>>16&255,F[A++]=I.low.low>>24&255,F[A++]=I.low.high&255,F[A++]=I.low.high>>8&255,F[A++]=I.low.high>>16&255,F[A++]=I.low.high>>24&255,F[A++]=I.high.low&255,F[A++]=I.high.low>>8&255,F[A++]=I.high.low>>16&255,F[A++]=I.high.low>>24&255,F[A++]=I.high.high&255,F[A++]=I.high.high>>8&255,F[A++]=I.high.high>>16&255,F[A++]=I.high.high>>24&255,new t(F)}toString(){let e,r=0,n=new Array(36);for(let A=0;A<n.length;A++)n[A]=0;let i=0,s=!1,o,a={parts:[0,0,0,0]},u,c,l=[];i=0;let d=this.bytes,p=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,f=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,h=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,g=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24;i=0,{low:new Le(p,f),high:new Le(h,g)}.high.lessThan(Le.ZERO)&&l.push("-");let S=g>>26&Zit;if(S>>3===3){if(S===est)return l.join("")+"Infinity";if(S===tst)return"NaN";e=g>>15&upe,o=8+(g>>14&1)}else o=g>>14&7,e=g>>17&upe;let w=e-ipe;if(a.parts[0]=(g&16383)+((o&15)<<14),a.parts[1]=h,a.parts[2]=f,a.parts[3]=p,a.parts[0]===0&&a.parts[1]===0&&a.parts[2]===0&&a.parts[3]===0)s=!0;else for(c=3;c>=0;c--){let A=0,O=rst(a);if(a=O.quotient,A=O.rem.low,!!A)for(u=8;u>=0;u--)n[c*9+u]=A%10,A=Math.floor(A/10)}if(s)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;let C=r-1+w;if(C>=34||C<=-7||w>0){if(r>34)return l.push("0"),w>0?l.push(`E+${w}`):w<0&&l.push(`E${w}`),l.join("");l.push(`${n[i++]}`),r=r-1,r&&l.push(".");for(let A=0;A<r;A++)l.push(`${n[i++]}`);l.push("E"),C>0?l.push(`+${C}`):l.push(`${C}`)}else if(w>=0)for(let A=0;A<r;A++)l.push(`${n[i++]}`);else{let A=r+w;if(A>0)for(let O=0;O<A;O++)l.push(`${n[i++]}`);else l.push("0");for(l.push(".");A++<0;)l.push("0");for(let O=0;O<r-Math.max(A-1,0);O++)l.push(`${n[i++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=za,`new Decimal128(${n(this.toString(),r)})`}},E1=class t extends Zs{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new ge(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new ge(`Input: '${e}' contains whitespace`);if(e==="")throw new ge("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new ge(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=za,`new Double(${n(this.value,r)})`}},b1=class t extends Zs{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=kpe(e),n=Number(e);if(J4<n)throw new ge(`Input: '${e}' is larger than the maximum value for Int32`);if(Y4>n)throw new ge(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new ge(`Input: '${e}' is not a valid Int32 string`)}else throw new ge(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=za,`new Int32(${n(this.value,r)})`}},e0=class t extends Zs{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},t0=class t extends Zs{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},Qm=null,H4=new WeakMap,Ap=class t extends Zs{get _bsontype(){return"ObjectId"}constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new ge("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=ye.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null||typeof r=="number")this.buffer=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=ye.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=ye.fromHex(r),t.cacheHexString&&H4.set(this,r);else throw new ge("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new ge("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&H4.set(this,ye.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=H4.get(this);if(r)return r}let e=ye.toHex(this.id);return t.cacheHexString&&H4.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=ye.allocateUnsafe(12);return ht.setInt32BE(n,0,e),Qm===null&&(Qm=ye.randomBytes(5)),n[4]=Qm[0],n[5]=Qm[1],n[6]=Qm[2],n[7]=Qm[3],n[8]=Qm[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?ye.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&ye.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=ht.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=ye.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return ht.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new ge("hex string must be 24 characters");return new t(ye.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new ge("base64 string must be 16 characters");return new t(ye.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&H4.has(this)}inspect(e,r,n){return n??=za,`new ObjectId(${n(this.toHexString(),r)})`}};Ap.index=Math.floor(Math.random()*16777215);function f5(t,e,r){let n=5;if(Array.isArray(t))for(let i=0;i<t.length;i++)n+=lpe(i.toString(),t[i],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let i of Object.keys(t))n+=lpe(i,t[i],e,!1,r)}return n}function lpe(t,e,r=!1,n=!1,i=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+ye.utf8ByteLength(t)+1+4+ye.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=ype&&e<=mpe&&e>=Y4&&e<=J4?(t!=null?ye.utf8ByteLength(t)+1:0)+5:(t!=null?ye.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!i?(t!=null?ye.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?ye.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[j2]!==Xm)throw new Sp;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?ye.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?ye.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||B2(e))return(t!=null?ye.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||bj(e))return(t!=null?ye.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?ye.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?ye.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?ye.utf8ByteLength(t)+1:0)+1+4+4+ye.utf8ByteLength(e.code.toString())+1+f5(e.scope,r,i):(t!=null?ye.utf8ByteLength(t)+1:0)+1+4+ye.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let s=e;return s.sub_type===dr.SUBTYPE_BYTE_ARRAY?(t!=null?ye.utf8ByteLength(t)+1:0)+(s.position+1+4+1+4):(t!=null?ye.utf8ByteLength(t)+1:0)+(s.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?ye.utf8ByteLength(t)+1:0)+ye.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let s=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(s.$db=e.db),(t!=null?ye.utf8ByteLength(t)+1:0)+1+f5(s,r,i)}else return e instanceof RegExp||F2(e)?(t!=null?ye.utf8ByteLength(t)+1:0)+1+ye.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?ye.utf8ByteLength(t)+1:0)+1+ye.utf8ByteLength(e.pattern)+1+ye.utf8ByteLength(e.options)+1:(t!=null?ye.utf8ByteLength(t)+1:0)+f5(e,r,i)+1}case"function":return r?(t!=null?ye.utf8ByteLength(t)+1:0)+1+4+ye.utf8ByteLength(e.toString())+1:0;case"bigint":return(t!=null?ye.utf8ByteLength(t)+1:0)+9;case"symbol":return 0;default:throw new ge(`Unrecognized JS type: ${typeof e}`)}}function sst(t){return t.split("").sort().join("")}var Cp=class t extends Zs{get _bsontype(){return"BSONRegExp"}constructor(e,r){if(super(),this.pattern=e,this.options=sst(r??""),this.pattern.indexOf("\0")!==-1)throw new ge(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new ge(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new ge(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new ge(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let i=Dit(r)??(a=>a);n??=za;let s=i(n(this.pattern),"regexp"),o=i(n(this.options),"regexp");return`new BSONRegExp(${s}, ${o})`}},r0=class t extends Zs{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=za,`new BSONSymbol(${n(this.value,r)})`}},ost=Le,_1=class t extends ost{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(Le.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new ge("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new ge("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new ge("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new ge("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new ge("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new ge("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new ge("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(Le.fromInt(e,!0))}static fromNumber(e){return new t(Le.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(Le.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=Le.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=Le.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=za;let i=n(this.t,r),s=n(this.i,r);return`new Timestamp({ t: ${i}, i: ${s} })`}};_1.MAX_VALUE=Le.MAX_UNSIGNED_VALUE;var ast=Le.fromNumber(mpe),ust=Le.fromNumber(ype);function Ppe(t,e,r){e=e??{};let n=e&&e.index?e.index:0,i=ht.getInt32LE(t,n);if(i<5)throw new ge(`bson size must be >= 5, is ${i}`);if(e.allowObjectSmallerThanBufferSize&&t.length<i)throw new ge(`buffer length ${t.length} must be >= bson size ${i}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==i)throw new ge(`buffer length ${t.length} must === bson size ${i}`);if(i+n>t.byteLength)throw new ge(`(bson size ${i} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+i-1]!==0)throw new ge("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return h5(t,n,e,r)}var cst=/^\$ref$|^\$id$|^\$db$/;function h5(t,e,r,n=!1){let i=r.fieldsAsRaw==null?null:r.fieldsAsRaw,s=r.raw==null?!1:r.raw,o=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,a=r.promoteBuffers??!1,u=r.promoteLongs??!0,c=r.promoteValues??!0,l=r.useBigInt64??!1;if(l&&!c)throw new ge("Must either request bigint or Long for int64 deserialization");if(l&&!u)throw new ge("Must either request bigint or Long for int64 deserialization");let d=r.validation==null?{utf8:!0}:r.validation,p=!0,f,h,g=d.utf8;if(typeof g=="boolean")f=g;else{p=!1;let O=Object.keys(g).map(function(x){return g[x]});if(O.length===0)throw new ge("UTF-8 validation setting cannot be empty");if(typeof O[0]!="boolean")throw new ge("Invalid UTF-8 validation option, must specify boolean values");if(f=O[0],!O.every(x=>x===f))throw new ge("Invalid UTF-8 validation option - keys must be all true or all false")}if(!p){h=new Set;for(let O of Object.keys(g))h.add(O)}let _=e;if(t.length<5)throw new ge("corrupt bson message < 5 bytes long");let S=ht.getInt32LE(t,e);if(e+=4,S<5||S>t.length)throw new ge("corrupt bson message");let w=n?[]:{},C=0,A=n?!1:null;for(;;){let O=t[e++];if(O===0)break;let x=e;for(;t[x]!==0&&x<t.length;)x++;if(x>=t.byteLength)throw new ge("Bad BSON Document: illegal CString");let R=n?C++:ye.toUTF8(t,e,x,!1),M=!0;p||h?.has(R)?M=f:M=!f,A!==!1&&R[0]==="$"&&(A=cst.test(R));let I;if(e=x+1,O===gpe){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");I=ye.toUTF8(t,e,e+F-1,M),e=e+F}else if(O===bpe){let F=ye.allocateUnsafe(12);for(let B=0;B<12;B++)F[B]=t[e+B];I=new Ap(F),e=e+12}else if(O===z4&&c===!1)I=new b1(ht.getInt32LE(t,e)),e+=4;else if(O===z4)I=ht.getInt32LE(t,e),e+=4;else if(O===vj)I=ht.getFloat64LE(t,e),e+=8,c===!1&&(I=new E1(I));else if(O===vpe){let F=ht.getInt32LE(t,e),B=ht.getInt32LE(t,e+4);e+=8,I=new Date(new Le(F,B).toNumber())}else if(O===_pe){if(t[e]!==0&&t[e]!==1)throw new ge("illegal boolean type value");I=t[e++]===1}else if(O===Sj){let F=e,B=ht.getInt32LE(t,e);if(B<=0||B>t.length-e)throw new ge("bad embedded document length in bson");if(s)I=t.subarray(e,e+B);else{let U=r;p||(U={...r,validation:{utf8:M}}),I=h5(t,F,U,!1)}e=e+B}else if(O===Epe){let F=e,B=ht.getInt32LE(t,e),U=r,k=e+B;if(i&&i[R]&&(U={...r,raw:!0}),p||(U={...U,validation:{utf8:M}}),I=h5(t,F,U,!0),e=e+B,t[e-1]!==0)throw new ge("invalid array terminator byte");if(e!==k)throw new ge("corrupted array bson")}else if(O===kit)I=void 0;else if(O===Aj)I=null;else if(O===Tj)if(l)I=ht.getBigInt64LE(t,e),e+=8;else{let F=ht.getInt32LE(t,e),B=ht.getInt32LE(t,e+4);e+=8;let U=new Le(F,B);u&&c===!0?I=U.lessThanOrEqual(ast)&&U.greaterThanOrEqual(ust)?U.toNumber():U:I=U}else if(O===Cpe){let F=ye.allocateUnsafe(16);for(let B=0;B<16;B++)F[B]=t[e+B];e=e+16,I=new Zm(F)}else if(O===wj){let F=ht.getInt32LE(t,e);e+=4;let B=F,U=t[e++];if(F<0)throw new ge("Negative binary type element size found");if(F>t.byteLength)throw new ge("Binary type size larger than document size");if(U===dr.SUBTYPE_BYTE_ARRAY){if(F=ht.getInt32LE(t,e),e+=4,F<0)throw new ge("Negative binary type element size found for subtype 0x02");if(F>B-4)throw new ge("Binary type with subtype 0x02 contains too long binary size");if(F<B-4)throw new ge("Binary type with subtype 0x02 contains too short binary size")}a&&c?I=ye.toLocalBufferType(t.subarray(e,e+F)):(I=new dr(t.subarray(e,e+F),U),U===Oj&&g1.isValid(I)&&(I=I.toUUID())),e=e+F}else if(O===m5&&o===!1){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let F=ye.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let B=ye.toUTF8(t,e,x,!1);e=x+1;let U=new Array(B.length);for(x=0;x<B.length;x++)switch(B[x]){case"m":U[x]="m";break;case"s":U[x]="g";break;case"i":U[x]="i";break}I=new RegExp(F,U.join(""))}else if(O===m5&&o===!0){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let F=ye.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let B=ye.toUTF8(t,e,x,!1);e=x+1,I=new Cp(F,B)}else if(O===Spe){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");let B=ye.toUTF8(t,e,e+F-1,M);I=c?B:new r0(B),e=e+F}else if(O===Ape)I=new _1({i:ht.getUint32LE(t,e),t:ht.getUint32LE(t,e+4)}),e+=8;else if(O===Tpe)I=new t0;else if(O===Ope)I=new e0;else if(O===Cj){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");let B=ye.toUTF8(t,e,e+F-1,M);I=new wp(B),e=e+F}else if(O===wpe){let F=ht.getInt32LE(t,e);if(e+=4,F<13)throw new ge("code_w_scope total size shorter minimum expected length");let B=ht.getInt32LE(t,e);if(e+=4,B<=0||B>t.length-e||t[e+B-1]!==0)throw new ge("bad string length in bson");let U=ye.toUTF8(t,e,e+B-1,M);e=e+B;let k=e,H=ht.getInt32LE(t,e),ie=h5(t,k,r,!1);if(e=e+H,F<8+H+B)throw new ge("code_w_scope total size is too short, truncating scope");if(F>8+H+B)throw new ge("code_w_scope total size is too long, clips outer document");I=new wp(U,ie)}else if(O===Mit){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");let B=ye.toUTF8(t,e,e+F-1,M);e=e+F;let U=ye.allocateUnsafe(12);for(let H=0;H<12;H++)U[H]=t[e+H];let k=new Ap(U);e=e+12,I=new dd(B,k)}else throw new ge(`Detected unknown BSON type ${O.toString(16)} for fieldname "${R}"`);R==="__proto__"?Object.defineProperty(w,R,{value:I,writable:!0,enumerable:!0,configurable:!0}):w[R]=I}if(S!==e-_)throw n?new ge("corrupt array bson"):new ge("corrupt object bson");if(!A)return w;if(Dpe(w)){let O=Object.assign({},w);return delete O.$ref,delete O.$id,delete O.$db,new dd(w.$ref,w.$id,w.$db,O)}return w}var y5=/\x00/,dpe=new Set(["$db","$ref","$id","$clusterTime"]);function QL(t,e,r,n){t[n++]=gpe;let i=ye.encodeUTF8Into(t,e,n);n=n+i+1,t[n-1]=0;let s=ye.encodeUTF8Into(t,r,n+4);return ht.setInt32LE(t,n,s+1),n=n+4+s,t[n++]=0,n}function XL(t,e,r,n){let s=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=J4&&r>=Y4?z4:vj;t[n++]=s;let o=ye.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,s===z4?n+=ht.setInt32LE(t,n,r):n+=ht.setFloat64LE(t,n,r),n}function ZL(t,e,r,n){t[n++]=Tj;let i=ye.encodeUTF8Into(t,e,n);return n+=i,t[n++]=0,n+=ht.setBigInt64LE(t,n,r),n}function P2(t,e,r,n){t[n++]=Aj;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function ej(t,e,r,n){t[n++]=_pe;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,t[n++]=r?1:0,n}function tj(t,e,r,n){t[n++]=vpe;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=Le.fromNumber(r.getTime()),o=s.getLowBits(),a=s.getHighBits();return n+=ht.setInt32LE(t,n,o),n+=ht.setInt32LE(t,n,a),n}function rj(t,e,r,n){t[n++]=m5;let i=ye.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.source&&r.source.match(y5)!=null)throw new ge("value "+r.source+" must not contain null bytes");return n=n+ye.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function nj(t,e,r,n){t[n++]=m5;let i=ye.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.pattern.match(y5)!=null)throw new ge("pattern "+r.pattern+" must not contain null bytes");n=n+ye.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let s=r.options.split("").sort().join("");return n=n+ye.encodeUTF8Into(t,s,n),t[n++]=0,n}function ij(t,e,r,n){r===null?t[n++]=Aj:r._bsontype==="MinKey"?t[n++]=Tpe:t[n++]=Ope;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function sj(t,e,r,n){t[n++]=bpe;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=r.serializeInto(t,n),n}function oj(t,e,r,n){t[n++]=wj;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.length;if(n+=ht.setInt32LE(t,n,s),t[n++]=Pit,s<=16)for(let o=0;o<s;o++)t[n+o]=r[o];else t.set(r,n);return n=n+s,n}function aj(t,e,r,n,i,s,o,a,u){if(u.has(r))throw new ge("Cannot convert circular structure to BSON");u.add(r),t[n++]=Array.isArray(r)?Epe:Sj;let c=ye.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=Q4(t,r,i,n,s+1,o,a,u);return u.delete(r),l}function uj(t,e,r,n){t[n++]=Cpe;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;for(let s=0;s<16;s++)t[n+s]=r.bytes[s];return n+16}function cj(t,e,r,n){t[n++]=r._bsontype==="Long"?Tj:Ape;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.getLowBits(),o=r.getHighBits();return n+=ht.setInt32LE(t,n,s),n+=ht.setInt32LE(t,n,o),n}function lj(t,e,r,n){r=r.valueOf(),t[n++]=z4;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=ht.setInt32LE(t,n,r),n}function dj(t,e,r,n){t[n++]=vj;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=ht.setFloat64LE(t,n,r.value),n}function pj(t,e,r,n){t[n++]=Cj;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.toString(),o=ye.encodeUTF8Into(t,s,n+4)+1;return ht.setInt32LE(t,n,o),n=n+4+o-1,t[n++]=0,n}function fj(t,e,r,n,i=!1,s=0,o=!1,a=!0,u){if(r.scope&&typeof r.scope=="object"){t[n++]=wpe;let c=ye.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=n,d=r.code;n=n+4;let p=ye.encodeUTF8Into(t,d,n+4)+1;ht.setInt32LE(t,n,p),t[n+4+p-1]=0,n=n+p+4;let f=Q4(t,r.scope,i,n,s+1,o,a,u);n=f-1;let h=f-l;l+=ht.setInt32LE(t,l,h),t[n++]=0}else{t[n++]=Cj;let c=ye.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=r.code.toString(),d=ye.encodeUTF8Into(t,l,n+4)+1;ht.setInt32LE(t,n,d),n=n+4+d-1,t[n++]=0}return n}function hj(t,e,r,n){t[n++]=wj;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.buffer,o=r.position;if(r.sub_type===dr.SUBTYPE_BYTE_ARRAY&&(o=o+4),n+=ht.setInt32LE(t,n,o),t[n++]=r.sub_type,r.sub_type===dr.SUBTYPE_BYTE_ARRAY&&(o=o-4,n+=ht.setInt32LE(t,n,o)),r.sub_type===dr.SUBTYPE_VECTOR&&bp(r),o<=16)for(let a=0;a<o;a++)t[n+a]=s[a];else t.set(s,n);return n=n+r.position,n}function mj(t,e,r,n){t[n++]=Spe;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=ye.encodeUTF8Into(t,r.value,n+4)+1;return ht.setInt32LE(t,n,s),n=n+4+s-1,t[n++]=0,n}function yj(t,e,r,n,i,s,o){t[n++]=Sj;let a=ye.encodeUTF8Into(t,e,n);n=n+a,t[n++]=0;let u=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let l=Q4(t,c,!1,n,i+1,s,!0,o),d=l-u;return u+=ht.setInt32LE(t,n,d),l}function Q4(t,e,r,n,i,s,o,a){if(a==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new ge("serialize does not support an array as the root input");if(typeof e!="object")throw new ge("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new ge("BSON types cannot be serialized as a document");if(B2(e)||F2(e)||N2(e)||bj(e))throw new ge("date, regexp, typedarray, and arraybuffer cannot be BSON documents");a=new Set}a.add(e);let u=n+4;if(Array.isArray(e))for(let l=0;l<e.length;l++){let d=`${l}`,p=e[l];typeof p?.toBSON=="function"&&(p=p.toBSON());let f=typeof p;if(p===void 0)u=P2(t,d,p,u);else if(p===null)u=P2(t,d,p,u);else if(f==="string")u=QL(t,d,p,u);else if(f==="number")u=XL(t,d,p,u);else if(f==="bigint")u=ZL(t,d,p,u);else if(f==="boolean")u=ej(t,d,p,u);else if(f==="object"&&p._bsontype==null)p instanceof Date||B2(p)?u=tj(t,d,p,u):p instanceof Uint8Array||N2(p)?u=oj(t,d,p,u):p instanceof RegExp||F2(p)?u=rj(t,d,p,u):u=aj(t,d,p,u,r,i,s,o,a);else if(f==="object"){if(p[j2]!==Xm)throw new Sp;if(p._bsontype==="ObjectId")u=sj(t,d,p,u);else if(p._bsontype==="Decimal128")u=uj(t,d,p,u);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")u=cj(t,d,p,u);else if(p._bsontype==="Double")u=dj(t,d,p,u);else if(p._bsontype==="Code")u=fj(t,d,p,u,r,i,s,o,a);else if(p._bsontype==="Binary")u=hj(t,d,p,u);else if(p._bsontype==="BSONSymbol")u=mj(t,d,p,u);else if(p._bsontype==="DBRef")u=yj(t,d,p,u,i,s,a);else if(p._bsontype==="BSONRegExp")u=nj(t,d,p,u);else if(p._bsontype==="Int32")u=lj(t,d,p,u);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")u=ij(t,d,p,u);else if(typeof p._bsontype<"u")throw new ge(`Unrecognized or invalid _bsontype: ${String(p._bsontype)}`)}else f==="function"&&s&&(u=pj(t,d,p,u))}else if(e instanceof Map||_j(e)){let l=e.entries(),d=!1;for(;!d;){let p=l.next();if(d=!!p.done,d)continue;let f=p.value?p.value[0]:void 0,h=p.value?p.value[1]:void 0;typeof h?.toBSON=="function"&&(h=h.toBSON());let g=typeof h;if(typeof f=="string"&&!dpe.has(f)){if(f.match(y5)!=null)throw new ge("key "+f+" must not contain null bytes");if(r){if(f[0]==="$")throw new ge("key "+f+" must not start with '$'");if(f.includes("."))throw new ge("key "+f+" must not contain '.'")}}if(h===void 0)o===!1&&(u=P2(t,f,h,u));else if(h===null)u=P2(t,f,h,u);else if(g==="string")u=QL(t,f,h,u);else if(g==="number")u=XL(t,f,h,u);else if(g==="bigint")u=ZL(t,f,h,u);else if(g==="boolean")u=ej(t,f,h,u);else if(g==="object"&&h._bsontype==null)h instanceof Date||B2(h)?u=tj(t,f,h,u):h instanceof Uint8Array||N2(h)?u=oj(t,f,h,u):h instanceof RegExp||F2(h)?u=rj(t,f,h,u):u=aj(t,f,h,u,r,i,s,o,a);else if(g==="object"){if(h[j2]!==Xm)throw new Sp;if(h._bsontype==="ObjectId")u=sj(t,f,h,u);else if(h._bsontype==="Decimal128")u=uj(t,f,h,u);else if(h._bsontype==="Long"||h._bsontype==="Timestamp")u=cj(t,f,h,u);else if(h._bsontype==="Double")u=dj(t,f,h,u);else if(h._bsontype==="Code")u=fj(t,f,h,u,r,i,s,o,a);else if(h._bsontype==="Binary")u=hj(t,f,h,u);else if(h._bsontype==="BSONSymbol")u=mj(t,f,h,u);else if(h._bsontype==="DBRef")u=yj(t,f,h,u,i,s,a);else if(h._bsontype==="BSONRegExp")u=nj(t,f,h,u);else if(h._bsontype==="Int32")u=lj(t,f,h,u);else if(h._bsontype==="MinKey"||h._bsontype==="MaxKey")u=ij(t,f,h,u);else if(typeof h._bsontype<"u")throw new ge(`Unrecognized or invalid _bsontype: ${String(h._bsontype)}`)}else g==="function"&&s&&(u=pj(t,f,h,u))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new ge("toBSON function did not return an object");for(let l of Object.keys(e)){let d=e[l];typeof d?.toBSON=="function"&&(d=d.toBSON());let p=typeof d;if(typeof l=="string"&&!dpe.has(l)){if(l.match(y5)!=null)throw new ge("key "+l+" must not contain null bytes");if(r){if(l[0]==="$")throw new ge("key "+l+" must not start with '$'");if(l.includes("."))throw new ge("key "+l+" must not contain '.'")}}if(d===void 0)o===!1&&(u=P2(t,l,d,u));else if(d===null)u=P2(t,l,d,u);else if(p==="string")u=QL(t,l,d,u);else if(p==="number")u=XL(t,l,d,u);else if(p==="bigint")u=ZL(t,l,d,u);else if(p==="boolean")u=ej(t,l,d,u);else if(p==="object"&&d._bsontype==null)d instanceof Date||B2(d)?u=tj(t,l,d,u):d instanceof Uint8Array||N2(d)?u=oj(t,l,d,u):d instanceof RegExp||F2(d)?u=rj(t,l,d,u):u=aj(t,l,d,u,r,i,s,o,a);else if(p==="object"){if(d[j2]!==Xm)throw new Sp;if(d._bsontype==="ObjectId")u=sj(t,l,d,u);else if(d._bsontype==="Decimal128")u=uj(t,l,d,u);else if(d._bsontype==="Long"||d._bsontype==="Timestamp")u=cj(t,l,d,u);else if(d._bsontype==="Double")u=dj(t,l,d,u);else if(d._bsontype==="Code")u=fj(t,l,d,u,r,i,s,o,a);else if(d._bsontype==="Binary")u=hj(t,l,d,u);else if(d._bsontype==="BSONSymbol")u=mj(t,l,d,u);else if(d._bsontype==="DBRef")u=yj(t,l,d,u,i,s,a);else if(d._bsontype==="BSONRegExp")u=nj(t,l,d,u);else if(d._bsontype==="Int32")u=lj(t,l,d,u);else if(d._bsontype==="MinKey"||d._bsontype==="MaxKey")u=ij(t,l,d,u);else if(typeof d._bsontype<"u")throw new ge(`Unrecognized or invalid _bsontype: ${String(d._bsontype)}`)}else p==="function"&&s&&(u=pj(t,l,d,u))}}a.delete(e),t[u++]=0;let c=u-n;return n+=ht.setInt32LE(t,n,c),u}function lst(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var dst={$oid:Ap,$binary:dr,$uuid:dr,$symbol:r0,$numberInt:b1,$numberDecimal:Zm,$numberDouble:E1,$numberLong:Le,$minKey:t0,$maxKey:e0,$regex:Cp,$regularExpression:Cp,$timestamp:_1};function Npe(t,e={}){if(typeof t=="number"){let n=t<=J4&&t>=Y4,i=t<=fpe&&t>=hpe;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new b1(t);if(i)return e.useBigInt64?BigInt(t):Le.fromNumber(t)}return new E1(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let i=dst[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,i=new Date;if(e.legacy)if(typeof n=="number")i.setTime(n);else if(typeof n=="string")i.setTime(Date.parse(n));else if(typeof n=="bigint")i.setTime(Number(n));else throw new $2(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")i.setTime(Date.parse(n));else if(Le.isLong(n))i.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)i.setTime(n);else if(typeof n=="bigint")i.setTime(Number(n));else throw new $2(`Unrecognized type for EJSON date: ${typeof n}`);return i}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=Npe(t.$scope)),wp.fromExtendedJSON(t)}if(Dpe(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof dd)return n;let i=Object.keys(n).filter(o=>o.startsWith("$")),s=!0;if(i.forEach(o=>{["$ref","$id","$db"].indexOf(o)===-1&&(s=!1)}),s)return dd.fromExtendedJSON(n)}return t}function pst(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return vp(r,e)}finally{e.seenObjects.pop()}})}function ppe(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function vp(t,e){if(t instanceof Map||_j(t)){let r=Object.create(null);for(let[n,i]of t){if(typeof n!="string")throw new ge("Can only serialize maps with string keys");r[n]=i}return vp(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(l=>l.propertyName),i=n.slice(0,r).map(l=>`${l} -> `).join(""),s=n[r],o=" -> "+n.slice(r+1,n.length-1).map(l=>`${l} -> `).join(""),a=n[n.length-1],u=" ".repeat(i.length+s.length/2),c="-".repeat(o.length+(s.length+a.length)/2-1);throw new ge(`Converting circular structure to EJSON:
    ${i}${s}${o}${a}
    ${u}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return pst(t,e);if(t===void 0)return null;if(t instanceof Date||B2(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:ppe(t)}:e.relaxed&&n?{$date:ppe(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=Y4&&t<=J4)return{$numberInt:t.toString()};if(t>=hpe&&t<=fpe)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||F2(t)){let r=t.flags;if(r===void 0){let i=t.toString().match(/[gimuy]*$/);i&&(r=i[0])}return new Cp(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?hst(t,e):t}var fst={Binary:t=>new dr(t.value(),t.sub_type),Code:t=>new wp(t.code,t.scope),DBRef:t=>new dd(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new Zm(t.bytes),Double:t=>new E1(t.value),Int32:t=>new b1(t.value),Long:t=>Le.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new e0,MinKey:()=>new t0,ObjectId:t=>new Ap(t),BSONRegExp:t=>new Cp(t.pattern,t.options),BSONSymbol:t=>new r0(t.value),Timestamp:t=>_1.fromBits(t.low,t.high)};function hst(t,e){if(t==null||typeof t!="object")throw new ge("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let i of Object.keys(t)){e.seenObjects.push({propertyName:i,obj:null});try{let s=vp(t[i],e);i==="__proto__"?Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):n[i]=s}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[j2]!==Xm)throw new Sp;if(lst(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let i=fst[t._bsontype];if(!i)throw new ge("Unrecognized or invalid _bsontype: "+t._bsontype);n=i(n)}return r==="Code"&&n.scope?n=new wp(n.code,vp(n.scope,e)):r==="DBRef"&&n.oid&&(n=new dd(vp(n.collection,e),vp(n.oid,e),vp(n.db,e),vp(n.fields,e))),n.toExtendedJSON(e)}else throw new ge("_bsontype must be a string, but was: "+typeof r)}}function Fpe(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,i)=>{if(n.indexOf("\0")!==-1)throw new ge(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return Npe(i,r)})}function Bpe(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let i=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),s=vp(t,i);return JSON.stringify(s,e,r)}function mst(t,e){return e=e||{},JSON.parse(Bpe(t,e))}function yst(t,e){return e=e||{},Fpe(JSON.stringify(t),e)}var n0=Object.create(null);n0.parse=Fpe;n0.stringify=Bpe;n0.serialize=mst;n0.deserialize=yst;Object.freeze(n0);var jn={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function gj(t,e){try{return ht.getNonnegativeInt32LE(t,e)}catch(r){throw new ju("BSON size cannot be negative",e,{cause:r})}}function Ej(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new ju("Null terminator not found",e);return r}function gst(t,e=0){if(e??=0,t.length<5)throw new ju(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=gj(t,e);if(r>t.length-e)throw new ju(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new ju("BSON documents must end in 0x00",e+r);let n=[],i=e+4;for(;i<=r+e;){let s=t[i];if(i+=1,s===0){if(i-e!==r)throw new ju("Invalid 0x00 type byte",i);break}let o=i,a=Ej(t,i)-o;i+=a+1;let u;if(s===jn.double||s===jn.long||s===jn.date||s===jn.timestamp)u=8;else if(s===jn.int)u=4;else if(s===jn.objectId)u=12;else if(s===jn.decimal)u=16;else if(s===jn.bool)u=1;else if(s===jn.null||s===jn.undefined||s===jn.maxKey||s===jn.minKey)u=0;else if(s===jn.regex)u=Ej(t,Ej(t,i)+1)+1-i;else if(s===jn.object||s===jn.array||s===jn.javascriptWithScope)u=gj(t,i);else if(s===jn.string||s===jn.binData||s===jn.dbPointer||s===jn.javascript||s===jn.symbol)u=gj(t,i)+4,s===jn.binData&&(u+=1),s===jn.dbPointer&&(u+=12);else throw new ju(`Invalid 0x${s.toString(16).padStart(2,"0")} type byte`,i);if(u>r)throw new ju("value reports length larger than document",i);n.push([s,o,a,i,u]),i+=u}return n}var K2=Object.create(null);K2.parseToElements=gst;K2.ByteUtils=ye;K2.NumberUtils=ht;Object.freeze(K2);var qpe=1024*1024*17,y1=ye.allocate(qpe);function Lpe(t){y1.length<t&&(y1=ye.allocate(t))}function jpe(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,i=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,s=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:qpe;y1.length<s&&(y1=ye.allocate(s));let o=Q4(y1,t,r,0,0,n,i,null),a=ye.allocateUnsafe(o);return a.set(y1.subarray(0,o),0),a}function $pe(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,s=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,a=Q4(y1,t,n,0,0,i,s,null);return e.set(y1.subarray(0,a),o),o+a-1}function Kpe(t,e={}){return Ppe(ye.toLocalBufferType(t),e)}function Upe(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return f5(t,r,n)}function Vpe(t,e,r,n,i,s){let o=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},s),a=ye.toLocalBufferType(t),u=e;for(let c=0;c<r;c++){let l=ht.getInt32LE(a,u);o.index=u,n[i+c]=Ppe(a,o),u=u+l}return u}var Est=Object.freeze({__proto__:null,BSONError:ge,BSONOffsetError:ju,BSONRegExp:Cp,BSONRuntimeError:$2,BSONSymbol:r0,BSONType:xpe,BSONValue:Zs,BSONVersionError:Sp,Binary:dr,Code:wp,DBRef:dd,Decimal128:Zm,Double:E1,EJSON:n0,Int32:b1,Long:Le,MaxKey:e0,MinKey:t0,ObjectId:Ap,Timestamp:_1,UUID:g1,calculateObjectSize:Upe,deserialize:Kpe,deserializeStream:Vpe,onDemand:K2,serialize:jpe,serializeWithBufferAndIndex:$pe,setInternalBufferSize:Lpe});Fr.BSON=Est;Fr.BSONError=ge;Fr.BSONOffsetError=ju;Fr.BSONRegExp=Cp;Fr.BSONRuntimeError=$2;Fr.BSONSymbol=r0;Fr.BSONType=xpe;Fr.BSONValue=Zs;Fr.BSONVersionError=Sp;Fr.Binary=dr;Fr.Code=wp;Fr.DBRef=dd;Fr.Decimal128=Zm;Fr.Double=E1;Fr.EJSON=n0;Fr.Int32=b1;Fr.Long=Le;Fr.MaxKey=e0;Fr.MinKey=t0;Fr.ObjectId=Ap;Fr.Timestamp=_1;Fr.UUID=g1;Fr.calculateObjectSize=Upe;Fr.deserialize=Kpe;Fr.deserializeStream=Vpe;Fr.onDemand=K2;Fr.serialize=jpe;Fr.serializeWithBufferAndIndex=$pe;Fr.setInternalBufferSize=Lpe});var gr=m(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.toUTF8=at.getBigInt64LE=at.getFloat64LE=at.getInt32LE=at.UUID=at.Timestamp=at.serialize=at.ObjectId=at.MinKey=at.MaxKey=at.Long=at.Int32=at.EJSON=at.Double=at.deserialize=at.Decimal128=at.DBRef=at.Code=at.calculateObjectSize=at.BSONType=at.BSONSymbol=at.BSONRegExp=at.BSONError=at.BSON=at.Binary=void 0;at.parseToElementsToArray=bst;at.pluckBSONSerializeOptions=_st;at.resolveBSONOptions=vst;at.parseUtf8ValidationOption=Sst;var X4=ca(),mi=ca();Object.defineProperty(at,"Binary",{enumerable:!0,get:function(){return mi.Binary}});Object.defineProperty(at,"BSON",{enumerable:!0,get:function(){return mi.BSON}});Object.defineProperty(at,"BSONError",{enumerable:!0,get:function(){return mi.BSONError}});Object.defineProperty(at,"BSONRegExp",{enumerable:!0,get:function(){return mi.BSONRegExp}});Object.defineProperty(at,"BSONSymbol",{enumerable:!0,get:function(){return mi.BSONSymbol}});Object.defineProperty(at,"BSONType",{enumerable:!0,get:function(){return mi.BSONType}});Object.defineProperty(at,"calculateObjectSize",{enumerable:!0,get:function(){return mi.calculateObjectSize}});Object.defineProperty(at,"Code",{enumerable:!0,get:function(){return mi.Code}});Object.defineProperty(at,"DBRef",{enumerable:!0,get:function(){return mi.DBRef}});Object.defineProperty(at,"Decimal128",{enumerable:!0,get:function(){return mi.Decimal128}});Object.defineProperty(at,"deserialize",{enumerable:!0,get:function(){return mi.deserialize}});Object.defineProperty(at,"Double",{enumerable:!0,get:function(){return mi.Double}});Object.defineProperty(at,"EJSON",{enumerable:!0,get:function(){return mi.EJSON}});Object.defineProperty(at,"Int32",{enumerable:!0,get:function(){return mi.Int32}});Object.defineProperty(at,"Long",{enumerable:!0,get:function(){return mi.Long}});Object.defineProperty(at,"MaxKey",{enumerable:!0,get:function(){return mi.MaxKey}});Object.defineProperty(at,"MinKey",{enumerable:!0,get:function(){return mi.MinKey}});Object.defineProperty(at,"ObjectId",{enumerable:!0,get:function(){return mi.ObjectId}});Object.defineProperty(at,"serialize",{enumerable:!0,get:function(){return mi.serialize}});Object.defineProperty(at,"Timestamp",{enumerable:!0,get:function(){return mi.Timestamp}});Object.defineProperty(at,"UUID",{enumerable:!0,get:function(){return mi.UUID}});function bst(t,e){let r=X4.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}at.getInt32LE=X4.BSON.onDemand.NumberUtils.getInt32LE;at.getFloat64LE=X4.BSON.onDemand.NumberUtils.getFloat64LE;at.getBigInt64LE=X4.BSON.onDemand.NumberUtils.getBigInt64LE;at.toUTF8=X4.BSON.onDemand.ByteUtils.toUTF8;function _st(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}}function vst(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function Sst(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var Ne=m(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.MongoWriteConcernError=ce.MongoServerSelectionError=ce.MongoSystemError=ce.MongoMissingDependencyError=ce.MongoMissingCredentialsError=ce.MongoCompatibilityError=ce.MongoInvalidArgumentError=ce.MongoParseError=ce.MongoNetworkTimeoutError=ce.MongoNetworkError=ce.MongoClientClosedError=ce.MongoTopologyClosedError=ce.MongoCursorExhaustedError=ce.MongoServerClosedError=ce.MongoCursorInUseError=ce.MongoOperationTimeoutError=ce.MongoUnexpectedServerResponseError=ce.MongoGridFSChunkError=ce.MongoGridFSStreamError=ce.MongoTailableCursorError=ce.MongoChangeStreamError=ce.MongoClientBulkWriteExecutionError=ce.MongoClientBulkWriteCursorError=ce.MongoClientBulkWriteError=ce.MongoGCPError=ce.MongoAzureError=ce.MongoOIDCError=ce.MongoAWSError=ce.MongoKerberosError=ce.MongoExpiredSessionError=ce.MongoTransactionError=ce.MongoNotConnectedError=ce.MongoDecompressionError=ce.MongoBatchReExecutionError=ce.MongoStalePrimaryError=ce.MongoRuntimeError=ce.MongoAPIError=ce.MongoDriverError=ce.MongoServerError=ce.MongoError=ce.MongoErrorLabel=ce.GET_MORE_RESUMABLE_CODES=ce.MONGODB_ERROR_CODES=ce.NODE_IS_RECOVERING_ERROR_MESSAGE=ce.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=ce.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;ce.needsRetryableWriteLabel=Ast;ce.isRetryableWriteError=Hpe;ce.isRetryableReadError=Cst;ce.isNodeShuttingDownError=Rst;ce.isSDAMUnrecoverableError=Dst;ce.isNetworkTimeoutError=kst;ce.isResumableError=Mst;ce.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");ce.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");ce.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");ce.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});ce.GET_MORE_RESUMABLE_CODES=new Set([ce.MONGODB_ERROR_CODES.HostUnreachable,ce.MONGODB_ERROR_CODES.HostNotFound,ce.MONGODB_ERROR_CODES.NetworkTimeout,ce.MONGODB_ERROR_CODES.ShutdownInProgress,ce.MONGODB_ERROR_CODES.PrimarySteppedDown,ce.MONGODB_ERROR_CODES.ExceededTimeLimit,ce.MONGODB_ERROR_CODES.SocketException,ce.MONGODB_ERROR_CODES.NotWritablePrimary,ce.MONGODB_ERROR_CODES.InterruptedAtShutdown,ce.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,ce.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,ce.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,ce.MONGODB_ERROR_CODES.StaleShardVersion,ce.MONGODB_ERROR_CODES.StaleEpoch,ce.MONGODB_ERROR_CODES.StaleConfig,ce.MONGODB_ERROR_CODES.RetryChangeStream,ce.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,ce.MONGODB_ERROR_CODES.CursorNotFound]);ce.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function wst(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var tl=class extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(e,r){super(e,r),this.errorLabelSet=new Set}static buildErrorMessage(e){return typeof e=="string"?e:wst(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this.errorLabelSet.has(e)}addErrorLabel(e){this.errorLabelSet.add(e)}};ce.MongoError=tl;var Z4=class extends tl{constructor(e){if(super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels)for(let r of e.errorLabels)this.addErrorLabel(r);this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};ce.MongoServerError=Z4;var i0=class extends tl{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};ce.MongoDriverError=i0;var Is=class extends i0{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};ce.MongoAPIError=Is;var la=class extends i0{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};ce.MongoRuntimeError=la;var Ij=class extends la{constructor(e,r){super(e,r)}get name(){return"MongoStalePrimaryError"}};ce.MongoStalePrimaryError=Ij;var Rj=class extends Is{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};ce.MongoBatchReExecutionError=Rj;var Dj=class extends la{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};ce.MongoDecompressionError=Dj;var kj=class extends Is{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};ce.MongoNotConnectedError=kj;var Mj=class extends Is{constructor(e){super(e)}get name(){return"MongoTransactionError"}};ce.MongoTransactionError=Mj;var Pj=class extends Is{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};ce.MongoExpiredSessionError=Pj;var Nj=class extends la{constructor(e){super(e)}get name(){return"MongoKerberosError"}};ce.MongoKerberosError=Nj;var Fj=class extends la{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};ce.MongoAWSError=Fj;var e3=class extends la{constructor(e){super(e)}get name(){return"MongoOIDCError"}};ce.MongoOIDCError=e3;var Bj=class extends e3{constructor(e){super(e)}get name(){return"MongoAzureError"}};ce.MongoAzureError=Bj;var qj=class extends e3{constructor(e){super(e)}get name(){return"MongoGCPError"}};ce.MongoGCPError=qj;var Lj=class extends Z4{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};ce.MongoClientBulkWriteError=Lj;var jj=class extends la{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};ce.MongoClientBulkWriteCursorError=jj;var $j=class extends la{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};ce.MongoClientBulkWriteExecutionError=$j;var Kj=class extends la{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};ce.MongoChangeStreamError=Kj;var Uj=class extends Is{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};ce.MongoTailableCursorError=Uj;var Vj=class extends la{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};ce.MongoGridFSStreamError=Vj;var Gj=class extends la{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};ce.MongoGridFSChunkError=Gj;var Hj=class extends la{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};ce.MongoUnexpectedServerResponseError=Hj;var zj=class extends i0{get name(){return"MongoOperationTimeoutError"}};ce.MongoOperationTimeoutError=zj;var Wj=class extends Is{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};ce.MongoCursorInUseError=Wj;var Jj=class extends Is{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};ce.MongoServerClosedError=Jj;var Yj=class extends Is{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};ce.MongoCursorExhaustedError=Yj;var Qj=class extends Is{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};ce.MongoTopologyClosedError=Qj;var Xj=class extends Is{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}};ce.MongoClientClosedError=Xj;var v1=class extends tl{constructor(e,r){super(e,{cause:r?.cause}),this.beforeHandshake=!!r?.beforeHandshake}get name(){return"MongoNetworkError"}};ce.MongoNetworkError=v1;var Zj=class extends v1{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};ce.MongoNetworkTimeoutError=Zj;var g5=class extends i0{constructor(e){super(e)}get name(){return"MongoParseError"}};ce.MongoParseError=g5;var e$=class extends Is{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};ce.MongoInvalidArgumentError=e$;var t$=class extends Is{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};ce.MongoCompatibilityError=t$;var r$=class extends Is{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};ce.MongoMissingCredentialsError=r$;var n$=class extends Is{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};ce.MongoMissingDependencyError=n$;var E5=class extends tl{constructor(e,r){r&&r.error?super(tl.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};ce.MongoSystemError=E5;var b5=class extends E5{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};ce.MongoServerSelectionError=b5;var _5=class extends Z4{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};ce.MongoWriteConcernError=_5;var Gpe=new Set([ce.MONGODB_ERROR_CODES.HostUnreachable,ce.MONGODB_ERROR_CODES.HostNotFound,ce.MONGODB_ERROR_CODES.NetworkTimeout,ce.MONGODB_ERROR_CODES.ShutdownInProgress,ce.MONGODB_ERROR_CODES.PrimarySteppedDown,ce.MONGODB_ERROR_CODES.SocketException,ce.MONGODB_ERROR_CODES.NotWritablePrimary,ce.MONGODB_ERROR_CODES.InterruptedAtShutdown,ce.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,ce.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,ce.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,ce.MONGODB_ERROR_CODES.ExceededTimeLimit,ce.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),xj=Gpe;function Ast(t,e,r){if(t instanceof v1)return!0;if(t instanceof tl&&(e>=9||Hpe(t))&&!t.hasErrorLabel(ce.MongoErrorLabel.HandshakeError))return!1;if(t instanceof _5){if(r==="Mongos"&&e<9)return xj.has(t.result.code??0);let s=t.result.writeConcernError.code??Number(t.code);return xj.has(Number.isNaN(s)?0:s)}return t instanceof tl?xj.has(Number(t.code)):!!(ce.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||ce.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function Hpe(t){return t.hasErrorLabel(ce.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel(ce.MongoErrorLabel.PoolRequstedRetry)}function Cst(t){return!!((typeof t.code=="number"?Gpe.has(t.code):!1)||t instanceof v1||ce.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||ce.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var Tst=new Set([ce.MONGODB_ERROR_CODES.ShutdownInProgress,ce.MONGODB_ERROR_CODES.PrimarySteppedDown,ce.MONGODB_ERROR_CODES.InterruptedAtShutdown,ce.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,ce.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Ost=new Set([ce.MONGODB_ERROR_CODES.NotWritablePrimary,ce.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,ce.MONGODB_ERROR_CODES.LegacyNotPrimary]),xst=new Set([ce.MONGODB_ERROR_CODES.InterruptedAtShutdown,ce.MONGODB_ERROR_CODES.ShutdownInProgress]);function zpe(t){return typeof t.code=="number"?Tst.has(t.code):ce.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||ce.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function Ist(t){return typeof t.code=="number"?Ost.has(t.code):zpe(t)?!1:ce.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function Rst(t){return!!(typeof t.code=="number"&&xst.has(t.code))}function Dst(t){return t instanceof g5||t==null?!0:zpe(t)||Ist(t)}function kst(t){return!!(t instanceof v1&&t.message.match(/timed out/))}function Mst(t,e){return t==null||!(t instanceof tl)?!1:t instanceof v1||t instanceof b5?!0:e!=null&&e>=9?t.code===ce.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel(ce.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?ce.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var S1=m(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.OP_MSG=Dr.OP_COMPRESSED=Dr.OP_DELETE=Dr.OP_QUERY=Dr.OP_INSERT=Dr.OP_UPDATE=Dr.OP_REPLY=Dr.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=Dr.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=Dr.MIN_SUPPORTED_QE_SERVER_VERSION=Dr.MIN_SUPPORTED_QE_WIRE_VERSION=Dr.MAX_SUPPORTED_WIRE_VERSION=Dr.MIN_SUPPORTED_WIRE_VERSION=Dr.MAX_SUPPORTED_SERVER_VERSION=Dr.MIN_SUPPORTED_SERVER_VERSION=void 0;Dr.MIN_SUPPORTED_SERVER_VERSION="4.2";Dr.MAX_SUPPORTED_SERVER_VERSION="8.2";Dr.MIN_SUPPORTED_WIRE_VERSION=8;Dr.MAX_SUPPORTED_WIRE_VERSION=27;Dr.MIN_SUPPORTED_QE_WIRE_VERSION=21;Dr.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Dr.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;Dr.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";Dr.OP_REPLY=1;Dr.OP_UPDATE=2001;Dr.OP_INSERT=2002;Dr.OP_QUERY=2004;Dr.OP_DELETE=2006;Dr.OP_COMPRESSED=2012;Dr.OP_MSG=2013});var yi=m(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.END=re.CHANGE=re.INIT=re.MORE=re.RESPONSE=re.SERVER_HEARTBEAT_FAILED=re.SERVER_HEARTBEAT_SUCCEEDED=re.SERVER_HEARTBEAT_STARTED=re.COMMAND_FAILED=re.COMMAND_SUCCEEDED=re.COMMAND_STARTED=re.CLUSTER_TIME_RECEIVED=re.CONNECTION_CHECKED_IN=re.CONNECTION_CHECKED_OUT=re.CONNECTION_CHECK_OUT_FAILED=re.CONNECTION_CHECK_OUT_STARTED=re.CONNECTION_CLOSED=re.CONNECTION_READY=re.CONNECTION_CREATED=re.CONNECTION_POOL_READY=re.CONNECTION_POOL_CLEARED=re.CONNECTION_POOL_CLOSED=re.CONNECTION_POOL_CREATED=re.WAITING_FOR_SUITABLE_SERVER=re.SERVER_SELECTION_SUCCEEDED=re.SERVER_SELECTION_FAILED=re.SERVER_SELECTION_STARTED=re.TOPOLOGY_DESCRIPTION_CHANGED=re.TOPOLOGY_CLOSED=re.TOPOLOGY_OPENING=re.SERVER_DESCRIPTION_CHANGED=re.SERVER_CLOSED=re.SERVER_OPENING=re.DESCRIPTION_RECEIVED=re.UNPINNED=re.PINNED=re.MESSAGE=re.ENDED=re.CLOSED=re.CONNECT=re.OPEN=re.CLOSE=re.TIMEOUT=re.ERROR=re.SYSTEM_JS_COLLECTION=re.SYSTEM_COMMAND_COLLECTION=re.SYSTEM_USER_COLLECTION=re.SYSTEM_PROFILE_COLLECTION=re.SYSTEM_INDEX_COLLECTION=re.SYSTEM_NAMESPACE_COLLECTION=void 0;re.kDecoratedKeys=re.kDecorateResult=re.LEGACY_HELLO_COMMAND_CAMEL_CASE=re.LEGACY_HELLO_COMMAND=re.MONGO_CLIENT_EVENTS=re.LOCAL_SERVER_EVENTS=re.SERVER_RELAY_EVENTS=re.APM_EVENTS=re.TOPOLOGY_EVENTS=re.CMAP_EVENTS=re.HEARTBEAT_EVENTS=re.RESUME_TOKEN_CHANGED=void 0;re.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";re.SYSTEM_INDEX_COLLECTION="system.indexes";re.SYSTEM_PROFILE_COLLECTION="system.profile";re.SYSTEM_USER_COLLECTION="system.users";re.SYSTEM_COMMAND_COLLECTION="$cmd";re.SYSTEM_JS_COLLECTION="system.js";re.ERROR="error";re.TIMEOUT="timeout";re.CLOSE="close";re.OPEN="open";re.CONNECT="connect";re.CLOSED="closed";re.ENDED="ended";re.MESSAGE="message";re.PINNED="pinned";re.UNPINNED="unpinned";re.DESCRIPTION_RECEIVED="descriptionReceived";re.SERVER_OPENING="serverOpening";re.SERVER_CLOSED="serverClosed";re.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";re.TOPOLOGY_OPENING="topologyOpening";re.TOPOLOGY_CLOSED="topologyClosed";re.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";re.SERVER_SELECTION_STARTED="serverSelectionStarted";re.SERVER_SELECTION_FAILED="serverSelectionFailed";re.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";re.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";re.CONNECTION_POOL_CREATED="connectionPoolCreated";re.CONNECTION_POOL_CLOSED="connectionPoolClosed";re.CONNECTION_POOL_CLEARED="connectionPoolCleared";re.CONNECTION_POOL_READY="connectionPoolReady";re.CONNECTION_CREATED="connectionCreated";re.CONNECTION_READY="connectionReady";re.CONNECTION_CLOSED="connectionClosed";re.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";re.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";re.CONNECTION_CHECKED_OUT="connectionCheckedOut";re.CONNECTION_CHECKED_IN="connectionCheckedIn";re.CLUSTER_TIME_RECEIVED="clusterTimeReceived";re.COMMAND_STARTED="commandStarted";re.COMMAND_SUCCEEDED="commandSucceeded";re.COMMAND_FAILED="commandFailed";re.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";re.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";re.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";re.RESPONSE="response";re.MORE="more";re.INIT="init";re.CHANGE="change";re.END="end";re.RESUME_TOKEN_CHANGED="resumeTokenChanged";re.HEARTBEAT_EVENTS=Object.freeze([re.SERVER_HEARTBEAT_STARTED,re.SERVER_HEARTBEAT_SUCCEEDED,re.SERVER_HEARTBEAT_FAILED]);re.CMAP_EVENTS=Object.freeze([re.CONNECTION_POOL_CREATED,re.CONNECTION_POOL_READY,re.CONNECTION_POOL_CLEARED,re.CONNECTION_POOL_CLOSED,re.CONNECTION_CREATED,re.CONNECTION_READY,re.CONNECTION_CLOSED,re.CONNECTION_CHECK_OUT_STARTED,re.CONNECTION_CHECK_OUT_FAILED,re.CONNECTION_CHECKED_OUT,re.CONNECTION_CHECKED_IN]);re.TOPOLOGY_EVENTS=Object.freeze([re.SERVER_OPENING,re.SERVER_CLOSED,re.SERVER_DESCRIPTION_CHANGED,re.TOPOLOGY_OPENING,re.TOPOLOGY_CLOSED,re.TOPOLOGY_DESCRIPTION_CHANGED,re.ERROR,re.TIMEOUT,re.CLOSE]);re.APM_EVENTS=Object.freeze([re.COMMAND_STARTED,re.COMMAND_SUCCEEDED,re.COMMAND_FAILED]);re.SERVER_RELAY_EVENTS=Object.freeze([re.SERVER_HEARTBEAT_STARTED,re.SERVER_HEARTBEAT_SUCCEEDED,re.SERVER_HEARTBEAT_FAILED,re.COMMAND_STARTED,re.COMMAND_SUCCEEDED,re.COMMAND_FAILED,...re.CMAP_EVENTS]);re.LOCAL_SERVER_EVENTS=Object.freeze([re.CONNECT,re.DESCRIPTION_RECEIVED,re.CLOSED,re.ENDED]);re.MONGO_CLIENT_EVENTS=Object.freeze([...re.CMAP_EVENTS,...re.APM_EVENTS,...re.TOPOLOGY_EVENTS,...re.HEARTBEAT_EVENTS]);re.LEGACY_HELLO_COMMAND="ismaster";re.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";re.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");re.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var nl=m(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.ReadConcern=rl.ReadConcernLevel=void 0;rl.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var i$=class t{constructor(e){this.level=rl.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return rl.ReadConcernLevel.majority}static get AVAILABLE(){return rl.ReadConcernLevel.available}static get LINEARIZABLE(){return rl.ReadConcernLevel.linearizable}static get SNAPSHOT(){return rl.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};rl.ReadConcern=i$});var cs=m(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.ReadPreference=eo.ReadPreferenceMode=void 0;var s0=Ne();eo.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var us=class t{constructor(e,r,n){if(!t.isValid(e))throw new s0.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new s0.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new s0.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new s0.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new s0.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new s0.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let i=r.mode||r.preference;if(i&&typeof i=="string")return new t(i,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new s0.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};eo.ReadPreference=us;us.PRIMARY=eo.ReadPreferenceMode.primary;us.PRIMARY_PREFERRED=eo.ReadPreferenceMode.primaryPreferred;us.SECONDARY=eo.ReadPreferenceMode.secondary;us.SECONDARY_PREFERRED=eo.ReadPreferenceMode.secondaryPreferred;us.NEAREST=eo.ReadPreferenceMode.nearest;us.primary=new us(eo.ReadPreferenceMode.primary);us.primaryPreferred=new us(eo.ReadPreferenceMode.primaryPreferred);us.secondary=new us(eo.ReadPreferenceMode.secondary);us.secondaryPreferred=new us(eo.ReadPreferenceMode.secondaryPreferred);us.nearest=new us(eo.ReadPreferenceMode.nearest)});var Wa=m(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.ServerType=xo.TopologyType=xo.STATE_CONNECTED=xo.STATE_CONNECTING=xo.STATE_CLOSED=xo.STATE_CLOSING=void 0;xo._advanceClusterTime=Pst;xo.STATE_CLOSING="closing";xo.STATE_CLOSED="closed";xo.STATE_CONNECTING="connecting";xo.STATE_CONNECTED="connected";xo.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});xo.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function Pst(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var Io=m(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});o0.WriteConcern=o0.WRITE_CONCERN_KEYS=void 0;o0.throwIfWriteConcernError=Fst;var Wpe=kr(),Nst=Ne();o0.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var s$=class t{constructor(e,r,n,i){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),i!=null&&(this.journal=this.j=!!i)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let s={...r instanceof t?r:r.writeConcern,...n},{w:o=void 0,wtimeout:a=void 0,j:u=void 0,fsync:c=void 0,journal:l=void 0,wtimeoutMS:d=void 0}=s;if(o!=null||a!=null||d!=null||u!=null||l!=null||c!=null)return new t(o,a??d,u??l,c)}};o0.WriteConcern=s$;function Fst(t){if(typeof t=="object"&&t!=null){let e=Wpe.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!Wpe.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new Nst.MongoWriteConcernError(e)}}});var et=m(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.kDispose=Pe.randomBytes=Pe.COSMOS_DB_MSG=Pe.DOCUMENT_DB_MSG=Pe.COSMOS_DB_CHECK=Pe.DOCUMENT_DB_CHECK=Pe.MONGODB_WARNING_CODE=Pe.DEFAULT_PK_FACTORY=Pe.HostAddress=Pe.BufferPool=Pe.List=Pe.MongoDBCollectionNamespace=Pe.MongoDBNamespace=Pe.ByteUtils=void 0;Pe.isUint8Array=Vst;Pe.hostMatchesWildcards=Gst;Pe.normalizeHintField=Hst;Pe.isObject=a$;Pe.mergeOptions=Wst;Pe.filterOptions=Jst;Pe.applyRetryableWrites=Yst;Pe.isPromiseLike=Qst;Pe.decorateWithCollation=Xst;Pe.decorateWithReadConcern=Zst;Pe.getTopology=eot;Pe.ns=tot;Pe.makeCounter=rot;Pe.uuidV4=not;Pe.maxWireVersion=iot;Pe.arrayStrictEqual=sot;Pe.errorStrictEqual=oot;Pe.makeStateMachine=aot;Pe.now=efe;Pe.calculateDurationInMs=uot;Pe.hasAtomicOperators=tfe;Pe.resolveTimeoutOptions=cot;Pe.resolveOptions=lot;Pe.isSuperset=rfe;Pe.isHello=dot;Pe.setDifference=pot;Pe.isRecord=hot;Pe.emitWarning=nfe;Pe.emitWarningOnce=mot;Pe.enumToString=yot;Pe.supportsRetryableWrites=got;Pe.shuffle=Eot;Pe.commandSupportsReadConcern=bot;Pe.compareObjectId=_ot;Pe.parseInteger=ife;Pe.parseUnsignedInteger=vot;Pe.checkParentDomainMatch=Sot;Pe.get=wot;Pe.request=Aot;Pe.isHostMatch=Cot;Pe.promiseWithResolvers=d$;Pe.squashError=Tot;Pe.once=Oot;Pe.maybeAddIdToDocuments=xot;Pe.fileIsAccessible=Iot;Pe.csotMin=Rot;Pe.noop=Dot;Pe.decorateDecryptionResult=sfe;Pe.addAbortListener=p$;Pe.abortable=kot;var Xpe=require("crypto"),Bst=require("fs"),Zpe=require("http"),o$=require("timers"),qst=require("url"),Lst=require("url"),jst=require("util"),l$=gr(),Jpe=S1(),v5=yi(),Ro=Ne(),$st=nl(),Kst=cs(),Ust=Wa(),Ype=Io();Pe.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return Pe.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return Pe.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return Pe.ByteUtils.toLocalBufferType(t).toString("base64")}};function Vst(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function Gst(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function Hst(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var zst=t=>Object.prototype.toString.call(t);function a$(t){return zst(t)==="[object Object]"}function Wst(t,e){return{...t,...e}}function Jst(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function Yst(t,e){return e&&e.s.options?.retryWrites&&(t.retryWrites=!0),t}function Qst(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function Xst(t,e){e.collation&&typeof e.collation=="object"&&(t.collation=e.collation)}function Zst(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function eot(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new Ro.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function tot(t){return t3.fromString(t)}var t3=class t{constructor(e,r){this.db=e,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new S5(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new Ro.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),i=n.join(".");return new t(r,i===""?void 0:i)}};Pe.MongoDBNamespace=t3;var S5=class extends t3{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};Pe.MongoDBCollectionNamespace=S5;function*rot(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function not(){let t=Xpe.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function iot(t){if(t){if(t.hello)return t.hello.maxWireVersion;if(t.serverApi?.version||t.loadBalanced)return Jpe.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function sot(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function oot(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function aot(t){return function(r,n){let i=t[r.s.state];if(i&&i.indexOf(n)<0)throw new Ro.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${i}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function efe(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function uot(t){if(typeof t!="number")return-1;let e=efe()-t;return e<0?0:e}function tfe(t,e){if(Array.isArray(t)){for(let n of t)if(tfe(n))return!0;return!1}let r=Object.keys(t);if(e?.ignoreUndefined){let n=!0;for(let i of r)if(t[i]!==void 0){n=!1;break}if(n)throw new Ro.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return r.length>0&&r[0][0]==="$"}function cot(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s,...e}}function lot(t,e){let r=Object.assign({},e,(0,l$.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,i=e?.session;if(!i?.inTransaction()){let a=$st.ReadConcern.fromOptions(e)??t?.readConcern;a&&(r.readConcern=a);let u=Ype.WriteConcern.fromOptions(e)??t?.writeConcern;u&&(n!=null&&(u=Ype.WriteConcern.fromOptions({writeConcern:{...u,wtimeout:void 0,wtimeoutMS:void 0}})),r.writeConcern=u)}r.timeoutMS=n;let s=Kst.ReadPreference.fromOptions(e)??t?.readPreference;if(s&&(r.readPreference=s),i?.explicit&&i?.timeoutContext!=null&&e?.timeoutMS!=null)throw new Ro.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function rfe(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function dot(t){return!!(t[v5.LEGACY_HELLO_COMMAND]||t.hello)}function pot(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var fot=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function hot(t,e=void 0){if(!a$(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!a$(r.prototype)||!fot(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return rfe(n,e)}return!0}var w5=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};Pe.List=w5;var u$=class{constructor(){this.buffers=new w5,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new Ro.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let i=this.buffers.shift();if(i==null)break;let s=e-n,o=Math.min(s,i.byteLength),a=i.subarray(0,o);r.set(a,n),n+=o,this.totalByteLength-=o,o<i.byteLength&&this.buffers.unshift(i.subarray(o))}return r}};Pe.BufferPool=u$;var c$=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,i;try{i=new Lst.URL(n)}catch(u){let c=new Ro.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=u,c}let s=i.hostname,o=i.port,a=decodeURIComponent(s).toLowerCase();if(a.startsWith("[")&&a.endsWith("]")&&(this.isIPv6=!0,a=a.substring(1,s.length-1)),this.host=a.toLowerCase(),typeof o=="number"?this.port=o:typeof o=="string"&&o!==""?this.port=Number.parseInt(o,10):this.port=27017,this.port===0)throw new Ro.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};Pe.HostAddress=c$;Pe.DEFAULT_PK_FACTORY={createPk(){return new l$.ObjectId}};Pe.MONGODB_WARNING_CODE="MONGODB DRIVER";function nfe(t){return process.emitWarning(t,{code:Pe.MONGODB_WARNING_CODE})}var Qpe=new Set;function mot(t){if(!Qpe.has(t))return Qpe.add(t),nfe(t)}function yot(t){return Object.values(t).join(", ")}function got(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==Ust.ServerType.Standalone):!1}function Eot(t,e=0){let r=Array.from(t);if(e>r.length)throw new Ro.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,i=e%r.length===0?1:r.length-e;for(;n>i;){let s=Math.floor(Math.random()*n);n-=1;let o=r[n];r[n]=r[s],r[s]=o}return e%r.length===0?r:r.slice(i)}function bot(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function _ot(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:Pe.ByteUtils.compare(t.id,e.id)}function ife(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function vot(t){let e=ife(t);return e!=null&&e>=0?e:null}function Sot(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,i=/^.*?\./,s=n.split(".").length<3,o=`.${r.replace(i,"")}`,a=s?n:`.${n.replace(i,"")}`;if(a.startsWith(".")||(a="."+a),s&&r.split(".").length<=n.split(".").length)throw new Ro.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!o.endsWith(a))throw new Ro.MongoAPIError("Server record does not share hostname with parent URI")}function wot(t,e={}){return new Promise((r,n)=>{let i,s=Zpe.get(t,e,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>a+=u),o.on("end",()=>{(0,o$.clearTimeout)(i),r({status:o.statusCode,body:a})})}).on("error",o=>{(0,o$.clearTimeout)(i),n(o)}).end();i=(0,o$.setTimeout)(()=>{s.destroy(new Ro.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Aot(t,e={}){return await new Promise((r,n)=>{let i={method:"GET",timeout:1e4,json:!0,...qst.parse(t),...e},s=Zpe.request(i,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>{a+=u}),o.once("end",()=>{if(e.json===!1){r(a);return}try{let u=JSON.parse(a);r(u)}catch{n(new Ro.MongoRuntimeError(`Invalid JSON response: "${a}"`))}})});s.once("timeout",()=>s.destroy(new Ro.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),s.once("error",o=>n(o)),s.end()})}Pe.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;Pe.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;Pe.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";Pe.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Cot(t,e){return!!(e&&t.test(e.toLowerCase()))}function d$(){let t,e;return{promise:new Promise(function(i,s){t=i,e=s}),resolve:t,reject:e}}function Tot(t){}Pe.randomBytes=(0,jst.promisify)(Xpe.randomBytes);async function Oot(t,e,r){r?.signal?.throwIfAborted();let{promise:n,resolve:i,reject:s}=d$(),o=c=>i(c),a=c=>s(c),u=p$(r?.signal,function(){s(this.reason)});t.once(e,o).once("error",a);try{return await n}finally{t.off(e,o),t.off("error",a),u?.[Pe.kDispose]()}}function xot(t,e,r){return(r.forceServerObjectId??t.db.options?.forceServerObjectId??!1)||e._id==null&&(e._id=t.s.pkFactory.createPk()),e}async function Iot(t,e){try{return await Bst.promises.access(t,e),!0}catch{return!1}}function Rot(t,e){return t===0?e:e===0?t:Math.min(t,e)}function Dot(){}function sfe(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,l$.deserialize)(e)),Buffer.isBuffer(t)))throw new Ro.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let i=e[n];if(i&&i._bsontype==="Binary"&&i.sub_type===6){t[v5.kDecoratedKeys]||Object.defineProperty(t,v5.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[v5.kDecoratedKeys].push(n);continue}sfe(t[n],i,!1)}}Pe.kDispose=Symbol.dispose??Symbol("dispose");function p$(t,e){if(t!=null)return t.addEventListener("abort",e,{once:!0}),{[Pe.kDispose]:()=>t.removeEventListener("abort",e)}}async function kot(t,{signal:e}){if(e==null)return await t;let{promise:r,reject:n}=d$(),i=e.aborted?n(e.reason):p$(e,function(){n(this.reason)});try{return await Promise.race([t,r])}finally{i?.[Pe.kDispose]()}}});var ofe=m(A5=>{"use strict";Object.defineProperty(A5,"__esModule",{value:!0});A5.OnDemandDocument=void 0;var Yt=gr(),r3={type:0,nameOffset:1,nameLength:2,offset:3,length:4},f$=class t{constructor(e,r=0,n=!1,i){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=e,this.offset=r,this.isArray=n,this.elements=i??(0,Yt.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[r3.nameLength],i=r[r3.nameOffset];if(e.length!==n)return!1;let s=i+n;for(let o=i,a=0;a<e.length&&o<s;a++,o++)if(this.bson[o]!==e.charCodeAt(a))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let i={element:this.elements[e],value:void 0};return this.cache[e]=i,this.indexFound[e]=!0,i}else return null;else return null;for(let n=0;n<this.elements.length;n++){let i=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,i)){let s={element:i,value:void 0};return this.cache[e]=s,this.indexFound[n]=!0,s}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[r3.type],i=e[r3.offset],s=e[r3.length];if(r!==n)return null;switch(r){case Yt.BSONType.null:case Yt.BSONType.undefined:return null;case Yt.BSONType.double:return(0,Yt.getFloat64LE)(this.bson,i);case Yt.BSONType.int:return(0,Yt.getInt32LE)(this.bson,i);case Yt.BSONType.long:return(0,Yt.getBigInt64LE)(this.bson,i);case Yt.BSONType.bool:return!!this.bson[i];case Yt.BSONType.objectId:return new Yt.ObjectId(this.bson.subarray(i,i+12));case Yt.BSONType.timestamp:return new Yt.Timestamp((0,Yt.getBigInt64LE)(this.bson,i));case Yt.BSONType.string:return(0,Yt.toUTF8)(this.bson,i+4,i+s-1,!1);case Yt.BSONType.binData:{let o=(0,Yt.getInt32LE)(this.bson,i),a=this.bson[i+4];if(a===2){let u=(0,Yt.getInt32LE)(this.bson,i+1+4);if(u<0)throw new Yt.BSONError("Negative binary type element size found for subtype 0x02");if(u>o-4)throw new Yt.BSONError("Binary type with subtype 0x02 contains too long binary size");if(u<o-4)throw new Yt.BSONError("Binary type with subtype 0x02 contains too short binary size");return new Yt.Binary(this.bson.subarray(i+1+4+4,i+1+4+4+u),2)}return new Yt.Binary(this.bson.subarray(i+1+4,i+1+4+o),a)}case Yt.BSONType.date:return new Date(Number((0,Yt.getBigInt64LE)(this.bson,i)));case Yt.BSONType.object:return new t(this.bson,i);case Yt.BSONType.array:return new t(this.bson,i,!0);default:throw new Yt.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let i=this.getElement(e);if(i==null){if(n===!0)throw new Yt.BSONError(`BSON element "${e}" is missing`);return null}if(i.value==null){let s=this.toJSValue(i.element,r);if(s==null){if(n===!0)throw new Yt.BSONError(`BSON element "${e}" is missing`);return null}i.value=s}return i.value}getNumber(e,r){let n=this.get(e,Yt.BSONType.bool),i=n==null?null:n?1:0,s=this.get(e,Yt.BSONType.long),o=s==null?null:Number(s),a=i??o??this.get(e,Yt.BSONType.int)??this.get(e,Yt.BSONType.double);if(r===!0&&a==null)throw new Yt.BSONError(`BSON element "${e}" is missing`);return a}toObject(e){return(0,Yt.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,Yt.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};A5.OnDemandDocument=f$});var kr=m(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.ClientBulkWriteCursorResponse=il.ExplainedCursorResponse=il.CursorResponse=il.MongoDBResponse=void 0;il.isErrorResponse=ufe;var pr=gr(),a0=Ne(),afe=et(),Mot=ofe(),C5={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function ufe(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[C5.nameLength]===2){let i=n[C5.nameOffset];if(t[i]===111&&t[i+1]===107){let s=n[C5.offset],o=n[C5.length];for(let a=s;a<s+o;a++)if(t[a]!==0)return!1;return!0}}}return!0}var U2=class t extends Mot.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(i){throw new a0.MongoUnexpectedServerResponseError(i.message,{cause:i})}}static is(e){return e instanceof t}static make(e){let r=(0,pr.parseToElementsToArray)(e,0);return ufe(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===a0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",pr.BSONType.object)?.getNumber("code")===a0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",pr.BSONType.array);if(n?.size()){for(let i=0;i<n.size();i++)if(n.get(i,pr.BSONType.object)?.getNumber("code")===a0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",pr.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",pr.BSONType.object)?.get("atClusterTime",pr.BSONType.timestamp)??this.get("atClusterTime",pr.BSONType.timestamp)}get operationTime(){return this.get("operationTime",pr.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",pr.BSONType.string)}get errmsg(){return this.get("errmsg",pr.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",pr.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",pr.BSONType.timestamp,!0),n=e.get("signature",pr.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,pr.pluckBSONSerializeOptions)(e??{}),validation:(0,pr.parseUtf8ValidationOption)(e)};return super.toObject(r)}};il.MongoDBResponse=U2;U2.empty=new U2(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));var n3=class t extends U2{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new t((0,pr.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",pr.BSONType.object,!0)}get id(){try{return pr.Long.fromBigInt(this.cursor.get("id",pr.BSONType.long,!0))}catch(e){throw new a0.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",pr.BSONType.string);return e!=null?(0,afe.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",pr.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",pr.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",pr.BSONType.array,!0);else throw new a0.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",pr.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",pr.BSONType.array,!0);else throw new a0.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",pr.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,pr.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,pr.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let i=r.toObject(e);return n&&(0,afe.decorateDecryptionResult)(i,n.toObject(e),!0),i}}clear(){this.iterated=this.batchSize}};il.CursorResponse=n3;var h$=class extends n3{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return pr.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};il.ExplainedCursorResponse=h$;var m$=class extends n3{get insertedCount(){return this.get("nInserted",pr.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",pr.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",pr.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",pr.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",pr.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",pr.BSONType.object,!1)}};il.ClientBulkWriteCursorResponse=m$});var i3=m(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.Explain=pd.ExplainVerbosity=void 0;pd.validateExplainTimeoutOptions=Not;pd.decorateWithExplain=Fot;var Pot=Ne();pd.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var y$=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?pd.ExplainVerbosity.allPlansExecution:pd.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};pd.Explain=y$;function Not(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new Pot.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function Fot(t,e){let{verbosity:r,maxTimeMS:n}=e,i={explain:t,verbosity:r};return typeof n=="number"&&(i.maxTimeMS=n),i}});var Vr=m($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.AbstractOperation=$u.Aspect=void 0;$u.defineAspects=qot;var Bot=gr(),g$=cs();$u.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};var E$=class{constructor(e={}){this.readPreference=this.hasAspect($u.Aspect.WRITE_OPERATION)?g$.ReadPreference.primary:g$.ReadPreference.fromOptions(e)??g$.ReadPreference.primary,this.bsonOptions=(0,Bot.resolveBSONOptions)(e),this._session=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this._session}set session(e){this._session=e}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect($u.Aspect.RETRYABLE)&&this.hasAspect($u.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect($u.Aspect.RETRYABLE)&&this.hasAspect($u.Aspect.WRITE_OPERATION)}handleOk(e){return e.toObject(this.bsonOptions)}handleError(e){throw e}};$u.AbstractOperation=E$;function qot(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var Xn=m(O5=>{"use strict";Object.defineProperty(O5,"__esModule",{value:!0});O5.CommandOperation=void 0;var Lot=S1(),jot=Ne(),b$=i3(),$ot=nl(),T5=et(),cfe=Io(),u0=Vr(),_$=class extends u0.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new T5.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new T5.MongoDBNamespace("admin","$cmd"),this.readConcern=$ot.ReadConcern.fromOptions(r),this.writeConcern=cfe.WriteConcern.fromOptions(r),this.hasAspect(u0.Aspect.EXPLAINABLE))this.explain=b$.Explain.fromOptions(r),this.explain&&(0,b$.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new jot.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(u0.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}buildOptions(e){return{...this.options,...this.bsonOptions,timeoutContext:e,readPreference:this.readPreference,session:this.session}}buildCommand(e,r){let n=this.buildCommandDocument(e,r),i=this.session&&this.session.inTransaction();return this.readConcern&&(0,T5.commandSupportsReadConcern)(n)&&!i&&Object.assign(n,{readConcern:this.readConcern}),this.writeConcern&&this.hasAspect(u0.Aspect.WRITE_OPERATION)&&!i&&cfe.WriteConcern.apply(n,this.writeConcern),this.options.collation&&typeof this.options.collation=="object"&&!this.hasAspect(u0.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:this.options.collation}),typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.rawData!=null&&this.hasAspect(u0.Aspect.SUPPORTS_RAW_DATA)&&(0,T5.maxWireVersion)(e)>=Lot.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION&&(n.rawData=this.options.rawData),this.hasAspect(u0.Aspect.EXPLAINABLE)&&this.explain?(0,b$.decorateWithExplain)(n,this.explain):n}};O5.CommandOperation=_$});var S$=m(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.DeleteManyOperation=Tp.DeleteOneOperation=Tp.DeleteOperation=void 0;Tp.makeDeleteStatement=v$;var Kot=kr(),s3=Ne(),Uot=et(),Vot=Xn(),Do=Vr(),V2=class extends Vot.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=Kot.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}buildCommandDocument(e,r){let n=this.options,i=typeof n.ordered=="boolean"?n.ordered:!0,s={delete:this.ns.collection,deletes:this.statements,ordered:i};if(n.let&&(s.let=n.let),n.comment!==void 0&&(s.comment=n.comment),this.writeConcern&&this.writeConcern.w===0&&(0,Uot.maxWireVersion)(e)<9&&this.statements.find(a=>a.hint))throw new s3.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+");return s}};Tp.DeleteOperation=V2;var x5=class extends V2{constructor(e,r,n){super(e,[v$(r,{...n,limit:1})],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new s3.MongoServerError(r);if(r.writeErrors)throw new s3.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};Tp.DeleteOneOperation=x5;var I5=class extends V2{constructor(e,r,n){super(e,[v$(r,n)],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new s3.MongoServerError(r);if(r.writeErrors)throw new s3.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};Tp.DeleteManyOperation=I5;function v$(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,Do.defineAspects)(V2,[Do.Aspect.RETRYABLE,Do.Aspect.WRITE_OPERATION,Do.Aspect.SUPPORTS_RAW_DATA]);(0,Do.defineAspects)(x5,[Do.Aspect.RETRYABLE,Do.Aspect.WRITE_OPERATION,Do.Aspect.EXPLAINABLE,Do.Aspect.SKIP_COLLATION,Do.Aspect.SUPPORTS_RAW_DATA]);(0,Do.defineAspects)(I5,[Do.Aspect.WRITE_OPERATION,Do.Aspect.EXPLAINABLE,Do.Aspect.SKIP_COLLATION,Do.Aspect.SUPPORTS_RAW_DATA])});var a3=m(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;Op.writableServerSelector=Hot;Op.sameServerSelector=zot;Op.secondaryWritableServerSelector=Wot;Op.readPreferenceServerSelector=A$;var w$=Ne(),o3=cs(),Ja=Wa(),Got=1e4,lfe=90;Op.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function Hot(){return function(e,r){return R5(e,r.filter(n=>n.isWritable))}}function zot(t){return function(r,n){return t?n.filter(i=>i.address===t.address&&i.type!==Ja.ServerType.Unknown):[]}}function Wot(t,e){return!e||!t||t&&t<Op.MIN_SECONDARY_WRITE_WIRE_VERSION?A$(o3.ReadPreference.primary):A$(e)}function Jot(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,i=(e.heartbeatFrequencyMS+Got)/1e3;if(n<i)throw new w$.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${i} seconds`);if(n<lfe)throw new w$.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${lfe} seconds`);if(e.type===Ja.TopologyType.ReplicaSetWithPrimary){let s=Array.from(e.servers.values()).filter(D5)[0];return r.reduce((o,a)=>{let c=(a.lastUpdateTime-a.lastWriteDate-(s.lastUpdateTime-s.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}if(e.type===Ja.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let s=r.reduce((o,a)=>a.lastWriteDate>o.lastWriteDate?a:o);return r.reduce((o,a)=>{let c=(s.lastWriteDate-a.lastWriteDate+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}return r}function Yot(t,e){let r=Object.keys(t),n=Object.keys(e);for(let i=0;i<r.length;++i){let s=r[i];if(n.indexOf(s)===-1||e[s]!==t[s])return!1}return!0}function Qot(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],i=e.reduce((s,o)=>(Yot(n,o.tags)&&s.push(o),s),[]);if(i.length)return i}return[]}function R5(t,e){let r=e.reduce((i,s)=>Math.min(s.roundTripTime,i),1/0),n=r+t.localThresholdMS;return e.reduce((i,s)=>(s.roundTripTime<=n&&s.roundTripTime>=r&&i.push(s),i),[])}function D5(t){return t.type===Ja.ServerType.RSPrimary}function Xot(t){return t.type===Ja.ServerType.RSSecondary}function Zot(t){return t.type===Ja.ServerType.RSSecondary||t.type===Ja.ServerType.RSPrimary}function dfe(t){return t.type!==Ja.ServerType.Unknown}function eat(t){return t.type===Ja.ServerType.LoadBalancer}function A$(t){if(!t.isValid())throw new w$.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,i=[]){if(r.type===Ja.TopologyType.LoadBalanced)return n.filter(eat);if(r.type===Ja.TopologyType.Unknown)return[];if(r.type===Ja.TopologyType.Single)return R5(r,n.filter(dfe));if(r.type===Ja.TopologyType.Sharded){let u=n.filter(l=>!i.includes(l)),c=u.length>0?u:i;return R5(r,c.filter(dfe))}let s=t.mode;if(s===o3.ReadPreference.PRIMARY)return n.filter(D5);if(s===o3.ReadPreference.PRIMARY_PREFERRED){let u=n.filter(D5);if(u.length)return u}let o=s===o3.ReadPreference.NEAREST?Zot:Xot,a=R5(r,Qot(t,Jot(t,r,n.filter(o))));return s===o3.ReadPreference.SECONDARY_PREFERRED&&a.length===0?n.filter(D5):a}}});var $i=m(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.LegacyTimeoutContext=Uu.CSOTTimeoutContext=Uu.TimeoutContext=Uu.Timeout=Uu.TimeoutError=void 0;var pfe=require("timers"),c0=Ne(),C$=et(),u3=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};Uu.TimeoutError=u3;var Ku=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,i=!!r?.unref,s=r?.rejection;if(n<0)throw new c0.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let o;super((a,u)=>{o=u,e(C$.noop,u)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),s==null&&this.duration>0?(this.id=(0,pfe.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(new u3(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&i&&this.id.unref()):s!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(s))}clear(){(0,pfe.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,C$.squashError),new u3("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};Uu.Timeout=Ku;function tat(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function rat(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var c3=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(rat(e))return new k5(e);if(tat(e))return new M5(e);throw new c0.MongoRuntimeError("Unrecognized options")}};Uu.TimeoutContext=c3;var k5=class t extends c3{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return Ku.reject(new c0.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,C$.csotMin)(e,r)===r?this._serverSelectionTimeout=Ku.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=Ku.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new c0.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ku.expires(e):Ku.reject(new c0.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ku.expires(e):Ku.reject(new c0.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new c0.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};Uu.CSOTTimeoutContext=k5;var M5=class t extends c3{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?Ku.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?Ku.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};Uu.LegacyTimeoutContext=M5});var l3=m(l0=>{"use strict";Object.defineProperty(l0,"__esModule",{value:!0});l0.AggregateOperation=l0.DB_AGGREGATE_COLLECTION=void 0;var T$=kr(),ffe=Ne(),nat=Io(),iat=Xn(),G2=Vr();l0.DB_AGGREGATE_COLLECTION=1;var P5=class extends iat.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.SERVER_COMMAND_RESPONSE_TYPE=T$.CursorResponse,this.options={...n},this.target=e.collection||l0.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let i=r[r.length-1];(i.$out||i.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage||delete this.options.writeConcern,this.explain&&this.writeConcern)throw new ffe.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(n?.cursor!=null&&typeof n.cursor!="object")throw new ffe.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?T$.ExplainedCursorResponse:T$.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}buildCommandDocument(){let e=this.options,r={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&this.writeConcern&&nat.WriteConcern.apply(r,this.writeConcern),e.bypassDocumentValidation===!0&&(r.bypassDocumentValidation=e.bypassDocumentValidation),typeof e.allowDiskUse=="boolean"&&(r.allowDiskUse=e.allowDiskUse),e.hint&&(r.hint=e.hint),e.let&&(r.let=e.let),e.comment!==void 0&&(r.comment=e.comment),r.cursor=e.cursor||{},e.batchSize&&!this.hasWriteStage&&(r.cursor.batchSize=e.batchSize),r}handleOk(e){return e}};l0.AggregateOperation=P5;(0,G2.defineAspects)(P5,[G2.Aspect.READ_OPERATION,G2.Aspect.RETRYABLE,G2.Aspect.EXPLAINABLE,G2.Aspect.CURSOR_CREATING,G2.Aspect.SUPPORTS_RAW_DATA])});var ls=m(N5=>{"use strict";Object.defineProperty(N5,"__esModule",{value:!0});N5.executeOperation=uat;N5.autoConnect=gfe;var to=Ne(),hfe=cs(),mfe=a3(),sat=$i(),O$=et(),oat=l3(),xp=Vr(),aat=to.MONGODB_ERROR_CODES.IllegalOperation,yfe="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function uat(t,e,r){if(!(e instanceof xp.AbstractOperation))throw new to.MongoRuntimeError("This method requires a valid operation instance");let n=t.topology==null?await(0,O$.abortable)(gfe(t),e.options):t.topology,i=e.session,s;if(i==null)s=Symbol(),i=t.startSession({owner:s,explicit:!1});else{if(i.hasEnded)throw new to.MongoExpiredSessionError("Use of expired sessions is not permitted");if(i.snapshotEnabled&&!n.capabilities.supportsSnapshotReads)throw new to.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(i.client!==t)throw new to.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}e.session??=i;let o=e.readPreference??hfe.ReadPreference.primary,a=!!i?.inTransaction(),u=e.hasAspect(xp.Aspect.READ_OPERATION);if(a&&!o.equals(hfe.ReadPreference.primary)&&(u||e.commandName==="runCommand"))throw new to.MongoTransactionError(`Read preference in a transaction must be primary, not: ${o.mode}`);i?.isPinned&&i.transaction.isCommitted&&!e.bypassPinningCheck&&i.unpin(),r??=sat.TimeoutContext.create({session:i,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await cat(e,{topology:n,timeoutContext:r,session:i,readPreference:o})}finally{i?.owner!=null&&i.owner===s&&await i.endSession()}}async function gfe(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new to.MongoNotConnectedError("Client must be connected before running operations");t.s.options.__skipPingOnConnect=!0;try{if(await t.connect(),t.topology==null)throw new to.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options.__skipPingOnConnect}}return t.topology}async function cat(t,{topology:e,timeoutContext:r,session:n,readPreference:i}){let s;t.hasAspect(xp.Aspect.MUST_SELECT_SAME_SERVER)?s=(0,mfe.sameServerSelector)(t.server?.description):t instanceof oat.AggregateOperation&&t.hasWriteStage?s=(0,mfe.secondaryWritableServerSelector)(e.commonWireVersion,i):s=i;let o=await e.selectServer(s,{session:n,operationName:t.commandName,timeoutContext:r,signal:t.options.signal}),a=t.hasAspect(xp.Aspect.READ_OPERATION),u=t.hasAspect(xp.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,l=e.s.options.retryReads&&!c&&t.canRetryRead,d=e.s.options.retryWrites&&!c&&(0,O$.supportsRetryableWrites)(o)&&t.canRetryWrite,p=t.hasAspect(xp.Aspect.RETRYABLE)&&n!=null&&(a&&l||u&&d);u&&d&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let f=p?r.csotEnabled()?1/0:2:1,h,g;for(let _=0;_<f;_++){if(h){if(u&&h.code===aat)throw new to.MongoServerError({message:yfe,errmsg:yfe,originalError:h});if(t.hasAspect(xp.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||u&&!(0,to.isRetryableWriteError)(h)||a&&!(0,to.isRetryableReadError)(h))throw h;if(h instanceof to.MongoNetworkError&&t.hasAspect(xp.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),o=await e.selectServer(s,{session:n,operationName:t.commandName,previousServer:g,signal:t.options.signal}),u&&!(0,O$.supportsRetryableWrites)(o))throw new to.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}t.server=o;try{_>0&&t.hasAspect(xp.Aspect.COMMAND_BATCHING)&&t.resetBatch();try{let S=await o.command(t,r);return t.handleOk(S)}catch(S){return t.handleError(S)}}catch(S){if(!(S instanceof to.MongoError))throw S;if(h!=null&&S.hasErrorLabel(to.MongoErrorLabel.NoWritesPerformed))throw h;g=o.description,h=S,r.clear()}}throw h??new to.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var x$=m(H2=>{"use strict";Object.defineProperty(H2,"__esModule",{value:!0});H2.InsertOneOperation=H2.InsertOperation=void 0;var lat=kr(),Efe=Ne(),dat=et(),pat=Xn(),w1=Vr(),d3=class extends pat.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=lat.MongoDBResponse,this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}buildCommandDocument(e,r){let n=this.options??{},i=typeof n.ordered=="boolean"?n.ordered:!0,s={insert:this.ns.collection,documents:this.documents,ordered:i};return typeof n.bypassDocumentValidation=="boolean"&&(s.bypassDocumentValidation=n.bypassDocumentValidation),n.comment!==void 0&&(s.comment=n.comment),s}};H2.InsertOperation=d3;var F5=class extends d3{constructor(e,r,n){super(e.s.namespace,[(0,dat.maybeAddIdToDocuments)(e,r,n)],n)}handleOk(e){let r=super.handleOk(e);if(r.code)throw new Efe.MongoServerError(r);if(r.writeErrors)throw new Efe.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};H2.InsertOneOperation=F5;(0,w1.defineAspects)(d3,[w1.Aspect.RETRYABLE,w1.Aspect.WRITE_OPERATION,w1.Aspect.SUPPORTS_RAW_DATA]);(0,w1.defineAspects)(F5,[w1.Aspect.RETRYABLE,w1.Aspect.WRITE_OPERATION,w1.Aspect.SUPPORTS_RAW_DATA])});var W2=m(I$=>{"use strict";Object.defineProperty(I$,"__esModule",{value:!0});I$.formatSort=wat;var bfe=Ne();function z2(t=1){let e=`${t}`.toLowerCase();if(fat(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new bfe.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function fat(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function hat(t){if(Array.isArray(t)&&t.length===2)try{return z2(t[1]),!0}catch{return!1}return!1}function mat(t){return Array.isArray(t)&&Array.isArray(t[0])}function yat(t){return t instanceof Map&&t.size>0}function gat(t){return Array.isArray(t)}function Eat(t){return new Map([[`${t[0]}`,z2([t[1]])]])}function bat(t){let e=t.map(([r,n])=>[`${r}`,z2(n)]);return new Map(e)}function _at(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function vat(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,z2(n)]);return new Map(e)}function Sat(t){let e=Array.from(t).map(([r,n])=>[`${r}`,z2(n)]);return new Map(e)}function wat(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,z2(e)]]);if(typeof t!="object")throw new bfe.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!gat(t))return yat(t)?Sat(t):Object.keys(t).length?vat(t):void 0;if(t.length)return mat(t)?bat(t):hat(t)?Eat(t):_at(t)}}});var D$=m(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.ReplaceOneOperation=sl.UpdateManyOperation=sl.UpdateOneOperation=sl.UpdateOperation=void 0;sl.makeUpdateStatement=j5;var Aat=kr(),ol=Ne(),Cat=W2(),R$=et(),Tat=Xn(),gi=Vr(),d0=class extends Tat.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=Aat.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}buildCommandDocument(e,r){let n=this.options,i={update:this.ns.collection,updates:this.statements,ordered:n.ordered??!0};return typeof n.bypassDocumentValidation=="boolean"&&(i.bypassDocumentValidation=n.bypassDocumentValidation),n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),i}};sl.UpdateOperation=d0;var B5=class extends d0{constructor(e,r,n,i){if(super(e,[j5(r,n,{...i,multi:!1})],i),!(0,R$.hasAtomicOperators)(n,i))throw new ol.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ol.MongoServerError(r);if(r.writeErrors)throw new ol.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};sl.UpdateOneOperation=B5;var q5=class extends d0{constructor(e,r,n,i){if(super(e,[j5(r,n,{...i,multi:!0})],i),!(0,R$.hasAtomicOperators)(n,i))throw new ol.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ol.MongoServerError(r);if(r.writeErrors)throw new ol.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};sl.UpdateManyOperation=q5;var L5=class extends d0{constructor(e,r,n,i){if(super(e,[j5(r,n,{...i,multi:!1})],i),(0,R$.hasAtomicOperators)(n))throw new ol.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ol.MongoServerError(r);if(r.writeErrors)throw new ol.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};sl.ReplaceOneOperation=L5;function j5(t,e,r){if(t==null||typeof t!="object")throw new ol.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new ol.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),!r.multi&&r.sort!=null&&(n.sort=(0,Cat.formatSort)(r.sort)),n}(0,gi.defineAspects)(d0,[gi.Aspect.RETRYABLE,gi.Aspect.WRITE_OPERATION,gi.Aspect.SKIP_COLLATION,gi.Aspect.SUPPORTS_RAW_DATA]);(0,gi.defineAspects)(B5,[gi.Aspect.RETRYABLE,gi.Aspect.WRITE_OPERATION,gi.Aspect.EXPLAINABLE,gi.Aspect.SKIP_COLLATION,gi.Aspect.SUPPORTS_RAW_DATA]);(0,gi.defineAspects)(q5,[gi.Aspect.WRITE_OPERATION,gi.Aspect.EXPLAINABLE,gi.Aspect.SKIP_COLLATION,gi.Aspect.SUPPORTS_RAW_DATA]);(0,gi.defineAspects)(L5,[gi.Aspect.RETRYABLE,gi.Aspect.WRITE_OPERATION,gi.Aspect.SKIP_COLLATION,gi.Aspect.SUPPORTS_RAW_DATA])});var Y2=m(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.BulkOperationBase=vr.FindOperators=vr.MongoBulkWriteError=vr.WriteError=vr.WriteConcernError=vr.BulkWriteResult=vr.Batch=vr.BatchType=void 0;vr.mergeBatchResults=M$;var Sfe=gr(),Ki=Ne(),f3=S$(),Oat=ls(),xat=x$(),p0=D$(),Iat=$i(),al=et(),_fe=Io();vr.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var k$=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};vr.Batch=k$;var A1=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(i=>n===i.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new J2({errmsg:e,code:Ki.MONGODB_ERROR_CODES.WriteConcernTimeout})}}}toString(){return`BulkWriteResult(${Sfe.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};vr.BulkWriteResult=A1;var J2=class{constructor(e){this.serverError=e}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}};vr.WriteConcernError=J2;var h3=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};vr.WriteError=h3;function M$(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let s={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new h3(s));return}else if(n.ok===0&&e.ok===0)return;wfe(t)&&n.n&&(e.nInserted=e.nInserted+n.n),F$(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let i=0;if(Array.isArray(n.upserted)){i=n.upserted.length;for(let s=0;s<n.upserted.length;s++)e.upserted.push({index:n.upserted[s].index+t.originalZeroIndex,_id:n.upserted[s]._id})}else n.upserted&&(i=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(N$(t)&&n.n){let s=n.nModified;e.nUpserted=e.nUpserted+i,e.nMatched=e.nMatched+(n.n-i),typeof s=="number"?e.nModified=e.nModified+s:e.nModified=0}if(Array.isArray(n.writeErrors))for(let s=0;s<n.writeErrors.length;s++){let o={index:t.originalIndexes[n.writeErrors[s].index],code:n.writeErrors[s].code,errmsg:n.writeErrors[s].errmsg,errInfo:n.writeErrors[s].errInfo,op:t.operations[n.writeErrors[s].index]};e.writeErrors.push(new h3(o))}n.writeConcernError&&e.writeConcernErrors.push(new J2(n.writeConcernError))}async function vfe(t,e){if(t.s.batches.length===0)return new A1(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let i=(0,al.resolveOptions)(t,{...e,ordered:t.isOrdered});i.bypassDocumentValidation!==!0&&delete i.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(i.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(i.checkKeys=!1),i.retryWrites&&(N$(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.multi)),F$(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.limit===0)));let s=wfe(n)?new xat.InsertOperation(t.s.namespace,n.operations,i):N$(n)?new p0.UpdateOperation(t.s.namespace,n.operations,i):F$(n)?new f3.DeleteOperation(t.s.namespace,n.operations,i):null;if(s==null)throw new Ki.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let o=null,a;try{a=await(0,Oat.executeOperation)(t.s.collection.client,s,i.timeoutContext)}catch(c){o=c}if(o!=null)if(o instanceof Ki.MongoWriteConcernError){M$(n,t.s.bulkResult,o,a);let c=new A1(t.s.bulkResult,t.isOrdered);throw new f0({message:o.result.writeConcernError.errmsg,code:o.result.writeConcernError.code},c)}else throw new f0(o,new A1(t.s.bulkResult,t.isOrdered));M$(n,t.s.bulkResult,o,a);let u=new A1(t.s.bulkResult,t.isOrdered);t.handleWriteError(u)}t.s.batches.length=0;let r=new A1(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var f0=class extends Ki.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof J2?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};vr.MongoBulkWriteError=f0;var $5=class{constructor(e){this.bulkOperation=e}update(e){let r=p3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,p0.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,al.hasAtomicOperators)(e,this.bulkOperation.bsonOptions))throw new Ki.MongoInvalidArgumentError("Update document requires atomic operators");let r=p3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,p0.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,al.hasAtomicOperators)(e))throw new Ki.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=p3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,p0.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=p3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.DELETE,(0,f3.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=p3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.DELETE,(0,f3.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};vr.FindOperators=$5;var P$=class{constructor(e,r,n){this.collection=e,this.isOrdered=n;let i=(0,al.getTopology)(e);r=r??{};let s=e.s.namespace,o=!1,a=void 0,u=i.lastHello(),c=!!(i.s.options&&i.s.options.autoEncrypter),l=u&&u.maxBsonObjectSize?u.maxBsonObjectSize:1024*1024*16,d=c?1024*1024*2:l,p=u&&u.maxWriteBatchSize?u.maxWriteBatchSize:1e3,f=(p-1).toString(10).length+2,h=Object.assign({},r);h=(0,al.applyRetryableWrites)(h,e.db);let g={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:g,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:_fe.WriteConcern.fromOptions(r),maxBsonObjectSize:l,maxBatchSizeBytes:d,maxWriteBatchSize:p,maxKeySize:f,namespace:s,topology:i,options:h,bsonOptions:(0,Sfe.resolveBSONOptions)(r),currentOp:a,executed:o,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,al.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(vr.BatchType.INSERT,e)}find(e){if(!e)throw new Ki.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new $5(this)}raw(e){if(e==null||typeof e!="object")throw new Ki.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,al.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList(vr.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new Ki.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,p0.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,al.hasAtomicOperators)(r.u))throw new Ki.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new Ki.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,p0.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,al.hasAtomicOperators)(r.u,this.bsonOptions))throw new Ki.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new Ki.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,p0.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,al.hasAtomicOperators)(r.u,this.bsonOptions))throw new Ki.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new Ki.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(vr.BatchType.DELETE,(0,f3.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new Ki.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(vr.BatchType.DELETE,(0,f3.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new Ki.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new Ki.MongoBatchReExecutionError;let r=_fe.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new Ki.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n=(0,al.resolveOptions)(this.collection,{...this.s.options,...e});return n.timeoutContext??=Iat.TimeoutContext.create({session:n.session,timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),n.session==null?await this.collection.client.withSession({explicit:!1},async i=>await vfe(this,{...n,session:i})):await vfe(this,{...n})}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new f0({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new f0(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}};vr.BulkOperationBase=P$;function wfe(t){return t.batchType===vr.BatchType.INSERT}function N$(t){return t.batchType===vr.BatchType.UPDATE}function F$(t){return t.batchType===vr.BatchType.DELETE}function p3(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var Cfe=m((Hmr,Afe)=>{"use strict";var Rat=Y2().BulkWriteResult;Afe.exports=Rat});var m3=m((Dfe,kfe)=>{"use strict";var fd=kfe.exports=Dfe=Object.create(null),Tfe="disconnected",Ofe="connected",xfe="connecting",Ife="disconnecting",Rfe="uninitialized";fd[0]=Tfe;fd[1]=Ofe;fd[2]=xfe;fd[3]=Ife;fd[99]=Rfe;fd[Tfe]=0;fd[Ofe]=1;fd[xfe]=2;fd[Ife]=3;fd[Rfe]=99});var Vu=m((zmr,Mfe)=>{"use strict";var Dat=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):t=>setTimeout(t,0);Mfe.exports=function(e){return Dat(e)}});var B$=m((Wmr,Nfe)=>{"use strict";var kat=require("events").EventEmitter,Mat=m3(),Pfe=Vu();function jr(t,e,r){r===void 0&&(r={}),this.opts=r,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!e?._hasOpened,this.emitter=new kat,Mat.connected===this.conn.readyState&&this.onOpen()}jr.prototype.name;jr.prototype.collectionName;jr.prototype.conn;jr.prototype.onOpen=function(){this.buffer=!1,Pfe(()=>this.doQueue())};jr.prototype.onClose=function(){};jr.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this};jr.prototype.removeQueue=function(t,e){let r=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return r===-1?!1:(this.queue.splice(r,1),!0)};jr.prototype.doQueue=function(){for(let e of this.queue)typeof e[0]=="function"?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];let t=this;return Pfe(function(){t.emitter.emit("queue")}),this};jr.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};jr.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};jr.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};jr.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};jr.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};jr.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};jr.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};jr.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};jr.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};jr.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};jr.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};jr.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};jr.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};jr.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};jr.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};jr.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};jr.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};jr.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};jr.prototype._shouldBufferCommands=function(){let e=this.opts;return e.bufferCommands!=null?e.bufferCommands:e&&e.schemaUserProvidedOptions!=null&&e.schemaUserProvidedOptions.bufferCommands!=null?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()};jr.prototype._getBufferTimeoutMS=function(){let e=this.conn,r=this.opts;return r.bufferTimeoutMS!=null?r.bufferTimeoutMS:r&&r.schemaUserProvidedOptions!=null&&r.schemaUserProvidedOptions.bufferTimeoutMS!=null?r.schemaUserProvidedOptions.bufferTimeoutMS:e._getBufferTimeoutMS()};Nfe.exports=jr});var Qt=m((Jmr,Ffe)=>{"use strict";var K5=class extends Error{};Object.defineProperty(K5.prototype,"name",{value:"MongooseError"});Ffe.exports=K5});var qfe=m(V5=>{"use strict";Object.defineProperty(V5,"__esModule",{value:!0});V5.ListDatabasesOperation=void 0;var Pat=kr(),Bfe=et(),Nat=Xn(),q$=Vr(),U5=class extends Nat.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Pat.MongoDBResponse,this.options=r??{},this.ns=new Bfe.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(e,r){let n={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(n.nameOnly=this.options.nameOnly),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),(0,Bfe.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(n.comment=this.options.comment),n}};V5.ListDatabasesOperation=U5;(0,q$.defineAspects)(U5,[q$.Aspect.READ_OPERATION,q$.Aspect.RETRYABLE])});var L$=m(H5=>{"use strict";Object.defineProperty(H5,"__esModule",{value:!0});H5.RemoveUserOperation=void 0;var Fat=kr(),Bat=Xn(),Lfe=Vr(),G5=class extends Bat.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Fat.MongoDBResponse,this.options=n,this.username=r}get commandName(){return"dropUser"}buildCommandDocument(e){return{dropUser:this.username}}handleOk(e){return!0}};H5.RemoveUserOperation=G5;(0,Lfe.defineAspects)(G5,[Lfe.Aspect.WRITE_OPERATION])});var y3=m(Q2=>{"use strict";Object.defineProperty(Q2,"__esModule",{value:!0});Q2.RunCursorCommandOperation=Q2.RunCommandOperation=void 0;var jfe=kr(),qat=Vr(),z5=class extends qat.AbstractOperation{constructor(e,r,n){super(n),this.SERVER_COMMAND_RESPONSE_TYPE=jfe.MongoDBResponse,this.command=r,this.options=n,this.ns=e.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(e,r){return this.command}buildOptions(e){return{...this.options,session:this.session,timeoutContext:e,signal:this.options.signal,readPreference:this.options.readPreference}}};Q2.RunCommandOperation=z5;var j$=class extends z5{constructor(){super(...arguments),this.SERVER_COMMAND_RESPONSE_TYPE=jfe.CursorResponse}handleOk(e){return e}};Q2.RunCursorCommandOperation=j$});var $fe=m(W5=>{"use strict";Object.defineProperty(W5,"__esModule",{value:!0});W5.ValidateCollectionOperation=void 0;var Lat=kr(),$$=Ne(),jat=Xn(),K$=class extends jat.CommandOperation{constructor(e,r,n){super(e.s.db,n),this.SERVER_COMMAND_RESPONSE_TYPE=Lat.MongoDBResponse,this.options=n,this.collectionName=r}get commandName(){return"validate"}buildCommandDocument(e,r){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(n=>n[0]!=="session"))}}handleOk(e){let r=super.handleOk(e);if(r.result!=null&&typeof r.result!="string")throw new $$.MongoUnexpectedServerResponseError("Error with validation data");if(r.result!=null&&r.result.match(/exception|corrupt/)!=null)throw new $$.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(r.valid!=null&&!r.valid)throw new $$.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return e}};W5.ValidateCollectionOperation=K$});var V$=m(Y5=>{"use strict";Object.defineProperty(Y5,"__esModule",{value:!0});Y5.Admin=void 0;var $at=gr(),J5=ls(),Kat=qfe(),Uat=L$(),Vat=y3(),Gat=$fe(),Hat=et(),U$=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,J5.executeOperation)(this.s.db.client,new Vat.RunCommandOperation(new Hat.MongoDBNamespace("admin"),e,{...(0,$at.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,J5.executeOperation)(this.s.db.client,new Uat.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,J5.executeOperation)(this.s.db.client,new Gat.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,J5.executeOperation)(this.s.db.client,new Kat.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};Y5.Admin=U$});var H$=m(X5=>{"use strict";Object.defineProperty(X5,"__esModule",{value:!0});X5.OrderedBulkOperation=void 0;var zat=gr(),Kfe=Ne(),Q5=Y2(),G$=class extends Q5.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=zat.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Kfe.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new Q5.Batch(e,this.s.currentIndex));let i=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Q5.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===Q5.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new Kfe.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=i+n,this.s.currentIndex+=1,this}};X5.OrderedBulkOperation=G$});var W$=m(Z5=>{"use strict";Object.defineProperty(Z5,"__esModule",{value:!0});Z5.UnorderedBulkOperation=void 0;var Wat=gr(),Ufe=Ne(),Ip=Y2(),z$=class extends Ip.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=Wat.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Ufe.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Ip.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Ip.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Ip.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let i=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Ip.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Ip.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new Ufe.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Ip.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Ip.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Ip.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=i+n,this}};Z5.UnorderedBulkOperation=z$});var O1=m(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.MongoLogger=Xt.MongoLoggableComponent=Xt.SEVERITY_LEVEL_MAP=Xt.DEFAULT_MAX_DOCUMENT_LENGTH=Xt.SeverityLevel=void 0;Xt.parseSeverityFromString=X$;Xt.createStdioLogger=h0;Xt.stringifyWithMaxLen=T1;Xt.defaultLogTransform=Hfe;var Vfe=require("util"),Gfe=gr(),ln=yi(),m0=et();Xt.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});Xt.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var Q$=class extends Map{constructor(e){let r=[];for(let[n,i]of e)r.push([i,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};Xt.SEVERITY_LEVEL_MAP=new Q$([[Xt.SeverityLevel.OFF,-1/0],[Xt.SeverityLevel.EMERGENCY,0],[Xt.SeverityLevel.ALERT,1],[Xt.SeverityLevel.CRITICAL,2],[Xt.SeverityLevel.ERROR,3],[Xt.SeverityLevel.WARNING,4],[Xt.SeverityLevel.NOTICE,5],[Xt.SeverityLevel.INFORMATIONAL,6],[Xt.SeverityLevel.DEBUG,7],[Xt.SeverityLevel.TRACE,8]]);Xt.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function X$(t){let e=Object.values(Xt.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function h0(t){return{write:(0,Vfe.promisify)((e,r)=>{let n=(0,Vfe.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function Jat({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:h0(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:h0(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:h0(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:h0(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:h0(process.stderr),mongodbLogPathIsStdErr:!0}}function X2(t,e,r){return X$(t)??X$(e)??r}function Yat(t,e){let r=Xt.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=Xt.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function T1(t,e,r={}){let n="",i=0,s=function(a,u){if(!(i>=e)){if(a==="")return i+=1,u;if(i+=a.length+4,u==null)return u;switch(typeof u){case"string":i+=u.length+2;break;case"number":case"bigint":i+=String(u).length;break;case"boolean":i+=u?4:5;break;case"object":if((0,m0.isUint8Array)(u))i+=22+u.byteLength+u.byteLength*.33+18|0;else if("_bsontype"in u){let c=u;switch(c._bsontype){case"Int32":i+=String(c.value).length;break;case"Double":i+=(c.value|0)===c.value?String(c.value).length+2:String(c.value).length;break;case"Long":i+=c.toString().length;break;case"ObjectId":i+=35;break;case"MaxKey":case"MinKey":i+=13;break;case"Binary":i+=22+u.position+u.position*.33+18|0;break;case"Timestamp":i+=19+String(c.t).length+5+String(c.i).length+2;break;case"Code":c.scope==null?i+=c.code.length+10+2:i+=c.code.length+10+11;break;case"BSONRegExp":i+=34+c.pattern.length+13+c.options.length+3;break}}}return u}};if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{e!==0?n=Gfe.EJSON.stringify(t,s,0,r):n=Gfe.EJSON.stringify(t,r)}catch(o){n=`Extended JSON serialization failed with: ${o.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function Qat(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function eC(t,e,r=Xt.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:i,topologyDescription:s,message:o}=e;return t.selector=T1(n,r),t.operation=i,t.topologyDescription=T1(s,r),t.message=o,t}function J$(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=m0.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function Ya(t,e){let{host:r,port:n}=m0.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function C1(t,e){return t.topologyId=e.topologyId,t}function Y$(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:i,port:s}=m0.HostAddress.fromString(n).toHostPort();return t.serverHost=i,t.serverPort=s,t}function Hfe(t,e=Xt.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case ln.SERVER_SELECTION_STARTED:return r=eC(r,t,e),r;case ln.SERVER_SELECTION_FAILED:return r=eC(r,t,e),r.failure=t.failure?.message,r;case ln.SERVER_SELECTION_SUCCEEDED:return r=eC(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case ln.WAITING_FOR_SUITABLE_SERVER:return r=eC(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case ln.COMMAND_STARTED:return r=J$(r,t),r.message="Command started",r.command=T1(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case ln.COMMAND_SUCCEEDED:return r=J$(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=T1(t.reply,e,{relaxed:!0}),r;case ln.COMMAND_FAILED:return r=J$(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case ln.CONNECTION_POOL_CREATED:if(r=Ya(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:a}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:a}}return r;case ln.CONNECTION_POOL_READY:return r=Ya(r,t),r.message="Connection pool ready",r;case ln.CONNECTION_POOL_CLEARED:return r=Ya(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case ln.CONNECTION_POOL_CLOSED:return r=Ya(r,t),r.message="Connection pool closed",r;case ln.CONNECTION_CREATED:return r=Ya(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case ln.CONNECTION_READY:return r=Ya(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case ln.CONNECTION_CLOSED:switch(r=Ya(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case ln.CONNECTION_CHECK_OUT_STARTED:return r=Ya(r,t),r.message="Connection checkout started",r;case ln.CONNECTION_CHECK_OUT_FAILED:switch(r=Ya(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case ln.CONNECTION_CHECKED_OUT:return r=Ya(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case ln.CONNECTION_CHECKED_IN:return r=Ya(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case ln.SERVER_OPENING:return r=C1(r,t),r=Ya(r,t),r.message="Starting server monitoring",r;case ln.SERVER_CLOSED:return r=C1(r,t),r=Ya(r,t),r.message="Stopped server monitoring",r;case ln.SERVER_HEARTBEAT_STARTED:return r=C1(r,t),r=Y$(r,t),r.message="Server heartbeat started",r;case ln.SERVER_HEARTBEAT_SUCCEEDED:return r=C1(r,t),r=Y$(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=T1(t.reply,e,{relaxed:!0}),r;case ln.SERVER_HEARTBEAT_FAILED:return r=C1(r,t),r=Y$(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case ln.TOPOLOGY_OPENING:return r=C1(r,t),r.message="Starting topology monitoring",r;case ln.TOPOLOGY_CLOSED:return r=C1(r,t),r.message="Stopped topology monitoring",r;case ln.TOPOLOGY_DESCRIPTION_CHANGED:return r=C1(r,t),r.message="Topology description changed",r.previousDescription=r.reply=T1(t.previousDescription,e),r.newDescription=r.reply=T1(t.newDescription,e),r;default:for(let[n,i]of Object.entries(t))i!=null&&(r[n]=i)}return r}var Z$=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(Xt.MongoLoggableComponent)){e[r]={};for(let n of Object.values(Xt.SeverityLevel))e[r][n]=Yat(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(Xt.MongoLoggableComponent)){this.componentSeverities[e]=Xt.SeverityLevel.OFF;for(let r of Object.values(Xt.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=h0(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(Xt.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===Xt.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let i={t:new Date,c:r,s:e};if(typeof n=="string"?i.message=n:typeof n=="object"&&(Qat(n)?i={...i,...n.toLog()}:i={...i,...Hfe(n,this.maxDocumentLength)}),(0,m0.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(i)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let s=this.logDestination.write(i);(0,m0.isPromiseLike)(s)&&(this.pendingLog=s.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(s){this.logWriteFailureHandler(s)}}static resolveOptions(e,r){let n=Jat(e,r),i={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},s=X2(i.mongodbLogComponentSeverities?.default,i.MONGODB_LOG_ALL,Xt.SeverityLevel.OFF);return{componentSeverities:{command:X2(i.mongodbLogComponentSeverities?.command,i.MONGODB_LOG_COMMAND,s),topology:X2(i.mongodbLogComponentSeverities?.topology,i.MONGODB_LOG_TOPOLOGY,s),serverSelection:X2(i.mongodbLogComponentSeverities?.serverSelection,i.MONGODB_LOG_SERVER_SELECTION,s),connection:X2(i.mongodbLogComponentSeverities?.connection,i.MONGODB_LOG_CONNECTION,s),client:X2(i.mongodbLogComponentSeverities?.client,i.MONGODB_LOG_CLIENT,s),default:s},maxDocumentLength:i.mongodbLogMaxDocumentLength??(0,m0.parseUnsignedInteger)(i.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:i.mongodbLogPath,logDestinationIsStdErr:i.mongodbLogPathIsStdErr}}};Xt.MongoLogger=Z$});var Qa=m(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});Z2.CancellationToken=Z2.TypedEventEmitter=void 0;var Xat=require("events"),Zat=O1(),eut=et(),tC=class extends Xat.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...i){if(this.emit(e,...i),this.component){let s={topologyId:r,serverConnectionId:n??null,...i[0]};this.mongoLogger?.debug(this.component,s)}}emitAndLogCommand(e,r,n,i,...s){if(e&&this.emit(r,...s),i){let o={databaseName:n,...s[0]};this.mongoLogger?.debug(Zat.MongoLoggableComponent.COMMAND,o)}}};Z2.TypedEventEmitter=tC;var eK=class extends tC{constructor(...e){super(...e),this.on("error",eut.noop)}};Z2.CancellationToken=eK});var tK=m(iC=>{"use strict";Object.defineProperty(iC,"__esModule",{value:!0});iC.GetMoreOperation=void 0;var tut=kr(),zfe=Ne(),rut=et(),rC=Vr(),nC=class extends rC.AbstractOperation{constructor(e,r,n,i){super(i),this.SERVER_COMMAND_RESPONSE_TYPE=tut.CursorResponse,this.options=i,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}buildCommand(e){if(this.cursorId==null||this.cursorId.isZero())throw new zfe.MongoRuntimeError("Unable to iterate cursor with no id");let r=this.ns.collection;if(r==null)throw new zfe.MongoRuntimeError("A collection name must be determined before getMore");let n={getMore:this.cursorId,collection:r};return typeof this.options.batchSize=="number"&&(n.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(n.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,rut.maxWireVersion)(e)>=9&&(n.comment=this.options.comment),n}buildOptions(e){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:e,...this.options}}handleOk(e){return e}};iC.GetMoreOperation=nC;(0,rC.defineAspects)(nC,[rC.Aspect.READ_OPERATION,rC.Aspect.MUST_SELECT_SAME_SERVER])});var Wfe=m(oC=>{"use strict";Object.defineProperty(oC,"__esModule",{value:!0});oC.KillCursorsOperation=void 0;var nut=kr(),iut=Ne(),rK=Vr(),sC=class extends rK.AbstractOperation{constructor(e,r,n,i){super(i),this.SERVER_COMMAND_RESPONSE_TYPE=nut.MongoDBResponse,this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}buildCommand(e,r){let n=this.ns.collection;if(n==null)throw new iut.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:n,cursors:[this.cursorId]}}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){}};oC.KillCursorsOperation=sC;(0,rK.defineAspects)(sC,[rK.Aspect.MUST_SELECT_SAME_SERVER])});var uC=m((a0r,r1e)=>{"use strict";var aC=Object.prototype.hasOwnProperty,t1e=Object.prototype.toString,Jfe=Object.defineProperty,Yfe=Object.getOwnPropertyDescriptor,Qfe=function(e){return typeof Array.isArray=="function"?Array.isArray(e):t1e.call(e)==="[object Array]"},Xfe=function(e){if(!e||t1e.call(e)!=="[object Object]")return!1;var r=aC.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&aC.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||aC.call(e,i)},Zfe=function(e,r){Jfe&&r.name==="__proto__"?Jfe(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},e1e=function(e,r){if(r==="__proto__")if(aC.call(e,r)){if(Yfe)return Yfe(e,r).value}else return;return e[r]};r1e.exports=function t(){var e,r,n,i,s,o,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(r in e)n=e1e(a,r),i=e1e(e,r),a!==i&&(l&&i&&(Xfe(i)||(s=Qfe(i)))?(s?(s=!1,o=n&&Qfe(n)?n:[]):o=n&&Xfe(n)?n:{},Zfe(a,{name:r,newValue:t(l,o,i)})):typeof i<"u"&&Zfe(a,{name:r,newValue:i}));return a}});var s1e=m((u0r,i1e)=>{"use strict";var Zn={};i1e.exports=Zn;function n1e(t){return t<0?-1:1}function sut(t){return t%1===.5&&(t&1)===0?Math.floor(t):Math.round(t)}function x1(t,e){e.unsigned||--t;let r=e.unsigned?0:-Math.pow(2,t),n=Math.pow(2,t)-1,i=e.moduloBitLength?Math.pow(2,e.moduloBitLength):Math.pow(2,t),s=e.moduloBitLength?Math.pow(2,e.moduloBitLength-1):Math.pow(2,t-1);return function(o,a){a||(a={});let u=+o;if(a.enforceRange){if(!Number.isFinite(u))throw new TypeError("Argument is not a finite number");if(u=n1e(u)*Math.floor(Math.abs(u)),u<r||u>n)throw new TypeError("Argument is not in byte range");return u}if(!isNaN(u)&&a.clamp)return u=sut(u),u<r&&(u=r),u>n&&(u=n),u;if(!Number.isFinite(u)||u===0)return 0;if(u=n1e(u)*Math.floor(Math.abs(u)),u=u%i,!e.unsigned&&u>=s)return u-i;if(e.unsigned){if(u<0)u+=i;else if(u===-0)return 0}return u}}Zn.void=function(){};Zn.boolean=function(t){return!!t};Zn.byte=x1(8,{unsigned:!1});Zn.octet=x1(8,{unsigned:!0});Zn.short=x1(16,{unsigned:!1});Zn["unsigned short"]=x1(16,{unsigned:!0});Zn.long=x1(32,{unsigned:!1});Zn["unsigned long"]=x1(32,{unsigned:!0});Zn["long long"]=x1(32,{unsigned:!1,moduloBitLength:64});Zn["unsigned long long"]=x1(32,{unsigned:!0,moduloBitLength:64});Zn.double=function(t){let e=+t;if(!Number.isFinite(e))throw new TypeError("Argument is not a finite floating-point value");return e};Zn["unrestricted double"]=function(t){let e=+t;if(isNaN(e))throw new TypeError("Argument is NaN");return e};Zn.float=Zn.double;Zn["unrestricted float"]=Zn["unrestricted double"];Zn.DOMString=function(t,e){return e||(e={}),e.treatNullAsEmptyString&&t===null?"":String(t)};Zn.ByteString=function(t,e){let r=String(t),n;for(let i=0;(n=r.codePointAt(i))!==void 0;++i)if(n>255)throw new TypeError("Argument is not a valid bytestring");return r};Zn.USVString=function(t){let e=String(t),r=e.length,n=[];for(let i=0;i<r;++i){let s=e.charCodeAt(i);if(s<55296||s>57343)n.push(String.fromCodePoint(s));else if(56320<=s&&s<=57343)n.push(String.fromCodePoint(65533));else if(i===r-1)n.push(String.fromCodePoint(65533));else{let o=e.charCodeAt(i+1);if(56320<=o&&o<=57343){let a=s&1023,u=o&1023;n.push(String.fromCodePoint(65536+1024*a+u)),++i}else n.push(String.fromCodePoint(65533))}}return n.join("")};Zn.Date=function(t,e){if(!(t instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(t))return t};Zn.RegExp=function(t,e){return t instanceof RegExp||(t=new RegExp(t)),t}});var o1e=m((c0r,I1)=>{"use strict";I1.exports.mixin=function(e,r){let n=Object.getOwnPropertyNames(r);for(let i=0;i<n.length;++i)Object.defineProperty(e,n[i],Object.getOwnPropertyDescriptor(r,n[i]))};I1.exports.wrapperSymbol=Symbol("wrapper");I1.exports.implSymbol=Symbol("impl");I1.exports.wrapperForImpl=function(t){return t[I1.exports.wrapperSymbol]};I1.exports.implForWrapper=function(t){return t[I1.exports.implSymbol]}});var a1e=m((l0r,out)=>{out.exports=[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1e3,1e3],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6e3],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8e3,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8e3]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9e3],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[3e4]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13e3,13e3],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43e3,43e3],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64e3,64e3],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66e3,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[12e4,12e4],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128e3,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23e3]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149e3]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32e3]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195e3,195e3],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[4e4]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918e3,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]});var f1e=m((d0r,lC)=>{"use strict";var c1e=require("punycode"),u1e=a1e(),e6={TRANSITIONAL:0,NONTRANSITIONAL:1};function l1e(t){return t.split("\0").map(function(e){return e.normalize("NFC")}).join("\0")}function d1e(t){for(var e=0,r=u1e.length-1;e<=r;){var n=Math.floor((e+r)/2),i=u1e[n];if(i[0][0]<=t&&i[0][1]>=t)return i;i[0][0]>t?r=n-1:e=n+1}return null}var aut=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function p1e(t){return t.replace(aut,"_").length}function uut(t,e,r){for(var n=!1,i="",s=p1e(t),o=0;o<s;++o){var a=t.codePointAt(o),u=d1e(a);switch(u[1]){case"disallowed":n=!0,i+=String.fromCodePoint(a);break;case"ignored":break;case"mapped":i+=String.fromCodePoint.apply(String,u[2]);break;case"deviation":r===e6.TRANSITIONAL?i+=String.fromCodePoint.apply(String,u[2]):i+=String.fromCodePoint(a);break;case"valid":i+=String.fromCodePoint(a);break;case"disallowed_STD3_mapped":e?(n=!0,i+=String.fromCodePoint(a)):i+=String.fromCodePoint.apply(String,u[2]);break;case"disallowed_STD3_valid":e&&(n=!0),i+=String.fromCodePoint(a);break}}return{string:i,error:n}}var cut=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function lut(t,e){t.substr(0,4)==="xn--"&&(t=c1e.toUnicode(t),e=e6.NONTRANSITIONAL);var r=!1;(l1e(t)!==t||t[3]==="-"&&t[4]==="-"||t[0]==="-"||t[t.length-1]==="-"||t.indexOf(".")!==-1||t.search(cut)===0)&&(r=!0);for(var n=p1e(t),i=0;i<n;++i){var s=d1e(t.codePointAt(i));if(cC===e6.TRANSITIONAL&&s[1]!=="valid"||cC===e6.NONTRANSITIONAL&&s[1]!=="valid"&&s[1]!=="deviation"){r=!0;break}}return{label:t,error:r}}function cC(t,e,r){var n=uut(t,e,r);n.string=l1e(n.string);for(var i=n.string.split("."),s=0;s<i.length;++s)try{var o=lut(i[s]);i[s]=o.label,n.error=n.error||o.error}catch{n.error=!0}return{string:i.join("."),error:n.error}}lC.exports.toASCII=function(t,e,r,n){var i=cC(t,e,r),s=i.string.split(".");if(s=s.map(function(u){try{return c1e.toASCII(u)}catch{return i.error=!0,u}}),n){var o=s.slice(0,s.length-1).join(".").length;(o.length>253||o.length===0)&&(i.error=!0);for(var a=0;a<s.length;++a)if(s.length>63||s.length===0){i.error=!0;break}}return i.error?null:s.join(".")};lC.exports.toUnicode=function(t,e){var r=cC(t,e,e6.NONTRANSITIONAL);return{domain:r.string,error:r.error}};lC.exports.PROCESSING_OPTIONS=e6});var hd=m((p0r,Xa)=>{"use strict";var t6=require("punycode"),h1e=f1e(),E1e={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},rr=Symbol("failure");function m1e(t){return t6.ucs2.decode(t).length}function y1e(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function g3(t){return t>=48&&t<=57}function E3(t){return t>=65&&t<=90||t>=97&&t<=122}function dut(t){return E3(t)||g3(t)}function ul(t){return g3(t)||t>=65&&t<=70||t>=97&&t<=102}function g1e(t){return t==="."||t.toLowerCase()==="%2e"}function put(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function fut(t,e){return E3(t)&&(e===58||e===124)}function b1e(t){return t.length===2&&E3(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function hut(t){return t.length===2&&E3(t.codePointAt(0))&&t[1]===":"}function mut(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/)!==-1}function yut(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/)!==-1}function nK(t){return E1e[t]!==void 0}function Ui(t){return nK(t.scheme)}function gut(t){return E1e[t]}function _1e(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e="0"+e),"%"+e}function Eut(t){let e=new Buffer(t),r="";for(let n=0;n<e.length;++n)r+=_1e(e[n]);return r}function but(t){let e=new Buffer(t),r=[];for(let n=0;n<e.length;++n)e[n]!==37?r.push(e[n]):e[n]===37&&ul(e[n+1])&&ul(e[n+2])?(r.push(parseInt(e.slice(n+1,n+3).toString(),16)),n+=2):r.push(e[n]);return new Buffer(r).toString()}function dC(t){return t<=31||t>126}var _ut=new Set([32,34,35,60,62,63,96,123,125]);function v1e(t){return dC(t)||_ut.has(t)}var vut=new Set([47,58,59,61,64,91,92,93,94,124]);function sK(t){return v1e(t)||vut.has(t)}function y0(t,e){let r=String.fromCodePoint(t);return e(t)?Eut(r):r}function Sut(t){let e=10;return t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t===""?0:(e===10?/[^0-9]/:e===16?/[^0-9A-Fa-f]/:/[^0-7]/).test(t)?rr:parseInt(t,e)}function wut(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return t;let r=[];for(let s of e){if(s==="")return t;let o=Sut(s);if(o===rr)return t;r.push(o)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return rr;if(r[r.length-1]>=Math.pow(256,5-r.length))return rr;let n=r.pop(),i=0;for(let s of r)n+=s*Math.pow(256,3-i),++i;return n}function Aut(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e="."+e),r=Math.floor(r/256);return e}function Cut(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0;if(t=t6.ucs2.decode(t),t[i]===58){if(t[i+1]!==58)return rr;i+=2,++r,n=r}for(;i<t.length;){if(r===8)return rr;if(t[i]===58){if(n!==null)return rr;++i,++r,n=r;continue}let s=0,o=0;for(;o<4&&ul(t[i]);)s=s*16+parseInt(y1e(t,i),16),++i,++o;if(t[i]===46){if(o===0||(i-=o,r>6))return rr;let a=0;for(;t[i]!==void 0;){let u=null;if(a>0)if(t[i]===46&&a<4)++i;else return rr;if(!g3(t[i]))return rr;for(;g3(t[i]);){let c=parseInt(y1e(t,i));if(u===null)u=c;else{if(u===0)return rr;u=u*10+c}if(u>255)return rr;++i}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return rr;break}else if(t[i]===58){if(++i,t[i]===void 0)return rr}else if(t[i]!==void 0)return rr;e[r]=s,++r}if(n!==null){let s=r-n;for(r=7;r!==0&&s>0;){let o=e[n+s-1];e[n+s-1]=e[r],e[r]=o,--r,--s}}else if(n===null&&r!==8)return rr;return e}function Tut(t){let e="",n=xut(t).idx,i=!1;for(let s=0;s<=7;++s)if(!(i&&t[s]===0)){if(i&&(i=!1),n===s){e+=s===0?"::":":",i=!0;continue}e+=t[s].toString(16),s!==7&&(e+=":")}return e}function iK(t,e){if(t[0]==="[")return t[t.length-1]!=="]"?rr:Cut(t.substring(1,t.length-1));if(!e)return Out(t);let r=but(t),n=h1e.toASCII(r,!1,h1e.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(n===null||mut(n))return rr;let i=wut(n);return typeof i=="number"||i===rr?i:n}function Out(t){if(yut(t))return rr;let e="",r=t6.ucs2.decode(t);for(let n=0;n<r.length;++n)e+=y0(r[n],dC);return e}function xut(t){let e=null,r=1,n=null,i=0;for(let s=0;s<t.length;++s)t[s]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=s),++i);return i>r&&(e=n,r=i),{idx:e,len:r}}function oK(t){return typeof t=="number"?Aut(t):t instanceof Array?"["+Tut(t)+"]":t}function Iut(t){return t.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}function Rut(t){return t.replace(/\u0009|\u000A|\u000D/g,"")}function S1e(t){let e=t.path;e.length!==0&&(t.scheme==="file"&&e.length===1&&kut(e[0])||e.pop())}function w1e(t){return t.username!==""||t.password!==""}function Dut(t){return t.host===null||t.host===""||t.cannotBeABaseURL||t.scheme==="file"}function kut(t){return/^[A-Za-z]:$/.test(t)}function ei(t,e,r,n,i){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let o=Iut(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let s=Rut(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=t6.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this["parse "+this.state](o,a);if(u){if(u===rr){this.failure=!0;break}}else break}}ei.prototype["parse scheme start"]=function(e,r){if(E3(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,rr;return!0};ei.prototype["parse scheme"]=function(e,r){if(dut(e)||e===43||e===45||e===46)this.buffer+=r.toLowerCase();else if(e===58){if(this.stateOverride&&(Ui(this.url)&&!nK(this.buffer)||!Ui(this.url)&&nK(this.buffer)||(w1e(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&(this.url.host===""||this.url.host===null))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;this.url.scheme==="file"?((this.input[this.pointer+1]!==47||this.input[this.pointer+2]!==47)&&(this.parseError=!0),this.state="file"):Ui(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Ui(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===47?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,rr;return!0};ei.prototype["parse no scheme"]=function(e){return this.base===null||this.base.cannotBeABaseURL&&e!==35?rr:(this.base.cannotBeABaseURL&&e===35?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};ei.prototype["parse special relative or authority"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};ei.prototype["parse path or authority"]=function(e){return e===47?this.state="authority":(this.state="path",--this.pointer),!0};ei.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,isNaN(e)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===47?this.state="relative slash":e===63?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):Ui(this.url)&&e===92?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0};ei.prototype["parse relative slash"]=function(e){return Ui(this.url)&&(e===47||e===92)?(e===92&&(this.parseError=!0),this.state="special authority ignore slashes"):e===47?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};ei.prototype["parse special authority slashes"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};ei.prototype["parse special authority ignore slashes"]=function(e){return e!==47&&e!==92?(this.state="authority",--this.pointer):this.parseError=!0,!0};ei.prototype["parse authority"]=function(e,r){if(e===64){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let n=m1e(this.buffer);for(let i=0;i<n;++i){let s=this.buffer.codePointAt(i);if(s===58&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=y0(s,sK);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===47||e===63||e===35||Ui(this.url)&&e===92){if(this.atFlag&&this.buffer==="")return this.parseError=!0,rr;this.pointer-=m1e(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};ei.prototype["parse hostname"]=ei.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===58&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,rr;let n=iK(this.buffer,Ui(this.url));if(n===rr)return rr;if(this.url.host=n,this.buffer="",this.state="port",this.stateOverride==="hostname")return!1}else if(isNaN(e)||e===47||e===63||e===35||Ui(this.url)&&e===92){if(--this.pointer,Ui(this.url)&&this.buffer==="")return this.parseError=!0,rr;if(this.stateOverride&&this.buffer===""&&(w1e(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=iK(this.buffer,Ui(this.url));if(n===rr)return rr;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===91?this.arrFlag=!0:e===93&&(this.arrFlag=!1),this.buffer+=r;return!0};ei.prototype["parse port"]=function(e,r){if(g3(e))this.buffer+=r;else if(isNaN(e)||e===47||e===63||e===35||Ui(this.url)&&e===92||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>Math.pow(2,16)-1)return this.parseError=!0,rr;this.url.port=n===gut(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,rr;return!0};var Mut=new Set([47,92,63,35]);ei.prototype["parse file"]=function(e){return this.url.scheme="file",e===47||e===92?(e===92&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?isNaN(e)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===63?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1===0||!fut(e,this.input[this.pointer+1])||this.input.length-this.pointer-1>=2&&!Mut.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),S1e(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0};ei.prototype["parse file slash"]=function(e){return e===47||e===92?(e===92&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(hut(this.base.path[0])?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0};ei.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===47||e===92||e===63||e===35)if(--this.pointer,!this.stateOverride&&b1e(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=iK(this.buffer,Ui(this.url));if(n===rr)return rr;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};ei.prototype["parse path start"]=function(e){return Ui(this.url)?(e===92&&(this.parseError=!0),this.state="path",e!==47&&e!==92&&--this.pointer):!this.stateOverride&&e===63?(this.url.query="",this.state="query"):!this.stateOverride&&e===35?(this.url.fragment="",this.state="fragment"):e!==void 0&&(this.state="path",e!==47&&--this.pointer),!0};ei.prototype["parse path"]=function(e){if(isNaN(e)||e===47||Ui(this.url)&&e===92||!this.stateOverride&&(e===63||e===35)){if(Ui(this.url)&&e===92&&(this.parseError=!0),put(this.buffer)?(S1e(this.url),e!==47&&!(Ui(this.url)&&e===92)&&this.url.path.push("")):g1e(this.buffer)&&e!==47&&!(Ui(this.url)&&e===92)?this.url.path.push(""):g1e(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&b1e(this.buffer)&&(this.url.host!==""&&this.url.host!==null&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="",this.url.scheme==="file"&&(e===void 0||e===63||e===35))for(;this.url.path.length>1&&this.url.path[0]==="";)this.parseError=!0,this.url.path.shift();e===63&&(this.url.query="",this.state="query"),e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!ul(this.input[this.pointer+1])||!ul(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=y0(e,v1e);return!0};ei.prototype["parse cannot-be-a-base-URL path"]=function(e){return e===63?(this.url.query="",this.state="query"):e===35?(this.url.fragment="",this.state="fragment"):(!isNaN(e)&&e!==37&&(this.parseError=!0),e===37&&(!ul(this.input[this.pointer+1])||!ul(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path[0]=this.url.path[0]+y0(e,dC))),!0};ei.prototype["parse query"]=function(e,r){if(isNaN(e)||!this.stateOverride&&e===35){(!Ui(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8");let n=new Buffer(this.buffer);for(let i=0;i<n.length;++i)n[i]<33||n[i]>126||n[i]===34||n[i]===35||n[i]===60||n[i]===62?this.url.query+=_1e(n[i]):this.url.query+=String.fromCodePoint(n[i]);this.buffer="",e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!ul(this.input[this.pointer+1])||!ul(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r;return!0};ei.prototype["parse fragment"]=function(e){return isNaN(e)||(e===0?this.parseError=!0:(e===37&&(!ul(this.input[this.pointer+1])||!ul(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=y0(e,dC))),!0};function Put(t,e){let r=t.scheme+":";if(t.host!==null?(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=":"+t.password),r+="@"),r+=oK(t.host),t.port!==null&&(r+=":"+t.port)):t.host===null&&t.scheme==="file"&&(r+="//"),t.cannotBeABaseURL)r+=t.path[0];else for(let n of t.path)r+="/"+n;return t.query!==null&&(r+="?"+t.query),!e&&t.fragment!==null&&(r+="#"+t.fragment),r}function Nut(t){let e=t.scheme+"://";return e+=oK(t.host),t.port!==null&&(e+=":"+t.port),e}Xa.exports.serializeURL=Put;Xa.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":try{return Xa.exports.serializeURLOrigin(Xa.exports.parseURL(t.path[0]))}catch{return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return Nut({scheme:t.scheme,host:t.host,port:t.port});case"file":return"file://";default:return"null"}};Xa.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new ei(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?"failure":r.url};Xa.exports.setTheUsername=function(t,e){t.username="";let r=t6.ucs2.decode(e);for(let n=0;n<r.length;++n)t.username+=y0(r[n],sK)};Xa.exports.setThePassword=function(t,e){t.password="";let r=t6.ucs2.decode(e);for(let n=0;n<r.length;++n)t.password+=y0(r[n],sK)};Xa.exports.serializeHost=oK;Xa.exports.cannotHaveAUsernamePasswordPort=Dut;Xa.exports.serializeInteger=function(t){return String(t)};Xa.exports.parseURL=function(t,e){return e===void 0&&(e={}),Xa.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var C1e=m(A1e=>{"use strict";var ti=hd();A1e.implementation=class{constructor(e){let r=e[0],n=e[1],i=null;if(n!==void 0&&(i=ti.basicURLParse(n),i==="failure"))throw new TypeError("Invalid base URL");let s=ti.basicURLParse(r,{baseURL:i});if(s==="failure")throw new TypeError("Invalid URL");this._url=s}get href(){return ti.serializeURL(this._url)}set href(e){let r=ti.basicURLParse(e);if(r==="failure")throw new TypeError("Invalid URL");this._url=r}get origin(){return ti.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(e){ti.basicURLParse(e+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){ti.cannotHaveAUsernamePasswordPort(this._url)||ti.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){ti.cannotHaveAUsernamePasswordPort(this._url)||ti.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?ti.serializeHost(e.host):ti.serializeHost(e.host)+":"+ti.serializeInteger(e.port)}set host(e){this._url.cannotBeABaseURL||ti.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":ti.serializeHost(this._url.host)}set hostname(e){this._url.cannotBeABaseURL||ti.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":ti.serializeInteger(this._url.port)}set port(e){ti.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:ti.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:this._url.path.length===0?"":"/"+this._url.path.join("/")}set pathname(e){this._url.cannotBeABaseURL||(this._url.path=[],ti.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":"?"+this._url.query}set search(e){let r=this._url;if(e===""){r.query=null;return}let n=e[0]==="?"?e.substring(1):e;r.query="",ti.basicURLParse(n,{url:r,stateOverride:"query"})}get hash(){return this._url.fragment===null||this._url.fragment===""?"":"#"+this._url.fragment}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",ti.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var x1e=m((m0r,b3)=>{"use strict";var Gu=s1e(),O1e=o1e(),T1e=C1e(),Xr=O1e.implSymbol;function ds(t){if(!this||this[Xr]||!(this instanceof ds))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let e=[];for(let r=0;r<arguments.length&&r<2;++r)e[r]=arguments[r];e[0]=Gu.USVString(e[0]),e[1]!==void 0&&(e[1]=Gu.USVString(e[1])),b3.exports.setup(this,e)}ds.prototype.toJSON=function(){if(!this||!b3.exports.is(this))throw new TypeError("Illegal invocation");let e=[];for(let r=0;r<arguments.length&&r<0;++r)e[r]=arguments[r];return this[Xr].toJSON.apply(this[Xr],e)};Object.defineProperty(ds.prototype,"href",{get(){return this[Xr].href},set(t){t=Gu.USVString(t),this[Xr].href=t},enumerable:!0,configurable:!0});ds.prototype.toString=function(){if(!this||!b3.exports.is(this))throw new TypeError("Illegal invocation");return this.href};Object.defineProperty(ds.prototype,"origin",{get(){return this[Xr].origin},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"protocol",{get(){return this[Xr].protocol},set(t){t=Gu.USVString(t),this[Xr].protocol=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"username",{get(){return this[Xr].username},set(t){t=Gu.USVString(t),this[Xr].username=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"password",{get(){return this[Xr].password},set(t){t=Gu.USVString(t),this[Xr].password=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"host",{get(){return this[Xr].host},set(t){t=Gu.USVString(t),this[Xr].host=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"hostname",{get(){return this[Xr].hostname},set(t){t=Gu.USVString(t),this[Xr].hostname=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"port",{get(){return this[Xr].port},set(t){t=Gu.USVString(t),this[Xr].port=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"pathname",{get(){return this[Xr].pathname},set(t){t=Gu.USVString(t),this[Xr].pathname=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"search",{get(){return this[Xr].search},set(t){t=Gu.USVString(t),this[Xr].search=t},enumerable:!0,configurable:!0});Object.defineProperty(ds.prototype,"hash",{get(){return this[Xr].hash},set(t){t=Gu.USVString(t),this[Xr].hash=t},enumerable:!0,configurable:!0});b3.exports={is(t){return!!t&&t[Xr]instanceof T1e.implementation},create(t,e){let r=Object.create(ds.prototype);return this.setup(r,t,e),r},setup(t,e,r){r||(r={}),r.wrapper=t,t[Xr]=new T1e.implementation(e,r),t[Xr][O1e.wrapperSymbol]=t},interface:ds,expose:{Window:{URL:ds},Worker:{URL:ds}}}});var I1e=m(md=>{"use strict";md.URL=x1e().interface;md.serializeURL=hd().serializeURL;md.serializeURLOrigin=hd().serializeURLOrigin;md.basicURLParse=hd().basicURLParse;md.setTheUsername=hd().setTheUsername;md.setThePassword=hd().setThePassword;md.serializeHost=hd().serializeHost;md.serializeInteger=hd().serializeInteger;md.parseURL=hd().parseURL});var $1e=m((ll,j1e)=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});function s6(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var cl=s6(require("stream")),M1e=s6(require("http")),fC=s6(require("url")),P1e=s6(I1e()),Fut=s6(require("https")),g0=s6(require("zlib")),But=cl.Readable,Rp=Symbol("buffer"),aK=Symbol("type"),v3=class t{constructor(){this[aK]="";let e=arguments[0],r=arguments[1],n=[],i=0;if(e){let o=e,a=Number(o.length);for(let u=0;u<a;u++){let c=o[u],l;c instanceof Buffer?l=c:ArrayBuffer.isView(c)?l=Buffer.from(c.buffer,c.byteOffset,c.byteLength):c instanceof ArrayBuffer?l=Buffer.from(c):c instanceof t?l=c[Rp]:l=Buffer.from(typeof c=="string"?c:String(c)),i+=l.length,n.push(l)}}this[Rp]=Buffer.concat(n);let s=r&&r.type!==void 0&&String(r.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[aK]=s)}get size(){return this[Rp].length}get type(){return this[aK]}text(){return Promise.resolve(this[Rp].toString())}arrayBuffer(){let e=this[Rp],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){let e=new But;return e._read=function(){},e.push(this[Rp]),e.push(null),e}toString(){return"[object Blob]"}slice(){let e=this.size,r=arguments[0],n=arguments[1],i,s;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?s=e:n<0?s=Math.max(e+n,0):s=Math.min(n,e);let o=Math.max(s-i,0),u=this[Rp].slice(i,i+o),c=new t([],{type:arguments[2]});return c[Rp]=u,c}};Object.defineProperties(v3.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(v3.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function Rs(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Rs.prototype=Object.create(Error.prototype);Rs.prototype.constructor=Rs;Rs.prototype.name="FetchError";var dK;try{dK=require("encoding").convert}catch{}var kp=Symbol("Body internals"),R1e=cl.PassThrough;function ps(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var s=r.timeout;let o=s===void 0?0:s;t==null?t=null:N1e(t)?t=Buffer.from(t.toString()):w3(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof cl||(t=Buffer.from(String(t)))),this[kp]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=o,t instanceof cl&&t.on("error",function(a){let u=a.name==="AbortError"?a:new Rs(`Invalid response body while trying to fetch ${e.url}: ${a.message}`,"system",a);e[kp].error=u})}ps.prototype={get body(){return this[kp].body},get bodyUsed(){return this[kp].disturbed},arrayBuffer(){return r6.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return r6.call(this).then(function(e){return Object.assign(new v3([],{type:t.toLowerCase()}),{[Rp]:e})})},json(){var t=this;return r6.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return ps.Promise.reject(new Rs(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return r6.call(this).then(function(t){return t.toString()})},buffer(){return r6.call(this)},textConverted(){var t=this;return r6.call(this).then(function(e){return qut(e,t.headers)})}};Object.defineProperties(ps.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});ps.mixIn=function(t){for(let e of Object.getOwnPropertyNames(ps.prototype))if(!(e in t)){let r=Object.getOwnPropertyDescriptor(ps.prototype,e);Object.defineProperty(t,e,r)}};function r6(){var t=this;if(this[kp].disturbed)return ps.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[kp].disturbed=!0,this[kp].error)return ps.Promise.reject(this[kp].error);let e=this.body;if(e===null)return ps.Promise.resolve(Buffer.alloc(0));if(w3(e)&&(e=e.stream()),Buffer.isBuffer(e))return ps.Promise.resolve(e);if(!(e instanceof cl))return ps.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new ps.Promise(function(s,o){let a;t.timeout&&(a=setTimeout(function(){i=!0,o(new Rs(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(u){u.name==="AbortError"?(i=!0,o(u)):o(new Rs(`Invalid response body while trying to fetch ${t.url}: ${u.message}`,"system",u))}),e.on("data",function(u){if(!(i||u===null)){if(t.size&&n+u.length>t.size){i=!0,o(new Rs(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=u.length,r.push(u)}}),e.on("end",function(){if(!i){clearTimeout(a);try{s(Buffer.concat(r,n))}catch(u){o(new Rs(`Could not create Buffer from response body for ${t.url}: ${u.message}`,"system",u))}}})})}function qut(t,e){if(typeof dK!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");let r=e.get("content-type"),n="utf-8",i,s;return r&&(i=/charset=([^;]*)/i.exec(r)),s=t.slice(0,1024).toString(),!i&&s&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(s)),!i&&s&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(s),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&s&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),dK(t,"UTF-8",n).toString()}function N1e(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function w3(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function F1e(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof cl&&typeof n.getBoundary!="function"&&(e=new R1e,r=new R1e,n.pipe(e),n.pipe(r),t[kp].body=e,n=r),n}function B1e(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":N1e(t)?"application/x-www-form-urlencoded;charset=UTF-8":w3(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof cl?null:"text/plain;charset=UTF-8"}function q1e(t){let e=t.body;return e===null?0:w3(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function Lut(t,e){let r=e.body;r===null?t.end():w3(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}ps.Promise=global.Promise;var L1e=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,pK=/[^\t\x20-\x7e\x80-\xff]/;function _3(t){if(t=`${t}`,L1e.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function D1e(t){if(t=`${t}`,pK.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function n6(t,e){e=e.toLowerCase();for(let r in t)if(r.toLowerCase()===e)return r}var Ei=Symbol("map"),zu=class t{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Ei]=Object.create(null),e instanceof t){let r=e.raw(),n=Object.keys(r);for(let i of n)for(let s of r[i])this.append(i,s);return}if(e!=null)if(typeof e=="object"){let r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");let n=[];for(let i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(let i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(let n of Object.keys(e)){let i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,_3(e);let r=n6(this[Ei],e);return r===void 0?null:this[Ei][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=fK(this),i=0;for(;i<n.length;){var s=n[i];let o=s[0],a=s[1];e.call(r,a,o,this),n=fK(this),i++}}set(e,r){e=`${e}`,r=`${r}`,_3(e),D1e(r);let n=n6(this[Ei],e);this[Ei][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,_3(e),D1e(r);let n=n6(this[Ei],e);n!==void 0?this[Ei][n].push(r):this[Ei][e]=[r]}has(e){return e=`${e}`,_3(e),n6(this[Ei],e)!==void 0}delete(e){e=`${e}`,_3(e);let r=n6(this[Ei],e);r!==void 0&&delete this[Ei][r]}raw(){return this[Ei]}keys(){return uK(this,"key")}values(){return uK(this,"value")}[Symbol.iterator](){return uK(this,"key+value")}};zu.prototype.entries=zu.prototype[Symbol.iterator];Object.defineProperty(zu.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(zu.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function fK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[Ei]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[Ei][n].join(", ")}:function(n){return[n.toLowerCase(),t[Ei][n].join(", ")]})}var hK=Symbol("internal");function uK(t,e){let r=Object.create(mK);return r[hK]={target:t,kind:e,index:0},r}var mK=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==mK)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[hK];let e=t.target,r=t.kind,n=t.index,i=fK(e,r),s=i.length;return n>=s?{value:void 0,done:!0}:(this[hK].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(mK,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function jut(t){let e=Object.assign({__proto__:null},t[Ei]),r=n6(t[Ei],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function $ut(t){let e=new zu;for(let r of Object.keys(t))if(!L1e.test(r))if(Array.isArray(t[r]))for(let n of t[r])pK.test(n)||(e[Ei][r]===void 0?e[Ei][r]=[n]:e[Ei][r].push(n));else pK.test(t[r])||(e[Ei][r]=[t[r]]);return e}var R1=Symbol("Response internals"),Kut=M1e.STATUS_CODES,Hu=class t{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ps.call(this,e,r);let n=r.status||200,i=new zu(r.headers);if(e!=null&&!i.has("Content-Type")){let s=B1e(e);s&&i.append("Content-Type",s)}this[R1]={url:r.url,status:n,statusText:r.statusText||Kut[n],headers:i,counter:r.counter}}get url(){return this[R1].url||""}get status(){return this[R1].status}get ok(){return this[R1].status>=200&&this[R1].status<300}get redirected(){return this[R1].counter>0}get statusText(){return this[R1].statusText}get headers(){return this[R1].headers}clone(){return new t(F1e(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}};ps.mixIn(Hu.prototype);Object.defineProperties(Hu.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(Hu.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var Dp=Symbol("Request internals"),Uut=fC.URL||P1e.URL,Vut=fC.parse,Gut=fC.format;function cK(t){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(t)&&(t=new Uut(t).toString()),Vut(t)}var Hut="destroy"in cl.Readable.prototype;function pC(t){return typeof t=="object"&&typeof t[Dp]=="object"}function zut(t){let e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}var k1=class t{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;pC(e)?n=cK(e.url):(e&&e.href?n=cK(e.href):n=cK(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||pC(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body!=null?r.body:pC(e)&&e.body!==null?F1e(e):null;ps.call(this,s,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});let o=new zu(r.headers||e.headers||{});if(s!=null&&!o.has("Content-Type")){let u=B1e(s);u&&o.append("Content-Type",u)}let a=pC(e)?e.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!zut(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Dp]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:a},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[Dp].method}get url(){return Gut(this[Dp].parsedURL)}get headers(){return this[Dp].headers}get redirect(){return this[Dp].redirect}get signal(){return this[Dp].signal}clone(){return new t(this)}};ps.mixIn(k1.prototype);Object.defineProperty(k1.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(k1.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Wut(t){let e=t[Dp].parsedURL,r=new zu(t[Dp].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof cl.Readable&&!Hut)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){let s=q1e(t);typeof s=="number"&&(n=String(s))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),Object.assign({},e,{method:t.method,headers:jut(r),agent:i})}function i6(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}i6.prototype=Object.create(Error.prototype);i6.prototype.constructor=i6;i6.prototype.name="AbortError";var S3=fC.URL||P1e.URL,k1e=cl.PassThrough,Jut=function(e,r){let n=new S3(r).hostname,i=new S3(e).hostname;return n===i||n[n.length-i.length-1]==="."&&n.endsWith(i)},Yut=function(e,r){let n=new S3(r).protocol,i=new S3(e).protocol;return n===i};function D1(t,e){if(!D1.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return ps.Promise=D1.Promise,new D1.Promise(function(r,n){let i=new k1(t,e),s=Wut(i),o=(s.protocol==="https:"?Fut:M1e).request,a=i.signal,u=null,c=function(){let g=new i6("The user aborted a request.");n(g),i.body&&i.body instanceof cl.Readable&&lK(i.body,g),!(!u||!u.body)&&u.body.emit("error",g)};if(a&&a.aborted){c();return}let l=function(){c(),f()},d=o(s),p;a&&a.addEventListener("abort",l);function f(){d.abort(),a&&a.removeEventListener("abort",l),clearTimeout(p)}i.timeout&&d.once("socket",function(h){p=setTimeout(function(){n(new Rs(`network timeout at: ${i.url}`,"request-timeout")),f()},i.timeout)}),d.on("error",function(h){n(new Rs(`request to ${i.url} failed, reason: ${h.message}`,"system",h)),u&&u.body&&lK(u.body,h),f()}),Qut(d,function(h){a&&a.aborted||u&&u.body&&lK(u.body,h)}),parseInt(process.version.substring(1))<14&&d.on("socket",function(h){h.addListener("close",function(g){let _=h.listenerCount("data")>0;if(u&&_&&!g&&!(a&&a.aborted)){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",S)}})}),d.on("response",function(h){clearTimeout(p);let g=$ut(h.headers);if(D1.isRedirect(h.statusCode)){let A=g.get("Location"),O=null;try{O=A===null?null:new S3(A,i.url).toString()}catch{if(i.redirect!=="manual"){n(new Rs(`uri requested responds with an invalid redirect URL: ${A}`,"invalid-redirect")),f();return}}switch(i.redirect){case"error":n(new Rs(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),f();return;case"manual":if(O!==null)try{g.set("Location",O)}catch(R){n(R)}break;case"follow":if(O===null)break;if(i.counter>=i.follow){n(new Rs(`maximum redirect reached at: ${i.url}`,"max-redirect")),f();return}let x={headers:new zu(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(!Jut(i.url,O)||!Yut(i.url,O))for(let R of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(R);if(h.statusCode!==303&&i.body&&q1e(i)===null){n(new Rs("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&i.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length")),r(D1(new k1(O,x))),f();return}}h.once("end",function(){a&&a.removeEventListener("abort",l)});let _=h.pipe(new k1e),S={url:i.url,status:h.statusCode,statusText:h.statusMessage,headers:g,size:i.size,timeout:i.timeout,counter:i.counter},w=g.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||w===null||h.statusCode===204||h.statusCode===304){u=new Hu(_,S),r(u);return}let C={flush:g0.Z_SYNC_FLUSH,finishFlush:g0.Z_SYNC_FLUSH};if(w=="gzip"||w=="x-gzip"){_=_.pipe(g0.createGunzip(C)),u=new Hu(_,S),r(u);return}if(w=="deflate"||w=="x-deflate"){let A=h.pipe(new k1e);A.once("data",function(O){(O[0]&15)===8?_=_.pipe(g0.createInflate()):_=_.pipe(g0.createInflateRaw()),u=new Hu(_,S),r(u)}),A.on("end",function(){u||(u=new Hu(_,S),r(u))});return}if(w=="br"&&typeof g0.createBrotliDecompress=="function"){_=_.pipe(g0.createBrotliDecompress()),u=new Hu(_,S),r(u);return}u=new Hu(_,S),r(u)}),Lut(d,i)})}function Qut(t,e){let r;t.on("socket",function(n){r=n}),t.on("response",function(n){let i=n.headers;i["transfer-encoding"]==="chunked"&&!i["content-length"]&&n.once("close",function(s){if(r&&r.listenerCount("data")>0&&!s){let a=new Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",e(a)}})})}function lK(t,e){t.destroy?t.destroy(e):(t.emit("error",e),t.end())}D1.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308};D1.Promise=global.Promise;j1e.exports=ll=D1;Object.defineProperty(ll,"__esModule",{value:!0});ll.default=ll;ll.Headers=zu;ll.Request=k1;ll.Response=Hu;ll.FetchError=Rs;ll.AbortError=i6});var hC=m((g0r,K1e)=>{"use strict";var yd=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";yd.writable=t=>yd(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";yd.readable=t=>yd(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";yd.duplex=t=>yd.writable(t)&&yd.readable(t);yd.transform=t=>yd.duplex(t)&&typeof t._transform=="function";K1e.exports=yd});var gK=m(mC=>{"use strict";Object.defineProperty(mC,"__esModule",{value:!0});mC.GaxiosError=void 0;var yK=class extends Error{constructor(e,r,n){super(e),this.response=n,this.config=r,this.response.data=Xut(r.responseType,n.data),this.code=n.status.toString()}};mC.GaxiosError=yK;function Xut(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}});var V1e=m(yC=>{"use strict";Object.defineProperty(yC,"__esModule",{value:!0});yC.getRetryConfig=void 0;async function Zut(t){var e;let r=U1e(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!await(r.shouldRetry||ect)(t))return{shouldRetry:!1,config:t.config};let o=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let a=r.retryBackoff?r.retryBackoff(t,o):new Promise(u=>{setTimeout(u,o)});return r.onRetryAttempt&&r.onRetryAttempt(t),await a,{shouldRetry:!0,config:t.config}}yC.getRetryConfig=Zut;function ect(t){let e=U1e(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let s=t.response.status;if(s>=n&&s<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function U1e(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var EK=m((_0r,G1e)=>{var o6=1e3,a6=o6*60,u6=a6*60,E0=u6*24,tct=E0*7,rct=E0*365.25;G1e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return nct(t);if(r==="number"&&isFinite(t))return e.long?sct(t):ict(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function nct(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*rct;case"weeks":case"week":case"w":return r*tct;case"days":case"day":case"d":return r*E0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*u6;case"minutes":case"minute":case"mins":case"min":case"m":return r*a6;case"seconds":case"second":case"secs":case"sec":case"s":return r*o6;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ict(t){var e=Math.abs(t);return e>=E0?Math.round(t/E0)+"d":e>=u6?Math.round(t/u6)+"h":e>=a6?Math.round(t/a6)+"m":e>=o6?Math.round(t/o6)+"s":t+"ms"}function sct(t){var e=Math.abs(t);return e>=E0?gC(t,e,E0,"day"):e>=u6?gC(t,e,u6,"hour"):e>=a6?gC(t,e,a6,"minute"):e>=o6?gC(t,e,o6,"second"):t+" ms"}function gC(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var bK=m((v0r,H1e)=>{function oct(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=EK(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}H1e.exports=oct});var z1e=m((da,EC)=>{da.formatArgs=uct;da.save=cct;da.load=lct;da.useColors=act;da.storage=dct();da.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();da.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function act(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function uct(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+EC.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}da.log=console.debug||console.log||(()=>{});function cct(t){try{t?da.storage.setItem("debug",t):da.storage.removeItem("debug")}catch{}}function lct(){let t;try{t=da.storage.getItem("debug")||da.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function dct(){try{return localStorage}catch{}}EC.exports=bK()(da);var{formatters:pct}=EC.exports;pct.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var J1e=m((S0r,W1e)=>{"use strict";W1e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var A3=m((w0r,Q1e)=>{"use strict";var fct=require("os"),Y1e=require("tty"),Wu=J1e(),{env:fs}=process,M1;Wu("no-color")||Wu("no-colors")||Wu("color=false")||Wu("color=never")?M1=0:(Wu("color")||Wu("colors")||Wu("color=true")||Wu("color=always"))&&(M1=1);"FORCE_COLOR"in fs&&(fs.FORCE_COLOR==="true"?M1=1:fs.FORCE_COLOR==="false"?M1=0:M1=fs.FORCE_COLOR.length===0?1:Math.min(parseInt(fs.FORCE_COLOR,10),3));function _K(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function vK(t,e){if(M1===0)return 0;if(Wu("color=16m")||Wu("color=full")||Wu("color=truecolor"))return 3;if(Wu("color=256"))return 2;if(t&&!e&&M1===void 0)return 0;let r=M1||0;if(fs.TERM==="dumb")return r;if(process.platform==="win32"){let n=fct.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in fs)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in fs)||fs.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in fs)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(fs.TEAMCITY_VERSION)?1:0;if(fs.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in fs){let n=parseInt((fs.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(fs.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(fs.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(fs.TERM)||"COLORTERM"in fs?1:r}function hct(t){let e=vK(t,t&&t.isTTY);return _K(e)}Q1e.exports={supportsColor:hct,stdout:_K(vK(!0,Y1e.isatty(1))),stderr:_K(vK(!0,Y1e.isatty(2)))}});var Z1e=m((hs,_C)=>{var mct=require("tty"),bC=require("util");hs.init=Sct;hs.log=bct;hs.formatArgs=gct;hs.save=_ct;hs.load=vct;hs.useColors=yct;hs.destroy=bC.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");hs.colors=[6,2,3,4,5,1];try{let t=A3();t&&(t.stderr||t).level>=2&&(hs.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}hs.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function yct(){return"colors"in hs.inspectOpts?!!hs.inspectOpts.colors:mct.isatty(process.stderr.fd)}function gct(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+_C.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Ect()+e+" "+t[0]}function Ect(){return hs.inspectOpts.hideDate?"":new Date().toISOString()+" "}function bct(...t){return process.stderr.write(bC.formatWithOptions(hs.inspectOpts,...t)+`
`)}function _ct(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function vct(){return process.env.DEBUG}function Sct(t){t.inspectOpts={};let e=Object.keys(hs.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=hs.inspectOpts[e[r]]}_C.exports=bK()(hs);var{formatters:X1e}=_C.exports;X1e.o=function(t){return this.inspectOpts.colors=this.useColors,bC.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};X1e.O=function(t){return this.inspectOpts.colors=this.useColors,bC.inspect(t,this.inspectOpts)}});var vC=m((A0r,SK)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?SK.exports=z1e():SK.exports=Z1e()});var ehe=m(wK=>{"use strict";Object.defineProperty(wK,"__esModule",{value:!0});function wct(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(s,o)=>{s?i(s):n(o)})})}}wK.default=wct});var nhe=m((CK,rhe)=>{"use strict";var the=CK&&CK.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Act=require("events"),Cct=the(vC()),Tct=the(ehe()),C3=Cct.default("agent-base");function Oct(t){return!!t&&typeof t.addRequest=="function"}function AK(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function SC(t,e){return new SC.Agent(t,e)}(function(t){class e extends Act.EventEmitter{constructor(n,i){super();let s=i;typeof n=="function"?this.callback=n:n&&(s=n),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:AK()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:AK()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let s=Object.assign({},i);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=AK()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,n._last=!0,n.shouldKeepAlive=!1;let o=!1,a=null,u=s.timeout||this.timeout,c=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{a=null,o=!0;let f=new Error(`A "socket" was not created for HTTP request before ${u}ms`);f.code="ETIMEOUT",c(f)},d=f=>{o||(a!==null&&(clearTimeout(a),a=null),c(f))},p=f=>{if(o)return;if(a!=null&&(clearTimeout(a),a=null),Oct(f)){C3("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,s);return}if(f){f.once("free",()=>{this.freeSocket(f,s)}),n.onSocket(f);return}let h=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);c(h)};if(typeof this.callback!="function"){c(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(C3("Converting legacy callback function to promise"),this.promisifiedCallback=Tct.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(a=setTimeout(l,u)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{C3("Resolving socket for %o request: %o",s.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,s)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){C3("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){C3("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(SC||(SC={}));rhe.exports=SC});var ihe=m(O3=>{"use strict";var xct=O3&&O3.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(O3,"__esModule",{value:!0});var Ict=xct(vC()),T3=Ict.default("https-proxy-agent:parse-proxy-response");function Rct(t){return new Promise((e,r)=>{let n=0,i=[];function s(){let d=t.read();d?l(d):t.once("readable",s)}function o(){t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",a),t.removeListener("readable",s)}function a(d){T3("onclose had error %o",d)}function u(){T3("onend")}function c(d){o(),T3("onerror %o",d),r(d)}function l(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){T3("have not received end of HTTP headers yet..."),s();return}let h=p.toString("ascii",0,p.indexOf(`\r
`)),g=+h.split(" ")[1];T3("got proxy server response: %o",h),e({statusCode:g,buffered:p})}t.on("error",c),t.on("close",a),t.on("end",u),s()})}O3.default=Rct});var ahe=m(b0=>{"use strict";var Dct=b0&&b0.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},c6=b0&&b0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(b0,"__esModule",{value:!0});var she=c6(require("net")),ohe=c6(require("tls")),kct=c6(require("url")),Mct=c6(require("assert")),Pct=c6(vC()),Nct=nhe(),Fct=c6(ihe()),x3=Pct.default("https-proxy-agent:agent"),TK=class extends Nct.Agent{constructor(e){let r;if(typeof e=="string"?r=kct.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");x3("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||Lct(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return Dct(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,s;i?(x3("Creating `tls.Socket`: %o",n),s=ohe.default.connect(n)):(x3("Creating `net.Socket`: %o",n),s=she.default.connect(n));let o=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:c,port:l,secureEndpoint:d}=r;qct(l,d)||(c+=`:${l}`),o.Host=c,o.Connection="close";for(let _ of Object.keys(o))u+=`${_}: ${o[_]}\r
`;let p=Fct.default(s);s.write(`${u}\r
`);let{statusCode:f,buffered:h}=yield p;if(f===200){if(e.once("socket",Bct),r.secureEndpoint){x3("Upgrading socket connection to TLS");let _=r.servername||r.host;return ohe.default.connect(Object.assign(Object.assign({},jct(r,"host","hostname","path","port")),{socket:s,servername:_}))}return s}s.destroy();let g=new she.default.Socket({writable:!1});return g.readable=!0,e.once("socket",_=>{x3("replaying proxy buffer for failed request"),Mct.default(_.listenerCount("data")>0),_.push(h),_.push(null)}),g})}};b0.default=TK;function Bct(t){t.resume()}function qct(t,e){return!!(!e&&t===80||e&&t===443)}function Lct(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function jct(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var che=m((IK,uhe)=>{"use strict";var $ct=IK&&IK.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},OK=$ct(ahe());function xK(t){return new OK.default(t)}(function(t){t.HttpsProxyAgent=OK.default,t.prototype=OK.default.prototype})(xK||(xK={}));uhe.exports=xK});var hhe=m(l6=>{"use strict";var wC=l6&&l6.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l6,"__esModule",{value:!0});l6.Gaxios=void 0;var Kct=wC(uC()),Uct=require("https"),Vct=wC($1e()),Gct=wC(require("querystring")),Hct=wC(hC()),dhe=require("url"),zct=gK(),Wct=V1e(),Jct=Qct()?window.fetch:Vct.default;function Yct(){return typeof window<"u"&&!!window}function Qct(){return Yct()&&!!window.fetch}function Xct(){return typeof Buffer<"u"}function lhe(t,e){return!!phe(t,e)}function phe(t,e){e=e.toLowerCase();for(let r of Object.keys(t?.headers||{}))if(e===r.toLowerCase())return t.headers[r]}var RK;function fhe(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(RK=che()),i}fhe();function Zct(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new dhe.URL(t);return!!n.find(s=>s.startsWith("*.")||s.startsWith(".")?(s=s.replace(/^\*\./,"."),i.hostname.endsWith(s)):s===i.origin||s===i.hostname)}function elt(t){if(!Zct(t))return fhe()}var DK=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}async request(e={}){return e=this.validateOpts(e),this._request(e)}async _defaultAdapter(e){let n=await(e.fetchImplementation||Jct)(e.url,e),i=await this.getResponseData(e,n);return this.translateResponse(e,n,i)}async _request(e={}){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let n="";await new Promise(i=>{r.data.on("data",s=>{n+=s}),r.data.on("end",i)}),r.data=n}throw new zct.GaxiosError(`Request failed with status code ${r.status}`,e,r)}return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:s}=await(0,Wct.getRetryConfig)(n);if(i&&s)return n.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,this._request(n.config);throw n}}async getResponseData(e,r){switch(e.responseType){case"stream":return r.body;case"json":{let n=await r.text();try{n=JSON.parse(n)}catch{}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}}validateOpts(e){let r=(0,Kct.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let s=r.paramsSerializer(r.params);s.startsWith("?")&&(s=s.slice(1));let o=r.url.includes("?")?"&":"?";r.url=r.url+o+s}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let s=typeof FormData>"u"?!1:r?.data instanceof FormData;Hct.default.readable(r.data)?r.body=r.data:Xct()&&Buffer.isBuffer(r.data)?(r.body=r.data,lhe(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?s||(phe(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(lhe(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=elt(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let s=new dhe.URL(i);r.agent=new RK({port:s.port,host:s.host,protocol:s.protocol,cert:r.cert,key:r.key})}else r.agent=new RK(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new Uct.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return Gct.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((s,o)=>{i[o]=s}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};l6.Gaxios=DK});var yhe=m(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.request=dl.instance=dl.Gaxios=dl.GaxiosError=void 0;var mhe=hhe();Object.defineProperty(dl,"Gaxios",{enumerable:!0,get:function(){return mhe.Gaxios}});var tlt=gK();Object.defineProperty(dl,"GaxiosError",{enumerable:!0,get:function(){return tlt.GaxiosError}});dl.instance=new mhe.Gaxios;async function rlt(t){return dl.instance.request(t)}dl.request=rlt});var kK=m((ghe,AC)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,u=14,c=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function f(O){var x,R,M,I=Ce.prototype={constructor:Ce,toString:null,valueOf:null},F=new Ce(1),B=20,U=4,k=-7,H=21,ie=-1e7,j=1e7,V=!1,Ee=1,Re=0,fe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Ve="0123456789abcdefghijklmnopqrstuvwxyz",Me=!0;function Ce(P,$){var G,ne,Y,te,de,z,X,ue,se=this;if(!(se instanceof Ce))return new Ce(P,$);if($==null){if(P&&P._isBigNumber===!0){se.s=P.s,!P.c||P.e>j?se.c=se.e=null:P.e<ie?se.c=[se.e=0]:(se.e=P.e,se.c=P.c.slice());return}if((z=typeof P=="number")&&P*0==0){if(se.s=1/P<0?(P=-P,-1):1,P===~~P){for(te=0,de=P;de>=10;de/=10,te++);te>j?se.c=se.e=null:(se.e=te,se.c=[P]);return}ue=String(P)}else{if(!r.test(ue=String(P)))return M(se,ue,z);se.s=ue.charCodeAt(0)==45?(ue=ue.slice(1),-1):1}(te=ue.indexOf("."))>-1&&(ue=ue.replace(".","")),(de=ue.search(/e/i))>0?(te<0&&(te=de),te+=+ue.slice(de+1),ue=ue.substring(0,de)):te<0&&(te=ue.length)}else{if(S($,2,Ve.length,"Base"),$==10&&Me)return se=new Ce(P),hi(se,B+se.e+1,U);if(ue=String(P),z=typeof P=="number"){if(P*0!=0)return M(se,ue,z,$);if(se.s=1/P<0?(ue=ue.slice(1),-1):1,Ce.DEBUG&&ue.replace(/^0\.0*|\./,"").length>15)throw Error(o+P)}else se.s=ue.charCodeAt(0)===45?(ue=ue.slice(1),-1):1;for(G=Ve.slice(0,$),te=de=0,X=ue.length;de<X;de++)if(G.indexOf(ne=ue.charAt(de))<0){if(ne=="."){if(de>te){te=X;continue}}else if(!Y&&(ue==ue.toUpperCase()&&(ue=ue.toLowerCase())||ue==ue.toLowerCase()&&(ue=ue.toUpperCase()))){Y=!0,de=-1,te=0;continue}return M(se,String(P),z,$)}z=!1,ue=R(ue,$,10,se.s),(te=ue.indexOf("."))>-1?ue=ue.replace(".",""):te=ue.length}for(de=0;ue.charCodeAt(de)===48;de++);for(X=ue.length;ue.charCodeAt(--X)===48;);if(ue=ue.slice(de,++X)){if(X-=de,z&&Ce.DEBUG&&X>15&&(P>c||P!==i(P)))throw Error(o+se.s*P);if((te=te-de-1)>j)se.c=se.e=null;else if(te<ie)se.c=[se.e=0];else{if(se.e=te,se.c=[],de=(te+1)%u,te<0&&(de+=u),de<X){for(de&&se.c.push(+ue.slice(0,de)),X-=u;de<X;)se.c.push(+ue.slice(de,de+=u));de=u-(ue=ue.slice(de)).length}else de-=X;for(;de--;ue+="0");se.c.push(+ue)}}else se.c=[se.e=0]}Ce.clone=f,Ce.ROUND_UP=0,Ce.ROUND_DOWN=1,Ce.ROUND_CEIL=2,Ce.ROUND_FLOOR=3,Ce.ROUND_HALF_UP=4,Ce.ROUND_HALF_DOWN=5,Ce.ROUND_HALF_EVEN=6,Ce.ROUND_HALF_CEIL=7,Ce.ROUND_HALF_FLOOR=8,Ce.EUCLID=9,Ce.config=Ce.set=function(P){var $,G;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty($="DECIMAL_PLACES")&&(G=P[$],S(G,0,p,$),B=G),P.hasOwnProperty($="ROUNDING_MODE")&&(G=P[$],S(G,0,8,$),U=G),P.hasOwnProperty($="EXPONENTIAL_AT")&&(G=P[$],G&&G.pop?(S(G[0],-p,0,$),S(G[1],0,p,$),k=G[0],H=G[1]):(S(G,-p,p,$),k=-(H=G<0?-G:G))),P.hasOwnProperty($="RANGE"))if(G=P[$],G&&G.pop)S(G[0],-p,-1,$),S(G[1],1,p,$),ie=G[0],j=G[1];else if(S(G,-p,p,$),G)ie=-(j=G<0?-G:G);else throw Error(s+$+" cannot be zero: "+G);if(P.hasOwnProperty($="CRYPTO"))if(G=P[$],G===!!G)if(G)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))V=G;else throw V=!G,Error(s+"crypto unavailable");else V=G;else throw Error(s+$+" not true or false: "+G);if(P.hasOwnProperty($="MODULO_MODE")&&(G=P[$],S(G,0,9,$),Ee=G),P.hasOwnProperty($="POW_PRECISION")&&(G=P[$],S(G,0,p,$),Re=G),P.hasOwnProperty($="FORMAT"))if(G=P[$],typeof G=="object")fe=G;else throw Error(s+$+" not an object: "+G);if(P.hasOwnProperty($="ALPHABET"))if(G=P[$],typeof G=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(G))Me=G.slice(0,10)=="0123456789",Ve=G;else throw Error(s+$+" invalid: "+G)}else throw Error(s+"Object expected: "+P);return{DECIMAL_PLACES:B,ROUNDING_MODE:U,EXPONENTIAL_AT:[k,H],RANGE:[ie,j],CRYPTO:V,MODULO_MODE:Ee,POW_PRECISION:Re,FORMAT:fe,ALPHABET:Ve}},Ce.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!Ce.DEBUG)return!0;var $,G,ne=P.c,Y=P.e,te=P.s;e:if({}.toString.call(ne)=="[object Array]"){if((te===1||te===-1)&&Y>=-p&&Y<=p&&Y===i(Y)){if(ne[0]===0){if(Y===0&&ne.length===1)return!0;break e}if($=(Y+1)%u,$<1&&($+=u),String(ne[0]).length==$){for($=0;$<ne.length;$++)if(G=ne[$],G<0||G>=a||G!==i(G))break e;if(G!==0)return!0}}}else if(ne===null&&Y===null&&(te===null||te===1||te===-1))return!0;throw Error(s+"Invalid BigNumber: "+P)},Ce.maximum=Ce.max=function(){return _t(arguments,-1)},Ce.minimum=Ce.min=function(){return _t(arguments,1)},Ce.random=(function(){var P=9007199254740992,$=Math.random()*P&2097151?function(){return i(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(G){var ne,Y,te,de,z,X=0,ue=[],se=new Ce(F);if(G==null?G=B:S(G,0,p),de=n(G/u),V)if(crypto.getRandomValues){for(ne=crypto.getRandomValues(new Uint32Array(de*=2));X<de;)z=ne[X]*131072+(ne[X+1]>>>11),z>=9e15?(Y=crypto.getRandomValues(new Uint32Array(2)),ne[X]=Y[0],ne[X+1]=Y[1]):(ue.push(z%1e14),X+=2);X=de/2}else if(crypto.randomBytes){for(ne=crypto.randomBytes(de*=7);X<de;)z=(ne[X]&31)*281474976710656+ne[X+1]*1099511627776+ne[X+2]*4294967296+ne[X+3]*16777216+(ne[X+4]<<16)+(ne[X+5]<<8)+ne[X+6],z>=9e15?crypto.randomBytes(7).copy(ne,X):(ue.push(z%1e14),X+=7);X=de/7}else throw V=!1,Error(s+"crypto unavailable");if(!V)for(;X<de;)z=$(),z<9e15&&(ue[X++]=z%1e14);for(de=ue[--X],G%=u,de&&G&&(z=l[u-G],ue[X]=i(de/z)*z);ue[X]===0;ue.pop(),X--);if(X<0)ue=[te=0];else{for(te=-1;ue[0]===0;ue.splice(0,1),te-=u);for(X=1,z=ue[0];z>=10;z/=10,X++);X<u&&(te-=u-X)}return se.e=te,se.c=ue,se}})(),Ce.sum=function(){for(var P=1,$=arguments,G=new Ce($[0]);P<$.length;)G=G.plus($[P++]);return G},R=(function(){var P="0123456789";function $(G,ne,Y,te){for(var de,z=[0],X,ue=0,se=G.length;ue<se;){for(X=z.length;X--;z[X]*=ne);for(z[0]+=te.indexOf(G.charAt(ue++)),de=0;de<z.length;de++)z[de]>Y-1&&(z[de+1]==null&&(z[de+1]=0),z[de+1]+=z[de]/Y|0,z[de]%=Y)}return z.reverse()}return function(G,ne,Y,te,de){var z,X,ue,se,Se,He,tt,zt,Nr=G.indexOf("."),Lr=B,Rt=U;for(Nr>=0&&(se=Re,Re=0,G=G.replace(".",""),zt=new Ce(ne),He=zt.pow(G.length-Nr),Re=se,zt.c=$(A(g(He.c),He.e,"0"),10,Y,P),zt.e=zt.c.length),tt=$(G,ne,Y,de?(z=Ve,P):(z=P,Ve)),ue=se=tt.length;tt[--se]==0;tt.pop());if(!tt[0])return z.charAt(0);if(Nr<0?--ue:(He.c=tt,He.e=ue,He.s=te,He=x(He,zt,Lr,Rt,Y),tt=He.c,Se=He.r,ue=He.e),X=ue+Lr+1,Nr=tt[X],se=Y/2,Se=Se||X<0||tt[X+1]!=null,Se=Rt<4?(Nr!=null||Se)&&(Rt==0||Rt==(He.s<0?3:2)):Nr>se||Nr==se&&(Rt==4||Se||Rt==6&&tt[X-1]&1||Rt==(He.s<0?8:7)),X<1||!tt[0])G=Se?A(z.charAt(1),-Lr,z.charAt(0)):z.charAt(0);else{if(tt.length=X,Se)for(--Y;++tt[--X]>Y;)tt[X]=0,X||(++ue,tt=[1].concat(tt));for(se=tt.length;!tt[--se];);for(Nr=0,G="";Nr<=se;G+=z.charAt(tt[Nr++]));G=A(G,ue,z.charAt(0))}return G}})(),x=(function(){function P(ne,Y,te){var de,z,X,ue,se=0,Se=ne.length,He=Y%d,tt=Y/d|0;for(ne=ne.slice();Se--;)X=ne[Se]%d,ue=ne[Se]/d|0,de=tt*X+ue*He,z=He*X+de%d*d+se,se=(z/te|0)+(de/d|0)+tt*ue,ne[Se]=z%te;return se&&(ne=[se].concat(ne)),ne}function $(ne,Y,te,de){var z,X;if(te!=de)X=te>de?1:-1;else for(z=X=0;z<te;z++)if(ne[z]!=Y[z]){X=ne[z]>Y[z]?1:-1;break}return X}function G(ne,Y,te,de){for(var z=0;te--;)ne[te]-=z,z=ne[te]<Y[te]?1:0,ne[te]=z*de+ne[te]-Y[te];for(;!ne[0]&&ne.length>1;ne.splice(0,1));}return function(ne,Y,te,de,z){var X,ue,se,Se,He,tt,zt,Nr,Lr,Rt,ur,kn,Wc,Fu,Z,oe,D,N=ne.s==Y.s?1:-1,K=ne.c,Q=Y.c;if(!K||!K[0]||!Q||!Q[0])return new Ce(!ne.s||!Y.s||(K?Q&&K[0]==Q[0]:!Q)?NaN:K&&K[0]==0||!Q?N*0:N/0);for(Nr=new Ce(N),Lr=Nr.c=[],ue=ne.e-Y.e,N=te+ue+1,z||(z=a,ue=h(ne.e/u)-h(Y.e/u),N=N/u|0),se=0;Q[se]==(K[se]||0);se++);if(Q[se]>(K[se]||0)&&ue--,N<0)Lr.push(1),Se=!0;else{for(Fu=K.length,oe=Q.length,se=0,N+=2,He=i(z/(Q[0]+1)),He>1&&(Q=P(Q,He,z),K=P(K,He,z),oe=Q.length,Fu=K.length),Wc=oe,Rt=K.slice(0,oe),ur=Rt.length;ur<oe;Rt[ur++]=0);D=Q.slice(),D=[0].concat(D),Z=Q[0],Q[1]>=z/2&&Z++;do{if(He=0,X=$(Q,Rt,oe,ur),X<0){if(kn=Rt[0],oe!=ur&&(kn=kn*z+(Rt[1]||0)),He=i(kn/Z),He>1)for(He>=z&&(He=z-1),tt=P(Q,He,z),zt=tt.length,ur=Rt.length;$(tt,Rt,zt,ur)==1;)He--,G(tt,oe<zt?D:Q,zt,z),zt=tt.length,X=1;else He==0&&(X=He=1),tt=Q.slice(),zt=tt.length;if(zt<ur&&(tt=[0].concat(tt)),G(Rt,tt,ur,z),ur=Rt.length,X==-1)for(;$(Q,Rt,oe,ur)<1;)He++,G(Rt,oe<ur?D:Q,ur,z),ur=Rt.length}else X===0&&(He++,Rt=[0]);Lr[se++]=He,Rt[0]?Rt[ur++]=K[Wc]||0:(Rt=[K[Wc]],ur=1)}while((Wc++<Fu||Rt[0]!=null)&&N--);Se=Rt[0]!=null,Lr[0]||Lr.splice(0,1)}if(z==a){for(se=1,N=Lr[0];N>=10;N/=10,se++);hi(Nr,te+(Nr.e=se+ue*u-1)+1,de,Se)}else Nr.e=ue,Nr.r=+Se;return Nr}})();function Rr(P,$,G,ne){var Y,te,de,z,X;if(G==null?G=U:S(G,0,8),!P.c)return P.toString();if(Y=P.c[0],de=P.e,$==null)X=g(P.c),X=ne==1||ne==2&&(de<=k||de>=H)?C(X,de):A(X,de,"0");else if(P=hi(new Ce(P),$,G),te=P.e,X=g(P.c),z=X.length,ne==1||ne==2&&($<=te||te<=k)){for(;z<$;X+="0",z++);X=C(X,te)}else if($-=de+(ne===2&&te>de),X=A(X,te,"0"),te+1>z){if(--$>0)for(X+=".";$--;X+="0");}else if($+=te-z,$>0)for(te+1==z&&(X+=".");$--;X+="0");return P.s<0&&Y?"-"+X:X}function _t(P,$){for(var G,ne,Y=1,te=new Ce(P[0]);Y<P.length;Y++)ne=new Ce(P[Y]),(!ne.s||(G=_(te,ne))===$||G===0&&te.s===$)&&(te=ne);return te}function sa(P,$,G){for(var ne=1,Y=$.length;!$[--Y];$.pop());for(Y=$[0];Y>=10;Y/=10,ne++);return(G=ne+G*u-1)>j?P.c=P.e=null:G<ie?P.c=[P.e=0]:(P.e=G,P.c=$),P}M=(function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,$=/^([^.]+)\.$/,G=/^\.([^.]+)$/,ne=/^-?(Infinity|NaN)$/,Y=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(te,de,z,X){var ue,se=z?de:de.replace(Y,"");if(ne.test(se))te.s=isNaN(se)?null:se<0?-1:1;else{if(!z&&(se=se.replace(P,function(Se,He,tt){return ue=(tt=tt.toLowerCase())=="x"?16:tt=="b"?2:8,!X||X==ue?He:Se}),X&&(ue=X,se=se.replace($,"$1").replace(G,"0.$1")),de!=se))return new Ce(se,ue);if(Ce.DEBUG)throw Error(s+"Not a"+(X?" base "+X:"")+" number: "+de);te.s=null}te.c=te.e=null}})();function hi(P,$,G,ne){var Y,te,de,z,X,ue,se,Se=P.c,He=l;if(Se){e:{for(Y=1,z=Se[0];z>=10;z/=10,Y++);if(te=$-Y,te<0)te+=u,de=$,X=Se[ue=0],se=i(X/He[Y-de-1]%10);else if(ue=n((te+1)/u),ue>=Se.length)if(ne){for(;Se.length<=ue;Se.push(0));X=se=0,Y=1,te%=u,de=te-u+1}else break e;else{for(X=z=Se[ue],Y=1;z>=10;z/=10,Y++);te%=u,de=te-u+Y,se=de<0?0:i(X/He[Y-de-1]%10)}if(ne=ne||$<0||Se[ue+1]!=null||(de<0?X:X%He[Y-de-1]),ne=G<4?(se||ne)&&(G==0||G==(P.s<0?3:2)):se>5||se==5&&(G==4||ne||G==6&&(te>0?de>0?X/He[Y-de]:0:Se[ue-1])%10&1||G==(P.s<0?8:7)),$<1||!Se[0])return Se.length=0,ne?($-=P.e+1,Se[0]=He[(u-$%u)%u],P.e=-$||0):Se[0]=P.e=0,P;if(te==0?(Se.length=ue,z=1,ue--):(Se.length=ue+1,z=He[u-te],Se[ue]=de>0?i(X/He[Y-de]%He[de])*z:0),ne)for(;;)if(ue==0){for(te=1,de=Se[0];de>=10;de/=10,te++);for(de=Se[0]+=z,z=1;de>=10;de/=10,z++);te!=z&&(P.e++,Se[0]==a&&(Se[0]=1));break}else{if(Se[ue]+=z,Se[ue]!=a)break;Se[ue--]=0,z=1}for(te=Se.length;Se[--te]===0;Se.pop());}P.e>j?P.c=P.e=null:P.e<ie&&(P.c=[P.e=0])}return P}function tr(P){var $,G=P.e;return G===null?P.toString():($=g(P.c),$=G<=k||G>=H?C($,G):A($,G,"0"),P.s<0?"-"+$:$)}return I.absoluteValue=I.abs=function(){var P=new Ce(this);return P.s<0&&(P.s=1),P},I.comparedTo=function(P,$){return _(this,new Ce(P,$))},I.decimalPlaces=I.dp=function(P,$){var G,ne,Y,te=this;if(P!=null)return S(P,0,p),$==null?$=U:S($,0,8),hi(new Ce(te),P+te.e+1,$);if(!(G=te.c))return null;if(ne=((Y=G.length-1)-h(this.e/u))*u,Y=G[Y])for(;Y%10==0;Y/=10,ne--);return ne<0&&(ne=0),ne},I.dividedBy=I.div=function(P,$){return x(this,new Ce(P,$),B,U)},I.dividedToIntegerBy=I.idiv=function(P,$){return x(this,new Ce(P,$),0,1)},I.exponentiatedBy=I.pow=function(P,$){var G,ne,Y,te,de,z,X,ue,se,Se=this;if(P=new Ce(P),P.c&&!P.isInteger())throw Error(s+"Exponent not an integer: "+tr(P));if($!=null&&($=new Ce($)),z=P.e>14,!Se.c||!Se.c[0]||Se.c[0]==1&&!Se.e&&Se.c.length==1||!P.c||!P.c[0])return se=new Ce(Math.pow(+tr(Se),z?P.s*(2-w(P)):+tr(P))),$?se.mod($):se;if(X=P.s<0,$){if($.c?!$.c[0]:!$.s)return new Ce(NaN);ne=!X&&Se.isInteger()&&$.isInteger(),ne&&(Se=Se.mod($))}else{if(P.e>9&&(Se.e>0||Se.e<-1||(Se.e==0?Se.c[0]>1||z&&Se.c[1]>=24e7:Se.c[0]<8e13||z&&Se.c[0]<=9999975e7)))return te=Se.s<0&&w(P)?-0:0,Se.e>-1&&(te=1/te),new Ce(X?1/te:te);Re&&(te=n(Re/u+2))}for(z?(G=new Ce(.5),X&&(P.s=1),ue=w(P)):(Y=Math.abs(+tr(P)),ue=Y%2),se=new Ce(F);;){if(ue){if(se=se.times(Se),!se.c)break;te?se.c.length>te&&(se.c.length=te):ne&&(se=se.mod($))}if(Y){if(Y=i(Y/2),Y===0)break;ue=Y%2}else if(P=P.times(G),hi(P,P.e+1,1),P.e>14)ue=w(P);else{if(Y=+tr(P),Y===0)break;ue=Y%2}Se=Se.times(Se),te?Se.c&&Se.c.length>te&&(Se.c.length=te):ne&&(Se=Se.mod($))}return ne?se:(X&&(se=F.div(se)),$?se.mod($):te?hi(se,Re,U,de):se)},I.integerValue=function(P){var $=new Ce(this);return P==null?P=U:S(P,0,8),hi($,$.e+1,P)},I.isEqualTo=I.eq=function(P,$){return _(this,new Ce(P,$))===0},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(P,$){return _(this,new Ce(P,$))>0},I.isGreaterThanOrEqualTo=I.gte=function(P,$){return($=_(this,new Ce(P,$)))===1||$===0},I.isInteger=function(){return!!this.c&&h(this.e/u)>this.c.length-2},I.isLessThan=I.lt=function(P,$){return _(this,new Ce(P,$))<0},I.isLessThanOrEqualTo=I.lte=function(P,$){return($=_(this,new Ce(P,$)))===-1||$===0},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&this.c[0]==0},I.minus=function(P,$){var G,ne,Y,te,de=this,z=de.s;if(P=new Ce(P,$),$=P.s,!z||!$)return new Ce(NaN);if(z!=$)return P.s=-$,de.plus(P);var X=de.e/u,ue=P.e/u,se=de.c,Se=P.c;if(!X||!ue){if(!se||!Se)return se?(P.s=-$,P):new Ce(Se?de:NaN);if(!se[0]||!Se[0])return Se[0]?(P.s=-$,P):new Ce(se[0]?de:U==3?-0:0)}if(X=h(X),ue=h(ue),se=se.slice(),z=X-ue){for((te=z<0)?(z=-z,Y=se):(ue=X,Y=Se),Y.reverse(),$=z;$--;Y.push(0));Y.reverse()}else for(ne=(te=(z=se.length)<($=Se.length))?z:$,z=$=0;$<ne;$++)if(se[$]!=Se[$]){te=se[$]<Se[$];break}if(te&&(Y=se,se=Se,Se=Y,P.s=-P.s),$=(ne=Se.length)-(G=se.length),$>0)for(;$--;se[G++]=0);for($=a-1;ne>z;){if(se[--ne]<Se[ne]){for(G=ne;G&&!se[--G];se[G]=$);--se[G],se[ne]+=a}se[ne]-=Se[ne]}for(;se[0]==0;se.splice(0,1),--ue);return se[0]?sa(P,se,ue):(P.s=U==3?-1:1,P.c=[P.e=0],P)},I.modulo=I.mod=function(P,$){var G,ne,Y=this;return P=new Ce(P,$),!Y.c||!P.s||P.c&&!P.c[0]?new Ce(NaN):!P.c||Y.c&&!Y.c[0]?new Ce(Y):(Ee==9?(ne=P.s,P.s=1,G=x(Y,P,0,3),P.s=ne,G.s*=ne):G=x(Y,P,0,Ee),P=Y.minus(G.times(P)),!P.c[0]&&Ee==1&&(P.s=Y.s),P)},I.multipliedBy=I.times=function(P,$){var G,ne,Y,te,de,z,X,ue,se,Se,He,tt,zt,Nr,Lr,Rt=this,ur=Rt.c,kn=(P=new Ce(P,$)).c;if(!ur||!kn||!ur[0]||!kn[0])return!Rt.s||!P.s||ur&&!ur[0]&&!kn||kn&&!kn[0]&&!ur?P.c=P.e=P.s=null:(P.s*=Rt.s,!ur||!kn?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(ne=h(Rt.e/u)+h(P.e/u),P.s*=Rt.s,X=ur.length,Se=kn.length,X<Se&&(zt=ur,ur=kn,kn=zt,Y=X,X=Se,Se=Y),Y=X+Se,zt=[];Y--;zt.push(0));for(Nr=a,Lr=d,Y=Se;--Y>=0;){for(G=0,He=kn[Y]%Lr,tt=kn[Y]/Lr|0,de=X,te=Y+de;te>Y;)ue=ur[--de]%Lr,se=ur[de]/Lr|0,z=tt*ue+se*He,ue=He*ue+z%Lr*Lr+zt[te]+G,G=(ue/Nr|0)+(z/Lr|0)+tt*se,zt[te--]=ue%Nr;zt[te]=G}return G?++ne:zt.splice(0,1),sa(P,zt,ne)},I.negated=function(){var P=new Ce(this);return P.s=-P.s||null,P},I.plus=function(P,$){var G,ne=this,Y=ne.s;if(P=new Ce(P,$),$=P.s,!Y||!$)return new Ce(NaN);if(Y!=$)return P.s=-$,ne.minus(P);var te=ne.e/u,de=P.e/u,z=ne.c,X=P.c;if(!te||!de){if(!z||!X)return new Ce(Y/0);if(!z[0]||!X[0])return X[0]?P:new Ce(z[0]?ne:Y*0)}if(te=h(te),de=h(de),z=z.slice(),Y=te-de){for(Y>0?(de=te,G=X):(Y=-Y,G=z),G.reverse();Y--;G.push(0));G.reverse()}for(Y=z.length,$=X.length,Y-$<0&&(G=X,X=z,z=G,$=Y),Y=0;$;)Y=(z[--$]=z[$]+X[$]+Y)/a|0,z[$]=a===z[$]?0:z[$]%a;return Y&&(z=[Y].concat(z),++de),sa(P,z,de)},I.precision=I.sd=function(P,$){var G,ne,Y,te=this;if(P!=null&&P!==!!P)return S(P,1,p),$==null?$=U:S($,0,8),hi(new Ce(te),P,$);if(!(G=te.c))return null;if(Y=G.length-1,ne=Y*u+1,Y=G[Y]){for(;Y%10==0;Y/=10,ne--);for(Y=G[0];Y>=10;Y/=10,ne++);}return P&&te.e+1>ne&&(ne=te.e+1),ne},I.shiftedBy=function(P){return S(P,-c,c),this.times("1e"+P)},I.squareRoot=I.sqrt=function(){var P,$,G,ne,Y,te=this,de=te.c,z=te.s,X=te.e,ue=B+4,se=new Ce("0.5");if(z!==1||!de||!de[0])return new Ce(!z||z<0&&(!de||de[0])?NaN:de?te:1/0);if(z=Math.sqrt(+tr(te)),z==0||z==1/0?($=g(de),($.length+X)%2==0&&($+="0"),z=Math.sqrt(+$),X=h((X+1)/2)-(X<0||X%2),z==1/0?$="5e"+X:($=z.toExponential(),$=$.slice(0,$.indexOf("e")+1)+X),G=new Ce($)):G=new Ce(z+""),G.c[0]){for(X=G.e,z=X+ue,z<3&&(z=0);;)if(Y=G,G=se.times(Y.plus(x(te,Y,ue,1))),g(Y.c).slice(0,z)===($=g(G.c)).slice(0,z))if(G.e<X&&--z,$=$.slice(z-3,z+1),$=="9999"||!ne&&$=="4999"){if(!ne&&(hi(Y,Y.e+B+2,0),Y.times(Y).eq(te))){G=Y;break}ue+=4,z+=4,ne=1}else{(!+$||!+$.slice(1)&&$.charAt(0)=="5")&&(hi(G,G.e+B+2,1),P=!G.times(G).eq(te));break}}return hi(G,G.e+B+1,U,P)},I.toExponential=function(P,$){return P!=null&&(S(P,0,p),P++),Rr(this,P,$,1)},I.toFixed=function(P,$){return P!=null&&(S(P,0,p),P=P+this.e+1),Rr(this,P,$)},I.toFormat=function(P,$,G){var ne,Y=this;if(G==null)P!=null&&$&&typeof $=="object"?(G=$,$=null):P&&typeof P=="object"?(G=P,P=$=null):G=fe;else if(typeof G!="object")throw Error(s+"Argument not an object: "+G);if(ne=Y.toFixed(P,$),Y.c){var te,de=ne.split("."),z=+G.groupSize,X=+G.secondaryGroupSize,ue=G.groupSeparator||"",se=de[0],Se=de[1],He=Y.s<0,tt=He?se.slice(1):se,zt=tt.length;if(X&&(te=z,z=X,X=te,zt-=te),z>0&&zt>0){for(te=zt%z||z,se=tt.substr(0,te);te<zt;te+=z)se+=ue+tt.substr(te,z);X>0&&(se+=ue+tt.slice(te)),He&&(se="-"+se)}ne=Se?se+(G.decimalSeparator||"")+((X=+G.fractionGroupSize)?Se.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(G.fractionGroupSeparator||"")):Se):se}return(G.prefix||"")+ne+(G.suffix||"")},I.toFraction=function(P){var $,G,ne,Y,te,de,z,X,ue,se,Se,He,tt=this,zt=tt.c;if(P!=null&&(z=new Ce(P),!z.isInteger()&&(z.c||z.s!==1)||z.lt(F)))throw Error(s+"Argument "+(z.isInteger()?"out of range: ":"not an integer: ")+tr(z));if(!zt)return new Ce(tt);for($=new Ce(F),ue=G=new Ce(F),ne=X=new Ce(F),He=g(zt),te=$.e=He.length-tt.e-1,$.c[0]=l[(de=te%u)<0?u+de:de],P=!P||z.comparedTo($)>0?te>0?$:ue:z,de=j,j=1/0,z=new Ce(He),X.c[0]=0;se=x(z,$,0,1),Y=G.plus(se.times(ne)),Y.comparedTo(P)!=1;)G=ne,ne=Y,ue=X.plus(se.times(Y=ue)),X=Y,$=z.minus(se.times(Y=$)),z=Y;return Y=x(P.minus(G),ne,0,1),X=X.plus(Y.times(ue)),G=G.plus(Y.times(ne)),X.s=ue.s=tt.s,te=te*2,Se=x(ue,ne,te,U).minus(tt).abs().comparedTo(x(X,G,te,U).minus(tt).abs())<1?[ue,ne]:[X,G],j=de,Se},I.toNumber=function(){return+tr(this)},I.toPrecision=function(P,$){return P!=null&&S(P,1,p),Rr(this,P,$,2)},I.toString=function(P){var $,G=this,ne=G.s,Y=G.e;return Y===null?ne?($="Infinity",ne<0&&($="-"+$)):$="NaN":(P==null?$=Y<=k||Y>=H?C(g(G.c),Y):A(g(G.c),Y,"0"):P===10&&Me?(G=hi(new Ce(G),B+Y+1,U),$=A(g(G.c),G.e,"0")):(S(P,2,Ve.length,"Base"),$=R(A(g(G.c),Y,"0"),10,P,ne,!0)),ne<0&&G.c[0]&&($="-"+$)),$},I.valueOf=I.toJSON=function(){return tr(this)},I._isBigNumber=!0,O!=null&&Ce.set(O),Ce}function h(O){var x=O|0;return O>0||O===x?x:x-1}function g(O){for(var x,R,M=1,I=O.length,F=O[0]+"";M<I;){for(x=O[M++]+"",R=u-x.length;R--;x="0"+x);F+=x}for(I=F.length;F.charCodeAt(--I)===48;);return F.slice(0,I+1||1)}function _(O,x){var R,M,I=O.c,F=x.c,B=O.s,U=x.s,k=O.e,H=x.e;if(!B||!U)return null;if(R=I&&!I[0],M=F&&!F[0],R||M)return R?M?0:-U:B;if(B!=U)return B;if(R=B<0,M=k==H,!I||!F)return M?0:!I^R?1:-1;if(!M)return k>H^R?1:-1;for(U=(k=I.length)<(H=F.length)?k:H,B=0;B<U;B++)if(I[B]!=F[B])return I[B]>F[B]^R?1:-1;return k==H?0:k>H^R?1:-1}function S(O,x,R,M){if(O<x||O>R||O!==i(O))throw Error(s+(M||"Argument")+(typeof O=="number"?O<x||O>R?" out of range: ":" not an integer: ":" not a primitive number: ")+String(O))}function w(O){var x=O.c.length-1;return h(O.e/u)==x&&O.c[x]%2!=0}function C(O,x){return(O.length>1?O.charAt(0)+"."+O.slice(1):O)+(x<0?"e":"e+")+x}function A(O,x,R){var M,I;if(x<0){for(I=R+".";++x;I+=R);O=I+O}else if(M=O.length,++x>M){for(I=R,x-=M;--x;I+=R);O+=I}else x<M&&(O=O.slice(0,x)+"."+O.slice(x));return O}e=f(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof AC<"u"&&AC.exports?AC.exports=e:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=e)})(ghe)});var vhe=m((R0r,_he)=>{var Ehe=kK(),bhe=_he.exports;(function(){"use strict";function t(c){return c<10?"0"+c:c}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function a(c){return r.lastIndex=0,r.test(c)?'"'+c.replace(r,function(l){var d=s[l];return typeof d=="string"?d:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function u(c,l){var d,p,f,h,g=n,_,S=l[c],w=S!=null&&(S instanceof Ehe||Ehe.isBigNumber(S));switch(S&&typeof S=="object"&&typeof S.toJSON=="function"&&(S=S.toJSON(c)),typeof o=="function"&&(S=o.call(l,c,S)),typeof S){case"string":return w?S:a(S);case"number":return isFinite(S)?String(S):"null";case"boolean":case"null":case"bigint":return String(S);case"object":if(!S)return"null";if(n+=i,_=[],Object.prototype.toString.apply(S)==="[object Array]"){for(h=S.length,d=0;d<h;d+=1)_[d]=u(d,S)||"null";return f=_.length===0?"[]":n?`[
`+n+_.join(`,
`+n)+`
`+g+"]":"["+_.join(",")+"]",n=g,f}if(o&&typeof o=="object")for(h=o.length,d=0;d<h;d+=1)typeof o[d]=="string"&&(p=o[d],f=u(p,S),f&&_.push(a(p)+(n?": ":":")+f));else Object.keys(S).forEach(function(C){var A=u(C,S);A&&_.push(a(C)+(n?": ":":")+A)});return f=_.length===0?"{}":n?`{
`+n+_.join(`,
`+n)+`
`+g+"}":"{"+_.join(",")+"}",n=g,f}}typeof bhe.stringify!="function"&&(bhe.stringify=function(c,l,d){var p;if(n="",i="",typeof d=="number")for(p=0;p<d;p+=1)i+=" ";else typeof d=="string"&&(i=d);if(o=l,l&&typeof l!="function"&&(typeof l!="object"||typeof l.length!="number"))throw new Error("JSON.stringify");return u("",{"":c})})})()});var whe=m((D0r,She)=>{var CC=null,nlt=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,ilt=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,slt=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},s,o=function(g){throw{name:"SyntaxError",message:g,at:r,text:s}},a=function(g){return g&&g!==n&&o("Expected '"+g+"' instead of '"+n+"'"),n=s.charAt(r),r+=1,n},u=function(){var g,_="";for(n==="-"&&(_="-",a("-"));n>="0"&&n<="9";)_+=n,a();if(n===".")for(_+=".";a()&&n>="0"&&n<="9";)_+=n;if(n==="e"||n==="E")for(_+=n,a(),(n==="-"||n==="+")&&(_+=n,a());n>="0"&&n<="9";)_+=n,a();if(g=+_,!isFinite(g))o("Bad number");else return CC==null&&(CC=kK()),_.length>15?e.storeAsString?_:e.useNativeBigInt?BigInt(_):new CC(_):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(g):new CC(g):g},c=function(){var g,_,S="",w;if(n==='"')for(var C=r;a();){if(n==='"')return r-1>C&&(S+=s.substring(C,r-1)),a(),S;if(n==="\\"){if(r-1>C&&(S+=s.substring(C,r-1)),a(),n==="u"){for(w=0,_=0;_<4&&(g=parseInt(a(),16),!!isFinite(g));_+=1)w=w*16+g;S+=String.fromCharCode(w)}else if(typeof i[n]=="string")S+=i[n];else break;C=r}}o("Bad string")},l=function(){for(;n&&n<=" ";)a()},d=function(){switch(n){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+n+"'")},p,f=function(){var g=[];if(n==="["){if(a("["),l(),n==="]")return a("]"),g;for(;n;){if(g.push(p()),l(),n==="]")return a("]"),g;a(","),l()}}o("Bad array")},h=function(){var g,_=Object.create(null);if(n==="{"){if(a("{"),l(),n==="}")return a("}"),_;for(;n;){if(g=c(),l(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(_,g)&&o('Duplicate key "'+g+'"'),nlt.test(g)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?p():_[g]=p():ilt.test(g)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?p():_[g]=p():_[g]=p(),l(),n==="}")return a("}"),_;a(","),l()}}o("Bad object")};return p=function(){switch(l(),n){case"{":return h();case"[":return f();case'"':return c();case"-":return u();default:return n>="0"&&n<="9"?u():d()}},function(g,_){var S;return s=g+"",r=0,n=" ",S=p(),l(),n&&o("Syntax error"),typeof _=="function"?(function w(C,A){var O,x,R=C[A];return R&&typeof R=="object"&&Object.keys(R).forEach(function(M){x=w(R,M),x!==void 0?R[M]=x:delete R[M]}),_.call(C,A,R)})({"":S},""):S}};She.exports=slt});var MK=m((k0r,TC)=>{var Ahe=vhe().stringify,Che=whe();TC.exports=function(t){return{parse:Che(t),stringify:Ahe}};TC.exports.parse=Che();TC.exports.stringify=Ahe});var PK=m(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.detectGCPResidency=ro.isGoogleComputeEngine=ro.isGoogleComputeEngineMACAddress=ro.isGoogleComputeEngineLinux=ro.isGoogleCloudServerless=ro.GCE_LINUX_BIOS_PATHS=void 0;var The=require("fs"),Ohe=require("os");ro.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var olt=/^42:01/;function xhe(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}ro.isGoogleCloudServerless=xhe;function Ihe(){if((0,Ohe.platform)()!=="linux")return!1;try{(0,The.statSync)(ro.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,The.readFileSync)(ro.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch{return!1}}ro.isGoogleComputeEngineLinux=Ihe;function Rhe(){let t=(0,Ohe.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:r}of e)if(olt.test(r))return!0}return!1}ro.isGoogleComputeEngineMACAddress=Rhe;function Dhe(){return Ihe()||Rhe()}ro.isGoogleComputeEngine=Dhe;function alt(){return xhe()||Dhe()}ro.detectGCPResidency=alt});var Phe=m(mt=>{"use strict";var ult=mt&&mt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),clt=mt&&mt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ult(e,t,r)};Object.defineProperty(mt,"__esModule",{value:!0});mt.requestTimeout=mt.setGCPResidency=mt.getGCPResidency=mt.gcpResidencyCache=mt.resetIsAvailableCache=mt.isAvailable=mt.project=mt.instance=mt.METADATA_SERVER_DETECTION=mt.HEADERS=mt.HEADER_VALUE=mt.HEADER_NAME=mt.SECONDARY_HOST_ADDRESS=mt.HOST_ADDRESS=mt.BASE_PATH=void 0;var NK=yhe(),llt=MK(),dlt=PK();mt.BASE_PATH="/computeMetadata/v1";mt.HOST_ADDRESS="http://169.254.169.254";mt.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";mt.HEADER_NAME="Metadata-Flavor";mt.HEADER_VALUE="Google";mt.HEADERS=Object.freeze({[mt.HEADER_NAME]:mt.HEADER_VALUE});mt.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function FK(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||mt.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(mt.BASE_PATH,t).href}function plt(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function BK(t,e,r=3,n=!1){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),plt(e);try{let o=await(n?flt:NK.request)({url:`${FK()}/${t}${i}`,headers:Object.assign({},mt.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:Mhe()});if(o.headers[mt.HEADER_NAME.toLowerCase()]!==mt.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${mt.HEADER_NAME} header.`);if(!o.data)throw new Error("Invalid response from the metadata service");if(typeof o.data=="string")try{return llt.parse(o.data)}catch{}return o.data}catch(s){let o=s;throw o.response&&o.response.status!==200&&(o.message=`Unsuccessful response status code. ${o.message}`),s}}async function flt(t){let e={...t,url:t.url.replace(FK(),FK(mt.SECONDARY_HOST_ADDRESS))},r=!1,n=(0,NK.request)(t).then(s=>(r=!0,s)).catch(s=>{if(r)return i;throw r=!0,s}),i=(0,NK.request)(e).then(s=>(r=!0,s)).catch(s=>{if(r)return n;throw r=!0,s});return Promise.race([n,i])}function hlt(t){return BK("instance",t)}mt.instance=hlt;function mlt(t){return BK("project",t)}mt.project=mlt;function ylt(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var OC;async function glt(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in mt.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(mt.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return qK();case"ping-only":}}try{return OC===void 0&&(OC=BK("instance",void 0,ylt(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await OC,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}}mt.isAvailable=glt;function Elt(){OC=void 0}mt.resetIsAvailableCache=Elt;mt.gcpResidencyCache=null;function qK(){return mt.gcpResidencyCache===null&&khe(),mt.gcpResidencyCache}mt.getGCPResidency=qK;function khe(t=null){mt.gcpResidencyCache=t!==null?t:(0,dlt.detectGCPResidency)()}mt.setGCPResidency=khe;function Mhe(){return qK()?0:3e3}mt.requestTimeout=Mhe;clt(PK(),mt)});var fl=m(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.aws4=void 0;pl.getKerberos=blt;pl.getZstdLibrary=_lt;pl.getAwsCredentialProvider=vlt;pl.getGcpMetadata=Slt;pl.getSnappy=wlt;pl.getSocks=Alt;pl.getMongoDBClientEncryption=Tlt;var P1=Ne();function I3(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function blt(){let t;try{t=require("kerberos")}catch(e){t=I3(new P1.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function _lt(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=I3(new P1.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function vlt(){try{return require("@aws-sdk/credential-providers")}catch(t){return I3(new P1.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function Slt(){try{return Phe()}catch(t){return I3(new P1.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function wlt(){try{return require("snappy")}catch(t){return{kModuleError:new P1.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function Alt(){try{return require("socks")}catch(t){return{kModuleError:new P1.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}pl.aws4=Clt();function Clt(){let t;try{t=require("aws4")}catch(e){t=I3(new P1.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function Tlt(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new P1.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var N1=m(d6=>{"use strict";Object.defineProperty(d6,"__esModule",{value:!0});d6.AuthProvider=d6.AuthContext=void 0;var Olt=Ne(),LK=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};d6.AuthContext=LK;var jK=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new Olt.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};d6.AuthProvider=jK});var xC=m(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.GSSAPI=hl.GSSAPICanonicalizationValue=void 0;hl.performGSSAPICanonicalizeHostName=Bhe;hl.resolveCname=VK;var KK=require("dns"),xlt=fl(),Nhe=Ne(),Ilt=et(),Rlt=N1();hl.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function $K(t,e){return await t.command((0,Ilt.ns)("$external.$cmd"),e)}var R3,UK=class extends Rlt.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new Nhe.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:i}=n,s=await Dlt(e),o=await s.step(""),a=await $K(r,klt(o)),u=await Fhe(s,10,a.payload),c=await $K(r,Mlt(u,a.conversationId)),l=await Plt(s,i,c.payload);await $K(r,{saslContinue:1,conversationId:c.conversationId,payload:l})}};hl.GSSAPI=UK;async function Dlt(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new Nhe.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(Nlt(),"kModuleError"in R3)throw R3.kModuleError;let{initializeClient:n}=R3,{username:i,password:s}=r,o=r.mechanismProperties,a=o.SERVICE_NAME??"mongodb",u=await Bhe(e.host,o),c={};s!=null&&Object.assign(c,{user:i,password:s});let l=o.SERVICE_HOST??u,d=`${a}${process.platform==="win32"?"/":"@"}${l}`;return"SERVICE_REALM"in o&&(d=`${d}@${o.SERVICE_REALM}`),await n(d,c)}function klt(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function Mlt(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function Fhe(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await Fhe(t,e-1,r)}}async function Plt(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function Bhe(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===hl.GSSAPICanonicalizationValue.none)return t;if(r===hl.GSSAPICanonicalizationValue.on||r===hl.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await KK.promises.lookup(t);try{let i=await KK.promises.resolvePtr(n);return i.length>0?i[0]:t}catch{return await VK(t)}}else return await VK(t)}async function VK(t){try{let e=await KK.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function Nlt(){R3||(R3=(0,xlt.getKerberos)())}});var Ed=m(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.AUTH_MECHS_AUTH_SRC_EXTERNAL=gd.AuthMechanism=void 0;gd.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});gd.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([gd.AuthMechanism.MONGODB_GSSAPI,gd.AuthMechanism.MONGODB_AWS,gd.AuthMechanism.MONGODB_OIDC,gd.AuthMechanism.MONGODB_X509])});var IC=m(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});_0.MongoCredentials=_0.DEFAULT_ALLOWED_HOSTS=void 0;var Ju=Ne(),Flt=xC(),ko=Ed();function Blt(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(ko.AuthMechanism.MONGODB_SCRAM_SHA256)?ko.AuthMechanism.MONGODB_SCRAM_SHA256:ko.AuthMechanism.MONGODB_SCRAM_SHA1:ko.AuthMechanism.MONGODB_SCRAM_SHA256}var qhe=["test","azure","gcp","k8s"],Lhe="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";_0.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var qlt="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",GK=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||ko.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN})),this.mechanism===ko.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:_0.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:Blt(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===ko.AuthMechanism.MONGODB_GSSAPI||this.mechanism===ko.AuthMechanism.MONGODB_PLAIN||this.mechanism===ko.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===ko.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new Ju.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===ko.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new Ju.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new Ju.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new Ju.MongoInvalidArgumentError(qlt);if(this.mechanismProperties.ENVIRONMENT&&!qhe.includes(this.mechanismProperties.ENVIRONMENT))throw new Ju.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${qhe.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new Ju.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new Ju.MongoInvalidArgumentError(Lhe);for(let n of r)if(typeof n!="string")throw new Ju.MongoInvalidArgumentError(Lhe)}}if(ko.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new Ju.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===ko.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new Ju.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===ko.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new Ju.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(Flt.GSSAPICanonicalizationValue).includes(e))throw new Ju.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??ko.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};_0.MongoCredentials=GK});var jhe=m((j0r,Llt)=>{Llt.exports={name:"mongodb",version:"6.20.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.2"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.3.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.5.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var HK=m(F1=>{"use strict";Object.defineProperty(F1,"__esModule",{value:!0});F1.LimitedSizeDocument=void 0;F1.isDriverInfoEqual=Klt;F1.makeClientMetadata=Ult;F1.addContainerMetadata=Glt;F1.getFAASEnv=Uhe;var D3=require("os"),k3=require("process"),p6=gr(),$he=Ne(),jlt=et(),$lt=jhe().version;function Klt(t,e){let r=(n,i)=>(n||=void 0,i||=void 0,n===i);return r(t.name,e.name)&&r(t.platform,e.platform)&&r(t.version,e.version)}var M3=class{constructor(e){this.document=new Map,this.documentSize=5,this.maxSize=e}ifItFitsItSits(e,r){let n=p6.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return p6.BSON.deserialize(p6.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};F1.LimitedSizeDocument=M3;function Ult(t,{appName:e=""}){let r=new M3(512);if(e.length>0){let a=Buffer.byteLength(e,"utf8")<=128?e:Buffer.from(e,"utf8").subarray(0,128).toString("utf8");r.ifItFitsItSits("application",{name:a})}let n={name:"nodejs",version:$lt};for(let{name:a="",version:u=""}of t)a.length>0&&(n.name=`${n.name}|${a}`),u.length>0&&(n.version=`${n.version}|${u}`);if(!r.ifItFitsItSits("driver",n))throw new $he.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let i=Hlt();for(let{platform:a=""}of t)a.length>0&&(i=`${i}|${a}`);if(!r.ifItFitsItSits("platform",i))throw new $he.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let s=new Map().set("name",k3.platform).set("architecture",k3.arch).set("version",D3.release()).set("type",D3.type());if(!r.ifItFitsItSits("os",s)){for(let a of s.keys())if(s.delete(a),s.size===0||r.ifItFitsItSits("os",s))break}let o=Uhe();if(o!=null&&!r.ifItFitsItSits("env",o)){for(let a of o.keys())if(o.delete(a),o.size===0||r.ifItFitsItSits("env",o))break}return r.toObject()}var Khe;async function Vlt(){let t={};Khe??=(0,jlt.fileIsAccessible)("/.dockerenv");let e=await Khe,{KUBERNETES_SERVICE_HOST:r=""}=k3.env,n=r.length>0;return e&&(t.runtime="docker"),n&&(t.orchestrator="kubernetes"),t}async function Glt(t){let e=await Vlt();if(Object.keys(e).length===0)return t;let r=new M3(512),n={...t?.env,container:e};for(let[i,s]of Object.entries(t))i!=="env"?r.ifItFitsItSits(i,s):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",s);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function Uhe(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:i="",VERCEL:s="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:o="",AWS_REGION:a="",FUNCTION_MEMORY_MB:u="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:l="",VERCEL_REGION:d=""}=k3.env,p=t.startsWith("AWS_Lambda_")||e.length>0,f=r.length>0,h=n.length>0||i.length>0,g=s.length>0,_=new Map;return g&&!(f||h)?(d.length>0&&_.set("region",d),_.set("name","vercel"),_):p&&!(f||h||g)?(a.length>0&&_.set("region",a),o.length>0&&Number.isInteger(+o)&&_.set("memory_mb",new p6.Int32(o)),_.set("name","aws.lambda"),_):f&&!(h||p||g)?(_.set("name","azure.func"),_):h&&!(f||p||g)?(c.length>0&&_.set("region",c),u.length>0&&Number.isInteger(+u)&&_.set("memory_mb",new p6.Int32(u)),l.length>0&&Number.isInteger(+l)&&_.set("timeout_sec",new p6.Int32(l)),_.set("name","gcp.func"),_):null}function Hlt(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${D3.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${D3.endianness()}`:`Node.js ${k3.version}, ${D3.endianness()}`}});var DC=m($r=>{"use strict";function Gr(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function m6(t,e){if(typeof t=="bigint")throw Gr(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function Ghe(t){return t>0&&t%1===.5&&(t&1)===0||t<0&&t%1===-.5&&(t&1)===1?P3(Math.floor(t)):P3(Math.round(t))}function RC(t){return P3(Math.trunc(t))}function Vhe(t){return t<0?-1:1}function zlt(t,e){let r=t%e;return Vhe(e)!==Vhe(r)?r+e:r}function P3(t){return t===0?0:t}function y6(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let i=2**t,s=2**(t-1);return(o,a={})=>{let u=m6(o,a);if(u=P3(u),a.enforceRange){if(!Number.isFinite(u))throw Gr(TypeError,"is not a finite number",a);if(u=RC(u),u<r||u>n)throw Gr(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,a);return u}return!Number.isNaN(u)&&a.clamp?(u=Math.min(Math.max(u,r),n),u=Ghe(u),u):!Number.isFinite(u)||u===0?0:(u=RC(u),u>=r&&u<=n?u:(u=zlt(u,i),!e&&u>=s?u-i:u))}}function Hhe(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,i=e?BigInt.asUintN:BigInt.asIntN;return(s,o={})=>{let a=m6(s,o);if(a=P3(a),o.enforceRange){if(!Number.isFinite(a))throw Gr(TypeError,"is not a finite number",o);if(a=RC(a),a<n||a>r)throw Gr(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,o);return a}if(!Number.isNaN(a)&&o.clamp)return a=Math.min(Math.max(a,n),r),a=Ghe(a),a;if(!Number.isFinite(a)||a===0)return 0;let u=BigInt(RC(a));return u=i(t,u),Number(u)}}$r.any=t=>t;$r.undefined=()=>{};$r.boolean=t=>!!t;$r.byte=y6(8,{unsigned:!1});$r.octet=y6(8,{unsigned:!0});$r.short=y6(16,{unsigned:!1});$r["unsigned short"]=y6(16,{unsigned:!0});$r.long=y6(32,{unsigned:!1});$r["unsigned long"]=y6(32,{unsigned:!0});$r["long long"]=Hhe(64,{unsigned:!1});$r["unsigned long long"]=Hhe(64,{unsigned:!0});$r.double=(t,e={})=>{let r=m6(t,e);if(!Number.isFinite(r))throw Gr(TypeError,"is not a finite floating-point value",e);return r};$r["unrestricted double"]=(t,e={})=>m6(t,e);$r.float=(t,e={})=>{let r=m6(t,e);if(!Number.isFinite(r))throw Gr(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw Gr(TypeError,"is outside the range of a single-precision floating-point value",e);return n};$r["unrestricted float"]=(t,e={})=>{let r=m6(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};$r.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw Gr(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};$r.ByteString=(t,e={})=>{let r=$r.DOMString(t,e),n;for(let i=0;(n=r.codePointAt(i))!==void 0;++i)if(n>255)throw Gr(TypeError,"is not a valid ByteString",e);return r};$r.USVString=(t,e={})=>{let r=$r.DOMString(t,e),n=r.length,i=[];for(let s=0;s<n;++s){let o=r.charCodeAt(s);if(o<55296||o>57343)i.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)i.push(String.fromCodePoint(65533));else if(s===n-1)i.push(String.fromCodePoint(65533));else{let a=r.charCodeAt(s+1);if(56320<=a&&a<=57343){let u=o&1023,c=a&1023;i.push(String.fromCodePoint(65536+1024*u+c)),++s}else i.push(String.fromCodePoint(65533))}}return i.join("")};$r.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw Gr(TypeError,"is not an object",e);return t};var Wlt=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,Jlt=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function zK(t){try{return Wlt.call(t),!0}catch{return!1}}function f6(t){try{return Jlt.call(t),!0}catch{return!1}}function h6(t){try{return new Uint8Array(t),!1}catch{return!0}}$r.ArrayBuffer=(t,e={})=>{if(!zK(t))throw e.allowShared&&!f6(t)?Gr(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):Gr(TypeError,"is not an ArrayBuffer",e);if(h6(t))throw Gr(TypeError,"is a detached ArrayBuffer",e);return t};var Ylt=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;$r.DataView=(t,e={})=>{try{Ylt.call(t)}catch{throw Gr(TypeError,"is not a DataView",e)}if(!e.allowShared&&f6(t.buffer))throw Gr(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(h6(t.buffer))throw Gr(TypeError,"is backed by a detached ArrayBuffer",e);return t};var Qlt=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";$r[e]=(n,i={})=>{if(!ArrayBuffer.isView(n)||Qlt.call(n)!==e)throw Gr(TypeError,`is not ${r} ${e} object`,i);if(!i.allowShared&&f6(n.buffer))throw Gr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",i);if(h6(n.buffer))throw Gr(TypeError,"is a view on a detached ArrayBuffer",i);return n}});$r.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw Gr(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&f6(t.buffer))throw Gr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(h6(t.buffer))throw Gr(TypeError,"is a view on a detached ArrayBuffer",e);return t};$r.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&f6(t.buffer))throw Gr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(h6(t.buffer))throw Gr(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!zK(t))throw Gr(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!f6(t)&&!zK(t))throw Gr(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(h6(t))throw Gr(TypeError,"is a detached ArrayBuffer",e);return t};$r.DOMTimeStamp=$r["unsigned long long"]});var MC=m((Zhe,eme)=>{"use strict";function Xlt(t){return typeof t=="object"&&t!==null||typeof t=="function"}var zhe=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function Zlt(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function edt(t,e){let r=Yhe(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var Whe=Symbol("wrapper"),Jhe=Symbol("impl"),g6=Symbol("SameObject caches"),kC=Symbol.for("[webidl2js] constructor registry"),tdt=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function Yhe(t){if(zhe(t,kC))return t[kC];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=tdt}return t[kC]=e,e}function rdt(t,e,r){return t[g6]||(t[g6]=Object.create(null)),e in t[g6]||(t[g6][e]=r()),t[g6][e]}function Qhe(t){return t?t[Whe]:null}function Xhe(t){return t?t[Jhe]:null}function ndt(t){let e=Qhe(t);return e||t}function idt(t){let e=Xhe(t);return e||t}var sdt=Symbol("internal");function odt(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var adt=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function udt(t){try{return adt.call(t),!0}catch{return!1}}function cdt([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var ldt=Symbol("supports property index"),ddt=Symbol("supported property indices"),pdt=Symbol("supports property name"),fdt=Symbol("supported property names"),hdt=Symbol("indexed property get"),mdt=Symbol("indexed property set new"),ydt=Symbol("indexed property set existing"),gdt=Symbol("named property get"),Edt=Symbol("named property set new"),bdt=Symbol("named property set existing"),_dt=Symbol("named property delete"),vdt=Symbol("async iterator get the next iteration result"),Sdt=Symbol("async iterator return steps"),wdt=Symbol("async iterator initialization steps"),Adt=Symbol("async iterator end of iteration");eme.exports=Zhe={isObject:Xlt,hasOwn:zhe,define:Zlt,newObjectInRealm:edt,wrapperSymbol:Whe,implSymbol:Jhe,getSameObject:rdt,ctorRegistrySymbol:kC,initCtorRegistry:Yhe,wrapperForImpl:Qhe,implForWrapper:Xhe,tryWrapperForImpl:ndt,tryImplForWrapper:idt,iterInternalSymbol:sdt,isArrayBuffer:udt,isArrayIndexPropName:odt,supportsPropertyIndex:ldt,supportedPropertyIndices:ddt,supportsPropertyName:pdt,supportedPropertyNames:fdt,indexedGet:hdt,indexedSetNew:mdt,indexedSetExisting:ydt,namedGet:gdt,namedSetNew:Edt,namedSetExisting:bdt,namedDelete:_dt,asyncIteratorNext:vdt,asyncIteratorReturn:Sdt,asyncIteratorInit:wdt,asyncIteratorEOI:Adt,iteratorResult:cdt}});var ume=m((U0r,ame)=>{"use strict";var Cdt=/^xn--/,Tdt=/[^\0-\x7F]/,Odt=/[\x2E\u3002\uFF0E\uFF61]/g,xdt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},WK=35,bd=Math.floor,JK=String.fromCharCode;function B1(t){throw new RangeError(xdt[t])}function Idt(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function rme(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(Odt,".");let i=t.split("."),s=Idt(i,e).join(".");return n+s}function nme(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let s=t.charCodeAt(r++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var Rdt=t=>String.fromCodePoint(...t),Ddt=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},tme=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},ime=function(t,e,r){let n=0;for(t=r?bd(t/700):t>>1,t+=bd(t/e);t>WK*26>>1;n+=36)t=bd(t/WK);return bd(n+(WK+1)*t/(t+38))},sme=function(t){let e=[],r=t.length,n=0,i=128,s=72,o=t.lastIndexOf("-");o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&B1("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<r;){let u=n;for(let l=1,d=36;;d+=36){a>=r&&B1("invalid-input");let p=Ddt(t.charCodeAt(a++));p>=36&&B1("invalid-input"),p>bd((2147483647-n)/l)&&B1("overflow"),n+=p*l;let f=d<=s?1:d>=s+26?26:d-s;if(p<f)break;let h=36-f;l>bd(2147483647/h)&&B1("overflow"),l*=h}let c=e.length+1;s=ime(n-u,c,u==0),bd(n/c)>2147483647-i&&B1("overflow"),i+=bd(n/c),n%=c,e.splice(n++,0,i)}return String.fromCodePoint(...e)},ome=function(t){let e=[];t=nme(t);let r=t.length,n=128,i=0,s=72;for(let u of t)u<128&&e.push(JK(u));let o=e.length,a=o;for(o&&e.push("-");a<r;){let u=2147483647;for(let l of t)l>=n&&l<u&&(u=l);let c=a+1;u-n>bd((2147483647-i)/c)&&B1("overflow"),i+=(u-n)*c,n=u;for(let l of t)if(l<n&&++i>2147483647&&B1("overflow"),l===n){let d=i;for(let p=36;;p+=36){let f=p<=s?1:p>=s+26?26:p-s;if(d<f)break;let h=d-f,g=36-f;e.push(JK(tme(f+h%g,0))),d=bd(h/g)}e.push(JK(tme(d,0))),s=ime(i,c,a===o),i=0,++a}++i,++n}return e.join("")},kdt=function(t){return rme(t,function(e){return Cdt.test(e)?sme(e.slice(4).toLowerCase()):e})},Mdt=function(t){return rme(t,function(e){return Tdt.test(e)?"xn--"+ome(e):e})},Pdt={version:"2.3.1",ucs2:{decode:nme,encode:Rdt},decode:sme,encode:ome,toASCII:Mdt,toUnicode:kdt};ame.exports=Pdt});var lme=m((V0r,cme)=>{"use strict";var Ndt=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,Fdt=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,Bdt=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,qdt=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,Ldt=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,jdt=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,$dt=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,Kdt=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,Udt=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,Vdt=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,Gdt=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,Hdt=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;cme.exports={combiningMarks:Ndt,combiningClassVirama:Fdt,validZWNJ:Bdt,bidiDomain:qdt,bidiS1LTR:Ldt,bidiS1RTL:jdt,bidiS2:$dt,bidiS3:Kdt,bidiS4EN:Udt,bidiS4AN:Vdt,bidiS5:Gdt,bidiS6:Hdt}});var dme=m((G0r,zdt)=>{zdt.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\u{10D70}"],[68945,1,"\u{10D71}"],[68946,1,"\u{10D72}"],[68947,1,"\u{10D73}"],[68948,1,"\u{10D74}"],[68949,1,"\u{10D75}"],[68950,1,"\u{10D76}"],[68951,1,"\u{10D77}"],[68952,1,"\u{10D78}"],[68953,1,"\u{10D79}"],[68954,1,"\u{10D7A}"],[68955,1,"\u{10D7B}"],[68956,1,"\u{10D7C}"],[68957,1,"\u{10D7D}"],[68958,1,"\u{10D7E}"],[68959,1,"\u{10D7F}"],[68960,1,"\u{10D80}"],[68961,1,"\u{10D81}"],[68962,1,"\u{10D82}"],[68963,1,"\u{10D83}"],[68964,1,"\u{10D84}"],[68965,1,"\u{10D85}"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118e3,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,1,"\u{243AB}"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var fme=m((H0r,pme)=>{"use strict";pme.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var Eme=m((z0r,gme)=>{"use strict";var QK=ume(),Yu=lme(),hme=dme(),{STATUS_MAPPING:q1}=fme();function YK(t){return/[^\x00-\x7F]/u.test(t)}function mme(t){let e=0,r=hme.length-1;for(;e<=r;){let n=Math.floor((e+r)/2),i=hme[n],s=Array.isArray(i[0])?i[0][0]:i[0],o=Array.isArray(i[0])?i[0][1]:i[0];if(s<=t&&o>=t)return i.slice(1);s>t?r=n-1:e=n+1}return null}function Wdt(t,{transitionalProcessing:e}){let r="";for(let n of t){let[i,s]=mme(n.codePointAt(0));switch(i){case q1.disallowed:r+=n;break;case q1.ignored:break;case q1.mapped:e&&n==="\u1E9E"?r+="ss":r+=s;break;case q1.deviation:e?r+=s:r+=n;break;case q1.valid:r+=n;break}}return r}function Jdt(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,transitionalProcessing:i,useSTD3ASCIIRules:s,isBidi:o}){if(t.length===0)return!0;if(t.normalize("NFC")!==t)return!1;let a=Array.from(t);if(e&&(a[2]==="-"&&a[3]==="-"||t.startsWith("-")||t.endsWith("-"))||!e&&t.startsWith("xn--")||t.includes(".")||Yu.combiningMarks.test(a[0]))return!1;for(let u of a){let c=u.codePointAt(0),[l]=mme(c);if(i){if(l!==q1.valid)return!1}else if(l!==q1.valid&&l!==q1.deviation)return!1;if(s&&c<=127&&!/^(?:[a-z]|[0-9]|-)$/u.test(u))return!1}if(n){let u=0;for(let[c,l]of a.entries())if(l==="\u200C"||l==="\u200D"){if(c>0){if(Yu.combiningClassVirama.test(a[c-1]))continue;if(l==="\u200C"){let d=a.indexOf("\u200C",c+1),p=d<0?a.slice(u):a.slice(u,d);if(Yu.validZWNJ.test(p.join(""))){u=c+1;continue}}}return!1}}if(r&&o){let u;if(Yu.bidiS1LTR.test(a[0]))u=!1;else if(Yu.bidiS1RTL.test(a[0]))u=!0;else return!1;if(u){if(!Yu.bidiS2.test(t)||!Yu.bidiS3.test(t)||Yu.bidiS4EN.test(t)&&Yu.bidiS4AN.test(t))return!1}else if(!Yu.bidiS5.test(t)||!Yu.bidiS6.test(t))return!1}return!0}function Ydt(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return QK.decode(r.substring(4))}catch{return""}return r}).join(".");return Yu.bidiDomain.test(e)}function yme(t,e){let r=Wdt(t,e);r=r.normalize("NFC");let n=r.split("."),i=Ydt(n),s=!1;for(let[o,a]of n.entries()){let u=a,c=e.transitionalProcessing;if(u.startsWith("xn--")){if(YK(u)){s=!0;continue}try{u=QK.decode(u.substring(4))}catch{if(!e.ignoreInvalidPunycode){s=!0;continue}}n[o]=u,(u===""||!YK(u))&&(s=!0),c=!1}if(s)continue;Jdt(u,{...e,transitionalProcessing:c,isBidi:i})||(s=!0)}return{string:n.join("."),error:s}}function Qdt(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,verifyDNSLength:s=!1,transitionalProcessing:o=!1,ignoreInvalidPunycode:a=!1}={}){let u=yme(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i,transitionalProcessing:o,ignoreInvalidPunycode:a}),c=u.string.split(".");if(c=c.map(l=>{if(YK(l))try{return`xn--${QK.encode(l)}`}catch{u.error=!0}return l}),s){let l=c.join(".").length;(l>253||l===0)&&(u.error=!0);for(let d=0;d<c.length;++d)if(c[d].length>63||c[d].length===0){u.error=!0;break}}return u.error?null:c.join(".")}function Xdt(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,transitionalProcessing:s=!1,ignoreInvalidPunycode:o=!1}={}){let a=yme(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i,transitionalProcessing:s,ignoreInvalidPunycode:o});return{domain:a.string,error:a.error}}gme.exports={toASCII:Qdt,toUnicode:Xdt}});var ZK=m((W0r,_me)=>{"use strict";function XK(t){return t>=48&&t<=57}function bme(t){return t>=65&&t<=90||t>=97&&t<=122}function Zdt(t){return bme(t)||XK(t)}function ept(t){return XK(t)||t>=65&&t<=70||t>=97&&t<=102}_me.exports={isASCIIDigit:XK,isASCIIAlpha:bme,isASCIIAlphanumeric:Zdt,isASCIIHex:ept}});var PC=m((J0r,vme)=>{"use strict";var tpt=new TextEncoder,rpt=new TextDecoder("utf-8",{ignoreBOM:!0});function npt(t){return tpt.encode(t)}function ipt(t){return rpt.decode(t)}vme.exports={utf8Encode:npt,utf8DecodeWithoutBOM:ipt}});var NC=m((Y0r,xme)=>{"use strict";var{isASCIIHex:Sme}=ZK(),{utf8Encode:wme}=PC();function Er(t){return t.codePointAt(0)}function spt(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function Ame(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let i=t[n];if(i!==37)e[r++]=i;else if(i===37&&(!Sme(t[n+1])||!Sme(t[n+2])))e[r++]=i;else{let s=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=s,n+=2}}return e.slice(0,r)}function opt(t){let e=wme(t);return Ame(e)}function eU(t){return t<=31||t>126}var apt=new Set([Er(" "),Er('"'),Er("<"),Er(">"),Er("`")]);function upt(t){return eU(t)||apt.has(t)}var cpt=new Set([Er(" "),Er('"'),Er("#"),Er("<"),Er(">")]);function tU(t){return eU(t)||cpt.has(t)}function lpt(t){return tU(t)||t===Er("'")}var dpt=new Set([Er("?"),Er("`"),Er("{"),Er("}"),Er("^")]);function Cme(t){return tU(t)||dpt.has(t)}var ppt=new Set([Er("/"),Er(":"),Er(";"),Er("="),Er("@"),Er("["),Er("\\"),Er("]"),Er("|")]);function Tme(t){return Cme(t)||ppt.has(t)}var fpt=new Set([Er("$"),Er("%"),Er("&"),Er("+"),Er(",")]);function hpt(t){return Tme(t)||fpt.has(t)}var mpt=new Set([Er("!"),Er("'"),Er("("),Er(")"),Er("~")]);function ypt(t){return hpt(t)||mpt.has(t)}function Ome(t,e){let r=wme(t),n="";for(let i of r)e(i)?n+=spt(i):n+=String.fromCharCode(i);return n}function gpt(t,e){return Ome(String.fromCodePoint(t),e)}function Ept(t,e,r=!1){let n="";for(let i of t)r&&i===" "?n+="+":n+=Ome(i,e);return n}xme.exports={isC0ControlPercentEncode:eU,isFragmentPercentEncode:upt,isQueryPercentEncode:tU,isSpecialQueryPercentEncode:lpt,isPathPercentEncode:Cme,isUserinfoPercentEncode:Tme,isURLEncodedPercentEncode:ypt,percentDecodeString:opt,percentDecodeBytes:Ame,utf8PercentEncodeString:Ept,utf8PercentEncodeCodePoint:gpt}});var aU=m((Q0r,Mo)=>{"use strict";var bpt=Eme(),ks=ZK(),{utf8DecodeWithoutBOM:_pt}=PC(),{percentDecodeString:vpt,utf8PercentEncodeCodePoint:BC,utf8PercentEncodeString:qC,isC0ControlPercentEncode:kme,isFragmentPercentEncode:Spt,isQueryPercentEncode:wpt,isSpecialQueryPercentEncode:Apt,isPathPercentEncode:Cpt,isUserinfoPercentEncode:iU}=NC();function ke(t){return t.codePointAt(0)}var Mme={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Mt=Symbol("failure");function Ime(t){return[...t].length}function Rme(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function Dme(t){return t==="."||t.toLowerCase()==="%2e"}function Tpt(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function Opt(t,e){return ks.isASCIIAlpha(t)&&(e===ke(":")||e===ke("|"))}function Pme(t){return t.length===2&&ks.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function xpt(t){return t.length===2&&ks.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function Nme(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function Ipt(t){return Nme(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function FC(t){return Mme[t]!==void 0}function Ds(t){return FC(t.scheme)}function rU(t){return!FC(t.scheme)}function Fme(t){return Mme[t]}function Bme(t){if(t==="")return Mt;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?Mt:parseInt(t,e)}function Rpt(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return Mt;let r=[];for(let s of e){let o=Bme(s);if(o===Mt)return Mt;r.push(o)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return Mt;if(r[r.length-1]>=256**(5-r.length))return Mt;let n=r.pop(),i=0;for(let s of r)n+=s*256**(3-i),++i;return n}function Dpt(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function kpt(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0;if(t=Array.from(t,s=>s.codePointAt(0)),t[i]===ke(":")){if(t[i+1]!==ke(":"))return Mt;i+=2,++r,n=r}for(;i<t.length;){if(r===8)return Mt;if(t[i]===ke(":")){if(n!==null)return Mt;++i,++r,n=r;continue}let s=0,o=0;for(;o<4&&ks.isASCIIHex(t[i]);)s=s*16+parseInt(Rme(t,i),16),++i,++o;if(t[i]===ke(".")){if(o===0||(i-=o,r>6))return Mt;let a=0;for(;t[i]!==void 0;){let u=null;if(a>0)if(t[i]===ke(".")&&a<4)++i;else return Mt;if(!ks.isASCIIDigit(t[i]))return Mt;for(;ks.isASCIIDigit(t[i]);){let c=parseInt(Rme(t,i));if(u===null)u=c;else{if(u===0)return Mt;u=u*10+c}if(u>255)return Mt;++i}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return Mt;break}else if(t[i]===ke(":")){if(++i,t[i]===void 0)return Mt}else if(t[i]!==void 0)return Mt;e[r]=s,++r}if(n!==null){let s=r-n;for(r=7;r!==0&&s>0;){let o=e[n+s-1];e[n+s-1]=e[r],e[r]=o,--r,--s}}else if(n===null&&r!==8)return Mt;return e}function Mpt(t){let e="",r=Fpt(t),n=!1;for(let i=0;i<=7;++i)if(!(n&&t[i]===0)){if(n&&(n=!1),r===i){e+=i===0?"::":":",n=!0;continue}e+=t[i].toString(16),i!==7&&(e+=":")}return e}function nU(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?Mt:kpt(t.substring(1,t.length-1));if(e)return Npt(t);let r=_pt(vpt(t)),n=Bpt(r);return n===Mt?Mt:Ppt(n)?Rpt(n):n}function Ppt(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(Bme(r)!==Mt||/^[0-9]+$/u.test(r))}function Npt(t){return Nme(t)?Mt:qC(t,kme)}function Fpt(t){let e=null,r=1,n=null,i=0;for(let s=0;s<t.length;++s)t[s]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=s),++i);return i>r?n:e}function sU(t){return typeof t=="number"?Dpt(t):t instanceof Array?`[${Mpt(t)}]`:t}function Bpt(t,e=!1){let r=bpt.toASCII(t,{checkHyphens:e,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:e,transitionalProcessing:!1,verifyDNSLength:e,ignoreInvalidPunycode:!1});return r===null||!e&&(r===""||Ipt(r))?Mt:r}function qpt(t){let e=0,r=t.length;for(;e<r&&!(t.charCodeAt(e)>32);++e);for(;r>e&&!(t.charCodeAt(r-1)>32);--r);return t.substring(e,r)}function Lpt(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function qme(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&$pt(e[0])||e.pop())}function Lme(t){return t.username!==""||t.password!==""}function jpt(t){return t.host===null||t.host===""||t.scheme==="file"}function N3(t){return typeof t.path=="string"}function $pt(t){return/^[A-Za-z]:$/u.test(t)}function ri(t,e,r,n,i){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let o=qpt(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let s=Lpt(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,o=>o.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this[`parse ${this.state}`](o,a);if(u){if(u===Mt){this.failure=!0;break}}else break}}ri.prototype["parse scheme start"]=function(e,r){if(ks.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Mt;return!0};ri.prototype["parse scheme"]=function(e,r){if(ks.isASCIIAlphanumeric(e)||e===ke("+")||e===ke("-")||e===ke("."))this.buffer+=r.toLowerCase();else if(e===ke(":")){if(this.stateOverride&&(Ds(this.url)&&!FC(this.buffer)||!Ds(this.url)&&FC(this.buffer)||(Lme(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===Fme(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==ke("/")||this.input[this.pointer+2]!==ke("/"))&&(this.parseError=!0),this.state="file"):Ds(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Ds(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===ke("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Mt;return!0};ri.prototype["parse no scheme"]=function(e){return this.base===null||N3(this.base)&&e!==ke("#")?Mt:(N3(this.base)&&e===ke("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};ri.prototype["parse special relative or authority"]=function(e){return e===ke("/")&&this.input[this.pointer+1]===ke("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};ri.prototype["parse path or authority"]=function(e){return e===ke("/")?this.state="authority":(this.state="path",--this.pointer),!0};ri.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===ke("/")?this.state="relative slash":Ds(this.url)&&e===ke("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===ke("?")?(this.url.query="",this.state="query"):e===ke("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};ri.prototype["parse relative slash"]=function(e){return Ds(this.url)&&(e===ke("/")||e===ke("\\"))?(e===ke("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===ke("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};ri.prototype["parse special authority slashes"]=function(e){return e===ke("/")&&this.input[this.pointer+1]===ke("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};ri.prototype["parse special authority ignore slashes"]=function(e){return e!==ke("/")&&e!==ke("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};ri.prototype["parse authority"]=function(e,r){if(e===ke("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=Ime(this.buffer);for(let i=0;i<n;++i){let s=this.buffer.codePointAt(i);if(s===ke(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=BC(s,iU);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ds(this.url)&&e===ke("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Mt;this.pointer-=Ime(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};ri.prototype["parse hostname"]=ri.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===ke(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Mt;if(this.stateOverride==="hostname")return!1;let n=nU(this.buffer,rU(this.url));if(n===Mt)return Mt;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ds(this.url)&&e===ke("\\")){if(--this.pointer,Ds(this.url)&&this.buffer==="")return this.parseError=!0,Mt;if(this.stateOverride&&this.buffer===""&&(Lme(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=nU(this.buffer,rU(this.url));if(n===Mt)return Mt;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===ke("[")?this.arrFlag=!0:e===ke("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};ri.prototype["parse port"]=function(e,r){if(ks.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ds(this.url)&&e===ke("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,Mt;this.url.port=n===Fme(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Mt;return!0};var Kpt=new Set([ke("/"),ke("\\"),ke("?"),ke("#")]);function jme(t,e){let r=t.length-e;return r>=2&&Opt(t[e],t[e+1])&&(r===2||Kpt.has(t[e+2]))}ri.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===ke("/")||e===ke("\\")?(e===ke("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===ke("?")?(this.url.query="",this.state="query"):e===ke("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,jme(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):qme(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};ri.prototype["parse file slash"]=function(e){return e===ke("/")||e===ke("\\")?(e===ke("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!jme(this.input,this.pointer)&&xpt(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};ri.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===ke("/")||e===ke("\\")||e===ke("?")||e===ke("#"))if(--this.pointer,!this.stateOverride&&Pme(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=nU(this.buffer,rU(this.url));if(n===Mt)return Mt;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};ri.prototype["parse path start"]=function(e){return Ds(this.url)?(e===ke("\\")&&(this.parseError=!0),this.state="path",e!==ke("/")&&e!==ke("\\")&&--this.pointer):!this.stateOverride&&e===ke("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===ke("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==ke("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};ri.prototype["parse path"]=function(e){return isNaN(e)||e===ke("/")||Ds(this.url)&&e===ke("\\")||!this.stateOverride&&(e===ke("?")||e===ke("#"))?(Ds(this.url)&&e===ke("\\")&&(this.parseError=!0),Tpt(this.buffer)?(qme(this.url),e!==ke("/")&&!(Ds(this.url)&&e===ke("\\"))&&this.url.path.push("")):Dme(this.buffer)&&e!==ke("/")&&!(Ds(this.url)&&e===ke("\\"))?this.url.path.push(""):Dme(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&Pme(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===ke("?")&&(this.url.query="",this.state="query"),e===ke("#")&&(this.url.fragment="",this.state="fragment")):(e===ke("%")&&(!ks.isASCIIHex(this.input[this.pointer+1])||!ks.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=BC(e,Cpt)),!0};ri.prototype["parse opaque path"]=function(e){if(e===ke("?"))this.url.query="",this.state="query";else if(e===ke("#"))this.url.fragment="",this.state="fragment";else if(e===ke(" ")){let r=this.input[this.pointer+1];r===ke("?")||r===ke("#")?this.url.path+="%20":this.url.path+=" "}else!isNaN(e)&&e!==ke("%")&&(this.parseError=!0),e===ke("%")&&(!ks.isASCIIHex(this.input[this.pointer+1])||!ks.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=BC(e,kme));return!0};ri.prototype["parse query"]=function(e,r){if((!Ds(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===ke("#")||isNaN(e)){let n=Ds(this.url)?Apt:wpt;this.url.query+=qC(this.buffer,n),this.buffer="",e===ke("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===ke("%")&&(!ks.isASCIIHex(this.input[this.pointer+1])||!ks.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};ri.prototype["parse fragment"]=function(e){return isNaN(e)||(e===ke("%")&&(!ks.isASCIIHex(this.input[this.pointer+1])||!ks.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=BC(e,Spt)),!0};function Upt(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=sU(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!N3(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=oU(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function Vpt(t){let e=`${t.scheme}://`;return e+=sU(t.host),t.port!==null&&(e+=`:${t.port}`),e}function oU(t){if(N3(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}Mo.exports.serializeURL=Upt;Mo.exports.serializePath=oU;Mo.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=Mo.exports.parseURL(oU(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":Mo.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return Vpt({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};Mo.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new ri(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};Mo.exports.setTheUsername=function(t,e){t.username=qC(e,iU)};Mo.exports.setThePassword=function(t,e){t.password=qC(e,iU)};Mo.exports.serializeHost=sU;Mo.exports.cannotHaveAUsernamePasswordPort=jpt;Mo.exports.hasAnOpaquePath=N3;Mo.exports.serializeInteger=function(t){return String(t)};Mo.exports.parseURL=function(t,e){return e===void 0&&(e={}),Mo.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var uU=m((X0r,zme)=>{"use strict";var{utf8Encode:Gpt,utf8DecodeWithoutBOM:$me}=PC(),{percentDecodeBytes:Kme,utf8PercentEncodeString:Ume,isURLEncodedPercentEncode:Vme}=NC();function Gme(t){return t.codePointAt(0)}function Hpt(t){let e=Jpt(t,Gme("&")),r=[];for(let n of e){if(n.length===0)continue;let i,s,o=n.indexOf(Gme("="));o>=0?(i=n.slice(0,o),s=n.slice(o+1)):(i=n,s=new Uint8Array(0)),i=Hme(i,43,32),s=Hme(s,43,32);let a=$me(Kme(i)),u=$me(Kme(s));r.push([a,u])}return r}function zpt(t){return Hpt(Gpt(t))}function Wpt(t){let e="";for(let[r,n]of t.entries()){let i=Ume(n[0],Vme,!0),s=Ume(n[1],Vme,!0);r!==0&&(e+="&"),e+=`${i}=${s}`}return e}function Jpt(t,e){let r=[],n=0,i=t.indexOf(e);for(;i>=0;)r.push(t.slice(n,i)),n=i+1,i=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function Hme(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}zme.exports={parseUrlencodedString:zpt,serializeUrlencoded:Wpt}});var Yme=m(Jme=>{"use strict";var Wme=DC(),LC=MC();Jme.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...i){let s=LC.tryWrapperForImpl(this),o;for(let a=0;a<i.length;a++)i[a]=LC.tryWrapperForImpl(i[a]);return o=Reflect.apply(e,s,i),o=Wme.any(o,{context:r,globals:t}),o}return n.construct=(...i)=>{for(let o=0;o<i.length;o++)i[o]=LC.tryWrapperForImpl(i[o]);let s=Reflect.construct(e,i);return s=Wme.any(s,{context:r,globals:t}),s},n[LC.wrapperSymbol]=e,n.objectReference=e,n}});var Xme=m(Qme=>{"use strict";var cU=uU();Qme.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let i=r[0];if(this._list=[],this._url=null,!n&&typeof i=="string"&&i[0]==="?"&&(i=i.slice(1)),Array.isArray(i))for(let s of i){if(s.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([s[0],s[1]])}else if(typeof i=="object"&&Object.getPrototypeOf(i)===null)for(let s of Object.keys(i)){let o=i[s];this._list.push([s,o])}else this._list=cU.parseUrlencodedString(i)}_updateSteps(){if(this._url!==null){let e=cU.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,i=0;for(;i<this._list.length;)this._list[i][0]===e?n?this._list.splice(i,1):(n=!0,this._list[i][1]=r,i++):i++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return cU.serializeUrlencoded(this._list)}}});var lU=m(Tr=>{"use strict";var pa=DC(),Zr=MC(),Ypt=Yme(),Zme=Zr.newObjectInRealm,bi=Zr.implSymbol,t0e=Zr.ctorRegistrySymbol,e0e="URLSearchParams";Tr.is=t=>Zr.isObject(t)&&Zr.hasOwn(t,bi)&&t[bi]instanceof L1.implementation;Tr.isImpl=t=>Zr.isObject(t)&&t instanceof L1.implementation;Tr.convert=(t,e,{context:r="The provided value"}={})=>{if(Tr.is(e))return Zr.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};Tr.createDefaultIterator=(t,e,r)=>{let i=t[t0e]["URLSearchParams Iterator"],s=Object.create(i);return Object.defineProperty(s,Zr.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),s};function r0e(t,e){let r;return e!==void 0&&(r=e.prototype),Zr.isObject(r)||(r=t[t0e].URLSearchParams.prototype),Object.create(r)}Tr.create=(t,e,r)=>{let n=r0e(t);return Tr.setup(n,t,e,r)};Tr.createImpl=(t,e,r)=>{let n=Tr.create(t,e,r);return Zr.implForWrapper(n)};Tr._internalSetup=(t,e)=>{};Tr.setup=(t,e,r=[],n={})=>(n.wrapper=t,Tr._internalSetup(t,e),Object.defineProperty(t,bi,{value:new L1.implementation(e,r,n),configurable:!0}),t[bi][Zr.wrapperSymbol]=t,L1.init&&L1.init(t[bi]),t);Tr.new=(t,e)=>{let r=r0e(t,e);return Tr._internalSetup(r,t),Object.defineProperty(r,bi,{value:Object.create(L1.implementation.prototype),configurable:!0}),r[bi][Zr.wrapperSymbol]=r,L1.init&&L1.init(r[bi]),r[bi]};var Qpt=new Set(["Window","Worker"]);Tr.install=(t,e)=>{if(!e.some(i=>Qpt.has(i)))return;let r=Zr.initCtorRegistry(t);class n{constructor(){let s=[];{let o=arguments[0];if(o!==void 0)if(Zr.isObject(o))if(o[Symbol.iterator]!==void 0)if(Zr.isObject(o)){let a=[],u=o;for(let c of u){if(Zr.isObject(c)){let l=[],d=c;for(let p of d)p=pa.USVString(p,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),l.push(p);c=l}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");a.push(c)}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(Zr.isObject(o)){let a=Object.create(null);for(let u of Reflect.ownKeys(o)){let c=Object.getOwnPropertyDescriptor(o,u);if(c&&c.enumerable){let l=u;l=pa.USVString(l,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let d=o[u];d=pa.USVString(d,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),a[l]=d}}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else o=pa.USVString(o,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else o="";s.push(o)}return Tr.setup(Object.create(new.target.prototype),t,s)}append(s,o){let a=this!==null&&this!==void 0?this:t;if(!Tr.is(a))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=pa.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=pa.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return Zr.tryWrapperForImpl(a[bi].append(...u))}delete(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=pa.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=pa.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return Zr.tryWrapperForImpl(o[bi].delete(...a))}get(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=pa.USVString(u,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return o[bi].get(...a)}getAll(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=pa.USVString(u,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return Zr.tryWrapperForImpl(o[bi].getAll(...a))}has(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=pa.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=pa.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return o[bi].has(...a)}set(s,o){let a=this!==null&&this!==void 0?this:t;if(!Tr.is(a))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=pa.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=pa.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return Zr.tryWrapperForImpl(a[bi].set(...u))}sort(){let s=this!==null&&this!==void 0?this:t;if(!Tr.is(s))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return Zr.tryWrapperForImpl(s[bi].sort())}toString(){let s=this!==null&&this!==void 0?this:t;if(!Tr.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return s[bi].toString()}keys(){if(!Tr.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return Tr.createDefaultIterator(t,this,"key")}values(){if(!Tr.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return Tr.createDefaultIterator(t,this,"value")}entries(){if(!Tr.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return Tr.createDefaultIterator(t,this,"key+value")}forEach(s){if(!Tr.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");s=Ypt.convert(t,s,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let o=arguments[1],a=Array.from(this[bi]),u=0;for(;u<a.length;){let[c,l]=a[u].map(Zr.tryWrapperForImpl);s.call(o,l,c,this),a=Array.from(this[bi]),u++}}get size(){let s=this!==null&&this!==void 0?this:t;if(!Tr.is(s))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return s[bi].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[e0e]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),Zr.define(r["URLSearchParams Iterator"],{next(){let i=this&&this[Zr.iterInternalSymbol];if(!i)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:s,kind:o,index:a}=i,u=Array.from(s[bi]),c=u.length;if(a>=c)return Zme(t,{value:void 0,done:!0});let l=u[a];return i.index=a+1,Zme(t,Zr.iteratorResult(l.map(Zr.tryWrapperForImpl),o))}}),Object.defineProperty(t,e0e,{configurable:!0,writable:!0,value:n})};var L1=Xme()});var o0e=m(s0e=>{"use strict";var Hr=aU(),n0e=uU(),Xpt=lU();s0e.implementation=class i0e{constructor(e,[r,n]){let i=null;if(n!==void 0&&(i=Hr.basicURLParse(n),i===null))throw new TypeError(`Invalid base URL: ${n}`);let s=Hr.basicURLParse(r,{baseURL:i});if(s===null)throw new TypeError(`Invalid URL: ${r}`);let o=s.query!==null?s.query:"";this._url=s,this._query=Xpt.createImpl(e,[o],{doNotStripQMark:!0}),this._query._url=this}static parse(e,r,n){try{return new i0e(e,[r,n])}catch{return null}}static canParse(e,r){let n=null;return!(r!==void 0&&(n=Hr.basicURLParse(r),n===null)||Hr.basicURLParse(e,{baseURL:n})===null)}get href(){return Hr.serializeURL(this._url)}set href(e){let r=Hr.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=n0e.parseUrlencodedString(n))}get origin(){return Hr.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){Hr.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){Hr.cannotHaveAUsernamePasswordPort(this._url)||Hr.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){Hr.cannotHaveAUsernamePasswordPort(this._url)||Hr.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?Hr.serializeHost(e.host):`${Hr.serializeHost(e.host)}:${Hr.serializeInteger(e.port)}`}set host(e){Hr.hasAnOpaquePath(this._url)||Hr.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":Hr.serializeHost(this._url.host)}set hostname(e){Hr.hasAnOpaquePath(this._url)||Hr.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":Hr.serializeInteger(this._url.port)}set port(e){Hr.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:Hr.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return Hr.serializePath(this._url)}set pathname(e){Hr.hasAnOpaquePath(this._url)||(this._url.path=[],Hr.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[];return}let n=e[0]==="?"?e.substring(1):e;r.query="",Hr.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=n0e.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",Hr.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var c0e=m(jt=>{"use strict";var no=DC(),fa=MC(),Or=fa.implSymbol,Zpt=fa.ctorRegistrySymbol,a0e="URL";jt.is=t=>fa.isObject(t)&&fa.hasOwn(t,Or)&&t[Or]instanceof _d.implementation;jt.isImpl=t=>fa.isObject(t)&&t instanceof _d.implementation;jt.convert=(t,e,{context:r="The provided value"}={})=>{if(jt.is(e))return fa.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function u0e(t,e){let r;return e!==void 0&&(r=e.prototype),fa.isObject(r)||(r=t[Zpt].URL.prototype),Object.create(r)}jt.create=(t,e,r)=>{let n=u0e(t);return jt.setup(n,t,e,r)};jt.createImpl=(t,e,r)=>{let n=jt.create(t,e,r);return fa.implForWrapper(n)};jt._internalSetup=(t,e)=>{};jt.setup=(t,e,r=[],n={})=>(n.wrapper=t,jt._internalSetup(t,e),Object.defineProperty(t,Or,{value:new _d.implementation(e,r,n),configurable:!0}),t[Or][fa.wrapperSymbol]=t,_d.init&&_d.init(t[Or]),t);jt.new=(t,e)=>{let r=u0e(t,e);return jt._internalSetup(r,t),Object.defineProperty(r,Or,{value:Object.create(_d.implementation.prototype),configurable:!0}),r[Or][fa.wrapperSymbol]=r,_d.init&&_d.init(r[Or]),r[Or]};var eft=new Set(["Window","Worker"]);jt.install=(t,e)=>{if(!e.some(i=>eft.has(i)))return;let r=fa.initCtorRegistry(t);class n{constructor(s){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=no.USVString(a,{context:"Failed to construct 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=no.USVString(a,{context:"Failed to construct 'URL': parameter 2",globals:t})),o.push(a)}return jt.setup(Object.create(new.target.prototype),t,o)}toJSON(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return s[Or].toJSON()}get href(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return s[Or].href}set href(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),o[Or].href=s}toString(){let s=this;if(!jt.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return s[Or].href}get origin(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return s[Or].origin}get protocol(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return s[Or].protocol}set protocol(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),o[Or].protocol=s}get username(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return s[Or].username}set username(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),o[Or].username=s}get password(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return s[Or].password}set password(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),o[Or].password=s}get host(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return s[Or].host}set host(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),o[Or].host=s}get hostname(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return s[Or].hostname}set hostname(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),o[Or].hostname=s}get port(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return s[Or].port}set port(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),o[Or].port=s}get pathname(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return s[Or].pathname}set pathname(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),o[Or].pathname=s}get search(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return s[Or].search}set search(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),o[Or].search=s}get searchParams(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return fa.getSameObject(this,"searchParams",()=>fa.tryWrapperForImpl(s[Or].searchParams))}get hash(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return s[Or].hash}set hash(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");s=no.USVString(s,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),o[Or].hash=s}static parse(s){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=no.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=no.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:t})),o.push(a)}return fa.tryWrapperForImpl(_d.implementation.parse(t,...o))}static canParse(s){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=no.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=no.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),o.push(a)}return _d.implementation.canParse(...o)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{parse:{enumerable:!0},canParse:{enumerable:!0}}),r[a0e]=n,Object.defineProperty(t,a0e,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var _d=o0e()});var l0e=m(dU=>{"use strict";var tft=c0e(),rft=lU();dU.URL=tft;dU.URLSearchParams=rft});var p0e=m(io=>{"use strict";var{URL:nft,URLSearchParams:ift}=l0e(),ml=aU(),d0e=NC(),jC={Array,Object,Promise,String,TypeError};nft.install(jC,["Window"]);ift.install(jC,["Window"]);io.URL=jC.URL;io.URLSearchParams=jC.URLSearchParams;io.parseURL=ml.parseURL;io.basicURLParse=ml.basicURLParse;io.serializeURL=ml.serializeURL;io.serializePath=ml.serializePath;io.serializeHost=ml.serializeHost;io.serializeInteger=ml.serializeInteger;io.serializeURLOrigin=ml.serializeURLOrigin;io.setTheUsername=ml.setTheUsername;io.setThePassword=ml.setThePassword;io.cannotHaveAUsernamePasswordPort=ml.cannotHaveAUsernamePasswordPort;io.hasAnOpaquePath=ml.hasAnOpaquePath;io.percentDecodeString=d0e.percentDecodeString;io.percentDecodeBytes=d0e.percentDecodeBytes});var h0e=m(Qu=>{"use strict";var sft=Qu&&Qu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),oft=Qu&&Qu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),aft=Qu&&Qu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sft(e,t,r);return oft(e,t),e};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.redactConnectionString=Qu.redactValidConnectionString=void 0;var f0e=aft(pU());function uft(t,e){var r,n;let i=t.clone(),s=(r=e?.replacementString)!==null&&r!==void 0?r:"_credentials_",o=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0;if((i.username||i.password)&&o?(i.username=s,i.password=""):i.password&&(i.password=s),i.searchParams.has("authMechanismProperties")){let a=new f0e.CommaAndColonSeparatedRecord(i.searchParams.get("authMechanismProperties"));a.get("AWS_SESSION_TOKEN")&&(a.set("AWS_SESSION_TOKEN",s),i.searchParams.set("authMechanismProperties",a.toString()))}return i.searchParams.has("tlsCertificateKeyFilePassword")&&i.searchParams.set("tlsCertificateKeyFilePassword",s),i.searchParams.has("proxyUsername")&&o&&i.searchParams.set("proxyUsername",s),i.searchParams.has("proxyPassword")&&i.searchParams.set("proxyPassword",s),i}Qu.redactValidConnectionString=uft;function cft(t,e){var r,n;let i=(r=e?.replacementString)!==null&&r!==void 0?r:"<credentials>",s=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0,o;try{o=new f0e.default(t)}catch{}if(o)return e={...e,replacementString:"___credentials___"},o.redact(e).toString().replace(/___credentials___/g,i);let a=i,u=[c=>c.replace(s?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${a}$3`),c=>c.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${a}`),c=>c.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${a}`),c=>s?c.replace(/(proxyUsername=)([^&]+)/gi,`$1${a}`):c,c=>c.replace(/(proxyPassword=)([^&]+)/gi,`$1${a}`)];for(let c of u)t=c(t);return t}Qu.redactConnectionString=cft});var pU=m(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.CommaAndColonSeparatedRecord=Mp.ConnectionString=Mp.redactConnectionString=void 0;var lft=p0e(),m0e=h0e();Object.defineProperty(Mp,"redactConnectionString",{enumerable:!0,get:function(){return m0e.redactConnectionString}});var F3="__this_is_a_placeholder__";function dft(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var pft=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,$C=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function fft(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return $C.prototype._normalizeKey.call(this,r)}}}var fU=class extends lft.URL{},yl=class extends Error{get name(){return"MongoParseError"}},KC=class t extends fU{constructor(e,r={}){var n;let{looseValidation:i}=r;if(!i&&!dft(e))throw new yl('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let s=e.match(pft);if(!s)throw new yl(`Invalid connection string "${e}"`);let{protocol:o,username:a,password:u,hosts:c,rest:l}=(n=s.groups)!==null&&n!==void 0?n:{};if(!i){if(!o||!c)throw new yl(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(a??""),decodeURIComponent(u??"")}catch(f){throw new yl(f.message)}let p=/[:/?#[\]@]/gi;if(a?.match(p))throw new yl(`Username contains unescaped characters ${a}`);if(!a||!u){let f=e.replace(`${o}://`,"");if(f.startsWith("@")||f.startsWith(":"))throw new yl("URI contained empty userinfo section")}if(u?.match(p))throw new yl("Password contains unescaped characters")}let d="";typeof a=="string"&&(d+=a),typeof u=="string"&&(d+=`:${u}`),d&&(d+="@");try{super(`${o.toLowerCase()}://${d}${F3}${l}`)}catch(p){throw i&&new t(e,{...r,looseValidation:!1}),typeof p.message=="string"&&(p.message=p.message.replace(F3,c)),p}if(this._hosts=c.split(","),!i){if(this.isSRV&&this.hosts.length!==1)throw new yl("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(p=>p.includes(":")))throw new yl("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,fft(this.searchParams.constructor).prototype)}get host(){return F3}set host(e){throw new Error("No single host for connection string")}get hostname(){return F3}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(F3,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,m0e.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:a,search:u,searchParams:c,hash:l}=this;return{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:a,search:u,searchParams:c,hash:l}}};Mp.ConnectionString=KC;var hU=class extends $C{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};Mp.CommaAndColonSeparatedRecord=hU;Mp.default=KC});var q3=m(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.OpCompressedRequest=ha.OpMsgResponse=ha.OpMsgRequest=ha.DocumentSequence=ha.OpReply=ha.OpQueryRequest=void 0;var _6=gr(),B3=Ne(),mU=L3(),E6=S1(),b6=0,hft=2,mft=4,yft=8,gft=16,Eft=32,bft=64,_ft=128,vft=1,Sft=2,wft=4,Aft=8,Cft=_6.BSON.onDemand.ByteUtils.encodeUTF8Into,gU=class t{constructor(e,r,n){this.moreToCome=!1;let i=`${e}.$cmd`;if(typeof e!="string")throw new B3.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new B3.MongoRuntimeError("A query document must be specified for query");if(i.indexOf("\0")!==-1)throw new B3.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=e,this.query=r,this.ns=i,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=b6++}nextRequestId(){return b6+1}static getRequestId(){return++b6}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=hft),this.secondaryOk&&(n|=mft),this.oplogReplay&&(n|=yft),this.noCursorTimeout&&(n|=gft),this.awaitData&&(n|=Eft),this.exhaust&&(n|=bft),this.partial&&(n|=_ft),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let i=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);e.push(i);let s=_6.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(s),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=_6.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let o=i.length+s.length+(r?r.length:0),a=4;return i[3]=o>>24&255,i[2]=o>>16&255,i[1]=o>>8&255,i[0]=o&255,i[a+3]=this.requestId>>24&255,i[a+2]=this.requestId>>16&255,i[a+1]=this.requestId>>8&255,i[a]=this.requestId&255,a=a+4,i[a+3]=0,i[a+2]=0,i[a+1]=0,i[a]=0,a=a+4,i[a+3]=E6.OP_QUERY>>24&255,i[a+2]=E6.OP_QUERY>>16&255,i[a+1]=E6.OP_QUERY>>8&255,i[a]=E6.OP_QUERY&255,a=a+4,i[a+3]=n>>24&255,i[a+2]=n>>16&255,i[a+1]=n>>8&255,i[a]=n&255,a=a+4,a=a+i.write(this.ns,a,"utf8")+1,i[a-1]=0,i[a+3]=this.numberToSkip>>24&255,i[a+2]=this.numberToSkip>>16&255,i[a+1]=this.numberToSkip>>8&255,i[a]=this.numberToSkip&255,a=a+4,i[a+3]=this.numberToReturn>>24&255,i[a+2]=this.numberToReturn>>16&255,i[a+1]=this.numberToReturn>>8&255,i[a]=this.numberToReturn&255,a=a+4,e}};ha.OpQueryRequest=gU;var EU=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new _6.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&vft)!==0,this.queryFailure=(this.responseFlags&Sft)!==0,this.shardConfigStale=(this.responseFlags&wft)!==0,this.awaitCapable=(this.responseFlags&Aft)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};ha.OpReply=EU;var g0e=1,E0e=2,b0e=65536,UC=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,Cft(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let i of r)this.push(i,_6.serialize(i))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};ha.DocumentSequence=UC;var VC=class t{constructor(e,r,n){if(r==null)throw new B3.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=e,this.command=r,this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=g0e),this.moreToCome&&(r|=E0e),this.exhaustAllowed&&(r|=b0e);let n=Buffer.alloc(20);e.push(n);let i=n.length,s=this.command;return i+=this.makeSections(e,s),n.writeInt32LE(i,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(E6.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),i=Buffer.allocUnsafe(1);i[0]=0;let s=this.serializeBson(r);return e.push(i),e.push(s),e.push(n),i.length+s.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,i]of Object.entries(e))i instanceof UC&&(r.push(i.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return _6.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return b6=b6+1&2147483647,b6}};ha.OpMsgRequest=VC;var bU=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&g0e)!==0,this.moreToCome=(this.responseFlags&E0e)!==0,this.exhaustAllowed=(this.responseFlags&b0e)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new B3.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};ha.OpMsgResponse=bU;var yU=16,y0e=9,_U=class{constructor(e,r){this.command=e,this.options={zlibCompressionLevel:r.zlibCompressionLevel,agreedCompressor:r.agreedCompressor}}static canCompress(e){let r=e instanceof VC?e.command:e.query,n=Object.keys(r)[0];return!mU.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(yU),n=e.readInt32LE(12),i=await(0,mU.compress)(this.options,r),s=Buffer.alloc(yU);s.writeInt32LE(yU+y0e+i.length,0),s.writeInt32LE(this.command.requestId,4),s.writeInt32LE(0,8),s.writeInt32LE(E6.OP_COMPRESSED,12);let o=Buffer.alloc(y0e);return o.writeInt32LE(n,0),o.writeInt32LE(r.length,4),o.writeUInt8(mU.Compressor[this.options.agreedCompressor],8),[s,o,i]}};ha.OpCompressedRequest=_U});var L3=m(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.uncompressibleCommands=Ms.Compressor=void 0;Ms.compress=Rft;Ms.decompress=w0e;Ms.compressCommand=Dft;Ms.decompressResponse=kft;var _0e=require("util"),GC=require("zlib"),Tft=yi(),v0e=fl(),SU=Ne(),v6=q3(),vU=S1();Ms.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});Ms.uncompressibleCommands=new Set([Tft.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var Oft=3,xft=(0,_0e.promisify)(GC.inflate.bind(GC)),Ift=(0,_0e.promisify)(GC.deflate.bind(GC)),j1,v0=null;function S0e(){if(v0==null){let t=(0,v0e.getSnappy)();if("kModuleError"in t)throw t.kModuleError;v0=t}return v0}async function Rft(t,e){let r={};switch(t.agreedCompressor){case"snappy":return v0??=S0e(),await v0.compress(e);case"zstd":{if(A0e(),"kModuleError"in j1)throw j1.kModuleError;return await j1.compress(e,Oft)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await Ift(e,r);default:throw new SU.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function w0e(t,e){if(t!==Ms.Compressor.snappy&&t!==Ms.Compressor.zstd&&t!==Ms.Compressor.zlib&&t!==Ms.Compressor.none)throw new SU.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case Ms.Compressor.snappy:return v0??=S0e(),await v0.uncompress(e,{asBuffer:!0});case Ms.Compressor.zstd:{if(A0e(),"kModuleError"in j1)throw j1.kModuleError;return await j1.decompress(e)}case Ms.Compressor.zlib:return await xft(e);default:return e}}function A0e(){j1||(j1=(0,v0e.getZstdLibrary)())}var j3=16;async function Dft(t,e){let n=await(e.agreedCompressor==="none"||!v6.OpCompressedRequest.canCompress(t)?t:new v6.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function kft(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==vU.OP_COMPRESSED){let a=e.opCode===vU.OP_MSG?v6.OpMsgResponse:v6.OpReply,u=t.subarray(j3);return new a(t,e,u)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(j3),length:t.readInt32LE(j3+4)},n=t[j3+8],i=t.slice(j3+9),s=r.opCode===vU.OP_MSG?v6.OpMsgResponse:v6.OpReply,o=await w0e(n,i);if(o.length!==r.length)throw new SU.MongoDecompressionError("Message body and message header must be the same length");return new s(t,r,o)}});var AU=m(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.hmacSha256Hook=Vi.hmacSha512Hook=Vi.aes256CtrDecryptHook=Vi.aes256CtrEncryptHook=Vi.aes256CbcDecryptHook=Vi.aes256CbcEncryptHook=void 0;Vi.makeAES256Hook=K3;Vi.randomHook=Mft;Vi.sha256Hook=Pft;Vi.makeHmacHook=wU;Vi.signRsaSha256Hook=Nft;var $3=require("crypto");function K3(t,e){return function(r,n,i,s){let o;try{let a=$3[t](e,r,n);a.setAutoPadding(!1),o=a.update(i);let u=a.final();u.length>0&&(o=Buffer.concat([o,u]))}catch(a){return a}return o.copy(s),o.length}}function Mft(t,e){try{$3.randomFillSync(t,0,e)}catch(r){return r}return e}function Pft(t,e){let r;try{r=$3.createHash("sha256").update(t).digest()}catch(n){return n}return r.copy(e),r.length}function wU(t){return(e,r,n)=>{let i;try{i=$3.createHmac(t,e).update(r).digest()}catch(s){return s}return i.copy(n),i.length}}function Nft(t,e,r){let n;try{let i=$3.createSign("sha256WithRSAEncryption"),s=Buffer.from(`-----BEGIN PRIVATE KEY-----
${t.toString("base64")}
-----END PRIVATE KEY-----
`);n=i.update(e).end().sign(s)}catch(i){return i}return n.copy(r),n.length}Vi.aes256CbcEncryptHook=K3("createCipheriv","aes-256-cbc");Vi.aes256CbcDecryptHook=K3("createDecipheriv","aes-256-cbc");Vi.aes256CtrEncryptHook=K3("createCipheriv","aes-256-ctr");Vi.aes256CtrDecryptHook=K3("createDecipheriv","aes-256-ctr");Vi.hmacSha512Hook=wU("sha512");Vi.hmacSha256Hook=wU("sha256")});var S6=m(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.MongoCryptKMSRequestNetworkTimeoutError=ma.MongoCryptAzureKMSRequestError=ma.MongoCryptCreateEncryptedCollectionError=ma.MongoCryptCreateDataKeyError=ma.MongoCryptInvalidArgumentError=ma.MongoCryptError=void 0;var Fft=Ne(),$1=class extends Fft.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};ma.MongoCryptError=$1;var CU=class extends $1{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};ma.MongoCryptInvalidArgumentError=CU;var TU=class extends $1{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};ma.MongoCryptCreateDataKeyError=TU;var OU=class extends $1{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};ma.MongoCryptCreateEncryptedCollectionError=OU;var xU=class extends $1{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};ma.MongoCryptAzureKMSRequestError=xU;var IU=class extends $1{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};ma.MongoCryptKMSRequestNetworkTimeoutError=IU});var MU=m(K1=>{"use strict";Object.defineProperty(K1,"__esModule",{value:!0});K1.LegacyAWSTemporaryCredentialProvider=K1.AWSSDKCredentialProvider=K1.AWSTemporaryCredentialProvider=void 0;var Bft=fl(),qft=Ne(),HC=et(),Lft="http://169.254.170.2",RU="http://169.254.169.254",C0e="/latest/meta-data/iam/security-credentials",Pp=class t{static get awsSDK(){return t._awsSDK??=(0,Bft.getAwsCredentialProvider)(),t._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in t.awsSDK)}};K1.AWSTemporaryCredentialProvider=Pp;var DU=class extends Pp{constructor(e){super(),e&&(this._provider=e)}get provider(){if("kModuleError"in Pp.awsSDK)throw Pp.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,s=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&s?Pp.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):Pp.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new qft.MongoAWSError(e.message,{cause:e})}}};K1.AWSSDKCredentialProvider=DU;var kU=class extends Pp{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,HC.request)(`${Lft}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let e=await(0,HC.request)(`${RU}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),r=await(0,HC.request)(`${RU}/${C0e}`,{json:!1,headers:{"X-aws-ec2-metadata-token":e}});return await(0,HC.request)(`${RU}/${C0e}/${r}`,{headers:{"X-aws-ec2-metadata-token":e}})}};K1.LegacyAWSTemporaryCredentialProvider=kU});var T0e=m(PU=>{"use strict";Object.defineProperty(PU,"__esModule",{value:!0});PU.loadAWSCredentials=$ft;var jft=MU();async function $ft(t,e){let r=new jft.AWSSDKCredentialProvider(e),{SecretAccessKey:n="",AccessKeyId:i="",Token:s}=await r.getCredentials(),o={secretAccessKey:n,accessKeyId:i};return s!=null&&(o.sessionToken=s),{...t,aws:o}}});var NU=m(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.tokenCache=ya.AzureCredentialCache=ya.AZURE_BASE_URL=void 0;ya.addAzureParams=O0e;ya.prepareRequest=x0e;ya.fetchAzureKMSToken=I0e;ya.loadAzureCredentials=Hft;var Kft=Ne(),Uft=et(),w6=S6(),Vft=6e3;ya.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var zC=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=Vft}resetCache(){this.cachedToken=null}_getToken(){return I0e()}};ya.AzureCredentialCache=zC;ya.tokenCache=new zC;async function Gft(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new w6.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new w6.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new w6.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new w6.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let i=Number(n.expires_in)*1e3;if(Number.isNaN(i))throw new w6.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+i}}function O0e(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function x0e(t){let e=new URL(t.url?.toString()??ya.AZURE_BASE_URL);return O0e(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function I0e(t={}){let{headers:e,url:r}=x0e(t);try{let n=await(0,Uft.get)(r,{headers:e});return await Gft(n)}catch(n){throw n instanceof Kft.MongoNetworkTimeoutError?new w6.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function Hft(t){let e=await ya.tokenCache.getToken();return{...t,azure:e}}});var R0e=m(FU=>{"use strict";Object.defineProperty(FU,"__esModule",{value:!0});FU.loadGCPCredentials=Wft;var zft=fl();async function Wft(t){let e=(0,zft.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var BU=m(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.isEmptyCredentials=WC;JC.refreshKMSCredentials=Xft;var Jft=T0e(),Yft=NU(),Qft=R0e();function WC(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function Xft(t,e){let r=t;return WC("aws",t)&&(r=await(0,Jft.loadAWSCredentials)(r,e?.aws)),WC("gcp",t)&&(r=await(0,Qft.loadGCPCredentials)(r)),WC("azure",t)&&(r=await(0,Yft.loadAzureCredentials)(r)),r}});var LU=m(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});YC.StateMachine=void 0;var D0e=require("fs/promises"),Zft=require("net"),e1t=require("tls"),Np=gr(),k0e=Ps(),t1t=fl(),r1t=Ne(),M0e=$i(),U1=et(),n1t=QC(),V1=S6(),U3=null;function i1t(){if(U3==null){let t=(0,t1t.getSocks)();if("kModuleError"in t)throw t.kModuleError;U3=t}return U3}var S0=0,N0e=1,F0e=2,B0e=3,q0e=7,L0e=4,j0e=5,$0e=6,s1t=443,o1t=new Map([[S0,"MONGOCRYPT_CTX_ERROR"],[N0e,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[F0e,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[B0e,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[q0e,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[L0e,"MONGOCRYPT_CTX_NEED_KMS"],[j0e,"MONGOCRYPT_CTX_READY"],[$0e,"MONGOCRYPT_CTX_DONE"]]),a1t=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function P0e(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var u1t,qU=class{constructor(e,r=(0,Np.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let i=e._keyVaultNamespace,s=e._keyVaultClient,o=e._metaDataClient,a=e._mongocryptdClient,u=e._mongocryptdManager,c=null,l=()=>r.status,d=()=>r.state;for(;d()!==$0e&&d()!==S0;)switch(n.signal?.throwIfAborted(),P0e(`[context#${r.id}] ${o1t.get(d())||d()}`),d()){case N0e:{let p=(0,Np.deserialize)(r.nextMongoOperation());if(!o)throw new V1.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let f=this.fetchCollectionInfo(o,r.ns,p,n);for await(let h of f)if(r.addMongoOperationResponse((0,Np.serialize)(h)),d()===S0)break;if(d()===S0)break;r.finishMongoOperation();break}case F0e:{let p=r.nextMongoOperation();if(d()===S0)break;if(!a)throw new V1.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let f=u?await u.withRespawn(this.markCommand.bind(this,a,r.ns,p,n)):await this.markCommand(a,r.ns,p,n);r.addMongoOperationResponse(f),r.finishMongoOperation();break}case B0e:{let p=r.nextMongoOperation(),f=await this.fetchKeys(s,i,p,n);f.length===0&&(c=u1t??=(0,Np.serialize)({v:[]}));for(let h of f)r.addMongoOperationResponse((0,Np.serialize)(h));r.finishMongoOperation();break}case q0e:{let p=await e.askForKMSCredentials();r.provideKMSProviders((0,Np.serialize)(p));break}case L0e:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case j0e:{let p=r.finalize();if(d()===S0){let f=l().message||"Finalization error";throw new V1.MongoCryptError(f)}c=p;break}default:throw new V1.MongoCryptError(`Unknown state: ${d()}`)}if(d()===S0||c==null){let p=l().message;throw p||P0e("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new V1.MongoCryptError(p??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),i=n[1]!=null?Number.parseInt(n[1],10):s1t,s={host:n[0],servername:n[0],port:i,...(0,n1t.autoSelectSocketOptions)(this.options.socketOptions||{})},o=e.message,a=new U1.BufferPool,u,c;function l(){for(let g of[c,u])g&&g.destroy()}function d(g){return new V1.MongoCryptError("KMS request failed",{cause:g})}function p(){return new V1.MongoCryptError("KMS request closed")}let f=this.options.tlsOptions;if(f){let g=e.kmsProvider,_=f[g];if(_){let S=this.validateTlsOptions(g,_);if(S)throw S;try{await this.setTlsOptions(_,s)}catch(w){throw d(w)}}}let h;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){u=new Zft.Socket;let{promise:w,reject:C,resolve:A}=(0,U1.promiseWithResolvers)();u.once("error",x=>C(d(x))).once("close",()=>C(p())).once("connect",()=>A());let O={...s,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};u.connect(O),await w;try{U3??=i1t(),s.socket=(await U3.SocksClient.createConnection({existing_socket:u,command:"connect",destination:{host:s.host,port:s.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(x){throw d(x)}}c=e1t.connect(s,()=>{c.write(o)});let{promise:g,reject:_,resolve:S}=(0,U1.promiseWithResolvers)();h=(0,U1.addAbortListener)(r?.signal,function(){l(),_(this.reason)}),c.once("error",w=>_(d(w))).once("close",()=>_(p())).on("data",w=>{for(a.append(w);e.bytesNeeded>0&&a.length;){let C=Math.min(e.bytesNeeded,a.length);e.addResponse(a.read(C))}e.bytesNeeded<=0&&S()}),await(r?.timeoutContext?.csotEnabled()?Promise.all([g,M0e.Timeout.expires(r.timeoutContext?.remainingTimeMS)]):g)}catch(g){throw g instanceof M0e.TimeoutError?new r1t.MongoOperationTimeoutError("KMS request timed out"):g}finally{l(),h?.[U1.kDispose]()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let i of a1t)if(n.includes(i))return new V1.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${i}`)}async setTlsOptions(e,r){if(e.secureContext&&(r.secureContext=e.secureContext),e.tlsCertificateKeyFile){let n=await D0e.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await D0e.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}fetchCollectionInfo(e,r,n,i){let{db:s}=U1.MongoDBCollectionNamespace.fromString(r);return e.db(s).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:i?.timeoutContext&&new k0e.CursorTimeoutContext(i?.timeoutContext,Symbol()),signal:i?.signal,nameOnly:!1})}async markCommand(e,r,n,i){let{db:s}=U1.MongoDBCollectionNamespace.fromString(r),o={promoteLongs:!1,promoteValues:!1},a=(0,Np.deserialize)(n,o),u={timeoutMS:void 0,signal:void 0};i?.timeoutContext?.csotEnabled()&&(u.timeoutMS=i.timeoutContext.remainingTimeMS),i?.signal&&(u.signal=i.signal);let c=await e.db(s).command(a,{...o,...u});return(0,Np.serialize)(c,this.bsonOptions)}fetchKeys(e,r,n,i){let{db:s,collection:o}=U1.MongoDBCollectionNamespace.fromString(r),a={timeoutContext:void 0,signal:void 0};return i?.timeoutContext!=null&&(a.timeoutContext=new k0e.CursorTimeoutContext(i.timeoutContext,Symbol())),i?.signal!=null&&(a.signal=i.signal),e.db(s).collection(o,{readConcern:{level:"majority"}}).find((0,Np.deserialize)(n),a).toArray()}};YC.StateMachine=qU});var QC=m(H3=>{"use strict";Object.defineProperty(H3,"__esModule",{value:!0});H3.ClientEncryption=void 0;H3.autoSelectSocketOptions=G3;var Po=gr(),c1t=fl(),V3=$i(),ga=et(),l1t=AU(),G1=S6(),K0e=BU(),XC=LU(),jU=class t{static getMongoCrypt(){let e=(0,c1t.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,ga.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,K0e.isEmptyCredentials)("aws",this._kmsProviders))throw new G1.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(r.keyVaultNamespace==null)throw new G1.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let i={...r,cryptoCallbacks:l1t,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,Po.serialize)(this._kmsProviders)};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let s=t.getMongoCrypt();this._mongoCrypt=new s(i)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new G1.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((f,h)=>{if(typeof f!="string")throw new G1.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${h} was of type ${typeof f}`);return(0,Po.serialize)({keyAltName:f})}));let i;r.keyMaterial&&(i=(0,Po.serialize)({keyMaterial:r.keyMaterial}));let s=(0,Po.serialize)({provider:e,...r.masterKey}),o=this._mongoCrypt.makeDataKeyContext(s,{keyAltNames:n,keyMaterial:i}),a=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:G3(this._client.s.options)}),u=r?.timeoutContext??V3.TimeoutContext.create((0,ga.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,Po.deserialize)(await a.execute(this,o,{timeoutContext:u})),{db:l,collection:d}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:p}=await this._keyVaultClient.db(l).collection(d).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0});return p}async rewrapManyDataKey(e,r){let n;if(r){let f=Object.assign({provider:r.provider},r.masterKey);n=(0,Po.serialize)(f)}let i=(0,Po.serialize)(e),s=this._mongoCrypt.makeRewrapManyDataKeyContext(i,n),o=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:G3(this._client.s.options)}),a=V3.TimeoutContext.create((0,ga.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:u}=(0,Po.deserialize)(await o.execute(this,s,{timeoutContext:a}));if(u.length===0)return{};let{db:c,collection:l}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),d=u.map(f=>({updateOne:{filter:{_id:f._id},update:{$set:{masterKey:f.masterKey,keyMaterial:f.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(l).bulkWrite(d,{writeConcern:{w:"majority"},timeoutMS:a.csotEnabled()?a?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:i}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:i}=ga.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),s=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},s,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:i,masterKey:s,createCollectionOptions:{encryptedFields:{...o},...a}}=n,u=this._timeoutMS!=null?V3.TimeoutContext.create((0,ga.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(o.fields)){let c=o.fields.map(async p=>p==null||typeof p!="object"||p.keyId!=null?p:{...p,keyId:await this.createDataKey(i,{masterKey:s,timeoutContext:u?.csotEnabled()?u?.clone():void 0})}),l=await Promise.allSettled(c);o.fields=l.map((p,f)=>p.status==="fulfilled"?p.value:o.fields[f]);let d=l.find(p=>p.status==="rejected");if(d!=null)throw new G1.MongoCryptCreateDataKeyError(o,{cause:d.reason})}try{return{collection:await e.createCollection(r,{...a,encryptedFields:o,timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:o}}catch(c){throw new G1.MongoCryptCreateEncryptedCollectionError(o,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,Po.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),i=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:G3(this._client.s.options)}),s=this._timeoutMS!=null?V3.TimeoutContext.create((0,ga.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:o}=(0,Po.deserialize)(await i.execute(this,n,{timeoutContext:s}));return o}async askForKMSCredentials(){return await(0,K0e.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:i,keyId:s,keyAltName:o,contentionFactor:a,queryType:u,rangeOptions:c,textOptions:l}=n,d={expressionMode:r,algorithm:i};if(s&&(d.keyId=s.buffer),o){if(s)throw new G1.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof o!="string")throw new G1.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof o}`);d.keyAltName=(0,Po.serialize)({keyAltName:o})}(typeof a=="number"||typeof a=="bigint")&&(d.contentionFactor=a),typeof u=="string"&&(d.queryType=u),typeof c=="object"&&(d.rangeOptions=(0,Po.serialize)(c)),typeof l=="object"&&(d.textOptions=(0,Po.serialize)(l));let p=(0,Po.serialize)({v:e}),f=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:G3(this._client.s.options)}),h=this._mongoCrypt.makeExplicitEncryptionContext(p,d),g=this._timeoutMS!=null?V3.TimeoutContext.create((0,ga.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:_}=(0,Po.deserialize)(await f.execute(this,h,{timeoutContext:g}));return _}};H3.ClientEncryption=jU;function G3(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var U0e=m(e7=>{"use strict";Object.defineProperty(e7,"__esModule",{value:!0});e7.MongocryptdManager=void 0;var d1t=Ne(),ZC=class t{constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof d1t.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};e7.MongocryptdManager=ZC;ZC.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var VU=m(A6=>{"use strict";var W0e;Object.defineProperty(A6,"__esModule",{value:!0});A6.AutoEncrypter=A6.AutoEncryptionLoggerLevel=void 0;var V0e=require("net"),z3=gr(),p1t=yi(),f1t=fl(),$U=Ne(),h1t=H1(),m1t=et(),KU=QC(),y1t=AU(),G0e=S6(),g1t=U0e(),H0e=BU(),z0e=LU();A6.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var UU=class t{static getMongoCrypt(){let e=(0,f1t.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){if(this[W0e]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{},this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,H0e.isEmptyCredentials)("aws",this._kmsProviders))throw new G0e.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let n={enableMultipleCollinfo:!0,cryptoCallbacks:y1t};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,z3.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,z3.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,z3.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),r.keyExpirationMS!=null&&(n.keyExpirationMS=r.keyExpirationMS),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let i=t.getMongoCrypt();if(this._mongocrypt=new i(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new G0e.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new g1t.MongocryptdManager(r.extraOptions);let s={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!V0e.getDefaultAutoSelectFamily&&(s.family=4),V0e.getDefaultAutoSelectFamily&&Object.assign(s,(0,KU.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new h1t.MongoClient(this._mongocryptdManager.uri,s)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new $U.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new $U.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){throw new $U.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e})}}}async close(){await this._mongocryptdClient?.close()}async encrypt(e,r,n={}){if(n.signal?.throwIfAborted(),this._bypassEncryption)return r;let i=Buffer.isBuffer(r)?r:(0,z3.serialize)(r,n),s=this._mongocrypt.makeEncryptionContext(m1t.MongoDBCollectionNamespace.fromString(e).db,i);s.id=this._contextCounter++,s.ns=e,s.document=r;let o=new z0e.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,KU.autoSelectSocketOptions)(this._client.s.options)});return(0,z3.deserialize)(await o.execute(this,s,n),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){r.signal?.throwIfAborted();let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new z0e.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,KU.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r)}async askForKMSCredentials(){return await(0,H0e.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};A6.AutoEncrypter=UU;W0e=p1t.kDecorateResult});var Y0e=m(t7=>{"use strict";Object.defineProperty(t7,"__esModule",{value:!0});t7.Encrypter=void 0;var E1t=VU(),b1t=yi(),_1t=fl(),J0e=Ne(),v1t=H1(),GU=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new J0e.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this.internalClient=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new E1t.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let i=this.internalClient;if(i==null){let s={};for(let o of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(o)||Reflect.set(s,o,Reflect.get(n,o));s.minPoolSize=0,i=new v1t.MongoClient(r,s),this.internalClient=i;for(let o of b1t.MONGO_CLIENT_EVENTS)for(let a of e.listeners(o))i.on(o,a);e.on("newListener",(o,a)=>{i?.on(o,a)}),this.needsConnecting=!0}return i}async connectInternalClient(){let e=this.internalClient;this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}async close(e){let r;try{await this.autoEncrypter.close()}catch(i){r=i}let n=this.internalClient;if(n!=null&&e!==n)return await n.close();if(r!=null)throw r}static checkForMongoCrypt(){let e=(0,_1t.getMongoDBClientEncryption)();if("kModuleError"in e)throw new J0e.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};t7.Encrypter=GU});var HU=m(r7=>{"use strict";Object.defineProperty(r7,"__esModule",{value:!0});r7.ConnectionPoolMetrics=void 0;var C6=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};r7.ConnectionPoolMetrics=C6;C6.TXN="txn";C6.CURSOR="cursor";C6.OTHER="other"});var WU=m($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.Transaction=$t.TxnState=void 0;$t.isTransactionCommand=x1t;var Q0e=Ne(),S1t=nl(),w1t=cs(),A1t=Io();$t.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var C1t={[$t.TxnState.NO_TRANSACTION]:[$t.TxnState.NO_TRANSACTION,$t.TxnState.STARTING_TRANSACTION],[$t.TxnState.STARTING_TRANSACTION]:[$t.TxnState.TRANSACTION_IN_PROGRESS,$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.TRANSACTION_ABORTED],[$t.TxnState.TRANSACTION_IN_PROGRESS]:[$t.TxnState.TRANSACTION_IN_PROGRESS,$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_ABORTED],[$t.TxnState.TRANSACTION_COMMITTED]:[$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.STARTING_TRANSACTION,$t.TxnState.NO_TRANSACTION],[$t.TxnState.TRANSACTION_ABORTED]:[$t.TxnState.STARTING_TRANSACTION,$t.TxnState.NO_TRANSACTION],[$t.TxnState.TRANSACTION_COMMITTED_EMPTY]:[$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.NO_TRANSACTION]},T1t=new Set([$t.TxnState.STARTING_TRANSACTION,$t.TxnState.TRANSACTION_IN_PROGRESS]),O1t=new Set([$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.TRANSACTION_ABORTED]),zU=class{constructor(e){e=e??{},this.state=$t.TxnState.NO_TRANSACTION,this.options={};let r=A1t.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new Q0e.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=S1t.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=w1t.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===$t.TxnState.STARTING_TRANSACTION}get isActive(){return T1t.has(this.state)}get isCommitted(){return O1t.has(this.state)}transition(e){let r=C1t[this.state];if(r&&r.includes(e)){this.state=e,(this.state===$t.TxnState.NO_TRANSACTION||this.state===$t.TxnState.STARTING_TRANSACTION||this.state===$t.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new Q0e.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};$t.Transaction=zU;function x1t(t){return!!(t.commitTransaction||t.abortTransaction)}});var O6=m(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.ServerSessionPool=gl.ServerSession=gl.ClientSession=void 0;gl.maybeClearPinnedConnection=s7;gl.applySession=M1t;gl.updateSessionFromResponse=P1t;var i7=gr(),o7=HU(),eye=yi(),Ct=Ne(),I1t=Qa(),n7=ls(),JU=y3(),R1t=nl(),YU=cs(),D1t=x6(),XU=Wa(),QU=$i(),zr=WU(),Ns=et(),T6=Io(),a7=class t extends I1t.TypedEventEmitter{constructor(e,r,n,i){if(super(),this.timeoutContext=null,this.on("error",Ns.noop),e==null)throw new Ct.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof u7))throw new Ct.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},this.snapshotEnabled=n.snapshot===!0,n.causalConsistency===!0&&this.snapshotEnabled)throw new Ct.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=i,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let s=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??s},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new zr.Transaction}get id(){return this.serverSession?.id}get serverSession(){let e=this._serverSession;if(e==null){if(this.explicit)throw new Ct.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new Ct.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this._serverSession=e}return e}get loadBalanced(){return this.client.topology?.description.type===XU.TopologyType.LoadBalanced}pin(e){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=e,e.emit(eye.PINNED,this.inTransaction()?o7.ConnectionPoolMetrics.TXN:o7.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return s7(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,Ns.squashError)(r)}finally{if(!this.hasEnded){let r=this.serverSession;r!=null&&(this.sessionPool.release(r),this._serverSession=new W3(r)),this.hasEnded=!0,this.emit("ended",this)}s7(this,{force:!0,...e})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new Ct.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new Ct.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new Ct.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,XU._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:Ns.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this.snapshotEnabled)throw new Ct.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new Ct.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin(),this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new zr.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(zr.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===zr.TxnState.NO_TRANSACTION)throw new Ct.MongoTransactionError("No transaction started");if(this.transaction.state===zr.TxnState.STARTING_TRANSACTION||this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(zr.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===zr.TxnState.TRANSACTION_ABORTED)throw new Ct.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(i!=null)if(n==null&&this.timeoutContext==null)T6.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i});else{let a=Object.keys(i);(a.length>2||!a.includes("wtimeoutMS")&&!a.includes("wTimeoutMS"))&&T6.WriteConcern.apply(r,{...i,wtimeoutMS:void 0})}(this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?T6.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}):T6.WriteConcern.apply(r,{w:"majority",...i,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let s=new JU.RunCommandOperation(new Ns.MongoDBNamespace("admin"),r,{session:this,readPreference:YU.ReadPreference.primary,bypassPinningCheck:!0}),o=this.timeoutContext??(typeof n=="number"?QU.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,n7.executeOperation)(this.client,s,o),this.commitAttempted=void 0;return}catch(a){if(this.commitAttempted=!0,a instanceof Ct.MongoError&&(0,Ct.isRetryableWriteError)(a)){T6.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}),this.unpin({force:!0});try{await(0,n7.executeOperation)(this.client,new JU.RunCommandOperation(new Ns.MongoDBNamespace("admin"),r,{session:this,readPreference:YU.ReadPreference.primary,bypassPinningCheck:!0}),o);return}catch(u){throw Z0e(u)&&u.addErrorLabel(Ct.MongoErrorLabel.UnknownTransactionCommitResult),X0e(u)&&this.unpin({error:u}),u}}throw Z0e(a)&&a.addErrorLabel(Ct.MongoErrorLabel.UnknownTransactionCommitResult),X0e(a)&&this.unpin({error:a}),a}finally{this.transaction.transition(zr.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===zr.TxnState.NO_TRANSACTION)throw new Ct.MongoTransactionError("No transaction started");if(this.transaction.state===zr.TxnState.STARTING_TRANSACTION){this.transaction.transition(zr.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===zr.TxnState.TRANSACTION_ABORTED)throw new Ct.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED||this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new Ct.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=n!=null?QU.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,s=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;s!=null&&n==null&&T6.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...s}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let o=new JU.RunCommandOperation(new Ns.MongoDBNamespace("admin"),r,{session:this,readPreference:YU.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,n7.executeOperation)(this.client,o,i),this.unpin();return}catch(a){if(this.unpin(),a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a;if(a instanceof Ct.MongoError&&(0,Ct.isRetryableWriteError)(a))try{await(0,n7.executeOperation)(this.client,o,i);return}catch(u){if(u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u}}finally{this.transaction.transition(zr.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&s7(this,{force:!1})}}toBSON(){throw new Ct.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let i=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=i!=null?QU.TimeoutContext.create({timeoutMS:i,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let s=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,Ns.now)(),o=!1,a;try{for(;!o;){this.startTransaction(r);try{let u=e(this);if(!(0,Ns.isPromiseLike)(u))throw new Ct.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(a=await u,this.transaction.state===zr.TxnState.NO_TRANSACTION||this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED||this.transaction.state===zr.TxnState.TRANSACTION_ABORTED)return a}catch(u){if(!(u instanceof Ct.MongoError)||u instanceof Ct.MongoInvalidArgumentError)throw await this.abortTransaction(),u;if((this.transaction.state===zr.TxnState.STARTING_TRANSACTION||this.transaction.state===zr.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),u.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Ns.now)()-s<12e4))continue;throw u}for(;!o;)try{await this.commitTransaction(),o=!0}catch(u){if(!c7(u)&&u.hasErrorLabel(Ct.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,Ns.now)()-s<12e4))continue;if(u.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Ns.now)()-s<12e4))break;throw u}}return a}finally{this.timeoutContext=null}}};gl.ClientSession=a7;(0,D1t.configureResourceManagement)(a7.prototype);var k1t=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function X0e(t){if(t instanceof Ct.MongoError){if((0,Ct.isRetryableWriteError)(t)||t instanceof Ct.MongoWriteConcernError||c7(t)){if(tye(t))return!0}else if(t.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError))return!0}return!1}function Z0e(t){let e=(0,Ct.isRetryableWriteError)(t);return e||=t instanceof Ct.MongoWriteConcernError,e||=c7(t),e&&=tye(t),e}function tye(t){let e=t instanceof Ct.MongoServerError&&t.codeName&&k1t.has(t.codeName);return c7(t)||!e&&t.code!==Ct.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==Ct.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function s7(t,e){let r=t.pinnedConnection,n=e?.error;if(t.inTransaction()&&n&&n instanceof Ct.MongoError&&n.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError))return;let i=t.client.topology;if(r&&i!=null){let o=Array.from(i.s.servers.values())[0];(e?.error==null||e?.force)&&(o.pool.checkIn(r),t.pinnedConnection=void 0,r.emit(eye.UNPINNED,t.transaction.state!==zr.TxnState.NO_TRANSACTION?o7.ConnectionPoolMetrics.TXN:o7.ConnectionPoolMetrics.CURSOR),e?.forceClear&&o.pool.clear({serviceId:r.serviceId}))}}function c7(t){return t==null||!(t instanceof Ct.MongoServerError)?!1:t.code===Ct.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===Ct.MONGODB_ERROR_CODES.MaxTimeMSExpired}var W3=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new i7.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new i7.Binary((0,Ns.uuidV4)(),i7.Binary.SUBTYPE_UUID)},this.lastUse=(0,Ns.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,Ns.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};gl.ServerSession=W3;var u7=class{constructor(e){if(e==null)throw new Ct.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new Ns.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new W3),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};gl.ServerSessionPool=u7;function M1t(t,e,r){if(t.hasEnded)return new Ct.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new Ct.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new Ct.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,Ns.now)(),e.lsid=n.id;let i=t.inTransaction()||(0,zr.isTransactionCommand)(e);if((r.willRetryWrite||i)&&(n.txnNumber+=t.txnNumberIncrement,t.txnNumberIncrement=0,e.txnNumber=i7.Long.fromNumber(n.txnNumber)),!i){t.transaction.state!==zr.TxnState.NO_TRANSACTION&&t.transaction.transition(zr.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,Ns.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t.snapshotEnabled&&(e.readConcern=e.readConcern||{level:R1t.ReadConcernLevel.snapshot},t.snapshotTime!=null&&Object.assign(e.readConcern,{atClusterTime:t.snapshotTime}));return}if(e.autocommit=!1,t.transaction.state===zr.TxnState.STARTING_TRANSACTION){t.transaction.transition(zr.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let o=t.transaction.options.readConcern||t?.clientOptions?.readConcern;o&&(e.readConcern=o),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function P1t(t,e){if(e.$clusterTime&&(0,XU._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.snapshotEnabled&&t.snapshotTime==null){let r=e.atClusterTime;r&&(t.snapshotTime=r)}}});var aV=m(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.SENSITIVE_COMMANDS=Xu.CommandFailedEvent=Xu.CommandSucceededEvent=Xu.CommandStartedEvent=void 0;var J3=yi(),iye=et(),ZU=q3(),eV=class{constructor(e,r,n){this.name=J3.COMMAND_STARTED;let i=sV(r),s=nV(i),{address:o,connectionId:a,serviceId:u}=oV(e);Xu.SENSITIVE_COMMANDS.has(s)&&(this.commandObj={},this.commandObj[s]=!0),this.address=o,this.connectionId=a,this.serviceId=u,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=s,this.command=iV(s,i,i),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};Xu.CommandStartedEvent=eV;var tV=class{constructor(e,r,n,i,s){this.name=J3.COMMAND_SUCCEEDED;let o=sV(r),a=nV(o),{address:u,connectionId:c,serviceId:l}=oV(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,iye.calculateDurationInMs)(i),this.reply=iV(a,o,B1t(n)),this.serverConnectionId=s,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};Xu.CommandSucceededEvent=tV;var rV=class{constructor(e,r,n,i,s){this.name=J3.COMMAND_FAILED;let o=sV(r),a=nV(o),{address:u,connectionId:c,serviceId:l}=oV(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,iye.calculateDurationInMs)(i),this.failure=iV(a,o,n),this.serverConnectionId=s,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};Xu.CommandFailedEvent=rV;Xu.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var N1t=new Set(["hello",J3.LEGACY_HELLO_COMMAND,J3.LEGACY_HELLO_COMMAND_CAMEL_CASE]),nV=t=>Object.keys(t)[0],F1t=t=>t.ns.split(".")[1],iV=(t,e,r)=>Xu.SENSITIVE_COMMANDS.has(t)||N1t.has(t)&&e.speculativeAuthenticate?{}:r,rye={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},nye={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function sV(t){if(t instanceof ZU.OpMsgRequest){let n={...t.command};return n.ops instanceof ZU.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof ZU.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:F1t(t)},Object.keys(rye).forEach(i=>{t.query[i]!=null&&(n[rye[i]]={...t.query[i]})})),Object.keys(nye).forEach(i=>{let s=i;t[s]!=null&&(n[nye[s]]=t[s])}),n}let e={},r={...t};return t.query&&(e={...t.query},r.query=e),t.query?e:r}function B1t(t){return t&&(t.result?t.result:t)}function oV(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var Y3=m(D6=>{"use strict";Object.defineProperty(D6,"__esModule",{value:!0});D6.ServerDescription=void 0;D6.parseServerType=sye;D6.compareTopologyVersion=oye;var I6=gr(),q1t=Ne(),R6=et(),Di=Wa(),L1t=new Set([Di.ServerType.RSPrimary,Di.ServerType.Standalone,Di.ServerType.Mongos,Di.ServerType.LoadBalancer]),j1t=new Set([Di.ServerType.RSPrimary,Di.ServerType.RSSecondary,Di.ServerType.Mongos,Di.ServerType.Standalone,Di.ServerType.LoadBalancer]),uV=class{constructor(e,r,n={}){if(e==null||e==="")throw new q1t.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?R6.HostAddress.fromString(e).toString():e.toString(),this.type=sye(r,n),this.hosts=r?.hosts?.map(i=>i.toLowerCase())??[],this.passives=r?.passives?.map(i=>i.toLowerCase())??[],this.arbiters=r?.arbiters?.map(i=>i.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,R6.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return R6.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===Di.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return j1t.has(this.type)}get isWritable(){return L1t.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||oye(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,R6.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,R6.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,R6.arrayStrictEqual)(this.hosts,e.hosts)&&$1t(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};D6.ServerDescription=uV;function sye(t,e){return e?.loadBalanced?Di.ServerType.LoadBalancer:!t||!t.ok?Di.ServerType.Unknown:t.isreplicaset?Di.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?Di.ServerType.Mongos:t.setName?t.hidden?Di.ServerType.RSOther:t.isWritablePrimary?Di.ServerType.RSPrimary:t.secondary?Di.ServerType.RSSecondary:t.arbiterOnly?Di.ServerType.RSArbiter:Di.ServerType.RSOther:Di.ServerType.Standalone}function $1t(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(i=>e[i]===t[i])}function oye(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?I6.Long.fromBigInt(t.counter):I6.Long.isLong(t.counter)?t.counter:I6.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?I6.Long.fromBigInt(e.counter):I6.Long.isLong(e.counter)?e.counter:I6.Long.fromNumber(e.counter);return r.compare(n)}});var aye=m(l7=>{"use strict";Object.defineProperty(l7,"__esModule",{value:!0});l7.StreamDescription=void 0;var K1t=gr(),U1t=Wa(),V1t=Y3(),G1t=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],cV=class{constructor(e,r){this.hello=null,this.address=e,this.type=U1t.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,V1t.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of G1t)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return K1t.Long.isLong(e)?e.toBigInt():BigInt(e)}};l7.StreamDescription=cV});var uye=m(lV=>{"use strict";Object.defineProperty(lV,"__esModule",{value:!0});lV.onData=H1t;var Q3=et();function H1t(t,{timeoutContext:e,signal:r}){r?.throwIfAborted();let n=new Q3.List,i=new Q3.List,s=null,o=!1,a={next(){let f=n.shift();if(f!=null)return Promise.resolve({value:f,done:!1});if(s!=null){let S=Promise.reject(s);return s=null,S}if(o)return p();let{promise:h,resolve:g,reject:_}=(0,Q3.promiseWithResolvers)();return i.push({resolve:g,reject:_}),h},return(){return p()},throw(f){return d(f),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await p()}};t.on("data",l),t.on("error",d);let u=(0,Q3.addAbortListener)(r,function(){d(this.reason)}),c=e?.timeoutForSocketRead;return c?.throwIfExpired(),c?.then(void 0,d),a;function l(f){let h=i.shift();h!=null?h.resolve({value:f,done:!1}):n.push(f)}function d(f){let h=i.shift();h!=null?h.reject(f):s=f,p()}function p(){t.off("data",l),t.off("error",d),u?.[Q3.kDispose](),o=!0,c?.clear();let f={value:void 0,done:o};for(let h of i)h.resolve(f);return Promise.resolve(f)}}});var fV=m(f7=>{"use strict";Object.defineProperty(f7,"__esModule",{value:!0});f7.TopologyDescription=void 0;var z1t=gr(),p7=S1(),d7=Ne(),dV=et(),fr=Wa(),z1=Y3(),W1t=p7.MIN_SUPPORTED_SERVER_VERSION,J1t=p7.MAX_SUPPORTED_SERVER_VERSION,cye=p7.MIN_SUPPORTED_WIRE_VERSION,lye=p7.MAX_SUPPORTED_WIRE_VERSION,Y1t=new Set([fr.ServerType.Mongos,fr.ServerType.Unknown]),dye=new Set([fr.ServerType.Mongos,fr.ServerType.Standalone]),pye=new Set([fr.ServerType.RSSecondary,fr.ServerType.RSArbiter,fr.ServerType.RSOther]),pV=class t{constructor(e,r=null,n=null,i=null,s=null,o=null,a=null){a=a??{},this.type=e??fr.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=a.heartbeatFrequencyMS??0,this.localThresholdMS=a.localThresholdMS??15,this.setName=n??null,this.maxElectionId=s??null,this.maxSetVersion=i??null,this.commonWireVersion=o??0;for(let u of this.servers.values())if(!(u.type===fr.ServerType.Unknown||u.type===fr.ServerType.LoadBalancer)&&(u.minWireVersion>lye&&(this.compatible=!1,this.compatibilityError=`Server at ${u.address} requires wire version ${u.minWireVersion}, but this version of the driver only supports up to ${lye} (MongoDB ${J1t})`),u.maxWireVersion<cye)){this.compatible=!1,this.compatibilityError=`Server at ${u.address} reports wire version ${u.maxWireVersion}, but this version of the driver requires at least ${cye} (MongoDB ${W1t}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,u]of this.servers)if(u.isReadable){if(u.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=u.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,u.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),i=new Set(this.servers.keys()),s=new Set(n),o=new Set;for(let u of i)s.delete(u),n.has(u)||o.add(u);if(s.size===0&&o.size===0)return this;let a=new Map(this.servers);for(let u of o)a.delete(u);if(s.size>0){if(r===0)for(let u of s)a.set(u,new z1.ServerDescription(u));else if(a.size<r){let u=(0,dV.shuffle)(s,r-a.size);for(let c of u)a.set(c,new z1.ServerDescription(c))}}return new t(this.type,a,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:i,maxSetVersion:s,maxElectionId:o,commonWireVersion:a}=this,u=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(a==null?a=e.maxWireVersion:a=Math.min(a,e.maxWireVersion)),typeof e.setName=="string"&&typeof i=="string"&&e.setName!==i&&(n===fr.TopologyType.Single?e=new z1.ServerDescription(r):c.delete(r)),c.set(r,e),n===fr.TopologyType.Single)return new t(fr.TopologyType.Single,c,i,s,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===fr.TopologyType.Unknown&&(u===fr.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=Q1t(u)),n===fr.TopologyType.Sharded&&(Y1t.has(u)||c.delete(r)),n===fr.TopologyType.ReplicaSetNoPrimary){if(dye.has(u)&&c.delete(r),u===fr.ServerType.RSPrimary){let l=fye(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else if(pye.has(u)){let l=Z1t(c,e,i);n=l[0],i=l[1]}}if(n===fr.TopologyType.ReplicaSetWithPrimary)if(dye.has(u))c.delete(r),n=w0(c);else if(u===fr.ServerType.RSPrimary){let l=fye(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else pye.has(u)?n=X1t(c,e,i):n=w0(c);return new t(n,c,i,s,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==fr.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return z1t.EJSON.serialize(this)}};f7.TopologyDescription=pV;function Q1t(t){switch(t){case fr.ServerType.Standalone:return fr.TopologyType.Single;case fr.ServerType.Mongos:return fr.TopologyType.Sharded;case fr.ServerType.RSPrimary:return fr.TopologyType.ReplicaSetWithPrimary;case fr.ServerType.RSOther:case fr.ServerType.RSSecondary:return fr.TopologyType.ReplicaSetNoPrimary;default:return fr.TopologyType.Unknown}}function fye(t,e,r=null,n=null,i=null){let s=(u,c,l)=>`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${u.setVersion}, server electionId: ${u.electionId}, topology setVersion: ${c}, topology electionId: ${l}`;if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[w0(t),r,n,i];if(e.maxWireVersion>=17){let u=(0,dV.compareObjectId)(i,e.electionId),c=u===0,l=u===-1,d=(n??-1)<=(e.setVersion??-1);if(l||c&&d)i=e.electionId,n=e.setVersion;else return t.set(e.address,new z1.ServerDescription(e.address,void 0,{error:new d7.MongoStalePrimaryError(s(e,n,i))})),[w0(t),r,n,i]}else{let u=e.electionId?e.electionId:null;if(e.setVersion&&u){if(n&&i&&(n>e.setVersion||(0,dV.compareObjectId)(i,u)>0))return t.set(e.address,new z1.ServerDescription(e.address,void 0,{error:new d7.MongoStalePrimaryError(s(e,n,i))})),[w0(t),r,n,i];i=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[u,c]of t)if(c.type===fr.ServerType.RSPrimary&&c.address!==e.address){t.set(u,new z1.ServerDescription(c.address,void 0,{error:new d7.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}e.allHosts.forEach(u=>{t.has(u)||t.set(u,new z1.ServerDescription(u))});let o=Array.from(t.keys()),a=e.allHosts;return o.filter(u=>a.indexOf(u)===-1).forEach(u=>{t.delete(u)}),[w0(t),r,n,i]}function X1t(t,e,r=null){if(r==null)throw new d7.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),w0(t)}function Z1t(t,e,r=null){let n=fr.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(i=>{t.has(i)||t.set(i,new z1.ServerDescription(i))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function w0(t){for(let e of t.values())if(e.type===fr.ServerType.RSPrimary)return fr.TopologyType.ReplicaSetWithPrimary;return fr.TopologyType.ReplicaSetNoPrimary}});var mye=m(h7=>{"use strict";Object.defineProperty(h7,"__esModule",{value:!0});h7.getReadPreference=rht;h7.isSharded=nht;var eht=Ne(),hV=cs(),hye=Wa(),tht=fV();function rht(t){let e=t?.readPreference??hV.ReadPreference.primary;if(typeof e=="string"&&(e=hV.ReadPreference.fromString(e)),!(e instanceof hV.ReadPreference))throw new eht.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function nht(t){return t==null?!1:t.description&&t.description.type===hye.ServerType.Mongos?!0:t.description&&t.description instanceof tht.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===hye.ServerType.Mongos):!1}});var g7=m(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.CryptoConnection=Fp.SizedMessageTransform=Fp.Connection=void 0;Fp.hasSessionSupport=pht;var iht=require("stream"),bye=require("timers"),sht=gr(),W1=yi(),$n=Ne(),yye=O1(),oht=Qa(),aht=cs(),uht=Wa(),gye=O6(),Eye=$i(),Za=et(),mV=aV(),m7=q3(),cht=aye(),lht=L3(),dht=uye(),X3=kr(),yV=mye();function pht(t){return t.description.logicalSessionTimeoutMinutes!=null}function fht(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?Za.HostAddress.fromHostPort(r,n).toString():(0,Za.uuidV4)().toString("hex")}var El=class t extends oht.TypedEventEmitter{constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",Za.noop),this.socket=e,this.id=r.id,this.address=fht(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new cht.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,Za.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new y7({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,Za.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,Za.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(yye.MongoLoggableComponent.COMMAND,yye.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,Za.now)()}onSocketError(e){this.onError(new $n.MongoNetworkError(e.message,{cause:e}))}onTransformError(e){this.onError(e)}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new $n.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,bye.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new $n.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new $n.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,Za.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let i={...r},s=(0,yV.getReadPreference)(n),o=n?.session,a=this.clusterTime;if(this.serverApi){let{version:l,strict:d,deprecationErrors:p}=this.serverApi;i.apiVersion=l,d!=null&&(i.apiStrict=d),p!=null&&(i.apiDeprecationErrors=p)}if(this.hasSessionSupport&&o){o.clusterTime&&a&&o.clusterTime.clusterTime.greaterThan(a.clusterTime)&&(a=o.clusterTime);let l=(0,gye.applySession)(o,i,n);if(l)throw l}else if(o?.explicit)throw new $n.MongoCompatibilityError("Current topology does not support sessions");a&&(i.$clusterTime=a),this.description.type!==uht.ServerType.Standalone&&(!(0,yV.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&s?.mode==="primary"?i.$readPreference=aht.ReadPreference.primaryPreferred.toJSON():(0,yV.isSharded)(this)&&!this.supportsOpMsg&&s?.mode!=="primary"?i={$query:i,$readPreference:s.toJSON()}:s?.mode!=="primary"&&(i.$readPreference=s.toJSON()));let u={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:s.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(i,n),this.supportsOpMsg?new m7.OpMsgRequest(e,i,u):new m7.OpQueryRequest(e,i,u)}async*sendWire(e,r,n){this.throwIfAborted();let i=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(i);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext,signal:r.signal}),r.noResponse||e.moreToCome){yield X3.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new $n.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let s of this.readMany(r)){this.socket.setTimeout(0);let o=s.parse();yield(n??X3.MongoDBResponse).make(o),this.throwIfAborted(),this.socket.setTimeout(i)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,i){n?.signal?.throwIfAborted();let s=this.prepareCommand(e.db,r,n),o=0;this.shouldEmitAndLogCommand&&(o=(0,Za.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,s.databaseName,this.established,new mV.CommandStartedEvent(this,s,this.description.serverConnectionId)));let a=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},u,c;try{this.throwIfAborted();for await(u of this.sendWire(s,n,i)){if(c=void 0,n.session!=null&&(0,gye.updateSessionFromResponse)(n.session,u),u.$clusterTime&&(this.clusterTime=u.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,u.$clusterTime)),u.ok===0)throw n.timeoutContext?.csotEnabled()&&u.isMaxTimeExpiredError?new $n.MongoOperationTimeoutError("Server reported a timeout error",{cause:new $n.MongoServerError(c??=u.toObject(a))}):new $n.MongoServerError(c??=u.toObject(a));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,s.databaseName,this.established,new mV.CommandSucceededEvent(this,s,n.noResponse?void 0:s.moreToCome?{ok:1}:c??=u.toObject(a),o,this.description.serverConnectionId)),i==null?yield c??=u.toObject(a):yield u,this.throwIfAborted()}}catch(l){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,s.databaseName,this.established,new mV.CommandFailedEvent(this,s,l,o,this.description.serverConnectionId)),l}}async command(e,r,n={},i){this.throwIfAborted(),n.signal?.throwIfAborted();for await(let s of this.sendCommand(e,r,n,i)){if(n.timeoutContext?.csotEnabled()){if(X3.MongoDBResponse.is(s)){if(s.isMaxTimeExpiredError)throw new $n.MongoOperationTimeoutError("Server reported a timeout error",{cause:new $n.MongoServerError(s.toObject())})}else if(Array.isArray(s?.writeErrors)&&s.writeErrors.some(o=>o?.code===$n.MONGODB_ERROR_CODES.MaxTimeMSExpired)||s?.writeConcernError?.code===$n.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new $n.MongoOperationTimeoutError("Server reported a timeout error",{cause:new $n.MongoServerError(s)})}return s}throw new $n.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,i){(async()=>{this.throwIfAborted();for await(let o of this.sendCommand(e,r,n))i(void 0,o),this.throwIfAborted();throw new $n.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,i)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!m7.OpCompressedRequest.canCompress(e)?e:new m7.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),i=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new $n.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");if(this.socket.write(i))return;let s=(0,Za.once)(this.socket,"drain",r),o=r?.timeoutContext?.timeoutForSocketWrite,a=o?Promise.race([s,o]):s;try{return await a}catch(u){if(Eye.TimeoutError.is(u)){let c=new $n.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(c),c}else u===r.signal?.reason&&this.onError(u);throw u}finally{o?.clear()}}async*readMany(e){try{this.dataEvents=(0,dht.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,lht.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){if(Eye.TimeoutError.is(r)){let n=new $n.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(n),n}else r===e.signal?.reason&&this.onError(r);throw r}finally{this.dataEvents=null,this.messageStream.pause()}}};Fp.Connection=El;El.COMMAND_STARTED=W1.COMMAND_STARTED;El.COMMAND_SUCCEEDED=W1.COMMAND_SUCCEEDED;El.COMMAND_FAILED=W1.COMMAND_FAILED;El.CLUSTER_TIME_RECEIVED=W1.CLUSTER_TIME_RECEIVED;El.CLOSE=W1.CLOSE;El.PINNED=W1.PINNED;El.UNPINNED=W1.UNPINNED;var y7=class extends iht.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new Za.BufferPool,this.connection=e}_transform(e,r,n){for(this.connection.delayedTimeoutId!=null&&((0,bye.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);this.bufferPool.length;){let i=this.bufferPool.getInt32();if(i==null)break;if(i<0)return n(new $n.MongoParseError(`Message size cannot be negative: ${i}`));if(i>this.bufferPool.length)break;let s=this.bufferPool.read(i);if(!this.push(s))return n(new $n.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}n()}};Fp.SizedMessageTransform=y7;var gV=class extends El{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,i){let{autoEncrypter:s}=this;if(!s)throw new $n.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});if((0,Za.maxWireVersion)(this)===0)return await super.command(e,r,n,i);let a=r.find||r.findAndModify?r.sort:null,u=r.createIndexes?r.indexes.map(f=>f.key):null,c=await s.encrypt(e.toString(),r,n);if(a!=null&&(r.find||r.findAndModify)&&(c.sort=a),u!=null&&r.createIndexes)for(let[f,h]of u.entries())c.indexes[f].key=h;let l=await super.command(e,c,n,i??X3.MongoDBResponse),d=await s.decrypt(l.toBytes(),n),p=i?.make(d)??(0,sht.deserialize)(d,n);return s[W1.kDecorateResult]&&(i==null?(0,Za.decorateDecryptionResult)(p,l.toObject(),!0):p instanceof X3.CursorResponse&&(p.encryptedResponse=l)),p}};Fp.CryptoConnection=gV});var _V=m(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.LEGAL_TCP_SOCKET_OPTIONS=eu.LEGAL_TLS_SOCKET_OPTIONS=void 0;eu.connect=ght;eu.makeConnection=wye;eu.performInitialHandshake=Aye;eu.prepareHandshakeDocument=Cye;eu.makeSocket=b7;var vye=require("net"),hht=require("tls"),Sye=yi(),mht=fl(),Kn=Ne(),EV=et(),yht=N1(),E7=Ed(),_ye=g7(),k6=S1();async function ght(t){let e=null;try{let r=await b7(t);return e=wye(t,r),await Aye(e,t),e}catch(r){throw e?.destroy(),r}}function wye(t,e){let r=t.connectionType??_ye.Connection;return t.autoEncrypter&&(r=_ye.CryptoConnection),new r(e,t)}function Eht(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),i=!Number.isNaN(r)&&r>=k6.MIN_SUPPORTED_WIRE_VERSION,s=!Number.isNaN(n)&&n<=k6.MAX_SUPPORTED_WIRE_VERSION;if(i){if(s)return null;let a=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${k6.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${k6.MAX_SUPPORTED_SERVER_VERSION})`;return new Kn.MongoCompatibilityError(a)}let o=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${k6.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${k6.MIN_SUPPORTED_SERVER_VERSION})`;return new Kn.MongoCompatibilityError(o)}async function Aye(t,e){let r=e.credentials;if(r&&r.mechanism!==E7.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new Kn.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new yht.AuthContext(t,r,e);t.authContext=n;let i=await Cye(n),s={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(s.socketTimeoutMS=e.connectTimeoutMS);let o=new Date().getTime(),a=await c(i,s);"isWritablePrimary"in a||(a.isWritablePrimary=a[Sye.LEGACY_HELLO_COMMAND]),a.helloOk&&(t.helloOk=!0);let u=Eht(a,e);if(u)throw u;if(e.loadBalanced&&!a.serviceId)throw new Kn.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=a,t.lastHelloMS=new Date().getTime()-o,!a.arbiterOnly&&r){n.response=a;let l=r.resolveAuthMechanism(a),d=e.authProviders.getOrCreateProvider(l.mechanism,l.mechanismProperties);if(!d)throw new Kn.MongoInvalidArgumentError(`No AuthProvider for ${l.mechanism} defined.`);try{await d.auth(n)}catch(p){throw p instanceof Kn.MongoError&&(p.addErrorLabel(Kn.MongoErrorLabel.HandshakeError),(0,Kn.needsRetryableWriteLabel)(p,a.maxWireVersion,t.description.type)&&p.addErrorLabel(Kn.MongoErrorLabel.RetryableWriteError)),p}}t.established=!0;async function c(l,d){try{return await t.command((0,EV.ns)("admin.$cmd"),l,d)}catch(p){throw p instanceof Kn.MongoError&&p.addErrorLabel(Kn.MongoErrorLabel.HandshakeError),p}}}async function Cye(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,i=await e.extendedMetadata,s={[n?.version||e.loadBalanced===!0?"hello":Sye.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:i,compression:r};e.loadBalanced===!0&&(s.loadBalanced=!0);let o=t.credentials;if(o){if(o.mechanism===E7.AuthMechanism.MONGODB_DEFAULT&&o.username){s.saslSupportedMechs=`${o.source}.${o.username}`;let u=t.options.authProviders.getOrCreateProvider(E7.AuthMechanism.MONGODB_SCRAM_SHA256,o.mechanismProperties);if(!u)throw new Kn.MongoInvalidArgumentError(`No AuthProvider for ${E7.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await u.prepare(s,t)}let a=t.options.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!a)throw new Kn.MongoInvalidArgumentError(`No AuthProvider for ${o.mechanism} defined.`);return await a.prepare(s,t)}return s}eu.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];eu.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function bV(t){let e=t.hostAddress;if(!e)throw new Kn.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of eu.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(r.keepAliveInitialDelay??=12e4,r.keepAlive=!0,r.noDelay=t.noDelay??!0,typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new Kn.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function bht(t){let e=bV(t);for(let r of eu.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!vye.isIP(e.host)&&(e.servername=e.host),e}async function b7(t){let e=t.tls??!1,r=t.connectTimeoutMS??3e4,n=t.existingSocket,i;if(t.proxyHost!=null)return await vht({...t,connectTimeoutMS:r});if(e){let c=hht.connect(bht(t));typeof c.disableRenegotiation=="function"&&c.disableRenegotiation(),i=c}else n?i=n:i=vye.createConnection(bV(t));i.setTimeout(r);let s=null,{promise:o,resolve:a,reject:u}=(0,EV.promiseWithResolvers)();if(n)a(i);else{let c=performance.now(),l=e?"secureConnect":"connect";i.once(l,()=>a(i)).once("error",d=>u(new Kn.MongoNetworkError(Kn.MongoError.buildErrorMessage(d),{cause:d}))).once("timeout",()=>{u(new Kn.MongoNetworkTimeoutError(`Socket '${l}' timed out after ${performance.now()-c|0}ms (connectTimeoutMS: ${r})`))}).once("close",()=>u(new Kn.MongoNetworkError(`Socket closed after ${performance.now()-c|0} during connection establishment`))),t.cancellationToken!=null&&(s=()=>u(new Kn.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-c|0}`)),t.cancellationToken.once("cancel",s))}try{return i=await o,i}catch(c){throw i.destroy(),c}finally{i.setTimeout(0),s!=null&&t.cancellationToken?.removeListener("cancel",s)}}var Z3=null;function _ht(){if(Z3==null){let t=(0,mht.getSocks)();if("kModuleError"in t)throw t.kModuleError;Z3=t}return Z3}async function vht(t){let e=EV.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await b7({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=bV(t);if(typeof n.host!="string"||typeof n.port!="number")throw new Kn.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");Z3??=_ht();let i;try{i=(await Z3.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(s){throw new Kn.MongoNetworkError(Kn.MongoError.buildErrorMessage(s),{cause:s})}return await b7({...t,existingSocket:i,proxyHost:void 0})}});var _7=m(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.ServerHeartbeatFailedEvent=ki.ServerHeartbeatSucceededEvent=ki.ServerHeartbeatStartedEvent=ki.TopologyClosedEvent=ki.TopologyOpeningEvent=ki.TopologyDescriptionChangedEvent=ki.ServerClosedEvent=ki.ServerOpeningEvent=ki.ServerDescriptionChangedEvent=void 0;var Bp=yi(),vV=class{constructor(e,r,n,i){this.name=Bp.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=i}};ki.ServerDescriptionChangedEvent=vV;var SV=class{constructor(e,r){this.name=Bp.SERVER_OPENING,this.topologyId=e,this.address=r}};ki.ServerOpeningEvent=SV;var wV=class{constructor(e,r){this.name=Bp.SERVER_CLOSED,this.topologyId=e,this.address=r}};ki.ServerClosedEvent=wV;var AV=class{constructor(e,r,n){this.name=Bp.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};ki.TopologyDescriptionChangedEvent=AV;var CV=class{constructor(e){this.name=Bp.TOPOLOGY_OPENING,this.topologyId=e}};ki.TopologyOpeningEvent=CV;var TV=class{constructor(e){this.name=Bp.TOPOLOGY_CLOSED,this.topologyId=e}};ki.TopologyClosedEvent=TV;var OV=class{constructor(e,r){this.name=Bp.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};ki.ServerHeartbeatStartedEvent=OV;var xV=class{constructor(e,r,n,i){this.name=Bp.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=i}};ki.ServerHeartbeatSucceededEvent=xV;var IV=class{constructor(e,r,n,i){this.name=Bp.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=i}};ki.ServerHeartbeatFailedEvent=IV});var KV=m(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ConnectionPoolClearedEvent=dn.ConnectionCheckedInEvent=dn.ConnectionCheckedOutEvent=dn.ConnectionCheckOutFailedEvent=dn.ConnectionCheckOutStartedEvent=dn.ConnectionClosedEvent=dn.ConnectionReadyEvent=dn.ConnectionCreatedEvent=dn.ConnectionPoolClosedEvent=dn.ConnectionPoolReadyEvent=dn.ConnectionPoolCreatedEvent=dn.ConnectionPoolMonitoringEvent=void 0;var bl=yi(),$V=et(),Ea=class{constructor(e){this.time=new Date,this.address=e.address}};dn.ConnectionPoolMonitoringEvent=Ea;var RV=class extends Ea{constructor(e){super(e),this.name=bl.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}}};dn.ConnectionPoolCreatedEvent=RV;var DV=class extends Ea{constructor(e){super(e),this.name=bl.CONNECTION_POOL_READY}};dn.ConnectionPoolReadyEvent=DV;var kV=class extends Ea{constructor(e){super(e),this.name=bl.CONNECTION_POOL_CLOSED}};dn.ConnectionPoolClosedEvent=kV;var MV=class extends Ea{constructor(e,r){super(e),this.name=bl.CONNECTION_CREATED,this.connectionId=r.id}};dn.ConnectionCreatedEvent=MV;var PV=class extends Ea{constructor(e,r,n){super(e),this.name=bl.CONNECTION_READY,this.durationMS=(0,$V.now)()-n,this.connectionId=r.id}};dn.ConnectionReadyEvent=PV;var NV=class extends Ea{constructor(e,r,n,i){super(e),this.name=bl.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=i??null}};dn.ConnectionClosedEvent=NV;var FV=class extends Ea{constructor(e){super(e),this.name=bl.CONNECTION_CHECK_OUT_STARTED}};dn.ConnectionCheckOutStartedEvent=FV;var BV=class extends Ea{constructor(e,r,n,i){super(e),this.name=bl.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,$V.now)()-n,this.reason=r,this.error=i}};dn.ConnectionCheckOutFailedEvent=BV;var qV=class extends Ea{constructor(e,r,n){super(e),this.name=bl.CONNECTION_CHECKED_OUT,this.durationMS=(0,$V.now)()-n,this.connectionId=r.id}};dn.ConnectionCheckedOutEvent=qV;var LV=class extends Ea{constructor(e,r){super(e),this.name=bl.CONNECTION_CHECKED_IN,this.connectionId=r.id}};dn.ConnectionCheckedInEvent=LV;var jV=class extends Ea{constructor(e,r={}){super(e),this.name=bl.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};dn.ConnectionPoolClearedEvent=jV});var HV=m(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.WaitQueueTimeoutError=vd.PoolClearedOnNetworkError=vd.PoolClearedError=vd.PoolClosedError=void 0;var v7=Ne(),UV=class extends v7.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};vd.PoolClosedError=UV;var S7=class extends v7.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(v7.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}};vd.PoolClearedError=S7;var VV=class extends S7{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};vd.PoolClearedOnNetworkError=VV;var GV=class extends v7.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};vd.WaitQueueTimeoutError=GV});var Oye=m(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.ConnectionPool=Bs.PoolState=void 0;var M6=require("timers"),Zu=yi(),_l=Ne(),Tye=Qa(),Sht=$i(),qp=et(),wht=_V(),w7=g7(),Fs=KV(),P6=HV(),Aht=HU();Bs.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var ba=class t extends Tye.TypedEventEmitter{constructor(e,r){if(super(),this.on("error",qp.noop),this.options=Object.freeze({connectionType:w7.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new _l.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=Bs.PoolState.paused,this.server=e,this.connections=new qp.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,qp.makeCounter)(1),this.cancellationToken=new Tye.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new qp.List,this.metrics=new Aht.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new Fs.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===Bs.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){this.poolState===Bs.PoolState.paused&&(this.poolState=Bs.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new Fs.ConnectionPoolReadyEvent(this)),(0,M6.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize())}async checkOut(e){let r=(0,qp.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new Fs.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:i,reject:s}=(0,qp.promiseWithResolvers)(),o=e.timeoutContext.connectionCheckoutTimeout,a={resolve:i,reject:s,cancelled:!1,checkoutTime:r},u=(0,qp.addAbortListener)(e.signal,function(){a.cancelled=!0,s(this.reason)});this.waitQueue.push(a),process.nextTick(()=>this.processWaitQueue());try{return o?.throwIfExpired(),await(o?Promise.race([n,o]):n)}catch(c){if(Sht.TimeoutError.is(c)){o?.clear(),a.cancelled=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Fs.ConnectionCheckOutFailedEvent(this,"timeout",a.checkoutTime));let l=new P6.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new _l.MongoOperationTimeoutError("Timed out during connection checkout",{cause:l}):l}throw c}finally{u?.[qp.kDispose](),o?.clear()}}checkIn(e){if(!this.checkedOut.has(e))return;let r=this.closed,n=this.connectionIsStale(e),i=!!(r||n||e.closed);if(i||(e.markAvailable(),this.connections.unshift(e)),this.checkedOut.delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new Fs.ConnectionCheckedInEvent(this,e)),i){let s=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,s)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:s}=e;if(!s)throw new _l.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let o=s.toHexString(),a=this.serviceGenerations.get(o);if(a==null)throw new _l.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(o,a+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Fs.ConnectionPoolClearedEvent(this,{serviceId:s}));return}let r=e.interruptInUseConnections??!1,n=this.generation;this.generation+=1;let i=this.poolState===Bs.PoolState.paused;this.poolState=Bs.PoolState.paused,this.clearMinPoolSizeTimer(),i||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Fs.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this.checkedOut)r.generation<=e&&r.onError(new P6.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let e of this.checkedOut)e.onError(new _l.MongoClientClosedError)}close(){if(!this.closed){this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return=="function"&&this.connectionCounter.return(void 0),this.poolState=Bs.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this.connections)this.emitAndLog(t.CONNECTION_CLOSED,new Fs.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this.connections.clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new Fs.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new _l.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new _l.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let i=n.resolveAuthMechanism(e.hello),s=this.server.topology.client.s.authProviders.getOrCreateProvider(i.mechanism,i.mechanismProperties);if(!s)throw new _l.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await s.reauth(r)}clearMinPoolSizeTimer(){let e=this.minPoolSizeTimer;e&&(0,M6.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new Fs.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),i=this.serviceGenerations.get(n);return e.generation!==i}return e.generation!==this.generation}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let i=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,i),!0}createConnection(e){let r={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,extendedMetadata:this.server.topology.client.options.extendedMetadata};this.pending++;let n=(0,qp.now)();this.emitAndLog(t.CONNECTION_CREATED,new Fs.ConnectionCreatedEvent(this,{id:r.id})),(0,wht.connect)(r).then(i=>{if(this.poolState!==Bs.PoolState.ready){this.pending--,i.destroy(),e(this.closed?new P6.PoolClosedError(this):new P6.PoolClearedError(this));return}for(let s of[...Zu.APM_EVENTS,w7.Connection.CLUSTER_TIME_RECEIVED])i.on(s,o=>this.emit(s,o));if(this.loadBalanced){i.on(w7.Connection.PINNED,o=>this.metrics.markPinned(o)),i.on(w7.Connection.UNPINNED,o=>this.metrics.markUnpinned(o));let s=i.serviceId;if(s){let o,a=s.toHexString();(o=this.serviceGenerations.get(a))?i.generation=o:(this.serviceGenerations.set(a,0),i.generation=0)}}i.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new Fs.ConnectionReadyEvent(this,i,n)),this.pending--,e(void 0,i)},i=>{this.pending--,this.server.handleError(i),this.emitAndLog(t.CONNECTION_CLOSED,new Fs.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",i)),(i instanceof _l.MongoNetworkError||i instanceof _l.MongoServerError)&&(i.connectionGeneration=r.generation),e(i??new _l.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this.poolState===Bs.PoolState.ready&&(this.connections.prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this.connections.push(n),process.nextTick(()=>this.processWaitQueue())),this.poolState===Bs.PoolState.ready&&((0,M6.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,M6.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,M6.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,M6.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this.processingWaitQueue)return;for(this.processingWaitQueue=!0;this.waitQueueSize;){let n=this.waitQueue.first();if(!n){this.waitQueue.shift();continue}if(n.cancelled){this.waitQueue.shift();continue}if(this.poolState!==Bs.PoolState.ready){let s=this.closed?"poolClosed":"connectionError",o=this.closed?new P6.PoolClosedError(this):new P6.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Fs.ConnectionCheckOutFailedEvent(this,s,n.checkoutTime,o)),this.waitQueue.shift(),n.reject(o);continue}if(!this.availableConnectionCount)break;let i=this.connections.shift();if(!i)break;this.destroyConnectionIfPerished(i)||(this.checkedOut.add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Fs.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),this.waitQueue.shift(),n.resolve(i))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this.waitQueue.shift();!n||n.cancelled||this.createConnection((i,s)=>{n.cancelled?!i&&s&&this.connections.push(s):i?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Fs.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,i)),n.reject(i)):s&&(this.checkedOut.add(s),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Fs.ConnectionCheckedOutEvent(this,s,n.checkoutTime)),n.resolve(s)),process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}};Bs.ConnectionPool=ba;ba.CONNECTION_POOL_CREATED=Zu.CONNECTION_POOL_CREATED;ba.CONNECTION_POOL_CLOSED=Zu.CONNECTION_POOL_CLOSED;ba.CONNECTION_POOL_CLEARED=Zu.CONNECTION_POOL_CLEARED;ba.CONNECTION_POOL_READY=Zu.CONNECTION_POOL_READY;ba.CONNECTION_CREATED=Zu.CONNECTION_CREATED;ba.CONNECTION_READY=Zu.CONNECTION_READY;ba.CONNECTION_CLOSED=Zu.CONNECTION_CLOSED;ba.CONNECTION_CHECK_OUT_STARTED=Zu.CONNECTION_CHECK_OUT_STARTED;ba.CONNECTION_CHECK_OUT_FAILED=Zu.CONNECTION_CHECK_OUT_FAILED;ba.CONNECTION_CHECKED_OUT=Zu.CONNECTION_CHECKED_OUT;ba.CONNECTION_CHECKED_IN=Zu.CONNECTION_CHECKED_IN});var QV=m(A7=>{"use strict";Object.defineProperty(A7,"__esModule",{value:!0});A7.Server=void 0;var Cht=g7(),Tht=Oye(),Oht=HV(),Sd=yi(),Mn=Ne(),xht=Qa(),Iht=l3(),JV=WU(),A0=et(),xye=Io(),en=Wa(),Rht=XV(),YV=Y3(),Dht=a3(),ev=(0,A0.makeStateMachine)({[en.STATE_CLOSED]:[en.STATE_CLOSED,en.STATE_CONNECTING],[en.STATE_CONNECTING]:[en.STATE_CONNECTING,en.STATE_CLOSING,en.STATE_CONNECTED,en.STATE_CLOSED],[en.STATE_CONNECTED]:[en.STATE_CONNECTED,en.STATE_CLOSING,en.STATE_CLOSED],[en.STATE_CLOSING]:[en.STATE_CLOSING,en.STATE_CLOSED]}),vl=class t extends xht.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",A0.noop),this.serverApi=n.serverApi;let i={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new Tht.ConnectionPool(this,i),this.s={description:r,options:n,state:en.STATE_CLOSED,operationCount:0};for(let s of[...Sd.CMAP_EVENTS,...Sd.APM_EVENTS])this.pool.on(s,o=>this.emit(s,o));if(this.pool.on(Cht.Connection.CLUSTER_TIME_RECEIVED,s=>{this.clusterTime=s}),this.loadBalanced){this.monitor=null;return}this.monitor=new Rht.Monitor(this,this.s.options);for(let s of Sd.HEARTBEAT_EVENTS)this.monitor.on(s,o=>this.emit(s,o));this.monitor.on("resetServer",s=>zV(this,s)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,s=>{this.emit(t.DESCRIPTION_RECEIVED,new YV.ServerDescription(this.description.hostAddress,s.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===en.STATE_CONNECTING&&(ev(this,en.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===en.TopologyType.LoadBalanced}connect(){this.s.state===en.STATE_CLOSED&&(ev(this,en.STATE_CONNECTING),this.loadBalanced?(ev(this,en.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){this.s.state!==en.STATE_CLOSED&&(ev(this,en.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),ev(this,en.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r){if(this.s.state===en.STATE_CLOSING||this.s.state===en.STATE_CLOSED)throw new Mn.MongoServerClosedError;let n=e.session,i=n?.pinnedConnection;if(this.incrementOperationCount(),i==null)try{i=await this.pool.checkOut({timeoutContext:r,signal:e.options.signal})}catch(d){throw this.decrementOperationCount(),d instanceof Oht.PoolClearedError||this.handleError(d),d}let s=null,o=()=>{if(this.decrementOperationCount(),n?.pinnedConnection!==i)if(s!=null){let d=()=>{this.pool.checkIn(i)};s.then(d,d)}else this.pool.checkIn(i)},a;try{a=e.buildCommand(i,n)}catch(d){throw o(),d}let u=e.buildOptions(r),c=e.ns;this.loadBalanced&&kht(a,n)&&!n?.pinnedConnection&&n?.pin(i),u.directConnection=this.topology.s.options.directConnection,e instanceof Iht.AggregateOperation&&e.hasWriteStage&&(0,A0.maxWireVersion)(i)<Dht.MIN_SECONDARY_WRITE_WIRE_VERSION&&delete u.readPreference,this.description.iscryptd&&(u.omitMaxTimeMS=!0);try{try{let d=await i.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,xye.throwIfWriteConcernError)(d),d}catch(d){throw this.decorateCommandError(i,a,u,d)}}catch(d){if(d instanceof Mn.MongoError&&d.code===Mn.MONGODB_ERROR_CODES.Reauthenticate){s=this.pool.reauthenticate(i),s.then(void 0,p=>{s=null,(0,A0.squashError)(p)}),await(0,A0.abortable)(s,u),s=null;try{let p=await i.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,xye.throwIfWriteConcernError)(p),p}catch(p){throw this.decorateCommandError(i,a,u,p)}}else throw d}finally{o()}}handleError(e,r){if(!(e instanceof Mn.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let i=e instanceof Mn.MongoNetworkError&&!(e instanceof Mn.MongoNetworkTimeoutError),s=e instanceof Mn.MongoNetworkError&&e.beforeHandshake,o=e.hasErrorLabel(Mn.MongoErrorLabel.HandshakeError);if(i||s||o)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(Mn.MongoErrorLabel.ResetPool),zV(this,e));else if((0,Mn.isSDAMUnrecoverableError)(e)&&Pht(this,e)){let a=(0,Mn.isNodeShuttingDownError)(e);this.loadBalanced&&r&&a&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(a&&e.addErrorLabel(Mn.MongoErrorLabel.ResetPool),zV(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,i){if(typeof i!="object"||i==null||!("name"in i))throw new Mn.MongoRuntimeError("An unexpected error type: "+typeof i);if(i.name==="AbortError"&&"cause"in i&&i.cause instanceof Mn.MongoError&&(i=i.cause),!(i instanceof Mn.MongoError)||Mht(this.pool,e))return i;let s=n?.session;return i instanceof Mn.MongoNetworkError?(s&&!s.hasEnded&&s.serverSession&&(s.serverSession.isDirty=!0),WV(s,r)&&!i.hasErrorLabel(Mn.MongoErrorLabel.TransientTransactionError)&&i.addErrorLabel(Mn.MongoErrorLabel.TransientTransactionError),(Iye(this.topology)||(0,JV.isTransactionCommand)(r))&&(0,A0.supportsRetryableWrites)(this)&&!WV(s,r)&&i.addErrorLabel(Mn.MongoErrorLabel.RetryableWriteError)):(Iye(this.topology)||(0,JV.isTransactionCommand)(r))&&(0,Mn.needsRetryableWriteLabel)(i,(0,A0.maxWireVersion)(this),this.description.type)&&!WV(s,r)&&i.addErrorLabel(Mn.MongoErrorLabel.RetryableWriteError),s&&s.isPinned&&i.hasErrorLabel(Mn.MongoErrorLabel.TransientTransactionError)&&s.unpin({force:!0}),this.handleError(i,e),i}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};A7.Server=vl;vl.SERVER_HEARTBEAT_STARTED=Sd.SERVER_HEARTBEAT_STARTED;vl.SERVER_HEARTBEAT_SUCCEEDED=Sd.SERVER_HEARTBEAT_SUCCEEDED;vl.SERVER_HEARTBEAT_FAILED=Sd.SERVER_HEARTBEAT_FAILED;vl.CONNECT=Sd.CONNECT;vl.DESCRIPTION_RECEIVED=Sd.DESCRIPTION_RECEIVED;vl.CLOSED=Sd.CLOSED;vl.ENDED=Sd.ENDED;function zV(t,e){t.loadBalanced||(e instanceof Mn.MongoNetworkError&&!(e instanceof Mn.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit(vl.DESCRIPTION_RECEIVED,new YV.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function kht(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function Mht(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function Pht(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,YV.compareTopologyVersion)(n,r)<0}function WV(t,e){return t&&t.inTransaction()&&!(0,JV.isTransactionCommand)(e)}function Iye(t){return t.s.options.retryWrites!==!1}});var XV=m(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.RTTSampler=_a.MonitorInterval=_a.RTTPinger=_a.Monitor=_a.ServerMonitoringMode=void 0;var J1=require("timers"),Rye=gr(),C7=_V(),Nht=HK(),ZV=yi(),N6=Ne(),Fht=O1(),Dye=Qa(),qs=et(),Ls=Wa(),tv=_7(),rv=QV(),F6="idle",C0="monitoring",B6=(0,qs.makeStateMachine)({[Ls.STATE_CLOSING]:[Ls.STATE_CLOSING,F6,Ls.STATE_CLOSED],[Ls.STATE_CLOSED]:[Ls.STATE_CLOSED,C0],[F6]:[F6,C0,Ls.STATE_CLOSING],[C0]:[C0,F6,Ls.STATE_CLOSING]}),Bht=new Set([Ls.STATE_CLOSING,Ls.STATE_CLOSED,C0]);function nv(t){return t.s.state===Ls.STATE_CLOSED||t.s.state===Ls.STATE_CLOSING}_a.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var eG=class extends Dye.TypedEventEmitter{constructor(e,r){super(),this.component=Fht.MongoLoggableComponent.TOPOLOGY,this.on("error",qs.noop),this.server=e,this.connection=null,this.cancellationToken=new Dye.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:Ls.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,Nht.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new O7(10);let n=this.cancellationToken,i={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete i.credentials,i.autoEncrypter&&delete i.autoEncrypter,this.connectOptions=Object.freeze(i)}connect(){if(this.s.state!==Ls.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this.monitorId=new iv(Mye(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){Bht.has(this.s.state)||this.monitorId?.wake()}reset(){let e=this.server.description.topologyVersion;if(nv(this)||e==null)return;B6(this,Ls.STATE_CLOSING),kye(this),B6(this,F6);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this.monitorId=new iv(Mye(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){nv(this)||(B6(this,Ls.STATE_CLOSING),kye(this),this.emit("close"),B6(this,Ls.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};_a.Monitor=eG;function kye(t){t.monitorId?.stop(),t.monitorId=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t.cancellationToken.emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function tG(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===_a.ServerMonitoringMode.poll?!1:r===_a.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function qht(t,e){let r,n,i=t.server.description.topologyVersion,s=tG(t,i);t.emitAndLogHeartbeat(rv.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new tv.ServerHeartbeatStartedEvent(t.address,s));function o(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat(rv.Server.SERVER_HEARTBEAT_FAILED,t.server.topology.s.id,void 0,new tv.ServerHeartbeatFailedEvent(t.address,(0,qs.calculateDurationInMs)(r),c,n));let l=c instanceof N6.MongoError?c:new N6.MongoError(N6.MongoError.buildErrorMessage(c),{cause:c});l.addErrorLabel(N6.MongoErrorLabel.ResetPool),l instanceof N6.MongoNetworkTimeoutError&&l.addErrorLabel(N6.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",l),e(c)}function a(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[ZV.LEGACY_HELLO_COMMAND]);let l=s&&t.rttPinger?t.rttPinger.latestRtt??(0,qs.calculateDurationInMs)(r):(0,qs.calculateDurationInMs)(r);t.addRttSample(l),t.emitAndLogHeartbeat(rv.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.connectionId,new tv.ServerHeartbeatSucceededEvent(t.address,l,c,s)),s?(t.emitAndLogHeartbeat(rv.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new tv.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,qs.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:u}=t;if(u&&!u.closed){let{serverApi:c,helloOk:l}=u,d=t.options.connectTimeoutMS,p=t.options.heartbeatFrequencyMS,f={[c?.version||l?"hello":ZV.LEGACY_HELLO_COMMAND]:1,...s&&i?{maxAwaitTimeMS:p,topologyVersion:Lht(i)}:{}},h=s?{socketTimeoutMS:d?d+p:0,exhaustAllowed:!0}:{socketTimeoutMS:d};if(s&&t.rttPinger==null&&(t.rttPinger=new T7(t)),r=(0,qs.now)(),s)return n=!0,u.exhaustCommand((0,qs.ns)("admin.$cmd"),f,h,(g,_)=>g?o(g):a(_));n=!1,u.command((0,qs.ns)("admin.$cmd"),f,h).then(a,o);return}(async()=>{let c=await(0,C7.makeSocket)(t.connectOptions),l=(0,C7.makeConnection)(t.connectOptions,c);r=(0,qs.now)();try{return await(0,C7.performInitialHandshake)(l,t.connectOptions),l}catch(d){throw l.destroy(),d}})().then(c=>{if(nv(t)){c.destroy();return}let l=(0,qs.calculateDurationInMs)(r);t.addRttSample(l),t.connection=c,t.emitAndLogHeartbeat(rv.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.hello?.connectionId,new tv.ServerHeartbeatSucceededEvent(t.address,l,c.hello,tG(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,o(c)})}function Mye(t){return e=>{if(t.s.state===C0){process.nextTick(e);return}B6(t,C0);function r(){nv(t)||B6(t,F6),e()}qht(t,(n,i)=>{if(n&&t.server.description.type===Ls.ServerType.Unknown)return r();tG(t,i?.topologyVersion)&&(0,J1.setTimeout)(()=>{nv(t)||t.monitorId?.wake()},0),r()})}}function Lht(t){return{processId:t.processId,counter:Rye.Long.isLong(t.counter)?t.counter:Rye.Long.fromNumber(t.counter)}}var T7=class{constructor(e){this.connection=void 0,this.cancellationToken=e.cancellationToken,this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this.monitorId=(0,J1.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,J1.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,qs.calculateDurationInMs)(e),this.monitorId=(0,J1.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,qs.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,C7.connect)(this.monitor.connectOptions).then(i=>{this.measureAndReschedule(e,i)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":ZV.LEGACY_HELLO_COMMAND;r.command((0,qs.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};_a.RTTPinger=T7;var iv=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,J1.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,qs.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,qs.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,J1.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,qs.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,J1.clearTimeout)(this.timerId),this.timerId=(0,J1.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};_a.MonitorInterval=iv;var O7=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};_a.RTTSampler=O7});var uG=m(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.DEFAULT_OPTIONS=tu.OPTIONS=void 0;tu.resolveSRVRecord=Wht;tu.parseOptions=Yht;var rG=require("dns"),jht=pU(),$ht=require("url"),q6=IC(),wd=Ed(),Pye=L3(),Nye=Y0e(),it=Ne(),x7=H1(),sG=O1(),nG=nl(),Y1=cs(),Kht=XV(),so=et(),Lp=Io(),iG=["authSource","replicaSet","loadBalanced"],Uht="loadBalanced option only supported with a single host in the URI",Vht="loadBalanced option not supported with a replicaSet option",Ght="loadBalanced option not supported when directConnection is provided";function qye(t){return async function(r){try{return await rG.promises[t](r)}catch(n){if(n.code===rG.TIMEOUT)return await rG.promises[t](r);throw n}}}var Hht=qye("resolveSrv"),zht=qye("resolveTxt");async function Wht(t){if(typeof t.srvHost!="string")throw new it.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=zht(e);r.then(void 0,so.squashError);let n=`_${t.srvServiceName}._tcp.${e}`,i=await Hht(n);if(i.length===0)throw new it.MongoAPIError("No addresses found at host");for(let{name:p}of i)(0,so.checkParentDomainMatch)(p,e);let s=i.map(p=>so.HostAddress.fromString(`${p.name}:${p.port??27017}`));oG(s,t,!0);let o;try{o=await r}catch(p){if(p.code!=="ENODATA"&&p.code!=="ENOTFOUND")throw p;return s}if(o.length>1)throw new it.MongoParseError("Multiple text records not allowed");let a=new $ht.URLSearchParams(o[0].join(""));if([...a.keys()].some(p=>!iG.includes(p)))throw new it.MongoParseError(`Text record may only set any of: ${iG.join(", ")}`);if(iG.some(p=>a.get(p)===""))throw new it.MongoParseError("Cannot have empty URI params in DNS TXT Record");let c=a.get("authSource")??void 0,l=a.get("replicaSet")??void 0,d=a.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&c&&t.credentials&&!wd.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=q6.MongoCredentials.merge(t.credentials,{source:c})),!t.userSpecifiedReplicaSet&&l&&(t.replicaSet=l),d==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new it.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return oG(s,t,!0),s}function Jht(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new it.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames")}function jp(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new it.MongoParseError(`${t} must be either "true" or "false"`)}}function aG(t,e){let r=(0,so.parseInteger)(e);if(r!=null)return r;throw new it.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function sv(t,e){let r=aG(t,e);if(r<0)throw new it.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*Fye(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,i]=r.split(/:(.*)/);if(i==null)throw new it.MongoParseError("Cannot have undefined values in key value pairs");yield[n,i]}}var L6=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function Yht(t,e=void 0,r={}){if(e!=null&&!(e instanceof x7.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new it.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new it.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new jht.default(t),{hosts:i,isSRV:s}=n,o=Object.create(null);o.hosts=s?[]:i.map(so.HostAddress.fromString);let a=new L6;if(n.pathname!=="/"&&n.pathname!==""){let h=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);h&&a.set("dbName",[h])}if(n.username!==""){let h={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(h.password=decodeURIComponent(n.password)),a.set("auth",[h])}for(let h of n.searchParams.keys()){let g=n.searchParams.getAll(h),_=/readPreferenceTags/i.test(h);if(!_&&g.length>1)throw new it.MongoInvalidArgumentError(`URI option "${h}" cannot appear more than once in the connection string`);if(!_&&g.includes(""))throw new it.MongoAPIError(`URI option "${h}" cannot be specified with no value`);a.has(h)||a.set(h,g)}let u=new L6(Object.entries(r).filter(([,h])=>h!=null));if(a.has("serverApi"))throw new it.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=a.get("authMechanismProperties");if(c){for(let h of c)if(/(^|,)ALLOWED_HOSTS:/.test(h))throw new it.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(u.has("loadBalanced"))throw new it.MongoParseError("loadBalanced is only a valid option in the URI");let l=new L6,d=new Set([...a.keys(),...u.keys()]);for(let h of d){let g=[],_=u.get(h);_!=null&&g.push(_);let S=a.get(h)??[];g.push(...S),l.set(h,g)}if(l.has("tls")||l.has("ssl")){let h=(l.get("tls")||[]).concat(l.get("ssl")||[]).map(jp.bind(null,"tls/ssl"));if(new Set(h).size!==1)throw new it.MongoParseError("All values of tls/ssl must be the same.")}Jht(l);let p=(0,so.setDifference)(d,Array.from(Object.keys(tu.OPTIONS)).map(h=>h.toLowerCase()));if(p.size!==0){let h=p.size>1?"options":"option",g=p.size>1?"are":"is";throw new it.MongoParseError(`${h} ${Array.from(p).join(", ")} ${g} not supported`)}for(let[h,g]of Object.entries(tu.OPTIONS)){let _=l.get(h);if(!_||_.length===0)tu.DEFAULT_OPTIONS.has(h)&&Bye(o,h,g,[tu.DEFAULT_OPTIONS.get(h)]);else{let{deprecated:S}=g;if(S){let w=typeof S=="string"?`: ${S}`:"";(0,so.emitWarning)(`${h} is a deprecated option${w}`)}Bye(o,h,g,_)}}if(o.credentials){let h=o.credentials.mechanism===wd.AuthMechanism.MONGODB_GSSAPI,g=o.credentials.mechanism===wd.AuthMechanism.MONGODB_X509,_=o.credentials.mechanism===wd.AuthMechanism.MONGODB_AWS,S=o.credentials.mechanism===wd.AuthMechanism.MONGODB_OIDC;if((h||g)&&l.has("authSource")&&o.credentials.source!=="$external")throw new it.MongoParseError(`authMechanism ${o.credentials.mechanism} requires an authSource of '$external'`);if(!(h||g||_||S)&&o.dbName&&!l.has("authSource")&&(o.credentials=q6.MongoCredentials.merge(o.credentials,{source:o.dbName})),_&&o.credentials.username&&!o.credentials.password)throw new it.MongoMissingCredentialsError(`When using ${o.credentials.mechanism} password must be set when a username is specified`);o.credentials.validate(),o.credentials.password===""&&o.credentials.username===""&&o.credentials.mechanism===wd.AuthMechanism.MONGODB_DEFAULT&&Object.keys(o.credentials.mechanismProperties).length===0&&delete o.credentials}if(o.dbName||(o.dbName="test"),oG(i,o,s),e&&o.autoEncryption&&(Nye.Encrypter.checkForMongoCrypt(),o.encrypter=new Nye.Encrypter(e,t,r),o.autoEncrypter=o.encrypter.autoEncrypter),o.userSpecifiedAuthSource=u.has("authSource")||a.has("authSource"),o.userSpecifiedReplicaSet=u.has("replicaSet")||a.has("replicaSet"),s){if(o.srvHost=i[0],o.directConnection)throw new it.MongoAPIError("SRV URI does not support directConnection");if(o.srvMaxHosts>0&&typeof o.replicaSet=="string")throw new it.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let h=!u.has("tls")&&!a.has("tls"),g=!u.has("ssl")&&!a.has("ssl");h&&g&&(o.tls=!0)}else if(a.has("srvMaxHosts")||u.has("srvMaxHosts")||a.has("srvServiceName")||u.has("srvServiceName"))throw new it.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(o.directConnection&&o.hosts.length!==1)throw new it.MongoParseError("directConnection option requires exactly one host");if(!o.proxyHost&&(o.proxyPort||o.proxyUsername||o.proxyPassword))throw new it.MongoParseError("Must specify proxyHost if other proxy options are passed");if(o.proxyUsername&&!o.proxyPassword||!o.proxyUsername&&o.proxyPassword)throw new it.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(h=>a.get(h)??[]).some(h=>h.length>1))throw new it.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return o.mongoLoggerOptions=sG.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:o.mongodbLogPath,mongodbLogComponentSeverities:o.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:o.mongodbLogMaxDocumentLength}),o}function oG(t,e,r){if(e.loadBalanced){if(t.length>1)throw new it.MongoParseError(Uht);if(e.replicaSet)throw new it.MongoParseError(Vht);if(e.directConnection)throw new it.MongoParseError(Ght);if(r&&e.srvMaxHosts>0)throw new it.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function Bye(t,e,r,n){let{target:i,type:s,transform:o}=r,a=i??e;switch(s){case"boolean":t[a]=jp(a,n[0]);break;case"int":t[a]=aG(a,n[0]);break;case"uint":t[a]=sv(a,n[0]);break;case"string":if(n[0]==null)break;t[a]=String(n[0]);break;case"record":if(!(0,so.isRecord)(n[0]))throw new it.MongoParseError(`${a} must be an object`);t[a]=n[0];break;case"any":t[a]=n[0];break;default:{if(!o)throw new it.MongoParseError("Descriptors missing a type must define a transform");let u=o({name:a,options:t,values:n});t[a]=u;break}}}tu.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,so.isRecord)(r,["username","password"]))throw new it.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return q6.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(wd.AuthMechanism),[n]=r.filter(o=>o.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new it.MongoParseError(`authMechanism one of ${r}, got ${e}`);let i=t.credentials?.source;(n===wd.AuthMechanism.MONGODB_PLAIN||wd.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(i="$external");let s=t.credentials?.password;return n===wd.AuthMechanism.MONGODB_X509&&s===""&&(s=void 0),q6.MongoCredentials.merge(t.credentials,{mechanism:n,source:i,password:s})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[i,s]of Fye(n))try{r[i]=jp(i,s)}catch{r[i]=s}else{if(!(0,so.isRecord)(n))throw new it.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return q6.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return q6.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new it.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(x7.ServerApiVersion).join('", "')}"]`);if(!Object.values(x7.ServerApiVersion).some(n=>n===r))throw new it.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(x7.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new it.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let i of n)if(Object.keys(Pye.Compressor).includes(String(i)))e.add(String(i));else throw new it.MongoInvalidArgumentError(`${i} is not a valid compression mechanism. Must be one of: ${Object.keys(Pye.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=aG(t,e);if(r===4||r===6)return r;throw new it.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:jp(t,r)}});if(!n)throw new it.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:jp(t,r)}});if(!n)throw new it.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:jp(t,r)}});if(!n)throw new it.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=sv(t,e);if(r===0)throw new it.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=sv(t,r);return e.readPreference?Y1.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new Y1.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:so.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,so.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new it.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof nG.ReadConcern||(0,so.isRecord)(t,["level"]))return nG.ReadConcern.fromOptions({...e.readConcern,...t});throw new it.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return nG.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:Y1.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof Y1.ReadPreference)return Y1.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,so.isRecord)(t,["mode"])){let r=Y1.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new it.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new Y1.ReadPreference(t,e.readPreference?.tags,r)}throw new it.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let i of r){let s=Object.create(null);if(typeof i=="string")for(let[o,a]of Fye(i))s[o]=a;if((0,so.isRecord)(i))for(let[o,a]of Object.entries(i))s[o]=a;n.push(s)}return Y1.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(Kht.ServerMonitoringMode).includes(t))throw new it.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!jp(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return jp(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=jp(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,so.isRecord)(t)||t instanceof Lp.WriteConcern)return Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new it.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:sv("wtimeout",t)}});if(r)return r;throw new it.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=Lp.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:sv("wtimeoutMS",t)}});if(r)return r;throw new it.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new it.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new it.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new it.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(sG.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new it.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(sG.SeverityLevel).some(n=>n===r))throw new it.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};tu.DEFAULT_OPTIONS=new L6(Object.entries(tu.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]))});var Lye=m(R7=>{"use strict";Object.defineProperty(R7,"__esModule",{value:!0});R7.ListCollectionsOperation=void 0;var cG=kr(),Qht=et(),Xht=Xn(),ov=Vr(),I7=class extends Xht.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=cG.CursorResponse,this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize),this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?cG.ExplainedCursorResponse:cG.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return(0,Qht.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}handleOk(e){return e}};R7.ListCollectionsOperation=I7;(0,ov.defineAspects)(I7,[ov.Aspect.READ_OPERATION,ov.Aspect.RETRYABLE,ov.Aspect.CURSOR_CREATING,ov.Aspect.SUPPORTS_RAW_DATA])});var dG=m(D7=>{"use strict";Object.defineProperty(D7,"__esModule",{value:!0});D7.ListCollectionsCursor=void 0;var Zht=ls(),emt=Lye(),tmt=Ps(),lG=class t extends tmt.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new emt.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e,signal:this.signal}),n=await(0,Zht.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};D7.ListCollectionsCursor=lG});var $ye=m(k7=>{"use strict";Object.defineProperty(k7,"__esModule",{value:!0});k7.RunCommandCursor=void 0;var j6=Ne(),jye=ls(),rmt=tK(),nmt=y3(),imt=et(),smt=Ps(),pG=class extends smt.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new j6.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new j6.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new j6.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new j6.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new j6.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,imt.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new nmt.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference}),n=await(0,jye.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(e){if(!this.session)throw new j6.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r=new rmt.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,jye.executeOperation)(this.client,r,this.timeoutContext)}};k7.RunCommandCursor=pG});var av=m(Q1=>{"use strict";Object.defineProperty(Q1,"__esModule",{value:!0});Q1.ListIndexesOperation=Q1.DropIndexOperation=Q1.CreateIndexesOperation=void 0;var fG=kr(),omt=Ne(),hG=et(),mG=Xn(),Sl=Vr(),amt=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function umt(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function cmt(t){return Array.isArray(t)&&t.length===2&&umt(t[1])}function lmt(t){let e=new Map,r=!Array.isArray(t)||cmt(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[i,s]of n)e.set(i,s);else if((0,hG.isObject)(n))for(let[i,s]of Object.entries(n))e.set(i,s);return e}function dmt(t){let e=Object.entries(t).filter(([r])=>amt.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var M7=class t extends mG.CommandOperation{constructor(e,r,n,i){super(e,i),this.SERVER_COMMAND_RESPONSE_TYPE=fG.MongoDBResponse,this.options=i??{},this.options.collation=void 0,this.collectionName=r,this.indexes=n.map(s=>{let o=s.key instanceof Map?s.key:new Map(Object.entries(s.key)),a=s.name??Array.from(o).flat().join("_");return{...dmt(s),name:a,key:o}}),this.ns=e.s.namespace}static fromIndexDescriptionArray(e,r,n,i){return new t(e,r,n,i)}static fromIndexSpecification(e,r,n,i={}){let s=lmt(n),o={...i,key:s};return new t(e,r,[o],i)}get commandName(){return"createIndexes"}buildCommandDocument(e){let r=this.options,n=this.indexes,i=(0,hG.maxWireVersion)(e),s={createIndexes:this.collectionName,indexes:n};if(r.commitQuorum!=null){if(i<9)throw new omt.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");s.commitQuorum=r.commitQuorum}return s}handleOk(e){return this.indexes.map(n=>n.name||"")}};Q1.CreateIndexesOperation=M7;var P7=class extends mG.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=fG.MongoDBResponse,this.options=n??{},this.collection=e,this.indexName=r,this.ns=e.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(e){return{dropIndexes:this.collection.collectionName,index:this.indexName}}};Q1.DropIndexOperation=P7;var N7=class extends mG.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=fG.CursorResponse,this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(e){let r=(0,hG.maxWireVersion)(e),n=this.options.batchSize?{batchSize:this.options.batchSize}:{},i={listIndexes:this.collectionNamespace.collection,cursor:n};return r>=9&&this.options.comment!==void 0&&(i.comment=this.options.comment),i}handleOk(e){return e}};Q1.ListIndexesOperation=N7;(0,Sl.defineAspects)(N7,[Sl.Aspect.READ_OPERATION,Sl.Aspect.RETRYABLE,Sl.Aspect.CURSOR_CREATING,Sl.Aspect.SUPPORTS_RAW_DATA]);(0,Sl.defineAspects)(M7,[Sl.Aspect.WRITE_OPERATION,Sl.Aspect.SUPPORTS_RAW_DATA]);(0,Sl.defineAspects)(P7,[Sl.Aspect.WRITE_OPERATION,Sl.Aspect.SUPPORTS_RAW_DATA])});var Vye=m(uv=>{"use strict";Object.defineProperty(uv,"__esModule",{value:!0});uv.CreateCollectionOperation=void 0;uv.createCollections=vmt;var Kye=S1(),pmt=kr(),fmt=K6(),hmt=Ne(),mmt=$i(),ymt=et(),gmt=Xn(),yG=ls(),Emt=av(),Uye=Vr(),bmt=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),_mt="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",$6=class extends gmt.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=pmt.MongoDBResponse,this.options=n,this.db=e,this.name=r}get commandName(){return"create"}buildCommandDocument(e,r){let n=([i,s])=>s!=null&&typeof s!="function"&&!bmt.has(i);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(n))}}handleOk(e){return new fmt.Collection(this.db,this.name,this.options)}};uv.CreateCollectionOperation=$6;async function vmt(t,e,r){let n=mmt.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),i=r.encryptedFields??t.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${t.databaseName}.${e}`];if(i){class o extends $6{buildCommandDocument(l,d){if(!l.description.loadBalanced&&(0,ymt.maxWireVersion)(l)<Kye.MIN_SUPPORTED_QE_WIRE_VERSION)throw new hmt.MongoCompatibilityError(`${_mt} The minimum server version required is ${Kye.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(l,d)}}let a=i.escCollection??`enxcol_.${e}.esc`,u=i.ecocCollection??`enxcol_.${e}.ecoc`;for(let c of[a,u]){let l=new o(t,c,{clusteredIndex:{key:{_id:1},unique:!0},session:r.session});await(0,yG.executeOperation)(t.client,l,n)}r.encryptedFields||(r={...r,encryptedFields:i})}let s=await(0,yG.executeOperation)(t.client,new $6(t,e,r),n);if(i){let o=Emt.CreateIndexesOperation.fromIndexSpecification(t,e,{__safeContent__:1},{session:r.session});await(0,yG.executeOperation)(t.client,o,n)}return s}(0,Uye.defineAspects)($6,[Uye.Aspect.WRITE_OPERATION])});var Wye=m(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});T0.DropDatabaseOperation=T0.DropCollectionOperation=void 0;T0.dropCollections=Tmt;var Smt=O0(),Hye=kr(),wmt=Ps(),Amt=Ne(),Cmt=$i(),zye=Xn(),Gye=ls(),F7=Vr(),U6=class extends zye.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Hye.MongoDBResponse,this.options=n,this.name=r}get commandName(){return"drop"}buildCommandDocument(e,r){return{drop:this.name}}handleOk(e){return!0}};T0.DropCollectionOperation=U6;async function Tmt(t,e,r){let n=Cmt.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),i=t.client.s.options.autoEncryption?.encryptedFieldsMap,s=r.encryptedFields??i?.[`${t.databaseName}.${e}`];if(!s&&i&&(s=(await t.listCollections({name:e},{nameOnly:!1,session:r.session,timeoutContext:new wmt.CursorTimeoutContext(n,Symbol())}).toArray())?.[0]?.options?.encryptedFields),s){let o=s.escCollection||`enxcol_.${e}.esc`,a=s.ecocCollection||`enxcol_.${e}.ecoc`;for(let u of[o,a]){let c=new U6(t,u,r);try{await(0,Gye.executeOperation)(t.client,c,n)}catch(l){if(!(l instanceof Smt.MongoServerError)||l.code!==Amt.MONGODB_ERROR_CODES.NamespaceNotFound)throw l}}}return await(0,Gye.executeOperation)(t.client,new U6(t,e,r),n)}var B7=class extends zye.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Hye.MongoDBResponse,this.options=r}get commandName(){return"dropDatabase"}buildCommandDocument(e,r){return{dropDatabase:1}}handleOk(e){return!0}};T0.DropDatabaseOperation=B7;(0,F7.defineAspects)(U6,[F7.Aspect.WRITE_OPERATION]);(0,F7.defineAspects)(B7,[F7.Aspect.WRITE_OPERATION])});var Yye=m(q7=>{"use strict";Object.defineProperty(q7,"__esModule",{value:!0});q7.ProfilingLevelOperation=void 0;var Omt=gr(),xmt=kr(),Jye=Ne(),Imt=Xn(),gG=class extends xmt.MongoDBResponse{get was(){return this.get("was",Omt.BSONType.int,!0)}},EG=class extends Imt.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=gG,this.options=r}get commandName(){return"profile"}buildCommandDocument(e){return{profile:-1}}handleOk(e){if(e.ok===1){let r=e.was;if(r===0)return"off";if(r===1)return"slow_only";if(r===2)return"all";throw new Jye.MongoUnexpectedServerResponseError(`Illegal profiling level value ${r}`)}else throw new Jye.MongoUnexpectedServerResponseError("Error with profile command")}};q7.ProfilingLevelOperation=EG});var bG=m(j7=>{"use strict";Object.defineProperty(j7,"__esModule",{value:!0});j7.RenameOperation=void 0;var Rmt=kr(),Dmt=K6(),kmt=et(),Mmt=Xn(),Qye=Vr(),L7=class extends Mmt.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Rmt.MongoDBResponse,this.collection=e,this.newName=r,this.options=n,this.ns=new kmt.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(e,r){let n=this.collection.namespace,i=this.collection.s.namespace.withCollection(this.newName).toString(),s=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1;return{renameCollection:n,to:i,dropTarget:s}}handleOk(e){return new Dmt.Collection(this.collection.db,this.newName,this.collection.s.options)}};j7.RenameOperation=L7;(0,Qye.defineAspects)(L7,[Qye.Aspect.WRITE_OPERATION])});var vG=m(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.SetProfilingLevelOperation=Ad.ProfilingLevel=void 0;var Pmt=kr(),Nmt=Ne(),Fmt=et(),Bmt=Xn(),qmt=new Set(["off","slow_only","all"]);Ad.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var _G=class extends Bmt.CommandOperation{constructor(e,r,n){switch(super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Pmt.MongoDBResponse,this.options=n,r){case Ad.ProfilingLevel.off:this.profile=0;break;case Ad.ProfilingLevel.slowOnly:this.profile=1;break;case Ad.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}buildCommandDocument(e){let r=this.level;if(!qmt.has(r))throw new Nmt.MongoInvalidArgumentError(`Profiling level must be one of "${(0,Fmt.enumToString)(Ad.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(e){return this.level}};Ad.SetProfilingLevelOperation=_G});var Zye=m(K7=>{"use strict";Object.defineProperty(K7,"__esModule",{value:!0});K7.DbStatsOperation=void 0;var Lmt=kr(),jmt=Xn(),Xye=Vr(),$7=class extends jmt.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Lmt.MongoDBResponse,this.options=r}get commandName(){return"dbStats"}buildCommandDocument(e){let r={dbStats:!0};return this.options.scale!=null&&(r.scale=this.options.scale),r}};K7.DbStatsOperation=$7;(0,Xye.defineAspects)($7,[Xye.Aspect.READ_OPERATION])});var V7=m(U7=>{"use strict";Object.defineProperty(U7,"__esModule",{value:!0});U7.Db=void 0;var $mt=V$(),ege=gr(),Kmt=x0(),tge=K6(),V6=yi(),Umt=cv(),Vmt=dG(),Gmt=$ye(),rge=Ne(),Hmt=Vye(),nge=Wye(),X1=ls(),zmt=av(),Wmt=Yye(),Jmt=L$(),Ymt=bG(),Qmt=y3(),Xmt=vG(),Zmt=Zye(),e0t=nl(),ige=cs(),ms=et(),t0t=Io(),r0t=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],$p=class{constructor(e,r,n){if(n=n??{},n=(0,ms.filterOptions)(n,r0t),typeof r=="string"&&r.includes("."))throw new rge.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:ige.ReadPreference.fromOptions(n),bsonOptions:(0,ege.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??ms.DEFAULT_PK_FACTORY,readConcern:e0t.ReadConcern.fromOptions(n),writeConcern:t0t.WriteConcern.fromOptions(n),namespace:new ms.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return r=(0,ms.resolveOptions)(this,r),await(0,Hmt.createCollections)(this,e,r)}async command(e,r){return await(0,X1.executeOperation)(this.client,new Qmt.RunCommandOperation(this.s.namespace,e,(0,ms.resolveOptions)(void 0,{...(0,ege.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference,signal:r?.signal})))}aggregate(e=[],r){return new Umt.AggregationCursor(this.client,this.s.namespace,e,(0,ms.resolveOptions)(this,r))}admin(){return new $mt.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new rge.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new tge.Collection(this,e,(0,ms.resolveOptions)(this,r))}async stats(e){return await(0,X1.executeOperation)(this.client,new Zmt.DbStatsOperation(this,(0,ms.resolveOptions)(this,e)))}listCollections(e={},r={}){return new Vmt.ListCollectionsCursor(this,e,(0,ms.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,X1.executeOperation)(this.client,new Ymt.RenameOperation(this.collection(e),r,(0,ms.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:ige.ReadPreference.primary})))}async dropCollection(e,r){return r=(0,ms.resolveOptions)(this,r),await(0,nge.dropCollections)(this,e,r)}async dropDatabase(e){return await(0,X1.executeOperation)(this.client,new nge.DropDatabaseOperation(this,(0,ms.resolveOptions)(this,e)))}async collections(e){return e=(0,ms.resolveOptions)(this,e),(await this.listCollections({},{...e,nameOnly:!0}).toArray()).filter(({name:n})=>!n.includes("$")).map(({name:n})=>new tge.Collection(this,n,this.s.options))}async createIndex(e,r,n){return(await(0,X1.executeOperation)(this.client,zmt.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,X1.executeOperation)(this.client,new Jmt.RemoveUserOperation(this,e,(0,ms.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,X1.executeOperation)(this.client,new Xmt.SetProfilingLevelOperation(this,e,(0,ms.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,X1.executeOperation)(this.client,new Wmt.ProfilingLevelOperation(this,(0,ms.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,ms.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new Kmt.ChangeStream(this,e,(0,ms.resolveOptions)(this,r))}runCursorCommand(e,r){return new Gmt.RunCommandCursor(this,e,r)}};U7.Db=$p;$p.SYSTEM_NAMESPACE_COLLECTION=V6.SYSTEM_NAMESPACE_COLLECTION;$p.SYSTEM_INDEX_COLLECTION=V6.SYSTEM_INDEX_COLLECTION;$p.SYSTEM_PROFILE_COLLECTION=V6.SYSTEM_PROFILE_COLLECTION;$p.SYSTEM_USER_COLLECTION=V6.SYSTEM_USER_COLLECTION;$p.SYSTEM_COMMAND_COLLECTION=V6.SYSTEM_COMMAND_COLLECTION;$p.SYSTEM_JS_COLLECTION=V6.SYSTEM_JS_COLLECTION});var sge=m(G7=>{"use strict";Object.defineProperty(G7,"__esModule",{value:!0});G7.MongoDBAWS=void 0;var SG=gr(),wG=fl(),H6=Ne(),G6=et(),n0t=N1(),AG=MU(),i0t=IC(),s0t=Ed(),o0t=110,CG={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},TG=class extends n0t.AuthProvider{constructor(e){super(),this.credentialProvider=e,this.credentialFetcher=AG.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new AG.AWSSDKCredentialProvider(e):new AG.LegacyAWSTemporaryCredentialProvider}async auth(e){let{connection:r}=e;if(!e.credentials)throw new H6.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in wG.aws4)throw wG.aws4.kModuleError;let{sign:n}=wG.aws4;if((0,G6.maxWireVersion)(r)<9)throw new H6.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials.username||(e.credentials=await a0t(e.credentials,this.credentialFetcher));let{credentials:i}=e,s=i.username,o=i.password,a=i.mechanismProperties.AWS_SESSION_TOKEN,u=s&&o&&a?{accessKeyId:s,secretAccessKey:o,sessionToken:a}:s&&o?{accessKeyId:s,secretAccessKey:o}:void 0,c=i.source,l=await(0,G6.randomBytes)(32),d={saslStart:1,mechanism:"MONGODB-AWS",payload:SG.serialize({r:l,p:o0t},CG)},p=await r.command((0,G6.ns)(`${c}.$cmd`),d,void 0),f=SG.deserialize(p.payload.buffer,CG),h=f.h,g=f.s.buffer;if(g.length!==64)throw new H6.MongoRuntimeError(`Invalid server nonce length ${g.length}, expected 64`);if(!G6.ByteUtils.equals(g.subarray(0,l.byteLength),l))throw new H6.MongoRuntimeError("Server nonce does not begin with client nonce");if(h.length<1||h.length>255||h.indexOf("..")!==-1)throw new H6.MongoRuntimeError(`Server returned an invalid host: "${h}"`);let _="Action=GetCallerIdentity&Version=2011-06-15",S=n({method:"POST",host:h,region:u0t(f.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":_.length,"X-MongoDB-Server-Nonce":G6.ByteUtils.toBase64(g),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:_},u),w={a:S.headers.Authorization,d:S.headers["X-Amz-Date"]};a&&(w.t=a);let C={saslContinue:1,conversationId:p.conversationId,payload:SG.serialize(w,CG)};await r.command((0,G6.ns)(`${c}.$cmd`),C,void 0)}};G7.MongoDBAWS=TG;async function a0t(t,e){function r(i){if(!i.AccessKeyId||!i.SecretAccessKey)throw new H6.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new i0t.MongoCredentials({username:i.AccessKeyId,password:i.SecretAccessKey,source:t.source,mechanism:s0t.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:i.Token}})}let n=await e.getCredentials();return r(n)}function u0t(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var age=m(H7=>{"use strict";Object.defineProperty(H7,"__esModule",{value:!0});H7.finishCommandDocument=c0t;H7.startCommandDocument=l0t;var z6=gr(),oge=Ed();function c0t(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new z6.Binary(z6.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:oge.AuthMechanism.MONGODB_OIDC,payload:new z6.Binary(z6.BSON.serialize({jwt:t}))}}function l0t(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:oge.AuthMechanism.MONGODB_OIDC,payload:new z6.Binary(z6.BSON.serialize(e))}}});var RG=m(Z1=>{"use strict";Object.defineProperty(Z1,"__esModule",{value:!0});Z1.CallbackWorkflow=Z1.AUTOMATED_TIMEOUT_MS=Z1.HUMAN_TIMEOUT_MS=void 0;var d0t=require("timers/promises"),p0t=Ne(),uge=et(),OG=age();Z1.HUMAN_TIMEOUT_MS=3e5;Z1.AUTOMATED_TIMEOUT_MS=6e4;var f0t=["accessToken","expiresInSeconds","refreshToken"],h0t="User provided OIDC callbacks must return a valid object with an accessToken.",xG=100,IG=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-xG}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let i=(0,OG.finishCommandDocument)(n);return i.db=r.source,{speculativeAuthenticate:i}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let i;return n?.speculativeAuthenticate?i=n.speculativeAuthenticate:i=await e.command((0,uge.ns)(r.source),(0,OG.startCommandDocument)(r),void 0),i}async finishAuthentication(e,r,n,i){await e.command((0,uge.ns)(r.source),(0,OG.finishCommandDocument)(n,i),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if(m0t(r))throw new p0t.MongoMissingCredentialsError(h0t);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let i=Date.now()-this.lastExecutionTime;return i<=xG&&await(0,d0t.setTimeout)(xG-i,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};Z1.CallbackWorkflow=IG;function m0t(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>f0t.includes(e))}});var PG=m(z7=>{"use strict";Object.defineProperty(z7,"__esModule",{value:!0});z7.AutomatedCallbackWorkflow=void 0;var DG=Ne(),cge=$i(),y0t=W7(),kG=RG(),MG=class extends kG.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let i=this.cache.getAccessToken();e.accessToken||(e.accessToken=i);try{return await this.finishAuthentication(e,r,i)}catch(s){if(s instanceof DG.MongoError&&s.code===DG.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw s}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:y0t.OIDC_VERSION};e.username&&(n.username=e.username),e.mechanismProperties.TOKEN_RESOURCE&&(n.tokenAudience=e.mechanismProperties.TOKEN_RESOURCE);let i=cge.Timeout.expires(kG.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),i])}catch(s){throw cge.TimeoutError.is(s)?(r.abort(),new DG.MongoOIDCError(`OIDC callback timed out after ${kG.AUTOMATED_TIMEOUT_MS}ms.`)):s}finally{i.clear()}}};z7.AutomatedCallbackWorkflow=MG});var dge=m(J7=>{"use strict";Object.defineProperty(J7,"__esModule",{value:!0});J7.callback=void 0;var lge=NU(),NG=Ne(),g0t=et(),E0t=Object.freeze({Metadata:"true",Accept:"application/json"}),b0t="Azure endpoint did not return a value with only access_token and expires_in properties",_0t="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",v0t=async t=>{let e=t.tokenAudience,r=t.username;if(!e)throw new NG.MongoAzureError(_0t);let n=await S0t(e,r);if(!w0t(n))throw new NG.MongoAzureError(b0t);return n};J7.callback=v0t;async function S0t(t,e){let r=new URL(lge.AZURE_BASE_URL);(0,lge.addAzureParams)(r,t,e);let n=await(0,g0t.get)(r,{headers:E0t});if(n.status!==200)throw new NG.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let i=JSON.parse(n.body);return{accessToken:i.access_token,expiresInSeconds:Number(i.expires_in)}}function w0t(t){return t==null||typeof t!="object"?!1:"accessToken"in t&&typeof t.accessToken=="string"&&"expiresInSeconds"in t&&typeof t.expiresInSeconds=="number"}});var fge=m(Y7=>{"use strict";Object.defineProperty(Y7,"__esModule",{value:!0});Y7.callback=void 0;var pge=Ne(),A0t=et(),C0t="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",T0t=Object.freeze({"Metadata-Flavor":"Google"}),O0t="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",x0t=async t=>{let e=t.tokenAudience;if(!e)throw new pge.MongoGCPError(O0t);return await I0t(e)};Y7.callback=x0t;async function I0t(t){let e=new URL(C0t);e.searchParams.append("audience",t);let r=await(0,A0t.get)(e,{headers:T0t});if(r.status!==200)throw new pge.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{accessToken:r.body}}});var yge=m(Q7=>{"use strict";Object.defineProperty(Q7,"__esModule",{value:!0});Q7.callback=void 0;var R0t=require("fs/promises"),D0t="/var/run/secrets/kubernetes.io/serviceaccount/token",hge="AZURE_FEDERATED_TOKEN_FILE",mge="AWS_WEB_IDENTITY_TOKEN_FILE",k0t=async()=>{let t;return process.env[hge]?t=process.env[hge]:process.env[mge]?t=process.env[mge]:t=D0t,{accessToken:await(0,R0t.readFile)(t,"utf8")}};Q7.callback=k0t});var BG=m(X7=>{"use strict";Object.defineProperty(X7,"__esModule",{value:!0});X7.TokenCache=void 0;var M0t=Ne(),lv=class extends M0t.MongoDriverError{},FG=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new lv("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new lv("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new lv("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};X7.TokenCache=FG});var gge=m(Z7=>{"use strict";Object.defineProperty(Z7,"__esModule",{value:!0});Z7.callback=void 0;var P0t=require("fs"),N0t=Ne(),F0t="OIDC_TOKEN_FILE must be set in the environment.",B0t=async()=>{let t=process.env.OIDC_TOKEN_FILE;if(!t)throw new N0t.MongoAWSError(F0t);return{accessToken:await P0t.promises.readFile(t,"utf8")}};Z7.callback=B0t});var W7=m(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.MongoDBOIDC=ec.OIDC_WORKFLOWS=ec.OIDC_VERSION=void 0;var bge=Ne(),q0t=N1(),eT=PG(),L0t=dge(),j0t=fge(),$0t=yge(),tT=BG(),K0t=gge(),U0t="AuthContext must provide credentials.";ec.OIDC_VERSION=1;ec.OIDC_WORKFLOWS=new Map;ec.OIDC_WORKFLOWS.set("test",()=>new eT.AutomatedCallbackWorkflow(new tT.TokenCache,K0t.callback));ec.OIDC_WORKFLOWS.set("azure",()=>new eT.AutomatedCallbackWorkflow(new tT.TokenCache,L0t.callback));ec.OIDC_WORKFLOWS.set("gcp",()=>new eT.AutomatedCallbackWorkflow(new tT.TokenCache,j0t.callback));ec.OIDC_WORKFLOWS.set("k8s",()=>new eT.AutomatedCallbackWorkflow(new tT.TokenCache,$0t.callback));var qG=class extends q0t.AuthProvider{constructor(e){if(super(),!e)throw new bge.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:i}=e;if(i?.speculativeAuthenticate?.done&&!n)return;let s=Ege(e);n?await this.workflow.reauthenticate(r,s):await this.workflow.execute(r,s,i)}async prepare(e,r){let{connection:n}=r,i=Ege(r),s=await this.workflow.speculativeAuth(n,i);return{...e,...s}}};ec.MongoDBOIDC=qG;function Ege(t){let{credentials:e}=t;if(!e)throw new bge.MongoMissingCredentialsError(U0t);return e}});var vge=m(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});rT.HumanCallbackWorkflow=void 0;var V0t=gr(),dv=Ne(),_ge=$i(),G0t=W7(),LG=RG(),jG=class extends LG.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let a=this.cache.getAccessToken();e.accessToken=a;try{return await this.finishAuthentication(e,r,a)}catch(u){if(u instanceof dv.MongoError&&u.code===dv.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw u}}if(this.cache.hasRefreshToken){let a=this.cache.getRefreshToken(),u=await this.fetchAccessToken(this.cache.getIdpInfo(),r,a);this.cache.put(u),e.accessToken=u.accessToken;try{return await this.finishAuthentication(e,r,u.accessToken)}catch(c){if(c instanceof dv.MongoError&&c.code===dv.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),i=n.conversationId,s=V0t.BSON.deserialize(n.payload.buffer),o=await this.fetchAccessToken(s,r);return this.cache.put(o,s),e.accessToken=o.accessToken,await this.finishAuthentication(e,r,o.accessToken,i)}async fetchAccessToken(e,r,n){let i=new AbortController,s={timeoutContext:i.signal,version:G0t.OIDC_VERSION,idpInfo:e};r.username&&(s.username=r.username),n&&(s.refreshToken=n);let o=_ge.Timeout.expires(LG.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(s),o])}catch(a){throw _ge.TimeoutError.is(a)?(i.abort(),new dv.MongoOIDCError(`OIDC callback timed out after ${LG.HUMAN_TIMEOUT_MS}ms.`)):a}finally{o.clear()}}};rT.HumanCallbackWorkflow=jG});var Sge=m(nT=>{"use strict";Object.defineProperty(nT,"__esModule",{value:!0});nT.Plain=void 0;var H0t=gr(),z0t=Ne(),W0t=et(),J0t=N1(),$G=class extends J0t.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new z0t.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:i,password:s}=n,a={saslStart:1,mechanism:"PLAIN",payload:new H0t.Binary(Buffer.from(`\0${i}\0${s}`)),autoAuthorize:1};await r.command((0,W0t.ns)("$external.$cmd"),a,void 0)}};nT.Plain=$G});var Tge=m((dgr,Cge)=>{"use strict";var wge=t=>t.codePointAt(0),Y0t=t=>t[0],Q0t=t=>t[t.length-1];function Age(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let i=t.charCodeAt(n);if(i>=55296&&i<=56319&&r>n+1){let s=t.charCodeAt(n+1);if(s>=56320&&s<=57343){e.push((i-55296)*1024+s-56320+65536),n+=1;continue}}e.push(i)}return e}function pv({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:i,bidirectional_l:s},o,a={}){let u=r,c=e;if(typeof o!="string")throw new TypeError("Expected string.");if(o.length===0)return"";let l=Age(o).map(w=>u.get(w)?32:w).filter(w=>!c.get(w)),d=String.fromCodePoint.apply(null,l).normalize("NFKC"),p=Age(d);if(p.some(w=>n.get(w)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(a.allowUnassigned!==!0&&p.some(C=>t.get(C)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let h=p.some(w=>i.get(w)),g=p.some(w=>s.get(w));if(h&&g)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let _=i.get(wge(Y0t(d))),S=i.get(wge(Q0t(d)));if(h&&!(_&&S))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return d}pv.saslprep=pv;pv.default=pv;Cge.exports=pv});var Ige=m((pgr,xge)=>{xge.exports=Kp;function Kp(t,e){if(!(this instanceof Kp))return new Kp(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?iT(this.deduplicate.length):null}Kp.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};Kp.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};Kp.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;X0t(this,t)}tyt(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var i=this.path[n],s=r[i];if(!s){if(e)return;s=r[i]=new Array(32768)}r=s}return r};Kp.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],i=r&&r[n];return!i&&!e&&(i=r[n]=new Oge(t,iT(this.pageSize)),t>=this.length&&(this.length=t+1)),i&&i.buffer===this.deduplicate&&this.deduplicate&&!e&&(i.buffer=eyt(i.buffer),i.deduplicate=0),i};Kp.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var i=r[n],s=Z0t(e,this.pageSize);i?i.buffer=s:r[n]=new Oge(t,s)};Kp.prototype.toBuffer=function(){for(var t=new Array(this.length),e=iT(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),i=0;i<32768&&r<t.length;i++)t[r++]=n&&n[i]?n[i].buffer:e;return Buffer.concat(t)};function X0t(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function Z0t(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=iT(e);return t.copy(r),r}function iT(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function eyt(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function Oge(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function tyt(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var Dge=m((fgr,Rge)=>{var ryt=Ige();Rge.exports=eh;function eh(t){if(!(this instanceof eh))return new eh(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||ryt(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!iyt(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}eh.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};eh.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};eh.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,i=this.getByte(n);return this.setByte(n,e?i|128>>r:i&(255^128>>r))};eh.prototype.toBuffer=function(){for(var t=nyt(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};eh.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,i=this.pages.get(n,!1);return r+=this.pageOffset,i.buffer[r]===e?!1:(i.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(i),!0)};function nyt(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function iyt(t){return!(t&t-1)}});var kge=m(fv=>{"use strict";var syt=fv&&fv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fv,"__esModule",{value:!0});fv.createMemoryCodePoints=ayt;var oyt=syt(Dge());function ayt(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let l=t.slice(e,e+c);return e+=c,(0,oyt.default)({buffer:l})}let n=r(),i=r(),s=r(),o=r(),a=r(),u=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:i,non_ASCII_space_characters:s,prohibited_characters:o,bidirectional_r_al:a,bidirectional_l:u}}});var Mge=m(KG=>{"use strict";Object.defineProperty(KG,"__esModule",{value:!0});var uyt=require("zlib");KG.default=(0,uyt.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var Fge=m((UG,Nge)=>{"use strict";var Pge=UG&&UG.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},cyt=Pge(Tge()),lyt=kge(),dyt=Pge(Mge()),pyt=(0,lyt.createMemoryCodePoints)(dyt.default);function hv(t,e){return(0,cyt.default)(pyt,t,e)}hv.saslprep=hv;hv.default=hv;Nge.exports=hv});var Uge=m(W6=>{"use strict";Object.defineProperty(W6,"__esModule",{value:!0});W6.ScramSHA256=W6.ScramSHA1=void 0;var fyt=Fge(),I0=require("crypto"),VG=gr(),wl=Ne(),aT=et(),hyt=N1(),Bge=Ed(),uT=class extends hyt.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,i=r.credentials;if(!i)throw new wl.MongoMissingCredentialsError("AuthContext must provide credentials.");let s=await(0,aT.randomBytes)(24);return r.nonce=s,{...e,speculativeAuthenticate:{...$ge(n,i,s),db:i.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await Kge(this.cryptoMethod,n.speculativeAuthenticate,e):await myt(this.cryptoMethod,e)}};function Lge(t){return t.replace("=","=3D").replace(",","=2C")}function jge(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function $ge(t,e,r){let n=Lge(e.username);return{saslStart:1,mechanism:t==="sha1"?Bge.AuthMechanism.MONGODB_SCRAM_SHA1:Bge.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new VG.Binary(Buffer.concat([Buffer.from("n,,","utf8"),jge(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function myt(t,e){let{connection:r,credentials:n}=e;if(!n)throw new wl.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new wl.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let i=e.nonce,s=n.source,o=$ge(t,n,i),a=await r.command((0,aT.ns)(`${s}.$cmd`),o,void 0);await Kge(t,a,e)}async function Kge(t,e,r){let n=r.connection,i=r.credentials;if(!i)throw new wl.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new wl.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let s=r.nonce,o=i.source,a=Lge(i.username),u=i.password,c=t==="sha256"?(0,fyt.saslprep)(u):yyt(a,u),l=Buffer.isBuffer(e.payload)?new VG.Binary(e.payload):e.payload,d=qge(l),p=parseInt(d.i,10);if(p&&p<4096)throw new wl.MongoRuntimeError(`Server returned an invalid iteration count ${p}`);let f=d.s,h=d.r;if(h.startsWith("nonce"))throw new wl.MongoRuntimeError(`Server returned an invalid nonce: ${h}`);let g=`c=biws,r=${h}`,_=vyt(c,Buffer.from(f,"base64"),p,t),S=sT(t,_,"Client Key"),w=sT(t,_,"Server Key"),C=Eyt(t,S),A=[jge(a,s),l.toString("utf8"),g].join(","),O=sT(t,C,A),x=`p=${gyt(S,O)}`,R=[g,x].join(","),M=sT(t,w,A),I={saslContinue:1,conversationId:e.conversationId,payload:new VG.Binary(Buffer.from(R))},F=await n.command((0,aT.ns)(`${o}.$cmd`),I,void 0),B=qge(F.payload);if(!Syt(Buffer.from(B.v,"base64"),M))throw new wl.MongoRuntimeError("Server returned an invalid signature");if(F.done!==!1)return;let U={saslContinue:1,conversationId:F.conversationId,payload:Buffer.alloc(0)};await n.command((0,aT.ns)(`${o}.$cmd`),U,void 0)}function qge(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let i=0;i<n.length;i++){let s=(n[i].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[s[0]]=s[1]}return r}function yyt(t,e){if(typeof t!="string")throw new wl.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new wl.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new wl.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=I0.createHash("md5")}catch(n){throw I0.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function gyt(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let i=0;i<r;i+=1)n.push(t[i]^e[i]);return Buffer.from(n).toString("base64")}function Eyt(t,e){return I0.createHash(t).update(e).digest()}function sT(t,e,r){return I0.createHmac(t,e).update(r).digest()}var oT={},GG=0;function byt(){oT={},GG=0}var _yt={sha256:32,sha1:20};function vyt(t,e,r,n){let i=[t,e.toString("base64"),r].join("_");if(oT[i]!=null)return oT[i];let s=I0.pbkdf2Sync(t,e,r,_yt[n],n);return GG>=200&&byt(),oT[i]=s,GG+=1,s}function Syt(t,e){if(t.length!==e.length)return!1;if(typeof I0.timingSafeEqual=="function")return I0.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var HG=class extends uT{constructor(){super("sha1")}};W6.ScramSHA1=HG;var zG=class extends uT{constructor(){super("sha256")}};W6.ScramSHA256=zG});var Hge=m(cT=>{"use strict";Object.defineProperty(cT,"__esModule",{value:!0});cT.X509=void 0;var Vge=Ne(),wyt=et(),Ayt=N1(),WG=class extends Ayt.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new Vge.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:Gge(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new Vge.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,wyt.ns)("$external.$cmd"),Gge(n),void 0)}};cT.X509=WG;function Gge(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var QG=m(lT=>{"use strict";Object.defineProperty(lT,"__esModule",{value:!0});lT.MongoClientAuthProviders=void 0;var Cyt=xC(),Tyt=sge(),Jge=W7(),Oyt=PG(),xyt=vge(),zge=BG(),Iyt=Sge(),th=Ed(),Wge=Uge(),Ryt=Hge(),YG=Ne(),Dyt=new Map([[th.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:t})=>new Tyt.MongoDBAWS(t)],[th.AuthMechanism.MONGODB_CR,()=>{throw new YG.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[th.AuthMechanism.MONGODB_GSSAPI,()=>new Cyt.GSSAPI],[th.AuthMechanism.MONGODB_OIDC,t=>new Jge.MongoDBOIDC(kyt(t))],[th.AuthMechanism.MONGODB_PLAIN,()=>new Iyt.Plain],[th.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new Wge.ScramSHA1],[th.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new Wge.ScramSHA256],[th.AuthMechanism.MONGODB_X509,()=>new Ryt.X509]]),JG=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let i=Dyt.get(e);if(!i)throw new YG.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let s=i(r);return this.existingProviders.set(e,s),s}};lT.MongoClientAuthProviders=JG;function kyt(t){if(t.OIDC_HUMAN_CALLBACK)return new xyt.HumanCallbackWorkflow(new zge.TokenCache,t.OIDC_HUMAN_CALLBACK);if(t.OIDC_CALLBACK)return new Oyt.AutomatedCallbackWorkflow(new zge.TokenCache,t.OIDC_CALLBACK);{let e=t.ENVIRONMENT,r=Jge.OIDC_WORKFLOWS.get(e)?.();if(!r)throw new YG.MongoInvalidArgumentError(`Could not load workflow for environment ${t.ENVIRONMENT}`);return r}}});var XG=m(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0});pT.ClientBulkWriteOperation=void 0;var Myt=kr(),Pyt=et(),Nyt=Xn(),R0=Vr(),dT=class extends Nyt.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.SERVER_COMMAND_RESPONSE_TYPE=Myt.ClientBulkWriteCursorResponse,this.commandBuilder=e,this.options=r,this.ns=new Pyt.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(e){return e}buildCommandDocument(e,r){let n=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize);return this.canRetryWrite||(this.options.willRetryWrite=!1),n}};pT.ClientBulkWriteOperation=dT;(0,R0.defineAspects)(dT,[R0.Aspect.WRITE_OPERATION,R0.Aspect.SKIP_COLLATION,R0.Aspect.CURSOR_CREATING,R0.Aspect.RETRYABLE,R0.Aspect.COMMAND_BATCHING,R0.Aspect.SUPPORTS_RAW_DATA])});var Qge=m(fT=>{"use strict";Object.defineProperty(fT,"__esModule",{value:!0});fT.ClientBulkWriteCursor=void 0;var Fyt=XG(),Byt=ls(),Yge=et(),qyt=Ps(),ZG=class t extends qyt.AbstractCursor{constructor(e,r,n={}){super(e,new Yge.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,Yge.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new Fyt.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,Byt.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};fT.ClientBulkWriteCursor=ZG});var n2e=m(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.buildReplaceOneOperation=Un.buildUpdateManyOperation=Un.buildUpdateOneOperation=Un.buildDeleteManyOperation=Un.buildDeleteOneOperation=Un.buildInsertOneOperation=Un.ClientBulkWriteCommandBuilder=void 0;Un.buildOperation=nH;var eH=gr(),Xge=q3(),mv=Ne(),e2e=W2(),iH=et(),Zge=1e3,rH=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??iH.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let i=0,s=0,o=this.baseCommand(),a=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let u=this.models[this.currentModelIndex],c=u.namespace,l=a.get(c);if((u.name==="deleteMany"||u.name==="updateMany")&&(this.isBatchRetryable=!1),l!=null){let d=nH(u,l,this.pkFactory,this.options),p;try{p=eH.BSON.serialize(d)}catch(f){throw new mv.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:f})}if(tH("ops",p,n),i+p.length<e&&o.ops.documents.length<r)i=Zge+o.ops.push(d,p),this.currentModelIndex++;else break}else{a.set(c,s);let d={ns:c},p=nH(u,s,this.pkFactory,this.options),f,h;try{f=eH.BSON.serialize(d),h=eH.BSON.serialize(p)}catch(g){throw new mv.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:g})}if(tH("nsInfo",f,n),tH("ops",h,n),i+f.length+h.length<e&&o.ops.documents.length<r)i=Zge+o.nsInfo.push(d,f)+o.ops.push(p,h),s++,this.currentModelIndex++;else break}}return this.lastOperations=o.ops.documents,o}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new Xge.DocumentSequence("ops"),nsInfo:new Xge.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};Un.ClientBulkWriteCommandBuilder=rH;function tH(t,e,r){if(e.length>r)throw new mv.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var Lyt=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};Un.buildInsertOneOperation=Lyt;var jyt=(t,e)=>t2e(t,e,!1);Un.buildDeleteOneOperation=jyt;var $yt=(t,e)=>t2e(t,e,!0);Un.buildDeleteManyOperation=$yt;function t2e(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var Kyt=(t,e,r)=>r2e(t,e,!1,r);Un.buildUpdateOneOperation=Kyt;var Uyt=(t,e,r)=>r2e(t,e,!0,r);Un.buildUpdateManyOperation=Uyt;function Vyt(t,e){if(!(0,iH.hasAtomicOperators)(t,e))throw new mv.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function r2e(t,e,r,n){Vyt(t.update,n);let i={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(i.hint=t.hint),t.upsert&&(i.upsert=t.upsert),t.arrayFilters&&(i.arrayFilters=t.arrayFilters),t.collation&&(i.collation=t.collation),!r&&"sort"in t&&t.sort!=null&&(i.sort=(0,e2e.formatSort)(t.sort)),i}var Gyt=(t,e)=>{if((0,iH.hasAtomicOperators)(t.replacement))throw new mv.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),t.sort!=null&&(r.sort=(0,e2e.formatSort)(t.sort)),r};Un.buildReplaceOneOperation=Gyt;function nH(t,e,r,n){switch(t.name){case"insertOne":return(0,Un.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,Un.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,Un.buildDeleteManyOperation)(t,e);case"updateOne":return(0,Un.buildUpdateOneOperation)(t,e,n);case"updateMany":return(0,Un.buildUpdateManyOperation)(t,e,n);case"replaceOne":return(0,Un.buildReplaceOneOperation)(t,e)}}});var i2e=m(hT=>{"use strict";Object.defineProperty(hT,"__esModule",{value:!0});hT.ClientBulkWriteResultsMerger=void 0;var Hyt=O0(),zyt=Ne(),Wyt={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},sH=class{static unacknowledged(){return Wyt}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let i=new zyt.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw i.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),i.partialResult=this.result,i}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof Hyt.MongoWriteConcernError){let i=n.result;if(r={insertedCount:i.nInserted,upsertedCount:i.nUpserted,matchedCount:i.nMatched,modifiedCount:i.nModified,deletedCount:i.nDeleted,writeConcernError:i.writeConcernError},this.options.verboseResults&&i.cursor.firstBatch)for(let s of i.cursor.firstBatch)s.ok===1&&this.processDocument(e,s)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let i={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(i.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,i)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};hT.ClientBulkWriteResultsMerger=sH});var a2e=m(mT=>{"use strict";Object.defineProperty(mT,"__esModule",{value:!0});mT.ClientBulkWriteExecutor=void 0;var s2e=Ps(),Jyt=Qge(),D0=Ne(),Yyt=$i(),Qyt=et(),Xyt=Io(),Zyt=ls(),egt=XG(),tgt=n2e(),o2e=i2e(),oH=class{constructor(e,r,n){if(r.length===0)throw new D0.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=Xyt.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new D0.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new D0.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new tgt.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,Qyt.resolveTimeoutOptions)(this.client,this.options),i=Yyt.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let s=new egt.ClientBulkWriteOperation(r,this.options);await(0,Zyt.executeOperation)(this.client,s,i)}return o2e.ClientBulkWriteResultsMerger.unacknowledged()}else{let s=new o2e.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let o=new s2e.CursorTimeoutContext(i,Symbol()),a={...this.options,timeoutContext:o,...n.timeoutMS!=null&&{timeoutMode:s2e.CursorTimeoutMode.LIFETIME}},u=new Jyt.ClientBulkWriteCursor(this.client,r,a);try{await s.merge(u)}catch(c){if(c instanceof D0.MongoServerError&&!(c instanceof D0.MongoClientBulkWriteError)){let l=new D0.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw l.cause=c,l.partialResult=s.bulkWriteResult,l}else throw c}}if(s.writeConcernErrors.length>0||s.writeErrors.size>0){let o=new D0.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw o.writeConcernErrors=s.writeConcernErrors,o.writeErrors=s.writeErrors,o.partialResult=s.bulkWriteResult,o}return s.bulkWriteResult}}};mT.ClientBulkWriteExecutor=oH});var dH=m(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.WaitingForSuitableServerEvent=tc.ServerSelectionSucceededEvent=tc.ServerSelectionFailedEvent=tc.ServerSelectionStartedEvent=tc.ServerSelectionEvent=void 0;var rgt=et(),yT=yi(),k0=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};tc.ServerSelectionEvent=k0;var aH=class extends k0{constructor(e,r,n){super(e,r,n),this.name=yT.SERVER_SELECTION_STARTED,this.message="Server selection started"}};tc.ServerSelectionStartedEvent=aH;var uH=class extends k0{constructor(e,r,n,i){super(e,r,i),this.name=yT.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};tc.ServerSelectionFailedEvent=uH;var cH=class extends k0{constructor(e,r,n,i){super(e,r,i),this.name=yT.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:s,port:o}=rgt.HostAddress.fromString(n).toHostPort();this.serverHost=s,this.serverPort=o}};tc.ServerSelectionSucceededEvent=cH;var lH=class extends k0{constructor(e,r,n,i){super(e,r,i),this.name=yT.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};tc.WaitingForSuitableServerEvent=lH});var fH=m(J6=>{"use strict";Object.defineProperty(J6,"__esModule",{value:!0});J6.SrvPoller=J6.SrvPollingEvent=void 0;var ngt=require("dns"),pH=require("timers"),igt=Ne(),sgt=Qa(),yv=et(),gT=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>yv.HostAddress.fromSrvRecord(e).toString()))}};J6.SrvPollingEvent=gT;var ET=class t extends sgt.TypedEventEmitter{constructor(e){if(super(),this.on("error",yv.noop),!e||!e.srvHost)throw new igt.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,pH.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,pH.clearTimeout)(this._timeout),this._timeout=(0,pH.setTimeout)(()=>{this._poll().then(void 0,yv.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new gT(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await ngt.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let i of r)try{(0,yv.checkParentDomainMatch)(i.name,this.srvHost),n.push(i)}catch(s){(0,yv.squashError)(s)}if(!n.length){this.failure();return}this.success(n)}};J6.SrvPoller=ET;ET.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var m2e=m(Y6=>{"use strict";Object.defineProperty(Y6,"__esModule",{value:!0});Y6.ServerCapabilities=Y6.Topology=void 0;var ogt=uG(),Sa=yi(),Cd=Ne(),Pn=O1(),agt=Qa(),gv=cs(),hH=$i(),va=et(),Kt=Wa(),rh=_7(),u2e=QV(),yH=Y3(),mH=a3(),nh=dH(),bT=fH(),c2e=fV(),ugt=0,Ev=(0,va.makeStateMachine)({[Kt.STATE_CLOSED]:[Kt.STATE_CLOSED,Kt.STATE_CONNECTING],[Kt.STATE_CONNECTING]:[Kt.STATE_CONNECTING,Kt.STATE_CLOSING,Kt.STATE_CONNECTED,Kt.STATE_CLOSED],[Kt.STATE_CONNECTED]:[Kt.STATE_CONNECTED,Kt.STATE_CLOSING,Kt.STATE_CLOSED],[Kt.STATE_CLOSING]:[Kt.STATE_CLOSING,Kt.STATE_CLOSED]}),oo=class t extends agt.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",va.noop),this.client=e,n=n??{hosts:[va.HostAddress.fromString("localhost:27017")],...Object.fromEntries(ogt.DEFAULT_OPTIONS.entries())},typeof r=="string"?r=[va.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let i=[];for(let c of r)if(typeof c=="string")i.push(va.HostAddress.fromString(c));else if(c instanceof va.HostAddress)i.push(c);else throw new Cd.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let s=cgt(n),o=ugt++,a=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=i.length?i:(0,va.shuffle)(i,n.srvMaxHosts),u=new Map;for(let c of a)u.set(c.toString(),new yH.ServerDescription(c));this.waitQueue=new va.List,this.s={id:o,options:n,seedlist:i,state:Kt.STATE_CLOSED,description:new c2e.TopologyDescription(s,u,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new bT.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,i=r!==Kt.TopologyType.Sharded&&n===Kt.TopologyType.Sharded,o=!!this.s.srvPoller?.listeners(bT.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);i&&!o&&(this.s.srvPoller?.on(bT.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(l2e(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new rh.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new _T(this.lastHello())}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===Kt.STATE_CONNECTED)return this;Ev(this,Kt.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new rh.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new rh.TopologyDescriptionChangedEvent(this.s.id,new c2e.TopologyDescription(Kt.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(a=>[a.address,f2e(this,a)])),this.s.options.loadBalanced)for(let a of r){let u=new yH.ServerDescription(a.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(u)}let n=this.client.s.options.serverSelectionTimeoutMS,i=e.readPreference??gv.ReadPreference.primary,s=hH.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),o={operationName:"handshake",...e,timeoutContext:s};try{let a=await this.selectServer((0,mH.readPreferenceServerSelector)(i),o);if(!(this.s.options.__skipPingOnConnect===!0)&&this.s.credentials){let c=await a.pool.checkOut({timeoutContext:s});return a.pool.checkIn(c),Ev(this,Kt.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}return Ev(this,Kt.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}catch(a){throw this.close(),a}}closeCheckedOutConnections(){for(let e of this.s.servers.values())return e.closeCheckedOutConnections()}close(){if(!(this.s.state===Kt.STATE_CLOSED||this.s.state===Kt.STATE_CLOSING)){for(let e of this.s.servers.values())p2e(e,this);this.s.servers.clear(),Ev(this,Kt.STATE_CLOSING),h2e(this.waitQueue,new Cd.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(bT.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),Ev(this,Kt.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new rh.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,mH.readPreferenceServerSelector)(gv.ReadPreference.fromString(e));else{let f;e instanceof gv.ReadPreference?f=e:(gv.ReadPreference.translate(r),f=r.readPreference||gv.ReadPreference.primary),n=(0,mH.readPreferenceServerSelector)(f)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.ServerSelectionStartedEvent(e,this.description,r.operationName));let i;r.timeoutContext?i=r.timeoutContext.serverSelectionTimeout:i=hH.Timeout.expires(r.serverSelectionTimeoutMS??0);let s=this.description.type===Kt.TopologyType.Sharded,o=r.session,a=o&&o.transaction;if(s&&a&&a.server)return this.client.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.ServerSelectionSucceededEvent(e,this.description,a.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&i?.clear(),a.server;let{promise:u,resolve:c,reject:l}=(0,va.promiseWithResolvers)(),d={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:a,resolve:c,reject:l,cancelled:!1,startTime:(0,va.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer},p=(0,va.addAbortListener)(r.signal,function(){d.cancelled=!0,l(this.reason)});this.waitQueue.push(d),d2e(this);try{i?.throwIfExpired();let f=await(i?Promise.race([u,i]):u);return r.timeoutContext?.csotEnabled()&&f.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=f.description.minRoundTripTime),f}catch(f){if(hH.TimeoutError.is(f)){d.cancelled=!0;let h=new Cd.MongoServerSelectionError(`Server selection timed out after ${i?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.ServerSelectionFailedEvent(e,this.description,h,r.operationName)),r.timeoutContext?.csotEnabled()?new Cd.MongoOperationTimeoutError("Timed out during server selection",{cause:h}):h}throw f}finally{p?.[va.kDispose](),r.timeoutContext?.clearServerSelectionTimeout&&i?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||lgt(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let i=e.$clusterTime;i&&(0,Kt._advanceClusterTime)(this,i);let s=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new Cd.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!s){let o=this.s.description.servers.get(e.address);o&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new rh.ServerDescriptionChangedEvent(this.s.id,e.address,n,o))}l2e(this,e),this.waitQueue.length>0&&d2e(this),s||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new rh.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===Kt.STATE_CONNECTED}isDestroyed(){return this.s.state===Kt.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(i=>i.type!==Kt.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};Y6.Topology=oo;oo.SERVER_OPENING=Sa.SERVER_OPENING;oo.SERVER_CLOSED=Sa.SERVER_CLOSED;oo.SERVER_DESCRIPTION_CHANGED=Sa.SERVER_DESCRIPTION_CHANGED;oo.TOPOLOGY_OPENING=Sa.TOPOLOGY_OPENING;oo.TOPOLOGY_CLOSED=Sa.TOPOLOGY_CLOSED;oo.TOPOLOGY_DESCRIPTION_CHANGED=Sa.TOPOLOGY_DESCRIPTION_CHANGED;oo.ERROR=Sa.ERROR;oo.OPEN=Sa.OPEN;oo.CONNECT=Sa.CONNECT;oo.CLOSE=Sa.CLOSE;oo.TIMEOUT=Sa.TIMEOUT;function p2e(t,e){for(let r of Sa.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.close(),e.emitAndLog(oo.SERVER_CLOSED,new rh.ServerClosedEvent(e.s.id,t.description.address));for(let r of Sa.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function cgt(t){return t?.directConnection?Kt.TopologyType.Single:t?.replicaSet?Kt.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?Kt.TopologyType.LoadBalanced:Kt.TopologyType.Unknown}function f2e(t,e){t.emitAndLog(oo.SERVER_OPENING,new rh.ServerOpeningEvent(t.s.id,e.address));let r=new u2e.Server(t,e,t.s.options);for(let n of Sa.SERVER_RELAY_EVENTS)r.on(n,i=>t.emit(n,i));return r.on(u2e.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function l2e(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof Cd.MongoError&&e.error.hasErrorLabel(Cd.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(Cd.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==Kt.ServerType.Unknown&&n===Kt.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=f2e(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let i=t.s.servers.get(n);t.s.servers.delete(n),i&&p2e(i,t)}}function h2e(t,e){for(;t.length;){let r=t.shift();r&&(r.cancelled||(r.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function d2e(t){if(t.s.state===Kt.STATE_CLOSED){h2e(t.waitQueue,new Cd.MongoTopologyClosedError);return}let e=t.description.type===Kt.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t.waitQueue.length;for(let i=0;i<n;++i){let s=t.waitQueue.shift();if(!s||s.cancelled)continue;let o;try{let c=s.serverSelector,l=s.previousServer;o=c?c(t.description,r,l?[l]:[]):r}catch(c){t.client.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);continue}let a;if(o.length===0){s.waitingLogged||(t.client.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.WaitingForSuitableServerEvent(s.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,va.now)()-s.startTime):-1,s.operationName)),s.waitingLogged=!0),t.waitQueue.push(s);continue}else if(o.length===1)a=t.s.servers.get(o[0].address);else{let c=(0,va.shuffle)(o,2),l=t.s.servers.get(c[0].address),d=t.s.servers.get(c[1].address);a=l&&d&&l.s.operationCount<d.s.operationCount?l:d}if(!a){let c=new Cd.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);return}let u=s.transaction;e&&u&&u.isActive&&a&&u.pinServer(a),t.client.mongoLogger?.willLog(Pn.MongoLoggableComponent.SERVER_SELECTION,Pn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Pn.MongoLoggableComponent.SERVER_SELECTION,new nh.ServerSelectionSucceededEvent(s.serverSelector,s.topologyDescription,a.pool.address,s.operationName)),s.resolve(a)}if(t.waitQueue.length>0)for(let[,i]of t.s.servers)process.nextTick(function(){return i.requestCheck()})}function lgt(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,yH.compareTopologyVersion)(n,e.topologyVersion)>0}var _T=class{constructor(e){this.minWireVersion=e.minWireVersion||0,this.maxWireVersion=e.maxWireVersion||0}get hasAggregationCursor(){return!0}get hasWriteCommands(){return!0}get hasTextSearch(){return!0}get hasAuthCommands(){return!0}get hasListCollectionsCommand(){return!0}get hasListIndexesCommand(){return!0}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return!0}get commandsTakeCollation(){return!0}};Y6.ServerCapabilities=_T});var H1=m(Q6=>{"use strict";Object.defineProperty(Q6,"__esModule",{value:!0});Q6.MongoClient=Q6.ServerApiVersion=void 0;var gH=require("fs"),dgt=gr(),pgt=x0(),fgt=IC(),hgt=Ed(),EH=HK(),mgt=kr(),y2e=uG(),ygt=yi(),ggt=V7(),bH=Ne(),Egt=QG(),g2e=O1(),bgt=Qa(),_gt=a2e(),vgt=ls(),Sgt=Vr(),E2e=cs(),wgt=x6(),Agt=a3(),b2e=m2e(),_2e=O6(),Gi=et();Q6.ServerApiVersion=Object.freeze({v1:"1"});var vT=class extends bgt.TypedEventEmitter{constructor(e,r){super(),this.driverInfoList=[],this.on("error",Gi.noop),this.options=(0,y2e.parseOptions)(e,this,r),this.appendMetadata(this.options.driverInfo);let n=Object.values(this.options.mongoLoggerOptions.componentSeverities).some(s=>s!==g2e.SeverityLevel.OFF);this.mongoLogger=n?new g2e.MongoLogger(this.options.mongoLoggerOptions):void 0;let i=this;this.s={url:e,bsonOptions:(0,dgt.resolveBSONOptions)(this.options),namespace:(0,Gi.ns)("admin"),hasBeenClosed:!1,sessionPool:new _2e.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new Egt.MongoClientAuthProviders,get options(){return i.options},get readConcern(){return i.options.readConcern},get writeConcern(){return i.options.writeConcern},get readPreference(){return i.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}appendMetadata(e){this.driverInfoList.some(n=>(0,EH.isDriverInfoEqual)(n,e))||(this.driverInfoList.push(e),this.options.metadata=(0,EH.makeClientMetadata)(this.driverInfoList,this.options),this.options.extendedMetadata=(0,EH.addContainerMetadata)(this.options.metadata).then(void 0,Gi.squashError).then(n=>n??{}))}checkForNonGenuineHosts(){let e=this.options.hosts.filter(s=>(0,Gi.isHostMatch)(Gi.DOCUMENT_DB_CHECK,s.host)),r=(0,Gi.isHostMatch)(Gi.DOCUMENT_DB_CHECK,this.options.srvHost),n=this.options.hosts.filter(s=>(0,Gi.isHostMatch)(Gi.COSMOS_DB_CHECK,s.host)),i=(0,Gi.isHostMatch)(Gi.COSMOS_DB_CHECK,this.options.srvHost);e.length!==0||r?this.mongoLogger?.info("client",Gi.DOCUMENT_DB_MSG):(n.length!==0||i)&&this.mongoLogger?.info("client",Gi.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(e){this.options.monitorCommands=e}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new bH.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new _gt.ClientBulkWriteExecutor(this,e,(0,Gi.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this.options;if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await gH.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await gH.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await gH.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,y2e.resolveSRVRecord)(e);for(let[i,s]of n.entries())e.hosts[i]=s}if(e.credentials?.mechanism===hgt.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||fgt.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let s of e.hosts)if(!(0,Gi.hostMatchesWildcards)(s.toHostPort().host,n))throw new bH.MongoInvalidArgumentError(`Host '${s}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new b2e.Topology(this,e.hosts,e),this.topology.once(b2e.Topology.OPEN,()=>this.emit("open",this));for(let n of ygt.MONGO_CLIENT_EVENTS)this.topology.on(n,(...i)=>this.emit(n,...i));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let e=Array.from(this.s.activeCursors,c=>c.close());this.s.activeCursors.clear(),await Promise.all(e);let r=Array.from(this.s.activeSessions,c=>c.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;let n=(0,Agt.readPreferenceServerSelector)(E2e.ReadPreference.primaryPreferred),i=this.topology.description,s=Array.from(i.servers.values());if(n(i,s).length!==0){let c=Array.from(this.s.sessionPool.sessions,({id:l})=>l);if(c.length!==0)try{class l extends Sgt.AbstractOperation{constructor(){super(...arguments),this.ns=Gi.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=mgt.MongoDBResponse}buildCommand(p,f){return{endSessions:c}}buildOptions(p){return{timeoutContext:p,readPreference:E2e.ReadPreference.primaryPreferred,noResponse:!0}}get commandName(){return"endSessions"}}await(0,vgt.executeOperation)(this,new l)}catch(l){(0,Gi.squashError)(l)}}let a=this.topology;this.topology=void 0,a.close();let{encrypter:u}=this.options;u&&await u.close(this)}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this.options,r);return new ggt.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new _2e.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this.options);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},i=typeof e=="function"?e:r;if(i==null)throw new bH.MongoInvalidArgumentError("Missing required callback parameter");let s=this.startSession(n);try{return await i(s)}finally{try{await s.endSession()}catch(o){(0,Gi.squashError)(o)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new pgt.ChangeStream(this,e,(0,Gi.resolveOptions)(this,r))}};Q6.MongoClient=vT;(0,wgt.configureResourceManagement)(vT.prototype)});var x6=m(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0});ST.configureResourceManagement=bv;ST.configureExplicitResourceManagement=Cgt;function bv(t){Symbol.asyncDispose&&Object.defineProperty(t,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function Cgt(){let{MongoClient:t}=H1(),{ClientSession:e}=O6(),{AbstractCursor:r}=Ps(),{ChangeStream:n}=x0();bv(t.prototype),bv(e.prototype),bv(r.prototype),bv(n.prototype)}});var Ps=m(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.CursorTimeoutContext=ni.AbstractCursor=ni.CursorTimeoutMode=ni.CURSOR_FLAGS=void 0;var A2e=require("stream"),X6=gr(),Hi=Ne(),Tgt=Qa(),v2e=ls(),Ogt=tK(),xgt=Wfe(),S2e=nl(),wT=cs(),Igt=x6(),Rgt=O6(),_H=$i(),ru=et();ni.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function w2e(){this.client.s.activeCursors.delete(this)}ni.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var _v=class extends Tgt.TypedEventEmitter{constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,this.on("error",ru.noop),!e.s.isMongoClient)throw new Hi.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof wT.ReadPreference?n.readPreference:wT.ReadPreference.primary,...(0,X6.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new Hi.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=ni.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=ni.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===ni.CursorTimeoutMode.LIFETIME)throw new Hi.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new Hi.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===ni.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let i=S2e.ReadConcern.fromOptions(n);i&&(this.cursorOptions.readConcern=i),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),this.cursorSession=n.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext,this.signal=n.signal,this.abortListener=(0,ru.addAbortListener)(this.signal,()=>{this.close().then(void 0,ru.squashError)}),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){this.cursorClient.s.activeCursors.add(this),this.listeners("close").includes(w2e)||this.once("close",w2e)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let i=0;i<n;i++){let s=this.documents?.shift(this.deserializationOptions);s!=null&&r.push(s)}return r}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,ru.squashError)(e)}}}stream(e){let r=new vH(this),n=(0,ru.addAbortListener)(this.signal,function(){r.destroy(this.reason)});if(r.once("end",()=>{n?.[ru.kDispose]()}),e?.transform){let i=e.transform,s=r.pipe(new A2e.Transform({objectMode:!0,highWaterMark:1,transform(o,a,u){try{let c=i(o);u(void 0,c)}catch(c){u(c)}}}));return r.on("error",o=>s.emit("error",o)),s}return r}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===X6.Long.ZERO)return!1;this.cursorOptions.timeoutMode===ni.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===ni.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===X6.Long.ZERO)throw new Hi.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===ni.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===ni.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===X6.Long.ZERO)throw new Hi.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===ni.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===ni.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(this.signal?.throwIfAborted(),typeof e!="function")throw new Hi.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let i of n)e.push(await this.transformDocument(i));else e.push(...n)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!ni.CURSOR_FLAGS.includes(e))throw new Hi.MongoInvalidArgumentError(`Flag ${e} is not one of ${ni.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new Hi.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof wT.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=wT.ReadPreference.fromString(e);else throw new Hi.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=S2e.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Hi.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new Hi.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new Hi.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new Hi.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");this.initialized&&(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1&&(this.cursorSession.hasEnded||this.cursorSession.endSession().then(void 0,ru.squashError),this.cursorSession=null))}async getMore(e){if(this.cursorId==null)throw new Hi.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new Hi.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new Hi.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r={...this.cursorOptions,session:this.cursorSession,batchSize:e},n=new Ogt.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,r);return await(0,v2e.executeOperation)(this.cursorClient,n,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new vv(_H.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))return;let e=this.cursorOptions.batchSize||1e3;try{let r=await this.getMore(e);this.cursorId=r.id,this.documents=r}catch(r){try{await this.cleanup(void 0,r)}catch(n){(0,ru.squashError)(n)}throw r}this.isDead&&await this.cleanup()}async cleanup(e,r){this.abortListener?.[ru.kDispose](),this.isClosed=!0;let n=()=>e!=null?(this.timeoutContext?.clear(),new vv(_H.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();await(async o=>{try{await o()}finally{this.emitClose()}})(async()=>{let o=this.cursorSession;if(o)try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!o.hasEnded){this.isKilled=!0;let a=this.cursorId;this.cursorId=X6.Long.ZERO,await(0,v2e.executeOperation)(this.cursorClient,new xgt.KillCursorsOperation(a,this.cursorNamespace,this.selectedServer,{session:o}),n())}}catch(a){(0,ru.squashError)(a)}finally{o.owner===this&&await o.endSession({error:r}),o.inTransaction()||(0,Rgt.maybeClearPinnedConnection)(o,{error:r})}})}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new Hi.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,ru.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new Hi.MongoCursorInUseError}};ni.AbstractCursor=_v;_v.CLOSE="close";var vH=class extends A2e.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===X6.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,ru.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,ru.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e)).catch(e=>{this._readInProgress=!1,this.destroy(e)})}};(0,Igt.configureResourceManagement)(_v.prototype);var vv=class t extends _H.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};ni.CursorTimeoutContext=vv});var CT=m(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0});AT.ExplainableCursor=void 0;var Dgt=Ps(),SH=class extends Dgt.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,i;return e==null&&r==null?(n=void 0,i=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,i=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,i=r),{timeout:i,explain:n}}};AT.ExplainableCursor=SH});var cv=m(TT=>{"use strict";Object.defineProperty(TT,"__esModule",{value:!0});TT.AggregationCursor=void 0;var wH=Ne(),C2e=i3(),T2e=l3(),O2e=ls(),kgt=et(),x2e=Ps(),Mgt=CT(),AH=class t extends Mgt.ExplainableCursor{constructor(e,r,n=[],i={}){super(e,r,i),this.pipeline=n,this.aggregateOptions=i;let s=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===x2e.CursorTimeoutMode.ITERATION&&(s?.$merge!=null||s?.$out!=null))throw new wH.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,kgt.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,C2e.validateExplainTimeoutOptions)(r,C2e.Explain.fromOptions(r))}catch{throw new wH.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new T2e.AggregateOperation(this.namespace,this.pipeline,r),i=await(0,O2e.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:i}}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,O2e.executeOperation)(this.client,new T2e.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===x2e.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new wH.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};TT.AggregationCursor=AH});var CH=m(IT=>{"use strict";Object.defineProperty(IT,"__esModule",{value:!0});IT.CountOperation=void 0;var Pgt=kr(),Ngt=Xn(),OT=Vr(),xT=class extends Ngt.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.SERVER_COMMAND_RESPONSE_TYPE=Pgt.MongoDBResponse,this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}buildCommandDocument(e,r){let n=this.options,i={count:this.collectionName,query:this.query};return typeof n.limit=="number"&&(i.limit=n.limit),typeof n.skip=="number"&&(i.skip=n.skip),n.hint!=null&&(i.hint=n.hint),typeof n.maxTimeMS=="number"&&(i.maxTimeMS=n.maxTimeMS),i}handleOk(e){return e.getNumber("n")??0}};IT.CountOperation=xT;(0,OT.defineAspects)(xT,[OT.Aspect.READ_OPERATION,OT.Aspect.RETRYABLE,OT.Aspect.SUPPORTS_RAW_DATA])});var I2e=m(DT=>{"use strict";Object.defineProperty(DT,"__esModule",{value:!0});DT.FindOperation=void 0;var TH=kr(),Fgt=Ne(),Bgt=W2(),qgt=et(),Lgt=Xn(),Z6=Vr(),RT=class extends Lgt.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=TH.CursorResponse,this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new Fgt.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?TH.ExplainedCursorResponse:TH.CursorResponse}get commandName(){return"find"}buildOptions(e){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:e}}handleOk(e){return e}buildCommandDocument(){return jgt(this.ns,this.filter,this.options)}};DT.FindOperation=RT;function jgt(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,Bgt.formatSort)(r.sort)),r.projection){let i=r.projection;i&&Array.isArray(i)&&(i=i.length?i.reduce((s,o)=>(s[o]=1,s),{}):{_id:1}),n.projection=i}return r.hint&&(n.hint=(0,qgt.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?n.limit=-r.batchSize:r.batchSize===r.limit?n.batchSize=r.batchSize+1:n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,Z6.defineAspects)(RT,[Z6.Aspect.READ_OPERATION,Z6.Aspect.RETRYABLE,Z6.Aspect.EXPLAINABLE,Z6.Aspect.CURSOR_CREATING,Z6.Aspect.SUPPORTS_RAW_DATA])});var DH=m(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});eE.FindCursor=eE.FLAGS=void 0;var $gt=kr(),rc=Ne(),R2e=i3(),Kgt=CH(),OH=ls(),D2e=I2e(),xH=W2(),IH=et(),Ugt=CT();eE.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var RH=class t extends Ugt.ExplainableCursor{constructor(e,r,n={},i={}){super(e,r,i),this.numReturned=0,this.cursorFilter=n,this.findOptions=i,i.sort!=null&&(this.findOptions.sort=(0,xH.formatSort)(i.sort))}clone(){let e=(0,IH.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,R2e.validateExplainTimeoutOptions)(r,R2e.Explain.fromOptions(r))}catch{throw new rc.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new D2e.FindOperation(this.namespace,this.cursorFilter,r),i=await(0,OH.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=i.batchSize,{server:n.server,session:e,response:i}}async getMore(e){let r=this.numReturned;if(r){let i=this.findOptions.limit;if(e=i&&i>0&&r+e>i?i-r:e,e<=0){try{await this.close()}catch(s){(0,IH.squashError)(s)}return $gt.CursorResponse.emptyGetMore}}let n=await super.getMore(e);return this.numReturned=this.numReturned+n.batchSize,n}async count(e){if((0,IH.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new rc.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,OH.executeOperation)(this.client,new Kgt.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,OH.executeOperation)(this.client,new D2e.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new rc.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,xH.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new rc.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new rc.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new rc.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new rc.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,xH.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new rc.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new rc.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new rc.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new rc.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new rc.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};eE.FindCursor=RH});var MH=m(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});kT.ListIndexesCursor=void 0;var Vgt=ls(),Ggt=av(),Hgt=Ps(),kH=class t extends Hgt.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new Ggt.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,Vgt.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};kT.ListIndexesCursor=kH});var k2e=m(MT=>{"use strict";Object.defineProperty(MT,"__esModule",{value:!0});MT.ListSearchIndexesCursor=void 0;var zgt=cv(),PH=class extends zgt.AggregationCursor{constructor({fullNamespace:e,client:r},n,i={}){let s=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,s,i)}};MT.ListSearchIndexesCursor=PH});var M2e=m(NT=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0});NT.DistinctOperation=void 0;var Wgt=kr(),Jgt=Xn(),Sv=Vr(),PT=class extends Jgt.CommandOperation{constructor(e,r,n,i){super(e,i),this.SERVER_COMMAND_RESPONSE_TYPE=Wgt.MongoDBResponse,this.options=i??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}buildCommandDocument(e){let r={distinct:this.collection.collectionName,key:this.key,query:this.query};return this.options.comment!==void 0&&(r.comment=this.options.comment),this.options.hint!=null&&(r.hint=this.options.hint),r}handleOk(e){return this.explain?e.toObject(this.bsonOptions):e.toObject(this.bsonOptions).values}};NT.DistinctOperation=PT;(0,Sv.defineAspects)(PT,[Sv.Aspect.READ_OPERATION,Sv.Aspect.RETRYABLE,Sv.Aspect.EXPLAINABLE,Sv.Aspect.SUPPORTS_RAW_DATA])});var P2e=m(BT=>{"use strict";Object.defineProperty(BT,"__esModule",{value:!0});BT.EstimatedDocumentCountOperation=void 0;var Ygt=kr(),Qgt=Xn(),wv=Vr(),FT=class extends Qgt.CommandOperation{constructor(e,r={}){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Ygt.MongoDBResponse,this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}buildCommandDocument(e,r){let n={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(n.comment=this.options.comment),n}handleOk(e){return e.getNumber("n")??0}};BT.EstimatedDocumentCountOperation=FT;(0,wv.defineAspects)(FT,[wv.Aspect.READ_OPERATION,wv.Aspect.RETRYABLE,wv.Aspect.CURSOR_CREATING,wv.Aspect.SUPPORTS_RAW_DATA])});var qH=m(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.FindOneAndUpdateOperation=nu.FindOneAndReplaceOperation=nu.FindOneAndDeleteOperation=nu.FindAndModifyOperation=nu.ReturnDocument=void 0;var Xgt=kr(),ih=Ne(),Zgt=cs(),e2t=W2(),qT=et(),t2t=Xn(),Av=Vr();nu.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function N2e(t,e){return t.new=e.returnDocument===nu.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var M0=class extends t2t.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Xgt.MongoDBResponse,this.options=n,this.readPreference=Zgt.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}buildCommandDocument(e,r){let n=this.options,i={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};n.includeResultMetadata??=!1;let s=(0,e2t.formatSort)(n.sort);if(s&&(i.sort=s),n.projection&&(i.fields=n.projection),n.maxTimeMS&&(i.maxTimeMS=n.maxTimeMS),n.writeConcern&&(i.writeConcern=n.writeConcern),n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),(0,qT.decorateWithCollation)(i,n),n.hint){if(this.writeConcern?.w===0&&(0,qT.maxWireVersion)(e)<9)throw new ih.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");i.hint=n.hint}return i}handleOk(e){let r=super.handleOk(e);return this.options.includeResultMetadata?r:r.value??null}};nu.FindAndModifyOperation=M0;var NH=class extends M0{constructor(e,r,n){if(r==null||typeof r!="object")throw new ih.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n)}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.remove=!0,n}};nu.FindOneAndDeleteOperation=NH;var FH=class extends M0{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new ih.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new ih.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,qT.hasAtomicOperators)(n))throw new ih.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,i),this.replacement=n}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.replacement,N2e(n,this.options),n}};nu.FindOneAndReplaceOperation=FH;var BH=class extends M0{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new ih.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new ih.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,qT.hasAtomicOperators)(n,i))throw new ih.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,i),this.update=n,this.options=i}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.update,N2e(n,this.options),this.options.arrayFilters&&(n.arrayFilters=this.options.arrayFilters),n}};nu.FindOneAndUpdateOperation=BH;(0,Av.defineAspects)(M0,[Av.Aspect.WRITE_OPERATION,Av.Aspect.RETRYABLE,Av.Aspect.EXPLAINABLE,Av.Aspect.SUPPORTS_RAW_DATA])});var F2e=m(LT=>{"use strict";Object.defineProperty(LT,"__esModule",{value:!0});LT.CreateSearchIndexesOperation=void 0;var r2t=kr(),n2t=Vr(),LH=class extends n2t.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=r2t.MongoDBResponse,this.collection=e,this.descriptions=r,this.ns=e.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(e,r){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(e){return super.handleOk(e).indexesCreated.map(r=>r.name)}buildOptions(e){return{session:this.session,timeoutContext:e}}};LT.CreateSearchIndexesOperation=LH});var q2e=m(jT=>{"use strict";Object.defineProperty(jT,"__esModule",{value:!0});jT.DropSearchIndexOperation=void 0;var i2t=kr(),B2e=Ne(),s2t=Vr(),jH=class extends s2t.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=i2t.MongoDBResponse,this.collection=e,this.name=r,this.ns=e.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(e,r){let i={dropSearchIndex:this.collection.fullNamespace.collection};return typeof this.name=="string"&&(i.name=this.name),i}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){if(!(e instanceof B2e.MongoServerError&&e.code===B2e.MONGODB_ERROR_CODES.NamespaceNotFound))throw e}};jT.DropSearchIndexOperation=jH});var L2e=m($T=>{"use strict";Object.defineProperty($T,"__esModule",{value:!0});$T.UpdateSearchIndexOperation=void 0;var o2t=kr(),a2t=Vr(),$H=class extends a2t.AbstractOperation{constructor(e,r,n){super(),this.SERVER_COMMAND_RESPONSE_TYPE=o2t.MongoDBResponse,this.collection=e,this.name=r,this.definition=n,this.ns=e.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(e,r){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}};$T.UpdateSearchIndexOperation=$H});var K6=m(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0});UT.Collection=void 0;var u2t=gr(),c2t=H$(),l2t=W$(),d2t=x0(),p2t=cv(),f2t=DH(),h2t=MH(),m2t=k2e(),tE=Ne(),y2t=CH(),j2e=S$(),g2t=M2e(),E2t=P2e(),_i=ls(),KH=qH(),KT=av(),b2t=x$(),_2t=bG(),v2t=F2e(),S2t=q2e(),w2t=L2e(),UH=D$(),A2t=nl(),VH=cs(),Kr=et(),$2e=Io(),GH=class{constructor(e,r,n){this.db=e,this.s={db:e,options:n,namespace:new Kr.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??Kr.DEFAULT_PK_FACTORY,readPreference:VH.ReadPreference.fromOptions(n),bsonOptions:(0,u2t.resolveBSONOptions)(n,e),readConcern:A2t.ReadConcern.fromOptions(n),writeConcern:$2e.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,Kr.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,_i.executeOperation)(this.client,new b2t.InsertOneOperation(this,e,(0,Kr.resolveOptions)(this,r)))}async insertMany(e,r){if(!Array.isArray(e))throw new tE.MongoInvalidArgumentError('Argument "docs" must be an array of documents');r=(0,Kr.resolveOptions)(this,r??{});let n=$2e.WriteConcern.fromOptions(r)?.w!==0;try{let i=await this.bulkWrite(e.map(s=>({insertOne:{document:s}})),r);return{acknowledged:n,insertedCount:i.insertedCount,insertedIds:i.insertedIds}}catch(i){throw i&&i.message==="Operation must be an object with an operation key"?new tE.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):i}}async bulkWrite(e,r){if(!Array.isArray(e))throw new tE.MongoInvalidArgumentError('Argument "operations" must be an array of documents');r=(0,Kr.resolveOptions)(this,r??{}),this.client.topology!=null||await(0,_i.autoConnect)(this.client);let i=r.ordered===!1?this.initializeUnorderedBulkOp(r):this.initializeOrderedBulkOp(r);for(let s of e)i.raw(s);return await i.execute({...r})}async updateOne(e,r,n){return await(0,_i.executeOperation)(this.client,new UH.UpdateOneOperation(this.s.namespace,e,r,(0,Kr.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,_i.executeOperation)(this.client,new UH.ReplaceOneOperation(this.s.namespace,e,r,(0,Kr.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,_i.executeOperation)(this.client,new UH.UpdateManyOperation(this.s.namespace,e,r,(0,Kr.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,_i.executeOperation)(this.client,new j2e.DeleteOneOperation(this.s.namespace,e,(0,Kr.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,_i.executeOperation)(this.client,new j2e.DeleteManyOperation(this.s.namespace,e,(0,Kr.resolveOptions)(this,r)))}async rename(e,r){return await(0,_i.executeOperation)(this.client,new _2t.RenameOperation(this,e,(0,Kr.resolveOptions)(void 0,{...r,readPreference:VH.ReadPreference.PRIMARY})))}async drop(e){return await this.db.dropCollection(this.collectionName,e)}async findOne(e={},r={}){let{batchSize:n,noCursorTimeout:i,...s}=r;s.singleBatch=!0;let o=this.find(e,s).limit(1),a=await o.next();return await o.close(),a}find(e={},r={}){return new f2t.FindCursor(this.client,this.s.namespace,e,(0,Kr.resolveOptions)(this,r))}async options(e){e=(0,Kr.resolveOptions)(this,e);let[r]=await this.db.listCollections({name:this.collectionName},{...e,nameOnly:!1}).toArray();if(r==null||r.options==null)throw new tE.MongoAPIError(`collection ${this.namespace} not found`);return r.options}async isCapped(e){let{capped:r}=await this.options(e);return!!r}async createIndex(e,r){return(await(0,_i.executeOperation)(this.client,KT.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,Kr.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,_i.executeOperation)(this.client,KT.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,Kr.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,_i.executeOperation)(this.client,new KT.DropIndexOperation(this,e,{...(0,Kr.resolveOptions)(this,r),readPreference:VH.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,_i.executeOperation)(this.client,new KT.DropIndexOperation(this,"*",(0,Kr.resolveOptions)(this,e))),!0}catch(r){if(r instanceof tE.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new h2t.ListIndexesCursor(this,(0,Kr.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],i=new Set(await this.listIndexes(r).map(({name:s})=>s).toArray());return n.every(s=>i.has(s))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,_i.executeOperation)(this.client,new E2t.EstimatedDocumentCountOperation(this,(0,Kr.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let i=this.aggregate(n,r),s=await i.next();return await i.close(),s?.n??0}async distinct(e,r={},n={}){return await(0,_i.executeOperation)(this.client,new g2t.DistinctOperation(this,e,r,(0,Kr.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:s,key:o})=>[s,Object.entries(o)]))}async findOneAndDelete(e,r){return await(0,_i.executeOperation)(this.client,new KH.FindOneAndDeleteOperation(this,e,(0,Kr.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,_i.executeOperation)(this.client,new KH.FindOneAndReplaceOperation(this,e,r,(0,Kr.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,_i.executeOperation)(this.client,new KH.FindOneAndUpdateOperation(this,e,r,(0,Kr.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new tE.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new p2t.AggregationCursor(this.client,this.s.namespace,e,(0,Kr.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new d2t.ChangeStream(this,e,(0,Kr.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new l2t.UnorderedBulkOperation(this,(0,Kr.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new c2t.OrderedBulkOperation(this,(0,Kr.resolveOptions)(this,e))}async count(e={},r={}){return await(0,_i.executeOperation)(this.client,new y2t.CountOperation(this.fullNamespace,e,(0,Kr.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new m2t.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,_i.executeOperation)(this.client,new v2t.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,_i.executeOperation)(this.client,new S2t.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,_i.executeOperation)(this.client,new w2t.UpdateSearchIndexOperation(this,e,r))}};UT.Collection=GH});var WH=m(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});VT.ChangeStreamCursor=void 0;var HH=x0(),K2e=yi(),C2t=l3(),T2t=ls(),U2e=et(),O2t=Ps(),zH=class t extends O2t.AbstractCursor{constructor(e,r,n=[],i={}){super(e,r,{...i,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=i,this._resumeToken=null,this.startAtOperationTime=i.startAtOperationTime??null,i.startAfter?this.resumeToken=i.startAfter:i.resumeAfter&&(this.resumeToken=i.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(HH.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new C2t.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,T2t.executeOperation)(e.client,r,this.timeoutContext),i=r.server;return this.maxWireVersion=(0,U2e.maxWireVersion)(i),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit(K2e.INIT,n),this.emit(K2e.RESPONSE),{server:i,session:e,response:n}}async getMore(e){let r=await super.getMore(e);return this.maxWireVersion=(0,U2e.maxWireVersion)(this.server),this._processBatch(r),this.emit(HH.ChangeStream.MORE,r),this.emit(HH.ChangeStream.RESPONSE),r}};VT.ChangeStreamCursor=zH});var x0=m(HT=>{"use strict";Object.defineProperty(HT,"__esModule",{value:!0});HT.ChangeStream=void 0;var x2t=K6(),Al=yi(),I2t=Ps(),R2t=WH(),D2t=V7(),ys=Ne(),k2t=H1(),M2t=Qa(),P2t=x6(),N2t=$i(),Td=et(),F2t=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],P0={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},B2t=[Al.RESUME_TOKEN_CHANGED,Al.END,Al.CLOSE],q2t="A change stream document has been received that lacks a resume token (_id).",GT="ChangeStream is closed",nc=class t extends M2t.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let i;if(delete this.options.writeConcern,e instanceof x2t.Collection)this.type=P0.COLLECTION,i=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof D2t.Db)this.type=P0.DATABASE,i=e.client.options.serverSelectionTimeoutMS;else if(e instanceof k2t.MongoClient)this.type=P0.CLUSTER,i=e.options.serverSelectionTimeoutMS;else throw new ys.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this.isClosed=!1,this.mode=!1,this.on("newListener",s=>{s==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",s=>{s==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new N2t.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:i}))}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof ys.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Td.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof ys.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Td.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.tryNext();return e?this._processChange(e):null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof ys.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Td.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,Td.squashError)(e)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(e){if(this.closed)throw new ys.MongoChangeStreamError(GT);return this.streamOptions=e,this.cursor.stream(e)}_setIsEmitter(){if(this.mode==="iterator")throw new ys.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new ys.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(e){let r=(0,Td.filterOptions)(e,F2t);this.type===P0.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],i=this.type===P0.CLUSTER?this.parent:this.type===P0.DATABASE?this.parent.client:this.type===P0.COLLECTION?this.parent.client:null;if(i==null)throw new ys.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let s=new R2t.ChangeStreamCursor(i,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new I2t.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let o of B2t)s.on(o,a=>this.emit(o,a));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(s),s}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,Td.squashError)}_streamEvents(e){this._setIsEmitter();let r=this.cursorStream??e.stream();this.cursorStream=r,r.on("data",n=>{try{let i=this._processChange(n);this.emit(t.CHANGE,i)}catch(i){this.emit(t.ERROR,i)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(e){if(this.isClosed)throw new ys.MongoAPIError(GT);if(e==null)throw new ys.MongoRuntimeError(GT);if(e&&!e._id)throw new ys.MongoChangeStreamError(q2t);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this.isClosed||(r&&((0,ys.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof ys.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,Td.squashError)(n),this._resume(e))).then(()=>{e instanceof ys.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this.isClosed)throw new ys.MongoAPIError(GT);if(r&&((0,ys.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof ys.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,Td.squashError)(n)}if(await this._resume(e),e instanceof ys.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,Td.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,Td.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};HT.ChangeStream=nc;nc.RESPONSE=Al.RESPONSE;nc.MORE=Al.MORE;nc.INIT=Al.INIT;nc.CLOSE=Al.CLOSE;nc.CHANGE=Al.CHANGE;nc.END=Al.END;nc.ERROR=Al.ERROR;nc.RESUME_TOKEN_CHANGED=Al.RESUME_TOKEN_CHANGED;(0,P2t.configureResourceManagement)(nc.prototype)});var JH=m(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0});zT.GridFSBucketReadStream=void 0;var L2t=require("stream"),j2t=Ps(),iu=Ne(),$2t=$i(),Cv=class extends L2t.Readable{constructor(e,r,n,i,s){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:i,init:!1,expectedEnd:0,options:{start:0,end:0,...s},readPreference:n,timeoutContext:s?.timeoutMS!=null?new $2t.CSOTTimeoutContext({timeoutMS:s.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||V2t(this,()=>K2t(this))}start(e=0){return V2e(this),this.s.options.start=e,this}end(e=0){return V2e(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};zT.GridFSBucketReadStream=Cv;Cv.FILE="file";function V2e(t){if(t.s.init)throw new iu.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function K2t(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,d=>t.destroy(d));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,i=t.s.expected++,s=Math.min(t.s.file.chunkSize,n);if(r.n>i)return t.destroy(new iu.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${i}`));if(r.n<i)return t.destroy(new iu.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${i}`));let o=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(o.byteLength!==s)return n<=0?t.destroy(new iu.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new iu.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${o.byteLength}, expected: ${s}`));if(t.s.bytesRead+=o.byteLength,o.byteLength===0)return t.push(null);let a=null,u=null;t.s.bytesToSkip!=null&&(a=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=i===t.s.expectedEnd-1,l=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?u=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&l<r.data.byteLength&&(u=l),(a!=null||u!=null)&&(o=o.slice(a||0,u||o.byteLength)),t.push(o)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function U2t(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=i=>{if(t.destroyed)return;if(!i){let u=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new iu.MongoRuntimeError(u);return c.code="ENOENT",t.destroy(c)}if(i.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=G2t(t,i,t.s.options)}catch(a){return t.destroy(a)}let s={files_id:i._id};if(t.s.options&&t.s.options.start!=null){let a=Math.floor(t.s.options.start/i.chunkSize);a>0&&(s.n={$gte:a})}let o;try{o=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(a){return t.destroy(a)}t.s.cursor=t.s.chunks.find(s,{timeoutMode:t.s.options.timeoutMS!=null?j2t.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:o}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(i.length/i.chunkSize),t.s.file=i;try{t.s.bytesToTrim=H2t(t,i,t.s.cursor,t.s.options)}catch(a){return t.destroy(a)}t.emit(Cv.FILE,i)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(i){t.destroyed||t.destroy(i);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,i=>{t.destroyed||t.destroy(i)})}function V2t(t,e){if(t.s.file)return e();t.s.init||(U2t(t),t.s.init=!0),t.once("file",()=>{e()})}function G2t(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new iu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new iu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new iu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new iu.MongoInvalidArgumentError("Start option must be defined")}function H2t(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new iu.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new iu.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let i=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-i),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new iu.MongoInvalidArgumentError("End option must be defined")}});var XH=m(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0});JT.GridFSBucketWriteStream=void 0;var z2t=require("stream"),H2e=gr(),z2e=Ps(),Cl=Ne(),W2t=$i(),G2e=et(),J2t=Io(),YH=class extends z2t.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=J2t.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new H2e.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new W2t.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,G2e.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,Q2t(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof Cl.MongoOperationTimeoutError)return N0(this,r,e);(0,G2e.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){Z2t(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,e6t(this,e)}async abort(){if(this.state.streamEnd)throw new Cl.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new Cl.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};JT.GridFSBucketWriteStream=YH;function N0(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function W2e(t,e,r){return{_id:new H2e.ObjectId,files_id:t,n:e,data:r}}async function Y2t(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?z2e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(s){if(s instanceof Cl.MongoError&&s.code===Cl.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw s}n.find(s=>Object.keys(s.key).length===2&&s.key.files_id===1&&s.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function QH(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=X2t(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.contentType,t.options.aliases,t.options.metadata);if(WT(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return N0(t,new Cl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},i=>N0(t,i,e));return}process.nextTick(e)}async function Q2t(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},i;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let s={timeoutMode:e!=null?z2e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{i=await t.files.listIndexes(s).toArray()}catch(a){if(a instanceof Cl.MongoError&&a.code===Cl.MONGODB_ERROR_CODES.NamespaceNotFound)i=[];else throw a}i.find(a=>Object.keys(a.key).length===2&&a.key.filename===1&&a.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await Y2t(t)}function X2t(t,e,r,n,i,s,o){let a={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return i&&(a.contentType=i),s&&(a.aliases=s),o&&(a.metadata=o),a}function Z2t(t,e,r,n){if(WT(t,n))return;let i=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=i.length,t.pos+i.length<t.chunkSizeBytes){i.copy(t.bufToStore,t.pos),t.pos+=i.length,process.nextTick(n);return}let s=i.length,o=t.chunkSizeBytes-t.pos,a=Math.min(o,i.length),u=0;for(;s>0;){let c=i.length-s;i.copy(t.bufToStore,t.pos,c,c+a),t.pos+=a,o-=a;let l;if(o===0){l=W2e(t.id,t.n,Buffer.from(t.bufToStore));let d=t.timeoutContext?.remainingTimeMS;if(d!=null&&d<=0)return N0(t,new Cl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++u,WT(t,n))return;t.chunks.insertOne(l,{writeConcern:t.writeConcern,timeoutMS:d}).then(()=>{--t.state.outstandingRequests,--u,u||QH(t,n)},p=>N0(t,p,n)),o=t.chunkSizeBytes,t.pos=0,++t.n}s-=a,a=Math.min(o,s)}}function e6t(t,e){if(t.pos===0)return QH(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=W2e(t.id,t.n,r);if(WT(t,e))return;let i=t.timeoutContext?.remainingTimeMS;if(i!=null&&i<=0)return N0(t,new Cl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:i}).then(()=>{--t.state.outstandingRequests,QH(t,e)},s=>N0(t,s,e))}function WT(t,e){return t.state.aborted?(process.nextTick(e,new Cl.MongoAPIError("Stream has been aborted")),!0):!1}});var X2e=m(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});XT.GridFSBucket=void 0;var ZH=Ne(),t6t=Qa(),J2e=$i(),YT=et(),r6t=Io(),Y2e=JH(),Q2e=XH(),n6t={bucketName:"fs",chunkSizeBytes:255*1024},QT=class extends t6t.TypedEventEmitter{constructor(e,r){super(),this.on("error",YT.noop),this.setMaxListeners(0);let n=(0,YT.resolveOptions)(e,{...n6t,...r,writeConcern:r6t.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new Q2e.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new Q2e.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new Y2e.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,YT.resolveOptions)(this.s.db,r),i;n&&(i=new J2e.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:s}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:i?.remainingTimeMS}),o=i?.remainingTimeMS;if(o!=null&&o<=0)throw new ZH.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:o}),s===0)throw new ZH.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},i;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},i=r.revision):i=-r.revision-1),new Y2e.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:i})}async rename(e,r,n){let i={_id:e},s={$set:{filename:r}},{matchedCount:o}=await this.s._filesCollection.updateOne(i,s,n);if(o===0)throw new ZH.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,YT.resolveOptions)(this.s.db,e),n;if(r&&(n=new J2e.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let i=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:i})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};XT.GridFSBucket=QT;QT.INDEX="index"});var O0=m(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.MongoRuntimeError=L.MongoParseError=L.MongoOperationTimeoutError=L.MongoOIDCError=L.MongoNotConnectedError=L.MongoNetworkTimeoutError=L.MongoNetworkError=L.MongoMissingDependencyError=L.MongoMissingCredentialsError=L.MongoKerberosError=L.MongoInvalidArgumentError=L.MongoGridFSStreamError=L.MongoGridFSChunkError=L.MongoGCPError=L.MongoExpiredSessionError=L.MongoError=L.MongoDriverError=L.MongoDecompressionError=L.MongoCursorInUseError=L.MongoCursorExhaustedError=L.MongoCompatibilityError=L.MongoClientClosedError=L.MongoClientBulkWriteExecutionError=L.MongoClientBulkWriteError=L.MongoClientBulkWriteCursorError=L.MongoChangeStreamError=L.MongoBatchReExecutionError=L.MongoAzureError=L.MongoAWSError=L.MongoAPIError=L.ExplainableCursor=L.ChangeStreamCursor=L.ClientEncryption=L.MongoBulkWriteError=L.UUID=L.Timestamp=L.ObjectId=L.MinKey=L.MaxKey=L.Long=L.Int32=L.Double=L.Decimal128=L.DBRef=L.Code=L.BSONType=L.BSONSymbol=L.BSONRegExp=L.Binary=L.BSON=void 0;L.CommandFailedEvent=L.WriteConcern=L.ReadPreference=L.ReadConcern=L.TopologyType=L.ServerType=L.ReadPreferenceMode=L.ReadConcernLevel=L.ProfilingLevel=L.ReturnDocument=L.SeverityLevel=L.MongoLoggableComponent=L.ServerApiVersion=L.ExplainVerbosity=L.MongoErrorLabel=L.CursorTimeoutMode=L.CURSOR_FLAGS=L.Compressor=L.AuthMechanism=L.GSSAPICanonicalizationValue=L.AutoEncryptionLoggerLevel=L.BatchType=L.UnorderedBulkOperation=L.OrderedBulkOperation=L.MongoClient=L.ListIndexesCursor=L.ListCollectionsCursor=L.GridFSBucketWriteStream=L.GridFSBucketReadStream=L.GridFSBucket=L.FindCursor=L.Db=L.Collection=L.ClientSession=L.ChangeStream=L.CancellationToken=L.AggregationCursor=L.Admin=L.AbstractCursor=L.configureExplicitResourceManagement=L.MongoWriteConcernError=L.MongoUnexpectedServerResponseError=L.MongoTransactionError=L.MongoTopologyClosedError=L.MongoTailableCursorError=L.MongoSystemError=L.MongoStalePrimaryError=L.MongoServerSelectionError=L.MongoServerError=L.MongoServerClosedError=void 0;L.MongoClientAuthProviders=L.MongoCryptKMSRequestNetworkTimeoutError=L.MongoCryptInvalidArgumentError=L.MongoCryptError=L.MongoCryptCreateEncryptedCollectionError=L.MongoCryptCreateDataKeyError=L.MongoCryptAzureKMSRequestError=L.SrvPollingEvent=L.WaitingForSuitableServerEvent=L.ServerSelectionSucceededEvent=L.ServerSelectionStartedEvent=L.ServerSelectionFailedEvent=L.ServerSelectionEvent=L.TopologyOpeningEvent=L.TopologyDescriptionChangedEvent=L.TopologyClosedEvent=L.ServerOpeningEvent=L.ServerHeartbeatSucceededEvent=L.ServerHeartbeatStartedEvent=L.ServerHeartbeatFailedEvent=L.ServerDescriptionChangedEvent=L.ServerClosedEvent=L.ConnectionReadyEvent=L.ConnectionPoolReadyEvent=L.ConnectionPoolMonitoringEvent=L.ConnectionPoolCreatedEvent=L.ConnectionPoolClosedEvent=L.ConnectionPoolClearedEvent=L.ConnectionCreatedEvent=L.ConnectionClosedEvent=L.ConnectionCheckOutStartedEvent=L.ConnectionCheckOutFailedEvent=L.ConnectionCheckedOutEvent=L.ConnectionCheckedInEvent=L.CommandSucceededEvent=L.CommandStartedEvent=void 0;var i6t=V$();Object.defineProperty(L,"Admin",{enumerable:!0,get:function(){return i6t.Admin}});var s6t=H$();Object.defineProperty(L,"OrderedBulkOperation",{enumerable:!0,get:function(){return s6t.OrderedBulkOperation}});var o6t=W$();Object.defineProperty(L,"UnorderedBulkOperation",{enumerable:!0,get:function(){return o6t.UnorderedBulkOperation}});var a6t=x0();Object.defineProperty(L,"ChangeStream",{enumerable:!0,get:function(){return a6t.ChangeStream}});var u6t=K6();Object.defineProperty(L,"Collection",{enumerable:!0,get:function(){return u6t.Collection}});var c6t=Ps();Object.defineProperty(L,"AbstractCursor",{enumerable:!0,get:function(){return c6t.AbstractCursor}});var l6t=cv();Object.defineProperty(L,"AggregationCursor",{enumerable:!0,get:function(){return l6t.AggregationCursor}});var d6t=DH();Object.defineProperty(L,"FindCursor",{enumerable:!0,get:function(){return d6t.FindCursor}});var p6t=dG();Object.defineProperty(L,"ListCollectionsCursor",{enumerable:!0,get:function(){return p6t.ListCollectionsCursor}});var f6t=MH();Object.defineProperty(L,"ListIndexesCursor",{enumerable:!0,get:function(){return f6t.ListIndexesCursor}});var h6t=V7();Object.defineProperty(L,"Db",{enumerable:!0,get:function(){return h6t.Db}});var m6t=X2e();Object.defineProperty(L,"GridFSBucket",{enumerable:!0,get:function(){return m6t.GridFSBucket}});var y6t=JH();Object.defineProperty(L,"GridFSBucketReadStream",{enumerable:!0,get:function(){return y6t.GridFSBucketReadStream}});var g6t=XH();Object.defineProperty(L,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return g6t.GridFSBucketWriteStream}});var E6t=H1();Object.defineProperty(L,"MongoClient",{enumerable:!0,get:function(){return E6t.MongoClient}});var b6t=Qa();Object.defineProperty(L,"CancellationToken",{enumerable:!0,get:function(){return b6t.CancellationToken}});var _6t=O6();Object.defineProperty(L,"ClientSession",{enumerable:!0,get:function(){return _6t.ClientSession}});var v6t=gr();Object.defineProperty(L,"BSON",{enumerable:!0,get:function(){return v6t.BSON}});var No=gr();Object.defineProperty(L,"Binary",{enumerable:!0,get:function(){return No.Binary}});Object.defineProperty(L,"BSONRegExp",{enumerable:!0,get:function(){return No.BSONRegExp}});Object.defineProperty(L,"BSONSymbol",{enumerable:!0,get:function(){return No.BSONSymbol}});Object.defineProperty(L,"BSONType",{enumerable:!0,get:function(){return No.BSONType}});Object.defineProperty(L,"Code",{enumerable:!0,get:function(){return No.Code}});Object.defineProperty(L,"DBRef",{enumerable:!0,get:function(){return No.DBRef}});Object.defineProperty(L,"Decimal128",{enumerable:!0,get:function(){return No.Decimal128}});Object.defineProperty(L,"Double",{enumerable:!0,get:function(){return No.Double}});Object.defineProperty(L,"Int32",{enumerable:!0,get:function(){return No.Int32}});Object.defineProperty(L,"Long",{enumerable:!0,get:function(){return No.Long}});Object.defineProperty(L,"MaxKey",{enumerable:!0,get:function(){return No.MaxKey}});Object.defineProperty(L,"MinKey",{enumerable:!0,get:function(){return No.MinKey}});Object.defineProperty(L,"ObjectId",{enumerable:!0,get:function(){return No.ObjectId}});Object.defineProperty(L,"Timestamp",{enumerable:!0,get:function(){return No.Timestamp}});Object.defineProperty(L,"UUID",{enumerable:!0,get:function(){return No.UUID}});var S6t=Y2();Object.defineProperty(L,"MongoBulkWriteError",{enumerable:!0,get:function(){return S6t.MongoBulkWriteError}});var w6t=QC();Object.defineProperty(L,"ClientEncryption",{enumerable:!0,get:function(){return w6t.ClientEncryption}});var A6t=WH();Object.defineProperty(L,"ChangeStreamCursor",{enumerable:!0,get:function(){return A6t.ChangeStreamCursor}});var C6t=CT();Object.defineProperty(L,"ExplainableCursor",{enumerable:!0,get:function(){return C6t.ExplainableCursor}});var Ut=Ne();Object.defineProperty(L,"MongoAPIError",{enumerable:!0,get:function(){return Ut.MongoAPIError}});Object.defineProperty(L,"MongoAWSError",{enumerable:!0,get:function(){return Ut.MongoAWSError}});Object.defineProperty(L,"MongoAzureError",{enumerable:!0,get:function(){return Ut.MongoAzureError}});Object.defineProperty(L,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return Ut.MongoBatchReExecutionError}});Object.defineProperty(L,"MongoChangeStreamError",{enumerable:!0,get:function(){return Ut.MongoChangeStreamError}});Object.defineProperty(L,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteCursorError}});Object.defineProperty(L,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteError}});Object.defineProperty(L,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteExecutionError}});Object.defineProperty(L,"MongoClientClosedError",{enumerable:!0,get:function(){return Ut.MongoClientClosedError}});Object.defineProperty(L,"MongoCompatibilityError",{enumerable:!0,get:function(){return Ut.MongoCompatibilityError}});Object.defineProperty(L,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return Ut.MongoCursorExhaustedError}});Object.defineProperty(L,"MongoCursorInUseError",{enumerable:!0,get:function(){return Ut.MongoCursorInUseError}});Object.defineProperty(L,"MongoDecompressionError",{enumerable:!0,get:function(){return Ut.MongoDecompressionError}});Object.defineProperty(L,"MongoDriverError",{enumerable:!0,get:function(){return Ut.MongoDriverError}});Object.defineProperty(L,"MongoError",{enumerable:!0,get:function(){return Ut.MongoError}});Object.defineProperty(L,"MongoExpiredSessionError",{enumerable:!0,get:function(){return Ut.MongoExpiredSessionError}});Object.defineProperty(L,"MongoGCPError",{enumerable:!0,get:function(){return Ut.MongoGCPError}});Object.defineProperty(L,"MongoGridFSChunkError",{enumerable:!0,get:function(){return Ut.MongoGridFSChunkError}});Object.defineProperty(L,"MongoGridFSStreamError",{enumerable:!0,get:function(){return Ut.MongoGridFSStreamError}});Object.defineProperty(L,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return Ut.MongoInvalidArgumentError}});Object.defineProperty(L,"MongoKerberosError",{enumerable:!0,get:function(){return Ut.MongoKerberosError}});Object.defineProperty(L,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return Ut.MongoMissingCredentialsError}});Object.defineProperty(L,"MongoMissingDependencyError",{enumerable:!0,get:function(){return Ut.MongoMissingDependencyError}});Object.defineProperty(L,"MongoNetworkError",{enumerable:!0,get:function(){return Ut.MongoNetworkError}});Object.defineProperty(L,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return Ut.MongoNetworkTimeoutError}});Object.defineProperty(L,"MongoNotConnectedError",{enumerable:!0,get:function(){return Ut.MongoNotConnectedError}});Object.defineProperty(L,"MongoOIDCError",{enumerable:!0,get:function(){return Ut.MongoOIDCError}});Object.defineProperty(L,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return Ut.MongoOperationTimeoutError}});Object.defineProperty(L,"MongoParseError",{enumerable:!0,get:function(){return Ut.MongoParseError}});Object.defineProperty(L,"MongoRuntimeError",{enumerable:!0,get:function(){return Ut.MongoRuntimeError}});Object.defineProperty(L,"MongoServerClosedError",{enumerable:!0,get:function(){return Ut.MongoServerClosedError}});Object.defineProperty(L,"MongoServerError",{enumerable:!0,get:function(){return Ut.MongoServerError}});Object.defineProperty(L,"MongoServerSelectionError",{enumerable:!0,get:function(){return Ut.MongoServerSelectionError}});Object.defineProperty(L,"MongoStalePrimaryError",{enumerable:!0,get:function(){return Ut.MongoStalePrimaryError}});Object.defineProperty(L,"MongoSystemError",{enumerable:!0,get:function(){return Ut.MongoSystemError}});Object.defineProperty(L,"MongoTailableCursorError",{enumerable:!0,get:function(){return Ut.MongoTailableCursorError}});Object.defineProperty(L,"MongoTopologyClosedError",{enumerable:!0,get:function(){return Ut.MongoTopologyClosedError}});Object.defineProperty(L,"MongoTransactionError",{enumerable:!0,get:function(){return Ut.MongoTransactionError}});Object.defineProperty(L,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return Ut.MongoUnexpectedServerResponseError}});Object.defineProperty(L,"MongoWriteConcernError",{enumerable:!0,get:function(){return Ut.MongoWriteConcernError}});var T6t=x6();Object.defineProperty(L,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return T6t.configureExplicitResourceManagement}});var O6t=Y2();Object.defineProperty(L,"BatchType",{enumerable:!0,get:function(){return O6t.BatchType}});var x6t=VU();Object.defineProperty(L,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return x6t.AutoEncryptionLoggerLevel}});var I6t=xC();Object.defineProperty(L,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return I6t.GSSAPICanonicalizationValue}});var R6t=Ed();Object.defineProperty(L,"AuthMechanism",{enumerable:!0,get:function(){return R6t.AuthMechanism}});var D6t=L3();Object.defineProperty(L,"Compressor",{enumerable:!0,get:function(){return D6t.Compressor}});var Z2e=Ps();Object.defineProperty(L,"CURSOR_FLAGS",{enumerable:!0,get:function(){return Z2e.CURSOR_FLAGS}});Object.defineProperty(L,"CursorTimeoutMode",{enumerable:!0,get:function(){return Z2e.CursorTimeoutMode}});var k6t=Ne();Object.defineProperty(L,"MongoErrorLabel",{enumerable:!0,get:function(){return k6t.MongoErrorLabel}});var M6t=i3();Object.defineProperty(L,"ExplainVerbosity",{enumerable:!0,get:function(){return M6t.ExplainVerbosity}});var P6t=H1();Object.defineProperty(L,"ServerApiVersion",{enumerable:!0,get:function(){return P6t.ServerApiVersion}});var e6e=O1();Object.defineProperty(L,"MongoLoggableComponent",{enumerable:!0,get:function(){return e6e.MongoLoggableComponent}});Object.defineProperty(L,"SeverityLevel",{enumerable:!0,get:function(){return e6e.SeverityLevel}});var N6t=qH();Object.defineProperty(L,"ReturnDocument",{enumerable:!0,get:function(){return N6t.ReturnDocument}});var F6t=vG();Object.defineProperty(L,"ProfilingLevel",{enumerable:!0,get:function(){return F6t.ProfilingLevel}});var B6t=nl();Object.defineProperty(L,"ReadConcernLevel",{enumerable:!0,get:function(){return B6t.ReadConcernLevel}});var q6t=cs();Object.defineProperty(L,"ReadPreferenceMode",{enumerable:!0,get:function(){return q6t.ReadPreferenceMode}});var t6e=Wa();Object.defineProperty(L,"ServerType",{enumerable:!0,get:function(){return t6e.ServerType}});Object.defineProperty(L,"TopologyType",{enumerable:!0,get:function(){return t6e.TopologyType}});var L6t=nl();Object.defineProperty(L,"ReadConcern",{enumerable:!0,get:function(){return L6t.ReadConcern}});var j6t=cs();Object.defineProperty(L,"ReadPreference",{enumerable:!0,get:function(){return j6t.ReadPreference}});var $6t=Io();Object.defineProperty(L,"WriteConcern",{enumerable:!0,get:function(){return $6t.WriteConcern}});var ez=aV();Object.defineProperty(L,"CommandFailedEvent",{enumerable:!0,get:function(){return ez.CommandFailedEvent}});Object.defineProperty(L,"CommandStartedEvent",{enumerable:!0,get:function(){return ez.CommandStartedEvent}});Object.defineProperty(L,"CommandSucceededEvent",{enumerable:!0,get:function(){return ez.CommandSucceededEvent}});var ic=KV();Object.defineProperty(L,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckedInEvent}});Object.defineProperty(L,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckedOutEvent}});Object.defineProperty(L,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckOutFailedEvent}});Object.defineProperty(L,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckOutStartedEvent}});Object.defineProperty(L,"ConnectionClosedEvent",{enumerable:!0,get:function(){return ic.ConnectionClosedEvent}});Object.defineProperty(L,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return ic.ConnectionCreatedEvent}});Object.defineProperty(L,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolClearedEvent}});Object.defineProperty(L,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolClosedEvent}});Object.defineProperty(L,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolCreatedEvent}});Object.defineProperty(L,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolMonitoringEvent}});Object.defineProperty(L,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolReadyEvent}});Object.defineProperty(L,"ConnectionReadyEvent",{enumerable:!0,get:function(){return ic.ConnectionReadyEvent}});var Up=_7();Object.defineProperty(L,"ServerClosedEvent",{enumerable:!0,get:function(){return Up.ServerClosedEvent}});Object.defineProperty(L,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return Up.ServerDescriptionChangedEvent}});Object.defineProperty(L,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return Up.ServerHeartbeatFailedEvent}});Object.defineProperty(L,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return Up.ServerHeartbeatStartedEvent}});Object.defineProperty(L,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return Up.ServerHeartbeatSucceededEvent}});Object.defineProperty(L,"ServerOpeningEvent",{enumerable:!0,get:function(){return Up.ServerOpeningEvent}});Object.defineProperty(L,"TopologyClosedEvent",{enumerable:!0,get:function(){return Up.TopologyClosedEvent}});Object.defineProperty(L,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return Up.TopologyDescriptionChangedEvent}});Object.defineProperty(L,"TopologyOpeningEvent",{enumerable:!0,get:function(){return Up.TopologyOpeningEvent}});var Tv=dH();Object.defineProperty(L,"ServerSelectionEvent",{enumerable:!0,get:function(){return Tv.ServerSelectionEvent}});Object.defineProperty(L,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return Tv.ServerSelectionFailedEvent}});Object.defineProperty(L,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return Tv.ServerSelectionStartedEvent}});Object.defineProperty(L,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return Tv.ServerSelectionSucceededEvent}});Object.defineProperty(L,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return Tv.WaitingForSuitableServerEvent}});var K6t=fH();Object.defineProperty(L,"SrvPollingEvent",{enumerable:!0,get:function(){return K6t.SrvPollingEvent}});var rE=S6();Object.defineProperty(L,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return rE.MongoCryptAzureKMSRequestError}});Object.defineProperty(L,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return rE.MongoCryptCreateDataKeyError}});Object.defineProperty(L,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return rE.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(L,"MongoCryptError",{enumerable:!0,get:function(){return rE.MongoCryptError}});Object.defineProperty(L,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return rE.MongoCryptInvalidArgumentError}});Object.defineProperty(L,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return rE.MongoCryptKMSRequestNetworkTimeoutError}});var U6t=QG();Object.defineProperty(L,"MongoClientAuthProviders",{enumerable:!0,get:function(){return U6t.MongoClientAuthProviders}})});var ot=m(zi=>{"use strict";zi.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");zi.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");zi.arrayParentSymbol=Symbol("mongoose#Array#_parent");zi.arrayPathSymbol=Symbol("mongoose#Array#_path");zi.arraySchemaSymbol=Symbol("mongoose#Array#_schema");zi.documentArrayParent=Symbol("mongoose#documentArrayParent");zi.documentIsSelected=Symbol("mongoose#Document#isSelected");zi.documentIsModified=Symbol("mongoose#Document#isModified");zi.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");zi.documentSchemaSymbol=Symbol("mongoose#Document#schema");zi.getSymbol=Symbol("mongoose#Document#get");zi.modelSymbol=Symbol("mongoose#Model");zi.objectIdSymbol=Symbol("mongoose#ObjectId");zi.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");zi.schemaTypeSymbol=Symbol("mongoose#schemaType");zi.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");zi.scopeSymbol=Symbol("mongoose#Document#scope");zi.validatorErrorSymbol=Symbol("mongoose#validatorError")});var Vp=m((Qgr,r6e)=>{"use strict";var Ov=ca().ObjectId,V6t=ot().objectIdSymbol;Object.defineProperty(Ov.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});Ov.prototype.hasOwnProperty("valueOf")||(Ov.prototype.valueOf=function(){return this.toString()});Ov.prototype[V6t]=!0;r6e.exports=Ov});var Fo=m((Xgr,n6e)=>{"use strict";n6e.exports=function(e){if(e!=null&&typeof e.constructor=="function")return e.constructor.name}});var Tl=m(i6e=>{"use strict";i6e.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var ZT=m((e2r,s6e)=>{"use strict";s6e.exports=ca().Decimal128});var F0=m((t2r,o6e)=>{"use strict";o6e.exports=new Set(["__proto__","constructor","prototype"])});var eO=m(a6e=>{"use strict";a6e.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}});var xv=m((n2r,u6e)=>{"use strict";var G6t=eO().isMongooseArray;u6e.exports=function(t){return t!=null&&(G6t(t)||t.$__!=null||t.isMongooseBuffer||t.$isMongooseMap)}});var tz=m((i2r,c6e)=>{"use strict";var H6t=/^function\s*([^\s(]+)/;c6e.exports=function(t){return t.name||(t.toString().trim().match(H6t)||[])[1]}});var js=m((s2r,l6e)=>{"use strict";function z6t(t,e){return t!=null&&t._bsontype===e}l6e.exports=z6t});var oh=m((o2r,d6e)=>{"use strict";d6e.exports=function(t){return Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object Object]"}});var nE=m((a2r,p6e)=>{"use strict";p6e.exports=function(e){if(e==null||typeof e!="object")return!1;let r=Object.getPrototypeOf(e);return!r||r.constructor.name==="Object"}});var iE=m(rz=>{"use strict";var f6e=Symbol("mongoose#trustedSymbol");rz.trustedSymbol=f6e;rz.trusted=function(e){return e==null||typeof e!="object"||(e[f6e]=!0),e}});var Vn=m((c2r,h6e)=>{"use strict";var W6t=ZT(),J6t=Vp(),Y6t=F0(),Q6t=xv(),X6t=tz(),nz=js(),Z6t=eO().isMongooseArray,eEt=oh(),tEt=nE(),rEt=ot(),iz=iE().trustedSymbol,nEt=ca();function oz(t,e,r){if(t==null)return t;if(nz(t,"Double"))return new nEt.Double(t.value);if(typeof t=="number"||typeof t=="string"||typeof t=="boolean"||typeof t=="bigint")return t;if(Array.isArray(t))return iEt(t,e);if(Q6t(t)){if(e&&e.retainDocuments&&t.$__!=null){let s=t.$clone();return t.__index!=null&&(s.__index=t.__index),t.__parentArray!=null&&(s.__parentArray=t.__parentArray),s.$__parent=t.$__parent,s}if(tEt(t)&&t.$__!=null&&t._doc!=null)return t._doc;let i;return e&&e.json&&typeof t.toJSON=="function"?i=t.toJSON(e):i=t.toObject(e),i}let n=t.constructor;if(n)switch(X6t(n)){case"Object":return sz(t,e,r);case"Date":return new n(+t);case"RegExp":return sEt(t);default:break}return nz(t,"ObjectId")?e&&e.flattenObjectIds?t.toJSON():new J6t(t.id):nz(t,"Decimal128")?e&&e.flattenDecimals?t.toJSON():W6t.fromString(t.toString()):!n&&eEt(t)?sz(t,e,r):typeof t=="object"&&t[rEt.schemaTypeSymbol]?t.clone():e&&e.bson&&typeof t.toBSON=="function"?t:typeof t.valueOf=="function"?t.valueOf():sz(t,e,r)}h6e.exports=oz;function sz(t,e,r){let n=e&&e.minimize,i=e&&e.omitUndefined,s=e&&e._seen,o={},a;if(s&&s.has(t))return s.get(t);s&&s.set(t,o),iz in t&&e?.copyTrustedSymbol!==!1&&(o[iz]=t[iz]);let u=Object.keys(t),c=u.length;for(let l=0;l<c;++l){let d=u[l];if(Y6t.has(d))continue;let p=oz(t[d],e,!1);(n===!1||i)&&typeof p>"u"?delete o[d]:(n!==!0||typeof p<"u")&&(a||(a=!0),o[d]=p)}return n&&!r?a&&o:o}function iEt(t,e){let r=0,n=t.length,i=null;for(e?.retainDocuments?t.isMongooseDocumentArray?i=new(t.$schemaType()).schema.base.Types.DocumentArray([],t.$path(),t.$parent(),t.$schemaType()):t.isMongooseArray?i=new(t.$parent()).schema.base.Types.Array([],t.$path(),t.$parent(),t.$schemaType()):i=new Array(n):i=new Array(n),t=Z6t(t)?t.__array:t,r=0;r<n;++r)i[r]=oz(t[r],e,!0);return i}function sEt(t){let e=new RegExp(t.source,t.flags);return e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex),e}});var g6e=m((l2r,y6e)=>{"use strict";var tO=B$(),az=Qt(),uz=O0().Collection,oEt=Vp(),m6e=Fo(),aEt=Tl().internalToObjectOptions,uEt=require("stream"),cz=require("util"),cEt=Object.freeze({...aEt,copyTrustedSymbol:!1});function Ol(t,e,r){this.collection=null,this.Promise=r.Promise||Promise,this.modelName=r.modelName,delete r.modelName,this._closed=!1,tO.apply(this,arguments)}Object.setPrototypeOf(Ol.prototype,tO.prototype);Ol.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),tO.prototype.onOpen.call(this),this.collection};Ol.prototype.onClose=function(t){tO.prototype.onClose.call(this,t)};Ol.prototype._getCollection=function(){return this.collection?this.collection:this.conn.db!=null?(this.collection=this.conn.db.collection(this.name),this.collection):null};var Iv={watch:!0,find:!0,aggregate:!0};function lEt(t){Ol.prototype[t]=function(){let e=this._getCollection(),r=Array.from(arguments),n=this,i=n&&n.conn&&n.conn.base&&n.conn.base.options&&n.conn.base.options.debug,s=n&&n.conn&&n.conn.options&&n.conn.options.debug,o=s??i,a=arguments[arguments.length-1],u=new oEt;if(this.conn.$wasForceClosed){let d=new az("Connection was force closed");if(r.length>0&&typeof r[r.length-1]=="function"){r[r.length-1](d);return}else throw d}let c=r,l=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,args:r});let d,p=r,f=null,h=null;Iv[t]&&typeof a=="function"?(this.addQueue(t,p),d=a):Iv[t]?f=new this.Promise((_,S)=>{d=function(C,A){if(h!=null&&clearTimeout(h),C!=null)return S(C);_(A)},p=r.concat([d]),this.addQueue(t,p)}):typeof a=="function"?(d=function(){return h!=null&&clearTimeout(h),a.apply(this,arguments)},p=r.slice(0,r.length-1).concat([d])):f=new Promise((_,S)=>{d=function(C,A){if(h!=null&&clearTimeout(h),C!=null)return S(C);_(A)},p=r.concat([d]),this.addQueue(t,p)});let g=this._getBufferTimeoutMS();if(h=setTimeout(()=>{if(this.removeQueue(t,p)){let S="Operation `"+this.name+"."+t+"()` buffering timed out after "+g+"ms",w=new az(S);this.conn.emit("buffer-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,error:w}),d(w)}},g),!Iv[t]&&typeof a=="function"){this.addQueue(t,p);return}return f}else!Iv[t]&&typeof a=="function"&&(l=function(p,f){return p!=null?n.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,error:p}):n.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,result:f}),a.apply(this,arguments)},c=r.slice(0,r.length-1).concat([l]));if(o)if(typeof o=="function"){let d=null;typeof r[r.length-1]=="function"?d=r.slice(0,r.length-1):d=r,o.apply(n,[n.name,t].concat(d))}else if(o instanceof uEt.Writable)this.$printToStream(n.name,t,r,o);else{let d=o.color==null?!0:o.color,p=o.shell==null?!1:o.shell;this.$print(n.name,t,r,d,p)}this.conn.emit("operation-start",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,params:c});try{if(e==null){let p="Cannot call `"+this.name+"."+t+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new az(p)}if(Iv[t]&&typeof a=="function"){let p=e[t].apply(e,c.slice(0,c.length-1));return this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,result:p}),a.call(this,null,p)}let d=e[t].apply(e,c);return d!=null&&typeof d.then=="function"?d.then(p=>(typeof a=="function"?a(null,p):this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,result:p}),p),p=>{if(typeof a=="function"){a(p);return}else this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,error:p});throw p}):d}catch(d){if(typeof a=="function")return a(d);throw this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,error:d}),d}}}for(let t of Object.getOwnPropertyNames(uz.prototype))Object.getOwnPropertyDescriptor(uz.prototype,t).get===void 0&&typeof uz.prototype[t]=="function"&&lEt(t);Ol.prototype.$print=function(t,e,r,n,i){let s=n?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",o=[t,e].join("."),a=[];for(let c=r.length-1;c>=0;--c)(this.$format(r[c])||a.length)&&a.unshift(this.$format(r[c],n,i));let u="("+a.join(", ")+")";console.info(s+o+u)};Ol.prototype.$printToStream=function(t,e,r,n){let i=[t,e].join("."),s=[];for(let a=r.length-1;a>=0;--a)(this.$format(r[a])||s.length)&&s.unshift(this.$format(r[a]));let o="("+s.join(", ")+")";n.write(i+o,"utf8")};Ol.prototype.$format=function(t,e,r){let n=typeof t;return n==="function"||n==="undefined"?"":lz(t,!1,e,r)};function sE(t){let e={inspect:function(){return t}};return cz.inspect.custom&&(e[cz.inspect.custom]=e.inspect),e}function dEt(t){return lz(t,!0)}function pEt(t,e){t[e]=sE('ObjectId("'+t[e].toHexString()+'")')}function fEt(t,e,r){r?t[e]=sE('ISODate("'+t[e].toUTCString()+'")'):t[e]=sE('new Date("'+t[e].toUTCString()+'")')}function lz(t,e,r,n){if(t&&typeof t.toBSON=="function"&&(t=t.toBSON()),t==null)return t;let i=Vn(),s=e?t:i(t,cEt),o=m6e(s);if(o==="Binary")s="BinData("+s.sub_type+', "'+s.toString("base64")+'")';else if(o==="ObjectId")s=sE('ObjectId("'+s.toHexString()+'")');else if(o==="Date")s=sE('new Date("'+s.toUTCString()+'")');else if(o==="Object"){let a=Object.keys(s),u=a.length,c;for(let l=0;l<u;++l)if(c=a[l],s[c]){let d;if(typeof s[c].toBSON=="function")try{s[c]=s[c].toBSON()}catch(f){d=f}let p=m6e(s[c]);if(p==="Binary")s[c]="BinData("+s[c].sub_type+', "'+s[c].buffer.toString("base64")+'")';else if(p==="Object")s[c]=lz(s[c],!0);else if(p==="ObjectId")pEt(s,c);else if(p==="Date")fEt(s,c,n);else if(p==="ClientSession")s[c]=sE('ClientSession("'+(s[c]&&s[c].id&&s[c].id.id&&s[c].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(s[c]))s[c]=s[c].map(dEt);else if(d!=null)throw d}}return e?s:cz.inspect(s,!1,10,r).replace(/\n/g,"").replace(/\s{2,}/g," ")}Ol.prototype.getIndexes=Ol.prototype.indexInformation;y6e.exports=Ol});var pz=m((d2r,b6e)=>{"use strict";var hEt=require("events").EventEmitter,Rv=Qt();var E6e=["close","change","end","error","resumeTokenChanged"];var dz=class extends hEt{constructor(e,r,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=r,this.options=n,this.errored=!1,n&&n.hydrate&&!n.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let i=null;if(this.$driverChangeStreamPromise=new Promise((s,o)=>{try{e((a,u)=>{if(a!=null)return this.errored=!0,this.emit("error",a),o(a);this.driverChangeStream=u,this.emit("ready"),s()})}catch(a){i=a,this.errored=!0,this.emit("error",a),o(a)}}),i!=null)throw i}_bindEvents(){if(!this.bindedEvents){if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),E6e.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),E6e.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})}}hasNext(e){if(this.errored)throw new Rv("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(e)}next(e){if(this.errored)throw new Rv("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(e!=null){let n=e;e=(i,s)=>i!=null?n(i):(s.fullDocument!=null&&(s.fullDocument=this.options.model.hydrate(s.fullDocument)),n(null,s))}let r=this.driverChangeStream.next(e);return r&&typeof r.then=="function"&&(r=r.then(n=>(n.fullDocument!=null&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),n))),r}return this.driverChangeStream.next(e)}addListener(e,r){if(this.errored)throw new Rv("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(e,r)}on(e,r){if(this.errored)throw new Rv("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(e,r)}once(e,r){if(this.errored)throw new Rv("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(e,r)}_queue(e){this.once("ready",()=>e())}close(){return this.closed=!0,this.driverChangeStream?this.driverChangeStream.close():this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}};b6e.exports=dz});var B0=m((p2r,S6e)=>{"use strict";function Br(){this._pres=new Map,this._posts=new Map}Br.skipWrappedFunction=function(){if(!(this instanceof Br.skipWrappedFunction))return new Br.skipWrappedFunction(...arguments);this.args=[...arguments]};Br.overwriteResult=function(){if(!(this instanceof Br.overwriteResult))return new Br.overwriteResult(...arguments);this.args=[...arguments]};Br.prototype.execPre=function(t,e,r,n){arguments.length===3&&(n=r,r=[]);let i=this._pres.get(t)||[],s=i.length,o=i.numAsync||0,a=0,u=o,c=!1,l=r,d=null;if(!s)return kv(function(){n(null)});function p(){if(a>=s)return;let h=i[a];if(h.isAsync){let g=[Dv(f),Dv(function(_){if(_){if(c)return;if(_ instanceof Br.skipWrappedFunction)d=_;else return c=!0,n(_)}if(--u===0&&a>=s)return n(d)})];rO(h.fn,e,g,g[0])}else if(h.fn.length>0){let g=[Dv(f)],_=arguments.length>=2?arguments:[null].concat(l);for(let S=1;S<_.length;++S)S===_.length-1&&typeof _[S]=="function"||g.push(_[S]);rO(h.fn,e,g,g[0])}else{let g=null;try{g=h.fn.call(e)}catch(_){if(_!=null)return n(_)}if(nO(g))g.then(()=>f(),_=>f(_));else{if(++a>=s)return u>0?void 0:kv(function(){n(d)});p()}}}p.apply(null,[null].concat(r));function f(h){if(h){if(c)return;if(h instanceof Br.skipWrappedFunction)d=h;else return c=!0,n(h)}if(++a>=s)return u>0?void 0:n(d);p.apply(e,arguments)}};Br.prototype.execPreSync=function(t,e,r){let n=this._pres.get(t)||[],i=n.length;for(let s=0;s<i;++s)n[s].fn.apply(e,r||[])};Br.prototype.execPost=function(t,e,r,n,i){arguments.length<5&&(i=n,n=null);let s=this._posts.get(t)||[],o=s.length,a=0,u=null;if(n&&n.error&&(u=n.error),!o)return kv(function(){i.apply(null,[u].concat(r))});function c(){let l=s[a].fn,d=0,p=r.length,f=[];for(let h=0;h<p;++h)d+=r[h]&&r[h]._kareemIgnore?0:1,(!r[h]||!r[h]._kareemIgnore)&&f.push(r[h]);if(u)if(v6e(s[a],d)){let h=Dv(function(g){if(g){if(g instanceof Br.overwriteResult)return r=g.args,++a>=o?i.call(null,u):c();u=g}if(++a>=o)return i.call(null,u);c()});rO(l,e,[u].concat(f).concat([h]),h)}else{if(++a>=o)return i.call(null,u);c()}else{let h=Dv(function(g){if(g)return g instanceof Br.overwriteResult?(r=g.args,++a>=o?i.apply(null,[null].concat(r)):c()):(u=g,c());if(++a>=o)return i.apply(null,[null].concat(r));c()});if(v6e(s[a],d))return++a>=o?i.apply(null,[null].concat(r)):c();if(l.length===d+1)rO(l,e,f.concat([h]),h);else{let g,_;try{_=l.apply(e,f)}catch(S){g=S,u=S}if(nO(_))return _.then(S=>{h(S instanceof Br.overwriteResult?S:null)},S=>h(S));if(_ instanceof Br.overwriteResult&&(r=_.args),++a>=o)return i.apply(null,[g].concat(r));c()}}}c()};Br.prototype.execPostSync=function(t,e,r){let n=this._posts.get(t)||[],i=n.length;for(let s=0;s<i;++s){let o=n[s].fn.apply(e,r||[]);o instanceof Br.overwriteResult&&(r=o.args)}return r};Br.prototype.createWrapperSync=function(t,e){let r=this;return function(){r.execPreSync(t,this,arguments);let i=e.apply(this,arguments);return r.execPostSync(t,this,[i])[0]}};function _6e(t,e,r,n,i,s,o){return s.useErrorHandlers?t.execPost(r,n,i,{error:e},function(a){return typeof o=="function"&&o(a)}):typeof o=="function"&&o(e)}Br.prototype.wrap=function(t,e,r,n,i){let s=n.length>0?n[n.length-1]:null,o=Array.from(n);typeof s=="function"&&o.pop();let a=this;i=i||{};let u=i.checkForPromise;this.execPre(t,r,n,function(c){if(c&&!(c instanceof Br.skipWrappedFunction)){let f=i.numCallbackParams||0,h=i.contextParameter?[r]:[];for(let g=h.length;g<f;++g)h.push(null);return _6e(a,c,t,r,h,i,s)}let l=e.length,d;if(c instanceof Br.skipWrappedFunction)return d=c.args[0],p(null,...c.args);try{d=e.apply(r,o.concat(p))}catch(f){return p(f)}if(u){if(nO(d))return d.then(f=>p(null,f),f=>p(f));if(l<o.length+1)return p(null,d)}function p(){let f=Array.from(arguments);if(f.shift(),i.nullResultByDefault&&f.length===0&&f.push(null),arguments[0])return _6e(a,arguments[0],t,r,f,i,s);a.execPost(t,r,f,function(){s!==null&&(arguments[0]?s(arguments[0]):s.apply(r,arguments))})}})};Br.prototype.filter=function(t){let e=this.clone(),r=Array.from(e._pres.keys());for(let i of r){let s=this._pres.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._pres.delete(i);continue}s.numAsync=s.filter(o=>o.isAsync).length,e._pres.set(i,s)}let n=Array.from(e._posts.keys());for(let i of n){let s=this._posts.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._posts.delete(i);continue}e._posts.set(i,s)}return e};Br.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)};Br.prototype.createWrapper=function(t,e,r,n){let i=this;return this.hasHooks(t)?function(){let s=r||this;i.wrap(t,e,s,Array.from(arguments),n)}:function(){kv(()=>e.apply(this,arguments))}};Br.prototype.pre=function(t,e,r,n,i){let s={};typeof e=="object"&&e!==null?(s=e,e=s.isAsync):typeof arguments[1]!="boolean"&&(r=e,e=!1);let o=this._pres.get(t)||[];if(this._pres.set(t,o),e&&(o.numAsync=o.numAsync||0,++o.numAsync),typeof r!="function")throw new Error('pre() requires a function, got "'+typeof r+'"');return i?o.unshift(Object.assign({},s,{fn:r,isAsync:e})):o.push(Object.assign({},s,{fn:r,isAsync:e})),this};Br.prototype.post=function(t,e,r,n){let i=this._posts.get(t)||[];if(typeof e=="function"&&(n=!!r,r=e,e={}),typeof r!="function")throw new Error('post() requires a function, got "'+typeof r+'"');return n?i.unshift(Object.assign({},e,{fn:r})):i.push(Object.assign({},e,{fn:r})),this._posts.set(t,i),this};Br.prototype.clone=function(){let t=new Br;for(let e of this._pres.keys()){let r=this._pres.get(e).slice();r.numAsync=this._pres.get(e).numAsync,t._pres.set(e,r)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t};Br.prototype.merge=function(t,e){e=arguments.length===1?!0:e;let r=e?this.clone():this;for(let n of t._pres.keys()){let i=r._pres.get(n)||[],s=t._pres.get(n).filter(a=>i.map(u=>u.fn).indexOf(a.fn)===-1),o=i.concat(s);o.numAsync=i.numAsync||0,o.numAsync+=s.filter(a=>a.isAsync).length,r._pres.set(n,o)}for(let n of t._posts.keys()){let i=r._posts.get(n)||[],s=t._posts.get(n).filter(o=>i.indexOf(o)===-1);r._posts.set(n,i.concat(s))}return r};function rO(t,e,r,n){let i;try{i=t.apply(e,r)}catch(s){return n(s)}nO(i)&&i.then(()=>n(),s=>n(s))}function nO(t){return typeof t=="object"&&t!==null&&typeof t.then=="function"}function Dv(t){let e=!1,r=this;return function(){if(!e)return e=!0,kv(()=>t.apply(r,arguments))}}var kv=typeof process=="object"&&process!==null&&process.nextTick||function(e){setTimeout(e,0)};function v6e(t,e){return t.errorHandler?!0:t.fn.length===e+2}S6e.exports=Br});var C6e=m((w6e,A6e)=>{"use strict";var ao=A6e.exports=w6e={};ao.DocumentNotFoundError=null;ao.general={};ao.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";ao.general.required="Path `{PATH}` is required.";ao.Number={};ao.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";ao.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";ao.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";ao.Date={};ao.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";ao.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";ao.String={};ao.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";ao.String.match="Path `{PATH}` is invalid ({VALUE}).";ao.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";ao.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var uo=m((f2r,x6e)=>{"use strict";var mEt=Qt(),yEt=require("util"),iO=class extends mEt{constructor(e,r,n,i,s){if(arguments.length>0){let o=T6e(r),a=O6e(s),u=fz(null,e,r,n,a,o,i);super(u),this.init(e,r,n,i,s)}else super(fz())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,r,n,i,s){this.stringValue=hz(r),this.messageFormat=O6e(s),this.kind=e,this.value=r,this.path=n,this.reason=i,this.valueType=T6e(r)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.message=fz(e,this.kind,this.value,this.path,this.messageFormat,this.valueType)}};Object.defineProperty(iO.prototype,"name",{value:"CastError"});function hz(t){let e=yEt.inspect(t);return e=e.replace(/^'|'$/g,'"'),e.startsWith('"')||(e='"'+e+'"'),e}function T6e(t){if(t==null)return""+t;let e=typeof t;return e!=="object"||typeof t.constructor!="function"?e:t.constructor.name}function O6e(t){let e=t&&t._castErrorMessage||null;if(typeof e=="string"||typeof e=="function")return e}function fz(t,e,r,n,i,s,o){if(typeof i=="string"){let a=hz(r),u=i.replace("{KIND}",e).replace("{VALUE}",a).replace("{PATH}",n);return t!=null&&(u=u.replace("{MODEL}",t.modelName)),u}else{if(typeof i=="function")return i(r,n,t,e);{let a=hz(r),u=s?" (type "+s+")":"",c="Cast to "+e+" failed for value "+a+u+' at path "'+n+'"';return t!=null&&(c+=' for model "'+t.modelName+'"'),o!=null&&typeof o.constructor=="function"&&o.constructor.name!=="AssertionError"&&o.constructor.name!=="Error"&&(c+=' because of "'+o.constructor.name+'"'),c}}}x6e.exports=iO});var oO=m((h2r,R6e)=>{"use strict";var I6e=Qt(),gEt=require("util"),sO=class extends I6e{constructor(e,r,n,i){let s,o=I6e.messages;o.DocumentNotFoundError!=null?s=typeof o.DocumentNotFoundError=="function"?o.DocumentNotFoundError(e,r):o.DocumentNotFoundError:s='No document found for query "'+gEt.inspect(e)+'" on model "'+r+'"',super(s),this.result=i,this.numAffected=n,this.filter=e,this.query=e}};Object.defineProperty(sO.prototype,"name",{value:"DocumentNotFoundError"});R6e.exports=sO});var mz=m((m2r,D6e)=>{"use strict";D6e.exports=function(e){let r=Object.keys(e.errors||{}),n=r.length,i=[],s;for(let o=0;o<n;++o)s=r[o],e!==e.errors[s]&&i.push(s+": "+e.errors[s].message);return i.join(", ")}});var L0=m((y2r,P6e)=>{"use strict";var EEt=Qt(),bEt=Fo(),k6e=require("util"),M6e=mz(),q0=class t extends EEt{constructor(e){let r;bEt(e)==="model"?r=e.constructor.modelName+" validation failed":r="Validation failed",super(r),this.errors={},this._message=r,e&&(e.$errors=this.errors)}toString(){return this.name+": "+M6e(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(`${e}.${i}`,n[i]);return}this.errors[e]=r,this.message=this._message+": "+M6e(this)}};k6e.inspect.custom&&(q0.prototype[k6e.inspect.custom]=q0.prototype.inspect);Object.defineProperty(q0.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(q0.prototype,"name",{value:"ValidationError"});P6e.exports=q0});var yz=m((g2r,B6e)=>{"use strict";var N6e=Qt(),oE=class extends N6e{constructor(e,r){let n=e.message;n||(n=N6e.messages.general.default);let i=F6e(n,e,r);super(i),e=Object.assign({},e,{message:i}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}};Object.defineProperty(oE.prototype,"name",{value:"ValidatorError"});Object.defineProperty(oE.prototype,"properties",{enumerable:!1,writable:!0,value:null});oE.prototype.formatMessage=F6e;function F6e(t,e,r){if(typeof t=="function")return t(e,r);let n=Object.keys(e);for(let i of n)i!=="message"&&(t=t.replace("{"+i.toUpperCase()+"}",e[i]));return t}B6e.exports=oE});var gz=m((E2r,q6e)=>{"use strict";var _Et=Qt(),aO=class extends _Et{constructor(e,r,n){let i=n.join(", ");super('No matching document found for id "'+e._doc._id+'" version '+r+' modifiedPaths "'+i+'"'),this.version=r,this.modifiedPaths=n}};Object.defineProperty(aO.prototype,"name",{value:"VersionError"});q6e.exports=aO});var Ez=m((b2r,L6e)=>{"use strict";var vEt=Qt(),uO=class extends vEt{constructor(e){super("Can't save() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(uO.prototype,"name",{value:"ParallelSaveError"});L6e.exports=uO});var bz=m((_2r,j6e)=>{"use strict";var SEt=Qt(),cO=class extends SEt{constructor(e){super("Cannot overwrite `"+e+"` model once compiled.")}};Object.defineProperty(cO.prototype,"name",{value:"OverwriteModelError"});j6e.exports=cO});var K6e=m((v2r,$6e)=>{"use strict";var wEt=Qt(),lO=class extends wEt{constructor(e){let r=`Schema hasn't been registered for model "`+e+`".
Use mongoose.model(name, schema)`;super(r)}};Object.defineProperty(lO.prototype,"name",{value:"MissingSchemaError"});$6e.exports=lO});var _z=m((S2r,U6e)=>{"use strict";var AEt=Qt(),dO=class extends AEt{constructor(e,r,n){let i=n?.matchedCount??0,s=n?.insertedCount??0,o=r.map(u=>u._id).join(", ");o.length>100&&(o=o.slice(0,100)+"...");let a=r.length-i-s;super(`${e}.bulkSave() was not able to update ${a} of the given documents due to incorrect version or optimistic concurrency, document ids: ${o}`),this.modelName=e,this.documents=r,this.bulkWriteResult=n,this.numDocumentsNotUpdated=a}};Object.defineProperty(dO.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});U6e.exports=dO});var G6e=m((w2r,V6e)=>{"use strict";var CEt=Fo();V6e.exports=function(e){if(CEt(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.type==="Unknown")}});var z6e=m((A2r,H6e)=>{"use strict";var TEt=Fo();H6e.exports=function(e){if(TEt(e)!=="TopologyDescription"||e.servers.size===0)return!1;for(let r of e.servers.values())if(r.host.endsWith(".mongodb.net")===!1||r.port!==27017)return!1;return!0}});var J6e=m((C2r,W6e)=>{"use strict";var OEt=Fo(),xEt="Client network socket disconnected before secure TLS connection was established";W6e.exports=function(e){if(OEt(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.error&&n.error.message.indexOf(xEt)!==-1)}});var vz=m((T2r,Y6e)=>{"use strict";var IEt=Qt(),REt=G6e(),DEt=z6e(),kEt=J6e();var MEt="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",PEt="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html",pO=class extends IEt{assimilateError(e){let r=e.reason;DEt(r)&&REt(r)&&e.message.indexOf("bad auth")===-1&&e.message.indexOf("Authentication failed")===-1?this.message=MEt:kEt(r)?this.message=PEt:this.message=e.message;for(let i in e)i!=="name"&&(this[i]=e[i]);return this.cause=r,this}};Object.defineProperty(pO.prototype,"name",{value:"MongooseServerSelectionError"});Y6e.exports=pO});var Sz=m((O2r,Q6e)=>{"use strict";var NEt=Qt(),fO=class extends NEt{constructor(e){let r="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`;super(r)}};Object.defineProperty(fO.prototype,"name",{value:"DivergentArrayError"});Q6e.exports=fO});var ah=m((x2r,X6e)=>{"use strict";var FEt=Qt(),hO=class extends FEt{constructor(e,r,n){r=r||"Field `"+e+"` is not in schema and strict mode is set to throw.",super(r),this.isImmutableError=!!n,this.path=e}};Object.defineProperty(hO.prototype,"name",{value:"StrictModeError"});X6e.exports=hO});var wz=m((I2r,Z6e)=>{"use strict";var BEt=Qt(),mO=class extends BEt{constructor(e,r){r=r||"Cannot populate path `"+e+"` because it is not in your schema. Set the `strictPopulate` option to false to override.",super(r),this.path=e}};Object.defineProperty(mO.prototype,"name",{value:"StrictPopulateError"});Z6e.exports=mO});var wa=m((eEe,tEe)=>{"use strict";var $s=Qt();tEe.exports=eEe=$s;$s.messages=C6e();$s.Messages=$s.messages;$s.CastError=uo();$s.DocumentNotFoundError=oO();$s.ValidationError=L0();$s.ValidatorError=yz();$s.VersionError=gz();$s.ParallelSaveError=Ez();$s.OverwriteModelError=bz();$s.MissingSchemaError=K6e();$s.MongooseBulkSaveIncompleteError=_z();$s.MongooseServerSelectionError=vz();$s.DivergentArrayError=Sz();$s.StrictModeError=ah();$s.StrictPopulateError=wz()});var su=m((R2r,rEe)=>{"use strict";rEe.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var Ca=m((D2r,nEe)=>{"use strict";var qEt=Vn(),Ks=class{constructor(e){if(e==null)return this;Object.assign(this,qEt(e))}},Aa=su();Object.defineProperty(Ks.prototype,"type",Aa);Object.defineProperty(Ks.prototype,"validate",Aa);Object.defineProperty(Ks.prototype,"cast",Aa);Object.defineProperty(Ks.prototype,"required",Aa);Object.defineProperty(Ks.prototype,"default",Aa);Object.defineProperty(Ks.prototype,"ref",Aa);Object.defineProperty(Ks.prototype,"refPath",Aa);Object.defineProperty(Ks.prototype,"select",Aa);Object.defineProperty(Ks.prototype,"index",Aa);Object.defineProperty(Ks.prototype,"unique",Aa);Object.defineProperty(Ks.prototype,"immutable",Aa);Object.defineProperty(Ks.prototype,"sparse",Aa);Object.defineProperty(Ks.prototype,"text",Aa);Object.defineProperty(Ks.prototype,"transform",Aa);nEe.exports=Ks});var yO=m((k2r,aE)=>{"use strict";var LEt=uo();aE.exports=function(e,r){if(aE.exports.convertToTrue.has(e))return!0;if(aE.exports.convertToFalse.has(e))return!1;if(e==null)return e;throw new LEt("boolean",e,r)};aE.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);aE.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var gO=m((M2r,iEe)=>{"use strict";var jEt=yO();iEe.exports=function(t){let e=this!=null?this.path:null;return jEt(t,e)}});var Az=m((P2r,sEe)=>{"use strict";sEe.exports=function(t){if(Array.isArray(t)){if(!t.every(e=>typeof e=="number"||typeof e=="string"))throw new Error("$type array values must be strings or numbers");return t}if(typeof t!="number"&&typeof t!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return t}});var aEe=m((N2r,oEe)=>{"use strict";var $Et=ah();oEe.exports=function(t){t.$immutable?(t.$immutableSetter=KEt(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};function KEt(t,e){return function(n,i,s,o){if(this==null||this.$__==null||this.isNew||o&&o.overwriteImmutable||!(typeof e=="function"?e.call(this,this):e))return n;let u=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(t):this.$__getValue(t);if(this.$__.strictMode==="throw"&&n!==u)throw new $Et(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return u}}});var cEe=m((F2r,uEe)=>{"use strict";uEe.exports=function(e){return typeof e=="function"&&e.constructor&&e.constructor.name==="AsyncFunction"}});var dEe=m((B2r,lEe)=>{"use strict";lEe.exports=function(e){let r=Object.keys(e),n=!0;for(let i=0,s=r.length;i<s;++i)if(typeof e[r[i]]=="object"&&e[r[i]]!==null){n=!1;break}return n}});var fEe=m((q2r,pEe)=>{"use strict";pEe.exports=function(e){let r=[],n="",i="DEFAULT";for(let s=0;s<e.length;++s)i==="IN_SQUARE_BRACKETS"&&!/\d/.test(e[s])&&e[s]!=="]"&&(i="DEFAULT",n=r[r.length-1]+"["+n,r.splice(r.length-1,1)),e[s]==="["?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="IN_SQUARE_BRACKETS"):e[s]==="]"?i==="IN_SQUARE_BRACKETS"?(i="IMMEDIATELY_AFTER_SQUARE_BRACKETS",r.push(n),n=""):(i="DEFAULT",n+=e[s]):e[s]==="."?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="DEFAULT"):n+=e[s];return i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&r.push(n),r}});var gEe=m(Gp=>{var Mv=fEe(),hEe=["__proto__","constructor","prototype"];Gp.get=function(t,e,r,n){var i;typeof r=="function"&&(r.length<2?(n=r,r=void 0):(i=r,r=void 0)),n||(n=yEe);var s=typeof t=="string"?Mv(t):t;if(!Array.isArray(s))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=e,a,u=0;u<s.length;++u){if(a=s[u],typeof s[u]!="string"&&typeof s[u]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof s[u]);if(Array.isArray(o)&&!/^\d+$/.test(a)){var c=s.slice(u);return[].concat(o).map(function(d){return d?Gp.get(c,d,r||i,n):n(void 0)})}if(i)o=i(o,a);else{var l=r&&o[r]?o[r]:o;o=l instanceof Map?l.get(a):l[a]}if(!o)return n(o)}return n(o)};Gp.has=function(t,e){var r=typeof t=="string"?Mv(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof r[s]);if(i==null||typeof i!="object"||!(r[s]in i))return!1;i=i[r[s]]}return!0};Gp.unset=function(t,e){var r=typeof t=="string"?Mv(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(i==null||typeof i!="object"||!(r[s]in i))return!1;if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof r[s]);if(hEe.indexOf(r[s])!==-1)return!1;if(s===n-1)return delete i[r[s]],!0;i=i instanceof Map?i.get(r[s]):i[r[s]]}return!0};Gp.set=function(t,e,r,n,i,s){var o;typeof n=="function"&&(n.length<2?(i=n,n=void 0):(o=n,n=void 0)),i||(i=yEe);var a=typeof t=="string"?Mv(t):t;if(!Array.isArray(a))throw new TypeError("Invalid `path`. Must be either string or array");if(r!=null){for(var u=0;u<a.length;++u){if(typeof a[u]!="string"&&typeof a[u]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof a[u]);if(hEe.indexOf(a[u])!==-1)return}for(var c=s||/\$/.test(t)&&s!==!1,l=r,d,u=0,p=a.length-1;u<p;++u){if(d=a[u],d=="$"){if(u==p-1)break;continue}if(Array.isArray(l)&&!/^\d+$/.test(d)){var f=a.slice(u);if(!c&&Array.isArray(e))for(var h=0;h<l.length&&h<e.length;++h)Gp.set(f,e[h],l[h],n||o,i,c);else for(var h=0;h<l.length;++h)Gp.set(f,e,l[h],n||o,i,c);return}if(o)l=o(l,d);else{var g=n&&l[n]?l[n]:l;l=g instanceof Map?g.get(d):g[d]}if(!l)return}if(d=a[p],n&&l[n]&&(l=l[n]),Array.isArray(l)&&!/^\d+$/.test(d))if(!c&&Array.isArray(e))mEe(l,e,d,o,n,i);else for(var h=0;h<l.length;++h){var _=l[h];_&&(o?o(_,d,i(e)):(_[n]&&(_=_[n]),_[d]=i(e)))}else o?o(l,d,i(e)):l instanceof Map?l.set(d,i(e)):l[d]=i(e)}};Gp.stringToParts=Mv;function mEe(t,e,r,n,i,s){for(var o,a=0;a<t.length&&a<e.length;++a)o=t[a],Array.isArray(o)&&Array.isArray(e[a])?mEe(o,e[a],r,n,i,s):o&&(n?n(o,r,s(e[a])):(o[i]&&(o=o[i]),o[r]=s(e[a])))}function yEe(t){return t}});var ou=m((EEe,bEe)=>{"use strict";bEe.exports=EEe=gEe()});var Tz=m((j2r,_Ee)=>{"use strict";var UEt=Vn(),Cz=class{constructor(e){if(this._docs={},this._childDocs=[],e!=null&&(e=UEt(e),Object.assign(this,e),typeof e.subPopulate=="object"&&(this.populate=e.subPopulate),e.perDocumentLimit!=null&&e.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+e.path+"`.")}};_Ee.exports=Cz});var SEe=m(vEe=>{"use strict";vEe.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}});var EO=m((K2r,wEe)=>{"use strict";var VEt=Vu(),uE=Symbol("mongoose#emitted");wEe.exports=function(e,r,n,i){if(typeof e=="function")try{return r(function(s){if(s!=null){n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[uE]&&(s[uE]=!0,n.emit("error",s));try{e(s)}catch(o){return VEt(()=>{throw o})}return}e.apply(this,arguments)})}catch(s){return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[uE]&&(s[uE]=!0,n.emit("error",s)),e(s)}return i=i||global.Promise,new i((s,o)=>{r(function(a,u){if(a!=null)return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!a[uE]&&(a[uE]=!0,n.emit("error",a)),o(a);if(arguments.length>2)return s(Array.prototype.slice.call(arguments,1));s(u)})})}});var bO=m((U2r,AEe)=>{"use strict";AEe.exports=function(e,r,n){let i=Object.keys(r.tree),s={};for(let o of i)n&&(e.paths[o]||e.nested[o]||e.singleNestedPaths[o])||(s[o]=r.tree[o]);e.options._isMerging=!0,e.add(s,null),delete e.options._isMerging,e.callQueue=e.callQueue.concat(r.callQueue),e.method(r.methods),e.static(r.statics);for(let[o,a]of Object.entries(r._userProvidedOptions))o in e._userProvidedOptions||e.set(o,a);for(let o in r.query)e.query[o]=r.query[o];for(let o in r.virtuals)e.virtuals[o]=r.virtuals[o].clone();e._indexes=e._indexes.concat(r._indexes||[]),e.s.hooks.merge(r.s.hooks,!1)}});var OEe=m((CEe,TEe)=>{"use strict";var V2r=Tt(),sc=TEe.exports=CEe=function(){};sc.ctor=function(){let t=[...arguments],e=function(){sc.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new sc,e.prototype.constructor=e,e.prototype.stateNames=t,t.forEach(function(r){e.prototype[r]=function(n){this._changeState(n,r)}}),e};sc.prototype._changeState=function(e,r){let n=this.paths[e];if(n===r)return;let i=this.states[n];i&&delete i[e],this.paths[e]=r,this.states[r]=this.states[r]||{},this.states[r][e]=!0};sc.prototype.clear=function(e){if(this.states[e]==null)return;let r=Object.keys(this.states[e]),n=r.length,i;for(;n--;)i=r[n],delete this.states[e][i],delete this.paths[i]};sc.prototype.clearPath=function(e){let r=this.paths[e];r&&(delete this.paths[e],delete this.states[r][e])};sc.prototype.getStatePaths=function(e){return this.states[e]!=null?this.states[e]:{}};sc.prototype.some=function(){let e=this,r=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(r,function(n){return e.states[n]==null?!1:Object.keys(e.states[n]).length})};sc.prototype._iter=function(e){return function(){let r=[...arguments],n=r.pop();r.length||(r=this.stateNames);let i=this;return r.reduce(function(o,a){return i.states[a]==null?o:o.concat(Object.keys(i.states[a]))},[])[e](function(o,a,u){return n(o,a,u)})}};sc.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};sc.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};sc.prototype.clone=function(){let e=new this.constructor;e.paths={...this.paths};for(let r of this.stateNames)r in this.states&&(e.states[r]=this.states[r]==null?this.states[r]:{...this.states[r]});return e}});var REe=m((xEe,IEe)=>{"use strict";var GEt=OEe(),HEt=GEt.ctor("require","modify","init","default","ignore");IEe.exports=xEe=ii;function ii(){this.activePaths=new HEt}ii.prototype.strictMode=!0;ii.prototype.fullPath=void 0;ii.prototype.selected=void 0;ii.prototype.shardval=void 0;ii.prototype.saveError=void 0;ii.prototype.validationError=void 0;ii.prototype.adhocPaths=void 0;ii.prototype.removing=void 0;ii.prototype.inserting=void 0;ii.prototype.saving=void 0;ii.prototype.version=void 0;ii.prototype._id=void 0;ii.prototype.ownerDocument=void 0;ii.prototype.populate=void 0;ii.prototype.populated=void 0;ii.prototype.primitiveAtomics=void 0;ii.prototype.wasPopulated=!1;ii.prototype.scope=void 0;ii.prototype.session=null;ii.prototype.pathsToScopes=null;ii.prototype.cachedRequired=null});var cE=m((G2r,MEe)=>{"use strict";var Oz=ca().Binary,zEt=ca().UUID,DEe=Tt();function Bo(t,e,r){let n=t;t==null&&(n=0);let i,s,o;Array.isArray(e)?(s=e[0],o=e[1]):i=e;let a;return typeof n=="number"||n instanceof Number?a=Buffer.alloc(n):a=Buffer.from(n,i,r),DEe.decorate(a,Bo.mixin),a.isMongooseBuffer=!0,a[Bo.pathSymbol]=s,a[kEe]=o,a._subtype=0,a}var WEt=Symbol.for("mongoose#Buffer#_path"),kEe=Symbol.for("mongoose#Buffer#_parent");Bo.pathSymbol=WEt;Bo.mixin={_subtype:void 0,_markModified:function(){let t=this[kEe];return t&&t.markModified(this[Bo.pathSymbol]),this},write:function(){let t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){let e=Buffer.prototype.copy.apply(this,arguments);return t&&t.isMongooseBuffer&&t._markModified(),e}};DEe.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(t){Buffer.prototype[t]&&(Bo.mixin[t]=function(){let e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})});Bo.mixin.toObject=function(t){let e=typeof t=="number"?t:this._subtype||0;return new Oz(Buffer.from(this),e)};Bo.mixin.$toObject=Bo.mixin.toObject;Bo.mixin.toBSON=function(){return new Oz(this,this._subtype||0)};Bo.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new zEt(this)};Bo.mixin.equals=function(t){if(!Buffer.isBuffer(t)||this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0};Bo.mixin.subtype=function(t){if(typeof t!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==t&&this._markModified(),this._subtype=t};Bo.Binary=Oz;MEe.exports=Bo});var j0=m(xz=>{"use strict";xz.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");xz.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var $0=m((z2r,PEe)=>{"use strict";var _O=vi(),JEt=j0(),YEt=oh(),QEt=Tt();function oc(t,e){if(e&&e.default){let r=e.default;Array.isArray(r)&&r.length===0?e.default=Array:!e.shared&&YEt(r)&&Object.keys(r).length===0&&(e.default=function(){return{}})}_O.call(this,t,e,"Mixed"),this[JEt.schemaMixedSymbol]=!0}oc.schemaName="Mixed";oc.defaultOptions={};oc.prototype=Object.create(_O.prototype);oc.prototype.constructor=oc;oc.get=_O.get;oc.set=_O.set;oc.setters=[];oc.prototype.cast=function(t){return t instanceof Error?QEt.errorToPOJO(t):t};oc.prototype.castForQuery=function(t,e){return e};oc.prototype.toJSONSchema=function(e){return{}};PEe.exports=oc});var FEe=m((J2r,NEe)=>{"use strict";NEe.exports=class{constructor(e,r,n){this.subdocSnapshot=e,this.activePaths=r,this.version=n}}});var SO=m((Y2r,BEe)=>{"use strict";var XEt=Qt(),vO=class extends XEt{constructor(e,r){let n=Array.isArray(r)?"array":"primitive value";super("Tried to set nested object field `"+e+`\` to ${n} \``+r+"`"),this.path=e}};Object.defineProperty(vO.prototype,"name",{value:"ObjectExpectedError"});BEe.exports=vO});var AO=m((Q2r,qEe)=>{"use strict";var ZEt=Qt(),wO=class extends ZEt{constructor(e,r,n){super('Parameter "'+r+'" to '+n+'() must be an object, got "'+e.toString()+'" (type '+typeof e+")")}};Object.defineProperty(wO.prototype,"name",{value:"ObjectParameterError"});qEe.exports=wO});var jEe=m((X2r,LEe)=>{"use strict";var ebt=Qt(),CO=class extends ebt{constructor(e){super("Can't validate() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(CO.prototype,"name",{value:"ParallelValidateError"});LEe.exports=CO});var Iz=m((Z2r,$Ee)=>{"use strict";$Ee.exports=function(e){let r={},n=Object.keys(e);for(let i of n){if(i.indexOf(".")===-1){r[i]=1;continue}let s=i.split("."),o=s[0];for(let a=0;a<s.length;++a)r[o]=1,a+1<s.length&&(o=o+"."+s[a+1])}return r}});var UEe=m((e6r,KEe)=>{"use strict";KEe.exports=function(e){return e==null||typeof e!="object"?!1:e.$slice==null&&e.$elemMatch==null&&e.$meta==null&&e.$==null}});var TO=m((t6r,VEe)=>{"use strict";var tbt=UEe();VEe.exports=function(e,r,n,i,s,o,a){let u=Object.keys(e.$__schema.paths),c=u.length,l=a&&a.skipParentChangeTracking;for(let d=0;d<c;++d){let p,f="",h=u[d];if(h==="_id"&&e.$__.skipId)continue;let g=e.$__schema.paths[h],_=g.splitPath(),S=_.length;if(_[S-1]==="$*")continue;let w=!1,C=e._doc;for(let A=0;A<S&&C!=null;++A){let O=_[A];if(f+=(f.length?".":"")+O,n===!0){if(f in r)break}else if(n===!1&&r&&!w){let x=g.$isSingleNested||g.$isMongooseDocumentArray;if(f in r&&!tbt(r[f])||A===S-1&&x&&i!=null&&i[f])w=!0;else if(i!=null&&!i[f])break}if(A===S-1){if(C[O]!==void 0)break;if(s!=null){if(typeof g.defaultValue=="function"){if(!g.defaultValue.$runBeforeSetters&&s||g.defaultValue.$runBeforeSetters&&!s)break}else if(!s)continue}if(o&&o[f])break;if(r&&n!==null){if(n===!0){if(h in r)continue;try{p=g.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(C[O]=p,Rz(e,h,l))}else if(w){try{p=g.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(C[O]=p,Rz(e,h,l))}}else{try{p=g.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(C[O]=p,Rz(e,h,l))}}else C=C[O]}}};function Rz(t,e,r){t.$__.activePaths.default(e),!r&&t.$isSubdocument&&t.$isSingleNested&&t.$parent()!=null&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}});var OO=m((r6r,HEe)=>{"use strict";HEe.exports=function(e,r,n){n=n||{};let i=n.skipDocArrays,s=0;if(!e)return s;for(let o of Object.keys(e.$__.activePaths.getStatePaths("modify"))){if(i){let a=e.$__schema.path(o);if(a&&a.$isMongooseDocumentArray)continue}o.startsWith(r+".")&&(e.$__.activePaths.clearPath(o),++s,e.$isSubdocument&&GEe(e,o))}return s};function GEe(t,e,r=new Set){if(r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");let n=t.$parent(),i=t.$__pathRelativeToParent(void 0,!1)+"."+e;n.$__.activePaths.clearPath(i),n.$isSubdocument&&GEe(n,i,r)}});var IO=m(Dz=>{"use strict";var rbt=Vn(),nbt=ot().documentSchemaSymbol,ibt=Tl().internalToObjectOptions,sbt=Tt(),lE,obt=ot().getSymbol,xO=ot().scopeSymbol,zEe=sbt.isPOJO;Dz.compile=WEe;Dz.defineKey=JEe;var abt=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),ubt=Object.freeze({noDottedPath:!0});function WEe(t,e,r,n){lE=lE||ac();let i=n.typeKey;for(let s of Object.keys(t)){let o=t[s],u=zEe(o)&&Object.keys(o).length>0&&(!o[i]||i==="type"&&zEe(o.type)&&o.type.type)?o:null;JEe({prop:s,subprops:u,prototype:e,prefix:r,options:n})}}function JEe({prop:t,subprops:e,prototype:r,prefix:n,options:i}){lE=lE||ac();let s=(n?n+".":"")+t;n=n||"";let o=n?Object.freeze({}):ubt;e?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){let a=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[s]){let u=Object.create(lE.prototype,cbt(this));n||(u.$__[xO]=this),u.$__.nestedPath=s,Object.defineProperty(u,"schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,nbt,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return rbt(a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(u,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(u,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(u,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(u,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(s,null,abt)||{}).length===0}}),Object.defineProperty(u,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),WEe(e,u,s,i),this.$__.getters[s]=u}return this.$__.getters[s]},set:function(a){a!=null&&a.$__isNested?a=a.$__get():a instanceof lE&&!a.$__isNested&&(a=a.$toObject(ibt)),(this.$__[xO]||this).$set(s,a)}}):Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){return this[obt].call(this.$__[xO]||this,s,null,o)},set:function(a){this.$set.call(this.$__[xO]||this,s,a)}})}function cbt(t){let e={};return Object.getOwnPropertyNames(t).forEach(function(r){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(r)!==-1&&(e[r]=Object.getOwnPropertyDescriptor(t,r),e[r].enumerable=!1)}),e}});var QEe=m((i6r,YEe)=>{"use strict";YEe.exports=function(e){return e==null?null:Object.keys(e)[0]}});var RO=m(kz=>{"use strict";var lbt=ca().Binary,XEe=js(),ZEe=xv(),dbt=wa(),pbt=require("util");kz.flatten=ebe;kz.modifiedPaths=tbe;function ebe(t,e,r,n){let i;t&&ZEe(t)&&!Buffer.isBuffer(t)?i=Object.keys(t.toObject({transform:!1,virtuals:!1})||{}):i=Object.keys(t||{});let s=i.length,o={};e=e?e+".":"";for(let a=0;a<s;++a){let u=i[a],c=t[u];o[e+u]=c;let l=n&&n.path&&n.path(e+u),d=n&&n.nested&&n.nested[e+u];if(!(l&&l.instance==="Mixed")){if(rbe(c)){if(r&&r.skipArrays&&Array.isArray(c))continue;let p=ebe(c,e+u,r,n);for(let f in p)o[f]=p[f];Array.isArray(c)&&(o[e+u]=c)}if(d){let p=Object.keys(n.paths);for(let f of p)f.startsWith(e+u+".")&&!o.hasOwnProperty(f)&&(o[f]=void 0)}}}return o}function tbe(t,e,r,n=null){if(t==null||typeof t!="object")return;if(n==null&&(n={raw:{update:t,path:e},trace:new WeakSet}),n.trace.has(t))throw new dbt(`a circular reference in the update value, updateValue:
${pbt.inspect(n.raw.update,{showHidden:!1,depth:1})}
updatePath: '${n.raw.path}'`);n.trace.add(t);let i=Object.keys(t||{}),s=i.length;r=r||{},e=e?e+".":"";for(let o=0;o<s;++o){let a=i[o],u=t[a],c=e+a;r[c]=!0,!Buffer.isBuffer(u)&&ZEe(u)&&(u=u.toObject({transform:!1,virtuals:!1})),rbe(u)&&tbe(u,e+a,r,n)}return n.trace.delete(t),r}function rbe(t){return t&&typeof t=="object"&&!(t instanceof Date)&&!XEe(t,"ObjectId")&&(!Array.isArray(t)||t.length!==0)&&!(t instanceof Buffer)&&!XEe(t,"Decimal128")&&!(t instanceof lbt)}});var si=m((o6r,nbe)=>{"use strict";nbe.exports=function(e,r,n){let i,s=!1;if(typeof r=="string"){if(r.indexOf(".")===-1){let u=Mz(e,r);return u??n}i=r.split(".")}else if(s=!0,i=r,i.length===1){let u=Mz(e,i[0]);return u??n}let o=r,a=e;for(let u of i){if(a==null)return n;if(!s&&a[o]!=null)return a[o];a=Mz(a,u),s||(o=o.substr(u.length+1))}return a??n};function Mz(t,e){return t==null?t:t instanceof Map?t.get(e):t[e]}});var Pz=m((a6r,sbe)=>{"use strict";var ibe=js();sbe.exports=function(e,r){return typeof e=="string"&&typeof r=="string"||typeof e=="number"&&typeof r=="number"?e===r:ibe(e,"ObjectId")&&ibe(r,"ObjectId")?e.toString()===r.toString():!1}});var DO=m((u6r,obe)=>{"use strict";var fbt=Pz();obe.exports=function(e,r){if(e==null||e.discriminators==null)return null;for(let n of Object.keys(e.discriminators)){let i=e.discriminators[n];if(i.discriminatorMapping!=null&&fbt(i.discriminatorMapping.value,r))return i}return null}});var ube=m((c6r,abe)=>{"use strict";var hbt=si(),mbt=DO();abe.exports=function t(e,r,n){n=n||{};let i=n.typeOnly,s=Array.isArray(r)?r:r.indexOf(".")===-1?[r]:r.split("."),o=null,a="adhocOrUndefined",u=mbt(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let c=0;c<s.length;++c){let l=s.slice(0,c+1).join(".");if(o=u.path(l),o==null){a="adhocOrUndefined";continue}if(o.instance==="Mixed")return i?"real":o;if(a=u.pathType(l),(o.$isSingleNested||o.$isMongooseDocumentArrayElement)&&o.schema.discriminators!=null){let d=o.schema.discriminators,p=e.get(l+"."+hbt(o,"schema.options.discriminatorKey"));if(p==null||d[p]==null)continue;let f=s.slice(c+1).join(".");return t(e.get(l),f,n)}}return i?a:o}});var lbe=m((l6r,cbe)=>{"use strict";var ybt=si();cbe.exports=function(e,r,n){let i=n!=null?Object.keys(ybt(e.tree,n,{})):Object.keys(e.tree),s=new Set(Object.keys(r)),o;if(s.size>1){o=new Set;for(let a of i)s.has(a)&&o.add(a);for(let a of s)o.has(a)||o.add(a);o=Array.from(o)}else o=Array.from(s);return o}});var pbe=m((d6r,dbe)=>{"use strict";dbe.exports=function(e,r){if(r.length===1)return;let n=r[0],i;for(let s=0;s<r.length-1;++s){let o=e.path(n);o&&o.schema?(i=o.schema.options.strict,e=o.schema,n=o.$isMongooseDocumentArray&&!isNaN(r[s+1])?"":r[s+1]):n+=n.length?"."+r[s+1]:r[s+1]}return i}});var kO=m((p6r,fbe)=>{"use strict";var gbt=Tt(),Ebt=new Set(["__index","__parentArray","_doc"]);fbe.exports=function(e,r){if(gbt.isPOJO(e)&&e.$__!=null&&e._doc!=null){if(r){let n={};for(let i of Object.keys(e))typeof i!="symbol"&&i[0]!=="$"&&(Ebt.has(i)||(n[i]=e[i]));return{...e._doc,...n}}return e._doc}return e}});var dE=m((f6r,hbe)=>{"use strict";hbe.exports=function(e){return e==null?!0:typeof e=="object"?!("$meta"in e)&&!("$slice"in e):!0}});var pE=m((h6r,mbe)=>{"use strict";var bbt=dE(),_bt=nE();mbe.exports=function t(e){if(e==null)return null;let r=Object.keys(e),n=null;if(r.length===1&&r[0]==="_id")n=!e._id;else for(let i=0;i<r.length;++i){let s=r[i];if(s!=="_id"&&bbt(e[s])&&(n=_bt(e[s])?t(e[s])??n:!e[s],n!=null))break}return n}});var Nz=m((m6r,ybe)=>{"use strict";var vbt=dE();ybe.exports=function(e,r){if(e==null)return!1;if(r==="_id")return e._id===0;let n=Object.keys(e),i=null;for(let s of n)if(vbt(e[s])){i=e[r]===1?"inclusive":"exclusive";break}return i==="inclusive"?e[r]!==1:i==="exclusive"?e[r]===0:!1}});var Fz=m((y6r,gbe)=>{"use strict";var Sbt=Tt();gbe.exports=function(e,r){if(e._doc._id==null||r==null||r.length===0)return;let n=String(e._doc._id);for(let i of r){if(i.isVirtual)continue;let o=i.path.split(".");for(let a=0;a<o.length-1;++a){let u=o.slice(0,a+1).join("."),c=o.slice(a+1).join("."),l=e.get(u);if(l!=null&&Sbt.isMongooseDocumentArray(l)){for(let d=0;d<l.length;++d)l[d]&&l[d].populated(c,i._docs[n]==null?void 0:i._docs[n][d],i);break}}}}});var Bz=m((g6r,bbe)=>{"use strict";var{isPOJO:wbt}=Tt();bbe.exports=Ebe;function Ebe(t){let e=Object.keys(t),r=e.length,n,i,s;for(;r--;){if(i=e[r],s=t[i],wbt(s)&&(t[i]=Ebe(s)),t[i]===void 0){delete t[i];continue}n=!0}return n?t:void 0}});var qz=m((E6r,_be)=>{"use strict";var Abt=/\./g;_be.exports=function(e){if(e.indexOf(".")===-1)return[e];let r=e.split(Abt),n=r.length,i=new Array(n),s="";for(let o=0;o<n;++o)s+=s.length!==0?"."+r[o]:r[o],i[o]=s;return i}});var Sbe=m((b6r,vbe)=>{"use strict";vbe.exports=function(e,r,n,i,s){let o=Object.keys(e).reduce((u,c)=>u||c.startsWith(r+"."),!1),a=r+"."+n.options.discriminatorKey;!o&&s.length===1&&s[0]===a&&i.splice(i.indexOf(a),1)}});var uc=m((_6r,wbe)=>{"use strict";var Cbt=Pz();wbe.exports=function(e,r){if(e==null)return null;for(let n of Object.keys(e)){let i=e[n];if(i.schema&&i.schema.discriminatorMapping&&Cbt(i.schema.discriminatorMapping.value,r))return i}return null}});var MO=m((v6r,Abe)=>{"use strict";Abe.exports=function(e,r){let n=r.split("."),i="",s,o,a;for(let u=0;u<n.length;++u)if(i+=i.length?".":""+n[u],e[i]){for(o=Object.keys(e),a=o.length,s=0;s<a;++s)o[u].indexOf(i+".")===0&&o[u].indexOf(r);return!0}return!1}});var Pv=m(K0=>{"use strict";var Cbe=Tz(),Tbt=Sbe(),Tbe=si(),Obt=uc(),xbt=dE(),Ibt=Vn(),Rbt=MO();K0.preparePopulationOptionsMQ=function(e,r){let n=e._mongooseOptions.populate,i=Object.keys(n).reduce((a,u)=>a.concat([n[u]]),[]);r.lean!=null&&i.filter(a=>(a&&a.options&&a.options.lean)==null).forEach(Dbt(r.lean));let s=e&&e.options&&e.options.session||null;s!=null&&i.forEach(a=>{if(a.options==null){a.options={session:s};return}"session"in a.options||(a.options.session=s)});let o=e._fieldsForExec();for(let a=0;a<i.length;++a)i[a]instanceof Cbe?i[a]=new Cbe({...i[a],_queryProjection:o,_localModel:e.model}):(i[a]._queryProjection=o,i[a]._localModel=e.model);return i};K0.createModel=function(e,r,n,i,s){e.hooks.execPreSync("createModel",r);let o=e.schema?e.schema.discriminatorMapping:null,a=o&&o.isRoot?o.key:null,u=r[a];if(a&&u&&e.discriminators){let l=e.discriminators[u]||Obt(e.discriminators,u);if(l){let d=Ibt(i);return K0.applyPaths(d,l.schema),new l(void 0,d,!0)}}let c={skipId:!0,isNew:!1,willInit:!0};return s!=null&&"defaults"in s&&(c.defaults=s.defaults),new e(void 0,n,c)};K0.createModelAndInit=function(e,r,n,i,s,o,a){let u=o?{populated:o}:void 0,c=K0.createModel(e,r,n,i,s);try{c.$init(r,u,a)}catch(l){a(l,c)}};K0.applyPaths=function(e,r,n){let i,s,o=new Set;if(e){s=Object.keys(e);let p=[];for(let f=0;f<s.length;++f){let h=s[f];s[f][0]==="-"&&(delete e[h],h==="-_id"?e._id=0:p.push(h.slice(1)))}s=Object.keys(e);for(let f=0;f<s.length;++f){if(s[f][0]==="+")continue;let h=e[s[f]];if(xbt(h)&&!(s[f]==="_id"&&s.length>1)&&!(s[f]===r.options.discriminatorKey&&s.length>1&&h!=null&&!h)){i=!h;break}}for(let f of p){let h=r.path(f);!h||!h.selected||i!==!1?(e[f]=0,i=!0):h&&h.selected&&i===!1&&o.add(f)}}let a=[],u=[],c=[];switch(l(r),i){case!0:for(let p of u)e[p]=0;break;case!1:r&&r.paths._id&&r.paths._id.options&&r.paths._id.options.select===!1&&(e._id=0);for(let p of a)o.has(p)||Rbt(e,p)||(e[p]=e[p]||1);break;case void 0:if(e==null)break;for(let p of Object.keys(e||{}))p.startsWith("+")&&delete e[p];for(let p of u)e[p]==null&&(e[p]=0);break}function l(p,f){if(f||(f=""),c.indexOf(p)!==-1)return[];c.push(p);let h=[];return p.eachPath(function(g,_){if(f&&(g=f+"."+g),_.$isSchemaMap||g.endsWith(".$*")){let w="+"+g,C=e&&w in e;_.options&&_.options.select===!1&&!C&&u.push(g);return}let S=d(g,_);if(S==null&&!Array.isArray(_)&&_.$isMongooseArray&&!_.$isMongooseDocumentArray&&(S=d(g,_.caster)),S!=null&&h.push(S),_.schema){let w=l(_.schema,g);i===!1&&Tbt(e,g,_.schema,a,w)}}),c.pop(),h}function d(p,f){if(e==null||typeof f.selected!="boolean")return;if(f.selected===!1&&e[p]){n&&(e[p]=0);return}if(!i&&f.selected&&p===r.options.discriminatorKey&&e[p]!=null&&!e[p]){delete e[p];return}if(i===!1&&f.selected&&e[p]!=null&&!e[p]){delete e[p];return}let h="+"+p;if(e&&h in e){delete e[h],i===!1&&s.length>1&&!~s.indexOf(p)&&!n?e[p]=1:i==null&&n&&f.selected===!1&&(e[p]=0);return}let _=p.split("."),S="";for(let w=0;w<_.length;++w)if(S+=S.length?"."+_[w]:_[w],u.indexOf(S)!==-1)return;if(!i&&(f&&f.options&&f.options.$skipDiscriminatorCheck)){let w="";for(let C=0;C<_.length;++C){w+=(w.length===0?"":".")+_[C];let A=Tbe(e,w,!1)||Tbe(e,w+".$",!1);if(A&&typeof A!="object")return}}return(f.selected?a:u).push(p),p}};function Dbt(t){return function(e){e.options||(e.options={}),t!=null&&Array.isArray(t.virtuals)&&(t=Object.assign({},t),t.virtuals=t.virtuals.filter(r=>typeof r=="string"&&r.startsWith(e.path+".")).map(r=>r.slice(e.path.length+1))),e.options.lean=t}}});var Lz=m((w6r,Obe)=>{"use strict";function kbt(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}Obe.exports=kbt});var Ibe=m((A6r,xbe)=>{"use strict";xbe.exports=function(e,r,n){let i=r[0],s=n,o=e;for(let a=0;a<r.length-1;++a){let u=s.path(i);if(u&&u.schema){let c=o.get(i);if(s=u.schema,i=r[a+1],Array.isArray(c)&&!isNaN(i)&&(c=c[i],i=""),c==null)break;o=c}else i+=i.length?"."+r[a+1]:r[a+1]}return o}});var PO=m((C6r,Dbe)=>{"use strict";var Hp=ac(),Mbt=Vu(),Pbt=Tl().internalToObjectOptions,Rbe=require("util"),Nbt=Tt();Dbe.exports=Wr;function Wr(t,e,r,n,i){if(typeof n=="object"&&n!=null&&i==null&&(i=n,n=void 0),r!=null){let o={isNew:r.isNew};"defaults"in r.$__&&(o.defaults=r.$__.defaults),i=Object.assign(o,i)}i!=null&&i.path!=null&&(this.$basePath=i.path),i!=null&&i.pathRelativeToParent!=null&&(this.$pathRelativeToParent=i.pathRelativeToParent);let s=i;i!=null&&i.path!=null&&(s=Object.assign({},i),delete s.path),Hp.call(this,t,e,n,s),delete this.$__.priorDoc}Wr.prototype=Object.create(Hp.prototype);Object.defineProperty(Wr.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(Wr.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});Wr.prototype.toBSON=function(){return this.toObject(Pbt)};Wr.prototype.save=async function(e){return e=e||{},e.suppressWarning||Nbt.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),new Promise((r,n)=>{this.$__save(i=>{if(i!=null)return n(i);r(this)})})};Wr.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+"."+t:this.$__.fullPath};Wr.prototype.$__pathRelativeToParent=function(t){return this.$pathRelativeToParent!=null?t==null?this.$pathRelativeToParent:this.$pathRelativeToParent+"."+t:t==null?this.$basePath:this.$basePath?[this.$basePath,t].join("."):t};Wr.prototype.$__save=function(t){return Mbt(()=>t(null,this))};Wr.prototype.$isValid=function(t){let e=this.$parent(),r=this.$__pathRelativeToParent(t);return e!=null&&r!=null?e.$isValid(r):Hp.prototype.$isValid.call(this,t)};Wr.prototype.markModified=function(t){Hp.prototype.markModified.call(this,t);let e=this.$parent();if(e==null)return;let r=this.$__pathRelativeToParent(t);if(r==null)return;let n=this.$__pathRelativeToParent().replace(/\.$/,"");e.isDirectModified(n)||this.isNew||this.$__parent.markModified(r,this)};Wr.prototype.isModified=function(t,e,r){let n=this.$parent();return n!=null?(Array.isArray(t)||typeof t=="string"?(t=Array.isArray(t)?t:t.split(" "),t=t.map(i=>this.$__pathRelativeToParent(i)).filter(i=>i!=null)):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e,r)):Hp.prototype.isModified.call(this,t,e,r)};Wr.prototype.$markValid=function(t){Hp.prototype.$markValid.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$markValid(r)};Wr.prototype.invalidate=function(t,e,r){Hp.prototype.invalidate.call(this,t,e,r);let n=this.$parent(),i=this.$__pathRelativeToParent(t);if(n!=null&&i!=null)n.invalidate(i,e,r);else if(e.kind==="cast"||e.name==="CastError"||i==null)throw e;return this.ownerDocument().$__.validationError};Wr.prototype.$ignore=function(t){Hp.prototype.$ignore.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$ignore(r)};Wr.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!0));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return this.$__.fullPath=e.join("."),this.$__.ownerDocument=t,this.$__.ownerDocument};Wr.prototype.$__fullPathWithIndexes=function(){let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!1));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return e.join(".")};Wr.prototype.parent=function(){return this.$__parent};Wr.prototype.$parent=Wr.prototype.parent;Wr.prototype.$__deleteOne=function(t){if(t!=null)return t(null,this)};Wr.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};Wr.prototype.deleteOne=function(t,e){if(typeof t=="function"&&(e=t,t=null),Fbt(this),!t||!t.noop){this.$__removeFromParent();let r=this.ownerDocument();r.$__.removedSubdocs=r.$__.removedSubdocs||[],r.$__.removedSubdocs.push(this)}return this.$__deleteOne(e)};Wr.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};Wr.prototype.inspect=function(){return this.toObject()};Rbe.inspect.custom&&(Wr.prototype[Rbe.inspect.custom]=Wr.prototype.inspect);Wr.prototype.$toObject=function(e,r){let n=Hp.prototype.$toObject.call(this,e,r);if(!(Object.keys(n).length===0&&e?._calledWithOptions!=null&&(e._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??e.minimize)&&!this.constructor.$__required))return n};function Fbt(t){let e=t.ownerDocument();function r(){e.$removeListener("save",r),e.$removeListener("deleteOne",r),t.emit("deleteOne",t),t.constructor.emit("deleteOne",t)}e.$on("save",r),e.$on("deleteOne",r)}});var fE=m((T6r,Pbe)=>{"use strict";var kbe=require("events").EventEmitter,Mbe=PO(),Bbt=Tt(),Nv=ot().documentArrayParent;function Ta(t,e,r,n,i){Bbt.isMongooseDocumentArray(e)?(this.__parentArray=e,this[Nv]=e.$parent()):(this.__parentArray=void 0,this[Nv]=void 0),this.$setIndex(i),this.$__parent=this[Nv];let s;typeof r=="object"&&r!=null?(s={isNew:!0,...r},r=void 0):s={isNew:!0},Mbe.call(this,t,n,this[Nv],r,s)}Ta.prototype=Object.create(Mbe.prototype);Ta.prototype.constructor=Ta;Object.defineProperty(Ta.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(Ta.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let t in kbe.prototype)Ta[t]=kbe.prototype[t];Ta.prototype.$setIndex=function(t){if(this.__index=t,this.$__!=null&&this.$__.validationError!=null){let e=Object.keys(this.$__.validationError.errors);for(let r of e)this.invalidate(r,this.$__.validationError.errors[r])}};Ta.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};Ta.prototype.$__removeFromParent=function(){let t=this._doc._id;if(!t)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:t})};Ta.prototype.$__fullPath=function(t,e){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+"."+t:this.$__.fullPath:t?this.$__.fullPath+"."+this.__index+"."+t:this.$__.fullPath+"."+this.__index)};Ta.prototype.$__pathRelativeToParent=function(t,e){return this.__index==null||!this.__parentArray||!this.__parentArray.$path?null:e?t==null?this.__parentArray.$path():this.__parentArray.$path()+"."+t:t==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+t};Ta.prototype.$parent=function(){return this[Nv]};Ta.prototype.parentArray=function(){return this.__parentArray};Pbe.exports=Ta});var BO=m((O6r,Kbe)=>{"use strict";var Kz=ac(),jz=fE(),qbt=Qt(),Nbe=OO(),Lbt=Vn(),Fbe=Tl().internalToObjectOptions,Lbe=ou(),co=Tt(),$z=js(),zp=ot().arrayAtomicsSymbol,uh=ot().arrayParentSymbol,ch=ot().arrayPathSymbol,qo=ot().arraySchemaSymbol,jbe=ot().populateModelSymbol,jbt=Symbol("mongoose#Array#sliced"),Bbe=Array.prototype.push;var FO={$__getAtomics(){let t=[],e=Object.keys(this[zp]||{}),r=e.length,n=Object.assign({},Fbe,{_isNested:!0});if(r===0)return t[0]=["$set",this.toObject(n)],t;for(;r--;){let i=e[r],s=this[zp][i];co.isMongooseObject(s)?s=s.toObject(n):Array.isArray(s)?s=this.toObject.call(s,n):s!=null&&Array.isArray(s.$each)?s.$each=this.toObject.call(s.$each,n):s!=null&&typeof s.valueOf=="function"&&(s=s.valueOf()),i==="$addToSet"&&(s={$each:s}),t.push([i,s])}return t},$atomics(){return this[zp]},$parent(){return this[uh]},$path(){return this[ch]},$schemaType(){return this[qo]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema(){return this[qo]},_cast(t){let e=!1,r,n=this[uh];if(n&&(e=n.$populated(this[ch],!0)),e&&t!==null&&t!==void 0){if(r=e.options[jbe],r==null)throw new qbt("No populated model found for path `"+this[ch]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(Buffer.isBuffer(t)||$z(t,"ObjectId")||!co.isObject(t))&&(t={_id:t}),t.schema&&t.schema.discriminatorMapping&&t.schema.discriminatorMapping.key!==void 0||(t=new r(t)),this[qo].caster.applySetters(t,n,!0)}return this[qo].caster.applySetters(t,n,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){let e=this[uh],r;if(e){if(r=this[ch],arguments.length&&(r=r+"."+t),r!=null&&r.endsWith(".$"))return this;e.markModified(r,arguments.length!==0?t:e)}return this},_registerAtomic(t,e){if(this[jbt])return;if(t==="$set")return this[zp]={$set:e},Nbe(this[uh],this[ch]),this._markModified(),this;let r=this[zp];if(t==="$pop"&&!("$pop"in r)){let i=this;this[uh].once("save",function(){i._popped=i._shifted=null})}if(r.$set||Object.keys(r).length&&!(t in r))return this[zp]={$set:this},this;let n;if(t==="$pullAll"||t==="$addToSet")r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(t==="$pullDocs"){let i=r.$pull||(r.$pull={});e[0]instanceof jz?(n=i.$or||(i.$or=[]),Array.prototype.push.apply(n,e.map(s=>s.toObject({transform:(o,a)=>(s==null||s.$__==null||Object.keys(s.$__.activePaths.getStatePaths("default")).forEach(u=>{Lbe.unset(u,a),$be(a,u)}),a),virtuals:!1})))):(n=i._id||(i._id={$in:[]}),n.$in=n.$in.concat(e))}else if(t==="$push")if(r.$push=r.$push||{$each:[]},e!=null&&co.hasUserDefinedProperty(e,"$each"))r.$push=e;else if(e.length===1)r.$push.$each.push(e[0]);else if(e.length<1e4)r.$push.$each.push(...e);else for(let i of e)r.$push.$each.push(i);else r[t]=e;return this},addToSet(){NO(this,arguments),qbe(this,arguments);let t=[].map.call(arguments,this._mapCast,this),e=[],r="";t[0]instanceof jz?r="doc":t[0]instanceof Date?r="date":$z(t[0],"ObjectId")&&(r="ObjectId");let n=co.isMongooseArray(t)?t.__array:t,i=co.isMongooseArray(this)?this.__array:this;return n.forEach(function(s){let o,a=+s;switch(r){case"doc":o=this.some(function(u){return u.equals(s)});break;case"date":o=this.some(function(u){return+u===a});break;case"ObjectId":o=this.find(u=>u.toString()===s.toString());break;default:o=~this.indexOf(s);break}o||(this._markModified(),i.push(s),this._registerAtomic("$addToSet",s),[].push.call(e,s))},this),e},hasAtomics(){return co.isPOJO(this[zp])?Object.keys(this[zp]).length:0},includes(t,e){return this.indexOf(t,e)!==-1},indexOf(t,e){$z(t,"ObjectId")&&(t=t.toString()),e=e??0;let r=this.length;for(let n=e;n<r;++n)if(t==this[n])return n;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let t=[].map.call(arguments,this._mapCast,this);this._markModified();let e=[].push.apply(this,t);return this._registerAtomic("$set",this),e},pop(){this._markModified();let t=[].pop.call(this);return this._registerAtomic("$set",this),t},pull(){let t=[].map.call(arguments,(i,s)=>this._cast(i,s,{defaults:!1}),this),e=this;co.isMongooseArray(e)&&(e=e.__array);let r=e.length,n;for(this._markModified();r--;)n=e[r],n instanceof Kz?t.some(function(s){return n.equals(s)})&&e.splice(r,1):~this.indexOf.call(t,n)&&e.splice(r,1);return t[0]instanceof jz?this._registerAtomic("$pullDocs",t.map(function(i){let s=i.$__getValue("_id");return s===void 0||i.$isDefault("_id")?i:s})):this._registerAtomic("$pullAll",t),Nbe(this[uh],this[ch])>0&&this._registerAtomic("$set",this),this},push(){let t=arguments,e=t,r=t[0]!=null&&co.hasUserDefinedProperty(t[0],"$each"),n=co.isMongooseArray(this)?this.__array:this;if(r&&(e=t[0],t=t[0].$each),this[qo]==null)return Bbe.apply(this,t);NO(this,t),qbe(this,t),t=[].map.call(t,this._mapCast,this);let i,s=this[zp];return this._markModified(),r?(e.$each=t,(s.$push&&s.$push.$each&&s.$push.$each.length||0)!==0&&s.$push.$position!=e.$position?(e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=n.length):i=[].push.apply(n,t),this._registerAtomic("$set",this)):e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=this.length):i=[].push.apply(n,t)):(e=t,i=Bbe.apply(n,t)),this._registerAtomic("$push",e),i},remove(){return this.pull.apply(this,arguments)},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=FO._cast.call(this,e,t);return FO._markModified.call(this,t),n[t]=i,this},shift(){let t=co.isMongooseArray(this)?this.__array:this;this._markModified();let e=[].shift.call(t);return this._registerAtomic("$set",this),e},sort(){let t=co.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic("$set",this),e},splice(){let t,e=co.isMongooseArray(this)?this.__array:this;if(this._markModified(),NO(this,Array.prototype.slice.call(arguments,2)),arguments.length){let r;if(this[qo]==null)r=arguments;else{r=[];for(let n=0;n<arguments.length;++n)r[n]=n<2?arguments[n]:this._cast(arguments[n],arguments[0]+(n-2))}t=[].splice.apply(e,r),this._registerAtomic("$set",this)}return t},toBSON(){return this.toObject(Fbe)},toObject(t){let e=co.isMongooseArray(this)?this.__array:this;return t&&t.depopulate?(t=Lbt(t),t._isNested=!0,[].concat(e).map(function(r){return r instanceof Kz?r.toObject(t):r})):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){NO(this,arguments);let t;this[qo]==null?t=arguments:t=[].map.call(arguments,this._cast,this);let e=co.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic("$set",this),this.length}};function $bt(t,e){if(!e)return!1;for(let r of t){if(r==null)return!1;let n=r.constructor;if(!(r instanceof Kz)||n.modelName!==e&&n.baseModelName!==e)return!1}return!0}function $be(t,e,r){if(typeof e=="string"){if(e.indexOf(".")===-1)return;e=Lbe.stringToParts(e)}r=r||0,!(r>=e.length)&&(t==null||typeof t!="object"||($be(t[e[0]],e,r+1),t[e[0]]!=null&&typeof t[e[0]]=="object"&&Object.keys(t[e[0]]).length===0&&delete t[e[0]]))}function NO(t,e){let r=t==null?null:t[qo]&&t[qo].caster&&t[qo].caster.options&&t[qo].caster.options.ref||null;t.length===0&&e.length!==0&&$bt(e,r)&&t[uh].$populated(t[ch],[],{[jbe]:e[0].constructor})}function qbe(t,e){let r=t==null?null:t[qo]&&t[qo].caster&&t[qo].caster.options&&t[qo].caster.options.ref||null,n=t[uh],i=t[ch];if(!(!r||!n.populated(i))){for(let s of e)if(s!=null&&(typeof s!="object"||s instanceof String||s instanceof Number||s instanceof Buffer||co.isMongooseType(s))){n.depopulate(i);break}}}var Kbt=["filter","flat","flatMap","map","slice"];for(let t of Kbt)Array.prototype[t]!=null&&(FO[t]=function(){let e=co.isMongooseArray(this)?this.__array:this,r=[].concat(e);return r[t].apply(r,arguments)});Kbe.exports=FO});var Vz=m((zbe,Wbe)=>{"use strict";var Uz=BO(),qO=ot().arrayAtomicsSymbol,Ubt=ot().arrayAtomicsBackupSymbol,Ube=ot().arrayParentSymbol,Vbt=ot().arrayPathSymbol,Vbe=ot().arraySchemaSymbol,Gbe=Array.prototype.push,Hbe=/^\d+$/;function Gbt(t,e,r,n){let i;if(Array.isArray(t)){let a=t.length;if(a===0)i=new Array;else if(a===1)i=new Array(1),i[0]=t[0];else if(a<1e4)i=new Array,Gbe.apply(i,t);else{i=new Array;for(let u=0;u<a;++u)Gbe.call(i,t[u])}}else i=[];let s={[qO]:{},[Ubt]:void 0,[Vbt]:e,[Vbe]:n,[Ube]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:i};t&&t[qO]!=null&&(s[qO]=t[qO]),r!=null&&r.$__&&(s[Ube]=r,s[Vbe]=n||r.schema.path(e));let o=new Proxy(i,{get:function(a,u){return s.hasOwnProperty(u)?s[u]:Uz.hasOwnProperty(u)?Uz[u]:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applyGetters(void 0,a):typeof u=="string"&&Hbe.test(u)&&n?.$embeddedSchemaType!=null?n.$embeddedSchemaType.applyGetters(i[u],r):i[u]},set:function(a,u,c){return typeof u=="string"&&Hbe.test(u)?Uz.set.call(o,u,c,!1):s.hasOwnProperty(u)?s[u]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applySetters(c,a):i[u]=c,!0}});return o}Wbe.exports=zbe=Gbt});var Hz=m((x6r,Ybe)=>{"use strict";var Jbe=js(),Gz=Vp();Ybe.exports=function(e){if(e==null||Jbe(e,"ObjectId"))return e;if(e._id){if(Jbe(e._id,"ObjectId"))return e._id;if(e._id.toString instanceof Function)return new Gz(e._id.toString())}return e.toString instanceof Function?new Gz(e.toString()):new Gz(e)}});var e_e=m((I6r,Zbe)=>{"use strict";var LO=BO(),Hbt=ac(),zbt=Hz(),Qbe=uc(),Wbt=Tl().internalToObjectOptions,jO=Tt(),zz=js(),UO=ot().arrayParentSymbol,Wz=ot().arrayPathSymbol,$O=ot().arraySchemaSymbol,Xbe=ot().documentArrayParent,Jbt=Array.prototype.toString,Jz={toBSON(){return this.toObject(Wbt)},toString(){return Jbt.call(this.__array.map(t=>t!=null&&t.$__!=null?t.toString():t))},getArrayParent(){return this[UO]},$schemaType(){return this[$O]},_cast(t,e,r){if(this[$O]==null)return t;let n=this[$O].casterConstructor;if((n.$isMongooseDocumentArray?jO.isMongooseDocumentArray(t):t instanceof n)||t&&t.constructor&&t.constructor.baseCasterConstructor===n)return t[Xbe]&&t.__parentArray||(t[Xbe]=this[UO],t.__parentArray=this),t.$setIndex(e),t;if(t==null)return null;if((Buffer.isBuffer(t)||zz(t,"ObjectId")||!jO.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(typeof t[n.schema.options.discriminatorKey]=="string"&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{let o=Qbe(n.discriminators,t[n.schema.options.discriminatorKey]);o&&(n=o)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);let s=new n(t,this,r,void 0,e);return s.isNew=!0,s},id(t){let e,r,n;try{e=zbt(t).toString()}catch{e=null}for(let i of this)if(i&&(n=i.get("_id"),!(n===null||typeof n>"u"))){if(n instanceof Hbt){if(r||(r=String(t)),r==n._id)return i}else if(!zz(t,"ObjectId")&&!zz(n,"ObjectId")){if(t==n||jO.deepEqual(t,n))return i}else if(e==n)return i}return null},toObject(t){return[].concat(this.map(function(e){return e==null?null:typeof e.toObject!="function"?e:e.toObject(t)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let t=LO.push.apply(this,arguments);return KO(this),t},pull(){let t=LO.pull.apply(this,arguments);return KO(this),t},shift(){let t=LO.shift.apply(this,arguments);return KO(this),t},splice(){let t=LO.splice.apply(this,arguments);return KO(this),t},inspect(){return this.toObject()},create(t){let e=this[$O].casterConstructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(typeof t[e.schema.options.discriminatorKey]=="string"&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{let r=Qbe(e.discriminators,t[e.schema.options.discriminatorKey]);r&&(e=r)}return new e(t,this)},notify(t){let e=this;return function r(n,i){i=i||e;let s=i.length;for(;s--;)i[s]!=null&&(t==="save"&&(n=e[s]),jO.isMongooseArray(i[s])?r(n,i[s]):i[s]&&i[s].emit(t,n))}},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=Jz._cast.call(this,e,t);return Jz._markModified.call(this,t),n[t]=i,this},_markModified(t,e){let r=this[UO],n;if(r){if(n=this[Wz],arguments.length)if(e!=null){let i=t.__index;n=n+"."+i+"."+e}else n=n+"."+t;if(n!=null&&n.endsWith(".$"))return this;r.markModified(n,arguments.length!==0?t:r)}return this}};Zbe.exports=Jz;function KO(t){let e=t[UO];if(!e||e.$__.populated==null)return;let r=Object.keys(e.$__.populated).filter(n=>n.startsWith(t[Wz]+"."));for(let n of r){let i=n.slice((t[Wz]+".").length);Array.isArray(e.$__.populated[n].value)&&(e.$__.populated[n].value=t.map(s=>s.$populated(i)))}}});var V0=m((R6r,r_e)=>{"use strict";var t_e=BO(),Yz=e_e(),Qz=ot().arrayAtomicsSymbol,Ybt=ot().arrayAtomicsBackupSymbol,Xz=ot().arrayParentSymbol,Zz=ot().arrayPathSymbol,U0=ot().arraySchemaSymbol,Qbt=Array.prototype.push,Xbt=/^\d+$/;function Zbt(t,e,r,n){let i=[],s={[Qz]:{},[Ybt]:void 0,[Zz]:e,[U0]:void 0,[Xz]:void 0};if(Array.isArray(t)&&(t[Zz]===e&&t[Xz]===r&&(s[Qz]=Object.assign({},t[Qz])),t.forEach(a=>{Qbt.call(i,a)})),s[Zz]=e,s.__array=i,r&&r.$__)for(s[Xz]=r,s[U0]=r.$__schema.path(e);s[U0]!=null&&s[U0].$isMongooseArray&&!s[U0].$isMongooseDocumentArray;)s[U0]=s[U0].casterConstructor;let o=new Proxy(i,{get:function(a,u){return u==="isMongooseArray"||u==="isMongooseArrayProxy"||u==="isMongooseDocumentArray"||u==="isMongooseDocumentArrayProxy"?!0:s.hasOwnProperty(u)?s[u]:Yz.hasOwnProperty(u)?Yz[u]:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applyGetters(void 0,a):t_e.hasOwnProperty(u)?t_e[u]:i[u]},set:function(a,u,c){return typeof u=="string"&&Xbt.test(u)?Yz.set.call(o,u,c,!1):s.hasOwnProperty(u)?s[u]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applySetters(c,a):i[u]=c,!0}});return o}r_e.exports=Zbt});var ac=m((__e,v_e)=>{"use strict";var e_t=Sz(),tW=require("events").EventEmitter,t_t=REe(),r_t=cE(),Oa=wa(),n_e=$0(),n_t=FEe(),i_t=SO(),s_t=AO(),o_t=jEe(),a_t=G0(),rW=ah(),WO=L0(),d_e=yz(),p_e=Iz(),nW=TO(),VO=OO(),xl=Vn(),u_t=IO().compile,c_t=IO().defineKey,l_t=QEe(),d_t=RO().flatten,eW=ube(),i_e=lbe(),p_t=pbe(),f_t=kO(),s_e=Vu(),o_e=js(),f_e=dE(),h_t=pE(),a_e=Nz(),iW=require("util").inspect,h_e=Tl().internalToObjectOptions,m_t=Fz(),y_t=Bz(),g_t=ou(),sW=qz(),E_t=Pv(),Pt=Tt(),b_t=Lz(),HO=Pt.deepEqual,__t=Pt.isMongooseObject,Bv=ot().arrayAtomicsBackupSymbol,Lo=ot().arrayAtomicsSymbol,v_t=ot().documentArrayParent,S_t=ot().documentIsModified,m_e=ot().documentModifiedPaths,w_t=ot().documentSchemaSymbol,A_t=ot().getSymbol,C_t=ot().modelSymbol,u_e=ot().populateModelSymbol,T_t=ot().scopeSymbol,O_t=j0().schemaMixedSymbol,x_t=Ibe(),GO=ot().sessionNewDocuments,zO,c_e,Fv,y_e=Pt.specialProperties,qv=1,oW=2,Wp=qv|oW;function ve(t,e,r,n){if(typeof r=="object"&&r!=null&&(n=r,r=n.skipId),n=Object.assign({},n),this.$__schema==null){let c=Pt.isObject(e)&&!e.instanceOfSchema?new a_t(e):e;this.$__setSchema(c),e=r,r=n,n=arguments[4]||{}}if(this.$__=new t_t,n.isNew!=null&&n.isNew!==!0&&(this.$isNew=n.isNew),n.priorDoc!=null&&(this.$__.priorDoc=n.priorDoc),r&&(this.$__.skipId=r),t!=null&&typeof t!="object")throw new s_t(t,"obj","Document");let i=!0;n.defaults!==void 0&&(this.$__.defaults=n.defaults,i=n.defaults);let s=this.$__schema;typeof e=="boolean"||e==="throw"?(e!==!0&&(this.$__.strictMode=e),e=void 0):s.options.strict!==!0&&(this.$__.strictMode=s.options.strict);let o=s.requiredPaths(!0);for(let c of o)this.$__.activePaths.require(c);let a=null;Pt.isPOJO(e)&&Object.keys(e).length>0&&(a=h_t(e),this.$__.selected=e,this.$__.exclude=a);let u=a===!1&&e?p_e(e):null;if(this._doc==null&&(this.$__buildDoc(t,e,r,a,u,!1),i&&nW(this,e,a,u,!0,null,{skipParentChangeTracking:!0})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,n):this.$set(t,void 0,!0,n),t instanceof ve&&(this.$isNew=t.$isNew)),n.willInit&&i?n.skipDefaults&&(this.$__.skipDefaults=n.skipDefaults):i&&nW(this,e,a,u,!1,n.skipDefaults),!this.$__.strictMode&&t){let c=this;Object.keys(this._doc).forEach(function(d){!(d in s.tree)&&!(d in s.methods)&&!(d in s.virtuals)&&!d.startsWith("$")&&c_t({prop:d,subprops:null,prototype:c})})}B_t(this)}ve.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(ve.prototype,"isNew",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}});Object.defineProperty(ve.prototype,"errors",{get:function(){return this.$errors},set:function(t){this.$errors=t}});ve.prototype.$isNew=!0;Pt.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(t){ve.prototype[t]=function(){if(!this.$__.emitter){if(t==="emit")return;this.$__.emitter=new tW,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},ve.prototype[`$${t}`]=ve.prototype[t]});ve.prototype.constructor=ve;for(let t in tW.prototype)ve[t]=tW.prototype[t];ve.prototype.$__schema;ve.prototype.schema;Object.defineProperty(ve.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}});ve.prototype.isNew;Object.defineProperty(ve.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});ve.prototype.id;ve.prototype.$errors;Object.defineProperty(ve.prototype,"$op",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}});function I_t(t,e,r){if(t==null)return;let n=Object.keys(r.$__schema.paths),i=n.length,s=e.indexOf(".")===-1?[e]:e.split(".");for(let o=0;o<i;++o){let a="",u=n[o];if(!u.startsWith(e+"."))continue;let c=r.$__schema.paths[u],l=c.splitPath().slice(s.length),d=l.length;if(c.defaultValue===void 0)continue;let p=t;for(let f=0;f<d&&p!=null;++f){let h=l[f];if(f===d-1){if(p[h]!==void 0)break;try{let g=c.getDefault(r,!1);g!==void 0&&(p[h]=g)}catch(g){r.invalidate(e+"."+a,g);break}break}a+=(a.length?".":"")+h,p[h]=p[h]||{},p=p[h]}}}ve.prototype.$__buildDoc=function(t,e,r,n,i){let s={},o=Object.keys(this.$__schema.paths).filter(c=>!c.includes("$*")),a=o.length,u=0;for(;u<a;++u){let c=o[u];if(c==="_id"&&(r||t&&"_id"in t))continue;let l=this.$__schema.paths[c].splitPath(),d=l.length,p=d-1,f="",h=s,g=!1;for(let _=0;_<d;++_){let S=l[_];if(f.length?f+="."+S:f=S,n===!0){if(f in e)break}else if(n===!1&&e&&!g){if(f in e)g=!0;else if(!i[f])break}_<p&&(h=h[S]||(h[S]={}))}}this._doc=s};ve.prototype.toBSON=function(){return this.toObject(h_e)};ve.prototype.init=function(t,e,r){return typeof e=="function"&&(r=e,e=null),this.$__init(t,e),r&&r(null,this),this};ve.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};ve.prototype.$__init=function(t,e){if(this.$isNew=!1,e=e||{},t._id!=null&&e.populated&&e.populated.length){let n=String(t._id);for(let i of e.populated)if(i.isVirtual?this.$populated(i.path,Pt.getValue(i.path,t),i):this.$populated(i.path,i._docs[n],i),i._childDocs!=null){for(let s of i._childDocs)s==null||s.$__==null||(s.$__.parent=this);i._childDocs=[]}}g_e(this,t,this._doc,e),m_t(this,e.populated),this.$emit("init",this),this.constructor.emit("init",this);let r=this.$__.exclude===!1&&this.$__.selected?p_e(this.$__.selected):null;return nW(this,this.$__.selected,this.$__.exclude,r,!1,this.$__.skipDefaults),this};function g_e(t,e,r,n,i){i=i||"",e.$__!=null&&(e=e._doc);let s=Object.keys(e),o=s.length,a,u,c,l=t.$__.strictMode,d=t.$__schema;for(let p=0;p<o;++p){if(c=s[p],y_e.has(c)||(u=i?i+c:c,a=d.path(u),d.$isRootDiscriminator&&!t.$__isSelected(u)))continue;let f=e[c];if(!a&&Pt.isPOJO(f))r[c]||(r[c]={},(!l&&!(c in d.tree)&&!(c in d.methods)&&!(c in d.virtuals)||n?.virtuals&&c in d.virtuals)&&(t[c]=r[c])),g_e(t,f,r[c],n,u+".");else if(!a)r[c]=f,(!l&&!i||n?.virtuals&&c in d.virtuals)&&(t[c]=f);else{if(r.hasOwnProperty(c)&&f!==void 0&&!n.hydratedPopulatedDocs&&delete r[c],f===null)r[c]=a._castNullish(null);else if(f!==void 0){let h=f.$__==null?null:f.$__.wasPopulated;if(a&&!h&&!n.hydratedPopulatedDocs)try{n&&n.setters?r[c]=a.applySetters(f,t,!1,null,n):r[c]=a.cast(f,t,!0,void 0,n)}catch(g){t.invalidate(g.path,new d_e({path:g.path,message:g.message,type:"cast",value:g.value,reason:g}))}else a&&n.hydratedPopulatedDocs?(r[c]=a.cast(f,t,!0,void 0,{hydratedPopulatedDocs:!0}),r[c]&&r[c].$__&&r[c].$__.wasPopulated?t.$populated(u,r[c].$__.wasPopulated.value,r[c].$__.wasPopulated.options):Array.isArray(r[c])&&r[c].length&&r[c][0]?.$__?.wasPopulated&&t.$populated(u,r[c].map(g=>g?.$__?.wasPopulated?.value).filter(g=>g!=null),r[c][0].$__.wasPopulated.options)):r[c]=f}t.$isModified(u)||t.$__.activePaths.init(u)}}}ve.prototype.updateOne=function(e,r,n){let i=this.constructor.updateOne({_id:this._doc._id},e,r),s=this;return i.pre(function(a){s.constructor._middleware.execPre("updateOne",s,[s],a)}),i.post(function(a){s.constructor._middleware.execPost("updateOne",s,[s],{},a)}),this.$session()!=null&&("session"in i.options||(i.options.session=this.$session())),n!=null?i.exec(n):i};ve.prototype.replaceOne=function(){let e=[...arguments];return e.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,e)};ve.prototype.$session=function(e){if(arguments.length===0)return this.$__.session!=null&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(e!=null&&e.hasEnded)throw new Oa("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(!(e==null&&this.$__.session==null)){if(this.$__.session=e,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)n.$session(e)}return e}};ve.prototype.$timestamps=function(e){if(arguments.length===0)return this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;let r=this.$timestamps();return e!==r&&(this.$__.timestamps=e),this};ve.prototype.overwrite=function(e){let r=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(e))));for(let n of r)n!=="_id"&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,e[n]));return this};ve.prototype.$set=function(e,r,n,i){Pt.isPOJO(n)&&(i=n,n=void 0);let s=i&&i.merge,o=n&&n!==!0,a=n===!0,u,c,l=0,d,p,f,h=i&&"strict"in i,g=h?i.strict:this.$__.strictMode;if(o&&(u=this.$__.adhocPaths||(this.$__.adhocPaths={}),u[e]=this.$__schema.interpretAsType(e,n,this.$__schema.options)),e==null)[e,r]=[r,e];else if(typeof e!="string"){e instanceof ve&&(e.$__isNested?e=e.toObject():e=e.$__schema===this.$__schema?aW(e,{...e._doc}):e._doc),e==null&&([e,r]=[r,e]),f=r?r+".":"",c=i_e(this.$__schema,e);let M=c.length,I=i&&i._skipMinimizeTopLevel||!1;if(M===0&&I)return delete i._skipMinimizeTopLevel,r&&this.$set(r,{}),this;i=Object.assign({},i,{_skipMinimizeTopLevel:!1});for(let U=0;U<M;++U){p=c[U];let k=f?f+p:p;d=this.$__schema.pathType(k);let H=e[p];if(n===!0&&!f&&H!=null&&d==="nested"&&this._doc[p]!=null&&delete this._doc[p],Pt.isNonBuiltinObject(H)&&d==="nested"){this.$set(k,H,a,i),I_t(this.$get(k),k,this);continue}else if(g){if(a&&H===void 0&&this.$get(k)!==void 0)continue;if(d==="adhocOrUndefined"&&(d=eW(this,k,{typeOnly:!0})),d==="real"||d==="virtual")this.$set(k,H,a,i);else if(d==="nested"&&H instanceof ve)this.$set(k,H.toObject({transform:!1}),a,i);else{if(g==="throw")throw d==="nested"?new i_t(p,H):new rW(p);d==="nested"&&H==null&&this.$set(k,H,a,i)}}else this.$set(k,H,a,i)}let F={},B=Object.keys(this.$__schema.tree);for(let U=0,k=B.length;U<k;++U)(p=B[U])&&this._doc.hasOwnProperty(p)&&(F[p]=void 0);return this._doc=Object.assign(F,this._doc),this}let _=this.$__schema.pathType(e),S=null;if(_==="adhocOrUndefined"&&(S=e.indexOf(".")===-1?[e]:e.split("."),_=eW(this,S,{typeOnly:!0})),_==="adhocOrUndefined"&&!h){S==null&&(S=e.indexOf(".")===-1?[e]:e.split("."));let M=p_t(this.$__schema,S);M!==void 0&&(g=M)}r=f_t(r,!0);let w=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(e);if(!a)return this.$__getValue(e)})();if(_==="nested"&&r){if(typeof r=="object"&&r!=null){if(r.$__!=null&&(r=r.toObject(h_e)),r==null)return this.invalidate(e,new Oa.CastError("Object",r,e)),this;let M=this.$isModified(e),I=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(e);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(e)){let B=this.$__getValue(e);this.$__.savedState[e]=B;let U=Object.keys(B||{});for(let k of U)this.$__.savedState[e+"."+k]=B[k]}if(!s)this.$__setValue(e,null),VO(this,e);else return this.$set(r,e,a,i);let F=i_e(this.$__schema,r,e);this.$__setValue(e,{});for(let B of F)this.$set(e+"."+B,r[B],a,{...i,_skipMarkModified:!0});return w!=null&&(!M||I)&&Pt.deepEqual(I?this.$__.savedState[e]:w,r)?this.unmarkModified(e):this.markModified(e),this}return this.invalidate(e,new Oa.CastError("Object",r,e)),this}let C;if(S==null&&(S=e.indexOf(".")===-1?[e]:e.split(".")),typeof this.$__schema.aliases[S[0]]=="string"&&(S[0]=this.$__schema.aliases[S[0]]),_==="adhocOrUndefined"&&g){let M;for(l=0;l<S.length;++l){let I=S.slice(0,l+1).join(".");if(l+1<S.length&&this.$__schema.pathType(I)==="virtual")return g_t.set(e,r,this),this;if(C=this.$__schema.path(I),C!=null){if(C instanceof n_e){M=!0;break}else if(C.$isSchemaMap&&C.$__schemaType instanceof n_e&&l<S.length-1){M=!0,C=C.$__schemaType;break}}}if(C==null&&(C=eW(this,e)),!M&&!C){if(g==="throw")throw new rW(e);return this}}else{if(_==="virtual")return C=this.$__schema.virtualpath(e),C.applySetters(r,this),this;C=this.$__path(e)}let A=this._doc,O="";for(l=0;l<S.length-1;++l)A=A instanceof Map?A.get(S[l]):A[S[l]],O+=(O.length!==0?".":"")+S[l],A||(this.$set(O,{}),this.$__isSelected(O)||this.unmarkModified(O),A=this.$__getValue(O));let x;if(S.length<=1)x=e;else{let M=S.length;for(l=0;l<M;++l){let I=S.slice(0,l+1).join(".");if(this.$get(I,null,{getters:!1})===null){x=I;break}}x||(x=e)}if(!C)return this.$__set(x,e,i,a,S,C,r,w),_==="nested"&&r==null&&VO(this,e),this;if((C.$isSingleNested||C.$isMongooseArray)&&N_t(this,e),r!=null&&s&&C.$isSingleNested){r instanceof ve&&(r=r.toObject({virtuals:!1,transform:!1}));let M=Object.keys(r);for(let I of M)this.$set(e+"."+I,r[I],a,i);return this}let R=!0;try{let M=(()=>{if(C.options==null||!(r instanceof ve))return!1;let U=r.constructor,k=typeof C.options.ref=="function"&&!C.options.ref[C_t]?C.options.ref.call(this,this):C.options.ref,H=k?.modelName||k;if(H!=null&&(H===U.modelName||H===U.baseModelName))return!0;let ie=C.options.refPath;if(ie==null)return!1;let j=r.get(ie);return j===U.modelName||j===U.baseModelName})(),I=!1;if(M&&r instanceof ve&&(!r.$__.wasPopulated||Pt.deepEqual(r.$__.wasPopulated.value,r._doc._id))){let U=C&&C.$isSingleNested?C.cast(r,this):r._doc._id;this.$populated(e,U,{[u_e]:r.constructor}),r.$__.wasPopulated={value:U},I=!0}let F,B=this.$__schema.options.typeKey;if(C.options&&Array.isArray(C.options[B])&&C.options[B].length&&C.options[B][0]&&C.options[B][0].ref&&R_t(r,C.options[B][0].ref)){F={[u_e]:r[0].constructor},this.$populated(e,r.map(function(U){return U._doc._id}),F);for(let U of r)U.$__.wasPopulated={value:U._doc._id};I=!0}if(!M||!C.$isSingleNested||!r.$__){let U=this;this.$__schema.singleNestedPaths[e]!=null&&S.length>1&&(U=x_t(this,S,this.schema)),i!=null&&i.overwriteImmutable?r=C.applySetters(r,U,!1,w,{path:e,overwriteImmutable:!0}):r=C.applySetters(r,U,!1,w,{path:e})}if(Array.isArray(r)&&!Array.isArray(C)&&C.$isMongooseDocumentArray&&r.length!==0&&r[0]!=null&&r[0].$__!=null&&r[0].$__.populated!=null){let U=Object.keys(r[0].$__.populated);for(let k of U)this.$populated(e+"."+k,r.map(H=>H.$populated(k)),r[0].$__.populated[k].options);I=!0}if(!I&&this.$__.populated){if(Array.isArray(r)&&this.$__.populated[e])for(let U=0;U<r.length;++U)r[U]instanceof ve&&r.set(U,r[U]._doc._id,!0);delete this.$__.populated[e]}r!=null&&C.$isSingleNested&&F_t(r,C,w),this.$markValid(e)}catch(M){M instanceof Oa.StrictModeError&&M.isImmutableError?this.invalidate(e,M):M instanceof Oa.CastError?(this.invalidate(M.path,M),M.$originalErrorPath&&this.invalidate(e,new Oa.CastError(C.instance,r,e,M.$originalErrorPath))):this.invalidate(e,new Oa.CastError(C.instance,r,e,M)),R=!1}if(R){let M=null,I=null;if(!a){let U=this.$isSubdocument?this.ownerDocument():this;M=U.$__.savedState,I=this.$isSubdocument?this.$__.fullPath+"."+e:e,U.$__saveInitialState(I)}this.$__set(x,e,i,a,S,C,r,w);let F=!!this.$__.session?.transaction,B=this.$__.session&&this.$__.session[GO]&&this.$__.session[GO].has(this)&&this.$__.session[GO].get(this).modifiedPaths&&!this.$__.session[GO].get(this).modifiedPaths.has(I);M!=null&&M.hasOwnProperty(I)&&(!F||B)&&Pt.deepEqual(r,M[I])&&this.unmarkModified(e)}return C.$isSingleNested&&(this.isDirectModified(e)||r==null)?VO(this,e):C.$isSchemaMap&&r==null&&VO(this,e),this};function R_t(t,e){if(!Array.isArray(t)||t.length===0)return!1;for(let r of t)if(!(r instanceof ve)||r.constructor.modelName==null||r.constructor.modelName!=e&&r.constructor.baseModelName!=e)return!1;return!0}ve.prototype.set=ve.prototype.$set;ve.prototype.$__shouldModify=function(t,e,r,n,i,s,o,a){return r&&r._skipMarkModified?!1:this.$isNew||e in this.$__.activePaths.getStatePaths("modify")||o===void 0&&!this.$__isSelected(e)?!0:o===void 0&&e in this.$__.activePaths.getStatePaths("default")||this.$populated(e)&&o instanceof ve&&HO(o._doc._id,a)?!1:!!(!HO(o,a!==void 0?a:Pt.getValue(e,this))||!n&&o!==null&&o!==void 0&&e in this.$__.activePaths.getStatePaths("default")&&HO(o,s.getDefault(this,n)))};ve.prototype.$__set=function(t,e,r,n,i,s,o,a){Fv=Fv||fE();let u=this.$__shouldModify(t,e,r,n,i,s,o,a);u?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[e]&&(delete this.$__.primitiveAtomics[e],Object.keys(this.$__.primitiveAtomics).length===0&&delete this.$__.primitiveAtomics),this.markModified(t),c_e||(c_e=Vz()),o&&Pt.isMongooseArray(o)&&(o._registerAtomic("$set",o),Pt.isMongooseDocumentArray(o)&&o.forEach(function(f){f&&f.__parentArray&&(f.__parentArray=o)}))):Array.isArray(o)&&Array.isArray(a)&&Pt.isMongooseArray(o)&&Pt.isMongooseArray(a)&&(o[Lo]=a[Lo],o[Bv]=a[Bv],Pt.isMongooseDocumentArray(o)&&o.forEach(f=>{f!=null&&(f.$isNew=!1)}));let c=this._doc,l=0,d=i.length,p="";for(;l<d;l++){let h=l+1===d;if(p+=p?"."+i[l]:i[l],!y_e.has(i[l]))if(h)c instanceof Map?c.set(i[l],o):c.$isSingleNested?(i[l]in c||(c[i[l]]=o),c._doc[i[l]]=o,u&&c.markModified(i[l])):c[i[l]]=o;else{let g=c instanceof Map,_=g?c.get(i[l]):c[i[l]];Pt.isPOJO(_)||_&&_ instanceof Fv||_&&!Array.isArray(_)&&_.$isSingleNested||_&&Array.isArray(_)||_==null&&(_={},g?c.set(i[l],_):c[i[l]]=_),c=_}}};ve.prototype.$__getValue=function(t){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${t}" (type ${typeof t})`);return Pt.getValue(t,this._doc)};ve.prototype.$inc=function(e,r){if(r==null&&(r=1),Array.isArray(e))return e.forEach(u=>this.$inc(u,r)),this;let n=this.$__path(e);if(n==null){if(this.$__.strictMode==="throw")throw new rW(e);if(this.$__.strictMode===!0)return this}else if(n.instance!=="Number")return this.invalidate(e,new Oa.CastError(n.instance,r,e)),this;let i=this.$__getValue(e)||0,s=!1,o=null,a=r;try{r=n.cast(r),o=n.applySetters(i+r,this),a=o-i,s=!0}catch(u){this.invalidate(e,new Oa.CastError("number",r,e,u))}return s&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[e]==null?this.$__.primitiveAtomics[e]={$inc:a}:this.$__.primitiveAtomics[e].$inc+=a,this.markModified(e),this.$__setValue(e,o)),this};ve.prototype.$__setValue=function(t,e){return Pt.setValue(t,e,this._doc),this};ve.prototype.get=function(t,e,r){let n;r==null&&(r={}),e&&(n=this.$__schema.interpretAsType(t,e,this.$__schema.options));let i=r.noDottedPath,s=i?this.$__schema.paths[t]:this.$__path(t);if(s==null&&(s=this.$__schema.virtualpath(t),s!=null))return s.applyGetters(void 0,this);if(i){let c=this._doc[t];return n&&(c=n.cast(c)),s!=null&&r.getters!==!1?s.applyGetters(c,this):c}if(s!=null&&s.instance==="Mixed"){let c=this.$__schema.virtualpath(t);c!=null&&(s=c)}let o=t.indexOf(".")!==-1,a=this._doc,u=o?t.split("."):[t];typeof this.$__schema.aliases[u[0]]=="string"&&(u[0]=this.$__schema.aliases[u[0]]);for(let c=0,l=u.length;c<l;c++)a&&a._doc&&(a=a._doc),a==null?a=void 0:a instanceof Map?a=a.get(u[c],{getters:!1}):c===l-1?a=Pt.getValue(u[c],a):a=a[u[c]];if(n&&(a=n.cast(a)),s!=null&&r.getters!==!1)a=s.applyGetters(a,this);else if(this.$__schema.nested[t]&&r.virtuals)return aW(this,xl(a)||{},{path:t});return a};ve.prototype[A_t]=ve.prototype.get;ve.prototype.$get=ve.prototype.get;ve.prototype.$__path=function(t){let e=this.$__.adhocPaths,r=e&&e.hasOwnProperty(t)?e[t]:null;return r||this.$__schema.path(t)};ve.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),e!=null&&!this.$isSubdocument&&(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)};ve.prototype.$__saveInitialState=function(e){let r=this.$__.savedState,n=e;if(r!=null){let i=n.indexOf("."),s=i===-1?n:n.slice(0,i);r.hasOwnProperty(s)||(r[s]=xl(this.$__getValue(s)))}};ve.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[t]};ve.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)};ve.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};ve.prototype.$isEmpty=function(t){let e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let r=this.$get(t);return r==null?!0:typeof r!="object"?!1:Pt.isPOJO(r)?E_e(r):Object.keys(r.toObject(e)).length===0}return Object.keys(this.toObject(e)).length===0};function E_e(t){if(t==null)return!0;if(typeof t!="object"||Array.isArray(t))return!1;for(let e of Object.keys(t))if(!E_e(t[e]))return!1;return!0}ve.prototype.modifiedPaths=function(t){t=t||{};let e=Object.keys(this.$__.activePaths.getStatePaths("modify")),r=new Set,n=0,i=0,s=e.length;for(n=0;n<s;++n){let o=e[n],a=sW(o),u=a.length;for(i=0;i<u;++i)r.add(a[i]);if(!t.includeChildren)continue;let c=0,l=this.$get(o);if(typeof l=="object"&&l!==null){l._doc&&(l=l._doc);let d=l.length;if(Array.isArray(l))for(c=0;c<d;++c){let p=o+"."+c;if(!r.has(p)&&(r.add(p),l[c]!=null&&l[c].$__)){let f=l[c].modifiedPaths(),h=0,g=f.length;for(h=0;h<g;++h)r.add(p+"."+f[h])}}else{let p=Object.keys(l),f=0,h=p.length;for(f=0;f<h;++f)r.add(o+"."+p[f])}}}return Array.from(r)};ve.prototype[m_e]=ve.prototype.modifiedPaths;ve.prototype.isModified=function(t,e,r){if(t){let n=e&&e.ignoreAtomics,i=this.$__.activePaths.states.modify;if(i==null)return!1;typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));for(let u of t)if(i[u]!=null)return!0;let s=r||this[m_e](),o=t.some(function(u){return!!~s.indexOf(u)}),a=Object.keys(i);return n&&(a=a.filter(u=>{let c=this.$__getValue(u);return!(c!=null&&c[Lo]!=null&&c[Lo].$set===void 0)})),o||t.some(function(u){return a.some(function(c){return c===u||u.startsWith(c+".")})})}return this.$__.activePaths.some("modify")};ve.prototype.$isModified=ve.prototype.isModified;ve.prototype[S_t]=ve.prototype.isModified;ve.prototype.$isDefault=function(t){if(t==null)return this.$__.activePaths.some("default");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(r))};ve.prototype.$isDeleted=function(t){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)};ve.prototype.isDirectModified=function(t){if(t==null)return this.$__.activePaths.some("modify");if(typeof t=="string"&&t.indexOf(" ")===-1){let r=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(t);if(r||t.indexOf(".")===-1)return r;let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&o.isDirectModified(n.slice(i+1).join(".")))return!0}return!1}let e=t;return typeof e=="string"&&(e=e.split(" ")),e.some(r=>this.isDirectModified(r))};ve.prototype.isInit=function(t){if(t==null)return this.$__.activePaths.some("init");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(r))};ve.prototype.isSelected=function(e){if(this.$__.selected==null)return!0;if(!e)return!1;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(s=>this.$__isSelected(s));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let s of r)if(s!=="_id"&&f_e(this.$__.selected[s])){n=!!this.$__.selected[s];break}if(n===null)return!0;if(e in this.$__.selected)return n;let i=e+".";for(let s of r)if(s!=="_id"){if(s.startsWith(i))return n||s!==i;if(i.startsWith(s+"."))return n}return!n};ve.prototype.$__isSelected=ve.prototype.isSelected;ve.prototype.isDirectSelected=function(e){if(this.$__.selected==null)return!0;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(i=>this.isDirectSelected(i));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let i of r)if(i!=="_id"&&f_e(this.$__.selected[i])){n=!!this.$__.selected[i];break}return n===null?!0:this.$__.selected.hasOwnProperty(e)?n:!n};ve.prototype.validate=async function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new Oa("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(r=arguments[0],e=null),r&&typeof r.pathsToSkip=="string"){let i=r.pathsToSkip.indexOf(" ")===-1;r.pathsToSkip=i?[r.pathsToSkip]:r.pathsToSkip.split(" ")}let n=r&&r._skipParallelValidateCheck;if(this.$isSubdocument==null){if(this.$__.validating&&!n)throw new o_t(this);n||(this.$__.validating=!0)}return new Promise((i,s)=>{this.$__validate(e,r,o=>{if(this.$op=null,this.$__.validating=null,o!=null)return s(o);i()})})};ve.prototype.$validate=ve.prototype.validate;function D_t(t){let e=Object.keys(t.$__.activePaths.getStatePaths("require")),r=0,n=e.length;for(r=0;r<n;++r){let i=e[r],s=t.$__schema.path(i);if(s!=null&&typeof s.originalRequiredValue=="function"){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[i]=s.originalRequiredValue.call(t,t)}catch(o){t.invalidate(i,o)}}}}function b_e(t,e,r,n){let i={};D_t(t);let s=new Set(Object.keys(t.$__.activePaths.getStatePaths("require")).filter(function(u){return!t.$__isSelected(u)&&!t.$isModified(u)||u.endsWith(".$*")?!1:t.$__.cachedRequired!=null&&u in t.$__.cachedRequired?t.$__.cachedRequired[u]:!0}));Object.keys(t.$__.activePaths.getStatePaths("init")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("modify")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("default")).forEach(o);function o(u){u.endsWith(".$*")||s.add(u)}if(!n){let u=[];for(let l of Object.keys(t.$__schema.paths)){let d=t.$__schema.path(l);if(d.$isSingleNested){let p=t.$get(l);p&&u.push(p)}else if(d.$isMongooseDocumentArray){let p=t.$get(l);if(p&&p.length)for(let f of p)f&&u.push(f)}}let c=t.modifiedPaths();for(let l of u)if(l.$basePath){let d=l.$__pathRelativeToParent();for(let f of l.modifiedPaths())s.delete(d+"."+f);let p=l.$parent();if(p==null)throw new Error("Cannot validate subdocument that does not have a parent");t.$isModified(d,null,c)&&!p.$__.activePaths.getStatePaths("modify").hasOwnProperty(d)&&!p.$isDefault(d)&&(s.add(d),t.$__.pathsToScopes==null&&(t.$__.pathsToScopes={}),t.$__.pathsToScopes[d]=l.$isDocumentArrayElement?l.__parentArray:l.$parent(),i[d]={skipSchemaValidators:!0},l.$isDocumentArrayElement&&l.__index!=null&&(i[d].index=l.__index))}}for(let u of s){let c=t.$__schema.path(u);if(c){if(c.$isMongooseDocumentArray)for(let l of s)(l==null||l.startsWith(c.path+"."))&&s.delete(l);(!c.caster&&c.validators.length===0&&!c.$parentSchemaDocArray||c.$isMongooseArray&&!c.$isMongooseDocumentArray&&!c.$embeddedSchemaType.$isMongooseArray&&c.validators.length===0&&c.$embeddedSchemaType.validators.length===0)&&s.delete(u)}}Array.isArray(e)?s=M_t(s,e):Array.isArray(r)&&(s=P_t(s,r)),k_t(t,s);let a={skipArrays:!0};for(let u of s)if(t.$__schema.nested[u]){let c=t.$__getValue(u);__t(c)&&(c=c.toObject({transform:!1}));let l=d_t(c,u,a,t.$__schema);Object.keys(l).filter(d=>!t.$__schema.singleNestedPaths.hasOwnProperty(d)).forEach(o)}for(let u of s){let c=t.$__schema.path(u);if(!c||(c.$parentSchemaDocArray&&typeof c.$parentSchemaDocArray.path=="string"&&s.add(c.$parentSchemaDocArray.path),!c.$isSchemaMap))continue;let l=t.$__getValue(u);if(l!=null)for(let d of l.keys())s.add(u+"."+d)}return s=Array.from(s),[s,i]}function k_t(t,e){for(let r of e){let n=t.$__schema.path(r);if(!n||!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!(n&&n.schemaOptions&&n.schemaOptions.required)||n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.$embeddedSchemaType.$isMongooseArray&&n.$embeddedSchemaType.validators.length===0)continue;let i=t.$__getValue(r);JO(i,e,r)}}function JO(t,e,r){if(t!=null){let n=t.length;for(let i=0;i<n;++i)Array.isArray(t[i])?JO(t[i],e,r+"."+i):e.add(r+"."+i)}}ve.prototype.$__validate=function(t,e,r){this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!t?t=[...this.$__.saveOptions.pathsToSave]:typeof t=="function"?(r=t,e=null,t=null):typeof e=="function"&&(r=e,e=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i=e&&e.pathsToSkip||null,s;n?s=!!e.validateModifiedOnly:s=this.$__schema.options.validateModifiedOnly;let o=e&&e.validateAllPaths;if(o){if(i)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(n&&s)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let a=this,u=()=>{let _=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,s&&_!=null){let S=Object.keys(_.errors);for(let w of S)this.$isModified(w)||delete _.errors[w];Object.keys(_.errors).length===0&&(_=void 0)}if(this.$__.cachedRequired={},this.$emit("validate",a),this.constructor.emit("validate",a),_){for(let S in _.errors)!this[v_t]&&_.errors[S]instanceof Oa.CastError&&this.invalidate(S,_.errors[S]);return _}},c,l;if(o){c=new Set(Object.keys(this.$__schema.paths));for(let _ of c){let S=this.$__schema.path(_);if(!S||!S.$isMongooseArray)continue;let w=this.$__getValue(_);w&&JO(w,c,_)}c=[...c],l={}}else{let _=b_e(this,t,i,e&&e._nestedValidate);c=s?_[0].filter(S=>this.$isModified(S)):_[0],l=_[1]}if(typeof t=="string"&&(t=t.split(" ")),c.length===0)return s_e(function(){let _=u();if(_)return a.$__schema.s.hooks.execPost("validate:error",a,[a],{error:_},function(S){r(S)});r(null,a)});let d={},p=0,f=this.$__.saveOptions?.pathsToSave;if(Array.isArray(f)){f=new Set(f);for(let _ of c)f.has(_)&&h(_)}else for(let _ of c)h(_);function h(_){_==null||d[_]||(d[_]=!0,p++,s_e(function(){let S=a.$__schema.path(_);if(!S)return--p||g();if(!a.$isValid(_)){--p||g();return}if(S[O_t]!=null&&_!==S.path)return--p||g();let w=a.$__getValue(_),C;(C=a.$populated(_))?w=C:w!=null&&w.$__!=null&&w.$__.wasPopulated&&(w=w._doc._id);let A=a.$__.pathsToScopes!=null&&_ in a.$__.pathsToScopes?a.$__.pathsToScopes[_]:a,O={...l[_],path:_,validateAllPaths:o,_nestedValidate:!0};S.doValidate(w,function(x){if(x){if((S.$isSingleNested||S.$isArraySubdocument||S.$isMongooseDocumentArray)&&x instanceof WO)return--p||g();a.invalidate(_,x,void 0,!0)}--p||g()},A,O)}))}function g(){let _=u();if(_)return a.$__schema.s.hooks.execPost("validate:error",a,[a],{error:_},function(S){r(S)});r(null,a)}};function M_t(t,e){let r=new Set(e),n=new Map([]);for(let s of e){if(s.indexOf(".")===-1)continue;let o=s.split("."),a=o[0];for(let u=1;u<o.length;++u)n.set(a,s),a=a+"."+o[u]}let i=new Set;for(let s of t)r.has(s)?i.add(s):n.has(s)&&i.add(n.get(s));return i}function P_t(t,e){return e=new Set(e),t=Array.from(t).filter(r=>!e.has(r)),new Set(t)}ve.prototype.validateSync=function(t,e){let r=this;arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(e=arguments[0],t=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i;n?i=!!e.validateModifiedOnly:i=this.$__schema.options.validateModifiedOnly;let s=e&&e.pathsToSkip,o=e&&e.validateAllPaths;if(o){if(s)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}typeof t=="string"?t=t.indexOf(" ")===-1?[t]:t.split(" "):typeof s=="string"&&s.indexOf(" ")!==-1&&(s=s.split(" "));let a,u;if(o){a=new Set(Object.keys(this.$__schema.paths));for(let d of a){let p=this.$__schema.path(d);if(!p||!p.$isMongooseArray)continue;let f=this.$__getValue(d);f&&JO(f,a,d)}a=[...a],u={}}else{let d=b_e(this,t,s);a=i?d[0].filter(p=>this.$isModified(p)):d[0],u=d[1]}let c={};for(let d=0,p=a.length;d<p;++d){let f=a[d];if(c[f])continue;c[f]=!0;let h=r.$__schema.path(f);if(!h||!r.$isValid(f))continue;let g=r.$__getValue(f),_=h.doValidateSync(g,r,{skipSchemaValidators:u[f],path:f,validateModifiedOnly:i,validateAllPaths:o});if(_){if((h.$isSingleNested||h.$isArraySubdocument||h.$isMongooseDocumentArray)&&_ instanceof WO)continue;r.invalidate(f,_,void 0,!0)}}let l=r.$__.validationError;if(r.$__.validationError=void 0,r.$emit("validate",r),r.constructor.emit("validate",r),l)for(let d in l.errors)l.errors[d]instanceof Oa.CastError&&r.invalidate(d,l.errors[d]);return l};ve.prototype.invalidate=function(t,e,r,n){if(this.$__.validationError||(this.$__.validationError=new WO(this)),!this.$__.validationError.errors[t])return(!e||typeof e=="string")&&(e=new d_e({path:t,message:e,type:n||"user defined",value:r})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)};ve.prototype.$markValid=function(t){!this.$__.validationError||!this.$__.validationError.errors[t]||(delete this.$__.validationError.errors[t],Object.keys(this.$__.validationError.errors).length===0&&(this.$__.validationError=null))};function N_t(t,e){if(!t.$__.validationError)return;let r=Object.keys(t.$__.validationError.errors);for(let n of r)n.startsWith(e+".")&&delete t.$__.validationError.errors[n];Object.keys(t.$__.validationError.errors).length===0&&(t.$__.validationError=null)}function F_t(t,e,r){let n=e.schema;if(n!=null)for(let i of Object.keys(n.paths)){let s=n.paths[i];if(s.$immutableSetter==null)continue;let o=r?.$__getValue(i);s.$immutableSetter.call(t,o)}}ve.prototype.$isValid=function(t){return this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0?!0:t==null?!1:(t.indexOf(" ")!==-1&&(t=t.split(" ")),Array.isArray(t)?t.some(e=>this.$__.validationError.errors[e]==null):this.$__.validationError.errors[t]==null)};ve.prototype.$__reset=function(){let e=this,r=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(r&&r.length>0)for(let n of r)n.$__reset();return this.$__dirty().forEach(function(n){let i=n.value;i&&i[Lo]&&(i[Bv]=i[Lo],i[Lo]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,e=this,this.$__schema.requiredPaths().forEach(function(n){e.$__.activePaths.require(n)}),this};ve.prototype.$__undoReset=function(){if(!(this.$__.backup==null||this.$__.backup.activePaths==null)){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let e of this.$__dirty()){let r=e.value;r&&r[Lo]&&r[Bv]&&(r[Lo]=r[Bv])}if(!this.$isSubdocument)for(let e of this.$getAllSubdocs())e.$__undoReset()}};ve.prototype.$__dirty=function(){let t=this,e=this.$__.activePaths.map("modify",function(i){return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}});e=e.concat(this.$__.activePaths.map("default",function(i){if(!(i==="_id"||t.$__getValue(i)==null))return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}}));let r=new Map(e.filter(i=>i!=null).map(i=>[i.path,i.value])),n=[];return e.forEach(function(i){if(!i)return;let s=null,o=sW(i.path);for(let a=0;a<o.length-1;a++)if(r.has(o[a])){s=r.get(o[a]);break}s==null?n.push(i):s!=null&&s[Lo]!=null&&s.hasAtomics()&&(s[Lo]={},s[Lo].$set=s)}),n};ve.prototype.$__setSchema=function(t){u_t(t.tree,this,void 0,t.options);for(let e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();t.path("schema")==null&&(this.schema=t),this.$__schema=t,this[w_t]=t};ve.prototype.$__getArrayPathsToValidate=function(){return zO||(zO=V0()),this.$__.activePaths.map("init","modify",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&Array.isArray(t)&&Pt.isMongooseDocumentArray(t)&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})};ve.prototype.$getAllSubdocs=function(t){if(t?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;zO||(zO=V0()),Fv=Fv||fE();let e=[];function r(n){let i=[];for(let{model:s}of n.$__schema.childSchemas){let o=n.$__getValue(s.path);if(o!=null){if(o.$__&&i.push(o),Array.isArray(o))for(let a of o)a!=null&&a.$__&&i.push(a);if(o instanceof Map)for(let a of o.values())a!=null&&a.$__&&i.push(a)}}for(let s of i)r(s);e.push(...i)}return r(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=e),e};function B_t(t){let e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(let r of e)r[0]!=="pre"&&r[0]!=="post"&&r[0]!=="on"&&t[r[0]].apply(t,r[1])}ve.prototype.$__handleReject=function(e){this.$listeners("error").length?this.$emit("error",e):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",e)};ve.prototype.$toObject=function(t,e){let r=this.$__schema._defaultToObjectOptions(e),n=this.$__hasOnlyPrimitiveValues();t=Pt.isPOJO(t)?{...t}:{},t._calledWithOptions=t._calledWithOptions||{...t};let i;t._calledWithOptions.minimize!=null?i=t.minimize:this.$__schemaTypeOptions?.minimize!=null?i=this.$__schemaTypeOptions.minimize:r!=null&&r.minimize!=null?i=r.minimize:i=this.$__schema.options.minimize,t.minimize=i,n||(t._seen=t._seen||new Map);let s=t._calledWithOptions.depopulate??r?.depopulate??t.depopulate??!1;if(s&&t._isNested&&this.$__.wasPopulated)return xl(this.$__.wasPopulated.value||this._doc._id,t);if(s&&(t.depopulate=!0),r!=null)for(let f of Object.keys(r))t[f]==null&&(t[f]=r[f]);t._isNested=!0,t.json=e,t.minimize=i;let o=t._parentOptions;t._parentOptions=this.$isSubdocument?t:null;let a=t._calledWithOptions.schemaFieldsOnly??t.schemaFieldsOnly??r.schemaFieldsOnly??!1,u;if(n&&!t.flattenObjectIds)u=this.$__toObjectShallow(a);else if(a){u={};for(let f of Object.keys(this.$__schema.paths)){let h=this.$__getValue(f);if(h===void 0)continue;let g=f,_=u;if(f.indexOf(".")!==-1){let S=f.split(".");g=S[S.length-1];for(let w=0;w<S.length-1;++w)_[S[w]]=_[S[w]]??{},_=_[S[w]]}if(h===null){_[g]=null;continue}_[g]=xl(h,t)}}else u=xl(this._doc,t)||{};let c=t._calledWithOptions.getters??t.getters??r.getters??!1;c&&(q_t(this,u),t.minimize&&(u=y_t(u)||{}));let l=t._calledWithOptions.virtuals??r.virtuals??o?.virtuals??void 0;(l||c&&l!==!1)&&aW(this,u,t,t),t.versionKey===!1&&this.$__schema.options.versionKey&&delete u[this.$__schema.options.versionKey];let d=t._calledWithOptions.transform??!0,p;if(d===!0?p=r.transform:typeof d=="function"&&(p=d),d&&L_t(this,u),t.useProjection&&j_t(this,u),typeof p=="function"){let f=p(this,u,t);typeof f<"u"&&(u=f)}return u};ve.prototype.$__toObjectShallow=function(e){let r={};if(this._doc!=null){let n=Object.keys(e?this.$__schema.paths:this._doc);for(let i of n){let s=this._doc[i];s instanceof Date?r[i]=new Date(s):s!==void 0&&(r[i]=s)}}return r};ve.prototype.toObject=function(t){return this.$toObject(t)};function aW(t,e,r,n){let i=t.$__schema,s=i.virtuals,o=Object.keys(s),a=o.length,u=a,c,l,d=t._doc,p,f=typeof(n&&n.aliases)=="boolean"?n.aliases:!0;r=r||{};let h=null;if(Array.isArray(r.virtuals))h=new Set(r.virtuals);else if(r.virtuals&&r.virtuals.pathsToSkip){h=new Set(o);for(let g=0;g<r.virtuals.pathsToSkip.length;g++)h.has(r.virtuals.pathsToSkip[g])&&h.delete(r.virtuals.pathsToSkip[g])}if(!d)return e;for(a=0;a<u;++a){if(c=o[a],h!=null&&!h.has(c)||!f&&i.aliases.hasOwnProperty(c))continue;if(l=c,r.path!=null){if(!c.startsWith(r.path+"."))continue;l=c.substring(r.path.length+1)}if(l.indexOf(".")===-1&&l===c){if(p=s[c].applyGetters(void 0,t),p===void 0)continue;p=xl(p,r),e[l]=p;continue}let g=l.split(".");if(p=xl(t.get(c),r),p===void 0)continue;let _=g.length;d=e;for(let S=0;S<_-1;++S)d[g[S]]=d[g[S]]||{},d=d[g[S]];d[g[_-1]]=p}return e}function q_t(t,e){let r=t.$__schema,n=Object.keys(r.paths),i=n.length,s,o=t._doc,a;if(!o)return e;for(;i--;){s=n[i];let u=s.split("."),c=u.length,l=c-1,d=e,p;if(o=t._doc,!!t.$__isSelected(s))for(let f=0;f<c&&(p=u[f],a=o[p],!(d!=null&&typeof d!="object"));++f){if(f===l){if(d[p]=r.paths[s].applyGetters(d[p],t),Array.isArray(d[p])&&r.paths[s].$embeddedSchemaType)for(let h=0;h<d[p].length;++h)d[p][h]=r.paths[s].$embeddedSchemaType.applyGetters(d[p][h],t)}else if(a==null){p in o&&(d[p]=a);break}else d=d[p]||(d[p]={});o=a}}return e}function L_t(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;for(let s of n){let o=r.paths[s],a=o.options.transform??o.constructor?.defaultOptions?.transform,u=o.$embeddedSchemaType?.options?.transform??o.$embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof a=="function"){let c=t.$get(s);if(c===void 0)continue;let l=a.call(t,c);l_e(s,l),Pt.setValue(s,l,e)}else if(typeof u=="function"){let c=t.$get(s);if(c===void 0)continue;let l=[].concat(c);for(let d=0;d<l.length;++d){let p=u.call(t,l[d]);l[d]=p,l_e(s,p)}e[s]=l}}return e}function l_e(t,e){if(b_t(e))throw new Error("`transform` function must be synchronous, but the transform on path `"+t+"` returned a promise.")}function j_t(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;let s=t.$__.selected;if(s===void 0&&(s={},E_t.applyPaths(s,r)),s==null||Object.keys(s).length===0)return e;for(let o of n)s[o]!=null&&!s[o]&&delete e[o];return e}ve.prototype.toJSON=function(t){return this.$toObject(t,!0)};ve.prototype.ownerDocument=function(){return this};ve.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this};ve.prototype.$parent=ve.prototype.parent;ve.prototype.inspect=function(t){let e=Pt.isPOJO(t),r;e&&(r=t,r.minimize=!1);let n=arguments.length>0?this.toObject(r):this.toObject();return n??"MongooseDocument { "+n+" }"};iW.custom&&(ve.prototype[iW.custom]=ve.prototype.inspect);ve.prototype.toString=function(){let t=this.inspect();return typeof t=="string"?t:iW(t)};ve.prototype.equals=function(t){if(!t)return!1;let e=this.$__getValue("_id"),r=t.$__!=null?t.$__getValue("_id"):t;return!e&&!r?HO(this,t):e&&e.equals?e.equals(r):e===r};ve.prototype.populate=async function(){let e={},r=[...arguments];if(typeof r[r.length-1]=="function")throw new Oa("Document.prototype.populate() no longer accepts a callback");if(r.length!==0){let s=Pt.populate.apply(null,r);for(let o of s)e[o.path]=o}let n=Pt.object.vals(e),i=this.constructor;if(this.$__isNested){i=this.$__[T_t].constructor;let s=this.$__.nestedPath;n.forEach(function(o){o.path=s+"."+o.path})}if(this.$session()!=null){let s=this.$session();n.forEach(o=>{if(o.options==null){o.options={session:s};return}"session"in o.options||(o.options.session=s)})}return n.forEach(s=>{s._localModel=i}),i.populate(this,n)};ve.prototype.$getPopulatedDocs=function(){let e=[];this.$__.populated!=null&&(e=e.concat(Object.keys(this.$__.populated)));let r=[];for(let n of e){let i=this.$get(n);Array.isArray(i)?r=r.concat(i):i instanceof ve&&r.push(i)}return r};ve.prototype.populated=function(t,e,r){if(e==null||e===!0){if(!this.$__.populated||typeof t!="string")return;let i=t.endsWith(".$*")?t.replace(/\.\$\*$/,""):t,s=this.$__.populated[i];return s?e===!0?s:s.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:r};let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&this.$populated(s)){let a=n.slice(i+1).join(".");o.$populated(a,e,r);break}}return e};ve.prototype.$populated=ve.prototype.populated;ve.prototype.$assertPopulated=function(e,r){if(Array.isArray(e))return e.forEach(n=>this.$assertPopulated(n,r)),this;if(arguments.length>1&&this.$set(r),!this.$populated(e))throw new Oa(`Expected path "${e}" to be populated`);return this};ve.prototype.depopulate=function(t){typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));let e,r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let s of r)delete this.$$populatedVirtuals[s],delete this._doc[s],delete n[s];let i=Object.keys(n);for(let s of i)if(e=this.$populated(s),!!e)if(delete n[s],Array.isArray(e)){let o=Pt.getValue(s,this._doc);if(o.isMongooseArray){let a=o.__array;for(let u=0;u<a.length;++u){let c=a[u];c!=null&&(a[u]=c instanceof ve?c._doc._id:c._id)}}else Pt.setValue(s,e,this._doc)}else Pt.setValue(s,e,this._doc);return this}for(let i of t)if(e=this.$populated(i),delete n[i],r.indexOf(i)!==-1)delete this.$$populatedVirtuals[i],delete this._doc[i];else if(e)if(Array.isArray(e)){let s=Pt.getValue(i,this._doc);if(s.isMongooseArray){let o=s.__array;for(let a=0;a<o.length;++a){let u=o[a];u!=null&&(o[a]=u instanceof ve?u._doc._id:u._id)}}else Pt.setValue(i,e,this._doc)}else Pt.setValue(i,e,this._doc);return this};ve.prototype.$__fullPath=function(t){return t||""};ve.prototype.getChanges=function(){let t=this.$__delta();return t?t[1]:{}};ve.prototype.$__delta=function(){let e=this.$__dirty(),r=this.$__schema.options.optimisticConcurrency;if(r)if(Array.isArray(r)){let u=new Set(r);this.modifiedPaths().find(l=>u.has(l))&&(this.$__.version=e.length?Wp:qv)}else this.$__.version=e.length?Wp:qv;if(!e.length&&Wp!==this.$__.version)return;let n={},i={},s=e.length,o=[],a=0;for(n._id=this._doc._id,(n&&n._id&&n._id.$__||null)!=null&&(n._id=n._id.toObject({transform:!1,depopulate:!0}));a<s;++a){let u=e[a],c=u.value,l=$_t(this,u.path,c);if(l){o.push(l);continue}if(!this.$populated(u.path,!0)&&this.$__.selected){let p=u.path.split("."),f=p[0];if(this.$__.selected[f]&&this.$__.selected[f].$elemMatch)if(p.length>1&&p[1]==0&&typeof n[f]>"u")n[f]=this.$__.selected[f],p[1]="$",u.path=p.join(".");else{o.push(u.path);continue}}if(!(this.$isDefault(u.path)&&this.$__.selected&&(u.path.indexOf(".")===-1&&a_e(this.$__.selected,u.path)||sW(u.path).find(f=>a_e(this.$__.isSelected,f))))&&!o.length)if(c===void 0)lh(this,n,i,u,1,"$unset");else if(c===null)lh(this,n,i,u,null);else if(Pt.isMongooseArray(c)&&c.$path()&&c[Lo])K_t(this,n,i,u,c);else if(c[r_t.pathSymbol]&&Buffer.isBuffer(c))c=c.toObject(),lh(this,n,i,u,c);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[u.path]!=null){let p=this.$__.primitiveAtomics[u.path],f=l_t(p);lh(this,n,i,u,p[f],f)}else c=xl(c,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),lh(this,n,i,u,c)}return o.length?new e_t(o):(this.$__.version&&this.$__version(n,i),Object.keys(i).length===0?[n,null]:[n,i])};function $_t(t,e,r){let n=t.$populated(e,!0);if(!n&&t.$__.selected){let s=e.split(".")[0];if(t.$__.selected[s+".$"])return s}if(!(n&&Pt.isMongooseArray(r)))return;if(n.options.match||n.options.options&&Pt.object.hasOwnProperty(n.options.options,"limit")||n.options.options&&n.options.options.skip||n.options.select&&(n.options.select._id===0||/\s?-_id\s?/.test(n.options.select))){let s=r[Lo];if(Object.keys(s).length===0||s.$set||s.$pop)return e}}function lh(t,e,r,n,i,s){if(s||(s="$set"),r[s]||(r[s]={}),r[s][n.path]=i,t.$__schema.options.versionKey!==!1&&!U_t(t,n.path)&&Wp!==(Wp&t.$__.version)&&!t.$__schema.options.optimisticConcurrency){switch(s){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}s==="$push"||s==="$addToSet"||s==="$pullAll"||s==="$pull"?/\.\d+\.|\.\d+$/.test(n.path)?t.$__.version=Wp:t.$__.version=oW:/^\$p/.test(s)||Array.isArray(i)?t.$__.version=Wp:/\.\d+\.|\.\d+$/.test(n.path)&&(t.$__.version=qv)}}function K_t(t,e,r,n,i){if(r.$set&&r.$set[n.path])return;if(typeof i.$__getAtomics=="function"){i.$__getAtomics().forEach(function(d){let p=d[0],f=d[1];lh(t,e,r,n,f,p)});return}let s=i[Lo],o=Object.keys(s),a=o.length,u,c;if(a===0)return Pt.isMongooseObject(i)?i=i.toObject({depopulate:1,_isNested:!0}):i.valueOf&&(i=i.valueOf()),lh(t,e,r,n,i);function l(d){return Pt.isMongooseObject(d)?d.toObject({depopulate:1,_isNested:!0}):d}for(;a--;)c=o[a],u=s[c],Pt.isMongooseObject(u)?u=u.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(u)?u=u.map(l):u.valueOf&&(u=u.valueOf()),c==="$addToSet"&&(u={$each:u}),lh(t,e,r,n,u,c)}function U_t(t,e){let r=t.$__schema.options.skipVersioning;return r?(e=e.replace(/\.\d+\./,"."),r[e]):!1}ve.prototype.$clone=function(){let t=this.constructor,e=new t;if(e.$isNew=this.$isNew,this._doc&&(e._doc=xl(this._doc,{retainDocuments:!0})),this.$__){let r=this.$__.constructor,n=new r;for(let i of Object.getOwnPropertyNames(this.$__))i!=="activePaths"&&(n[i]=xl(this.$__[i]));Object.assign(n.activePaths,xl({...this.$__.activePaths})),e.$__=n}return e};ve.prototype.$createModifiedPathsSnapshot=function(){let e=new WeakMap;if(!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.set(n,n.$__.activePaths.clone())}return new n_t(e,this.$__.activePaths.clone(),this.$__.version)};ve.prototype.$restoreModifiedPathsSnapshot=function(e){if(this.$__.activePaths=e.activePaths.clone(),this.$__.version=e.version,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.subdocSnapshot.has(n)&&(n.$__.activePaths=e.subdocSnapshot.get(n))}return this};ve.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let e=this.$getAllSubdocs();for(let r of e)r.$clearModifiedPaths()}return this};ve.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(e=>e==null||typeof e!="object"||Pt.isNativeObject(e)&&!Array.isArray(e)||o_e(e,"ObjectId")||o_e(e,"Decimal128")))};ve.VERSION_WHERE=qv;ve.VERSION_INC=oW;ve.VERSION_ALL=Wp;ve.ValidationError=WO;v_e.exports=__e=ve});var Tt=m(Je=>{"use strict";var V_t=ca().UUID,G_t=EK(),w_e=ou(),H_t=Vp(),A_e=Tz(),cW=Vn(),z_t=Vu(),W_t=oh(),C_e=eO(),T_e=SEe(),dh=js(),J_t=nE(),Y_t=tz(),Lv=xv(),Q_t=EO(),X_t=bO(),jv=F0(),{trustedSymbol:hE}=iE(),uW;Je.specialProperties=jv;Je.isMongooseArray=C_e.isMongooseArray;Je.isMongooseDocumentArray=T_e.isMongooseDocumentArray;Je.registerMongooseArray=C_e.registerMongooseArray;Je.registerMongooseDocumentArray=T_e.registerMongooseDocumentArray;var lW=/\s/,dW=/\s+/;Je.toCollectionName=function(t,e){if(t==="system.profile"||t==="system.indexes")return t;if(typeof e=="function"){if(typeof t!="string")throw new TypeError("Collection name must be a string");if(t.length===0)throw new TypeError("Collection name cannot be empty");return e(t)}return t};Je.deepEqual=function t(e,r){if(e===r)return!0;if(typeof e!="object"||typeof r!="object")return e===r;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(dh(e,"ObjectId")&&dh(r,"ObjectId")||dh(e,"Decimal128")&&dh(r,"Decimal128"))return e.toString()===r.toString();if(e instanceof RegExp&&r instanceof RegExp)return e.source===r.source&&e.ignoreCase===r.ignoreCase&&e.multiline===r.multiline&&e.global===r.global&&e.dotAll===r.dotAll&&e.unicode===r.unicode&&e.sticky===r.sticky&&e.hasIndices===r.hasIndices;if(e==null||r==null||e.prototype!==r.prototype)return!1;if(e instanceof Map||r instanceof Map)return!(e instanceof Map)||!(r instanceof Map)?!1:t(Array.from(e.keys()),Array.from(r.keys()))&&t(Array.from(e.values()),Array.from(r.values()));if(e instanceof Number&&r instanceof Number)return e.valueOf()===r.valueOf();if(Buffer.isBuffer(e))return Je.buffer.areEqual(e,r);if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return!1;let o=e.length;if(o!==r.length)return!1;for(let a=0;a<o;++a)if(!t(e[a],r[a]))return!1;return!0}e.$__!=null?e=e._doc:Lv(e)&&(e=e.toObject()),r.$__!=null?r=r._doc:Lv(r)&&(r=r.toObject());let n=Object.keys(e),i=Object.keys(r),s=n.length;if(s!==i.length)return!1;for(let o=s-1;o>=0;o--)if(n[o]!==i[o])return!1;for(let o of n)if(!t(e[o],r[o]))return!1;return!0};Je.last=function(t){if(t.length>0)return t[t.length-1]};Je.promiseOrCallback=Q_t;Je.cloneArrays=function(e){return Array.isArray(e)?e.map(r=>Je.cloneArrays(r)):e};Je.omit=function(e,r){if(r==null)return Object.assign({},e);Array.isArray(r)||(r=[r]);let n=Object.assign({},e);for(let i of r)delete n[i];return n};Je.clonePOJOsAndArrays=function(e){if(e==null||e.$__!=null)return e;if(J_t(e)){e={...e};for(let r of Object.keys(e))e[r]=Je.clonePOJOsAndArrays(e[r]);return e}if(Array.isArray(e)){e=[...e];for(let r=0;r<e.length;++r)e[r]=Je.clonePOJOsAndArrays(e[r]);return e}return e};Je.merge=function t(e,r,n,i){n=n||{};let s=Object.keys(r),o=0,a=s.length,u;r[hE]&&(e[hE]=r[hE]),i=i||"";let c=n.omitNested||{};for(;o<a;)if(u=s[o++],!(n.omit&&n.omit[u])&&!c[i]&&!jv.has(u))if(e[u]==null)e[u]=Je.clonePOJOsAndArrays(r[u]);else if(Je.isObject(r[u])){if(Je.isObject(e[u])||(e[u]={}),r[u]!=null){if(n.isDiscriminatorSchemaMerge&&r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?X_t(e[u],r[u].clone(),n.isDiscriminatorSchemaMerge):e[u]=r[u].clone();continue}else if(dh(r[u],"ObjectId")){e[u]=new H_t(r[u]);continue}}t(e[u],r[u],n,i?i+"."+u:u)}else n.overwrite&&(e[u]=r[u]);return e};Je.toObject=function t(e){uW||(uW=ac());let r;if(e==null)return e;if(e instanceof uW)return e.toObject();if(Array.isArray(e)){r=[];for(let n of e)r.push(t(n));return r}if(Je.isPOJO(e)){r={},e[hE]&&(r[hE]=e[hE]);for(let n of Object.keys(e))jv.has(n)||(r[n]=t(e[n]));return r}return e};Je.isObject=W_t;Je.isPOJO=nE();Je.isNonBuiltinObject=function(e){return typeof e=="object"&&!Je.isNativeObject(e)&&!Je.isMongooseType(e)&&!(e instanceof V_t)&&e!=null};Je.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String};Je.isEmptyObject=function(t){return t!=null&&typeof t=="object"&&Object.keys(t).length===0};Je.hasKey=function(e,r){let n=Object.keys(e);for(let i of n)if(i===r||Je.isPOJO(e[i])&&Je.hasKey(e[i],r))return!0;return!1};Je.tick=function(e){if(typeof e=="function")return function(){try{e.apply(this,arguments)}catch(r){z_t(function(){throw r})}}};Je.isMongooseType=function(t){return dh(t,"ObjectId")||dh(t,"Decimal128")||t instanceof Buffer};Je.isMongooseObject=Lv;Je.expires=function(e){e&&e.constructor.name==="Object"&&"expires"in e&&(e.expireAfterSeconds=typeof e.expires!="string"?e.expires:Math.round(G_t(e.expires)/1e3),delete e.expires)};Je.populate=function(e,r,n,i,s,o,a,u){let c=null;if(arguments.length===1){if(e instanceof A_e)return e._docs={},e._childDocs=[],[e];if(Array.isArray(e))return l(e).map(p=>Je.populate(p)[0]);Je.isObject(e)?c=Object.assign({},e):c={path:e}}else typeof n=="object"?c={path:e,select:r,match:n,options:i}:c={path:e,select:r,model:n,match:i,options:s,populate:o,justOne:a,count:u};if(typeof c.path!="string"&&!(Array.isArray(c.path)&&c.path.every(d=>typeof d=="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof e+"`");return Z_t(c);function l(d){let p=[];return d.forEach(function(f){lW.test(f.path)?f.path.split(dW).forEach(function(g){let _=Object.assign({},f);_.path=g,p.push(_)}):p.push(f)}),p}};function Z_t(t){if(Array.isArray(t.populate)){let n=[];t.populate.forEach(function(i){if(lW.test(i.path)){let s=Object.assign({},i);s.path.split(dW).forEach(function(a){s.path=a,n.push(Je.populate(s)[0])})}else n.push(Je.populate(i)[0])}),t.populate=Je.populate(n)}else t.populate!=null&&typeof t.populate=="object"&&(t.populate=Je.populate(t.populate));let e=[],r=lW.test(t.path)?t.path.split(dW):Array.isArray(t.path)?t.path:[t.path];t.options!=null&&(t.options=cW(t.options));for(let n of r)e.push(new A_e(Object.assign({},t,{path:n})));return e}Je.getValue=function(t,e,r){return w_e.get(t,e,t4t,r)};var e4t=Object.freeze({getters:!1});function t4t(t,e){if(e==="$*"&&t instanceof Map)return t;let r=t?._doc||t;return r!=null&&r.isMongooseArrayProxy&&(r=r.__array),r instanceof Map?r.get(e,e4t):r[e]}Je.setValue=function(t,e,r,n,i){w_e.set(t,e,r,"_doc",n,i)};Je.object={};Je.object.vals=function(e){let r=Object.keys(e),n=r.length,i=[];for(;n--;)i.push(e[r[n]]);return i};var r4t=Object.prototype.hasOwnProperty;Je.object.hasOwnProperty=function(t,e){return r4t.call(t,e)};Je.isNullOrUndefined=function(t){return t==null};Je.array={};Je.array.flatten=function t(e,r,n){return n||(n=[]),e.forEach(function(i){Array.isArray(i)?t(i,r,n):(!r||r(i))&&n.push(i)}),n};var n4t=Object.prototype.hasOwnProperty;Je.hasUserDefinedProperty=function(t,e){if(t==null)return!1;if(Array.isArray(e)){for(let r of e)if(Je.hasUserDefinedProperty(t,r))return!0;return!1}if(n4t.call(t,e))return!0;if(typeof t=="object"&&e in t){let r=t[e];return r!==Object.prototype[e]&&r!==Array.prototype[e]}return!1};var S_e=Math.pow(2,32)-1;Je.isArrayIndex=function(t){return typeof t=="number"?t>=0&&t<=S_e:typeof t=="string"&&/^\d+$/.test(t)?(t=+t,t>=0&&t<=S_e):!1};Je.array.unique=function(t){let e=new Set,r=new Set,n=[];for(let i of t)if(typeof i=="number"||typeof i=="string"||i==null){if(e.has(i))continue;n.push(i),e.add(i)}else if(dh(i,"ObjectId")){if(r.has(i.toString()))continue;n.push(i),r.add(i.toString())}else n.push(i);return n};Je.buffer={};Je.buffer.areEqual=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0};Je.getFunctionName=Y_t;Je.decorate=function(t,e){for(let r in e)jv.has(r)||(t[r]=e[r])};Je.mergeClone=function(t,e){Lv(e)&&(e=e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));let r=Object.keys(e),n=r.length,i=0,s;for(;i<n;)if(s=r[i++],!jv.has(s))if(typeof t[s]>"u")t[s]=cW(e[s],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=e[s];if(o!=null&&o.valueOf&&!(o instanceof Date)&&(o=o.valueOf()),Je.isObject(o)){let a=o;Lv(o)&&!o.isMongooseBuffer&&(a=a.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(a=Buffer.from(a)),Je.mergeClone(t[s],a)}else t[s]=cW(o,{flattenDecimals:!1})}};Je.each=function(t,e){for(let r of t)e(r)};Je.renameObjKey=function(t,e,r){return Object.keys(t).reduce((i,s)=>(s===e?i[r]=t[e]:i[s]=t[s],i),{})};Je.getOption=function(t){let e=Array.prototype.slice.call(arguments,1);for(let r of e)if(r!=null&&r[t]!=null)return r[t];return null};Je.noop=function(){};Je.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=e[i];return n};Je.warn=function(e){return process.emitWarning(e,{code:"MONGOOSE"})};Je.injectTimestampsOption=function(e,r){r!=null&&(e.timestamps=r)}});var vi=m((QO,P_e)=>{"use strict";var $v=wa(),k_e=Ca(),i4t=gO(),s4t=Az(),YO=Vn(),pW=aEe(),o4t=cEe(),fW=dEe(),O_e=Vu(),a4t=ot().schemaTypeSymbol,H0=Tt(),M_e=ot().validatorErrorSymbol,u4t=ot().documentIsModified,x_e=ot().populateModelSymbol,hW=$v.CastError,mW=$v.ValidatorError,c4t={_skipMarkModified:!0};function Nt(t,e,r){this[a4t]=!0,this.path=t,this.instance=r,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),e=e||{};let n=this.constructor.defaultOptions||{},i=Object.keys(n);for(let a of i)a==="validate"?this.validate(n.validate):n.hasOwnProperty(a)&&!Object.prototype.hasOwnProperty.call(e,a)&&(e[a]=n[a]);e.select==null&&delete e.select;let s=this.OptionsConstructor||k_e;this.options=new s(e),this._index=null,H0.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,pW(this));let o=Object.keys(this.options);for(let a of o){if(a==="cast"){Array.isArray(this.options[a])?this.castFunction.apply(this,this.options[a]):this.castFunction(this.options[a]);continue}if(H0.hasUserDefinedProperty(this.options,a)&&typeof this[a]=="function"){if(a==="index"&&this._index){if(e.index===!1){let l=this._index;if(typeof l=="object"&&l!=null){if(l.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(l.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let u=e[a];if(a==="default"){this.default(u);continue}let c=Array.isArray(u)?u:[u];this[a].apply(this,c)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}Nt.prototype.OptionsConstructor=k_e;Nt.prototype.path;Nt.prototype.validators;Nt.prototype.isRequired;Nt.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path!=null)return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};Nt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=r=>r),this._cast=e,this._cast)};Nt.prototype.castFunction=function(e,r){return arguments.length===0?this._castFunction:(e===!1&&(e=this.constructor._defaultCaster||(n=>n)),typeof e=="string"?(this._castErrorMessage=e,this._castFunction):(e!=null&&(this._castFunction=e),r!=null&&(this._castErrorMessage=r),this._castFunction))};Nt.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")};Nt.set=function(e,r){this.hasOwnProperty("defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=r};Nt.get=function(t){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(t)};Nt.prototype.default=function(t){if(arguments.length===1){if(t===void 0){this.defaultValue=void 0;return}if(t!=null&&t.instanceOfSchema)throw new $v("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=t,this.defaultValue}else arguments.length>1&&(this.defaultValue=[...arguments]);return this.defaultValue};Nt.prototype.index=function(t){return this._index=t,H0.expires(this._index),this};Nt.prototype.unique=function(e,r){if(this._index===!1){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return!this.options.hasOwnProperty("index")&&e===!1?this:(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!e,typeof r=="string"&&(this._duplicateKeyErrorMessage=r),this)};Nt.prototype.text=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=t,this)};Nt.prototype.sparse=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=t,this)};Nt.prototype.immutable=function(t){return this.$immutable=t,pW(this),this};Nt.prototype.transform=function(t){return this.options.transform=t,this};Nt.prototype.set=function(t){if(typeof t!="function")throw new TypeError("A setter must be a function.");return this.setters.push(t),this};Nt.prototype.get=function(t){if(typeof t!="function")throw new TypeError("A getter must be a function.");return this.getters.push(t),this};Nt.prototype.validateAll=function(t){for(let e=0;e<t.length;e++)this.validate(t[e]);return this};Nt.prototype.validate=function(t,e,r){if(typeof t=="function"||t&&H0.getFunctionName(t.constructor)==="RegExp"){let o;return typeof e=="function"?(o={validator:t,message:e},o.type=r||"user defined"):e instanceof Object&&!r?(o=fW(e)?Object.assign({},e):YO(e),o.message||(o.message=o.msg),o.validator=t,o.type=o.type||"user defined"):(e==null&&(e=$v.messages.general.default),r||(r="user defined"),o={message:e,type:r,validator:t}),this.validators.push(o),this}let n,i,s;for(n=0,i=arguments.length;n<i;n++){if(s=arguments[n],!H0.isPOJO(s)){let o="Invalid validator. Received ("+typeof s+") "+s+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(o)}this.validate(s.validator,s)}return this};Nt.prototype.required=function(t,e){let r={};if(arguments.length>0&&t==null)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof t=="object"&&(r=t,e=r.message||e,t=t.isRequired),t===!1)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let n=this;this.isRequired=!0,this.requiredValidator=function(s){let o=this&&this.$__&&this.$__.cachedRequired;if(o!=null&&!this.$__isSelected(n.path)&&!this[u4t](n.path))return!0;if(o!=null&&n.path in o){let a=o[n.path]?n.checkRequired(s,this):!0;return delete o[n.path],a}else if(typeof t=="function")return t.apply(this)?n.checkRequired(s,this):!0;return n.checkRequired(s,this)},this.originalRequiredValue=t,typeof t=="string"&&(e=t,t=void 0);let i=e||$v.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:i,type:"required"})),this};Nt.prototype.ref=function(t){return this.options.ref=t,this};Nt.prototype.getDefault=function(t,e,r){let n;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?n=this.defaultValue.call(t):n=this.defaultValue.call(t,t):n=this.defaultValue,n!=null){if(typeof n=="object"&&(!this.options||!this.options.shared)&&(n=YO(n)),r&&r.skipCast)return this._applySetters(n,t);let i=this.applySetters(n,t,e,void 0,c4t);return i&&!Array.isArray(i)&&i.$isSingleNested&&(i.$__parent=t),i}return n};Nt.prototype._applySetters=function(t,e,r,n,i){let s=t;if(r)return s;let o=this.setters;for(let a=o.length-1;a>=0;a--)s=o[a].call(e,s,n,this,i);return s};Nt.prototype._castNullish=function(e){return e};Nt.prototype.applySetters=function(t,e,r,n,i){let s=this._applySetters(t,e,r,n,i);return s==null?this._castNullish(s):(s=this.cast(s,e,r,n,i),s)};Nt.prototype.applyGetters=function(t,e){let r=t,n=this.getters,i=n.length;if(i===0)return r;for(let s=0;s<i;++s)r=n[s].call(e,r,this);return r};Nt.prototype.select=function(e){return this.selected=!!e,this};Nt.prototype.doValidate=function(t,e,r,n){let i=!1,s=this.path;if(typeof e!="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof e}`);let o=this.validators.filter(c=>typeof c=="object"&&c!==null),a=o.length;if(!a)return e(null);for(let c=0,l=o.length;c<l&&!i;++c){let d=o[c],p=d.validator,f,h=fW(d)?Object.assign({},d):YO(d);if(h.path=n&&n.path?n.path:s,h.fullPath=this.$fullPath,h.value=t,typeof t=="string"&&(h.length=t.length,h.value.length>30&&(h.value=h.value.slice(0,30)+"...")),p instanceof RegExp){u(p.test(t),h,r);continue}if(typeof p=="function"){if(t===void 0&&p!==this.requiredValidator){u(!0,h,r);continue}try{h.propsParameter?f=p.call(r,t,h):f=p.call(r,t)}catch(g){f=!1,h.reason=g,g.message&&(h.message=g.message)}f!=null&&typeof f.then=="function"?f.then(function(g){u(g,h,r)},function(g){h.reason=g,h.message=g.message,f=!1,u(f,h,r)}):u(f,h,r)}}function u(c,l,d){if(!i)if(c===void 0||c)--a<=0&&O_e(function(){e(null)});else{let p=l.ErrorConstructor||mW;i=new p(l,d),i[M_e]=!0,O_e(function(){e(i)})}}};function I_e(t,e){if(t!==void 0&&!t){let r=e.ErrorConstructor||mW,n=new r(e);return n[M_e]=!0,n}}Nt.prototype.doValidateSync=function(t,e,r){let n=this.path;if(!this.validators.length)return null;let s=this.validators;if(t===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")s=[this.validators[0]];else return null;let o=null,a=0,u=s.length;for(a=0;a<u;++a){let c=s[a];if(c===null||typeof c!="object")continue;let l=c.validator,d=fW(c)?Object.assign({},c):YO(c);d.path=r&&r.path?r.path:n,d.fullPath=this.$fullPath,d.value=t,typeof t=="string"&&(d.length=t.length,d.value.length>30&&(d.value=d.value.slice(0,30)+"..."));let p=!1;if(!o4t(l)){if(l instanceof RegExp){o=I_e(l.test(t),d);continue}if(typeof l=="function"){try{d.propsParameter?p=l.call(e,t,d):p=l.call(e,t)}catch(f){p=!1,d.reason=f}if(!(p!=null&&typeof p.then=="function")&&(o=I_e(p,d),o))break}}}return o};Nt._isRef=function(t,e,r,n){let i=n&&t.options&&(t.options.ref||t.options.refPath);if(!i&&r&&r.$__!=null){let s=r.$__fullPath(t.path,!0),o=r.ownerDocument();i=s!=null&&o.$populated(s)||r.$populated(t.path)}return i?e==null||!Buffer.isBuffer(e)&&e._bsontype!=="Binary"&&H0.isObject(e)?!0:n:!1};Nt.prototype._castRef=function(e,r,n,i){if(e==null)return e;if(e.$__!=null)return e.$__.wasPopulated=e.$__.wasPopulated||{value:e._doc._id},e;if(Buffer.isBuffer(e)||!H0.isObject(e)){if(n)return e;throw new hW(this.instance,e,this.path,null,this)}let s=r.$__fullPath(this.path,!0),a=r.ownerDocument().$populated(s,!0),u=e;if(!r.$__.populated||!r.$__.populated[s]||!r.$__.populated[s].options||!r.$__.populated[s].options.options||!r.$__.populated[s].options.options.lean){let c=a?a.options[x_e]:r.constructor.db.model(this.options.ref);u=c.hydrate(e,null,i),u.$__.wasPopulated={value:u._doc._id,options:{[x_e]:c}}}return u};function R_e(t,e){return this.castForQuery(null,t,e)}function l4t(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function D_e(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return Array.isArray(n)&&n.length===0?n:r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}Nt.prototype.$conditionalHandlers={$all:l4t,$eq:R_e,$in:D_e,$ne:R_e,$nin:D_e,$exists:i4t,$type:s4t};Nt.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t);return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof hW&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Nt.checkRequired=function(t){return arguments.length!==0&&(this._checkRequired=t),this._checkRequired};Nt.prototype.checkRequired=function(t){return t!=null};Nt.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(e.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(e.$immutable=this.$immutable,pW(e)),this._index!==void 0&&(e._index=this._index),this.selected!==void 0&&(e.selected=this.selected),this.isRequired!==void 0&&(e.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e};Nt.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType};Nt.prototype._duplicateKeyErrorMessage=null;Nt.prototype.toJSONSchema=function(e){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};Nt.prototype.autoEncryptionType=function(){return null};P_e.exports=QO=Nt;QO.CastError=hW;QO.ValidatorError=mW});var yW=m((k6r,N_e)=>{"use strict";var Il=su(),xa=class{constructor(e){Object.assign(this,e),e!=null&&e.options!=null&&(this.options=Object.assign({},e.options))}};Object.defineProperty(xa.prototype,"ref",Il);Object.defineProperty(xa.prototype,"refPath",Il);Object.defineProperty(xa.prototype,"localField",Il);Object.defineProperty(xa.prototype,"foreignField",Il);Object.defineProperty(xa.prototype,"justOne",Il);Object.defineProperty(xa.prototype,"count",Il);Object.defineProperty(xa.prototype,"match",Il);Object.defineProperty(xa.prototype,"options",Il);Object.defineProperty(xa.prototype,"skip",Il);Object.defineProperty(xa.prototype,"limit",Il);Object.defineProperty(xa.prototype,"perDocumentLimit",Il);N_e.exports=xa});var XO=m((M6r,F_e)=>{"use strict";F_e.exports=function(e,r,n){return e==null?e:(e._doc!=null&&(e=e._doc),arguments.length>=3?typeof e!="object"||n===void 0?void 0:(e instanceof Map?e.set(r,n):e[r]=n,n):r==="$*"?e instanceof Map?Array.from(e.values()):Object.keys(e).map(i=>e[i]):e instanceof Map?e.get(r):e[r])}});var gW=m((P6r,j_e)=>{"use strict";var d4t=Qt(),p4t=Nz(),B_e=XO(),q_e=ou(),f4t=require("util"),h4t=Tt(),L_e=/(\.\d+$|\.\d+\.)/g;j_e.exports=function(e,r,n,i,s){if(e==null)return[];if(typeof e=="string"&&s!=null&&p4t(s,e))throw new d4t("refPath `"+e+"` must not be excluded in projection, got "+f4t.inspect(s));if(L_e.test(n)){let u=n.split(L_e);if(u[u.length-1]==="")throw new Error("Can't populate individual element in an array");let c="",l=e;for(let f=0;f<u.length;f+=2){let h=u[f];if(l.startsWith(h+"."))c+=l.substring(0,h.length)+u[f+1],l=l.substring(h.length+1);else if(f===u.length-1){c+=l,l="";break}else throw new Error("Could not normalize ref path, chunk "+h+" not in populated path")}let d=q_e.get(c,r,B_e),p=Array.isArray(d)?d:[d];return p=h4t.array.flatten(p),p}let o=q_e.get(e,r,B_e),a;return i!=null&&i.virtuals.hasOwnProperty(e)?a=[i.virtuals[e].applyGetters(void 0,r)]:a=Array.isArray(o)?o:[o],a}});var ZO=m((N6r,$_e)=>{"use strict";var m4t=gW(),y4t=Tt(),g4t=ot().modelSymbol;function Jp(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}Jp.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let e="$"+this.path;this.getters.push(function(){return this.$locals[e]}),this.setters.push(function(r){this.$locals[e]=r})};Jp.prototype.clone=function(){let t=new Jp(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t};Jp.prototype.get=function(t){return this.getters.push(t),this};Jp.prototype.set=function(t){return this.setters.push(t),this};Jp.prototype.applyGetters=function(t,e){y4t.hasUserDefinedProperty(this.options,["ref","refPath"])&&e.$$populatedVirtuals&&e.$$populatedVirtuals.hasOwnProperty(this.path)&&(t=e.$$populatedVirtuals[this.path]);let r=t;for(let n of this.getters)r=n.call(e,r,this,e);return r};Jp.prototype.applySetters=function(t,e){let r=t;for(let n of this.setters)r=n.call(e,r,this,e);return r};Jp.prototype._getModelNamesForPopulate=function(e){if(this.options.refPath)return m4t(this.options.refPath,e,this.path);let r=null;return typeof this.options.ref=="function"&&!this.options.ref[g4t]?r=this.options.ref.call(e,e):r=this.options.ref,r!=null&&!Array.isArray(r)?[r]:r};$_e.exports=Jp});var EW=m((F6r,K_e)=>{"use strict";K_e.exports=function(e){let r={_id:{auto:!0}};r._id[e.options.typeKey]="ObjectId",e.add(r)}});var bW=m((B6r,U_e)=>{"use strict";U_e.exports=function(e,r){let n=e.discriminatorMapping&&e.discriminatorMapping.value;if(n&&!("sparse"in r)){let i=e.options.discriminatorKey;r.partialFilterExpression=r.partialFilterExpression||{},r.partialFilterExpression[i]=n}return r}});var G_e=m((q6r,V_e)=>{"use strict";var _W=si(),E4t=oh(),b4t=bW();V_e.exports=function(e){let r=[],n=new WeakMap,i=e.constructor.indexTypes,s=new Map;return o(e),r;function o(u,c,l){if(n.has(u))return;n.set(u,!0),c=c||"";let d=Object.keys(u.paths);for(let p of d){let f=u.paths[p];if(l!=null&&l.paths[p])continue;if(f._duplicateKeyErrorMessage!=null&&(u._duplicateKeyErrorMessagesByPath=u._duplicateKeyErrorMessagesByPath||{},u._duplicateKeyErrorMessagesByPath[p]=f._duplicateKeyErrorMessage),f.$isMongooseDocumentArray||f.$isSingleNested){if(_W(f,"options.excludeIndexes")!==!0&&_W(f,"schemaOptions.excludeIndexes")!==!0&&_W(f,"schema.options.excludeIndexes")!==!0&&o(f.schema,c+p+"."),f.schema.discriminators!=null){let g=f.schema.discriminators,_=Object.keys(g);for(let S of _)o(g[S],c+p+".",f.schema)}if(f.$isMongooseDocumentArray)continue}let h=f._index||f.caster&&f.caster._index;if(h!==!1&&h!==null&&h!==void 0){let g={},_=E4t(h),S=_?h:{},w=typeof h=="string"?h:_?h.type:!1;if(w&&i.indexOf(w)!==-1)g[c+p]=w;else if(S.text)g[c+p]="text",delete S.text;else{let A=!1;h==="descending"||h==="desc"?A=!0:h==="ascending"||h==="asc"?A=!1:A=Number(h)===-1,g[c+p]=A?-1:1}delete S.type,"background"in S||(S.background=!0),u.options.autoIndex!=null&&(S._autoIndex=u.options.autoIndex);let C=S&&S.name;typeof C=="string"?s.has(C)?Object.assign(s.get(C),g):(r.push([g,S]),s.set(C,g)):(r.push([g,S]),s.set(C,g))}}n.delete(u),c?a(u,c):(u._indexes.forEach(function(p){let f=p[1];"background"in f||(f.background=!0),b4t(u,f)}),r=r.concat(u._indexes))}function a(u,c){let l=u._indexes,d=l.length;for(let p=0;p<d;++p){let f=l[p][0],h=l[p][1],g=Object.keys(f),_=g.length,S={};for(let C=0;C<_;++C){let A=g[C];S[c+A]=f[A]}let w=Object.assign({},h);if(h!=null&&h.partialFilterExpression!=null){w.partialFilterExpression={};let C=h.partialFilterExpression;for(let A of Object.keys(C))w.partialFilterExpression[c+A]=C[A]}r.push([S,w])}}}});var vW=m((L6r,H_e)=>{"use strict";H_e.exports=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e}});var W_e=m((j6r,z_e)=>{"use strict";z_e.exports=function(e){return!(!e.paths.id&&e.paths._id&&e.options.id)||e.aliases&&e.aliases.id||e.virtual("id").get(_4t),e};function _4t(){return this._id!=null?this._id.toString():null}});var Y_e=m(($6r,J_e)=>{"use strict";J_e.exports=function(e,r){let n=Object.keys(e),i=Object.keys(r);if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++){let o=n[s];if(o!==i[s]||e[o]!==r[o])return!1}return!0}});var X_e=m((K6r,Q_e)=>{"use strict";Q_e.exports=function(e,r,n,i){return i.justOne||i.count?(e[r]=Array.isArray(n)?n[0]:n,typeof e[r]!="object"&&(e[r]=i.count?n:null)):(e[r]=Array.isArray(n)?n:n==null?[]:[n],e[r]=e[r].filter(function(s){return s&&typeof s=="object"})),e[r]}});var Kv=m((U6r,Z_e)=>{"use strict";Z_e.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var ex=m((V6r,e4e)=>{"use strict";e4e.exports=v4t;function v4t(t,e){return t==null?null:typeof t=="boolean"?e:typeof t[e]=="boolean"?t[e]?e:null:e in t?t[e]:e}});var wW=m((G6r,t4e)=>{"use strict";var S4t=Kv(),Yp=ex();t4e.exports=z0;function z0(t,e,r){if(e==null)return;if(Object.keys(e).some(a=>a[0]==="$")){if(e.$push&&o(e.$push),e.$addToSet&&o(e.$addToSet),e.$set!=null){let a=Object.keys(e.$set);for(let u of a)SW(r,u,e.$set,t)}if(e.$setOnInsert!=null){let a=Object.keys(e.$setOnInsert);for(let u of a)SW(r,u,e.$setOnInsert,t)}}let s=Object.keys(e).filter(a=>a[0]!=="$");for(let a of s)SW(r,a,e,t);function o(a){for(let u of Object.keys(a)){let c=r.path(u.replace(/\.\$\./i,".").replace(/.\$$/,""));if(a[u]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps){let l=c.schema.options.timestamps,d=Yp(l,"createdAt"),p=Yp(l,"updatedAt");a[u].$each?a[u].$each.forEach(function(f){p!=null&&(f[p]=t),d!=null&&(f[d]=t),z0(t,f,c.schema)}):(p!=null&&(a[u][p]=t),d!=null&&(a[u][d]=t),z0(t,a[u],c.schema))}}}}function w4t(t,e,r){let n=e.schema.options.timestamps,i=t.length;if(!n){for(let a=0;a<i;++a)z0(r,t[a],e.schema);return}let s=Yp(n,"createdAt"),o=Yp(n,"updatedAt");for(let a=0;a<i;++a)o!=null&&(t[a][o]=r),s!=null&&(t[a][s]=r),z0(r,t[a],e.schema)}function A4t(t,e,r){let n=e.schema.options.timestamps;if(!n){z0(r,t,e.schema);return}let i=Yp(n,"createdAt"),s=Yp(n,"updatedAt");s!=null&&(t[s]=r),i!=null&&(t[i]=r),z0(r,t,e.schema)}function SW(t,e,r,n){let i=S4t(e),s=t.path(i);if(!s)return;let o=[],a=i.split(".");for(let u=a.length-1;u>0;--u){let c=t.path(a.slice(0,u).join("."));c!=null&&(c.$isMongooseDocumentArray||c.$isSingleNested)&&o.push({parentPath:e.split(".").slice(0,u).join("."),parentSchemaType:c})}if(Array.isArray(r[e])&&s.$isMongooseDocumentArray)w4t(r[e],s,n);else if(r[e]&&s.$isSingleNested)A4t(r[e],s,n);else if(o.length>0)for(let u of o){let c=u.parentPath,l=u.parentSchemaType,d=l.schema.options.timestamps,p=Yp(d,"updatedAt");if(!(!d||p==null)){if(l.$isSingleNested)r[c+"."+p]=n;else if(l.$isMongooseDocumentArray){let f=e.substring(c.length+1);if(/^\d+$/.test(f)){r[c+"."+f][p]=n;continue}let h=f.indexOf(".");f=h!==-1?f.substring(0,h):f,r[c+"."+f+"."+p]=n}}}else if(s.schema!=null&&s.schema!=t&&r[e]){let u=s.schema.options.timestamps,c=Yp(u,"createdAt"),l=Yp(u,"updatedAt");if(!u)return;l!=null&&(r[e][l]=n),c!=null&&(r[e][c]=n)}}});var AW=m((H6r,r4e)=>{"use strict";var C4t=si();r4e.exports=T4t;function T4t(t,e,r,n,i,s){let o=n,a=o,u=C4t(i,"timestamps",!0);if(!u||o==null)return n;let c=u!=null&&u.createdAt===!1,l=u!=null&&u.updatedAt===!1;if(s)return n&&n.$set&&(n=n.$set,o.$set={},a=o.$set),!l&&r&&!n[r]&&(a[r]=t),!c&&e&&!n[e]&&(a[e]=t),o;if(n=n||{},Array.isArray(o))return r==null||o.push({$set:{[r]:t}}),o;if(o.$set=o.$set||{},!l&&r&&(!n.$currentDate||!n.$currentDate[r])){let d=!1;if(r.indexOf(".")!==-1){let p=r.split(".");for(let f=1;f<p.length;++f){let h=p.slice(-f).join("."),g=p.slice(0,-f).join(".");if(n[g]!=null){n[g][h]=t,d=!0;break}else if(n.$set&&n.$set[g]){n.$set[g][h]=t,d=!0;break}}}d||(o.$set[r]=t),o.hasOwnProperty(r)&&delete o[r]}if(!c&&e){n[e]&&delete n[e],n.$set&&n.$set[e]&&delete n.$set[e];let d=!1;if(e.indexOf(".")!==-1){let p=e.split(".");for(let f=1;f<p.length;++f){let h=p.slice(-f).join("."),g=p.slice(0,-f).join(".");if(n[g]!=null){n[g][h]=t,d=!0;break}else if(n.$set&&n.$set[g]){n.$set[g][h]=t,d=!0;break}}}d||(o.$setOnInsert=o.$setOnInsert||{},o.$setOnInsert[e]=t)}return Object.keys(o.$set).length===0&&delete o.$set,o}});var i4e=m((z6r,n4e)=>{"use strict";n4e.exports=function(e,r,n,i,s){let o=r!=null&&r.updatedAt===!1,a=r!=null&&r.createdAt===!1,u=n!=null?n():e.ownerDocument().constructor.base.now();if(!a&&(e.isNew||e.$isSubdocument)&&i&&!e.$__getValue(i)&&e.$__isSelected(i)&&e.$set(i,u,void 0,{overwriteImmutable:!0}),!o&&s&&(e.isNew||e.$isModified())){let c=u;e.isNew&&i!=null&&(c=e.$__getValue(i)),e.$set(s,c)}}});var u4e=m((W6r,a4e)=>{"use strict";var O4t=wW(),x4t=AW(),I4t=si(),s4e=ex(),R4t=i4e(),D4t=j0(),o4e=new Set(["replaceOne","findOneAndReplace"]);a4e.exports=function(e,r){let n=e.childSchemas.find(i);function i(d){return!!d.schema.options.timestamps}if(!r&&!n)return;let s=s4e(r,"createdAt"),o=s4e(r,"updatedAt"),a=r!=null&&r.hasOwnProperty("currentTime")?r.currentTime:null,u={};if(e.$timestamps={createdAt:s,updatedAt:o},s&&!e.paths[s]){let d=e.base!=null?e.base.get("timestamps.createdAt.immutable"):null,p=d??!0;u[s]={[e.options.typeKey||"type"]:Date,immutable:p}}o&&!e.paths[o]&&(u[o]=Date),e.add(u),e.pre("save",function(p){let f=I4t(this,"$__.saveOptions.timestamps");if(f===!1)return p();R4t(this,f,a,s,o),p()}),e.methods.initializeTimestamps=function(){let d=a!=null?a():this.constructor.base.now();if(s&&!this.get(s)&&this.$set(s,d),o&&!this.get(o)&&this.$set(o,d),this.$isSubdocument)return this;let p=this.$getAllSubdocs();for(let f of p)f.initializeTimestamps&&f.initializeTimestamps();return this},l[D4t.builtInMiddleware]=!0;let c={query:!0,model:!1};e.pre("findOneAndReplace",c,l),e.pre("findOneAndUpdate",c,l),e.pre("replaceOne",c,l),e.pre("update",c,l),e.pre("updateOne",c,l),e.pre("updateMany",c,l);function l(d){let p=a!=null?a():this.model.base.now();o4e.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),x4t(p,s,o,this.getUpdate(),this._mongooseOptions,o4e.has(this.op)),O4t(p,this.getUpdate(),this.model.schema),d()}}});var l4e=m((J6r,c4e)=>{"use strict";var k4t=Qt(),M4t=require("util");c4e.exports=P4t;function P4t(t,e){if(typeof t!="string"&&typeof t!="function")throw new k4t('Invalid ref at path "'+e+'". Got '+M4t.inspect(t,{depth:0}))}});var tx=m(mE=>{"use strict";var d4e=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);mE.queryOperations=d4e;var N4t=d4e.concat(["validate"]);mE.queryMiddlewareFunctions=N4t;var F4t=["aggregate"];mE.aggregateMiddlewareFunctions=F4t;var B4t=["bulkWrite","createCollection","insertMany"];mE.modelMiddlewareFunctions=B4t;var q4t=["validate","save","remove","updateOne","deleteOne","init"];mE.documentMiddlewareFunctions=q4t});var rx=m((Q6r,p4e)=>{"use strict";var L4t=j0(),j4t=EO();p4e.exports=Uv;Uv.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];var $4t=new Set(Uv.middlewareFunctions.flatMap(t=>[t,`$__${t}`]));function Uv(t,e,r){r=r||{};let n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},i=r.decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(let c of Object.keys(e.paths)){let l=e.paths[c],d=null;if(l.$isSingleNested)d=l.caster;else if(l.$isMongooseDocumentArray)d=l.Constructor;else continue;if(!d.$appliedHooks&&(Uv(d,l.schema,{...r,isChildSchema:!0}),d.discriminators!=null)){let p=Object.keys(d.discriminators);for(let f of p)Uv(d.discriminators[f],d.discriminators[f].schema,r)}}let s=e.s.hooks.filter(c=>c.name==="updateOne"||c.name==="deleteOne"?!!c.document:c.name==="remove"||c.name==="init"?c.document==null||!!c.document:c.query!=null||c.document!=null?c.document!==!1:!0).filter(c=>e.methods[c.name]?!c.fn[L4t.builtInMiddleware]:!0);t._middleware=s,i.$__originalValidate=i.$__originalValidate||i.$__validate;let o=r&&r.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let c of o){let l=c==="validate"?"$__originalValidate":`$__${c}`,d=s.createWrapper(c,i[l],null,n);i[`$__${c}`]=d}i.$__init=s.createWrapperSync("init",i.$__init,null,n);let a=Object.keys(e.methods),u=Object.assign({},n,{checkForPromise:!0});for(let c of a){if($4t.has(c)||!s.hasHooks(c))continue;let l=i[c];i[c]=function(){let d=Array.prototype.slice.call(arguments),p=d.slice(-1).pop(),f=typeof p=="function"?d.slice(0,d.length-1):d;return j4t(p,h=>this[`$__${c}`].apply(this,f.concat([h])),t.events)},i[`$__${c}`]=s.createWrapper(c,l,null,u)}}});var h4e=m((X6r,f4e)=>{"use strict";f4e.exports=ca().Double});var nx=m((Z6r,b4e)=>{"use strict";var K4t=$0(),U4t=Qt(),m4e=Vn(),V4t=Tt().deepEqual,G4t=Fo(),H4t=kO(),y4e=require("util"),z4t=F0(),CW=js(),W4t=OO(),g4e=ot().populateModelSymbol;var Rl=class extends Map{constructor(e,r,n,i,s){G4t(e)==="Object"&&(e=Object.keys(e).reduce((o,a)=>o.concat([[a,e[a]]]),[])),super(e),this.$__parent=n!=null&&n.$__!=null?n:null,this.$__parent?.$isSingleNested&&this.$__parent.$basePath?(this.$__path=this.$__parent.$basePath+"."+r,this.$__pathRelativeToParent=r):s?.path?(this.$__path=s.path,this.$__pathRelativeToParent=null):(this.$__path=r,this.$__pathRelativeToParent=null),this.$__schemaType=i??new K4t(r),this.$__runDeferred()}$init(e,r){E4e(e),super.set(e,r),r!=null&&r.$isSingleNested&&(r.$basePath=this.$__path+"."+e,this.$__pathRelativeToParent!=null?r.$pathRelativeToParent=this.$__pathRelativeToParent+"."+e:r.$pathRelativeToParent=this.$__path+"."+e)}$__set(e,r){super.set(e,r)}get(e,r){return CW(e,"ObjectId")&&(e=e.toString()),r=r||{},r.getters===!1?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,r){if(CW(e,"ObjectId")&&(e=e.toString()),E4e(e),r=H4t(r),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:e,value:r});return}let n,i=this.$__parent,s=i!=null&&i.$__&&i.$__.populated?i.$populated(a.call(this),!0)||i.$populated(this.$__path,!0):null,o=this.get(e);if(s!=null){if(this.$__schemaType.$isSingleNested)throw new U4t(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);Array.isArray(r)&&this.$__schemaType.$isMongooseArray?r=r.map(u=>(u.$__==null&&(u=new s.options[g4e](u)),u.$__.wasPopulated={value:u._doc._id},u)):r!=null&&(r.$__==null&&(r=new s.options[g4e](r)),r.$__.wasPopulated={value:r._doc._id})}else try{let u=null;(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap)&&(u={path:a.call(this)},this.$__schemaType.$isSingleNested&&(u.pathRelativeToParent=this.$__pathRelativeToParent!=null?this.$__pathRelativeToParent+"."+e:this.$__path+"."+e)),r=this.$__schemaType.applySetters(r,this.$__parent,!1,this.get(e),u)}catch(u){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(a.call(this),u);return}throw u}if(super.set(e,r),r!=null&&r.$isSingleNested&&(this.$__pathRelativeToParent!=null?r.$pathRelativeToParent=this.$__pathRelativeToParent+"."+e:r.$pathRelativeToParent=this.$__path+"."+e),i!=null&&i.$__!=null&&!V4t(r,o)){let u;this.$__pathRelativeToParent!=null?u=this.$__pathRelativeToParent+"."+e:u=a.call(this),i.markModified(u),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&W4t(i,u)}function a(){return n||(n=this.$__path+"."+e,n)}}clear(){super.clear();let e=this.$__parent;e?.markModified(this.$__path)}delete(e){return CW(e,"ObjectId")&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(e&&e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=m4e(this.get(i),e);return r}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(e){if(typeof(e&&e.flattenMaps)!="boolean"||e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=m4e(this.get(i),e);return r}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(let e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}};y4e.inspect.custom&&Object.defineProperty(Rl.prototype,y4e.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:Rl.prototype.inspect});Object.defineProperty(Rl.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Rl.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Rl.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Rl.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Rl.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(Rl.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function E4e(t){let e=typeof t;if(e!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${e}`);if(t.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${t}"`);if(t.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${t}"`);if(z4t.has(t))throw new Error(`Mongoose maps do not support reserved key name "${t}"`)}b4e.exports=Rl});var v4e=m((eEr,_4e)=>{"use strict";_4e.exports=ca().UUID});var yE=m(cc=>{"use strict";cc.Array=Vz();cc.Buffer=cE();cc.Document=cc.Embedded=fE();cc.DocumentArray=V0();cc.Double=h4e();cc.Decimal128=ZT();cc.ObjectId=Vp();cc.Map=nx();cc.Subdocument=PO();cc.UUID=v4e()});var w4e=m((rEr,S4e)=>{"use strict";var J4t=Ca(),gE=class extends J4t{},TW=su();Object.defineProperty(gE.prototype,"enum",TW);Object.defineProperty(gE.prototype,"of",TW);Object.defineProperty(gE.prototype,"castNonArrays",TW);S4e.exports=gE});var C4e=m((nEr,A4e)=>{"use strict";A4e.exports=OW;function OW(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(t.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(t.length===1&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};let e=OW(t[0]);for(let r=1;r<t.length;++r){let n=OW(t[r]);n.min<e.min&&(e.min=n.min),n.max>e.max&&(e.max=n.max),e.containsNonArrayItem=e.containsNonArrayItem||n.containsNonArrayItem}return e.min=e.min+1,e.max=e.max+1,e}});var Vv=m((iEr,O4e)=>{"use strict";var T4e=require("assert");O4e.exports=function(e){if(e==null)return e;if(e==="")return null;if((typeof e=="string"||typeof e=="boolean")&&(e=Number(e)),T4e.ok(!isNaN(e)),e instanceof Number)return e.valueOf();if(typeof e=="number")return e;if(!Array.isArray(e)&&typeof e.valueOf=="function")return Number(e.valueOf());if(e.toString&&!Array.isArray(e)&&e.toString()==Number(e))return Number(e);T4e.ok(!1)}});var xW=m((sEr,x4e)=>{"use strict";x4e.exports=function(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))for(let r=e.length-1;r>=0;--r)e[r]===void 0&&e.splice(r,1);for(let r of Object.keys(e))e[r]===void 0&&delete e[r];return e}});var D4e=m((oEr,R4e)=>{"use strict";var EE=uo(),I4e=ah(),ix=Vv(),Y4t=xW(),Q4t=new Set(["$and","$or"]),X4t=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),Z4t=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),e3t=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),t3t=new Set(["$arrayElemAt","$first","$last"]),r3t=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),n3t=new Set(["$not"]);R4e.exports=function(e,r,n){if(typeof e=="boolean")return e;if(typeof e!="object"||e===null)throw new Error("`$expr` must be an object or boolean literal");return lc(e,r,n)};function lc(t,e,r){if(Gv(t)||t===null)return t;t.$cond!=null?Array.isArray(t.$cond)?t.$cond=t.$cond.map(i=>lc(i,e,r)):(t.$cond.if=lc(t.$cond.if,e,r),t.$cond.then=lc(t.$cond.then,e,r),t.$cond.else=lc(t.$cond.else,e,r)):t.$ifNull!=null?t.$ifNull.map(i=>lc(i,e,r)):t.$switch!=null&&(Array.isArray(t.$switch.branches)&&(t.$switch.branches=t.$switch.branches.map(i=>lc(i,e,r))),"default"in t.$switch&&(t.$switch.default=lc(t.$switch.default,e,r)));let n=Object.keys(t);for(let i of n)Q4t.has(i)?t[i]=t[i].map(s=>lc(s,e,r)):X4t.has(i)?t[i]=o3t(t[i],e,r):Z4t.has(i)?t[i]=s3t(t[i],e,r):e3t.has(i)?t[i]=IW(t[i],e,r):n3t.has(i)&&(t[i]=lc(t[i],e,r));if(t.$in&&(t.$in=i3t(t.$in,e,r)),t.$size&&(t.$size=IW(t.$size,e,r)),t.$round){let i=t.$round;if(!Array.isArray(i)||i.length<1||i.length>2)throw new EE("Array",i,"$round");t.$round=i.map(s=>IW(s,e,r))}return Y4t(t),t}function IW(t){if(!sx(t))return t;try{return ix(t)}catch{throw new EE("Number",t)}}function i3t(t,e,r){let n=t[1];if(!Gv(n))return t;let i=t[0],s=e.path(n.slice(1));if(s===null){if(r===!1)return t;if(r==="throw")throw new I4e("$in");return}if(!s.$isMongooseArray)throw new Error("Path must be an array for $in");return[s.$isMongooseDocumentArray?s.$embeddedSchemaType.cast(i):s.caster.cast(i),n]}function s3t(t){if(!Array.isArray(t)){if(!sx(t))return t;try{return ix(t)}catch{throw new EE("Number",t)}}return t.map(e=>{if(!sx(e))return e;try{return ix(e)}catch{throw new EE("Number",e)}})}function o3t(t,e,r){if(!Array.isArray(t)||t.length!==2)throw new Error("Comparison operator must be an array of length 2");t[0]=lc(t[0],e,r);let n=t[0];if(sx(t[1])){let i=null,s=null,o=null;if(Gv(n))i=n.slice(1),s=e.path(i);else if(typeof n=="object"&&n!=null)for(let u of Object.keys(n))r3t.has(u)&&Gv(n[u])?(i=n[u].slice(1)+"."+u,o=ix):t3t.has(u)&&Gv(n[u])&&(i=n[u].slice(1)+"."+u,s=e.path(n[u].slice(1)),s!=null&&(s.$isMongooseDocumentArray?s=s.$embeddedSchemaType:s.$isMongooseArray&&(s=s.caster)));let a=typeof t[1]=="object"&&t[1]!=null&&t[1].$literal!=null;if(s!=null)a?t[1]={$literal:s.cast(t[1].$literal)}:t[1]=s.cast(t[1]);else if(o!=null)if(a)try{t[1]={$literal:o(t[1].$literal)}}catch{throw new EE(o.name.replace(/^cast/,""),t[1],i+".$literal")}else try{t[1]=o(t[1])}catch{throw new EE(o.name.replace(/^cast/,""),t[1],i)}else{if(i!=null&&r===!0)return;if(i!=null&&r==="throw")throw new I4e(i)}}else t[1]=lc(t[1]);return t}function Gv(t){return typeof t=="string"&&t[0]==="$"}function sx(t){return typeof t=="string"&&t[0]==="$"?!1:typeof t=="object"&&t!==null&&Object.keys(t).find(e=>e[0]==="$")?t.$literal!=null:!0}});var ox=m((aEr,k4e)=>{"use strict";var a3t=uo();k4e.exports=function(e,r){if(e==null)return e;if(e._id&&typeof e._id=="string")return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new a3t("string",e,r)}});var F4e=m((uEr,N4e)=>{"use strict";var u3t=uo(),M4e=yO(),P4e=ox();N4e.exports=function(e,r){if(e==null||typeof e!="object")throw new u3t("$text",e,r);return e.$search!=null&&(e.$search=P4e(e.$search,r+".$search")),e.$language!=null&&(e.$language=P4e(e.$language,r+".$language")),e.$caseSensitive!=null&&(e.$caseSensitive=M4e(e.$caseSensitive,r+".$castSensitive")),e.$diacriticSensitive!=null&&(e.$diacriticSensitive=M4e(e.$diacriticSensitive,r+".$diacriticSensitive")),e}});var Hv=m((cEr,B4e)=>{"use strict";var c3t=new Set(["$ref","$id","$db"]);B4e.exports=function(e){return e[0]==="$"&&!c3t.has(e)}});var W0=m((lEr,K4e)=>{"use strict";var q4e=uo(),RW=ah(),l3t=zv(),d3t=D4e(),p3t=ox(),f3t=F4e(),h3t=si(),L4e=DO(),j4e=Hv(),m3t=require("util"),kW=oh(),DW=xv(),$4e=Tt(),y3t=["Polygon","MultiPolygon"];K4e.exports=function t(e,r,n,i){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",m3t.inspect(r));if(r==null)return r;e!=null&&e.discriminators!=null&&r[e.options.discriminatorKey]!=null&&(e=L4e(e,r[e.options.discriminatorKey])||e);let s=Object.keys(r),o=s.length,a,u,c,l,d,p,f;for(n=n||{};o--;)if(d=s[o],f=r[d],d==="$or"||d==="$nor"||d==="$and"){if(!Array.isArray(f))throw new q4e("Array",f,d);for(let h=f.length-1;h>=0;h--){if(f[h]==null||typeof f[h]!="object")throw new q4e("Object",f[h],d+"."+h);let g=Object.keys(f[h]).length,_=f[h][e.options.discriminatorKey];if(_==null)f[h]=t(e,f[h],n,i);else{let S=L4e(i.schema,_);f[h]=t(S||e,f[h],n,i)}Object.keys(f[h]).length===0&&g!==0&&f.splice(h,1)}f.length===0&&delete r[d]}else if(d==="$where"){if(p=typeof f,p!=="string"&&p!=="function")throw new Error("Must have a string or function for $where");p==="function"&&(r[d]=f.toString());continue}else if(d==="$expr"){f=d3t(f,e);continue}else if(d==="$elemMatch")f=t(e,f,n,i);else if(d==="$text")f=f3t(f,d);else if(d==="$comment"&&!e.paths.hasOwnProperty("$comment"))f=p3t(f,d),r[d]=f;else{if(!e)continue;if(c=e.path(d),!c){let h=d.split("."),g=h.length;for(;g--;){let _=h.slice(0,g).join("."),S=h.slice(g).join("."),w=e.path(_),C=w&&w.schema&&w.schema.options&&w.schema.options.discriminatorKey;if(w!=null&&(w.schema&&w.schema.discriminators)!=null&&C!=null&&S!==C){let A=h3t(r,_+"."+C),O=w.schema.discriminators;typeof A=="string"&&O[A]!=null?c=O[A].path(S):A!=null&&Object.keys(A).length===1&&Array.isArray(A.$in)&&A.$in.length===1&&typeof A.$in[0]=="string"&&O[A.$in[0]]!=null&&(c=O[A.$in[0]].path(S))}}}if(c){if(f==null)continue;if($4e.isPOJO(f))if(u=Object.keys(f).some(j4e),!u)r[d]=c.castForQuery(null,f,i);else{let h=Object.keys(f),g,_=h.length;for(;_--;)if(g=h[_],l=f[g],g==="$elemMatch")l&&c!=null&&c.schema!=null?t(c.schema,l,n,i):l&&c!=null&&c.$isMongooseArray&&($4e.isPOJO(l)&&l.$not!=null?t(e,l,n,i):f[g]=c.castForQuery(g,l,i));else if(g==="$not"){if(l&&c){if(a=Object.keys(l),a.length&&j4e(a[0]))for(let S in l)l[S]=c.castForQuery(S,l[S],i);else f[g]=c.castForQuery(g,l,i);continue}}else f[g]=c.castForQuery(g,l,i)}else if(Array.isArray(f)&&["Buffer","Array"].indexOf(c.instance)===-1&&!n.sanitizeFilter){let h=[],g=f;for(let _ of g)h.push(c.castForQuery(null,_,i));r[d]={$in:h}}else r[d]=c.castForQuery(null,f,i)}else{let h=d.split("."),g=h.length,_,S,w;for(;g--&&(_=h.slice(0,g).join("."),c=e.path(_),!c););if(c){if(c.caster&&c.caster.schema){w={},S=h.slice(g).join("."),w[S]=f;let O=t(c.caster.schema,w,n,i)[S];O===void 0?delete r[d]:r[d]=O}else r[d]=f;continue}if(kW(f)){let O="";if(f.$near?O="$near":f.$nearSphere?O="$nearSphere":f.$within?O="$within":f.$geoIntersects?O="$geoIntersects":f.$geoWithin&&(O="$geoWithin"),O){let x=new l3t.Number("__QueryCasting__"),R=f[O];if(f.$maxDistance!=null&&(f.$maxDistance=x.castForQuery(null,f.$maxDistance,i)),f.$minDistance!=null&&(f.$minDistance=x.castForQuery(null,f.$minDistance,i)),O==="$within"){let M=R.$center||R.$centerSphere||R.$box||R.$polygon;if(!M)throw new Error("Bad $within parameter: "+JSON.stringify(f));R=M}else if(O==="$near"&&typeof R.type=="string"&&Array.isArray(R.coordinates))R=R.coordinates;else if((O==="$near"||O==="$nearSphere"||O==="$geoIntersects")&&R.$geometry&&typeof R.$geometry.type=="string"&&Array.isArray(R.$geometry.coordinates))R.$maxDistance!=null&&(R.$maxDistance=x.castForQuery(null,R.$maxDistance,i)),R.$minDistance!=null&&(R.$minDistance=x.castForQuery(null,R.$minDistance,i)),DW(R.$geometry)&&(R.$geometry=R.$geometry.toObject({transform:!1,virtuals:!1})),R=R.$geometry.coordinates;else if(O==="$geoWithin")if(R.$geometry){DW(R.$geometry)&&(R.$geometry=R.$geometry.toObject({virtuals:!1}));let M=R.$geometry.type;if(y3t.indexOf(M)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+M+'", must be "Polygon" or "MultiPolygon"');R=R.$geometry.coordinates}else R=R.$box||R.$polygon||R.$center||R.$centerSphere,DW(R)&&(R=R.toObject({virtuals:!1}));MW(R,x,i);continue}}if(e.nested[d])continue;let C="strict"in n?n.strict:e.options.strict,A=g3t(n,e._userProvidedOptions,e.options,i);if(n.upsert&&C)throw C==="throw"?new RW(d):new RW(d,'Path "'+d+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(A==="throw")throw new RW(d,'Path "'+d+`" is not in schema and strictQuery is 'throw'.`);A&&delete r[d]}}return r};function MW(t,e,r){if(Array.isArray(t))t.forEach(function(n,i){if(Array.isArray(n)||kW(n))return MW(n,e,r);t[i]=e.castForQuery(null,n,r)});else{let n=Object.keys(t),i=n.length;for(;i--;){let s=n[i],o=t[s];Array.isArray(o)||kW(o)?(MW(o,e,r),t[s]=o):t[s]=e.castForQuery({val:o,context:r})}}}function g3t(t,e,r,n){if("strictQuery"in t)return t.strictQuery;if("strictQuery"in e)return e.strictQuery;let i=n&&n.mongooseCollection&&n.mongooseCollection.conn&&n.mongooseCollection.conn.base&&n.mongooseCollection.conn.base.options;return i&&"strictQuery"in i?i.strictQuery:r.strictQuery}});var V4e=m((dEr,U4e)=>{"use strict";var E3t=Ca(),J0=class extends E3t{},ax=su();Object.defineProperty(J0.prototype,"min",ax);Object.defineProperty(J0.prototype,"max",ax);Object.defineProperty(J0.prototype,"enum",ax);Object.defineProperty(J0.prototype,"populate",ax);U4e.exports=J0});var lo=m((pEr,G4e)=>{"use strict";G4e.exports=function(e,r,n,i){return n?i?{bsonType:r}:{bsonType:[r,"null"]}:i?{type:e}:{type:[e,"null"]}}});var Wv=m((fEr,z4e)=>{"use strict";var b3t=uo();function _3t(t){let e=this;return Array.isArray(t)?t.map(function(r){return H4e(e.path,r)}):Buffer.isBuffer(t)?t:H4e(e.path,t)}function H4e(t,e){let r=Number(e);if(isNaN(r))throw new b3t("number",e,t);return r}z4e.exports=_3t});var FW=m((hEr,W4e)=>{"use strict";var lx=wa(),v3t=V4e(),Qp=vi(),S3t=Vv(),w3t=lo(),ux=Wv(),PW=Tt(),NW=Qp.CastError;function Sn(t,e){Qp.call(this,t,e,"Number")}Sn.get=Qp.get;Sn.set=Qp.set;Sn.setters=[];Sn._cast=S3t;Sn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Sn._defaultCaster=t=>{if(typeof t!="number")throw new Error;return t};Sn.schemaName="Number";Sn.defaultOptions={};Sn.prototype=Object.create(Qp.prototype);Sn.prototype.constructor=Sn;Sn.prototype.OptionsConstructor=v3t;Sn._checkRequired=t=>typeof t=="number"||t instanceof Number;Sn.checkRequired=Qp.checkRequired;Sn.prototype.checkRequired=function(e,r){return typeof e=="object"&&Qp._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Sn.checkRequired())(e)};Sn.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t!=null){let r=e||lx.messages.Number.min;r=r.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(n){return n==null||n>=t},message:r,type:"min",min:t})}return this};Sn.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t!=null){let r=e||lx.messages.Number.max;r=r.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(n){return n==null||n<=t},message:r,type:"max",max:t})}return this};Sn.prototype.enum=function(t,e){return this.enumValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.enumValidator},this)),Array.isArray(t)||(PW.isPOJO(t)&&t.values!=null?(e=t.message,t=t.values):typeof t=="number"&&(t=Array.prototype.slice.call(arguments),e=null),PW.isPOJO(t)&&(t=Object.values(t)),e=e||lx.messages.Number.enum),e=e??lx.messages.Number.enum,this.enumValidator=r=>r==null||t.indexOf(r)!==-1,this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:t}),this};Sn.prototype.cast=function(t,e,r,n,i){if(typeof t!="number"&&Qp._isRef(this,t,e,r)&&(t==null||PW.isNonBuiltinObject(t)))return this._castRef(t,e,r,i);let s=t&&typeof t._id<"u"?t._id:t,o;typeof this._castFunction=="function"?o=this._castFunction:typeof this.constructor.cast=="function"?o=this.constructor.cast():o=Sn.cast();try{return o(s)}catch(a){throw new NW("Number",s,this.path,a,this)}};function cx(t){return this.cast(t)}function A3t(t){let e=this;return Array.isArray(t)?t.map(function(r){return e.cast(r)}):[this.cast(t)]}var C3t={...Qp.prototype.$conditionalHandlers,$bitsAllClear:ux,$bitsAnyClear:ux,$bitsAllSet:ux,$bitsAnySet:ux,$gt:cx,$gte:cx,$lt:cx,$lte:cx,$mod:A3t};Object.defineProperty(Sn.prototype,"$conditionalHandlers",{enumerable:!1,value:C3t});Sn.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new NW("number",e,this.path,null,this);return n.call(this,e,r)}try{e=this.applySetters(e,r)}catch(i){throw i instanceof NW&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}return e};Sn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return w3t("number","number",e?.useBsonType,r)};W4e.exports=Sn});var Jv=m(BW=>{"use strict";var T3t=FW();BW.castToNumber=J4e;BW.castArraysOfNumbers=Y4e;function J4e(t){return T3t.cast()(t)}function Y4e(t,e){t.forEach(function(r,n){Array.isArray(r)?Y4e(r,e):t[n]=J4e.call(e,r)})}});var jW=m(dx=>{"use strict";var Q4e=Jv().castArraysOfNumbers,Yv=Jv().castToNumber;dx.cast$geoIntersects=I3t;dx.cast$near=O3t;dx.cast$within=x3t;function O3t(t){let e=px();if(Array.isArray(t))return Q4e(t,this),t;if(LW(this,t),t&&t.$geometry)return qW(t,this);if(!Array.isArray(t))throw new TypeError("$near must be either an array or an object with a $geometry property");return e.prototype.castForQuery.call(this,null,t)}function qW(t,e){switch(t.$geometry.type){case"Polygon":case"LineString":case"Point":Q4e(t.$geometry.coordinates,e);break;default:break}return LW(e,t),t}function x3t(t){if(LW(this,t),t.$box||t.$polygon){let e=t.$box?"$box":"$polygon";t[e].forEach(r=>{if(!Array.isArray(r)){let n="Invalid $within $box argument. Expected an array, received "+r;throw new TypeError(n)}r.forEach((n,i)=>{r[i]=Yv.call(this,n)})})}else if(t.$center||t.$centerSphere){let e=t.$center?"$center":"$centerSphere";t[e].forEach((r,n)=>{Array.isArray(r)?r.forEach((i,s)=>{r[s]=Yv.call(this,i)}):t[e][n]=Yv.call(this,r)})}else t.$geometry&&qW(t,this);return t}function I3t(t){if(t.$geometry)return qW(t,this),t}function LW(t,e){e.$maxDistance&&(e.$maxDistance=Yv.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=Yv.call(t,e.$minDistance))}});var px=m((gEr,t3e)=>{"use strict";var R3t=gO(),D3t=Az(),Z4e=Qt(),k3t=w4e(),dc=vi(),hx=dc.CastError,mx=$0(),M3t=yW(),X4e=ZO(),P3t=C4e(),$W=W0(),N3t=Vn(),F3t=Fo(),B3t=Hv(),yx=require("util"),ph=Tt(),q3t=Jv().castToNumber,L3t=lo(),KW=jW(),j3t=uc(),Qv,fx,e3e=Symbol("mongoose#isNestedArray"),$3t=Object.freeze({});function br(t,e,r,n){fx||(fx=yE().Embedded);let i="type";if(n&&n.typeKey&&(i=n.typeKey),this.schemaOptions=n,e){let a={};ph.isPOJO(e)&&(e[i]?(a=N3t(e),delete a[i],e=e[i]):e=mx),r!=null&&r.ref!=null&&a.ref==null&&(a.ref=r.ref),e===Object&&(e=mx);let u=typeof e=="string"?e:ph.getFunctionName(e),c=zv(),l=c.hasOwnProperty(u)?c[u]:e;if(this.casterConstructor=l,this.casterConstructor instanceof br&&(this.casterConstructor[e3e]=!0),typeof l=="function"&&!l.$isArraySubdocument&&!l.$isSchemaMap){let d=this.caster instanceof fx?null:t;this.caster=new l(d,a)}else this.caster=l,this.caster instanceof fx||(this.caster.path=t);this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,dc.call(this,t,r,"Array");let s,o;if(this.defaultValue!=null&&(s=this.defaultValue,o=typeof s=="function"),!("defaultValue"in this)||this.defaultValue!=null){let a=function(){return o?s.call(this):s!=null?[].concat(s):[]};a.$runBeforeSetters=!o,this.default(a)}}br.schemaName="Array";br.options={castNonArrays:!0};br.defaultOptions={};br.set=dc.set;br.setters=[];br.get=dc.get;br.prototype=Object.create(dc.prototype);br.prototype.constructor=br;br.prototype.OptionsConstructor=k3t;br._checkRequired=dc.prototype.checkRequired;br.checkRequired=dc.checkRequired;br.prototype.virtuals=null;br.prototype.checkRequired=function(e,r){return typeof e=="object"&&dc._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():br.checkRequired())(e)};br.prototype.enum=function(){let t=this;for(;;){let r=t&&t.caster&&t.caster.instance;if(r==="Array"){t=t.caster;continue}if(r!=="String"&&r!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+r);break}let e=arguments;return!Array.isArray(arguments)&&ph.isObject(arguments)&&(e=ph.object.vals(e)),t.caster.enum.apply(t.caster,e),this};br.prototype.applyGetters=function(t,e){return e!=null&&e.$__!=null&&e.$populated(this.path)?t:dc.prototype.applyGetters.call(this,t,e)};br.prototype._applySetters=function(t,e,r,n){if(this.casterConstructor.$isMongooseArray&&br.options.castNonArrays&&!this[e3e]){let i=0,s=this;for(;s!=null&&s.$isMongooseArray&&!s.$isMongooseDocumentArray;)++i,s=s.casterConstructor;if(t!=null&&t.length!==0){let o=P3t(t);if(o.min===o.max&&o.max<i&&o.containsNonArrayItem)for(let a=o.max;a<i;++a)t=[t]}}return dc.prototype._applySetters.call(this,t,e,r,n)};br.prototype.cast=function(t,e,r,n,i){Qv||(Qv=yE().Array);let s,o;if(Array.isArray(t)){if(!t.length&&e){let f=e.schema.indexedPaths(),h=this.path;for(s=0,o=f.length;s<o;++s){let _=f[s][0][h];if(_==="2dsphere"||_==="2d")return}let g=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(g!=null){for(s=0,o=f.length;s<o;++s)if(f[s][0][g]==="2dsphere")return}}i=i||$3t;let c=ph.isMongooseArray(t)?t.__array:t,l=i.path||this.path;if(i.arrayPathIndex!=null&&(l+="."+i.arrayPathIndex),t=Qv(c,l,e,this),c=t.__array,r&&e!=null&&e.$__!=null&&e.$populated(this.path))return t;let d=this.caster,p=d.$isMongooseArray;if(d&&this.casterConstructor!==mx)try{let f=c.length;for(s=0;s<f;s++){let h={};p&&(i.arrayPath!=null||d._arrayParentPath!=null)&&(h.arrayPathIndex=s),i.hydratedPopulatedDocs&&(h.hydratedPopulatedDocs=i.hydratedPopulatedDocs),c[s]=d.applySetters(c[s],e,r,void 0,h)}}catch(f){throw new hx("["+f.kind+"]",yx.inspect(t),this.path+"."+s,f,this)}return t}let a=this.options.castNonArrays!=null?this.options.castNonArrays:br.options.castNonArrays;if(r||a)return e&&r&&e.markModified(this.path),this.cast([t],e,r);throw new hx("Array",yx.inspect(t),this.path,null,this)};br.prototype._castForPopulate=function(e,r){if(Qv||(Qv=yE().Array),Array.isArray(e)){let n,i=e.__array?e.__array:e,s=i.length,o=this.caster;if(o&&this.casterConstructor!==mx)try{for(n=0;n<s;n++){let a={};o.$isMongooseArray&&o._arrayParentPath!=null&&(a.arrayPathIndex=n),i[n]=o.cast(i[n],r,!1,void 0,a)}}catch(a){throw new hx("["+a.kind+"]",yx.inspect(e),this.path+"."+n,a,this)}return e}throw new hx("Array",yx.inspect(e),this.path,null,this)};br.prototype.$toObject=br.prototype.toObject;br.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)if(e=e.casterConstructor,e==null||typeof e=="function")throw new Z4e("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return e.discriminator(...t)};br.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.caster,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e};br.prototype._castForQuery=function(t,e){let r=this.casterConstructor;if(t&&r.discriminators&&r.schema&&r.schema.options&&r.schema.options.discriminatorKey)if(typeof t[r.schema.options.discriminatorKey]=="string"&&r.discriminators[t[r.schema.options.discriminatorKey]])r=r.discriminators[t[r.schema.options.discriminatorKey]];else{let u=j3t(r.discriminators,t[r.schema.options.discriminatorKey]);u&&(r=u)}let n=this.casterConstructor.prototype,i=n&&n.castForQuery,s=n&&n.cast,o=r.castForQuery,a=this.caster;return Array.isArray(t)?(this.setters.reverse().forEach(u=>{t=u.call(this,t,this)}),t=t.map(function(u){return ph.isObject(u)&&u.$elemMatch?u:i?(u=i.call(a,null,u,e),u):s?(u=s.call(a,u),u):o?(u=o.call(a,null,u,e),u):(u!=null&&(u=new r(u)),u)})):i?t=i.call(a,null,t,e):s?t=s.call(a,t):o?t=o.call(a,null,t,e):t!=null&&(t=new r(t)),t};br.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Array.");return n.call(this,e,r)}else return this._castForQuery(e,r)};br.prototype.virtual=function(e,r){if(e instanceof X4e||F3t(e)==="VirtualType")return this.virtual(e.path,e.options);if(r=new M3t(r),ph.hasUserDefinedProperty(r,["ref","refPath"]))throw new Z4e("Cannot set populate virtual as a property of an array");let n=new X4e(r,e);return this.virtuals===null&&(this.virtuals={}),this.virtuals[e]=n,n};function K3t(t,e){return Array.isArray(t)||(t=[t]),t=t.map(r=>{if(!ph.isObject(r))return r;if(r.$elemMatch!=null)return{$elemMatch:$W(this.casterConstructor.schema,r.$elemMatch,null,this&&this.$$context)};let n={};return n[this.path]=r,$W(this.casterConstructor.schema,n,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,t,e)}function U3t(t,e){let r=Object.keys(t),n=r.length;for(let i=0;i<n;++i){let s=r[i],o=t[s];B3t(s)&&o!=null&&(t[s]=this.castForQuery(s,o,e))}return t}var pn=br.prototype.$conditionalHandlers={};pn.$all=K3t;pn.$options=String;pn.$elemMatch=U3t;pn.$geoIntersects=KW.cast$geoIntersects;pn.$or=UW("$or");pn.$and=UW("$and");pn.$nor=UW("$nor");function UW(t){return function(r,n){if(!Array.isArray(r))throw new TypeError("conditional "+t+" requires an array");let i=[];for(let s of r)i.push($W(this.casterConstructor.schema??n.schema,s,null,this&&this.$$context));return i}}pn.$near=pn.$nearSphere=KW.cast$near;pn.$within=pn.$geoWithin=KW.cast$within;pn.$size=pn.$minDistance=pn.$maxDistance=q3t;pn.$exists=R3t;pn.$type=D3t;pn.$eq=pn.$gt=pn.$gte=pn.$lt=pn.$lte=pn.$not=pn.$regex=pn.$ne=br.prototype._castForQuery;pn.$nin=dc.prototype.$conditionalHandlers.$nin;pn.$in=dc.prototype.$conditionalHandlers.$in;br.prototype.toJSONSchema=function(e){let r=this.getEmbeddedSchemaType(),n=this.options.required&&typeof this.options.required!="function";return{...L3t("array","array",e?.useBsonType,n),items:r.toJSONSchema(e)}};br.prototype.autoEncryptionType=function(){return"array"};t3e.exports=br});var i3e=m((EEr,n3e)=>{"use strict";var{Long:V3t}=ca(),VW=9223372036854775807n,GW=-9223372036854775808n,r3e=`Mongoose only supports BigInts between ${GW} and ${VW} because MongoDB does not support arbitrary precision integers`;n3e.exports=function(e){if(e==null)return e;if(e==="")return null;if(typeof e=="bigint"){if(e>VW||e<GW)throw new Error(r3e);return e}if(e instanceof V3t)return e.toBigInt();if(typeof e=="string"||typeof e=="number"){if(e=BigInt(e),e>VW||e<GW)throw new Error(r3e);return e}throw new Error(`Cannot convert value to BigInt: "${e}"`)}});var a3e=m((bEr,o3e)=>{"use strict";var s3e=uo(),bE=vi(),G3t=i3e(),H3t=lo();function oi(t,e){bE.call(this,t,e,"BigInt")}oi.schemaName="BigInt";oi.defaultOptions={};oi.prototype=Object.create(bE.prototype);oi.prototype.constructor=oi;oi._cast=G3t;oi.set=bE.set;oi.setters=[];oi.get=bE.get;oi.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};oi._checkRequired=t=>t!=null;oi.checkRequired=bE.checkRequired;oi.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};oi.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=oi.cast();try{return e(t)}catch(r){throw new s3e("BigInt",t,this.path,r,this)}};var z3t={...bE.prototype.$conditionalHandlers,$gt:gx,$gte:gx,$lt:gx,$lte:gx};Object.defineProperty(oi.prototype,"$conditionalHandlers",{enumerable:!1,value:z3t});function gx(t,e){return this.castForQuery(null,t,e)}oi.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof s3e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};oi.prototype._castNullish=function(e){return typeof e>"u"||(typeof this.constructor.cast=="function"?this.constructor.cast():oi.cast())==null,e};oi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return H3t("string","long",e?.useBsonType,r)};oi.prototype.autoEncryptionType=function(){return"long"};o3e.exports=oi});var l3e=m((_Er,c3e)=>{"use strict";var u3e=uo(),_E=vi(),Xv=yO(),W3t=lo();function wn(t,e){_E.call(this,t,e,"Boolean")}wn.schemaName="Boolean";wn.defaultOptions={};wn.prototype=Object.create(_E.prototype);wn.prototype.constructor=wn;wn._cast=Xv;wn.set=_E.set;wn.setters=[];wn.get=_E.get;wn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};wn._defaultCaster=t=>{if(t!=null&&typeof t!="boolean")throw new Error;return t};wn._checkRequired=t=>t===!0||t===!1;wn.checkRequired=_E.checkRequired;wn.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Object.defineProperty(wn,"convertToTrue",{get:()=>Xv.convertToTrue,set:t=>{Xv.convertToTrue=t}});Object.defineProperty(wn,"convertToFalse",{get:()=>Xv.convertToFalse,set:t=>{Xv.convertToFalse=t}});wn.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=wn.cast();try{return e(t)}catch(r){throw new u3e("Boolean",t,this.path,r,this)}};var J3t={..._E.prototype.$conditionalHandlers};Object.defineProperty(wn.prototype,"$conditionalHandlers",{enumerable:!1,value:J3t});wn.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof u3e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};wn.prototype._castNullish=function(e){if(typeof e>"u")return e;let r=typeof this.constructor.cast=="function"?this.constructor.cast():wn.cast();return r==null?e:r.convertToFalse instanceof Set&&r.convertToFalse.has(e)?!1:r.convertToTrue instanceof Set&&r.convertToTrue.has(e)?!0:e};wn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return W3t("boolean","bool",e?.useBsonType,r)};wn.prototype.autoEncryptionType=function(){return"bool"};c3e.exports=wn});var p3e=m((vEr,d3e)=>{"use strict";var Y3t=Ca(),Ex=class extends Y3t{},Q3t=su();Object.defineProperty(Ex.prototype,"subtype",Q3t);d3e.exports=Ex});var m3e=m((SEr,h3e)=>{"use strict";var vE=cE(),X3t=p3e(),Xp=vi(),Z3t=lo(),bx=Wv(),f3e=Tt(),HW=vE.Binary,vx=Xp.CastError;function Wi(t,e){Xp.call(this,t,e,"Buffer")}Wi.schemaName="Buffer";Wi.defaultOptions={};Wi.prototype=Object.create(Xp.prototype);Wi.prototype.constructor=Wi;Wi.prototype.OptionsConstructor=X3t;Wi._checkRequired=t=>!!(t&&t.length);Wi.set=Xp.set;Wi.setters=[];Wi.get=Xp.get;Wi.checkRequired=Xp.checkRequired;Wi.prototype.checkRequired=function(t,e){return Xp._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)};Wi.prototype.cast=function(t,e,r,n,i){let s;if(Xp._isRef(this,t,e,r)){if(t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new vE(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof HW){if(s=new vE(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new vx("Buffer",t,this.path,null,this);return s._subtype=t.sub_type,s}if(t==null||f3e.isNonBuiltinObject(t))return this._castRef(t,e,r,i)}if(t&&t._id&&(t=t._id),t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new vE(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof HW){if(s=new vE(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new vx("Buffer",t,this.path,null,this);return s._subtype=t.sub_type,s}if(t===null)return t;let o=typeof t;if(o==="string"||o==="number"||Array.isArray(t)||o==="object"&&t.type==="Buffer"&&Array.isArray(t.data))return o==="number"&&(t=[t]),s=new vE(t,[this.path,e]),this.options.subtype!=null&&(s._subtype=this.options.subtype),s;if(f3e.isPOJO(t)&&(t.$binary instanceof HW||typeof t.$binary=="string")){let a=this.cast(Buffer.from(t.$binary,"base64"));if(t.$type!=null)return a._subtype=t.$type,a}throw new vx("Buffer",t,this.path,null,this)};Wi.prototype.subtype=function(t){return this.options.subtype=t,this};function _x(t,e){return this.castForQuery(null,t,e)}var evt={...Xp.prototype.$conditionalHandlers,$bitsAllClear:bx,$bitsAnyClear:bx,$bitsAllSet:bx,$bitsAnySet:bx,$gt:_x,$gte:_x,$lt:_x,$lte:_x};Object.defineProperty(Wi.prototype,"$conditionalHandlers",{enumerable:!1,value:evt});Wi.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Buffer.");return n.call(this,e)}let i;try{i=this.applySetters(e,r)}catch(s){throw s instanceof vx&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}return i&&i.toObject({transform:!1,virtuals:!1})};Wi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Z3t("string","binData",e?.useBsonType,r)};Wi.prototype.autoEncryptionType=function(){return"binData"};h3e.exports=Wi});var g3e=m((wEr,y3e)=>{"use strict";var tvt=Ca(),SE=class extends tvt{},zW=su();Object.defineProperty(SE.prototype,"min",zW);Object.defineProperty(SE.prototype,"max",zW);Object.defineProperty(SE.prototype,"expires",zW);y3e.exports=SE});var b3e=m((AEr,E3e)=>{"use strict";var WW=require("assert");E3e.exports=function(e){if(e==null||e==="")return null;if(e instanceof Date)return WW.ok(!isNaN(e.valueOf())),e;let r;if(WW.ok(typeof e!="boolean"),e instanceof Number||typeof e=="number"?r=new Date(e):typeof e=="string"&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?r=new Date(Number(e)):typeof e.valueOf=="function"?r=new Date(e.valueOf()):r=new Date(e),!isNaN(r.valueOf()))return r;WW.ok(!1)}});var w3e=m((CEr,S3e)=>{"use strict";var _3e=wa(),rvt=g3e(),fh=vi(),nvt=b3e(),ivt=lo(),svt=Fo(),ovt=Tt(),v3e=fh.CastError;function fn(t,e){fh.call(this,t,e,"Date")}fn.schemaName="Date";fn.defaultOptions={};fn.prototype=Object.create(fh.prototype);fn.prototype.constructor=fn;fn.prototype.OptionsConstructor=rvt;fn._cast=nvt;fn.set=fh.set;fn.setters=[];fn.get=fh.get;fn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};fn._defaultCaster=t=>{if(t!=null&&!(t instanceof Date))throw new Error;return t};fn.prototype.expires=function(t){return svt(this._index)!=="Object"&&(this._index={}),this._index.expires=t,ovt.expires(this._index),this};fn._checkRequired=t=>t instanceof Date;fn.checkRequired=fh.checkRequired;fn.prototype.checkRequired=function(t,e){return typeof t=="object"&&fh._isRef(this,t,e,!0)?t!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():fn.checkRequired())(t)};fn.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t){let r=e||_3e.messages.Date.min;typeof r=="string"&&(r=r.replace(/{MIN}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.minValidator=function(i){let s=t;typeof t=="function"&&t!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()>=o.valueOf()},message:r,type:"min",min:t})}return this};fn.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t){let r=e||_3e.messages.Date.max;typeof r=="string"&&(r=r.replace(/{MAX}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.maxValidator=function(i){let s=t;typeof s=="function"&&s!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()<=o.valueOf()},message:r,type:"max",max:t})}return this};fn.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=fn.cast();try{return e(t)}catch(r){throw new v3e("date",t,this.path,r,this)}};function Sx(t){return this.cast(t)}var avt={...fh.prototype.$conditionalHandlers,$gt:Sx,$gte:Sx,$lt:Sx,$lte:Sx};Object.defineProperty(fn.prototype,"$conditionalHandlers",{enumerable:!1,value:avt});fn.prototype.castForQuery=function(t,e,r){if(t==null)try{return this.applySetters(e,r)}catch(i){throw i instanceof v3e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}let n=this.$conditionalHandlers[t];if(!n)throw new Error("Can't use "+t+" with Date.");return n.call(this,e)};fn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return ivt("string","date",e?.useBsonType,r)};fn.prototype.autoEncryptionType=function(){return"date"};S3e.exports=fn});var C3e=m((TEr,A3e)=>{"use strict";var Y0=ZT(),uvt=require("assert");A3e.exports=function(e){if(e==null)return e;if(typeof e=="object"&&typeof e.$numberDecimal=="string")return Y0.fromString(e.$numberDecimal);if(e instanceof Y0)return e;if(typeof e=="string")return Y0.fromString(e);if(typeof Buffer=="function"&&Buffer.isBuffer(e))return new Y0(e);if(typeof Uint8Array=="function"&&e instanceof Uint8Array)return new Y0(e);if(typeof e=="number")return Y0.fromString(String(e));if(typeof e.valueOf=="function"&&typeof e.valueOf()=="string")return Y0.fromString(e.valueOf());uvt.ok(!1)}});var O3e=m((OEr,T3e)=>{"use strict";var Zp=vi(),cvt=Zp.CastError,lvt=C3e(),dvt=lo(),JW=js();function Si(t,e){Zp.call(this,t,e,"Decimal128")}Si.schemaName="Decimal128";Si.defaultOptions={};Si.prototype=Object.create(Zp.prototype);Si.prototype.constructor=Si;Si._cast=lvt;Si.set=Zp.set;Si.setters=[];Si.get=Zp.get;Si.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Si._defaultCaster=t=>{if(t!=null&&!JW(t,"Decimal128"))throw new Error;return t};Si._checkRequired=t=>JW(t,"Decimal128");Si.checkRequired=Zp.checkRequired;Si.prototype.checkRequired=function(e,r){return Zp._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Si.checkRequired())(e)};Si.prototype.cast=function(t,e,r,n,i){if(Zp._isRef(this,t,e,r))return JW(t,"Decimal128")?t:this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Si.cast();try{return s(t)}catch(o){throw new cvt("Decimal128",t,this.path,o,this)}};function wx(t){return this.cast(t)}var pvt={...Zp.prototype.$conditionalHandlers,$gt:wx,$gte:wx,$lt:wx,$lte:wx};Object.defineProperty(Si.prototype,"$conditionalHandlers",{enumerable:!1,value:pvt});Si.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return dvt("string","decimal",e?.useBsonType,r)};Si.prototype.autoEncryptionType=function(){return"decimal"};T3e.exports=Si});var R3e=m((xEr,I3e)=>{"use strict";var fvt=Ca(),Zv=class extends fvt{},x3e=su();Object.defineProperty(Zv.prototype,"_id",x3e);Object.defineProperty(Zv.prototype,"minimize",x3e);I3e.exports=Zv});var YW=m((IEr,D3e)=>{"use strict";D3e.exports=function(e,r,n){if(e.length===0)return n();let i=e.length,s=null;for(let o of e)r(o,function(a){if(s==null){if(a!=null)return s=a,n(s);if(--i<=0)return n()}})}});var M3e=m((REr,k3e)=>{"use strict";var hvt=YW();k3e.exports=function(e){e.s.hooks.pre("save",!1,function(i){if(this.$isSubdocument){i();return}let s=this,o=this.$getAllSubdocs({useCache:!0});if(!o.length){i();return}hvt(o,function(a,u){a.$__schema.s.hooks.execPre("save",a,function(c){u(c)})},function(a){if(s.$__.saveOptions&&(s.$__.saveOptions.__subdocs=null),a)return s.$__schema.s.hooks.execPost("save:error",s,[s],{error:a},function(u){i(u)});i()})},null,!0),e.s.hooks.post("save",async function(){let i=this.$__.removedSubdocs;if(!i||!i.length)return;let s=[];for(let o of i)s.push(new Promise((a,u)=>{o.$__schema.s.hooks.execPost("deleteOne",o,[o],function(c){if(c)return u(c);a()})}));this.$__.removedSubdocs=null,await Promise.all(s)}),e.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let i=this,s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let o=[];for(let a of s)o.push(new Promise((u,c)=>{a.$__schema.s.hooks.execPost("save",a,[a],function(l){if(l)return c(l);u()})}));try{await Promise.all(o)}catch(a){await new Promise((u,c)=>{this.$__schema.s.hooks.execPost("save:error",i,[i],{error:a},function(l){if(l)return c(l);u()})})}},null,!0)}});var F3e=m((DEr,XW)=>{"use strict";var mvt=ot().objectIdSymbol,P3e=Tt();XW.exports=function(e){e.post("init",function(){return QW.call(this),this}),e.pre("save",function(n){N3e.call(this),n()}),e.pre("remove",function(n){N3e.call(this),n()}),e.post("save",function(){QW.call(this)})};function N3e(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let r=0;r<e;++r)this.$where[t[r]]=this.$__.shardval[t[r]]}}XW.exports.storeShard=QW;function QW(){let t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!P3e.isPOJO(t))return;let e=this.$__.shardval={},r=Object.keys(t),n=r.length,i;for(let s=0;s<n;++s)i=this.$__getValue(r[s]),i==null?e[r[s]]=i:P3e.isMongooseObject(i)?e[r[s]]=i.toObject({depopulate:!0,_isNested:!0}):i instanceof Date||i[mvt]?e[r[s]]=i:typeof i.valueOf=="function"?e[r[s]]=i.valueOf():e[r[s]]=i}});var L3e=m((kEr,q3e)=>{"use strict";var wE=ot().arrayAtomicsSymbol,ZW=ot().sessionNewDocuments,yvt=Tt();q3e.exports=function(e){e.pre("save",function(){let n=this.$session();if(n!=null&&!(n.transaction==null||n[ZW]==null)&&!n[ZW].has(this)){let i={};this.isNew&&(i.isNew=!0),this.$__schema.options.versionKey&&(i.versionKey=this.get(this.$__schema.options.versionKey)),i.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),i.atomics=gvt(this),n[ZW].set(this,i)}})};function gvt(t,e){let r=new Map;e=e||new Map;let n=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(let s of n){let o=t.$__getValue(s);if(o!=null&&Array.isArray(o)&&yvt.isMongooseDocumentArray(o)&&o.length&&o[wE]!=null&&Object.keys(o[wE]).length!==0){let a=e.get(s)||{};r.set(s,B3e(a,o[wE]))}}let i=t.$__dirty();for(let s of i){let o=s.path,a=s.value;if(a!=null&&a[wE]!=null&&Object.keys(a[wE]).length!==0){let u=e.get(o)||{};r.set(o,B3e(u,a[wE]))}}return r}function B3e(t,e){return t=t||{},e.$pullAll!=null&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),e.$push!=null&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),e.$addToSet!=null&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),e.$set!=null&&(t.$set=Array.isArray(e.$set)?[...e.$set]:Object.assign({},e.$set)),t}});var $3e=m((MEr,j3e)=>{"use strict";j3e.exports=function(e){e.pre("save",!1,function(i,s){let o=this;if(this.$isSubdocument)return i();let a=s&&typeof s=="object"&&"validateBeforeSave"in s,u;if(a?u=!!s.validateBeforeSave:u=this.$__schema.options.validateBeforeSave,u){let l=s&&typeof s=="object"&&"validateModifiedOnly"in s?{validateModifiedOnly:s.validateModifiedOnly}:null;this.$validate(l).then(()=>{this.$op="save",i()},d=>{o.$__schema.s.hooks.execPost("save:error",o,[o],{error:d},function(p){o.$op="save",i(p)})})}else i()},null,!0)}});var eJ=m(eS=>{"use strict";eS.saveSubdocs=M3e();eS.sharding=F3e();eS.trackTransaction=L3e();eS.validateBeforeSave=$3e()});var V3e=m((NEr,U3e)=>{"use strict";var K3e=eJ();U3e.exports=function(e){for(let r of Object.values(K3e))r(e,{deduplicate:!0});e.plugins=Object.values(K3e).map(r=>({fn:r,opts:{deduplicate:!0}})).concat(e.plugins)}});var z3e=m((FEr,H3e)=>{"use strict";var Evt=bO(),bvt=F0(),_vt=js(),vvt=Vp(),G3e=oh();H3e.exports=function t(e,r,n,i){let s=Object.keys(r),o=0,a=s.length,u;if(n=n||"",i=i||new WeakSet,!i.has(r)){for(i.add(r);o<a;)if(u=s[o++],!(!n&&(u==="discriminators"||u==="base"||u==="_applyDiscriminators"||u==="_userProvidedOptions"||u==="options"||u==="tree"))&&!(n==="tree"&&r!=null&&r.instanceOfSchema)&&!bvt.has(u)){if(e[u]==null)e[u]=r[u];else if(G3e(r[u])){if(G3e(e[u])||(e[u]={}),r[u]!=null){if(r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested||r[u].$isMongooseDocumentArrayElement&&e[u].$isMongooseDocumentArrayElement)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?Evt(e[u],r[u].clone(),!0):e[u]=r[u].clone();continue}else if(_vt(r[u],"ObjectId")){e[u]=new vvt(r[u]);continue}}t(e[u],r[u],n?n+"."+u:u,i)}}r!=null&&r.instanceOfSchema&&(e.tree=Object.assign({},r.tree,e.tree))}}});var Ax=m((BEr,Y3e)=>{"use strict";var W3e=$0(),Svt=V3e(),wvt=Vn(),Avt=IO().defineKey,Cvt=si(),tJ=Tt(),Tvt=z3e(),J3e={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function Ovt(t,e){if(t.encryptionType()==null&&e.encryptionType()==null)return;let r=i(n(t),n(e));for(let s of r){if(t._hasEncryptedField(s)&&e._hasEncryptedField(s))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${s}`);if(t._hasEncryptedField(s)||e._hasEncryptedField(s))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${s}`)}function n(s){return[...Object.keys(s.paths),...Object.keys(s.singleNestedPaths)]}function*i(s,o){let a=new Set(s);for(let u of o)a.has(u)&&(yield u)}}Y3e.exports=function(e,r,n,i,s,o,a){if(!(n&&n.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(o=o??!0,e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+r+'" can only be a discriminator of the root model');if(s){let p=Cvt(e.base,"options.applyPluginsToDiscriminators",!1)||!o;e.base._applyPlugins(n,{skipTopLevel:!p})}else o||Svt(n);let u=e.schema.options.discriminatorKey,c=e.schema.path(u);if(c!=null)tJ.hasUserDefinedProperty(c.options,"select")||(c.options.select=!0),c.options.$skipDiscriminatorCheck=!0;else{let p={};p[u]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},p[u][e.schema.options.typeKey]=String,e.schema.add(p),Avt({prop:u,prototype:e.prototype,options:e.schema.options})}if(n.path(u)&&n.path(u).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+r+'" cannot have field with name "'+u+'"');let l=r;(typeof i=="string"&&i.length||i!=null)&&(l=i),Ovt(e.schema,n);function d(p,f){p._baseSchema=f,f.paths._id&&f.paths._id.options&&!f.paths._id.options.auto&&p.remove("_id");let h=Object.keys(f.paths),g=[];for(let R of h){if(p.nested[R]){g.push(R);continue}if(R.indexOf(".")===-1)continue;let M=R.split(".").slice(0,-1),I="";for(let F of M)I+=(I.length?".":"")+F,(p.paths[I]instanceof W3e||p.singleNestedPaths[I]instanceof W3e)&&g.push(R)}p.obj={...p.obj},Tvt(p,f),p._gatherChildSchemas();for(let R of g)delete p.paths[R];p.childSchemas.forEach(R=>{R.model.prototype.$__setSchema(R.schema)});let _={};_[u]={default:l,select:!0,set:function(R){if(R===l||Array.isArray(l)&&tJ.deepEqual(R,l))return l;throw new Error(`Can't set discriminator key "`+u+'"')},$skipDiscriminatorCheck:!0},_[u][p.options.typeKey]=c?c.options[p.options.typeKey]:String,p.add(_),p.discriminatorMapping={key:u,value:l,isRoot:!1},f.options.collection&&(p.options.collection=f.options.collection);let S=p.options.toJSON,w=p.options.toObject,C=p.options._id,A=p.options.id,O=Object.keys(p.options);p.options.discriminatorKey=f.options.discriminatorKey;let x=p._userProvidedOptions;for(let R of O)if(!J3e[R]&&R in x&&!tJ.deepEqual(p.options[R],f.options[R]))throw new Error("Can't customize discriminator option "+R+" (can only modify "+Object.keys(J3e).join(", ")+")");p.options=wvt(f.options);for(let R of Object.keys(x))p.options[R]=x[R];S&&(p.options.toJSON=S),w&&(p.options.toObject=w),typeof C<"u"&&(p.options._id=C),p.options.id=A,o&&(p.s.hooks=e.schema.s.hooks.merge(p.s.hooks)),s&&(p.plugins=Array.prototype.slice.call(f.plugins)),p.callQueue=f.callQueue.concat(p.callQueue),delete p._requiredpaths}if(d(n,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:u,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[r]=n,e.discriminators[r]&&!n.options.overwriteModels&&!a)throw new Error('Discriminator with name "'+r+'" already exists');return n}});var Cx=m((qEr,Q3e)=>{"use strict";var xvt=uc();Q3e.exports=function(e,r,n){let i=e.schema.options.discriminatorKey,s=r!=null&&r[i];if(s==null&&(s=n),e.discriminators&&s!=null)if(e.discriminators[s])e=e.discriminators[s];else{let o=xvt(e.discriminators,s);o&&(e=o)}return e}});var rJ=m((LEr,X3e)=>{"use strict";var Ivt=EW();X3e.exports=function(e,r){return r==null||r._id==null||(e=e.clone(),r._id?e.paths._id||(Ivt(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}});var nJ=m((jEr,Z3e)=>{"use strict";var Rvt=Qt(),Tx=class extends Rvt{constructor(e,r){let n=`Cannot create use schema for property "${e}" because the schema has the ${r} option enabled.`;super(n)}};Object.defineProperty(Tx.prototype,"name",{value:"InvalidSchemaOptionError"});Z3e.exports=Tx});var aJ=m(($Er,nve)=>{"use strict";var eve=uo(),iJ=require("events").EventEmitter,Dvt=SO(),kvt=R3e(),Q0=vi(),Mvt=TO(),Pvt=gO(),tve=Jv().castToNumber,Nvt=lo(),Fvt=Ax(),sJ=jW(),oJ=Cx(),Bvt=rJ(),qvt=Tl().internalToObjectOptions,Lvt=pE(),jvt=Tt(),$vt=nJ(),Ox;nve.exports=Mi;function Mi(t,e,r){if(t.options.timeseries)throw new $vt(e,"timeseries");let n=Mi.defaultOptions&&Mi.defaultOptions._id;n!=null&&(r=r||{},r._id=n),t=Bvt(t,r),this.caster=rve(t,null,r),this.caster.path=e,this.caster.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,Q0.call(this,e,r,"Embedded")}Mi.prototype=Object.create(Q0.prototype);Mi.prototype.constructor=Mi;Mi.prototype.OptionsConstructor=kvt;function rve(t,e,r){Ox||(Ox=PO());let n=function(o,a,u){this.$__parent=u,Ox.apply(this,arguments),u!=null&&this.$session(u.$session())};t._preCompile();let i=e!=null?e.prototype:Ox.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.prototype.constructor=n,n.prototype.$__schemaTypeOptions=r,n.$__required=r?.required,n.base=t.base,n.schema=t,n.$isSingleNested=!0,n.events=new iJ,n.prototype.toBSON=function(){return this.toObject(qvt)};for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in iJ.prototype)n[s]=iJ.prototype[s];return n}var Od={...Q0.prototype.$conditionalHandlers};Od.$geoWithin=function(e,r){return{$geometry:this.castForQuery(null,e.$geometry,r)}};Od.$near=Od.$nearSphere=sJ.cast$near;Od.$within=Od.$geoWithin=sJ.cast$within;Od.$geoIntersects=sJ.cast$geoIntersects;Od.$minDistance=tve;Od.$maxDistance=tve;Od.$exists=Pvt;Object.defineProperty(Mi.prototype,"$conditionalHandlers",{enumerable:!1,value:Od});Mi.prototype.cast=function(t,e,r,n,i){if(t&&t.$isSingleNested&&t.parent===e)return t;if(t!=null&&(typeof t!="object"||Array.isArray(t)))throw new Dvt(this.path,t);let s=this.schema.path(this.schema.options.discriminatorKey),o=s==null?null:s.getDefault(e),a=oJ(this.caster,t,o),u,c=e&&e.$__&&e.$__.selected,l=this.path,d=c==null?null:Object.keys(c).reduce((p,f)=>(f.startsWith(l+".")&&(p=p||{},p[f.substring(l.length+1)]=c[f]),p),null);if(r){u=new a(void 0,d,e,!1,{defaults:!1}),delete u.$__.defaults,i.path!=null&&(i={...i},delete i.path),u.$init(t,i);let p=Lvt(d);Mvt(u,d,p)}else return i=Object.assign({},i,{priorDoc:n}),Object.keys(t).length===0?new a({},d,e,void 0,i):new a(t,d,e,void 0,i);return u};Mi.prototype.castForQuery=function(t,e,r,n){let i;if(t!=null){if(i=this.$conditionalHandlers[t],!i)throw new Error("Can't use "+t);return i.call(this,e)}if(e==null)return e;let s=oJ(this.caster,e);if(e instanceof s)return e;this.options.runSetters&&(e=this._applySetters(e,r));let o=n!=null&&n.strict!=null?n.strict:void 0;try{e=new s(e,o)}catch(a){throw a instanceof eve?a:new eve("Embedded",e,this.path,a,this)}return e};Mi.prototype.doValidate=function(t,e,r,n){let i=oJ(this.caster,t);if(t&&!(t instanceof i)&&(t=new i(t,null,r!=null&&r.$__!=null?r:null)),n&&n.skipSchemaValidators)return t?t.validate().then(()=>e(null),s=>e(s)):e(null);Q0.prototype.doValidate.call(this,t,function(s){if(s)return e(s);if(!t)return e(null);t.validate().then(()=>e(null),o=>e(o))},r,n)};Mi.prototype.doValidateSync=function(t,e,r){if(!r||!r.skipSchemaValidators){let n=Q0.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()};Mi.prototype.discriminator=function(t,e,r){r=r||{};let n=jvt.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;return e.instanceOfSchema&&i&&(e=e.clone()),e=Fvt(this.caster,t,e,n,null,null,r.overwriteExisting),this.caster.discriminators[t]=rve(e,this.caster),this.caster.discriminators[t]};Mi.defaultOptions={};Mi.set=Q0.set;Mi.setters=[];Mi.get=Q0.get;Mi.prototype.toJSON=function(){return{path:this.path,options:this.options}};Mi.prototype.clone=function(){let t=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});return t.validators=this.validators.slice(),this.requiredValidator!==void 0&&(t.requiredValidator=this.requiredValidator),t.caster.discriminators=Object.assign({},this.caster.discriminators),t._appliedDiscriminators=this._appliedDiscriminators,t};Mi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return{...this.schema.toJSONSchema(e),...Nvt("object","object",e?.useBsonType,r)}}});var sve=m((KEr,ive)=>{"use strict";var Kvt=Qt(),uJ=vi(),Uvt=aJ(),Vvt=Cx();function ef(t,e){if(this.$parentSchemaType=e&&e.$parentSchemaType,!this.$parentSchemaType)throw new Kvt("Cannot create DocumentArrayElement schematype without a parent");delete e.$parentSchemaType,uJ.call(this,t,e,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}ef.schemaName="DocumentArrayElement";ef.defaultOptions={};ef.prototype=Object.create(uJ.prototype);ef.prototype.constructor=ef;ef.prototype.cast=function(...t){return this.$parentSchemaType.cast(...t)[0]};ef.prototype.doValidate=function(t,e,r,n){let i=Vvt(this.caster,t);return t&&!(t instanceof i)&&(t=new i(t,r,null,null,n&&n.index!=null?n.index:null)),Uvt.prototype.doValidate.call(this,t,e,r,n)};ef.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let t=uJ.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,t.caster=this.caster,t.schema=this.schema,t};ive.exports=ef});var uve=m((UEr,ave)=>{"use strict";var Gvt=Ca(),tS=class extends Gvt{},ove=su();Object.defineProperty(tS.prototype,"excludeIndexes",ove);Object.defineProperty(tS.prototype,"_id",ove);ave.exports=tS});var gve=m((VEr,yve)=>{"use strict";var cve=uo(),Hvt=sve(),cJ=require("events").EventEmitter,dJ=px(),zvt=uve(),rS=vi(),lve=W0(),dve=lo(),Wvt=Ax(),pve=rJ(),Jvt=kO(),Yvt=Hv(),AE=Tt(),xx=Cx(),Qvt=nJ(),fve=ot().arrayAtomicsSymbol,lJ=ot().arrayPathSymbol,Xvt=ot().documentArrayParent,tf,X0;function Nn(t,e,r,n){if(e.options&&e.options.timeseries)throw new Qvt(t,"timeseries");let i=Nn.defaultOptions&&Nn.defaultOptions._id;i!=null&&(n=n||{},n._id=i),n!=null&&n._id!=null?e=pve(e,n):r!=null&&r._id!=null&&(e=pve(e,r));let s=mve(e,r);s.prototype.$basePath=t,dJ.call(this,t,s,r),this.schema=e,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=s,s.base=e.base;let o=this.defaultValue;(!("defaultValue"in this)||o!=null)&&this.default(function(){let u=o.call(this);return u!=null&&!Array.isArray(u)&&(u=[u]),u});let a=this;this.$embeddedSchemaType=new Hvt(t+".$",{...n||{},$parentSchemaType:a}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}Nn.schemaName="DocumentArray";Nn.options={castNonArrays:!0};Nn.prototype=Object.create(dJ.prototype);Nn.prototype.constructor=Nn;Nn.prototype.OptionsConstructor=zvt;Object.defineProperty(Nn.prototype,"$conditionalHandlers",{enumerable:!1,value:{...dJ.prototype.$conditionalHandlers}});function mve(t,e,r){X0||(X0=fE());function n(){X0.apply(this,arguments),!(this.__parentArray==null||this.__parentArray.getArrayParent()==null)&&this.$session(this.__parentArray.getArrayParent().$session())}t._preCompile();let i=r!=null?r.prototype:X0.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.schema=t,n.prototype.constructor=n,n.$isArraySubdocument=!0,n.events=new cJ,n.base=t.base;for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in cJ.prototype)n[s]=cJ.prototype[s];return n.options=e,n}Nn.prototype.discriminator=function(t,e,r){typeof t=="function"&&(t=AE.getFunctionName(t)),r=r||{};let n=AE.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;e.instanceOfSchema&&i&&(e=e.clone()),e=Wvt(this.casterConstructor,t,e,n,null,null,r?.overwriteExisting);let s=mve(e,null,this.casterConstructor);s.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(s,"name",{value:t})}catch{}return this.casterConstructor.discriminators[t]=s,this.casterConstructor.discriminators[t]};Nn.prototype.doValidate=function(t,e,r,n){tf||(tf=V0());let i=this;try{rS.prototype.doValidate.call(this,t,s,r)}catch(o){return e(o)}function s(o){if(o)return e(o);let a=t&&t.length,u;if(!a||n&&n.updateValidator)return e();AE.isMongooseDocumentArray(t)||(t=new tf(t,i.path,r));function c(l){l!=null&&(u=l),--a||e(u)}for(let l=0,d=a;l<d;++l){let p=t[l];if(p==null){--a||e(u);continue}if(!(p instanceof X0)){let f=xx(i.casterConstructor,t[l]);p=t[l]=new f(p,t,void 0,void 0,l)}if(n!=null&&n.validateModifiedOnly&&!p.$isModified()){--a||e(u);continue}p.$__validate(null,n,c)}}};Nn.prototype.doValidateSync=function(t,e,r){let n=rS.prototype.doValidateSync.call(this,t,e);if(n!=null)return n;let i=t&&t.length,s=null;if(i){for(let o=0,a=i;o<a;++o){let u=t[o];if(!u)continue;if(!(u instanceof X0)){let l=xx(this.casterConstructor,t[o]);u=t[o]=new l(u,t,void 0,void 0,o)}if(r!=null&&r.validateModifiedOnly&&!u.$isModified())continue;let c=u.validateSync(r);c&&s==null&&(s=c)}return s}};Nn.prototype.getDefault=function(t,e,r){let n=typeof this.defaultValue=="function"?this.defaultValue.call(t):this.defaultValue;if(n==null||r&&r.skipCast)return n;tf||(tf=V0()),Array.isArray(n)||(n=[n]),n=new tf(n,this.path,t);for(let i=0;i<n.length;++i){let s=xx(this.casterConstructor,n[i]),o=new s({},n,void 0,void 0,i);o.$init(n[i]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},n[i]=o}return n};var Zvt=Object.freeze({transform:!1,virtuals:!1}),hve=Object.freeze({skipId:!1,willInit:!0});Nn.prototype.cast=function(t,e,r,n,i){if(tf||(tf=V0()),t!=null&&t[lJ]!=null&&t===n)return t;let s,o;i=i||{};let a=i.path||this.path;if(!Array.isArray(t)){if(!r&&!Nn.options.castNonArrays)throw new cve("DocumentArray",t,this.path,null,this);return e&&r&&e.markModified(a),this.cast([t],e,r,n,i)}(!i.skipDocumentArrayCast||AE.isMongooseDocumentArray(t))&&(t=new tf(t,a,e,this)),n!=null&&(t[fve]=n[fve]||{}),i.arrayPathIndex!=null&&(t[lJ]=a+"."+i.arrayPathIndex);let u=AE.isMongooseDocumentArray(t)?t.__array:t,c=u.length;for(let l=0;l<c;++l){if(!u[l])continue;let d=xx(this.casterConstructor,u[l]),p=Jvt(u[l],!0);if(u[l]!==p&&(u[l]=p),u[l]instanceof X0){if(u[l][Xvt]!==e)if(r){let f=new d(null,t,hve,s,l);u[l]=f.$init(u[l])}else{let f=new d(u[l],t,void 0,void 0,l);u[l]=f}u[l].__index==null&&u[l].$setIndex(l)}else if(u[l]!=null)if(r)e?s||(s=eSt(this,e.$__.selected,r)):s=!0,o=new d(null,t,hve,s,l),u[l]=o.$init(u[l],i);else if(n&&typeof n.id=="function"&&(o=n.id(u[l]._id)),n&&o&&AE.deepEqual(o.toObject(Zvt),u[l]))o.set(u[l]),u[l]=o;else try{o=new d(u[l],t,void 0,void 0,l),u[l]=o}catch(f){throw new cve("embedded",u[l],t[lJ],f,this)}}return t};Nn.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e._appliedDiscriminators=this._appliedDiscriminators,e};Nn.prototype.applyGetters=function(t,e){return rS.prototype.applyGetters.call(this,t,e)};function eSt(t,e,r){if(!(r&&e))return;let n=t.path+".",i=Object.keys(e),s=i.length,o={},a,u,c;for(;s--;)if(u=i[s],u.startsWith(n)){if(c=u.substring(n.length),c==="$")continue;c.startsWith("$.")&&(c=c.substring(2)),a||(a=!0),o[c]=e[u]}return a&&o||void 0}Nn.defaultOptions={};Nn.set=rS.set;Nn.setters=[];Nn.get=rS.get;Nn.prototype.$conditionalHandlers.$elemMatch=tSt;function tSt(t,e){let r=Object.keys(t),n=r.length;for(let a=0;a<n;++a){let u=r[a],c=t[u];Yvt(u)&&c!=null&&(t[u]=this.castForQuery(u,c,e))}let i=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,s=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(i!=null&&t[i]!=null&&s[t[i]]!=null)return lve(s[t[i]],t,null,this&&this.$$context);let o=this.casterConstructor.schema??e.schema;return lve(o,t,null,this&&this.$$context)}Nn.prototype.toJSONSchema=function(e){let r=dve("object","object",e?.useBsonType,!1),n=this.options.required&&typeof this.options.required!="function";return{...dve("array","array",e?.useBsonType,n),items:{...r,...this.schema.toJSONSchema(e)}}};yve.exports=Nn});var _ve=m((GEr,bve)=>{"use strict";var Eve=require("assert"),pJ=ca(),rSt=js();bve.exports=function(e){if(e==null||e==="")return null;let r;if(rSt(e,"Long"))r=e.toNumber();else if(typeof e=="string")try{return r=pJ.Double.fromString(e),r}catch{Eve.ok(!1)}else if(typeof e=="object"){let n=e.valueOf()??e.toString();if(typeof n=="string")try{return r=pJ.Double.fromString(e),r}catch{Eve.ok(!1)}else r=Number(n)}else r=Number(e);return new pJ.Double(r)}});var Sve=m((HEr,vve)=>{"use strict";var nSt=uo(),CE=vi(),iSt=_ve(),sSt=lo();function Pi(t,e){CE.call(this,t,e,"Double")}Pi.schemaName="Double";Pi.defaultOptions={};Pi.prototype=Object.create(CE.prototype);Pi.prototype.constructor=Pi;Pi._cast=iSt;Pi.set=CE.set;Pi.setters=[];Pi.get=CE.get;Pi._defaultCaster=t=>{if(t!=null&&t._bsontype!=="Double")throw new Error;return t};Pi.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Pi._checkRequired=t=>t!=null;Pi.checkRequired=CE.checkRequired;Pi.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Pi.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Pi.cast();try{return e(t)}catch(r){throw new nSt("Double",t,this.path,r,this)}};function Ix(t){return this.cast(t)}var oSt={...CE.prototype.$conditionalHandlers,$gt:Ix,$gte:Ix,$lt:Ix,$lte:Ix};Object.defineProperty(Pi.prototype,"$conditionalHandlers",{enumerable:!1,value:oSt});Pi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return sSt("number","double",e?.useBsonType,r)};Pi.prototype.autoEncryptionType=function(){return"double"};vve.exports=Pi});var Ave=m((zEr,wve)=>{"use strict";var aSt=js(),uSt=require("assert");wve.exports=function(e){if(e==null)return e;if(e==="")return null;let r=aSt(e,"Long")?e.toNumber():Number(e);if(r===(r|0)&&r>=-2147483648&&r<=2147483647)return r;uSt.ok(!1)}});var Ove=m((WEr,Tve)=>{"use strict";var Cve=uo(),TE=vi(),cSt=Ave(),lSt=lo(),Rx=Wv();function wi(t,e){TE.call(this,t,e,"Int32")}wi.schemaName="Int32";wi.defaultOptions={};wi.prototype=Object.create(TE.prototype);wi.prototype.constructor=wi;wi._cast=cSt;wi.set=TE.set;wi.setters=[];wi.get=TE.get;wi._defaultCaster=t=>{if(t!=null&&(typeof t!="number"||t!==(t|0)||t<-2147483648||t>2147483647))throw new Error;return t};wi.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};wi._checkRequired=t=>t!=null;wi.checkRequired=TE.checkRequired;wi.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};wi.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=wi.cast();try{return e(t)}catch(r){throw new Cve("Int32",t,this.path,r,this)}};var dSt={...TE.prototype.$conditionalHandlers,$gt:Dx,$gte:Dx,$lt:Dx,$lte:Dx,$bitsAllClear:Rx,$bitsAnyClear:Rx,$bitsAllSet:Rx,$bitsAnySet:Rx};Object.defineProperty(wi.prototype,"$conditionalHandlers",{enumerable:!1,value:dSt});function Dx(t,e){return this.castForQuery(null,t,e)}wi.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof Cve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};wi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return lSt("number","int",e?.useBsonType,r)};wi.prototype.autoEncryptionType=function(){return"int"};Tve.exports=wi});var Ive=m((JEr,xve)=>{"use strict";var pSt=Ca(),kx=class extends pSt{},fSt=su();Object.defineProperty(kx.prototype,"of",fSt);xve.exports=kx});var kve=m((YEr,Dve)=>{"use strict";var fJ=nx(),hSt=Ive(),Rve=vi(),mSt=lo();var OE=class extends Rve{constructor(e,r){super(e,r,"Map"),this.$isSchemaMap=!0}set(e,r){return Rve.set(e,r)}cast(e,r,n,i,s){if(e instanceof fJ)return e;let o=this.path;if(n){let a=new fJ({},o,r,this.$__schemaType,s),u=a.$__pathRelativeToParent!=null?a.$__pathRelativeToParent:a.$__path;if(e instanceof global.Map)for(let c of e.keys()){let l=e.get(c);l==null?l=a.$__schemaType._castNullish(l):l=a.$__schemaType.cast(l,r,!0,null,{...s,path:u+"."+c}),a.$init(c,l)}else for(let c of Object.keys(e)){let l=e[c];l==null?l=a.$__schemaType._castNullish(l):l=a.$__schemaType.cast(l,r,!0,null,{...s,path:u+"."+c}),a.$init(c,l)}return a}return new fJ(e,o,r,this.$__schemaType,s)}clone(){let e=super.clone();return this.$__schemaType!=null&&(e.$__schemaType=this.$__schemaType.clone()),e}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(e){let r=e?.useBsonType,n=this.getEmbeddedSchemaType(),i=this.options.required&&typeof this.options.required!="function",s=mSt("object","object",r,i);return s.additionalProperties=n.toJSONSchema(e),s}autoEncryptionType(){return"object"}};OE.schemaName="Map";OE.prototype.OptionsConstructor=hSt;OE.defaultOptions={};Dve.exports=OE});var Nve=m((QEr,Pve)=>{"use strict";var ySt=Ca(),nS=class extends ySt{},Mve=su();Object.defineProperty(nS.prototype,"auto",Mve);Object.defineProperty(nS.prototype,"populate",Mve);Pve.exports=nS});var Lve=m((XEr,qve)=>{"use strict";var gSt=Nve(),rf=vi(),ESt=Hz(),bSt=lo(),_St=Fo(),mJ=Vp(),yJ=js(),Fve=Tt(),vSt=rf.CastError,hJ;function Gn(t,e){let r=typeof t=="string"&&t.length===24&&/^[a-f0-9]+$/i.test(t),n=e&&e.suppressWarning;(r||typeof t>"u")&&!n&&Fve.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),rf.call(this,t,e,"ObjectId")}Gn.schemaName="ObjectId";Gn.defaultOptions={};Gn.prototype=Object.create(rf.prototype);Gn.prototype.constructor=Gn;Gn.prototype.OptionsConstructor=gSt;Gn.get=rf.get;Gn.set=rf.set;Gn.setters=[];Gn.prototype.auto=function(t){return t&&(this.default(Bve),this.set(wSt)),this};Gn._checkRequired=t=>yJ(t,"ObjectId");Gn._cast=ESt;Gn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Gn._defaultCaster=t=>{if(!yJ(t,"ObjectId"))throw new Error(t+" is not an instance of ObjectId");return t};Gn.checkRequired=rf.checkRequired;Gn.prototype.checkRequired=function(e,r){return rf._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Gn.checkRequired())(e)};Gn.prototype.cast=function(t,e,r,n,i){if(!yJ(t,"ObjectId")&&rf._isRef(this,t,e,r)){if((_St(t)||"").toLowerCase()==="objectid")return new mJ(t.toHexString());if(t==null||Fve.isNonBuiltinObject(t))return this._castRef(t,e,r,i)}let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Gn.cast();try{return s(t)}catch(o){throw new vSt("ObjectId",t,this.path,o,this)}};function Mx(t){return this.cast(t)}var SSt={...rf.prototype.$conditionalHandlers,$gt:Mx,$gte:Mx,$lt:Mx,$lte:Mx};Object.defineProperty(Gn.prototype,"$conditionalHandlers",{enumerable:!1,value:SSt});function Bve(){return new mJ}Bve.$runBeforeSetters=!0;function wSt(t){return hJ||(hJ=ac()),this instanceof hJ&&t===void 0?new mJ:t}Gn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return bSt("string","objectId",e?.useBsonType,r)};Gn.prototype.autoEncryptionType=function(){return"objectId"};qve.exports=Gn});var $ve=m((ZEr,jve)=>{"use strict";var ASt=Ca(),au=class extends ASt{},xd=su();Object.defineProperty(au.prototype,"enum",xd);Object.defineProperty(au.prototype,"match",xd);Object.defineProperty(au.prototype,"lowercase",xd);Object.defineProperty(au.prototype,"trim",xd);Object.defineProperty(au.prototype,"uppercase",xd);Object.defineProperty(au.prototype,"minLength",xd);Object.defineProperty(au.prototype,"minlength",xd);Object.defineProperty(au.prototype,"maxLength",xd);Object.defineProperty(au.prototype,"maxlength",xd);Object.defineProperty(au.prototype,"populate",xd);jve.exports=au});var gJ=m((ebr,Gve)=>{"use strict";var nf=vi(),sS=wa(),CSt=$ve(),TSt=ox(),OSt=lo(),Kve=Tt(),xSt=js(),Vve=nf.CastError;function Sr(t,e){this.enumValues=[],this.regExp=null,nf.call(this,t,e,"String")}Sr.schemaName="String";Sr.defaultOptions={};Sr.prototype=Object.create(nf.prototype);Sr.prototype.constructor=Sr;Object.defineProperty(Sr.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:CSt});Sr._cast=TSt;Sr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Sr._defaultCaster=t=>{if(t!=null&&typeof t!="string")throw new Error;return t};Sr.get=nf.get;Sr.set=nf.set;Sr.setters=[];Sr._checkRequired=t=>(t instanceof String||typeof t=="string")&&t.length;Sr.checkRequired=nf.checkRequired;Sr.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;let t,e;Kve.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=Kve.object.vals(arguments[0]),e=sS.messages.String.enum):(t=arguments,e=sS.messages.String.enum);for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=function(n){return n==null||~r.indexOf(n)},this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};Sr.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toLowerCase()))};Sr.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toUpperCase()))};Sr.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.trim()))};Sr.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minlengthValidator},this)),t!=null){let r=e||sS.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(n){return n===null||n.length>=t},message:r,type:"minlength",minlength:t})}return this};Sr.prototype.minLength=Sr.prototype.minlength;Sr.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxlengthValidator},this)),t!=null){let r=e||sS.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(n){return n===null||n.length<=t},message:r,type:"maxlength",maxlength:t})}return this};Sr.prototype.maxLength=Sr.prototype.maxlength;Sr.prototype.match=function(e,r){let n=r||sS.messages.String.match,i=function(s){return e?(e.lastIndex=0,s!=null&&s!==""?e.test(s):!0):!1};return this.validators.push({validator:i,message:n,type:"regexp",regexp:e}),this};Sr.prototype.checkRequired=function(e,r){return typeof e=="object"&&nf._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Sr.checkRequired())(e)};Sr.prototype.cast=function(t,e,r,n,i){if(typeof t!="string"&&nf._isRef(this,t,e,r))return this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Sr.cast();try{return s(t)}catch{throw new Vve("string",t,this.path,null,this)}};function iS(t,e){return this.castForQuery(null,t,e)}function ISt(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function Uve(t){return t==null?this._castNullish(t):this.cast(t,this)}var RSt={...nf.prototype.$conditionalHandlers,$all:ISt,$gt:iS,$gte:iS,$lt:iS,$lte:iS,$options:Uve,$regex:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"?e:Uve.call(this,e)},$not:iS};Object.defineProperty(Sr.prototype,"$conditionalHandlers",{enumerable:!1,value:RSt});Sr.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with String.");return n.call(this,e,r)}if(Object.prototype.toString.call(e)==="[object RegExp]"||xSt(e,"BSONRegExp"))return e;try{return this.applySetters(e,r)}catch(i){throw i instanceof Vve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Sr.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return OSt("string","string",e?.useBsonType,r)};Sr.prototype.autoEncryptionType=function(){return"string"};Gve.exports=Sr});var zve=m((tbr,_J)=>{"use strict";var bJ=cE(),EJ=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,DSt=bJ.Binary;_J.exports=function(e){if(e==null)return e;function r(n){let i=new bJ(n);return i._subtype=4,i}if(typeof e=="string"){if(EJ.test(e))return Hve(e);throw new Error(`"${e}" is not a valid UUID string`)}if(Buffer.isBuffer(e))return r(e);if(e instanceof DSt)return r(e.value(!0));if(e.toString&&e.toString!==Object.prototype.toString&&EJ.test(e.toString()))return Hve(e.toString());throw new Error(`"${e}" cannot be casted to a UUID`)};_J.exports.UUID_FORMAT=EJ;function kSt(t){return t!=null&&Buffer.from(t,"hex")}function Hve(t){typeof t!="string"&&(t="");let e=t.replace(/[{}-]/g,""),r=kSt(e),n=new bJ(r);return n._subtype=4,n}});var Xve=m((rbr,Qve)=>{"use strict";var MSt=cE(),hh=vi(),Wve=hh.CastError,Jve=zve(),PSt=lo(),Yve=Tt(),Px=Wv(),NSt=Jve.UUID_FORMAT,FSt=MSt.Binary;function Nx(t){let e;return typeof t!="string"&&t!=null?(e=t.toString("hex"),e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32)):t}function Ai(t,e){hh.call(this,t,e,"UUID"),this.getters.push(function(r){return r!=null&&r.$__!=null?r:Buffer.isBuffer(r)?Nx(r):r instanceof FSt?Nx(r.buffer):Yve.isPOJO(r)&&r.type==="Buffer"&&Array.isArray(r.data)?Nx(Buffer.from(r.data)):r})}Ai.schemaName="UUID";Ai.defaultOptions={};Ai.prototype=Object.create(hh.prototype);Ai.prototype.constructor=Ai;Ai._cast=Jve;Ai.get=hh.get;Ai.set=hh.set;Ai.setters=[];Ai.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ai._checkRequired=t=>t!=null;Ai.checkRequired=hh.checkRequired;Ai.prototype.checkRequired=function(e){return Buffer.isBuffer(e)&&(e=Nx(e)),e!=null&&NSt.test(e)};Ai.prototype.cast=function(t,e,r,n,i){if(Yve.isNonBuiltinObject(t)&&hh._isRef(this,t,e,r))return this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Ai.cast();try{return s(t)}catch(o){throw new Wve(Ai.schemaName,t,this.path,o,this)}};function oS(t){return this.cast(t)}function vJ(t){return t.map(e=>this.cast(e))}var BSt={...hh.prototype.$conditionalHandlers,$bitsAllClear:Px,$bitsAnyClear:Px,$bitsAllSet:Px,$bitsAnySet:Px,$all:vJ,$gt:oS,$gte:oS,$in:vJ,$lt:oS,$lte:oS,$ne:oS,$nin:vJ};Object.defineProperty(Ai.prototype,"$conditionalHandlers",{enumerable:!1,value:BSt});Ai.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with UUID.");return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof Wve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Ai.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return PSt("string","binData",e?.useBsonType,r)};Ai.prototype.autoEncryptionType=function(){return"binData"};Qve.exports=Ai});var eSe=m((nbr,Zve)=>{"use strict";var qSt=Ca(),Fx=class extends qSt{},LSt=su();Object.defineProperty(Fx.prototype,"of",LSt);Zve.exports=Fx});var rSe=m((ibr,tSe)=>{"use strict";var jSt=eSe(),$St=vi(),xE=Symbol("firstValue");var IE=class extends $St{constructor(e,r,n={}){if(super(e,r,"Union"),!r||!Array.isArray(r.of)||r.of.length===0)throw new Error("Union schema type requires an array of types");this.schemaTypes=r.of.map(i=>r.parentSchema.interpretAsType(e,i,n))}cast(e,r,n,i,s){let o=xE,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u].cast(e,r,n,i,s);if(c===e)return c;o===xE&&(o=c)}catch(c){a=c}if(o!==xE)return o;throw a}applySetters(e,r,n,i,s){let o=xE,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u]._applySetters(e,r,n,i,s);if(c==null?c=this.schemaTypes[u]._castNullish(c):c=this.schemaTypes[u].cast(c,r,n,i,s),c===e)return c;o===xE&&(o=c)}catch(c){a=c}if(o!==xE)return o;throw a}clone(){let e=super.clone();return e.schemaTypes=this.schemaTypes.map(r=>r.clone()),e}};IE.schemaName="Union";IE.defaultOptions={};IE.prototype.OptionsConstructor=jSt;tSe.exports=IE});var zv=m(tn=>{"use strict";tn.Array=px();tn.BigInt=a3e();tn.Boolean=l3e();tn.Buffer=m3e();tn.Date=w3e();tn.Decimal128=tn.Decimal=O3e();tn.DocumentArray=gve();tn.Double=Sve();tn.Int32=Ove();tn.Map=kve();tn.Mixed=$0();tn.Number=FW();tn.ObjectId=Lve();tn.String=gJ();tn.Subdocument=aJ();tn.UUID=Xve();tn.Union=rSe();tn.Oid=tn.ObjectId;tn.Object=tn.Mixed;tn.Bool=tn.Boolean;tn.ObjectID=tn.ObjectId});var G0=m((TJ,fSe)=>{"use strict";var KSt=require("events").EventEmitter,USt=B0(),sf=Qt(),AJ=vi(),nSe=Ca(),VSt=yW(),CJ=ZO(),iSe=EW(),Vs=Vn(),sSe=si(),GSt=Fo(),HSt=G_e(),Lx=vW(),zSt=W_e(),oSe=Y_e(),WSt=bO(),Bx=ou(),JSt=X_e(),YSt=u4e(),rn=Tt(),QSt=l4e(),XSt=/\.\d+(\.|$)/,mh,ZSt=tx().queryMiddlewareFunctions,ewt=rx().middlewareFunctions,aSe=ZSt.concat(ewt).reduce((t,e)=>t.add(e),new Set),SJ=rn.isPOJO,uSe=0,twt=/^\d+$/;function Be(t,e){if(!(this instanceof Be))return new Be(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=e&&e.methods||{},this.methodOptions={},this.statics=e&&e.statics||{},this.tree={},this.query=e&&e.query||{},this.childSchemas=[],this.plugins=[],this.$id=++uSe,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new USt},this.options=this.defaultOptions(e),Array.isArray(t))for(let i of t)this.add(i);else t&&this.add(t);if(e&&e.virtuals){let i=e.virtuals,s=Object.keys(i);for(let o of s){let a=i[o].options?i[o].options:void 0,u=this.virtual(o,a);i[o].get&&u.get(i[o].get),i[o].set&&u.set(i[o].set)}}let r=t&&t._id&&rn.isObject(t._id);!this.paths._id&&this.options._id&&!r&&iSe(this),this.setupTimestamp(this.options.timestamps)}function cSe(t,e){for(let r of Object.keys(e)){let n=null;if(e[r]!=null)n=e[r];else{let s=sSe(t.paths[r],"options");if(s==null)continue;n=s.alias}if(!n)continue;let i=t.paths[r].path;if(Array.isArray(n)){for(let s of n){if(typeof s!="string")throw new Error("Invalid value for alias option on "+i+", got "+s);t.aliases[s]=i,t.virtual(s).get((function(o){return function(){return typeof this.get=="function"?this.get(o):this[o]}})(i)).set((function(o){return function(a){return this.$set(o,a)}})(i))}continue}if(typeof n!="string")throw new Error("Invalid value for alias option on "+i+", got "+n);t.aliases[n]=i,t.virtual(n).get((function(s){return function(){return typeof this.get=="function"?this.get(s):this[s]}})(i)).set((function(s){return function(o){return this.$set(s,o)}})(i))}}Be.prototype=Object.create(KSt.prototype);Be.prototype.constructor=Be;Be.prototype.instanceOfSchema=!0;Object.defineProperty(Be.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(Be.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(Be.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});Be.prototype.obj;Be.prototype.paths;Be.prototype.tree;Be.prototype.clone=function(){let t=this._clone();return t.on("init",e=>this.emit("init",e)),t};Be.prototype._clone=function(e){e=e||(this.base==null?Be:this.base.Schema);let r=new e({},this._userProvidedOptions);r.base=this.base,r.obj=this.obj,r.options=Vs(this.options),r.callQueue=this.callQueue.map(function(n){return n}),r.methods=Vs(this.methods),r.methodOptions=Vs(this.methodOptions),r.statics=Vs(this.statics),r.query=Vs(this.query),r.plugins=Array.prototype.slice.call(this.plugins),r._indexes=Vs(this._indexes),r._searchIndexes=Vs(this._searchIndexes),r.s.hooks=this.s.hooks.clone(),r.tree=Vs(this.tree),r.paths=Object.fromEntries(Object.entries(this.paths).map(([n,i])=>[n,i.clone()])),r.nested=Vs(this.nested),r.subpaths=Vs(this.subpaths);for(let n of Object.values(r.paths))if(n.$isSingleNested){let i=n.path;for(let s of Object.keys(n.schema.paths))r.singleNestedPaths[i+"."+s]=n.schema.paths[s];for(let s of Object.keys(n.schema.singleNestedPaths))r.singleNestedPaths[i+"."+s]=n.schema.singleNestedPaths[s];for(let s of Object.keys(n.schema.subpaths))r.singleNestedPaths[i+"."+s]=n.schema.subpaths[s];for(let s of Object.keys(n.schema.nested))r.singleNestedPaths[i+"."+s]="nested"}return r._gatherChildSchemas(),r.virtuals=Vs(this.virtuals),r.$globalPluginsApplied=this.$globalPluginsApplied,r.$isRootDiscriminator=this.$isRootDiscriminator,r.$implicitlyCreated=this.$implicitlyCreated,r.$id=++uSe,r.$originalSchemaId=this.$id,r.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(r.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(r.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(r._applyDiscriminators=new Map(this._applyDiscriminators)),r.aliases=Object.assign({},this.aliases),r.encryptedFields=Vs(this.encryptedFields),r};Be.prototype.pick=function(t,e){let r=new Be({},e||this.options);if(!Array.isArray(t))throw new sf('Schema#pick() only accepts an array argument, got "'+typeof t+'"');for(let n of t)if(this._hasEncryptedField(n)){let i=this.encryptedFields[n],s=this.path(n);r.add({[n]:{encrypt:i,[this.options.typeKey]:s}})}else if(this.nested[n])r.add({[n]:sSe(this.tree,n)});else{let i=this.path(n);if(i==null)throw new sf("Path `"+n+"` is not in the schema");r.add({[n]:i})}return this._hasEncryptedFields()||(r.options.encryptionType=null),r};Be.prototype.omit=function(t,e){let r=new Be(this,e||this.options);if(!Array.isArray(t))throw new sf('Schema#omit() only accepts an array argument, got "'+typeof t+'"');r.remove(t);for(let n in r.singleNestedPaths)t.includes(n)&&delete r.singleNestedPaths[n];return r};Be.prototype.defaultOptions=function(t){this._userProvidedOptions=t==null?{}:Vs(t);let e=this.base&&this.base.options||{},r="strict"in e?e.strict:!0,n="strictQuery"in e?e.strictQuery:!1,i="id"in e?e.id:!0;if(t={strict:r,strictQuery:n,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:i,typeKey:"type",...t},t.versionKey&&typeof t.versionKey!="string")throw new sf("`versionKey` must be falsy or string, got `"+typeof t.versionKey+"`");if(typeof t.read=="string"?t.read=Lx(t.read):Array.isArray(t.read)&&typeof t.read[0]=="string"&&(t.read={mode:Lx(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new sf("Must set `versionKey` if using `optimisticConcurrency`");return t};Be.prototype.discriminator=function(t,e,r){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(t,{schema:e,options:r}),this};Be.prototype._defaultToObjectOptions=function(t){let e=t?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[e])return this._defaultToObjectOptionsMap[e];let r=this.base&&this.base.options&&this.base.options[e]||{},n=this.options[e]||{},i=Object.assign({},r,n);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[e]=i,i};Be.prototype.encryptionType=function(t){if(arguments.length===0)return this.options.encryptionType;if(!(typeof t=="string"||t===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=t};Be.prototype.add=function(e,r){if(e instanceof Be||e!=null&&e.instanceOfSchema)return WSt(this,e),this;if(e._id===!1&&r==null&&(this.options._id=!1),r=r||"",r==="__proto__."||r==="constructor."||r==="prototype.")return this;let n=Object.keys(e),i=this.options.typeKey;for(let o of n){if(rn.specialProperties.has(o))continue;let a=r+o,u=e[o];if(u==null)throw new TypeError("Invalid value for schema path `"+a+'`, got value "'+u+'"');if(o==="_id"&&u===!1)continue;let c=!1;if(typeof u=="string"){let l=this.base!=null?this.base.Schema.Types:Be.Types,d=u.charAt(0).toUpperCase()+u.substring(1);c=l[d]!=null}if(o!=="_id"&&(typeof u!="object"&&typeof u!="function"&&!c||u==null))throw new TypeError(`Invalid schema configuration: \`${u}\` is not a valid type at path \`${o}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(u instanceof CJ||(u.constructor&&u.constructor.name||null)==="VirtualType"){this.virtual(u);continue}if(Array.isArray(u)&&u.length===1&&u[0]==null)throw new TypeError("Invalid value for schema Array path `"+a+'`, got value "'+u[0]+'"');if(SJ(u)||u instanceof nSe)if(Object.keys(u).length<1)r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(a,u);else if(!u[i]||i==="type"&&SJ(u.type)&&u.type.type)this.nested[a]=!0,this.add(u,a+".");else{let l=u[i];if(SJ(l)&&Object.keys(l).length>0){r&&(this.nested[r.substring(0,r.length-1)]=!0);let d={};this._userProvidedOptions.typeKey&&(d.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(d.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(d.toObject=rn.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(d.toJSON=rn.omit(this._userProvidedOptions.toJSON,["transform"]));let p=new Be(l,d);p.$implicitlyCreated=!0;let f=Object.assign({},u,{[i]:p});this.path(r+o,f)}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),u!=null&&!u.instanceOfSchema&&rn.isPOJO(u.discriminators)){let d=this.path(r+o);for(let p in u.discriminators)d.discriminator(p,u.discriminators[p])}}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),u[0]!=null&&!u[0].instanceOfSchema&&rn.isPOJO(u[0].discriminators)){let l=this.path(r+o);for(let d in u[0].discriminators)l.discriminator(d,u[0].discriminators[d])}if(u.instanceOfSchema&&u.encryptionType()!=null){if(this.encryptionType()!=u.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[l,d]of Object.entries(u.encryptedFields)){let p=a+"."+l;this._addEncryptedField(p,d)}}else if(typeof u=="object"&&"encrypt"in u){let{encrypt:l}=u;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(a,l)}else this._removeEncryptedField(a)}let s=Object.fromEntries(Object.entries(e).map(([o])=>[r+o,null]));return cSe(this,s),this};Be.prototype._addEncryptedField=function(e,r){if(this.path(e).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${e}'`);this.encryptedFields[e]=Vs(r)};Be.prototype._removeEncryptedField=function(e){delete this.encryptedFields[e]};Be.prototype._hasEncryptedFields=function(){return Object.keys(this.encryptedFields).length>0};Be.prototype._hasEncryptedField=function(e){return e in this.encryptedFields};Be.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([e,r])=>{let n=this.path(e).autoEncryptionType();return{path:e,bsonType:n,...r}})}};Be.prototype._buildSchemaMap=function(){function t(n,i,s){let o=0,a=n[o];for(;o<n.length-1;++o,a=n[o])i[a]=i[a]==null?{bsonType:"object",properties:{}}:i[a],i=i[a].properties;i[a]=s}let e=(n,[i,s])=>{let o=this.path(i).autoEncryptionType(),a=i.split("."),u={encrypt:{...s,bsonType:o}};return t(a,n,u),n};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(e,{})}};Be.prototype.alias=function(t,e){return cSe(this,{[t]:e}),this};Be.prototype.removeIndex=function(e){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof e!="object"&&typeof e!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof e=="object")for(let r=this._indexes.length-1;r>=0;--r)oSe(this._indexes[r][0],e)&&this._indexes.splice(r,1);else for(let r=this._indexes.length-1;r>=0;--r)this._indexes[r][1]!=null&&this._indexes[r][1].name===e&&this._indexes.splice(r,1);return this};Be.prototype.clearIndexes=function(){return this._indexes.length=0,this};Be.prototype.searchIndex=function(e){return this._searchIndexes.push(e),this};Be.reserved=Object.create(null);Be.prototype.reserved=Be.reserved;var Us=Be.reserved;Us.prototype=Us.emit=Us.listeners=Us.removeListener=Us.collection=Us.errors=Us.get=Us.init=Us.isModified=Us.isNew=Us.populated=Us.remove=Us.save=Us.toObject=Us.validate=1;Us.collection=1;Be.prototype.path=function(t,e){if(e===void 0){if(this.paths[t]!=null)return this.paths[t];let u=lSe(t),c=rwt(this,t,u);if(c!=null)return c;let l=dSe(this,t);return l??(c=this.hasMixedParent(u),c??(XSt.test(t)?iwt(this,t,u):void 0))}let r=t.split(".")[0];if(Us[r]&&!this.options.suppressReservedKeysWarning){let u=`\`${r}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;rn.warn(u)}typeof e=="object"&&rn.hasUserDefinedProperty(e,"ref")&&QSt(e.ref,t);let n=t.split(/\./),i=n.pop(),s=this.tree,o="";for(let u of n){if(rn.specialProperties.has(u))throw new Error("Cannot set special property `"+u+"` on a schema");if(o=o+=(o.length>0?".":"")+u,s[u]||(this.nested[o]=!0,s[u]={}),typeof s[u]!="object"){let c="Cannot set nested path `"+t+"`. Parent path `"+o+"` already set to type "+s[u].name+".";throw new Error(c)}s=s[u]}s[i]=Vs(e),this.paths[t]=this.interpretAsType(t,e,this.options);let a=this.paths[t];if(this.childSchemas=this.childSchemas.filter(u=>u.path!==t),a.$isSchemaMap){let u=t+".$*";this.paths[u]=a.$__schemaType,this.mapPaths.push(this.paths[u]),a.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:a.$__schemaType.schema,model:a.$__schemaType.caster,path:t})}if(a.$isSingleNested){for(let u of Object.keys(a.schema.paths))this.singleNestedPaths[t+"."+u]=a.schema.paths[u];for(let u of Object.keys(a.schema.singleNestedPaths))this.singleNestedPaths[t+"."+u]=a.schema.singleNestedPaths[u];for(let u of Object.keys(a.schema.subpaths))this.singleNestedPaths[t+"."+u]=a.schema.subpaths[u];for(let u of Object.keys(a.schema.nested))this.singleNestedPaths[t+"."+u]="nested";Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.caster.base=this.base,this.childSchemas.push({schema:a.schema,model:a.caster,path:t})}else a.$isMongooseDocumentArray&&(Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.casterConstructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.casterConstructor,path:t}));if(a.$isMongooseArray&&a.caster instanceof AJ){let u=t,c=a,l=[];for(;c.$isMongooseArray;)u=u+".$",c.$isMongooseDocumentArray?(c.$embeddedSchemaType._arrayPath=u,c.$embeddedSchemaType._arrayParentPath=t,c=c.$embeddedSchemaType):(c.caster._arrayPath=u,c.caster._arrayParentPath=t,c=c.caster),this.subpaths[u]=c;for(let d of l)this.subpaths[d.path]=d}if(a.$isMongooseDocumentArray){for(let u of Object.keys(a.schema.paths)){let c=a.schema.paths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.subpaths)){let c=a.schema.subpaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.singleNestedPaths)){let c=a.schema.singleNestedPaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}}return this};Be.prototype._gatherChildSchemas=function(){let e=[];for(let r of Object.keys(this.paths)){if(typeof r!="string")continue;let n=this.paths[r];n.$isMongooseDocumentArray||n.$isSingleNested?e.push({schema:n.schema,model:n.caster,path:r}):n.$isSchemaMap&&n.$__schemaType.$isSingleNested&&e.push({schema:n.$__schemaType.schema,model:n.$__schemaType.caster,path:r})}return this.childSchemas=e,e};function rwt(t,e,r){if(t.paths.hasOwnProperty(e))return t.paths[e];if(t.subpaths.hasOwnProperty(r)){let n=t.subpaths[r];return n==="nested"?void 0:n}if(t.singleNestedPaths.hasOwnProperty(r)&&typeof t.singleNestedPaths[r]=="object"){let n=t.singleNestedPaths[r];return n==="nested"?void 0:n}return null}function lSe(t){return/\.\d+/.test(t)?t.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):t}function dSe(t,e){if(t.mapPaths.length===0)return null;for(let r of t.mapPaths){let n=r.path.replace(/\.\$\*/g,"");if(e===n||e.startsWith(n+".")&&e.slice(n.length+1).indexOf(".")===-1)return r;if(r.schema&&e.startsWith(n+".")){let i=e.slice(n.length+1);return i=i.slice(i.indexOf(".")+1),r.schema.paths[i]}else if(r.$isSchemaMap&&e.startsWith(n+".")){let i=e.slice(n.length+1);i=i.slice(i.indexOf(".")+1);let s=r.$__schemaType._presplitPath;if(i.indexOf(".")===-1&&s[s.length-1]==="$*")return r.$__schemaType;if(i.indexOf(".")!==-1&&r.$__schemaType.schema&&s[s.length-1]==="$*")return r.$__schemaType.schema.path(i.slice(i.indexOf(".")+1))}}return null}Object.defineProperty(Be.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});Be.prototype.interpretAsType=function(t,e,r){if(e instanceof AJ){if(e.path===t)return e;let u=e.clone();return u.path=t,u}let n=this.base!=null?this.base.Schema.Types:Be.Types,i=this.base!=null?this.base.Types:yE();if(!rn.isPOJO(e)&&!(e instanceof nSe)&&rn.getFunctionName(e.constructor)!=="Object"){let c=e;e={},e[r.typeKey]=c}let s=e[r.typeKey]&&(e[r.typeKey]instanceof Function||r.typeKey!=="type"||!e.type.type)?e[r.typeKey]:{};if(s instanceof AJ){if(s.path===t)return s;let u=s.clone();return u.path=t,u}let o;if(rn.isPOJO(s)||s==="mixed")return new n.Mixed(t,e);if(Array.isArray(s)||s===Array||s==="array"||s===n.Array){let u=s===Array||s==="array"?e.cast||e.of:s[0];if(u&&u.instanceOfSchema){if(!(u instanceof Be))if(this.options._isMerging)u=new Be(u);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u,e)}if(u&&u[r.typeKey]&&u[r.typeKey].instanceOfSchema){if(!(u[r.typeKey]instanceof Be))if(this.options._isMerging)u[r.typeKey]=new Be(u[r.typeKey]);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u[r.typeKey],e,u)}if(typeof u<"u"&&(Array.isArray(u)||u.type===Array||u.type=="Array"))return u&&u.type=="Array"&&(u.type=Array),new n.Array(t,this.interpretAsType(t,u,r),e);let c=u!=null&&u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u;if(typeof u=="string")u=n[u.charAt(0).toUpperCase()+u.substring(1)];else if(rn.isPOJO(c))if(Object.keys(c).length){let l={minimize:r.minimize};r.typeKey&&(l.typeKey=r.typeKey),r.hasOwnProperty("strict")&&(l.strict=r.strict),r.hasOwnProperty("strictQuery")&&(l.strictQuery=r.strictQuery),r.hasOwnProperty("toObject")&&(l.toObject=rn.omit(r.toObject,["transform"])),r.hasOwnProperty("toJSON")&&(l.toJSON=rn.omit(r.toJSON,["transform"])),this._userProvidedOptions.hasOwnProperty("_id")?l._id=this._userProvidedOptions._id:Be.Types.DocumentArray.defaultOptions._id!=null&&(l._id=Be.Types.DocumentArray.defaultOptions._id);let d=new Be(c,l);return d.$implicitlyCreated=!0,new n.DocumentArray(t,d,e)}else return new n.Array(t,n.Mixed,e);if(u){if(s=u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u,Array.isArray(s))return new n.Array(t,this.interpretAsType(t,s,r),e);if(o=typeof s=="string"?s:s.schemaName||rn.getFunctionName(s),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${t}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!n.hasOwnProperty(o))throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type within the array \`${t}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new n.Array(t,u||n.Mixed,e,r)}if(s&&s.instanceOfSchema)return new n.Subdocument(s,t,e);if(Buffer.isBuffer(s)?o="Buffer":typeof s=="function"||typeof s=="object"?o=s.schemaName||rn.getFunctionName(s):s===i.ObjectId?o="ObjectId":s===i.Decimal128?o="Decimal128":o=s==null?""+s:s.toString(),o&&(o=o.charAt(0).toUpperCase()+o.substring(1)),o==="ObjectID"&&(o="ObjectId"),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: \`${t}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(n[o]==null)throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type at path \`${t}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);o==="Union"&&(e.parentSchema=this);let a=new n[o](t,e,r);return a.$isSchemaMap&&nwt(this,a,t,e,r),a};function nwt(t,e,r,n,i){let s=r+".$*",o={type:{}};rn.hasUserDefinedProperty(n,"of")&&(rn.isPOJO(n.of)&&Object.keys(n.of).length>0&&!rn.hasUserDefinedProperty(n.of,t.options.typeKey)?o={[t.options.typeKey]:new Be(n.of)}:rn.isPOJO(n.of)?o=Object.assign({},n.of):o={[t.options.typeKey]:n.of},o[t.options.typeKey]&&o[t.options.typeKey].instanceOfSchema&&o[t.options.typeKey].eachPath((c,l)=>{if(l.options.select===!0||l.options.select===!1)throw new sf('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+r+"."+c+'"')}),rn.hasUserDefinedProperty(n,"ref")&&(o.ref=n.ref)),e.$__schemaType=t.interpretAsType(s,o,i)}Be.prototype.eachPath=function(t){let e=Object.keys(this.paths),r=e.length;for(let n=0;n<r;++n)t(e[n],this.paths[e[n]]);return this};Be.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;let r=Object.keys(this.paths),n=r.length,i=[];for(;n--;){let s=r[n];this.paths[s].isRequired&&i.push(s)}return this._requiredpaths=i,this._requiredpaths};Be.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)};Be.prototype.pathType=function(t){if(this.paths.hasOwnProperty(t))return"real";if(this.virtuals.hasOwnProperty(t))return"virtual";if(this.nested.hasOwnProperty(t))return"nested";let e=lSe(t);if(this.subpaths.hasOwnProperty(e)||this.subpaths.hasOwnProperty(t))return"real";let r=this.singleNestedPaths.hasOwnProperty(e)||this.singleNestedPaths.hasOwnProperty(t);return r?r==="nested"?"nested":"real":dSe(this,t)!=null?"real":/\.\d+\.|\.\d+$/.test(t)?pSe(this,t,e):"adhocOrUndefined"};Be.prototype.hasMixedParent=function(t){let e=t.split(/\./g);t="";for(let r=0;r<e.length;++r)if(t=r>0?t+"."+e[r]:e[r],this.paths.hasOwnProperty(t)&&this.paths[t]instanceof mh.Mixed)return this.paths[t];return null};Be.prototype.setupTimestamp=function(t){return YSt(this,t)};function pSe(t,e,r){let n=e.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(n.length<2)return t.paths.hasOwnProperty(n[0])?t.paths[n[0]]:"adhocOrUndefined";let i=t.path(n[0]),s=!1;if(!i)return"adhocOrUndefined";let o=n.length-1;for(let a=1;a<n.length;++a){s=!1;let u=n[a];if(a===o&&i&&!/\D/.test(u)){i.$isMongooseDocumentArray?i=i.$embeddedSchemaType:i instanceof mh.Array?i=i.caster:i=void 0;break}if(!/\D/.test(u)){i instanceof mh.Array&&a!==o&&(i=i.caster);continue}if(!(i&&i.schema)){i=void 0;break}s=i.schema.pathType(u)==="nested",i=i.schema.path(u)}return t.subpaths[r]=i,i?"real":s?"nested":"adhocOrUndefined"}function iwt(t,e,r){return pSe(t,e,r),t.subpaths[r]}Be.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this};Be.prototype.pre=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of aSe)t.test(r)&&this.pre.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.pre.apply(this,[r].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};Be.prototype.post=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of aSe)t.test(r)&&this.post.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.post.apply(this,[r].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};Be.prototype.plugin=function(t,e){if(typeof t!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof t+'"');if(e&&e.deduplicate){for(let r of this.plugins)if(r.fn===t)return this}return this.plugins.push({fn:t,opts:e}),t(this,e),this};Be.prototype.method=function(t,e,r){if(typeof t!="string")for(let n in t)this.methods[n]=t[n],this.methodOptions[n]=Vs(r);else this.methods[t]=e,this.methodOptions[t]=Vs(r);return this};Be.prototype.static=function(t,e){if(typeof t!="string")for(let r in t)this.statics[r]=t[r];else this.statics[t]=e;return this};Be.prototype.index=function(t,e){t||(t={}),e||(e={}),e.expires&&rn.expires(e);for(let r in t)this.aliases[r]&&(t=rn.renameObjKey(t,r,this.aliases[r]));for(let r of Object.keys(t))t[r]==="ascending"||t[r]==="asc"?t[r]=1:(t[r]==="descending"||t[r]==="desc")&&(t[r]=-1);for(let r of this.indexes())e.name==null&&r[1].name==null&&oSe(r[0],t)&&rn.warn(`Duplicate schema index on ${JSON.stringify(t)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([t,e]),this};Be.prototype.set=function(t,e,r){if(arguments.length===1)return this.options[t];switch(t){case"read":typeof e=="string"?this.options[t]={mode:Lx(e),tags:r}:Array.isArray(e)&&typeof e[0]=="string"?this.options[t]={mode:Lx(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"timestamps":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"_id":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?iSe(this):!e&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break}return t==="strict"&&aS(this,{strict:e}),t==="strictQuery"&&aS(this,{strictQuery:e}),t==="toObject"&&(e={...e},delete e.transform,aS(this,{toObject:e})),t==="toJSON"&&(e={...e},delete e.transform,aS(this,{toJSON:e})),this};function aS(t,e){for(let{schema:r}of t.childSchemas)r.$implicitlyCreated&&(Object.assign(r.options,e),aS(r,e))}Be.prototype.get=function(t){return this.options[t]};var swt="2d 2dsphere hashed text".split(" ");Object.defineProperty(Be,"indexTypes",{get:function(){return swt},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});Be.prototype.indexes=function(){return HSt(this)};Be.prototype.virtual=function(t,e){if(t instanceof CJ||GSt(t)==="VirtualType")return this.virtual(t.path,t.options);if(e=new VSt(e),rn.hasUserDefinedProperty(e,["ref","refPath"])){if(e.localField==null)throw new Error("Reference virtuals require `localField` option");if(e.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let i=this.virtual(t);i.options=e,this.pre("init",function(u,c){if(Bx.has(t,u)){let l=Bx.get(t,u);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(l)?l[0]:l:this.$$populatedVirtuals[t]=Array.isArray(l)?l:l==null?[]:[l],c?.hydratedPopulatedDocs&&!e.count){let d=i._getModelNamesForPopulate(this),p=this.$$populatedVirtuals[t];if(!Array.isArray(p)&&!p.$__&&d?.length===1){let f=this.db.model(d[0]);this.$$populatedVirtuals[t]=f.hydrate(p)}else if(Array.isArray(p)&&d?.length===1){let f=this.db.model(d[0]);for(let g=0;g<p.length;++g)p[g].$__||(p[g]=f.hydrate(p[g],null,{hydratedPopulatedDocs:!0}));let h=e.foreignField;this.$populated(t,p.map(g=>g==null?g:g.get(typeof h=="function"?h.call(g,g):h)),{populateModelSymbol:f})}}Bx.unset(t,u)}}),i.set(function(a){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),JSt(this.$$populatedVirtuals,t,a,e)}),typeof e.get=="function"&&i.get(e.get);let s=t.split("."),o=s[0];for(let a=0;a<s.length-1;++a)if(this.paths[o]!=null){if(this.paths[o].$isMongooseDocumentArray||this.paths[o].$isSingleNested){let u=s.slice(a+1).join(".");this.paths[o].schema.virtual(u,e);break}else if(this.paths[o].$isSchemaMap){let u=s.slice(a+2).join(".");this.paths[o].$__schemaType.schema.virtual(u,e);break}o+="."+s[a+1]}return i}let r=this.virtuals,n=t.split(".");if(this.pathType(t)==="real")throw new Error('Virtual path "'+t+'" conflicts with a real path in the schema');if(r[t]=n.reduce(function(i,s,o){return i[s]||(i[s]=o===n.length-1?new CJ(e,t):{}),i[s]},this.tree),e&&e.applyToArray&&n.length>1){let i=this.path(n.slice(0,-1).join("."));if(i&&i.$isMongooseArray)return i.virtual(n[n.length-1],e);throw new sf(`Path "${i}" is not an array`)}return r[t]};Be.prototype.virtualpath=function(t){return this.virtuals.hasOwnProperty(t)?this.virtuals[t]:null};Be.prototype.remove=function(t){return typeof t=="string"&&(t=[t]),Array.isArray(t)&&t.forEach(function(e){if(!(this.path(e)==null&&!this.nested[e])){if(this.nested[e]){let r=Object.keys(this.paths).concat(Object.keys(this.nested));for(let n of r)n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],wJ(this,n));delete this.nested[e],wJ(this,e);return}delete this.paths[e],wJ(this,e),this._removeEncryptedField(e)}},this),this};function wJ(t,e){let r=e.split("."),n=r.pop(),i=t.tree;for(let s of r)i=i[s];delete i[n]}Be.prototype.removeVirtual=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){for(let e of t)if(this.virtuals[e]==null)throw new sf(`Attempting to remove virtual "${e}" that does not exist.`);for(let e of t)delete this.paths[e],delete this.virtuals[e],e.indexOf(".")!==-1?Bx.unset(e,this.tree):delete this.tree[e]}return this};Be.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||t.prototype.hasOwnProperty("$isMongooseModelPrototype")||t.prototype.hasOwnProperty("$isMongooseDocumentPrototype")?this:(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach(function(r){if(r.match(/^(length|name|prototype|constructor|__proto__)$/))return;let n=Object.getOwnPropertyDescriptor(t,r);n.hasOwnProperty("value")&&this.static(r,n.value)},this),Object.getOwnPropertyNames(t.prototype).forEach(function(r){if(r.match(/^(constructor)$/))return;let n=Object.getOwnPropertyDescriptor(t.prototype,r);e||typeof n.value=="function"&&this.method(r,n.value),typeof n.get=="function"&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),typeof n.set=="function"&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))},this),this)};Be.prototype._getSchema=function(t){let e=this,r=e.path(t),n=[];if(r)return r.$fullPath=t,r;function i(o,a){let u=o.length+1,c,l;for(;u--;)if(l=o.slice(0,u).join("."),c=a.path(l),c){if(n.push(l),c.caster){if(c.caster instanceof mh.Mixed)return c.caster.$fullPath=n.join("."),c.caster;if(u!==o.length){if(u+1===o.length&&c.$embeddedSchemaType&&(o[u]==="$"||qx(o[u])))return c.$embeddedSchemaType;if(c.schema){let d;return o[u]==="$"||qx(o[u])?u+1===o.length?c.$embeddedSchemaType:(d=i(o.slice(u+1),c.schema),d&&(d.$parentSchemaDocArray=d.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),d):(d=i(o.slice(u),c.schema),d&&(d.$parentSchemaDocArray=d.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),d)}}}else if(c.$isSchemaMap){if(u>=o.length)return c;if(u+1>=o.length||c.$__schemaType instanceof mh.Mixed)return c.$__schemaType;if(c.$__schemaType.schema!=null)return i(o.slice(u+1),c.$__schemaType.schema)}return c.$fullPath=n.join("."),c}}let s=t.split(".");for(let o=0;o<s.length;++o)(s[o]==="$"||qx(s[o]))&&(s[o]="0"),twt.test(s[o])&&(s[o]="$");return i(s,e)};Be.prototype._getPathType=function(t){let e=this;if(e.path(t))return"real";function n(i,s){let o=i.length+1,a,u;for(;o--;){if(u=i.slice(0,o).join("."),a=s.path(u),a)return a.caster?a.caster instanceof mh.Mixed?{schema:a,pathType:"mixed"}:o!==i.length&&a.schema?i[o]==="$"||qx(i[o])?o===i.length-1?{schema:a,pathType:"nested"}:n(i.slice(o+1),a.schema):n(i.slice(o),a.schema):{schema:a,pathType:a.$isSingleNested?"nested":"array"}:{schema:a,pathType:"real"};if(o===i.length&&s.nested[u])return{schema:s,pathType:"nested"}}return{schema:a||s,pathType:"undefined"}}return n(t.split("."),e)};Be.prototype._transformDuplicateKeyError=function(e){if(!this._duplicateKeyErrorMessagesByPath||e.code!==11e3&&e.code!==11001)return e;if(e.keyPattern!=null){let r=e.keyPattern,n=Object.keys(r);if(n.length!==1)return e;let i=n[0];return this._duplicateKeyErrorMessagesByPath.hasOwnProperty(i)?new sf(this._duplicateKeyErrorMessagesByPath[i],{cause:e}):e}return e};function qx(t){return t.startsWith("$[")&&t.endsWith("]")}Be.prototype._preCompile=function(){this.plugin(zSt,{deduplicate:!0})};Be.prototype.toJSONSchema=function(e){let r=e?.useBsonType??!1,n=r?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let i of Object.keys(this.paths)){let s=this.paths[i];if(s._presplitPath.indexOf("$*")!==-1)continue;let o=s._presplitPath.length>1,a=n;if(o)for(let l=0;l<s._presplitPath.length-1;++l){let d=s._presplitPath[l];a.properties[d]==null&&(a.properties[d]=r?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}}),a=a.properties[d]}let u=s._presplitPath[s._presplitPath.length-1],c=!1;i==="_id"?(a.required||(a.required=[]),a.required.push("_id"),c=!0):s.options.required&&typeof s.options.required!="function"&&(a.required||(a.required=[]),a.required.push(u),c=!0),a.properties[u]=s.toJSONSchema(e),s.options.enum&&(a.properties[u].enum=c?s.options.enum:[...s.options.enum,null])}return n.required.length===0&&delete n.required,n};fSe.exports=TJ=Be;Be.Types=mh=zv();TJ.ObjectId=mh.ObjectId});var OJ=m((obr,hSe)=>{"use strict";var owt=wa(),jx=class extends owt{constructor(e,r,n,i){let s=e.map(o=>o.message).join(", ");s.length>200&&(s=s.slice(0,200)+"..."),super(`${i} failed with ${e.length} Mongoose validation errors: ${s}`),this.validationErrors=e,this.results=r,this.rawResult=n,this.operation=i}};Object.defineProperty(jx.prototype,"name",{value:"MongooseBulkWriteError"});hSe.exports=jx});var ySe=m((abr,mSe)=>{"use strict";var awt=Qt(),$x=class extends awt{constructor(e,r){super(e),this.errors=r}};Object.defineProperty($x.prototype,"name",{value:"SyncIndexesError"});mSe.exports=$x});var xJ=m((ubr,gSe)=>{"use strict";gSe.exports=function t(e,r,n,i){if(e[i])return;if(e[i]=!0,!n||!n.skipTopLevel){let u=null;for(let c of r){let l=c[1]==null?null:c[1].tags;if(!Array.isArray(l)){e.plugin(c[0],c[1]);continue}u=u||new Set(e.options.pluginTags||[]),l.find(d=>u.has(d))&&e.plugin(c[0],c[1])}}if(n=Object.assign({},n),delete n.skipTopLevel,n.applyPluginsToChildSchemas!==!1)for(let u of Object.keys(e.paths)){let c=e.paths[u];c.schema!=null&&(t(c.schema,r,n,i),c.caster.prototype.$__setSchema(c.schema))}let s=e.discriminators;if(s==null)return;let o=n.applyPluginsToDiscriminators,a=Object.keys(s);for(let u of a){let c=s[u];t(c,r,{skipTopLevel:!o},i)}}});var Kx=m((cbr,IJ)=>{"use strict";var ESe=null;IJ.exports.get=function(){return ESe};IJ.exports.set=function(t){ESe=t}});var RJ=m((lbr,bSe)=>{"use strict";function uwt(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}bSe.exports=uwt});var vSe=m((dbr,_Se)=>{"use strict";var cwt=Qt(),Ux=class extends cwt{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(Ux.prototype,"name",{value:"CreateCollectionsError"});_Se.exports=Ux});var ASe=m((pbr,wSe)=>{"use strict";var SSe=RO().modifiedPaths;wSe.exports=function(e){let r=Object.keys(e),n={},i={};for(let s of r){if(s.startsWith("$")){SSe(e[s],"",n);continue}i[s]=e[s]}return SSe(i,"",n),n}});var DJ=m((fbr,CSe)=>{"use strict";var lwt=ASe();CSe.exports=function(e){if(e==null)return{};let r=lwt(e);return Object.keys(r).reduce((n,i)=>{let s=i.match(/\$\[[^\]]+\]/g);if(s==null)return n;for(let o of s){let a=i.indexOf(o);if(a!==i.lastIndexOf(o))throw new Error(`Path '${i}' contains the same array filter multiple times`);n[o.substring(2,o.length-1)]=i.substring(0,a-1).replace(/\$\[[^\]]+\]/g,"0")}return n},{})}});var xSe=m((hbr,OSe)=>{"use strict";var dwt=Kv(),TSe=si(),pwt=uc(),fwt=DJ();OSe.exports=function(e,r,n,i,s){let o=i.indexOf(".")===-1?[i]:i.split("."),a=null,u="adhocOrUndefined";n=n||{},r=r||{};let c=s!=null&&Array.isArray(s.arrayFilters)?s.arrayFilters:[],l=fwt(r),d=0;for(let p=0;p<o.length;++p){let f=o.slice(d,p+1).join("."),h=dwt(f);if(a=e.path(h),a!=null&&(u=e.pathType(h),(a.$isSingleNested||a.$isMongooseDocumentArrayElement)&&a.schema.discriminators!=null)){let g=TSe(a,"schema.options.discriminatorKey"),_=h+"."+g,S=_.replace(/\.\d+\./,"."),w=null;_ in n&&(w=n[_]),S in n&&(w=n[S]);let C=h.replace(/\.\d+$/,"");a.$isMongooseDocumentArrayElement&&TSe(n[C],"$elemMatch."+g)!=null&&(w=n[C].$elemMatch[g]);let A=f+"."+g;A in r&&(w=r[A]),_ in r&&(w=r[_]);for(let M of Object.keys(l)){let I=l[M]+"."+g,F=M+"."+g;if(I===S){let B=c.find(U=>U.hasOwnProperty(F));B!=null&&(w=B[F])}}if(w==null)continue;let O=pwt(a.caster.discriminators,w),x=O&&O.schema;if(x==null)continue;let R=o.slice(p+1).join(".");if(a=x.path(R),e=x,d=p+1,a!=null){u=x._getPathType(R);break}}}return{type:u,schematype:a}}});var RSe=m((mbr,ISe)=>{"use strict";var hwt=ah();ISe.exports=function(e,r,n,i,s,o,a){if(e==null||!e.options||!e.options.immutable)return!1;let u=e.options.immutable;if(typeof u=="function"&&(u=u.call(a,a)),!u||o&&o.overwriteImmutable||r===!1)return!1;if(r==="throw")throw new hwt(null,`Field ${s} is immutable and strict = 'throw'`);return delete n[i],!0}});var MSe=m((ybr,kSe)=>{"use strict";var mwt=si();kSe.exports=function(e,r,n){if(r==null)return;let i=Object.keys(r);for(let s of i){let o=s.startsWith("$");if(s==="$set"){let a=Object.keys(r[s]);for(let u of a)DSe(e,r[s],u,r,n)}else o||DSe(e,r,s,r,n)}};function DSe(t,e,r,n,i){let s=t.path(r);if(s==null)return;let o=mwt(s,"options.immutable",null);o!=null&&(typeof o=="function"&&(o=o.call(i,i)),o&&(n.$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[r]=e[r],delete e[r]))}});var MJ=m((gbr,PSe)=>{"use strict";var kJ=F0();PSe.exports=function(e,r,n){if(r.indexOf(".")===-1){if(kJ.has(r))return;e[r]=n;return}let i=r.split("."),s=i.pop(),o=e;for(let a of i)kJ.has(a)||(o[a]==null&&(o[a]={}),o=o[a]);kJ.has(s)||(o[s]=n)}});var LJ=m((Ebr,KSe)=>{"use strict";var Vx=uo(),DE=Qt(),NSe=gJ(),FSe=ah(),ywt=L0(),FJ=Vv(),gwt=W0(),Ewt=Fo(),PJ=uc(),NJ=xSe(),BSe=RSe(),bwt=MSe(),jSe=j0().schemaMixedSymbol,_wt=MJ(),kE=Tt(),{internalToObjectOptions:vwt}=Tl(),BJ=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);KSe.exports=function(e,r,n,i,s){if(r==null)return;if(n=n||{},Array.isArray(r)){let d=r.length;for(let p=0;p<d;++p){let f=Object.keys(r[p]);for(let h of f)r[p][h]=Swt(h,r[p][h])}return r}if(e!=null&&s!=null&&kE.hasUserDefinedProperty(s,e.options.discriminatorKey)&&typeof s[e.options.discriminatorKey]!="object"&&e.discriminators!=null){let d=s[e.options.discriminatorKey],p=PJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&kE.hasUserDefinedProperty(r,e.options.discriminatorKey)&&e.discriminators!=null){let d=r[e.options.discriminatorKey],p=PJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&r.$set!=null&&kE.hasUserDefinedProperty(r.$set,e.options.discriminatorKey)&&e.discriminators!=null){let d=r.$set[e.options.discriminatorKey],p=PJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}n.upsert&&bwt(e,r,i);let o=Object.keys(r),a=o.length,u={},c,l=!1;for(s=s||{};a--;){let d=o[a];BJ.has(d)?d==="$set"&&u.$set||(u[d]=r[d]):(u.$set||(r.$set?u.$set=r.$set:u.$set={}),u.$set[d]=r[d],o.splice(a,1),~o.indexOf("$set")||o.push("$set"))}for(a=o.length;a--;){let d=o[a];if(c=u[d],l=l||d.startsWith("$"),c!=null&&c.$__&&(c=c.toObject(vwt),u[d]=c),c&&typeof c=="object"&&!Buffer.isBuffer(c)&&BJ.has(d))$Se(e,c,d,n,i,s);else{let p="Invalid atomic update value for "+d+". Expected an object, received "+typeof c;throw new Error(p)}d.startsWith("$")&&kE.isEmptyObject(c)&&delete u[d]}return Object.keys(u).length===0&&n.upsert&&Object.keys(s).length>0?{$setOnInsert:{...s}}:u};function Swt(t,e){if(t==="$unset"){if(typeof e!="string"&&(!Array.isArray(e)||e.find(r=>typeof r!="string")))throw new DE("Invalid $unset in pipeline, must be  a string or an array of strings");return e}if(t==="$project"){if(e==null||typeof e!="object")throw new DE("Invalid $project in pipeline, must be an object");return e}if(t==="$addFields"||t==="$set"){if(e==null||typeof e!="object")throw new DE("Invalid "+t+" in pipeline, must be an object");return e}else if(t==="$replaceRoot"||t==="$replaceWith"){if(e==null||typeof e!="object")throw new DE("Invalid "+t+" in pipeline, must be an object");return e}throw new DE('Invalid update pipeline operator: "'+t+'"')}function $Se(t,e,r,n,i,s,o){let a=n.strict;o=o?o+".":"";let u=Object.keys(e),c=u.length,l=!1,d,p,f,h=null,g=a??t.options.strict;for(;c--;){if(p=u[c],f=e[p],r==="$pull"){if(d=t._getSchema(o+p),d==null){let S=NJ(t,e,s,o+p,n);S.schematype!=null&&(d=S.schematype)}if(d!=null&&d.schema!=null){e[p]=gwt(d.schema,e[p],n,i),l=!0;continue}}let _=o?o+p:p;if(t.discriminatorMapping!=null&&_===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[p]&&!n.overwriteDiscriminatorKey){if(g==="throw"){let S=new Error(`Can't modify discriminator key "`+_+'" on discriminator model');h=Z0(S,i,_,h);continue}else if(g){delete e[p];continue}}if(Ewt(f)==="Object"){if(d=t._getSchema(o+p),d==null){let S=NJ(t,e,s,o+p,n);S.schematype!=null&&(d=S.schematype)}if(r!=="$setOnInsert"&&BSe(d,a,e,p,o+p,n,i))continue;if(d&&d.caster&&r in qJ)if("$each"in f){l=!0;try{e[p]={$each:RE(d,f.$each,r,p,i,o+p)}}catch(S){h=Z0(S,i,p,h)}f.$slice!=null&&(e[p].$slice=f.$slice|0),f.$sort&&(e[p].$sort=f.$sort),f.$position!=null&&(e[p].$position=FJ(f.$position))}else{if(d!=null&&d.$isSingleNested){let S=a??d.schema.options.strict;try{e[p]=d.castForQuery(null,f,i,{strict:S})}catch(w){h=Z0(w,i,p,h)}}else try{e[p]=RE(d,f,r,p,i,o+p)}catch(S){h=Z0(S,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else if(r==="$currentDate"||r in qJ&&d){try{e[p]=RE(d,f,r,p,i,o+p)}catch(S){h=Z0(S,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else if(r==="$rename"){let S=new NSe(`${o}${p}.$rename`);try{e[p]=RE(S,f,r,p,i,o+p)}catch(w){h=Z0(w,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else{let S=o+p,w=t._getPathType(S),C=a;if(w&&w.schema&&C==null&&(C=w.schema.options.strict),w.pathType==="undefined"){if(C==="throw")throw new FSe(S);if(C){delete e[p];continue}}l|=$Se(t,f,r,n,i,s,o+p)||kE.isObject(f)&&Object.keys(f).length===0}}else{let S=p==="$each"||p==="$or"||p==="$and"||p==="$in";if(S&&!o)throw new DE('Invalid update: Unexpected modifier "'+p+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let w=S?o:o+p;if(d=t._getSchema(w),r!=="$setOnInsert"&&BSe(d,a,e,p,o+p,n,i))continue;let C=t._getPathType(w);if(d==null){let x=NJ(t,e,s,w,n);x.schematype!=null&&(d=x.schematype,C=x.type)}let A=a;if(C&&C.schema&&a==null&&(A=C.schema.options.strict),A&&!d&&!/real|nested/.test(C.pathType)){if(A==="throw"&&t.virtuals[w]==null)throw new FSe(o+p);delete e[p]}else{if(r==="$rename"){if(e[p]==null)throw new Vx("String",e[p],`${o}${p}.$rename`);let x=new NSe(`${o}${p}.$rename`);e[p]=x.castForQuery(null,e[p],i);continue}try{o.length===0||p.indexOf(".")===-1?e[p]=RE(d,f,r,p,i,o+p):(A!==!1||d!=null)&&(_wt(e,p,RE(d,f,r,p,i,o+p)),delete e[p])}catch(x){h=Z0(x,i,p,h)}if(Array.isArray(e[p])&&(r==="$addToSet"||r==="$push")&&p!=="$each"&&d&&d.caster&&!d.caster.$isMongooseArray&&!d.caster[jSe]&&(e[p]={$each:e[p]}),e[p]===void 0){delete e[p];continue}l=!0}}}if(h!=null)throw h;return l}function Z0(t,e,r,n){if(typeof e!="object"||!e.options.multipleCastError)throw t;return n=n||new ywt,n.addError(r,t),n}var qSe={$pop:1,$inc:1},wwt={$unset:1},qJ={$push:1,$addToSet:1,$set:1,$setOnInsert:1};var LSe={$set:1,$setOnInsert:1};function RE(t,e,r,n,i,s){if(!t){if(r in qSe)try{return FJ(e)}catch{throw new Vx("number",e,s)}return e}if(t.caster&&r in qJ&&(kE.isObject(e)||Array.isArray(e))&&!LSe[r]){let a=0,u=t;for(;u.$isMongooseArray;)++a,u=u.caster;let c=0,l=e;for(;Array.isArray(l);)++c,l=l[0];let d=a-c;for(;c<a;)e=[e],++c;let p=t.applySetters(Array.isArray(e)?e:[e],i);for(let f=0;f<d;++f)p=p[0];return p}if(r in wwt)return e;if(r in qSe){if(e==null)throw new Vx("number",e,t.path);if(r==="$inc")return t.castForQuery(null,e,i);try{return FJ(e)}catch{throw new Vx("number",e,t.path)}}if(r==="$currentDate")return typeof e=="object"?{$type:e.$type}:!!e;if(BJ.has(n))return t.castForQuery(n,e,i);if(LSe[r]){let a=e!=null&&t.$isMongooseArray&&t.$fullPath!=null&&!t.$fullPath.match(/\d+$/),u=t[jSe]!=null;return a||u?t.applySetters(e,i):t.castForQuery(null,e,i)}return t.castForQuery(null,e,i)}});var jJ=m((bbr,USe)=>{"use strict";USe.exports=function(e,r,n){!n||!(r&&r.upsert)||(r.overwrite?uS(e,n)||(e[n]=0):!uS(e,n)&&!uS(e?.$set,n)&&!uS(e?.$inc,n)&&!uS(e?.$setOnInsert,n)&&(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[n]=0))};function uS(t,e){return t==null||typeof t!="object"?!1:Object.prototype.hasOwnProperty.call(t,e)}});var $J=m((_br,GSe)=>{"use strict";var Awt=si();GSe.exports=function(t,e,r,n){n=n||{};let i=n.setDefaultsOnInsert!=null?n.setDefaultsOnInsert:e.base.options.setDefaultsOnInsert;if(!n.upsert||i===!1)return r;let s=Object.keys(r||{}),o={},a={},u=s.length,c=!1;for(let p=0;p<u;++p)if(s[p].charAt(0)==="$"){c=!0;break}let l=Object.keys(t),d=l.length;for(let p=0;p<d;++p){let f=l[p],h=t[f];if(h&&typeof h=="object"){let g=Object.keys(h),_=g.length,S=!1;for(let w=0;w<_;++w)if(g[w].charAt(0)==="$"){S=!0;break}if(S)continue}o[f]=!0}return n&&n.overwrite&&!c||e.eachPath(function(p,f){if(f.path==="_id"&&f.options.auto)return;let h=f.getDefault(null,!0);if(typeof h>"u")return;let g=f.splitPath();g.includes("$*")||Cwt(r,o,p,g,c)||(r=r||{},r.$setOnInsert=r.$setOnInsert||{},Awt(r,p)==null&&(r.$setOnInsert[p]=h),a[p]=h)}),r};function Cwt(t,e,r,n,i){if(e[r])return!0;let s=n[0];for(let o=1;o<n.length;++o){if(e[s])return!0;s+="."+n[o]}if(i){for(let o in t)if(o.charAt(0)==="$"&&VSe(t[o],r,n))return!0}else if(VSe(t,r,n))return!0;return!1}function VSe(t,e,r){if(t==null||typeof t!="object")return!1;if(t.hasOwnProperty(e))return!0;let n=r[0];for(let s=1;s<r.length;++s){if(t.hasOwnProperty(n))return!0;n+="."+r[s]}let i=e+".";for(let s in t)if(s.startsWith(i))return!0;return!1}});var KJ=m((vbr,Ci)=>{"use strict";var Twt=Qt(),Owt=uc(),HSe=wW(),zSe=AW(),cS=W0(),WSe=LJ(),xwt=Vn(),JSe=jJ(),{inspect:Iwt}=require("util"),YSe=$J();Ci.exports=function(e,r,n){let i=e.base.now();return r.insertOne?s=>Ci.exports.castInsertOne(e,r.insertOne,n).then(()=>s(null),o=>s(o)):r.updateOne?s=>{try{Ci.exports.castUpdateOne(e,r.updateOne,n,i),s(null)}catch(o){s(o)}}:r.updateMany?s=>{try{Ci.exports.castUpdateMany(e,r.updateMany,n,i),s(null)}catch(o){s(o)}}:r.replaceOne?s=>{Ci.exports.castReplaceOne(e,r.replaceOne,n).then(()=>s(null),o=>s(o))}:r.deleteOne?s=>{try{Ci.exports.castDeleteOne(e,r.deleteOne),s(null)}catch(o){s(o)}}:r.deleteMany?s=>{try{Ci.exports.castDeleteMany(e,r.deleteMany),s(null)}catch(o){s(o)}}:s=>{let o=new Twt(`Invalid op passed to \`bulkWrite()\`: ${Iwt(r)}`);s(o,null)}};Ci.exports.castInsertOne=async function(e,r,n){let i=ME(e,r.document),s=new i(r.document);i.schema.options.timestamps&&Gx(r,n)&&s.initializeTimestamps(),n.session!=null&&s.$session(n.session);let o=i?.schema?.options?.versionKey;return o&&s[o]==null&&(s[o]=0),r.document=s,n.skipValidation||r.skipValidation||await r.document.$validate(),r};Ci.exports.castUpdateOne=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=ME(e,r.filter),o=s.schema,a=n.strict!=null?n.strict:s.schema.options.strict,u=xwt(r.update);lS(o,r.filter);let c=Gx(r,n);if(s.schema.$timestamps!=null&&c){let p=s.schema.$timestamps.createdAt,f=s.schema.$timestamps.updatedAt;zSe(i,p,f,u,{})}c&&HSe(i,u,s.schema);let l=e.base.options.setDefaultsOnInsert;return(r.setDefaultsOnInsert==null?l:r.setDefaultsOnInsert)!==!1&&YSe(r.filter,s.schema,u,{setDefaultsOnInsert:!0,upsert:r.upsert}),JSe(u,r,s.schema.options.versionKey),r.filter=cS(s.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=WSe(s.schema,u,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},s,r.filter),r};Ci.exports.castUpdateMany=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=ME(e,r.filter),o=s.schema,a=n.strict!=null?n.strict:s.schema.options.strict,u=e.base.options.setDefaultsOnInsert;(r.setDefaultsOnInsert==null?u:r.setDefaultsOnInsert)!==!1&&YSe(r.filter,s.schema,r.update,{setDefaultsOnInsert:!0,upsert:r.upsert});let l=Gx(r,n);if(s.schema.$timestamps!=null&&l){let d=s.schema.$timestamps.createdAt,p=s.schema.$timestamps.updatedAt;zSe(i,d,p,r.update,{})}l&&HSe(i,r.update,s.schema),lS(o,r.filter),JSe(r.update,r,s.schema.options.versionKey),r.filter=cS(s.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=WSe(s.schema,r.update,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},s,r.filter)};Ci.exports.castReplaceOne=async function(e,r,n){let i=ME(e,r.filter),s=i.schema,o=n.strict!=null?n.strict:i.schema.options.strict;lS(s,r.filter),r.filter=cS(i.schema,r.filter,{strict:o,upsert:r.upsert});let a=new i(r.replacement,o,!0);i.schema.options.timestamps&&Gx(r,n)&&a.initializeTimestamps(),n.session!=null&&a.$session(n.session);let u=i?.schema?.options?.versionKey;if(u&&a[u]==null&&(a[u]=0),r.replacement=a,n.skipValidation||r.skipValidation){r.replacement=r.replacement.toBSON();return}await r.replacement.$validate(),r.replacement=r.replacement.toBSON()};Ci.exports.castDeleteOne=function(e,r){let n=ME(e,r.filter),i=n.schema;lS(i,r.filter),r.filter=cS(n.schema,r.filter)};Ci.exports.castDeleteMany=function(e,r){let n=ME(e,r.filter),i=n.schema;lS(i,r.filter),r.filter=cS(n.schema,r.filter)};Ci.exports.cast={insertOne:Ci.exports.castInsertOne,updateOne:Ci.exports.castUpdateOne,updateMany:Ci.exports.castUpdateMany,replaceOne:Ci.exports.castReplaceOne,deleteOne:Ci.exports.castDeleteOne,deleteMany:Ci.exports.castDeleteMany};function lS(t,e){t!=null&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function ME(t,e){let r=t.schema.options.discriminatorKey;return e!=null&&e.hasOwnProperty(r)&&(t=Owt(t.discriminators,e[r])||t),t}function Gx(t,e){let r=t.timestamps,n=e.timestamps;return r??n??!0}});var UJ=m((Sbr,QSe)=>{"use strict";QSe.exports=function(e,r,n){return e.mongoose=e.mongoose||{},e.mongoose.validationErrors=r,e.mongoose.results=n,e}});var zJ=m((wbr,twe)=>{"use strict";var Rwt=pz(),GJ=require("events").EventEmitter,Dwt=G0(),Ti=m3(),XSe=OJ(),ai=wa(),kwt=vz(),Mwt=ySe(),Pwt=xJ(),Nwt=Vn(),Fwt=Kx(),Bwt=si(),qwt=RJ(),ZSe=Vu(),HJ=Tt(),Lwt=vSe(),Hx=KJ(),{modelSymbol:zx}=ot(),jwt=Lz(),VJ=UJ(),$wt=ot().arrayAtomicsSymbol,dS=ot().sessionNewDocuments,Kwt=globalThis.Date,Uwt=["MONGODB-X509"];function ut(t){this.base=t,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=Ti,this._readyState=Ti.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof t>"u"||!t.connections.length?this.id=0:this.id=t.nextConnectionId,this._queue=[]}Object.setPrototypeOf(ut.prototype,GJ.prototype);Object.defineProperty(ut.prototype,"readyState",{get:function(){return this._readyState===Ti.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS=="number"&&Kwt.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2?Ti.disconnected:this._readyState},set:function(t){if(!(t in Ti))throw new Error("Invalid connection state: "+t);if(this._readyState!==t){this._readyState=t;for(let e of this.otherDbs)e.readyState=t;Ti.connected===t&&(this._hasOpened=!0),this.emit(Ti[t])}}});ut.prototype.get=function(e){return this.config.hasOwnProperty(e)?this.config[e]:Bwt(this.options,e)};ut.prototype.set=function(e,r){return this.config.hasOwnProperty(e)?(this.config[e]=r,r):(this.options=this.options||{},this.options[e]=r,r)};ut.prototype.collections;ut.prototype.name;ut.prototype.models;ut.prototype.id;Object.defineProperty(ut.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});ut.prototype.db;ut.prototype.client;ut.prototype.config;ut.prototype.createCollection=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new ai("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(e,r)};ut.prototype.bulkWrite=async function(e,r){await this._waitForConnect(),r=r||{};let n=r.ordered==null?!0:r.ordered,i=this.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&i?.session!=null&&(r={...r,session:i.session});let s=this.base.now(),o=null;if(n){let a=[];for(let u of e){if(typeof u.model!="string"&&!u.model?.[zx])throw new ai("Must specify model in Connection.prototype.bulkWrite() operations");let c=u.model[zx]?u.model:this.model(u.model);if(u.name==null)throw new ai("Must specify operation name in Connection.prototype.bulkWrite()");if(!Hx.cast.hasOwnProperty(u.name))throw new ai(`Unrecognized bulkWrite() operation name ${u.name}`);await Hx.cast[u.name](c,u,r,s),a.push({...u,namespace:c.namespace()})}o=await this.client.bulkWrite(a,r)}else{let a=[],u=[],c=[],l=[],d=[];for(let f=0;f<e.length;++f){let h=e[f];if(typeof h.model!="string"&&!h.model?.[zx]){let S=new ai("Must specify model in Connection.prototype.bulkWrite() operations");c.push({index:f,error:S}),d[f]=S;continue}let g;try{g=h.model[zx]?h.model:this.model(h.model)}catch(S){c.push({index:f,error:S});continue}if(h.name==null){let S=new ai("Must specify operation name in Connection.prototype.bulkWrite()");c.push({index:f,error:S}),d[f]=S;continue}if(!Hx.cast.hasOwnProperty(h.name)){let S=new ai(`Unrecognized bulkWrite() operation name ${h.name}`);c.push({index:f,error:S}),d[f]=S;continue}let _=null;try{_=Hx.cast[h.name](g,h,r,s)}catch(S){c.push({index:f,error:S}),d[f]=S;continue}jwt(_)?l.push(_.then(()=>{a.push({...h,namespace:g.namespace()}),u.push(f)},S=>{c.push({index:f,error:S}),d[f]=S})):(a.push({...h,namespace:g.namespace()}),u.push(f))}if(l.length>0&&await Promise.all(l),c=c.sort((f,h)=>f.index-h.index).map(f=>f.error),a.length===0){if(r.throwOnValidationError&&c.length)throw new XSe(c,d,h,"bulkWrite");let f=this.base.driver.get().BulkWriteResult,h=new f(qwt(),!1);return VJ(h,c,d)}let p;[o,p]=await this.client.bulkWrite(a,r).then(f=>[f,null]).catch(f=>[null,f]);for(let f=0;f<u.length;++f)d[u[f]]=null;if(p&&c.length>0&&(VJ(p,c,d),p.mongoose=p.mongoose||{},p.mongoose.validationErrors=c),c.length>0){if(r.throwOnValidationError)throw new XSe(c,d,o,"bulkWrite");VJ(o,c,d)}}return o};ut.prototype.createCollections=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.createCollection({})}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new Lwt(s,n)}return r};ut.prototype.withSession=async function(e){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(e)};ut.prototype.startSession=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new ai("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(e)};ut.prototype.transaction=function(e,r){return this.startSession().then(n=>(n[dS]=new Map,n.withTransaction(()=>Vwt(e,n,this.base),r).then(i=>(delete n[dS],i)).catch(i=>{throw delete n[dS],i}).finally(()=>{n.endSession().catch(()=>{})})))};async function Vwt(t,e,r){try{return r.transactionAsyncLocalStorage==null?await t(e):await new Promise(i=>{r.transactionAsyncLocalStorage.run({session:e},()=>i(t(e)))})}catch(n){throw Gwt(e),n}}function Gwt(t){for(let e of t[dS].keys()){let r=t[dS].get(e);r.hasOwnProperty("isNew")&&(e.$isNew=r.isNew),r.hasOwnProperty("versionKey")&&e.set(e.schema.options.versionKey,r.versionKey),r.modifiedPaths.length>0&&e.$__.activePaths.states.modify==null&&(e.$__.activePaths.states.modify={});for(let n of r.modifiedPaths){let i=e.$__.activePaths.paths[n];i!=null&&delete e.$__.activePaths[i][n],e.$__.activePaths.paths[n]="modify",e.$__.activePaths.states.modify[n]=!0}for(let n of r.atomics.keys()){let i=e.$__getValue(n);i!=null&&(i[$wt]=r.atomics.get(n))}}}ut.prototype.dropCollection=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new ai("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(e)};ut.prototype._waitForConnect=async function(e){if((this.readyState===Ti.connecting||this.readyState===Ti.disconnected)&&this._shouldBufferCommands()){let r=this._getBufferTimeoutMS(),n=null,i=!1,s={},o=new Promise(a=>{s.fn=a,this._queue.push(s)});if(e?await o:await Promise.race([o,new Promise(a=>{n=setTimeout(()=>{i=!0,a()},r)})]),i){let a=this._queue.indexOf(s);a!==-1&&this._queue.splice(a,1);let u="Connection operation buffering timed out after "+r+"ms";throw new ai(u)}else n!=null&&clearTimeout(n)}};ut.prototype._getBufferTimeoutMS=function(){return this.config.bufferTimeoutMS!=null?this.config.bufferTimeoutMS:this.base!=null&&this.base.get("bufferTimeoutMS")!=null?this.base.get("bufferTimeoutMS"):1e4};ut.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};ut.prototype.listDatabases=async function(){throw new ai("listDatabases() not implemented by driver")};ut.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new ai("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let e of Object.values(this.models))delete e.$init;return this.db.dropDatabase()};ut.prototype._shouldBufferCommands=function(){return this.config.bufferCommands!=null?this.config.bufferCommands:this.base.get("bufferCommands")!=null?this.base.get("bufferCommands"):!0};ut.prototype.error=function(e,r){return r?(r(e),null):(this.listeners("error").length>0&&this.emit("error",e),Promise.reject(e))};ut.prototype.onOpen=function(){this.readyState=Ti.connected;for(let t of this._queue)t.fn.apply(t.ctx,t.args);this._queue=[];for(let t in this.collections)HJ.object.hasOwnProperty(this.collections,t)&&this.collections[t].onOpen();this.emit("open")};ut.prototype.openUri=async function(e,r){if((this.readyState===Ti.connecting||this.readyState===Ti.connected)&&this._connectionString===e)return this;this._closeCalled=!1;let n=!1;r&&"_fireAndForget"in r&&(n=r._fireAndForget,delete r._fireAndForget);try{Hwt.apply(arguments)}catch(i){throw n||(this.$initialConnection=Promise.reject(i)),i}this.$initialConnection=this.createClient(e,r).then(()=>this).catch(i=>{throw this.readyState=Ti.disconnected,this.listeners("error").length>0&&ZSe(()=>this.emit("error",i)),i});for(let i of Object.values(this.models))i.init().catch(function(){});if(n)return this;try{await this.$initialConnection}catch(i){throw ewe(i)}return this};ut.prototype.on=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),GJ.prototype.on.call(this,e,r)};ut.prototype.once=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),GJ.prototype.once.call(this,e,r)};function Hwt(t,e,r){if(typeof e=="function"&&r==null)throw new ai("Connection.prototype.openUri() no longer accepts a callback");if(typeof r=="function")throw new ai("Connection.prototype.openUri() no longer accepts a callback")}function ewe(t){if(t?.name==="MongoServerSelectionError"){let e=t;t=new kwt,t.assimilateError(e)}return t}ut.prototype.destroy=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new ai("Connection.prototype.destroy() no longer accepts a callback");return e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._close(e,!0)};ut.prototype.close=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new ai("Connection.prototype.close() no longer accepts a callback");e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._lastHeartbeatAt!=null&&(this._lastHeartbeatAt=null);for(let r of Object.values(this.models))delete r.$init;return this._close(e,!1)};ut.prototype._close=async function(e,r){let n=this,i=this._closeCalled;this._closeCalled=!0,this._destroyCalled=r,this.client!=null&&(this.client._closeCalled=!0,this.client._destroyCalled=r);let s=this;switch(this.readyState){case Ti.disconnected:r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),i||(await this.doClose(e),this.onClose(e));break;case Ti.connected:this.readyState=Ti.disconnecting,await this.doClose(e),r&&n.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),this.onClose(e);break;case Ti.connecting:return new Promise((o,a)=>{let u=()=>{this.removeListener("open",u),this.removeListener("error",u),r?this.destroy(e).then(o,a):this.close(e).then(o,a)};this.once("open",u),this.once("error",u)});case Ti.disconnecting:return new Promise(o=>{this.once("close",()=>{r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),o()})})}return this};ut.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};ut.prototype.onClose=function(e){this.readyState=Ti.disconnected;for(let n in this.collections)HJ.object.hasOwnProperty(this.collections,n)&&this.collections[n].onClose(e);this.emit("close",e);let r=typeof e=="object"&&e!==null?e.force:e;for(let n of this.otherDbs)this._destroyCalled?n.destroy({force:r,skipCloseClient:!0}):n.close({force:r,skipCloseClient:!0})};ut.prototype.collection=function(t,e){let r={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};e=Object.assign({},r,e?Nwt(e):{}),e.$wasForceClosed=this.$wasForceClosed;let n=this.base&&this.base.__driver&&this.base.__driver.Collection||Fwt.get().Collection;return t in this.collections||(this.collections[t]=new n(t,this,e)),this.collections[t]};ut.prototype.plugin=function(t,e){return this.plugins.push([t,e]),this};ut.prototype.model=function(e,r,n,i){if(!(this instanceof ut))throw new ai("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let s;if(typeof e=="function"&&(s=e,e=s.name),typeof r=="string"&&(n=r,r=!1),HJ.isObject(r)&&(r.instanceOfSchema?r instanceof this.base.Schema||(r=r._clone(this.base.Schema)):r=new Dwt(r)),r&&!r.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let o={cache:!1,overwriteModels:this.base.options.overwriteModels},a=Object.assign(o,i,{connection:this});if(this.models[e]&&!n&&a.overwriteModels!==!0){if(r&&r.instanceOfSchema&&r!==this.models[e].schema)throw new ai.OverwriteModelError(e);return this.models[e]}let u;if(r&&r.instanceOfSchema)return Pwt(r,this.plugins,null,"$connectionPluginsApplied"),u=this.base._model(s||e,r,n,a),this.models[e]||(this.models[e]=u),u.init().catch(function(){}),u;if(this.models[e]&&n)return u=this.models[e],r=u.prototype.schema,u.__subclass(this,r,n);if(arguments.length===1){if(u=this.models[e],!u)throw new ai.MissingSchemaError(e);return u}if(!u)throw new ai.MissingSchemaError(e);return this===u.prototype.db&&(!n||n===u.collection.name)?(this.models[e]||(this.models[e]=u),u):(this.models[e]=u.__subclass(this,r,n),this.models[e])};ut.prototype.deleteModel=function(e){if(typeof e=="string"){let r=this.model(e);if(r==null)return this;let n=r.collection.name;delete this.models[e],delete this.collections[n],this.emit("deleteModel",r)}else if(e instanceof RegExp){let r=e,n=this.modelNames();for(let i of n)r.test(i)&&this.deleteModel(i)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+e+'"');return this};ut.prototype.watch=function(e,r){let n=s=>{ZSe(()=>{if(this.readyState===Ti.connecting)this.once("open",function(){let o=this.db.watch(e,r);s(null,o)});else{let o=this.db.watch(e,r);s(null,o)}})};return new Rwt(n,e,r)};ut.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(e){throw ewe(e)}};ut.prototype.modelNames=function(){return Object.keys(this.models)};ut.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};ut.prototype.authMechanismDoesNotRequirePassword=function(){return this.options&&this.options.auth?Uwt.indexOf(this.options.auth.authMechanism)>=0:!0};ut.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())};ut.prototype.getClient=function(){return this.client};ut.prototype.setClient=function(){throw new ai("Connection#setClient not implemented by driver")};ut.prototype.createClient=function(){throw new ai("Connection#createClient not implemented by driver")};ut.prototype.syncIndexes=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.syncIndexes(e)}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new Mwt(s,n)}return r};ut.STATES=Ti;twe.exports=ut});var WJ=m((Abr,zwt)=>{zwt.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.19.2",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{bson:"^6.10.4",kareem:"2.6.3",mongodb:"~6.20.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.48.2","@babel/core":"7.28.4","@babel/preset-env":"7.28.3","@mongodb-js/mongodb-downloader":"^0.4.2","@typescript-eslint/eslint-plugin":"^8.19.1","@typescript-eslint/parser":"^8.19.1",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","assert-browserify":"2.0.0","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.1.2","crypto-browserify":"3.12.1",dox:"1.0.0",eslint:"8.57.1","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.18.1",marked:"15.0.12",mkdirp:"^3.0.1",mocha:"11.7.4",moment:"2.30.1","mongodb-memory-server":"10.2.1","mongodb-runner":"^5.8.2",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"21.0.0","stream-browserify":"3.0.0",tsd:"0.33.0",typescript:"5.9.3",uuid:"11.1.0",webpack:"5.102.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var nwe=m((Cbr,rwe)=>{"use strict";var Wwt=Vn(),Jwt=wa();function Ywt(t,e){let r=e||{},n=r.readPreference?r.readPreference:e9t(t),i=Wwt(r);return n&&n!=="primary"&&n!=="primaryPreferred"?Qwt(n,i):i}function Qwt(t,e){if(Xwt(e)&&Zwt(t))r9t();else return t9t(e)}function Xwt(t){let e=t.config&&t.config.autoIndex,{autoCreate:r,autoIndex:n}=t;return!!(e||r||n)}function Zwt(t){return t==="secondary"||t==="secondaryPreferred"}function e9t(t){let r=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(t);return r?r[1]:null}function t9t(t){return t.config={autoIndex:!1},t.autoCreate=!1,t.autoIndex=!1,t}function r9t(){throw new Jwt('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}rwe.exports=Ywt});var swe=m(iwe=>{"use strict";iwe.setTimeout=setTimeout});var lwe=m((Obr,cwe)=>{"use strict";var owe=zJ(),ey=wa(),Ia=m3(),awe=O0(),n9t=WJ(),i9t=nwe(),s9t=swe().setTimeout,uwe=Tt(),o9t=G0();function Dl(){owe.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}Dl.STATES=Ia;Object.setPrototypeOf(Dl.prototype,owe.prototype);Dl.prototype.useDb=function(t,e){if(e=e||{},e.useCache&&this.relatedDbs[t])return this.relatedDbs[t];let r=new this.constructor;r.name=t,r.base=this.base,r.collections={},r.models={},r.replica=this.replica,r.config=Object.assign({},this.config,r.config),r.name=this.name,r.options=this.options,r._readyState=this._readyState,r._closeCalled=this._closeCalled,r._hasOpened=this._hasOpened,r._listening=!1,r._parent=this,r.host=this.host,r.port=this.port,r.user=this.user,r.pass=this.pass;let n=this;r.client=n.client,this.db&&this._readyState===Ia.connected?i():this._queue.push({fn:i});function i(){r.client=n.client;let s={};e.hasOwnProperty("noListener")&&(s.noListener=e.noListener),r.db=n.client.db(t,s),r._lastHeartbeatAt=n._lastHeartbeatAt,r.onOpen()}return r.name=t,e.noListener!==!0&&this.otherDbs.push(r),r.otherDbs.push(this),e&&e.useCache&&(this.relatedDbs[r.name]=r,r.relatedDbs=this.relatedDbs),r};Dl.prototype.aggregate=function(e,r){return new this.base.Aggregate(null,this).append(e).option(r??{})};Dl.prototype.removeDb=function(e){let r=this.otherDbs.filter(n=>n.name===e);if(!r.length)throw new ey(`No connections to database "${e}" found`);for(let n of r)n._closeCalled=!0,n._destroyCalled=!0,n._readyState=Ia.disconnected,n.$wasForceClosed=!0;delete this.relatedDbs[e],this.otherDbs=this.otherDbs.filter(n=>n.name!==e)};Dl.prototype.doClose=async function(e){if(this.client==null)return this;let r=!1;return e!=null&&typeof e=="object"&&(r=e.skipCloseClient,e=e.force),r?this:(await this.client.close(e),await new Promise(n=>s9t(n,1)),this)};Dl.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};Dl.prototype.createClient=async function(e,r){if(typeof e!="string")throw new ey(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof e}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new ey("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if((this.readyState===Ia.connecting||this.readyState===Ia.connected)&&this._connectionString!==e)throw new ey("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections");if(r=i9t(e,r),r){let a=r.config&&r.config.autoIndex!=null?r.config.autoIndex:r.autoIndex;a!=null&&(this.config.autoIndex=a!==!1,delete r.config,delete r.autoIndex),"autoCreate"in r&&(this.config.autoCreate=!!r.autoCreate,delete r.autoCreate),"sanitizeFilter"in r&&(this.config.sanitizeFilter=r.sanitizeFilter,delete r.sanitizeFilter),"autoSearchIndex"in r&&(this.config.autoSearchIndex=r.autoSearchIndex,delete r.autoSearchIndex),"bufferTimeoutMS"in r&&(this.config.bufferTimeoutMS=r.bufferTimeoutMS,delete r.bufferTimeoutMS),(r.user||r.pass)&&(r.auth=r.auth||{},r.auth.username=r.user,r.auth.password=r.pass,this.user=r.user,this.pass=r.pass),delete r.user,delete r.pass,r.bufferCommands!=null&&(this.config.bufferCommands=r.bufferCommands,delete r.bufferCommands)}else r={};this._connectionOptions=r;let n=r.dbName;n!=null&&(this.$dbName=n),delete r.dbName,uwe.hasUserDefinedProperty(r,"driverInfo")||(r.driverInfo={name:"Mongoose",version:n9t.version});let{schemaMap:i,encryptedFieldsMap:s}=this._buildEncryptionSchemas();if((Object.keys(i).length>0||Object.keys(s).length)&&!r.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");Object.keys(i).length>0&&(r.autoEncryption.schemaMap=i),Object.keys(s).length>0&&(r.autoEncryption.encryptedFieldsMap=s),this.readyState=Ia.connecting,this._connectionString=e;let o;try{o=new awe.MongoClient(e,r)}catch(a){throw this.readyState=Ia.disconnected,a}this.client=o,o.setMaxListeners(0),await o.connect(),JJ(this,o,r,n);for(let a of this.otherDbs)JJ(a,o,{},a.name);return this};Dl.prototype._buildEncryptionSchemas=function(){let t={},e={},r=Object.values(this.models).filter(s=>s.schema._hasEncryptedFields());for(let s of r){let{schema:o,collection:{collectionName:a}}=s,u=`${this.$dbName}.${a}`,c=o.encryptionType()==="csfle"?e:t;if(c[u]??=new o9t({},{encryptionType:o.encryptionType()}),o.discriminatorMapping&&!o.discriminatorMapping.isRoot){let d=o._baseSchema;o.eachPath(p=>{if(!d.path(p)&&c[u]._hasEncryptedField(p))throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${p}`)})}c[u].add(o)}let n=Object.fromEntries(Object.entries(e).map(([s,o])=>[s,o._buildSchemaMap()])),i=Object.fromEntries(Object.entries(t).map(([s,o])=>[s,o._buildEncryptedFields()]));return{schemaMap:n,encryptedFieldsMap:i}};Dl.prototype.setClient=function(e){if(!(e instanceof awe.MongoClient))throw new ey("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==Ia.disconnected)throw new ey("Cannot call `setClient()` on a connection that is already connected.");if(e.topology==null)throw new ey("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=e.s.url,JJ(this,e,{},e.s.options.dbName);for(let r of Object.values(this.models))r.init().catch(function(){});return this};function JJ(t,e,r,n){let i=n!=null?e.db(n):e.db();t.db=i,t.client=e,t.host=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].host||void 0,t.port=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].port||void 0,t.name=n??i.databaseName,t._closeCalled=e._closeCalled;let s=()=>{t.readyState!==Ia.connected&&(t.readyState=Ia.connected,t.emit("reconnect"),t.emit("reconnected"),t.onOpen())},o=e&&e.topology&&e.topology.description&&e.topology.description.type||"";o==="Single"?e.on("serverDescriptionChanged",a=>{a.newDescription.type==="Unknown"?t.readyState=Ia.disconnected:s()}):o.startsWith("ReplicaSet")&&e.on("topologyDescriptionChanged",a=>{let u=a.newDescription;t.readyState===Ia.connected&&u.type!=="ReplicaSetWithPrimary"?t.readyState=Ia.disconnected:t.readyState===Ia.disconnected&&u.type==="ReplicaSetWithPrimary"&&s()}),t._lastHeartbeatAt=null,e.on("serverHeartbeatSucceeded",()=>{t._lastHeartbeatAt=Date.now();for(let a of t.otherDbs)a._lastHeartbeatAt=t._lastHeartbeatAt}),r.monitorCommands&&(e.on("commandStarted",a=>t.emit("commandStarted",a)),e.on("commandFailed",a=>t.emit("commandFailed",a)),e.on("commandSucceeded",a=>t.emit("commandSucceeded",a))),t.onOpen();for(let a in t.collections)uwe.object.hasOwnProperty(t.collections,a)&&t.collections[a].onOpen()}cwe.exports=Dl});var dwe=m(pS=>{"use strict";pS.BulkWriteResult=Cfe();pS.Collection=g6e();pS.Connection=lwe();pS.ClientEncryption=O0().ClientEncryption});var fwe=m((Ibr,pwe)=>{"use strict";var a9t=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","skipOriginalStackTraces","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);pwe.exports=a9t});var mwe=m((Rbr,hwe)=>{"use strict";var u9t=Qt(),Wx=class extends u9t{constructor(e){let r=e.map(n=>n.message).join(", ");r.length>50&&(r=r.slice(0,50)+"..."),super(`eachAsync() finished with ${e.length} errors: ${r}`),this.errors=e}};Object.defineProperty(Wx.prototype,"name",{value:"EachAsyncMultiError"});hwe.exports=Wx});var QJ=m((Dbr,gwe)=>{"use strict";var c9t=mwe(),YJ=Vu();gwe.exports=async function(e,r,n){let i=n.parallel||1,s=n.batchSize,o=n.signal,a=n.continueOnError,u=[],c=l9t(),l=!1;return new Promise((f,h)=>{if(o!=null){if(o.aborted)return f(null);o.addEventListener("abort",()=>(l=!0,f(null)),{once:!0})}if(s!=null){if(typeof s!="number")throw new TypeError("batchSize must be a number");if(Number.isInteger(s)){if(s<1)throw new TypeError("batchSize must be at least 1")}else throw new TypeError("batchSize must be an integer")}d((g,_)=>{if(g!=null)return h(g);f(_)})});function d(f){let h=0,g=0,_=null;for(let w=0;w<i;++w)c(S());function S(){let w=[],C=!1;return A;function A(O){if(C||l)return O();if(_)return O();e(function(x,R){if(_!=null)return O();if(x!=null)if(x.name==="MongoCursorExhaustedError")R=null;else if(a)u.push(x);else return _=x,f(x),O();if(R==null){if(C=!0,h<=0){let F=a?ywe(u):_;f(F)}else s&&w.length&&p(w,g++,I);return O()}if(++h,YJ(()=>O()),s&&w.push(R),s&&w.length!==s){YJ(()=>c(A));return}let M=s?w:R;function I(F){if(s?(h-=w.length,w=[]):--h,F!=null)if(a)u.push(F);else return _=F,f(F);if((C||l)&&h<=0){let B=a?ywe(u):_;return f(B)}YJ(()=>c(A))}p(M,g++,I)})}}}function p(f,h,g){let _;try{_=r(f,h)}catch(S){return g(S)}_&&typeof _.then=="function"?_.then(function(){g(null)},function(S){g(S||new Error("`eachAsync()` promise rejected without error"))}):g(null)}};function l9t(){let t=[],e=null,r=0;return function(s){if(e===null&&t.length===0)return e=r++,s(n);t.push(s)};function n(){t.length!==0?(e=r++,t.shift()(n)):e=null}}function ywe(t){return t.length===0?null:new c9t(t)}});var Cwe=m((kbr,Awe)=>{"use strict";var fS=Qt(),_we=require("stream").Readable,d9t=QJ(),vwe=Pv(),p9t=B0(),XJ=Vu(),{once:f9t}=require("events"),Swe=require("util");function Ra(t){_we.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=t,this._closed=!1;let e=t.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options={},e.hooks.execPre("find",t,r=>{if(r!=null){if(r instanceof p9t.skipWrappedFunction){let n=r.args[0];if(n!=null&&(!Array.isArray(n)||n.length)){let i=new fS('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+Swe.inspect(n)+'".');this._markError(i),this.listeners("error").length>0&&this.emit("error",i);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(r),this.listeners("error").length>0&&this.emit("error",r);return}Object.assign(this.options,t._optionsForExec()),this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(this.options.transform),this.options.batchSize&&(this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),t._mongooseOptions._asyncIterator&&(this._mongooseOptions._asyncIterator=!0),e.collection._shouldBufferCommands()&&e.collection.buffer?e.collection.queue.push([()=>Ewe(t,this)]):Ewe(t,this)})}Swe.inherits(Ra,_we);function Ewe(t,e){try{let r=t.model.collection.find(t._conditions,e.options);e.cursor=r,e.emit("cursor",r)}catch(r){e._markError(r),e.listeners("error").length>0&&e.emit("error",e._error)}}Ra.prototype._read=function(){Qx(this,(t,e)=>{if(t)return this.emit("error",t);if(!e){this.push(null),this.cursor.close(function(r){if(r)return this.emit("error",r)});return}this.push(e)})};Ra.prototype.getDriverCursor=async function(){return this.cursor?this.cursor:(await f9t(this,"cursor"),this.cursor)};Object.defineProperty(Ra.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Ra.prototype._markError=function(t){return this._error=t,this};Ra.prototype.close=async function(){if(typeof arguments[0]=="function")throw new fS("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}};Ra.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};Ra.prototype.rewind=function(){return wwe(this,()=>{this.cursor.rewind()}),this};Ra.prototype.next=async function(){if(typeof arguments[0]=="function")throw new fS("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new fS("Cannot call `next()` on a closed cursor");return new Promise((e,r)=>{Qx(this,function(n,i){if(n)return r(n);e(i)})})};Ra.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new fS("QueryCursor.prototype.eachAsync() no longer accepts a callback");return typeof e=="function"&&(e={}),e=e||{},d9t(r=>Qx(this,r),t,e)};Ra.prototype.options;Ra.prototype.addCursorFlag=function(t,e){return wwe(this,()=>{this.cursor.addCursorFlag(t,e)}),this};Symbol.asyncIterator!=null&&(Ra.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this});function Qx(t,e){let r=e;if(r=function(n,i){return n?e(n):i===null?t._mongooseOptions._asyncIterator?e(null,{done:!0}):e(null,null):(t._transforms.length&&i!==null&&(i=t._transforms.reduce(function(s,o){return o.call(t,s)},i)),t._mongooseOptions._asyncIterator?e(null,{value:i,done:!1}):e(null,i))},t._error)return XJ(function(){r(t._error)});if(t.skipped)return XJ(()=>r(null,null));if(t.cursor)if(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=vwe.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1){if(t._batchDocs&&t._batchDocs.length)return Jx(t,t._batchDocs.shift(),t._pop,r);if(t._batchExhausted)return r(null,null);t._batchDocs=[],t.cursor.next().then(n=>{Yx.call({ctx:t,callback:r},null,n)},n=>{Yx.call({ctx:t,callback:r},n)});return}else return t.cursor.next().then(n=>{if(!n){r(null,null);return}if(!t.query._mongooseOptions.populate)return Jx(t,n,null,r);Jx(t,n,t._pop,(i,s)=>{if(i!=null)return r(i);t.query.model.populate(s,t._pop).then(o=>r(null,o),o=>r(o))})},n=>{r(n)});else t.once("error",e),t.once("cursor",function(n){if(t.removeListener("error",e),n==null)return t.skipped?e(null,null):void 0;Qx(t,e)})}function Yx(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,bwe.call(this);this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize?XJ(()=>this.ctx.cursor.next().then(r=>{Yx.call(this,null,r)},r=>{Yx.call(this,r)})):bwe.call(this)}function bwe(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{Jx(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},t=>{this.callback(t)})}function Jx(t,e,r,n){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost("find",t.query,[[e]],u=>{if(u!=null)return n(u);n(null,e)});let{model:i,_fields:s,_userProvidedFields:o,options:a}=t.query;vwe.createModelAndInit(i,e,s,o,a,r,(u,c)=>{if(u!=null)return n(u);t.model.hooks.execPost("find",t.query,[[c]],l=>{if(l!=null)return n(l);n(null,c)})})}function wwe(t,e){if(t.cursor)return e();t.once("cursor",function(r){r!=null&&e()})}Awe.exports=Ra});var eY=m((Mbr,Owe)=>{"use strict";var ZJ=Tt();function h9t(t,e,r){Twe(t,e,r,"maxTimeMS")}function m9t(t,e,r){Twe(t,e,r,"allowDiskUse")}Owe.exports={applyGlobalMaxTimeMS:h9t,applyGlobalDiskUse:m9t};function Twe(t,e,r,n){ZJ.hasUserDefinedProperty(t,n)||(ZJ.hasUserDefinedProperty(e,n)?t[n]=e[n]:ZJ.hasUserDefinedProperty(r,n)&&(t[n]=r[n]))}});var tY=m((Pbr,xwe)=>{"use strict";xwe.exports=function(e,r){if(r.readConcern!==void 0||r&&r.session&&r.session.transaction)return;let n=e.options?.readConcern?.level;n!=null&&(r.readConcern={level:n})}});var rY=m((Nbr,Iwe)=>{"use strict";Iwe.exports=function(e,r){if(r.writeConcern!=null||r&&r.session&&r.session.transaction)return;let n=e.options.writeConcern??{};Object.keys(n).length!=0?(r.writeConcern={},!("w"in r)&&n.w!=null&&(r.writeConcern.w=n.w),!("j"in r)&&n.j!=null&&(r.writeConcern.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.writeConcern.wtimeout=n.wtimeout)):(!("w"in r)&&n.w!=null&&(r.w=n.w),!("j"in r)&&n.j!=null&&(r.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.wtimeout=n.wtimeout))}});var kwe=m((Fbr,Dwe)=>{"use strict";var Rwe=Hv();Dwe.exports=function(e,r,n){if(!Object.keys(n).some(Rwe))return r.castForQuery(null,n,e);let s=Object.keys(n),o=s.length;for(;o--;){let a=s[o],u=n[a];if(a==="$not"){if(u&&r&&!r.caster){let c=Object.keys(u);if(c.length&&Rwe(c[0]))for(let l of Object.keys(u))u[l]=r.castForQuery(l,u[l],e);else n[a]=r.castForQuery(a,u,e);continue}}else n[a]=r.castForQuery(a,u,e)}return n}});var Pwe=m((Bbr,Mwe)=>{"use strict";var y9t=/^\d+$/;Mwe.exports=function(e,r,n){let i=e.path(r);if(i!=null)return i;let s=r.split("."),o="",a=!1;for(let u of s)if(!(a&&y9t.test(u))){if(o=o.length===0?u:o+"."+u,i=e.path(o),i?.schema)e=i.schema,!a&&i.$isMongooseDocumentArray&&(a=!0),n&&n[o]&&(e=e.discriminators[n[o]]??e),o="";else if(i?.instance==="Mixed")break}return i}});var Lwe=m((qbr,qwe)=>{"use strict";var g9t=kwe(),Nwe=Kv(),Fwe=Pwe(),E9t=DJ();qwe.exports=function(e){let r=e.options.arrayFilters;if(!Array.isArray(r))return;let n=e.getUpdate(),i=e.schema,s=E9t(n),o=i.options.strict;e._mongooseOptions.strict!=null&&(o=e._mongooseOptions.strict),e.model&&e.model.base.options.strictQuery!=null&&(o=e.model.base.options.strictQuery),i._userProvidedOptions.strictQuery!=null&&(o=i._userProvidedOptions.strictQuery),e._mongooseOptions.strictQuery!=null&&(o=e._mongooseOptions.strictQuery),Bwe(r,i,o,s,e)};function Bwe(t,e,r,n,i){let s={};for(let o of t){if(o==null)throw new Error(`Got null array filter in ${t}`);let a=Object.keys(o).filter(h=>o[h]!=null);if(a.length===0)continue;let u=a[0];if(u==="$and"||u==="$or"){for(let h of a)Bwe(o[h],e,r,n,i);continue}let c=u.indexOf("."),l=c===-1?u:u.substring(0,c);if(n[l]==null)continue;let d=Nwe(n[l]),p=Fwe(e,d,s),f=p!=null?p.schema:null;f!=null&&f.discriminators!=null&&o[l+"."+f.options.discriminatorKey]&&(f=f.discriminators[o[l+"."+f.options.discriminatorKey]]||f,s[d]=o[l+"."+f.options.discriminatorKey]);for(let h of a){if(n[h]===null||Object.keys(n).length===0)continue;let g=h.indexOf("."),_=g===-1?null:h.substring(g),S;if(_==null||f==null?S=p:(_=Nwe(_),S=Fwe(f,_,s)),S==null){if(!r)return;let w=_==null?d+".0":d+".0"+_;throw new Error(`Could not find path "${w}" in schema`)}typeof o[h]=="object"?o[h]=g9t(i,S,o[h]):o[h]=S.castForQuery(null,o[h])}}}});var Xx=m((Lbr,jwe)=>{"use strict";var b9t=dE(),_9t=nE();jwe.exports=function t(e){if(e==null)return!1;let r=Object.keys(e),n=r.length;if(n===0)return!1;for(let i=0;i<n;++i){let s=r[i];if(!s.startsWith("+")&&b9t(e[s])&&e[s])return _9t(e[s])?t(e[s]):!!e[s]}return!1}});var Kwe=m((jbr,$we)=>{"use strict";$we.exports=function(e,r){return e===r||r.startsWith(e+".")}});var Uwe=m(Ni=>{"use strict";var nY=["__proto__","constructor","prototype"],Zx=Ni.clone=function t(e,r){if(e==null)return e;if(Array.isArray(e))return Ni.cloneArray(e,r);if(e.constructor){if(/ObjectI[dD]$/.test(e.constructor.name))return typeof e.clone=="function"?e.clone():new e.constructor(e.id);if(e.constructor.name==="ReadPreference")return new e.constructor(e.mode,t(e.tags,r));if(e._bsontype=="Binary"&&e.buffer&&e.value)return typeof e.clone=="function"?e.clone():new e.constructor(e.value(!0),e.sub_type);if(e.constructor.name==="Date"||e.constructor.name==="Function")return new e.constructor(+e);if(e.constructor.name==="RegExp")return new RegExp(e);if(e.constructor.name==="Buffer")return Buffer.from(e)}if(S9t(e))return Ni.cloneObject(e,r);if(e.valueOf)return e.valueOf()};Ni.cloneObject=function(e,r){let n=r&&r.minimize,i={},s=Object.keys(e),o=s.length,a=!1,u,c="",l=0;for(l=0;l<o;++l)c=s[l],nY.indexOf(c)===-1&&(u=Zx(e[c],r),(!n||typeof u<"u")&&(a||(a=!0),i[c]=u));return n?a&&i:i};Ni.cloneArray=function(e,r){let n=[],i=e.length,s=0;for(;s<i;s++)n.push(Zx(e[s],r));return n};Ni.merge=function t(e,r){let n=Object.keys(r);for(let i of n)nY.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=r[i]:Ni.isObject(r[i])?t(e[i],r[i]):e[i]=r[i])};Ni.mergeClone=function t(e,r){let n=Object.keys(r);for(let i of n)nY.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=Zx(r[i]):Ni.isObject(r[i])?t(e[i],r[i]):e[i]=Zx(r[i]))};Ni.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e};Ni.readConcern=function(e){if(typeof e=="string"){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot";break}e={level:e}}return e};var v9t=Object.prototype.toString;Ni.toString=function(t){return v9t.call(t)};var S9t=Ni.isObject=function(t){return Ni.toString(t)=="[object Object]"};Ni.keys=Object.keys;Ni.create=typeof Object.create=="function"?Object.create:w9t;function w9t(t){if(arguments.length>1)throw new Error("Adding properties is not supported");function e(){}return e.prototype=t,new e}Ni.inherits=function(t,e){t.prototype=Ni.create(e.prototype),t.prototype.constructor=t};Ni.isArgumentsObject=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"}});var Gwe=m((Kbr,Vwe)=>{var PE=1e3,NE=PE*60,FE=NE*60,ty=FE*24,A9t=ty*7,C9t=ty*365.25;Vwe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return T9t(t);if(r==="number"&&isFinite(t))return e.long?x9t(t):O9t(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function T9t(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*C9t;case"weeks":case"week":case"w":return r*A9t;case"days":case"day":case"d":return r*ty;case"hours":case"hour":case"hrs":case"hr":case"h":return r*FE;case"minutes":case"minute":case"mins":case"min":case"m":return r*NE;case"seconds":case"second":case"secs":case"sec":case"s":return r*PE;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function O9t(t){var e=Math.abs(t);return e>=ty?Math.round(t/ty)+"d":e>=FE?Math.round(t/FE)+"h":e>=NE?Math.round(t/NE)+"m":e>=PE?Math.round(t/PE)+"s":t+"ms"}function x9t(t){var e=Math.abs(t);return e>=ty?eI(t,e,ty,"day"):e>=FE?eI(t,e,FE,"hour"):e>=NE?eI(t,e,NE,"minute"):e>=PE?eI(t,e,PE,"second"):t+" ms"}function eI(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var iY=m((Ubr,Hwe)=>{function I9t(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Gwe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Hwe.exports=I9t});var zwe=m((Da,tI)=>{Da.formatArgs=D9t;Da.save=k9t;Da.load=M9t;Da.useColors=R9t;Da.storage=P9t();Da.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Da.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function R9t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function D9t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+tI.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Da.log=console.debug||console.log||(()=>{});function k9t(t){try{t?Da.storage.setItem("debug",t):Da.storage.removeItem("debug")}catch{}}function M9t(){let t;try{t=Da.storage.getItem("debug")||Da.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function P9t(){try{return localStorage}catch{}}tI.exports=iY()(Da);var{formatters:N9t}=tI.exports;N9t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Jwe=m((gs,nI)=>{var F9t=require("tty"),rI=require("util");gs.init=U9t;gs.log=j9t;gs.formatArgs=q9t;gs.save=$9t;gs.load=K9t;gs.useColors=B9t;gs.destroy=rI.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");gs.colors=[6,2,3,4,5,1];try{let t=A3();t&&(t.stderr||t).level>=2&&(gs.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}gs.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function B9t(){return"colors"in gs.inspectOpts?!!gs.inspectOpts.colors:F9t.isatty(process.stderr.fd)}function q9t(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+nI.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=L9t()+e+" "+t[0]}function L9t(){return gs.inspectOpts.hideDate?"":new Date().toISOString()+" "}function j9t(...t){return process.stderr.write(rI.formatWithOptions(gs.inspectOpts,...t)+`
`)}function $9t(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function K9t(){return process.env.DEBUG}function U9t(t){t.inspectOpts={};let e=Object.keys(gs.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=gs.inspectOpts[e[r]]}nI.exports=iY()(gs);var{formatters:Wwe}=nI.exports;Wwe.o=function(t){return this.inspectOpts.colors=this.useColors,rI.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Wwe.O=function(t){return this.inspectOpts.colors=this.useColors,rI.inspect(t,this.inspectOpts)}});var Ywe=m((Vbr,sY)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?sY.exports=zwe():sY.exports=Jwe()});var Xwe=m(Qwe=>{"use strict";var ui=Qwe;ui.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(ui.distinct),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};ui.distinct.select=ui.distinct.slice=ui.distinct.sort=ui.distinct.limit=ui.distinct.skip=ui.distinct.batchSize=ui.distinct.hint=ui.distinct.tailable=!0;ui.findOneAndUpdate=ui.findOneAndRemove=function(t){let e=Object.keys(ui.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};ui.findOneAndUpdate.limit=ui.findOneAndUpdate.skip=ui.findOneAndUpdate.batchSize=ui.findOneAndUpdate.tailable=!0;ui.count=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(ui.count),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};ui.count.slice=ui.count.batchSize=ui.count.tailable=!0});var oY=m((kl,Zwe)=>{"use strict";kl.isNode=typeof process<"u"&&typeof Zwe=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;kl.isMongo=!kl.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";kl.isBrowser=!kl.isNode&&!kl.isMongo&&typeof window<"u";kl.type=kl.isNode?"node":kl.isMongo?"mongo":kl.isBrowser?"browser":"unknown"});var hS=m((e9e,t9e)=>{"use strict";var aY=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function uY(){}for(let t=0,e=aY.length;t<e;++t){let r=aY[t];uY.prototype[r]=V9t(r)}t9e.exports=e9e=uY;uY.methods=aY;function V9t(t){return function(){throw new Error("collection."+t+" not implemented")}}});var i9e=m((r9e,n9e)=>{"use strict";var G9t=hS(),cY=class extends G9t{constructor(e){super(),this.collection=e,this.collectionName=e.collectionName}async find(e,r){return this.collection.find(e,r).toArray()}async findOne(e,r){return this.collection.findOne(e,r)}async count(e,r){return this.collection.count(e,r)}async distinct(e,r,n){return this.collection.distinct(e,r,n)}async updateMany(e,r,n){return this.collection.updateMany(e,r,n)}async updateOne(e,r,n){return this.collection.updateOne(e,r,n)}async replaceOne(e,r,n){return this.collection.replaceOne(e,r,n)}async deleteOne(e,r){return this.collection.deleteOne(e,r)}async deleteMany(e,r){return this.collection.deleteMany(e,r)}async findOneAndDelete(e,r){return this.collection.findOneAndDelete(e,r)}async findOneAndUpdate(e,r,n){return this.collection.findOneAndUpdate(e,r,n)}findCursor(e,r){return this.collection.find(e,r)}};n9e.exports=r9e=cY});var o9e=m((Hbr,s9e)=>{"use strict";var lY=oY();if(lY.type=="unknown")throw new Error("Unknown environment");s9e.exports=lY.isNode?i9e():lY.isMongo?hS():hS()});var hY=m((u9e,c9e)=>{"use strict";var H9t=require("assert"),z9t=require("util"),xr=Uwe(),of=Ywe()("mquery");function Te(t,e){if(!(this instanceof Te))return new Te(t,e);let r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?xr.clone(r._conditions):{},this._fields=r._fields?xr.clone(r._fields):void 0,this._updateDoc=r._updateDoc?xr.clone(r._updateDoc):void 0,this._path=r._path||void 0,this._distinctDoc=r._distinctDoc||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}var ry="$geoWithin";Object.defineProperty(Te,"use$geoWithin",{get:function(){return ry=="$geoWithin"},set:function(t){t===!0?ry="$geoWithin":ry="$within"}});Te.prototype.toConstructor=function(){function e(n,i){if(!(this instanceof e))return new e(n,i);Te.call(this,n,i)}xr.inherits(e,Te);let r=e.prototype;return r.options={},r.setOptions(this.options),r.op=this.op,r._conditions=xr.clone(this._conditions),r._fields=xr.clone(this._fields),r._updateDoc=xr.clone(this._updateDoc),r._path=this._path,r._distinctDoc=this._distinctDoc,r._collection=this._collection,r._traceFunction=this._traceFunction,e};Te.prototype.setOptions=function(t){if(!(t&&xr.isObject(t)))return this;let e=xr.keys(t),r;for(let n=0;n<e.length;++n)if(r=e[n],typeof this[r]=="function"){let i=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,i)}else this.options[r]=t[r];return this};Te.prototype.collection=function(e){return this._collection=new Te.Collection(e),this};Te.prototype.collation=function(t){return this.options.collation=t,this};Te.prototype.$where=function(t){return this._conditions.$where=t,this};Te.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");let t=typeof arguments[0];if(t=="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(t=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};Te.prototype.equals=function(e){this._ensurePath("equals");let r=this._path;return this._conditions[r]=e,this};Te.prototype.eq=function(e){this._ensurePath("eq");let r=this._path;return this._conditions[r]=e,this};Te.prototype.or=function(e){let r=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};Te.prototype.nor=function(e){let r=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};Te.prototype.and=function(e){let r=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(t){Te.prototype[t]=function(){let e,r;arguments.length===1?(this._ensurePath(t),r=arguments[0],e=this._path):(r=arguments[1],e=arguments[0]);let n=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};return n["$"+t]=r,this}});Te.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};Te.prototype.exists=function(){let t,e;arguments.length===0?(this._ensurePath("exists"),t=this._path,e=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):arguments.length===2&&(t=arguments[0],e=arguments[1]);let r=this._conditions[t]||(this._conditions[t]={});return r.$exists=e,this};Te.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let t,e,r;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),e=this._path,t=arguments[0];else if(xr.isObject(arguments[0]))this._ensurePath("elemMatch"),e=this._path,r=arguments[0];else if(typeof arguments[1]=="function")e=arguments[0],t=arguments[1];else if(arguments[1]&&xr.isObject(arguments[1]))e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");t&&(r=new Te,t(r),r=r._conditions);let n=this._conditions[e]||(this._conditions[e]={});return n.$elemMatch=r,this};Te.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=ry,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);let e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};Te.prototype.box=function(){let t,e;if(arguments.length===3)t=arguments[0],e=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),t=this._path,e=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||ry]={$box:e},this};Te.prototype.polygon=function(){let t,e;typeof arguments[0]=="string"?(t=Array.from(arguments),e=t.shift()):(this._ensurePath("polygon"),e=this._path,t=Array.from(arguments));let r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||ry]={$polygon:t},this};Te.prototype.circle=function(){let t,e;if(arguments.length===1)this._ensurePath("circle"),t=this._path,e=arguments[0];else if(arguments.length===2)t=arguments[0],e=arguments[1];else throw new TypeError("Invalid argument");if(!("radius"in e&&e.center))throw new Error("center and radius are required");let r=this._conditions[t]||(this._conditions[t]={}),n=e.spherical?"$centerSphere":"$center",i=this._geoComparison||ry;return r[i]={},r[i][n]=[e.center,e.radius],"unique"in e&&(r[i].$uniqueDocs=!!e.unique),this};Te.prototype.near=function(){let e,r;if(this._geoComparison="$near",arguments.length===0)return this;if(arguments.length===1)this._ensurePath("near"),e=this._path,r=arguments[0];else if(arguments.length===2)e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");if(!r.center)throw new Error("center is required");let n=this._conditions[e]||(this._conditions[e]={}),i=r.spherical?"$nearSphere":"$near";if(Array.isArray(r.center)){n[i]=r.center;let s="maxDistance"in r?r.maxDistance:null;s!=null&&(n.$maxDistance=s),r.minDistance!=null&&(n.$minDistance=r.minDistance)}else{if(r.center.type!="Point"||!Array.isArray(r.center.coordinates))throw new Error(z9t.format("Invalid GeoJSON specified for %s",i));n[i]={$geometry:r.center},"maxDistance"in r&&(n[i].$maxDistance=r.maxDistance),"minDistance"in r&&(n[i].$minDistance=r.minDistance)}return this};Te.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let e=arguments[0];if(e!=null&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};Te.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let e,r;if(arguments.length===1)this._ensurePath("geometry"),r=this._path,e=arguments[0];else throw new TypeError("Invalid argument");if(!(e.type&&Array.isArray(e.coordinates)))throw new TypeError("Invalid argument");let n=this._conditions[r]||(this._conditions[r]={});return n[this._geoComparison]={$geometry:e},this};Te.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=typeof e,i,s;if((n=="string"||xr.isArgumentsObject(e))&&typeof e.length=="number"||Array.isArray(e)){for(n=="string"&&(e=e.split(/\s+/)),i=0,s=e.length;i<s;++i){let o=e[i];if(!o)continue;let a=o[0]=="-"?0:1;a===0&&(o=o.substring(1)),r[o]=a}return this}if(xr.isObject(e)){let o=xr.keys(e);for(i=0;i<o.length;++i)r[o[i]]=e[o[i]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};Te.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r=this._fields||(this._fields={});return r[t]={$slice:e},this};Te.prototype.sort=function(t){if(!t)return this;let e,r,n;this._validate("sort");let i=typeof t;if(Array.isArray(t)){for(r=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error("Invalid sort() argument, must be array of arrays");W9t(this.options,t[e][0],t[e][1])}return this}if(arguments.length===1&&i=="string"){for(t=t.split(/\s+/),r=t.length,e=0;e<r;++e){if(n=t[e],!n)continue;let s=n[0]=="-"?-1:1;s===-1&&(n=n.substring(1)),a9e(this.options,n,s)}return this}if(xr.isObject(t)){let s=xr.keys(t);for(e=0;e<s.length;++e)n=s[e],a9e(this.options,n,t[n]);return this}if(typeof Map<"u"&&t instanceof Map)return J9t(this.options,t),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var dY={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function a9e(t,e,r){if(Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n;if(r&&r.$meta){n=t.sort||(t.sort={}),n[e]={$meta:r.$meta};return}n=t.sort||(t.sort={});let i=String(r||1).toLowerCase();if(i=dY[i],!i)throw new TypeError("Invalid sort value: { "+e+": "+r+" }");n[e]=i}function W9t(t,e,r){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n=String(r||1).toLowerCase();if(n=dY[n],!n)throw new TypeError("Invalid sort value: [ "+e+", "+r+" ]");t.sort.push([e,n])}function J9t(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");e.forEach(function(r,n){let i=String(r||1).toLowerCase();if(i=dY[i],!i)throw new TypeError("Invalid sort value: < "+n+": "+r+" >");t.sort.set(n,i)})}["limit","skip","batchSize","comment"].forEach(function(t){Te.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}});Te.prototype.maxTime=Te.prototype.maxTimeMS=function(t){return this._validate("maxTime"),this.options.maxTimeMS=t,this};Te.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let t=arguments[0];if(xr.isObject(t)){let e=this.options.hint||(this.options.hint={});for(let r in t)e[r]=t[r];return this}if(typeof t=="string")return this.options.hint=t,this;throw new TypeError("Invalid hint. "+t)};Te.prototype.j=function(e){return this.options.j=e,this};Te.prototype.slaveOk=function(t){return this.options.slaveOk=arguments.length?!!t:!0,this};Te.prototype.read=Te.prototype.setReadPreference=function(t){return arguments.length>1&&!Te.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),Te.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=xr.readPref(t),this};Te.prototype.readConcern=Te.prototype.r=function(t){return this.options.readConcern=xr.readConcern(t),this};Te.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};Te.prototype.writeConcern=Te.prototype.w=function(e){return typeof e=="object"?(typeof e.j<"u"&&(this.options.j=e.j),typeof e.w<"u"&&(this.options.w=e.w),typeof e.wtimeout<"u"&&(this.options.wtimeout=e.wtimeout)):this.options.w=e==="m"?"majority":e,this};Te.prototype.wtimeout=Te.prototype.wTimeout=function(e){return this.options.wtimeout=e,this};Te.prototype.merge=function(t){if(!t)return this;if(!Te.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof Te?(t._conditions&&xr.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),xr.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),xr.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),xr.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(xr.merge(this._conditions,t),this)};Te.prototype.find=function(t){return this.op="find",Te.canMerge(t)&&this.merge(t),this};Te.prototype._find=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),of("_find",this._collection.collectionName,e,r),this._collection.find(e,r)};Te.prototype.cursor=function(e){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(e);let r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),of("findCursor",this._collection.collectionName,r,n),this._collection.findCursor(r,n)};Te.prototype.findOne=function(t){return this.op="findOne",Te.canMerge(t)&&this.merge(t),this};Te.prototype._findOne=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),of("findOne",this._collection.collectionName,e,r),this._collection.findOne(e,r)};Te.prototype.count=function(t){return this.op="count",this._validate(),Te.canMerge(t)&&this.merge(t),this};Te.prototype._count=async function(){let e=this._conditions,r=this._optionsForExec();return of("count",this._collection.collectionName,e,r),this._collection.count(e,r)};Te.prototype.distinct=function(t,e){return this.op="distinct",this._validate(),!e&&typeof t=="string"&&(e=t,t=void 0),typeof e=="string"&&(this._distinctDoc=e),Te.canMerge(t)&&this.merge(t),this};Te.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let e=this._conditions,r=this._optionsForExec();return of("distinct",this._collection.collectionName,e,r),this._collection.distinct(this._distinctDoc,e,r)};Te.prototype.updateMany=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),pY(this,"updateMany",e,r,n)};Te.prototype._updateMany=async function(){return fY(this,"updateMany")};Te.prototype.updateOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),pY(this,"updateOne",e,r,n)};Te.prototype._updateOne=async function(){return fY(this,"updateOne")};Te.prototype.replaceOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),this.setOptions({overwrite:!0}),pY(this,"replaceOne",e,r,n)};Te.prototype._replaceOne=async function(){return fY(this,"replaceOne")};function pY(t,e,r,n,i){return t.op=e,Te.canMerge(r)&&t.merge(r),n&&t._mergeUpdate(n),xr.isObject(i)&&t.setOptions(i),t}async function fY(t,e){let r=t._optionsForExec(),n=t._conditions,i=t._updateForExec();return of("update",t._collection.collectionName,n,i,r),t._collection[e](n,i,r)}Te.prototype.deleteOne=function(t){return this.op="deleteOne",Te.canMerge(t)&&this.merge(t),this};Te.prototype._deleteOne=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return of("deleteOne",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)};Te.prototype.deleteMany=function(t){return this.op="deleteMany",Te.canMerge(t)&&this.merge(t),this};Te.prototype._deleteMany=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return of("deleteOne",this._collection.collectionName,e,t),this._collection.deleteMany(e,t)};Te.prototype.findOneAndUpdate=function(t,e,r){return this.op="findOneAndUpdate",this._validate(),arguments.length===1&&(e=t,t=r=void 0),Te.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),r&&this.setOptions(r),this};Te.prototype._findOneAndUpdate=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,r)};Te.prototype.findOneAndRemove=Te.prototype.findOneAndDelete=function(t,e){return this.op="findOneAndRemove",this._validate(),Te.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};Te.prototype._findOneAndRemove=async function(){let t=this._optionsForExec(),e=this._conditions;return this._collection.findOneAndDelete(e,t)};Te.prototype.setTraceFunction=function(t){return this._traceFunction=t,this};Te.prototype.exec=async function(e){typeof e=="string"&&(this.op=e),H9t.ok(this.op,"Missing query type: (find, etc)");let r="_"+this.op;if(typeof this[r]!="function")throw new TypeError(`this[${r}] is not a function`);return this[r]()};Te.prototype.then=async function(t,e){return this.exec().then(t,e)};Te.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),of("cursor",this._collection.collectionName,t,e),this._collection.findCursor(t,e)};Te.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};Te.prototype.selectedInclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0||this._fields[n]&&typeof this._fields[n]=="object"&&this._fields[n].$meta)return!1}return!0};Te.prototype.selectedExclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0)return!0}return!1};Te.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof Te?t._updateDoc&&xr.mergeClone(this._updateDoc,t._updateDoc):xr.mergeClone(this._updateDoc,t)};Te.prototype._optionsForExec=function(){return xr.clone(this.options)};Te.prototype._fieldsForExec=function(){return xr.clone(this._fields)};Te.prototype._updateForExec=function(){let t=xr.clone(this._updateDoc),e=xr.keys(t),r={};for(let n of e){if(this.options.overwrite){r[n]=t[n];continue}n[0]!=="$"?(r.$set||(t.$set?r.$set=t.$set:r.$set={}),r.$set[n]=t[n],~e.indexOf("$set")||e.push("$set")):n==="$set"&&r.$set||(r[n]=t[n])}return this._compiledUpdate=r,r};Te.prototype._ensurePath=function(t){if(!this._path){let e=t+"() must be used after where() when called with these arguments";throw new Error(e)}};Te.permissions=Xwe();Te._isPermitted=function(t,e){let r=Te.permissions[e];return r?r[t]!==!0:!0};Te.prototype._validate=function(t){let e,r;if(t===void 0){if(r=Te.permissions[this.op],typeof r!="function")return!0;e=r(this)}else Te._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+" cannot be used with "+this.op)};Te.canMerge=function(t){return t instanceof Te||xr.isObject(t)};Te.setGlobalTraceFunction=function(t){Te.traceFunction=t};Te.utils=xr;Te.env=oY();Te.Collection=o9e();Te.BaseCollection=hS();c9e.exports=u9e=Te});var mY=m((zbr,l9e)=>{"use strict";l9e.exports=function(e,r){if(typeof e==="string"&&(e=e.split(/\s+/)),!Array.isArray(e)&&Object.prototype.toString.call(e)!=="[object Arguments]")return e;let i=e.length,s={};for(let o=0;o<i;++o){let a=e[o];if(!a)continue;let u=a[0]=="-"?0:1;!r&&u===0&&(a=a.substring(1)),s[a]=u}return s}});var f9e=m((Wbr,p9e)=>{"use strict";p9e.exports=function(e,r){let n=Object.keys(e).map(i=>Object.keys(e[i])).reduce((i,s)=>i.concat(s),[]);return r.filter(i=>d9e(i,n))};function d9e(t,e){let r=Object.keys(t)[0];if(r==="$and"||r==="$or")return Array.isArray(t[r])?t[r].find(s=>d9e(s,e))!=null:!1;let n=r.indexOf("."),i=n===-1?r:r.slice(0,n);return e.find(s=>s.includes("$["+i+"]"))!=null}});var iI=m((Jbr,h9e)=>{"use strict";h9e.exports=function(e){if(typeof e!="object"||e===null)return!1;let r=Object.keys(e),n=r.length;for(let i=0;i<n;++i)if(r[i][0]==="$")return!0;return!1}});var yY=m((Ybr,m9e)=>{"use strict";var Y9t=iI(),{trustedSymbol:Q9t}=iE();m9e.exports=function t(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e)){for(let n of e)t(n);return e}let r=Object.keys(e);for(let n of r){let i=e[n];if(!(i!=null&&i[Q9t])){if(n==="$and"||n==="$or"){t(i);continue}if(Y9t(i)){let s=Object.keys(i);if(s.length===1&&s[0]==="$eq")continue;e[n]={$eq:e[n]}}}}return e}});var g9e=m((Qbr,y9e)=>{"use strict";y9e.exports=function(e){if(e==null)return;let r=Object.keys(e);for(let n=0;n<r.length;++n)typeof e[r[n]]=="string"&&(e[r[n]]=1)}});var _9e=m((Xbr,b9e)=>{"use strict";var X9t=pE(),Z9t=Xx();b9e.exports=function(e,r,n){if(n==null)return;let i=Object.keys(n);if(r=r||{},Z9t(e))for(let s of i){E9e(r,s)?r[s]===0&&delete e[s]:e[s]=1;let o=n[s]?.refPath;typeof o=="string"&&(E9e(r,o)?r[o]===0&&delete e[o]:e[o]=1)}else if(X9t(e))for(let s of i){r[s]==null&&delete e[s];let o=n[s]?.refPath;typeof o=="string"&&r[o]==null&&delete e[o]}};function E9e(t,e){let r=e.split("."),n=r.length,i=r[0];for(let s=1;s<n;++s){if(t[i]!=null||t[i+".$"]!=null)return!0;i+="."+r[s]}return t[i]!=null||t[i+".$"]!=null}});var A9e=m((Zbr,w9e)=>{"use strict";var v9e=L0(),eAt=Kv(),S9e=RO().flatten;w9e.exports=function(t,e,r,n,i){let s=Object.keys(r||{}),o={},a={},u={},c={},l=s.length,d=!1,p,f,h;for(h=0;h<l;++h)if(s[h].startsWith("$")){if(d=!0,s[h]==="$push"||s[h]==="$addToSet"){let U=Object.keys(r[s[h]]);for(let k=0;k<U.length;++k)p=r[s[h]][U[k]],p&&p.$each?c[U[k]]=(c[U[k]]||[]).concat(p.$each):c[U[k]]=(c[U[k]]||[]).concat([p]);continue}let I=S9e(r[s[h]],null,null,e),F=Object.keys(I),B=F.length;for(let U=0;U<B;++U){let k=eAt(F[U]);f=s[h],!k.includes("$")&&(f==="$set"||f==="$setOnInsert"||f==="$pull"||f==="$pullAll"?(a[k]=I[F[U]],u[k]=f==="$pull"||f==="$pullAll"):f==="$unset"&&(a[k]=void 0),o[k]=!0)}}d||(a=S9e(r,null,null,e),o=Object.keys(a));let g=Object.keys(a),_=g.length,S=[],w=[],C=[],A=t;function O(I,F){let B=e._getSchema(g[I]);if(B!=null&&!(B.instance==="Mixed"&&B.path!==g[I]))if(F&&Array.isArray(F.$in))F.$in.forEach((U,k)=>{S.push(function(H){B.doValidate(U,function(ie){ie&&(ie.path=g[k]+".$in."+k,w.push(ie)),H(null)},A,{updateValidator:!0})})});else{if(u[g[I]]&&B.$isMongooseArray)return;B.$isMongooseDocumentArrayElement&&F!=null&&F.$__!=null?(C.push(g[I]),S.push(function(U){B.doValidate(F,function(k){if(k)if(k.errors)for(let H of Object.keys(k.errors)){let ie=k.errors[H];ie.path=g[I]+"."+H,w.push(ie)}else k.path=g[I],w.push(k);return U(null)},A,{updateValidator:!0})})):S.push(function(U){for(let k of C)if(g[I].startsWith(k+"."))return U(null);B.$isSingleNested&&C.push(g[I]),B.doValidate(F,function(k){if(B.schema!=null&&B.schema.options.storeSubdocValidationError===!1&&k instanceof v9e)return U(null);k&&(k.path=g[I],w.push(k)),U(null)},A,{updateValidator:!0})})}}for(h=0;h<_;++h)O(h,a[g[h]]);let x=Object.keys(c);for(let I of x){let F=e._getSchema(I);if(F&&F.$isMongooseDocumentArray)S.push(function(B){F.doValidate(c[I],M(I,w,B),n&&n.context==="query"?t:null)});else{F=e._getSchema(I+".0");for(let B of c[I])S.push(function(U){F.doValidate(B,M(I,w,U),n&&n.context==="query"?t:null,{updateValidator:!0})})}}if(i!=null){let I=S.length;if(I===0)return R(i);for(let F of S)F(function(){--I<=0&&R(i)});return}return function(I){let F=S.length;if(F===0)return R(I);for(let B of S)B(function(){--F<=0&&R(I)})};function R(I){if(w.length){let F=new v9e(null);for(let B of w)F.addError(B.path,B);return I(F)}I(null)}function M(I,F,B){return function(U){U&&(U.path=I,F.push(U)),B(null)}}}});var aI=m((e_r,q9e)=>{"use strict";var yS=uo(),tAt=oO(),EY=B0(),po=Qt(),yh=AO(),C9e=Cwe(),T9e=L0(),{applyGlobalMaxTimeMS:gS,applyGlobalDiskUse:ES}=eY(),rAt=vW(),nAt=tY(),iAt=rY(),sAt=W0(),oAt=Lwe(),oI=Vv(),aAt=LJ(),ka=Vn(),uAt=uc(),bS=Pv(),cAt=Tl().internalToObjectOptions,lAt=pE(),dAt=Xx(),pAt=MO(),O9e=Kwe(),I9e=ou(),uu=hY(),fAt=mY(),hAt=f9e(),mAt=yY(),yAt=g9e(),gAt=_9e(),R9e=$J(),sI=F0(),EAt=A9e(),mS=require("util"),hn=Tt(),bAt=tx().queryMiddlewareFunctions,_At=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),vAt=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function we(t,e,r,n){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new EY,this._executionStack=null;let i=Object.keys(e);for(let o of i)this._mongooseOptions[o]=e[o];n&&(this.mongooseCollection=n),r&&(this.model=r,this.schema=r.schema),this.model&&this.model._mapreduce&&this.lean(),uu.call(this,null,e),n&&this.collection(n),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;let s=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;s!=null&&(this.options.collation=s)}function D9e(t){if(t==null||typeof t!="object"||Object.keys(t).length===0)return!0;for(let e of["$and","$or","$nor"])if(Array.isArray(t[e])&&(t[e].length===0||t[e].every(r=>D9e(r))))return!0;return!1}function qE(t,e){if(e&&e.requireFilter&&D9e(t))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}we.prototype=new uu;we.prototype.constructor=we;we.prototype.count=void 0;we.prototype.findOneAndRemove=void 0;we.base=uu.prototype;Object.defineProperty(we.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});we.use$geoWithin=uu.use$geoWithin;we.prototype.toConstructor=function(){let e=this.model,r=this.mongooseCollection,n=function(o,a){if(!(this instanceof n))return new n(o,a);this._mongooseOptions=ka(i._mongooseOptions),we.call(this,o,a||null,e,r)};mS.inherits(n,e.Query);let i=n.prototype;i.options={};let s=Object.assign({},this.options);return s.sort!=null&&(i.sort(s.sort),delete s.sort),i.setOptions(s),i.op=this.op,i._validateOp(),i._conditions=ka(this._conditions),i._fields=ka(this._fields),i._update=ka(this._update,{flattenDecimals:!1}),i._path=this._path,i._distinct=this._distinct,i._collection=this._collection,i._mongooseOptions=this._mongooseOptions,n};we.prototype.clone=function(){let t=this.model,e=this.mongooseCollection,r=new this.model.Query({},{},t,e),n=Object.assign({},this.options);return n.sort!=null&&(r.sort(n.sort),delete n.sort),r.setOptions(n),r.op=this.op,r._validateOp(),r._conditions=ka(this._conditions),r._fields=ka(this._fields),r._update=ka(this._update,{flattenDecimals:!1}),r._path=this._path,r._distinct=this._distinct,r._collection=this._collection,r._mongooseOptions=this._mongooseOptions,r};we.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r={};return r[t]={$slice:e},this.select(r),this};var SAt=new Set(bAt);we.prototype._validateOp=function(){this.op!=null&&!SAt.has(this.op)&&this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};we.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};we.prototype.limit=function(e){if(this._validate("limit"),typeof e=="string")try{e=oI(e)}catch{throw new yS("Number",e,"limit")}return this.options.limit=e,this};we.prototype.skip=function(e){if(this._validate("skip"),typeof e=="string")try{e=oI(e)}catch{throw new yS("Number",e,"skip")}return this.options.skip=e,this};we.prototype.projection=function(t){return arguments.length===0?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)};we.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={}),i;this.model!=null&&hn.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?i=this.model.db.options.sanitizeProjection:this.model!=null&&hn.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?i=this.model.base.options.sanitizeProjection:i=this._mongooseOptions.sanitizeProjection;function s(o){return typeof o=="string"&&i?o=1:o}if(e=fAt(e,!0),hn.isObject(e)){if(this.selectedInclusively())Object.entries(e).forEach(([o,a])=>{a?(r["-"+o]!=null&&delete r["-"+o],r[o]=n[o]=s(a)):Object.keys(n).forEach(u=>{O9e(o,u)&&(delete r[u],delete n[u])})});else if(this.selectedExclusively())Object.entries(e).forEach(([o,a])=>{a?Object.keys(n).forEach(u=>{O9e(o,u)&&(delete r[u],delete n[u])}):(r["+"+o]!=null&&delete r["+"+o],r[o]=n[o]=s(a))});else{let o=Object.keys(e);for(let a=0;a<o.length;++a){let u=e[o[a]],c=o[a];r[c]=s(u),n[c]=s(u)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};we.prototype.schemaLevelProjections=function(e){return this._mongooseOptions.schemaLevelProjections=e,this};we.prototype.sanitizeProjection=function(e){return this._mongooseOptions.sanitizeProjection=e,this};we.prototype.read=function(e,r){return typeof e=="string"?(e=rAt(e),this.options.readPreference={mode:e,tags:r}):this.options.readPreference=e,this};we.prototype.toString=function(){return this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove"?`${this.model.modelName}.${this.op}(${mS.inspect(this._conditions)})`:this.op==="distinct"?`${this.model.modelName}.distinct('${this._distinct}', ${mS.inspect(this._conditions)})`:this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne"?`${this.model.modelName}.${this.op}(${mS.inspect(this._conditions)}, ${mS.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`};we.prototype.session=function(e){return e==null&&delete this.options.session,this.options.session=e,this};we.prototype.writeConcern=function(e){return e==null?(delete this.options.writeConcern,this):(this.options.writeConcern=e,this)};we.prototype.w=function(e){return e==null&&delete this.options.w,this.options.writeConcern!=null?this.options.writeConcern.w=e:this.options.w=e,this};we.prototype.j=function(e){return e==null&&delete this.options.j,this.options.writeConcern!=null?this.options.writeConcern.j=e:this.options.j=e,this};we.prototype.wtimeout=function(e){return e==null&&delete this.options.wtimeout,this.options.writeConcern!=null?this.options.writeConcern.wtimeout=e:this.options.wtimeout=e,this};we.prototype.getOptions=function(){return this.options};we.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&ka(t)||{},this.options=t||{},"populate"in t&&this.populate(this._mongooseOptions),this;if(t==null)return this;if(typeof t!="object")throw new Error('Options must be an object, got "'+t+'"');if(t=Object.assign({},t),Array.isArray(t.populate)){let r=t.populate;delete t.populate;let n=r.length;for(let i=0;i<n;++i)this.populate(r[i])}if("setDefaultsOnInsert"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),"overwriteDiscriminatorKey"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),"overwriteImmutable"in t&&(this._mongooseOptions.overwriteImmutable=t.overwriteImmutable,delete t.overwriteImmutable),"sanitizeProjection"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&yAt(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),"sanitizeFilter"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),"timestamps"in t&&(this._mongooseOptions.timestamps=t.timestamps,delete t.timestamps),"defaults"in t&&(this._mongooseOptions.defaults=t.defaults),"translateAliases"in t&&(this._mongooseOptions.translateAliases=t.translateAliases,delete t.translateAliases),"schemaLevelProjections"in t&&(this._mongooseOptions.schemaLevelProjections=t.schemaLevelProjections,delete t.schemaLevelProjections),t.lean==null&&this.schema&&"lean"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),typeof t.limit=="string")try{t.limit=oI(t.limit)}catch{throw new yS("Number",t.limit,"limit")}if(typeof t.skip=="string")try{t.skip=oI(t.skip)}catch{throw new yS("Number",t.skip,"skip")}for(let r of Object.keys(t))if(_At.has(r)){let n=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,n)}else this.options[r]=t[r];return this};we.prototype.explain=function(e){return arguments.length===0?this.options.explain=!0:e===!1?delete this.options.explain:this.options.explain=e,this};we.prototype.allowDiskUse=function(t){return arguments.length===0?this.options.allowDiskUse=!0:t===!1?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this};we.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this};we.prototype.getFilter=function(){return this._conditions};we.prototype.getQuery=function(){return this._conditions};we.prototype.setQuery=function(t){this._conditions=t};we.prototype.getUpdate=function(){return this._update};we.prototype.setUpdate=function(t){this._update=t};we.prototype._fieldsForExec=function(){return this._fields==null||Object.keys(this._fields).length===0?null:ka(this._fields)};we.prototype._updateForExec=function(){let t=ka(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t),r=e.length,n={};for(;r--;){let i=e[r];i[0]!=="$"?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[i]=t[i],e.splice(r,1),~e.indexOf("$set")||e.push("$set")):i==="$set"&&n.$set||(n[i]=t[i])}return n};we.prototype._optionsForExec=function(t){let e=ka(this.options);if(delete e.populate,t=t||this.model,!t)return e;nAt(t.schema,e),iAt(t.schema,e);let r=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();!this.options.hasOwnProperty("session")&&r?.session!=null&&(e.session=r.session);let n=t&&t.schema&&t.schema.options&&t.schema.options.read;if(!("readPreference"in e)&&n&&(e.readPreference=n),e.upsert!==void 0&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let i=this._fieldsForExec();i!=null&&(e.projection=i)}if(this._mongooseOptions.populate){if(e.readPreference)for(let i of Object.values(this._mongooseOptions.populate))i.options?.readPreference===void 0&&(i.options||(i.options={}),i.options.readPreference=e.readPreference);if(e.readConcern)for(let i of Object.values(this._mongooseOptions.populate))i.options?.readConcern===void 0&&(i.options||(i.options={}),i.options.readConcern=e.readConcern)}return e};we.prototype.lean=function(t){return this._mongooseOptions.lean=arguments.length?t:!0,this};we.prototype.set=function(t,e){if(typeof t=="object"){let r=Object.keys(t);for(let n of r)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this};we.prototype.get=function(e){let r=this._update;if(r==null)return;let n=r.$set;if(n==null||hn.hasUserDefinedProperty(r,e))return r[e];if(hn.hasUserDefinedProperty(n,e))return n[e]};we.prototype.error=function(e){return arguments.length===0?this._error:(this._error=e,this)};we.prototype._unsetCastError=function(){if(!(this._error==null||!(this._error instanceof yS)))return this.error(null)};we.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions};we.prototype._castConditions=function(){let t;this.model?.db.options?.sanitizeFilter!=null?t=this.model.db.options.sanitizeFilter:this.model?.base.options?.sanitizeFilter!=null?t=this.model.base.options.sanitizeFilter:t=this._mongooseOptions.sanitizeFilter,t&&mAt(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(e){this.error(e)}};function k9e(t){try{oAt(t)}catch(e){t.error(e)}}we.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._mongooseOptions,r=this._userProvidedFields||{};gS(this.options,this.model.db.options,this.model.base.options),ES(this.options,this.model.db.options,this.model.base.options);let n={session:this&&this.options&&this.options.session||null,lean:e.lean||null},i=this._optionsForExec(),s=this._conditions,o=i.projection,a=await this.mongooseCollection.find(s,i);if(i.explain)return a.explain();let u=await a.toArray();if(u.length===0)return u;if(!e.populate){let l=this.schema.options.versionKey;return e.lean&&e.lean.versionKey===!1&&l&&u.forEach(d=>{l in d&&delete d[l]}),e.lean?P9e(this.model.schema,u,null,n):this._completeMany(u,o,r,n)}let c=bS.preparePopulationOptionsMQ(this,e);return e.lean?this.model.populate(u,c):(u=await this._completeMany(u,o,r,n),await this.model.populate(u,c),u)};we.prototype.find=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new po("Query.prototype.find() no longer accepts a callback");return this.op="find",uu.canMerge(t)?(this.merge(t),_S(this)):t!=null&&this.error(new yh(t,"filter","find")),this};we.prototype.merge=function(t){if(!t)return this;let e={overwrite:!0};return t instanceof we?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),hn.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),hn.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),hn.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),hn.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),hn.merge(this._mongooseOptions,t._mongooseOptions),this):this.model!=null&&t instanceof this.model.base.Types.ObjectId?(hn.merge(this._conditions,{_id:t},e),this):(t&&t.$__&&(t=t.toObject(cAt)),e.omit={},Array.isArray(t.$and)&&(e.omit.$and=!0,this._conditions||(this._conditions={}),this._conditions.$and=(this._conditions.$and||[]).concat(t.$and.map(r=>hn.isPOJO(r)?hn.merge({},r):r))),Array.isArray(t.$or)&&(e.omit.$or=!0,this._conditions||(this._conditions={}),this._conditions.$or=(this._conditions.$or||[]).concat(t.$or.map(r=>hn.isPOJO(r)?hn.merge({},r):r))),hn.merge(this._conditions,t,e),this)};we.prototype.collation=function(t){return this.options==null&&(this.options={}),this.options.collation=t,this};we.prototype._completeOne=function(t,e,r,n){if(!t&&!this.options.includeResultMetadata)return n(null,null);let i=this.model,s=this._userProvidedFields||{},o=this._mongooseOptions,a=this.options;if(!a.lean&&o.lean&&(a.lean=o.lean),a.explain)return n(null,t);if(!o.populate){let c=this.schema.options.versionKey;return o.lean&&o.lean.versionKey===!1&&c&&c in t&&delete t[c],o.lean?bY(i.schema,t,null,e,a,n):x9e(i,t,e,a,r,s,null,n)}let u=bS.preparePopulationOptionsMQ(this,this._mongooseOptions);if(o.lean)return i.populate(t,u).then(c=>{bY(i.schema,c,null,e,a,n)},c=>{n(c)});x9e(i,t,e,a,r,s,[],(c,l)=>{if(c!=null)return n(c);i.populate(l,u).then(d=>{n(null,d)},d=>{n(d)})})};we.prototype._completeMany=async function(e,r,n,i){let s=this.model;return Promise.all(e.map(o=>new Promise((a,u)=>{let c=o;o=bS.createModel(s,o,r,n),i.session!=null&&o.$session(i.session),o.$init(c,i,l=>{if(l!=null)return u(l);a(o)})})))};we.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();gS(this.options,this.model.db.options,this.model.base.options),ES(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=await this.mongooseCollection.findOne(this._conditions,e);return new Promise((n,i)=>{this._completeOne(r,null,e.projection,(s,o)=>{if(s)return i(s);n(o)})})};we.prototype.findOne=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new po("Query.prototype.findOne() no longer accepts a callback");return this.op="findOne",this._validateOp(),r&&this.setOptions(r),e&&this.select(e),uu.canMerge(t)?(this.merge(t),_S(this)):t!=null&&this.error(new yh(t,"filter","findOne")),this};we.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(n){this.error(n)}if(this.error())throw this.error();gS(this.options,this.model.db.options,this.model.base.options),ES(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=this._conditions;return this.mongooseCollection.countDocuments(r,e)};we.prototype._applyTranslateAliases=function(){let e=!1;"translateAliases"in this._mongooseOptions?e=this._mongooseOptions.translateAliases:this.model?.schema?._userProvidedOptions?.translateAliases!=null?e=this.model.schema._userProvidedOptions.translateAliases:this.model?.base?.options?.translateAliases!=null&&(e=this.model.base.options.translateAliases),e&&this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0&&(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null&&(this._distinct=this.model.schema.aliases[this._distinct]))};we.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let e=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(e)};we.prototype.estimatedDocumentCount=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new po("Query.prototype.estimatedDocumentCount() no longer accepts a callback");return this.op="estimatedDocumentCount",this._validateOp(),t!=null&&this.setOptions(t),this};we.prototype.countDocuments=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new po("Query.prototype.countDocuments() no longer accepts a callback");return this.op="countDocuments",this._validateOp(),uu.canMerge(t)&&this.merge(t),e!=null&&this.setOptions(e),this};we.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();gS(this.options,this.model.db.options,this.model.base.options),ES(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,e)};we.prototype.distinct=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new po("Query.prototype.distinct() no longer accepts a callback");return this.op="distinct",this._validateOp(),uu.canMerge(e)?(this.merge(e),_S(this)):e!=null&&this.error(new yh(e,"filter","distinct")),t!=null&&(this._distinct=t),r!=null&&this.setOptions(r),this};we.prototype.sort=function(t,e){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(e!=null&&typeof e!="object")throw new Error("sort() options argument must be an object or nullish");this.options.sort==null&&(this.options.sort={}),e&&e.override&&(this.options.sort={});let r=this.options.sort;if(typeof t=="string"){let n=t.indexOf(" ")===-1?[t]:t.split(" ");for(let i of n){let s=i[0]=="-"?-1:1;s===-1&&(i=i.slice(1)),!sI.has(i)&&(r[i]=s)}}else if(Array.isArray(t))for(let n of t){if(!Array.isArray(n))throw new TypeError("Invalid sort() argument, must be array of arrays");let i=""+n[0];sI.has(i)||(r[i]=gY(n[1],i))}else if(typeof t=="object"&&t!=null&&!(t instanceof Map))for(let n of Object.keys(t))sI.has(n)||(r[n]=gY(t[n],n));else if(t instanceof Map)for(let n of t.keys())n=""+n,!sI.has(n)&&(r[n]=gY(t.get(n),n));else if(t!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};function gY(t,e){if(t===1||t==="asc"||t==="ascending")return 1;if(t===-1||t==="desc"||t==="descending")return-1;if(t?.$meta!=null)return{$meta:t.$meta};throw new TypeError("Invalid sort value: { "+e+": "+t+" }")}we.prototype.deleteOne=function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new po("Query.prototype.deleteOne() no longer accepts a callback");return this.op="deleteOne",this.setOptions(r),uu.canMerge(e)?(this.merge(e),_S(this)):e!=null&&this.error(new yh(e,"filter","deleteOne")),this};we.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),qE(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,e)};we.prototype.deleteMany=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new po("Query.prototype.deleteMany() no longer accepts a callback");return this.setOptions(e),this.op="deleteMany",uu.canMerge(t)?(this.merge(t),_S(this)):t!=null&&this.error(new yh(t,"filter","deleteMany")),this};we.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),qE(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,e)};function x9e(t,e,r,n,i,s,o,a){if(n.includeResultMetadata&&e==null)return u(null),null;bS.createModelAndInit(t,e,i,s,n,o,u);function u(c,l){if(c)return a(c);if(n.includeResultMetadata)return e&&l?(n.session!=null&&l.$session(n.session),r.value=l):r.value=null,a(null,r);n.session!=null&&l.$session(n.session),a(null,l)}}function _S(t){if(!t||!t.model||!t.model.schema)return;let e=t.model.schema;e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}we.prototype.findOneAndUpdate=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new po("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:r=void 0;break;case 1:e=t,t=r=void 0;break}uu.canMerge(t)?this.merge(t):t!=null&&this.error(new yh(t,"filter","findOneAndUpdate")),e&&this._mergeUpdate(e),r=r?ka(r):{},r.projection&&(this.select(r.projection),delete r.projection),r.fields&&(this.select(r.fields),delete r.fields);let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};we.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),qE(this._conditions,this.options),k9e(this),this.error())throw this.error();gS(this.options,this.model.db.options,this.model.base.options),ES(this.options,this.model.db.options,this.model.base.options),"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict);let e=this._optionsForExec(this.model);M9e(e),this._update=this._castUpdate(this._update);let r=Object.assign({},e,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=R9e(this._conditions,this.model.schema,this._update,r),!this._update||Object.keys(this._update).length===0)if(e.upsert){let o=ka(this._update);delete o._id,this._update={$set:o}}else return this._executionStack=null,await this._findOne();else{if(this._update instanceof Error)throw this._update;this._update.$set&&Object.keys(this._update.$set).length===0&&delete this._update.$set}_Y(this,"runValidators",!1)&&await this.validate(this._update,e,!1),this._update.toBSON&&(this._update=this._update.toBSON());let i=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,e);for(let o of this._transforms)i=o(i);let s=e.includeResultMetadata?i.value:i;return new Promise((o,a)=>{this._completeOne(s,i,e.projection,(u,c)=>{if(u)return a(u);o(c)})})};we.prototype.findOneAndDelete=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new po("Query.prototype.findOneAndDelete() no longer accepts a callback");return this.op="findOneAndDelete",this._validateOp(),this._validate(),uu.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};we.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),qE(this._conditions,this.options),this.error()!=null)throw this.error();let e=this.options.includeResultMetadata,r=this._conditions,n=this._optionsForExec(this.model),i=await this.mongooseCollection.findOneAndDelete(r,n);for(let o of this._transforms)i=o(i);let s=e?i.value:i;return new Promise((o,a)=>{this._completeOne(s,i,n.projection,(u,c)=>{if(u)return a(u);o(c)})})};we.prototype.findOneAndReplace=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[4]=="function")throw new po("Query.prototype.findOneAndReplace() no longer accepts a callback");this.op="findOneAndReplace",this._validateOp(),this._validate(),uu.canMerge(t)?this.merge(t):t!=null&&this.error(new yh(t,"filter","findOneAndReplace")),e!=null&&this._mergeUpdate(e),r=r||{};let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};we.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),qE(this._conditions,this.options),this.error()!=null)throw this.error();"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict,delete this.options.strict);let e=this._conditions,r=this._optionsForExec();M9e(r);let n=this.options.includeResultMetadata,i={skipId:!0};"strict"in this._mongooseOptions&&(i.strict=this._mongooseOptions.strict);let s=_Y(this,"runValidators",!1);try{let u=new this.model(this._update,null,i);if(s)await u.validate();else if(u.$__.validationError)throw u.$__.validationError;this._update=u.toBSON()}catch(u){if(u instanceof T9e)throw u;let c=new T9e;throw c.errors[u.path]=u,c}let o=await this.mongooseCollection.findOneAndReplace(e,this._update,r);for(let u of this._transforms)o=u(o);let a=n?o.value:o;return new Promise((u,c)=>{this._completeOne(a,o,r.projection,(l,d)=>{if(l)return c(l);u(d)})})};we.prototype.findById=function(t,e,r){return this.findOne({_id:t},e,r)};we.prototype.findByIdAndUpdate=function(t,e,r){return this.findOneAndUpdate({_id:t},e,r)};we.prototype.findByIdAndDelete=function(t,e){return this.findOneAndDelete({_id:t},e)};function M9e(t){"new"in t&&(t.returnDocument=t.new?"after":"before",delete t.new),"returnOriginal"in t&&(t.returnDocument=t.returnOriginal?"before":"after",delete t.returnOriginal),typeof t.returnDocument=="string"&&(t.returnOriginal=t.returnDocument==="before")}function _Y(t,e,r){let n=t._optionsForExec(t.model);return e in n?n[e]:e in t.model.base.options?t.model.base.options[e]:r}function bY(t,e,r,n,i,s){if(i.lean&&typeof i.lean.transform=="function"){i.lean.transform(e);for(let o=0;o<t.childSchemas.length;o++){let a=r?r+"."+t.childSchemas[o].model.path:t.childSchemas[o].model.path,u=t.childSchemas[o].schema,c=I9e.get(a,e);if(c!=null){if(Array.isArray(c))for(let l=0;l<c.length;l++)i.lean.transform(c[l]);else i.lean.transform(c);bY(u,c,a,n,i)}}return s?s(null,e):void 0}return i.includeResultMetadata?s(null,n):s(null,e)}function P9e(t,e,r,n){if(n.lean&&typeof n.lean.transform=="function"){for(let i of e)n.lean.transform(i);for(let i=0;i<t.childSchemas.length;i++){let s=r?r+"."+t.childSchemas[i].model.path:t.childSchemas[i].model.path,o=t.childSchemas[i].schema,a=I9e.get(s,e);if(a!=null){a=a.flat();for(let u=0;u<a.length;u++)n.lean.transform(a[u]);P9e(o,a,s,n)}}}return e}we.prototype._mergeUpdate=function(t){if(this._update||(this._update=Array.isArray(t)?[]:{}),!(t==null||typeof t=="object"&&Object.keys(t).length===0))if(t instanceof we){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");t._update&&hn.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");hn.mergeClone(this._update,t)}};async function vY(t){if(this._applyTranslateAliases(),this._castConditions(),qE(this._conditions,this.options),k9e(this),this.error()!=null)throw this.error();let e=this._conditions,r=this._optionsForExec(this.model);this._update=ka(this._update,r);let n=t==="replaceOne";if(n)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let s=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=R9e(this._conditions,this.model.schema,this._update,s)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=hAt(this._update,r.arrayFilters)),_Y(this,"runValidators",!1)&&await this.validate(this._update,r,n),this._update.toBSON&&(this._update=this._update.toBSON()),this.mongooseCollection[t](e,this._update,r)}we.prototype.validate=async function(e,r,n){if(typeof arguments[3]=="function")throw new po("Query.prototype.validate() no longer accepts a callback");await F9e(this,"validate"),n?await e.$validate():await new Promise((i,s)=>{EAt(this,this.model.schema,e,r,o=>{if(o!=null)return s(o);i()})}),await N9e(this,null,null,"validate")};we.prototype._updateMany=async function(){return vY.call(this,"updateMany")};we.prototype._updateOne=async function(){return vY.call(this,"updateOne")};we.prototype._replaceOne=async function(){return vY.call(this,"replaceOne")};we.prototype.updateMany=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),SY(this,"updateMany",t,e,r,n)};we.prototype.updateOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),SY(this,"updateOne",t,e,r,n)};we.prototype.replaceOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),SY(this,"replaceOne",t,e,r,n)};function SY(t,e,r,n,i,s){return t.op=e,t._validateOp(),n=n||{},i!=null&&"strict"in i&&(t._mongooseOptions.strict=i.strict),!(r instanceof we)&&r!=null&&r.toString()!=="[object Object]"?t.error(new yh(r,"filter",e)):t.merge(r),hn.isObject(i)&&t.setOptions(i),t._mergeUpdate(n),s&&t.exec(s),t}we.prototype.transform=function(t){return this._transforms.push(t),this};we.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case"find":if(e.length===0)throw BE(t,this);break;case"findOne":if(e==null)throw BE(t,this);break;case"replaceOne":case"updateMany":case"updateOne":if(e&&e.matchedCount===0)throw BE(t,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&e!=null&&e.value==null)throw BE(t,this);if(!this.options.includeResultMetadata&&e==null)throw BE(t,this);break;case"deleteMany":case"deleteOne":if(e.deletedCount===0)throw BE(t,this);break;default:break}return e}),this};function BE(t,e){return typeof t=="function"&&(t=t.call(e)),t==null&&(t=new tAt(e.getQuery(),e.model.modelName)),t}we.prototype.isPathSelectedInclusive=function(t){return pAt(this._fields,t)};we.prototype.exec=async function(e){if(typeof e=="function"||arguments.length>=2&&typeof arguments[1]=="function")throw new po("Query.prototype.exec() no longer accepts a callback");if(typeof e=="string"&&(this.op=e),this.op==null)throw new po("Query must have `op` before executing");if(this.model==null)throw new po("Query must have an associated model before executing");let r=vAt.get(this.op);if(!r)throw new po('Query has invalid `op`: "'+this.op+'"');if(this.options&&this.options.sort&&typeof this.options.sort=="object"&&this.options.sort.hasOwnProperty(""))throw new Error('Invalid field "" passed to sort()');if(this._executionStack!=null){let o=this.toString();o.length>60&&(o=o.slice(0,60)+"...");let a=new po("Query was already executed: "+o);throw this.model.base.options.skipOriginalStackTraces||(a.originalStack=this._executionStack),a}else this._executionStack=this.model.base.options.skipOriginalStackTraces?!0:new Error().stack;let n=null;try{await AAt(this)}catch(o){if(o instanceof EY.skipWrappedFunction)n=o;else throw o}let i,s=null;try{await F9e(this),i=n?n.args[0]:await this[r]();for(let o of this._transforms)i=o(i)}catch(o){o instanceof EY.skipWrappedFunction?i=o.args[0]:s=o,s=this.model.schema._transformDuplicateKeyError(s)}return i=await N9e(this,i,s),await wAt(this),i};function wAt(t){return new Promise((e,r)=>{t._hooks.execPost("exec",t,[],{},n=>{if(n)return r(n);e()})})}function N9e(t,e,r,n){if(t._queryMiddleware==null){if(r!=null)throw r;return e}return new Promise((i,s)=>{let o=r?{error:r}:{};t._queryMiddleware.execPost(n||t.op,t,[e],o,(a,u)=>{if(a)return s(a);i(u)})})}function AAt(t){return new Promise((e,r)=>{t._hooks.execPre("exec",t,[],n=>{if(n!=null)return r(n);e()})})}function F9e(t,e){if(t._queryMiddleware!=null)return new Promise((r,n)=>{t._queryMiddleware.execPre(e||t.op,t,[],i=>{if(i!=null)return n(i);r()})})}we.prototype.then=function(t,e){return this.exec().then(t,e)};we.prototype.catch=function(t){return this.exec().then(null,t)};we.prototype.finally=function(t){return this.exec().finally(t)};we.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};we.prototype.pre=function(t){return this._hooks.pre("exec",t),this};we.prototype.post=function(t){return this._hooks.post("exec",t),this};we.prototype._castUpdate=function(e){let r=this.schema,n=r.options.discriminatorKey,i=r._baseSchema?r._baseSchema:r;if(this._mongooseOptions.overwriteDiscriminatorKey&&e[n]!=null&&i.discriminators){let o=Object.values(i.discriminators).find(a=>a.discriminatorMapping.value===e[n]);o!=null&&(r=o)}let s;return"upsert"in this.options&&(s=this.options.upsert),aAt(r,e,{strict:this._mongooseOptions.strict,upsert:s,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};we.prototype.populate=function(){let t=Array.from(arguments);if(!t.some(Boolean))return this;let e=hn.populate.apply(null,t),r=this._mongooseOptions;if(r.lean!=null){let i=r.lean;for(let s of e)(s&&s.options&&s.options.lean)==null&&(s.options=s.options||{},s.options.lean=i)}hn.isObject(r.populate)||(r.populate={});let n=r.populate;for(let i of e){let s=i.path;n[s]&&n[s].populate&&i.populate&&(i.populate=n[s].populate.concat(i.populate)),n[i.path]=i}return this};we.prototype.getPopulatedPaths=function(){let e=this._mongooseOptions.populate||{},r=Object.keys(e);for(let n of Object.keys(e)){let i=e[n];Array.isArray(i.populate)&&B9e(r,i.populate,n+".")}return r};function B9e(t,e,r){for(let n of e)t.push(r+n.path),Array.isArray(n.populate)&&B9e(t,n.populate,r+n.path+".")}we.prototype.cast=function(t,e){e||(e=this._conditions),t=t||this.model;let r=t.schema.options.discriminatorKey;e!=null&&e.hasOwnProperty(r)&&(t=uAt(t.discriminators,e[r])||t);let n={upsert:this.options&&this.options.upsert};this.options&&("strict"in this.options&&(n.strict=this.options.strict),"strictQuery"in this.options&&(n.strictQuery=this.options.strictQuery)),"sanitizeFilter"in this._mongooseOptions&&(n.sanitizeFilter=this._mongooseOptions.sanitizeFilter);try{return sAt(t.schema,e,n,this)}catch(i){throw typeof i.setModel=="function"&&i.setModel(t),i}};we.prototype._castFields=function(e){let r,n,i,s,o;if(e){i=Object.keys(e),n=[];for(let a=0;a<i.length;++a)s=i[a],e[s].$elemMatch&&(r||(r={}),r[s]=e[s],n.push(s))}if(r){try{o=this.cast(this.model,r)}catch(a){return a}for(let a=0;a<n.length;++a)s=n[a],e[s]=o[s]}return e};we.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let e;this.model!=null&&hn.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?e=this.model.db.options.sanitizeProjection:this.model!=null&&hn.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?e=this.model.base.options.sanitizeProjection:e=this._mongooseOptions.sanitizeProjection,(this._mongooseOptions.schemaLevelProjections??!0)&&bS.applyPaths(this._fields,this.model.schema,e);let n=!0;"selectPopulatedPaths"in this.model.base.options&&(n=this.model.base.options.selectPopulatedPaths),"selectPopulatedPaths"in this.model.schema.options&&(n=this.model.schema.options.selectPopulatedPaths),n&&gAt(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};we.prototype.cursor=function(e){e&&this.setOptions(e);try{this.cast(this.model)}catch(r){return new C9e(this)._markError(r)}return new C9e(this)};we.prototype.tailable=function(t,e){if(t!=null&&typeof t.constructor=="function"&&t.constructor.name==="Object"&&(e=t,t=!0),t===void 0&&(t=!0),e&&typeof e=="object")for(let r of Object.keys(e))r==="awaitData"||r==="awaitdata"?this.options.awaitData=!!e[r]:this.options[r]=e[r];return this.options.tailable=arguments.length?!!t:!0,this};we.prototype.near=function(){let t=[],e=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(typeof arguments[0]=="string")t.push(arguments[0]);else if(hn.isObject(arguments[0]))typeof arguments[0].spherical!="boolean"&&(arguments[0].spherical=e),t.push(arguments[0]);else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t.push({center:[arguments[0],arguments[1]],spherical:e});else if(typeof arguments[0]=="string"&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else if(typeof arguments[0]=="string"&&hn.isObject(arguments[1]))t.push(arguments[0]),typeof arguments[1].spherical!="boolean"&&(arguments[1].spherical=e),t.push(arguments[1]);else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]=="string"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number")t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return we.base.near.apply(this,t)};we.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};Symbol.asyncIterator!=null&&(we.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this.cursor()});we.prototype.box=function(t,e){return!Array.isArray(t)&&hn.isObject(t)&&(e=t.ur,t=t.ll),we.base.box.call(this,t,e)};we.prototype.center=we.base.circle;we.prototype.centerSphere=function(){arguments[0]!=null&&typeof arguments[0].constructor=="function"&&arguments[0].constructor.name==="Object"&&(arguments[0].spherical=!0),arguments[1]!=null&&typeof arguments[1].constructor=="function"&&arguments[1].constructor.name==="Object"&&(arguments[1].spherical=!0),we.base.circle.apply(this,arguments)};we.prototype.selectedInclusively=function(){return dAt(this._fields)};we.prototype.selectedExclusively=function(){return lAt(this._fields)};we.prototype.model;q9e.exports=we});var V9e=m((t_r,U9e)=>{"use strict";var vS=Qt(),$9e=require("stream").Readable,CAt=QJ(),TAt=Vu(),OAt=B0(),K9e=require("util");function Ma(t){$9e.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];let e=t._connection,r=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},e?(this.cursor=e.db.aggregate(t._pipeline,t.options||{}),setImmediate(()=>this.emit("cursor",this.cursor))):xAt(r,this,t)}K9e.inherits(Ma,$9e);function xAt(t,e,r){t.collection.buffer?t.collection.emitter.once("queue",function(){t.hooks.execPre("aggregate",r,function(n){if(n!=null){L9e(e,n);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}):t.hooks.execPre("aggregate",r,function(n){if(n!=null){L9e(e,n);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}function L9e(t,e){if(e instanceof OAt.skipWrappedFunction){let r=e.args[0];if(r!=null&&(!Array.isArray(r)||r.length)){let n=new vS('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+K9e.inspect(r)+'".');t._markError(n),t.listeners("error").length>0&&t.emit("error",n);return}t.emit("cursor",null);return}t._markError(e),t.listeners("error").length>0&&t.emit("error",e)}Ma.prototype._read=function(){let t=this;uI(this,function(e,r){if(e)return t.emit("error",e);if(!r){t.push(null),t.cursor.close(function(n){if(n)return t.emit("error",n)});return}t.push(r)})};if(Symbol.asyncIterator!=null){let t="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";Ma.prototype[Symbol.asyncIterator]=function(){throw new vS(t)}}Object.defineProperty(Ma.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Ma.prototype._markError=function(t){return this._error=t,this};Ma.prototype.close=async function(){if(typeof arguments[0]=="function")throw new vS("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}this.emit("close")};Ma.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>this.cursor.close()).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};Ma.prototype.next=async function(){if(typeof arguments[0]=="function")throw new vS("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((e,r)=>{uI(this,(n,i)=>{if(n!=null)return r(n);e(i)})})};Ma.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new vS("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let r=this;return typeof e=="function"&&(e={}),e=e||{},CAt(function(n){return uI(r,n)},t,e)};Symbol.asyncIterator!=null&&(Ma.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});Ma.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(j9e)===-1&&this.map(j9e),this};Ma.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};function j9e(t){return t==null?{done:!0}:{value:t,done:!1}}Ma.prototype.addCursorFlag=function(t,e){let r=this;return IAt(this,function(){r.cursor.addCursorFlag(t,e)}),this};function IAt(t,e){if(t.cursor)return e();t.once("cursor",function(){e()})}function uI(t,e){let r=e;if(t._transforms.length&&(r=function(n,i){if(n||i===null&&!t._mongooseOptions.transformNull)return e(n,i);e(n,t._transforms.reduce(function(s,o){return o(s)},i))}),t._error)return TAt(function(){r(t._error)});if(t.cursor)return t.cursor.next().then(n=>{if(!n)return r(null,null);r(null,n)},n=>r(n));t.once("error",e),t.once("cursor",function(){uI(t,e)})}U9e.exports=Ma});var wY=m((r_r,G9e)=>{"use strict";G9e.exports=function(e,r,n){let i=r&&r.discriminatorMapping;if(n=n||"",i&&!i.isRoot){let s=e,o=(n.length>0?n+".":n)+i.key,a=i.value;if(s[0]!=null&&s[0].$match&&(s[0].$match[o]===void 0||s[0].$match[o]===a))s[0].$match[o]=a;else if(s[0]!=null&&s[0].$geoNear)s[0].$geoNear.query=s[0].$geoNear.query||{},s[0].$geoNear.query[o]=a;else if(s[0]!=null&&s[0].$search)if(s[1]&&s[1].$match!=null)s[1].$match[o]=s[1].$match[o]||a;else{let u={};u[o]=a,s.splice(1,0,{$match:u})}else{let u={};u[o]=a,s.unshift({$match:u})}}}});var z9e=m((n_r,H9e)=>{"use strict";H9e.exports=function t(e){if(Array.isArray(e))for(let r of e){if(r==null)continue;let n=r.$group||r.$bucket||r.$bucketAuto;if(n!=null)for(let s of Object.keys(n))RAt(n[s]);let i=Object.keys(r)[0];if(i&&typeof r[i]=="object"){let s=r[i];for(let o of Object.keys(s))s[o]!=null&&s[o].$function!=null&&typeof s[o].$function.body=="function"&&(s[o].$function.body=s[o].$function.body.toString())}if(r.$facet!=null)for(let s of Object.keys(r.$facet))t(r.$facet[s])}};function RAt(t){if(!(t==null||t.$accumulator==null))for(let e of["init","accumulate","merge","finalize"])typeof t.$accumulator[e]=="function"&&(t.$accumulator[e]=String(t.$accumulator[e]))}});var CY=m((i_r,X9e)=>{"use strict";var Y9e=V9e(),ny=Qt(),Q9e=aI(),{applyGlobalMaxTimeMS:DAt,applyGlobalDiskUse:kAt}=eY(),MAt=Vn(),PAt=Fo(),AY=wY(),NAt=z9e(),W9e=Tt(),{modelSymbol:FAt}=ot(),BAt=Q9e.prototype.read,qAt=Q9e.prototype.readConcern,J9e=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function nr(t,e){this._pipeline=[],e==null||e[FAt]?this._model=e:this._connection=e,this.options={},arguments.length===1&&Array.isArray(t)&&this.append.apply(this,t)}nr.prototype.options;nr.prototype._optionsForExec=function(){let t=this.options||{},e=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();return!t.hasOwnProperty("session")&&e?.session!=null&&(t.session=e.session),t};nr.prototype.model=function(t){return arguments.length===0?this._model:(this._model=t,t.schema!=null&&(this.options.readPreference==null&&t.schema.options.read!=null&&(this.options.readPreference=t.schema.options.read),this.options.collation==null&&t.schema.options.collation!=null&&(this.options.collation=t.schema.options.collation)),t)};nr.prototype.append=function(){let t=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every(LAt))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(t),this};nr.prototype.addFields=function(t){if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},t)})};nr.prototype.project=function(t){let e={};if(typeof t=="object"&&!Array.isArray(t))Object.keys(t).forEach(function(r){e[r]=t[r]});else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?0:1;n===0&&(r=r.substring(1)),e[r]=n});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:e})};nr.prototype.near=function(t){if(t==null)throw new ny("Aggregate `near()` must be called with non-nullish argument");if(t.near==null)throw new ny("Aggregate `near()` argument must have a `near` property");let e=Array.isArray(t.near)?t.near:t.near.coordinates;if(typeof t.near=="object"&&(!Array.isArray(e)||e.length<2||e.find(n=>typeof n!="number")))throw new ny(`Aggregate \`near()\` argument has invalid coordinates, got "${e}"`);let r={};return r.$geoNear=t,this.append(r)};"group match skip limit out densify fill".split(" ").forEach(function(t){nr.prototype[t]=function(e){let r={};return r["$"+t]=e,this.append(r)}});nr.prototype.unwind=function(){let t=[...arguments],e=[];for(let r of t)if(r&&typeof r=="object")e.push({$unwind:r});else if(typeof r=="string")e.push({$unwind:r[0]==="$"?r:"$"+r});else throw new Error('Invalid arg "'+r+'" to unwind(), must be string or object');return this.append.apply(this,e)};nr.prototype.replaceRoot=function(t){let e;return typeof t=="string"?e=t.startsWith("$")?t:"$"+t:e=t,this.append({$replaceRoot:{newRoot:e}})};nr.prototype.count=function(t){return this.append({$count:t})};nr.prototype.sortByCount=function(t){if(t&&typeof t=="object")return this.append({$sortByCount:t});if(typeof t=="string")return this.append({$sortByCount:t[0]==="$"?t:"$"+t});throw new TypeError('Invalid arg "'+t+'" to sortByCount(), must be string or object')};nr.prototype.lookup=function(t){return this.append({$lookup:t})};nr.prototype.graphLookup=function(t){let e={};if(t){if(!W9e.isObject(t))throw new TypeError("Invalid graphLookup() argument. Must be an object.");W9e.mergeClone(e,t);let r=e.startWith;r&&typeof r=="string"&&(e.startWith=e.startWith.startsWith("$")?e.startWith:"$"+e.startWith)}return this.append({$graphLookup:e})};nr.prototype.sample=function(t){return this.append({$sample:{size:t}})};nr.prototype.sort=function(t){let e={};if(PAt(t)==="Object"){let r=["desc","descending",-1];Object.keys(t).forEach(function(n){if(t[n]instanceof Object&&t[n].$meta){e[n]=t[n];return}e[n]=r.indexOf(t[n])===-1?1:-1})}else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?-1:1;n===-1&&(r=r.substring(1)),e[r]=n});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:e})};nr.prototype.unionWith=function(t){return this.append({$unionWith:t})};nr.prototype.read=function(t,e){return BAt.call(this,t,e),this};nr.prototype.readConcern=function(t){return qAt.call(this,t),this};nr.prototype.redact=function(t,e,r){if(arguments.length===3){if(typeof e=="string"&&!J9e.has(e)||typeof r=="string"&&!J9e.has(r))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");t={$cond:{if:t,then:e,else:r}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:t})};nr.prototype.explain=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new ny("Aggregate.prototype.explain() no longer accepts a callback");let r=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");AY(this._pipeline,this._model.schema),await new Promise((o,a)=>{r.hooks.execPre("aggregate",this,u=>{if(u){let c={error:u};return r.hooks.execPost("aggregate",this,[null],c,l=>{a(l)})}else o()})});let n=r.collection.aggregate(this._pipeline,this.options);e==null&&(e=!0);let i=null;try{i=await n.explain(e)}catch(o){await new Promise((a,u)=>{let c={error:o};r.hooks.execPost("aggregate",this,[null],c,l=>l?u(l):a())})}let s={error:null};return await new Promise((o,a)=>{r.hooks.execPost("aggregate",this,[i],s,u=>u?a(u):o())}),i};nr.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this};nr.prototype.hint=function(t){return this.options.hint=t,this};nr.prototype.session=function(t){return t==null?delete this.options.session:this.options.session=t,this};nr.prototype.option=function(t){for(let e in t)this.options[e]=t[e];return this};nr.prototype.cursor=function(t){return this._optionsForExec(),this.options.cursor=t||{},new Y9e(this)};nr.prototype.collation=function(t){return this.options.collation=t,this};nr.prototype.facet=function(t){return this.append({$facet:t})};nr.prototype.search=function(t){return this.append({$search:t})};nr.prototype.pipeline=function(){return this._pipeline};nr.prototype.exec=async function(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]=="function")throw new ny("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new ny("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let e=this._model,r=this._model.collection;if(DAt(this.options,e.db.options,e.base.options),kAt(this.options,e.db.options,e.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new Y9e(this);if(AY(this._pipeline,this._model.schema),NAt(this._pipeline),await new Promise((o,a)=>{e.hooks.execPre("aggregate",this,u=>{if(u){let c={error:u};return e.hooks.execPost("aggregate",this,[null],c,l=>{a(l)})}else o()})}),!this._pipeline.length)throw new ny("Aggregate has empty pipeline");let n=MAt(this.options||{}),i;try{i=await(await r.aggregate(this._pipeline,n)).toArray()}catch(o){await new Promise((a,u)=>{let c={error:o};e.hooks.execPost("aggregate",this,[null],c,l=>{if(l)return u(l);a()})})}let s={error:null};return await new Promise((o,a)=>{e.hooks.execPost("aggregate",this,[i],s,u=>u?a(u):o())}),i};nr.prototype.then=function(t,e){return this.exec().then(t,e)};nr.prototype.catch=function(t){return this.exec().then(null,t)};nr.prototype.finally=function(t){return this.exec().finally(t)};Symbol.asyncIterator!=null&&(nr.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()});function LAt(t){if(typeof t!="object"||t===null)return!1;let e=Object.keys(t);return e.length===1&&e[0][0]==="$"}nr._prepareDiscriminatorPipeline=AY;X9e.exports=nr});var eAe=m((s_r,Z9e)=>{"use strict";var jAt=Vn(),cI=class{constructor(e){e!=null&&Object.assign(this,jAt(e))}};cI.prototype.__subdocs=null;Z9e.exports=cI});var rAe=m((o_r,tAe)=>{"use strict";tAe.exports=function t(e,r){let n=Object.keys(r.paths),i=n.length;for(let s=0;s<i;++s){let o="",a=n[s],u=r.paths[a],c=u.splitPath(),l=c.length,d=e;for(let p=0;p<l&&d!=null;++p){let f=c[p];if(o+=(o.length?".":"")+f,p===l-1){if(typeof d[f]<"u"){u.$isSingleNested?t(d[f],u.caster.schema):u.$isMongooseDocumentArray&&Array.isArray(d[f])&&d[f].forEach(g=>t(g,u.schema));break}let h=u.getDefault(e,!1,{skipCast:!0});typeof h<"u"&&(d[f]=h,u.$isSingleNested?t(h,u.caster.schema):u.$isMongooseDocumentArray&&Array.isArray(h)&&h.forEach(g=>t(g,u.schema)))}else d[f]==null&&(d[f]={}),d=d[f]}}}});var OY=m((a_r,nAe)=>{"use strict";nAe.exports=TY;function TY(t,e=new WeakSet,r=!1){if(!e.has(t)){e.add(t);for(let n of Object.keys(t.paths)){let i=t.paths[n];if(i.schema&&(TY(i.schema,e),!!i.schema._applyDiscriminators&&!(i._appliedDiscriminators&&!r))){for(let s of i.schema._applyDiscriminators.keys()){let{schema:o,options:a}=i.schema._applyDiscriminators.get(s);TY(o,e),i.discriminator(s,o,r?{...a,overwriteExisting:!0}:a)}i._appliedDiscriminators=!0}}}}});var sAe=m((u_r,iAe)=>{"use strict";var $At=si(),KAt=Tt();iAe.exports=function t(e,r){let n=xY();function i(s,o){Object.defineProperty(e.prototype,s,{get:function(){let a={};for(let u in o.methods[s])a[u]=o.methods[s][u].bind(this);return a},configurable:!0})}for(let s of Object.keys(r.methods)){let o=r.methods[s];if(r.tree.hasOwnProperty(s))throw new Error('You have a method and a property in your schema both named "'+s+'"');if(typeof o=="function"&&n.prototype[s]===o){delete r.methods[s];continue}r.reserved[s]&&!$At(r,`methodOptions.${s}.suppressWarning`,!1)&&KAt.warn(`mongoose: the method name "${s}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${s}', fn, { suppressWarning: true })\`.`),typeof o=="function"?e.prototype[s]=o:i(s,r)}e.$appliedMethods=!0;for(let s of Object.keys(r.paths)){let o=r.paths[s];o.$isSingleNested&&!o.caster.$appliedMethods&&t(o.caster,o.schema),o.$isMongooseDocumentArray&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema)}}});var uAe=m((c_r,aAe)=>{"use strict";var oAe=Iz(),UAt=pE(),VAt=Xx(),pI=Tt().isPOJO;aAe.exports=function(e,r,n){if(r==null||e==null)return e;let i=null;return VAt(r)?i=!1:UAt(r)&&(i=!0),i==null?e:i?(n=n||oAe(r),lI(e,r,n)):(n=n||oAe(r),dI(e,r,n))};function lI(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>lI(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let a=i?i+"."+o:o;e.hasOwnProperty(a)||n.hasOwnProperty(o)?pI(e[a])||pI(n[o])?s[o]=lI(s[o],e,r,n[o],a):delete s[o]:r[a]&&(s[o]=lI(s[o],e,r,n[o],a))}return s}function dI(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>dI(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let a=i?i+"."+o:o;if(e.hasOwnProperty(a)||n.hasOwnProperty(o)){(pI(e[a])||pI(n[o]))&&(s[o]=dI(s[o],e,r,n[o],a));continue}else r[a]?s[o]=dI(s[o],e,r,n[o],a):delete s[o]}return s}});var lAe=m((l_r,cAe)=>{"use strict";cAe.exports=function(e){let r=!1;for(let n of Object.keys(e))e[n]==="text"&&(r=!0);return r}});var pAe=m((d_r,dAe)=>{"use strict";var GAt=lAe();dAe.exports=function(e,r,n){GAt(e)||n.hasOwnProperty("collation")&&!r.hasOwnProperty("collation")&&(r.collation=n.collation)}});var hAe=m((p_r,fAe)=>{"use strict";var HAt=EO(),{queryMiddlewareFunctions:zAt,aggregateMiddlewareFunctions:WAt,modelMiddlewareFunctions:JAt,documentMiddlewareFunctions:YAt}=tx(),QAt=Array.from(new Set([...zAt,...WAt,...JAt,...YAt]));fAe.exports=function(e,r,n){let i={useErrorHandlers:!0,numCallbackParams:1};e.$__insertMany=r.createWrapper("insertMany",e.$__insertMany,e,i),r=r.filter(s=>QAt.indexOf(s.name)!==-1?!!s.model:s.model!==!1);for(let s of Object.keys(n))if(r.hasHooks(s)){let o=e[s];e[s]=function(){let a=arguments.length,u=a>0?arguments[a-1]:null,c=typeof u=="function"?u:null,l=Array.prototype.slice.call(arguments,0,c==null?a:a-1);return HAt(c,d=>{r.execPre(s,e,l,function(p){if(p!=null)return d(p);let f=0,h=o.apply(e,l.concat(g));h!=null&&typeof h.then=="function"&&h.then(_=>g(null,_),_=>g(_));function g(_,S){if(!(f++>0)){if(_!=null)return d(_);r.execPost(s,e,[S],function(w){if(w!=null)return d(w);d(null,S)})}}})},e.events)}}}});var yAe=m((f_r,mAe)=>{"use strict";mAe.exports=function(e,r){for(let n in r.statics)e[n]=r.statics[n]}});var vAe=m((h_r,_Ae)=>{"use strict";var gAe=ex(),XAt=ou();_Ae.exports=EAe;function EAe(t,e,r){return e==null?e:(ZAt(t,e,r),bAe(t,e,r))}function ZAt(t,e,r){for(let n of t.childSchemas){let i=n.model.path,s=n.schema;if(!i)continue;let o=XAt.get(i,e);o==null||Array.isArray(o)&&o.flat(1/0).length===0||EAe(s,o,r)}}function bAe(t,e,r){if(e==null||typeof e!="object")return;if(Array.isArray(e)){for(let a of e)bAe(t,a,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let a of Object.keys(t.discriminators)){let u=t.discriminators[a],c=u.discriminatorMapping.key,l=u.discriminatorMapping.value;if(e[c]==l){t=u;break}}let n=gAe(t.options.timestamps,"createdAt"),i=gAe(t.options.timestamps,"updatedAt"),s=r?.currentTime,o=null;s!=null?o=s():t.base?.now?o=t.base.now():o=new Date,n&&e[n]==null&&!r?.isUpdate&&(e[n]=o),i&&(e[i]=o)}});var AAe=m((m_r,wAe)=>{"use strict";var e8t=ou();wAe.exports=SAe;function SAe(t,e,r){if(e==null)return e;let n=r,i=null;if(Array.isArray(r)){n=[],i=[];for(let s of r)s.length===1?i.push(s[0]):n.push(s)}return t8t(t,e,n),IY(t,e,i)}function t8t(t,e,r){let n=!1;for(let i of t.childSchemas){let s=i.model.path,o=i.schema;if(!s)continue;let a=e8t.get(s,e);if(a==null||Array.isArray(a)&&a.flat(1/0).length===0)continue;let u=null;if(Array.isArray(r)){u=[];for(let c of r)c[0]==s&&u.push(c.slice(1));if(u.length===0)continue}SAe(o,a,u),n=!0}r&&r.length&&!n&&IY(t,e,r)}function IY(t,e,r){if(!(e==null||typeof e!="object")){if(Array.isArray(e)){for(let n of e)IY(t,n,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let n of Object.keys(t.discriminators)){let i=t.discriminators[n],s=i.discriminatorMapping.key,o=i.discriminatorMapping.value;if(e[s]==o){t=i;break}}r==null&&(r=Object.keys(t.virtuals));for(let n of r){if(t.virtuals[n]==null)continue;let i=t.virtuals[n],s=Array.isArray(n)?n:n.indexOf(".")===-1?[n]:n.split("."),o=e;for(let c=0;c<s.length-1;++c)o[s[c]]=s[c]in o?o[s[c]]:{},o=o[s[c]];let a=i.applyGetters(o[s[s.length-1]],e);i.options&&(i.options.ref||i.options.refPath)&&a===void 0&&(i.options.justOne?a=null:a=[]),o[s[s.length-1]]=a}}}});var fI=m((y_r,CAe)=>{"use strict";CAe.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}});var SS=m((g_r,TAe)=>{"use strict";TAe.exports=new WeakMap});var RAe=m((E_r,IAe)=>{"use strict";var r8t=Vn(),OAe=SS(),n8t=ot().modelSymbol,i8t=Tt();IAe.exports=xAe;var hI=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function xAe(t,e,r,n,i){let s=[],o=n.isVirtual&&n.justOne&&t.length>1?!1:n.sort&&t.length>1,a=n.$nullIfNotFound,u,c,l;i8t.isMongooseArray(t)&&(t=t.__array);let d=0,p=t.length;if(o&&i&&n[hI]===void 0){n[hI]=!1;for(let f in r)if(Array.isArray(r[f])){n[hI]=!0;break}}for(d=0;d<p;++d){if(l=t[d],Array.isArray(l)){xAe(l,e,r,n,!0),s.push(l);continue}if(l===null&&o===!1){s.push(l);continue}if(l?.constructor?.name==="Binary"&&l.sub_type===4&&typeof l.toUUID=="function"||l?.constructor?.name==="Buffer"&&l._subtype===4&&typeof l.toUUID=="function"?c=String(l.toUUID()):c=String(l),u=e[c],n.clone&&u!=null)if(n.lean){let f=OAe.get(u);u=r8t(u),OAe.set(u,f)}else u=u.constructor.hydrate(u._doc);if(i)if(u)if(o){let f=r[c];n[hI]?s.push(u):s[f]=u}else s.push(u);else l!=null&&l[n8t]!=null?s.push(l):s.push(n.retainNullValues||a?null:l);else s[d]=u||null}t.length=0,s.length&&s.forEach(function(f,h){t[h]=f})}});var RY=m((b_r,DAe)=>{"use strict";DAe.exports=mI;function mI(t,e){if(t.virtuals[e])return{virtual:t.virtuals[e],path:void 0};let r=e.split("."),n="",i="";for(let s=0;s<r.length;++s){if(n+=(n.length>0?".":"")+r[s],t.virtuals[n]){if(s===r.length-1)return{virtual:t.virtuals[n],path:i};continue}if(!t.nested[n]){if(t.paths[n]&&t.paths[n].schema){t=t.paths[n].schema;let o=r.slice(s+1).join(".");if(t.virtuals[o]){if(s===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[i,n].filter(a=>!!a).join(".")};continue}if(s+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=mI(t.discriminators[a],o);if(u!=null){let c=[i,n,u.nestedSchemaPath].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}i+=(i.length>0?".":"")+n,n="";continue}else if(t.paths[n]?.$isSchemaMap&&t.paths[n].$__schemaType?.schema){t=t.paths[n].$__schemaType.schema,++s;let o=r.slice(s+1).join(".");if(t.virtuals[o]){if(s===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[i,n,"$*"].filter(a=>!!a).join(".")};continue}if(s+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=mI(t.discriminators[a],o);if(u!=null){let c=[i,n,u.nestedSchemaPath,"$*"].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}i+=(i.length>0?".":"")+"$*"+n,n=""}if(t.discriminators)for(let o of Object.keys(t.discriminators)){let a=mI(t.discriminators[o],e);if(a)return a}return null}}}});var MAe=m((yI,kAe)=>{(function(t,e){typeof yI=="object"&&typeof kAe<"u"?e(yI):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sift={}))})(yI,(function(t){"use strict";var e=function(D,N){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,Q){K.__proto__=Q}||function(K,Q){for(var Oe in Q)Object.prototype.hasOwnProperty.call(Q,Oe)&&(K[Oe]=Q[Oe])},e(D,N)};function r(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");e(D,N);function K(){this.constructor=D}D.prototype=N===null?Object.create(N):(K.prototype=N.prototype,new K)}typeof SuppressedError=="function"&&SuppressedError;var n=function(D){var N="[object "+D+"]";return function(K){return i(K)===N}},i=function(D){return Object.prototype.toString.call(D)},s=function(D){return D instanceof Date?D.getTime():a(D)?D.map(s):D&&typeof D.toJSON=="function"?D.toJSON():D},o=function(D){return D??null},a=n("Array"),u=n("Object"),c=n("Function"),l=function(D,N){return D.hasOwnProperty(N)&&!c(D[N])},d=function(D){return D&&(D.constructor===Object||D.constructor===Array||D.constructor.toString()==="function Object() { [native code] }"||D.constructor.toString()==="function Array() { [native code] }")&&!D.toJSON},p=function(D,N){if(D==null&&D==N||D===N)return!0;if(Object.prototype.toString.call(D)!==Object.prototype.toString.call(N))return!1;if(a(D)){if(D.length!==N.length)return!1;for(var K=0,Q=D.length;K<Q;K++)if(!p(D[K],N[K]))return!1;return!0}else if(u(D)){if(Object.keys(D).length!==Object.keys(N).length)return!1;for(var Oe in D)if(!p(D[Oe],N[Oe]))return!1;return!0}return!1},f=function(D,N,K,Q,Oe,Ie){var be=N[Q];if(a(D)&&isNaN(Number(be))&&!l(D,be)){for(var xe=0,Fe=D.length;xe<Fe;xe++)if(!f(D[xe],N,K,Q,xe,D))return!1}return Q===N.length||D==null?K(D,Oe,Ie,Q===0,Q===N.length):f(D[be],N,K,Q+1,be,D)},h=(function(){function D(N,K,Q,Oe){this.params=N,this.owneryQuery=K,this.options=Q,this.name=Oe,this.init()}return D.prototype.init=function(){},D.prototype.reset=function(){this.done=!1,this.keep=!1},D})(),g=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe)||this;return be.children=Ie,be}return N.prototype.reset=function(){this.keep=!1,this.done=!1;for(var K=0,Q=this.children.length;K<Q;K++)this.children[K].reset()},N.prototype.childrenNext=function(K,Q,Oe,Ie,be){for(var xe=!0,Fe=!0,je=0,ft=this.children.length;je<ft;je++){var cr=this.children[je];if(cr.done||cr.next(K,Q,Oe,Ie,be),cr.keep||(Fe=!1),cr.done){if(!cr.keep)break}else xe=!1}this.done=xe,this.keep=Fe},N})(h),_=(function(D){r(N,D);function N(K,Q,Oe,Ie,be){var xe=D.call(this,K,Q,Oe,Ie)||this;return xe.name=be,xe}return N})(g),S=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.next=function(K,Q,Oe,Ie){this.childrenNext(K,Q,Oe,Ie)},N})(g),w=(function(D){r(N,D);function N(K,Q,Oe,Ie,be){var xe=D.call(this,Q,Oe,Ie,be)||this;return xe.keyPath=K,xe.propop=!0,xe._nextNestedValue=function(Fe,je,ft,cr,vn){return xe.childrenNext(Fe,je,ft,cr,vn),!xe.done},xe}return N.prototype.next=function(K,Q,Oe){f(K,this.keyPath,this._nextNestedValue,0,Q,Oe)},N})(g),C=function(D,N){if(D instanceof Function)return D;if(D instanceof RegExp)return function(Q){var Oe=typeof Q=="string"&&D.test(Q);return D.lastIndex=0,Oe};var K=s(D);return function(Q){return N(K,s(Q))}},A=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){this._test=C(this.params,this.options.compare)},N.prototype.next=function(K,Q,Oe){(!Array.isArray(Oe)||Oe.hasOwnProperty(Q))&&this._test(K,Q,Oe)&&(this.done=!0,this.keep=!0)},N})(h),O=function(D,N,K){return new A(D,N,K)},x=function(D){return function(N,K,Q,Oe){return D(N,K,Q,Oe)}},R=function(D){return x(function(N,K,Q,Oe){var Ie=typeof s(N),be=D(N);return new A(function(xe){var Fe=o(xe);return typeof s(Fe)===Ie&&be(Fe)},K,Q,Oe)})},M=function(D,N,K,Q){var Oe=Q.operations[D];return Oe||I(D),Oe(N,K,Q,D)},I=function(D){throw new Error("Unsupported operation: ".concat(D))},F=function(D,N){for(var K in D)if(N.operations.hasOwnProperty(K)||K.charAt(0)==="$")return!0;return!1},B=function(D,N,K,Q,Oe){if(F(N,Oe)){var Ie=k(N,K,Oe),be=Ie[0],xe=Ie[1];if(xe.length)throw new Error("Property queries must contain only operations, or exact objects.");return new w(D,N,Q,Oe,be)}return new w(D,N,Q,Oe,[new A(N,Q,Oe)])},U=function(D,N,K){N===void 0&&(N=null);var Q=K===void 0?{}:K,Oe=Q.compare,Ie=Q.operations,be={compare:Oe||p,operations:Object.assign({},Ie||{})},xe=k(D,null,be),Fe=xe[0],je=xe[1],ft=[];return Fe.length&&ft.push(new w([],D,N,be,Fe)),ft.push.apply(ft,je),ft.length===1?ft[0]:new S(D,N,be,ft)},k=function(D,N,K){var Q=[],Oe=[];if(!d(D))return Q.push(new A(D,D,K)),[Q,Oe];for(var Ie in D)if(K.operations.hasOwnProperty(Ie)){var be=M(Ie,D[Ie],D,K);if(be&&!be.propop&&N&&!K.operations[N])throw new Error("Malformed query. ".concat(Ie," cannot be matched against property."));be!=null&&Q.push(be)}else Ie.charAt(0)==="$"?I(Ie):Oe.push(B(Ie.split("."),D[Ie],Ie,D,K));return[Q,Oe]},H=function(D){return function(N,K,Q){return D.reset(),D.next(N,K,Q),D.keep}},ie=function(D,N){return N===void 0&&(N={}),H(U(D,null,N))},j=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){this._test=C(this.params,this.options.compare)},N.prototype.reset=function(){D.prototype.reset.call(this),this.keep=!0},N.prototype.next=function(K){this._test(K)&&(this.done=!0,this.keep=!1)},N})(h),V=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){if(!this.params||typeof this.params!="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=U(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(K){if(a(K)){for(var Q=0,Oe=K.length;Q<Oe;Q++){this._queryOperation.reset();var Ie=K[Q];this._queryOperation.next(Ie,Q,K,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},N})(h),Ee=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){this._queryOperation=U(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(K,Q,Oe,Ie){this._queryOperation.next(K,Q,Oe,Ie),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},N})(h),Re=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){},N.prototype.next=function(K){a(K)&&K.length===this.params&&(this.done=!0,this.keep=!0)},N})(h),fe=function(D){if(D.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},Ve=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!1,K}return N.prototype.init=function(){var K=this;fe(this.params),this._ops=this.params.map(function(Q){return U(Q,null,K.options)})},N.prototype.reset=function(){this.done=!1,this.keep=!1;for(var K=0,Q=this._ops.length;K<Q;K++)this._ops[K].reset()},N.prototype.next=function(K,Q,Oe){for(var Ie=!1,be=!1,xe=0,Fe=this._ops.length;xe<Fe;xe++){var je=this._ops[xe];if(je.next(K,Q,Oe),je.keep){Ie=!0,be=je.keep;break}}this.keep=be,this.done=Ie},N})(h),Me=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!1,K}return N.prototype.next=function(K,Q,Oe){D.prototype.next.call(this,K,Q,Oe),this.keep=!this.keep},N})(Ve),Ce=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){var K=this,Q=Array.isArray(this.params)?this.params:[this.params];this._testers=Q.map(function(Oe){if(F(Oe,K.options))throw new Error("cannot nest $ under ".concat(K.name.toLowerCase()));return C(Oe,K.options.compare)})},N.prototype.next=function(K,Q,Oe){for(var Ie=!1,be=!1,xe=0,Fe=this._testers.length;xe<Fe;xe++){var je=this._testers[xe];if(je(K)){Ie=!0,be=!0;break}}this.keep=be,this.done=Ie},N})(h),Rr=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe,Ie)||this;return be.propop=!0,be._in=new Ce(K,Q,Oe,Ie),be}return N.prototype.next=function(K,Q,Oe,Ie){this._in.next(K,Q,Oe),a(Oe)&&!Ie?this._in.keep?(this.keep=!1,this.done=!0):Q==Oe.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},N.prototype.reset=function(){D.prototype.reset.call(this),this._in.reset()},N})(h),_t=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.next=function(K,Q,Oe,Ie,be){be?Oe.hasOwnProperty(Q)===this.params&&(this.done=!0,this.keep=!0):(this.done=!0,this.keep=!this.params)},N})(h),sa=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe,K.map(function(xe){return U(xe,Q,Oe)}),Ie)||this;return be.propop=!1,fe(K),be}return N.prototype.next=function(K,Q,Oe,Ie){this.childrenNext(K,Q,Oe,Ie)},N})(_),hi=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe,K.map(function(xe){return U(xe,Q,Oe)}),Ie)||this;return be.propop=!0,be}return N.prototype.next=function(K,Q,Oe,Ie){this.childrenNext(K,Q,Oe,Ie)},N})(_),tr=function(D,N,K){return new A(D,N,K)},P=function(D,N,K,Q){return new j(D,N,K,Q)},$=function(D,N,K,Q){return new Ve(D,N,K,Q)},G=function(D,N,K,Q){return new Me(D,N,K,Q)},ne=function(D,N,K,Q){return new V(D,N,K,Q)},Y=function(D,N,K,Q){return new Rr(D,N,K,Q)},te=function(D,N,K,Q){return new Ce(D,N,K,Q)},de=R(function(D){return function(N){return N!=null&&N<D}}),z=R(function(D){return function(N){return N===D||N<=D}}),X=R(function(D){return function(N){return N!=null&&N>D}}),ue=R(function(D){return function(N){return N===D||N>=D}}),se=function(D,N,K){var Q=D[0],Oe=D[1];return new A(function(Ie){return s(Ie)%Q===Oe},N,K)},Se=function(D,N,K,Q){return new _t(D,N,K,Q)},He=function(D,N,K){return new A(new RegExp(D,N.$options),N,K)},tt=function(D,N,K,Q){return new Ee(D,N,K,Q)},zt={number:function(D){return typeof D=="number"},string:function(D){return typeof D=="string"},bool:function(D){return typeof D=="boolean"},array:function(D){return Array.isArray(D)},null:function(D){return D===null},timestamp:function(D){return D instanceof Date}},Nr=function(D,N,K){return new A(function(Q){if(typeof D=="string"){if(!zt[D])throw new Error("Type alias does not exist");return zt[D](Q)}return Q!=null?Q instanceof D||Q.constructor===D:!1},N,K)},Lr=function(D,N,K,Q){return new sa(D,N,K,Q)},Rt=function(D,N,K,Q){return new hi(D,N,K,Q)},ur=function(D,N,K){return new Re(D,N,K,"$size")},kn=function(){return null},Wc=function(D,N,K){var Q;if(c(D))Q=D;else if(!process.env.CSP_ENABLED)Q=new Function("obj","return "+D);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new A(function(Oe){return Q.bind(Oe)(Oe)},N,K)},Fu=Object.freeze({__proto__:null,$Size:Re,$all:Rt,$and:Lr,$elemMatch:ne,$eq:tr,$exists:Se,$gt:X,$gte:ue,$in:te,$lt:de,$lte:z,$mod:se,$ne:P,$nin:Y,$nor:G,$not:tt,$options:kn,$or:$,$regex:He,$size:ur,$type:Nr,$where:Wc}),Z=function(D,N,K){var Q=K===void 0?{}:K,Oe=Q.compare,Ie=Q.operations;return U(D,N,{compare:Oe,operations:Object.assign({},Fu,Ie||{})})},oe=function(D,N){N===void 0&&(N={});var K=Z(D,null,N);return H(K)};t.$Size=Re,t.$all=Rt,t.$and=Lr,t.$elemMatch=ne,t.$eq=tr,t.$exists=Se,t.$gt=X,t.$gte=ue,t.$in=te,t.$lt=de,t.$lte=z,t.$mod=se,t.$ne=P,t.$nin=Y,t.$nor=G,t.$not=tt,t.$options=kn,t.$or=$,t.$regex=He,t.$size=ur,t.$type=Nr,t.$where=Wc,t.EqualsOperation=A,t.createDefaultQueryOperation=Z,t.createEqualsOperation=O,t.createOperationTester=H,t.createQueryOperation=U,t.createQueryTester=ie,t.default=oe,Object.defineProperty(t,"__esModule",{value:!0})}))});var NAe=m((__r,DY)=>{var PAe=MAe();DY.exports=PAe.default;Object.assign(DY.exports,PAe)});var $Ae=m((v_r,jAe)=>{"use strict";var s8t=nx(),o8t=fI(),a8t=RAe(),gI=si(),u8t=RY(),LAe=SS(),FAe=XO(),c8t=Fz(),kY=ou(),BAe=NAe().default,EI=Tt(),{populateModelSymbol:l8t}=ot();jAe.exports=function(e){let r=Object.assign({},gI(e,"allOptions.options.options"),gI(e,"allOptions.options")),n=Object.assign({},e.options,r,{justOne:e.justOne,isVirtual:e.isVirtual});n.$nullIfNotFound=e.isVirtual;let i=e.populatedModel,s=[].concat(e.rawIds);e.allIds=[].concat(e.allIds),a8t(e.rawIds,e.rawDocs,e.rawOrder,n);let o=e.docs,a=e.rawIds,u=e.options,c=e.count&&e.isVirtual,l,d=0;function p(f){if(++d,c)return f;if(f instanceof o8t)return f.val;if(f===void 0)return f;let h=e.allIds[l];if(e.path.endsWith(".$*"))return wS(f,u,n,h);if(e.justOne===!0&&Array.isArray(f)){let g=[];for(let _ of f){let S=LAe.get(_);(S==null||S===i)&&g.push(_)}for(;f.length>g.length;)Array.prototype.pop.apply(f,[]);for(let _=0;_<g.length;++_)f[_]=g[_];return wS(f[0],u,n,h)}else{if(e.justOne===!1&&!Array.isArray(f))return wS([f],u,n,h);if(e.justOne===!0&&!Array.isArray(f)&&Array.isArray(h))return wS(f,u,n,f==null?f:h[d-1])}return wS(f,u,n,h)}for(l=0;l<o.length;++l){d=0;let f=e.path.endsWith(".$*")?e.path.slice(0,-3):e.path,h=kY.get(f,o[l],FAe);if(h==null&&!u8t(e.originalModel.schema,f))continue;let g;c?g=d8t(a[l]):Array.isArray(e.match)?g=Array.isArray(a[l])?a[l].filter(O=>O==null||BAe(e.match[l])(O)):[a[l]].filter(O=>O==null||BAe(e.match[l])(O))[0]:g=a[l];let _=e.originalModel.schema,S=gI(o[l],"$__",null)!=null,w=S?h instanceof Map:EI.isPOJO(h);if(w=w&&gI(_._getSchema(f),"$isSchemaMap"),!e.isVirtual&&w){let O=h instanceof Map?Array.from(h.keys()):Object.keys(h);g=g.reduce((x,R,M)=>(x.set(O[M],R),x),new Map)}if(S&&Array.isArray(g))for(let O of g)O!=null&&O.$__!=null&&(O.$__.parent=o[l]);else S&&g!=null&&g.$__!=null&&(g.$__.parent=o[l]);if(e.isVirtual&&S){o[l].$populated(f,e.justOne?s[0]:s,e.allOptions),Array.isArray(g)&&(g=g.map(O=>O??void 0)),kY.set(f,g,o[l],function(x,R,M){return arguments.length>=3?(x[R]=M,x[R]):x instanceof Map&&R==="$*"?[...x.values()]:x[R]},p,!1);continue}let C=f.split("."),A=o[l];for(let O=0;O<C.length-1&&!(Array.isArray(A)&&!EI.isArrayIndex(C[O])||C[O]==="$*");++O){if(A[C[O]]==null){let x=C.slice(0,O+1).join("."),R=_._getSchema(x);if(g==null&&R!=null&&R.$isMongooseArray)break;A[C[O]]={}}if(A=A[C[O]],typeof A!="object")break}o[l].$__&&(e.allOptions.options[l8t]=e.allOptions.model,o[l].$populated(f,e.unpopulatedValues[l],e.allOptions.options),g!=null&&g.$__!=null&&(g.$__.wasPopulated={value:e.unpopulatedValues[l]}),g instanceof Map&&!g.$isMongooseMap&&(g=new s8t(g,f,o[l],o[l].schema.path(f).$__schemaType))),kY.set(f,g,o[l],FAe,p,!1),o[l].$__&&c8t(o[l],[e.allOptions.options])}};function d8t(t){return Array.isArray(t)?t.some(e=>Array.isArray(e)||e===null)?t.map(e=>e==null?0:Array.isArray(e)?e.filter(r=>r!=null).length:1):t.filter(e=>e!=null).length:t==null?0:1}function wS(t,e,r,n){let i=typeof r.transform=="function",s=i?r.transform:o=>o;if(Array.isArray(t)){let o=[],a=t.length;for(let l=0;l<a;++l){let d=t[l],p=Array.isArray(n)?n[l]:n;if(!(!MY(d)&&(!r.retainNullValues||d!=null)&&!i)){{if(!r.retainNullValues&&d==null)continue;i&&(d=s(MY(d)?d:null,p))}if(qAe(d,e),o.push(d),e.originalLimit&&o.length>=e.originalLimit)break}}let u=o.length;for(;t.length>u;)Array.prototype.pop.apply(t,[]);let c=0;if(EI.isMongooseArray(t))for(c=0;c<u;++c)t.set(c,o[c],!0);else for(c=0;c<u;++c)t[c]=o[c];return t}return MY(t)||EI.isPOJO(t)?(qAe(t,e),s(t,n)):t instanceof Map?t:r.justOne===!1?[]:t==null?s(t,n):s(null,n)}function qAe(t,e){t!=null&&e.excludeId&&(typeof t.$__setValue=="function"?delete t._doc._id:delete t._id)}function MY(t){return t==null?!1:Array.isArray(t)||t.$isMongooseMap||t.$__!=null||LAe.has(t)}});var GAe=m((S_r,VAe)=>{"use strict";var p8t=fI(),f8t=qz(),{trusted:bI}=iE(),KAe=iI();VAe.exports=function(e,r,n,i,s){let o=h8t(r);if(n.size===1){let a=Array.from(n)[0],u=i.schema.path(a);if(a!=="_id"||!o._id)e=UAe(e,u,s),o[a]=bI({$in:e});else if(a==="_id"&&o._id){let l=KAe(o[a])?o[a]:{$eq:o[a]};o[a]={...bI({$in:e}),...l}}let c=f8t(a);for(let l=0;l<c.length-1;++l){let d=c[l];if(o[d]!=null&&o[d].$elemMatch!=null){o[d].$elemMatch[a.slice(d.length+1)]=bI({$in:e}),delete o[a];break}}}else{let a=[];Array.isArray(o.$or)?(o.$and=[{$or:o.$or},{$or:a}],delete o.$or):o.$or=a;for(let u of n)if(u!=="_id"||!o._id){let c=i.schema.path(u);e=UAe(e,c,s),a.push({[u]:{$in:e}})}else if(u==="_id"&&o._id){let c=KAe(o[u])?o[u]:{$eq:o[u]};o[u]={...bI({$in:e}),...c}}}return o};function UAe(t,e,r){return t=t.filter(n=>!(n instanceof p8t)),r?t.filter(n=>{try{return e.cast(n),!0}catch{return!1}}):t}function h8t(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(e=>Object.assign({},e)))}:Object.assign({},t[0]):Object.assign({},t)}});var JAe=m((w_r,WAe)=>{"use strict";var HAe=$0(),m8t=si(),y8t=uc(),zAe=SS(),LE=ou(),g8t=ot().populateModelSymbol;WAe.exports=function t(e,r,n,i){let s=r.path(i),o=n;if(s)return s;let a=r.discriminatorMapping&&r.discriminatorMapping.key;if(a&&e!=null){if(n!=null&&n[a]!=null){let l=y8t(e.discriminators,n[a]);r=l?l.schema:r}else if(e.discriminators!=null)return Object.keys(e.discriminators).reduce((l,d)=>{let p=e.discriminators[d];return l.concat(t(p,p.schema,null,i))},[])}function u(l,d,p,f){let h=l.length+1,g,_;for(;h--;){if(_=l.slice(0,h).join("."),g=d.path(_),g==null)continue;if(g.caster){if(g.caster instanceof HAe)return g.caster;let C=null;if(g.schema!=null&&g.schema.discriminators!=null){let A=g.schema.discriminators,O=_+"."+g.schema.options.discriminatorKey,x=p?LE.get(O,p)||[]:[];C=Object.keys(A).reduce(function(R,M){let I=A[M].discriminatorMapping.value;return(n==null||x.indexOf(M)!==-1||x.indexOf(I)!==-1)&&R.push(A[M]),R},[])}if(h!==l.length&&g.schema){let A;if(l[h]==="$")return h+1===l.length?g:(A=u(l.slice(h+1),d,p?LE.get(_,p):null,f.concat(l.slice(0,h))),A&&(A.$parentSchemaDocArray=A.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g)),A);if(C!=null&&C.length>0){A=[];for(let O of C){let x=u(l.slice(h),O,p?LE.get(_,p):null,f.concat(l.slice(0,h)));x!=null&&(x.$parentSchemaDocArray=x.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g),x.$parentSchemaDocArray&&(A.$parentSchemaDocArray=x.$parentSchemaDocArray),A.push(x))}return A}else return A=u(l.slice(h),g.schema,p?LE.get(_,p):null,f.concat(l.slice(0,h))),A&&(A.$parentSchemaDocArray=A.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g)),A}else if(h!==l.length&&g.$isMongooseArray&&g.casterConstructor.$isMongooseArray){let A=g;for(;A.$isMongooseArray&&!A.$isMongooseDocumentArray;)A=A.casterConstructor;let O=u(l.slice(h),A.schema,null,f.concat(l.slice(0,h)));if(O!=null)return O;if(A.schema.discriminators){let x=[];for(let R of Object.keys(A.schema.discriminators)){let M=A.schema.discriminators[R]||A.schema,I=u(l.slice(h),M,null,f.concat(l.slice(0,h)));I!=null&&x.push(I)}if(x.length>0)return x}}}else if(g.$isSchemaMap&&g.$__schemaType instanceof HAe)return g.$__schemaType;let S=f.concat([_]).join(".");if(o!=null&&o.$__&&o.$populated(S,!0)&&h<l.length){let C=o.$populated(S,!0).options[g8t];if(C!=null)return u(l.slice(h),C.schema,p?LE.get(_,p):null,f.concat(l.slice(0,h)))}let w=m8t(o,_);if(w!=null){let C=Array.isArray(w)&&w.length>0?zAe.get(w[0]):zAe.get(w),A=C!=null?C.schema:null;if(A!=null){let O=u(l.slice(h),A,p?LE.get(_,p):null,f.concat(l.slice(0,h)));if(O!=null)return O.$parentSchemaDocArray=O.$parentSchemaDocArray||(A.$isSingleNested?null:A),O}}return g}}let c=i.split(".");for(let l=0;l<c.length;++l)c[l]==="$"&&(c[l]="0");return u(c,r,n,[])}});var t8e=m((A_r,e8e)=>{"use strict";var LY=wa(),E8t=fI(),b8t=Vn(),pc=si(),_8t=uc(),v8t=Fo(),YAe=JAe(),S8t=RY(),AS=XO(),iy=ou(),_I=gW(),fo=Tt(),FY=ot().modelSymbol,PY=ot().populateModelSymbol,BY=j0().schemaMixedSymbol,w8t=wz();e8e.exports=function(e,r,n){let i,s=r.length,o=[],a=n.model&&n.model.modelName||n.model,u,c,l,d={},p=e.schema;if(n._localModel!=null&&n._localModel.schema.nested[n.path])return[];let f=S8t(e.schema,n.path);if((f==null?null:f.virtual)!=null)return A8t(e,r,n,f);let g=YAe(e,p,null,n.path);if(g=Array.isArray(g)?g:[g].filter(w=>w!=null),!(n.strictPopulate===!1||n.options?.strictPopulate===!1)&&g.length===0&&n._localModel!=null)return new w8t(n._fullPath||n.path);for(let w=0;w<s;w++){i=r[w];let C=null;if(i.$__!=null&&i.populated(n.path)&&(n.forceRepopulate!=null?n.forceRepopulate:i.constructor.base.options.forceRepopulate)===!1)continue;let A=i!=null&&i.$__!=null?i.$__schema:p;if(u=YAe(e,A,i,n.path),u!=null&&u.$isMongooseDocumentArray&&u.options.ref==null&&u.options.refPath==null)continue;if(u&&u.$parentSchemaDocArray&&pc(n,"options.sort")!=null)return new LY("Cannot populate with `sort` on path "+n.path+" because it is a subproperty of a document array");l=null;let x=!1,R=null,M=null,I=null;if(u!=null&&u.instance==="Embedded"){if(u.options.ref){let V={localField:n.path+"._id",foreignField:"_id",justOne:!0},Ee=S(i,u,a,e),Re=iy.get(n.path,i),fe=iy.get("_id",Re);qY(e,o,d,Ee.modelNames,n,V,fe,i,M,Re)}continue}if(Array.isArray(u)){let V=u;for(let Ee of V){let Re,fe;try{fe=S(i,Ee,a,e),Re=fe.modelNames,x=x||fe.isRefPath,R=R||fe.refPath,C=fe.justOne}catch(Ve){return Ve}if(!(x&&!fe.isRefPath)&&Re){l=l||[];for(let Ve of Re)l.indexOf(Ve)===-1&&l.push(Ve)}}}else{try{let V=S(i,u,a,e);l=V.modelNames,x=V.isRefPath,R=R||V.refPath,C=V.justOne,M=pc(u,"options.populate",null),x&&(I=l,l=Array.from(new Set(l)))}catch(V){return V}if(!l)continue}let F={},B=n.path,U="_id";if("justOne"in n&&n.justOne!==void 0?C=n.justOne:u&&!u[BY]&&(n.path.endsWith("."+u.path)||n.path===u.path)&&(C=Array.isArray(u)?u.every(V=>!V.$isMongooseArray):!u.$isMongooseArray),!l)continue;F.isVirtual=!1,F.justOne=C,F.localField=B,F.foreignField=U;let k=XAe(i,B,e,n,null,u),H=String(fo.getValue(U,i));n._docs[H]=Array.isArray(k)?k.slice():k;let ie=pc(n,"match",null),j=typeof ie=="function";j&&(ie=ie.call(i,i)),$Y(ie),F.match=ie,F.hasMatchFunction=j,F.isRefPath=x,F.modelNamesInOrder=I,x&&(l=C8t(i,p,F,n,R,k)||l);try{qY(e,o,d,l,n,F,k,i,M)}catch(V){return V}}return o;function S(w,C,A,O){let x,R=!1,M=null,I=C;C&&C.instance==="Array"&&(C=C.caster),C&&C.$isSchemaMap&&(C=C.$__schemaType);let F=C&&C.options&&C.options.ref;if(c=C&&C.options&&C.options.refPath,C!=null&&C[BY]&&!F&&!c&&!A)return{modelNames:null};if(A)x=[A];else if(c!=null){if(typeof c=="function"){let B=n.path.slice(0,n.path.length-C.path.length-1),U=iy.get(B,w,AS),k=Array.isArray(U)?fo.array.flatten(U):U?[U]:[];x=new Set;for(let H of k)c=c.call(H,H,n.path),_I(c,w,n.path,p,n._queryProjection).forEach(ie=>x.add(ie));x=Array.from(x)}else x=_I(c,w,n.path,p,n._queryProjection);R=!0}else{let B,U,k,H,ie=O,j=O.schema.options.discriminatorKey;if(!C&&j&&(H=fo.getValue(j,w))){let V=_8t(O.discriminators,H)||O;if(V!=null)ie=V;else try{ie=jY(O.db,H)}catch(Ee){return Ee}k=ie.schema._getSchema(n.path),k&&k.caster&&(k=k.caster)}else k=C;if(I&&I.path.endsWith(".$*")?M=!I.$isMongooseArray&&!I._arrayPath:k!=null&&(M=!k.$isMongooseArray&&!k._arrayPath),(B=pc(k,"options.ref"))!=null)if(k!=null&&typeof B=="function"&&n.path.endsWith("."+k.path)){x=new Set;let V=n.path.slice(0,n.path.length-k.path.length-1),Ee=iy.get(V,w,AS),Re=Array.isArray(Ee)?fo.array.flatten(Ee):Ee?[Ee]:[];for(let fe of Re)x.add(NY(B,fe));Re.length===0?x=[NY(B,w)]:x=Array.from(x)}else B=NY(B,w),x=[B];else if((k=pc(C,"options.refPath"))!=null)if(R=!0,typeof U=="function"){let V=n.path.slice(0,n.path.length-k.path.length-1),Ee=iy.get(V,w,AS),Re=Array.isArray(Ee)?fo.array.flatten(Ee):Ee?[Ee]:[];x=new Set;for(let fe of Re)U=U.call(fe,fe,n.path),_I(U,w,n.path,p,n._queryProjection).forEach(Ve=>x.add(Ve));x=Array.from(x)}else x=_I(U,w,n.path,p,n._queryProjection)}if(!x)if(n._localModel==null)x=[O.modelName];else return{modelNames:x,justOne:M,isRefPath:R,refPath:c};return Array.isArray(x)||(x=[x]),{modelNames:x,justOne:M,isRefPath:R,refPath:c}}};function A8t(t,e,r,n){let i=[],s={},o=n.virtual;for(let a of e){let u=null,c={},l,d=n.nestedSchemaPath?n.nestedSchemaPath+".":"";typeof r.localField=="string"?l=r.localField:typeof o.options.localField=="function"?l=d+o.options.localField.call(a,a):Array.isArray(o.options.localField)?l=o.options.localField.map(w=>d+w):l=d+o.options.localField,c.count=o.options.count,o.options.skip!=null&&!r.hasOwnProperty("skip")&&(r.skip=o.options.skip),o.options.limit!=null&&!r.hasOwnProperty("limit")&&(r.limit=o.options.limit),o.options.perDocumentLimit!=null&&!r.hasOwnProperty("perDocumentLimit")&&(r.perDocumentLimit=o.options.perDocumentLimit);let p=o.options.foreignField;if(!l||!p)return new LY(`Cannot populate virtual \`${r.path}\` on model \`${t.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);typeof l=="function"&&(l=l.call(a,a)),typeof p=="function"&&(p=p.call(a,a)),c.isRefPath=!1;let f=null;"justOne"in r&&r.justOne!==void 0&&(f=r.justOne),u=o._getModelNamesForPopulate(a),o.options.refPath?(f=!!o.options.justOne,c.isRefPath=!0):o.options.ref&&(f=!!o.options.justOne),c.isVirtual=!0,c.virtual=o,c.justOne=f;let h=pc(c,"virtual.options.match",null)||pc(c,"virtual.options.options.match",null),g=pc(r,"match",null)||h,_=typeof g=="function";if(_&&(g=g.call(a,a,c.virtual)),Array.isArray(l)&&Array.isArray(p)&&l.length===p.length){g=Object.assign({},g);for(let w=1;w<l.length;++w)g[p[w]]=ZAe(iy.get(l[w],a,AS),t.schema),_=!0;l=l[0],p=p[0]}c.localField=l,c.foreignField=p,c.match=g,c.hasMatchFunction=_,$Y(g);let S=XAe(a,l,t,r,o);try{qY(t,i,s,u,r,c,S,a)}catch(w){return w}}return i}function qY(t,e,r,n,i,s,o,a,u,c){let l=i.connection!=null?i.connection:t.db;if(c=c===void 0?o:c,Array.isArray(c)&&(c=fo.cloneArrays(c)),n==null)return;let d=fo.array.flatten(n),p=d.length;for(;p--;){let f=d[p];if(f==null)continue;let h;if(i.model&&i.model[FY])h=i.model;else if(f[FY])h=f,f=h.modelName;else try{h=jY(l,f)}catch(w){if(o!==void 0)throw w;h=null}let g=o,_=s.modelNamesInOrder?s.modelNamesInOrder:n;s.isRefPath&&Array.isArray(o)&&o.length===_.length&&(g=QAe(o,_,f));let S=i.perDocumentLimit==null?pc(i,"options.perDocumentLimit",null):i.perDocumentLimit;if(!r[f]||S!=null){let w={model:h};s.isVirtual&&pc(s.virtual,"options.options")?w.options=b8t(s.virtual.options.options):u!=null&&(w.options=Object.assign({},u)),fo.merge(w,i),i[PY]=h,w[PY]=h,r[f]={model:h,options:w,match:s.hasMatchFunction?[s.match]:s.match,docs:[a],ids:[g],allIds:[o],unpopulatedValues:[c],localField:new Set([s.localField]),foreignField:new Set([s.foreignField]),justOne:s.justOne,isVirtual:s.isVirtual,virtual:s.virtual,count:s.count,[PY]:h},e.push(r[f])}else r[f].localField.add(s.localField),r[f].foreignField.add(s.foreignField),r[f].docs.push(a),r[f].ids.push(g),r[f].allIds.push(o),r[f].unpopulatedValues.push(c),s.hasMatchFunction&&r[f].match.push(s.match)}}function jY(t,e){return t.models[e]==null&&t._parent!=null?jY(t._parent,e):t.model(e)}function QAe(t,e,r){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)?t.flatMap((n,i)=>QAe(n,e[i],r)):[]:e===r?Array.isArray(t)?fo.array.flatten(t):[t]:[]}function NY(t,e){return typeof t=="function"&&!t[FY]?t.call(e,e):t}function XAe(t,e,r,n,i,s){let o=r.schema._getPathType(e),a=o==="real"?r.schema.path(e):o.schema,u=a&&a.getters?a.getters:[];e=a!=null&&a.instance==="Embedded"?e+"._id":e;let c=pc(n,"options",{}),l="getters"in c?c.getters:pc(i,"options.getters",!1);if(u.length!==0&&l){let d=t.$__!=null?t:r.hydrate(t),p=fo.getValue(e,t);if(Array.isArray(p)){let f=fo.getValue(e.split(".").slice(0,-1),d);return p.map((h,g)=>a.applyGetters(h,f[g]))}else return a.applyGetters(p,d)}else return ZAe(iy.get(e,t,AS),s)}function ZAe(t,e){if(t!=null&&t.$__!=null)return t._doc._id;if(t!=null&&t._id!=null&&(e==null||!e.$isSchemaMap))return t._id;if(Array.isArray(t)){let r=t.__array!=null?t.__array:t;for(let n=0;n<r.length;++n)r[n]!=null&&r[n].$__!=null&&(r[n]=r[n]._doc._id);return fo.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(v8t(t)==="Object"&&(e==null||e[BY]==null)){let r=[];for(let n of Object.keys(t))r.push(t[n]);return r}return t instanceof Map?Array.from(t.values()):t}function C8t(t,e,r,n,i,s){if(!r.isRefPath||i==null)return;let o=i.split("."),a="",u;for(let c=0;c<o.length;++c){let l=o[c];a=a+(a.length===0?"":".")+l;let d=e.path(a);if(d!=null&&d.$isMongooseArray&&d.caster.discriminators!=null&&Object.keys(d.caster.discriminators).length!==0){let p=fo.getValue(a,t),f=n.path.substring(a.length+1),h=d.caster.schema.options.discriminatorKey;u=[];for(let g of p){let _=fo.getValue(h,g),S=d.caster.discriminators[_],w=S&&S.schema;if(w==null)continue;let C=w.path(f);if(C==null||C.options.refPath==null){let O=fo.getValue(r.localField.substring(a.length+1),g);s.forEach((x,R)=>{x===O&&(s[R]=E8t(x))});continue}let A=fo.getValue(o.slice(c+1).join("."),g);u.push(A)}}}return u}function $Y(t){if(t!=null&&typeof t=="object")for(let e of Object.keys(t)){if(e==="$where")throw new LY("Cannot use $where filter with populate() match");t[e]!=null&&typeof t[e]=="object"&&$Y(t[e])}}});var n8e=m((C_r,r8e)=>{"use strict";var T8t=si();r8e.exports=function(e){if(Array.isArray(e)){let n=Object.keys(e[0]);return n.length===1&&n[0]==="_id"&&e[0]._id!=="hashed"}if(typeof e!="object")return!1;let r=T8t(e,"key",{});return Object.keys(r).length===1&&r.hasOwnProperty("_id")}});var o8e=m((T_r,s8e)=>{"use strict";var vI=si(),i8e=Tt();s8e.exports=function(e,r,n){if(n.textIndexVersion!=null){delete n.key._fts,delete n.key._ftsx;let a={...n.weights,...n.key};if(Object.keys(a).length!==Object.keys(e).length)return!1;for(let u of Object.keys(a)){if(!(u in e))return!1;let c=a[u];if(c!==vI(r,"weights."+u)&&!(c===1&&vI(r,"weights."+u)==null))return!1}return r.default_language!==n.default_language?n.default_language==="english"&&r.default_language==null:!0}let i=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let a of i)if(!(!(a in r)&&!(a in n))){if(a==="collation"){if(r[a]==null||n[a]==null)return r[a]==null&&n[a]==null;let u=Object.keys(r.collation),c=r.collation,l=n.collation;for(let d of u)if(vI(c,d)!==vI(l,d))return!1}else if(!i8e.deepEqual(r[a],n[a]))return!1}let s=Object.keys(e),o=Object.keys(n.key);if(s.length!==o.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==o[a]||!i8e.deepEqual(e[s[a]],n.key[o[a]]))return!1;return!0}});var u8e=m((O_r,a8e)=>{"use strict";a8e.exports=function(e,r){if(r.timeseries==null)return!1;let{timeField:n,metaField:i}=r.timeseries;return typeof n!="string"||typeof i!="string"?!1:Object.keys(e.key).length===2&&e.key[n]===1&&e.key[i]===1}});var p8e=m((x_r,d8e)=>{"use strict";var O8t=iI();function x8t(t,e){return l8e({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"schema"})}function I8t(t,e){return l8e({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"db"})}d8e.exports={getRelatedSchemaIndexes:x8t,getRelatedDBIndexes:I8t};function l8e({baseModelName:t,discriminatorMapping:e,indexes:r,indexesType:n}){let i=e&&e.key,s=e&&e.value;return i?t?r.filter(a=>{let u=c8e(a,n);return u&&u[i]===s}):r.filter(a=>{let u=c8e(a,n);return!u||!u[i]||O8t(u[i])&&!("$eq"in u[i])}):r}function c8e(t,e){if(e==="schema"){let r=t[1];return r&&r.partialFilterExpression}return t.partialFilterExpression}});var h8e=m((I_r,f8e)=>{"use strict";f8e.exports=R8t;function R8t(t,e,r){let n=0,i=0,s=null;if(e<=0)throw new Error("Limit must be positive");if(t.length===0)return r(null,[]);for(let c=0;c<t.length&&c<e;++c)o();function o(){t[i+n](u(i+n)),++n}let a=[];function u(c){return(l,d)=>{if(--n,++i,s==null){if(l!=null)return s=l,r(s);if(a[c]=d,i===t.length)return r(null,a);i+n<t.length&&o()}}}}});var y8e=m((R_r,m8e)=>{"use strict";m8e.exports=function t(e,r,n){if(r!=null)for(let i=0;i<r.length;++i)Array.isArray(r[i])?t(e,r[i],n+"."+i):e.push(n+"."+i)}});var v8e=m((D_r,_8e)=>{"use strict";var g8e=si(),E8e=ou(),b8e=mY();_8e.exports=function(e,r,n){let i=b8e(g8e(r,"select",null),!0)||b8e(g8e(r,"options.select",null),!0);if(i!=null){for(let s of e)if(i.hasOwnProperty("-"+s))for(let o of n)o.$__!=null?E8e.unset(s,o._doc):E8e.unset(s,o)}}});var xY=m((j8e,$8e)=>{"use strict";var D8t=CY(),k8t=pz(),Id=ac(),M8t=oO(),UY=require("events").EventEmitter,HY=B0(),AI=OJ(),Ot=wa(),P8t=AO(),N8t=bz(),SI=aI(),F8t=eAe(),VY=G0(),wI=L0(),I8e=gz(),S8e=Ez(),B8t=TO(),q8t=rAe(),L8t=OY(),j8t=rx(),R8e=sAe(),$8t=uAe(),K8t=tY(),D8e=pAe(),U8t=hAe(),k8e=yAe(),V8t=vAe(),M8e=rY(),G8t=AAe(),H8t=$Ae(),z8t=KJ(),af=Vn(),W8t=GAe(),P8e=jJ(),KY=RJ(),N8e=DO(),J8t=Ax(),GY=YW(),OS=si(),Y8t=Fo(),CS=uc(),Q8t=t8e(),xS=Vu(),zY=Tl().internalToObjectOptions,WY=n8e(),F8e=o8e(),X8t=u8e(),{getRelatedDBIndexes:Z8t,getRelatedSchemaIndexes:e5t}=p8e(),JY=bW(),t5t=MO(),r5t=SS(),n5t=h8e(),i5t=wY(),B8e=y8e(),s5t=v8e(),o5t=MJ(),w8e=require("util"),nn=Tt(),a5t=Bz(),u5t=_z(),c5t=SO(),sy=UJ(),oy=Symbol("mongoose#Model#collection"),ay=Symbol("mongoose#Model#db"),q8e=ot().modelSymbol,TS=Symbol("mongoose#Model#subclassed"),{VERSION_INC:CI,VERSION_WHERE:A8e,VERSION_ALL:l5t}=Id,d5t=Object.assign({},zY,{bson:!0});function De(t,e,r){if(e instanceof VY)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof t=="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");Id.call(this,t,e,r)}Object.setPrototypeOf(De.prototype,Id.prototype);De.prototype.$isMongooseModelPrototype=!0;De.prototype.db;De.useConnection=function(e){if(!e)throw new Error("Please provide a connection.");this.db&&(delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[ay],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[oy]),this.db=e;let r=e.collection(this.collection.collectionName,e.options);return this.prototype.collection=r,this.prototype.$collection=r,this.prototype[oy]=r,this.prototype.db=e,this.prototype[ay]=e,this.collection=r,this.$__collection=r,e.models[this.modelName]=this,this};De.prototype.collection;De.prototype.$__collection;De.prototype.modelName;De.prototype.$where;De.prototype.baseModelName;De.events;De._middleware;function L8e(t,e){if(t.$where!=null)for(let r of Object.keys(t.$where))e[r]=t.$where[r]}De.prototype.$__handleSave=function(t,e){let r={};M8e(this.$__schema,t),typeof t.writeConcern<"u"?(r.writeConcern={},"w"in t.writeConcern&&(r.writeConcern.w=t.writeConcern.w),"j"in t.writeConcern&&(r.writeConcern.j=t.writeConcern.j),"wtimeout"in t.writeConcern&&(r.writeConcern.wtimeout=t.writeConcern.wtimeout)):("w"in t&&(r.w=t.w),"j"in t&&(r.j=t.j),"wtimeout"in t&&(r.wtimeout=t.wtimeout)),"checkKeys"in t&&(r.checkKeys=t.checkKeys);let n=this.$session(),i=this[ay].base.transactionAsyncLocalStorage?.getStore();if(n!=null?r.session=n:!t.hasOwnProperty("session")&&i?.session!=null&&(r.session=i.session),this.$isNew){let a=this.toObject(d5t);if((a||{})._id===void 0){xS(function(){e(new Ot("document must have an _id before saving"))});return}this.$__version(!0,a),this[oy].insertOne(a,r).then(u=>e(null,u),u=>{jE(this,!0),e(u,null)}),this.$__reset(),jE(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let s=this.$__delta();if(t.pathsToSave){for(let a in s[1].$set)if(!t.pathsToSave.includes(a)){if(t.pathsToSave.some(u=>a.slice(0,u.length)===u&&a.charAt(u.length)==="."))continue;delete s[1].$set[a]}}if(s){if(s instanceof Ot){e(s);return}let a=this.$__where(s[0]);if(a instanceof Ot){e(a);return}L8e(this,a);let u=s[1];if(this.$__schema.options.minimize){for(let c of Object.values(u))if(c!=null)for(let l of Object.keys(c))c[l]==null||typeof c[l]!="object"||nn.isPOJO(c[l])&&(a5t(c[l]),Object.keys(c[l]).length===0&&(delete c[l],u.$unset=u.$unset||{},u.$unset[l]=1))}this[oy].updateOne(a,u,r).then(c=>{c==null?c={$where:a}:c.$where=a,e(null,c)},c=>{this.$__undoReset(),e(c)})}else{o.call(this);return}this.$__.modifiedPaths=this.modifiedPaths().concat(Object.keys(this.$__.activePaths.getStatePaths("default"))),this.$__reset(),jE(this,!1);function o(){let a=Object.assign({},t,r),u=this.$__where(),c=this.$__schema.options.optimisticConcurrency;if(c&&!Array.isArray(c)){let l=this.$__schema.options.versionKey,d=this.$__getValue(l);d!=null&&(u[l]=d)}K8t(this.$__schema,a),this.constructor.collection.findOne(u,a).then(l=>{e(null,{$where:u,matchedCount:l?1:0})}).catch(e)}};De.prototype.$__save=function(t,e){this.$__handleSave(t,(r,n)=>{if(r)return r=this.$__schema._transformDuplicateKeyError(r),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},a=>{e(a,this)});let i=0;if((t!=null?t.writeConcern!=null?t.writeConcern.w:t.w:0)!==0){if(n!=null&&(Array.isArray(n)?i=n.length:n.matchedCount!=null?i=n.matchedCount:i=n),this.$__.version&&!this.$__.inserting){let a=CI===(CI&this.$__.version);this.$__.version=void 0;let u=this.$__schema.options.versionKey,c=this.$__getValue(u)||0;if(i<=0){this.$__undoReset();let l=this.$__.$versionError||new I8e(this,c,this.$__.modifiedPaths);return e(l,this)}a&&this.$__setValue(u,c+1)}if(n!=null&&i<=0)return this.$__undoReset(),r=new M8t(n.$where,this.constructor.modelName,i,n),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},u=>{e(u,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,i),this.constructor.emit("save",this,i),e(null,this)})};function p5t(t,e,r){let n=t.$__schema.options.versionKey;if(!n)return null;let i=t.$__getValue(n)||0;return new I8e(t,i,e.concat(r))}De.prototype.save=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new Ot("Model.prototype.save() no longer accepts a callback");let r;if(this.$op="save",this.$__.saving?r=new S8e(this):this.$__.saving=new S8e(this),e=new F8t(e),e.hasOwnProperty("session")&&this.$session(e.session),this.$__.timestamps!=null&&(e.timestamps=this.$__.timestamps),this.$__.$versionError=p5t(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),r)throw this.$__handleReject(r),r;return this.$__.saveOptions=e,await new Promise((n,i)=>{this.$__save(e,s=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,s!=null)return this.$__handleReject(s),i(s);n()})}),this};De.prototype.$save=De.prototype.save;De.prototype.$__version=function(t,e){let r=this.$__schema.options.versionKey;if(t===!0){r&&(o5t(e,r,0),this.$__setValue(r,0));return}if(r!==!1&&this.$__isSelected(r)){if(A8e===(A8e&this.$__.version)){let n=this.$__getValue(r);n!=null&&(t[r]=n)}CI===(CI&this.$__.version)&&(OS(e.$set,r,null)!=null?++e.$set[r]:(e.$inc=e.$inc||{},e.$inc[r]=1))}};De.prototype.increment=function(){return this.$__.version=l5t,this};De.prototype.$__where=function(e){return e||(e={}),e._id||(e._id=this._doc._id),this._doc._id===void 0?new Ot("No _id found on document!"):e};De.prototype.deleteOne=function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new Ot("Model.prototype.deleteOne() no longer accepts a callback");e||(e={}),e.hasOwnProperty("session")&&this.$session(e.session);let r=this,n=this.$__where();if(n instanceof Error)throw n;let i=r.constructor.deleteOne(n,e);return this.$session()!=null&&("session"in i.options||(i.options.session=this.$session())),i.pre(function(o){r.constructor._middleware.execPre("deleteOne",r,[r],o)}),i.pre(function(o){GY(r.$getAllSubdocs(),(a,u)=>{a.constructor._middleware.execPre("deleteOne",a,[a],u)},o)}),i.pre(function(o){return r.$__.isDeleted?o(HY.skipWrappedFunction()):o()}),i.post(function(o){GY(r.$getAllSubdocs(),(a,u)=>{a.constructor._middleware.execPost("deleteOne",a,[a],{},u)},o)}),i.post(function(o){r.constructor._middleware.execPost("deleteOne",r,[r],{},o)}),i};De.prototype.$model=function(e){return arguments.length===0?this.constructor:this[ay].model(e)};De.prototype.model=De.prototype.$model;De.exists=function(e,r){if(qt(this,"exists"),typeof arguments[2]=="function")throw new Ot("Model.exists() no longer accepts a callback");return this.findOne(e).select({_id:1}).lean().setOptions(r)};De.discriminator=function(t,e,r){let n;if(typeof t=="function"&&(n=t,t=nn.getFunctionName(n),!(n.prototype instanceof De)))throw new Ot("The provided class "+t+" must extend Model");r=r||{};let i=nn.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0,o=typeof r.mergePlugins=="boolean"?r.mergePlugins:!0,a=typeof r.overwriteModels=="boolean"?r.overwriteModels:!1;if(qt(this,"discriminator"),nn.isObject(e)&&!e.instanceOfSchema&&(e=new VY(e)),e instanceof VY&&s&&(e=e.clone()),e=J8t(this,t,e,i,o,r.mergeHooks,a),this.db.models[t]&&!e.options.overwriteModels&&!a)throw new N8t(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,n=this.db.model(n||t,e,this.$__collection.name),this.discriminators[t]=n;let u=this.discriminators[t];if(Object.setPrototypeOf(u.prototype,this.prototype),Object.defineProperty(u,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),R8e(u,e),k8e(u,e),this[TS]!=null)for(let c of this[TS])c.discriminators=c.discriminators||{},c.discriminators[t]=n.__subclass(n.db,e,c.collection.name);return u};function qt(t,e){if(t==null||t===global)throw new Ot("`Model."+e+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+e+"()` where `MyModel` is a Mongoose model.");if(t[q8e]==null)throw new Ot("`Model."+e+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+e+"()`")}for(let t in UY.prototype)De[t]=UY.prototype[t];De.init=function(){if(qt(this,"init"),typeof arguments[0]=="function")throw new Ot("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let e=this.db,r=async()=>{if(nn.getOption("autoIndex",this.schema.options,e.config,e.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{if(nn.getOption("autoSearchIndex",this.schema.options,e.config,e.base.options))return await this.createSearchIndexes()},i=async()=>{let a=nn.getOption("autoCreate",this.schema.options,e.config);if(a==null&&(await e._waitForConnect(!0),a=nn.getOption("autoCreate",this.schema.options,e.config,e.base.options)),!!a)return await this.createCollection()};this.$init=i().then(()=>r()).then(()=>n());let s=this.$init.catch,o=this;return this.$init.catch=function(){return o.$caught=!0,s.apply(o.$init,arguments)},this.$init};De.createCollection=async function(e){if(qt(this,"createCollection"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Ot("Model.createCollection() no longer accepts a callback");let r=await new Promise((u,c)=>{this.hooks.execPre("createCollection",this,[e],l=>{if(l!=null)return l instanceof HY.skipWrappedFunction?u(!0):c(l);u()})}),n=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;n!=null&&(e=Object.assign({},n,e));let i=this&&this.schema&&this.schema.options&&this.schema.options.collation;i!=null&&(e=Object.assign({collation:i},e));let s=this&&this.schema&&this.schema.options&&this.schema.options.capped;s!=null&&(typeof s=="number"?e=Object.assign({capped:!0,size:s},e):typeof s=="object"&&(e=Object.assign({capped:!0},s,e)));let o=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;o!=null&&(e=Object.assign({timeseries:o},e),e.expireAfterSeconds!=null||(e.expires!=null?nn.expires(e):this.schema.options.expireAfterSeconds!=null?e.expireAfterSeconds=this.schema.options.expireAfterSeconds:this.schema.options.expires!=null&&(e.expires=this.schema.options.expires,nn.expires(e))));let a=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;a!=null&&(e=Object.assign({clusteredIndex:{...a,unique:!0}},e));try{r||await this.db.createCollection(this.$__collection.collectionName,e)}catch(u){u!=null&&(u.name!=="MongoServerError"||u.code!==48)&&await new Promise((c,l)=>{let d={error:u};this.hooks.execPost("createCollection",this,[null],d,p=>{if(p!=null)return l(p);c()})})}return await new Promise((u,c)=>{this.hooks.execPost("createCollection",this,[this.$__collection],l=>{if(l!=null)return c(l);u()})}),this.$__collection};De.syncIndexes=async function(e){if(qt(this,"syncIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Ot("Model.syncIndexes() no longer accepts a callback");if(e?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??!0)try{await this.createCollection()}catch(s){if(s!=null&&(s.name!=="MongoServerError"||s.code!==48))throw s}let n=await this.diffIndexes({indexOptionsToCreate:!0}),i=await this.cleanIndexes({...e,toDrop:n.toDrop});return await this.createIndexes({...e,toCreate:n.toCreate}),i};De.createSearchIndex=async function(e){return qt(this,"createSearchIndex"),await this.$__collection.createSearchIndex(e)};De.updateSearchIndex=async function(e,r){return qt(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(e,r)};De.dropSearchIndex=async function(e){return qt(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(e)};De.listSearchIndexes=async function(e){return qt(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(e)).toArray()};De.diffIndexes=async function(e){if(typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Ot("Model.syncIndexes() no longer accepts a callback");let r=this,n=await r.listIndexes().catch(u=>{if(u.codeName!="NamespaceNotFound")throw u});n===void 0&&(n=[]),n=Z8t(r,n);let i=r.schema,s=e5t(r,i.indexes()),o=h5t(i,s,n),a=f5t(i,s,n,o,e);return{toDrop:o,toCreate:a}};function f5t(t,e,r,n,i){let s=[],o=i?.indexOptionsToCreate??!1;for(let[a,u]of e){let c=!1,l=JY(t,af(u));for(let d of r)if(!WY(d)&&F8e(a,l,d)&&!n.includes(d.name)){c=!0;break}c||(o?s.push([a,u]):s.push(a))}return s}function h5t(t,e,r){let n=[];for(let i of r){let s=!1;if(!WY(i)&&!X8t(i,t.options)){for(let[o,a]of e){let u=JY(t,af(a));if(D8e(o,u,t.options),F8e(o,u,i)){s=!0;break}}s||n.push(i.name)}}return n}De.cleanIndexes=async function(e){if(qt(this,"cleanIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Ot("Model.cleanIndexes() no longer accepts a callback");let r=this;if(Array.isArray(e&&e.toDrop))return await C8e(e.toDrop,r,e);let n=await r.diffIndexes();return await C8e(n.toDrop,r,e)};async function C8e(t,e,r){if(t.length===0)return[];let n=e.$__collection;return r&&r.hideIndexes?await Promise.all(t.map(i=>e.db.db.command({collMod:n.collectionName,index:{name:i,hidden:!0}}))):await Promise.all(t.map(i=>n.dropIndex(i))),t}De.listIndexes=async function(){if(qt(this,"listIndexes"),typeof arguments[0]=="function")throw new Ot("Model.listIndexes() no longer accepts a callback");return this.$__collection.buffer&&await new Promise(e=>{this.$__collection.addQueue(e)}),this.$__collection.listIndexes().toArray()};De.ensureIndexes=async function(e){if(qt(this,"ensureIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Ot("Model.ensureIndexes() no longer accepts a callback");await new Promise((r,n)=>{m5t(this,e,i=>{if(i!=null)return n(i);r()})})};De.createIndexes=async function(e){if(qt(this,"createIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Ot("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(e)};function m5t(t,e,r){let n=Array.isArray(e?.toCreate)?e.toCreate:t.schema.indexes(),i;e=e||{};let s=function(d){d&&!t.$caught&&t.emit("error",d),t.emit("index",d||i),r&&r(d||i)};for(let d of n)WY(d)&&nn.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+t.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!n.length){xS(function(){s()});return}let o=function(d,p,f,h){t.emit("index-single-done",d,p,f,h)},a=function(d,p){t.emit("index-single-start",d,p)},u=t.schema._baseSchema,c=u?u.indexes():[];xS(function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()});function l(){if(e._automatic&&(t.schema.options.autoIndex===!1||t.schema.options.autoIndex==null&&t.db.config.autoIndex===!1))return s();let d=n.shift();if(!d)return s();if(e._automatic&&d[1]._autoIndex===!1||c.find(g=>nn.deepEqual(g,d)))return l();let p=af(d[0]),f=af(d[1]);delete f._autoIndex,JY(t.schema,f),M8e(t.schema,f),D8e(p,f,t.schema.options),a(p,e),"background"in e&&(f.background=e.background);let h=null;try{h=t.collection.createIndex(p,f)}catch(g){i||(i=g),t.$caught||t.emit("error",g),o(g,p,f),l();return}h.then(g=>{o(null,p,f,g),l()},g=>{i||(i=g),t.$caught||t.emit("error",g),o(g,p,f),l()})}}De.createSearchIndexes=async function(){qt(this,"createSearchIndexes");let e=[];for(let r of this.schema._searchIndexes)e.push(await this.createSearchIndex(r));return e};De.schema;De.db;De.collection;De.$__collection;De.base;De.discriminators;De.translateAliases=function(e,r){qt(this,"translateAliases");let n=(i,s)=>{let o,a=[],u=i.split("."),c=this.schema;for(let d in u){let p=u[d];if(c&&c.aliases[p]){if(o=c.aliases[p],r&&o in e)throw new Ot(`Provided object has both field "${p}" and its alias "${o}"`);a.push(o)}else o=p,a.push(p);c&&c.paths[o]?c=c.paths[o].schema:c=null}let l=a.join(".");return e instanceof Map?e.set(l,s):e[l]=s,l!==i&&(e instanceof Map?e.delete(i):delete e[i]),e};if(typeof e=="object"){if(e instanceof Map)for(let i of new Map(e))e=n(i[0],i[1]);else for(let i of Object.keys(e))if(e=n(i,e[i]),i[0]==="$")if(Array.isArray(e[i]))for(let s in e[i])e[i][s]=this.translateAliases(e[i][s]);else this.translateAliases(e[i]);return e}else return e};De.deleteOne=function(e,r){if(qt(this,"deleteOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.prototype.deleteOne() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteOne(e)};De.deleteMany=function(e,r){if(qt(this,"deleteMany"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.deleteMany() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteMany(e)};De.find=function(e,r,n){if(qt(this,"find"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Ot("Model.find() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.find(e)};De.findById=function(e,r,n){if(qt(this,"findById"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.findById() no longer accepts a callback");return this.findOne({_id:e},r,n)};De.findOne=function(e,r,n){if(qt(this,"findOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.findOne() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.findOne(e)};De.estimatedDocumentCount=function(e){return qt(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(e)};De.countDocuments=function(e,r){if(qt(this,"countDocuments"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.countDocuments() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return r!=null&&n.setOptions(r),n.countDocuments(e)};De.distinct=function(e,r,n){if(qt(this,"distinct"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.distinct() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return n!=null&&i.setOptions(n),i.distinct(e,r)};De.where=function(e,r){qt(this,"where");let n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)};De.$where=function(){qt(this,"$where");let e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)};De.findOneAndUpdate=function(t,e,r){if(qt(this,"findOneAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Ot("Model.findOneAndUpdate() no longer accepts a callback");let n;r&&(n=r.fields||r.projection),e=af(e,{depopulate:!0,_isNested:!0}),P8e(e,r,this.schema.options.versionKey);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndUpdate(t,e,r)};De.findByIdAndUpdate=function(t,e,r){if(qt(this,"findByIdAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Ot("Model.findByIdAndUpdate() no longer accepts a callback");return t instanceof Id&&(t=t._doc._id),this.findOneAndUpdate.call(this,{_id:t},e,r)};De.findOneAndDelete=function(t,e){if(qt(this,"findOneAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.findOneAndDelete() no longer accepts a callback");let r;e&&(r=e.select,e.select=void 0);let n=new this.Query({},{},this,this.$__collection);return n.select(r),n.findOneAndDelete(t,e)};De.findByIdAndDelete=function(t,e){if(qt(this,"findByIdAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Ot("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:t},e)};De.findOneAndReplace=function(t,e,r){if(qt(this,"findOneAndReplace"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Ot("Model.findOneAndReplace() no longer accepts a callback");let n;r&&(n=r.select,r.select=void 0);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndReplace(t,e,r)};De.create=async function(e,r){if(typeof r=="function"||typeof arguments[2]=="function")throw new Ot("Model.create() no longer accepts a callback");qt(this,"create");let n,i=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,r=r!=null&&typeof r=="object"?r:{};else{let a=arguments[arguments.length-1];if(r={},typeof a=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new Ot("Model.create() no longer accepts a callback");n=[...arguments],n.length>1&&!a&&n.pop(),n.length===2&&n[0]!=null&&n[1]!=null&&n[0].session==null&&a&&Y8t(a.session)==="ClientSession"&&!this.schema.path("session")&&nn.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(n.length===0)return Array.isArray(e)?[]:null;let s=[],o=typeof r.aggregateErrors=="boolean"?!r.aggregateErrors:!0;if(delete r.aggregateErrors,r.session&&!r.ordered&&n.length>1)throw new Ot("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(r.ordered){for(let a=0;a<n.length;a++)try{let u=n[a],c=this.discriminators&&u[i]!=null?this.discriminators[u[i]]||CS(this.discriminators,u[i]):this;if(c==null)throw new Ot(`Discriminator "${u[i]}" not found for model "${this.modelName}"`);let l=u;l instanceof c||(l=new c(l)),await l.$save(r),s.push(l)}catch(u){if(!o)s.push(u);else throw u}return s}else if(!o)s=await Promise.allSettled(n.map(async a=>{let u=this.discriminators&&a[i]!=null?this.discriminators[a[i]]||CS(this.discriminators,a[i]):this;if(u==null)throw new Ot(`Discriminator "${a[i]}" not found for model "${this.modelName}"`);let c=a;return c instanceof u||(c=new u(c)),await c.$save(r),c})),s=s.map(a=>a.status==="fulfilled"?a.value:a.reason);else{let a=null;if(s=await Promise.all(n.map(async u=>{let c=this.discriminators&&u[i]!=null?this.discriminators[u[i]]||CS(this.discriminators,u[i]):this;if(c==null)throw new Ot(`Discriminator "${u[i]}" not found for model "${this.modelName}"`);try{let l=u;return l instanceof c||(l=new c(l)),await l.$save(r),l}catch(l){a||(a=l)}})),a)throw a}return!Array.isArray(e)&&n.length===1?s[0]:s};De.insertOne=async function(e,r){qt(this,"insertOne");let n=this.schema.options.discriminatorKey,i=this.discriminators&&e[n]!=null?this.discriminators[e[n]]||CS(this.discriminators,e[n]):this;if(i==null)throw new Ot(`Discriminator "${e[n]}" not found for model "${this.modelName}"`);return e instanceof i||(e=new i(e)),await e.$save(r)};De.watch=function(t,e){qt(this,"watch");let r=n=>{if(t=t||[],i5t(t,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let i=this.$__collection.watch(t,e);n(null,i)});else{let i=this.$__collection.watch(t,e);n(null,i)}};return e=e||{},e.model=this,new k8t(r,t,e)};De.startSession=function(){return qt(this,"startSession"),this.db.startSession.apply(this.db,arguments)};De.insertMany=async function(e,r){if(qt(this,"insertMany"),typeof r=="function"||typeof arguments[2]=="function")throw new Ot("Model.insertMany() no longer accepts a callback");return new Promise((n,i)=>{this.$__insertMany(e,r,(s,o)=>{if(s!=null)return i(s);n(o)})})};De.$__insertMany=function(t,e,r){let n=this;typeof e=="function"&&(r=e,e=null),r=r||nn.noop,e=e||{};let i=e.limit||1e3,s=!!e.rawResult,o=typeof e.ordered=="boolean"?e.ordered:!0,a=typeof e.throwOnValidationError=="boolean"?e.throwOnValidationError:!1,u=!!e.lean,c=this.db.base.transactionAsyncLocalStorage?.getStore();(!e||!e.hasOwnProperty("session"))&&c?.session!=null&&(e={...e,session:c.session}),Array.isArray(t)||(t=[t]);let l=[],d=new Map,p=o?null:new Array(t.length),f=t.map((h,g)=>_=>{if(u)return xS(()=>_(null,h));let S=!1;if(!(h instanceof n)){if(h!=null&&typeof h!="object")return _(new P8t(h,"arr."+g,"insertMany"));try{h=new n(h),S=!0}catch(w){return _(w)}}if(e.session!=null&&h.$session(e.session),u)return xS(()=>_(null,h));h.$validate(S?{_skipParallelValidateCheck:!0}:null).then(()=>{_(null,h)},w=>{if(o===!1)return l.push(w),d.set(w,g),p[g]=w,_(null,null);_(w)})});n5t(f,i,function(h,g){if(h){r(h,null);return}let _=new Map,S=new Map;for(let A=0;A<g.length;++A)_.set(g[A],A);let w=g.filter(function(A){return A!=null});for(let A=0;A<w.length;++A)S.set(A,_.get(w[A]));if(l.length>0&&l.sort((A,O)=>d.get(A)-d.get(O)),w.length===0){if(a)return r(new AI(l,p,null,"insertMany"));if(s){let A={acknowledged:!0,insertedCount:0,insertedIds:{}};return sy(A,l,l),r(null,A)}r(null,[]);return}let C=u?w:w.map(function(A){return A.$__schema.options.versionKey&&(A[A.$__schema.options.versionKey]=0),(!e||e.timestamps!==!1)&&A.initializeTimestamps&&(!A.$__||A.$__.timestamps!==!1)&&A.initializeTimestamps(),A.$__hasOnlyPrimitiveValues()?A.$__toObjectShallow():A.toObject(zY)});n.$__collection.insertMany(C,e).then(A=>{if(!u)for(let O of w)O.$__reset(),jE(O,!1);if(o===!1&&a&&l.length>0){for(let O=0;O<p.length;++O)p[O]===void 0&&(p[O]=g[O]);return r(new AI(l,p,A,"insertMany"))}if(s){if(o===!1){for(let O=0;O<p.length;++O)p[O]===void 0&&(p[O]=g[O]);sy(A,l,p)}return r(null,A)}if(e.populate!=null)return n.populate(w,e.populate).then(O=>{r(null,O)},O=>{throw O!=null&&(O.insertedDocs=w),O});r(null,w)},A=>{A.writeErrors==null&&(A.result&&A.result.result&&A.result.result.writeErrors)!=null&&(A.writeErrors=A.result.result.writeErrors);let O=A&&A.writeErrors,x=new Set((A&&A.writeErrors||[]).map(M=>M.index));if(A.writeErrors!=null)for(let M=0;M<A.writeErrors.length;++M){let I=S.get(A.writeErrors[M].index);A.writeErrors[M]={...A.writeErrors[M],index:I},o||(p[I]=A.writeErrors[M])}if(!o){for(let M=0;M<p.length;++M)p[M]===void 0&&(p[M]=g[M]);A.results=p}let R=-1;A.insertedDocs=w.filter((M,I)=>{let F=!O||x.has(I);if(o){if(R>-1)return I<R;F&&(R=I)}return!F}).map(function(I){return u||(I.$__reset(),jE(I,!1)),I}),s&&o===!1&&sy(A,l,p),r(A,null)})})};function jE(t,e){t.$isNew=e,t.$emit("isNew",e),t.constructor.emit("isNew",e);let r=t.$getAllSubdocs({useCache:!0});for(let n of r)n.$isNew=e,n.$emit("isNew",e)}De.bulkWrite=async function(e,r){if(qt(this,"bulkWrite"),typeof r=="function"||typeof arguments[2]=="function")throw new Ot("Model.bulkWrite() no longer accepts a callback");r=r||{};let n=await new Promise((u,c)=>{this.hooks.execPre("bulkWrite",this,[e,r],l=>{if(l!=null)return l instanceof HY.skipWrappedFunction?u(l):c(l);u()})});if(n)return n.args[0];let i=r.ordered==null?!0:r.ordered;if(e.length===0){let u=this.base.driver.get().BulkWriteResult,c=new u(KY(),!1);return c.n=0,sy(c,[],[]),c}let s=r?._skipCastBulkWrite?[]:e.map(u=>z8t(this,u,r)),o=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&o?.session!=null&&(r={...r,session:o.session});let a=null;if(i){await new Promise((u,c)=>{GY(s,(l,d)=>l(d),l=>{if(l)return c(l);u()})});try{a=await this.$__collection.bulkWrite(e,r)}catch(u){await new Promise((c,l)=>{let d={error:u};this.hooks.execPost("bulkWrite",this,[null],d,p=>{if(p!=null)return l(p);c()})})}}else{let u=[],c=[],l=[];s.length>0?(u=await Promise.all(e.map((h,g)=>g>=s.length?g:new Promise(_=>{s[g](S=>{S==null?_(g):(c.push({index:g,error:S}),l[g]=S),_()})}))),u=u.filter(h=>h!=null)):u=e.map((h,g)=>g),c=c.sort((h,g)=>h.index-g.index).map(h=>h.error);let d=u.sort().map(h=>e[h]);if(d.length===0){if(r.throwOnValidationError&&c.length)throw new AI(c,l,a,"bulkWrite");let h=this.base.driver.get().BulkWriteResult,g=new h(KY(),!1);return g.result=KY(),sy(g,c,l),g}let p;[a,p]=await this.$__collection.bulkWrite(d,r).then(h=>[h,null]).catch(h=>[null,h]);let f={};if(p?.writeErrors)for(let h of p.writeErrors)f[h.err.index]=h;for(let h=0;h<u.length;++h)l[u[h]]=f[h]??null;if(p&&(c.length>0&&sy(p,c,l),await new Promise((h,g)=>{let _={error:p};this.hooks.execPost("bulkWrite",this,[null],_,S=>{if(S!=null)return g(S);h()})})),c.length>0){if(r.throwOnValidationError)throw new AI(c,l,a,"bulkWrite");sy(a,c,l)}}return await new Promise((u,c)=>{this.hooks.execPost("bulkWrite",this,[a],l=>{if(l!=null)return c(l);u()})}),a};De.bulkSave=async function(e,r){if(r=r||{},r.timestamps!=null)for(let l of e)l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=r.timestamps;else for(let l of e)l.$__.timestamps!=null&&(l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=l.$__.timestamps);await Promise.all(e.map(l=>y5t(l,r)));let n=this.buildBulkWriteOperations(e,r),i={skipValidation:!0,_skipCastBulkWrite:!0,...r},{bulkWriteResult:s,bulkWriteError:o}=await this.bulkWrite(n,i).then(l=>({bulkWriteResult:l,bulkWriteError:null}),l=>({bulkWriteResult:null,bulkWriteError:l}));if(o!=null&&o.name!=="MongoBulkWriteError")throw o;let a=s?.matchedCount??0,u=s?.insertedCount??0;if(n.length>0&&a+u<n.length&&!o)throw new u5t(this.modelName,e,s);let c=[];for(let l=0;l<e.length;l++){let d=e[l];(o&&o.writeErrors.find(f=>(f.err.op._id||f.err.op.q._id).toString()===d._doc._id.toString()))==null&&c.push(d)}if(await Promise.all(c.map(l=>g5t(l))),o!=null)throw o;return s};function y5t(t,e){return new Promise((r,n)=>{t.schema.s.hooks.execPre("save",t,[e],i=>{if(i){n(i);return}r()})})}function g5t(t){return new Promise((e,r)=>{t.$isNew&&jE(t,!1),t.$__reset(),t.schema.s.hooks.execPost("save",t,[t],{},n=>{if(n){r(n);return}e()})})}De.applyDefaults=function t(e){if(e==null)return e;if(e.$__!=null){B8t(e,e.$__.fields,e.$__.exclude);for(let r of e.$getAllSubdocs())t(r,r.$__.fields,r.$__.exclude);return e}return q8t(e,this.schema),e};De.applyVirtuals=function(e,r){return e==null||e.$__!=null||G8t(this.schema,e,r),e};De.applyTimestamps=function(e,r){return e==null||e.$__!=null||V8t(this.schema,e,r),e};De.castObject=function(e,r){r=r||{};let n={},i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=N8e(i,e[s])||i);let o=Object.keys(i.paths);for(let u of o){let c=i.path(u);if(!c||!c.$isMongooseArray)continue;let l=OS(e,u);B8e(o,l,u)}let a=null;for(let u of o){let c=i.path(u);if(c==null)continue;let l=OS(e,u,void 0);if(l==null)continue;let d=u.indexOf(".")===-1?[u]:u.split("."),p=n;for(let f=0;f<d.length-1;++f)p[d[f]]==null&&(p[d[f]]=isNaN(d[f+1])?{}:[]),p=p[d[f]];if(c.$isMongooseDocumentArray){let f=c.options?.castNonArrays??c.constructor.options.castNonArrays;if(!Array.isArray(l)){f?p[d[d.length-1]]=[De.castObject.call(c.caster,l)]:r.ignoreCastErrors||(a=a||new wI,a.addError(u,new c5t(u,l)));continue}}if(c.$isSingleNested||c.$isMongooseDocumentArrayElement){try{l=De.castObject.call(c.caster,l)}catch(f){r.ignoreCastErrors||(a=a||new wI,a.addError(u,f));continue}p[d[d.length-1]]=l;continue}try{l=c.cast(l),p[d[d.length-1]]=l}catch(f){r.ignoreCastErrors||(a=a||new wI,a.addError(u,f));continue}}if(a!=null)throw a;return n};De.buildBulkWriteOperations=function(e,r){if(!Array.isArray(e))throw new Error(`bulkSave expects an array of documents to be passed, received \`${e}\` instead`);return i(),e.map((s,o)=>{if(!r.skipValidation){if(!(s instanceof Id))throw new Error(`documents.${o} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(r.validateBeforeSave==null||r.validateBeforeSave){let l=s.validateSync();if(l!=null)throw l}}if(s.isNew){let l={insertOne:{document:s}};return nn.injectTimestampsOption(l.insertOne,r.timestamps),l}let u=s.$__delta();if(u!=null&&!nn.isEmptyObject(u[0])){let l=s.$__where(u[0]),d=u[1];L8e(s,l);let p=this.schema.options.shardKey;if(p){let h=Object.keys(p),g=h.length;for(let _=0;_<g;++_)l[h[_]]=s[h[_]]}s.$__version(l,u);let f={updateOne:{filter:l,update:d}};return nn.injectTimestampsOption(f.updateOne,r.timestamps),f}return null}).filter(s=>s!==null);function i(){r=r||{},r.skipValidation==null&&(r.skipValidation=!1)}};De.hydrate=function(t,e,r){if(qt(this,"hydrate"),r?.virtuals&&r?.hydratedPopulatedDocs===!1)throw new Ot("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");e!=null&&(t!=null&&t.$__!=null&&(t=t.toObject(zY)),t=$8t(t,e));let n=Pv().createModel(this,t,e);return n.$init(t,r),n};De.updateMany=function(e,r,n){if(qt(this,"updateMany"),r==null)throw new Ot("updateMany `update` parameter cannot be nullish");return YY(this,"updateMany",e,r,n)};De.updateOne=function(e,r,n){return qt(this,"updateOne"),YY(this,"updateOne",e,r,n)};De.replaceOne=function(e,r,n){qt(this,"replaceOne");let i=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;return i&&!r[i]&&(r[i]=0),YY(this,"replaceOne",e,r,n)};function YY(t,e,r,n,i){let s=new t.Query({},{},t,t.collection);r instanceof Id?r=r.toObject():r=af(r),i=typeof i=="function"?i:af(i);let o=t&&t.schema&&t.schema.options&&t.schema.options.versionKey||null;return P8e(n,i,o),s[e](r,n,i)}De.aggregate=function(e,r){if(qt(this,"aggregate"),typeof r=="function"||typeof arguments[2]=="function")throw new Ot("Model.aggregate() no longer accepts a callback");let n=new D8t(e||[]);return n.model(this),r!=null&&n.option(r),n};De.validate=async function(e,r,n){if((arguments.length<3||arguments.length===3&&typeof arguments[2]=="function")&&(n=e),typeof n=="function"||typeof arguments[3]=="function")throw new Ot("Model.validate() no longer accepts a callback");let i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=N8e(i,e[s])||i);let o=Object.keys(i.paths);if(r!=null){let c=typeof r=="string"?new Set(r.split(" ")):Array.isArray(r)?new Set(r):new Set(o);o=o.filter(l=>{if(r.pathsToSkip){if(Array.isArray(r.pathsToSkip)){if(r.pathsToSkip.find(f=>f==l))return!1}else if(typeof r.pathsToSkip=="string"&&r.pathsToSkip.includes(l))return!1}let d=l.split("."),p=d[0];for(let f of d){if(c.has(p))return!0;p+="."+f}return c.has(l)})}for(let c of o){let l=i.path(c);if(!l||!l.$isMongooseArray||l.$isMongooseDocumentArray)continue;let d=OS(e,c);B8e(o,d,c)}let a=null;o=new Set(o);try{e=this.castObject(e)}catch(c){a=c;for(let l of Object.keys(a.errors||{}))o.delete(l)}let u=o.size;return new Promise((c,l)=>{if(u===0)return d();for(let f of o){let h=i.path(f);if(h==null){p();continue}let g=f.indexOf(".")===-1?[f]:f.split("."),_=e;for(let w=0;w<g.length-1;++w)_=_[g[w]];let S=OS(e,f,void 0);h.doValidate(S,w=>{w&&(a=a||new wI,a.addError(f,w)),p()},n,{path:f})}function d(){a?l(a):c(e)}function p(){if(--u<=0)return d()}})};De.populate=async function(e,r){if(qt(this,"populate"),typeof r=="function"||typeof arguments[2]=="function")throw new Ot("Model.populate() no longer accepts a callback");if(r=nn.populate(r),r.length===0)return e;if(r.find(n=>n.ordered))for(let n of r)await T8e(this,e,n);else{let n=[];for(let i of r)n.push(T8e(this,e,i));await Promise.all(n)}return e};var E5t=/\s?-_id\s?/,b5t=/\s?-_id\s?/g;async function T8e(t,e,r){if(r.strictPopulate==null&&(r._localModel!=null&&r._localModel.schema._userProvidedOptions.strictPopulate!=null?r.strictPopulate=r._localModel.schema._userProvidedOptions.strictPopulate:(r._localModel!=null&&t.base.options.strictPopulate!=null||t.base.options.strictPopulate!=null)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),e.length===0||e.every(nn.isNullOrUndefined))return;let n=Q8t(t,e,r);if(n instanceof Ot)throw n;let i=n.length,s=[];function o(c){return c!==void 0}let a=!1,u=[];for(let c=0;c<i;++c){let l=n[c],d=l.options.select,p=nn.array.flatten(l.ids,o);p=nn.array.unique(p);let f={};if(f.sort=l&&l.options&&l.options.options&&l.options.options.sort||void 0,f.excludeId=E5t.test(d)||d&&d._id===0,l.options&&l.options.options&&l.options.options.lean&&l.options.options.lean.transform&&(l.options.options._leanTransform=l.options.options.lean.transform,l.options.options.lean=!0),p.length===0||p.every(nn.isNullOrUndefined)){x8e(t,[],l,f);continue}a=!0,typeof r.foreignField=="string"&&(l.foreignField.clear(),l.foreignField.add(r.foreignField));let h=W8t(p,l.match,l.foreignField,l.model,l.options.skipInvalidIds);f.excludeId&&(typeof d=="string"?d=d.replace(b5t," "):Array.isArray(d)?d=d.filter(g=>g!=="-_id"):(d={...d},delete d._id)),l.options.options&&l.options.options.limit!=null?f.originalLimit=l.options.options.limit:l.options.limit!=null&&(f.originalLimit=l.options.limit),u.push([l,h,d,f])}if(!a){if(n.length!==0)return;if(r.populate!=null){let c=nn.populate(r.populate).map(l=>Object.assign({},l,{path:r.path+"."+l.path}));return t.populate(e,c)}return}if(r.ordered)for(let c of u)await O8e.apply(null,c).then(l=>{s=s.concat(l)});else{let c=[];for(let l of u)c.push(O8e.apply(null,l).then(d=>{s=s.concat(d)}));await Promise.all(c)}for(let c of u){let l=c[0],d=c[3];for(let p of s)l.options._childDocs.push(p);x8e(t,s,l,d)}for(let c of u)s5t(c[0].foreignField,c[0].options,s);for(let c of u){let l=c[0];if(l.options&&l.options.options&&l.options.options._leanTransform)for(let d of s)l.options.options._leanTransform(d)}}function O8e(t,e,r){let n=af(t.options.populate),i={};t.options.skip!==void 0&&(i.skip=t.options.skip),t.options.limit!==void 0&&(i.limit=t.options.limit),t.options.perDocumentLimit!==void 0&&(i.perDocumentLimit=t.options.perDocumentLimit),Object.assign(i,t.options.options),t.count&&delete i.skip,i.perDocumentLimit!=null?(i.limit=i.perDocumentLimit,delete i.perDocumentLimit):i.limit!=null&&(i.limit=i.limit*t.ids.length);let s=t.model.find(e,r,i);for(let o of t.foreignField)o!=="_id"&&s.selectedInclusively()&&!t5t(s._fields,o)&&s.select(o);if(t.count)for(let o of t.foreignField)s.select(o);if(n){t.model.baseModelName!=null&&(Array.isArray(n)?n.forEach(a=>{a.strictPopulate=!1}):typeof n=="string"?n={path:n,strictPopulate:!1}:n.strictPopulate=!1);let o=t.options._fullPath||t.options.path;if(Array.isArray(n))for(let a of n)a._fullPath=o+"."+a.path;else typeof n=="object"&&(n._fullPath=o+"."+n.path);s.populate(n)}return s.exec().then(o=>{for(let a of o)r5t.set(a,t.model);return o})}function x8e(t,e,r,n){let i=r.options,s=r.isVirtual,o=r.justOne,a,u=i&&i.options&&i.options.lean||!1,c=e.length,l={},d={},p,f,h=af(r.allIds);for(let g=0;g<c;g++)if(f=e[g],f!=null)for(let _ of r.foreignField){if(a=nn.getValue(_,f),Array.isArray(a)){a=nn.array.unique(nn.array.flatten(a));for(let S of a)S instanceof Id&&(S=S._doc._id),S?.constructor?.name==="Binary"&&S.sub_type===4&&typeof S.toUUID=="function"||S?.constructor?.name==="Buffer"&&S._subtype===4&&typeof S.toUUID=="function"?p=String(S.toUUID()):p=String(S),d[p]?Array.isArray(d[p])?(d[p].push(f),l[p].push(g)):(d[p]=[d[p],f],l[p]=[l[p],g]):s&&!o?(d[p]=[f],l[p]=[g]):(d[p]=f,l[p]=g)}else a instanceof Id&&(a=a._doc._id),a?.constructor?.name==="Binary"&&a.sub_type===4&&typeof a.toUUID=="function"||a?.constructor?.name==="Buffer"&&a._subtype===4&&typeof a.toUUID=="function"?p=String(a.toUUID()):p=String(a),d[p]?Array.isArray(d[p])?(d[p].push(f),l[p].push(g)):(s||d[p].constructor!==f.constructor||(d[p]instanceof Id?String(d[p]._doc._id):String(d[p]._id))!==(f instanceof Id?String(f._doc._id):String(f._id)))&&(d[p]=[d[p],f],l[p]=[l[p],g]):(d[p]=f,l[p]=g);u||(f.$__.wasPopulated=f.$__.wasPopulated||{value:a})}H8t({originalModel:t,rawIds:r.isVirtual?h:r.allIds,allIds:h,unpopulatedValues:r.unpopulatedValues,foreignField:r.foreignField,rawDocs:d,rawOrder:l,docs:r.docs,path:i.path,options:n,justOne:r.justOne,isVirtual:r.isVirtual,allOptions:r,populatedModel:r.model,lean:u,virtual:r.virtual,count:r.count,match:r.match})}De.compile=function(e,r,n,i,s){if(r.options.versionKey!==!1&&!r.paths[r.options.versionKey]){let d={};d[r.options.versionKey]=Number,r.add(d)}let a;typeof e=="function"&&e.prototype instanceof De?(a=e,e=a.name,r.loadClass(a,!1),a.prototype.$isMongooseModelPrototype=!0):a=function d(p,f,h){if(d.hooks.execPreSync("createModel",p),!(this instanceof d))return new d(p,f,h);let g=d.schema.options.discriminatorKey;if(d.discriminators==null||p==null||p[g]==null){De.call(this,p,f,h);return}let _=d.discriminators[p[g]]||CS(d.discriminators,p[g]);if(_!=null)return new _(p,f,h);De.call(this,p,f,h)},a.hooks=r.s.hooks.clone(),a.base=s,a.modelName=e,a.prototype instanceof De||(Object.setPrototypeOf(a,De),Object.setPrototypeOf(a.prototype,De.prototype)),a.model=function(p){return this.db.model(p)},a.db=i,a.prototype.db=i,a.prototype[ay]=i,a.discriminators=a.prototype.discriminators=void 0,a[q8e]=!0,a.events=new UY,r._preCompile();let c={schemaUserProvidedOptions:r._userProvidedOptions||{},capped:r.options.capped,Promise:a.base.Promise,modelName:e};r.options.autoCreate!==void 0&&(c.autoCreate=r.options.autoCreate);let l=i.collection(n,c);return a.prototype.collection=l,a.prototype.$collection=l,a.prototype[oy]=l,a.prototype.$__setSchema(r),R8e(a,r),k8e(a,r),j8t(a,r),U8t(a,r.s.hooks,r.statics),a.schema=a.prototype.$__schema,a.collection=l,a.$__collection=l,a.Query=function(){SI.apply(this,arguments)},Object.setPrototypeOf(a.Query.prototype,SI.prototype),a.Query.base=SI.base,a.Query.prototype.constructor=SI,a._applyQueryMiddleware(),_5t(a,r.query),a};De.clientEncryption=function(){let e=this.base.driver.get().ClientEncryption;if(!e)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let r=this.collection?.conn?.client;if(!r)return null;let n=r.options.autoEncryption;if(!n)return null;let{keyVaultNamespace:i,keyVaultClient:s,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c}=n;return new e(s??r,{keyVaultNamespace:i,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c})};De.$__updateConnection=function(e){this.db=e,this.prototype.db=e,this.prototype[ay]=e;let r=e.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=r,this.prototype.$collection=r,this.prototype[oy]=r,this.collection=r,this.$__collection=r};function _5t(t,e){for(let r in e)t.Query.prototype[r]=e[r]}De.__subclass=function(e,r,n){let i=this,s=function l(d,p,f){if(!(this instanceof l))return new l(d,p,f);i.call(this,d,p,f)};if(Object.setPrototypeOf(s,i),Object.setPrototypeOf(s.prototype,i.prototype),s.db=e,s.prototype.db=e,s.prototype[ay]=e,i[TS]=i[TS]||[],i[TS].push(s),i.discriminators!=null){s.discriminators={};for(let l of Object.keys(i.discriminators))s.discriminators[l]=i.discriminators[l].__subclass(i.db,i.discriminators[l].schema,n)}let o=r&&typeof r!="string"?r:i.prototype.$__schema,a=o.options||{},u=o._userProvidedOptions||{};n||(n=i.prototype.$__schema.get("collection")||nn.toCollectionName(i.modelName,this.base.pluralize()));let c={schemaUserProvidedOptions:u,capped:o&&a.capped};return s.prototype.collection=e.collection(n,c),s.prototype.$collection=s.prototype.collection,s.prototype[oy]=s.prototype.collection,s.collection=s.prototype.collection,s.$__collection=s.collection,s.init().catch(()=>{}),s};De.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let e of this.schema._applyDiscriminators.keys())this.discriminator(e,this.schema._applyDiscriminators.get(e));delete this.schema._defaultToObjectOptionsMap,L8t(this.schema,new WeakSet,!0)};De.inspect=function(){return`Model { ${this.modelName} }`};De.namespace=function(){return this.db.name+"."+this.collection.collectionName};w8e.inspect.custom&&(De[w8e.inspect.custom]=De.inspect);De._applyQueryMiddleware=function(){let e=this.Query,r=this.schema.s.hooks.filter(n=>{let i=v5t(n);return n.name==="validate"?!!i.query:n.name==="deleteOne"||n.name==="updateOne"?!!i.query||Object.keys(i).length===0:n.query!=null||n.document!=null?!!n.query:!0});e.prototype._queryMiddleware=r};function v5t(t){let e={};return t.hasOwnProperty("query")&&(e.query=t.query),t.hasOwnProperty("document")&&(e.document=t.document),e}$8e.exports=j8e=De});var U8e=m((IS,K8e)=>{"use strict";K8e.exports=A5t;IS.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var S5t=IS.pluralization;IS.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var w5t=IS.uncountables;function A5t(t){let e;return t=t.toLowerCase(),!~w5t.indexOf(t)&&(e=S5t.filter(function(r){return t.match(r[0])}),e[0])?t.replace(e[0][0],e[0][1]):t}});var W8e=m((k_r,z8e)=>{"use strict";var H8e=Qt(),V8e=require("util"),G8e=mz(),gh=class t extends H8e{constructor(){super(""),this.errors={}}toString(){return G8e(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(i,n[i]);return}this.errors[e]=r,this.message=G8e(this)}};V8e.inspect.custom&&(gh.prototype[V8e.inspect.custom]=gh.prototype.inspect);Object.defineProperty(gh.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(gh.prototype,"name",{value:"SetOptionError"});var QY=class extends H8e{constructor(e){super(`"${e}" is not a valid option to set`)}};gh.SetOptionInnerError=QY;z8e.exports=gh});var Y8e=m(()=>{"use strict";var J8e=Tt();typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS&&(typeof window<"u"&&J8e.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."),setTimeout.clock!=null&&typeof setTimeout.clock.Date=="function"&&J8e.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."))});var r5e=m((e5e,t5e)=>{"use strict";var Q8e=ac(),X8e=require("events").EventEmitter,Z8e=wa(),C5t=G0(),T5t=Vp(),O5t=Z8e.ValidationError,x5t=rx(),I5t=oh();function fc(t,e,r,n,i){if(!(this instanceof fc))return new fc(t,e,r,n,i);if(I5t(e)&&!e.instanceOfSchema&&(e=new C5t(e)),e=this.schema||e,!this.schema&&e.options._id&&(t=t||{},t._id===void 0&&(t._id=new T5t)),!e)throw new Z8e.MissingSchemaError;this.$__setSchema(e),Q8e.call(this,t,r,n,i),x5t(this,e,{decorateDoc:!0});for(let s in e.methods)this[s]=e.methods[s];for(let s in e.statics)this[s]=e.statics[s]}fc.prototype=Object.create(Q8e.prototype);fc.prototype.constructor=fc;fc.events=new X8e;fc.$emitter=new X8e;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(t){fc[t]=function(){return fc.$emitter[t].apply(fc.$emitter,arguments)}});fc.ValidationError=O5t;t5e.exports=e5e=fc});var i5e=m((N_r,XY)=>{"use strict";var R5t=ac(),D5t=r5e(),n5e=!1;XY.exports=function(){return n5e?D5t:R5t};XY.exports.setBrowser=function(t){n5e=t}});var h5e=m((p5e,f5e)=>{"use strict";var k5t=ac(),M5t=require("events").EventEmitter,o5e=B0(),uf=G0(),P5t=vi(),RS=zv(),N5t=ZO(),OI=m3(),s5e=fwe(),F5t=yE(),B5t=aI(),a5e=xY(),q5t=xJ(),L5t=eJ(),u5e=Kx(),j5t=U8e(),ZY=Tt(),$5t=WJ(),K5t=W0(),U5t=CY(),V5t=iE().trusted,G5t=yY(),H5t=js(),$E=Qt(),TI=W8e(),z5t=OY(),c5e=Symbol.for("mongoose:default"),l5e=Symbol("mongoose:defaultConnection");Y8e();var W5t=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:d5e}=require("node:async_hooks");function $e(t){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new M5t,this.__driver=u5e.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},t),(ZY.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null&&eQ(this),this.options.pluralization&&(this._pluralize=j5t),!t||!t[c5e]){let r=this;this.Schema=function(){return this.base=r,uf.apply(this,arguments)},this.Schema.prototype=Object.create(uf.prototype),Object.assign(this.Schema,uf),this.Schema.base=this,this.Schema.Types=Object.assign({},uf.Types)}else for(let r of["Schema","model"])this[r]=$e.prototype[r];this.Schema.prototype.base=this,t?.transactionAsyncLocalStorage&&(this.transactionAsyncLocalStorage=new d5e),Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(L5t).map(r=>[r,{deduplicate:!0}])})}$e.prototype.cast=K5t;$e.prototype.STATES=OI;$e.prototype.ConnectionStates=OI;$e.prototype.driver=u5e;$e.prototype.setDriver=function(e){let r=this instanceof $e?this:ho;if(r.__driver===e)return r;if(r.connections&&r.connections.find(o=>o.readyState!==OI.disconnected)){let o="Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver";throw new $E(o)}if(r.__driver=e,Array.isArray(e.plugins))for(let o of e.plugins)typeof o=="function"&&r.plugin(o);e.SchemaTypes!=null&&Object.assign(ho.Schema.Types,e.SchemaTypes);let i=e.Connection,s=r.connections[0];if(r.connections=[new i(r)],r.connections[0].models=r.models,s==null)return r;for(let o of Object.values(r.models))o.db===s&&o.$__updateConnection(r.connections[0]);return r};$e.prototype.set=function(e,r){let n=this instanceof $e?this:ho;if(arguments.length===1&&typeof e!="object"){if(s5e.indexOf(e)===-1){let o=new TI;throw o.addError(e,new TI.SetOptionInnerError(e)),o}return n.options[e]}let i={};arguments.length===2&&(i={[e]:r}),arguments.length===1&&typeof e=="object"&&(i=e);let s;for(let[o,a]of Object.entries(i)){if(s5e.indexOf(o)===-1){s||(s=new TI),s.addError(o,new TI.SetOptionInnerError(o));continue}n.options[o]=a,o==="objectIdGetter"?a?Object.defineProperty(n.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}):delete n.Types.ObjectId.prototype._id:o==="transactionAsyncLocalStorage"?a&&!n.transactionAsyncLocalStorage?n.transactionAsyncLocalStorage=new d5e:!a&&n.transactionAsyncLocalStorage&&delete n.transactionAsyncLocalStorage:o==="createInitialConnection"&&(a&&!n.connection?eQ(n):a===!1&&n.connection&&n.connection[l5e]&&n.connection.readyState===OI.disconnected&&Object.keys(n.connection.models).length===0&&n.connections.shift())}if(s)throw s;return n};$e.prototype.get=$e.prototype.set;$e.prototype.createConnection=function(e,r){let n=this instanceof $e?this:ho,i=n.__driver.Connection,s=new i(n);return n.connections.push(s),n.nextConnectionId++,n.events.emit("createConnection",s),arguments.length>0&&s.openUri(e,{...r,_fireAndForget:!0}),s};$e.prototype.connect=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new $E("Mongoose.prototype.connect() no longer accepts a callback");let n=this instanceof $e?this:ho;return n.connection==null&&eQ(n),n.connection.openUri(e,r).then(()=>n)};$e.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new $E("Mongoose.prototype.disconnect() no longer accepts a callback");let e=this instanceof $e?this:ho;e.connections.length<=0||await Promise.all(e.connections.map(n=>n.close()))};$e.prototype.startSession=function(){let e=this instanceof $e?this:ho;return e.connection.startSession.apply(e.connection,arguments)};$e.prototype.pluralize=function(e){let r=this instanceof $e?this:ho;return arguments.length>0&&(r._pluralize=e),r._pluralize};$e.prototype.model=function(e,r,n,i){let s=this instanceof $e?this:ho;if(typeof r=="string"&&(n=r,r=!1),arguments.length===1){let c=s.models[e];if(!c)throw new s.Error.MissingSchemaError(e);return c}if(ZY.isObject(r)&&!(r instanceof uf)&&(r=new uf(r)),r&&!(r instanceof uf))throw new s.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");i=i||{};let o=r;r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r));let a=s.options.hasOwnProperty("overwriteModels")?s.options.overwriteModels:i.overwriteModels;if(s.models.hasOwnProperty(e)&&i.cache!==!1&&a!==!0){if(o&&o.instanceOfSchema&&o!==s.models[e].schema)throw new s.Error.OverwriteModelError(e);if(n&&n!==s.models[e].collection.name){let c=s.models[e];return r=c.prototype.schema,c.__subclass(s.connection,r,n)}return s.models[e]}if(r==null)throw new s.Error.MissingSchemaError(e);let u=s._model(e,r,n,i);return s.connection.models[e]=u,s.models[e]=u,u};$e.prototype._model=function(e,r,n,i){let s=this instanceof $e?this:ho,o;if(typeof e=="function"&&(o=e,e=o.name,!(o.prototype instanceof a5e)))throw new s.Error("The provided class "+e+" must extend Model");r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r)),(r==null||!("pluralization"in r.options))&&(r.options.pluralization=s.options.pluralization),n||(n=r.get("collection")||ZY.toCollectionName(e,s.pluralize())),z5t(r);let a=i.connection||s.connection;if(o=s.Model.compile(o||e,r,n,a,s),o.init().catch(function(){}),a.emit("model",o),r._applyDiscriminators!=null)for(let u of r._applyDiscriminators.keys()){let{schema:c,options:l}=r._applyDiscriminators.get(u);o.discriminator(u,c,l)}return o};$e.prototype.deleteModel=function(e){let r=this instanceof $e?this:ho;return r.connection.deleteModel(e),delete r.models[e],r};$e.prototype.modelNames=function(){let e=this instanceof $e?this:ho;return Object.keys(e.models)};$e.prototype._applyPlugins=function(e,r){let n=this instanceof $e?this:ho;r=r||{},r.applyPluginsToDiscriminators=n.options&&n.options.applyPluginsToDiscriminators||!1,r.applyPluginsToChildSchemas=typeof(n.options&&n.options.applyPluginsToChildSchemas)=="boolean"?n.options.applyPluginsToChildSchemas:!0,q5t(e,n.plugins,r,"$globalPluginsApplied")};$e.prototype.plugin=function(e,r){let n=this instanceof $e?this:ho;return n.plugins.push([e,r]),n};$e.prototype.__defineGetter__("connection",function(){return this.connections[0]});$e.prototype.__defineSetter__("connection",function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)});$e.prototype.connections;$e.prototype.nextConnectionId;$e.prototype.Aggregate=U5t;$e.prototype.BaseCollection=B$();Object.defineProperty($e.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}});Object.defineProperty($e.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}});$e.prototype.BaseConnection=zJ();$e.prototype.version=$5t.version;$e.prototype.Mongoose=$e;$e.prototype.Schema=uf;$e.prototype.SchemaType=P5t;$e.prototype.SchemaTypes=uf.Types;$e.prototype.VirtualType=N5t;$e.prototype.Types=F5t;$e.prototype.Query=B5t;$e.prototype.Model=a5e;$e.prototype.Document=k5t;$e.prototype.DocumentProvider=i5e();$e.prototype.ObjectId=RS.ObjectId;$e.prototype.isValidObjectId=function(e){return(this instanceof $e?this:ho).Types.ObjectId.isValid(e)};$e.prototype.isObjectIdOrHexString=function(e){return H5t(e,"ObjectId")||typeof e=="string"&&W5t.test(e)};$e.prototype.syncIndexes=function(e){return(this instanceof $e?this:ho).connection.syncIndexes(e)};$e.prototype.Decimal128=RS.Decimal128;$e.prototype.Mixed=RS.Mixed;$e.prototype.Date=RS.Date;$e.prototype.Number=RS.Number;$e.prototype.Error=$E;$e.prototype.MongooseError=$E;$e.prototype.now=function(){return new Date};$e.prototype.CastError=$E.CastError;$e.prototype.SchemaTypeOptions=Ca();$e.prototype.mquery=hY();$e.prototype.sanitizeFilter=G5t;$e.prototype.trusted=V5t;$e.prototype.skipMiddlewareFunction=o5e.skipWrappedFunction;$e.prototype.overwriteMiddlewareResult=o5e.overwriteResult;$e.prototype.omitUndefined=xW();function eQ(t){if(t.connection)return;let e=t.createConnection();e[l5e]=!0,e.models=t.models}var ho=f5e.exports=p5e=new $e({[c5e]:!0})});var g5e=m((F_r,y5e)=>{"use strict";var m5e=dwe();Kx().set(m5e);var tQ=h5e();tQ.setDriver(m5e);tQ.Mongoose.prototype.mongo=O0();y5e.exports=tQ});var KE=m((B_r,Et)=>{"use strict";var vt=g5e();Et.exports=vt;Et.exports.default=vt;Et.exports.mongoose=vt;Et.exports.cast=vt.cast;Et.exports.STATES=vt.STATES;Et.exports.setDriver=vt.setDriver;Et.exports.set=vt.set;Et.exports.get=vt.get;Et.exports.createConnection=vt.createConnection;Et.exports.connect=vt.connect;Et.exports.disconnect=vt.disconnect;Et.exports.startSession=vt.startSession;Et.exports.pluralize=vt.pluralize;Et.exports.model=vt.model;Et.exports.deleteModel=vt.deleteModel;Et.exports.modelNames=vt.modelNames;Et.exports.plugin=vt.plugin;Et.exports.connections=vt.connections;Et.exports.version=vt.version;Et.exports.Aggregate=vt.Aggregate;Et.exports.Mongoose=vt.Mongoose;Et.exports.Schema=vt.Schema;Et.exports.SchemaType=vt.SchemaType;Et.exports.SchemaTypes=vt.SchemaTypes;Et.exports.VirtualType=vt.VirtualType;Et.exports.Types=vt.Types;Et.exports.Query=vt.Query;Et.exports.Model=vt.Model;Et.exports.Document=vt.Document;Et.exports.ObjectId=vt.ObjectId;Et.exports.isValidObjectId=vt.isValidObjectId;Et.exports.isObjectIdOrHexString=vt.isObjectIdOrHexString;Et.exports.syncIndexes=vt.syncIndexes;Et.exports.Decimal128=vt.Decimal128;Et.exports.Mixed=vt.Mixed;Et.exports.Date=vt.Date;Et.exports.Number=vt.Number;Et.exports.Error=vt.Error;Et.exports.MongooseError=vt.MongooseError;Et.exports.now=vt.now;Et.exports.CastError=vt.CastError;Et.exports.SchemaTypeOptions=vt.SchemaTypeOptions;Et.exports.mongo=vt.mongo;Et.exports.mquery=vt.mquery;Et.exports.sanitizeFilter=vt.sanitizeFilter;Et.exports.trusted=vt.trusted;Et.exports.skipMiddlewareFunction=vt.skipMiddlewareFunction;Et.exports.overwriteMiddlewareResult=vt.overwriteMiddlewareResult});var UE,rQ,J5t,Y5t,VE,nQ=le(()=>{"use strict";UE=Dt(KE());rQ=new UE.Schema({max:{type:Number,default:0,min:0},min:{type:Number,default:0,min:0},current:{type:Number,default:0,min:0}},{_id:!1}),J5t=new UE.Schema({premium:{type:rQ,default:{max:5,min:0,current:5}},standard:{type:rQ,default:{max:3,min:0,current:3}},free:{type:rQ,default:{max:2,min:0,current:2}}},{_id:!1}),Y5t=new UE.Schema({plan:{type:String,default:"free"},email:{type:String,required:[!0,"Email is required"],unique:[!0,"Email must be unique"]},username:{type:String,required:[!0,"Username is required"]},privacyPolicyAccepted:{type:Boolean,default:!0},lengthOfDocs:{type:J5t,default:{premium:{max:7,min:0,current:7},standard:{max:5,min:0,current:5},free:{max:2,min:0,current:2}}},userId:{type:String,required:[!0,"userId is required"],unique:!0}},{timestamps:!0,strict:!0}),VE=(0,UE.model)("User",Y5t)});var xI,Q5t,II,E5e=le(()=>{"use strict";xI=Dt(KE());Q5t=new xI.Schema({email:{type:String,required:[!0,"Email is required"],unique:[!0,"Email must be unique"]},deletedAt:{type:Date,required:!0}},{timestamps:!1}),II=(0,xI.model)("DeletedUsers",Q5t)});var Pa=m((j_r,b5e)=>{"use strict";var iQ=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};b5e.exports=t=>{if(t.length>2)throw new iQ(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var w5e=m(($_r,S5e)=>{var v5e={};S5e.exports=v5e;var _5e={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(_5e).forEach(function(t){var e=_5e[t],r=v5e[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var C5e=m((K_r,A5e)=>{"use strict";A5e.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var O5e=m((U_r,T5e)=>{"use strict";var X5t=require("os"),Ml=C5e(),jo=process.env,GE=void 0;Ml("no-color")||Ml("no-colors")||Ml("color=false")?GE=!1:(Ml("color")||Ml("colors")||Ml("color=true")||Ml("color=always"))&&(GE=!0);"FORCE_COLOR"in jo&&(GE=jo.FORCE_COLOR.length===0||parseInt(jo.FORCE_COLOR,10)!==0);function Z5t(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function eCt(t){if(GE===!1)return 0;if(Ml("color=16m")||Ml("color=full")||Ml("color=truecolor"))return 3;if(Ml("color=256"))return 2;if(t&&!t.isTTY&&GE!==!0)return 0;var e=GE?1:0;if(process.platform==="win32"){var r=X5t.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in jo)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in jo})||jo.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in jo)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(jo.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in jo){var n=parseInt((jo.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(jo.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(jo.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(jo.TERM)||"COLORTERM"in jo?1:(jo.TERM==="dumb",e)}function sQ(t){var e=eCt(t);return Z5t(e)}T5e.exports={supportsColor:sQ,stdout:sQ(process.stdout),stderr:sQ(process.stderr)}});var I5e=m((V_r,x5e)=>{x5e.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var D5e=m((G_r,R5e)=>{R5e.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(u){var c=Math.floor(Math.random()*u);return c}function o(u){var c=!1;return i.filter(function(l){c=l===u}),c}function a(u,c){var l="",d,p;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",u=u.split("");for(p in u)if(!o(p)){switch(l=l+u[p],d={up:0,down:0,mid:0},c.size){case"mini":d.up=s(8),d.mid=s(2),d.down=s(8);break;case"maxi":d.up=s(16)+3,d.mid=s(4)+1,d.down=s(64)+3;break;default:d.up=s(8)+1,d.mid=s(6)/2,d.down=s(8)+1;break}var f=["up","mid","down"];for(var h in f)for(var g=f[h],_=0;_<=d[g];_++)c[g]&&(l=l+n[g][s(n[g].length)])}return l}return a(e,r)}});var M5e=m((H_r,k5e)=>{k5e.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var N5e=m((z_r,P5e)=>{P5e.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var B5e=m((W_r,F5e)=>{F5e.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var L5e=m((J_r,q5e)=>{q5e.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var G5e=m((Q_r,V5e)=>{var ir={};V5e.exports=ir;ir.themes={};var tCt=require("util"),uy=ir.styles=w5e(),$5e=Object.defineProperties,rCt=new RegExp(/[\r\n]+/g);ir.supportsColor=O5e().supportsColor;typeof ir.enabled>"u"&&(ir.enabled=ir.supportsColor()!==!1);ir.enable=function(){ir.enabled=!0};ir.disable=function(){ir.enabled=!1};ir.stripColors=ir.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var Y_r=ir.stylize=function(e,r){if(!ir.enabled)return e+"";var n=uy[r];return!n&&r in ir?ir[r](e):n.open+e+n.close},nCt=/[|\\{}()[\]^$+*?.]/g,iCt=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(nCt,"\\$&")};function K5e(t){var e=function r(){return oCt.apply(r,arguments)};return e._styles=t,e.__proto__=sCt,e}var U5e=(function(){var t={};return uy.grey=uy.gray,Object.keys(uy).forEach(function(e){uy[e].closeRe=new RegExp(iCt(uy[e].close),"g"),t[e]={get:function(){return K5e(this._styles.concat(e))}}}),t})(),sCt=$5e(function(){},U5e);function oCt(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:tCt.inspect(o)}).join(" ");if(!ir.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=uy[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(rCt,function(o){return s.close+o+s.open}))}return e}ir.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){ir[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=ir[t[r][s]](i);return i}return ir[t[r]](n)}})(e)};function aCt(){var t={};return Object.keys(U5e).forEach(function(e){t[e]={get:function(){return K5e([e])}}}),t}var uCt=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};ir.trap=I5e();ir.zalgo=D5e();ir.maps={};ir.maps.america=M5e()(ir);ir.maps.zebra=N5e()(ir);ir.maps.rainbow=B5e()(ir);ir.maps.random=L5e()(ir);for(j5e in ir.maps)(function(t){ir[t]=function(e){return uCt(ir.maps[t],e)}})(j5e);var j5e;$5e(ir,aCt())});var oQ=m((X_r,H5e)=>{var cCt=G5e();H5e.exports=cCt});var z5e=m(aQ=>{"use strict";aQ.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};aQ.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var W5e=m(uQ=>{"use strict";uQ.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};uQ.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var J5e=m(cQ=>{"use strict";cQ.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};cQ.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var Y5e=m(RI=>{"use strict";Object.defineProperty(RI,"cli",{value:z5e()});Object.defineProperty(RI,"npm",{value:W5e()});Object.defineProperty(RI,"syslog",{value:J5e()})});var Fi=m(DS=>{"use strict";Object.defineProperty(DS,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(DS,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(DS,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(DS,"configs",{value:Y5e()})});var MI=m((i4r,kI)=>{"use strict";var pQ=oQ(),{LEVEL:lQ,MESSAGE:dQ}=Fi();pQ.enabled=!0;var Q5e=/\s+/,DI=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=Q5e.test(e[i])?e[i].split(Q5e):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return pQ[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=pQ[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[dQ]=="string"&&(e[dQ]=this.colorize(e[lQ],e.level,e[dQ])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[lQ],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[lQ],e.level,e.message)),e}};kI.exports=t=>new DI(t);kI.exports.Colorizer=kI.exports.Format=DI});var Z5e=m((s4r,X5e)=>{"use strict";var{Colorizer:lCt}=MI();X5e.exports=t=>(lCt.addColors(t.colors||t),t)});var tCe=m((o4r,eCe)=>{"use strict";var dCt=Pa();eCe.exports=dCt(t=>(t.message=`	${t.message}`,t))});var iCe=m((a4r,nCe)=>{"use strict";var pCt=Pa(),{LEVEL:rCe,MESSAGE:fQ}=Fi();nCe.exports=pCt((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[rCe]:t[rCe]||t.level,message:t.message,[fQ]:t[fQ]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[fQ]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var mQ=m((u4r,NI)=>{"use strict";var{configs:fCt,LEVEL:sCe,MESSAGE:hQ}=Fi(),PI=class t{constructor(e={levels:fCt.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[sCe]]}${e.message}`,e[hQ]&&(e[hQ]=`${this.paddings[e[sCe]]}${e[hQ]}`),e}};NI.exports=t=>new PI(t);NI.exports.Padder=NI.exports.Format=PI});var oCe=m((c4r,yQ)=>{"use strict";var{Colorizer:hCt}=MI(),{Padder:mCt}=mQ(),{configs:yCt,MESSAGE:gCt}=Fi(),FI=class{constructor(e={}){e.levels||(e.levels=yCt.cli.levels),this.colorizer=new hCt(e),this.padder=new mCt(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[gCt]=`${e.level}:${e.message}`,e}};yQ.exports=t=>new FI(t);yQ.exports.Format=FI});var uCe=m((l4r,gQ)=>{"use strict";var ECt=Pa();function aCe(t){if(t.every(bCt))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function bCt(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}gQ.exports=(...t)=>{let e=ECt(aCe(t)),r=e();return r.Format=e.Format,r};gQ.exports.cascade=aCe});var MS=m((vQ,dCe)=>{"use strict";var{hasOwnProperty:kS}=Object.prototype,ly=_Q();ly.configure=_Q;ly.stringify=ly;ly.default=ly;vQ.stringify=ly;vQ.configure=_Q;dCe.exports=ly;var _Ct=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function Eh(t){return t.length<5e3&&!_Ct.test(t)?`"${t}"`:JSON.stringify(t)}function EQ(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],i=r;for(;i!==0&&t[i-1]>n;)t[i]=t[i-1],i--;t[i]=n}return t}var vCt=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function bQ(t){return vCt.call(t)!==void 0&&t.length!==0}function cCe(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function SCt(t){if(kS.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function wCt(t){let e;if(kS.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function ACt(t,e){let r;if(kS.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function lCe(t,e){let r;if(kS.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function cy(t){return t===1?"1 item":`${t} items`}function CCt(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function TCt(t){if(kS.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function _Q(t){t={...t};let e=TCt(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=SCt(t),n=ACt(t,"bigint"),i=wCt(t),s=typeof i=="function"?i:void 0,o=lCe(t,"maximumDepth"),a=lCe(t,"maximumBreadth");function u(f,h,g,_,S,w){let C=h[f];switch(typeof C=="object"&&C!==null&&typeof C.toJSON=="function"&&(C=C.toJSON(f)),C=_.call(h,f,C),typeof C){case"string":return Eh(C);case"object":{if(C===null)return"null";if(g.indexOf(C)!==-1)return r;let A="",O=",",x=w;if(Array.isArray(C)){if(C.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(C),S!==""&&(w+=S,A+=`
${w}`,O=`,
${w}`);let U=Math.min(C.length,a),k=0;for(;k<U-1;k++){let ie=u(String(k),C,g,_,S,w);A+=ie!==void 0?ie:"null",A+=O}let H=u(String(k),C,g,_,S,w);if(A+=H!==void 0?H:"null",C.length-1>a){let ie=C.length-a-1;A+=`${O}"... ${cy(ie)} not stringified"`}return S!==""&&(A+=`
${x}`),g.pop(),`[${A}]`}let R=Object.keys(C),M=R.length;if(M===0)return"{}";if(o<g.length+1)return'"[Object]"';let I="",F="";S!==""&&(w+=S,O=`,
${w}`,I=" ");let B=Math.min(M,a);i&&!bQ(C)&&(R=EQ(R,s)),g.push(C);for(let U=0;U<B;U++){let k=R[U],H=u(k,C,g,_,S,w);H!==void 0&&(A+=`${F}${Eh(k)}:${I}${H}`,F=O)}if(M>a){let U=M-a;A+=`${F}"...":${I}"${cy(U)} not stringified"`,F=O}return S!==""&&F.length>1&&(A=`
${w}${A}
${x}`),g.pop(),`{${A}}`}case"number":return isFinite(C)?String(C):e?e(C):"null";case"boolean":return C===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(C);default:return e?e(C):void 0}}function c(f,h,g,_,S,w){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return Eh(h);case"object":{if(h===null)return"null";if(g.indexOf(h)!==-1)return r;let C=w,A="",O=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(h),S!==""&&(w+=S,A+=`
${w}`,O=`,
${w}`);let M=Math.min(h.length,a),I=0;for(;I<M-1;I++){let B=c(String(I),h[I],g,_,S,w);A+=B!==void 0?B:"null",A+=O}let F=c(String(I),h[I],g,_,S,w);if(A+=F!==void 0?F:"null",h.length-1>a){let B=h.length-a-1;A+=`${O}"... ${cy(B)} not stringified"`}return S!==""&&(A+=`
${C}`),g.pop(),`[${A}]`}g.push(h);let x="";S!==""&&(w+=S,O=`,
${w}`,x=" ");let R="";for(let M of _){let I=c(M,h[M],g,_,S,w);I!==void 0&&(A+=`${R}${Eh(M)}:${x}${I}`,R=O)}return S!==""&&R.length>1&&(A=`
${w}${A}
${C}`),g.pop(),`{${A}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function l(f,h,g,_,S){switch(typeof h){case"string":return Eh(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return l(f,h,g,_,S);if(h===null)return"null"}if(g.indexOf(h)!==-1)return r;let w=S;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(h),S+=_;let I=`
${S}`,F=`,
${S}`,B=Math.min(h.length,a),U=0;for(;U<B-1;U++){let H=l(String(U),h[U],g,_,S);I+=H!==void 0?H:"null",I+=F}let k=l(String(U),h[U],g,_,S);if(I+=k!==void 0?k:"null",h.length-1>a){let H=h.length-a-1;I+=`${F}"... ${cy(H)} not stringified"`}return I+=`
${w}`,g.pop(),`[${I}]`}let C=Object.keys(h),A=C.length;if(A===0)return"{}";if(o<g.length+1)return'"[Object]"';S+=_;let O=`,
${S}`,x="",R="",M=Math.min(A,a);bQ(h)&&(x+=cCe(h,O,a),C=C.slice(h.length),M-=h.length,R=O),i&&(C=EQ(C,s)),g.push(h);for(let I=0;I<M;I++){let F=C[I],B=l(F,h[F],g,_,S);B!==void 0&&(x+=`${R}${Eh(F)}: ${B}`,R=O)}if(A>a){let I=A-a;x+=`${R}"...": "${cy(I)} not stringified"`,R=O}return R!==""&&(x=`
${S}${x}
${w}`),g.pop(),`{${x}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function d(f,h,g){switch(typeof h){case"string":return Eh(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,g);if(h===null)return"null"}if(g.indexOf(h)!==-1)return r;let _="",S=h.length!==void 0;if(S&&Array.isArray(h)){if(h.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(h);let x=Math.min(h.length,a),R=0;for(;R<x-1;R++){let I=d(String(R),h[R],g);_+=I!==void 0?I:"null",_+=","}let M=d(String(R),h[R],g);if(_+=M!==void 0?M:"null",h.length-1>a){let I=h.length-a-1;_+=`,"... ${cy(I)} not stringified"`}return g.pop(),`[${_}]`}let w=Object.keys(h),C=w.length;if(C===0)return"{}";if(o<g.length+1)return'"[Object]"';let A="",O=Math.min(C,a);S&&bQ(h)&&(_+=cCe(h,",",a),w=w.slice(h.length),O-=h.length,A=","),i&&(w=EQ(w,s)),g.push(h);for(let x=0;x<O;x++){let R=w[x],M=d(R,h[R],g);M!==void 0&&(_+=`${A}${Eh(R)}:${M}`,A=",")}if(C>a){let x=C-a;_+=`${A}"...":"${cy(x)} not stringified"`}return g.pop(),`{${_}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function p(f,h,g){if(arguments.length>1){let _="";if(typeof g=="number"?_=" ".repeat(Math.min(g,10)):typeof g=="string"&&(_=g.slice(0,10)),h!=null){if(typeof h=="function")return u("",{"":f},[],h,_,"");if(Array.isArray(h))return c("",f,[],CCt(h),_,"")}if(_.length!==0)return l("",f,[],_,"")}return d("",f,[])}return p}});var SQ=m((d4r,pCe)=>{"use strict";var OCt=Pa(),{MESSAGE:xCt}=Fi(),ICt=MS();function RCt(t,e){return typeof e=="bigint"?e.toString():e}pCe.exports=OCt((t,e)=>{let r=ICt.configure(e);return t[xCt]=r(t,e.replacer||RCt,e.space),t})});var hCe=m((p4r,fCe)=>{"use strict";var DCt=Pa();fCe.exports=DCt((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var yCe=m((f4r,mCe)=>{"use strict";var kCt=Pa(),{MESSAGE:MCt}=Fi(),PCt=MS();mCe.exports=kCt(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[MCt]=PCt(e),t})});var ECe=m((h4r,gCe)=>{"use strict";var NCt=Pa();function FCt(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function BCt(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}gCe.exports=NCt((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?FCt(t,n,r):e.fillWith?BCt(t,e.fillWith,r):t})});var _Ce=m((m4r,bCe)=>{var HE=1e3,zE=HE*60,WE=zE*60,dy=WE*24,qCt=dy*7,LCt=dy*365.25;bCe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return jCt(t);if(r==="number"&&isFinite(t))return e.long?KCt(t):$Ct(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function jCt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*LCt;case"weeks":case"week":case"w":return r*qCt;case"days":case"day":case"d":return r*dy;case"hours":case"hour":case"hrs":case"hr":case"h":return r*WE;case"minutes":case"minute":case"mins":case"min":case"m":return r*zE;case"seconds":case"second":case"secs":case"sec":case"s":return r*HE;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function $Ct(t){var e=Math.abs(t);return e>=dy?Math.round(t/dy)+"d":e>=WE?Math.round(t/WE)+"h":e>=zE?Math.round(t/zE)+"m":e>=HE?Math.round(t/HE)+"s":t+"ms"}function KCt(t){var e=Math.abs(t);return e>=dy?BI(t,e,dy,"day"):e>=WE?BI(t,e,WE,"hour"):e>=zE?BI(t,e,zE,"minute"):e>=HE?BI(t,e,HE,"second"):t+" ms"}function BI(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var SCe=m((PS,vCe)=>{"use strict";var UCt=Pa(),VCt=_Ce();vCe.exports=UCt(t=>{let e=+new Date;return PS.diff=e-(PS.prevTime||e),PS.prevTime=e,t.ms=`+${VCt(PS.diff)}`,t})});var CCe=m((y4r,ACe)=>{"use strict";var GCt=require("util").inspect,HCt=Pa(),{LEVEL:zCt,MESSAGE:wCe,SPLAT:WCt}=Fi();ACe.exports=HCt((t,e={})=>{let r=Object.assign({},t);return delete r[zCt],delete r[wCe],delete r[WCt],t[wCe]=GCt(r,!1,e.depth||null,e.colorize),t})});var TCe=m((g4r,LI)=>{"use strict";var{MESSAGE:JCt}=Fi(),qI=class{constructor(e){this.template=e}transform(e){return e[JCt]=this.template(e),e}};LI.exports=t=>new qI(t);LI.exports.Printf=LI.exports.Format=qI});var ICe=m((E4r,xCe)=>{"use strict";var YCt=Pa(),{MESSAGE:OCe}=Fi(),QCt=MS();xCe.exports=YCt(t=>{let e=QCt(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[OCe]=`${t.level}:${r} ${t.message} ${e}`:t[OCe]=`${t.level}:${r} ${t.message}`,t})});var kCe=m((b4r,DCe)=>{"use strict";var XCt=require("util"),{SPLAT:RCe}=Fi(),ZCt=/%[scdjifoO%]/g,e7t=/%%/g,wQ=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[RCe]||e.splat||[],s=n.match(e7t),o=s&&s.length||0,u=r.length-o-i.length,c=u<0?i.splice(u,-1*u):[],l=c.length;if(l)for(let d=0;d<l;d++)Object.assign(e,c[d]);return e.message=XCt.format(n,...i),e}transform(e){let r=e.message,n=e[RCe]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match(ZCt);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};DCe.exports=t=>new wQ(t)});var PCe=m((jI,MCe)=>{(function(t,e){typeof jI=="object"&&typeof MCe<"u"?e(jI):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(jI,(function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function u(j,V){for(var Ee=[],Re=0,fe=j.length;Re<fe;Re++)Ee.push(j[Re].substr(0,V));return Ee}var c=function(j){return function(V,Ee){var Re=Ee[j].map(function(Ve){return Ve.toLowerCase()}),fe=Re.indexOf(V.toLowerCase());return fe>-1?fe:null}};function l(j){for(var V=[],Ee=1;Ee<arguments.length;Ee++)V[Ee-1]=arguments[Ee];for(var Re=0,fe=V;Re<fe.length;Re++){var Ve=fe[Re];for(var Me in Ve)j[Me]=Ve[Me]}return j}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],f=u(p,3),h=u(d,3),g={dayNamesShort:h,dayNames:d,monthNamesShort:f,monthNames:p,amPm:["am","pm"],DoFn:function(j){return j+["th","st","nd","rd"][j%10>3?0:(j-j%10!==10?1:0)*j%10]}},_=l({},g),S=function(j){return _=l(_,j)},w=function(j){return j.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},C=function(j,V){for(V===void 0&&(V=2),j=String(j);j.length<V;)j="0"+j;return j},A={D:function(j){return String(j.getDate())},DD:function(j){return C(j.getDate())},Do:function(j,V){return V.DoFn(j.getDate())},d:function(j){return String(j.getDay())},dd:function(j){return C(j.getDay())},ddd:function(j,V){return V.dayNamesShort[j.getDay()]},dddd:function(j,V){return V.dayNames[j.getDay()]},M:function(j){return String(j.getMonth()+1)},MM:function(j){return C(j.getMonth()+1)},MMM:function(j,V){return V.monthNamesShort[j.getMonth()]},MMMM:function(j,V){return V.monthNames[j.getMonth()]},YY:function(j){return C(String(j.getFullYear()),4).substr(2)},YYYY:function(j){return C(j.getFullYear(),4)},h:function(j){return String(j.getHours()%12||12)},hh:function(j){return C(j.getHours()%12||12)},H:function(j){return String(j.getHours())},HH:function(j){return C(j.getHours())},m:function(j){return String(j.getMinutes())},mm:function(j){return C(j.getMinutes())},s:function(j){return String(j.getSeconds())},ss:function(j){return C(j.getSeconds())},S:function(j){return String(Math.round(j.getMilliseconds()/100))},SS:function(j){return C(Math.round(j.getMilliseconds()/10),2)},SSS:function(j){return C(j.getMilliseconds(),3)},a:function(j,V){return j.getHours()<12?V.amPm[0]:V.amPm[1]},A:function(j,V){return j.getHours()<12?V.amPm[0].toUpperCase():V.amPm[1].toUpperCase()},ZZ:function(j){var V=j.getTimezoneOffset();return(V>0?"-":"+")+C(Math.floor(Math.abs(V)/60)*100+Math.abs(V)%60,4)},Z:function(j){var V=j.getTimezoneOffset();return(V>0?"-":"+")+C(Math.floor(Math.abs(V)/60),2)+":"+C(Math.abs(V)%60,2)}},O=function(j){return+j-1},x=[null,r],R=[null,o],M=["isPm",o,function(j,V){var Ee=j.toLowerCase();return Ee===V.amPm[0]?0:Ee===V.amPm[1]?1:null}],I=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(j){var V=(j+"").match(/([+-]|\d\d)/gi);if(V){var Ee=+V[1]*60+parseInt(V[2],10);return V[0]==="+"?Ee:-Ee}return 0}],F={D:["day",r],DD:["day",n],Do:["day",r+o,function(j){return parseInt(j,10)}],M:["month",r,O],MM:["month",n,O],YY:["year",n,function(j){var V=new Date,Ee=+(""+V.getFullYear()).substr(0,2);return+(""+(+j>68?Ee-1:Ee)+j)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(j){return+j*100}],SS:["millisecond",n,function(j){return+j*10}],SSS:["millisecond",i],d:x,dd:x,ddd:R,dddd:R,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:M,A:M,ZZ:I,Z:I},B={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},U=function(j){return l(B,j)},k=function(j,V,Ee){if(V===void 0&&(V=B.default),Ee===void 0&&(Ee={}),typeof j=="number"&&(j=new Date(j)),Object.prototype.toString.call(j)!=="[object Date]"||isNaN(j.getTime()))throw new Error("Invalid Date pass to format");V=B[V]||V;var Re=[];V=V.replace(a,function(Ve,Me){return Re.push(Me),"@@@"});var fe=l(l({},_),Ee);return V=V.replace(e,function(Ve){return A[Ve](j,fe)}),V.replace(/@@@/g,function(){return Re.shift()})};function H(j,V,Ee){if(Ee===void 0&&(Ee={}),typeof V!="string")throw new Error("Invalid format in fecha parse");if(V=B[V]||V,j.length>1e3)return null;var Re=new Date,fe={year:Re.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Ve=[],Me=[],Ce=V.replace(a,function(z,X){return Me.push(w(X)),"@@@"}),Rr={},_t={};Ce=w(Ce).replace(e,function(z){var X=F[z],ue=X[0],se=X[1],Se=X[3];if(Rr[ue])throw new Error("Invalid format. "+ue+" specified twice in format");return Rr[ue]=!0,Se&&(_t[Se]=!0),Ve.push(X),"("+se+")"}),Object.keys(_t).forEach(function(z){if(!Rr[z])throw new Error("Invalid format. "+z+" is required in specified format")}),Ce=Ce.replace(/@@@/g,function(){return Me.shift()});var sa=j.match(new RegExp(Ce,"i"));if(!sa)return null;for(var hi=l(l({},_),Ee),tr=1;tr<sa.length;tr++){var P=Ve[tr-1],$=P[0],G=P[2],ne=G?G(sa[tr],hi):+sa[tr];if(ne==null)return null;fe[$]=ne}fe.isPm===1&&fe.hour!=null&&+fe.hour!=12?fe.hour=+fe.hour+12:fe.isPm===0&&+fe.hour==12&&(fe.hour=0);var Y;if(fe.timezoneOffset==null){Y=new Date(fe.year,fe.month,fe.day,fe.hour,fe.minute,fe.second,fe.millisecond);for(var te=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],tr=0,de=te.length;tr<de;tr++)if(Rr[te[tr][0]]&&fe[te[tr][0]]!==Y[te[tr][1]]())return null}else if(Y=new Date(Date.UTC(fe.year,fe.month,fe.day,fe.hour,fe.minute-fe.timezoneOffset,fe.second,fe.millisecond)),fe.month>11||fe.month<0||fe.day>31||fe.day<1||fe.hour>23||fe.hour<0||fe.minute>59||fe.minute<0||fe.second>59||fe.second<0)return null;return Y}var ie={format:k,parse:H,defaultI18n:g,setGlobalDateI18n:S,setGlobalDateMasks:U};t.assign=l,t.default=ie,t.format=k,t.parse=H,t.defaultI18n=g,t.setGlobalDateI18n=S,t.setGlobalDateMasks=U,Object.defineProperty(t,"__esModule",{value:!0})}))});var FCe=m((_4r,NCe)=>{"use strict";var t7t=PCe(),r7t=Pa();NCe.exports=r7t((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():t7t.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var qCe=m((v4r,BCe)=>{"use strict";var AQ=oQ(),n7t=Pa(),{MESSAGE:CQ}=Fi();BCe.exports=n7t((t,e)=>(e.level!==!1&&(t.level=AQ.strip(t.level)),e.message!==!1&&(t.message=AQ.strip(String(t.message))),e.raw!==!1&&t[CQ]&&(t[CQ]=AQ.strip(String(t[CQ]))),t))});var OQ=m(TQ=>{"use strict";var i7t=TQ.format=Pa();TQ.levels=Z5e();function Gs(t,e){Object.defineProperty(i7t,t,{get(){return e()},configurable:!0})}Gs("align",function(){return tCe()});Gs("errors",function(){return iCe()});Gs("cli",function(){return oCe()});Gs("combine",function(){return uCe()});Gs("colorize",function(){return MI()});Gs("json",function(){return SQ()});Gs("label",function(){return hCe()});Gs("logstash",function(){return yCe()});Gs("metadata",function(){return ECe()});Gs("ms",function(){return SCe()});Gs("padLevels",function(){return mQ()});Gs("prettyPrint",function(){return CCe()});Gs("printf",function(){return TCe()});Gs("simple",function(){return ICe()});Gs("splat",function(){return kCe()});Gs("timestamp",function(){return FCe()});Gs("uncolorize",function(){return qCe()})});var xQ=m($I=>{"use strict";var{format:LCe}=require("util");$I.warn={deprecated(t){return()=>{throw new Error(LCe("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([LCe("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=$I.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=$I.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var jCe=m((A4r,s7t)=>{s7t.exports={name:"winston",description:"A logger for just about everything.",version:"3.18.3",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.8","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",mocha:"^10.3.0",nyc:"^17.1.0",rimraf:"5.0.1",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"rimraf test/fixtures/logs/* && mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var KCe=m((C4r,$Ce)=>{$Ce.exports=require("util").deprecate});var IQ=m((T4r,UCe)=>{UCe.exports=require("stream")});var DQ=m((O4r,GCe)=>{"use strict";function o7t(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(RQ,this,t)):process.nextTick(RQ,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(KI,r):(r._writableState.errorEmitted=!0,process.nextTick(VCe,r,s)):process.nextTick(VCe,r,s):e?(process.nextTick(KI,r),e(s)):process.nextTick(KI,r)}),this)}function VCe(t,e){RQ(t,e),KI(t)}function KI(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function a7t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function RQ(t,e){t.emit("error",e)}function u7t(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}GCe.exports={destroy:o7t,undestroy:a7t,errorOrDestroy:u7t}});var bh=m((x4r,WCe)=>{"use strict";var zCe={};function hc(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,u){super(n(o,a,u))}}i.prototype.name=r.name,i.prototype.code=t,zCe[t]=i}function HCe(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function c7t(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function l7t(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function d7t(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}hc("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);hc("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&c7t(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(l7t(t," argument"))i=`The ${t} ${n} ${HCe(e,"type")}`;else{let s=d7t(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${HCe(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);hc("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");hc("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});hc("ERR_STREAM_PREMATURE_CLOSE","Premature close");hc("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});hc("ERR_MULTIPLE_CALLBACK","Callback called multiple times");hc("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");hc("ERR_STREAM_WRITE_AFTER_END","write after end");hc("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);hc("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);hc("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");WCe.exports.codes=zCe});var kQ=m((I4r,JCe)=>{"use strict";var p7t=bh().codes.ERR_INVALID_OPT_VALUE;function f7t(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function h7t(t,e,r,n){var i=f7t(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new p7t(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}JCe.exports={getHighWaterMark:h7t}});var YCe=m((R4r,MQ)=>{typeof Object.create=="function"?MQ.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:MQ.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var py=m((D4r,NQ)=>{try{if(PQ=require("util"),typeof PQ.inherits!="function")throw"";NQ.exports=PQ.inherits}catch{NQ.exports=YCe()}var PQ});var r7e=m((k4r,t7e)=>{"use strict";function QCe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XCe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QCe(Object(r),!0).forEach(function(n){m7t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QCe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m7t(t,e,r){return e=e7e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y7t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZCe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e7e(n.key),n)}}function g7t(t,e,r){return e&&ZCe(t.prototype,e),r&&ZCe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function e7e(t){var e=E7t(t,"string");return typeof e=="symbol"?e:String(e)}function E7t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b7t=require("buffer"),UI=b7t.Buffer,_7t=require("util"),FQ=_7t.inspect,v7t=FQ&&FQ.custom||"inspect";function S7t(t,e,r){UI.prototype.copy.call(t,e,r)}t7e.exports=(function(){function t(){y7t(this,t),this.head=null,this.tail=null,this.length=0}return g7t(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return UI.alloc(0);for(var n=UI.allocUnsafe(r>>>0),i=this.head,s=0;i;)S7t(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=UI.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:v7t,value:function(r,n){return FQ(this,XCe(XCe({},n),{},{depth:0,customInspect:!1}))}}]),t})()});var Pl=m((BQ,i7e)=>{var VI=require("buffer"),Rd=VI.Buffer;function n7e(t,e){for(var r in t)e[r]=t[r]}Rd.from&&Rd.alloc&&Rd.allocUnsafe&&Rd.allocUnsafeSlow?i7e.exports=VI:(n7e(VI,BQ),BQ.Buffer=fy);function fy(t,e,r){return Rd(t,e,r)}fy.prototype=Object.create(Rd.prototype);n7e(Rd,fy);fy.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Rd(t,e,r)};fy.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Rd(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};fy.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Rd(t)};fy.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return VI.SlowBuffer(t)}});var jQ=m(o7e=>{"use strict";var LQ=Pl().Buffer,s7e=LQ.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function w7t(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function A7t(t){var e=w7t(t);if(typeof e!="string"&&(LQ.isEncoding===s7e||!s7e(t)))throw new Error("Unknown encoding: "+t);return e||t}o7e.StringDecoder=NS;function NS(t){this.encoding=A7t(t);var e;switch(this.encoding){case"utf16le":this.text=R7t,this.end=D7t,e=4;break;case"utf8":this.fillLast=O7t,e=4;break;case"base64":this.text=k7t,this.end=M7t,e=3;break;default:this.write=P7t,this.end=N7t;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=LQ.allocUnsafe(e)}NS.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};NS.prototype.end=I7t;NS.prototype.text=x7t;NS.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function qQ(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function C7t(t,e,r){var n=e.length-1;if(n<r)return 0;var i=qQ(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=qQ(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=qQ(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function T7t(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function O7t(t){var e=this.lastTotal-this.lastNeed,r=T7t(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function x7t(t,e){var r=C7t(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function I7t(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function R7t(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function D7t(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function k7t(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function M7t(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function P7t(t){return t.toString(this.encoding)}function N7t(t){return t&&t.length?this.write(t):""}});var GI=m((P4r,c7e)=>{"use strict";var a7e=bh().codes.ERR_STREAM_PREMATURE_CLOSE;function F7t(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function B7t(){}function q7t(t){return t.setHeader&&typeof t.abort=="function"}function u7e(t,e,r){if(typeof e=="function")return u7e(t,null,e);e||(e={}),r=F7t(r||B7t);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(h){r.call(t,h)},d=function(){var h;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(h=new a7e),r.call(t,h);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(h=new a7e),r.call(t,h)},p=function(){t.req.on("finish",a)};return q7t(t)?(t.on("complete",a),t.on("abort",d),t.req?p():t.on("request",p)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",p),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",d)}}c7e.exports=u7e});var d7e=m((N4r,l7e)=>{"use strict";var HI;function _h(t,e,r){return e=L7t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L7t(t){var e=j7t(t,"string");return typeof e=="symbol"?e:String(e)}function j7t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $7t=GI(),vh=Symbol("lastResolve"),hy=Symbol("lastReject"),FS=Symbol("error"),zI=Symbol("ended"),my=Symbol("lastPromise"),$Q=Symbol("handlePromise"),yy=Symbol("stream");function Sh(t,e){return{value:t,done:e}}function K7t(t){var e=t[vh];if(e!==null){var r=t[yy].read();r!==null&&(t[my]=null,t[vh]=null,t[hy]=null,e(Sh(r,!1)))}}function U7t(t){process.nextTick(K7t,t)}function V7t(t,e){return function(r,n){t.then(function(){if(e[zI]){r(Sh(void 0,!0));return}e[$Q](r,n)},n)}}var G7t=Object.getPrototypeOf(function(){}),H7t=Object.setPrototypeOf((HI={get stream(){return this[yy]},next:function(){var e=this,r=this[FS];if(r!==null)return Promise.reject(r);if(this[zI])return Promise.resolve(Sh(void 0,!0));if(this[yy].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[FS]?a(e[FS]):o(Sh(void 0,!0))})});var n=this[my],i;if(n)i=new Promise(V7t(n,this));else{var s=this[yy].read();if(s!==null)return Promise.resolve(Sh(s,!1));i=new Promise(this[$Q])}return this[my]=i,i}},_h(HI,Symbol.asyncIterator,function(){return this}),_h(HI,"return",function(){var e=this;return new Promise(function(r,n){e[yy].destroy(null,function(i){if(i){n(i);return}r(Sh(void 0,!0))})})}),HI),G7t),z7t=function(e){var r,n=Object.create(H7t,(r={},_h(r,yy,{value:e,writable:!0}),_h(r,vh,{value:null,writable:!0}),_h(r,hy,{value:null,writable:!0}),_h(r,FS,{value:null,writable:!0}),_h(r,zI,{value:e._readableState.endEmitted,writable:!0}),_h(r,$Q,{value:function(s,o){var a=n[yy].read();a?(n[my]=null,n[vh]=null,n[hy]=null,s(Sh(a,!1))):(n[vh]=s,n[hy]=o)},writable:!0}),r));return n[my]=null,$7t(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[hy];s!==null&&(n[my]=null,n[vh]=null,n[hy]=null,s(i)),n[FS]=i;return}var o=n[vh];o!==null&&(n[my]=null,n[vh]=null,n[hy]=null,o(Sh(void 0,!0))),n[zI]=!0}),e.on("readable",U7t.bind(null,n)),n};l7e.exports=z7t});var m7e=m((F4r,h7e)=>{"use strict";function p7e(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function W7t(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){p7e(s,n,i,o,a,"next",u)}function a(u){p7e(s,n,i,o,a,"throw",u)}o(void 0)})}}function f7e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J7t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f7e(Object(r),!0).forEach(function(n){Y7t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f7e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y7t(t,e,r){return e=Q7t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q7t(t){var e=X7t(t,"string");return typeof e=="symbol"?e:String(e)}function X7t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z7t=bh().codes.ERR_INVALID_ARG_TYPE;function eTt(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Z7t("iterable",["Iterable"],e);var i=new t(J7t({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=W7t(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?o():s=!1}catch(d){i.destroy(d)}}),a.apply(this,arguments)}return i}h7e.exports=eTt});var QQ=m((q4r,C7e)=>{"use strict";C7e.exports=Ir;var JE;Ir.ReadableState=b7e;var B4r=require("events").EventEmitter,E7e=function(e,r){return e.listeners(r).length},qS=IQ(),WI=require("buffer").Buffer,tTt=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function rTt(t){return WI.from(t)}function nTt(t){return WI.isBuffer(t)||t instanceof tTt}var KQ=require("util"),er;KQ&&KQ.debuglog?er=KQ.debuglog("stream"):er=function(){};var iTt=r7e(),JQ=DQ(),sTt=kQ(),oTt=sTt.getHighWaterMark,JI=bh().codes,aTt=JI.ERR_INVALID_ARG_TYPE,uTt=JI.ERR_STREAM_PUSH_AFTER_EOF,cTt=JI.ERR_METHOD_NOT_IMPLEMENTED,lTt=JI.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,YE,UQ,VQ;py()(Ir,qS);var BS=JQ.errorOrDestroy,GQ=["error","close","destroy","pause","resume"];function dTt(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function b7e(t,e,r){JE=JE||gy(),t=t||{},typeof r!="boolean"&&(r=e instanceof JE),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=oTt(this,t,"readableHighWaterMark",r),this.buffer=new iTt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(YE||(YE=jQ().StringDecoder),this.decoder=new YE(t.encoding),this.encoding=t.encoding)}function Ir(t){if(JE=JE||gy(),!(this instanceof Ir))return new Ir(t);var e=this instanceof JE;this._readableState=new b7e(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),qS.call(this)}Object.defineProperty(Ir.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Ir.prototype.destroy=JQ.destroy;Ir.prototype._undestroy=JQ.undestroy;Ir.prototype._destroy=function(t,e){e(t)};Ir.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=WI.from(t,e),e=""),n=!0),_7e(this,t,e,!1,n)};Ir.prototype.unshift=function(t){return _7e(this,t,null,!0,!1)};function _7e(t,e,r,n,i){er("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,hTt(t,s);else{var o;if(i||(o=pTt(s,e)),o)BS(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==WI.prototype&&(e=rTt(e)),n)s.endEmitted?BS(t,new lTt):HQ(t,s,e,!0);else if(s.ended)BS(t,new uTt);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?HQ(t,s,e,!1):WQ(t,s)):HQ(t,s,e,!1)}else n||(s.reading=!1,WQ(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function HQ(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&YI(t)),WQ(t,e)}function pTt(t,e){var r;return!nTt(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new aTt("chunk",["string","Buffer","Uint8Array"],e)),r}Ir.prototype.isPaused=function(){return this._readableState.flowing===!1};Ir.prototype.setEncoding=function(t){YE||(YE=jQ().StringDecoder);var e=new YE(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var y7e=1073741824;function fTt(t){return t>=y7e?t=y7e:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function g7e(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=fTt(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ir.prototype.read=function(t){er("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return er("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?zQ(this):YI(this),null;if(t=g7e(t,e),t===0&&e.ended)return e.length===0&&zQ(this),null;var n=e.needReadable;er("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,er("length less than watermark",n)),e.ended||e.reading?(n=!1,er("reading or ended",n)):n&&(er("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=g7e(r,e)));var i;return t>0?i=w7e(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&zQ(this)),i!==null&&this.emit("data",i),i};function hTt(t,e){if(er("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?YI(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,v7e(t)))}}function YI(t){var e=t._readableState;er("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(er("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(v7e,t))}function v7e(t){var e=t._readableState;er("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,YQ(t)}function WQ(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(mTt,t,e))}function mTt(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(er("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ir.prototype._read=function(t){BS(this,new cTt("_read()"))};Ir.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,er("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:g;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,S){er("onunpipe"),_===r&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,l())}function a(){er("onend"),t.end()}var u=yTt(r);t.on("drain",u);var c=!1;function l(){er("cleanup"),t.removeListener("close",f),t.removeListener("finish",h),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",d),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",d);function d(_){er("ondata");var S=t.write(_);er("dest.write",S),S===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&A7e(n.pipes,t)!==-1)&&!c&&(er("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(_){er("onerror",_),g(),t.removeListener("error",p),E7e(t,"error")===0&&BS(t,_)}dTt(t,"error",p);function f(){t.removeListener("finish",h),g()}t.once("close",f);function h(){er("onfinish"),t.removeListener("close",f),g()}t.once("finish",h);function g(){er("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(er("pipe resume"),r.resume()),t};function yTt(t){return function(){var r=t._readableState;er("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&E7e(t,"data")&&(r.flowing=!0,YQ(t))}}Ir.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=A7e(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Ir.prototype.on=function(t,e){var r=qS.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,er("on readable",n.length,n.reading),n.length?YI(this):n.reading||process.nextTick(gTt,this)),r};Ir.prototype.addListener=Ir.prototype.on;Ir.prototype.removeListener=function(t,e){var r=qS.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(S7e,this),r};Ir.prototype.removeAllListeners=function(t){var e=qS.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(S7e,this),e};function S7e(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function gTt(t){er("readable nexttick read 0"),t.read(0)}Ir.prototype.resume=function(){var t=this._readableState;return t.flowing||(er("resume"),t.flowing=!t.readableListening,ETt(this,t)),t.paused=!1,this};function ETt(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(bTt,t,e))}function bTt(t,e){er("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),YQ(t),e.flowing&&!e.reading&&t.read(0)}Ir.prototype.pause=function(){return er("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(er("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function YQ(t){var e=t._readableState;for(er("flow",e.flowing);e.flowing&&t.read()!==null;);}Ir.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(er("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(er("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(a){return function(){return t[a].apply(t,arguments)}})(i));for(var s=0;s<GQ.length;s++)t.on(GQ[s],this.emit.bind(this,GQ[s]));return this._read=function(o){er("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Ir.prototype[Symbol.asyncIterator]=function(){return UQ===void 0&&(UQ=d7e()),UQ(this)});Object.defineProperty(Ir.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Ir.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ir.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Ir._fromList=w7e;Object.defineProperty(Ir.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function w7e(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function zQ(t){var e=t._readableState;er("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(_Tt,e,t))}function _Tt(t,e){if(er("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Ir.from=function(t,e){return VQ===void 0&&(VQ=m7e()),VQ(Ir,t,e)});function A7e(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var gy=m((L4r,O7e)=>{"use strict";var vTt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};O7e.exports=Dd;var T7e=QQ(),ZQ=ZI();py()(Dd,T7e);for(XQ=vTt(ZQ.prototype),QI=0;QI<XQ.length;QI++)XI=XQ[QI],Dd.prototype[XI]||(Dd.prototype[XI]=ZQ.prototype[XI]);var XQ,XI,QI;function Dd(t){if(!(this instanceof Dd))return new Dd(t);T7e.call(this,t),ZQ.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",STt)))}Object.defineProperty(Dd.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Dd.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Dd.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function STt(){this._writableState.ended||process.nextTick(wTt,this)}function wTt(t){t.end()}Object.defineProperty(Dd.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var ZI=m((j4r,M7e)=>{"use strict";M7e.exports=ci;function I7e(t){var e=this;this.next=null,this.entry=null,this.finish=function(){YTt(e,t)}}var QE;ci.WritableState=jS;var ATt={deprecate:KCe()},R7e=IQ(),tR=require("buffer").Buffer,CTt=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function TTt(t){return tR.from(t)}function OTt(t){return tR.isBuffer(t)||t instanceof CTt}var tX=DQ(),xTt=kQ(),ITt=xTt.getHighWaterMark,wh=bh().codes,RTt=wh.ERR_INVALID_ARG_TYPE,DTt=wh.ERR_METHOD_NOT_IMPLEMENTED,kTt=wh.ERR_MULTIPLE_CALLBACK,MTt=wh.ERR_STREAM_CANNOT_PIPE,PTt=wh.ERR_STREAM_DESTROYED,NTt=wh.ERR_STREAM_NULL_VALUES,FTt=wh.ERR_STREAM_WRITE_AFTER_END,BTt=wh.ERR_UNKNOWN_ENCODING,XE=tX.errorOrDestroy;py()(ci,R7e);function qTt(){}function jS(t,e,r){QE=QE||gy(),t=t||{},typeof r!="boolean"&&(r=e instanceof QE),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=ITt(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){GTt(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new I7e(this)}jS.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(jS.prototype,"buffer",{get:ATt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var eR;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(eR=Function.prototype[Symbol.hasInstance],Object.defineProperty(ci,Symbol.hasInstance,{value:function(e){return eR.call(this,e)?!0:this!==ci?!1:e&&e._writableState instanceof jS}})):eR=function(e){return e instanceof this};function ci(t){QE=QE||gy();var e=this instanceof QE;if(!e&&!eR.call(ci,this))return new ci(t);this._writableState=new jS(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),R7e.call(this)}ci.prototype.pipe=function(){XE(this,new MTt)};function LTt(t,e){var r=new FTt;XE(t,r),process.nextTick(e,r)}function jTt(t,e,r,n){var i;return r===null?i=new NTt:typeof r!="string"&&!e.objectMode&&(i=new RTt("chunk",["string","Buffer"],r)),i?(XE(t,i),process.nextTick(n,i),!1):!0}ci.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&OTt(t);return s&&!tR.isBuffer(t)&&(t=TTt(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=qTt),n.ending?LTt(this,r):(s||jTt(this,n,t,r))&&(n.pendingcb++,i=KTt(this,n,s,t,e,r)),i};ci.prototype.cork=function(){this._writableState.corked++};ci.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&D7e(this,t))};ci.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new BTt(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ci.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $Tt(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=tR.from(e,r)),e}Object.defineProperty(ci.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function KTt(t,e,r,n,i,s){if(!r){var o=$Tt(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else eX(t,e,!1,a,n,i,s);return u}function eX(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new PTt("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function UTt(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(LS,t,e),t._writableState.errorEmitted=!0,XE(t,n)):(i(n),t._writableState.errorEmitted=!0,XE(t,n),LS(t,e))}function VTt(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function GTt(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new kTt;if(VTt(r),e)UTt(t,r,n,e,i);else{var s=k7e(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&D7e(t,r),n?process.nextTick(x7e,t,r,s,i):x7e(t,r,s,i)}}function x7e(t,e,r,n){r||HTt(t,e),e.pendingcb--,n(),LS(t,e)}function HTt(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function D7e(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,eX(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new I7e(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,d=e.objectMode?1:u.length;if(eX(t,e,!1,d,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ci.prototype._write=function(t,e,r){r(new DTt("_write()"))};ci.prototype._writev=null;ci.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||JTt(this,n,r),this};Object.defineProperty(ci.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function k7e(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function zTt(t,e){t._final(function(r){e.pendingcb--,r&&XE(t,r),e.prefinished=!0,t.emit("prefinish"),LS(t,e)})}function WTt(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(zTt,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function LS(t,e){var r=k7e(e);if(r&&(WTt(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function JTt(t,e,r){e.ending=!0,LS(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function YTt(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ci.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});ci.prototype.destroy=tX.destroy;ci.prototype._undestroy=tX.undestroy;ci.prototype._destroy=function(t,e){e(t)}});var rX=m(($4r,F7e)=>{"use strict";var QTt=require("util"),P7e=ZI(),{LEVEL:N7e}=Fi(),$S=F7e.exports=function(e={}){P7e.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};QTt.inherits($S,P7e);$S.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[N7e]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};$S.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};$S.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[N7e]])&&(this.handleExceptions||r.exception!==!0))};$S.prototype._nop=function(){}});var iX=m((K4r,q7e)=>{"use strict";var XTt=require("util"),{LEVEL:nX}=Fi(),B7e=rX(),KS=q7e.exports=function(e={}){if(B7e.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};XTt.inherits(KS,B7e);KS.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[nX]])&&this.transport.log(e[nX],e.message,e,this._nop),n(null)};KS.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[nX],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};KS.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};KS.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Ey=m((U4r,sX)=>{"use strict";sX.exports=rX();sX.exports.LegacyTransportStream=iX()});var $7e=m((G4r,j7e)=>{"use strict";var ZTt=require("os"),{LEVEL:L7e,MESSAGE:ZE}=Fi(),eOt=Ey();j7e.exports=class extends eOt{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:ZTt.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[L7e]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[ZE]}${this.eol}`):this._consoleError(e[ZE]),r&&r();return}else if(this.consoleWarnLevels[e[L7e]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[ZE]}${this.eol}`):this._consoleWarn(e[ZE]),r&&r();return}console._stdout&&!this.forceConsole?console._stdout.write(`${e[ZE]}${this.eol}`):this._consoleLog(e[ZE]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var nR=m((rR,K7e)=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0});rR.default=tOt;function tOt(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}K7e.exports=rR.default});var V7e=m((iR,U7e)=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0});iR.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};U7e.exports=iR.default});var z7e=m(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.fallback=G7e;Ah.wrap=H7e;var rOt=Ah.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,nOt=Ah.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,iOt=Ah.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function G7e(t){setTimeout(t,0)}function H7e(t){return(e,...r)=>t(()=>e(...r))}var US;rOt?US=queueMicrotask:nOt?US=setImmediate:iOt?US=process.nextTick:US=G7e;Ah.default=H7e(US)});var X7e=m((sR,Q7e)=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0});sR.default=lOt;var sOt=V7e(),oOt=Y7e(sOt),aOt=z7e(),uOt=Y7e(aOt),cOt=by();function Y7e(t){return t&&t.__esModule?t:{default:t}}function lOt(t){return(0,cOt.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return W7e(n,r)}:(0,oOt.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return W7e(n,r);r(null,n)})}function W7e(t,e){return t.then(r=>{J7e(e,null,r)},r=>{J7e(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function J7e(t,e,r){try{t(e,r)}catch(n){(0,uOt.default)(i=>{throw i},n)}}Q7e.exports=sR.default});var by=m(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.isAsyncIterable=cf.isAsyncGenerator=cf.isAsync=void 0;var dOt=X7e(),pOt=fOt(dOt);function fOt(t){return t&&t.__esModule?t:{default:t}}function Z7e(t){return t[Symbol.toStringTag]==="AsyncFunction"}function hOt(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function mOt(t){return typeof t[Symbol.asyncIterator]=="function"}function yOt(t){if(typeof t!="function")throw new Error("expected a function");return Z7e(t)?(0,pOt.default)(t):t}cf.default=yOt;cf.isAsync=Z7e;cf.isAsyncGenerator=hOt;cf.isAsyncIterable=mOt});var eb=m((oR,eTe)=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});oR.default=gOt;function gOt(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},t.apply(this,n)})}return r}eTe.exports=oR.default});var rTe=m((aR,tTe)=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});var EOt=nR(),bOt=oX(EOt),_Ot=by(),vOt=oX(_Ot),SOt=eb(),wOt=oX(SOt);function oX(t){return t&&t.__esModule?t:{default:t}}aR.default=(0,wOt.default)((t,e,r)=>{var n=(0,bOt.default)(e)?[]:{};t(e,(i,s,o)=>{(0,vOt.default)(i)((a,...u)=>{u.length<2&&([u]=u),n[s]=u,o(a)})},i=>r(i,n))},3);tTe.exports=aR.default});var aX=m((uR,nTe)=>{"use strict";Object.defineProperty(uR,"__esModule",{value:!0});uR.default=AOt;function AOt(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}nTe.exports=uR.default});var sTe=m((cR,iTe)=>{"use strict";Object.defineProperty(cR,"__esModule",{value:!0});cR.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};iTe.exports=cR.default});var uTe=m((lR,aTe)=>{"use strict";Object.defineProperty(lR,"__esModule",{value:!0});lR.default=kOt;var COt=nR(),TOt=oTe(COt),OOt=sTe(),xOt=oTe(OOt);function oTe(t){return t&&t.__esModule?t:{default:t}}function IOt(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function ROt(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function DOt(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function kOt(t){if((0,TOt.default)(t))return IOt(t);var e=(0,xOt.default)(t);return e?ROt(e):DOt(t)}aTe.exports=lR.default});var uX=m((dR,cTe)=>{"use strict";Object.defineProperty(dR,"__esModule",{value:!0});dR.default=MOt;function MOt(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}cTe.exports=dR.default});var fR=m((pR,lTe)=>{"use strict";Object.defineProperty(pR,"__esModule",{value:!0});var POt={};pR.default=POt;lTe.exports=pR.default});var pTe=m((hR,dTe)=>{"use strict";Object.defineProperty(hR,"__esModule",{value:!0});hR.default=qOt;var NOt=fR(),FOt=BOt(NOt);function BOt(t){return t&&t.__esModule?t:{default:t}}function qOt(t,e,r,n){let i=!1,s=!1,o=!1,a=0,u=0;function c(){a>=e||o||i||(o=!0,t.next().then(({value:p,done:f})=>{if(!(s||i)){if(o=!1,f){i=!0,a<=0&&n(null);return}a++,r(p,u,l),u++,c()}}).catch(d))}function l(p,f){if(a-=1,!s){if(p)return d(p);if(p===!1){i=!0,s=!0;return}if(f===FOt.default||i&&a<=0)return i=!0,n(null);c()}}function d(p){s||(o=!1,i=!0,n(p))}c()}dTe.exports=hR.default});var yTe=m((mR,mTe)=>{"use strict";Object.defineProperty(mR,"__esModule",{value:!0});var LOt=aX(),jOt=VS(LOt),$Ot=uTe(),KOt=VS($Ot),UOt=uX(),VOt=VS(UOt),fTe=by(),GOt=pTe(),hTe=VS(GOt),HOt=fR(),zOt=VS(HOt);function VS(t){return t&&t.__esModule?t:{default:t}}mR.default=t=>(e,r,n)=>{if(n=(0,jOt.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,fTe.isAsyncGenerator)(e))return(0,hTe.default)(e,t,r,n);if((0,fTe.isAsyncIterable)(e))return(0,hTe.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,KOt.default)(e),s=!1,o=!1,a=0,u=!1;function c(d,p){if(!o)if(a-=1,d)s=!0,n(d);else if(d===!1)s=!0,o=!0;else{if(p===zOt.default||s&&a<=0)return s=!0,n(null);u||l()}}function l(){for(u=!0;a<t&&!s;){var d=i();if(d===null){s=!0,a<=0&&n(null);return}a+=1,r(d.value,d.key,(0,VOt.default)(c))}u=!1}l()};mTe.exports=mR.default});var lX=m((yR,gTe)=>{"use strict";Object.defineProperty(yR,"__esModule",{value:!0});var WOt=yTe(),JOt=cX(WOt),YOt=by(),QOt=cX(YOt),XOt=eb(),ZOt=cX(XOt);function cX(t){return t&&t.__esModule?t:{default:t}}function ext(t,e,r,n){return(0,JOt.default)(e)(t,(0,QOt.default)(r),n)}yR.default=(0,ZOt.default)(ext,4);gTe.exports=yR.default});var _Te=m((gR,bTe)=>{"use strict";Object.defineProperty(gR,"__esModule",{value:!0});var txt=lX(),rxt=ETe(txt),nxt=eb(),ixt=ETe(nxt);function ETe(t){return t&&t.__esModule?t:{default:t}}function sxt(t,e,r){return(0,rxt.default)(t,1,e,r)}gR.default=(0,ixt.default)(sxt,3);bTe.exports=gR.default});var wTe=m((ER,STe)=>{"use strict";Object.defineProperty(ER,"__esModule",{value:!0});ER.default=lxt;var oxt=rTe(),axt=vTe(oxt),uxt=_Te(),cxt=vTe(uxt);function vTe(t){return t&&t.__esModule?t:{default:t}}function lxt(t,e){return(0,axt.default)(cxt.default,t,e)}STe.exports=ER.default});var dX=m((W4r,CTe)=>{"use strict";CTe.exports=lf;var bR=bh().codes,dxt=bR.ERR_METHOD_NOT_IMPLEMENTED,pxt=bR.ERR_MULTIPLE_CALLBACK,fxt=bR.ERR_TRANSFORM_ALREADY_TRANSFORMING,hxt=bR.ERR_TRANSFORM_WITH_LENGTH_0,_R=gy();py()(lf,_R);function mxt(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new pxt);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function lf(t){if(!(this instanceof lf))return new lf(t);_R.call(this,t),this._transformState={afterTransform:mxt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",yxt)}function yxt(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){ATe(t,e,r)}):ATe(this,null,null)}lf.prototype.push=function(t,e){return this._transformState.needTransform=!1,_R.prototype.push.call(this,t,e)};lf.prototype._transform=function(t,e,r){r(new dxt("_transform()"))};lf.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};lf.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};lf.prototype._destroy=function(t,e){_R.prototype._destroy.call(this,t,function(r){e(r)})};function ATe(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new hxt;if(t._transformState.transforming)throw new fxt;return t.push(null)}});var xTe=m((J4r,OTe)=>{"use strict";OTe.exports=GS;var TTe=dX();py()(GS,TTe);function GS(t){if(!(this instanceof GS))return new GS(t);TTe.call(this,t)}GS.prototype._transform=function(t,e,r){r(null,t)}});var MTe=m((Y4r,kTe)=>{"use strict";var pX;function gxt(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var DTe=bh().codes,Ext=DTe.ERR_MISSING_ARGS,bxt=DTe.ERR_STREAM_DESTROYED;function ITe(t){if(t)throw t}function _xt(t){return t.setHeader&&typeof t.abort=="function"}function vxt(t,e,r,n){n=gxt(n);var i=!1;t.on("close",function(){i=!0}),pX===void 0&&(pX=GI()),pX(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,_xt(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new bxt("pipe"))}}}function RTe(t){t()}function Sxt(t,e){return t.pipe(e)}function wxt(t){return!t.length||typeof t[t.length-1]!="function"?ITe:t.pop()}function Axt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=wxt(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Ext("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return vxt(o,u,c,function(l){i||(i=l),l&&s.forEach(RTe),!u&&(s.forEach(RTe),n(i))})});return e.reduce(Sxt)}kTe.exports=Axt});var Ch=m((mc,zS)=>{var HS=require("stream");process.env.READABLE_STREAM==="disable"&&HS?(zS.exports=HS.Readable,Object.assign(zS.exports,HS),zS.exports.Stream=HS):(mc=zS.exports=QQ(),mc.Stream=HS||mc,mc.Readable=mc,mc.Writable=ZI(),mc.Duplex=gy(),mc.Transform=dX(),mc.PassThrough=xTe(),mc.finished=GI(),mc.pipeline=MTe())});var bX=m((Q4r,NTe)=>{var tb=[],WS=[],fX=function(){};function mX(t){return~tb.indexOf(t)?!1:(tb.push(t),!0)}function yX(t){fX=t}function Cxt(t){for(var e=[],r=0;r<tb.length;r++){if(tb[r].async){e.push(tb[r]);continue}if(tb[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function gX(t){return~WS.indexOf(t)?!1:(WS.push(t),!0)}function hX(){fX.apply(fX,arguments)}function PTe(t){for(var e=0;e<WS.length;e++)t=WS[e].apply(WS[e],arguments);return t}function EX(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function Txt(t){return t.enabled=!1,t.modify=gX,t.set=yX,t.use=mX,EX(function(){return!1},t)}function Oxt(t){function e(){var r=Array.prototype.slice.call(arguments,0);return hX.call(hX,t,PTe(r,t)),!0}return t.enabled=!0,t.modify=gX,t.set=yX,t.use=mX,EX(e,t)}NTe.exports=function(e){return e.introduce=EX,e.enabled=Cxt,e.process=PTe,e.modify=gX,e.write=hX,e.nope=Txt,e.yep=Oxt,e.set=yX,e.use=mX,e}});var BTe=m((X4r,FTe)=>{var xxt=bX(),Ixt=xxt(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});FTe.exports=Ixt});var UTe=m((Z4r,KTe)=>{"use strict";var kd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},LTe=Object.create(null);for(let t in kd)Object.hasOwn(kd,t)&&(LTe[kd[t]]=t);var Qi={to:{},get:{}};Qi.get=function(t){let e=t.slice(0,3).toLowerCase(),r,n;switch(e){case"hsl":{r=Qi.get.hsl(t),n="hsl";break}case"hwb":{r=Qi.get.hwb(t),n="hwb";break}default:{r=Qi.get.rgb(t),n="rgb";break}}return r?{model:n,value:r}:null};Qi.get.rgb=function(t){if(!t)return null;let e=/^#([a-f\d]{3,4})$/i,r=/^#([a-f\d]{6})([a-f\d]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){let l=u*2;o[u]=Number.parseInt(a.slice(l,l+2),16)}c&&(o[3]=Number.parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)o[u]=Number.parseInt(a[u]+a[u],16);c&&(o[3]=Number.parseInt(c+c,16)/255)}else if(a=t.match(n)){for(u=0;u<3;u++)o[u]=Number.parseInt(a[u+1],10);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=t.match(i)){for(u=0;u<3;u++)o[u]=Math.round(Number.parseFloat(a[u+1])*2.55);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(kd,a[1])?(o=kd[a[1]],o[3]=1,o):null:null;for(u=0;u<3;u++)o[u]=Th(o[u],0,255);return o[3]=Th(o[3],0,1),o};Qi.get.hsl=function(t){if(!t)return null;let e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){let n=Number.parseFloat(r[4]),i=(Number.parseFloat(r[1])%360+360)%360,s=Th(Number.parseFloat(r[2]),0,100),o=Th(Number.parseFloat(r[3]),0,100),a=Th(Number.isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};Qi.get.hwb=function(t){if(!t)return null;let e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){let n=Number.parseFloat(r[4]),i=(Number.parseFloat(r[1])%360+360)%360,s=Th(Number.parseFloat(r[2]),0,100),o=Th(Number.parseFloat(r[3]),0,100),a=Th(Number.isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};Qi.to.hex=function(...t){return"#"+vR(t[0])+vR(t[1])+vR(t[2])+(t[3]<1?vR(Math.round(t[3]*255)):"")};Qi.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Qi.to.rgb.percent=function(...t){let e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};Qi.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Qi.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Qi.to.keyword=function(...t){return LTe[t.slice(0,3)]};function Th(t,e,r){return Math.min(Math.max(e,t),r)}function vR(t){let e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var jTe={};for(let t of Object.keys(kd))jTe[kd[t]]=t;var Ke={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},df=(6/29)**3;function rb(t){let e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function nb(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(let t of Object.keys(Ke)){if(!("channels"in Ke[t]))throw new Error("missing channels property: "+t);if(!("labels"in Ke[t]))throw new Error("missing channel labels property: "+t);if(Ke[t].labels.length!==Ke[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=Ke[t];delete Ke[t].channels,delete Ke[t].labels,Object.defineProperty(Ke[t],"channels",{value:e}),Object.defineProperty(Ke[t],"labels",{value:r})}Ke.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,u;switch(s){case i:{a=0;break}case e:{a=(r-n)/o;break}case r:{a=2+(n-e)/o;break}case n:{a=4+(e-r)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+s)/2;return s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a,u*100,c*100]};Ke.rgb.hsv=function(t){let e,r,n,i,s,o=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(o,a,u),l=c-Math.min(o,a,u),d=function(p){return(c-p)/6/l+1/2};if(l===0)i=0,s=0;else{switch(s=l/c,e=d(o),r=d(a),n=d(u),c){case o:{i=n-r;break}case a:{i=1/3+e-n;break}case u:{i=2/3+r-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,c*100]};Ke.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=Ke.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};Ke.rgb.oklab=function(t){let e=nb(t[0]/255),r=nb(t[1]/255),n=nb(t[2]/255),i=Math.cbrt(.4122214708*e+.5363325363*r+.0514459929*n),s=Math.cbrt(.2119034982*e+.6806995451*r+.1073969566*n),o=Math.cbrt(.0883024619*e+.2817188376*r+.6299787005*n),a=.2104542553*i+.793617785*s-.0040720468*o,u=1.9779984951*i-2.428592205*s+.4505937099*o,c=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,u*100,c*100]};Ke.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),s=(1-e-i)/(1-i)||0,o=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function Rxt(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}Ke.rgb.keyword=function(t){let e=jTe[t];if(e)return e;let r=Number.POSITIVE_INFINITY,n;for(let i of Object.keys(kd)){let s=kd[i],o=Rxt(t,s);o<r&&(r=o,n=i)}return n};Ke.keyword.rgb=function(t){return kd[t]};Ke.rgb.xyz=function(t){let e=nb(t[0]/255),r=nb(t[1]/255),n=nb(t[2]/255),i=e*.4124564+r*.3575761+n*.1804375,s=e*.2126729+r*.7151522+n*.072175,o=e*.0193339+r*.119192+n*.9503041;return[i*100,s*100,o*100]};Ke.rgb.lab=function(t){let e=Ke.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>df?r**(1/3):7.787*r+16/116,n=n>df?n**(1/3):7.787*n+16/116,i=i>df?i**(1/3):7.787*i+16/116;let s=116*n-16,o=500*(r-n),a=200*(n-i);return[s,o,a]};Ke.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s;if(r===0)return s=n*255,[s,s,s];let o=n<.5?n*(1+r):n+r-n*r,a=2*n-o,u=[0,0,0];for(let c=0;c<3;c++)i=e+1/3*-(c-1),i<0&&i++,i>1&&i--,6*i<1?s=a+(o-a)*6*i:2*i<1?s=o:3*i<2?s=a+(o-a)*(2/3-i)*6:s=a,u[c]=s*255;return u};Ke.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;let o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r);return[e,a*100,o*100]};Ke.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),a=255*n*(1-r*s),u=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}};Ke.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o;o=(2-r)*n;let a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};Ke.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s;i>1&&(r/=i,n/=i);let o=Math.floor(6*e),a=1-n;s=6*e-o,(o&1)!==0&&(s=1-s);let u=r+s*(a-r),c,l,d;switch(o){default:case 6:case 0:{c=a,l=u,d=r;break}case 1:{c=u,l=a,d=r;break}case 2:{c=r,l=a,d=u;break}case 3:{c=r,l=u,d=a;break}case 4:{c=u,l=r,d=a;break}case 5:{c=a,l=r,d=u;break}}return[c*255,l*255,d*255]};Ke.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};Ke.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2404542+r*-1.5371385+n*-.4985314,s=e*-.969266+r*1.8760108+n*.041556,o=e*.0556434+r*-.2040259+n*1.0572252,i=rb(i),s=rb(s),o=rb(o),[i*255,s*255,o*255]};Ke.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>df?e**(1/3):7.787*e+16/116,r=r>df?r**(1/3):7.787*r+16/116,n=n>df?n**(1/3):7.787*n+16/116;let i=116*r-16,s=500*(e-r),o=200*(r-n);return[i,s,o]};Ke.xyz.oklab=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=Math.cbrt(.8189330101*e+.3618667424*r-.1288597137*n),s=Math.cbrt(.0329845436*e+.9293118715*r+.0361456387*n),o=Math.cbrt(.0482003018*e+.2643662691*r+.633851707*n),a=.2104542553*i+.793617785*s-.0040720468*o,u=1.9779984951*i-2.428592205*s+.4505937099*o,c=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,u*100,c*100]};Ke.oklab.oklch=function(t){return Ke.lab.lch(t)};Ke.oklab.xyz=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=(.999999998*e+.396337792*r+.215803758*n)**3,s=(1.000000008*e-.105561342*r-.063854175*n)**3,o=(1.000000055*e-.089484182*r-1.291485538*n)**3,a=1.227013851*i-.55779998*s+.281256149*o,u=-.040580178*i+1.11225687*s-.071676679*o,c=-.076381285*i-.421481978*s+1.58616322*o;return[a*100,u*100,c*100]};Ke.oklab.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=(e+.3963377774*r+.2158037573*n)**3,s=(e-.1055613458*r-.0638541728*n)**3,o=(e-.0894841775*r-1.291485548*n)**3,a=rb(4.0767416621*i-3.3077115913*s+.2309699292*o),u=rb(-1.2684380046*i+2.6097574011*s-.3413193965*o),c=rb(-.0041960863*i-.7034186147*s+1.707614701*o);return[a*255,u*255,c*255]};Ke.oklch.oklab=function(t){return Ke.lch.lab(t)};Ke.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;let a=s**3,u=i**3,c=o**3;return s=a>df?a:(s-16/116)/7.787,i=u>df?u:(i-16/116)/7.787,o=c>df?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};Ke.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(r*r+n*n);return[e,o,i]};Ke.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,s=r*Math.cos(i),o=r*Math.sin(i);return[e,s,o]};Ke.rgb.ansi16=function(t,e=null){let[r,n,i]=t,s=e===null?Ke.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};Ke.hsv.ansi16=function(t){return Ke.rgb.ansi16(Ke.hsv.rgb(t),t[2])};Ke.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e>>4===r>>4&&r>>4===n>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};Ke.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(Math.trunc(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};Ke.ansi256.rgb=function(t){if(t=t[0],t>=232){let s=(t-232)*10+8;return[s,s,s]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};Ke.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(r.length)+r};Ke.hex.rgb=function(t){let e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=[...r].map(a=>a+a).join(""));let n=Number.parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};Ke.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,a,u=o<1?s/(1-o):0;return o<=0?a=0:i===e?a=(r-n)/o%6:i===r?a=2+(n-e)/o:a=4+(e-r)/o,a/=6,a%=1,[a*360,o*100,u*100]};Ke.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};Ke.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};Ke.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],s=e%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=o,i[2]=0;break}case 1:{i[0]=a,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=o;break}case 3:{i[0]=0,i[1]=a,i[2]=1;break}case 4:{i[0]=o,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};Ke.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};Ke.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};Ke.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};Ke.hwb.hcg=function(t){let e=t[1]/100,n=1-t[2]/100,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};Ke.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Ke.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Ke.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Ke.gray.hsl=function(t){return[0,0,t[0]]};Ke.gray.hsv=Ke.gray.hsl;Ke.gray.hwb=function(t){return[0,100,t[0]]};Ke.gray.cmyk=function(t){return[0,0,0,t[0]]};Ke.gray.lab=function(t){return[t[0],0,0]};Ke.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(n.length)+n};Ke.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function Dxt(){let t={},e=Object.keys(Ke);for(let{length:r}=e,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function kxt(t){let e=Dxt(),r=[t];for(e[t].distance=0;r.length>0;){let n=r.pop(),i=Object.keys(Ke[n]);for(let{length:s}=i,o=0;o<s;o++){let a=i[o],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(a))}}return e}function Mxt(t,e){return function(r){return e(t(r))}}function Pxt(t,e){let r=[e[t].parent,t],n=Ke[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=Mxt(Ke[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}function Nxt(t){let e=kxt(t),r={},n=Object.keys(e);for(let{length:i}=n,s=0;s<i;s++){let o=n[s];e[o].parent!==null&&(r[o]=Pxt(o,e))}return r}var Es={},Fxt=Object.keys(Ke);function Bxt(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function qxt(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let{length:s}=i,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}for(let t of Fxt){Es[t]={},Object.defineProperty(Es[t],"channels",{value:Ke[t].channels}),Object.defineProperty(Es[t],"labels",{value:Ke[t].labels});let e=Nxt(t),r=Object.keys(e);for(let n of r){let i=e[n];Es[t][n]=qxt(i),Es[t][n].raw=Bxt(i)}}var $Te=["keyword","gray","hex"],_X={};for(let t of Object.keys(Es))_X[[...Es[t].labels].sort().join("")]=t;var vX={};function Yi(t,e){if(!(this instanceof Yi))return new Yi(t,e);if(e&&e in $Te&&(e=null),e&&!(e in Es))throw new Error("Unknown model: "+e);let r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Yi)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){let i=Qi.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=Es[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=Es[this.model].channels;let i=Array.prototype.slice.call(t,0,n);this.color=SX(i,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;let i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);let s=i.sort().join("");if(!(s in _X))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=_X[s];let{labels:o}=Es[this.model],a=[];for(r=0;r<o.length;r++)a.push(t[o[r]]);this.color=SX(a)}if(vX[this.model])for(n=Es[this.model].channels,r=0;r<n;r++){let i=vX[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Yi.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Qi.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);let r=e.valpha===1?e.color:[...e.color,this.valpha];return Qi.to[e.model](...r)},percentString(t){let e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:[...e.color,this.valpha];return Qi.to.rgb.percent(...r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let t={},{channels:e}=Es[this.model],{labels:r}=Es[this.model];for(let n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){let t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){let t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Yi([...this.color.map(jxt(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Yi([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:li("rgb",0,Ji(255)),green:li("rgb",1,Ji(255)),blue:li("rgb",2,Ji(255)),hue:li(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:li("hsl",1,Ji(100)),lightness:li("hsl",2,Ji(100)),saturationv:li("hsv",1,Ji(100)),value:li("hsv",2,Ji(100)),chroma:li("hcg",1,Ji(100)),gray:li("hcg",2,Ji(100)),white:li("hwb",1,Ji(100)),wblack:li("hwb",2,Ji(100)),cyan:li("cmyk",0,Ji(100)),magenta:li("cmyk",1,Ji(100)),yellow:li("cmyk",2,Ji(100)),black:li("cmyk",3,Ji(100)),x:li("xyz",0,Ji(95.047)),y:li("xyz",1,Ji(100)),z:li("xyz",2,Ji(108.833)),l:li("lab",0,Ji(100)),a:li("lab",1),b:li("lab",2),keyword(t){return t!==void 0?new Yi(t):Es[this.model].keyword(this.color)},hex(t){return t!==void 0?new Yi(t):Qi.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new Yi(t);let e=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),Qi.to.hex(...e)+r},rgbNumber(){let t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){let t=this.rgb().color,e=[];for(let[r,n]of t.entries()){let i=n/255;e[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){let e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level(t){let e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){let t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){let e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){let e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){let e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){let e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){let e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){let e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){let t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Yi.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){let e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);let r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,u=1-a;return Yi.rgb(a*r.red()+u*n.red(),a*r.green()+u*n.green(),a*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(let t of Object.keys(Es)){if($Te.includes(t))continue;let{channels:e}=Es[t];Yi.prototype[t]=function(...r){return this.model===t?new Yi(this):r.length>0?new Yi(r,t):new Yi([...$xt(Es[this.model][t].raw(this.color)),this.valpha],t)},Yi[t]=function(...r){let n=r[0];return typeof n=="number"&&(n=SX(r,e)),new Yi(n,t)}}function Lxt(t,e){return Number(t.toFixed(e))}function jxt(t){return function(e){return Lxt(e,t)}}function li(t,e,r){t=Array.isArray(t)?t:[t];for(let n of t)(vX[n]||=[])[e]=r;return t=t[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Ji(t){return function(e){return Math.max(0,Math.min(t,e))}}function $xt(t){return Array.isArray(t)?t:[t]}function SX(t,e){for(let r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}function Kxt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uxt=function(e){for(var r=0,n=0;r<e.length;n=e.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i},qTe=Kxt(Uxt);function Vxt(t,e){let r=t.split(e||":"),n=qTe(r[0]);if(!r.length)return n;for(let i=0,s=r.length-1;i<s;i++)n=Yi(n).mix(Yi(qTe(r[i+1]))).saturate(1).hex();return n}KTe.exports=Vxt});var GTe=m((e3r,VTe)=>{"use strict";function Nl(t,e){if(e)return new Nl(t).style(e);if(!(this instanceof Nl))return new Nl(t);this.text=t}Nl.prototype.prefix="\x1B[";Nl.prototype.suffix="m";Nl.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var r=e.substring(0,2),n=e.substring(2,4),i=e.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};Nl.prototype.rgb=function(e,r,n){var i=e/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};Nl.prototype.ansi=function(e,r,n){var i=Math.round(e),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};Nl.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};Nl.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};VTe.exports=Nl});var zTe=m((t3r,HTe)=>{var Gxt=UTe(),Hxt=GTe();HTe.exports=function(e,r){var n=r.namespace,i=r.colors!==!1?Hxt(n+":",Gxt(n)):n+":";return e[0]=i+" "+e[0],e}});var JTe=m((r3r,WTe)=>{"use strict";WTe.exports=function(e,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+r+"$").test(e))return!0}return!1}});var QTe=m((n3r,YTe)=>{var zxt=JTe();YTe.exports=function(e){return function(n){try{return zxt(n,e())}catch{}return!1}}});var ZTe=m((i3r,XTe)=>{var Wxt=QTe();XTe.exports=Wxt(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var tOe=m((s3r,eOe)=>{eOe.exports=function(t,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var nOe=m((o3r,rOe)=>{var Jxt=bX(),Yxt=require("tty").isatty(1),SR=Jxt(function t(e,r){return r=r||{},r.colors="colors"in r?r.colors:Yxt,r.namespace=e,r.prod=!1,r.dev=!0,!t.enabled(e)&&!(r.force||t.force)?t.nope(r):t.yep(r)});SR.modify(zTe());SR.use(ZTe());SR.set(tOe());rOe.exports=SR});var JS=m((a3r,wX)=>{process.env.NODE_ENV==="production"?wX.exports=BTe():wX.exports=nOe()});var sOe=m((u3r,iOe)=>{"use strict";var AX=require("fs"),{StringDecoder:Qxt}=require("string_decoder"),{Stream:Xxt}=Ch();function Zxt(){}iOe.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new Qxt("utf8"),i=new Xxt,s="",o=0,a=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},AX.open(t.file,"a+","0644",(u,c)=>{if(u){e?e(u):i.emit("error",u),i.destroy();return}(function l(){if(i.destroyed){AX.close(c,Zxt);return}return AX.read(c,r,0,r.length,o,(d,p)=>{if(d){e?e(d):i.emit("error",d),i.destroy();return}if(!p)return s&&((t.start==null||a>t.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(l,1e3);let f=n.write(r.slice(0,p));e||i.emit("data",f),f=(s+f).split(/\n+/);let h=f.length-1,g=0;for(;g<h;g++)(t.start==null||a>t.start)&&(e?e(null,f[g]):i.emit("line",f[g])),a++;return s=f[h],o+=p,l()})})()}),e?i.destroy:i}});var cOe=m((l3r,uOe)=>{"use strict";var Na=require("fs"),bs=require("path"),oOe=wTe(),eIt=require("zlib"),{MESSAGE:tIt}=Fi(),{Stream:rIt,PassThrough:aOe}=Ch(),nIt=Ey(),Fl=JS()("winston:file"),iIt=require("os"),sIt=sOe();uOe.exports=class extends nIt{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new aOe,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?bs.basename(e.filename):"winston.log",this.dirname=e.dirname||bs.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=bs.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:iIt.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[tIt]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,Fl("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),Fl("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=d(e);let n=bs.join(this.dirname,this.filename),i="",s=[],o=0,a=Na.createReadStream(n,{encoding:"utf8"});a.on("error",p=>{if(a.readable&&a.destroy(),!!r)return p.code!=="ENOENT"?r(p):r(null,s)}),a.on("data",p=>{p=(i+p).split(/\n+/);let f=p.length-1,h=0;for(;h<f;h++)(!e.start||o>=e.start)&&u(p[h]),o++;i=p[f]}),a.on("close",()=>{i&&u(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function u(p,f){try{let h=JSON.parse(p);l(h)&&c(h)}catch(h){f||a.emit("error",h)}}function c(p){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(p=e.fields.reduce((f,h)=>(f[h]=p[h],f),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(p)}function l(p){if(!p||typeof p!="object")return;let f=new Date(p.timestamp);if(!(e.from&&f<e.from||e.until&&f>e.until||e.level&&e.level!==p.level))return!0}function d(p){return p=p||{},p.rows=p.rows||p.limit||10,p.start=p.start||0,p.until=p.until||new Date,typeof p.until!="object"&&(p.until=new Date(p.until)),p.from=p.from||p.until-1440*60*1e3,typeof p.from!="object"&&(p.from=new Date(p.from)),p.order=p.order||"desc",p}}stream(e={}){let r=bs.join(this.dirname,this.filename),n=new rIt,i={file:r,start:e.start};return n.destroy=sIt(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);Fl("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),n=bs.join(this.dirname,r);Na.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return Fl("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return Fl(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=bs.join(this.dirname,this.filename);Fl("create stream start",r,this.options);let n=Na.createWriteStream(r,this.options).on("error",i=>Fl(i)).on("close",()=>Fl("close",n.path,n.bytesWritten)).on("open",()=>{Fl("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new aOe,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});return Fl("create stream ok",r),n}_incFile(e){Fl("_incFile",this.filename);let r=bs.extname(this._basename),n=bs.basename(this._basename,r),i=[];this.zippedArchive&&i.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(bs.join(this.dirname,`${n}${o}${r}`),bs.join(this.dirname,`${n}${o}${r}.gz`),s)}.bind(this)),i.push(function(s){this.tailable?this._checkMaxFilesTailable(r,n,s):(this._created+=1,this._checkMaxFilesIncrementing(r,n,s))}.bind(this)),oOe(i,e)}_getFile(){let e=bs.extname(this._basename),r=bs.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,u=bs.join(this.dirname,a);Na.unlink(u,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,u){let c=`${r}${a-1}${e}${s}`,l=bs.join(this.dirname,c);Na.exists(l,d=>{if(!d)return u(null);c=`${r}${a}${e}${s}`,Na.rename(l,bs.join(this.dirname,c),u)})}.bind(this,o));oOe(i,()=>{Na.rename(bs.join(this.dirname,`${r}${e}${s}`),bs.join(this.dirname,`${r}1${e}${s}`),n)})}_compressFile(e,r,n){Na.access(e,Na.F_OK,i=>{if(i)return n();var s=eIt.createGzip(),o=Na.createReadStream(e),a=Na.createWriteStream(r);a.on("finish",()=>{Na.unlink(e,n)}),o.pipe(s).pipe(a)})}_createLogDirIfNotExist(e){Na.existsSync(e)||Na.mkdirSync(e,{recursive:!0})}}});var dOe=m((p3r,lOe)=>{"use strict";var oIt=require("http"),aIt=require("https"),{Stream:uIt}=Ch(),cIt=Ey(),{configure:lIt}=MS();lOe.exports=class extends cIt{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(u){return r(u)}r(null,a)})}stream(e={}){let r=new uIt;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let u=a.length-1,c=0;for(;c<u;c++)try{r.emit("log",JSON.parse(a[c]))}catch(l){r.emit("error",l)}s=a[u]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?aIt:oIt).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",u=>u.on("end",()=>r(null,u)).resume());let a=lIt({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}});var fOe=m((h3r,pOe)=>{"use strict";var dIt=hC(),{MESSAGE:pIt}=Fi(),fIt=require("os"),hIt=Ey();pOe.exports=class extends hIt{constructor(e={}){if(super(e),!e.stream||!dIt(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:fIt.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[pIt]}${this.eol}`),r&&r()}}});var hOe=m(YS=>{"use strict";Object.defineProperty(YS,"Console",{configurable:!0,enumerable:!0,get(){return $7e()}});Object.defineProperty(YS,"File",{configurable:!0,enumerable:!0,get(){return cOe()}});Object.defineProperty(YS,"Http",{configurable:!0,enumerable:!0,get(){return dOe()}});Object.defineProperty(YS,"Stream",{configurable:!0,enumerable:!0,get(){return fOe()}})});var AR=m(QS=>{"use strict";var wR=OQ(),{configs:CX}=Fi();QS.cli=wR.levels(CX.cli);QS.npm=wR.levels(CX.npm);QS.syslog=wR.levels(CX.syslog);QS.addColors=wR.levels});var yOe=m((CR,mOe)=>{"use strict";Object.defineProperty(CR,"__esModule",{value:!0});var mIt=nR(),yIt=_y(mIt),gIt=fR(),EIt=_y(gIt),bIt=lX(),_It=_y(bIt),vIt=aX(),SIt=_y(vIt),wIt=uX(),AIt=_y(wIt),CIt=by(),TIt=_y(CIt),OIt=eb(),xIt=_y(OIt);function _y(t){return t&&t.__esModule?t:{default:t}}function IIt(t,e,r){r=(0,SIt.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function a(u,c){u===!1&&(o=!0),o!==!0&&(u?r(u):(++i===s||c===EIt.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,AIt.default)(a))}function RIt(t,e,r){return(0,_It.default)(t,1/0,e,r)}function DIt(t,e,r){var n=(0,yIt.default)(t)?IIt:RIt;return n(t,(0,TIt.default)(e),r)}CR.default=(0,xIt.default)(DIt,3);mOe.exports=CR.default});var EOe=m((TR,gOe)=>{"use strict";Object.defineProperty(TR,"__esModule",{value:!0});TR.default=kIt;function kIt(t){return(e,r,n)=>t(e,n)}gOe.exports=TR.default});var IR=m((xR,bOe)=>{"use strict";Object.defineProperty(xR,"__esModule",{value:!0});var MIt=yOe(),PIt=OR(MIt),NIt=EOe(),FIt=OR(NIt),BIt=by(),qIt=OR(BIt),LIt=eb(),jIt=OR(LIt);function OR(t){return t&&t.__esModule?t:{default:t}}function $It(t,e,r){return(0,PIt.default)(t,(0,FIt.default)((0,qIt.default)(e)),r)}xR.default=(0,jIt.default)($It,3);bOe.exports=xR.default});var vOe=m((g3r,_Oe)=>{"use strict";var KIt=Object.prototype.toString;_Oe.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=KIt.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var TX=m((E3r,SOe)=>{"use strict";var UIt=vOe();SOe.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=UIt(e),i}});var RR=m(ZS=>{ZS.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||ZS.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};ZS.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,u=null,c=null,l=i[5]==="native";if(i[1]){a=i[1];var d=a.lastIndexOf(".");if(a[d-1]=="."&&d--,d>0){s=a.substr(0,d),o=a.substr(d+1);var p=s.indexOf(".Module");p>0&&(a=a.substr(p+1),s=s.substr(0,p))}u=null}o&&(u=s,c=o),o==="<anonymous>"&&(c=null,a=null);var f={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:u,methodName:c,columnNumber:parseInt(i[4],10)||null,native:l};return e._createParsedCallSite(f)}}).filter(function(n){return!!n})};function XS(t){for(var e in t)this[e]=t[e]}var VIt=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],GIt=["topLevel","eval","native","constructor"];VIt.forEach(function(t){XS.prototype[t]=null,XS.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});GIt.forEach(function(t){XS.prototype[t]=!1,XS.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});ZS._createParsedCallSite=function(t){return new XS(t)}});var AOe=m((v3r,wOe)=>{"use strict";var{Writable:HIt}=Ch();wOe.exports=class extends HIt{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var xX=m((w3r,OOe)=>{"use strict";var COe=require("os"),zIt=IR(),OX=JS()("winston:exception"),WIt=TX(),TOe=RR(),JIt=AOe();OOe.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:COe.loadavg(),uptime:COe.uptime()}}getTrace(e){return(e?TOe.parse(e):TOe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new JIt(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){OX("doExit",i),OX("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);zIt(n,(a,u)=>{let c=WIt(u),l=a.transport||a;function d(p){return()=>{OX(p),c()}}l._ending=!0,l.once("finish",d("finished")),l.once("error",d("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var IOe=m((C3r,xOe)=>{"use strict";var{Writable:YIt}=Ch();xOe.exports=class extends YIt{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,n){return e.rejection?this.transport.log(e,n):(n(),!0)}}});var RX=m((O3r,kOe)=>{"use strict";var ROe=require("os"),QIt=IR(),IX=JS()("winston:rejection"),XIt=TX(),DOe=RR(),ZIt=IOe();kOe.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:ROe.loadavg(),uptime:ROe.uptime()}}getTrace(e){return(e?DOe.parse(e):DOe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new ZIt(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){IX("doExit",i),IX("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);QIt(n,(a,u)=>{let c=XIt(u),l=a.transport||a;function d(p){return()=>{IX(p),c()}}l._ending=!0,l.once("finish",d("finished")),l.once("error",d("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var POe=m((x3r,MOe)=>{"use strict";var DX=class{constructor(e){let r=DR();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};MOe.exports=DX});var DR=m((I3r,qOe)=>{"use strict";var{Stream:eRt,Transform:tRt}=Ch(),NOe=IR(),{LEVEL:Md,SPLAT:FOe}=Fi(),BOe=hC(),rRt=xX(),nRt=RX(),iRt=iX(),sRt=POe(),{warn:oRt}=xQ(),aRt=AR(),uRt=/%[scdjifoO%]/g,kR=class extends tRt{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:u,emitErrs:c,formatters:l,padLevels:d,rewriters:p,stripColors:f,exceptionHandlers:h,rejectionHandlers:g}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||SQ()(),this.defaultMeta=n||null,this.levels=i||this.levels||aRt.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new rRt(this),this.rejections=new nRt(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(_=>this.add(_))),u||c||l||d||p||f)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));h&&this.exceptions.handle(h),g&&this.rejections.handle(g)}getHighestLogLevel(){let e=ew(this.levels,this.level);return!this.transports||this.transports.length===0?e:this.transports.reduce((r,n)=>{let i=ew(this.levels,n.level);return i!==null&&i>r?i:r},e)}isLevelEnabled(e){let r=ew(this.levels,e);if(r===null)return!1;let n=ew(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=ew(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[Md]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[Md]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[Md]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(uRt))){let o=Object.assign({},this.defaultMeta,i,{[Md]:e,[FOe]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),i.cause&&(o.cause=i.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[Md]:e,[FOe]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[Md]||(e[Md]=e.level),!this.levels[e[Md]]&&this.levels[e[Md]]!==0&&console.error("[winston] Unknown logger level: %s",e[Md]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();NOe(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!BOe(e)||e.log.length>2?new iRt({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!BOe(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){oRt.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,u){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(c,l)=>{if(c)return u(c);typeof a.formatResults=="function"&&(l=a.formatResults(l,e.format)),u(null,l)})}function o(a,u){s(a,(c,l)=>{u&&(l=c||l,l&&(n[a.name]=l),u()),u=null})}NOe(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(e={}){let r=new eRt,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new sRt(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function ew(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(kR.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});qOe.exports=kR});var kX=m((R3r,LOe)=>{"use strict";var{LEVEL:cRt}=Fi(),lRt=AR(),dRt=DR(),pRt=JS()("winston:create-logger");function fRt(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}LOe.exports=function(t={}){t.levels=t.levels||lRt.npm.levels;class e extends dRt{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){if(pRt('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[cRt]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[fRt(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var $Oe=m((k3r,jOe)=>{"use strict";var hRt=kX();jOe.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=hRt(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var UOe=m(sn=>{"use strict";var KOe=OQ(),{warn:tw}=xQ();sn.version=jCe().version;sn.transports=hOe();sn.config=AR();sn.addColors=KOe.levels;sn.format=KOe.format;sn.createLogger=kX();sn.Logger=DR();sn.ExceptionHandler=xX();sn.RejectionHandler=RX();sn.Container=$Oe();sn.Transport=Ey();sn.loggers=new sn.Container;var Pd=sn.createLogger();Object.keys(sn.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>sn[t]=(...e)=>Pd[t](...e));Object.defineProperty(sn,"level",{get(){return Pd.level},set(t){Pd.level=t}});Object.defineProperty(sn,"exceptions",{get(){return Pd.exceptions}});Object.defineProperty(sn,"rejections",{get(){return Pd.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(sn,t,{get(){return Pd[t]},set(e){Pd[t]=e}})});Object.defineProperty(sn,"default",{get(){return{exceptionHandlers:Pd.exceptionHandlers,rejectionHandlers:Pd.rejectionHandlers,transports:Pd.transports}}});tw.deprecated(sn,"setLevels");tw.forFunctions(sn,"useFormat",["cli"]);tw.forProperties(sn,"useFormat",["padLevels","stripColors"]);tw.forFunctions(sn,"deprecated",["addRewriter","addFilter","clone","extend"]);tw.forProperties(sn,"deprecated",["emitErrs","levelLength"])});var rw=m(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.getUint64=yc.getInt64=yc.setInt64=yc.setUint64=yc.UINT32_MAX=void 0;yc.UINT32_MAX=4294967295;function mRt(t,e,r){let n=r/4294967296,i=r;t.setUint32(e,n),t.setUint32(e+4,i)}yc.setUint64=mRt;function yRt(t,e,r){let n=Math.floor(r/4294967296),i=r;t.setUint32(e,n),t.setUint32(e+4,i)}yc.setInt64=yRt;function gRt(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}yc.getInt64=gRt;function ERt(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}yc.getUint64=ERt});var PR=m(mo=>{"use strict";var MX,PX,NX;Object.defineProperty(mo,"__esModule",{value:!0});mo.utf8DecodeTD=mo.TEXT_DECODER_THRESHOLD=mo.utf8DecodeJs=mo.utf8EncodeTE=mo.TEXT_ENCODER_THRESHOLD=mo.utf8EncodeJs=mo.utf8Count=void 0;var VOe=rw(),MR=(typeof process>"u"||((MX=process==null?void 0:process.env)===null||MX===void 0?void 0:MX.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function bRt(t){let e=t.length,r=0,n=0;for(;n<e;){let i=t.charCodeAt(n++);if((i&4294967168)===0){r++;continue}else if((i&4294965248)===0)r+=2;else{if(i>=55296&&i<=56319&&n<e){let s=t.charCodeAt(n);(s&64512)===56320&&(++n,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?r+=3:r+=4}}return r}mo.utf8Count=bRt;function _Rt(t,e,r){let n=t.length,i=r,s=0;for(;s<n;){let o=t.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){let a=t.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}mo.utf8EncodeJs=_Rt;var nw=MR?new TextEncoder:void 0;mo.TEXT_ENCODER_THRESHOLD=MR?typeof process<"u"&&((PX=process==null?void 0:process.env)===null||PX===void 0?void 0:PX.TEXT_ENCODING)!=="force"?200:0:VOe.UINT32_MAX;function vRt(t,e,r){e.set(nw.encode(t),r)}function SRt(t,e,r){nw.encodeInto(t,e.subarray(r))}mo.utf8EncodeTE=nw?.encodeInto?SRt:vRt;var wRt=4096;function ARt(t,e,r){let n=e,i=n+r,s=[],o="";for(;n<i;){let a=t[n++];if((a&128)===0)s.push(a);else if((a&224)===192){let u=t[n++]&63;s.push((a&31)<<6|u)}else if((a&240)===224){let u=t[n++]&63,c=t[n++]&63;s.push((a&31)<<12|u<<6|c)}else if((a&248)===240){let u=t[n++]&63,c=t[n++]&63,l=t[n++]&63,d=(a&7)<<18|u<<12|c<<6|l;d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|d&1023),s.push(d)}else s.push(a);s.length>=wRt&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}mo.utf8DecodeJs=ARt;var CRt=MR?new TextDecoder:null;mo.TEXT_DECODER_THRESHOLD=MR?typeof process<"u"&&((NX=process==null?void 0:process.env)===null||NX===void 0?void 0:NX.TEXT_DECODER)!=="force"?200:0:VOe.UINT32_MAX;function TRt(t,e,r){let n=t.subarray(e,e+r);return CRt.decode(n)}mo.utf8DecodeTD=TRt});var BX=m(NR=>{"use strict";Object.defineProperty(NR,"__esModule",{value:!0});NR.ExtData=void 0;var FX=class{constructor(e,r){this.type=e,this.data=r}};NR.ExtData=FX});var BR=m(FR=>{"use strict";Object.defineProperty(FR,"__esModule",{value:!0});FR.DecodeError=void 0;var qX=class t extends Error{constructor(e){super(e);let r=Object.create(t.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};FR.DecodeError=qX});var LX=m(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.timestampExtension=Hs.decodeTimestampExtension=Hs.decodeTimestampToTimeSpec=Hs.encodeTimestampExtension=Hs.encodeDateToTimeSpec=Hs.encodeTimeSpecToTimestamp=Hs.EXT_TIMESTAMP=void 0;var ORt=BR(),GOe=rw();Hs.EXT_TIMESTAMP=-1;var xRt=4294967296-1,IRt=17179869184-1;function HOe({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=IRt)if(e===0&&t<=xRt){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|r&3),s.setUint32(4,n),i}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),(0,GOe.setInt64)(n,4,t),r}}Hs.encodeTimeSpecToTimestamp=HOe;function zOe(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}Hs.encodeDateToTimeSpec=zOe;function WOe(t){if(t instanceof Date){let e=zOe(t);return HOe(e)}else return null}Hs.encodeTimestampExtension=WOe;function JOe(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),i=(r&3)*4294967296+n,s=r>>>2;return{sec:i,nsec:s}}case 12:{let r=(0,GOe.getInt64)(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new ORt.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}Hs.decodeTimestampToTimeSpec=JOe;function YOe(t){let e=JOe(t);return new Date(e.sec*1e3+e.nsec/1e6)}Hs.decodeTimestampExtension=YOe;Hs.timestampExtension={type:Hs.EXT_TIMESTAMP,encode:WOe,decode:YOe}});var jR=m(LR=>{"use strict";Object.defineProperty(LR,"__esModule",{value:!0});LR.ExtensionCodec=void 0;var qR=BX(),RRt=LX(),iw=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(RRt.timestampExtension)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let i=1+e;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let i=this.builtInEncoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=-1-n;return new qR.ExtData(o,s)}}}for(let n=0;n<this.encoders.length;n++){let i=this.encoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=n;return new qR.ExtData(o,s)}}}return e instanceof qR.ExtData?e:null}decode(e,r,n){let i=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return i?i(e,r,n):new qR.ExtData(r,e)}};LR.ExtensionCodec=iw;iw.defaultCodec=new iw});var jX=m(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0});ib.createDataView=ib.ensureUint8Array=void 0;function QOe(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}ib.ensureUint8Array=QOe;function DRt(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=QOe(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}ib.createDataView=DRt});var KX=m(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.Encoder=Nd.DEFAULT_INITIAL_BUFFER_SIZE=Nd.DEFAULT_MAX_DEPTH=void 0;var sw=PR(),kRt=jR(),XOe=rw(),MRt=jX();Nd.DEFAULT_MAX_DEPTH=100;Nd.DEFAULT_INITIAL_BUFFER_SIZE=2048;var $X=class{constructor(e=kRt.ExtensionCodec.defaultCodec,r=void 0,n=Nd.DEFAULT_MAX_DEPTH,i=Nd.DEFAULT_INITIAL_BUFFER_SIZE,s=!1,o=!1,a=!1,u=!1){this.extensionCodec=e,this.context=r,this.maxDepth=n,this.initialBufferSize=i,this.sortKeys=s,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=u,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),i=new DataView(r);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>sw.TEXT_ENCODER_THRESHOLD){let i=(0,sw.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,sw.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=i}else{let i=(0,sw.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,sw.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=i}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=(0,MRt.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let i of e)this.doEncode(i,r+1)}countWithoutUndefined(e,r){let n=0;for(let i of r)e[i]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let i=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(let s of n){let o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,XOe.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,XOe.setInt64)(this.view,this.pos,e),this.pos+=8}};Nd.Encoder=$X});var ZOe=m($R=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});$R.encode=void 0;var PRt=KX(),NRt={};function FRt(t,e=NRt){return new PRt.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encodeSharedRef(t)}$R.encode=FRt});var exe=m(KR=>{"use strict";Object.defineProperty(KR,"__esModule",{value:!0});KR.prettyByte=void 0;function BRt(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}KR.prettyByte=BRt});var txe=m(UR=>{"use strict";Object.defineProperty(UR,"__esModule",{value:!0});UR.CachedKeyDecoder=void 0;var qRt=PR(),LRt=16,jRt=16,UX=class{constructor(e=LRt,r=jRt){this.maxKeyLength=e,this.maxLengthPerKey=r,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){let i=this.caches[n-1];e:for(let s of i){let o=s.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return s.str}return null}store(e,r){let n=this.caches[e.length-1],i={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,r,n){let i=this.find(e,r,n);if(i!=null)return this.hit++,i;this.miss++;let s=(0,qRt.utf8DecodeJs)(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,s),s}};UR.CachedKeyDecoder=UX});var VR=m(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});ff.Decoder=ff.DataViewIndexOutOfBoundsError=void 0;var VX=exe(),$Rt=jR(),vy=rw(),GX=PR(),HX=jX(),KRt=txe(),pf=BR(),URt=t=>{let e=typeof t;return e==="string"||e==="number"},ow=-1,WX=new DataView(new ArrayBuffer(0)),VRt=new Uint8Array(WX.buffer);ff.DataViewIndexOutOfBoundsError=(()=>{try{WX.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})();var rxe=new ff.DataViewIndexOutOfBoundsError("Insufficient data"),GRt=new KRt.CachedKeyDecoder,zX=class{constructor(e=$Rt.ExtensionCodec.defaultCodec,r=void 0,n=vy.UINT32_MAX,i=vy.UINT32_MAX,s=vy.UINT32_MAX,o=vy.UINT32_MAX,a=vy.UINT32_MAX,u=GRt){this.extensionCodec=e,this.context=r,this.maxStrLength=n,this.maxBinLength=i,this.maxArrayLength=s,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=u,this.totalPos=0,this.pos=0,this.view=WX,this.bytes=VRt,this.headByte=ow,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=ow,this.stack.length=0}setBuffer(e){this.bytes=(0,HX.ensureUint8Array)(e),this.view=(0,HX.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===ow&&!this.hasRemaining(1))this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=(0,HX.ensureUint8Array)(e),i=new Uint8Array(r.length+n.length);i.set(r),i.set(n,r.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let r=!1,n;for await(let a of e){if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(u){if(!(u instanceof ff.DataViewIndexOutOfBoundsError))throw u}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,VX.prettyByte)(i)} at ${o} (${s} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,i=-1;for await(let s of e){if(r&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(i=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof ff.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e<160){let i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else{let i=e-160;r=this.decodeUtf8String(i,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let i=this.lookU8();r=this.decodeUtf8String(i,1)}else if(e===218){let i=this.lookU16();r=this.decodeUtf8String(i,2)}else if(e===219){let i=this.lookU32();r=this.decodeUtf8String(i,4)}else if(e===220){let i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===221){let i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===222){let i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===223){let i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===196){let i=this.lookU8();r=this.decodeBinary(i,1)}else if(e===197){let i=this.lookU16();r=this.decodeBinary(i,2)}else if(e===198){let i=this.lookU32();r=this.decodeBinary(i,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let i=this.lookU8();r=this.decodeExtension(i,1)}else if(e===200){let i=this.lookU16();r=this.decodeExtension(i,2)}else if(e===201){let i=this.lookU32();r=this.decodeExtension(i,4)}else throw new pf.DecodeError(`Unrecognized type byte: ${(0,VX.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let i=n[n.length-1];if(i.type===0)if(i.array[i.position]=r,i.position++,i.position===i.size)n.pop(),r=i.array;else continue e;else if(i.type===1){if(!URt(r))throw new pf.DecodeError("The type of key must be string or number but "+typeof r);if(r==="__proto__")throw new pf.DecodeError("The key __proto__ is not allowed");i.key=r,i.type=2;continue e}else if(i.map[i.key]=r,i.readCount++,i.readCount===i.size)n.pop(),r=i.map;else{i.key=null,i.type=1;continue e}}return r}}readHeadByte(){return this.headByte===ow&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=ow}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new pf.DecodeError(`Unrecognized array type byte: ${(0,VX.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new pf.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new pf.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){var n;if(e>this.maxStrLength)throw new pf.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw rxe;let i=this.pos+r,s;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,i,e):e>GX.TEXT_DECODER_THRESHOLD?s=(0,GX.utf8DecodeTD)(this.bytes,i,e):s=(0,GX.utf8DecodeJs)(this.bytes,i,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new pf.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw rxe;let n=this.pos+r,i=this.bytes.subarray(n,n+e);return this.pos+=r+e,i}decodeExtension(e,r){if(e>this.maxExtLength)throw new pf.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),i=this.decodeBinary(e,r+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,vy.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,vy.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};ff.Decoder=zX});var JX=m(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.decodeMulti=Fd.decode=Fd.defaultDecodeOptions=void 0;var nxe=VR();Fd.defaultDecodeOptions={};function HRt(t,e=Fd.defaultDecodeOptions){return new nxe.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}Fd.decode=HRt;function zRt(t,e=Fd.defaultDecodeOptions){return new nxe.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(t)}Fd.decodeMulti=zRt});var oxe=m(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.ensureAsyncIterable=Oh.asyncIterableFromStream=Oh.isAsyncIterable=void 0;function ixe(t){return t[Symbol.asyncIterator]!=null}Oh.isAsyncIterable=ixe;function WRt(t){if(t==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*sxe(t){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;WRt(n),yield n}}finally{e.releaseLock()}}Oh.asyncIterableFromStream=sxe;function JRt(t){return ixe(t)?t:sxe(t)}Oh.ensureAsyncIterable=JRt});var uxe=m(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.decodeStream=Bd.decodeMultiStream=Bd.decodeArrayStream=Bd.decodeAsync=void 0;var YX=VR(),QX=oxe(),GR=JX();async function YRt(t,e=GR.defaultDecodeOptions){let r=(0,QX.ensureAsyncIterable)(t);return new YX.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(r)}Bd.decodeAsync=YRt;function QRt(t,e=GR.defaultDecodeOptions){let r=(0,QX.ensureAsyncIterable)(t);return new YX.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(r)}Bd.decodeArrayStream=QRt;function axe(t,e=GR.defaultDecodeOptions){let r=(0,QX.ensureAsyncIterable)(t);return new YX.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(r)}Bd.decodeMultiStream=axe;function XRt(t,e=GR.defaultDecodeOptions){return axe(t,e)}Bd.decodeStream=XRt});var dxe=m(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.decodeTimestampExtension=Vt.encodeTimestampExtension=Vt.decodeTimestampToTimeSpec=Vt.encodeTimeSpecToTimestamp=Vt.encodeDateToTimeSpec=Vt.EXT_TIMESTAMP=Vt.ExtData=Vt.ExtensionCodec=Vt.Encoder=Vt.DataViewIndexOutOfBoundsError=Vt.DecodeError=Vt.Decoder=Vt.decodeStream=Vt.decodeMultiStream=Vt.decodeArrayStream=Vt.decodeAsync=Vt.decodeMulti=Vt.decode=Vt.encode=void 0;var ZRt=ZOe();Object.defineProperty(Vt,"encode",{enumerable:!0,get:function(){return ZRt.encode}});var cxe=JX();Object.defineProperty(Vt,"decode",{enumerable:!0,get:function(){return cxe.decode}});Object.defineProperty(Vt,"decodeMulti",{enumerable:!0,get:function(){return cxe.decodeMulti}});var HR=uxe();Object.defineProperty(Vt,"decodeAsync",{enumerable:!0,get:function(){return HR.decodeAsync}});Object.defineProperty(Vt,"decodeArrayStream",{enumerable:!0,get:function(){return HR.decodeArrayStream}});Object.defineProperty(Vt,"decodeMultiStream",{enumerable:!0,get:function(){return HR.decodeMultiStream}});Object.defineProperty(Vt,"decodeStream",{enumerable:!0,get:function(){return HR.decodeStream}});var lxe=VR();Object.defineProperty(Vt,"Decoder",{enumerable:!0,get:function(){return lxe.Decoder}});Object.defineProperty(Vt,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return lxe.DataViewIndexOutOfBoundsError}});var eDt=BR();Object.defineProperty(Vt,"DecodeError",{enumerable:!0,get:function(){return eDt.DecodeError}});var tDt=KX();Object.defineProperty(Vt,"Encoder",{enumerable:!0,get:function(){return tDt.Encoder}});var rDt=jR();Object.defineProperty(Vt,"ExtensionCodec",{enumerable:!0,get:function(){return rDt.ExtensionCodec}});var nDt=BX();Object.defineProperty(Vt,"ExtData",{enumerable:!0,get:function(){return nDt.ExtData}});var sb=LX();Object.defineProperty(Vt,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return sb.EXT_TIMESTAMP}});Object.defineProperty(Vt,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return sb.encodeDateToTimeSpec}});Object.defineProperty(Vt,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return sb.encodeTimeSpecToTimestamp}});Object.defineProperty(Vt,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return sb.decodeTimestampToTimeSpec}});Object.defineProperty(Vt,"encodeTimestampExtension",{enumerable:!0,get:function(){return sb.encodeTimestampExtension}});Object.defineProperty(Vt,"decodeTimestampExtension",{enumerable:!0,get:function(){return sb.decodeTimestampExtension}})});var fxe=m(zR=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});zR.LogLevel=void 0;var pxe;(function(t){t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug",t.Fatal="fatal",t.Http="http",t.Verbose="verbose",t.Silly="silly",t.Trace="trace"})(pxe||(zR.LogLevel=pxe={}))});var eZ=m(ZX=>{"use strict";Object.defineProperty(ZX,"__esModule",{value:!0});var XX=class{constructor(){this.length=0}push(e){let r={value:e};this.last=this.last?this.last.next=r:this.first=r,this.length++}shift(){if(this.first){let{value:e}=this.first;return this.first=this.first.next,--this.length||(this.last=void 0),e}}};ZX.default=XX});var hxe=m(tZ=>{"use strict";Object.defineProperty(tZ,"__esModule",{value:!0});tZ.base64Encode=iDt;function iDt(t){return Buffer.from(t).toString("base64")}});var mxe=m(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});ob.calculateJsonLogSizeBytes=void 0;ob.default=lDt;var sDt=1e3,oDt=1e3,aDt=3,uDt=100,cDt=t=>JSON.stringify(t).length+1;ob.calculateJsonLogSizeBytes=cDt;function lDt(t=sDt,e=oDt,r=aDt,n=uDt,i=0,s=ob.calculateJsonLogSizeBytes){let o,a,u=[],c=0,l=0,d=0;async function p(){o&&clearTimeout(o),o=null;let h=u,g=c;u=[],c=0;try{await a(h.map(_=>_.log)),h.forEach(_=>_.resolve(_.log)),l=0}catch(_){if(l<r){l++,d=Date.now()+n,u=u.concat(h),c+=g,await f();return}h.map(S=>S.reject(_)),l=0}}async function f(){if(!o)return new Promise(h=>{o=setTimeout(async function(){await p(),h()},e)})}return{initPusher:function(h){return a=h,async function(g){return new Promise(async(_,S)=>(u.push({log:g,resolve:_,reject:S}),i>0&&(c+=s(g)),(u.length>=t||i>0&&c>=i)&&Date.now()>d?await p():await f(),_))}},flush:p}}});var yxe=m(nZ=>{"use strict";Object.defineProperty(nZ,"__esModule",{value:!0});nZ.default=dDt;var rZ=64;function dDt(t,e,r="The function"){if(t<=0||e<=0)return c=>c;let n=[0],i=0,s=Date.now();function o(){let c=Date.now(),l=t/rZ;if(c<s+l)return;let d=Math.floor((c-s)/l);n=Array(Math.min(d,rZ)).fill(0).concat(n).slice(0,rZ),s+=d*l}function a(){return n.reduce((c,l)=>c+l)}function u(){n[0]++}return c=>async(...l)=>{if(o(),a()<e)return u(),await c(...l);let d=Date.now();i<d-t&&(i=d,console.error(`${r} was called more than ${e} times during last ${t}ms. Ignoring.`))}}});var gxe=m(aw=>{"use strict";var pDt=aw&&aw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(aw,"__esModule",{value:!0});aw.default=hDt;var fDt=pDt(eZ());function hDt(t,e=-1){let r=0,n=new fDt.default;function i(s){return async(...o)=>new Promise((a,u)=>{async function c(){if(r<t){r++;try{a(await s(...o))}catch(l){u(l)}r--,n.length>0&&n.shift()()}else if(e<0||n.length<e)n.push(c);else{u(new Error("Queue max limit exceeded"));return}}return c()})}return i}});var bxe=m(di=>{"use strict";var mDt=di&&di.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),yDt=di&&di.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),gDt=di&&di.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mDt(e,t,r);return yDt(e,t),e},iZ=di&&di.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(di,"__esModule",{value:!0});di.calculateJsonLogSizeBytes=di.makeThrottle=di.makeBurstProtection=di.makeBatch=di.base64Encode=di.Queue=void 0;var EDt=iZ(eZ());di.Queue=EDt.default;var bDt=hxe();Object.defineProperty(di,"base64Encode",{enumerable:!0,get:function(){return bDt.base64Encode}});var Exe=gDt(mxe());di.makeBatch=Exe.default;Object.defineProperty(di,"calculateJsonLogSizeBytes",{enumerable:!0,get:function(){return Exe.calculateJsonLogSizeBytes}});var _Dt=iZ(yxe());di.makeBurstProtection=_Dt.default;var vDt=iZ(gxe());di.makeThrottle=vDt.default});var vxe=m((nvr,_xe)=>{"use strict";var sZ=class t extends Error{constructor(e){super(t._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,t)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},SDt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],oZ=Symbol(".toJSON called"),wDt=t=>{t[oZ]=!0;let e=t.toJSON();return delete t[oZ],e},aZ=({from:t,seen:e,to_:r,forceEnumerable:n,maxDepth:i,depth:s})=>{let o=r||(Array.isArray(t)?[]:{});if(e.push(t),s>=i)return o;if(typeof t.toJSON=="function"&&t[oZ]!==!0)return wDt(t);for(let[a,u]of Object.entries(t)){if(typeof Buffer=="function"&&Buffer.isBuffer(u)){o[a]="[object Buffer]";continue}if(typeof u!="function"){if(!u||typeof u!="object"){o[a]=u;continue}if(!e.includes(t[a])){s++,o[a]=aZ({from:t[a],seen:e.slice(),forceEnumerable:n,maxDepth:i,depth:s});continue}o[a]="[Circular]"}}for(let{property:a,enumerable:u}of SDt)typeof t[a]=="string"&&Object.defineProperty(o,a,{value:t[a],enumerable:n?!0:u,configurable:!0,writable:!0});return o},ADt=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;return typeof t=="object"&&t!==null?aZ({from:t,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t},CDt=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let n=new Error;return aZ({from:t,seen:[],to_:n,maxDepth:r,depth:0}),n}return new sZ(t)};_xe.exports={serializeError:ADt,deserializeError:CDt}});var wxe=m(lZ=>{"use strict";Object.defineProperty(lZ,"__esModule",{value:!0});var ab=fxe(),WR=bxe(),Sxe=vxe(),TDt={endpoint:"https://in.logs.betterstack.com",batchSize:1e3,batchSizeKiB:0,batchInterval:1e3,retryCount:3,retryBackoff:100,syncMax:5,syncQueuedMax:100,burstProtectionMilliseconds:5e3,burstProtectionMax:1e4,ignoreExceptions:!1,throwExceptions:!1,contextObjectMaxDepth:50,contextObjectMaxDepthWarn:!0,contextObjectCircularRefWarn:!0,sendLogsToConsoleOutput:!1,sendLogsToBetterStack:!0,calculateLogSizeBytes:WR.calculateJsonLogSizeBytes},uZ=class{constructor(e,r){if(this._middleware=[],this._countLogged=0,this._countSynced=0,this._countDropped=0,typeof e!="string"||e==="")throw new Error("Logtail source token missing");this._sourceToken=e,this._options=Object.assign(Object.assign({},TDt),r);let i=(0,WR.makeThrottle)(this._options.syncMax,this._options.syncQueuedMax)(o=>this._sync(o));this._logBurstProtection=(0,WR.makeBurstProtection)(this._options.burstProtectionMilliseconds,this._options.burstProtectionMax,"Logging"),this.log=this._logBurstProtection(this.log.bind(this));let s=(0,WR.makeBatch)(this._options.batchSize,this._options.batchInterval,this._options.retryCount,this._options.retryBackoff,this._options.batchSizeKiB*1024,this._options.calculateLogSizeBytes);this._batch=s.initPusher(o=>i(o)),this._flush=s.flush}async flush(){return this._flush()}get logged(){return this._countLogged}get synced(){return this._countSynced}get dropped(){return this._countDropped}async log(e,r=ab.LogLevel.Info,n={}){if(typeof n!="object"&&(n={extra:n}),n instanceof Error&&(n={error:n}),this._options.sendLogsToConsoleOutput)switch(r){case"debug":console.debug(e,n);break;case"info":console.info(e,n);break;case"warn":console.warn(e,n);break;case"error":console.error(e,n);break;default:console.log(`[${r.toUpperCase()}]`,e,n);break}if(typeof this._sync!="function")throw new Error("No Logtail logger sync function provided");this._countLogged++;let s=Object.assign(Object.assign({dt:new Date,level:r},n),e instanceof Error?(0,Sxe.serializeError)(e):{message:e});for(let o of this._middleware){let a=await o(s);if(a==null)return s;s=a}if(s=this.serialize(s,this._options.contextObjectMaxDepth),!this._options.sendLogsToBetterStack)return s;try{await this._batch(s),this._countSynced++}catch(o){if(this._countDropped++,!this._options.ignoreExceptions){if(this._options.throwExceptions)throw o;console.error(o)}}return s}serialize(e,r,n=new WeakSet){if(e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string")return e;if(e instanceof Date)return isNaN(e.getTime())?e.toString():e.toISOString();if(e instanceof Error)return(0,Sxe.serializeError)(e);if((typeof e=="object"||Array.isArray(e))&&(r<1||n.has(e)))return n.has(e)?(this._options.contextObjectCircularRefWarn&&console.warn("[Logtail] Found a circular reference when serializing logs. Please do not use circular references in your logs."),"<omitted circular reference>"):(this._options.contextObjectMaxDepthWarn&&console.warn(`[Logtail] Max depth of ${this._options.contextObjectMaxDepth} reached when serializing logs. Please do not use excessive object depth in your logs.`),`<omitted context beyond configured max depth: ${this._options.contextObjectMaxDepth}>`);if(Array.isArray(e)){n.add(e);let i=e.map(s=>this.serialize(s,r-1,n));return n.delete(e),i}else if(typeof e=="object"){let i={};return n.add(e),Object.entries(e).forEach(s=>{let o=s[0],a=s[1],u=this.serialize(a,r-1,n);u!==void 0&&(i[o]=u)}),n.delete(e),i}else return typeof e>"u"?void 0:`<omitted unserializable ${typeof e}>`}async debug(e,r={}){return this.log(e,ab.LogLevel.Debug,r)}async info(e,r={}){return this.log(e,ab.LogLevel.Info,r)}async warn(e,r={}){return this.log(e,ab.LogLevel.Warn,r)}async error(e,r={}){return this.log(e,ab.LogLevel.Error,r)}setSync(e){this._sync=e}use(e){this._middleware.push(e)}remove(e){this._middleware=this._middleware.filter(r=>r!==e)}},cZ=class extends uZ{async log(e,r=ab.LogLevel.Info,n={}){return super.log(e,r,n)}};lZ.default=cZ});var Axe=m(ub=>{"use strict";var ODt=ub&&ub.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ub,"__esModule",{value:!0});ub.Base=void 0;var xDt=ODt(wxe());ub.Base=xDt.default});var Oxe=m(uw=>{"use strict";var IDt=uw&&uw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uw,"__esModule",{value:!0});uw.getStackContext=kDt;var Cxe=require("path"),RDt=IDt(RR()),DDt=Txe();function kDt(t,e){let r=MDt(t,e);return r===null?{}:{context:{runtime:{file:NDt(r.getFileName()),type:r.getTypeName(),method:r.getMethodName(),function:r.getFunctionName(),line:r.getLineNumber(),column:r.getColumnNumber()},system:{pid:process.pid,main_file:DDt}}}}function MDt(t,e){for(let r of[t.warn,t.error,t.info,t.debug,t.log]){let n=RDt.default.get(r);if(n?.length>0)return PDt(n,e)}return null}function PDt(t,e){if(e){t.reverse();let r=t.findIndex(n=>{var i;return((i=n.getFileName())===null||i===void 0?void 0:i.includes(e.fileName))&&(e.methodNames.includes(n.getMethodName())||e.methodNames.includes(n.getFunctionName()))});return r>0?t[r-1]:e.required?null:t[t.length-1]}return t[0]}function NDt(t){if(typeof t!="string")return null;if(t.startsWith("file:/"))return new URL(t).pathname;{let e=(0,Cxe.dirname)(Txe());return(0,Cxe.relative)(e,t)}}function Txe(){let t=process==null?void 0:process.argv;if(t===void 0)return"";for(let e of t){if(typeof e!="string"||e.startsWith("-"))break;if(e.endsWith(".js"))return e}return""}});var xxe=m(cb=>{"use strict";var pZ=cb&&cb.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cb,"__esModule",{value:!0});cb.Node=void 0;var FDt=dxe(),BDt=pZ(require("node:http")),qDt=pZ(require("node:https")),LDt=pZ(require("node:zlib")),jDt=Axe(),$Dt=Oxe(),dZ=class extends jDt.Base{constructor(e,r){r=Object.assign({timeout:3e4},r),super(e,r);let n=this.createAgent(),i=async s=>{let o=this._options,a=this.getHttpModule().request(o.endpoint,{method:"POST",headers:{"Content-Type":"application/msgpack","Content-Encoding":"gzip",Authorization:`Bearer ${this._sourceToken}`,"User-Agent":"logtail-js(node)"},agent:n,timeout:o.timeout>0?o.timeout:void 0}),u=await new Promise((c,l)=>{o.timeout>0&&a.on("timeout",()=>{a.destroy(),l(new Error(`Request timeout after ${o.timeout}ms`))}),a.on("response",c),a.on("error",l),LDt.default.gzip(this.encodeAsMsgpack(s),(d,p)=>{if(d){l(d);return}a.write(p),a.end()})});if(u.statusCode&&u.statusCode>=200&&u.statusCode<300)return s;throw new Error(u.statusMessage)};this.setSync(i)}async log(e,r,n={},i){n=Object.assign(Object.assign({},(0,$Dt.getStackContext)(this,i)),n);let s=await super.log(e,r,n);return this._writeStream&&this._writeStream.write(JSON.stringify(s)+`
`),s}pipe(e){return this._writeStream=e,e}encodeAsMsgpack(e){let r=(0,FDt.encode)(e);return Buffer.from(r.buffer,r.byteOffset,r.byteLength)}createAgent(){let r=this._options.useIPv6?6:4;return new(this.getHttpModule()).Agent({family:r})}getHttpModule(){return this._options.endpoint.startsWith("https")?qDt.default:BDt.default}};cb.Node=dZ});var Ixe=m(JR=>{"use strict";Object.defineProperty(JR,"__esModule",{value:!0});JR.Logtail=void 0;var KDt=xxe();Object.defineProperty(JR,"Logtail",{enumerable:!0,get:function(){return KDt.Node}})});var Rxe=m(xh=>{"use strict";var UDt=xh&&xh.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},VDt=xh&&xh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xh,"__esModule",{value:!0});xh.LogtailTransport=void 0;var GDt=VDt(Ey()),HDt={fileName:"node_modules/winston",methodNames:["log","error","warn","info","http","verbose","debug","silly"]},fZ=class extends GDt.default{constructor(e,r){super(Object.assign(Object.assign({},r),{close:()=>{this._logtail.flush().then(()=>{r?.close&&r.close()})}})),this._logtail=e}log(e,r){setImmediate(()=>{this.emit("logged",e)});let{level:n,message:i}=e,s=UDt(e,["level","message"]);this._logtail.log(i,n,s,HDt),r()}};xh.LogtailTransport=fZ});var Dxe=m(YR=>{"use strict";Object.defineProperty(YR,"__esModule",{value:!0});YR.LogtailTransport=void 0;var zDt=Rxe();Object.defineProperty(YR,"LogtailTransport",{enumerable:!0,get:function(){return zDt.LogtailTransport}})});var kxe=m((dvr,WDt)=>{WDt.exports={name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var qxe=m((pvr,hf)=>{var hZ=require("fs"),QR=require("path"),JDt=require("os"),YDt=require("crypto"),QDt=kxe(),mZ=QDt.version,Mxe=["\u{1F510} encrypt with Dotenvx: https://dotenvx.com","\u{1F510} prevent committing .env to code: https://dotenvx.com/precommit","\u{1F510} prevent building .env in docker: https://dotenvx.com/prebuild","\u{1F4E1} add observability to secrets: https://dotenvx.com/ops","\u{1F465} sync secrets across teammates & machines: https://dotenvx.com/ops","\u{1F5C2}\uFE0F backup and recover secrets: https://dotenvx.com/ops","\u2705 audit secrets and track compliance: https://dotenvx.com/ops","\u{1F504} add secrets lifecycle management: https://dotenvx.com/ops","\u{1F511} add access controls to secrets: https://dotenvx.com/ops","\u{1F6E0}\uFE0F  run anywhere with `dotenvx run -- yourcommand`","\u2699\uFE0F  specify custom .env file path with { path: '/custom/path/.env' }","\u2699\uFE0F  enable debug logging with { debug: true }","\u2699\uFE0F  override existing env vars with { override: true }","\u2699\uFE0F  suppress all logs with { quiet: true }","\u2699\uFE0F  write to custom object with { processEnv: myObject }","\u2699\uFE0F  load multiple .env files with { path: ['.env.local', '.env'] }"];function XDt(){return Mxe[Math.floor(Math.random()*Mxe.length)]}function lb(t){return typeof t=="string"?!["false","0","no","off",""].includes(t.toLowerCase()):!!t}function ZDt(){return process.stdout.isTTY}function ekt(t){return ZDt()?`\x1B[2m${t}\x1B[0m`:t}var tkt=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function rkt(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=tkt.exec(r))!=null;){let i=n[1],s=n[2]||"";s=s.trim();let o=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),e[i]=s}return e}function nkt(t){t=t||{};let e=Bxe(t);t.path=e;let r=Xi.configDotenv(t);if(!r.parsed){let o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}let n=Fxe(t).split(","),i=n.length,s;for(let o=0;o<i;o++)try{let a=n[o].trim(),u=skt(r,a);s=Xi.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=i)throw a}return Xi.parse(s)}function ikt(t){console.error(`[dotenv@${mZ}][WARN] ${t}`)}function cw(t){console.log(`[dotenv@${mZ}][DEBUG] ${t}`)}function Nxe(t){console.log(`[dotenv@${mZ}] ${t}`)}function Fxe(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function skt(t,e){let r;try{r=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){let u=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw u.code="INVALID_DOTENV_KEY",u}throw a}let n=r.password;if(!n){let a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}let i=r.searchParams.get("environment");if(!i){let a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}let s=`DOTENV_VAULT_${i.toUpperCase()}`,o=t.parsed[s];if(!o){let a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:n}}function Bxe(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)hZ.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=QR.resolve(process.cwd(),".env.vault");return hZ.existsSync(e)?e:null}function Pxe(t){return t[0]==="~"?QR.join(JDt.homedir(),t.slice(1)):t}function okt(t){let e=lb(process.env.DOTENV_CONFIG_DEBUG||t&&t.debug),r=lb(process.env.DOTENV_CONFIG_QUIET||t&&t.quiet);(e||!r)&&Nxe("Loading env from encrypted .env.vault");let n=Xi._parseVault(t),i=process.env;return t&&t.processEnv!=null&&(i=t.processEnv),Xi.populate(i,n,t),{parsed:n}}function akt(t){let e=QR.resolve(process.cwd(),".env"),r="utf8",n=process.env;t&&t.processEnv!=null&&(n=t.processEnv);let i=lb(n.DOTENV_CONFIG_DEBUG||t&&t.debug),s=lb(n.DOTENV_CONFIG_QUIET||t&&t.quiet);t&&t.encoding?r=t.encoding:i&&cw("No encoding is specified. UTF-8 is used by default");let o=[e];if(t&&t.path)if(!Array.isArray(t.path))o=[Pxe(t.path)];else{o=[];for(let l of t.path)o.push(Pxe(l))}let a,u={};for(let l of o)try{let d=Xi.parse(hZ.readFileSync(l,{encoding:r}));Xi.populate(u,d,t)}catch(d){i&&cw(`Failed to load ${l} ${d.message}`),a=d}let c=Xi.populate(n,u,t);if(i=lb(n.DOTENV_CONFIG_DEBUG||i),s=lb(n.DOTENV_CONFIG_QUIET||s),i||!s){let l=Object.keys(c).length,d=[];for(let p of o)try{let f=QR.relative(process.cwd(),p);d.push(f)}catch(f){i&&cw(`Failed to load ${p} ${f.message}`),a=f}Nxe(`injecting env (${l}) from ${d.join(",")} ${ekt(`-- tip: ${XDt()}`)}`)}return a?{parsed:u,error:a}:{parsed:u}}function ukt(t){if(Fxe(t).length===0)return Xi.configDotenv(t);let e=Bxe(t);return e?Xi._configVault(t):(ikt(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),Xi.configDotenv(t))}function ckt(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),i=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{let o=YDt.createDecipheriv("aes-256-gcm",r,i);return o.setAuthTag(s),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(c){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw o}}function lkt(t,e,r={}){let n=!!(r&&r.debug),i=!!(r&&r.override),s={};if(typeof e!="object"){let o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(i===!0&&(t[o]=e[o],s[o]=e[o]),n&&cw(i===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(t[o]=e[o],s[o]=e[o]);return s}var Xi={configDotenv:akt,_configVault:okt,_parseVault:nkt,config:ukt,decrypt:ckt,parse:rkt,populate:lkt};hf.exports.configDotenv=Xi.configDotenv;hf.exports._configVault=Xi._configVault;hf.exports._parseVault=Xi._parseVault;hf.exports.config=Xi.config;hf.exports.decrypt=Xi.decrypt;hf.exports.parse=Xi.parse;hf.exports.populate=Xi.populate;hf.exports=Xi});var Lxe,dkt,_s,lw=le(()=>{"use strict";Lxe=Dt(qxe());Lxe.default.config();dkt={PORT:process.env.PORT||8080,WHITELIST_ORIGINS:process.env.WHITELIST_ORIGINS,NODE_ENV:process.env.NODE_ENV,MONGO_URI:process.env.MONGO_URI,LOG_LEVEL:process.env.LOG_LEVEL||"info",AZURE_TENANT_ID:process.env.AZURE_TENANT_ID,AZURE_CLIENT_ID:process.env.AZURE_CLIENT_ID,ADMINA_API_CLIENT_ID:process.env.ADMINA_API_CLIENT_ID,defaultResLimit:20,defaultResOffset:0,AZURE_CLIENT_SECRETE:process.env.AZURE_CLIENT_SECRETE,AZURE_CLIENT_AUTHORITY:process.env.AZURE_CLIENT_AUTHORITY,LOGTAIL_SOURCE_TOKEN:process.env.LOGTAIL_SOURCE_TOKEN,LOG_TAIL_INGESTING_HOST:process.env.LOG_TAIL_INGESTING_HOST,GEMINI_API_KEY:process.env.GEMINI_API_KEY},_s=dkt});var dw,jxe,$xe,yZ,gZ,Kxe,pkt,fkt,hkt,mkt,XR,EZ,Ge,Sy=le(()=>{"use strict";dw=Dt(UOe()),jxe=Dt(Ixe()),$xe=Dt(Dxe());lw();({combine:yZ,timestamp:gZ,json:Kxe,errors:pkt,align:fkt,printf:hkt,colorize:mkt}=dw.default.format),XR=[],EZ=new jxe.Logtail(_s.LOGTAIL_SOURCE_TOKEN,{endpoint:`https://${_s.LOG_TAIL_INGESTING_HOST}`});if(_s.NODE_ENV==="local")XR.push(new dw.default.transports.Console({format:yZ(mkt({all:!0}),gZ({format:"YYYY-MM-DD hh:mm:ss A"}),fkt(),hkt(({timestamp:t,level:e,message:r,...n})=>{let i=Object.keys(n).length?`
${JSON.stringify(n)}`:"";return`${t} [${e}]: ${r}${i}`}))}));else{if(XR.push(new dw.default.transports.Console({format:yZ(gZ(),Kxe())})),!_s.LOGTAIL_SOURCE_TOKEN||!_s.LOG_TAIL_INGESTING_HOST)throw new Error("Logtail source token and ingesting host must be provided in the configuration");XR.push(new $xe.LogtailTransport(EZ))}Ge=dw.default.createLogger({level:_s.LOG_LEVEL||"info",format:yZ(gZ(),pkt({stack:!0}),Kxe()),transports:XR,silent:_s.NODE_ENV==="test"})});var wy,ZR=le(()=>{"use strict";wy=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(s=>JSON.stringify(s))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}});var me,sr,gc,bZ,mn,Fa,Ay,db,pb,fb,Ec,Cy,mf,Jr,pw,Uxe,Ih,hb,$o,Zi,or,qd,fw,hw,Ty,eD,An,mb,cu,yn=le(()=>{"use strict";me={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},sr={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},gc=[me.OPENID_SCOPE,me.PROFILE_SCOPE,me.OFFLINE_ACCESS_SCOPE],bZ=[...gc,me.EMAIL_SCOPE],mn={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Fa={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ay={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},db={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},pb={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},fb={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Ec={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Cy={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},mf={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Jr={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},pw="appmetadata",Uxe="client_info",Ih="1",hb={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},$o={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Zi={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},or={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},qd={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},fw={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},hw={username:"username",password:"password"},Ty={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},eD={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},An={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},mb=300,cu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"}});var tD,rD,Vxe=le(()=>{"use strict";tD="unexpected_error",rD="post_request_failed"});var Gxe,ykt,ar,bc=le(()=>{"use strict";yn();Vxe();Gxe={[tD]:"Unexpected error in authentication.",[rD]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},ykt={unexpectedError:{code:tD,desc:Gxe[tD]},postRequestFailed:{code:rD,desc:Gxe[rD]}},ar=class t extends Error{constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||me.EMPTY_STRING,this.errorMessage=r||me.EMPTY_STRING,this.subError=n||me.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}});var es={};aa(es,{authTimeNotFound:()=>yf,authorizationCodeMissingFromServerResponse:()=>$y,bindingKeyNotRemoved:()=>Cw,cannotAppendScopeSet:()=>qy,cannotRemoveEmptyScope:()=>By,clientInfoDecodingError:()=>Rh,clientInfoEmptyError:()=>Oy,deviceCodeExpired:()=>Ew,deviceCodePollingCancelled:()=>gw,deviceCodeUnknownError:()=>bw,emptyInputScopeSet:()=>Mh,endSessionEndpointNotSupported:()=>Ky,endpointResolutionError:()=>Ko,hashNotDeserialized:()=>Dy,invalidAssertion:()=>Sw,invalidCacheEnvironment:()=>Ef,invalidCacheRecord:()=>Ly,invalidClientCredential:()=>ww,invalidState:()=>Bl,keyIdMissing:()=>Uy,maxAgeTranspired:()=>Py,methodNotImplemented:()=>Lt,missingTenantIdError:()=>xw,multipleMatchingAccounts:()=>yw,multipleMatchingAppMetadata:()=>Ny,multipleMatchingTokens:()=>mw,nestedAppAuthBridgeDisabled:()=>Iw,networkError:()=>Iy,noAccountFound:()=>_w,noAccountInSilentRequest:()=>gf,noCryptoObject:()=>Ph,noNetworkConnectivity:()=>Tw,nonceMismatch:()=>My,nullOrEmptyToken:()=>xy,openIdConfigError:()=>Ry,requestCannotBeMade:()=>Fy,stateMismatch:()=>ky,stateNotFound:()=>kh,tokenClaimsCnfRequiredForSignedJwt:()=>jy,tokenParsingError:()=>Dh,tokenRefreshRequired:()=>bf,unexpectedCredentialType:()=>vw,userCanceled:()=>Ow,userTimeoutReached:()=>Aw});var Rh,Oy,Dh,xy,Ko,Iy,Ry,Dy,Bl,ky,kh,My,yf,Py,mw,yw,Ny,Fy,By,qy,Mh,gw,Ew,bw,gf,Ly,Ef,_w,Ph,vw,Sw,ww,bf,Aw,jy,$y,Cw,Ky,Uy,Tw,Ow,xw,Lt,Iw,Oi=le(()=>{"use strict";Rh="client_info_decoding_error",Oy="client_info_empty_error",Dh="token_parsing_error",xy="null_or_empty_token",Ko="endpoints_resolution_error",Iy="network_error",Ry="openid_config_error",Dy="hash_not_deserialized",Bl="invalid_state",ky="state_mismatch",kh="state_not_found",My="nonce_mismatch",yf="auth_time_not_found",Py="max_age_transpired",mw="multiple_matching_tokens",yw="multiple_matching_accounts",Ny="multiple_matching_appMetadata",Fy="request_cannot_be_made",By="cannot_remove_empty_scope",qy="cannot_append_scopeset",Mh="empty_input_scopeset",gw="device_code_polling_cancelled",Ew="device_code_expired",bw="device_code_unknown_error",gf="no_account_in_silent_request",Ly="invalid_cache_record",Ef="invalid_cache_environment",_w="no_account_found",Ph="no_crypto_object",vw="unexpected_credential_type",Sw="invalid_assertion",ww="invalid_client_credential",bf="token_refresh_required",Aw="user_timeout_reached",jy="token_claims_cnf_required_for_signedjwt",$y="authorization_code_missing_from_server_response",Cw="binding_key_not_removed",Ky="end_session_endpoint_not_supported",Uy="key_id_missing",Tw="no_network_connectivity",Ow="user_canceled",xw="missing_tenant_id_error",Lt="method_not_implemented",Iw="nested_app_auth_bridge_disabled"});function Ae(t,e){return new yb(t,e)}var xt,gkt,yb,Bi=le(()=>{"use strict";bc();Oi();xt={[Rh]:"The client info could not be parsed/decoded correctly",[Oy]:"The client info was empty",[Dh]:"Token cannot be parsed",[xy]:"The token is null or empty",[Ko]:"Endpoints cannot be resolved",[Iy]:"Network request failed",[Ry]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Dy]:"The hash parameters could not be deserialized",[Bl]:"State was not the expected format",[ky]:"State mismatch error",[kh]:"State not found",[My]:"Nonce mismatch error",[yf]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Py]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[mw]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[yw]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ny]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Fy]:"Token request cannot be made without authorization code or refresh token.",[By]:"Cannot remove null or empty scope from ScopeSet",[qy]:"Cannot append ScopeSet",[Mh]:"Empty input ScopeSet cannot be processed",[gw]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Ew]:"Device code is expired.",[bw]:"Device code stopped polling for unknown reasons.",[gf]:"Please pass an account object, silent flow is not supported without account information",[Ly]:"Cache record object was null or undefined.",[Ef]:"Invalid environment when attempting to create cache entry",[_w]:"No account found in cache for given key.",[Ph]:"No crypto object detected.",[vw]:"Unexpected credential type.",[Sw]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[ww]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[bf]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Aw]:"User defined timeout for device code polling reached",[jy]:"Cannot generate a POP jwt if the token_claims are not populated",[$y]:"Server response does not contain an authorization code to proceed",[Cw]:"Could not remove the credential's binding key from storage.",[Ky]:"The provided authority does not support logout",[Uy]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Tw]:"No network connectivity. Check your internet connection.",[Ow]:"User cancelled the flow.",[xw]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Lt]:"This method has not been implemented",[Iw]:"The nested app auth bridge is disabled"},gkt={clientInfoDecodingError:{code:Rh,desc:xt[Rh]},clientInfoEmptyError:{code:Oy,desc:xt[Oy]},tokenParsingError:{code:Dh,desc:xt[Dh]},nullOrEmptyToken:{code:xy,desc:xt[xy]},endpointResolutionError:{code:Ko,desc:xt[Ko]},networkError:{code:Iy,desc:xt[Iy]},unableToGetOpenidConfigError:{code:Ry,desc:xt[Ry]},hashNotDeserialized:{code:Dy,desc:xt[Dy]},invalidStateError:{code:Bl,desc:xt[Bl]},stateMismatchError:{code:ky,desc:xt[ky]},stateNotFoundError:{code:kh,desc:xt[kh]},nonceMismatchError:{code:My,desc:xt[My]},authTimeNotFoundError:{code:yf,desc:xt[yf]},maxAgeTranspired:{code:Py,desc:xt[Py]},multipleMatchingTokens:{code:mw,desc:xt[mw]},multipleMatchingAccounts:{code:yw,desc:xt[yw]},multipleMatchingAppMetadata:{code:Ny,desc:xt[Ny]},tokenRequestCannotBeMade:{code:Fy,desc:xt[Fy]},removeEmptyScopeError:{code:By,desc:xt[By]},appendScopeSetError:{code:qy,desc:xt[qy]},emptyInputScopeSetError:{code:Mh,desc:xt[Mh]},DeviceCodePollingCancelled:{code:gw,desc:xt[gw]},DeviceCodeExpired:{code:Ew,desc:xt[Ew]},DeviceCodeUnknownError:{code:bw,desc:xt[bw]},NoAccountInSilentRequest:{code:gf,desc:xt[gf]},invalidCacheRecord:{code:Ly,desc:xt[Ly]},invalidCacheEnvironment:{code:Ef,desc:xt[Ef]},noAccountFound:{code:_w,desc:xt[_w]},noCryptoObj:{code:Ph,desc:xt[Ph]},unexpectedCredentialType:{code:vw,desc:xt[vw]},invalidAssertion:{code:Sw,desc:xt[Sw]},invalidClientCredential:{code:ww,desc:xt[ww]},tokenRefreshRequired:{code:bf,desc:xt[bf]},userTimeoutReached:{code:Aw,desc:xt[Aw]},tokenClaimsRequired:{code:jy,desc:xt[jy]},noAuthorizationCodeFromServer:{code:$y,desc:xt[$y]},bindingKeyNotRemovedError:{code:Cw,desc:xt[Cw]},logoutNotSupported:{code:Ky,desc:xt[Ky]},keyIdMissing:{code:Uy,desc:xt[Uy]},noNetworkConnectivity:{code:Tw,desc:xt[Tw]},userCanceledError:{code:Ow,desc:xt[Ow]},missingTenantIdError:{code:xw,desc:xt[xw]},nestedAppAuthBridgeDisabled:{code:Iw,desc:xt[Iw]}},yb=class t extends ar{constructor(e,r){super(e,r?`${xt[e]}: ${r}`:xt[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}}});var _Z,Hxe=le(()=>{"use strict";Bi();Oi();_Z={createNewGuid:()=>{throw Ae(Lt)},base64Decode:()=>{throw Ae(Lt)},base64Encode:()=>{throw Ae(Lt)},base64UrlEncode:()=>{throw Ae(Lt)},encodeKid:()=>{throw Ae(Lt)},async getPublicKeyThumbprint(){throw Ae(Lt)},async removeTokenBindingKey(){throw Ae(Lt)},async clearKeystore(){throw Ae(Lt)},async signJwt(){throw Ae(Lt)},async hashString(){throw Ae(Lt)}}});var xi,_f,nD=le(()=>{"use strict";yn();(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(xi||(xi={}));_f=class t{constructor(e,r,n){this.level=xi.Info;let i=()=>{},s=e||t.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:xi.Info,this.correlationId=s.correlationId||me.EMPTY_STRING,this.packageName=r||me.EMPTY_STRING,this.packageVersion=n||me.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xi.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${xi[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,s,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:xi.Error,containsPii:!1,correlationId:r||me.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:xi.Error,containsPii:!0,correlationId:r||me.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:xi.Warning,containsPii:!1,correlationId:r||me.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:xi.Warning,containsPii:!0,correlationId:r||me.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:xi.Info,containsPii:!1,correlationId:r||me.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:xi.Info,containsPii:!0,correlationId:r||me.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:xi.Verbose,containsPii:!1,correlationId:r||me.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:xi.Verbose,containsPii:!0,correlationId:r||me.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:xi.Trace,containsPii:!1,correlationId:r||me.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:xi.Trace,containsPii:!0,correlationId:r||me.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}});var iD,gb,sD=le(()=>{"use strict";iD="@azure/msal-common",gb="15.13.0"});var Vy,oD=le(()=>{"use strict";Vy={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"}});var Eb,aD,bb,vf,_b,vb,Gy,Sb,wb,uD,Ab,Hy,Cb,Tb,Nh,cD,lD,dD,pD,fD,hD,mD,yD,Fh=le(()=>{"use strict";Eb="redirect_uri_empty",aD="claims_request_parsing_error",bb="authority_uri_insecure",vf="url_parse_error",_b="empty_url_error",vb="empty_input_scopes_error",Gy="invalid_claims",Sb="token_request_empty",wb="logout_request_empty",uD="invalid_code_challenge_method",Ab="pkce_params_missing",Hy="invalid_cloud_discovery_metadata",Cb="invalid_authority_metadata",Tb="untrusted_authority",Nh="missing_ssh_jwk",cD="missing_ssh_kid",lD="missing_nonce_authentication_header",dD="invalid_authentication_header",pD="cannot_set_OIDCOptions",fD="cannot_allow_platform_broker",hD="authority_mismatch",mD="invalid_request_method_for_EAR",yD="invalid_authorize_post_body_parameters"});function Cn(t){return new vZ(t)}var Fn,Nvr,vZ,zy=le(()=>{"use strict";bc();Fh();Fn={[Eb]:"A redirect URI is required for all calls, and none has been set.",[aD]:"Could not parse the given claims request object.",[bb]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[vf]:"URL could not be parsed into appropriate segments.",[_b]:"URL was empty or null.",[vb]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Gy]:"Given claims parameter must be a stringified JSON object.",[Sb]:"Token request was empty and not found in cache.",[wb]:"The logout request was null or undefined.",[uD]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Ab]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Hy]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Cb]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Tb]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Nh]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[cD]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[lD]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[dD]:"Invalid authentication header provided",[pD]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[fD]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[hD]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[yD]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[mD]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},Nvr={redirectUriNotSet:{code:Eb,desc:Fn[Eb]},claimsRequestParsingError:{code:aD,desc:Fn[aD]},authorityUriInsecure:{code:bb,desc:Fn[bb]},urlParseError:{code:vf,desc:Fn[vf]},urlEmptyError:{code:_b,desc:Fn[_b]},emptyScopesError:{code:vb,desc:Fn[vb]},invalidClaimsRequest:{code:Gy,desc:Fn[Gy]},tokenRequestEmptyError:{code:Sb,desc:Fn[Sb]},logoutRequestEmptyError:{code:wb,desc:Fn[wb]},invalidCodeChallengeMethod:{code:uD,desc:Fn[uD]},invalidCodeChallengeParams:{code:Ab,desc:Fn[Ab]},invalidCloudDiscoveryMetadata:{code:Hy,desc:Fn[Hy]},invalidAuthorityMetadata:{code:Cb,desc:Fn[Cb]},untrustedAuthority:{code:Tb,desc:Fn[Tb]},missingSshJwk:{code:Nh,desc:Fn[Nh]},missingSshKid:{code:cD,desc:Fn[cD]},missingNonceAuthenticationHeader:{code:lD,desc:Fn[lD]},invalidAuthenticationHeader:{code:dD,desc:Fn[dD]},cannotSetOIDCOptions:{code:pD,desc:Fn[pD]},cannotAllowPlatformBroker:{code:fD,desc:Fn[fD]},authorityMismatch:{code:hD,desc:Fn[hD]},invalidAuthorizePostBodyParameters:{code:yD,desc:Fn[yD]},invalidRequestMethodForEAR:{code:mD,desc:Fn[mD]}},vZ=class t extends ar{constructor(e){super(e,Fn[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}}});var gn,Bh=le(()=>{"use strict";gn=class{static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return n.forEach(s=>{if(s.trim()){let[o,a]=s.split(/=(.+)/g,2);o&&a&&(r[i(o)]=i(a))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}}});var qi,Rw=le(()=>{"use strict";zy();Bh();Bi();yn();Fh();Oi();qi=class t{constructor(e){let r=e?gn.trimArrayEntries([...e]):[],n=r?gn.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw Cn(vb);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||me.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=e&&e.length>0?e:[...gc],n=new t(r);return n.containsOnlyOIDCScopes()?n.removeScope(me.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return bZ.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw Ae(qy)}}removeScope(e){if(!e)throw Ae(By);this.scopes.delete(e.trim())}removeOIDCScopes(){bZ.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ae(Mh);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw Ae(Mh);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):me.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}});function zxe(t,e){return!!t&&!!e&&t===e.split(".")[1]}function Dw(t,e,r,n){if(n){let{oid:i,sub:s,tid:o,name:a,tfp:u,acr:c,preferred_username:l,upn:d,login_hint:p}=n,f=o||u||c||"";return{tenantId:f,localAccountId:i||s||"",name:a,username:l||d||"",loginHint:p,isHomeTenant:zxe(f,t)}}else return{tenantId:r,localAccountId:e,username:"",isHomeTenant:zxe(r,t)}}function gD(t,e,r,n){let i=t;if(e){let{isHomeTenant:s,...o}=e;i={...t,...o}}if(r){let{isHomeTenant:s,...o}=Dw(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...o,idTokenClaims:r,idToken:n},i}return i}var ED=le(()=>{"use strict";});var bD={};aa(bD,{checkMaxAge:()=>kw,extractTokenClaims:()=>Sf,getJWSPayload:()=>Wxe});function Sf(t,e){let r=Wxe(t);try{let n=e(r);return JSON.parse(n)}catch{throw Ae(Dh)}}function Wxe(t){if(!t)throw Ae(xy);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw Ae(Dh);return r[2]}function kw(t,e){if(e===0||Date.now()-3e5>t+e)throw Ae(Py)}var Ob=le(()=>{"use strict";Bi();Oi();});var qh={};aa(qh,{getDeserializedResponse:()=>SZ,mapToQueryString:()=>Ld,normalizeUrlForComparison:()=>Ekt,stripLeadingHashOrQuery:()=>Yxe});function Jxe(t){if(!t)return t;let e=t.toLowerCase();return gn.endsWith(e,"?")?e=e.slice(0,-1):gn.endsWith(e,"?/")&&(e=e.slice(0,-2)),gn.endsWith(e,"/")||(e+="/"),e}function Yxe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function SZ(t){if(!t||t.indexOf("=")<0)return null;try{let e=Yxe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw Ae(Dy)}return null}function Ld(t,e=!0,r){let n=new Array;return t.forEach((i,s)=>{!e&&r&&s in r?n.push(`${s}=${i}`):n.push(`${s}=${encodeURIComponent(i)}`)}),n.join("&")}function Ekt(t){if(!t)return t;let e=t.split("#")[0];try{let r=new URL(e),n=r.origin+r.pathname+r.search;return Jxe(n)}catch{return Jxe(e)}}var Wy=le(()=>{"use strict";Bi();Bh();Oi();});var wr,Lh=le(()=>{"use strict";zy();Bh();yn();Wy();Fh();wr=class t{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Cn(_b);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return gn.endsWith(r,"?")?r=r.slice(0,-1):gn.endsWith(r,"?/")&&(r=r.slice(0,-2)),gn.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Cn(vf)}if(!e.HostNameAndPort||!e.PathSegments)throw Cn(vf);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Cn(bb)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Fa.COMMON||n[0]===Fa.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw Cn(vf);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw Cn(vf);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===me.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!SZ(e)}}});function Zxe(t,e){let r,n=t.canonicalAuthority;if(n){let i=new wr(n).getUrlComponents().HostNameAndPort;r=Qxe(i,t.cloudDiscoveryMetadata?.metadata,$o.CONFIG,e)||Qxe(i,AZ.metadata,$o.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}function Qxe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=Mw(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function eIe(t){return Mw(AZ.metadata,t)}function Mw(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}var Xxe,wZ,AZ,CZ,TZ=le(()=>{"use strict";Lh();yn();Xxe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},wZ=Xxe.endpointMetadata,AZ=Xxe.instanceDiscoveryMetadata,CZ=new Set;AZ.metadata.forEach(t=>{t.aliases.forEach(e=>{CZ.add(e)})})});var OZ,_D,tIe=le(()=>{"use strict";OZ="cache_quota_exceeded",_D="cache_error_unknown"});function rIe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Pw(OZ):new Pw(t.name,t.message):new Pw(_D)}var xZ,Pw,nIe=le(()=>{"use strict";bc();tIe();xZ={[OZ]:"Exceeded cache storage capacity.",[_D]:"Unexpected error occurred when using cache storage."},Pw=class t extends ar{constructor(e,r){let n=r||(xZ[e]?xZ[e]:xZ[_D]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}});var jh,Nw,IZ=le(()=>{"use strict";yn();Rw();Bi();ED();Ob();sD();TZ();nIe();bc();Oi();jh=class{constructor(e,r,n,i,s){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(iD,gb),this.staticAuthorityOptions=s,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){if(Object.keys(e).length===0||Object.values(e).every(i=>!i))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let n=this.getAllAccounts(e,r);return n.length>1?n.sort(s=>s.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,s){let o=null,a;if(s&&!this.tenantProfileMatchesFilter(n,s))return null;let u=this.getIdToken(e,i,r,n.tenantId);return u&&(a=Sf(u.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,s))?null:(o=gD(e,n,a,u?.secret),o)}getTenantProfilesFromAccountEntity(e,r,n,i){let s=e.getAccountInfo(),o=s.tenantProfiles||new Map,a=this.getTokenKeys();if(n){let c=o.get(n);if(c)o=new Map([[n,c]]);else return[]}let u=[];return o.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(s,a,c,r,i);l&&u.push(l)}),u}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw Ae(Ly);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof ar?i:rIe(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=qi.fromString(e.target);i.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,n,!1))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,n)&&qi.fromString(a.target).intersectingScopeSets(s)&&this.removeAccessToken(o,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(s=>{let o=this.getAccount(s,r);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},u=o.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,a));u&&u.length===0||i.push(o)}),i}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===or.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(n[i]=s))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(n=s)}),n}removeAllAccounts(e){this.getAllAccounts({},e).forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){this.removeAccountContext(e,r);let n=this.getAccountKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);n.filter(i).forEach(s=>{this.removeItem(s,r),this.performanceClient.incrementFields({accountsRemoved:1},r)})}removeAccountContext(e,r){let n=this.getTokenKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);n.idToken.filter(i).forEach(s=>{this.removeIdToken(s,r)}),n.accessToken.filter(i).forEach(s=>{this.removeAccessToken(s,r)}),n.refreshToken.filter(i).forEach(s=>{this.removeRefreshToken(s,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==or.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}getIdToken(e,r,n,i,s){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Jr.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(o,r,n),u=a.size;if(u<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(u>1){let c=a;if(!i){let l=new Map;a.forEach((p,f)=>{p.realm===e.tenantId&&l.set(f,p)});let d=l.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),l.values().next().value;c=l}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((l,d)=>{this.removeIdToken(d,r)}),s&&r&&s.addFields({multiMatchedID:a.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,s=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,{clientId:this.clientId,...e}))return;let a=this.getIdTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&s.set(o,a)}),s}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let s=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);let o=qi.createSearchScopes(r.scopes),a=r.authenticationScheme||or.BEARER,u=a&&a.toLowerCase()!==or.BEARER.toLowerCase()?Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Jr.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:a,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},l=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];l.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,c,!0)){let h=this.getAccessTokenCredential(f,s);h&&this.credentialMatchesFilter(h,c)&&d.push(h)}});let p=d.length;return p<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):p>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),d.forEach(f=>{this.removeAccessToken(this.generateCredentialKey(f),s)}),this.performanceClient.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),d[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let s=r.target.asArray();for(let o=0;o<s.length;o++){if(n&&!i.includes(s[o].toLowerCase()))return!1;if(!n&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;let o=this.getAccessTokenCredential(s,r);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,r,n,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let o=r?Ih:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Jr.REFRESH_TOKEN,clientId:this.clientId,familyId:o},u=i&&i.refreshToken||this.getTokenKeys().refreshToken,c=[];u.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){let p=this.getRefreshTokenCredential(d,n);p&&this.credentialMatchesFilter(p,a)&&c.push(p)}});let l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&s&&n&&s.addFields({multiMatchedRT:l},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(o=>n[o]),s=i.length;if(s<1)return null;if(s>1)throw Ae(Ny);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===Ih)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=Zxe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==Jr.ACCESS_TOKEN&&e.credentialType!==Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:qi.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(pw)!==-1}isAuthorityMetadata(e){return e.indexOf(hb.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${hb.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},Nw=class extends jh{async setAccount(){throw Ae(Lt)}getAccount(){throw Ae(Lt)}async setIdTokenCredential(){throw Ae(Lt)}getIdTokenCredential(){throw Ae(Lt)}async setAccessTokenCredential(){throw Ae(Lt)}getAccessTokenCredential(){throw Ae(Lt)}async setRefreshTokenCredential(){throw Ae(Lt)}getRefreshTokenCredential(){throw Ae(Lt)}setAppMetadata(){throw Ae(Lt)}getAppMetadata(){throw Ae(Lt)}setServerTelemetry(){throw Ae(Lt)}getServerTelemetry(){throw Ae(Lt)}setAuthorityMetadata(){throw Ae(Lt)}getAuthorityMetadata(){throw Ae(Lt)}getAuthorityMetadataKeys(){throw Ae(Lt)}setThrottlingCache(){throw Ae(Lt)}getThrottlingCache(){throw Ae(Lt)}removeItem(){throw Ae(Lt)}getKeys(){throw Ae(Lt)}getAccountKeys(){throw Ae(Lt)}getTokenKeys(){throw Ae(Lt)}generateCredentialKey(){throw Ae(Lt)}generateAccountKey(){throw Ae(Lt)}}});var _c,Fw=le(()=>{"use strict";_c={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"}});var ae,SSr,iIe,ql=le(()=>{"use strict";ae={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},SSr=new Map([[ae.AcquireTokenByCode,"ATByCode"],[ae.AcquireTokenByRefreshToken,"ATByRT"],[ae.AcquireTokenSilent,"ATS"],[ae.AcquireTokenSilentAsync,"ATSAsync"],[ae.AcquireTokenPopup,"ATPopup"],[ae.AcquireTokenRedirect,"ATRedirect"],[ae.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[ae.CryptoOptsSignJwt,"CryptoSignJwt"],[ae.SilentCacheClientAcquireToken,"SltCacheClientAT"],[ae.SilentIframeClientAcquireToken,"SltIframeClientAT"],[ae.SilentRefreshClientAcquireToken,"SltRClientAT"],[ae.SsoSilent,"SsoSlt"],[ae.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[ae.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[ae.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[ae.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[ae.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[ae.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[ae.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[ae.BrokerHandhshake,"BrokerHandshake"],[ae.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[ae.AcquireTokenByBroker,"ATByBroker"],[ae.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[ae.RefreshTokenClientAcquireToken,"RTClientAT"],[ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[ae.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[ae.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[ae.AcquireTokenFromCache,"ATFromCache"],[ae.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[ae.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[ae.AcquireTokenBySilentIframe,"ATBySltIframe"],[ae.InitializeBaseRequest,"InitBaseReq"],[ae.InitializeSilentRequest,"InitSltReq"],[ae.InitializeClientApplication,"InitClientApplication"],[ae.InitializeCache,"InitCache"],[ae.ImportExistingCache,"importCache"],[ae.SetUserData,"setUserData"],[ae.LocalStorageUpdated,"localStorageUpdated"],[ae.SilentIframeClientTokenHelper,"SIClientTHelper"],[ae.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[ae.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[ae.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[ae.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[ae.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[ae.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[ae.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[ae.GetAuthCodeUrl,"GetAuthCodeUrl"],[ae.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[ae.HandleCodeResponse,"HandleCodeResp"],[ae.HandleResponseEar,"HandleRespEar"],[ae.HandleResponseCode,"HandleRespCode"],[ae.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[ae.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[ae.AuthClientAcquireToken,"AuthClientAT"],[ae.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[ae.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[ae.PopTokenGenerateCnf,"PopTGenCnf"],[ae.PopTokenGenerateKid,"PopTGenKid"],[ae.HandleServerTokenResponse,"HandleServerTRes"],[ae.DeserializeResponse,"DeserializeRes"],[ae.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[ae.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[ae.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[ae.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[ae.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[ae.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[ae.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[ae.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[ae.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[ae.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[ae.AcquireTokenByCodeAsync,"ATByCodeAsync"],[ae.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[ae.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[ae.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[ae.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[ae.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[ae.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[ae.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[ae.NativeGenerateAuthResult,"NtvGenAuthRes"],[ae.RemoveHiddenIframe,"RemoveHiddenIframe"],[ae.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[ae.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[ae.GeneratePkceCodes,"GenPkceCodes"],[ae.GenerateCodeVerifier,"GenCodeVerifier"],[ae.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[ae.Sha256Digest,"Sha256Digest"],[ae.GetRandomValues,"GetRandomValues"],[ae.GenerateHKDF,"genHKDF"],[ae.GenerateBaseKey,"genBaseKey"],[ae.Base64Decode,"b64Decode"],[ae.UrlEncodeArr,"urlEncArr"],[ae.Encrypt,"encrypt"],[ae.Decrypt,"decrypt"],[ae.GenerateEarKey,"genEarKey"],[ae.DecryptEarResponse,"decryptEarResp"]]),iIe={NotStarted:0,InProgress:1,Completed:2}});var vD,Jy,RZ=le(()=>{"use strict";ql();vD=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Jy=class{generateId(){return"callback-id"}startMeasurement(e,r){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:iIe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new vD}}startPerformanceMeasurement(){return new vD}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}});function sIe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:u,telemetry:c,serverTelemetryManager:l,persistencePlugin:d,serializableCache:p}){let f={..._kt,...r};return{authOptions:Okt(t),systemOptions:{...bkt,...e},loggerOptions:f,cacheOptions:{...vkt,...n},storageInterface:i||new Nw(t.clientId,_Z,new _f(f),new Jy),networkInterface:s||Skt,cryptoInterface:o||_Z,clientCredentials:a||Akt,libraryInfo:{...wkt,...u},telemetry:{...Tkt,...c},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:p||null}}function Okt(t){return{clientCapabilities:[],azureCloudOptions:Ckt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function SD(t){return t.authOptions.authority.options.protocolMode===_c.OIDC}var bkt,_kt,vkt,Skt,wkt,Akt,Ckt,Tkt,wD=le(()=>{"use strict";Hxe();nD();yn();sD();oD();IZ();Fw();Bi();RZ();Oi();bkt={tokenRenewalOffsetSeconds:mb,preventCorsPreflight:!1},_kt={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xi.Info,correlationId:me.EMPTY_STRING},vkt={claimsBasedCachingEnabled:!1},Skt={async sendGetRequestAsync(){throw Ae(Lt)},async sendPostRequestAsync(){throw Ae(Lt)}},wkt={sku:me.SKU,version:gb,cpu:me.EMPTY_STRING,os:me.EMPTY_STRING},Akt={clientSecret:me.EMPTY_STRING,clientAssertion:void 0},Ckt={azureCloudInstance:Vy.None,tenant:`${me.DEFAULT_COMMON_TENANT}`},Tkt={application:{appName:"",appVersion:""}}});var Uo,Bw=le(()=>{"use strict";Uo={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"}});function xb(t,e){if(!t)throw Ae(Oy);try{let r=e(t);return JSON.parse(r)}catch{throw Ae(Rh)}}function jd(t){if(!t)throw Ae(Rh);let e=t.split(mf.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?me.EMPTY_STRING:e[1]}}var Ib=le(()=>{"use strict";Bi();yn();Oi();});var ID={};aa(ID,{ACCESS_TOKEN:()=>Rkt,BROKER_CLIENT_ID:()=>qw,BROKER_REDIRECT_URI:()=>xD,CCS_HEADER:()=>qkt,CLAIMS:()=>PZ,CLIENT_ASSERTION:()=>iee,CLIENT_ASSERTION_TYPE:()=>see,CLIENT_ID:()=>$d,CLIENT_INFO:()=>Nkt,CLIENT_REQUEST_ID:()=>VZ,CLIENT_SECRET:()=>nee,CODE:()=>jZ,CODE_CHALLENGE:()=>$Z,CODE_CHALLENGE_METHOD:()=>KZ,CODE_VERIFIER:()=>UZ,DEVICE_CODE:()=>ree,DOMAIN_HINT:()=>pee,EAR_JWE_CRYPTO:()=>hee,EAR_JWK:()=>fee,ERROR:()=>xkt,ERROR_DESCRIPTION:()=>Ikt,EXPIRES_IN:()=>kkt,FOCI:()=>Bkt,GRANT_TYPE:()=>MZ,ID_TOKEN:()=>Dkt,ID_TOKEN_HINT:()=>tee,INSTANCE_AWARE:()=>Rb,LOGIN_HINT:()=>dee,LOGOUT_HINT:()=>cee,NATIVE_BROKER:()=>uee,NONCE:()=>qZ,OBO_ASSERTION:()=>oee,ON_BEHALF_OF:()=>Fkt,POST_LOGOUT_URI:()=>eee,PROMPT:()=>LZ,REDIRECT_URI:()=>AD,REFRESH_TOKEN:()=>FZ,REFRESH_TOKEN_EXPIRES_IN:()=>Mkt,REQUESTED_TOKEN_USE:()=>aee,REQ_CNF:()=>TD,RESPONSE_MODE:()=>kZ,RESPONSE_TYPE:()=>DZ,RETURN_SPA_CODE:()=>OD,SCOPE:()=>NZ,SESSION_STATE:()=>Pkt,SID:()=>lee,STATE:()=>BZ,TOKEN_TYPE:()=>CD,X_APP_NAME:()=>XZ,X_APP_VER:()=>ZZ,X_CLIENT_CPU:()=>WZ,X_CLIENT_CURR_TELEM:()=>JZ,X_CLIENT_EXTRA_SKU:()=>Lkt,X_CLIENT_LAST_TELEM:()=>YZ,X_CLIENT_OS:()=>zZ,X_CLIENT_SKU:()=>GZ,X_CLIENT_VER:()=>HZ,X_MS_LIB_CAPABILITY:()=>QZ});var $d,AD,DZ,kZ,MZ,PZ,NZ,xkt,Ikt,Rkt,Dkt,FZ,kkt,Mkt,BZ,qZ,LZ,Pkt,Nkt,jZ,$Z,KZ,UZ,VZ,GZ,HZ,zZ,WZ,JZ,YZ,QZ,XZ,ZZ,eee,tee,ree,nee,iee,see,CD,TD,oee,aee,Fkt,Bkt,qkt,OD,uee,cee,lee,dee,pee,Lkt,qw,xD,Rb,fee,hee,Db=le(()=>{"use strict";$d="client_id",AD="redirect_uri",DZ="response_type",kZ="response_mode",MZ="grant_type",PZ="claims",NZ="scope",xkt="error",Ikt="error_description",Rkt="access_token",Dkt="id_token",FZ="refresh_token",kkt="expires_in",Mkt="refresh_token_expires_in",BZ="state",qZ="nonce",LZ="prompt",Pkt="session_state",Nkt="client_info",jZ="code",$Z="code_challenge",KZ="code_challenge_method",UZ="code_verifier",VZ="client-request-id",GZ="x-client-SKU",HZ="x-client-VER",zZ="x-client-OS",WZ="x-client-CPU",JZ="x-client-current-telemetry",YZ="x-client-last-telemetry",QZ="x-ms-lib-capability",XZ="x-app-name",ZZ="x-app-ver",eee="post_logout_redirect_uri",tee="id_token_hint",ree="device_code",nee="client_secret",iee="client_assertion",see="client_assertion_type",CD="token_type",TD="req_cnf",oee="assertion",aee="requested_token_use",Fkt="on_behalf_of",Bkt="foci",qkt="X-AnchorMailbox",OD="return_spa_code",uee="nativebroker",cee="logout_hint",lee="sid",dee="login_hint",pee="domain_hint",Lkt="x-client-xtra-sku",qw="brk_client_id",xD="brk_redirect_uri",Rb="instance_aware",fee="ear_jwk",hee="ear_jwe_crypto"});var lt={};aa(lt,{addApplicationTelemetry:()=>jw,addAuthorizationCode:()=>vee,addBrokerParameters:()=>Cf,addCcsOid:()=>wf,addCcsUpn:()=>$h,addClaims:()=>eg,addClientAssertion:()=>Uw,addClientAssertionType:()=>Vw,addClientCapabilitiesToClaims:()=>oIe,addClientId:()=>Xy,addClientInfo:()=>rg,addClientSecret:()=>Kw,addCodeChallengeParams:()=>Kkt,addCodeVerifier:()=>wee,addCorrelationId:()=>tg,addDeviceCode:()=>Ukt,addDomainHint:()=>Eee,addEARParameters:()=>Wkt,addExtraQueryParameters:()=>Af,addGrantType:()=>Gw,addIdTokenHint:()=>gee,addInstanceAware:()=>Hw,addLibraryInfo:()=>Lw,addLoginHint:()=>kb,addLogoutHint:()=>Aee,addNativeBroker:()=>$kt,addNonce:()=>_ee,addOboAssertion:()=>Vkt,addPassword:()=>zkt,addPopToken:()=>zw,addPostBodyParameters:()=>Jkt,addPostLogoutRedirectUri:()=>yee,addPrompt:()=>bee,addRedirectUri:()=>Zy,addRefreshToken:()=>See,addRequestTokenUse:()=>Gkt,addResponseMode:()=>mee,addResponseType:()=>jkt,addScopes:()=>Qy,addServerTelemetry:()=>Jw,addSid:()=>RD,addSshJwk:()=>Ww,addState:()=>$w,addThrottling:()=>Yw,addUsername:()=>Hkt,instrumentBrokerParams:()=>Yy});function Yy(t,e,r){if(!e)return;let n=t.get($d);n&&t.has(qw)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(AD)},e)}function jkt(t,e){t.set(DZ,e)}function mee(t,e){t.set(kZ,e||fb.QUERY)}function $kt(t){t.set(uee,"1")}function Qy(t,e,r=!0,n=gc){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],s=new qi(i);t.set(NZ,s.printScopes())}function Xy(t,e){t.set($d,e)}function Zy(t,e){t.set(AD,e)}function yee(t,e){t.set(eee,e)}function gee(t,e){t.set(tee,e)}function Eee(t,e){t.set(pee,e)}function kb(t,e){t.set(dee,e)}function $h(t,e){t.set(mn.CCS_HEADER,`UPN:${e}`)}function wf(t,e){t.set(mn.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function RD(t,e){t.set("sid",e)}function eg(t,e,r){let n=oIe(e,r);try{JSON.parse(n)}catch{throw Cn(Gy)}t.set(PZ,n)}function tg(t,e){t.set(VZ,e)}function Lw(t,e){t.set(GZ,e.sku),t.set(HZ,e.version),e.os&&t.set(zZ,e.os),e.cpu&&t.set(WZ,e.cpu)}function jw(t,e){e?.appName&&t.set(XZ,e.appName),e?.appVersion&&t.set(ZZ,e.appVersion)}function bee(t,e){t.set(LZ,e)}function $w(t,e){e&&t.set(BZ,e)}function _ee(t,e){t.set(qZ,e)}function Kkt(t,e,r){if(e&&r)t.set($Z,e),t.set(KZ,r);else throw Cn(Ab)}function vee(t,e){t.set(jZ,e)}function Ukt(t,e){t.set(ree,e)}function See(t,e){t.set(FZ,e)}function wee(t,e){t.set(UZ,e)}function Kw(t,e){t.set(nee,e)}function Uw(t,e){e&&t.set(iee,e)}function Vw(t,e){e&&t.set(see,e)}function Vkt(t,e){t.set(oee,e)}function Gkt(t,e){t.set(aee,e)}function Gw(t,e){t.set(MZ,e)}function rg(t){t.set(Uxe,"1")}function Hw(t){t.has(Rb)||t.set(Rb,"true")}function Af(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}function oIe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw Cn(Gy)}return e&&e.length>0&&(r.hasOwnProperty(Ay.ACCESS_TOKEN)||(r[Ay.ACCESS_TOKEN]={}),r[Ay.ACCESS_TOKEN][Ay.XMS_CC]={values:e}),JSON.stringify(r)}function Hkt(t,e){t.set(hw.username,e)}function zkt(t,e){t.set(hw.password,e)}function zw(t,e){e&&(t.set(CD,or.POP),t.set(TD,e))}function Ww(t,e){e&&(t.set(CD,or.SSH),t.set(TD,e))}function Jw(t,e){t.set(JZ,e.generateCurrentRequestHeaderValue()),t.set(YZ,e.generateLastRequestHeaderValue())}function Yw(t){t.set(QZ,qd.X_MS_LIB_CAPABILITY_VALUE)}function Aee(t,e){t.set(cee,e)}function Cf(t,e,r){t.has(qw)||t.set(qw,e),t.has(xD)||t.set(xD,r)}function Wkt(t,e){t.set(fee,encodeURIComponent(e)),t.set(hee,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Jkt(t,e){Object.entries(e).forEach(([r,n])=>{n&&t.set(r,n)})}var Mb=le(()=>{"use strict";yn();Db();Rw();zy();Fh();});var vc,Cee=le(()=>{"use strict";vc={Default:0,Adfs:1,Dsts:2,Ciam:3}});function aIe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}var uIe=le(()=>{"use strict";});function cIe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}var lIe=le(()=>{"use strict";});function dIe(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}var pIe=le(()=>{"use strict";});var fIe,hr,Tf=le(()=>{"use strict";fIe=(t,e,r,n,i)=>(...s)=>{r.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}try{let a=t(...s);return o?.end({success:!0}),r.trace(`Returning result from ${e}`),a}catch(a){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw o?.end({success:!1},a),a}},hr=(t,e,r,n,i)=>(...s)=>{r.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}return n?.setPreQueueTime(e,i),t(...s).then(a=>(r.trace(`Returning result from ${e}`),o?.end({success:!0}),a)).catch(a=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw o?.end({success:!1},a),a})}});var Qw,hIe=le(()=>{"use strict";yn();ql();Tf();Qw=class t{constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=Ty.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let s=await hr(this.getRegionFromIMDS.bind(this),ae.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(me.IMDS_VERSION,i);if(s.status===sr.SUCCESS&&(n=s.body,r.region_source=Ty.IMDS),s.status===sr.BAD_REQUEST){let o=await hr(this.getCurrentVersion.bind(this),ae.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!o)return r.region_source=Ty.FAILED_AUTO_DETECTION,null;let a=await hr(this.getRegionFromIMDS.bind(this),ae.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(o,i);a.status===sr.SUCCESS&&(n=a.body,r.region_source=Ty.IMDS)}}catch{return r.region_source=Ty.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=Ty.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${me.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,me.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${me.IMDS_ENDPOINT}?format=json`,e);return r.status===sr.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};Qw.IMDS_OPTIONS={headers:{Metadata:"true"}}});var vs={};aa(vs,{delay:()=>Xkt,isCacheExpired:()=>Qkt,isTokenExpired:()=>Pb,nowSeconds:()=>lu,toDateFromSeconds:()=>Xw,toSecondsFromDate:()=>Ykt,wasClockTurnedBack:()=>Tee});function lu(){return Math.round(new Date().getTime()/1e3)}function Ykt(t){return t.getTime()/1e3}function Xw(t){return t?new Date(Number(t)*1e3):new Date}function Pb(t,e){let r=Number(t)||0;return lu()+e>r}function Qkt(t,e){let r=Number(t)+e*24*60*60*1e3;return Date.now()>r}function Tee(t){return Number(t)>lu()}function Xkt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}var Kh=le(()=>{"use strict";});var Vo={};aa(Vo,{createAccessTokenEntity:()=>xee,createIdTokenEntity:()=>Oee,createRefreshTokenEntity:()=>Iee,generateAppMetadataKey:()=>iMt,generateAuthorityMetadataExpiresAt:()=>kD,isAccessTokenEntity:()=>Zkt,isAppMetadataEntity:()=>sMt,isAuthorityMetadataEntity:()=>oMt,isAuthorityMetadataExpired:()=>MD,isCredentialEntity:()=>DD,isIdTokenEntity:()=>eMt,isRefreshTokenEntity:()=>tMt,isServerTelemetryEntity:()=>rMt,isThrottlingEntity:()=>nMt,updateAuthorityEndpointMetadata:()=>Nb,updateCloudDiscoveryMetadata:()=>Zw});function Oee(t,e,r,n,i){return{credentialType:Jr.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i,lastUpdatedAt:Date.now().toString()}}function xee(t,e,r,n,i,s,o,a,u,c,l,d,p,f,h){let g={homeAccountId:t,credentialType:Jr.ACCESS_TOKEN,secret:r,cachedAt:lu().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:n,realm:i,target:s,tokenType:l||or.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(g.userAssertionHash=d),c&&(g.refreshOn=c.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=h),g.tokenType?.toLowerCase()!==or.BEARER.toLowerCase())switch(g.credentialType=Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case or.POP:let _=Sf(r,u);if(!_?.cnf?.kid)throw Ae(jy);g.keyId=_.cnf.kid;break;case or.SSH:g.keyId=p}return g}function Iee(t,e,r,n,i,s,o){let a={credentialType:Jr.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function DD(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function Zkt(t){return t?DD(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Jr.ACCESS_TOKEN||t.credentialType===Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function eMt(t){return t?DD(t)&&t.hasOwnProperty("realm")&&t.credentialType===Jr.ID_TOKEN:!1}function tMt(t){return t?DD(t)&&t.credentialType===Jr.REFRESH_TOKEN:!1}function rMt(t,e){let r=t.indexOf(Zi.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}function nMt(t,e){let r=!1;t&&(r=t.indexOf(qd.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}function iMt({environment:t,clientId:e}){return[pw,t,e].join(mf.CACHE_KEY_SEPARATOR).toLowerCase()}function sMt(t,e){return e?t.indexOf(pw)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function oMt(t,e){return e?t.indexOf(hb.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function kD(){return lu()+hb.REFRESH_TIME_SECONDS}function Nb(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}function Zw(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}function MD(t){return t.expiresAt<=lu()}var PD=le(()=>{"use strict";Ob();Bi();yn();Kh();Oi();});function mIe(t){let n=new wr(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Fa.COMMON:case Fa.ORGANIZATIONS:case Fa.CONSUMERS:return;default:return n}}function ND(t){return t.endsWith(me.FORWARD_SLASH)?t:`${t}${me.FORWARD_SLASH}`}function Ree(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw Cn(Hy)}return{canonicalAuthority:t.authority?ND(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}var Of,FD=le(()=>{"use strict";Cee();uIe();Lh();Bi();yn();TZ();zy();Fw();oD();lIe();pIe();hIe();bc();ql();Tf();PD();Oi();Fh();Of=class t{constructor(e,r,n,i,s,o,a,u){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=u||!1,this.regionDiscovery=new Qw(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(me.CIAM_AUTH_URL))return vc.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case me.ADFS:return vc.Adfs;case me.DSTS:return vc.Dsts}return vc.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new wr(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ae(Ko)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ae(Ko)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ae(Ko)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ae(Ky);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ae(Ko)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ae(Ko)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ae(Ko)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===vc.Default&&this.protocolMode!==_c.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new wr(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,u)=>{let c=s[u];if(u===0&&this.canReplaceTenant(i)){let l=new wr(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];c!==l&&(this.logger.verbose(`Replacing tenant domain name ${c} with id ${l}`),c=l)}a!==c&&(r=r.replace(`/${c}/`,`/${a}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===vc.Adfs||this.protocolMode===_c.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(ae.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await hr(this.updateCloudDiscoveryMetadata.bind(this),ae.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await hr(this.updateEndpointMetadata.bind(this),ae.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:kD(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==$o.CACHE&&n?.source!==$o.CACHE&&(e.expiresAt=kD(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===$o.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await hr(this.updateMetadataWithRegionalInformation.bind(this),ae.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);Nb(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await hr(this.getEndpointMetadataFromNetwork.bind(this),ae.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await hr(this.updateMetadataWithRegionalInformation.bind(this),ae.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),Nb(e,n,!0),$o.NETWORK;throw Ae(Ry,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),Nb(e,r,!1),{source:$o.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return Nb(e,i,!1),{source:$o.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=MD(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:$o.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new wr(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Cn(Cb)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ae.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return aIe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in wZ?wZ[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==me.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=eD.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await hr(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ae.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=eD.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=eD.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await hr(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return Zw(e,n,!0),$o.NETWORK;throw Cn(Tb)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||me.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||me.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||me.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Zw(e,r,!1),$o.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=eIe(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Zw(e,i,!1),$o.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=MD(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),$o.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===vc.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=Mw(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Cn(Hy)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${me.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),s,o;if(cIe(i.body))s=i.body,o=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(dIe(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===me.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Mw(o,this.hostnameAndPort)}catch(i){if(i instanceof ar)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&wr.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Vy.None){let i=r.tenant?r.tenant:me.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return me.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ae(Ko)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return CZ.has(e)}static isPublicCloudAuthority(e){return me.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new wr(e);i.validateAsUri();let s=i.getUrlComponents(),o=`${r}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${r}.${me.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=wr.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new wr(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(me.CIAM_AUTH_URL)){let s=i.HostNameAndPort.split(".")[0];r=`${r}${s}${me.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};Of.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Fa.COMMON,Fa.CONSUMERS,Fa.ORGANIZATIONS])});var BD={};aa(BD,{createDiscoveredInstance:()=>Dee});async function Dee(t,e,r,n,i,s,o){o?.addQueueMeasurement(ae.AuthorityFactoryCreateDiscoveredInstance,s);let a=Of.transformCIAMAuthority(ND(t)),u=new Of(a,e,r,n,i,s,o);try{return await hr(u.resolveEndpointsAsync.bind(u),ae.AuthorityResolveEndpointsAsync,i,o,s)(),u}catch{throw Ae(Ko)}}var kee=le(()=>{"use strict";FD();Bi();ql();Tf();Oi();});var Kd,e9=le(()=>{"use strict";bc();Kd=class t extends ar{constructor(e,r,n,i,s){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,t.prototype)}}});function Fb(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var qD=le(()=>{"use strict";});var t9,yIe=le(()=>{"use strict";yn();e9();qD();t9=class t{static generateThrottlingStorageKey(e){return`${qd.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),s=e.getThrottlingCache(i);if(s){if(s.throttleTime<Date.now()){e.removeItem(i,n);return}throw new Kd(s.errorCodes?.join(" ")||me.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let s={throttleTime:t.calculateThrottleTime(parseInt(n.headers[mn.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),s,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(mn.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||qd.DEFAULT_THROTTLE_TIME_SECONDS),n+qd.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let s=Fb(r,n,i),o=this.generateThrottlingStorageKey(s);e.removeItem(o,n.correlationId)}}});var LD,gIe=le(()=>{"use strict";bc();LD=class t extends ar{constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}}});var Go,r9=le(()=>{"use strict";wD();nD();yn();sD();Bw();Ib();Mb();Wy();kee();ql();yIe();bc();Bi();gIe();Tf();Oi();Go=class{constructor(e,r){this.config=sIe(e),this.logger=new _f(this.config.loggerOptions,iD,gb),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[mn.CONTENT_TYPE]=me.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Uo.HOME_ACCOUNT_ID:try{let n=jd(e.credential);r[mn.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Uo.UPN:r[mn.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,s,o){o&&this.performanceClient?.addQueueMeasurement(o,s);let a=await this.sendPostRequest(i,e,{body:r,headers:n},s);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,r,n,i){t9.preProcess(this.cacheManager,e,i);let s;try{s=await hr(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ae.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let o=s.headers||{};this.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:o[mn.X_MS_HTTP_VERSION]||"",requestId:o[mn.X_MS_REQUEST_ID]||""},i)}catch(o){if(o instanceof LD){let a=o.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[mn.X_MS_HTTP_VERSION]||"",requestId:a[mn.X_MS_REQUEST_ID]||"",contentTypeHeader:a[mn.CONTENT_TYPE]||void 0,contentLengthHeader:a[mn.CONTENT_LENGTH]||void 0,httpStatus:o.httpStatus},i),o.error}throw o instanceof ar?o:Ae(Iy)}return t9.postProcess(this.cacheManager,e,s,i),s}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(ae.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await Dee(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&Cf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Af(r,e.tokenQueryParameters),tg(r,e.correlationId),Yy(r,e.correlationId,this.performanceClient),Ld(r)}}});function jD(t){return t&&(t.tid||t.tfp||t.acr)||null}var Mee=le(()=>{"use strict";});var Ll,Pee=le(()=>{"use strict";yn();Ib();ED();Bi();Cee();Mee();Fw();Oi();Ll=class t{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,r,n){let i=new t;r.authorityType===vc.Adfs?i.authorityType=Cy.ADFS_ACCOUNT_TYPE:r.protocolMode===_c.OIDC?i.authorityType=Cy.GENERIC_ACCOUNT_TYPE:i.authorityType=Cy.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&n&&(s=xb(e.clientInfo,n),s.xms_tdbr&&(i.dataBoundary=s.xms_tdbr==="EU"?"EU":"None")),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||r&&r.getPreferredCache();if(!o)throw Ae(Ef);i.environment=o,i.realm=s?.utid||jD(e.idTokenClaims)||"",i.localAccountId=s?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,u=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||u||"",i.loginHint=e.idTokenClaims?.login_hint,i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let c=Dw(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[c]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||Cy.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i.dataBoundary=e.dataBoundary,i}static generateHomeAccountId(e,r,n,i,s){if(!(r===vc.Adfs||r===vc.Dsts)){if(e)try{let o=xb(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let s=e.idTokenClaims||{},o=r.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.loginHint===r.loginHint&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}}});var ng,$D,KD,Nee,EIe,bIe,_Ie,ig,Fee=le(()=>{"use strict";ng="no_tokens_found",$D="native_account_unavailable",KD="refresh_token_expired",Nee="ux_not_allowed",EIe="interaction_required",bIe="consent_required",_Ie="login_required",ig="bad_token"});function VD(t,e,r){let n=!!t&&vIe.indexOf(t)>-1,i=!!r&&aMt.indexOf(r)>-1,s=!!e&&vIe.some(o=>e.indexOf(o)>-1);return n||s||i}function Bee(t){return new Ud(t,UD[t])}var vIe,aMt,UD,g9r,Ud,GD=le(()=>{"use strict";yn();bc();Fee();vIe=[EIe,bIe,_Ie,ig,Nee],aMt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],UD={[ng]:"No refresh token found in the cache. Please sign-in.",[$D]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[KD]:"Refresh token has expired.",[ig]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Nee]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},g9r={noTokensFoundError:{code:ng,desc:UD[ng]},native_account_unavailable:{code:$D,desc:UD[$D]},bad_token:{code:ig,desc:UD[ig]}},Ud=class t extends ar{constructor(e,r,n,i,s,o,a,u){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||me.EMPTY_STRING,this.traceId=s||me.EMPTY_STRING,this.correlationId=o||me.EMPTY_STRING,this.claims=a||me.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=u}}});var HD,SIe=le(()=>{"use strict";yn();Bi();Oi();HD=class t{static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${me.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw Ae(Ph);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw Ae(Ph);if(!r)throw Ae(Bl);try{let n=r.split(me.RESOURCE_DELIM),i=n[0],s=n.length>1?n.slice(1).join(me.RESOURCE_DELIM):me.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||me.EMPTY_STRING,libraryState:a}}catch{throw Ae(Bl)}}}});var uMt,Uh,zD=le(()=>{"use strict";Kh();Lh();ql();Tf();uMt={SW:"sw"},Uh=class{constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(ae.PopTokenGenerateCnf,e.correlationId);let n=await hr(this.generateKid.bind(this),ae.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(ae.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:uMt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:u,shrOptions:c}=n,d=(o?new wr(o):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:lu(),m:s?.toUpperCase(),u:d?.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:d?.AbsolutePath,q:d?.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},r,c,n.correlationId)}}});var jl,qee=le(()=>{"use strict";jl=class{constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}});function wIe(t,e,r,n,i,s,o,a,u,c,l,d){d?.verbose("setCachedAccount called");let f=t.getAccountKeys().find(w=>w.startsWith(r)),h=null;f&&(h=t.getAccount(f,i));let g=h||Ll.createAccount({homeAccountId:r,idTokenClaims:s,clientInfo:o,environment:a,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,n),_=g.tenantProfiles||[],S=u||g.realm;if(S&&!_.find(w=>w.tenantId===S)){let w=Dw(r,g.localAccountId,S,s);_.push(w)}return g.tenantProfiles=_,g}var ts,n9=le(()=>{"use strict";Bi();e9();Rw();Pee();GD();SIe();yn();zD();qee();ql();Ob();Mee();ED();PD();Kh();Oi();ts=class t{constructor(e,r,n,i,s,o,a){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||me.NOT_AVAILABLE} - Timestamp: ${e.timestamp||me.NOT_AVAILABLE} - Description: ${e.error_description||me.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||me.NOT_AVAILABLE} - Trace ID: ${e.trace_id||me.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,s=new Kd(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=sr.SERVER_ERROR_RANGE_START&&e.status<=sr.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(r&&e.status&&e.status>=sr.CLIENT_ERROR_RANGE_START&&e.status<=sr.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw VD(e.error,e.error_description,e.suberror)?new Ud(e.error,e.error_description,e.suberror,e.timestamp||me.EMPTY_STRING,e.trace_id||me.EMPTY_STRING,e.correlation_id||me.EMPTY_STRING,e.claims||me.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,r,n,i,s,o,a,u,c){this.performanceClient?.addQueueMeasurement(ae.HandleServerTokenResponse,e.correlation_id);let l;if(e.id_token){if(l=Sf(e.id_token||me.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&l.nonce!==s.nonce)throw Ae(My);if(i.maxAge||i.maxAge===0){let h=l.auth_time;if(!h)throw Ae(yf);kw(h,i.maxAge)}}this.homeAccountIdentifier=Ll.generateHomeAccountId(e.client_info||me.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,l);let d;s&&s.state&&(d=HD.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;let p=this.generateCacheRecord(e,r,n,i,l,o,s),f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new jl(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),a&&!u&&p.account){let h=this.cacheStorage.generateAccountKey(p.account.getAccountInfo());if(!this.cacheStorage.getAccount(h,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,p,!1,i,l,d,void 0,c)}await this.cacheStorage.saveCacheRecord(p,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return t.generateAuthenticationResult(this.cryptoObj,r,p,!1,i,l,d,e,c)}generateCacheRecord(e,r,n,i,s,o,a){let u=r.getPreferredCache();if(!u)throw Ae(Ef);let c=jD(s),l,d;e.id_token&&s&&(l=Oee(this.homeAccountIdentifier,u,e.id_token,this.clientId,c||""),d=wIe(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,s,e.client_info,u,c,a,void 0,this.logger));let p=null;if(e.access_token){let g=e.scope?qi.fromString(e.scope):new qi(i.scopes||[]),_=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,S=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,w=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,C=n+_,A=C+S,O=w&&w>0?n+w:void 0;p=xee(this.homeAccountIdentifier,u,e.access_token,this.clientId,c||r.tenant||"",g.printScopes(),C,A,this.cryptoObj.base64Decode,O,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let f=null;if(e.refresh_token){let g;if(e.refresh_token_expires_in){let _=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;g=n+_}f=Iee(this.homeAccountIdentifier,u,e.refresh_token,this.clientId,e.foci,o,g)}let h=null;return e.foci&&(h={clientId:this.clientId,environment:u,familyId:e.foci}),{account:d,idToken:l,accessToken:p,refreshToken:f,appMetadata:h}}static async generateAuthenticationResult(e,r,n,i,s,o,a,u,c){let l=me.EMPTY_STRING,d=[],p=null,f,h,g=me.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===or.POP&&!s.popKid){let C=new Uh(e),{secret:A,keyId:O}=n.accessToken;if(!O)throw Ae(Uy);l=await C.signPopToken(A,O,s)}else l=n.accessToken.secret;d=qi.fromString(n.accessToken.target).asArray(),p=Xw(n.accessToken.expiresOn),f=Xw(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(h=Xw(n.accessToken.refreshOn))}n.appMetadata&&(g=n.appMetadata.familyId===Ih?Ih:"");let _=o?.oid||o?.sub||"",S=o?.tid||"";u?.spa_accountid&&n.account&&(n.account.nativeAccountId=u?.spa_accountid);let w=n.account?gD(n.account.getAccountInfo(),void 0,o,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:_,tenantId:S,scopes:d,account:w,idToken:n?.idToken?.secret||"",idTokenClaims:o||{},accessToken:l,fromCache:i,expiresOn:p,extExpiresOn:f,refreshOn:h,correlationId:s.correlationId,requestId:c||me.EMPTY_STRING,familyId:g,tokenType:n.accessToken?.tokenType||me.EMPTY_STRING,state:a?a.userRequestState:me.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||me.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||me.EMPTY_STRING,code:u?.spa_code,fromNativeBroker:!1}}}});async function Ho(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}var WD=le(()=>{"use strict";});var i9,AIe=le(()=>{"use strict";r9();Mb();Wy();yn();Db();wD();n9();Bh();Bi();Lh();zD();Kh();Ib();Bw();zy();ql();Tf();WD();qD();Oi();Fh();i9=class extends Go{constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(ae.AuthClientAcquireToken,e.correlationId),!e.code)throw Ae(Fy);let n=lu(),i=await hr(this.executeTokenRequest.bind(this),ae.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=i.headers?.[mn.X_MS_REQUEST_ID],o=new ts(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),hr(o.handleServerTokenResponse.bind(o),ae.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Cn(wb);let r=this.createLogoutUrlQueryString(e);return wr.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(ae.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=wr.appendQueryString(e.tokenEndpoint,n),s=await hr(this.createTokenRequestBody.bind(this),ae.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),o;if(r.clientInfo)try{let c=xb(r.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${c.uid}${mf.CLIENT_INFO_SEPARATOR}${c.utid}`,type:Uo.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}let a=this.createTokenRequestHeaders(o||r.ccsCredential),u=Fb(this.config.authOptions.clientId,r);return hr(this.executePostToTokenEndpoint.bind(this),ae.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,s,a,u,r.correlationId,ae.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ae.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(Xy(r,e.embeddedClientId||e.tokenBodyParameters?.[$d]||this.config.authOptions.clientId),this.includeRedirectUri)Zy(r,e.redirectUri);else if(!e.redirectUri)throw Cn(Eb);if(Qy(r,e.scopes,!0,this.oidcDefaultScopes),vee(r,e.code),Lw(r,this.config.libraryInfo),jw(r,this.config.telemetry.application),Yw(r),this.serverTelemetryManager&&!SD(this.config)&&Jw(r,this.serverTelemetryManager),e.codeVerifier&&wee(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&Kw(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;Uw(r,await Ho(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Vw(r,i.assertionType)}if(Gw(r,Ec.AUTHORIZATION_CODE_GRANT),rg(r),e.authenticationScheme===or.POP){let i=new Uh(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await hr(i.generateCnf.bind(i),ae.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,zw(r,s)}else if(e.authenticationScheme===or.SSH)if(e.sshJwk)Ww(r,e.sshJwk);else throw Cn(Nh);(!gn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&eg(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=xb(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${mf.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Uo.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case Uo.HOME_ACCOUNT_ID:try{let i=jd(n.credential);wf(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Uo.UPN:$h(r,n.credential);break}return e.embeddedClientId&&Cf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Af(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[OD])&&Af(r,{[OD]:"1"}),Yy(r,e.correlationId,this.performanceClient),Ld(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&yee(r,e.postLogoutRedirectUri),e.correlationId&&tg(r,e.correlationId),e.idTokenHint&&gee(r,e.idTokenHint),e.state&&$w(r,e.state),e.logoutHint&&Aee(r,e.logoutHint),e.extraQueryParameters&&Af(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&Hw(r),Ld(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}});var cMt,sg,CIe=le(()=>{"use strict";wD();r9();Mb();Wy();yn();Db();n9();zD();Bh();zy();Bi();e9();Kh();Lh();Bw();Ib();GD();ql();Tf();WD();qD();Fee();Fh();Oi();cMt=300,sg=class extends Go{constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireToken,e.correlationId);let r=lu(),n=await hr(this.executeTokenRequest.bind(this),ae.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[mn.X_MS_REQUEST_ID],s=new ts(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(n.body),hr(s.handleServerTokenResponse.bind(s),ae.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw Cn(Sb);if(this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ae(gf);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof Ud&&n.errorCode===ng,s=n instanceof Kd&&n.errorCode===fw.INVALID_GRANT_ERROR&&n.subError===fw.CLIENT_MISMATCH_ERROR;if(i||s)return hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=fIe(this.cacheManager.getRefreshToken.bind(this.cacheManager),ae.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw Bee(ng);if(n.expiresOn&&Pb(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||cMt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),Bee(KD);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||or.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Uo.HOME_ACCOUNT_ID}};try{return await hr(this.acquireToken.bind(this),ae.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof Ud&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),s.subError===ig)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let o=this.cacheManager.generateCredentialKey(n);this.cacheManager.removeRefreshToken(o,e.correlationId)}throw s}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=wr.appendQueryString(r.tokenEndpoint,n),s=await hr(this.createTokenRequestBody.bind(this),ae.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=Fb(this.config.authOptions.clientId,e);return hr(this.executePostToTokenEndpoint.bind(this),ae.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,ae.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(Xy(r,e.embeddedClientId||e.tokenBodyParameters?.[$d]||this.config.authOptions.clientId),e.redirectUri&&Zy(r,e.redirectUri),Qy(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Gw(r,Ec.REFRESH_TOKEN_GRANT),rg(r),Lw(r,this.config.libraryInfo),jw(r,this.config.telemetry.application),Yw(r),this.serverTelemetryManager&&!SD(this.config)&&Jw(r,this.serverTelemetryManager),See(r,e.refreshToken),this.config.clientCredentials.clientSecret&&Kw(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;Uw(r,await Ho(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Vw(r,n.assertionType)}if(e.authenticationScheme===or.POP){let n=new Uh(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await hr(n.generateCnf.bind(n),ae.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,zw(r,i)}else if(e.authenticationScheme===or.SSH)if(e.sshJwk)Ww(r,e.sshJwk);else throw Cn(Nh);if((!gn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&eg(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Uo.HOME_ACCOUNT_ID:try{let n=jd(e.ccsCredential.credential);wf(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Uo.UPN:$h(r,e.ccsCredential.credential);break}return e.embeddedClientId&&Cf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Af(r,e.tokenBodyParameters),Yy(r,e.correlationId,this.performanceClient),Ld(r)}}});var s9,TIe=le(()=>{"use strict";r9();Kh();Bi();n9();yn();Bh();Ob();ql();Tf();FD();Oi();s9=class extends Go{constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(ae.SilentFlowClientAcquireCachedToken,e.correlationId);let r=An.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!gn.isEmptyObj(e.claims))throw this.setCacheOutcome(An.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ae(bf);if(!e.account)throw Ae(gf);let n=e.account.tenantId||mIe(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,n);if(s){if(Tee(s.cachedAt)||Pb(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(An.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ae(bf);s.refreshOn&&Pb(s.refreshOn,0)&&(r=An.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(An.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ae(bf);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await hr(this.generateResultFromCacheRecord.bind(this),ae.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==An.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(ae.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=Sf(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw Ae(yf);kw(i,r.maxAge)}return ts.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}}});var o9={};aa(o9,{getAuthorizationCodePayload:()=>pMt,getAuthorizeUrl:()=>dMt,getStandardAuthorizeRequestParameters:()=>lMt,validateAuthorizationResponse:()=>OIe});function lMt(t,e,r,n){let i=e.correlationId,s=new Map;Xy(s,e.embeddedClientId||e.extraQueryParameters?.[$d]||t.clientId);let o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Qy(s,o,!0,t.authority.options.OIDCOptions?.defaultScopes),Zy(s,e.redirectUri),tg(s,i),mee(s,e.responseMode),rg(s),e.prompt&&(bee(s,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(Eee(s,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==db.SELECT_ACCOUNT)if(e.sid&&e.prompt===db.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),RD(s,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let a=hMt(e.account),u=mMt(e.account);if(u&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),kb(s,u),n?.addFields({loginHintFromClaim:!0},i);try{let c=jd(e.account.homeAccountId);wf(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===db.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),RD(s,a),n?.addFields({sidFromClaim:!0},i);try{let c=jd(e.account.homeAccountId);wf(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),kb(s,e.loginHint),$h(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),kb(s,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let c=jd(e.account.homeAccountId);wf(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),kb(s,e.loginHint),$h(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&_ee(s,e.nonce),e.state&&$w(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&eg(s,e.claims,t.clientCapabilities),e.embeddedClientId&&Cf(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Rb))&&Hw(s),s}function dMt(t,e,r,n){let i=Ld(e,r,n);return wr.appendQueryString(t.authorizationEndpoint,i)}function pMt(t,e){if(OIe(t,e),!t.code)throw Ae($y);return t}function OIe(t,e){if(!t.state||!e)throw t.state?Ae(kh,"Cached State"):Ae(kh,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw Ae(Bl,t.state)}try{n=decodeURIComponent(e)}catch{throw Ae(Bl,t.state)}if(r!==n)throw Ae(ky);if(t.error||t.error_description||t.suberror){let i=fMt(t);throw VD(t.error,t.error_description,t.suberror)?new Ud(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Kd(t.error||"",t.error_description,t.suberror,i)}}function fMt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}function hMt(t){return t.idTokenClaims?.sid||null}function mMt(t){return t.loginHint||t.idTokenClaims?.login_hint||null}var xIe=le(()=>{"use strict";Mb();Db();yn();Ib();Wy();Lh();Bi();GD();e9();Oi();});function yMt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:s}=t,o=new Map([[0,[r,n]],[2,[i,s]]]),a=[];if(e?.length){if(a=e.split(IIe),a.length<4)return e}else a=Array.from({length:4},()=>RIe);return o.forEach((u,c)=>{u.length===2&&u[0]?.length&&u[1]?.length&&gMt({skuArr:a,index:c,skuName:u[0],skuVersion:u[1]})}),a.join(IIe)}function gMt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(RIe))}var IIe,RIe,a9,DIe=le(()=>{"use strict";yn();bc();IIe=",",RIe="|";a9=class t{constructor(e,r){this.cacheOutcome=An.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||me.EMPTY_STRING,this.wrapperVer=e.wrapperVer||me.EMPTY_STRING,this.telemetryCacheKey=Zi.CACHE_KEY+mf.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Zi.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(Zi.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(Zi.VALUE_SEPARATOR);return[Zi.SCHEMA_VERSION,o,i].join(Zi.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(Zi.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(Zi.VALUE_SEPARATOR),s=e.errors.length,o=r<s?Zi.OVERFLOW_TRUE:Zi.OVERFLOW_FALSE,a=[s,o].join(Zi.VALUE_SEPARATOR);return[Zi.SCHEMA_VERSION,e.cacheHits,n,i,a].join(Zi.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=Zi.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ar?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(Zi.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,s=e.errors.length;for(r=0;r<s;r++){let o=e.failedRequests[2*r]||me.EMPTY_STRING,a=e.failedRequests[2*r+1]||me.EMPTY_STRING,u=e.errors[r]||me.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+u.length+3,i<Zi.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||me.EMPTY_STRING),e.push(this.regionSource||me.EMPTY_STRING),e.push(this.regionOutcome||me.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return yMt(e)}}});var pi=le(()=>{"use strict";AIe();CIe();TIe();r9();Bw();FD();oD();Fw();IZ();Pee();Lh();xIe();Mb();n9();Rw();nD();bc();Bi();Oi();yn();Bh();DIe();Ob();kee();PD();Kh();Wy();Db();qee();WD();});var Vh,JD=le(()=>{"use strict";pi();Vh=class{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(a=>JSON.parse(a)),lastUpdatedAt:Date.now().toString()},o=new Ll;jh.toObject(o,s),r[n]=o}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}});var kIe=le(()=>{"use strict";ZR();JD();});var TMt,OMt,xf,yo,$l,Kl,ns,YD,MIe,PIe,NIe,FIe,QD,Lee,Sc,Gh,wc,Tn=le(()=>{"use strict";pi();TMt="managed_identity",OMt=`https://login.microsoftonline.com/${TMt}/`,xf={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},yo={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},$l={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Kl={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},ns={GET:"get",POST:"post"},YD={SUCCESS_RANGE_START:sr.SUCCESS_RANGE_START,SUCCESS_RANGE_END:sr.SUCCESS_RANGE_END,SERVER_ERROR:sr.SERVER_ERROR},MIe="REGION_NAME",PIe="MSAL_FORCE_REGION",NIe=32,FIe={SHA256:"sha256"},QD={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Lee={KEY_SEPARATOR:"-"},Sc={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},Gh={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},wc={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"}});var Bb,BIe=le(()=>{"use strict";Bb=class{static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}}});var XD,jee,u9,qIe,LIe,jIe,$Ie=le(()=>{"use strict";pi();Tn();BIe();XD=Dt(require("http"),1),jee=Dt(require("https"),1);u9=class{constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?qIe(e,this.proxyUrl,ns.GET,r,this.customAgentOptions,n):LIe(e,ns.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?qIe(e,this.proxyUrl,ns.POST,r,this.customAgentOptions):LIe(e,ns.POST,r,this.customAgentOptions)}},qIe=(t,e,r,n,i,s)=>{let o=new URL(t),a=new URL(e),u=n?.headers||{},c={host:a.hostname,port:a.port,method:"CONNECT",path:o.hostname,headers:u};i&&Object.keys(i).length&&(c.agent=new XD.default.Agent(i));let l="";if(r===ns.POST){let p=n?.body||"";l=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${p.length}\r
\r
${p}`}else s&&(c.timeout=s);let d=`${r.toUpperCase()} ${o.href} HTTP/1.1\r
Host: ${o.host}\r
Connection: close\r
`+l+`\r
`;return new Promise((p,f)=>{let h=XD.default.request(c);s&&h.on("timeout",()=>{h.destroy(),f(new Error("Request time out"))}),h.end(),h.on("connect",(g,_)=>{let S=g?.statusCode||YD.SERVER_ERROR;(S<YD.SUCCESS_RANGE_START||S>YD.SUCCESS_RANGE_END)&&(h.destroy(),_.destroy(),f(new Error(`Error connecting to proxy. Http status code: ${g.statusCode}. Http status message: ${g?.statusMessage||"Unknown"}`))),_.write(d);let w=[];_.on("data",C=>{w.push(C)}),_.on("end",()=>{let A=Buffer.concat([...w]).toString().split(`\r
`),O=parseInt(A[0].split(" ")[1]),x=A[0].split(" ").slice(2).join(" "),R=A[A.length-1],M=A.slice(1,A.length-2),I=new Map;M.forEach(k=>{let H=k.split(new RegExp(/:\s(.*)/s)),ie=H[0],j=H[1];try{let V=JSON.parse(j);V&&typeof V=="object"&&(j=V)}catch{}I.set(ie,j)});let B=Object.fromEntries(I),U=Bb.getNetworkResponse(B,jIe(O,x,B,R),O);(O<sr.SUCCESS_RANGE_START||O>sr.SUCCESS_RANGE_END)&&U.body.error!==Sc.AUTHORIZATION_PENDING&&h.destroy(),p(U)}),_.on("error",C=>{h.destroy(),_.destroy(),f(new Error(C.toString()))})}),h.on("error",g=>{h.destroy(),f(new Error(g.toString()))})})},LIe=(t,e,r,n,i)=>{let s=e===ns.POST,o=r?.body||"",a=new URL(t),u=r?.headers||{},c={method:e,headers:u,...Bb.urlToHttpOptions(a)};return n&&Object.keys(n).length&&(c.agent=new jee.default.Agent(n)),s?c.headers={...c.headers,"Content-Length":o.length}:i&&(c.timeout=i),new Promise((l,d)=>{let p;c.protocol==="http:"?p=XD.default.request(c):p=jee.default.request(c),s&&p.write(o),i&&p.on("timeout",()=>{p.destroy(),d(new Error("Request time out"))}),p.end(),p.on("response",f=>{let h=f.headers,g=f.statusCode,_=f.statusMessage,S=[];f.on("data",w=>{S.push(w)}),f.on("end",()=>{let w=Buffer.concat([...S]).toString(),C=h,A=Bb.getNetworkResponse(C,jIe(g,_,C,w),g);(g<sr.SUCCESS_RANGE_START||g>sr.SUCCESS_RANGE_END)&&A.body.error!==Sc.AUTHORIZATION_PENDING&&p.destroy(),l(A)})}),p.on("error",f=>{p.destroy(),d(new Error(f.toString()))})})},jIe=(t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let o,a;t>=sr.CLIENT_ERROR_RANGE_START&&t<=sr.CLIENT_ERROR_RANGE_END?(o="client_error",a="A client"):t>=sr.SERVER_ERROR_RANGE_START&&t<=sr.SERVER_ERROR_RANGE_END?(o="server_error",a="A server"):(o="unknown_error",a="An unknown"),i={error:o,error_description:`${a} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i}});var $ee,Kee,c9,Uee,KIe,UIe,Vee,Gee,Hee,zee,Wee,VIe,Jee,Yee,og,ag=le(()=>{"use strict";Tn();$ee="invalid_file_extension",Kee="invalid_file_path",c9="invalid_managed_identity_id_type",Uee="invalid_secret",KIe="missing_client_id",UIe="network_unavailable",Vee="platform_not_supported",Gee="unable_to_create_azure_arc",Hee="unable_to_create_cloud_shell",zee="unable_to_create_source",Wee="unable_to_read_secret_file",VIe="user_assigned_not_available_at_runtime",Jee="www_authenticate_header_missing",Yee="www_authenticate_header_unsupported_format",og={[yo.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[yo.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[yo.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[yo.MSI_ENDPOINT]:"msi_endpoint_url_malformed"}});function ug(t){return new Qee(t)}var xMt,Qee,qb=le(()=>{"use strict";pi();ag();Tn();xMt={[$ee]:"The file path in the WWW-Authenticate header does not contain a .key file.",[Kee]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[c9]:"More than one ManagedIdentityIdType was provided.",[Uee]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[Vee]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[KIe]:"A ManagedIdentityId id was not provided.",[og.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${yo.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[og.IDENTITY_ENDPOINT]:`The Managed Identity's '${yo.IDENTITY_ENDPOINT}' environment variable is malformed.`,[og.IMDS_ENDPOINT]:`The Managed Identity's '${yo.IMDS_ENDPOINT}' environment variable is malformed.`,[og.MSI_ENDPOINT]:`The Managed Identity's '${yo.MSI_ENDPOINT}' environment variable is malformed.`,[UIe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[Gee]:"Azure Arc Managed Identities can only be system assigned.",[Hee]:"Cloud Shell Managed Identities can only be system assigned.",[zee]:"Unable to create a Managed Identity source based on environment variables.",[Wee]:"Unable to read the secret file.",[VIe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[Jee]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[Yee]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},Qee=class t extends ar{constructor(e){super(e,xMt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}}});var GIe=le(()=>{"use strict";qb();Tn();ag();});var is,Hh,l9=le(()=>{"use strict";pi();is={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."},redirectUriNotSupported:{code:"redirect_uri_not_supported",desc:"RedirectUri is not supported in this scenario. Please remove redirectUri from the request."}},Hh=class t extends ar{constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(is.invalidLoopbackAddressType.code,`${is.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(is.unableToLoadRedirectUri.code,`${is.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(is.noAuthCodeInResponse.code,`${is.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(is.noLoopbackServerExists.code,`${is.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(is.loopbackServerAlreadyExists.code,`${is.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(is.loopbackServerTimeout.code,`${is.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(is.stateNotFoundError.code,is.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(is.thumbprintMissing.code,is.thumbprintMissing.desc)}static createRedirectUriNotSupportedError(){return new t(is.redirectUriNotSupported.code,is.redirectUriNotSupported.desc)}}});function zIe({auth:t,broker:e,cache:r,system:n,telemetry:i}){let s={...DMt,networkClient:new u9(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||HIe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw Hh.createStateNotFoundError();return{auth:{...IMt,...t},broker:{...e},cache:{...RMt,...r},system:{...s,...n},telemetry:{...kMt,...i}}}var IMt,RMt,HIe,DMt,kMt,Xee=le(()=>{"use strict";pi();$Ie();GIe();l9();IMt={clientId:me.EMPTY_STRING,authority:me.DEFAULT_AUTHORITY,clientSecret:me.EMPTY_STRING,clientAssertion:me.EMPTY_STRING,clientCertificate:{thumbprint:me.EMPTY_STRING,thumbprintSha256:me.EMPTY_STRING,privateKey:me.EMPTY_STRING,x5c:me.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:me.EMPTY_STRING,authorityMetadata:me.EMPTY_STRING,clientCapabilities:[],protocolMode:_c.AAD,azureCloudOptions:{azureCloudInstance:Vy.None,tenant:me.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},RMt={claimsBasedCachingEnabled:!1},HIe={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xi.Info},DMt={loggerOptions:HIe,networkClient:new u9,proxyUrl:me.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},kMt={application:{appName:me.EMPTY_STRING,appVersion:me.EMPTY_STRING}}});function Zee(){return ZD>ek.length-16&&(WIe.default.randomFillSync(ek),ZD=0),ek.slice(ZD,ZD+=16)}var WIe,ek,ZD,JIe=le(()=>{WIe=Dt(require("crypto")),ek=new Uint8Array(256),ZD=ek.length});var YIe,QIe=le(()=>{YIe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function MMt(t){return typeof t=="string"&&YIe.test(t)}var XIe,ZIe=le(()=>{QIe();XIe=MMt});function PMt(t,e=0){let r=(zs[t[e+0]]+zs[t[e+1]]+zs[t[e+2]]+zs[t[e+3]]+"-"+zs[t[e+4]]+zs[t[e+5]]+"-"+zs[t[e+6]]+zs[t[e+7]]+"-"+zs[t[e+8]]+zs[t[e+9]]+"-"+zs[t[e+10]]+zs[t[e+11]]+zs[t[e+12]]+zs[t[e+13]]+zs[t[e+14]]+zs[t[e+15]]).toLowerCase();if(!XIe(r))throw TypeError("Stringified UUID is invalid");return r}var zs,eRe,tRe=le(()=>{ZIe();zs=[];for(let t=0;t<256;++t)zs.push((t+256).toString(16).substr(1));eRe=PMt});function NMt(t,e,r){t=t||{};let n=t.random||(t.rng||Zee)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return eRe(n)}var ete,rRe=le(()=>{JIe();tRe();ete=NMt});var nRe=le(()=>{rRe()});var Lb,tte=le(()=>{"use strict";nRe();Lb=class{generateGuid(){return ete()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}});var du,d9=le(()=>{"use strict";pi();du=class t{static base64Encode(e,r){return Buffer.from(e,r).toString(cu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,me.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,cu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}}});var iRe,cg,tk=le(()=>{"use strict";Tn();iRe=Dt(require("crypto"),1);cg=class{sha256(e){return iRe.default.createHash(FIe.SHA256).update(e).digest()}}});var sRe,rk,oRe=le(()=>{"use strict";pi();Tn();d9();tk();sRe=Dt(require("crypto"),1);rk=class{constructor(){this.hashUtils=new cg}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%QD.CV_CHARSET.length;for(;e.length<=NIe;){let i=sRe.default.randomBytes(1)[0];if(i>=r)continue;let s=i%QD.CV_CHARSET.length;e.push(QD.CV_CHARSET[s])}let n=e.join(me.EMPTY_STRING);return du.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return du.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}}});var zh,p9=le(()=>{"use strict";pi();tte();d9();oRe();tk();zh=class{constructor(){this.pkceGenerator=new rk,this.guidGenerator=new Lb,this.hashUtils=new cg}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return du.base64Encode(e)}base64Decode(e){return du.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return du.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}}});var nk=le(()=>{"use strict";yn();RZ();});function aRe(t){let e=t.credentialType===Jr.REFRESH_TOKEN&&t.familyId||t.clientId,r=t.tokenType&&t.tokenType.toLowerCase()!==or.BEARER.toLowerCase()?t.tokenType.toLowerCase():"";return[t.homeAccountId,t.environment,t.credentialType,e,t.realm||"",t.target||"",t.requestedClaimsHash||"",r].join(Lee.KEY_SEPARATOR).toLowerCase()}function uRe(t){let e=t.homeAccountId.split(".")[1];return[t.homeAccountId,t.environment,e||t.tenantId||""].join(Lee.KEY_SEPARATOR).toLowerCase()}var cRe=le(()=>{"use strict";pi();Tn();});var lg,ik=le(()=>{"use strict";pi();JD();ZR();nk();cRe();lg=class extends jh{constructor(e,r,n,i){super(r,n,e,new Jy,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof Ll)r.accounts[n]=i;else if(Vo.isIdTokenEntity(i))r.idTokens[n]=i;else if(Vo.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(Vo.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(Vo.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}generateCredentialKey(e){return aRe(e)}generateAccountKey(e){return uRe(e)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new Ll,this.getItem(e)):null}async setAccount(e){let r=this.generateAccountKey(e.getAccountInfo());this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return Vo.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return Vo.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return Vo.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return Vo.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=Vo.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&Vo.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&Vo.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&Vo.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return Vh.deserializeAllCache(Vh.deserializeJSONBlob(e))}static generateJsonCache(e){return wy.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=this.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}});var f9,h9,rte=le(()=>{"use strict";ik();pi();JD();ZR();p9();tte();f9={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},h9=class{constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=wy.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=Vh.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=lg.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new zh().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new jl(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new jl(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(e,r||new Lb().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new jl(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let s=i!==null,o=typeof i=="object",a=!Array.isArray(i),u=typeof e[n]<"u"&&e[n]!==null;s&&o&&a&&u?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,s=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:s,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...f9.Account,...e.Account},IdToken:{...f9.IdToken,...e.IdToken},AccessToken:{...f9.AccessToken,...e.AccessToken},RefreshToken:{...f9.RefreshToken,...e.RefreshToken},AppMetadata:{...f9.AppMetadata,...e.AppMetadata}}}}});var nte=m((nCr,lRe)=>{var sk=Pl().Buffer,FMt=require("stream"),BMt=require("util");function ok(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=sk.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=sk.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}BMt.inherits(ok,FMt);ok.prototype.write=function(e){this.buffer=sk.concat([this.buffer,sk.from(e)]),this.emit("data",e)};ok.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};lRe.exports=ok});var pRe=m((iCr,dRe)=>{"use strict";function ite(t){var e=(t/8|0)+(t%8===0?0:1);return e}var qMt={ES256:ite(256),ES384:ite(384),ES512:ite(521)};function LMt(t){var e=qMt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}dRe.exports=LMt});var lk=m((sCr,ERe)=>{"use strict";var ak=Pl().Buffer,hRe=pRe(),uk=128,mRe=0,jMt=32,$Mt=16,KMt=2,yRe=$Mt|jMt|mRe<<6,ck=KMt|mRe<<6;function UMt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gRe(t){if(ak.isBuffer(t))return t;if(typeof t=="string")return ak.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function VMt(t,e){t=gRe(t);var r=hRe(e),n=r+1,i=t.length,s=0;if(t[s++]!==yRe)throw new Error('Could not find expected "seq"');var o=t[s++];if(o===(uk|1)&&(o=t[s++]),i-s<o)throw new Error('"seq" specified length of "'+o+'", only "'+(i-s)+'" remaining');if(t[s++]!==ck)throw new Error('Could not find expected "int" for "r"');var a=t[s++];if(i-s-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(i-s-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var u=s;if(s+=a,t[s++]!==ck)throw new Error('Could not find expected "int" for "s"');var c=t[s++];if(i-s!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(i-s)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=s;if(s+=c,s!==i)throw new Error('Expected to consume entire buffer, but "'+(i-s)+'" bytes remain');var d=r-a,p=r-c,f=ak.allocUnsafe(d+a+p+c);for(s=0;s<d;++s)f[s]=0;t.copy(f,s,u+Math.max(-d,0),u+a),s=r;for(var h=s;s<h+p;++s)f[s]=0;return t.copy(f,s,l+Math.max(-p,0),l+c),f=f.toString("base64"),f=UMt(f),f}function fRe(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=uk;return i&&--n,n}function GMt(t,e){t=gRe(t);var r=hRe(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=fRe(t,0,r),s=fRe(t,r,t.length),o=r-i,a=r-s,u=2+o+1+1+a,c=u<uk,l=ak.allocUnsafe((c?2:3)+u),d=0;return l[d++]=yRe,c?l[d++]=u:(l[d++]=uk|1,l[d++]=u&255),l[d++]=ck,l[d++]=o,i<0?(l[d++]=0,d+=t.copy(l,d,0,r)):d+=t.copy(l,d,i,r),l[d++]=ck,l[d++]=a,s<0?(l[d++]=0,t.copy(l,d,r)):t.copy(l,d,r+s),l}ERe.exports={derToJose:VMt,joseToDer:GMt}});var ote=m((oCr,bRe)=>{"use strict";var m9=require("buffer").Buffer,ste=require("buffer").SlowBuffer;bRe.exports=dk;function dk(t,e){if(!m9.isBuffer(t)||!m9.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}dk.install=function(){m9.prototype.equal=ste.prototype.equal=function(e){return dk(this,e)}};var HMt=m9.prototype.equal,zMt=ste.prototype.equal;dk.restore=function(){m9.prototype.equal=HMt,ste.prototype.equal=zMt}});var lte=m((aCr,xRe)=>{var $b=Pl().Buffer,Ac=require("crypto"),vRe=lk(),_Re=require("util"),WMt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,y9="secret must be a string or buffer",jb="key must be a string or a buffer",JMt="key must be a string, a buffer or an object",ute=typeof Ac.createPublicKey=="function";ute&&(jb+=" or a KeyObject",y9+="or a KeyObject");function SRe(t){if(!$b.isBuffer(t)&&typeof t!="string"&&(!ute||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Ul(jb)}function wRe(t){if(!$b.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Ul(JMt)}function YMt(t){if(!$b.isBuffer(t)){if(typeof t=="string")return t;if(!ute||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Ul(y9)}}function cte(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ARe(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Ul(t){var e=[].slice.call(arguments,1),r=_Re.format.bind(_Re,t).apply(null,e);return new TypeError(r)}function QMt(t){return $b.isBuffer(t)||typeof t=="string"}function g9(t){return QMt(t)||(t=JSON.stringify(t)),t}function CRe(t){return function(r,n){YMt(n),r=g9(r);var i=Ac.createHmac("sha"+t,n),s=(i.update(r),i.digest("base64"));return cte(s)}}var ate,XMt="timingSafeEqual"in Ac?function(e,r){return e.byteLength!==r.byteLength?!1:Ac.timingSafeEqual(e,r)}:function(e,r){return ate||(ate=ote()),ate(e,r)};function ZMt(t){return function(r,n,i){var s=CRe(t)(r,i);return XMt($b.from(n),$b.from(s))}}function TRe(t){return function(r,n){wRe(n),r=g9(r);var i=Ac.createSign("RSA-SHA"+t),s=(i.update(r),i.sign(n,"base64"));return cte(s)}}function ORe(t){return function(r,n,i){SRe(i),r=g9(r),n=ARe(n);var s=Ac.createVerify("RSA-SHA"+t);return s.update(r),s.verify(i,n,"base64")}}function ePt(t){return function(r,n){wRe(n),r=g9(r);var i=Ac.createSign("RSA-SHA"+t),s=(i.update(r),i.sign({key:n,padding:Ac.constants.RSA_PKCS1_PSS_PADDING,saltLength:Ac.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return cte(s)}}function tPt(t){return function(r,n,i){SRe(i),r=g9(r),n=ARe(n);var s=Ac.createVerify("RSA-SHA"+t);return s.update(r),s.verify({key:i,padding:Ac.constants.RSA_PKCS1_PSS_PADDING,saltLength:Ac.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function rPt(t){var e=TRe(t);return function(){var n=e.apply(null,arguments);return n=vRe.derToJose(n,"ES"+t),n}}function nPt(t){var e=ORe(t);return function(n,i,s){i=vRe.joseToDer(i,"ES"+t).toString("base64");var o=e(n,i,s);return o}}function iPt(){return function(){return""}}function sPt(){return function(e,r){return r===""}}xRe.exports=function(e){var r={hs:CRe,rs:TRe,ps:ePt,es:rPt,none:iPt},n={hs:ZMt,rs:ORe,ps:tPt,es:nPt,none:sPt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw Ul(WMt,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:r[s](o),verify:n[s](o)}}});var dte=m((uCr,IRe)=>{var oPt=require("buffer").Buffer;IRe.exports=function(e){return typeof e=="string"?e:typeof e=="number"||oPt.isBuffer(e)?e.toString():JSON.stringify(e)}});var NRe=m((cCr,PRe)=>{var aPt=Pl().Buffer,RRe=nte(),uPt=lte(),cPt=require("stream"),DRe=dte(),pte=require("util");function kRe(t,e){return aPt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lPt(t,e,r){r=r||"utf8";var n=kRe(DRe(t),"binary"),i=kRe(DRe(e),r);return pte.format("%s.%s",n,i)}function MRe(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,s=uPt(e.alg),o=lPt(e,r,i),a=s.sign(o,n);return pte.format("%s.%s",o,a)}function pk(t){var e=t.secret;if(e=e??t.privateKey,e=e??t.key,/^hs/i.test(t.header.alg)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new RRe(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new RRe(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}pte.inherits(pk,cPt);pk.prototype.sign=function(){try{var e=MRe({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};pk.sign=MRe;PRe.exports=pk});var GRe=m((lCr,VRe)=>{var BRe=Pl().Buffer,FRe=nte(),dPt=lte(),pPt=require("stream"),qRe=dte(),fPt=require("util"),hPt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function mPt(t){return Object.prototype.toString.call(t)==="[object Object]"}function yPt(t){if(mPt(t))return t;try{return JSON.parse(t)}catch{return}}function LRe(t){var e=t.split(".",1)[0];return yPt(BRe.from(e,"base64").toString("binary"))}function gPt(t){return t.split(".",2).join(".")}function jRe(t){return t.split(".")[2]}function EPt(t,e){e=e||"utf8";var r=t.split(".")[1];return BRe.from(r,"base64").toString(e)}function $Re(t){return hPt.test(t)&&!!LRe(t)}function KRe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=qRe(t);var i=jRe(t),s=gPt(t),o=dPt(e);return o.verify(s,i,r)}function URe(t,e){if(e=e||{},t=qRe(t),!$Re(t))return null;var r=LRe(t);if(!r)return null;var n=EPt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:jRe(t)}}function Kb(t){t=t||{};var e=t.secret;if(e=e??t.publicKey,e=e??t.key,/^hs/i.test(t.algorithm)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new FRe(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new FRe(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}fPt.inherits(Kb,pPt);Kb.prototype.verify=function(){try{var e=KRe(this.signature.buffer,this.algorithm,this.key.buffer),r=URe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Kb.decode=URe;Kb.isValid=$Re;Kb.verify=KRe;VRe.exports=Kb});var hk=m(Wh=>{var HRe=NRe(),fk=GRe(),bPt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Wh.ALGORITHMS=bPt;Wh.sign=HRe.sign;Wh.verify=fk.verify;Wh.decode=fk.decode;Wh.isValid=fk.isValid;Wh.createSign=function(e){return new HRe(e)};Wh.createVerify=function(e){return new fk(e)}});var fte=m((pCr,zRe)=>{var _Pt=hk();zRe.exports=function(t,e){e=e||{};var r=_Pt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var E9=m((fCr,WRe)=>{var mk=function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)};mk.prototype=Object.create(Error.prototype);mk.prototype.constructor=mk;WRe.exports=mk});var hte=m((hCr,YRe)=>{var JRe=E9(),yk=function(t,e){JRe.call(this,t),this.name="NotBeforeError",this.date=e};yk.prototype=Object.create(JRe.prototype);yk.prototype.constructor=yk;YRe.exports=yk});var mte=m((mCr,XRe)=>{var QRe=E9(),gk=function(t,e){QRe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e};gk.prototype=Object.create(QRe.prototype);gk.prototype.constructor=gk;XRe.exports=gk});var eDe=m((yCr,ZRe)=>{var Ub=1e3,Vb=Ub*60,Gb=Vb*60,dg=Gb*24,vPt=dg*7,SPt=dg*365.25;ZRe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return wPt(t);if(r==="number"&&isFinite(t))return e.long?CPt(t):APt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function wPt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*SPt;case"weeks":case"week":case"w":return r*vPt;case"days":case"day":case"d":return r*dg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Gb;case"minutes":case"minute":case"mins":case"min":case"m":return r*Vb;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ub;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function APt(t){var e=Math.abs(t);return e>=dg?Math.round(t/dg)+"d":e>=Gb?Math.round(t/Gb)+"h":e>=Vb?Math.round(t/Vb)+"m":e>=Ub?Math.round(t/Ub)+"s":t+"ms"}function CPt(t){var e=Math.abs(t);return e>=dg?Ek(t,e,dg,"day"):e>=Gb?Ek(t,e,Gb,"hour"):e>=Vb?Ek(t,e,Vb,"minute"):e>=Ub?Ek(t,e,Ub,"second"):t+" ms"}function Ek(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var yte=m((gCr,tDe)=>{var TPt=eDe();tDe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=TPt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var b9=m((ECr,rDe)=>{"use strict";var OPt="2.0.0",xPt=Number.MAX_SAFE_INTEGER||9007199254740991,IPt=16,RPt=250,DPt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];rDe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:IPt,MAX_SAFE_BUILD_LENGTH:RPt,MAX_SAFE_INTEGER:xPt,RELEASE_TYPES:DPt,SEMVER_SPEC_VERSION:OPt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var _9=m((bCr,nDe)=>{"use strict";var kPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};nDe.exports=kPt});var Hb=m((Vd,iDe)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:gte,MAX_SAFE_BUILD_LENGTH:MPt,MAX_LENGTH:PPt}=b9(),NPt=_9();Vd=iDe.exports={};var FPt=Vd.re=[],BPt=Vd.safeRe=[],Ye=Vd.src=[],qPt=Vd.safeSrc=[],Qe=Vd.t={},LPt=0,Ete="[a-zA-Z0-9-]",jPt=[["\\s",1],["\\d",PPt],[Ete,MPt]],$Pt=t=>{for(let[e,r]of jPt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Ft=(t,e,r)=>{let n=$Pt(e),i=LPt++;NPt(t,i,e),Qe[t]=i,Ye[i]=e,qPt[i]=n,FPt[i]=new RegExp(e,r?"g":void 0),BPt[i]=new RegExp(n,r?"g":void 0)};Ft("NUMERICIDENTIFIER","0|[1-9]\\d*");Ft("NUMERICIDENTIFIERLOOSE","\\d+");Ft("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Ete}*`);Ft("MAINVERSION",`(${Ye[Qe.NUMERICIDENTIFIER]})\\.(${Ye[Qe.NUMERICIDENTIFIER]})\\.(${Ye[Qe.NUMERICIDENTIFIER]})`);Ft("MAINVERSIONLOOSE",`(${Ye[Qe.NUMERICIDENTIFIERLOOSE]})\\.(${Ye[Qe.NUMERICIDENTIFIERLOOSE]})\\.(${Ye[Qe.NUMERICIDENTIFIERLOOSE]})`);Ft("PRERELEASEIDENTIFIER",`(?:${Ye[Qe.NONNUMERICIDENTIFIER]}|${Ye[Qe.NUMERICIDENTIFIER]})`);Ft("PRERELEASEIDENTIFIERLOOSE",`(?:${Ye[Qe.NONNUMERICIDENTIFIER]}|${Ye[Qe.NUMERICIDENTIFIERLOOSE]})`);Ft("PRERELEASE",`(?:-(${Ye[Qe.PRERELEASEIDENTIFIER]}(?:\\.${Ye[Qe.PRERELEASEIDENTIFIER]})*))`);Ft("PRERELEASELOOSE",`(?:-?(${Ye[Qe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ye[Qe.PRERELEASEIDENTIFIERLOOSE]})*))`);Ft("BUILDIDENTIFIER",`${Ete}+`);Ft("BUILD",`(?:\\+(${Ye[Qe.BUILDIDENTIFIER]}(?:\\.${Ye[Qe.BUILDIDENTIFIER]})*))`);Ft("FULLPLAIN",`v?${Ye[Qe.MAINVERSION]}${Ye[Qe.PRERELEASE]}?${Ye[Qe.BUILD]}?`);Ft("FULL",`^${Ye[Qe.FULLPLAIN]}$`);Ft("LOOSEPLAIN",`[v=\\s]*${Ye[Qe.MAINVERSIONLOOSE]}${Ye[Qe.PRERELEASELOOSE]}?${Ye[Qe.BUILD]}?`);Ft("LOOSE",`^${Ye[Qe.LOOSEPLAIN]}$`);Ft("GTLT","((?:<|>)?=?)");Ft("XRANGEIDENTIFIERLOOSE",`${Ye[Qe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ft("XRANGEIDENTIFIER",`${Ye[Qe.NUMERICIDENTIFIER]}|x|X|\\*`);Ft("XRANGEPLAIN",`[v=\\s]*(${Ye[Qe.XRANGEIDENTIFIER]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIER]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIER]})(?:${Ye[Qe.PRERELEASE]})?${Ye[Qe.BUILD]}?)?)?`);Ft("XRANGEPLAINLOOSE",`[v=\\s]*(${Ye[Qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIERLOOSE]})(?:${Ye[Qe.PRERELEASELOOSE]})?${Ye[Qe.BUILD]}?)?)?`);Ft("XRANGE",`^${Ye[Qe.GTLT]}\\s*${Ye[Qe.XRANGEPLAIN]}$`);Ft("XRANGELOOSE",`^${Ye[Qe.GTLT]}\\s*${Ye[Qe.XRANGEPLAINLOOSE]}$`);Ft("COERCEPLAIN",`(^|[^\\d])(\\d{1,${gte}})(?:\\.(\\d{1,${gte}}))?(?:\\.(\\d{1,${gte}}))?`);Ft("COERCE",`${Ye[Qe.COERCEPLAIN]}(?:$|[^\\d])`);Ft("COERCEFULL",Ye[Qe.COERCEPLAIN]+`(?:${Ye[Qe.PRERELEASE]})?(?:${Ye[Qe.BUILD]})?(?:$|[^\\d])`);Ft("COERCERTL",Ye[Qe.COERCE],!0);Ft("COERCERTLFULL",Ye[Qe.COERCEFULL],!0);Ft("LONETILDE","(?:~>?)");Ft("TILDETRIM",`(\\s*)${Ye[Qe.LONETILDE]}\\s+`,!0);Vd.tildeTrimReplace="$1~";Ft("TILDE",`^${Ye[Qe.LONETILDE]}${Ye[Qe.XRANGEPLAIN]}$`);Ft("TILDELOOSE",`^${Ye[Qe.LONETILDE]}${Ye[Qe.XRANGEPLAINLOOSE]}$`);Ft("LONECARET","(?:\\^)");Ft("CARETTRIM",`(\\s*)${Ye[Qe.LONECARET]}\\s+`,!0);Vd.caretTrimReplace="$1^";Ft("CARET",`^${Ye[Qe.LONECARET]}${Ye[Qe.XRANGEPLAIN]}$`);Ft("CARETLOOSE",`^${Ye[Qe.LONECARET]}${Ye[Qe.XRANGEPLAINLOOSE]}$`);Ft("COMPARATORLOOSE",`^${Ye[Qe.GTLT]}\\s*(${Ye[Qe.LOOSEPLAIN]})$|^$`);Ft("COMPARATOR",`^${Ye[Qe.GTLT]}\\s*(${Ye[Qe.FULLPLAIN]})$|^$`);Ft("COMPARATORTRIM",`(\\s*)${Ye[Qe.GTLT]}\\s*(${Ye[Qe.LOOSEPLAIN]}|${Ye[Qe.XRANGEPLAIN]})`,!0);Vd.comparatorTrimReplace="$1$2$3";Ft("HYPHENRANGE",`^\\s*(${Ye[Qe.XRANGEPLAIN]})\\s+-\\s+(${Ye[Qe.XRANGEPLAIN]})\\s*$`);Ft("HYPHENRANGELOOSE",`^\\s*(${Ye[Qe.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ye[Qe.XRANGEPLAINLOOSE]})\\s*$`);Ft("STAR","(<|>)?=?\\s*\\*");Ft("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ft("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var bk=m((_Cr,sDe)=>{"use strict";var KPt=Object.freeze({loose:!0}),UPt=Object.freeze({}),VPt=t=>t?typeof t!="object"?KPt:t:UPt;sDe.exports=VPt});var bte=m((vCr,uDe)=>{"use strict";var oDe=/^[0-9]+$/,aDe=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=oDe.test(t),n=oDe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},GPt=(t,e)=>aDe(e,t);uDe.exports={compareIdentifiers:aDe,rcompareIdentifiers:GPt}});var go=m((SCr,lDe)=>{"use strict";var _k=_9(),{MAX_LENGTH:cDe,MAX_SAFE_INTEGER:vk}=b9(),{safeRe:Sk,t:wk}=Hb(),HPt=bk(),{compareIdentifiers:_te}=bte(),vte=class t{constructor(e,r){if(r=HPt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>cDe)throw new TypeError(`version is longer than ${cDe} characters`);_k("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Sk[wk.LOOSE]:Sk[wk.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>vk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vk||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<vk)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(_k("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(_k("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return _te(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(_k("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return _te(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?Sk[wk.PRERELEASELOOSE]:Sk[wk.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),_te(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};lDe.exports=vte});var pg=m((wCr,pDe)=>{"use strict";var dDe=go(),zPt=(t,e,r=!1)=>{if(t instanceof dDe)return t;try{return new dDe(t,e)}catch(n){if(!r)return null;throw n}};pDe.exports=zPt});var hDe=m((ACr,fDe)=>{"use strict";var WPt=pg(),JPt=(t,e)=>{let r=WPt(t,e);return r?r.version:null};fDe.exports=JPt});var yDe=m((CCr,mDe)=>{"use strict";var YPt=pg(),QPt=(t,e)=>{let r=YPt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};mDe.exports=QPt});var bDe=m((TCr,EDe)=>{"use strict";var gDe=go(),XPt=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new gDe(t instanceof gDe?t.version:t,r).inc(e,n,i).version}catch{return null}};EDe.exports=XPt});var SDe=m((OCr,vDe)=>{"use strict";var _De=pg(),ZPt=(t,e)=>{let r=_De(t,null,!0),n=_De(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};vDe.exports=ZPt});var ADe=m((xCr,wDe)=>{"use strict";var eNt=go(),tNt=(t,e)=>new eNt(t,e).major;wDe.exports=tNt});var TDe=m((ICr,CDe)=>{"use strict";var rNt=go(),nNt=(t,e)=>new rNt(t,e).minor;CDe.exports=nNt});var xDe=m((RCr,ODe)=>{"use strict";var iNt=go(),sNt=(t,e)=>new iNt(t,e).patch;ODe.exports=sNt});var RDe=m((DCr,IDe)=>{"use strict";var oNt=pg(),aNt=(t,e)=>{let r=oNt(t,e);return r&&r.prerelease.length?r.prerelease:null};IDe.exports=aNt});var Cc=m((kCr,kDe)=>{"use strict";var DDe=go(),uNt=(t,e,r)=>new DDe(t,r).compare(new DDe(e,r));kDe.exports=uNt});var PDe=m((MCr,MDe)=>{"use strict";var cNt=Cc(),lNt=(t,e,r)=>cNt(e,t,r);MDe.exports=lNt});var FDe=m((PCr,NDe)=>{"use strict";var dNt=Cc(),pNt=(t,e)=>dNt(t,e,!0);NDe.exports=pNt});var Ak=m((NCr,qDe)=>{"use strict";var BDe=go(),fNt=(t,e,r)=>{let n=new BDe(t,r),i=new BDe(e,r);return n.compare(i)||n.compareBuild(i)};qDe.exports=fNt});var jDe=m((FCr,LDe)=>{"use strict";var hNt=Ak(),mNt=(t,e)=>t.sort((r,n)=>hNt(r,n,e));LDe.exports=mNt});var KDe=m((BCr,$De)=>{"use strict";var yNt=Ak(),gNt=(t,e)=>t.sort((r,n)=>yNt(n,r,e));$De.exports=gNt});var v9=m((qCr,UDe)=>{"use strict";var ENt=Cc(),bNt=(t,e,r)=>ENt(t,e,r)>0;UDe.exports=bNt});var Ck=m((LCr,VDe)=>{"use strict";var _Nt=Cc(),vNt=(t,e,r)=>_Nt(t,e,r)<0;VDe.exports=vNt});var Ste=m((jCr,GDe)=>{"use strict";var SNt=Cc(),wNt=(t,e,r)=>SNt(t,e,r)===0;GDe.exports=wNt});var wte=m(($Cr,HDe)=>{"use strict";var ANt=Cc(),CNt=(t,e,r)=>ANt(t,e,r)!==0;HDe.exports=CNt});var Tk=m((KCr,zDe)=>{"use strict";var TNt=Cc(),ONt=(t,e,r)=>TNt(t,e,r)>=0;zDe.exports=ONt});var Ok=m((UCr,WDe)=>{"use strict";var xNt=Cc(),INt=(t,e,r)=>xNt(t,e,r)<=0;WDe.exports=INt});var Ate=m((VCr,JDe)=>{"use strict";var RNt=Ste(),DNt=wte(),kNt=v9(),MNt=Tk(),PNt=Ck(),NNt=Ok(),FNt=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return RNt(t,r,n);case"!=":return DNt(t,r,n);case">":return kNt(t,r,n);case">=":return MNt(t,r,n);case"<":return PNt(t,r,n);case"<=":return NNt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};JDe.exports=FNt});var QDe=m((GCr,YDe)=>{"use strict";var BNt=go(),qNt=pg(),{safeRe:xk,t:Ik}=Hb(),LNt=(t,e)=>{if(t instanceof BNt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?xk[Ik.COERCEFULL]:xk[Ik.COERCE]);else{let u=e.includePrerelease?xk[Ik.COERCERTLFULL]:xk[Ik.COERCERTL],c;for(;(c=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return qNt(`${n}.${i}.${s}${o}${a}`,e)};YDe.exports=LNt});var ZDe=m((HCr,XDe)=>{"use strict";var Cte=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};XDe.exports=Cte});var Tc=m((zCr,nke)=>{"use strict";var jNt=/\s+/g,Tte=class t{constructor(e,r){if(r=KNt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Ote)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(jNt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!tke(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&JNt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&zNt)|(this.options.loose&&WNt))+":"+e,i=eke.get(n);if(i)return i;let s=this.options.loose,o=s?zo[Eo.HYPHENRANGELOOSE]:zo[Eo.HYPHENRANGE];e=e.replace(o,sFt(this.options.includePrerelease)),On("hyphen replace",e),e=e.replace(zo[Eo.COMPARATORTRIM],VNt),On("comparator trim",e),e=e.replace(zo[Eo.TILDETRIM],GNt),On("tilde trim",e),e=e.replace(zo[Eo.CARETTRIM],HNt),On("caret trim",e);let a=e.split(" ").map(d=>YNt(d,this.options)).join(" ").split(/\s+/).map(d=>iFt(d,this.options));s&&(a=a.filter(d=>(On("loose invalid filter",d,this.options),!!d.match(zo[Eo.COMPARATORLOOSE])))),On("range list",a);let u=new Map,c=a.map(d=>new Ote(d,this.options));for(let d of c){if(tke(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return eke.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>rke(n,r)&&e.set.some(i=>rke(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new UNt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(oFt(this.set[r],e,this.options))return!0;return!1}};nke.exports=Tte;var $Nt=ZDe(),eke=new $Nt,KNt=bk(),Ote=S9(),On=_9(),UNt=go(),{safeRe:zo,t:Eo,comparatorTrimReplace:VNt,tildeTrimReplace:GNt,caretTrimReplace:HNt}=Hb(),{FLAG_INCLUDE_PRERELEASE:zNt,FLAG_LOOSE:WNt}=b9(),tke=t=>t.value==="<0.0.0-0",JNt=t=>t.value==="",rke=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},YNt=(t,e)=>(t=t.replace(zo[Eo.BUILD],""),On("comp",t,e),t=ZNt(t,e),On("caret",t),t=QNt(t,e),On("tildes",t),t=tFt(t,e),On("xrange",t),t=nFt(t,e),On("stars",t),t),Wo=t=>!t||t.toLowerCase()==="x"||t==="*",QNt=(t,e)=>t.trim().split(/\s+/).map(r=>XNt(r,e)).join(" "),XNt=(t,e)=>{let r=e.loose?zo[Eo.TILDELOOSE]:zo[Eo.TILDE];return t.replace(r,(n,i,s,o,a)=>{On("tilde",t,n,i,s,o,a);let u;return Wo(i)?u="":Wo(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Wo(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(On("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,On("tilde return",u),u})},ZNt=(t,e)=>t.trim().split(/\s+/).map(r=>eFt(r,e)).join(" "),eFt=(t,e)=>{On("caret",t,e);let r=e.loose?zo[Eo.CARETLOOSE]:zo[Eo.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,u)=>{On("caret",t,i,s,o,a,u);let c;return Wo(s)?c="":Wo(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Wo(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(On("replaceCaret pr",u),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(On("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),On("caret return",c),c})},tFt=(t,e)=>(On("replaceXRanges",t,e),t.split(/\s+/).map(r=>rFt(r,e)).join(" ")),rFt=(t,e)=>{t=t.trim();let r=e.loose?zo[Eo.XRANGELOOSE]:zo[Eo.XRANGE];return t.replace(r,(n,i,s,o,a,u)=>{On("xRange",t,n,i,s,o,a,u);let c=Wo(s),l=c||Wo(o),d=l||Wo(a),p=d;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):l?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),On("xRange return",n),n})},nFt=(t,e)=>(On("replaceStars",t,e),t.trim().replace(zo[Eo.STAR],"")),iFt=(t,e)=>(On("replaceGTE0",t,e),t.trim().replace(zo[e.includePrerelease?Eo.GTE0PRE:Eo.GTE0],"")),sFt=t=>(e,r,n,i,s,o,a,u,c,l,d,p)=>(Wo(n)?r="":Wo(i)?r=`>=${n}.0.0${t?"-0":""}`:Wo(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Wo(c)?u="":Wo(l)?u=`<${+c+1}.0.0-0`:Wo(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:t?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),oFt=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(On(t[n].semver),t[n].semver!==Ote.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var S9=m((WCr,cke)=>{"use strict";var w9=Symbol("SemVer ANY"),Rte=class t{static get ANY(){return w9}constructor(e,r){if(r=ike(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ite("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===w9?this.value="":this.value=this.operator+this.semver.version,Ite("comp",this)}parse(e){let r=this.options.loose?ske[oke.COMPARATORLOOSE]:ske[oke.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new ake(n[2],this.options.loose):this.semver=w9}toString(){return this.value}test(e){if(Ite("Comparator.test",e,this.options.loose),this.semver===w9||e===w9)return!0;if(typeof e=="string")try{e=new ake(e,this.options)}catch{return!1}return xte(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new uke(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new uke(this.value,r).test(e.semver):(r=ike(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||xte(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||xte(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};cke.exports=Rte;var ike=bk(),{safeRe:ske,t:oke}=Hb(),xte=Ate(),Ite=_9(),ake=go(),uke=Tc()});var A9=m((JCr,lke)=>{"use strict";var aFt=Tc(),uFt=(t,e,r)=>{try{e=new aFt(e,r)}catch{return!1}return e.test(t)};lke.exports=uFt});var pke=m((YCr,dke)=>{"use strict";var cFt=Tc(),lFt=(t,e)=>new cFt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));dke.exports=lFt});var hke=m((QCr,fke)=>{"use strict";var dFt=go(),pFt=Tc(),fFt=(t,e,r)=>{let n=null,i=null,s=null;try{s=new pFt(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new dFt(n,r))}),n};fke.exports=fFt});var yke=m((XCr,mke)=>{"use strict";var hFt=go(),mFt=Tc(),yFt=(t,e,r)=>{let n=null,i=null,s=null;try{s=new mFt(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new hFt(n,r))}),n};mke.exports=yFt});var bke=m((ZCr,Eke)=>{"use strict";var Dte=go(),gFt=Tc(),gke=v9(),EFt=(t,e)=>{t=new gFt(t,e);let r=new Dte("0.0.0");if(t.test(r)||(r=new Dte("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new Dte(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||gke(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||gke(r,s))&&(r=s)}return r&&t.test(r)?r:null};Eke.exports=EFt});var vke=m((e7r,_ke)=>{"use strict";var bFt=Tc(),_Ft=(t,e)=>{try{return new bFt(t,e).range||"*"}catch{return null}};_ke.exports=_Ft});var Rk=m((t7r,Cke)=>{"use strict";var vFt=go(),Ake=S9(),{ANY:SFt}=Ake,wFt=Tc(),AFt=A9(),Ske=v9(),wke=Ck(),CFt=Ok(),TFt=Tk(),OFt=(t,e,r,n)=>{t=new vFt(t,n),e=new wFt(e,n);let i,s,o,a,u;switch(r){case">":i=Ske,s=CFt,o=wke,a=">",u=">=";break;case"<":i=wke,s=TFt,o=Ske,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(AFt(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===SFt&&(f=new Ake(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&s(t,p.semver))return!1;if(p.operator===u&&o(t,p.semver))return!1}return!0};Cke.exports=OFt});var Oke=m((r7r,Tke)=>{"use strict";var xFt=Rk(),IFt=(t,e,r)=>xFt(t,e,">",r);Tke.exports=IFt});var Ike=m((n7r,xke)=>{"use strict";var RFt=Rk(),DFt=(t,e,r)=>RFt(t,e,"<",r);xke.exports=DFt});var kke=m((i7r,Dke)=>{"use strict";var Rke=Tc(),kFt=(t,e,r)=>(t=new Rke(t,r),e=new Rke(e,r),t.intersects(e,r));Dke.exports=kFt});var Pke=m((s7r,Mke)=>{"use strict";var MFt=A9(),PFt=Cc();Mke.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((l,d)=>PFt(l,d,r));for(let l of o)MFt(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var jke=m((o7r,Lke)=>{"use strict";var Nke=Tc(),Mte=S9(),{ANY:kte}=Mte,C9=A9(),Pte=Cc(),NFt=(t,e,r={})=>{if(t===e)return!0;t=new Nke(t,r),e=new Nke(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=BFt(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},FFt=[new Mte(">=0.0.0-0")],Fke=[new Mte(">=0.0.0")],BFt=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===kte){if(e.length===1&&e[0].semver===kte)return!0;r.includePrerelease?t=FFt:t=Fke}if(e.length===1&&e[0].semver===kte){if(r.includePrerelease)return!0;e=Fke}let n=new Set,i,s;for(let f of t)f.operator===">"||f.operator===">="?i=Bke(i,f,r):f.operator==="<"||f.operator==="<="?s=qke(s,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Pte(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let f of n){if(i&&!C9(f,String(i),r)||s&&!C9(f,String(s),r))return null;for(let h of e)if(!C9(f,String(h),r))return!1;return!0}let a,u,c,l,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=Bke(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!C9(i.semver,String(f),r))return!1}if(s){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=qke(s,f,r),u===f&&u!==s)return!1}else if(s.operator==="<="&&!C9(s.semver,String(f),r))return!1}if(!f.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&l&&!i&&o!==0||p||d)},Bke=(t,e,r)=>{if(!t)return e;let n=Pte(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},qke=(t,e,r)=>{if(!t)return e;let n=Pte(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};Lke.exports=NFt});var Dk=m((a7r,Uke)=>{"use strict";var Nte=Hb(),$ke=b9(),qFt=go(),Kke=bte(),LFt=pg(),jFt=hDe(),$Ft=yDe(),KFt=bDe(),UFt=SDe(),VFt=ADe(),GFt=TDe(),HFt=xDe(),zFt=RDe(),WFt=Cc(),JFt=PDe(),YFt=FDe(),QFt=Ak(),XFt=jDe(),ZFt=KDe(),eBt=v9(),tBt=Ck(),rBt=Ste(),nBt=wte(),iBt=Tk(),sBt=Ok(),oBt=Ate(),aBt=QDe(),uBt=S9(),cBt=Tc(),lBt=A9(),dBt=pke(),pBt=hke(),fBt=yke(),hBt=bke(),mBt=vke(),yBt=Rk(),gBt=Oke(),EBt=Ike(),bBt=kke(),_Bt=Pke(),vBt=jke();Uke.exports={parse:LFt,valid:jFt,clean:$Ft,inc:KFt,diff:UFt,major:VFt,minor:GFt,patch:HFt,prerelease:zFt,compare:WFt,rcompare:JFt,compareLoose:YFt,compareBuild:QFt,sort:XFt,rsort:ZFt,gt:eBt,lt:tBt,eq:rBt,neq:nBt,gte:iBt,lte:sBt,cmp:oBt,coerce:aBt,Comparator:uBt,Range:cBt,satisfies:lBt,toComparators:dBt,maxSatisfying:pBt,minSatisfying:fBt,minVersion:hBt,validRange:mBt,outside:yBt,gtr:gBt,ltr:EBt,intersects:bBt,simplifyRange:_Bt,subset:vBt,SemVer:qFt,re:Nte.re,src:Nte.src,tokens:Nte.t,SEMVER_SPEC_VERSION:$ke.SEMVER_SPEC_VERSION,RELEASE_TYPES:$ke.RELEASE_TYPES,compareIdentifiers:Kke.compareIdentifiers,rcompareIdentifiers:Kke.rcompareIdentifiers}});var Gke=m((u7r,Vke)=>{var SBt=Dk();Vke.exports=SBt.satisfies(process.version,">=15.7.0")});var zke=m((c7r,Hke)=>{var wBt=Dk();Hke.exports=wBt.satisfies(process.version,">=16.9.0")});var Fte=m((l7r,Wke)=>{var ABt=Gke(),CBt=zke(),TBt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},OBt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Wke.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=TBt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(ABt)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,s=OBt[t];if(i!==s)throw new Error(`"alg" parameter "${t}" requires curve "${s}".`);break;case"rsa-pss":if(CBt){let o=parseInt(t.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:u,saltLength:c}=e.asymmetricKeyDetails;if(a!==`sha${o}`||u!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(c!==void 0&&c>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var Bte=m((d7r,Jke)=>{var xBt=Dk();Jke.exports=xBt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Xke=m((p7r,Qke)=>{var En=E9(),IBt=hte(),Yke=mte(),RBt=fte(),DBt=yte(),kBt=Fte(),MBt=Bte(),PBt=hk(),{KeyObject:NBt,createSecretKey:FBt,createPublicKey:BBt}=require("crypto"),qte=["RS256","RS384","RS512"],qBt=["ES256","ES384","ES512"],Lte=["RS256","RS384","RS512"],LBt=["HS256","HS384","HS512"];MBt&&(qte.splice(qte.length,0,"PS256","PS384","PS512"),Lte.splice(Lte.length,0,"PS256","PS384","PS512"));Qke.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=function(l,d){if(l)throw l;return d},r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new En("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new En("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new En("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new En("jwt must be provided"));if(typeof t!="string")return i(new En("jwt must be a string"));let o=t.split(".");if(o.length!==3)return i(new En("jwt malformed"));let a;try{a=RBt(t,{complete:!0})}catch(l){return i(l)}if(!a)return i(new En("invalid token"));let u=a.header,c;if(typeof e=="function"){if(!n)return i(new En("verify must be called asynchronous if secret or public key is provided as a callback"));c=e}else c=function(l,d){return d(null,e)};return c(u,function(l,d){if(l)return i(new En("error in secret or public key callback: "+l.message));let p=o[2].trim()!=="";if(!p&&d)return i(new En("jwt signature is required"));if(p&&!d)return i(new En("secret or public key must be provided"));if(!p&&!r.algorithms)return i(new En('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof NBt))try{d=BBt(d)}catch{try{d=FBt(typeof d=="string"?Buffer.from(d):d)}catch{return i(new En("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(d.type==="secret"?r.algorithms=LBt:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?r.algorithms=Lte:d.asymmetricKeyType==="ec"?r.algorithms=qBt:r.algorithms=qte),r.algorithms.indexOf(a.header.alg)===-1)return i(new En("invalid algorithm"));if(u.alg.startsWith("HS")&&d.type!=="secret")return i(new En(`secretOrPublicKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)&&d.type!=="public")return i(new En(`secretOrPublicKey must be an asymmetric key when using ${u.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{kBt(u.alg,d)}catch(g){return i(g)}let f;try{f=PBt.verify(t,a.header.alg,d)}catch(g){return i(g)}if(!f)return i(new En("invalid signature"));let h=a.payload;if(typeof h.nbf<"u"&&!r.ignoreNotBefore){if(typeof h.nbf!="number")return i(new En("invalid nbf value"));if(h.nbf>s+(r.clockTolerance||0))return i(new IBt("jwt not active",new Date(h.nbf*1e3)))}if(typeof h.exp<"u"&&!r.ignoreExpiration){if(typeof h.exp!="number")return i(new En("invalid exp value"));if(s>=h.exp+(r.clockTolerance||0))return i(new Yke("jwt expired",new Date(h.exp*1e3)))}if(r.audience){let g=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(h.aud)?h.aud:[h.aud]).some(function(w){return g.some(function(C){return C instanceof RegExp?C.test(w):C===w})}))return i(new En("jwt audience invalid. expected: "+g.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&h.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(h.iss)===-1))return i(new En("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&h.sub!==r.subject)return i(new En("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&h.jti!==r.jwtid)return i(new En("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&h.nonce!==r.nonce)return i(new En("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof h.iat!="number")return i(new En("iat required when maxAge is specified"));let g=DBt(r.maxAge,h.iat);if(typeof g>"u")return i(new En('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=g+(r.clockTolerance||0))return i(new Yke("maxAge exceeded",new Date(g*1e3)))}if(r.complete===!0){let g=a.signature;return i(null,{header:u,payload:h,signature:g})}return i(null,h)})}});var iMe=m((f7r,nMe)=>{var Zke=1/0,tMe=9007199254740991,jBt=17976931348623157e292,eMe=NaN,$Bt="[object Arguments]",KBt="[object Function]",UBt="[object GeneratorFunction]",VBt="[object String]",GBt="[object Symbol]",HBt=/^\s+|\s+$/g,zBt=/^[-+]0x[0-9a-f]+$/i,WBt=/^0b[01]+$/i,JBt=/^0o[0-7]+$/i,YBt=/^(?:0|[1-9]\d*)$/,QBt=parseInt;function XBt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function ZBt(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function eqt(t,e,r){if(e!==e)return ZBt(t,tqt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function tqt(t){return t!==t}function rqt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function nqt(t,e){return XBt(e,function(r){return t[r]})}function iqt(t,e){return function(r){return t(e(r))}}var kk=Object.prototype,$te=kk.hasOwnProperty,Mk=kk.toString,sqt=kk.propertyIsEnumerable,oqt=iqt(Object.keys,Object),aqt=Math.max;function uqt(t,e){var r=rMe(t)||fqt(t)?rqt(t.length,String):[],n=r.length,i=!!n;for(var s in t)(e||$te.call(t,s))&&!(i&&(s=="length"||lqt(s,n)))&&r.push(s);return r}function cqt(t){if(!dqt(t))return oqt(t);var e=[];for(var r in Object(t))$te.call(t,r)&&r!="constructor"&&e.push(r);return e}function lqt(t,e){return e=e??tMe,!!e&&(typeof t=="number"||YBt.test(t))&&t>-1&&t%1==0&&t<e}function dqt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||kk;return t===r}function pqt(t,e,r,n){t=Kte(t)?t:wqt(t),r=r&&!n?_qt(r):0;var i=t.length;return r<0&&(r=aqt(i+r,0)),gqt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&eqt(t,e,r)>-1}function fqt(t){return hqt(t)&&$te.call(t,"callee")&&(!sqt.call(t,"callee")||Mk.call(t)==$Bt)}var rMe=Array.isArray;function Kte(t){return t!=null&&yqt(t.length)&&!mqt(t)}function hqt(t){return Ute(t)&&Kte(t)}function mqt(t){var e=jte(t)?Mk.call(t):"";return e==KBt||e==UBt}function yqt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=tMe}function jte(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ute(t){return!!t&&typeof t=="object"}function gqt(t){return typeof t=="string"||!rMe(t)&&Ute(t)&&Mk.call(t)==VBt}function Eqt(t){return typeof t=="symbol"||Ute(t)&&Mk.call(t)==GBt}function bqt(t){if(!t)return t===0?t:0;if(t=vqt(t),t===Zke||t===-Zke){var e=t<0?-1:1;return e*jBt}return t===t?t:0}function _qt(t){var e=bqt(t),r=e%1;return e===e?r?e-r:e:0}function vqt(t){if(typeof t=="number")return t;if(Eqt(t))return eMe;if(jte(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=jte(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(HBt,"");var r=WBt.test(t);return r||JBt.test(t)?QBt(t.slice(2),r?2:8):zBt.test(t)?eMe:+t}function Sqt(t){return Kte(t)?uqt(t):cqt(t)}function wqt(t){return t?nqt(t,Sqt(t)):[]}nMe.exports=pqt});var oMe=m((h7r,sMe)=>{var Aqt="[object Boolean]",Cqt=Object.prototype,Tqt=Cqt.toString;function Oqt(t){return t===!0||t===!1||xqt(t)&&Tqt.call(t)==Aqt}function xqt(t){return!!t&&typeof t=="object"}sMe.exports=Oqt});var dMe=m((m7r,lMe)=>{var aMe=1/0,Iqt=17976931348623157e292,uMe=NaN,Rqt="[object Symbol]",Dqt=/^\s+|\s+$/g,kqt=/^[-+]0x[0-9a-f]+$/i,Mqt=/^0b[01]+$/i,Pqt=/^0o[0-7]+$/i,Nqt=parseInt,Fqt=Object.prototype,Bqt=Fqt.toString;function qqt(t){return typeof t=="number"&&t==Kqt(t)}function cMe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Lqt(t){return!!t&&typeof t=="object"}function jqt(t){return typeof t=="symbol"||Lqt(t)&&Bqt.call(t)==Rqt}function $qt(t){if(!t)return t===0?t:0;if(t=Uqt(t),t===aMe||t===-aMe){var e=t<0?-1:1;return e*Iqt}return t===t?t:0}function Kqt(t){var e=$qt(t),r=e%1;return e===e?r?e-r:e:0}function Uqt(t){if(typeof t=="number")return t;if(jqt(t))return uMe;if(cMe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=cMe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Dqt,"");var r=Mqt.test(t);return r||Pqt.test(t)?Nqt(t.slice(2),r?2:8):kqt.test(t)?uMe:+t}lMe.exports=qqt});var fMe=m((y7r,pMe)=>{var Vqt="[object Number]",Gqt=Object.prototype,Hqt=Gqt.toString;function zqt(t){return!!t&&typeof t=="object"}function Wqt(t){return typeof t=="number"||zqt(t)&&Hqt.call(t)==Vqt}pMe.exports=Wqt});var gMe=m((g7r,yMe)=>{var Jqt="[object Object]";function Yqt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function Qqt(t,e){return function(r){return t(e(r))}}var Xqt=Function.prototype,hMe=Object.prototype,mMe=Xqt.toString,Zqt=hMe.hasOwnProperty,eLt=mMe.call(Object),tLt=hMe.toString,rLt=Qqt(Object.getPrototypeOf,Object);function nLt(t){return!!t&&typeof t=="object"}function iLt(t){if(!nLt(t)||tLt.call(t)!=Jqt||Yqt(t))return!1;var e=rLt(t);if(e===null)return!0;var r=Zqt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&mMe.call(r)==eLt}yMe.exports=iLt});var bMe=m((E7r,EMe)=>{var sLt="[object String]",oLt=Object.prototype,aLt=oLt.toString,uLt=Array.isArray;function cLt(t){return!!t&&typeof t=="object"}function lLt(t){return typeof t=="string"||!uLt(t)&&cLt(t)&&aLt.call(t)==sLt}EMe.exports=lLt});var AMe=m((b7r,wMe)=>{var dLt="Expected a function",_Me=1/0,pLt=17976931348623157e292,vMe=NaN,fLt="[object Symbol]",hLt=/^\s+|\s+$/g,mLt=/^[-+]0x[0-9a-f]+$/i,yLt=/^0b[01]+$/i,gLt=/^0o[0-7]+$/i,ELt=parseInt,bLt=Object.prototype,_Lt=bLt.toString;function vLt(t,e){var r;if(typeof e!="function")throw new TypeError(dLt);return t=TLt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function SLt(t){return vLt(2,t)}function SMe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function wLt(t){return!!t&&typeof t=="object"}function ALt(t){return typeof t=="symbol"||wLt(t)&&_Lt.call(t)==fLt}function CLt(t){if(!t)return t===0?t:0;if(t=OLt(t),t===_Me||t===-_Me){var e=t<0?-1:1;return e*pLt}return t===t?t:0}function TLt(t){var e=CLt(t),r=e%1;return e===e?r?e-r:e:0}function OLt(t){if(typeof t=="number")return t;if(ALt(t))return vMe;if(SMe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=SMe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(hLt,"");var r=yLt.test(t);return r||gLt.test(t)?ELt(t.slice(2),r?2:8):mLt.test(t)?vMe:+t}wMe.exports=SLt});var MMe=m((_7r,kMe)=>{var CMe=yte(),xLt=Bte(),ILt=Fte(),TMe=hk(),RLt=iMe(),Pk=oMe(),OMe=dMe(),Vte=fMe(),IMe=gMe(),Jh=bMe(),DLt=AMe(),{KeyObject:kLt,createSecretKey:MLt,createPrivateKey:PLt}=require("crypto"),RMe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];xLt&&RMe.splice(3,0,"PS256","PS384","PS512");var NLt={expiresIn:{isValid:function(t){return OMe(t)||Jh(t)&&t},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(t){return OMe(t)||Jh(t)&&t},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(t){return Jh(t)||Array.isArray(t)},message:'"audience" must be a string or array'},algorithm:{isValid:RLt.bind(null,RMe),message:'"algorithm" must be a valid string enum value'},header:{isValid:IMe,message:'"header" must be an object'},encoding:{isValid:Jh,message:'"encoding" must be a string'},issuer:{isValid:Jh,message:'"issuer" must be a string'},subject:{isValid:Jh,message:'"subject" must be a string'},jwtid:{isValid:Jh,message:'"jwtid" must be a string'},noTimestamp:{isValid:Pk,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Jh,message:'"keyid" must be a string'},mutatePayload:{isValid:Pk,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Pk,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Pk,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},FLt={iat:{isValid:Vte,message:'"iat" should be a number of seconds'},exp:{isValid:Vte,message:'"exp" should be a number of seconds'},nbf:{isValid:Vte,message:'"nbf" should be a number of seconds'}};function DMe(t,e,r,n){if(!IMe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let s=t[i];if(!s){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!s.isValid(r[i]))throw new Error(s.message)})}function BLt(t){return DMe(NLt,!1,t,"options")}function qLt(t){return DMe(FLt,!0,t,"payload")}var xMe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},LLt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];kMe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),s=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function o(c){if(n)return n(c);throw c}if(!e&&r.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof kLt))try{e=PLt(e)}catch{try{e=MLt(typeof e=="string"?Buffer.from(e):e)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&e.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(e.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof t>"u")return o(new Error("payload is required"));if(i){try{qLt(t)}catch(c){return o(c)}r.mutatePayload||(t=Object.assign({},t))}else{let c=LLt.filter(function(l){return typeof r[l]<"u"});if(c.length>0)return o(new Error("invalid "+c.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{BLt(r)}catch(c){return o(c)}if(!r.allowInvalidAsymmetricKeyTypes)try{ILt(s.alg,e)}catch(c){return o(c)}let a=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=a),typeof r.notBefore<"u"){try{t.nbf=CMe(r.notBefore,a)}catch(c){return o(c)}if(typeof t.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=CMe(r.expiresIn,a)}catch(c){return o(c)}if(typeof t.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(xMe).forEach(function(c){let l=xMe[c];if(typeof r[c]<"u"){if(typeof t[l]<"u")return o(new Error('Bad "options.'+c+'" option. The payload already has an "'+l+'" property.'));t[l]=r[c]}});let u=r.encoding||"utf8";if(typeof n=="function")n=n&&DLt(n),TMe.createSign({header:s,privateKey:e,payload:t,encoding:u}).once("error",n).once("done",function(c){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&c.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));n(null,c)});else{let c=TMe.sign({header:s,payload:t,secret:e,encoding:u});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&c.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return c}}});var NMe=m((v7r,PMe)=>{PMe.exports={decode:fte(),verify:Xke(),sign:MMe(),JsonWebTokenError:E9(),NotBeforeError:hte(),TokenExpiredError:mte()}});var FMe,Yh,Nk=le(()=>{"use strict";FMe=Dt(NMe(),1);pi();d9();Tn();Yh=class t{static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw Ae(es.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=vs.nowSeconds();this.expirationTime=i+600;let o={alg:this.useSha256?wc.PSS_256:wc.RSA_256},a=this.useSha256?wc.X5T_256:wc.X5T;Object.assign(o,{[a]:du.base64EncodeUrl(this.thumbprint,cu.HEX)}),this.publicCertificate&&Object.assign(o,{[wc.X5C]:this.publicCertificate});let u={[wc.AUDIENCE]:this.jwtAudience,[wc.EXPIRATION_TIME]:this.expirationTime,[wc.ISSUER]:this.issuer,[wc.SUBJECT]:this.issuer,[wc.NOT_BEFORE]:i,[wc.JWT_ID]:e.createNewGuid()};return this.jwt=FMe.default.sign(u,this.privateKey,{header:o}),this.jwt}isExpired(){return this.expirationTime<vs.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,me.EMPTY_STRING));return n}}});var Gte,Qh,zb=le(()=>{"use strict";Gte="@azure/msal-node",Qh="3.8.0"});var T9,Hte=le(()=>{"use strict";pi();T9=class extends Go{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=vs.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new ts(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=wr.appendQueryString(e.tokenEndpoint,n),s=await this.createTokenRequestBody(r),o=this.createTokenRequestHeaders({credential:r.username,type:Uo.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,s,o,a,r.correlationId)}async createTokenRequestBody(e){let r=new Map;lt.addClientId(r,this.config.authOptions.clientId),lt.addUsername(r,e.username),lt.addPassword(r,e.password),lt.addScopes(r,e.scopes),lt.addResponseType(r,pb.IDTOKEN_TOKEN),lt.addGrantType(r,Ec.RESOURCE_OWNER_PASSWORD_GRANT),lt.addClientInfo(r),lt.addLibraryInfo(r,this.config.libraryInfo),lt.addApplicationTelemetry(r,this.config.telemetry.application),lt.addThrottling(r),this.serverTelemetryManager&&lt.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();lt.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&lt.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(lt.addClientAssertion(r,await Ho(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lt.addClientAssertionType(r,i.assertionType)),(!gn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&lt.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&lt.addCcsUpn(r,e.username),qh.mapToQueryString(r)}}});function BMe(t,e,r,n){let i=o9.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return lt.addLibraryInfo(i,{sku:Sc.MSAL_SKU,version:Qh,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==_c.OIDC&&lt.addApplicationTelemetry(i,t.telemetry.application),lt.addResponseType(i,pb.CODE),r.codeChallenge&&r.codeChallengeMethod&&lt.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),lt.addExtraQueryParameters(i,r.extraQueryParameters||{}),o9.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}var qMe=le(()=>{"use strict";pi();Tn();zb();});var Wb,Fk=le(()=>{"use strict";pi();Xee();p9();ik();Tn();rte();Nk();zb();l9();Hte();qMe();Wb=class{constructor(e){this.config=zIe(e),this.cryptoProvider=new zh,this.logger=new _f(this.config.system.loggerOptions,Gte,Qh),this.storage=new lg(this.logger,this.config.auth.clientId,this.cryptoProvider,Ree(this.config.auth)),this.tokenCache=new h9(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||fb.QUERY,authenticationScheme:or.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return BMe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:or.BEARER},i=this.initializeServerTelemetryManager(Gh.acquireTokenByCode,n.correlationId);try{let s=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(s,n.correlationId,n.redirectUri,i),a=new i9(o);return this.logger.verbose("Auth code client created",n.correlationId),await a.acquireToken(n,r)}catch(s){throw s instanceof ar&&s.setCorrelationId(n.correlationId),i.cacheFailedRequest(s),s}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:or.BEARER},n=this.initializeServerTelemetryManager(Gh.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),o=new sg(s);return this.logger.verbose("Refresh token client created",r.correlationId),await o.acquireToken(r)}catch(i){throw i instanceof ar&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(Gh.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),o=new s9(s);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,o,s)}catch(a){if(a instanceof yb&&a.errorCode===es.tokenRefreshRequired)return new sg(s).acquireTokenByRefreshToken(r);throw a}}catch(i){throw i instanceof ar&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,s]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...gc]});if(s===An.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let o=new sg(n);try{await o.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(Gh.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),o=new T9(s);return this.logger.verbose("Username password client created",r.correlationId),await o.acquireToken(r)}catch(i){throw i instanceof ar&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw Hh.createStateNotFoundError();if(e!==r)throw Ae(es.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:Sc.MSAL_SKU,version:Qh,cpu:process.arch||me.EMPTY_STRING,os:process.platform||me.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=Yh.fromAssertion(await Ho(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Sc.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===or.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=or.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!gn.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...gc],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new a9(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let s=Of.generateAuthority(e,i||this.config.auth.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return BD.createDiscoveredInstance(s,this.config.system.networkClient,this.storage,o,this.logger,r)}clearCache(){this.storage.clear()}}});var LMe=le(()=>{"use strict";l9();Tn();});var zte=le(()=>{"use strict";});var jMe=le(()=>{"use strict";Tn();Fk();l9();LMe();zte();zb();});var Jb,Bk=le(()=>{"use strict";pi();Jb=class extends Go{constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===An.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,s,o){let a=r,u=r,c=An.NOT_APPLICABLE,l;a.serializableCache&&a.persistencePlugin&&(l=new jl(a.serializableCache,!1),await a.persistencePlugin.beforeCacheAccess(l));let d=this.readAccessTokenFromCache(i,u.managedIdentityId?.id||a.authOptions.clientId,new qi(e.scopes||[]),s,e.correlationId);return a.serializableCache&&a.persistencePlugin&&l&&await a.persistencePlugin.afterCacheAccess(l),d?vs.isTokenExpired(d.expiresOn,a.systemOptions?.tokenRenewalOffsetSeconds||mb)?(o?.setCacheOutcome(An.CACHED_ACCESS_TOKEN_EXPIRED),[null,An.CACHED_ACCESS_TOKEN_EXPIRED]):(d.refreshOn&&vs.isTokenExpired(d.refreshOn.toString(),0)&&(c=An.PROACTIVELY_REFRESHED,o?.setCacheOutcome(An.PROACTIVELY_REFRESHED)),[await ts.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:d,refreshToken:null,appMetadata:null},!0,e),c]):(o?.setCacheOutcome(An.NO_CACHED_ACCESS_TOKEN),[null,An.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,s){let o={homeAccountId:me.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Jr.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:qi.createSearchScopes(n.asArray())},a=i.getAccessTokensByFilter(o,s);if(a.length<1)return null;if(a.length>1)throw Ae(es.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i,s;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let u={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};s=vs.nowSeconds();let c=await this.appTokenProvider(u);i={access_token:c.accessToken,expires_in:c.expiresInSeconds,refresh_in:c.refreshInSeconds,token_type:or.BEARER}}else{let u=this.createTokenQueryParameters(e),c=wr.appendQueryString(r.tokenEndpoint,u),l=await this.createTokenRequestBody(e),d=this.createTokenRequestHeaders(),p={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),s=vs.nowSeconds();let f=await this.executePostToTokenEndpoint(c,l,d,p,e.correlationId);i=f.body,i.status=f.status}let o=new ts(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i,n),await o.handleServerTokenResponse(i,this.authority,s,e)}async createTokenRequestBody(e){let r=new Map;lt.addClientId(r,this.config.authOptions.clientId),lt.addScopes(r,e.scopes,!1),lt.addGrantType(r,Ec.CLIENT_CREDENTIALS_GRANT),lt.addLibraryInfo(r,this.config.libraryInfo),lt.addApplicationTelemetry(r,this.config.telemetry.application),lt.addThrottling(r),this.serverTelemetryManager&&lt.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();lt.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&lt.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(lt.addClientAssertion(r,await Ho(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lt.addClientAssertionType(r,i.assertionType)),(!gn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&lt.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),qh.mapToQueryString(r)}}});var O9,Wte=le(()=>{"use strict";pi();d9();O9=class extends Go{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new qi(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(vs.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(An.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ae(es.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(An.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ae(es.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,s=null;if(n){i=bD.extractTokenClaims(n.secret,du.base64Decode);let o=i.oid||i.sub,a={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:me.EMPTY_STRING,localAccountId:o||me.EMPTY_STRING};s=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(a),e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),ts.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Jr.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||or.BEARER,s={credentialType:n&&n.toLowerCase()!==or.BEARER.toLowerCase()?Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Jr.ACCESS_TOKEN,clientId:e,target:qi.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},o=this.cacheManager.getAccessTokensByFilter(s,r.correlationId),a=o.length;if(a<1)return null;if(a>1)throw Ae(es.multipleMatchingTokens);return o[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),s=wr.appendQueryString(r.tokenEndpoint,i),o=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=vs.nowSeconds(),l=await this.executePostToTokenEndpoint(s,o,a,u,e.correlationId),d=new ts(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(l.body),await d.handleServerTokenResponse(l.body,this.authority,c,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;lt.addClientId(r,this.config.authOptions.clientId),lt.addScopes(r,e.scopes),lt.addGrantType(r,Ec.JWT_BEARER),lt.addClientInfo(r),lt.addLibraryInfo(r,this.config.libraryInfo),lt.addApplicationTelemetry(r,this.config.telemetry.application),lt.addThrottling(r),this.serverTelemetryManager&&lt.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();lt.addCorrelationId(r,n),lt.addRequestTokenUse(r,ID.ON_BEHALF_OF),lt.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&lt.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(lt.addClientAssertion(r,await Ho(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lt.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&lt.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),qh.mapToQueryString(r)}}});var x9,$Me=le(()=>{"use strict";Fk();Nk();Tn();pi();Bk();Wte();x9=class extends Wb{constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw Ae(es.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?Yh.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):Yh.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw Ae(es.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Ho(e.clientAssertion,this.config.auth.clientId),assertionType:Sc.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(p=>!gc.includes(p))},s={...e,...i,clientAssertion:r},a=new wr(s.authority).getUrlComponents().PathSegments[0];if(Object.values(Fa).includes(a))throw Ae(es.missingTenantIdError);let u=process.env[PIe],c;s.azureRegion!=="DisableMsalForceRegion"&&(!s.azureRegion&&u?c=u:c=s.azureRegion);let l={azureRegion:c,environmentRegion:process.env[MIe]},d=this.initializeServerTelemetryManager(Gh.acquireTokenByClientCredential,s.correlationId,s.skipCache);try{let p=await this.createAuthority(s.authority,s.correlationId,l,e.azureCloudOptions),f=await this.buildOauthClientConfiguration(p,s.correlationId,"",d),h=new Jb(f,this.appTokenProvider);return this.logger.verbose("Client credential client created",s.correlationId),await h.acquireToken(s)}catch(p){throw p instanceof ar&&p.setCorrelationId(s.correlationId),d.cacheFailedRequest(p),p}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),s=new O9(i);return this.logger.verbose("On behalf of client created",r.correlationId),await s.acquireToken(r)}catch(n){throw n instanceof ar&&n.setCorrelationId(r.correlationId),n}}}});function KMe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}var UMe=le(()=>{"use strict";});var qk,VMe=le(()=>{"use strict";pi();Tn();qk=class{constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===ns.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let s=0;for(;await this.retryPolicy.pauseForRetry(i.status,s,this.logger,i.headers[mn.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),s++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(ns.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(ns.POST,e,r)}}});var Yb,If,fg=le(()=>{"use strict";pi();Tn();qb();UMe();VMe();ag();Yb={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},If=class{constructor(e,r,n,i,s){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=s}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(KMe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-vs.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let s=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),s.queryParameters[xf.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let f=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${f}`),s.queryParameters[xf.XMS_CC]=f}let o=s.headers;o[mn.CONTENT_TYPE]=me.URL_FORM_CONTENT_TYPE;let a={headers:o};Object.keys(s.bodyParameters).length&&(a.body=s.computeParametersBodyString());let u=this.disableInternalRetries?this.networkClient:new qk(this.networkClient,s.retryPolicy,this.logger),c=vs.nowSeconds(),l;try{s.httpMethod===ns.POST?l=await u.sendPostRequestAsync(s.computeUri(),a):l=await u.sendGetRequestAsync(s.computeUri(),a)}catch(f){throw f instanceof ar?f:Ae(es.networkError)}let d=new ts(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),p=await this.getServerTokenResponseAsync(l,u,s,a);return d.validateTokenResponse(p,i),d.handleServerTokenResponse(p,n,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Kl.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?Yb.MANAGED_IDENTITY_CLIENT_ID_2017:Yb.MANAGED_IDENTITY_CLIENT_ID;case Kl.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?Yb.MANAGED_IDENTITY_RESOURCE_ID_IMDS:Yb.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Kl.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),Yb.MANAGED_IDENTITY_OBJECT_ID;default:throw ug(c9)}}};If.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new wr(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),ug(og[t])}}});var GMe=le(()=>{"use strict";});var DTr,HMe=le(()=>{"use strict";nk();GMe();DTr=[sr.NOT_FOUND,sr.REQUEST_TIMEOUT,sr.TOO_MANY_REQUESTS,sr.SERVER_ERROR,sr.SERVICE_UNAVAILABLE,sr.GATEWAY_TIMEOUT]});var hg=le(()=>{"use strict";HMe();});var zMe=le(()=>{"use strict";fg();Tn();hg();});var HTr,zTr,WMe=le(()=>{"use strict";hg();fg();qb();Tn();ag();HTr={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},zTr={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"}});var JMe=le(()=>{"use strict";hg();fg();Tn();qb();ag();});var YMe=le(()=>{"use strict";});var sOr,oOr,QMe=le(()=>{"use strict";nk();YMe();sOr=[sr.NOT_FOUND,sr.REQUEST_TIMEOUT,sr.GONE,sr.TOO_MANY_REQUESTS],oOr=10*1e3});var $Lt,fOr,XMe=le(()=>{"use strict";hg();fg();Tn();QMe();$Lt="/metadata/identity/oauth2/token",fOr=`http://169.254.169.254${$Lt}`});var ZMe=le(()=>{"use strict";hg();fg();Tn();});var SOr,ePe=le(()=>{"use strict";fg();Tn();hg();SOr=`Only client id is supported for user-assigned managed identity in ${$l.MACHINE_LEARNING}.`});var tPe=le(()=>{"use strict";zMe();WMe();JMe();XMe();ZMe();qb();Tn();ePe();ag();});var YOr,rPe=le(()=>{"use strict";Xee();zb();p9();Bk();tPe();ik();Tn();tk();YOr=[$l.SERVICE_FABRIC]});var nPe=le(()=>{"use strict";});var iPe=le(()=>{"use strict";kIe();jMe();$Me();Fk();Bk();zte();Wte();rPe();Hte();Nk();rte();nPe();Tn();p9();zb();});var Hn={};aa(Hn,{__addDisposableResource:()=>IPe,__assign:()=>Lk,__asyncDelegator:()=>vPe,__asyncGenerator:()=>_Pe,__asyncValues:()=>SPe,__await:()=>Qb,__awaiter:()=>hPe,__classPrivateFieldGet:()=>TPe,__classPrivateFieldIn:()=>xPe,__classPrivateFieldSet:()=>OPe,__createBinding:()=>$k,__decorate:()=>aPe,__disposeResources:()=>RPe,__esDecorate:()=>cPe,__exportStar:()=>yPe,__extends:()=>sPe,__generator:()=>mPe,__importDefault:()=>CPe,__importStar:()=>APe,__makeTemplateObject:()=>wPe,__metadata:()=>fPe,__param:()=>uPe,__propKey:()=>dPe,__read:()=>Qte,__rest:()=>oPe,__rewriteRelativeImportExtension:()=>DPe,__runInitializers:()=>lPe,__setFunctionName:()=>pPe,__spread:()=>gPe,__spreadArray:()=>bPe,__spreadArrays:()=>EPe,__values:()=>jk,default:()=>VLt});function sPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jte(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function oPe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function aPe(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function uPe(t,e){return function(r,n){e(r,n,t)}}function cPe(t,e,r,n,i,s){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,l=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]=g==="access"?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(S||null))};var _=(0,r[f])(a==="accessor"?{get:l.get,set:l.set}:l[u],h);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(d=o(_.get))&&(l.get=d),(d=o(_.set))&&(l.set=d),(d=o(_.init))&&i.unshift(d)}else(d=o(_))&&(a==="field"?i.unshift(d):l[u]=d)}c&&Object.defineProperty(c,n.name,l),p=!0}function lPe(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function dPe(t){return typeof t=="symbol"?t:"".concat(t)}function pPe(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function fPe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function hPe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function mPe(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function yPe(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$k(e,t,r)}function jk(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qte(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function gPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qte(arguments[e]));return t}function EPe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function bPe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Qb(t){return this instanceof Qb?(this.v=t,this):new Qb(t)}function _Pe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(g){return new Promise(function(_,S){s.push([f,g,_,S])>1||u(f,g)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(g){p(s[0][3],g)}}function c(f){f.value instanceof Qb?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function vPe(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Qb(t[i](o)),done:!1}:s?s(o):o}:s}}function SPe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof jk=="function"?jk(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function wPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function APe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Yte(t),n=0;n<r.length;n++)r[n]!=="default"&&$k(e,t,r[n]);return KLt(e,t),e}function CPe(t){return t&&t.__esModule?t:{default:t}}function TPe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function OPe(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function xPe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function IPe(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function RPe(t){function e(s){t.error=t.hasError?new ULt(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function DPe(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}var Jte,Lk,$k,KLt,Yte,ULt,VLt,zn=le(()=>{Jte=function(t,e){return Jte=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Jte(t,e)};Lk=function(){return Lk=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lk.apply(this,arguments)};$k=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});KLt=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Yte=function(t){return Yte=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Yte(t)};ULt=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};VLt={__extends:sPe,__assign:Lk,__rest:oPe,__decorate:aPe,__param:uPe,__esDecorate:cPe,__runInitializers:lPe,__propKey:dPe,__setFunctionName:pPe,__metadata:fPe,__awaiter:hPe,__generator:mPe,__createBinding:$k,__exportStar:yPe,__values:jk,__read:Qte,__spread:gPe,__spreadArrays:EPe,__spreadArray:bPe,__await:Qb,__asyncGenerator:_Pe,__asyncDelegator:vPe,__asyncValues:SPe,__makeTemplateObject:wPe,__importStar:APe,__importDefault:CPe,__classPrivateFieldGet:TPe,__classPrivateFieldSet:OPe,__classPrivateFieldIn:xPe,__addDisposableResource:IPe,__disposeResources:RPe,__rewriteRelativeImportExtension:DPe}});var D9=m(Kk=>{"use strict";Object.defineProperty(Kk,"__esModule",{value:!0});Kk.RequestMethod=void 0;var kPe;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(kPe||(Kk.RequestMethod=kPe={}))});var MPe=m(Uk=>{"use strict";Object.defineProperty(Uk,"__esModule",{value:!0});Uk.BatchRequestContent=void 0;var Xb=(zn(),Jt(Hn)),Xte=D9(),GLt=(function(){function t(e){if(this.requests=new Map,typeof e<"u"){var r=t.requestLimit;if(e.length>r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}for(var i=0,s=e;i<s.length;i++){var o=s[i];this.addRequest(o)}}}return t.validateDependencies=function(e){var r=function(o){for(var a=o.entries(),u=a.next();!u.done;){var c=u.value[1];if(c.dependsOn!==void 0&&c.dependsOn.length>0)return!1;u=a.next()}return!0},n=function(o){var a=o.entries(),u=a.next(),c=u.value[1];if(c.dependsOn!==void 0&&c.dependsOn.length>0)return!1;var l=u;for(u=a.next();!u.done;){var d=u.value[1];if(d.dependsOn===void 0||d.dependsOn.length!==1||d.dependsOn[0]!==l.value[1].id)return!1;l=u,u=a.next()}return!0},i=function(o){var a=o.entries(),u=a.next(),c=u.value[1],l;if(c.dependsOn===void 0||c.dependsOn.length===0)l=c.id;else if(c.dependsOn.length===1){var d=c.dependsOn[0];if(d!==c.id&&o.has(d))l=d;else return!1}else return!1;for(u=a.next();!u.done;){var p=u.value[1];if((p.dependsOn===void 0||p.dependsOn.length===0)&&l!==p.id||p.dependsOn!==void 0&&p.dependsOn.length!==0&&(p.dependsOn.length===1&&(p.id===l||p.dependsOn[0]!==l)||p.dependsOn.length>1))return!1;u=a.next()}return!0};if(e.size===0){var s=new Error("Empty requests map, Please provide at least one request.");throw s.name="Empty Requests Error",s}return r(e)||n(e)||i(e)},t.getRequestData=function(e){return Xb.__awaiter(this,void 0,void 0,function(){var r,n,i,s;return Xb.__generator(this,function(o){switch(o.label){case 0:return r={url:""},n=new RegExp("^https?://"),r.url=n.test(e.url)?"/"+e.url.split(/.*?\/\/.*?\//)[1]:e.url,r.method=e.method,i={},e.headers.forEach(function(a,u){i[u]=a}),Object.keys(i).length&&(r.headers=i),e.method===Xte.RequestMethod.PATCH||e.method===Xte.RequestMethod.POST||e.method===Xte.RequestMethod.PUT?(s=r,[4,t.getRequestBody(e)]):[3,2];case 1:s.body=o.sent(),o.label=2;case 2:return[2,r]}})})},t.getRequestBody=function(e){return Xb.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a,u,c;return Xb.__generator(this,function(l){switch(l.label){case 0:r=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),i=e.clone(),[4,i.json()];case 2:return n=l.sent(),r=!0,[3,4];case 3:return s=l.sent(),[3,4];case 4:if(r)return[3,12];l.label=5;case 5:return l.trys.push([5,11,,12]),typeof Blob<"u"?[4,e.blob()]:[3,8];case 6:return o=l.sent(),a=new FileReader,[4,new Promise(function(d){a.addEventListener("load",function(){var p=a.result,f=new RegExp("^s*data:(.+?/.+?(;.+?=.+?)*)?(;base64)?,(.*)s*$"),h=f.exec(p);d(h[4])},!1),a.readAsDataURL(o)})];case 7:return n=l.sent(),[3,10];case 8:return typeof Buffer<"u"?[4,e.buffer()]:[3,10];case 9:u=l.sent(),n=u.toString("base64"),l.label=10;case 10:return r=!0,[3,12];case 11:return c=l.sent(),[3,12];case 12:return[2,n]}})})},t.prototype.addRequest=function(e){var r=t.requestLimit;if(e.id===""){var n=new Error("Id for a request is empty, Please provide an unique id");throw n.name="Empty Id For Request",n}if(this.requests.size===r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}if(this.requests.has(e.id)){var n=new Error("Adding request with duplicate id ".concat(e.id,", Make the id of the requests unique"));throw n.name="Duplicate RequestId Error",n}return this.requests.set(e.id,e),e.id},t.prototype.removeRequest=function(e){for(var r=this.requests.delete(e),n=this.requests.entries(),i=n.next();!i.done;){var s=i.value[1].dependsOn;if(typeof s<"u"){var o=s.indexOf(e);o!==-1&&s.splice(o,1),s.length===0&&delete i.value[1].dependsOn}i=n.next()}return r},t.prototype.getContent=function(){return Xb.__awaiter(this,void 0,void 0,function(){var e,r,n,i,a,a,s,o,a;return Xb.__generator(this,function(u){switch(u.label){case 0:if(e=[],r={requests:e},n=this.requests.entries(),i=n.next(),i.done)throw a=new Error("No requests added yet, Please add at least one request."),a.name="Empty Payload",a;if(!t.validateDependencies(this.requests))throw a=new Error(`Invalid dependency found, Dependency should be:
1. Parallel - no individual request states a dependency in the dependsOn property.
2. Serial - all individual requests depend on the previous individual request.
3. Same - all individual requests that state a dependency in the dependsOn property, state the same dependency.`),a.name="Invalid Dependency",a;u.label=1;case 1:return i.done?[3,3]:(s=i.value[1],[4,t.getRequestData(s.request)]);case 2:if(o=u.sent(),o.body!==void 0&&(o.headers===void 0||o.headers["content-type"]===void 0))throw a=new Error("Content-type header is not mentioned for request #".concat(s.id,", For request having body, Content-type header should be mentioned")),a.name="Invalid Content-type header",a;return o.id=s.id,s.dependsOn!==void 0&&s.dependsOn.length>0&&(o.dependsOn=s.dependsOn),e.push(o),i=n.next(),[3,1];case 3:return r.requests=e,[2,r]}})})},t.prototype.addDependency=function(e,r){if(!this.requests.has(e)){var n=new Error("Dependent ".concat(e," does not exists, Please check the id"));throw n.name="Invalid Dependent",n}if(typeof r<"u"&&!this.requests.has(r)){var n=new Error("Dependency ".concat(r," does not exists, Please check the id"));throw n.name="Invalid Dependency",n}if(typeof r<"u"){var i=this.requests.get(e);if(i.dependsOn===void 0&&(i.dependsOn=[]),i.dependsOn.indexOf(r)!==-1){var n=new Error("Dependency ".concat(r," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}i.dependsOn.push(r)}else{for(var s=this.requests.entries(),o=void 0,a=s.next();!a.done&&a.value[1].id!==e;)o=a,a=s.next();if(typeof o<"u"){var u=o.value[0];if(a.value[1].dependsOn===void 0&&(a.value[1].dependsOn=[]),a.value[1].dependsOn.indexOf(u)!==-1){var n=new Error("Dependency ".concat(u," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}a.value[1].dependsOn.push(u)}else{var n=new Error("Can't add dependency ".concat(r,", There is only a dependent request in the batch"));throw n.name="Invalid Dependency Addition",n}}},t.prototype.removeDependency=function(e,r){var n=this.requests.get(e);if(typeof n>"u"||n.dependsOn===void 0||n.dependsOn.length===0)return!1;if(typeof r<"u"){var i=n.dependsOn.indexOf(r);return i===-1?!1:(n.dependsOn.splice(i,1),!0)}else return delete n.dependsOn,!0},t.requestLimit=20,t})();Uk.BatchRequestContent=GLt});var PPe=m(Vk=>{"use strict";Object.defineProperty(Vk,"__esModule",{value:!0});Vk.BatchResponseContent=void 0;var HLt=(zn(),Jt(Hn)),zLt=(function(){function t(e){this.responses=new Map,this.update(e)}return t.prototype.createResponseObject=function(e){var r=e.body,n={};if(n.status=e.status,e.statusText!==void 0&&(n.statusText=e.statusText),n.headers=e.headers,n.headers!==void 0&&n.headers["Content-Type"]!==void 0&&n.headers["Content-Type"].split(";")[0]==="application/json"){var i=JSON.stringify(r);return new Response(i,n)}return new Response(r,n)},t.prototype.update=function(e){this.nextLink=e["@odata.nextLink"];for(var r=e.responses,n=0,i=r.length;n<i;n++)this.responses.set(r[n].id,this.createResponseObject(r[n]))},t.prototype.getResponseById=function(e){return this.responses.get(e)},t.prototype.getResponses=function(){return this.responses},t.prototype.getResponsesIterator=function(){var e,r;return HLt.__generator(this,function(n){switch(n.label){case 0:e=this.responses.entries(),r=e.next(),n.label=1;case 1:return r.done?[3,3]:[4,r.value];case 2:return n.sent(),r=e.next(),[3,1];case 3:return[2]}})},t})();Vk.BatchResponseContent=zLt});var Zte=m(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.GRAPH_URLS=Xh.GRAPH_BASE_URL=Xh.GRAPH_API_VERSION=void 0;Xh.GRAPH_API_VERSION="v1.0";Xh.GRAPH_BASE_URL="https://graph.microsoft.com/";Xh.GRAPH_URLS=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"])});var Rf=m(Gk=>{"use strict";Object.defineProperty(Gk,"__esModule",{value:!0});Gk.GraphClientError=void 0;var WLt=(zn(),Jt(Hn)),JLt=(function(t){WLt.__extends(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e.setGraphClientError=function(r){var n;return r instanceof Error?n=r:(n=new e,n.customError=r),n},e})(Error);Gk.GraphClientError=JLt});var Hk=m(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.isCustomHost=Oc.isGraphURL=Oc.serializeContent=Oc.urlJoin=Oc.oDataQueryNames=void 0;var YLt=Zte(),QLt=Rf();Oc.oDataQueryNames=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"];var XLt=function(t){var e=function(s){return s.replace(/\/+$/,"")},r=function(s){return s.replace(/^\/+/,"")},n=function(s,o){return[e(s),r(o)].join("/")},i=Array.prototype.slice.call(t);return i.reduce(n)};Oc.urlJoin=XLt;var ZLt=function(t){var e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t};Oc.serializeContent=ZLt;var ejt=function(t){return NPe(t)};Oc.isGraphURL=ejt;var tjt=function(t,e){return e.forEach(function(r){return rjt(r)}),NPe(t,e)};Oc.isCustomHost=tjt;var NPe=function(t,e){if(e===void 0&&(e=YLt.GRAPH_URLS),t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");var r=t.indexOf(":"),n=t.indexOf("/"),i="";if(n!==-1)return r!==-1&&r<n?(i=t.substring(0,r),e.has(i)):(i=t.substring(0,n),e.has(i))}return!1},rjt=function(t){if(t.indexOf("/")!==-1)throw new QLt.GraphClientError("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")}});var Zh=m(zk=>{"use strict";Object.defineProperty(zk,"__esModule",{value:!0});zk.MiddlewareControl=void 0;var njt=(function(){function t(e){e===void 0&&(e=[]),this.middlewareOptions=new Map;for(var r=0,n=e;r<n.length;r++){var i=n[r],s=i.constructor;this.middlewareOptions.set(s,i)}}return t.prototype.getMiddlewareOptions=function(e){return this.middlewareOptions.get(e)},t.prototype.setMiddlewareOptions=function(e,r){this.middlewareOptions.set(e,r)},t})();zk.MiddlewareControl=njt});var Zb=m(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.cloneRequestWithNewUrl=xc.appendRequestHeader=xc.setRequestHeader=xc.getRequestHeader=xc.generateUUID=void 0;var FPe=(zn(),Jt(Hn)),ijt=function(){for(var t="",e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t};xc.generateUUID=ijt;var sjt=function(t,e,r){var n=null;if(typeof Request<"u"&&t instanceof Request)n=t.headers.get(r);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)n=e.headers.get(r);else if(e.headers instanceof Array){for(var i=e.headers,s=0,o=i.length;s<o;s++)if(i[s][0]===r){n=i[s][1];break}}else e.headers[r]!==void 0&&(n=e.headers[r]);return n};xc.getRequestHeader=sjt;var ojt=function(t,e,r,n){var i,s;if(typeof Request<"u"&&t instanceof Request)t.headers.set(r,n);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers((i={},i[r]=n,i));else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(r,n);else if(e.headers instanceof Array){for(var o=0,a=e.headers.length;o<a;o++){var u=e.headers[o];if(u[0]===r){u[1]=n;break}}o===a&&e.headers.push([r,n])}else Object.assign(e.headers,(s={},s[r]=n,s))};xc.setRequestHeader=ojt;var ajt=function(t,e,r,n){var i,s;typeof Request<"u"&&t instanceof Request?t.headers.append(r,n):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers((i={},i[r]=n,i)):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(r,n):e.headers instanceof Array?e.headers.push([r,n]):e.headers===void 0?e.headers=(s={},s[r]=n,s):e.headers[r]===void 0?e.headers[r]=n:e.headers[r]+=", ".concat(n))};xc.appendRequestHeader=ajt;var ujt=function(t,e){return FPe.__awaiter(void 0,void 0,void 0,function(){var r,n,i,s,o,a,u,c,l,d,p,f,h;return FPe.__generator(this,function(g){switch(g.label){case 0:return e.headers.get("Content-Type")?[4,e.blob()]:[3,2];case 1:return n=g.sent(),[3,4];case 2:return[4,Promise.resolve(void 0)];case 3:n=g.sent(),g.label=4;case 4:return r=n,i=e.method,s=e.headers,o=e.referrer,a=e.referrerPolicy,u=e.mode,c=e.credentials,l=e.cache,d=e.redirect,p=e.integrity,f=e.keepalive,h=e.signal,[2,new Request(t,{method:i,headers:s,body:r,referrer:o,referrerPolicy:a,mode:u,credentials:c,cache:l,redirect:d,integrity:p,keepalive:f,signal:h})]}})})};xc.cloneRequestWithNewUrl=ujt});var ere=m(Wk=>{"use strict";Object.defineProperty(Wk,"__esModule",{value:!0});Wk.AuthenticationHandlerOptions=void 0;var cjt=(function(){function t(e,r){this.authenticationProvider=e,this.authenticationProviderOptions=r}return t})();Wk.AuthenticationHandlerOptions=cjt});var t_=m(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});e_.TelemetryHandlerOptions=e_.FeatureUsageFlag=void 0;var BPe=Zh(),tre;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(tre||(e_.FeatureUsageFlag=tre={}));var ljt=(function(){function t(){this.featureUsage=tre.NONE}return t.updateFeatureUsageFlag=function(e,r){var n;e.middlewareControl instanceof BPe.MiddlewareControl?n=e.middlewareControl.getMiddlewareOptions(t):e.middlewareControl=new BPe.MiddlewareControl,typeof n>"u"&&(n=new t,e.middlewareControl.setMiddlewareOptions(t,n)),n.setFeatureUsage(r)},t.prototype.setFeatureUsage=function(e){this.featureUsage=this.featureUsage|e},t.prototype.getFeatureUsage=function(){return this.featureUsage.toString(16)},t})();e_.TelemetryHandlerOptions=ljt});var Yk=m(Jk=>{"use strict";Object.defineProperty(Jk,"__esModule",{value:!0});Jk.AuthenticationHandler=void 0;var qPe=(zn(),Jt(Hn)),LPe=Hk(),djt=Zh(),pjt=Zb(),fjt=ere(),jPe=t_(),hjt=(function(){function t(e){this.authenticationProvider=e}return t.prototype.execute=function(e){return qPe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a;return qPe.__generator(this,function(u){switch(u.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,LPe.isGraphURL)(r)||e.customHosts&&(0,LPe.isCustomHost)(r,e.customHosts)?(n=void 0,e.middlewareControl instanceof djt.MiddlewareControl&&(n=e.middlewareControl.getMiddlewareOptions(fjt.AuthenticationHandlerOptions)),i=void 0,s=void 0,n&&(i=n.authenticationProvider,s=n.authenticationProviderOptions),i||(i=this.authenticationProvider),[4,i.getAccessToken(s)]):[3,2];case 1:return o=u.sent(),a="Bearer ".concat(o),(0,pjt.appendRequestHeader)(e.request,e.options,t.AUTHORIZATION_HEADER,a),jPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,jPe.FeatureUsageFlag.AUTHENTICATION_HANDLER_ENABLED),[3,3];case 2:e.options.headers&&delete e.options.headers[t.AUTHORIZATION_HEADER],u.label=3;case 3:return[4,this.nextMiddleware.execute(e)];case 4:return[2,u.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.AUTHORIZATION_HEADER="Authorization",t})();Jk.AuthenticationHandler=hjt});var Xk=m(Qk=>{"use strict";Object.defineProperty(Qk,"__esModule",{value:!0});Qk.HTTPMessageHandler=void 0;var $Pe=(zn(),Jt(Hn)),mjt=(function(){function t(){}return t.prototype.execute=function(e){return $Pe.__awaiter(this,void 0,void 0,function(){var r;return $Pe.__generator(this,function(n){switch(n.label){case 0:return r=e,[4,fetch(e.request,e.options)];case 1:return r.response=n.sent(),[2]}})})},t})();Qk.HTTPMessageHandler=mjt});var k9=m(Zk=>{"use strict";Object.defineProperty(Zk,"__esModule",{value:!0});Zk.RetryHandlerOptions=void 0;var yjt=(function(){function t(e,r,n){if(e===void 0&&(e=t.DEFAULT_DELAY),r===void 0&&(r=t.DEFAULT_MAX_RETRIES),n===void 0&&(n=t.defaultShouldRetry),e>t.MAX_DELAY&&r>t.MAX_MAX_RETRIES){var i=new Error("Delay and MaxRetries should not be more than ".concat(t.MAX_DELAY," and ").concat(t.MAX_MAX_RETRIES));throw i.name="MaxLimitExceeded",i}else if(e>t.MAX_DELAY){var i=new Error("Delay should not be more than ".concat(t.MAX_DELAY));throw i.name="MaxLimitExceeded",i}else if(r>t.MAX_MAX_RETRIES){var i=new Error("MaxRetries should not be more than ".concat(t.MAX_MAX_RETRIES));throw i.name="MaxLimitExceeded",i}else if(e<0&&r<0){var i=new Error("Delay and MaxRetries should not be negative");throw i.name="MinExpectationNotMet",i}else if(e<0){var i=new Error("Delay should not be negative");throw i.name="MinExpectationNotMet",i}else if(r<0){var i=new Error("MaxRetries should not be negative");throw i.name="MinExpectationNotMet",i}this.delay=Math.min(e,t.MAX_DELAY),this.maxRetries=Math.min(r,t.MAX_MAX_RETRIES),this.shouldRetry=n}return t.prototype.getMaxDelay=function(){return t.MAX_DELAY},t.DEFAULT_DELAY=3,t.DEFAULT_MAX_RETRIES=3,t.MAX_DELAY=180,t.MAX_MAX_RETRIES=10,t.defaultShouldRetry=function(){return!0},t})();Zk.RetryHandlerOptions=yjt});var tM=m(eM=>{"use strict";Object.defineProperty(eM,"__esModule",{value:!0});eM.RetryHandler=void 0;var r_=(zn(),Jt(Hn)),rre=D9(),gjt=Zh(),KPe=Zb(),UPe=k9(),VPe=t_(),Ejt=(function(){function t(e){e===void 0&&(e=new UPe.RetryHandlerOptions),this.options=e}return t.prototype.isRetry=function(e){return t.RETRY_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.isBuffered=function(e,r){var n=typeof e=="string"?r.method:e.method,i=n===rre.RequestMethod.PUT||n===rre.RequestMethod.PATCH||n===rre.RequestMethod.POST;if(i){var s=(0,KPe.getRequestHeader)(e,r,"Content-Type")==="application/octet-stream";if(s)return!1}return!0},t.prototype.getDelay=function(e,r,n){var i=function(){return Number(Math.random().toFixed(3))},s=e.headers!==void 0?e.headers.get(t.RETRY_AFTER_HEADER):null,o;return s!==null?Number.isNaN(Number(s))?o=Math.round((new Date(s).getTime()-Date.now())/1e3):o=Number(s):o=r>=2?this.getExponentialBackOffTime(r)+n+i():n+i(),Math.min(o,this.options.getMaxDelay()+i())},t.prototype.getExponentialBackOffTime=function(e){return Math.round(1/2*(Math.pow(2,e)-1))},t.prototype.sleep=function(e){return r_.__awaiter(this,void 0,void 0,function(){var r;return r_.__generator(this,function(n){return r=e*1e3,[2,new Promise(function(i){return setTimeout(i,r)})]})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof gjt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof r>"u"&&(r=Object.assign(new UPe.RetryHandlerOptions,this.options)),r},t.prototype.executeWithRetry=function(e,r,n){return r_.__awaiter(this,void 0,void 0,function(){var i;return r_.__generator(this,function(s){switch(s.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return s.sent(),r<n.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&n.shouldRetry(n.delay,r,e.request,e.options,e.response)?(++r,(0,KPe.setRequestHeader)(e.request,e.options,t.RETRY_ATTEMPT_HEADER,r.toString()),i=this.getDelay(e.response,r,n.delay),[4,this.sleep(i)]):[3,4];case 2:return s.sent(),[4,this.executeWithRetry(e,r,n)];case 3:return[2,s.sent()];case 4:return[2]}})})},t.prototype.execute=function(e){return r_.__awaiter(this,void 0,void 0,function(){var r,n;return r_.__generator(this,function(i){switch(i.label){case 0:return r=0,n=this.getOptions(e),VPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,VPe.FeatureUsageFlag.RETRY_HANDLER_ENABLED),[4,this.executeWithRetry(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.RETRY_STATUS_CODES=[429,503,504],t.RETRY_ATTEMPT_HEADER="Retry-Attempt",t.RETRY_AFTER_HEADER="Retry-After",t})();eM.RetryHandler=Ejt});var M9=m(rM=>{"use strict";Object.defineProperty(rM,"__esModule",{value:!0});rM.RedirectHandlerOptions=void 0;var bjt=(function(){function t(e,r){if(e===void 0&&(e=t.DEFAULT_MAX_REDIRECTS),r===void 0&&(r=t.defaultShouldRedirect),e>t.MAX_MAX_REDIRECTS){var n=new Error("MaxRedirects should not be more than ".concat(t.MAX_MAX_REDIRECTS));throw n.name="MaxLimitExceeded",n}if(e<0){var n=new Error("MaxRedirects should not be negative");throw n.name="MinExpectationNotMet",n}this.maxRedirects=e,this.shouldRedirect=r}return t.DEFAULT_MAX_REDIRECTS=5,t.MAX_MAX_REDIRECTS=20,t.defaultShouldRedirect=function(){return!0},t})();rM.RedirectHandlerOptions=bjt});var iM=m(nM=>{"use strict";Object.defineProperty(nM,"__esModule",{value:!0});nM.RedirectHandler=void 0;var n_=(zn(),Jt(Hn)),_jt=D9(),vjt=Zh(),Sjt=Zb(),nre=M9(),GPe=t_(),wjt=(function(){function t(e){e===void 0&&(e=new nre.RedirectHandlerOptions),this.options=e}return t.prototype.isRedirect=function(e){return t.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.hasLocationHeader=function(e){return e.headers.has(t.LOCATION_HEADER)},t.prototype.getLocationHeader=function(e){return e.headers.get(t.LOCATION_HEADER)},t.prototype.isRelativeURL=function(e){return e.indexOf("://")===-1},t.prototype.shouldDropAuthorizationHeader=function(e,r){var n=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,i=n.exec(e),s,o;i!==null&&(s=i[0]);var a=n.exec(r);return a!==null&&(o=a[0]),typeof s<"u"&&typeof o<"u"&&s!==o},t.prototype.updateRequestUrl=function(e,r){return n_.__awaiter(this,void 0,void 0,function(){var n,i;return n_.__generator(this,function(s){switch(s.label){case 0:return n=r,typeof r.request!="string"?[3,1]:(i=e,[3,3]);case 1:return[4,(0,Sjt.cloneRequestWithNewUrl)(e,r.request)];case 2:i=s.sent(),s.label=3;case 3:return n.request=i,[2]}})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof vjt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(nre.RedirectHandlerOptions)),typeof r>"u"&&(r=Object.assign(new nre.RedirectHandlerOptions,this.options)),r},t.prototype.executeWithRedirect=function(e,r,n){return n_.__awaiter(this,void 0,void 0,function(){var i,s;return n_.__generator(this,function(o){switch(o.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return o.sent(),i=e.response,r<n.maxRedirects&&this.isRedirect(i)&&this.hasLocationHeader(i)&&n.shouldRedirect(i)?(++r,i.status!==t.STATUS_CODE_SEE_OTHER?[3,2]:(e.options.method=_jt.RequestMethod.GET,delete e.options.body,[3,4])):[3,6];case 2:return s=this.getLocationHeader(i),!this.isRelativeURL(s)&&this.shouldDropAuthorizationHeader(i.url,s)&&delete e.options.headers[t.AUTHORIZATION_HEADER],[4,this.updateRequestUrl(s,e)];case 3:o.sent(),o.label=4;case 4:return[4,this.executeWithRedirect(e,r,n)];case 5:return o.sent(),[3,7];case 6:return[2];case 7:return[2]}})})},t.prototype.execute=function(e){return n_.__awaiter(this,void 0,void 0,function(){var r,n;return n_.__generator(this,function(i){switch(i.label){case 0:return r=0,n=this.getOptions(e),e.options.redirect=t.MANUAL_REDIRECT,GPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,GPe.FeatureUsageFlag.REDIRECT_HANDLER_ENABLED),[4,this.executeWithRedirect(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.REDIRECT_STATUS_CODES=[301,302,303,307,308],t.STATUS_CODE_SEE_OTHER=303,t.LOCATION_HEADER="Location",t.AUTHORIZATION_HEADER="Authorization",t.MANUAL_REDIRECT="manual",t})();nM.RedirectHandler=wjt});var HPe=m(sM=>{"use strict";Object.defineProperty(sM,"__esModule",{value:!0});sM.PACKAGE_VERSION=void 0;sM.PACKAGE_VERSION="3.0.7"});var uM=m(aM=>{"use strict";Object.defineProperty(aM,"__esModule",{value:!0});aM.TelemetryHandler=void 0;var zPe=(zn(),Jt(Hn)),WPe=Hk(),Ajt=HPe(),Cjt=Zh(),oM=Zb(),Tjt=t_(),Ojt=(function(){function t(){}return t.prototype.execute=function(e){return zPe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o;return zPe.__generator(this,function(a){switch(a.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,WPe.isGraphURL)(r)||e.customHosts&&(0,WPe.isCustomHost)(r,e.customHosts)?(n=(0,oM.getRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER),n||(n=(0,oM.generateUUID)(),(0,oM.setRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER,n)),i="".concat(t.PRODUCT_NAME,"/").concat(Ajt.PACKAGE_VERSION),s=void 0,e.middlewareControl instanceof Cjt.MiddlewareControl&&(s=e.middlewareControl.getMiddlewareOptions(Tjt.TelemetryHandlerOptions)),s&&(o=s.getFeatureUsage(),i+=" (".concat(t.FEATURE_USAGE_STRING,"=").concat(o,")")),(0,oM.appendRequestHeader)(e.request,e.options,t.SDK_VERSION_HEADER,i)):(delete e.options.headers[t.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[t.SDK_VERSION_HEADER]),[4,this.nextMiddleware.execute(e)];case 1:return[2,a.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.CLIENT_REQUEST_ID_HEADER="client-request-id",t.SDK_VERSION_HEADER="SdkVersion",t.PRODUCT_NAME="graph-js",t.FEATURE_USAGE_STRING="featureUsage",t})();aM.TelemetryHandler=Ojt});var JPe=m(cM=>{"use strict";Object.defineProperty(cM,"__esModule",{value:!0});cM.MiddlewareFactory=void 0;var xjt=Yk(),Ijt=Xk(),Rjt=M9(),Djt=k9(),kjt=iM(),Mjt=tM(),Pjt=uM(),Njt=function(){return typeof process=="object"&&typeof require=="function"},Fjt=(function(){function t(){}return t.getDefaultMiddlewareChain=function(e){var r=[],n=new xjt.AuthenticationHandler(e),i=new Mjt.RetryHandler(new Djt.RetryHandlerOptions),s=new Pjt.TelemetryHandler,o=new Ijt.HTTPMessageHandler;if(r.push(n),r.push(i),Njt()){var a=new kjt.RedirectHandler(new Rjt.RedirectHandlerOptions);r.push(a)}return r.push(s),r.push(o),r},t})();cM.MiddlewareFactory=Fjt});var dM=m(lM=>{"use strict";Object.defineProperty(lM,"__esModule",{value:!0});lM.ChaosStrategy=void 0;var YPe;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(YPe||(lM.ChaosStrategy=YPe={}))});var ire=m(pM=>{"use strict";Object.defineProperty(pM,"__esModule",{value:!0});pM.ChaosHandlerOptions=void 0;var Bjt=dM(),qjt=(function(){function t(e,r,n,i,s,o){if(e===void 0&&(e=Bjt.ChaosStrategy.RANDOM),r===void 0&&(r="Some error Happened"),this.chaosStrategy=e,this.statusCode=n,this.statusMessage=r,this.chaosPercentage=i!==void 0?i:10,this.responseBody=s,this.headers=o,this.chaosPercentage>100)throw new Error("Error Pecentage can not be more than 100")}return t})();pM.ChaosHandlerOptions=qjt});var QPe=m(i_=>{"use strict";Object.defineProperty(i_,"__esModule",{value:!0});i_.httpStatusCode=i_.methodStatusCode=void 0;i_.methodStatusCode={GET:[429,500,502,503,504],POST:[429,500,502,503,504,507],PUT:[429,500,502,503,504,507],PATCH:[429,500,502,503,504],DELETE:[429,500,502,503,504,507]};i_.httpStatusCode={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"}});var eNe=m(hM=>{"use strict";Object.defineProperty(hM,"__esModule",{value:!0});hM.ChaosHandler=void 0;var fM=(zn(),Jt(Hn)),Ljt=Zh(),jjt=Zb(),XPe=QPe(),sre=ire(),ZPe=dM(),$jt=(function(){function t(e,r){e===void 0&&(e=new sre.ChaosHandlerOptions),this.options=e,this.manualMap=r}return t.prototype.createResponseHeaders=function(e,r,n){var i=e.headers?new Headers(e.headers):new Headers;return i.append("Cache-Control","no-store"),i.append("request-id",r),i.append("client-request-id",r),i.append("x-ms-ags-diagnostic",""),i.append("Date",n),i.append("Strict-Transport-Security",""),e.statusCode===429&&i.append("retry-after","3"),i},t.prototype.createResponseBody=function(e,r,n){if(e.responseBody)return e.responseBody;var i;if(e.statusCode>=400){var s=XPe.httpStatusCode[e.statusCode],o=e.statusMessage;i={error:{code:s,message:o,innerError:{"request-id":r,date:n}}}}else i={};return i},t.prototype.createResponse=function(e,r){var n=r.request,i=(0,jjt.generateUUID)(),s=new Date,o=this.createResponseHeaders(e,i,s.toString()),a=this.createResponseBody(e,i,s.toString()),u={url:n,status:e.statusCode,statusText:e.statusMessage,headers:o};r.response=new Response(typeof a=="string"?a:JSON.stringify(a),u)},t.prototype.sendRequest=function(e,r){return fM.__awaiter(this,void 0,void 0,function(){return fM.__generator(this,function(n){switch(n.label){case 0:return this.setStatusCode(e,r.request,r.options.method),e.chaosStrategy===ZPe.ChaosStrategy.MANUAL&&!this.nextMiddleware||Math.floor(Math.random()*100)<e.chaosPercentage?(this.createResponse(e,r),[3,3]):[3,1];case 1:return this.nextMiddleware?[4,this.nextMiddleware.execute(r)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.getRandomStatusCode=function(e){var r=XPe.methodStatusCode[e];return r[Math.floor(Math.random()*r.length)]},t.prototype.getRelativeURL=function(e){var r=/https?:\/\/graph\.microsoft\.com\/[^/]+(.+?)(\?|$)/,n;return r.exec(e)!==null&&(n=r.exec(e)[1]),n},t.prototype.setStatusCode=function(e,r,n){var i=this;if(e.chaosStrategy===ZPe.ChaosStrategy.MANUAL){if(e.statusCode===void 0){var s=this.getRelativeURL(r);this.manualMap.get(s)!==void 0?this.manualMap.get(s).get(n)!==void 0&&(e.statusCode=this.manualMap.get(s).get(n)):this.manualMap.forEach(function(o,a){var u=new RegExp(a+"$");u.test(s)&&i.manualMap.get(a).get(n)!==void 0&&(e.statusCode=i.manualMap.get(a).get(n))})}}else e.statusCode=this.getRandomStatusCode(n)},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof Ljt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(sre.ChaosHandlerOptions)),typeof r>"u"&&(r=Object.assign(new sre.ChaosHandlerOptions,this.options)),r},t.prototype.execute=function(e){return fM.__awaiter(this,void 0,void 0,function(){var r;return fM.__generator(this,function(n){switch(n.label){case 0:return r=this.getOptions(e),[4,this.sendRequest(r,e)];case 1:return[2,n.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t})();hM.ChaosHandler=$jt});var P9=m(mM=>{"use strict";Object.defineProperty(mM,"__esModule",{value:!0});mM.ResponseType=void 0;var tNe;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(tNe||(mM.ResponseType=tNe={}))});var are=m(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});s_.GraphResponseHandler=s_.DocumentType=void 0;var yM=(zn(),Jt(Hn)),mg=P9(),ore;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(ore||(s_.DocumentType=ore={}));var gM;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(gM||(gM={}));var EM;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(EM||(EM={}));var Kjt=(function(){function t(){}return t.parseDocumentResponse=function(e,r){return typeof DOMParser<"u"?new Promise(function(n,i){e.text().then(function(s){try{var o=new DOMParser,a=o.parseFromString(s,r);n(a)}catch(u){i(u)}})}):Promise.resolve(e.body)},t.convertResponse=function(e,r){return yM.__awaiter(this,void 0,void 0,function(){var n,i,s,o;return yM.__generator(this,function(a){switch(a.label){case 0:if(e.status===204)return[2,Promise.resolve()];switch(i=e.headers.get("Content-type"),s=r,s){case mg.ResponseType.ARRAYBUFFER:return[3,1];case mg.ResponseType.BLOB:return[3,3];case mg.ResponseType.DOCUMENT:return[3,5];case mg.ResponseType.JSON:return[3,7];case mg.ResponseType.STREAM:return[3,9];case mg.ResponseType.TEXT:return[3,11]}return[3,13];case 1:return[4,e.arrayBuffer()];case 2:return n=a.sent(),[3,24];case 3:return[4,e.blob()];case 4:return n=a.sent(),[3,24];case 5:return[4,t.parseDocumentResponse(e,ore.TEXT_XML)];case 6:return n=a.sent(),[3,24];case 7:return[4,e.json()];case 8:return n=a.sent(),[3,24];case 9:return[4,Promise.resolve(e.body)];case 10:return n=a.sent(),[3,24];case 11:return[4,e.text()];case 12:return n=a.sent(),[3,24];case 13:return i===null?[3,22]:(o=i.split(";")[0],new RegExp(EM.DOCUMENT).test(o)?[4,t.parseDocumentResponse(e,o)]:[3,15]);case 14:return n=a.sent(),[3,21];case 15:return new RegExp(EM.IMAGE).test(o)?(n=e.blob(),[3,21]):[3,16];case 16:return o!==gM.TEXT_PLAIN?[3,18]:[4,e.text()];case 17:return n=a.sent(),[3,21];case 18:return o!==gM.APPLICATION_JSON?[3,20]:[4,e.json()];case 19:return n=a.sent(),[3,21];case 20:n=Promise.resolve(e.body),a.label=21;case 21:return[3,23];case 22:n=Promise.resolve(e.body),a.label=23;case 23:return[3,24];case 24:return[2,n]}})})},t.getResponse=function(e,r,n){return yM.__awaiter(this,void 0,void 0,function(){var i;return yM.__generator(this,function(s){switch(s.label){case 0:return r!==mg.ResponseType.RAW?[3,1]:[2,Promise.resolve(e)];case 1:return[4,t.convertResponse(e,r)];case 2:if(i=s.sent(),e.ok)if(typeof n=="function")n(null,i);else return[2,i];else throw i;s.label=3;case 3:return[2]}})})},t})();s_.GraphResponseHandler=Kjt});var ure=m(bM=>{"use strict";Object.defineProperty(bM,"__esModule",{value:!0});bM.Range=void 0;var Ujt=(function(){function t(e,r){e===void 0&&(e=-1),r===void 0&&(r=-1),this.minValue=e,this.maxValue=r}return t})();bM.Range=Ujt});var cre=m(_M=>{"use strict";Object.defineProperty(_M,"__esModule",{value:!0});_M.UploadResult=void 0;var Vjt=(function(){function t(e,r){this._location=r,this._responseBody=e}return Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(e){this._location=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseBody",{get:function(){return this._responseBody},set:function(e){this._responseBody=e},enumerable:!1,configurable:!0}),t.CreateUploadResult=function(e,r){return new t(e,r.get("location"))},t})();_M.UploadResult=Vjt});var dre=m(SM=>{"use strict";Object.defineProperty(SM,"__esModule",{value:!0});SM.LargeFileUploadTask=void 0;var Ba=(zn(),Jt(Hn)),lre=Rf(),Gjt=are(),rNe=P9(),vM=ure(),Hjt=cre(),zjt=(function(){function t(e,r,n,i){if(i===void 0&&(i={}),this.DEFAULT_FILE_SIZE=5*1024*1024,this.client=e,r.sliceFile)this.file=r;else throw new lre.GraphClientError("Please pass the FileUpload object, StreamUpload object or any custom implementation of the FileObject interface");this.file=r,i.rangeSize||(i.rangeSize=this.DEFAULT_FILE_SIZE),this.options=i,this.uploadSession=n,this.nextRange=new vM.Range(0,this.options.rangeSize-1)}return t.createUploadSession=function(e,r,n,i){return i===void 0&&(i={}),Ba.__awaiter(this,void 0,void 0,function(){var s,o;return Ba.__generator(this,function(a){switch(a.label){case 0:return[4,e.api(r).headers(i).post(n)];case 1:return s=a.sent(),o={url:s.uploadUrl,expiry:new Date(s.expirationDateTime),isCancelled:!1},[2,o]}})})},t.prototype.parseRange=function(e){var r=e[0];if(typeof r>"u"||r==="")return new vM.Range;var n=r.split("-"),i=parseInt(n[0],10),s=parseInt(n[1],10);return Number.isNaN(s)&&(s=this.file.size-1),new vM.Range(i,s)},t.prototype.updateTaskStatus=function(e){this.uploadSession.expiry=new Date(e.expirationDateTime),this.nextRange=this.parseRange(e.nextExpectedRanges)},t.prototype.getNextRange=function(){if(this.nextRange.minValue===-1)return this.nextRange;var e=this.nextRange.minValue,r=e+this.options.rangeSize-1;return r>=this.file.size&&(r=this.file.size-1),new vM.Range(e,r)},t.prototype.sliceFile=function(e){if(console.warn("The LargeFileUploadTask.sliceFile() function has been deprecated and moved into the FileObject interface."),this.file.content instanceof ArrayBuffer||this.file.content instanceof Blob||this.file.content instanceof Uint8Array)return this.file.content.slice(e.minValue,e.maxValue+1);throw new lre.GraphClientError("The LargeFileUploadTask.sliceFile() function expects only Blob, ArrayBuffer or Uint8Array file content. Please note that the sliceFile() function is deprecated.")},t.prototype.upload=function(){return Ba.__awaiter(this,void 0,void 0,function(){var e,r,n,i,s,o,a;return Ba.__generator(this,function(u){switch(u.label){case 0:e=this.options&&this.options.uploadEventHandlers,u.label=1;case 1:if(this.uploadSession.isCancelled)return[3,5];if(r=this.getNextRange(),r.maxValue===-1)throw n=new Error("Task with which you are trying to upload is already completed, Please check for your uploaded file"),n.name="Invalid Session",n;return[4,this.file.sliceFile(r)];case 2:return i=u.sent(),[4,this.uploadSliceGetRawResponse(i,r,this.file.size)];case 3:if(s=u.sent(),!s)throw new lre.GraphClientError("Something went wrong! Large file upload slice response is null.");return[4,Gjt.GraphResponseHandler.getResponse(s)];case 4:return o=u.sent(),s.status===201||s.status===200&&o.id?(this.reportProgress(e,r),[2,Hjt.UploadResult.CreateUploadResult(o,s.headers)]):(a={expirationDateTime:o.expirationDateTime||o.ExpirationDateTime,nextExpectedRanges:o.NextExpectedRanges||o.nextExpectedRanges},this.updateTaskStatus(a),this.reportProgress(e,r),[3,1]);case 5:return[2]}})})},t.prototype.reportProgress=function(e,r){e&&e.progress&&e.progress(r,e.extraCallbackParam)},t.prototype.uploadSlice=function(e,r,n){return Ba.__awaiter(this,void 0,void 0,function(){return Ba.__generator(this,function(i){switch(i.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).put(e)];case 1:return[2,i.sent()]}})})},t.prototype.uploadSliceGetRawResponse=function(e,r,n){return Ba.__awaiter(this,void 0,void 0,function(){return Ba.__generator(this,function(i){switch(i.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).responseType(rNe.ResponseType.RAW).put(e)];case 1:return[2,i.sent()]}})})},t.prototype.cancel=function(){return Ba.__awaiter(this,void 0,void 0,function(){var e;return Ba.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).responseType(rNe.ResponseType.RAW).delete()];case 1:return e=r.sent(),e.status===204&&(this.uploadSession.isCancelled=!0),[2,e]}})})},t.prototype.getStatus=function(){return Ba.__awaiter(this,void 0,void 0,function(){var e;return Ba.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).get()];case 1:return e=r.sent(),this.updateTaskStatus(e),[2,e]}})})},t.prototype.resume=function(){return Ba.__awaiter(this,void 0,void 0,function(){return Ba.__generator(this,function(e){switch(e.label){case 0:return[4,this.getStatus()];case 1:return e.sent(),[4,this.upload()];case 2:return[2,e.sent()]}})})},t.prototype.getUploadSession=function(){return this.uploadSession},t})();SM.LargeFileUploadTask=zjt});var pre=m(wM=>{"use strict";Object.defineProperty(wM,"__esModule",{value:!0});wM.FileUpload=void 0;var Wjt=Rf(),Jjt=(function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new Wjt.GraphClientError("Please provide the upload content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return this.content.slice(e.minValue,e.maxValue+1)},t})();wM.FileUpload=Jjt});var fre=m(AM=>{"use strict";Object.defineProperty(AM,"__esModule",{value:!0});AM.getValidRangeSize=void 0;var Yjt=5*1024*1024,Qjt=function(t){return t>320*1024&&(t=Math.floor(t/(320*1024))*320*1024),t},Xjt=function(t){t===void 0&&(t=Yjt);var e=60*1024*1024;return t>e&&(t=e),Qjt(t)};AM.getValidRangeSize=Xjt});var iNe=m(CM=>{"use strict";Object.defineProperty(CM,"__esModule",{value:!0});CM.OneDriveLargeFileUploadTask=void 0;var Df=(zn(),Jt(Hn)),nNe=Rf(),Zjt=pre(),e$t=dre(),t$t=fre(),r$t=(function(t){Df.__extends(e,t);function e(r,n,i,s){return t.call(this,r,n,i,s)||this}return e.constructCreateSessionUrl=function(r,n){return n===void 0&&(n=e.DEFAULT_UPLOAD_PATH),r=r.trim(),n=n.trim(),n===""&&(n="/"),n[0]!=="/"&&(n="/".concat(n)),n[n.length-1]!=="/"&&(n="".concat(n,"/")),"/me/drive/root:".concat(n.split("/").map(function(i){return encodeURIComponent(i)}).join("/")).concat(encodeURIComponent(r),":/createUploadSession")},e.getFileInfo=function(r,n){var i,s;if(typeof Blob<"u"&&r instanceof Blob)i=new File([r],n),s=i.size;else if(typeof File<"u"&&r instanceof File)i=r,s=i.size;else if(typeof Uint8Array<"u"&&r instanceof Uint8Array){var o=r;s=o.byteLength,i=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}return{content:i,size:s}},e.create=function(r,n,i){return Df.__awaiter(this,void 0,void 0,function(){var s,o,a;return Df.__generator(this,function(u){if(!r||!n||!i)throw new nNe.GraphClientError("Please provide the Graph client instance, file object and OneDriveLargeFileUploadOptions value");return s=i.fileName,o=e.getFileInfo(n,s),a=new Zjt.FileUpload(o.content,s,o.size),[2,this.createTaskWithFileObject(r,a,i)]})})},e.createTaskWithFileObject=function(r,n,i){return Df.__awaiter(this,void 0,void 0,function(){var s,o,a,u;return Df.__generator(this,function(c){switch(c.label){case 0:if(!r||!n||!i)throw new nNe.GraphClientError("Please provide the Graph client instance, FileObject interface implementation and OneDriveLargeFileUploadOptions value");return s=i.uploadSessionURL?i.uploadSessionURL:e.constructCreateSessionUrl(i.fileName,i.path),o={fileName:i.fileName,fileDescription:i.fileDescription,conflictBehavior:i.conflictBehavior},[4,e.createUploadSession(r,s,o)];case 1:return a=c.sent(),u=(0,t$t.getValidRangeSize)(i.rangeSize),[2,new e(r,n,a,{rangeSize:u,uploadEventHandlers:i.uploadEventHandlers})]}})})},e.createUploadSession=function(r,n,i){return Df.__awaiter(this,void 0,void 0,function(){var s;return Df.__generator(this,function(o){return s={item:{"@microsoft.graph.conflictBehavior":i?.conflictBehavior||"rename",name:i?.fileName,description:i?.fileDescription}},[2,t.createUploadSession.call(this,r,n,s)]})})},e.prototype.commit=function(r,n){return n===void 0&&(n="rename"),Df.__awaiter(this,void 0,void 0,function(){var i;return Df.__generator(this,function(s){switch(s.label){case 0:return i={name:this.file.name,"@microsoft.graph.conflictBehavior":n,"@microsoft.graph.sourceUrl":this.uploadSession.url},[4,this.client.api(r).put(i)];case 1:return[2,s.sent()]}})})},e.DEFAULT_UPLOAD_PATH="/",e})(e$t.LargeFileUploadTask);CM.OneDriveLargeFileUploadTask=r$t});var oNe=m(TM=>{"use strict";Object.defineProperty(TM,"__esModule",{value:!0});TM.StreamUpload=void 0;var sNe=(zn(),Jt(Hn)),N9=Rf(),n$t=(function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new N9.GraphClientError("Please provide the Readable Stream content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return sNe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a,u;return sNe.__generator(this,function(c){switch(c.label){case 0:if(r=e.maxValue-e.minValue+1,n=[],this.previousSlice){if(e.minValue<this.previousSlice.range.minValue)throw new N9.GraphClientError("An error occurred while uploading the stream. Please restart the stream upload from the first byte of the file.");if(e.minValue<this.previousSlice.range.maxValue){if(i=this.previousSlice.range.minValue,s=this.previousSlice.range.maxValue,e.minValue===i&&e.maxValue===s)return[2,this.previousSlice.fileSlice];if(e.maxValue===s)return[2,this.previousSlice.fileSlice.slice(e.minValue,e.maxValue+1)];n.push(this.previousSlice.fileSlice.slice(e.minValue,s+1)),r=e.maxValue-s}}return this.content&&this.content.readable?this.content.readableLength>=r?(n.push(this.content.read(r)),[3,3]):[3,1]:[3,4];case 1:return a=(o=n).push,[4,this.readNBytesFromStream(r)];case 2:a.apply(o,[c.sent()]),c.label=3;case 3:return[3,5];case 4:throw new N9.GraphClientError("Stream is not readable.");case 5:return u=Buffer.concat(n),this.previousSlice={fileSlice:u,range:e},[2,u]}})})},t.prototype.readNBytesFromStream=function(e){var r=this;return new Promise(function(n,i){var s=[],o=e,a=0;r.content.on("end",function(){if(o>0)return i(new N9.GraphClientError("Stream ended before reading required range size"))}),r.content.on("readable",function(){for(var u;a<e&&(u=r.content.read(o))!==null;)a+=u.length,s.push(u),o>0&&(o=e-a);if(a===e)return n(Buffer.concat(s));if(!r.content||!r.content.readable)return i(new N9.GraphClientError("Error encountered while reading the stream during the upload"))})})},t})();TM.StreamUpload=n$t});var aNe=m(OM=>{"use strict";Object.defineProperty(OM,"__esModule",{value:!0});OM.PageIterator=void 0;var o_=(zn(),Jt(Hn)),i$t=(function(){function t(e,r,n,i){this.client=e,this.collection=r.value,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],this.callback=n,this.cursor=0,this.complete=!1,this.requestOptions=i}return t.prototype.iterationHelper=function(){if(this.collection===void 0)return!1;for(var e=!0;e&&this.cursor<this.collection.length;){var r=this.collection[this.cursor];e=this.callback(r),this.cursor++}return e},t.prototype.fetchAndUpdateNextPageData=function(){return o_.__awaiter(this,void 0,void 0,function(){var e,r;return o_.__generator(this,function(n){switch(n.label){case 0:return e=this.client.api(this.nextLink),this.requestOptions&&(this.requestOptions.headers&&(e=e.headers(this.requestOptions.headers)),this.requestOptions.middlewareOptions&&(e=e.middlewareOptions(this.requestOptions.middlewareOptions)),this.requestOptions.options&&(e=e.options(this.requestOptions.options))),[4,e.get()];case 1:return r=n.sent(),this.collection=r.value,this.cursor=0,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],[2]}})})},t.prototype.getDeltaLink=function(){return this.deltaLink},t.prototype.iterate=function(){return o_.__awaiter(this,void 0,void 0,function(){var e;return o_.__generator(this,function(r){switch(r.label){case 0:e=this.iterationHelper(),r.label=1;case 1:return e?this.nextLink===void 0?[3,3]:[4,this.fetchAndUpdateNextPageData()]:[3,5];case 2:return r.sent(),e=this.iterationHelper(),[3,4];case 3:e=!1,r.label=4;case 4:return[3,1];case 5:return this.nextLink===void 0&&this.cursor>=this.collection.length&&(this.complete=!0),[2]}})})},t.prototype.resume=function(){return o_.__awaiter(this,void 0,void 0,function(){return o_.__generator(this,function(e){return[2,this.iterate()]})})},t.prototype.isComplete=function(){return this.complete},t})();OM.PageIterator=i$t});var hre=m(IM=>{"use strict";Object.defineProperty(IM,"__esModule",{value:!0});IM.CustomAuthenticationProvider=void 0;var xM=(zn(),Jt(Hn)),uNe=Rf(),s$t=(function(){function t(e){this.provider=e}return t.prototype.getAccessToken=function(){return xM.__awaiter(this,void 0,void 0,function(){var e=this;return xM.__generator(this,function(r){return[2,new Promise(function(n,i){e.provider(function(s,o){return xM.__awaiter(e,void 0,void 0,function(){var a,u;return xM.__generator(this,function(c){switch(c.label){case 0:return o?(n(o),[3,3]):[3,1];case 1:return s||(a="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md",s=new uNe.GraphClientError(a)),[4,uNe.GraphClientError.setGraphClientError(s)];case 2:u=c.sent(),i(u),c.label=3;case 3:return[2]}})})})})]})})},t})();IM.CustomAuthenticationProvider=s$t});var mre=m(RM=>{"use strict";Object.defineProperty(RM,"__esModule",{value:!0});RM.GraphError=void 0;var o$t=(zn(),Jt(Hn)),a$t=(function(t){o$t.__extends(e,t);function e(r,n,i){r===void 0&&(r=-1);var s=t.call(this,n||i&&i.message)||this;return Object.setPrototypeOf(s,e.prototype),s.statusCode=r,s.code=null,s.requestId=null,s.date=new Date,s.body=null,s.stack=i?i.stack:s.stack,s}return e})(Error);RM.GraphError=a$t});var lNe=m(DM=>{"use strict";Object.defineProperty(DM,"__esModule",{value:!0});DM.GraphErrorHandler=void 0;var cNe=(zn(),Jt(Hn)),yre=mre(),u$t=(function(){function t(){}return t.constructError=function(e,r,n){var i=new yre.GraphError(r,"",e);return e.name!==void 0&&(i.code=e.name),i.body=e.toString(),i.date=new Date,i.headers=n?.headers,i},t.constructErrorFromResponse=function(e,r,n){var i=e.error,s=new yre.GraphError(r,i.message);return s.code=i.code,i.innerError!==void 0&&(s.requestId=i.innerError["request-id"],s.date=new Date(i.innerError.date)),s.body=JSON.stringify(i),s.headers=n?.headers,s},t.getError=function(e,r,n,i){return e===void 0&&(e=null),r===void 0&&(r=-1),cNe.__awaiter(this,void 0,void 0,function(){var s;return cNe.__generator(this,function(o){if(e&&e.error?s=t.constructErrorFromResponse(e,r,i):e instanceof Error?s=t.constructError(e,r,i):(s=new yre.GraphError(r),s.body=e),typeof n=="function")n(s,null);else return[2,s];return[2]})})},t})();DM.GraphErrorHandler=u$t});var gre=m(kM=>{"use strict";Object.defineProperty(kM,"__esModule",{value:!0});kM.GraphRequest=void 0;var xn=(zn(),Jt(Hn)),c$t=Rf(),l$t=lNe(),F9=Hk(),d$t=are(),p$t=Zh(),yg=D9(),f$t=P9(),h$t=(function(){function t(e,r,n){var i=this;this.parsePath=function(s){if(s.indexOf("https://")!==-1){s=s.replace("https://","");var o=s.indexOf("/");o!==-1&&(i.urlComponents.host="https://"+s.substring(0,o),s=s.substring(o+1,s.length));var a=s.indexOf("/");a!==-1&&(i.urlComponents.version=s.substring(0,a),s=s.substring(a+1,s.length))}s.charAt(0)==="/"&&(s=s.substr(1));var u=s.indexOf("?");if(u===-1)i.urlComponents.path=s;else{i.urlComponents.path=s.substr(0,u);for(var c=s.substring(u+1,s.length).split("&"),l=0,d=c;l<d.length;l++){var p=d[l];i.parseQueryParameter(p)}}},this.httpClient=e,this.config=r,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(n)}return t.prototype.addCsvQueryParameter=function(e,r,n){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";var i=[];n.length>1&&typeof r=="string"?i=Array.prototype.slice.call(n):typeof r=="string"?i.push(r):i=i.concat(r),this.urlComponents.oDataQueryParams[e]+=i.join(",")},t.prototype.buildFullUrl=function(){var e=(0,F9.urlJoin)([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e},t.prototype.createQueryString=function(){var e=this.urlComponents,r=[];if(Object.keys(e.oDataQueryParams).length!==0)for(var n in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,n)&&r.push(n+"="+e.oDataQueryParams[n]);if(Object.keys(e.otherURLQueryParams).length!==0)for(var n in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,n)&&r.push(n+"="+e.otherURLQueryParams[n]);if(e.otherURLQueryOptions.length!==0)for(var i=0,s=e.otherURLQueryOptions;i<s.length;i++){var o=s[i];r.push(o)}return r.length>0?"?"+r.join("&"):""},t.prototype.parseQueryParameter=function(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1)for(var r=e.split("&"),n=0,i=r;n<i.length;n++){var s=i[n];this.parseQueryParamenterString(s)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&this.setURLComponentsQueryParamater(o,e[o]);return this},t.prototype.parseQueryParamenterString=function(e){if(this.isValidQueryKeyValuePair(e)){var r=e.indexOf("="),n=e.substring(0,r),i=e.substring(r+1);this.setURLComponentsQueryParamater(n,i)}else this.urlComponents.otherURLQueryOptions.push(e)},t.prototype.setURLComponentsQueryParamater=function(e,r){if(F9.oDataQueryNames.indexOf(e)!==-1){var n=this.urlComponents.oDataQueryParams[e],i=n&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=i?n+","+r:r}else this.urlComponents.otherURLQueryParams[e]=r},t.prototype.isValidQueryKeyValuePair=function(e){var r=e.indexOf("=");if(r===-1)return!1;var n=e.indexOf("(");return!(n!==-1&&e.indexOf("(")<r)},t.prototype.updateRequestOptions=function(e){var r=xn.__assign({},e.headers);if(this.config.fetchOptions!==void 0){var n=xn.__assign({},this.config.fetchOptions);Object.assign(e,n),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=xn.__assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(r,e.headers),Object.assign(r,this._headers),e.headers=r},t.prototype.send=function(e,r,n){var i;return xn.__awaiter(this,void 0,void 0,function(){var s,o,a,u,c,l,d,p;return xn.__generator(this,function(f){switch(f.label){case 0:o=new p$t.MiddlewareControl(this._middlewareOptions),this.updateRequestOptions(r),a=(i=this.config)===null||i===void 0?void 0:i.customHosts,f.label=1;case 1:return f.trys.push([1,4,,6]),[4,this.httpClient.sendRequest({request:e,options:r,middlewareControl:o,customHosts:a})];case 2:return u=f.sent(),s=u.response,[4,d$t.GraphResponseHandler.getResponse(s,this._responseType,n)];case 3:return c=f.sent(),[2,c];case 4:if(l=f.sent(),l instanceof c$t.GraphClientError)throw l;return d=void 0,s&&(d=s.status),[4,l$t.GraphErrorHandler.getError(l,d,n,s)];case 5:throw p=f.sent(),p;case 6:return[2]}})})},t.prototype.setHeaderContentType=function(){if(!this._headers){this.header("Content-Type","application/json");return}for(var e=Object.keys(this._headers),r=0,n=e;r<n.length;r++){var i=n[r];if(i.toLowerCase()==="content-type")return}this.header("Content-Type","application/json")},t.prototype.header=function(e,r){return this._headers[e]=r,this},t.prototype.headers=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._headers[r]=e[r]);return this},t.prototype.option=function(e,r){return this._options[e]=r,this},t.prototype.options=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._options[r]=e[r]);return this},t.prototype.middlewareOptions=function(e){return this._middlewareOptions=e,this},t.prototype.version=function(e){return this.urlComponents.version=e,this},t.prototype.responseType=function(e){return this._responseType=e,this},t.prototype.select=function(e){return this.addCsvQueryParameter("$select",e,arguments),this},t.prototype.expand=function(e){return this.addCsvQueryParameter("$expand",e,arguments),this},t.prototype.orderby=function(e){return this.addCsvQueryParameter("$orderby",e,arguments),this},t.prototype.filter=function(e){return this.urlComponents.oDataQueryParams.$filter=e,this},t.prototype.search=function(e){return this.urlComponents.oDataQueryParams.$search=e,this},t.prototype.top=function(e){return this.urlComponents.oDataQueryParams.$top=e,this},t.prototype.skip=function(e){return this.urlComponents.oDataQueryParams.$skip=e,this},t.prototype.skipToken=function(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this},t.prototype.count=function(e){return e===void 0&&(e=!0),this.urlComponents.oDataQueryParams.$count=e.toString(),this},t.prototype.query=function(e){return this.parseQueryParameter(e)},t.prototype.get=function(e){return xn.__awaiter(this,void 0,void 0,function(){var r,n,i;return xn.__generator(this,function(s){switch(s.label){case 0:return r=this.buildFullUrl(),n={method:yg.RequestMethod.GET},[4,this.send(r,n,e)];case 1:return i=s.sent(),[2,i]}})})},t.prototype.post=function(e,r){return xn.__awaiter(this,void 0,void 0,function(){var n,i,s;return xn.__generator(this,function(o){switch(o.label){case 0:return n=this.buildFullUrl(),i={method:yg.RequestMethod.POST,body:(0,F9.serializeContent)(e)},s=e&&e.constructor&&e.constructor.name,s==="FormData"?i.headers={}:(this.setHeaderContentType(),i.headers=this._headers),[4,this.send(n,i,r)];case 1:return[2,o.sent()]}})})},t.prototype.create=function(e,r){return xn.__awaiter(this,void 0,void 0,function(){return xn.__generator(this,function(n){switch(n.label){case 0:return[4,this.post(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.put=function(e,r){return xn.__awaiter(this,void 0,void 0,function(){var n,i;return xn.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),i={method:yg.RequestMethod.PUT,body:(0,F9.serializeContent)(e)},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t.prototype.patch=function(e,r){return xn.__awaiter(this,void 0,void 0,function(){var n,i;return xn.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),i={method:yg.RequestMethod.PATCH,body:(0,F9.serializeContent)(e)},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t.prototype.update=function(e,r){return xn.__awaiter(this,void 0,void 0,function(){return xn.__generator(this,function(n){switch(n.label){case 0:return[4,this.patch(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.delete=function(e){return xn.__awaiter(this,void 0,void 0,function(){var r,n;return xn.__generator(this,function(i){switch(i.label){case 0:return r=this.buildFullUrl(),n={method:yg.RequestMethod.DELETE},[4,this.send(r,n,e)];case 1:return[2,i.sent()]}})})},t.prototype.del=function(e){return xn.__awaiter(this,void 0,void 0,function(){return xn.__generator(this,function(r){switch(r.label){case 0:return[4,this.delete(e)];case 1:return[2,r.sent()]}})})},t.prototype.getStream=function(e){return xn.__awaiter(this,void 0,void 0,function(){var r,n;return xn.__generator(this,function(i){switch(i.label){case 0:return r=this.buildFullUrl(),n={method:yg.RequestMethod.GET},this.responseType(f$t.ResponseType.STREAM),[4,this.send(r,n,e)];case 1:return[2,i.sent()]}})})},t.prototype.putStream=function(e,r){return xn.__awaiter(this,void 0,void 0,function(){var n,i;return xn.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),i={method:yg.RequestMethod.PUT,headers:{"Content-Type":"application/octet-stream"},body:e},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t})();kM.GraphRequest=h$t});var Ere=m(MM=>{"use strict";Object.defineProperty(MM,"__esModule",{value:!0});MM.HTTPClient=void 0;var dNe=(zn(),Jt(Hn)),m$t=(function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!e||!e.length){var n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware.apply(this,e)}return t.prototype.setMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]},t.prototype.parseMiddleWareArray=function(e){e.forEach(function(r,n){n<e.length-1&&r.setNext(e[n+1])}),this.middleware=e[0]},t.prototype.sendRequest=function(e){return dNe.__awaiter(this,void 0,void 0,function(){var r;return dNe.__generator(this,function(n){switch(n.label){case 0:if(typeof e.request=="string"&&e.options===void 0)throw r=new Error,r.name="InvalidRequestOptions",r.message="Unable to execute the middleware, Please provide valid options for a request",r;return[4,this.middleware.execute(e)];case 1:return n.sent(),[2,e]}})})},t})();MM.HTTPClient=m$t});var fNe=m(PM=>{"use strict";Object.defineProperty(PM,"__esModule",{value:!0});PM.HTTPClientFactory=void 0;var y$t=(zn(),Jt(Hn)),pNe=Ere(),g$t=Yk(),E$t=Xk(),b$t=M9(),_$t=k9(),v$t=iM(),S$t=tM(),w$t=uM(),A$t=function(){return typeof process=="object"&&typeof require=="function"},C$t=(function(){function t(){}return t.createWithAuthenticationProvider=function(e){var r=new g$t.AuthenticationHandler(e),n=new S$t.RetryHandler(new _$t.RetryHandlerOptions),i=new w$t.TelemetryHandler,s=new E$t.HTTPMessageHandler;if(r.setNext(n),A$t()){var o=new v$t.RedirectHandler(new b$t.RedirectHandlerOptions);n.setNext(o),o.setNext(i)}else n.setNext(i);return i.setNext(s),t.createWithMiddleware(r)},t.createWithMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(pNe.HTTPClient.bind.apply(pNe.HTTPClient,y$t.__spreadArray([void 0],e,!1)))},t})();PM.HTTPClientFactory=C$t});var hNe=m(NM=>{"use strict";Object.defineProperty(NM,"__esModule",{value:!0});NM.validatePolyFilling=void 0;var T$t=function(){if(typeof Promise>"u"&&typeof fetch>"u"){var t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){var t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){var t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};NM.validatePolyFilling=T$t});var gNe=m(FM=>{"use strict";Object.defineProperty(FM,"__esModule",{value:!0});FM.Client=void 0;var O$t=(zn(),Jt(Hn)),mNe=Zte(),x$t=hre(),I$t=gre(),yNe=Ere(),R$t=fNe(),D$t=hNe(),k$t=(function(){function t(e){this.config={baseUrl:mNe.GRAPH_BASE_URL,debugLogging:!1,defaultVersion:mNe.GRAPH_API_VERSION},(0,D$t.validatePolyFilling)();for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);var n;if(e.authProvider!==void 0&&e.middleware!==void 0){var i=new Error;throw i.name="AmbiguityInInitialization",i.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",i}else if(e.authProvider!==void 0)n=R$t.HTTPClientFactory.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new(yNe.HTTPClient.bind.apply(yNe.HTTPClient,O$t.__spreadArray([void 0],[].concat(e.middleware),!1)));else{var i=new Error;throw i.name="InvalidMiddlewareChain",i.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",i}this.httpClient=n}return t.init=function(e){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=n==="authProvider"?new x$t.CustomAuthenticationProvider(e[n]):e[n]);return t.initWithMiddleware(r)},t.initWithMiddleware=function(e){return new t(e)},t.prototype.api=function(e){return new I$t.GraphRequest(this.httpClient,this.config,e)},t})();FM.Client=k$t});var bNe=m(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.ResponseType=nt.GraphRequest=nt.GraphClientError=nt.GraphError=nt.CustomAuthenticationProvider=nt.Client=nt.PageIterator=nt.Range=nt.UploadResult=nt.FileUpload=nt.StreamUpload=nt.getValidRangeSize=nt.OneDriveLargeFileUploadTask=nt.LargeFileUploadTask=nt.ChaosHandler=nt.ChaosStrategy=nt.ChaosHandlerOptions=nt.TelemetryHandlerOptions=nt.FeatureUsageFlag=nt.RedirectHandlerOptions=nt.RetryHandlerOptions=nt.AuthenticationHandlerOptions=nt.MiddlewareFactory=nt.TelemetryHandler=nt.RedirectHandler=nt.RetryHandler=nt.HTTPMessageHandler=nt.AuthenticationHandler=nt.BatchResponseContent=nt.BatchRequestContent=void 0;var M$t=MPe();Object.defineProperty(nt,"BatchRequestContent",{enumerable:!0,get:function(){return M$t.BatchRequestContent}});var P$t=PPe();Object.defineProperty(nt,"BatchResponseContent",{enumerable:!0,get:function(){return P$t.BatchResponseContent}});var N$t=Yk();Object.defineProperty(nt,"AuthenticationHandler",{enumerable:!0,get:function(){return N$t.AuthenticationHandler}});var F$t=Xk();Object.defineProperty(nt,"HTTPMessageHandler",{enumerable:!0,get:function(){return F$t.HTTPMessageHandler}});var B$t=tM();Object.defineProperty(nt,"RetryHandler",{enumerable:!0,get:function(){return B$t.RetryHandler}});var q$t=iM();Object.defineProperty(nt,"RedirectHandler",{enumerable:!0,get:function(){return q$t.RedirectHandler}});var L$t=uM();Object.defineProperty(nt,"TelemetryHandler",{enumerable:!0,get:function(){return L$t.TelemetryHandler}});var j$t=JPe();Object.defineProperty(nt,"MiddlewareFactory",{enumerable:!0,get:function(){return j$t.MiddlewareFactory}});var $$t=ere();Object.defineProperty(nt,"AuthenticationHandlerOptions",{enumerable:!0,get:function(){return $$t.AuthenticationHandlerOptions}});var K$t=k9();Object.defineProperty(nt,"RetryHandlerOptions",{enumerable:!0,get:function(){return K$t.RetryHandlerOptions}});var U$t=M9();Object.defineProperty(nt,"RedirectHandlerOptions",{enumerable:!0,get:function(){return U$t.RedirectHandlerOptions}});var ENe=t_();Object.defineProperty(nt,"FeatureUsageFlag",{enumerable:!0,get:function(){return ENe.FeatureUsageFlag}});Object.defineProperty(nt,"TelemetryHandlerOptions",{enumerable:!0,get:function(){return ENe.TelemetryHandlerOptions}});var V$t=ire();Object.defineProperty(nt,"ChaosHandlerOptions",{enumerable:!0,get:function(){return V$t.ChaosHandlerOptions}});var G$t=dM();Object.defineProperty(nt,"ChaosStrategy",{enumerable:!0,get:function(){return G$t.ChaosStrategy}});var H$t=eNe();Object.defineProperty(nt,"ChaosHandler",{enumerable:!0,get:function(){return H$t.ChaosHandler}});var z$t=dre();Object.defineProperty(nt,"LargeFileUploadTask",{enumerable:!0,get:function(){return z$t.LargeFileUploadTask}});var W$t=iNe();Object.defineProperty(nt,"OneDriveLargeFileUploadTask",{enumerable:!0,get:function(){return W$t.OneDriveLargeFileUploadTask}});var J$t=fre();Object.defineProperty(nt,"getValidRangeSize",{enumerable:!0,get:function(){return J$t.getValidRangeSize}});var Y$t=oNe();Object.defineProperty(nt,"StreamUpload",{enumerable:!0,get:function(){return Y$t.StreamUpload}});var Q$t=pre();Object.defineProperty(nt,"FileUpload",{enumerable:!0,get:function(){return Q$t.FileUpload}});var X$t=cre();Object.defineProperty(nt,"UploadResult",{enumerable:!0,get:function(){return X$t.UploadResult}});var Z$t=ure();Object.defineProperty(nt,"Range",{enumerable:!0,get:function(){return Z$t.Range}});var eKt=aNe();Object.defineProperty(nt,"PageIterator",{enumerable:!0,get:function(){return eKt.PageIterator}});var tKt=gNe();Object.defineProperty(nt,"Client",{enumerable:!0,get:function(){return tKt.Client}});var rKt=hre();Object.defineProperty(nt,"CustomAuthenticationProvider",{enumerable:!0,get:function(){return rKt.CustomAuthenticationProvider}});var nKt=mre();Object.defineProperty(nt,"GraphError",{enumerable:!0,get:function(){return nKt.GraphError}});var iKt=Rf();Object.defineProperty(nt,"GraphClientError",{enumerable:!0,get:function(){return iKt.GraphClientError}});var sKt=gre();Object.defineProperty(nt,"GraphRequest",{enumerable:!0,get:function(){return sKt.GraphRequest}});var oKt=P9();Object.defineProperty(nt,"ResponseType",{enumerable:!0,get:function(){return oKt.ResponseType}})});var _Ne=m((sIr,aKt)=>{aKt.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var a_=m(pu=>{"use strict";var uKt=pu&&pu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pu,"__esModule",{value:!0});pu.getKeyIndexes=pu.hasFlag=pu.exists=pu.list=void 0;var BM=uKt(_Ne());pu.list=Object.keys(BM.default);var bre={};pu.list.forEach(t=>{bre[t]=BM.default[t].flags.reduce(function(e,r){return e[r]=!0,e},{})});function cKt(t){return!!BM.default[t]}pu.exists=cKt;function lKt(t,e){if(!bre[t])throw new Error("Unknown command "+t);return!!bre[t][e]}pu.hasFlag=lKt;function dKt(t,e,r){let n=BM.default[t];if(!n)throw new Error("Unknown command "+t);if(!Array.isArray(e))throw new Error("Expect args to be an array");let i=[],s=!!(r&&r.parseExternalKey),o=(u,c)=>{let l=[],d=Number(u[c]);for(let p=0;p<d;p++)l.push(p+c+1);return l},a=(u,c,l)=>{for(let d=c;d<u.length-1;d+=1)if(String(u[d]).toLowerCase()===l.toLowerCase())return d+1;return null};switch(t){case"zunionstore":case"zinterstore":case"zdiffstore":i.push(0,...o(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":i.push(...o(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{i.push(...o(e,0));break}case"georadius":{i.push(0);let u=a(e,5,"STORE");u&&i.push(u);let c=a(e,5,"STOREDIST");c&&i.push(c);break}case"georadiusbymember":{i.push(0);let u=a(e,4,"STORE");u&&i.push(u);let c=a(e,4,"STOREDIST");c&&i.push(c);break}case"sort":case"sort_ro":i.push(0);for(let u=1;u<e.length-1;u++){let c=e[u];if(typeof c!="string")continue;let l=c.toUpperCase();l==="GET"?(u+=1,c=e[u],c!=="#"&&(s?i.push([u,vNe(c)]):i.push(u))):l==="BY"?(u+=1,s?i.push([u,vNe(e[u])]):i.push(u)):l==="STORE"&&(u+=1,i.push(u))}break;case"migrate":if(e[2]==="")for(let u=5;u<e.length-1;u++){let c=e[u];if(typeof c=="string"&&c.toUpperCase()==="KEYS"){for(let l=u+1;l<e.length;l++)i.push(l);break}}else i.push(2);break;case"xreadgroup":case"xread":for(let u=t==="xread"?0:3;u<e.length-1;u++)if(String(e[u]).toUpperCase()==="STREAMS"){for(let c=u+1;c<=u+(e.length-1-u)/2;c++)i.push(c);break}break;default:if(n.step>0){let u=n.keyStart-1,c=n.keyStop>0?n.keyStop:e.length+n.keyStop+1;for(let l=u;l<c;l+=n.step)i.push(l)}break}return i}pu.getKeyIndexes=dKt;function vNe(t){typeof t!="string"&&(t=String(t));let e=t.indexOf("->");return e===-1?t.length:e}});var SNe=m(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.tryCatch=em.errorObj=void 0;em.errorObj={e:{}};var _re;function pKt(t,e){try{let r=_re;return _re=null,r.apply(this,arguments)}catch(r){return em.errorObj.e=r,em.errorObj}}function fKt(t){return _re=t,pKt}em.tryCatch=fKt});var tm=m(vre=>{"use strict";Object.defineProperty(vre,"__esModule",{value:!0});var u_=SNe();function wNe(t){setTimeout(function(){throw t},0)}function hKt(t,e,r){return typeof e=="function"&&t.then(n=>{let i;r!==void 0&&Object(r).spread&&Array.isArray(n)?i=u_.tryCatch(e).apply(void 0,[null].concat(n)):i=n===void 0?u_.tryCatch(e)(null):u_.tryCatch(e)(null,n),i===u_.errorObj&&wNe(i.e)},n=>{if(!n){let s=new Error(n+"");Object.assign(s,{cause:n}),n=s}let i=u_.tryCatch(e)(n);i===u_.errorObj&&wNe(i.e)}),t}vre.default=hKt});var TNe=m((cIr,CNe)=>{"use strict";var ANe=require("assert"),B9=require("util");function c_(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}B9.inherits(c_,Error);Object.defineProperty(c_.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function Sre(t,e,r){ANe(e),ANe.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=r,this.buffer=e}B9.inherits(Sre,c_);Object.defineProperty(Sre.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function wre(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}B9.inherits(wre,c_);Object.defineProperty(wre.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function qM(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}B9.inherits(qM,c_);Object.defineProperty(qM.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function Are(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}B9.inherits(Are,qM);Object.defineProperty(Are.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});CNe.exports={RedisError:c_,ParserError:Sre,ReplyError:wre,AbortError:qM,InterruptError:Are}});var INe=m((lIr,xNe)=>{"use strict";var ONe=require("assert"),l_=class extends Error{get name(){return this.constructor.name}},Cre=class extends l_{constructor(e,r,n){ONe(r),ONe.strictEqual(typeof n,"number");let i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=i,this.offset=n,this.buffer=r}get name(){return this.constructor.name}},Tre=class extends l_{constructor(e){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=r}get name(){return this.constructor.name}},LM=class extends l_{get name(){return this.constructor.name}},Ore=class extends LM{get name(){return this.constructor.name}};xNe.exports={RedisError:l_,ParserError:Cre,ReplyError:Tre,AbortError:LM,InterruptError:Ore}});var gg=m((dIr,RNe)=>{"use strict";var mKt=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?TNe():INe();RNe.exports=mKt});var q9=m((pIr,xre)=>{var DNe=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],yKt=function(e){for(var r,n=0,i=0,s=[],o=e.length;n<o;n++)r=e.charCodeAt(n),r<128?s[i++]=r:r<2048?(s[i++]=r>>6|192,s[i++]=r&63|128):(r&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++n)&1023),s[i++]=r>>18|240,s[i++]=r>>12&63|128,s[i++]=r>>6&63|128,s[i++]=r&63|128):(s[i++]=r>>12|224,s[i++]=r>>6&63|128,s[i++]=r&63|128);return s},kNe=xre.exports=function(e){for(var r,n=0,i=-1,s=0,o=0,a=typeof e=="string"?yKt(e):e,u=a.length;n<u;){if(r=a[n++],i===-1)r===123&&(i=n);else if(r!==125)o=DNe[(r^o>>8)&255]^o<<8;else if(n-1!==i)return o&16383;s=DNe[(r^s>>8)&255]^s<<8}return s&16383};xre.exports.generateMulti=function(e){for(var r=1,n=e.length,i=kNe(e[0]);r<n;)if(kNe(e[r++])!==i)return-1;return i}});var jNe=m((fIr,LNe)=>{var PNe=9007199254740991,gKt="[object Arguments]",EKt="[object Function]",bKt="[object GeneratorFunction]",_Kt=/^(?:0|[1-9]\d*)$/;function NNe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function vKt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var L9=Object.prototype,j9=L9.hasOwnProperty,FNe=L9.toString,SKt=L9.propertyIsEnumerable,MNe=Math.max;function wKt(t,e){var r=MKt(t)||kKt(t)?vKt(t.length,String):[],n=r.length,i=!!n;for(var s in t)(e||j9.call(t,s))&&!(i&&(s=="length"||qNe(s,n)))&&r.push(s);return r}function AKt(t,e,r,n){return t===void 0||Ire(t,L9[r])&&!j9.call(n,r)?e:t}function CKt(t,e,r){var n=t[e];(!(j9.call(t,e)&&Ire(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function TKt(t){if(!Dre(t))return DKt(t);var e=RKt(t),r=[];for(var n in t)n=="constructor"&&(e||!j9.call(t,n))||r.push(n);return r}function BNe(t,e){return e=MNe(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=MNe(r.length-e,0),s=Array(i);++n<i;)s[n]=r[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=r[n];return o[e]=s,NNe(t,this,o)}}function OKt(t,e,r,n){r||(r={});for(var i=-1,s=e.length;++i<s;){var o=e[i],a=n?n(r[o],t[o],o,r,t):void 0;CKt(r,o,a===void 0?t[o]:a)}return r}function xKt(t){return BNe(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&IKt(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}function qNe(t,e){return e=e??PNe,!!e&&(typeof t=="number"||_Kt.test(t))&&t>-1&&t%1==0&&t<e}function IKt(t,e,r){if(!Dre(r))return!1;var n=typeof e;return(n=="number"?Rre(r)&&qNe(e,r.length):n=="string"&&e in r)?Ire(r[e],t):!1}function RKt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||L9;return t===r}function DKt(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function Ire(t,e){return t===e||t!==t&&e!==e}function kKt(t){return PKt(t)&&j9.call(t,"callee")&&(!SKt.call(t,"callee")||FNe.call(t)==gKt)}var MKt=Array.isArray;function Rre(t){return t!=null&&FKt(t.length)&&!NKt(t)}function PKt(t){return BKt(t)&&Rre(t)}function NKt(t){var e=Dre(t)?FNe.call(t):"";return e==EKt||e==bKt}function FKt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PNe}function Dre(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function BKt(t){return!!t&&typeof t=="object"}var qKt=xKt(function(t,e,r,n){OKt(e,jKt(e),t,n)}),LKt=BNe(function(t){return t.push(void 0,AKt),NNe(qKt,void 0,t)});function jKt(t){return Rre(t)?wKt(t,!0):TKt(t)}LNe.exports=LKt});var UNe=m((hIr,KNe)=>{var $Kt=9007199254740991,KKt="[object Arguments]",UKt="[object Function]",VKt="[object GeneratorFunction]",kre=Object.prototype,GKt=kre.hasOwnProperty,$Ne=kre.toString,HKt=kre.propertyIsEnumerable;function zKt(t){return JKt(t)&&GKt.call(t,"callee")&&(!HKt.call(t,"callee")||$Ne.call(t)==KKt)}function WKt(t){return t!=null&&QKt(t.length)&&!YKt(t)}function JKt(t){return ZKt(t)&&WKt(t)}function YKt(t){var e=XKt(t)?$Ne.call(t):"";return e==UKt||e==VKt}function QKt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$Kt}function XKt(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ZKt(t){return!!t&&typeof t=="object"}KNe.exports=zKt});var jM=m(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.isArguments=rm.defaults=rm.noop=void 0;var eUt=jNe();rm.defaults=eUt;var tUt=UNe();rm.isArguments=tUt;function rUt(){}rm.noop=rUt});var GNe=m((yIr,VNe)=>{var d_=1e3,p_=d_*60,f_=p_*60,Eg=f_*24,nUt=Eg*7,iUt=Eg*365.25;VNe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return sUt(t);if(r==="number"&&isFinite(t))return e.long?aUt(t):oUt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function sUt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*iUt;case"weeks":case"week":case"w":return r*nUt;case"days":case"day":case"d":return r*Eg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*f_;case"minutes":case"minute":case"mins":case"min":case"m":return r*p_;case"seconds":case"second":case"secs":case"sec":case"s":return r*d_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function oUt(t){var e=Math.abs(t);return e>=Eg?Math.round(t/Eg)+"d":e>=f_?Math.round(t/f_)+"h":e>=p_?Math.round(t/p_)+"m":e>=d_?Math.round(t/d_)+"s":t+"ms"}function aUt(t){var e=Math.abs(t);return e>=Eg?$M(t,e,Eg,"day"):e>=f_?$M(t,e,f_,"hour"):e>=p_?$M(t,e,p_,"minute"):e>=d_?$M(t,e,d_,"second"):t+" ms"}function $M(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Mre=m((gIr,HNe)=>{function uUt(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=GNe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}HNe.exports=uUt});var zNe=m((qa,KM)=>{qa.formatArgs=lUt;qa.save=dUt;qa.load=pUt;qa.useColors=cUt;qa.storage=fUt();qa.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();qa.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cUt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function lUt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+KM.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}qa.log=console.debug||console.log||(()=>{});function dUt(t){try{t?qa.storage.setItem("debug",t):qa.storage.removeItem("debug")}catch{}}function pUt(){let t;try{t=qa.storage.getItem("debug")||qa.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function fUt(){try{return localStorage}catch{}}KM.exports=Mre()(qa);var{formatters:hUt}=KM.exports;hUt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var JNe=m((Ss,VM)=>{var mUt=require("tty"),UM=require("util");Ss.init=SUt;Ss.log=bUt;Ss.formatArgs=gUt;Ss.save=_Ut;Ss.load=vUt;Ss.useColors=yUt;Ss.destroy=UM.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ss.colors=[6,2,3,4,5,1];try{let t=A3();t&&(t.stderr||t).level>=2&&(Ss.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ss.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function yUt(){return"colors"in Ss.inspectOpts?!!Ss.inspectOpts.colors:mUt.isatty(process.stderr.fd)}function gUt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+VM.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=EUt()+e+" "+t[0]}function EUt(){return Ss.inspectOpts.hideDate?"":new Date().toISOString()+" "}function bUt(...t){return process.stderr.write(UM.formatWithOptions(Ss.inspectOpts,...t)+`
`)}function _Ut(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function vUt(){return process.env.DEBUG}function SUt(t){t.inspectOpts={};let e=Object.keys(Ss.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ss.inspectOpts[e[r]]}VM.exports=Mre()(Ss);var{formatters:WNe}=VM.exports;WNe.o=function(t){return this.inspectOpts.colors=this.useColors,UM.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};WNe.O=function(t){return this.inspectOpts.colors=this.useColors,UM.inspect(t,this.inspectOpts)}});var YNe=m((EIr,Pre)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Pre.exports=zNe():Pre.exports=JNe()});var ZNe=m(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.genRedactedString=kf.getStringValue=kf.MAX_ARGUMENT_LENGTH=void 0;var wUt=YNe(),Nre=200;kf.MAX_ARGUMENT_LENGTH=Nre;var AUt="ioredis";function QNe(t){if(t!==null)switch(typeof t){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(t))return t.toString("hex");if(Array.isArray(t))return t.join(",");try{return JSON.stringify(t)}catch{return}case"string":return t}}kf.getStringValue=QNe;function XNe(t,e){let{length:r}=t;return r<=e?t:t.slice(0,e)+' ... <REDACTED full-length="'+r+'">'}kf.genRedactedString=XNe;function CUt(t){let e=(0,wUt.default)(`${AUt}:${t}`);function r(...n){if(e.enabled){for(let i=1;i<n.length;i++){let s=QNe(n[i]);typeof s=="string"&&s.length>Nre&&(n[i]=XNe(s,Nre))}return e.apply(null,n)}}return Object.defineProperties(r,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),r}kf.default=CUt});var tFe=m(Fre=>{"use strict";Object.defineProperty(Fre,"__esModule",{value:!0});var eFe=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,TUt={RedisCloudFixed:{ca:eFe},RedisCloudFlexible:{ca:eFe}};Fre.default=TUt});var ss=m(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.noop=Gt.defaults=Gt.Debug=Gt.getPackageMeta=Gt.zipMap=Gt.CONNECTION_CLOSED_ERROR_MSG=Gt.shuffle=Gt.sample=Gt.resolveTLSProfile=Gt.parseURL=Gt.optimizeErrorStack=Gt.toArg=Gt.convertMapToArray=Gt.convertObjectToArray=Gt.timeout=Gt.packObject=Gt.isInt=Gt.wrapMultiResult=Gt.convertBufferToString=void 0;var OUt=require("fs"),xUt=require("path"),rFe=require("url"),Bre=jM();Object.defineProperty(Gt,"defaults",{enumerable:!0,get:function(){return Bre.defaults}});Object.defineProperty(Gt,"noop",{enumerable:!0,get:function(){return Bre.noop}});var IUt=ZNe();Gt.Debug=IUt.default;var RUt=tFe();function nFe(t,e){if(t instanceof Buffer)return t.toString(e);if(Array.isArray(t)){let r=t.length,n=Array(r);for(let i=0;i<r;++i)n[i]=t[i]instanceof Buffer&&e==="utf8"?t[i].toString():nFe(t[i],e);return n}return t}Gt.convertBufferToString=nFe;function DUt(t){if(!t)return null;let e=[],r=t.length;for(let n=0;n<r;++n){let i=t[n];i instanceof Error?e.push([i]):e.push([null,i])}return e}Gt.wrapMultiResult=DUt;function iFe(t){let e=parseFloat(t);return!isNaN(t)&&(e|0)===e}Gt.isInt=iFe;function kUt(t){let e={},r=t.length;for(let n=1;n<r;n+=2)e[t[n-1]]=t[n];return e}Gt.packObject=kUt;function MUt(t,e){let r=null,n=function(){r&&(clearTimeout(r),r=null,t.apply(this,arguments))};return r=setTimeout(n,e,new Error("timeout")),n}Gt.timeout=MUt;function PUt(t){let e=[],r=Object.keys(t);for(let n=0,i=r.length;n<i;n++)e.push(r[n],t[r[n]]);return e}Gt.convertObjectToArray=PUt;function NUt(t){let e=[],r=0;return t.forEach(function(n,i){e[r]=i,e[r+1]=n,r+=2}),e}Gt.convertMapToArray=NUt;function FUt(t){return t===null||typeof t>"u"?"":String(t)}Gt.toArg=FUt;function BUt(t,e,r){let n=e.split(`
`),i="",s;for(s=1;s<n.length&&n[s].indexOf(r)!==-1;++s);for(let o=s;o<n.length;++o)i+=`
`+n[o];if(t.stack){let o=t.stack.indexOf(`
`);t.stack=t.stack.slice(0,o)+i}return t}Gt.optimizeErrorStack=BUt;function qUt(t){if(iFe(t))return{port:t};let e=(0,rFe.parse)(t,!0,!0);!e.slashes&&t[0]!=="/"&&(t="//"+t,e=(0,rFe.parse)(t,!0,!0));let r=e.query||{},n={};if(e.auth){let i=e.auth.indexOf(":");n.username=i===-1?e.auth:e.auth.slice(0,i),n.password=i===-1?"":e.auth.slice(i+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(n.db=e.pathname.slice(1)):n.path=e.pathname),e.host&&(n.host=e.hostname),e.port&&(n.port=e.port),typeof r.family=="string"){let i=Number.parseInt(r.family,10);Number.isNaN(i)||(n.family=i)}return(0,Bre.defaults)(n,r),n}Gt.parseURL=qUt;function LUt(t){let e=t?.tls;typeof e=="string"&&(e={profile:e});let r=RUt.default[e?.profile];return r&&(e=Object.assign({},r,e),delete e.profile,t=Object.assign({},t,{tls:e})),t}Gt.resolveTLSProfile=LUt;function jUt(t,e=0){let r=t.length;return e>=r?null:t[e+Math.floor(Math.random()*(r-e))]}Gt.sample=jUt;function $Ut(t){let e=t.length;for(;e>0;){let r=Math.floor(Math.random()*e);e--,[t[e],t[r]]=[t[r],t[e]]}return t}Gt.shuffle=$Ut;Gt.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function KUt(t,e){let r=new Map;return t.forEach((n,i)=>{r.set(n,e[i])}),r}Gt.zipMap=KUt;var h_=null;async function UUt(){if(h_)return h_;try{let t=(0,xUt.resolve)(__dirname,"..","..","package.json"),e=await OUt.promises.readFile(t,"utf8");return h_={version:JSON.parse(e).version},h_}catch{return h_={version:"error-fetching-version"},h_}}Gt.getPackageMeta=UUt});var Mf=m(Lre=>{"use strict";Object.defineProperty(Lre,"__esModule",{value:!0});var sFe=a_(),VUt=q9(),GUt=tm(),bg=ss(),Gd=class t{constructor(e,r=[],n={},i){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=r.flat(),this.callback=i,this.initPromise(),n.keyPrefix){let s=n.keyPrefix instanceof Buffer,o=s?n.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(o===null&&(o=Buffer.from(n.keyPrefix)),Buffer.concat([o,a])):s?Buffer.concat([n.keyPrefix,Buffer.from(String(a))]):n.keyPrefix+a)}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,r){return!!this.getFlagMap()[e][r]}static setArgumentTransformer(e,r){this._transformer.argument[e]=r}static setReplyTransformer(e,r){this._transformer.reply[e]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(t.FLAGS).reduce((e,r)=>(e[r]={},t.FLAGS[r].forEach(n=>{e[r][n]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:VUt(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let r,n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let i=new qre;i.push(n);for(let s=0;s<this.args.length;++s){let o=this.args[s];o instanceof Buffer?o.length===0?i.push(`$0\r
\r
`):(i.push("$"+o.length+`\r
`),i.push(o),i.push(`\r
`)):i.push("$"+Buffer.byteLength(o)+`\r
`+o+`\r
`)}r=i.toBuffer()}else{r=n;for(let i=0;i<this.args.length;++i){let s=this.args[i];r+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return r}stringifyArguments(){for(let e=0;e<this.args.length;++e){let r=this.args[e];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,bg.toArg)(r))}}transformReply(e){this.replyEncoding&&(e=(0,bg.convertBufferToString)(e,this.replyEncoding));let r=t._transformer.reply[this.name];return r&&(e=r(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}initPromise(){let e=new Promise((r,n)=>{if(!this.transformed){this.transformed=!0;let i=t._transformer.argument[this.name];i&&(this.args=i(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=i=>{n((0,bg.optimizeErrorStack)(i,this.errorStack.stack,__dirname))}:this.reject=n});this.promise=(0,GUt.default)(e,this.callback)}_iterateKeys(e=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,sFe.exists)(this.name))){let r=(0,sFe.getKeyIndexes)(this.name,this.args);for(let n of r)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return r=>{try{let n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(r)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}};Lre.default=Gd;Gd.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]};Gd._transformer={argument:{},reply:{}};var oFe=function(t){if(t.length===1){if(t[0]instanceof Map)return(0,bg.convertMapToArray)(t[0]);if(typeof t[0]=="object"&&t[0]!==null)return(0,bg.convertObjectToArray)(t[0])}return t},aFe=function(t){if(t.length===2){if(t[1]instanceof Map)return[t[0]].concat((0,bg.convertMapToArray)(t[1]));if(typeof t[1]=="object"&&t[1]!==null)return[t[0]].concat((0,bg.convertObjectToArray)(t[1]))}return t};Gd.setArgumentTransformer("mset",oFe);Gd.setArgumentTransformer("msetnx",oFe);Gd.setArgumentTransformer("hset",aFe);Gd.setArgumentTransformer("hmset",aFe);Gd.setReplyTransformer("hgetall",function(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2){let n=t[r],i=t[r+1];n in e?Object.defineProperty(e,n,{value:i,configurable:!0,enumerable:!0,writable:!0}):e[n]=i}return e}return t});var qre=class{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),r=0;for(let n of this.items){let i=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,r):e.write(n,r,i),r+=i}return e}}});var uFe=m(jre=>{"use strict";Object.defineProperty(jre,"__esModule",{value:!0});var HUt=gg(),GM=class extends HUt.RedisError{constructor(e,r){super(e),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};jre.default=GM;GM.defaultMessage="Failed to refresh slots cache."});var HM=m(Kre=>{"use strict";Object.defineProperty(Kre,"__esModule",{value:!0});var zUt=require("stream"),$re=class extends zUt.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(r,n)=>{if(r){this.emit("error",r);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}};Kre.default=$re});var hFe=m(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.executeWithAutoPipelining=fi.getFirstValueInFlattenedArray=fi.shouldUseAutoPipelining=fi.notAllowedAutoPipelineCommands=fi.kCallbacks=fi.kExec=void 0;var lFe=jM(),WUt=q9(),cFe=tm();fi.kExec=Symbol("exec");fi.kCallbacks=Symbol("callbacks");fi.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function dFe(t,e){if(t._runningAutoPipelines.has(e)||!t._autoPipelines.has(e))return;t._runningAutoPipelines.add(e);let r=t._autoPipelines.get(e);t._autoPipelines.delete(e);let n=r[fi.kCallbacks];r[fi.kCallbacks]=null,r.exec(function(i,s){if(t._runningAutoPipelines.delete(e),i)for(let o=0;o<n.length;o++)process.nextTick(n[o],i);else for(let o=0;o<n.length;o++)process.nextTick(n[o],...s[o]);t._autoPipelines.has(e)&&dFe(t,e)})}function JUt(t,e,r){return e&&t.options.enableAutoPipelining&&!t.isPipeline&&!fi.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)}fi.shouldUseAutoPipelining=JUt;function pFe(t){for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="string")return r;if(Array.isArray(r)||(0,lFe.isArguments)(r)){if(r.length===0)continue;return r[0]}let n=[r].flat();if(n.length>0)return n[0]}}fi.getFirstValueInFlattenedArray=pFe;function fFe(t,e,r,n,i){if(t.isCluster&&!t.slots.length)return t.status==="wait"&&t.connect().catch(lFe.noop),(0,cFe.default)(new Promise(function(c,l){t.delayUntilReady(d=>{if(d){l(d);return}fFe(t,e,r,n,null).then(c,l)})}),i);let s=t.options.keyPrefix||"",o=t.isCluster?t.slots[WUt(`${s}${pFe(n)}`)].join(","):"main";if(!t._autoPipelines.has(o)){let c=t.pipeline();c[fi.kExec]=!1,c[fi.kCallbacks]=[],t._autoPipelines.set(o,c)}let a=t._autoPipelines.get(o);a[fi.kExec]||(a[fi.kExec]=!0,setImmediate(dFe,t,o));let u=new Promise(function(c,l){a[fi.kCallbacks].push(function(d,p){if(d){l(d);return}c(p)}),e==="call"&&n.unshift(r),a[e](...n)});return(0,cFe.default)(u,i)}fi.executeWithAutoPipelining=fFe});var mFe=m(Vre=>{"use strict";Object.defineProperty(Vre,"__esModule",{value:!0});var YUt=require("crypto"),QUt=Mf(),XUt=tm(),Ure=class{constructor(e,r=null,n="",i=!1){this.lua=e,this.numberOfKeys=r,this.keyPrefix=n,this.readOnly=i,this.sha=(0,YUt.createHash)("sha1").update(e).digest("hex");let s=this.sha,o=new WeakSet;this.Command=class extends QUt.default{toWritable(u){let c=this.reject;return this.reject=l=>{l.message.indexOf("NOSCRIPT")!==-1&&o.delete(u),c.call(this,l)},o.has(u)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(o.add(u),this.name="eval",this.args[0]=e),super.toWritable(u)}}}execute(e,r,n,i){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...r],n);return s.promise=s.promise.catch(o=>{if(o.message.indexOf("NOSCRIPT")===-1)throw o;let a=new this.Command("evalsha",[this.sha,...r],n);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,XUt.default)(s.promise,i),e.sendCommand(s)}};Vre.default=Ure});var WM=m(Hre=>{"use strict";Object.defineProperty(Hre,"__esModule",{value:!0});var ZUt=a_(),zM=hFe(),eVt=Mf(),tVt=mFe(),Pf=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return Gre.slice(0)}createBuiltinCommand(e){return{string:nm(null,e,"utf8"),buffer:nm(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=nm(e,e,"utf8"),this[e+"Buffer"]=nm(e+"Buffer",e,null)}defineCommand(e,r){let n=new tVt.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[e]=n,this[e]=yFe(e,e,n,"utf8"),this[e+"Buffer"]=yFe(e+"Buffer",e,n,null)}sendCommand(e,r,n){throw new Error('"sendCommand" is not implemented')}},Gre=ZUt.list.filter(t=>t!=="monitor");Gre.push("sentinel");Gre.forEach(function(t){Pf.prototype[t]=nm(t,t,"utf8"),Pf.prototype[t+"Buffer"]=nm(t+"Buffer",t,null)});Pf.prototype.call=nm("call","utf8");Pf.prototype.callBuffer=nm("callBuffer",null);Pf.prototype.send_command=Pf.prototype.call;function nm(t,e,r){return typeof r>"u"&&(r=e,e=null),function(...n){let i=e||n.shift(),s=n[n.length-1];typeof s=="function"?n.pop():s=void 0;let o={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,zM.shouldUseAutoPipelining)(this,t,i)?(0,zM.executeWithAutoPipelining)(this,t,i,n,s):this.sendCommand(new eVt.default(i,n,o,s))}}function yFe(t,e,r,n){return function(...i){let s=typeof i[i.length-1]=="function"?i.pop():void 0,o={replyEncoding:n};return this.options.showFriendlyErrorStack&&(o.errorStack=new Error),(0,zM.shouldUseAutoPipelining)(this,t,e)?(0,zM.executeWithAutoPipelining)(this,t,e,i,s):r.execute(this,i,o,s)}}Hre.default=Pf});var Jre=m(Wre=>{"use strict";Object.defineProperty(Wre,"__esModule",{value:!0});var zre=q9(),gFe=a_(),EFe=tm(),rVt=require("util"),nVt=Mf(),iVt=ss(),sVt=WM();function oVt(t,e){let r=zre(e[0]),n=t._groupsBySlot[r];for(let i=1;i<e.length;i++)if(t._groupsBySlot[zre(e[i])]!==n)return-1;return r}var im=class extends sVt.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(n=>{let i=e.scriptsSet[n];this._shaToScript[i.sha]=i,this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),e.addedBuiltinSet.forEach(n=>{this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),this.promise=new Promise((n,i)=>{this.resolve=n,this.reject=i});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(e,r){if(this._queue[r].name==="exec"&&Array.isArray(e[1])){let i=e[1].length;for(let s=0;s<i;s++){if(e[1][s]instanceof Error)continue;let o=this._queue[r-(i-s)];try{e[1][s]=o.transformReply(e[1][s])}catch(a){e[1][s]=a}}}if(this._result[r]=e,--this.replyPending)return;if(this.isCluster){let i=!0,s;for(let o=0;o<this._result.length;++o){let a=this._result[o][0],u=this._queue[o];if(a){if(u.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:a.name,message:a.message};else if(s.name!==a.name||s.message!==a.message){i=!1;break}}else if(!u.inTransaction&&!((0,gFe.exists)(u.name)&&(0,gFe.hasFlag)(u.name,"readonly"))){i=!1;break}}if(s&&i){let o=this,a=s.message.split(" "),u=this._queue,c=!1;this._queue=[];for(let f=0;f<u.length;++f){if(a[0]==="ASK"&&!c&&u[f].name!=="asking"&&(!u[f-1]||u[f-1].name!=="asking")){let h=new nVt.default("asking");h.ignore=!0,this.sendCommand(h)}u[f].initPromise(),this.sendCommand(u[f]),c=u[f].inTransaction}let l=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=function(){o.exec()},p=this.redis;if(p.handleError(s,this.leftRedirections,{moved:function(f,h){o.preferKey=h,p.slots[a[1]]=[h],p._groupsBySlot[a[1]]=p._groupsIds[p.slots[a[1]].join(";")],p.refreshSlotsCache(),o.exec()},ask:function(f,h){o.preferKey=h,o.exec()},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:()=>{l=!1},defaults:()=>{l=!1}}),l)return}}let n=0;for(let i=0;i<this._queue.length-n;++i)this._queue[i+n].ignore&&(n+=1),this._result[i]=this._result[i+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let r=this._queue.length;return e.pipelineIndex=r,e.promise.then(n=>{this.fillResult([null,n],r)}).catch(n=>{this.fillResult([n],r)}),this._queue.push(e),this}addBatch(e){let r,n,i;for(let s=0;s<e.length;++s)r=e[s],n=r[0],i=r.slice(1),this[n].apply(this,i);return this}};Wre.default=im;var aVt=im.prototype.multi;im.prototype.multi=function(){return this._transactions+=1,aVt.apply(this,arguments)};var bFe=im.prototype.execBuffer;im.prototype.execBuffer=(0,rVt.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),bFe.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");im.prototype.exec=function(t){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(iVt.noop),t&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,EFe.default)(this.promise,t)),this.redis.delayUntilReady(i=>{if(i){this.reject(i);return}this.exec(t)}),this.promise;if(this._transactions>0)return this._transactions-=1,bFe.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,EFe.default)(this.promise,t)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let i=[];for(let s=0;s<this._queue.length;s++){let o=this._queue[s].getKeys();if(o.length&&i.push(o[0]),o.length&&zre.generateMulti(o)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(i.length){if(e=oVt(this.redis,i),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let r=this;return n(),this.promise;function n(){let i=r.replyPending=r._queue.length,s;r.isCluster&&(s={slot:e,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let o="",a,u={isPipeline:!0,destination:r.isCluster?s:{redis:r.redis},write(c){typeof c!="string"?(a||(a=[]),o&&(a.push(Buffer.from(o,"utf8")),o=""),a.push(c)):o+=c,--i||(a?(o&&a.push(Buffer.from(o,"utf8")),u.destination.redis.stream.write(Buffer.concat(a))):u.destination.redis.stream.write(o),i=r._queue.length,o="",a=void 0)}};for(let c=0;c<r._queue.length;++c)r.redis.sendCommand(r._queue[c],u,s);return r.promise}}});var Xre=m(JM=>{"use strict";Object.defineProperty(JM,"__esModule",{value:!0});JM.addTransactionSupport=void 0;var Yre=ss(),Qre=tm(),_Fe=Jre();function uVt(t){t.pipeline=function(n){let i=new _Fe.default(this);return Array.isArray(n)&&i.addBatch(n),i};let{multi:e}=t;t.multi=function(n,i){if(typeof i>"u"&&!Array.isArray(n)&&(i=n,n=null),i&&i.pipeline===!1)return e.call(this);let s=new _Fe.default(this);s.multi(),Array.isArray(n)&&s.addBatch(n);let o=s.exec;s.exec=function(u){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(Yre.noop),(0,Qre.default)(new Promise((l,d)=>{this.redis.delayUntilReady(p=>{if(p){d(p);return}this.exec(s).then(l,d)})}),u);if(this._transactions>0&&o.call(s),this.nodeifiedPromise)return o.call(s);let c=o.call(s);return(0,Qre.default)(c.then(function(l){let d=l[l.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let p=0;p<l.length-1;++p)l[p][0]&&d[0].previousErrors.push(l[p][0]);throw d[0]}return(0,Yre.wrapMultiResult)(d[1])}),u)};let{execBuffer:a}=s;return s.execBuffer=function(u){return this._transactions>0&&a.call(s),s.exec(u)},s};let{exec:r}=t;t.exec=function(n){return(0,Qre.default)(r.call(this).then(function(i){return Array.isArray(i)&&(i=(0,Yre.wrapMultiResult)(i)),i}),n)}}JM.addTransactionSupport=uVt});var ene=m(Zre=>{"use strict";Object.defineProperty(Zre,"__esModule",{value:!0});function cVt(t,e){Object.getOwnPropertyNames(e.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})}Zre.default=cVt});var SFe=m(YM=>{"use strict";Object.defineProperty(YM,"__esModule",{value:!0});YM.DEFAULT_CLUSTER_OPTIONS=void 0;var vFe=require("dns");YM.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:t=>Math.min(100+t*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:vFe.resolveSrv,dnsLookup:vFe.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var $9=m(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.getConnectionName=bo.weightSrvRecords=bo.groupSrvRecords=bo.getUniqueHostnamesFromOptions=bo.normalizeNodeOptions=bo.nodeKeyToRedisOptions=bo.getNodeKey=void 0;var wFe=ss(),lVt=require("net");function dVt(t){return t.port=t.port||6379,t.host=t.host||"127.0.0.1",t.host+":"+t.port}bo.getNodeKey=dVt;function pVt(t){let e=t.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${t}`);return{host:t.slice(0,e),port:Number(t.slice(e+1))}}bo.nodeKeyToRedisOptions=pVt;function fVt(t){return t.map(e=>{let r={};if(typeof e=="object")Object.assign(r,e);else if(typeof e=="string")Object.assign(r,(0,wFe.parseURL)(e));else if(typeof e=="number")r.port=e;else throw new Error("Invalid argument "+e);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,wFe.resolveTLSProfile)(r)})}bo.normalizeNodeOptions=fVt;function hVt(t){let e={};return t.forEach(r=>{e[r.host]=!0}),Object.keys(e).filter(r=>!(0,lVt.isIP)(r))}bo.getUniqueHostnamesFromOptions=hVt;function mVt(t){let e={};for(let r of t)e.hasOwnProperty(r.priority)?(e[r.priority].totalWeight+=r.weight,e[r.priority].records.push(r)):e[r.priority]={totalWeight:r.weight,records:[r]};return e}bo.groupSrvRecords=mVt;function yVt(t){if(t.records.length===1)return t.totalWeight=0,t.records.shift();let e=Math.floor(Math.random()*(t.totalWeight+t.records.length)),r=0;for(let[n,i]of t.records.entries())if(r+=1+i.weight,r>e)return t.totalWeight-=i.weight,t.records.splice(n,1),i}bo.weightSrvRecords=yVt;function gVt(t,e){let r=`ioredis-cluster(${t})`;return e?`${r}:${e}`:r}bo.getConnectionName=gVt});var ine=m(nne=>{"use strict";Object.defineProperty(nne,"__esModule",{value:!0});var AFe=$9(),tne=ss(),EVt=sm(),Hd=(0,tne.Debug)("cluster:subscriber"),rne=class{constructor(e,r,n=!1){this.connectionPool=e,this.emitter=r,this.isSharded=n,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){Hd("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}Hd("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(i,s)=>{!this.started||!this.subscriber||(0,AFe.getNodeKey)(this.subscriber.options)===s&&(Hd("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(Hd("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),Hd("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,tne.sample)(this.connectionPool.getNodes());if(!r){Hd("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:n}=r;Hd("selected a subscriber %s:%s",n.host,n.port);let i="subscriber";this.isSharded&&(i="ssubscriber"),this.subscriber=new EVt.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:(0,AFe.getConnectionName)(i,n.connectionName),lazyConnect:!0,tls:n.tls,retryStrategy:null}),this.subscriber.on("error",tne.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let o=e.condition||e.prevCondition;o&&o.subscriber&&(s.subscribe=o.subscriber.channels("subscribe"),s.psubscribe=o.subscriber.channels("psubscribe"),s.ssubscribe=o.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let o=0;for(let a of["subscribe","psubscribe","ssubscribe"]){let u=s[a];if(u.length!=0)if(Hd("%s %d channels",a,u.length),a==="ssubscribe")for(let c of u)o+=1,this.subscriber[a](c).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Hd("failed to ssubscribe to channel: %s",c)});else o+=1,this.subscriber[a](u).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Hd("failed to %s %d channels",a,u.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let o of["message","messageBuffer"])this.subscriber.on(o,(a,u)=>{this.emitter.emit(o,a,u)});for(let o of["pmessage","pmessageBuffer"])this.subscriber.on(o,(a,u,c)=>{this.emitter.emit(o,a,u,c)});if(this.isSharded==!0)for(let o of["smessage","smessageBuffer"])this.subscriber.on(o,(a,u)=>{this.emitter.emit(o,a,u)})}};nne.default=rne});var une=m(ane=>{"use strict";Object.defineProperty(ane,"__esModule",{value:!0});var bVt=require("events"),QM=ss(),sne=$9(),_Vt=sm(),K9=(0,QM.Debug)("cluster:connectionPool"),one=class extends bVt.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let r=this.nodes[e];return Object.keys(r).map(n=>r[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let r=Object.keys(this.nodes[e]),n=(0,QM.sample)(r);return this.nodes[e][n]}addMasterNode(e){let r=(0,sne.getNodeKey)(e.options),n=this.createRedisFromOptions(e,e.options.readOnly);return e.options.readOnly?!1:(this.nodes.all[r]=n,this.nodes.master[r]=n,!0)}createRedisFromOptions(e,r){return new _Vt.default((0,QM.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,r=!1){let n=(0,sne.getNodeKey)(e);r=!!r,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let i;return this.nodes.all[n]?(i=this.nodes.all[n],i.options.readOnly!==r&&(i.options.readOnly=r,K9("Change role of %s to %s",n,r?"slave":"master"),i[r?"readonly":"readwrite"]().catch(QM.noop),r?(delete this.nodes.master[n],this.nodes.slave[n]=i):(delete this.nodes.slave[n],this.nodes.master[n]=i))):(K9("Connecting to %s as %s",n,r?"slave":"master"),i=this.createRedisFromOptions(e,r),this.nodes.all[n]=i,this.nodes[r?"slave":"master"][n]=i,i.once("end",()=>{this.removeNode(n),this.emit("-node",i,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",i,n),i.on("error",function(s){this.emit("nodeError",s,n)})),i}reset(e){K9("Reset with %O",e);let r={};e.forEach(n=>{let i=(0,sne.getNodeKey)(n);n.readOnly&&r[i]||(r[i]=n)}),Object.keys(this.nodes.all).forEach(n=>{r[n]||(K9("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(r).forEach(n=>{let i=r[n];this.findOrCreate(i,i.readOnly)})}removeNode(e){let{nodes:r}=this;r.all[e]&&(K9("Remove %s from the pool",e),delete r.all[e]),delete r.master[e],delete r.slave[e]}};ane.default=one});var XM=m((FIr,CFe)=>{"use strict";function Wn(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}Wn.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};Wn.prototype.get=function(e){return this.peekAt(e)};Wn.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Wn.prototype.peekFront=function(){return this.peek()};Wn.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Wn.prototype,"length",{get:function(){return this.size()}});Wn.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Wn.prototype.unshift=function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Wn.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Wn.prototype.push=function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Wn.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}};Wn.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(e<n/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};Wn.prototype.remove=function(e,r){var n=e,i,s=r;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||r<1)){if(n<0&&(n+=o),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=o)return i=this.toArray(),this.clear(),i;n+r>o&&(r=o-n);var u;for(i=new Array(r),u=0;u<r;u++)i[u]=this._list[this._head+n+u&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,u=r;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(e===0){for(this._head=this._head+r+a&this._capacityMask,u=r-1;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+e+r+a&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,u=o-(r+e);u>0;u--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};Wn.prototype.splice=function(e,r){var n=e;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,a,u=arguments.length,c=this._list.length,l=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+c&this._capacityMask);u>l;)this.unshift(arguments[--u]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+r));var d=o.length;for(s=0;s<d;s++)o[s]=this._list[this._head+n+r+s&this._capacityMask];for(r===0?(a=[],n!=i&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-d+c&this._capacityMask);l<u;)this.push(arguments[l++]);for(s=0;s<d;s++)this.push(o[s])}return a}else return this.remove(n,r)}};Wn.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};Wn.prototype.isEmpty=function(){return this._head===this._tail};Wn.prototype.toArray=function(){return this._copyArray(!1)};Wn.prototype._fromArray=function(e){var r=e.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var i=0;i<r;i++)this._list[i]=e[i]};Wn.prototype._copyArray=function(e,r){var n=this._list,i=n.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(r),a=0,u;if(e||this._head>this._tail){for(u=this._head;u<i;u++)o[a++]=n[u];for(u=0;u<this._tail;u++)o[a++]=n[u]}else for(u=this._head;u<this._tail;u++)o[a++]=n[u];return o};Wn.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Wn.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};Wn.prototype._nextPowerOf2=function(e){var r=Math.log(e)/Math.log(2),n=1<<r+1;return Math.max(n,4)};CFe.exports=Wn});var TFe=m(lne=>{"use strict";Object.defineProperty(lne,"__esModule",{value:!0});var vVt=ss(),SVt=XM(),wVt=(0,vVt.Debug)("delayqueue"),cne=class{constructor(){this.queues={},this.timeouts={}}push(e,r,n){let i=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new SVt),this.queues[e].push(r),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{i(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){let r=this.queues[e];if(!r)return;let{length:n}=r;if(n)for(wVt("send %d commands in %s queue",n,e),this.queues[e]=null;r.length>0;)r.shift()()}};lne.default=cne});var IFe=m(pne=>{"use strict";Object.defineProperty(pne,"__esModule",{value:!0});var AVt=ss(),CVt=ine(),TVt=une(),OFe=$9(),ZM=q9(),xFe=(0,AVt.Debug)("cluster:subscriberGroup"),dne=class{constructor(e,r){this.cluster=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,e.on("+node",n=>{this._addSubscriber(n)}),e.on("-node",n=>{this._removeSubscriber(n)}),e.on("refresh",()=>{this._refreshSlots(e)}),e.on("forceRefresh",()=>{r()})}getResponsibleSubscriber(e){let r=this.clusterSlots[e][0];return this.shardedSubscribers.get(r)}addChannels(e){let r=ZM(e[0]);e.forEach(i=>{if(ZM(i)!=r)return-1});let n=this.channels.get(r);return n?this.channels.set(r,n.concat(e)):this.channels.set(r,e),[...this.channels.values()].flatMap(i=>i).length}removeChannels(e){let r=ZM(e[0]);e.forEach(i=>{if(ZM(i)!=r)return-1});let n=this.channels.get(r);if(n){let i=n.filter(s=>!e.includes(s));this.channels.set(r,i)}return[...this.channels.values()].flatMap(i=>i).length}stop(){for(let e of this.shardedSubscribers.values())e.stop()}start(){for(let e of this.shardedSubscribers.values())e.isStarted()||e.start()}_addSubscriber(e){let r=new TVt.default(e.options);if(r.addMasterNode(e)){let n=new CVt.default(r,this.cluster,!0),i=(0,OFe.getNodeKey)(e.options);return this.shardedSubscribers.set(i,n),n.start(),this._resubscribe(),this.cluster.emit("+subscriber"),n}return null}_removeSubscriber(e){let r=(0,OFe.getNodeKey)(e.options),n=this.shardedSubscribers.get(r);return n&&(n.stop(),this.shardedSubscribers.delete(r),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(e){if(this._slotsAreEqual(e.slots))xFe("Nothing to refresh because the new cluster map is equal to the previous one.");else{xFe("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<e.slots.length;r++){let n=e.slots[r][0];this.subscriberToSlotsIndex.has(n)||this.subscriberToSlotsIndex.set(n,[]),this.subscriberToSlotsIndex.get(n).push(Number(r))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(e.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,r)=>{let n=this.subscriberToSlotsIndex.get(r);n&&(e.associateSlotRange(n),n.forEach(i=>{let s=e.getInstance(),o=this.channels.get(i);o&&o.length>0&&s&&(s.ssubscribe(o),s.on("ready",()=>{s.ssubscribe(o)}))}))})}_slotsAreEqual(e){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(e)}};pne.default=dne});var mne=m(hne=>{"use strict";Object.defineProperty(hne,"__esModule",{value:!0});var RFe=a_(),NFe=require("events"),U9=gg(),DFe=tm(),kFe=Mf(),fne=uFe(),OVt=sm(),xVt=HM(),IVt=Xre(),fu=ss(),RVt=ene(),DVt=WM(),kVt=SFe(),MVt=ine(),PVt=une(),NVt=TFe(),m_=$9(),MFe=XM(),FVt=IFe(),Jn=(0,fu.Debug)("cluster"),PFe=new WeakSet,V9=class t extends DVt.default{constructor(e,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new NVt.default,this.offlineQueue=new MFe,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,NFe.EventEmitter.call(this),this.startupNodes=e,this.options=(0,fu.defaults)({},r,kVt.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers==!0&&(this.shardedSubscribers=new FVt.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new PVt.default(this.options.redisOptions),this.connectionPool.on("-node",(n,i)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,i)=>{this.emit("node error",n,i)}),this.subscriber=new MVt.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,i])=>{this.defineCommand(n,i)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{Jn("connecting failed: %s",n)})}connect(){return new Promise((e,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(i=>{if(this.connectionEpoch!==n){Jn("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),r(new U9.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){Jn("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new U9.RedisError("Connection is aborted"));return}this.connectionPool.reset(i);let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},o,a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",o),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((u,c)=>{u||c?(Jn("Ready check failed (%s). Reconnecting...",u||c),this.status==="connect"&&this.disconnect(!0)):s()}):s()};o=()=>{let u=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(u),r(u)},this.once("refresh",a),this.once("close",o),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(u=>{u&&u.message===fne.default.defaultMessage&&(OVt.default.prototype.silentEmit.call(this,"error",u),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(i=>{this.setStatus("close"),this.handleCloseEvent(i),this.invokeReadyDelayedCallbacks(i),r(i)})})}disconnect(e=!1){let r=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,Jn("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let n=(0,DFe.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),n}return(0,DFe.default)(Promise.all(this.nodes().map(n=>n.quit().catch(i=>{if(i.message===fu.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw i}))).then(()=>"OK"),e)}duplicate(e=[],r={}){let n=e.length>0?e:this.startupNodes.slice(0),i=Object.assign({},this.options,r);return new t(n,i)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let r=this,n=a=>{this.isRefreshing=!1;for(let u of this._refreshSlotsCacheCallbacks)u(a);this._refreshSlotsCacheCallbacks=[]},i=(0,fu.shuffle)(this.connectionPool.getNodes()),s=null;function o(a){if(a===i.length){let l=new fne.default(fne.default.defaultMessage,s);return n(l)}let u=i[a],c=`${u.options.host}:${u.options.port}`;Jn("getting slot cache from %s",c),r.getInfoFromNode(u,function(l){switch(r.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}l?(r.emit("node error",l,c),s=l,o(a+1)):(r.emit("refresh"),n())})}o(0)}sendCommand(e,r,n){if(this.status==="wait"&&this.connect().catch(fu.noop),this.status==="end")return e.reject(new Error(fu.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let i=this.options.scaleReads;i!=="master"&&(e.isReadOnly||(0,RFe.exists)(e.name)&&(0,RFe.hasFlag)(e.name,"readonly")||(i="master"));let s=n?n.slot:e.getSlot(),o={},a=this;if(!n&&!PFe.has(e)){PFe.add(e);let c=e.reject;e.reject=function(l){let d=u.bind(null,!0);a.handleError(l,o,{moved:function(p,f){Jn("command %s is moved to %s",e.name,f),s=Number(p),a.slots[p]?a.slots[p][0]=f:a.slots[p]=[f],a._groupsBySlot[p]=a._groupsIds[a.slots[p].join(";")],a.connectionPool.findOrCreate(a.natMapper(f)),u(),Jn("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(p,f){Jn("command %s is required to ask %s:%s",e.name,f);let h=a.natMapper(f);a.connectionPool.findOrCreate(h),u(!1,`${h.host}:${h.port}`)},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:function(p){c.call(e,p)},defaults:function(){c.call(e,l)}})}}u();function u(c,l){if(a.status==="end"){e.reject(new U9.AbortError("Cluster is ended."));return}let d;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)d=n.redis;else if(kFe.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||kFe.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(a.options.shardedSubscribers==!0&&(e.name=="ssubscribe"||e.name=="sunsubscribe")){let p=a.shardedSubscribers.getResponsibleSubscriber(s),f=-1;e.name=="ssubscribe"&&(f=a.shardedSubscribers.addChannels(e.getKeys())),e.name=="sunsubscribe"&&(f=a.shardedSubscribers.removeChannels(e.getKeys())),f!==-1?d=p.getInstance():e.reject(new U9.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else d=a.subscriber.getInstance();if(!d){e.reject(new U9.AbortError("No subscriber for the cluster"));return}}else{if(!c){if(typeof s=="number"&&a.slots[s]){let p=a.slots[s];if(typeof i=="function"){let f=p.map(function(h){return a.connectionPool.getInstanceByKey(h)});d=i(f,e),Array.isArray(d)&&(d=(0,fu.sample)(d)),d||(d=f[0])}else{let f;i==="all"?f=(0,fu.sample)(p):i==="slave"&&p.length>1?f=(0,fu.sample)(p,1):f=p[0],d=a.connectionPool.getInstanceByKey(f)}}l&&(d=a.connectionPool.getInstanceByKey(l),d.asking())}d||(d=(typeof i=="function"?null:a.connectionPool.getSampleInstance(i))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=d)}d?d.sendCommand(e,r):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:r,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}handleError(e,r,n){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let i=e.message.split(" ");if(i[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",n.moved.bind(null,i[1],i[2]),{timeout:s}):n.moved(i[1],i[2])}else i[0]==="ASK"?n.ask(i[1],i[2]):i[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):i[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===fu.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new MFe}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{Jn('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){Jn("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){e&&Jn("closed because %s",e);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,Jn("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(n){Jn("Got error %s when reconnecting. Ignoring...",n)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let r;for(;r=this.offlineQueue.shift();)r.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){Jn("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=e.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(e){let r=typeof e=="string"?e:`${e.host}:${e.port}`,n=null;return this.options.natMap&&typeof this.options.natMap=="function"?n=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(n=this.options.natMap[r]),n?(Jn("NAT mapping %s -> %O",r,n),Object.assign({},n)):typeof e=="string"?(0,m_.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,r){if(!e)return r(new Error("Node is disconnected"));let n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,m_.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",fu.noop),n.cluster("SLOTS",(0,fu.timeout)((i,s)=>{if(n.disconnect(),i)return Jn("error encountered running CLUSTER.SLOTS: %s",i),r(i);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){Jn("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),r();return}let o=[];Jn("cluster slots result count: %d",s.length);for(let u=0;u<s.length;++u){let c=s[u],l=c[0],d=c[1],p=[];for(let f=2;f<c.length;f++){if(!c[f][0])continue;let h=this.natMapper({host:c[f][0],port:c[f][1]});h.readOnly=f!==2,o.push(h),p.push(h.host+":"+h.port)}Jn("cluster slots result [%d]: slots %d~%d served by %s",u,l,d,p);for(let f=l;f<=d;f++)this.slots[f]=p}this._groupsIds=Object.create(null);let a=0;for(let u=0;u<16384;u++){let c=(this.slots[u]||[]).join(";");if(!c.length){this._groupsBySlot[u]=void 0;continue}this._groupsIds[c]||(this._groupsIds[c]=++a),this._groupsBySlot[u]=this._groupsIds[c]}this.connectionPool.reset(o),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let r of this._readyDelayedCallbacks)process.nextTick(r,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(r,n)=>{if(r)return e(r);if(typeof n!="string")return e();let i,s=n.split(`\r
`);for(let o=0;o<s.length;++o){let a=s[o].split(":");if(a[0]==="cluster_state"){i=a[1];break}}i==="fail"?(Jn("cluster state not ok (%s)",i),e(null,i)):e()})}resolveSrv(e){return new Promise((r,n)=>{this.options.resolveSrv(e,(i,s)=>{if(i)return n(i);let o=this,a=(0,m_.groupSrvRecords)(s),u=Object.keys(a).sort((l,d)=>parseInt(l)-parseInt(d));function c(l){if(!u.length)return n(l);let d=u[0],p=a[d],f=(0,m_.weightSrvRecords)(p);p.records.length||u.shift(),o.dnsLookup(f.name).then(h=>r({host:h,port:f.port}),c)}c()})})}dnsLookup(e){return new Promise((r,n)=>{this.options.dnsLookup(e,(i,s)=>{i?(Jn("failed to resolve hostname %s to IP: %s",e,i.message),n(i)):(Jn("resolved hostname %s to IP %s",e,s),r(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,m_.normalizeNodeOptions)(this.startupNodes),r=(0,m_.getUniqueHostnamesFromOptions)(e);if(r.length===0)return e;let n=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),i=(0,fu.zipMap)(r,n);return e.map(s=>{let o=i.get(s.host);return o?this.options.useSRVRecords?Object.assign({},s,o):Object.assign({},s,{host:o}):s})}createScanStream(e,{key:r,options:n={}}){return new xVt.default({objectMode:!0,key:r,redis:this,command:e,...n})}};(0,RVt.default)(V9,NFe.EventEmitter);(0,IVt.addTransactionSupport)(V9.prototype);hne.default=V9});var eP=m(gne=>{"use strict";Object.defineProperty(gne,"__esModule",{value:!0});var BVt=ss(),qVt=(0,BVt.Debug)("AbstractConnector"),yne=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,r=setTimeout(()=>{qVt("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(r)),e.end()}}};gne.default=yne});var FFe=m(bne=>{"use strict";Object.defineProperty(bne,"__esModule",{value:!0});var LVt=require("net"),jVt=require("tls"),$Vt=ss(),KVt=eP(),Ene=class extends KVt.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:r}=this;this.connecting=!0;let n;return"path"in r&&r.path?n={path:r.path}:(n={},"port"in r&&r.port!=null&&(n.port=r.port),"host"in r&&r.host!=null&&(n.host=r.host),"family"in r&&r.family!=null&&(n.family=r.family)),r.tls&&Object.assign(n,r.tls),new Promise((i,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error($Vt.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,jVt.connect)(n):this.stream=(0,LVt.createConnection)(n)}catch(o){s(o);return}this.stream.once("error",o=>{this.firstError=o}),i(this.stream)})})}};bne.default=Ene});var BFe=m(vne=>{"use strict";Object.defineProperty(vne,"__esModule",{value:!0});function UVt(t,e){return(t.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(t.port||26379)===(e.port||26379)}var _ne=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++)if(UVt(e,this.sentinels[r]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};vne.default=_ne});var LFe=m(tP=>{"use strict";Object.defineProperty(tP,"__esModule",{value:!0});tP.FailoverDetector=void 0;var VVt=ss(),Sne=(0,VVt.Debug)("FailoverDetector"),qFe="+switch-master",wne=class{constructor(e,r){this.isDisconnected=!1,this.connector=e,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){Sne("Starting FailoverDetector");let e=[];for(let r of this.sentinels){let n=r.client.subscribe(qFe).catch(i=>{Sne("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,i.message)});e.push(n),r.client.on("message",i=>{!this.isDisconnected&&i===qFe&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,Sne("Failover detected, disconnecting"),this.connector.disconnect()}};tP.FailoverDetector=wne});var rP=m(H9=>{"use strict";Object.defineProperty(H9,"__esModule",{value:!0});H9.SentinelIterator=void 0;var GVt=require("net"),G9=ss(),HVt=require("tls"),jFe=BFe();H9.SentinelIterator=jFe.default;var zVt=eP(),WVt=sm(),JVt=LFe(),y_=(0,G9.Debug)("SentinelConnector"),Ane=class extends zVt.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new jFe.default(this.options.sentinels)}check(e){let r=!e.role||this.options.role===e.role;return r||(y_("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let r,n=async()=>{let i=this.sentinelIterator.next();if(i.done){this.sentinelIterator.reset(!1);let u=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,c=typeof u!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${u}ms.`;r&&(c+=` Last error: ${r.message}`),y_(c);let l=new Error(c);if(typeof u=="number")return e("error",l),await new Promise(d=>setTimeout(d,u)),n();throw l}let s=null,o=null;try{s=await this.resolve(i.value)}catch(u){o=u}if(!this.connecting)throw new Error(G9.CONNECTION_CLOSED_ERROR_MSG);let a=i.value.host+":"+i.value.port;if(s)return y_("resolved: %s:%s from sentinel %s",s.host,s.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,HVt.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,GVt.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",u=>{this.firstError=u}),this.stream;{let u=o?"failed to connect to sentinel "+a+" because "+o.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+s;return y_(u),e("sentinelError",new Error(u)),o&&(r=o),n()}};return n()}async updateSentinels(e){if(!this.options.updateSentinels)return;let r=await e.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(G9.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){let s=this.sentinelNatResolve($Fe(n));this.sentinelIterator.add(s)&&y_("adding sentinel %s:%s",s.host,s.port)}}),y_("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let r=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(e){let r=await e.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let n=r.map(G9.packObject).filter(i=>i.flags&&!i.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(YVt(n,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let r=`${e.host}:${e.port}`,n=e;return typeof this.options.natMap=="function"?n=this.options.natMap(r)||e:typeof this.options.natMap=="object"&&(n=this.options.natMap[r]||e),n}connectToSentinel(e,r){return new WVt.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(e){let r=this.connectToSentinel(e);r.on("error",QVt);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:n,value:i}=this.sentinelIterator.next();if(n)break;let s=this.connectToSentinel(i,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var o;(o=this.emitter)===null||o===void 0||o.emit("sentinelReconnecting")}),r.push({address:i,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new JVt.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};H9.default=Ane;function YVt(t,e){if(t.length===0)return null;let r;if(typeof e=="function")r=e(t);else if(e!==null&&typeof e=="object"){let n=Array.isArray(e)?e:[e];n.sort((i,s)=>(i.prio||(i.prio=1),s.prio||(s.prio=1),i.prio<s.prio?-1:i.prio>s.prio?1:0));for(let i=0;i<n.length;i++){for(let s=0;s<t.length;s++){let o=t[s];if(o.ip===n[i].ip&&o.port===n[i].port){r=o;break}}if(r)break}}return r||(r=(0,G9.sample)(t)),$Fe(r)}function $Fe(t){return{host:t.ip,port:Number(t.port)}}function QVt(){}});var KFe=m(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});g_.SentinelConnector=g_.StandaloneConnector=void 0;var XVt=FFe();g_.StandaloneConnector=XVt.default;var ZVt=rP();g_.SentinelConnector=ZVt.default});var UFe=m(Tne=>{"use strict";Object.defineProperty(Tne,"__esModule",{value:!0});var eGt=gg(),Cne=class extends eGt.AbortError{constructor(e){let r=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Tne.default=Cne});var VFe=m(nP=>{"use strict";Object.defineProperty(nP,"__esModule",{value:!0});nP.MaxRetriesPerRequestError=void 0;var tGt=UFe();nP.MaxRetriesPerRequestError=tGt.default});var QFe=m((WIr,YFe)=>{"use strict";var kne=require("buffer").Buffer,rGt=require("string_decoder").StringDecoder,One=new rGt,GFe=gg(),nGt=GFe.ReplyError,iGt=GFe.ParserError,Vl=kne.allocUnsafe(32*1024),Jo=0,iP=null,z9=0,xne=0;function sGt(t){let e=t.buffer.length-1;var r=t.offset,n=0,i=1;for(t.buffer[r]===45&&(i=-1,r++);r<e;){let s=t.buffer[r++];if(s===13)return t.offset=r+1,i*n;n=n*10+(s-48)}}function oGt(t){let e=t.buffer.length-1;var r=t.offset,n=0,i="";for(t.buffer[r]===45&&(i+="-",r++);r<e;){var s=t.buffer[r++];if(s===13)return t.offset=r+1,n!==0&&(i+=n),i;n>429496728?(i+=n*10+(s-48),n=0):s===48&&n===0?i+=0:n=n*10+(s-48)}}function HFe(t){let e=t.offset,r=t.buffer,n=r.length-1;for(var i=e;i<n;)if(r[i++]===13)return t.offset=i+1,t.optionReturnBuffers===!0?t.buffer.slice(e,i-1):t.buffer.toString("utf8",e,i-1)}function zFe(t){let e=t.buffer.length-1;for(var r=t.offset,n=0;r<e;){let i=t.buffer[r++];if(i===13)return t.offset=r+1,n;n=n*10+(i-48)}}function aGt(t){return t.optionStringNumbers===!0?oGt(t):sGt(t)}function uGt(t){let e=zFe(t);if(e===void 0)return;if(e<0)return null;let r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}let n=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(n,r):t.buffer.toString("utf8",n,r)}function cGt(t){var e=HFe(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new nGt(e)}function lGt(t,e){let r=new iGt("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}function dGt(t){let e=zFe(t);if(e===void 0)return;if(e<0)return null;let r=new Array(e);return WFe(t,r,0)}function Ine(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}function Rne(t){let e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){let n=Rne(t);if(n===void 0){Ine(t,e,r);return}e[r++]=n}return WFe(t,e,r)}function WFe(t,e,r){let n=t.buffer.length;for(;r<e.length;){let i=t.offset;if(t.offset>=n){Ine(t,e,r);return}let s=JFe(t,t.buffer[t.offset++]);if(s===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=i),Ine(t,e,r);return}e[r]=s,r++}return e}function JFe(t,e){switch(e){case 36:return uGt(t);case 43:return HFe(t);case 42:return dGt(t);case 58:return aGt(t);case 45:return cGt(t);default:return lGt(t,e)}}function pGt(){if(Vl.length>50*1024)if(z9===1||xne>z9*2){let t=Math.floor(Vl.length/10),e=t<Jo?Jo:t;Jo=0,Vl=Vl.slice(e,Vl.length)}else xne++,z9--;else clearInterval(iP),z9=0,xne=0,iP=null}function fGt(t){if(Vl.length<t+Jo){let e=t>78643200?2:3;Jo>1024*1024*111&&(Jo=1024*1024*50),Vl=kne.allocUnsafe(t*e+Jo),Jo=0,z9++,iP===null&&(iP=setInterval(pGt,50))}}function hGt(t){let e=t.bufferCache,r=t.offset;var n=e.length,i=t.bigStrSize-t.totalChunkSize;if(t.offset=i,i<=2){if(n===2)return e[0].toString("utf8",r,e[0].length+i-2);n--,i=e[e.length-2].length+i}for(var s=One.write(e[0].slice(r)),o=1;o<n-1;o++)s+=One.write(e[o]);return s+=One.end(e[o].slice(0,i-2)),s}function mGt(t){let e=t.bufferCache,r=t.offset,n=t.bigStrSize-r-2;var i=e.length,s=t.bigStrSize-t.totalChunkSize;if(t.offset=s,s<=2){if(i===2)return e[0].slice(r,e[0].length+s-2);i--,s=e[e.length-2].length+s}fGt(n);let o=Jo;e[0].copy(Vl,o,r,e[0].length),Jo+=e[0].length-r;for(var a=1;a<i-1;a++)e[a].copy(Vl,Jo),Jo+=e[a].length;return e[a].copy(Vl,Jo,0,s-2),Jo+=s-2,Vl.slice(o,Jo)}var Dne=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let n=this.buffer.length,i=n-this.offset,s=kne.allocUnsafe(i+e.length);if(this.buffer.copy(s,0,this.offset,n),e.copy(s,i,0,e.length),this.buffer=s,this.offset=0,this.arrayCache.length){let o=Rne(this);if(o===void 0)return;this.returnReply(o)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?mGt(this):hGt(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=Rne(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let n=this.offset,i=this.buffer[this.offset++],s=JFe(this,i);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}i===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};YFe.exports=Dne});var ZFe=m((JIr,XFe)=>{"use strict";XFe.exports=QFe()});var eBe=m(Nne=>{"use strict";Object.defineProperty(Nne,"__esModule",{value:!0});var Pne=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,r){this.set[Mne(e)][r]=!0}del(e,r){delete this.set[Mne(e)][r]}channels(e){return Object.keys(this.set[Mne(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};Nne.default=Pne;function Mne(t){return t==="unsubscribe"?"subscribe":t==="punsubscribe"?"psubscribe":t==="sunsubscribe"?"ssubscribe":t}});var iBe=m(Bne=>{"use strict";Object.defineProperty(Bne,"__esModule",{value:!0});var tBe=Mf(),yGt=ss(),gGt=ZFe(),EGt=eBe(),bGt=(0,yGt.Debug)("dataHandler"),Fne=class{constructor(e,r){this.redis=e;let n=new gGt({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:i=>{this.returnError(i)},returnFatalError:i=>{this.returnFatalError(i)},returnReply:i=>{this.returnReply(i)}});e.stream.prependListener("data",i=>{n.execute(i)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let r=this.shiftCommand(e);if(r){if(e.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&e.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(e,r)}}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let r=this.shiftCommand(e);r&&(tBe.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new EGt.default,this.redis.condition.subscriber.add(r.command.name,e[1].toString()),rBe(r.command,e[2])||this.redis.commandQueue.unshift(r)):tBe.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?nBe(r.command,e[2])||this.redis.commandQueue.unshift(r):r.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(e)?e[0].toString():null;switch(bGt('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let n=e[1].toString();this.redis.condition.subscriber.add(r,n);let i=this.shiftCommand(e);if(!i)return;rBe(i.command,e[2])||this.redis.commandQueue.unshift(i);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(r,n);let i=e[2];Number(i)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(e);if(!s)return;nBe(s.command,i)||this.redis.commandQueue.unshift(s);break}default:{let n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let r=e.toString();if(r==="OK")return!1;let n=r.indexOf(" "),i=r.slice(0,n),s=r.indexOf('"'),o=r.slice(s+1,-1).split('" "').map(u=>u.replace(/\\"/g,'"')),a=r.slice(n+2,s-2).split(" ");return this.redis.emit("monitor",i,o,a[1],a[0]),!0}shiftCommand(e){let r=this.redis.commandQueue.shift();if(!r){let n="Command queue state error. If you can reproduce this, please report it.",i=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",i),null}return r}};Bne.default=Fne;var om=new WeakMap;function rBe(t,e){let r=om.has(t)?om.get(t):t.args.length;return r-=1,r<=0?(t.resolve(e),om.delete(t),!0):(om.set(t,r),!1)}function nBe(t,e){let r=om.has(t)?om.get(t):t.args.length;return r===0?Number(e)===0?(om.delete(t),t.resolve(e),!0):!1:(r-=1,r<=0?(t.resolve(e),!0):(om.set(t,r),!1))}});var sBe=m(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.readyHandler=Ic.errorHandler=Ic.closeHandler=Ic.connectHandler=void 0;var _Gt=gg(),vGt=Mf(),SGt=VFe(),zd=ss(),wGt=iBe(),Ws=(0,zd.Debug)("connection");function AGt(t){return function(){var e;t.setStatus("connect"),t.resetCommandQueue();let r=!1,{connectionEpoch:n}=t;t.condition.auth&&t.auth(t.condition.auth,function(s){n===t.connectionEpoch&&s&&(s.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):s.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):s.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,t.recoverFromFatalError(s,s)))}),t.condition.select&&t.select(t.condition.select).catch(s=>{t.silentEmit("error",s)}),new wGt.default(t,{stringNumbers:t.options.stringNumbers});let i=[];t.options.connectionName&&(Ws("set the connection name [%s]",t.options.connectionName),i.push(t.client("setname",t.options.connectionName).catch(zd.noop))),t.options.disableClientInfo||(Ws("set the client info"),i.push((0,zd.getPackageMeta)().then(s=>t.client("SETINFO","LIB-VER",s.version).catch(zd.noop)).catch(zd.noop)),i.push(t.client("SETINFO","LIB-NAME",!((e=t.options)===null||e===void 0)&&e.clientInfoTag?`ioredis(${t.options.clientInfoTag})`:"ioredis").catch(zd.noop))),Promise.all(i).catch(zd.noop).finally(()=>{t.options.enableReadyCheck||Ic.readyHandler(t)(),t.options.enableReadyCheck&&t._readyCheck(function(s,o){n===t.connectionEpoch&&(s?r||t.recoverFromFatalError(new Error("Ready check failed: "+s.message),s):t.connector.check(o)?Ic.readyHandler(t)():t.disconnect(!0))})})}}Ic.connectHandler=AGt;function qne(t){let e=new _Gt.AbortError("Command aborted due to connection close");return e.command={name:t.name,args:t.args},e}function CGt(t){var e;let r=0;for(let n=0;n<t.length;){let i=(e=t.peekAt(n))===null||e===void 0?void 0:e.command,s=i.pipelineIndex;if((s===void 0||s===0)&&(r=0),s!==void 0&&s!==r++){t.remove(n,1),i.reject(qne(i));continue}n++}}function TGt(t){var e;for(let r=0;r<t.length;){let n=(e=t.peekAt(r))===null||e===void 0?void 0:e.command;if(n.name==="multi")break;if(n.name==="exec"){t.remove(r,1),n.reject(qne(n));break}n.inTransaction?(t.remove(r,1),n.reject(qne(n))):r++}}function OGt(t){return function(){let r=t.status;if(t.setStatus("close"),t.commandQueue.length&&CGt(t.commandQueue),t.offlineQueue.length&&TGt(t.offlineQueue),r==="ready"&&(t.prevCondition||(t.prevCondition=t.condition),t.commandQueue.length&&(t.prevCommandQueue=t.commandQueue)),t.manuallyClosing)return t.manuallyClosing=!1,Ws("skip reconnecting since the connection is manually closed."),e();if(typeof t.options.retryStrategy!="function")return Ws("skip reconnecting because `retryStrategy` is not a function"),e();let n=t.options.retryStrategy(++t.retryAttempts);if(typeof n!="number")return Ws("skip reconnecting because `retryStrategy` doesn't return a number"),e();Ws("reconnect in %sms",n),t.setStatus("reconnecting",n),t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect().catch(zd.noop)},n);let{maxRetriesPerRequest:i}=t.options;typeof i=="number"&&(i<0?Ws("maxRetriesPerRequest is negative, ignoring..."):t.retryAttempts%(i+1)===0&&(Ws("reach maxRetriesPerRequest limitation, flushing command queue..."),t.flushQueue(new SGt.MaxRetriesPerRequestError(i))))};function e(){t.setStatus("end"),t.flushQueue(new Error(zd.CONNECTION_CLOSED_ERROR_MSG))}}Ic.closeHandler=OGt;function xGt(t){return function(e){Ws("error: %s",e),t.silentEmit("error",e)}}Ic.errorHandler=xGt;function IGt(t){return function(){if(t.setStatus("ready"),t.retryAttempts=0,t.options.monitor){t.call("monitor").then(()=>t.setStatus("monitoring"),n=>t.emit("error",n));let{sendCommand:r}=t;t.sendCommand=function(n){return vGt.default.checkFlag("VALID_IN_MONITOR_MODE",n.name)?r.call(t,n):(n.reject(new Error("Connection is in monitoring mode, can't process commands.")),n.promise)},t.once("close",function(){delete t.sendCommand});return}let e=t.prevCondition?t.prevCondition.select:t.condition.select;if(t.options.readOnly&&(Ws("set the connection to readonly mode"),t.readonly().catch(zd.noop)),t.prevCondition){let r=t.prevCondition;if(t.prevCondition=null,r.subscriber&&t.options.autoResubscribe){t.condition.select!==e&&(Ws("connect to db [%d]",e),t.select(e));let n=r.subscriber.channels("subscribe");n.length&&(Ws("subscribe %d channels",n.length),t.subscribe(n));let i=r.subscriber.channels("psubscribe");i.length&&(Ws("psubscribe %d channels",i.length),t.psubscribe(i));let s=r.subscriber.channels("ssubscribe");if(s.length){Ws("ssubscribe %s",s.length);for(let o of s)t.ssubscribe(o)}}}if(t.prevCommandQueue)if(t.options.autoResendUnfulfilledCommands)for(Ws("resend %d unfulfilled commands",t.prevCommandQueue.length);t.prevCommandQueue.length>0;){let r=t.prevCommandQueue.shift();r.select!==t.condition.select&&r.command.name!=="select"&&t.select(r.select),t.sendCommand(r.command,r.stream)}else t.prevCommandQueue=null;if(t.offlineQueue.length){Ws("send %d commands in offline queue",t.offlineQueue.length);let r=t.offlineQueue;for(t.resetOfflineQueue();r.length>0;){let n=r.shift();n.select!==t.condition.select&&n.command.name!=="select"&&t.select(n.select),t.sendCommand(n.command,n.stream)}}t.condition.select!==e&&(Ws("connect to db [%d]",e),t.select(e))}}Ic.readyHandler=IGt});var oBe=m(sP=>{"use strict";Object.defineProperty(sP,"__esModule",{value:!0});sP.DEFAULT_REDIS_OPTIONS=void 0;sP.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(t){return Math.min(t*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(t){return Math.min(t*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var sm=m(jne=>{"use strict";Object.defineProperty(jne,"__esModule",{value:!0});var aBe=a_(),cBe=require("events"),Lne=tm(),RGt=mne(),W9=Mf(),DGt=KFe(),kGt=rP(),am=sBe(),MGt=oBe(),PGt=HM(),NGt=Xre(),_g=ss(),FGt=ene(),BGt=WM(),um=jM(),uBe=XM(),cm=(0,_g.Debug)("redis"),lm=class t extends BGt.default{constructor(e,r,n){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,r,n),cBe.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let i=new kGt.default(this.options);i.emitter=this,this.connector=i}else this.connector=new DGt.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,s])=>{this.defineCommand(i,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(um.noop)}static createClient(...e){return new t(...e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}connect(e){let r=new Promise((n,i)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){i(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let o=this;(0,Lne.default)(this.connector.connect(function(a,u){o.silentEmit(a,u)}),function(a,u){if(a){o.flushQueue(a),o.silentEmit("error",a),i(a),o.setStatus("end");return}let c=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(c="connect"),o.stream=u,s.noDelay&&u.setNoDelay(!0),typeof s.keepAlive=="number"&&(u.connecting?u.once(c,()=>{u.setKeepAlive(!0,s.keepAlive)}):u.setKeepAlive(!0,s.keepAlive)),u.connecting){if(u.once(c,am.connectHandler(o)),s.connectTimeout){let p=!1;u.setTimeout(s.connectTimeout,function(){if(p)return;u.setTimeout(0),u.destroy();let f=new Error("connect ETIMEDOUT");f.errorno="ETIMEDOUT",f.code="ETIMEDOUT",f.syscall="connect",am.errorHandler(o)(f)}),u.once(c,function(){p=!0,u.setTimeout(0)})}}else if(u.destroyed){let p=o.connector.firstError;p&&process.nextTick(()=>{am.errorHandler(o)(p)}),process.nextTick(am.closeHandler(o))}else process.nextTick(am.connectHandler(o));u.destroyed||(u.once("error",am.errorHandler(o)),u.once("close",am.closeHandler(o)));let l=function(){o.removeListener("close",d),n()};var d=function(){o.removeListener("ready",l),i(new Error(_g.CONNECTION_CLOSED_ERROR_MSG))};o.once("ready",l),o.once("close",d)})});return(0,Lne.default)(r,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?am.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new t({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,Lne.default)(new Promise(function(n,i){r.once("error",i),r.once("monitoring",function(){n(r)})}),e)}sendCommand(e,r){var n,i;if(this.status==="wait"&&this.connect().catch(um.noop),this.status==="end")return e.reject(new Error(_g.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((n=this.condition)===null||n===void 0)&&n.subscriber&&!W9.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let s=this.status==="ready"||!r&&this.status==="connect"&&(0,aBe.exists)(e.name)&&((0,aBe.hasFlag)(e.name,"loading")||W9.default.checkFlag("HANDSHAKE_COMMANDS",e.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)cm.enabled&&cm("write command[%s]: %d -> %s(%o)",this._getDescription(),(i=this.condition)===null||i===void 0?void 0:i.select,e.name,e.args),r?"isPipeline"in r&&r.isPipeline?r.write(e.toWritable(r.destination.redis.stream)):r.write(e.toWritable(r)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:r,select:this.condition.select}),W9.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;cm.enabled&&cm("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:r,select:this.condition.select})}if(e.name==="select"&&(0,_g.isInt)(e.args[0])){let o=parseInt(e.args[0],10);this.condition.select!==o&&(this.condition.select=o,this.emit("select",o),cm("switch to db [%d]",this.condition.select))}return e.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}silentEmit(e,r){let n;if(!(e==="error"&&(n=r,this.status==="end"||this.manuallyClosing&&n instanceof Error&&(n.message===_g.CONNECTION_CLOSED_ERROR_MSG||n.syscall==="connect"||n.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,r,n){this.flushQueue(r,n),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(e,r){var n;let i=!1;switch(this.options.reconnectOnError&&!W9.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(i=this.options.reconnectOnError(e)),i){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((n=this.condition)===null||n===void 0?void 0:n.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new uBe}resetOfflineQueue(){this.offlineQueue=new uBe}parseOptions(...e){let r={},n=!1;for(let i=0;i<e.length;++i){let s=e[i];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,um.defaults)(r,s);else if(typeof s=="string")(0,um.defaults)(r,(0,_g.parseURL)(s)),s.startsWith("rediss://")&&(n=!0);else if(typeof s=="number")r.port=s;else throw new Error("Invalid argument "+s)}n&&(0,um.defaults)(r,{tls:!0}),(0,um.defaults)(r,t.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,_g.resolveTLSProfile)(r)}setStatus(e,r){cm.enabled&&cm("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,r))}createScanStream(e,{key:r,options:n={}}){return new PGt.default({objectMode:!0,key:r,redis:this,command:e,...n})}flushQueue(e,r){r=(0,um.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let n;if(r.offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){let r=this;this.info(function(n,i){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if(typeof i!="string")return e(null,i);let s={},o=i.split(`\r
`);for(let a=0;a<o.length;++a){let[u,...c]=o[a].split(":"),l=c.join(":");l&&(s[u]=l)}if(!s.loading||s.loading==="0")e(null,s);else{let a=(s.loading_eta_seconds||1)*1e3,u=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<a?r.options.maxLoadingRetryTime:a;cm("Redis server still loading, trying again in "+u+"ms"),setTimeout(function(){r._readyCheck(e)},u)}}).catch(um.noop)}};lm.Cluster=RGt.default;lm.Command=W9.default;lm.defaultOptions=MGt.DEFAULT_REDIS_OPTIONS;(0,FGt.default)(lm,cBe.EventEmitter);(0,NGt.addTransactionSupport)(lm.prototype);jne.default=lm});var oP=m((bn,dBe)=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.print=bn.ReplyError=bn.SentinelIterator=bn.SentinelConnector=bn.AbstractConnector=bn.Pipeline=bn.ScanStream=bn.Command=bn.Cluster=bn.Redis=bn.default=void 0;bn=dBe.exports=sm().default;var qGt=sm();Object.defineProperty(bn,"default",{enumerable:!0,get:function(){return qGt.default}});var LGt=sm();Object.defineProperty(bn,"Redis",{enumerable:!0,get:function(){return LGt.default}});var jGt=mne();Object.defineProperty(bn,"Cluster",{enumerable:!0,get:function(){return jGt.default}});var $Gt=Mf();Object.defineProperty(bn,"Command",{enumerable:!0,get:function(){return $Gt.default}});var KGt=HM();Object.defineProperty(bn,"ScanStream",{enumerable:!0,get:function(){return KGt.default}});var UGt=Jre();Object.defineProperty(bn,"Pipeline",{enumerable:!0,get:function(){return UGt.default}});var VGt=eP();Object.defineProperty(bn,"AbstractConnector",{enumerable:!0,get:function(){return VGt.default}});var lBe=rP();Object.defineProperty(bn,"SentinelConnector",{enumerable:!0,get:function(){return lBe.default}});Object.defineProperty(bn,"SentinelIterator",{enumerable:!0,get:function(){return lBe.SentinelIterator}});bn.ReplyError=gg().ReplyError;Object.defineProperty(bn,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(t){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function GGt(t,e){console.log(t?"Error: "+t:"Reply: "+e)}bn.print=GGt});var pBe,$ne,Yo,Kne=le(()=>{"use strict";pBe=Dt(oP());$ne=new pBe.default({host:"127.0.0.1",port:6379});$ne.on("connect",()=>console.log("\u2705 Redis connected"));$ne.on("error",t=>console.error("Redis error:",t));Yo=$ne});var hBe,mBe,fBe,Une,vg,yBe=le(()=>{"use strict";nQ();E5e();hBe=Dt(Ym());Sy();lw();iPe();mBe=Dt(bNe());Kne();fBe=[(0,hBe.injectable)()];vg=class{constructor(){this.config={auth:{clientId:_s.AZURE_CLIENT_ID,clientSecret:_s.AZURE_CLIENT_SECRETE,authority:_s.AZURE_CLIENT_AUTHORITY}}}getCacheKey(e){return`user:${e}`}mapUserToDTO(e){return{userId:String(e.userId),plan:e.plan,lengthOfDocs:e.lengthOfDocs,email:e.email}}async deleteUserFromEntraId(e){try{if(!e)throw new Error("Valid userId is required");let n=await new x9(this.config).acquireTokenByClientCredential({scopes:["https://graph.microsoft.com/.default"]});if(!n?.accessToken)throw Ge.error("Failed to acquire Graph token for Entra ID deletion",{userId:e}),new Error("Failed to acquire Graph token");return await mBe.Client.init({authProvider:s=>s(null,n.accessToken)}).api(`/users/${e}`).delete(),Ge.info("User deleted successfully from Entra ID",{userId:e}),!0}catch(r){if(r.statusCode===404)return Ge.warn("User not found in Entra ID for deletion",{userId:e}),!1;throw Ge.error("Failed to delete user from Entra ID",{userId:e,error:r}),new Error("Failed to delete user from Entra ID")}}async deleteUser(e){try{let r=await VE.findOne({userId:e});if(!r)return Ge.warn("User not found for deletion",{userId:e}),null;let n=r.email;return(await VE.deleteOne({userId:e}).exec()).deletedCount===0?(Ge.warn("User not found for deletion",{userId:e}),null):(await Yo.del(this.getCacheKey(e)),Ge.info("User deleted successfully",{userId:e}),n)}catch(r){throw Ge.error("Error deleting user",{userId:e,error:r}),new Error(`Failed to delete user: ${r instanceof Error?r.message:"Unknown error"}`)}}async updateUser(e,r,n,i){try{let s=n?{$inc:{[r]:-1},$set:{updatedAt:new Date}}:{$set:{[r]:i,updatedAt:new Date}};Ge.info("Updating User DB",{searchingFor:e,fieldToUpdate:r});let o=await VE.findOneAndUpdate({userId:e},s,{new:!0,projection:{__v:0}}).exec();if(!o)return Ge.warn(`User not found or ${r} not updated`,{userId:e}),!1;let a=this.mapUserToDTO(o),u=this.getCacheKey(e);return await Yo.set(u,JSON.stringify(a),"EX",3600),Ge.info(`${r} ${n?"decremented":"updated"} successfully`,{userId:e,property:r,value:n?1:i}),!0}catch(s){throw Ge.error(`Error updating ${r}`,{userId:e,property:r,error:s}),new Error(`Failed to update ${r}: ${s instanceof Error?s.message:"Unknown error"}`)}}async checkIfUserExist(e){let r=e.userId,n=this.getCacheKey(r);try{let o=await Yo.get(n);if(o)return Ge.info("Serving user from Redis Cache",{userId:r}),JSON.parse(o)}catch(o){Ge.error("Redis get error",{error:o})}Ge.info("User not in cache, fetching from DB",{userId:r});let i=await VE.findOne({userId:r}).select("-__v").lean().exec();if(!i)return null;let s=this.mapUserToDTO(i);return Ge.info("user from db",{user:{id:i.userId,email:i.email}}),Yo.set(n,JSON.stringify(s),"EX",3600).catch(o=>{Ge.error("Failed to set cache",{error:o})}),s}async createUserFromToken(e){let r=e.userId,n=e.email,i=e.username;await VE.create({userId:r,email:n,username:i})}async archiveUser(e){try{await II.create({email:e,deletedAt:new Date}),Ge.info("User archived to DeletedUsers collection",{email:e})}catch(r){Ge.error("Failed to archive user",{email:e,error:r})}}async checkUserEligibility(e){let r=e.email,n=await II.findOne({email:r});if(!n)return;let i=new Date,s=n.deletedAt;if(i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear())throw await this.deleteUserFromEntraId(e.userId),Ge.warn("User attempted to re-register in the same month as deletion",{email:r}),new Error("You cannot re-register in the same month you deleted your account.");await II.deleteOne({email:r}).exec(),Ge.info("User removed from DeletedUsers list (eligible for re-registration)",{email:r})}};Une=d1(null),vg=f1(Une,0,"UserService",fBe,vg),p1(Une,1,vg)});var E_,Vne,HGt,Gne,Rc,gBe=le(()=>{"use strict";E_=Dt(KE());Vne=new E_.Schema({max:{type:Number,default:0},min:{type:Number,default:0},current:{type:Number,default:0}},{_id:!1}),HGt=new E_.Schema({premium:{type:Vne},standard:{type:Vne},free:{type:Vne}},{_id:!1}),Gne=new E_.Schema({userId:{type:String,required:[!0,"User ID is required"]},docId:{type:String,required:[!0,"Document ID is required"]},chatBotPrompt:{type:HGt,default:()=>({premium:{max:20,min:0,current:20},standard:{max:10,min:0,current:10},free:{max:5,min:0,current:5}})},title:{type:String,default:""},sender:{type:String,default:""},receivedDate:{type:Date},summary:{type:String,default:""},translatedText:{type:String,default:""},pdfBlobStorage:{type:Boolean,required:!0},targetLanguage:{type:String,default:""},structuredTranslatedText:{type:Map,of:String,default:{}},actionPlan:{type:[{title:String,reason:String}],default:[]},actionPlans:{type:[{id:{type:String,required:[!0,"Action Plan ID is required"]},title:{type:String,default:""},dueDate:{type:Date},completed:{type:Boolean,default:!1},location:{type:String,default:""}}],default:[],_id:!1}},{timestamps:!0});Gne.index({userId:1,createdAt:1});Gne.index({userId:1,docId:1},{unique:!0});Rc=(0,E_.model)("Document",Gne)});function EBe(t,e=0){return(Js[t[e+0]]+Js[t[e+1]]+Js[t[e+2]]+Js[t[e+3]]+"-"+Js[t[e+4]]+Js[t[e+5]]+"-"+Js[t[e+6]]+Js[t[e+7]]+"-"+Js[t[e+8]]+Js[t[e+9]]+"-"+Js[t[e+10]]+Js[t[e+11]]+Js[t[e+12]]+Js[t[e+13]]+Js[t[e+14]]+Js[t[e+15]]).toLowerCase()}var Js,bBe=le(()=>{Js=[];for(let t=0;t<256;++t)Js.push((t+256).toString(16).slice(1))});function Hne(){return aP>uP.length-16&&((0,_Be.randomFillSync)(uP),aP=0),uP.slice(aP,aP+=16)}var _Be,uP,aP,vBe=le(()=>{_Be=require("crypto"),uP=new Uint8Array(256),aP=uP.length});var SBe,zne,wBe=le(()=>{SBe=require("crypto"),zne={randomUUID:SBe.randomUUID}});function zGt(t,e,r){if(zne.randomUUID&&!e&&!t)return zne.randomUUID();t=t||{};let n=t.random??t.rng?.()??Hne();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return EBe(n)}var Sg,ABe=le(()=>{wBe();vBe();bBe();Sg=zGt});var cP=le(()=>{ABe()});var TBe,CBe,Wne,wg,OBe=le(()=>{"use strict";gBe();TBe=Dt(Ym());cP();Sy();CBe=[(0,TBe.injectable)()];wg=class{async deleteAllDocuments(e){try{let r=await Rc.deleteMany({userId:e}).exec();return r.deletedCount===0&&Ge.info("No documents found for deletion",{userId:e}),Ge.info("All documents deleted successfully",{userId:e,deletedCount:r.deletedCount}),!0}catch(r){throw Ge.error("Failed to delete all documents",{userId:e,error:r}),new Error(`Failed to delete all documents: ${r instanceof Error?r.message:"Unknown error"}`)}}async getAllDocumentsByUserId(e,r,n){if(!e.userId)throw new Error("Valid userId is required");let i=e.userId,s=await Rc.countDocuments({userId:i}),o=await Rc.find({userId:i}).sort({createdAt:1}).select("-__v").limit(r).skip(n).lean().exec();return{total:s,documents:o}}async createDocumentByUserId(e){try{if(!e||!e.userId||!e.docId)throw new Error("Valid document data is required");let r=await Rc.create(e),n=await Rc.findById(r._id).select("-__v").lean().exec();if(!n)throw new Error("Failed to retrieve created document");return n}catch(r){throw Ge.error("Failed to create document",{error:r}),new Error(`Failed to create document: ${r}`)}}async getDocument(e,r){if(!e.userId||!r)throw new Error("Valid userId and docId are required");let n=await Rc.findOne({userId:e.userId,docId:r}).select("-__v").exec();return n||null}async deleteDocument(e,r){try{if(!e||!r)throw new Error("Valid userId and docId are required");return(await Rc.deleteOne({userId:e,docId:r}).exec()).deletedCount===0?(Ge.info("Document not found for deletion",{userId:e,docId:r}),!1):(Ge.info("Document deleted successfully",{userId:e,docId:r}),!0)}catch(n){throw Ge.error("Failed to delete document",{userId:e,docId:r,error:n}),new Error(`Failed to delete document: ${n instanceof Error?n.message:n}`)}}async updateDocument(e,r,n){try{if(!e||!r)throw new Error("Valid userId and docId are required");if(!n||Object.keys(n).length===0)throw new Error("Valid update data is required");let i="$inc"in n?{...n,$set:{updatedAt:new Date}}:{$set:{...n,updatedAt:new Date}},s=await Rc.findOneAndUpdate({userId:e,docId:r},i,{new:!0,runValidators:!0,select:"-__v"}).lean().exec();return s||(Ge.info("Document not found for update",{userId:e,docId:r}),null)}catch(i){throw Ge.error("Failed to update document",{userId:e,docId:r,updates:n,error:i}),new Error(`Failed to update document: ${i instanceof Error?i.message:i}`)}}async updateActionPlan(e,r,n,i,s){try{if(!e||!r)throw new Error("Valid userId and docId are required");let o={},a={};if(n==="create"){if(!i||!i.title)throw new Error("Title is required for creating an action plan");o={$push:{actionPlans:{id:Sg(),title:i.title,dueDate:i.dueDate?new Date(i.dueDate):new Date,completed:!1,location:i.location??""}},$set:{updatedAt:new Date}}}else if(n==="delete"){if(!s)throw new Error("Action plan ID is required for deletion");if(!await Rc.findOne({userId:e,docId:r,"actionPlans.id":s}).exec())return Ge.info("Document or action plan not found for deletion",{userId:e,docId:r,actionPlanId:s}),null;o={$pull:{actionPlans:{id:s}},$set:{updatedAt:new Date}}}else if(n==="update"){if(!s)throw new Error("Action plan ID is required for update");if(!await Rc.findOne({userId:e,docId:r,"actionPlans.id":s}).exec())return Ge.info("Document or action plan not found for update",{userId:e,docId:r,actionPlanId:s}),null;if(!i||!i.title&&!i.dueDate&&i.completed===void 0&&!i.location)throw new Error("At least one field (title, dueDate, completed, location) must be provided for update");let l={};i.title&&(l["actionPlans.$[elem].title"]=i.title),i.dueDate&&(l["actionPlans.$[elem].dueDate"]=new Date(i.dueDate)),i.completed!==void 0&&(l["actionPlans.$[elem].completed"]=i.completed),i.location&&(l["actionPlans.$[elem].location"]=i.location),l.updatedAt=new Date,o={$set:l},a={arrayFilters:[{"elem.id":s}]}}else throw new Error('Invalid action type. Must be "create", "delete", or "update"');let u=await Rc.findOneAndUpdate({userId:e,docId:r},o,{new:!0,runValidators:!0,select:"-__v",...a}).lean().exec();return u?(Ge.info("Action plan updated successfully",{userId:e,docId:r,action:n}),u):(Ge.info("Document not found for action plan update",{userId:e,docId:r,action:n}),null)}catch(o){throw Ge.error("Failed to update action plan",{error:o}),new Error(`Failed to update action plan: ${o instanceof Error?o.message:o}`)}}};Wne=d1(null),wg=f1(Wne,0,"DocumentService",CBe,wg),p1(Wne,1,wg)});var lP,xBe,b_,IBe=le(()=>{"use strict";lP=Dt(KE());xBe=new lP.Schema({userId:{type:String,required:[!0,"User ID is required"]},docId:{type:String,required:[!0,"Document ID is required"]},translatedText:{type:String,default:""},chats:{type:[{userPrompt:{type:String,required:[!0,"Prompt is required"]},response:{type:String,required:[!0,"Response is required"]},time:{type:Date,default:Date.now}}],default:[],_id:!1}},{timestamps:!0});xBe.index({userId:1,docId:1},{unique:!0});b_=(0,lP.model)("ChatBotHistory",xBe)});var DBe,RBe,Jne,Ag,kBe=le(()=>{"use strict";IBe();DBe=Dt(Ym());Sy();RBe=[(0,DBe.injectable)()];Ag=class{async getDocumentChatBotCollection(e,r){try{if(!e||!r)throw new Error("User ID and Document ID are required");return await b_.findOne({userId:e,docId:r}).select("-__v").lean().exec()}catch(n){throw Ge.error("Failed to retrieve chat history collection",{error:n,userId:e,docId:r}),new Error(`Failed to retrieve chat history collection: ${n}`)}}async updateDocumentChatBotHistory(e,r,n){try{if(!e||!r||!n||!n.userPrompt||!n.response)throw new Error("User ID, Document ID, and valid chat data are required");if((await b_.updateOne({userId:e,docId:r},{$push:{chats:n}}).exec()).matchedCount===0)throw new Error("Chat history collection not found for update");Ge.info("Chat history collection updated successfully",{userId:e,docId:r})}catch(i){throw Ge.error("Failed to update chat history collection",{error:i,userId:e,docId:r}),new Error(`Failed to update chat history collection: ${i}`)}}async createChatHistory(e){try{if(!e||!e.userId||!e.docId)throw new Error("Valid chat history data is required");return(await b_.create(e)).toObject()}catch(r){throw r.code===11e3?(Ge.error("Chat history already exists for this document",{userId:e.userId,docId:e.docId}),new Error("Chat history already exists for this document")):(Ge.error("Failed to create chat history collection",{error:r}),new Error(`Failed to create chat history collection: ${r}`))}}async deleteChatHistoryByUserId(e){try{if(!e)throw new Error("User ID is required");return await b_.deleteMany({userId:e}).exec(),Ge.info("Chat history deleted successfully",{userId:e}),!0}catch(r){throw Ge.error("Failed to delete chat history",{error:r,userId:e}),new Error(`Failed to delete chat history: ${r}`)}}async deleteChatHistoryByDocument(e,r){try{if(!e||!r)throw new Error("User ID is required");return(await b_.deleteOne({userId:e,docId:r}).exec()).deletedCount===0&&Ge.info("No chat history found for user",{userId:e,docId:r}),Ge.info("Chat history deleted successfully",{userId:e,docId:r}),!0}catch(n){throw Ge.error("Failed to delete chat history",{error:n,userId:e}),new Error(`Failed to delete chat history: ${n}`)}}};Jne=d1(null),Ag=f1(Jne,0,"ChatBotService",RBe,Ag),p1(Jne,1,Ag)});var FBe=m(Yne=>{var MBe=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g,WGt=/^[\u0020-\u007e\u0080-\u00ff]+$/,NBe=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/,JGt=/\\([\u0000-\u007f])/g,YGt=/([\\"])/g,QGt=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,PBe=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,XGt=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;Yne.format=ZGt;Yne.parse=eHt;function ZGt(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,r=t.subtype,n=t.suffix,i=t.type;if(!i||!PBe.test(i))throw new TypeError("invalid type");if(!r||!QGt.test(r))throw new TypeError("invalid subtype");var s=i+"/"+r;if(n){if(!PBe.test(n))throw new TypeError("invalid suffix");s+="+"+n}if(e&&typeof e=="object")for(var o,a=Object.keys(e).sort(),u=0;u<a.length;u++){if(o=a[u],!NBe.test(o))throw new TypeError("invalid parameter name");s+="; "+o+"="+rHt(e[o])}return s}function eHt(t){if(!t)throw new TypeError("argument string is required");if(typeof t=="object"&&(t=tHt(t)),typeof t!="string")throw new TypeError("argument string is required to be a string");var e=t.indexOf(";"),r=e!==-1?t.substr(0,e):t,n,i,s=nHt(r),o={},a;for(MBe.lastIndex=e;i=MBe.exec(t);){if(i.index!==e)throw new TypeError("invalid parameter format");e+=i[0].length,n=i[1].toLowerCase(),a=i[2],a[0]==='"'&&(a=a.substr(1,a.length-2).replace(JGt,"$1")),o[n]=a}if(e!==-1&&e!==t.length)throw new TypeError("invalid parameter format");return s.parameters=o,s}function tHt(t){if(typeof t.getHeader=="function")return t.getHeader("content-type");if(typeof t.headers=="object")return t.headers&&t.headers["content-type"]}function rHt(t){var e=String(t);if(NBe.test(e))return e;if(e.length>0&&!WGt.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(YGt,"\\$1")+'"'}function nHt(t){var e=XGt.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var r=e[1],n=e[2],i,s=n.lastIndexOf("+");s!==-1&&(i=n.substr(s+1),n=n.substr(0,s));var o={type:r,subtype:n,suffix:i};return o}});var BBe=m((NRr,iHt)=>{iHt.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var LBe=m((FRr,qBe)=>{qBe.exports=BBe()});var KBe=m(La=>{"use strict";var dP=LBe(),sHt=require("path").extname,jBe=/^\s*([^;\s]*)(?:;|\s|$)/,oHt=/^text\//i;La.charset=$Be;La.charsets={lookup:$Be};La.contentType=aHt;La.extension=uHt;La.extensions=Object.create(null);La.lookup=cHt;La.types=Object.create(null);lHt(La.extensions,La.types);function $Be(t){if(!t||typeof t!="string")return!1;var e=jBe.exec(t),r=e&&dP[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&oHt.test(e[1])?"UTF-8":!1}function aHt(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?La.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=La.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function uHt(t){if(!t||typeof t!="string")return!1;var e=jBe.exec(t),r=e&&La.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function cHt(t){if(!t||typeof t!="string")return!1;var e=sHt("x."+t).toLowerCase().substr(1);return e&&La.types[e]||!1}function lHt(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(dP).forEach(function(i){var s=dP[i],o=s.extensions;if(!(!o||!o.length)){t[i]=o;for(var a=0;a<o.length;a++){var u=o[a];if(e[u]){var c=r.indexOf(dP[e[u]].source),l=r.indexOf(s.source);if(e[u]!=="application/octet-stream"&&(c>l||c===l&&e[u].substr(0,12)==="application/"))continue}e[u]=i}}})}});var WBe=m((qRr,__)=>{"use strict";var UBe=FBe(),dHt=KBe();__.exports=pHt;__.exports.is=VBe;__.exports.hasBody=GBe;__.exports.normalize=HBe;__.exports.match=zBe;function VBe(t,e){var r,n=e,i=hHt(t);if(!i)return!1;if(n&&!Array.isArray(n))for(n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];if(!n||!n.length)return i;var s;for(r=0;r<n.length;r++)if(zBe(HBe(s=n[r]),i))return s[0]==="+"||s.indexOf("*")!==-1?i:s;return!1}function GBe(t){return t.headers["transfer-encoding"]!==void 0||!isNaN(t.headers["content-length"])}function pHt(t,e){var r=e;if(!GBe(t))return null;if(arguments.length>2){r=new Array(arguments.length-1);for(var n=0;n<r.length;n++)r[n]=arguments[n+1]}var i=t.headers["content-type"];return VBe(i,r)}function HBe(t){if(typeof t!="string")return!1;switch(t){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}return t[0]==="+"?"*/*"+t:t.indexOf("/")===-1?dHt.lookup(t):t}function zBe(t,e){if(t===!1)return!1;var r=e.split("/"),n=t.split("/");return r.length!==2||n.length!==2||n[0]!=="*"&&n[0]!==r[0]?!1:n[1].substr(0,2)==="*+"?n[1].length<=r[1].length+1&&n[1].substr(1)===r[1].substr(1-n[1].length):!(n[1]!=="*"&&n[1]!==r[1])}function fHt(t){var e=UBe.parse(t);return e.parameters=void 0,UBe.format(e)}function hHt(t){if(!t)return null;try{return fHt(t)}catch{return null}}});var pP=m((ZBe,eqe)=>{"use strict";function mHt(t){if(t.length===0)return;let e=Object.create(null),r=0;for(;r<t.length;++r){let o=t.charCodeAt(r);if(Cg[o]!==1){if(o!==47||r===0)return;break}}if(r===t.length)return;let n=t.slice(0,r).toLowerCase(),i=++r;for(;r<t.length;++r){let o=t.charCodeAt(r);if(Cg[o]!==1){if(r===i||yHt(t,r,e)===void 0)return;break}}if(r===i)return;let s=t.slice(i,r).toLowerCase();return{type:n,subtype:s,params:e}}function yHt(t,e,r){for(;e<t.length;){for(;e<t.length;++e){let a=t.charCodeAt(e);if(a!==32&&a!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let a=t.charCodeAt(e);if(a!==32&&a!==9)break}if(e===t.length)return;let n,i=e;for(;e<t.length;++e){let a=t.charCodeAt(e);if(Cg[a]!==1){if(a!==61)return;break}}if(e===t.length||(n=t.slice(i,e),++e,e===t.length))return;let s="",o;if(t.charCodeAt(e)===34){o=++e;let a=!1;for(;e<t.length;++e){let u=t.charCodeAt(e);if(u===92){a?(o=e,a=!1):(s+=t.slice(o,e),a=!0);continue}if(u===34){if(a){o=e,a=!1;continue}s+=t.slice(o,e);break}if(a&&(o=e-1,a=!1),XBe[u]!==1)return}if(e===t.length)return;++e}else{for(o=e;e<t.length;++e){let a=t.charCodeAt(e);if(Cg[a]!==1){if(e===o)return;break}}s=t.slice(o,e)}n=n.toLowerCase(),r[n]===void 0&&(r[n]=s)}return r}function gHt(t,e){if(t.length===0)return;let r=Object.create(null),n=0;for(;n<t.length;++n){let s=t.charCodeAt(n);if(Cg[s]!==1){if(EHt(t,n,r,e)===void 0)return;break}}return{type:t.slice(0,n).toLowerCase(),params:r}}function EHt(t,e,r,n){for(;e<t.length;){for(;e<t.length;++e){let c=t.charCodeAt(e);if(c!==32&&c!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let c=t.charCodeAt(e);if(c!==32&&c!==9)break}if(e===t.length)return;let i,s=e;for(;e<t.length;++e){let c=t.charCodeAt(e);if(Cg[c]!==1){if(c===61)break;return}}if(e===t.length)return;let o="",a,u;if(i=t.slice(s,e),i.charCodeAt(i.length-1)===42){let c=++e;for(;e<t.length;++e){let d=t.charCodeAt(e);if(_Ht[d]!==1){if(d!==39)return;break}}if(e===t.length)return;for(u=t.slice(c,e),++e;e<t.length&&t.charCodeAt(e)!==39;++e);if(e===t.length||(++e,e===t.length))return;a=e;let l=0;for(;e<t.length;++e){let d=t.charCodeAt(e);if(vHt[d]!==1){if(d===37){let p,f;if(e+2<t.length&&(p=JBe[t.charCodeAt(e+1)])!==-1&&(f=JBe[t.charCodeAt(e+2)])!==-1){let h=(p<<4)+f;o+=t.slice(a,e),o+=String.fromCharCode(h),e+=2,a=e+1,h>=128?l=2:l===0&&(l=1);continue}return}break}}if(o+=t.slice(a,e),o=QBe(o,u,l),o===void 0)return}else{if(++e,e===t.length)return;if(t.charCodeAt(e)===34){a=++e;let c=!1;for(;e<t.length;++e){let l=t.charCodeAt(e);if(l===92){c?(a=e,c=!1):(o+=t.slice(a,e),c=!0);continue}if(l===34){if(c){a=e,c=!1;continue}o+=t.slice(a,e);break}if(c&&(a=e-1,c=!1),XBe[l]!==1)return}if(e===t.length)return;++e}else{for(a=e;e<t.length;++e){let c=t.charCodeAt(e);if(Cg[c]!==1){if(e===a)return;break}}o=t.slice(a,e)}if(o=n(o,2),o===void 0)return}i=i.toLowerCase(),r[i]===void 0&&(r[i]=o)}return r}function YBe(t){let e;for(;;)switch(t){case"utf-8":case"utf8":return J9.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return J9.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return J9.utf16le;case"base64":return J9.base64;default:if(e===void 0){e=!0,t=t.toLowerCase();continue}return J9.other.bind(t)}}var J9={utf8:(t,e)=>{if(t.length===0)return"";if(typeof t=="string"){if(e<2)return t;t=Buffer.from(t,"latin1")}return t.utf8Slice(0,t.length)},latin1:(t,e)=>t.length===0?"":typeof t=="string"?t:t.latin1Slice(0,t.length),utf16le:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,"latin1")),t.ucs2Slice(0,t.length)),base64:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,"latin1")),t.base64Slice(0,t.length)),other:(t,e)=>{if(t.length===0)return"";typeof t=="string"&&(t=Buffer.from(t,"latin1"));try{return new TextDecoder(ZBe).decode(t)}catch{}}};function QBe(t,e,r){let n=YBe(e);if(n)return n(t,r)}function bHt(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;--e)switch(t.charCodeAt(e)){case 47:case 92:return t=t.slice(e+1),t===".."||t==="."?"":t}return t===".."||t==="."?"":t}var Cg=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],XBe=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],_Ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],vHt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],JBe=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];eqe.exports={basename:bHt,convertToUTF8:QBe,getDecoder:YBe,parseContentType:mHt,parseDisposition:gHt}});var iqe=m((LRr,nqe)=>{"use strict";function tqe(t,e,r,n,i){for(let s=0;s<i;++s)if(t[e+s]!==r[n+s])return!1;return!0}var Qne=class{constructor(e,r){if(typeof r!="function")throw new Error("Missing match callback");if(typeof e=="string")e=Buffer.from(e);else if(!Buffer.isBuffer(e))throw new Error(`Expected Buffer for needle, got ${typeof e}`);let n=e.length;if(this.maxMatches=1/0,this.matches=0,this._cb=r,this._lookbehindSize=0,this._needle=e,this._bufPos=0,this._lookbehind=Buffer.allocUnsafe(n),this._occ=[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n],n>1)for(let i=0;i<n-1;++i)this._occ[e[i]]=n-1-i}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(e,r){let n;Buffer.isBuffer(e)||(e=Buffer.from(e,"latin1"));let i=e.length;for(this._bufPos=r||0;n!==i&&this.matches<this.maxMatches;)n=SHt(this,e);return n}destroy(){let e=this._lookbehindSize;e&&this._cb(!1,this._lookbehind,0,e,!1),this.reset()}};function SHt(t,e){let r=e.length,n=t._needle,i=n.length,s=-t._lookbehindSize,o=i-1,a=n[o],u=r-i,c=t._occ,l=t._lookbehind;if(s<0){for(;s<0&&s<=u;){let p=s+o,f=p<0?l[t._lookbehindSize+p]:e[p];if(f===a&&rqe(t,e,s,o))return t._lookbehindSize=0,++t.matches,s>-t._lookbehindSize?t._cb(!0,l,0,t._lookbehindSize+s,!1):t._cb(!0,void 0,0,0,!0),t._bufPos=s+i;s+=c[f]}for(;s<0&&!rqe(t,e,s,r-s);)++s;if(s<0){let p=t._lookbehindSize+s;return p>0&&t._cb(!1,l,0,p,!1),t._lookbehindSize-=p,l.copy(l,0,p,t._lookbehindSize),l.set(e,t._lookbehindSize),t._lookbehindSize+=r,t._bufPos=r,r}t._cb(!1,l,0,t._lookbehindSize,!1),t._lookbehindSize=0}s+=t._bufPos;let d=n[0];for(;s<=u;){let p=e[s+o];if(p===a&&e[s]===d&&tqe(n,0,e,s,o))return++t.matches,s>0?t._cb(!0,e,t._bufPos,s,!0):t._cb(!0,void 0,0,0,!0),t._bufPos=s+i;s+=c[p]}for(;s<r;){if(e[s]!==d||!tqe(e,s,n,0,r-s)){++s;continue}e.copy(l,0,s,r),t._lookbehindSize=r-s;break}return s>0&&t._cb(!1,e,t._bufPos,s<r?s:r,!0),t._bufPos=r,r}function rqe(t,e,r,n){let i=t._lookbehind,s=t._lookbehindSize,o=t._needle;for(let a=0;a<n;++a,++r)if((r<0?i[s+r]:e[r])!==o[a])return!1;return!0}nqe.exports=Qne});var fqe=m((jRr,pqe)=>{"use strict";var{Readable:wHt,Writable:AHt}=require("stream"),CHt=iqe(),{basename:THt,convertToUTF8:sqe,getDecoder:OHt,parseContentType:xHt,parseDisposition:IHt}=pP(),RHt=Buffer.from(`\r
`),DHt=Buffer.from("\r"),kHt=Buffer.from("-");function oqe(){}var MHt=2e3,v_=16*1024,fP=0,aqe=1,uqe=2,Xne=class{constructor(e){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=fP,this.name="",this.value="",this.crlf=0,this.cb=e}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=fP,this.name="",this.value="",this.crlf=0}push(e,r,n){let i=r;for(;r<n;)switch(this.state){case fP:{let s=!1;for(;r<n;++r){if(this.byteCount===v_)return-1;++this.byteCount;let o=e[r];if(FHt[o]!==1){if(o!==58||(this.name+=e.latin1Slice(i,r),this.name.length===0))return-1;++r,s=!0,this.state=aqe;break}}if(!s){this.name+=e.latin1Slice(i,r);break}}case aqe:{let s=!1;for(;r<n;++r){if(this.byteCount===v_)return-1;++this.byteCount;let o=e[r];if(o!==32&&o!==9){i=r,s=!0,this.state=uqe;break}}if(!s)break}case uqe:switch(this.crlf){case 0:for(;r<n;++r){if(this.byteCount===v_)return-1;++this.byteCount;let s=e[r];if(BHt[s]!==1){if(s!==13)return-1;++this.crlf;break}}this.value+=e.latin1Slice(i,r++);break;case 1:if(this.byteCount===v_||(++this.byteCount,e[r++]!==10))return-1;++this.crlf;break;case 2:{if(this.byteCount===v_)return-1;++this.byteCount;let s=e[r];s===32||s===9?(i=r,this.crlf=0):(++this.pairCount<MHt&&(this.name=this.name.toLowerCase(),this.header[this.name]===void 0?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),s===13?(++this.crlf,++r):(i=r,this.crlf=0,this.state=fP,this.name="",this.value=""));break}case 3:{if(this.byteCount===v_||(++this.byteCount,e[r++]!==10))return-1;let s=this.header;return this.reset(),this.cb(s),r}}break}return r}},Zne=class extends wHt{constructor(e,r){super(e),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),--r._fileEndsLeft===0&&r._finalcb){let n=r._finalcb;r._finalcb=null,process.nextTick(n)}})}_read(e){let r=this._readcb;r&&(this._readcb=null,r())}},cqe={push:(t,e)=>{},destroy:()=>{}};function PHt(t,e){let r=t._writecb;t._writecb=null,e?t.destroy(e):r&&r()}function NHt(t,e){return t}var eie=class extends AHt{constructor(e){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};if(super(r),!e.conType.params||typeof e.conType.params.boundary!="string")throw new Error("Multipart: Boundary not found");let n=e.conType.params.boundary,i=typeof e.defParamCharset=="string"&&e.defParamCharset?OHt(e.defParamCharset):NHt,s=e.defCharset||"utf8",o=e.preservePath,a={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.fileHwm=="number"?e.fileHwm:void 0},u=e.limits,c=u&&typeof u.fieldSize=="number"?u.fieldSize:1*1024*1024,l=u&&typeof u.fileSize=="number"?u.fileSize:1/0,d=u&&typeof u.files=="number"?u.files:1/0,p=u&&typeof u.fields=="number"?u.fields:1/0,f=u&&typeof u.parts=="number"?u.parts:1/0,h=-1,g=0,_=0,S=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let w=0,C,A=0,O,x,R,M,I=!1,F=!1,B=!1;this._hparser=null;let U=new Xne(ie=>{this._hparser=null,S=!1,R="text/plain",O=s,x="7bit",M=void 0,I=!1;let j;if(!ie["content-disposition"]){S=!0;return}let V=IHt(ie["content-disposition"][0],i);if(!V||V.type!=="form-data"){S=!0;return}if(V.params&&(V.params.name&&(M=V.params.name),V.params["filename*"]?j=V.params["filename*"]:V.params.filename&&(j=V.params.filename),j!==void 0&&!o&&(j=THt(j))),ie["content-type"]){let Ee=xHt(ie["content-type"][0]);Ee&&(R=`${Ee.type}/${Ee.subtype}`,Ee.params&&typeof Ee.params.charset=="string"&&(O=Ee.params.charset.toLowerCase()))}if(ie["content-transfer-encoding"]&&(x=ie["content-transfer-encoding"][0].toLowerCase()),R==="application/octet-stream"||j!==void 0){if(_===d){F||(F=!0,this.emit("filesLimit")),S=!0;return}if(++_,this.listenerCount("file")===0){S=!0;return}w=0,this._fileStream=new Zne(a,this),++this._fileEndsLeft,this.emit("file",M,this._fileStream,{filename:j,encoding:x,mimeType:R})}else{if(g===p){B||(B=!0,this.emit("fieldsLimit")),S=!0;return}if(++g,this.listenerCount("field")===0){S=!0;return}C=[],A=0}}),k=0,H=(ie,j,V,Ee,Re)=>{e:for(;j;){if(this._hparser!==null){let fe=this._hparser.push(j,V,Ee);if(fe===-1){this._hparser=null,U.reset(),this.emit("error",new Error("Malformed part header"));break}V=fe}if(V===Ee)break;if(k!==0){if(k===1){switch(j[V]){case 45:k=2,++V;break;case 13:k=3,++V;break;default:k=0}if(V===Ee)return}if(k===2){if(k=0,j[V]===45){this._complete=!0,this._bparser=cqe;return}let fe=this._writecb;this._writecb=oqe,H(!1,kHt,0,1,!1),this._writecb=fe}else if(k===3)if(k=0,j[V]===10){if(++V,h>=f||(this._hparser=U,V===Ee))break;continue e}else{let fe=this._writecb;this._writecb=oqe,H(!1,DHt,0,1,!1),this._writecb=fe}}if(!S){if(this._fileStream){let fe,Ve=Math.min(Ee-V,l-w);Re?fe=j.slice(V,V+Ve):(fe=Buffer.allocUnsafe(Ve),j.copy(fe,0,V,V+Ve)),w+=fe.length,w===l?(fe.length>0&&this._fileStream.push(fe),this._fileStream.emit("limit"),this._fileStream.truncated=!0,S=!0):this._fileStream.push(fe)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(C!==void 0){let fe,Ve=Math.min(Ee-V,c-A);Re?fe=j.slice(V,V+Ve):(fe=Buffer.allocUnsafe(Ve),j.copy(fe,0,V,V+Ve)),A+=Ve,C.push(fe),A===c&&(S=!0,I=!0)}}break}if(ie){if(k=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(C!==void 0){let fe;switch(C.length){case 0:fe="";break;case 1:fe=sqe(C[0],O,0);break;default:fe=sqe(Buffer.concat(C,A),O,0)}C=void 0,A=0,this.emit("field",M,fe,{nameTruncated:!1,valueTruncated:I,encoding:x,mimeType:R})}++h===f&&this.emit("partsLimit")}};this._bparser=new CHt(`\r
--${n}`,H),this._writecb=null,this._finalcb=null,this.write(RHt)}static detect(e){return e.type==="multipart"&&e.subtype==="form-data"}_write(e,r,n){this._writecb=n,this._bparser.push(e,0),this._writecb&&PHt(this)}_destroy(e,r){this._hparser=null,this._bparser=cqe,e||(e=dqe(this));let n=this._fileStream;n&&(this._fileStream=null,n.destroy(e)),r(e)}_final(e){if(this._bparser.destroy(),!this._complete)return e(new Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=lqe.bind(null,this,e):lqe(this,e)}};function lqe(t,e,r){if(r)return e(r);r=dqe(t),e(r)}function dqe(t){if(t._hparser)return new Error("Malformed part header");let e=t._fileStream;if(e&&(t._fileStream=null,e.destroy(new Error("Unexpected end of file"))),!t._complete)return new Error("Unexpected end of form")}var FHt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],BHt=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];pqe.exports=eie});var mqe=m(($Rr,hqe)=>{"use strict";var{Writable:qHt}=require("stream"),{getDecoder:LHt}=pP(),sie=class extends qHt{constructor(e){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};super(r);let n=e.defCharset||"utf8";e.conType.params&&typeof e.conType.params.charset=="string"&&(n=e.conType.params.charset),this.charset=n;let i=e.limits;this.fieldSizeLimit=i&&typeof i.fieldSize=="number"?i.fieldSize:1*1024*1024,this.fieldsLimit=i&&typeof i.fields=="number"?i.fields:1/0,this.fieldNameSizeLimit=i&&typeof i.fieldNameSize=="number"?i.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=LHt(n)}static detect(e){return e.type==="application"&&e.subtype==="x-www-form-urlencoded"}_write(e,r,n){if(this._fields>=this.fieldsLimit)return n();let i=0,s=e.length;if(this._lastPos=0,this._byte!==-2){if(i=tie(this,e,i,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();this._inKey?++this._bytesKey:++this._bytesVal}e:for(;i<s;)if(this._inKey){for(i=rie(this,e,i,s);i<s;){switch(e[i]){case 61:this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue e;case 38:if(this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),n();continue;case 43:this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._key+=" ",this._lastPos=i+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=i+1,this._byte=-1,i=tie(this,e,i+1,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();++this._bytesKey,i=rie(this,e,i,s);continue}++i,++this._bytesKey,i=rie(this,e,i,s)}this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i))}else{for(i=nie(this,e,i,s);i<s;){switch(e[i]){case 38:if(this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),n();continue e;case 43:this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._val+=" ",this._lastPos=i+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._lastPos=i+1,this._byte=-1,i=tie(this,e,i+1,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();++this._bytesVal,i=nie(this,e,i,s);continue}++i,++this._bytesVal,i=nie(this,e,i,s)}this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i))}n()}_final(e){if(this._byte!==-2)return e(new Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),e()}};function tie(t,e,r,n){if(r>=n)return n;if(t._byte===-1){let i=iie[e[r++]];if(i===-1)return-1;if(i>=8&&(t._encode=2),r<n){let s=iie[e[r++]];if(s===-1)return-1;t._inKey?t._key+=String.fromCharCode((i<<4)+s):t._val+=String.fromCharCode((i<<4)+s),t._byte=-2,t._lastPos=r}else t._byte=i}else{let i=iie[e[r++]];if(i===-1)return-1;t._inKey?t._key+=String.fromCharCode((t._byte<<4)+i):t._val+=String.fromCharCode((t._byte<<4)+i),t._byte=-2,t._lastPos=r}return r}function rie(t,e,r,n){if(t._bytesKey>t.fieldNameSizeLimit){for(t._keyTrunc||t._lastPos<r&&(t._key+=e.latin1Slice(t._lastPos,r-1)),t._keyTrunc=!0;r<n;++r){let i=e[r];if(i===61||i===38)break;++t._bytesKey}t._lastPos=r}return r}function nie(t,e,r,n){if(t._bytesVal>t.fieldSizeLimit){for(t._valTrunc||t._lastPos<r&&(t._val+=e.latin1Slice(t._lastPos,r-1)),t._valTrunc=!0;r<n&&e[r]!==38;++r)++t._bytesVal;t._lastPos=r}return r}var iie=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];hqe.exports=sie});var gqe=m((KRr,yqe)=>{"use strict";var{parseContentType:jHt}=pP();function $Ht(t){let e=t.headers,r=jHt(e["content-type"]);if(!r)throw new Error("Malformed content type");for(let n of KHt){if(!n.detect(r))continue;let s={limits:t.limits,headers:e,conType:r,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return t.highWaterMark&&(s.highWaterMark=t.highWaterMark),t.fileHwm&&(s.fileHwm=t.fileHwm),s.defCharset=t.defCharset,s.defParamCharset=t.defParamCharset,s.preservePath=t.preservePath,new n(s)}throw new Error(`Unsupported content type: ${e["content-type"]}`)}var KHt=[fqe(),mqe()].filter(function(t){return typeof t.detect=="function"});yqe.exports=t=>{if((typeof t!="object"||t===null)&&(t={}),typeof t.headers!="object"||t.headers===null||typeof t.headers["content-type"]!="string")throw new Error("Missing Content-Type");return $Ht(t)}});var bqe=m((URr,Eqe)=>{Eqe.exports=VHt;var UHt=Object.prototype.hasOwnProperty;function VHt(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)UHt.call(r,n)&&(t[n]=r[n])}return t}});var vqe=m((VRr,_qe)=>{var GHt=/^[^\[]*/,HHt=/^\[(\d+)\]/,zHt=/^\[([^\]]+)\]/;function WHt(t){function e(){return[{type:"object",key:t,last:!0}]}var r=GHt.exec(t)[0];if(!r)return e();for(var n=t.length,i=r.length,s={type:"object",key:r},o=[s];i<n;){var a;if(t[i]==="["&&t[i+1]==="]"){if(i+=2,s.append=!0,i!==n)return e();continue}if(a=HHt.exec(t.substring(i)),a!==null){i+=a[0].length,s.nextType="array",s={type:"array",key:parseInt(a[1],10)},o.push(s);continue}if(a=zHt.exec(t.substring(i)),a!==null){i+=a[0].length,s.nextType="object",s={type:"object",key:a[1]},o.push(s);continue}return e()}return s.last=!0,o}_qe.exports=WHt});var Cqe=m((GRr,Aqe)=>{function Sqe(t){return t===void 0?"undefined":Array.isArray(t)?"array":typeof t=="object"?"object":"scalar"}function wqe(t,e,r,n){switch(Sqe(r)){case"undefined":e.append?t[e.key]=[n]:t[e.key]=n;break;case"array":t[e.key].push(n);break;case"object":return wqe(r,{type:"object",key:"",last:!0},r[""],n);case"scalar":t[e.key]=[t[e.key],n];break}return t}function JHt(t,e,r,n){if(e.last)return wqe(t,e,r,n);var i;switch(Sqe(r)){case"undefined":return e.nextType==="array"?t[e.key]=[]:t[e.key]=Object.create(null),t[e.key];case"object":return t[e.key];case"array":return e.nextType==="array"?r:(i=Object.create(null),t[e.key]=i,r.forEach(function(s,o){s!==void 0&&(i[""+o]=s)}),i);case"scalar":return i=Object.create(null),i[""]=r,t[e.key]=i,i}}Aqe.exports=JHt});var Oqe=m((HRr,Tqe)=>{var YHt=vqe(),QHt=Cqe();function XHt(t,e,r){var n=YHt(e);n.reduce(function(i,s){return QHt(i,s,i[s.key],r)},t)}Tqe.exports=XHt});var Rqe=m((zRr,Iqe)=>{var xqe=require("events").EventEmitter;function S_(){xqe.call(this),this.value=0}S_.prototype=Object.create(xqe.prototype);S_.prototype.increment=function(){this.value++};S_.prototype.decrement=function(){--this.value===0&&this.emit("zero")};S_.prototype.isZero=function(){return this.value===0};S_.prototype.onceZero=function(e){if(this.isZero())return e();this.once("zero",e)};Iqe.exports=S_});var oie=m((WRr,kqe)=>{var ZHt=require("util"),ezt={LIMIT_PART_COUNT:"Too many parts",LIMIT_FILE_SIZE:"File too large",LIMIT_FILE_COUNT:"Too many files",LIMIT_FIELD_KEY:"Field name too long",LIMIT_FIELD_VALUE:"Field value too long",LIMIT_FIELD_COUNT:"Too many fields",LIMIT_UNEXPECTED_FILE:"Unexpected field",MISSING_FIELD_NAME:"Field name missing"};function Dqe(t,e){Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=ezt[t],this.code=t,e&&(this.field=e)}ZHt.inherits(Dqe,Error);kqe.exports=Dqe});var Nqe=m((JRr,Pqe)=>{"use strict";var Mqe=Object.getOwnPropertySymbols,tzt=Object.prototype.hasOwnProperty,rzt=Object.prototype.propertyIsEnumerable;function nzt(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function izt(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Pqe.exports=izt()?Object.assign:function(t,e){for(var r,n=nzt(t),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)tzt.call(r,o)&&(n[o]=r[o]);if(Mqe){i=Mqe(r);for(var a=0;a<i.length;a++)rzt.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var qqe=m((YRr,Bqe)=>{var szt=Nqe();function Fqe(t,e){var r=t.indexOf(e);~r&&t.splice(r,1)}function hP(t,e){switch(this.strategy=t,this.req=e,t){case"NONE":break;case"VALUE":break;case"ARRAY":e.files=[];break;case"OBJECT":e.files=Object.create(null);break;default:throw new Error("Unknown file strategy: "+t)}}hP.prototype.insertPlaceholder=function(t){var e={fieldname:t.fieldname};switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":this.req.files.push(e);break;case"OBJECT":this.req.files[t.fieldname]?this.req.files[t.fieldname].push(e):this.req.files[t.fieldname]=[e];break}return e};hP.prototype.removePlaceholder=function(t){switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":Fqe(this.req.files,t);break;case"OBJECT":this.req.files[t.fieldname].length===1?delete this.req.files[t.fieldname]:Fqe(this.req.files[t.fieldname],t);break}};hP.prototype.replacePlaceholder=function(t,e){if(this.strategy==="VALUE"){this.req.file=e;return}delete t.fieldname,szt(t,e)};Bqe.exports=hP});var jqe=m((QRr,Lqe)=>{function ozt(t,e,r){var n=t.length,i=[];if(n===0)return r(null,i);function s(o){var a=t[o];e(a,function(u){u&&(u.file=a,u.field=a.fieldname,i.push(u)),o<n-1?s(o+1):r(null,i)})}s(0)}Lqe.exports=ozt});var Uqe=m((XRr,Kqe)=>{var azt=WBe(),uzt=gqe(),$qe=bqe(),czt=Oqe(),lzt=Rqe(),dzt=oie(),pzt=qqe(),fzt=jqe();function hzt(t){t.on("readable",()=>{for(;t.read()!==null;);})}function mzt(t){return function(r,n,i){if(!azt(r,["multipart"]))return i();var s=t(),o=s.limits,a=s.storage,u=s.fileFilter,c=s.fileStrategy,l=s.preservePath;r.body=Object.create(null),r.on("error",function(x){A(x)});var d;try{d=uzt({headers:r.headers,limits:o,preservePath:l})}catch(x){return i(x)}var p=new pzt(c,r),f=!1,h=!1,g=!1,_=new lzt,S=[];function w(x){f||(f=!0,r.unpipe(d),hzt(r),r.resume(),setImmediate(()=>{d.removeAllListeners()}),i(x))}function C(){h&&_.isZero()&&!g&&w()}function A(x){g||(g=!0,_.onceZero(function(){function R(M,I){a._removeFile(r,M,I)}fzt(S,R,function(M,I){if(M)return w(M);x.storageErrors=I,w(x)})}))}function O(x,R){A(new dzt(x,R))}d.on("field",function(x,R,{nameTruncated:M,valueTruncated:I}){if(x==null)return O("MISSING_FIELD_NAME");if(M)return O("LIMIT_FIELD_KEY");if(I)return O("LIMIT_FIELD_VALUE",x);if(o&&Object.prototype.hasOwnProperty.call(o,"fieldNameSize")&&x.length>o.fieldNameSize)return O("LIMIT_FIELD_KEY");czt(r.body,x,R)}),d.on("file",function(x,R,{filename:M,encoding:I,mimeType:F}){var B=!1;if(R.on("error",function(H){B&&_.decrement(),A(H)}),x==null)return O("MISSING_FIELD_NAME");if(!M)return R.resume();if(o&&Object.prototype.hasOwnProperty.call(o,"fieldNameSize")&&x.length>o.fieldNameSize)return O("LIMIT_FIELD_KEY");var U={fieldname:x,originalname:M,encoding:I,mimetype:F},k=p.insertPlaceholder(U);u(r,U,function(H,ie){if(H)return p.removePlaceholder(k),A(H);if(!ie)return p.removePlaceholder(k),R.resume();var j=!1;B=!0,_.increment(),Object.defineProperty(U,"stream",{configurable:!0,enumerable:!1,value:R}),R.on("limit",function(){j=!0,O("LIMIT_FILE_SIZE",x)}),a._handleFile(r,U,function(V,Ee){if(j)return p.removePlaceholder(k),S.push($qe(U,Ee)),_.decrement();if(V)return p.removePlaceholder(k),_.decrement(),A(V);var Re=$qe(U,Ee);p.replacePlaceholder(k,Re),S.push(Re),_.decrement(),C()})})}),d.on("error",function(x){A(x)}),d.on("partsLimit",function(){O("LIMIT_PART_COUNT")}),d.on("filesLimit",function(){O("LIMIT_FILE_COUNT")}),d.on("fieldsLimit",function(){O("LIMIT_FIELD_COUNT")}),d.on("close",function(){h=!0,C()}),r.pipe(d)}}Kqe.exports=mzt});var zqe=m((ZRr,Hqe)=>{var Y9=require("path"),Vqe=require("fs"),Gqe=parseInt("0777",8);Hqe.exports=w_.mkdirp=w_.mkdirP=w_;function w_(t,e,r,n){typeof e=="function"?(r=e,e={}):(!e||typeof e!="object")&&(e={mode:e});var i=e.mode,s=e.fs||Vqe;i===void 0&&(i=Gqe),n||(n=null);var o=r||function(){};t=Y9.resolve(t),s.mkdir(t,i,function(a){if(!a)return n=n||t,o(null,n);switch(a.code){case"ENOENT":if(Y9.dirname(t)===t)return o(a);w_(Y9.dirname(t),e,function(u,c){u?o(u,c):w_(t,e,o,c)});break;default:s.stat(t,function(u,c){u||!c.isDirectory()?o(a,n):o(null,n)});break}})}w_.sync=function t(e,r,n){(!r||typeof r!="object")&&(r={mode:r});var i=r.mode,s=r.fs||Vqe;i===void 0&&(i=Gqe),n||(n=null),e=Y9.resolve(e);try{s.mkdirSync(e,i),n=n||e}catch(a){switch(a.code){case"ENOENT":n=t(Y9.dirname(e),r,n),t(e,r,n);break;default:var o;try{o=s.statSync(e)}catch{throw a}if(!o.isDirectory())throw a;break}}return n}});var Yqe=m((eDr,Jqe)=>{var Wqe=require("fs"),yzt=require("os"),gzt=require("path"),Ezt=require("crypto"),bzt=zqe();function _zt(t,e,r){Ezt.randomBytes(16,function(n,i){r(n,n?void 0:i.toString("hex"))})}function vzt(t,e,r){r(null,yzt.tmpdir())}function aie(t){this.getFilename=t.filename||_zt,typeof t.destination=="string"?(bzt.sync(t.destination),this.getDestination=function(e,r,n){n(null,t.destination)}):this.getDestination=t.destination||vzt}aie.prototype._handleFile=function(e,r,n){var i=this;i.getDestination(e,r,function(s,o){if(s)return n(s);i.getFilename(e,r,function(a,u){if(a)return n(a);var c=gzt.join(o,u),l=Wqe.createWriteStream(c);r.stream.pipe(l),l.on("error",n),l.on("finish",function(){n(null,{destination:o,filename:u,path:c,size:l.bytesWritten})})})})};aie.prototype._removeFile=function(e,r,n){var i=r.path;delete r.destination,delete r.filename,delete r.path,Wqe.unlink(i,n)};Jqe.exports=function(t){return new aie(t)}});var Xqe=m((tDr,Qqe)=>{var Szt=Object.prototype.toString,uie=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function wzt(t){return Szt.call(t).slice(8,-1)==="ArrayBuffer"}function Azt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return uie?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function Czt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return uie?Buffer.from(t,e):new Buffer(t,e)}function Tzt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return wzt(t)?Azt(t,e,r):typeof t=="string"?Czt(t,e):uie?Buffer.from(t):new Buffer(t)}Qqe.exports=Tzt});var iLe=m(St=>{var Zqe=void 0,Ozt=1e5,Bn=(function(){var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(r){return t.call(r).replace(/^\[object *|\]$/g,"")},HasProperty:function(r,n){return n in r},HasOwnProperty:function(r,n){return e.call(r,n)},IsCallable:function(r){return typeof r=="function"},ToInt32:function(r){return r>>0},ToUint32:function(r){return r>>>0}}})(),xzt=Math.LN2,Izt=Math.abs,mP=Math.floor,Rzt=Math.log,Dzt=Math.min,Gl=Math.pow,kzt=Math.round;function cie(t){if(eLe&&A_){var e=eLe(t),r;for(r=0;r<e.length;r+=1)A_(t,e[r],{value:t[e[r]],writable:!1,enumerable:!1,configurable:!1})}}var A_;Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})()?A_=Object.defineProperty:A_=function(t,e,r){if(!t===Object(t))throw new TypeError("Object.defineProperty called on non-object");return Bn.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(t,e,r.get),Bn.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(t,e,r.set),Bn.HasProperty(r,"value")&&(t[e]=r.value),t};var eLe=Object.getOwnPropertyNames||function(t){if(t!==Object(t))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e=[],r;for(r in t)Bn.HasOwnProperty(t,r)&&e.push(r);return e};function Mzt(t){if(!A_)return;if(t.length>Ozt)throw new RangeError("Array too large for polyfill");function e(n){A_(t,n,{get:function(){return t._getter(n)},set:function(i){t._setter(n,i)},enumerable:!0,configurable:!1})}var r;for(r=0;r<t.length;r+=1)e(r)}function lie(t,e){var r=32-e;return t<<r>>r}function die(t,e){var r=32-e;return t<<r>>>r}function Pzt(t){return[t&255]}function Nzt(t){return lie(t[0],8)}function Fzt(t){return[t&255]}function tLe(t){return die(t[0],8)}function Bzt(t){return t=kzt(Number(t)),[t<0?0:t>255?255:t&255]}function qzt(t){return[t>>8&255,t&255]}function Lzt(t){return lie(t[0]<<8|t[1],16)}function jzt(t){return[t>>8&255,t&255]}function $zt(t){return die(t[0]<<8|t[1],16)}function Kzt(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]}function Uzt(t){return lie(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function Vzt(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]}function Gzt(t){return die(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function rLe(t,e,r){var n=(1<<e-1)-1,i,s,o,a,u,c,l,d;function p(f){var h=mP(f),g=f-h;return g<.5?h:g>.5||h%2?h+1:h}for(t!==t?(s=(1<<e)-1,o=Gl(2,r-1),i=0):t===1/0||t===-1/0?(s=(1<<e)-1,o=0,i=t<0?1:0):t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Izt(t),t>=Gl(2,1-n)?(s=Dzt(mP(Rzt(t)/xzt),1023),o=p(t/Gl(2,s)*Gl(2,r)),o/Gl(2,r)>=2&&(s=s+1,o=1),s>n?(s=(1<<e)-1,o=0):(s=s+n,o=o-Gl(2,r))):(s=0,o=p(t/Gl(2,1-n-r)))),c=[],u=r;u;u-=1)c.push(o%2?1:0),o=mP(o/2);for(u=e;u;u-=1)c.push(s%2?1:0),s=mP(s/2);for(c.push(i?1:0),c.reverse(),l=c.join(""),d=[];l.length;)d.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return d}function nLe(t,e,r){var n=[],i,s,o,a,u,c,l,d;for(i=t.length;i;i-=1)for(o=t[i-1],s=8;s;s-=1)n.push(o%2?1:0),o=o>>1;return n.reverse(),a=n.join(""),u=(1<<e-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,l=parseInt(a.substring(1,1+e),2),d=parseInt(a.substring(1+e),2),l===(1<<e)-1?d!==0?NaN:c*(1/0):l>0?c*Gl(2,l-u)*(1+d/Gl(2,r)):d!==0?c*Gl(2,-(u-1))*(d/Gl(2,r)):c<0?-0:0}function Hzt(t){return nLe(t,11,52)}function zzt(t){return rLe(t,11,52)}function Wzt(t){return nLe(t,8,23)}function Jzt(t){return rLe(t,8,23)}(function(){var t=function(f){if(f=Bn.ToInt32(f),f<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=f,this._bytes=[],this._bytes.length=f;var h;for(h=0;h<this.byteLength;h+=1)this._bytes[h]=0;cie(this)};St.ArrayBuffer=St.ArrayBuffer||t;var e=function(){};function r(p,f,h){var g;return g=function(_,S,w){var C,A,O,x;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=Bn.ToInt32(arguments[0]),w<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===g)for(C=arguments[0],this.length=C.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,O=0;O<this.length;O+=1)this._setter(O,C._getter(O));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof t||Bn.Class(arguments[0])==="ArrayBuffer"))for(A=arguments[0],this.length=Bn.ToUint32(A.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,O=0;O<this.length;O+=1)x=A[O],this._setter(O,Number(x));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof t||Bn.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=_,this.byteOffset=Bn.ToUint32(S),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=Bn.ToUint32(w),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=g,cie(this),Mzt(this)},g.prototype=new e,g.prototype.BYTES_PER_ELEMENT=p,g.prototype._pack=f,g.prototype._unpack=h,g.BYTES_PER_ELEMENT=p,g.prototype._getter=function(_){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(_=Bn.ToUint32(_),_>=this.length)return Zqe;var S=[],w,C;for(w=0,C=this.byteOffset+_*this.BYTES_PER_ELEMENT;w<this.BYTES_PER_ELEMENT;w+=1,C+=1)S.push(this.buffer._bytes[C]);return this._unpack(S)},g.prototype.get=g.prototype._getter,g.prototype._setter=function(_,S){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(_=Bn.ToUint32(_),_>=this.length)return Zqe;var w=this._pack(S),C,A;for(C=0,A=this.byteOffset+_*this.BYTES_PER_ELEMENT;C<this.BYTES_PER_ELEMENT;C+=1,A+=1)this.buffer._bytes[A]=w[C]},g.prototype.set=function(_,S){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var w,C,A,O,x,R,M,I,F,B;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(w=arguments[0],A=Bn.ToUint32(arguments[1]),A+w.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(I=this.byteOffset+A*this.BYTES_PER_ELEMENT,F=w.length*this.BYTES_PER_ELEMENT,w.buffer===this.buffer){for(B=[],x=0,R=w.byteOffset;x<F;x+=1,R+=1)B[x]=w.buffer._bytes[R];for(x=0,M=I;x<F;x+=1,M+=1)this.buffer._bytes[M]=B[x]}else for(x=0,R=w.byteOffset,M=I;x<F;x+=1,R+=1,M+=1)this.buffer._bytes[M]=w.buffer._bytes[R]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(C=arguments[0],O=Bn.ToUint32(C.length),A=Bn.ToUint32(arguments[1]),A+O>this.length)throw new RangeError("Offset plus length of array is out of range");for(x=0;x<O;x+=1)R=C[x],this._setter(A+x,Number(R))}else throw new TypeError("Unexpected argument type(s)")},g.prototype.subarray=function(_,S){function w(A,O,x){return A<O?O:A>x?x:A}_=Bn.ToInt32(_),S=Bn.ToInt32(S),arguments.length<1&&(_=0),arguments.length<2&&(S=this.length),_<0&&(_=this.length+_),S<0&&(S=this.length+S),_=w(_,0,this.length),S=w(S,0,this.length);var C=S-_;return C<0&&(C=0),new this.constructor(this.buffer,this.byteOffset+_*this.BYTES_PER_ELEMENT,C)},g}var n=r(1,Pzt,Nzt),i=r(1,Fzt,tLe),s=r(1,Bzt,tLe),o=r(2,qzt,Lzt),a=r(2,jzt,$zt),u=r(4,Kzt,Uzt),c=r(4,Vzt,Gzt),l=r(4,Jzt,Wzt),d=r(8,zzt,Hzt);St.Int8Array=St.Int8Array||n,St.Uint8Array=St.Uint8Array||i,St.Uint8ClampedArray=St.Uint8ClampedArray||s,St.Int16Array=St.Int16Array||o,St.Uint16Array=St.Uint16Array||a,St.Int32Array=St.Int32Array||u,St.Uint32Array=St.Uint32Array||c,St.Float32Array=St.Float32Array||l,St.Float64Array=St.Float64Array||d})();(function(){function t(s,o){return Bn.IsCallable(s.get)?s.get(o):s[o]}var e=(function(){var s=new St.Uint16Array([4660]),o=new St.Uint8Array(s.buffer);return t(o,0)===18})(),r=function(o,a,u){if(arguments.length===0)o=new St.ArrayBuffer(0);else if(!(o instanceof St.ArrayBuffer||Bn.Class(o)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=o||new St.ArrayBuffer(0),this.byteOffset=Bn.ToUint32(a),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=Bn.ToUint32(u),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");cie(this)};function n(s){return function(o,a){if(o=Bn.ToUint32(o),o+s.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");o+=this.byteOffset;var u=new St.Uint8Array(this.buffer,o,s.BYTES_PER_ELEMENT),c=[],l;for(l=0;l<s.BYTES_PER_ELEMENT;l+=1)c.push(t(u,l));return!!a==!!e&&c.reverse(),t(new s(new St.Uint8Array(c).buffer),0)}}r.prototype.getUint8=n(St.Uint8Array),r.prototype.getInt8=n(St.Int8Array),r.prototype.getUint16=n(St.Uint16Array),r.prototype.getInt16=n(St.Int16Array),r.prototype.getUint32=n(St.Uint32Array),r.prototype.getInt32=n(St.Int32Array),r.prototype.getFloat32=n(St.Float32Array),r.prototype.getFloat64=n(St.Float64Array);function i(s){return function(o,a,u){if(o=Bn.ToUint32(o),o+s.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c=new s([a]),l=new St.Uint8Array(c.buffer),d=[],p,f;for(p=0;p<s.BYTES_PER_ELEMENT;p+=1)d.push(t(l,p));!!u==!!e&&d.reverse(),f=new St.Uint8Array(this.buffer,o,s.BYTES_PER_ELEMENT),f.set(d)}}r.prototype.setUint8=i(St.Uint8Array),r.prototype.setInt8=i(St.Int8Array),r.prototype.setUint16=i(St.Uint16Array),r.prototype.setInt16=i(St.Int16Array),r.prototype.setUint32=i(St.Uint32Array),r.prototype.setInt32=i(St.Int32Array),r.prototype.setFloat32=i(St.Float32Array),r.prototype.setFloat64=i(St.Float64Array),St.DataView=St.DataView||r})()});var uLe=m((nDr,aLe)=>{var sLe=Ch().Writable,Yzt=py(),Q9=Xqe();typeof Uint8Array>"u"?yP=iLe().Uint8Array:yP=Uint8Array;var yP;function Tg(t,e){if(!(this instanceof Tg))return new Tg(t,e);typeof t=="function"&&(e=t,t={}),t||(t={});var r=t.encoding,n=!1;r?(r=String(r).toLowerCase(),(r==="u8"||r==="uint8")&&(r="uint8array")):n=!0,sLe.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=n,e&&this.on("finish",function(){e(this.getBody())}),this.body=[]}aLe.exports=Tg;Yzt(Tg,sLe);Tg.prototype._write=function(t,e,r){this.body.push(t),r()};Tg.prototype.inferEncoding=function(t){var e=t===void 0?this.body[0]:t;return Buffer.isBuffer(e)?"buffer":typeof Uint8Array<"u"&&e instanceof Uint8Array?"uint8array":Array.isArray(e)?"array":typeof e=="string"?"string":Object.prototype.toString.call(e)==="[object Object]"?"object":"buffer"};Tg.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?eWt(this.body):this.encoding==="string"?Xzt(this.body):this.encoding==="buffer"?Zzt(this.body):this.encoding==="uint8array"?tWt(this.body):this.body)};function Qzt(t){return/Array\]$/.test(Object.prototype.toString.call(t))}function oLe(t){return typeof t=="string"||Qzt(t)||t&&typeof t.subarray=="function"}function Xzt(t){for(var e=[],r=!1,n=0;n<t.length;n++){var i=t[n];typeof i=="string"||Buffer.isBuffer(i)?e.push(i):oLe(i)?e.push(Q9(i)):e.push(Q9(String(i)))}return Buffer.isBuffer(t[0])?(e=Buffer.concat(e),e=e.toString("utf8")):e=e.join(""),e}function Zzt(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];Buffer.isBuffer(n)?e.push(n):oLe(n)?e.push(Q9(n)):e.push(Q9(String(n)))}return Buffer.concat(e)}function eWt(t){for(var e=[],r=0;r<t.length;r++)e.push.apply(e,t[r]);return e}function tWt(t){for(var e=0,r=0;r<t.length;r++)typeof t[r]=="string"&&(t[r]=Q9(t[r])),e+=t[r].length;for(var n=new yP(e),r=0,i=0;r<t.length;r++)for(var s=t[r],o=0;o<s.length;o++)n[i++]=s[o];return n}});var lLe=m((iDr,cLe)=>{var rWt=uLe();function pie(t){}pie.prototype._handleFile=function(e,r,n){r.stream.pipe(rWt({encoding:"buffer"},function(i){n(null,{buffer:i,size:i.length})}))};pie.prototype._removeFile=function(e,r,n){delete r.buffer,n(null)};cLe.exports=function(t){return new pie(t)}});var mLe=m((sDr,X9)=>{var dLe=Uqe(),pLe=Yqe(),fLe=lLe(),hLe=oie();function nWt(t,e,r){r(null,!0)}function dm(t){t.storage?this.storage=t.storage:t.dest?this.storage=pLe({destination:t.dest}):this.storage=fLe(),this.limits=t.limits,this.preservePath=t.preservePath,this.fileFilter=t.fileFilter||nWt}dm.prototype._makeMiddleware=function(t,e){function r(){var n=this.fileFilter,i=Object.create(null);t.forEach(function(o){typeof o.maxCount=="number"?i[o.name]=o.maxCount:i[o.name]=1/0});function s(o,a,u){if((i[a.fieldname]||0)<=0)return u(new hLe("LIMIT_UNEXPECTED_FILE",a.fieldname));i[a.fieldname]-=1,n(o,a,u)}return{limits:this.limits,preservePath:this.preservePath,storage:this.storage,fileFilter:s,fileStrategy:e}}return dLe(r.bind(this))};dm.prototype.single=function(t){return this._makeMiddleware([{name:t,maxCount:1}],"VALUE")};dm.prototype.array=function(t,e){return this._makeMiddleware([{name:t,maxCount:e}],"ARRAY")};dm.prototype.fields=function(t){return this._makeMiddleware(t,"OBJECT")};dm.prototype.none=function(){return this._makeMiddleware([],"NONE")};dm.prototype.any=function(){function t(){return{limits:this.limits,preservePath:this.preservePath,storage:this.storage,fileFilter:this.fileFilter,fileStrategy:"ARRAY"}}return dLe(t.bind(this))};function iWt(t){if(t===void 0)return new dm({});if(typeof t=="object"&&t!==null)return new dm(t);throw new TypeError("Expected object for argument options")}X9.exports=iWt;X9.exports.diskStorage=pLe;X9.exports.memoryStorage=fLe;X9.exports.MulterError=hLe});var yLe=m((oDr,sWt)=>{sWt.exports={name:"gaxios",version:"7.1.2",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:"googleapis/gaxios",keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^4.0.0","jsdoc-region-tag":"^3.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^3.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2"}}});var ELe=m((aDr,gLe)=>{"use strict";var oWt=yLe();gLe.exports={pkg:oWt}});var mie=m(Dc=>{"use strict";var _Le=Dc&&Dc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.GaxiosError=Dc.GAXIOS_ERROR_SYMBOL=void 0;Dc.defaultErrorRedactor=vLe;var bLe=_Le(uC()),aWt=_Le(ELe()),fie=aWt.default.pkg;Dc.GAXIOS_ERROR_SYMBOL=Symbol.for(`${fie.name}-gaxios-error`);var hie=class t extends Error{config;response;code;status;error;[Dc.GAXIOS_ERROR_SYMBOL]=fie.version;static[Symbol.hasInstance](e){return e&&typeof e=="object"&&Dc.GAXIOS_ERROR_SYMBOL in e&&e[Dc.GAXIOS_ERROR_SYMBOL]===fie.version?!0:Function.prototype[Symbol.hasInstance].call(t,e)}constructor(e,r,n,i){if(super(e,{cause:i}),this.config=r,this.response=n,this.error=i instanceof Error?i:void 0,this.config=(0,bLe.default)(!0,{},r),this.response&&(this.response.config=(0,bLe.default)(!0,{},this.response.config)),this.response){try{this.response.data=uWt(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}i instanceof DOMException?this.code=i.name:i&&typeof i=="object"&&"code"in i&&(typeof i.code=="string"||typeof i.code=="number")&&(this.code=i.code)}static extractAPIErrorFromResponse(e,r="The request failed"){let n=r;if(typeof e.data=="string"&&(n=e.data),e.data&&typeof e.data=="object"&&"error"in e.data&&e.data.error&&!e.ok){if(typeof e.data.error=="string")return{message:e.data.error,code:e.status,status:e.statusText};if(typeof e.data.error=="object"){n="message"in e.data.error&&typeof e.data.error.message=="string"?e.data.error.message:n;let i="status"in e.data.error&&typeof e.data.error.status=="string"?e.data.error.status:e.statusText,s="code"in e.data.error&&typeof e.data.error.code=="number"?e.data.error.code:e.status;if("errors"in e.data.error&&Array.isArray(e.data.error.errors)){let o=[];for(let a of e.data.error.errors)typeof a=="object"&&"message"in a&&typeof a.message=="string"&&o.push(a.message);return Object.assign({message:o.join(`
`)||n,code:s,status:i},e.data.error)}return Object.assign({message:n,code:s,status:i},e.data.error)}}return{message:n,code:e.status,status:e.statusText}}};Dc.GaxiosError=hie;function uWt(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}function vLe(t){let e="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function r(s){s&&s.forEach((o,a)=>{(/^authentication$/i.test(a)||/^authorization$/i.test(a)||/secret/i.test(a))&&s.set(a,e)})}function n(s,o){if(typeof s=="object"&&s!==null&&typeof s[o]=="string"){let a=s[o];(/grant_type=/i.test(a)||/assertion=/i.test(a)||/secret/i.test(a))&&(s[o]=e)}}function i(s){!s||typeof s!="object"||(s instanceof FormData||s instanceof URLSearchParams||"forEach"in s&&"set"in s?s.forEach((o,a)=>{(["grant_type","assertion"].includes(a)||/secret/.test(a))&&s.set(a,e)}):("grant_type"in s&&(s.grant_type=e),"assertion"in s&&(s.assertion=e),"client_secret"in s&&(s.client_secret=e)))}return t.config&&(r(t.config.headers),n(t.config,"data"),i(t.config.data),n(t.config,"body"),i(t.config.body),t.config.url.searchParams.has("token")&&t.config.url.searchParams.set("token",e),t.config.url.searchParams.has("client_secret")&&t.config.url.searchParams.set("client_secret",e)),t.response&&(vLe({config:t.response.config}),r(t.response.headers),t.response.bodyUsed&&(n(t.response,"data"),i(t.response.data))),t}});var wLe=m(yie=>{"use strict";Object.defineProperty(yie,"__esModule",{value:!0});yie.getRetryConfig=cWt;async function cWt(t){let e=SLe(t);if(!t||!t.config||!e&&!t.config.retry)return{shouldRetry:!1};e=e||{},e.currentRetryAttempt=e.currentRetryAttempt||0,e.retry=e.retry===void 0||e.retry===null?3:e.retry,e.httpMethodsToRetry=e.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],e.noResponseRetries=e.noResponseRetries===void 0||e.noResponseRetries===null?2:e.noResponseRetries,e.retryDelayMultiplier=e.retryDelayMultiplier?e.retryDelayMultiplier:2,e.timeOfFirstRequest=e.timeOfFirstRequest?e.timeOfFirstRequest:Date.now(),e.totalTimeout=e.totalTimeout?e.totalTimeout:Number.MAX_SAFE_INTEGER,e.maxRetryDelay=e.maxRetryDelay?e.maxRetryDelay:Number.MAX_SAFE_INTEGER;let r=[[100,199],[408,408],[429,429],[500,599]];if(e.statusCodesToRetry=e.statusCodesToRetry||r,t.config.retryConfig=e,!await(e.shouldRetry||lWt)(t))return{shouldRetry:!1,config:t.config};let i=dWt(e);t.config.retryConfig.currentRetryAttempt+=1;let s=e.retryBackoff?e.retryBackoff(t,i):new Promise(o=>{setTimeout(o,i)});return e.onRetryAttempt&&await e.onRetryAttempt(t),await s,{shouldRetry:!0,config:t.config}}function lWt(t){let e=SLe(t);if(t.config.signal?.aborted&&t.code!=="TimeoutError"||t.code==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!e.httpMethodsToRetry||!e.httpMethodsToRetry.includes(t.config.method?.toUpperCase()||"GET"))return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let s=t.response.status;if(s>=n&&s<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function SLe(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}function dWt(t){let r=(t.currentRetryAttempt?0:t.retryDelay??100)+(Math.pow(t.retryDelayMultiplier,t.currentRetryAttempt)-1)/2*1e3,n=t.totalTimeout-(Date.now()-t.timeOfFirstRequest);return Math.min(r,n,t.maxRetryDelay)}});var Eie=m(gP=>{"use strict";Object.defineProperty(gP,"__esModule",{value:!0});gP.GaxiosInterceptorManager=void 0;var gie=class extends Set{};gP.GaxiosInterceptorManager=gie});var CLe=m((dDr,ALe)=>{var C_=1e3,T_=C_*60,O_=T_*60,Og=O_*24,pWt=Og*7,fWt=Og*365.25;ALe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return hWt(t);if(r==="number"&&isFinite(t))return e.long?yWt(t):mWt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function hWt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fWt;case"weeks":case"week":case"w":return r*pWt;case"days":case"day":case"d":return r*Og;case"hours":case"hour":case"hrs":case"hr":case"h":return r*O_;case"minutes":case"minute":case"mins":case"min":case"m":return r*T_;case"seconds":case"second":case"secs":case"sec":case"s":return r*C_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function mWt(t){var e=Math.abs(t);return e>=Og?Math.round(t/Og)+"d":e>=O_?Math.round(t/O_)+"h":e>=T_?Math.round(t/T_)+"m":e>=C_?Math.round(t/C_)+"s":t+"ms"}function yWt(t){var e=Math.abs(t);return e>=Og?EP(t,e,Og,"day"):e>=O_?EP(t,e,O_,"hour"):e>=T_?EP(t,e,T_,"minute"):e>=C_?EP(t,e,C_,"second"):t+" ms"}function EP(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var bie=m((pDr,TLe)=>{function gWt(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=CLe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}TLe.exports=gWt});var OLe=m((ja,bP)=>{ja.formatArgs=bWt;ja.save=_Wt;ja.load=vWt;ja.useColors=EWt;ja.storage=SWt();ja.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ja.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function EWt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bWt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+bP.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ja.log=console.debug||console.log||(()=>{});function _Wt(t){try{t?ja.storage.setItem("debug",t):ja.storage.removeItem("debug")}catch{}}function vWt(){let t;try{t=ja.storage.getItem("debug")||ja.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function SWt(){try{return localStorage}catch{}}bP.exports=bie()(ja);var{formatters:wWt}=bP.exports;wWt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ILe=m((ws,vP)=>{var AWt=require("tty"),_P=require("util");ws.init=DWt;ws.log=xWt;ws.formatArgs=TWt;ws.save=IWt;ws.load=RWt;ws.useColors=CWt;ws.destroy=_P.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ws.colors=[6,2,3,4,5,1];try{let t=A3();t&&(t.stderr||t).level>=2&&(ws.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ws.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function CWt(){return"colors"in ws.inspectOpts?!!ws.inspectOpts.colors:AWt.isatty(process.stderr.fd)}function TWt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+vP.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=OWt()+e+" "+t[0]}function OWt(){return ws.inspectOpts.hideDate?"":new Date().toISOString()+" "}function xWt(...t){return process.stderr.write(_P.formatWithOptions(ws.inspectOpts,...t)+`
`)}function IWt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function RWt(){return process.env.DEBUG}function DWt(t){t.inspectOpts={};let e=Object.keys(ws.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=ws.inspectOpts[e[r]]}vP.exports=bie()(ws);var{formatters:xLe}=vP.exports;xLe.o=function(t){return this.inspectOpts.colors=this.useColors,_P.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};xLe.O=function(t){return this.inspectOpts.colors=this.useColors,_P.inspect(t,this.inspectOpts)}});var vie=m((fDr,_ie)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_ie.exports=OLe():_ie.exports=ILe()});var kLe=m($a=>{"use strict";var kWt=$a&&$a.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),MWt=$a&&$a.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),RLe=$a&&$a.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kWt(e,t,r);return MWt(e,t),e};Object.defineProperty($a,"__esModule",{value:!0});$a.req=$a.json=$a.toBuffer=void 0;var PWt=RLe(require("http")),NWt=RLe(require("https"));async function DLe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}$a.toBuffer=DLe;async function FWt(t){let r=(await DLe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}$a.json=FWt;function BWt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?NWt:PWt).request(t,e),i=new Promise((s,o)=>{n.once("response",s).once("error",o).end()});return n.then=i.then.bind(i),n}$a.req=BWt});var FLe=m(hu=>{"use strict";var PLe=hu&&hu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),qWt=hu&&hu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),NLe=hu&&hu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PLe(e,t,r);return qWt(e,t),e},LWt=hu&&hu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&PLe(e,t,r)};Object.defineProperty(hu,"__esModule",{value:!0});hu.Agent=void 0;var jWt=NLe(require("net")),MLe=NLe(require("http")),$Wt=require("https");LWt(kLe(),hu);var Wd=Symbol("AgentBaseInternalState"),Sie=class extends MLe.Agent{constructor(e){super(e),this[Wd]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new jWt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?$Wt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},s=this.getName(i),o=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,i)).then(a=>{if(this.decrementSockets(s,o),a instanceof MLe.Agent)try{return a.addRequest(e,i)}catch(u){return n(u)}this[Wd].currentSocket=a,super.createSocket(e,r,n)},a=>{this.decrementSockets(s,o),n(a)})}createConnection(){let e=this[Wd].currentSocket;if(this[Wd].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Wd].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Wd]&&(this[Wd].defaultPort=e)}get protocol(){return this[Wd].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Wd]&&(this[Wd].protocol=e)}};hu.Agent=Sie});var BLe=m(x_=>{"use strict";var KWt=x_&&x_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(x_,"__esModule",{value:!0});x_.parseProxyResponse=void 0;var UWt=KWt(vie()),SP=(0,UWt.default)("https-proxy-agent:parse-proxy-response");function VWt(t){return new Promise((e,r)=>{let n=0,i=[];function s(){let l=t.read();l?c(l):t.once("readable",s)}function o(){t.removeListener("end",a),t.removeListener("error",u),t.removeListener("readable",s)}function a(){o(),SP("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}function u(l){o(),SP("onerror %o",l),r(l)}function c(l){i.push(l),n+=l.length;let d=Buffer.concat(i,n),p=d.indexOf(`\r
\r
`);if(p===-1){SP("have not received end of HTTP headers yet..."),s();return}let f=d.slice(0,p).toString("ascii").split(`\r
`),h=f.shift();if(!h)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let g=h.split(" "),_=+g[1],S=g.slice(2).join(" "),w={};for(let C of f){if(!C)continue;let A=C.indexOf(":");if(A===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${C}"`));let O=C.slice(0,A).toLowerCase(),x=C.slice(A+1).trimStart(),R=w[O];typeof R=="string"?w[O]=[R,x]:Array.isArray(R)?R.push(x):w[O]=x}SP("got proxy server response: %o %o",h,w),o(),e({connect:{statusCode:_,statusText:S,headers:w},buffered:d})}t.on("error",u),t.on("end",a),s()})}x_.parseProxyResponse=VWt});var ULe=m(kc=>{"use strict";var GWt=kc&&kc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),HWt=kc&&kc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),$Le=kc&&kc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GWt(e,t,r);return HWt(e,t),e},KLe=kc&&kc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kc,"__esModule",{value:!0});kc.HttpsProxyAgent=void 0;var wP=$Le(require("net")),qLe=$Le(require("tls")),zWt=KLe(require("assert")),WWt=KLe(vie()),JWt=FLe(),YWt=require("url"),QWt=BLe(),Z9=(0,WWt.default)("https-proxy-agent"),LLe=t=>t.servername===void 0&&t.host&&!wP.isIP(t.host)?{...t,servername:t.host}:t,AP=class extends JWt.Agent{constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new YWt.URL(e):e,this.proxyHeaders=r?.headers??{},Z9("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?jLe(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;n.protocol==="https:"?(Z9("Creating `tls.Socket`: %o",this.connectOpts),i=qLe.connect(LLe(this.connectOpts))):(Z9("Creating `net.Socket`: %o",this.connectOpts),i=wP.connect(this.connectOpts));let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},o=wP.isIPv6(r.host)?`[${r.host}]`:r.host,a=`CONNECT ${o}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let p=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(p).toString("base64")}`}s.Host=`${o}:${r.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let p of Object.keys(s))a+=`${p}: ${s[p]}\r
`;let u=(0,QWt.parseProxyResponse)(i);i.write(`${a}\r
`);let{connect:c,buffered:l}=await u;if(e.emit("proxyConnect",c),this.emit("proxyConnect",c,e),c.statusCode===200)return e.once("socket",XWt),r.secureEndpoint?(Z9("Upgrading socket connection to TLS"),qLe.connect({...jLe(LLe(r),"host","path","port"),socket:i})):i;i.destroy();let d=new wP.Socket({writable:!1});return d.readable=!0,e.once("socket",p=>{Z9("Replaying proxy buffer for failed request"),(0,zWt.default)(p.listenerCount("data")>0),p.push(l),p.push(null)}),d}};AP.protocols=["http","https"];kc.HttpsProxyAgent=AP;function XWt(t){t.resume()}function jLe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});function ZWt(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,s=r[0]||"text/plain",o=s;for(let l=1;l<r.length;l++)r[l]==="base64"?i=!0:r[l]&&(o+=`;${r[l]}`,r[l].indexOf("charset=")===0&&(n=r[l].substring(8)));!r[0]&&!n.length&&(o+=";charset=US-ASCII",n="US-ASCII");let a=i?"base64":"ascii",u=unescape(t.substring(e+1)),c=Buffer.from(u,a);return c.type=s,c.typeFull=o,c.charset=n,c}var VLe,GLe=le(()=>{VLe=ZWt});var zLe=m((CP,HLe)=>{(function(t,e){typeof CP=="object"&&typeof HLe<"u"?e(CP):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(CP,(function(t){"use strict";function e(){}function r(E){return typeof E=="object"&&E!==null||typeof E=="function"}let n=e;function i(E,v){try{Object.defineProperty(E,"name",{value:v,configurable:!0})}catch{}}let s=Promise,o=Promise.prototype.then,a=Promise.reject.bind(s);function u(E){return new s(E)}function c(E){return u(v=>v(E))}function l(E){return a(E)}function d(E,v,T){return o.call(E,v,T)}function p(E,v,T){d(d(E,v,T),void 0,n)}function f(E,v){p(E,v)}function h(E,v){p(E,void 0,v)}function g(E,v,T){return d(E,v,T)}function _(E){d(E,void 0,n)}let S=E=>{if(typeof queueMicrotask=="function")S=queueMicrotask;else{let v=c(void 0);S=T=>d(v,T)}return S(E)};function w(E,v,T){if(typeof E!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(E,v,T)}function C(E,v,T){try{return c(w(E,v,T))}catch(q){return l(q)}}let A=16384;class O{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(v){let T=this._back,q=T;T._elements.length===A-1&&(q={_elements:[],_next:void 0}),T._elements.push(v),q!==T&&(this._back=q,T._next=q),++this._size}shift(){let v=this._front,T=v,q=this._cursor,W=q+1,he=v._elements,_e=he[q];return W===A&&(T=v._next,W=0),--this._size,this._cursor=W,v!==T&&(this._front=T),he[q]=void 0,_e}forEach(v){let T=this._cursor,q=this._front,W=q._elements;for(;(T!==W.length||q._next!==void 0)&&!(T===W.length&&(q=q._next,W=q._elements,T=0,W.length===0));)v(W[T]),++T}peek(){let v=this._front,T=this._cursor;return v._elements[T]}}let x=Symbol("[[AbortSteps]]"),R=Symbol("[[ErrorSteps]]"),M=Symbol("[[CancelSteps]]"),I=Symbol("[[PullSteps]]"),F=Symbol("[[ReleaseSteps]]");function B(E,v){E._ownerReadableStream=v,v._reader=E,v._state==="readable"?ie(E):v._state==="closed"?V(E):j(E,v._storedError)}function U(E,v){let T=E._ownerReadableStream;return Yc(T,v)}function k(E){let v=E._ownerReadableStream;v._state==="readable"?Ee(E,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Re(E,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),v._readableStreamController[F](),v._reader=void 0,E._ownerReadableStream=void 0}function H(E){return new TypeError("Cannot "+E+" a stream using a released reader")}function ie(E){E._closedPromise=u((v,T)=>{E._closedPromise_resolve=v,E._closedPromise_reject=T})}function j(E,v){ie(E),Ee(E,v)}function V(E){ie(E),fe(E)}function Ee(E,v){E._closedPromise_reject!==void 0&&(_(E._closedPromise),E._closedPromise_reject(v),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0)}function Re(E,v){j(E,v)}function fe(E){E._closedPromise_resolve!==void 0&&(E._closedPromise_resolve(void 0),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0)}let Ve=Number.isFinite||function(E){return typeof E=="number"&&isFinite(E)},Me=Math.trunc||function(E){return E<0?Math.ceil(E):Math.floor(E)};function Ce(E){return typeof E=="object"||typeof E=="function"}function Rr(E,v){if(E!==void 0&&!Ce(E))throw new TypeError(`${v} is not an object.`)}function _t(E,v){if(typeof E!="function")throw new TypeError(`${v} is not a function.`)}function sa(E){return typeof E=="object"&&E!==null||typeof E=="function"}function hi(E,v){if(!sa(E))throw new TypeError(`${v} is not an object.`)}function tr(E,v,T){if(E===void 0)throw new TypeError(`Parameter ${v} is required in '${T}'.`)}function P(E,v,T){if(E===void 0)throw new TypeError(`${v} is required in '${T}'.`)}function $(E){return Number(E)}function G(E){return E===0?0:E}function ne(E){return G(Me(E))}function Y(E,v){let q=Number.MAX_SAFE_INTEGER,W=Number(E);if(W=G(W),!Ve(W))throw new TypeError(`${v} is not a finite number`);if(W=ne(W),W<0||W>q)throw new TypeError(`${v} is outside the accepted range of 0 to ${q}, inclusive`);return!Ve(W)||W===0?0:W}function te(E,v){if(!a1(E))throw new TypeError(`${v} is not a ReadableStream.`)}function de(E){return new Se(E)}function z(E,v){E._reader._readRequests.push(v)}function X(E,v,T){let W=E._reader._readRequests.shift();T?W._closeSteps():W._chunkSteps(v)}function ue(E){return E._reader._readRequests.length}function se(E){let v=E._reader;return!(v===void 0||!He(v))}class Se{constructor(v){if(tr(v,1,"ReadableStreamDefaultReader"),te(v,"First parameter"),u1(v))throw new TypeError("This stream has already been locked for exclusive reading by another reader");B(this,v),this._readRequests=new O}get closed(){return He(this)?this._closedPromise:l(Lr("closed"))}cancel(v=void 0){return He(this)?this._ownerReadableStream===void 0?l(H("cancel")):U(this,v):l(Lr("cancel"))}read(){if(!He(this))return l(Lr("read"));if(this._ownerReadableStream===void 0)return l(H("read from"));let v,T,q=u((he,_e)=>{v=he,T=_e});return tt(this,{_chunkSteps:he=>v({value:he,done:!1}),_closeSteps:()=>v({value:void 0,done:!0}),_errorSteps:he=>T(he)}),q}releaseLock(){if(!He(this))throw Lr("releaseLock");this._ownerReadableStream!==void 0&&zt(this)}}Object.defineProperties(Se.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(Se.prototype.cancel,"cancel"),i(Se.prototype.read,"read"),i(Se.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Se.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function He(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_readRequests")?!1:E instanceof Se}function tt(E,v){let T=E._ownerReadableStream;T._disturbed=!0,T._state==="closed"?v._closeSteps():T._state==="errored"?v._errorSteps(T._storedError):T._readableStreamController[I](v)}function zt(E){k(E);let v=new TypeError("Reader was released");Nr(E,v)}function Nr(E,v){let T=E._readRequests;E._readRequests=new O,T.forEach(q=>{q._errorSteps(v)})}function Lr(E){return new TypeError(`ReadableStreamDefaultReader.prototype.${E} can only be used on a ReadableStreamDefaultReader`)}let Rt=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ur{constructor(v,T){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=v,this._preventCancel=T}next(){let v=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?g(this._ongoingPromise,v,v):v(),this._ongoingPromise}return(v){let T=()=>this._returnSteps(v);return this._ongoingPromise?g(this._ongoingPromise,T,T):T()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let v=this._reader,T,q,W=u((_e,ze)=>{T=_e,q=ze});return tt(v,{_chunkSteps:_e=>{this._ongoingPromise=void 0,S(()=>T({value:_e,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,k(v),T({value:void 0,done:!0})},_errorSteps:_e=>{this._ongoingPromise=void 0,this._isFinished=!0,k(v),q(_e)}}),W}_returnSteps(v){if(this._isFinished)return Promise.resolve({value:v,done:!0});this._isFinished=!0;let T=this._reader;if(!this._preventCancel){let q=U(T,v);return k(T),g(q,()=>({value:v,done:!0}))}return k(T),c({value:v,done:!0})}}let kn={next(){return Fu(this)?this._asyncIteratorImpl.next():l(Z("next"))},return(E){return Fu(this)?this._asyncIteratorImpl.return(E):l(Z("return"))}};Object.setPrototypeOf(kn,Rt);function Wc(E,v){let T=de(E),q=new ur(T,v),W=Object.create(kn);return W._asyncIteratorImpl=q,W}function Fu(E){if(!r(E)||!Object.prototype.hasOwnProperty.call(E,"_asyncIteratorImpl"))return!1;try{return E._asyncIteratorImpl instanceof ur}catch{return!1}}function Z(E){return new TypeError(`ReadableStreamAsyncIterator.${E} can only be used on a ReadableSteamAsyncIterator`)}let oe=Number.isNaN||function(E){return E!==E};var D,N,K;function Q(E){return E.slice()}function Oe(E,v,T,q,W){new Uint8Array(E).set(new Uint8Array(T,q,W),v)}let Ie=E=>(typeof E.transfer=="function"?Ie=v=>v.transfer():typeof structuredClone=="function"?Ie=v=>structuredClone(v,{transfer:[v]}):Ie=v=>v,Ie(E)),be=E=>(typeof E.detached=="boolean"?be=v=>v.detached:be=v=>v.byteLength===0,be(E));function xe(E,v,T){if(E.slice)return E.slice(v,T);let q=T-v,W=new ArrayBuffer(q);return Oe(W,0,E,v,q),W}function Fe(E,v){let T=E[v];if(T!=null){if(typeof T!="function")throw new TypeError(`${String(v)} is not a function`);return T}}function je(E){let v={[Symbol.iterator]:()=>E.iterator},T=(async function*(){return yield*v})(),q=T.next;return{iterator:T,nextMethod:q,done:!1}}let ft=(K=(D=Symbol.asyncIterator)!==null&&D!==void 0?D:(N=Symbol.for)===null||N===void 0?void 0:N.call(Symbol,"Symbol.asyncIterator"))!==null&&K!==void 0?K:"@@asyncIterator";function cr(E,v="sync",T){if(T===void 0)if(v==="async"){if(T=Fe(E,ft),T===void 0){let he=Fe(E,Symbol.iterator),_e=cr(E,"sync",he);return je(_e)}}else T=Fe(E,Symbol.iterator);if(T===void 0)throw new TypeError("The object is not iterable");let q=w(T,E,[]);if(!r(q))throw new TypeError("The iterator method must return an object");let W=q.next;return{iterator:q,nextMethod:W,done:!1}}function vn(E){let v=w(E.nextMethod,E.iterator,[]);if(!r(v))throw new TypeError("The iterator.next() method must return an object");return v}function Ga(E){return!!E.done}function S8(E){return E.value}function qq(E){return!(typeof E!="number"||oe(E)||E<0)}function w8(E){let v=xe(E.buffer,E.byteOffset,E.byteOffset+E.byteLength);return new Uint8Array(v)}function Lq(E){let v=E._queue.shift();return E._queueTotalSize-=v.size,E._queueTotalSize<0&&(E._queueTotalSize=0),v.value}function jq(E,v,T){if(!qq(T)||T===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");E._queue.push({value:v,size:T}),E._queueTotalSize+=T}function stt(E){return E._queue.peek().value}function i1(E){E._queue=new O,E._queueTotalSize=0}function Sle(E){return E===DataView}function ott(E){return Sle(E.constructor)}function att(E){return Sle(E)?1:E.BYTES_PER_ELEMENT}class qm{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!$q(this))throw Hq("view");return this._view}respond(v){if(!$q(this))throw Hq("respond");if(tr(v,1,"respond"),v=Y(v,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(be(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");O8(this._associatedReadableByteStreamController,v)}respondWithNewView(v){if(!$q(this))throw Hq("respondWithNewView");if(tr(v,1,"respondWithNewView"),!ArrayBuffer.isView(v))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(be(v.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");x8(this._associatedReadableByteStreamController,v)}}Object.defineProperties(qm.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),i(qm.prototype.respond,"respond"),i(qm.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(qm.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class pp{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Lm(this))throw P4("byobRequest");return Gq(this)}get desiredSize(){if(!Lm(this))throw P4("desiredSize");return kle(this)}close(){if(!Lm(this))throw P4("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let v=this._controlledReadableByteStream._state;if(v!=="readable")throw new TypeError(`The stream (in ${v} state) is not in the readable state and cannot be closed`);M4(this)}enqueue(v){if(!Lm(this))throw P4("enqueue");if(tr(v,1,"enqueue"),!ArrayBuffer.isView(v))throw new TypeError("chunk must be an array buffer view");if(v.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(v.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let T=this._controlledReadableByteStream._state;if(T!=="readable")throw new TypeError(`The stream (in ${T} state) is not in the readable state and cannot be enqueued to`);T8(this,v)}error(v=void 0){if(!Lm(this))throw P4("error");Bu(this,v)}[M](v){wle(this),i1(this);let T=this._cancelAlgorithm(v);return C8(this),T}[I](v){let T=this._controlledReadableByteStream;if(this._queueTotalSize>0){Dle(this,v);return}let q=this._autoAllocateChunkSize;if(q!==void 0){let W;try{W=new ArrayBuffer(q)}catch(_e){v._errorSteps(_e);return}let he={buffer:W,bufferByteLength:q,byteOffset:0,byteLength:q,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(he)}z(T,v),jm(this)}[F](){if(this._pendingPullIntos.length>0){let v=this._pendingPullIntos.peek();v.readerType="none",this._pendingPullIntos=new O,this._pendingPullIntos.push(v)}}}Object.defineProperties(pp.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),i(pp.prototype.close,"close"),i(pp.prototype.enqueue,"enqueue"),i(pp.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(pp.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Lm(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledReadableByteStream")?!1:E instanceof pp}function $q(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_associatedReadableByteStreamController")?!1:E instanceof qm}function jm(E){if(!ptt(E))return;if(E._pulling){E._pullAgain=!0;return}E._pulling=!0;let T=E._pullAlgorithm();p(T,()=>(E._pulling=!1,E._pullAgain&&(E._pullAgain=!1,jm(E)),null),q=>(Bu(E,q),null))}function wle(E){Uq(E),E._pendingPullIntos=new O}function Kq(E,v){let T=!1;E._state==="closed"&&(T=!0);let q=Ale(v);v.readerType==="default"?X(E,q,T):Ett(E,q,T)}function Ale(E){let v=E.bytesFilled,T=E.elementSize;return new E.viewConstructor(E.buffer,E.byteOffset,v/T)}function A8(E,v,T,q){E._queue.push({buffer:v,byteOffset:T,byteLength:q}),E._queueTotalSize+=q}function Cle(E,v,T,q){let W;try{W=xe(v,T,T+q)}catch(he){throw Bu(E,he),he}A8(E,W,0,q)}function Tle(E,v){v.bytesFilled>0&&Cle(E,v.buffer,v.byteOffset,v.bytesFilled),v2(E)}function Ole(E,v){let T=Math.min(E._queueTotalSize,v.byteLength-v.bytesFilled),q=v.bytesFilled+T,W=T,he=!1,_e=q%v.elementSize,ze=q-_e;ze>=v.minimumFill&&(W=ze-v.bytesFilled,he=!0);let wt=E._queue;for(;W>0;){let ct=wt.peek(),kt=Math.min(W,ct.byteLength),Wt=v.byteOffset+v.bytesFilled;Oe(v.buffer,Wt,ct.buffer,ct.byteOffset,kt),ct.byteLength===kt?wt.shift():(ct.byteOffset+=kt,ct.byteLength-=kt),E._queueTotalSize-=kt,xle(E,kt,v),W-=kt}return he}function xle(E,v,T){T.bytesFilled+=v}function Ile(E){E._queueTotalSize===0&&E._closeRequested?(C8(E),j4(E._controlledReadableByteStream)):jm(E)}function Uq(E){E._byobRequest!==null&&(E._byobRequest._associatedReadableByteStreamController=void 0,E._byobRequest._view=null,E._byobRequest=null)}function Vq(E){for(;E._pendingPullIntos.length>0;){if(E._queueTotalSize===0)return;let v=E._pendingPullIntos.peek();Ole(E,v)&&(v2(E),Kq(E._controlledReadableByteStream,v))}}function utt(E){let v=E._controlledReadableByteStream._reader;for(;v._readRequests.length>0;){if(E._queueTotalSize===0)return;let T=v._readRequests.shift();Dle(E,T)}}function ctt(E,v,T,q){let W=E._controlledReadableByteStream,he=v.constructor,_e=att(he),{byteOffset:ze,byteLength:wt}=v,ct=T*_e,kt;try{kt=Ie(v.buffer)}catch(Qr){q._errorSteps(Qr);return}let Wt={buffer:kt,bufferByteLength:kt.byteLength,byteOffset:ze,byteLength:wt,bytesFilled:0,minimumFill:ct,elementSize:_e,viewConstructor:he,readerType:"byob"};if(E._pendingPullIntos.length>0){E._pendingPullIntos.push(Wt),Nle(W,q);return}if(W._state==="closed"){let Qr=new he(Wt.buffer,Wt.byteOffset,0);q._closeSteps(Qr);return}if(E._queueTotalSize>0){if(Ole(E,Wt)){let Qr=Ale(Wt);Ile(E),q._chunkSteps(Qr);return}if(E._closeRequested){let Qr=new TypeError("Insufficient bytes to fill elements in the given buffer");Bu(E,Qr),q._errorSteps(Qr);return}}E._pendingPullIntos.push(Wt),Nle(W,q),jm(E)}function ltt(E,v){v.readerType==="none"&&v2(E);let T=E._controlledReadableByteStream;if(zq(T))for(;Fle(T)>0;){let q=v2(E);Kq(T,q)}}function dtt(E,v,T){if(xle(E,v,T),T.readerType==="none"){Tle(E,T),Vq(E);return}if(T.bytesFilled<T.minimumFill)return;v2(E);let q=T.bytesFilled%T.elementSize;if(q>0){let W=T.byteOffset+T.bytesFilled;Cle(E,T.buffer,W-q,q)}T.bytesFilled-=q,Kq(E._controlledReadableByteStream,T),Vq(E)}function Rle(E,v){let T=E._pendingPullIntos.peek();Uq(E),E._controlledReadableByteStream._state==="closed"?ltt(E,T):dtt(E,v,T),jm(E)}function v2(E){return E._pendingPullIntos.shift()}function ptt(E){let v=E._controlledReadableByteStream;return v._state!=="readable"||E._closeRequested||!E._started?!1:!!(se(v)&&ue(v)>0||zq(v)&&Fle(v)>0||kle(E)>0)}function C8(E){E._pullAlgorithm=void 0,E._cancelAlgorithm=void 0}function M4(E){let v=E._controlledReadableByteStream;if(!(E._closeRequested||v._state!=="readable")){if(E._queueTotalSize>0){E._closeRequested=!0;return}if(E._pendingPullIntos.length>0){let T=E._pendingPullIntos.peek();if(T.bytesFilled%T.elementSize!==0){let q=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Bu(E,q),q}}C8(E),j4(v)}}function T8(E,v){let T=E._controlledReadableByteStream;if(E._closeRequested||T._state!=="readable")return;let{buffer:q,byteOffset:W,byteLength:he}=v;if(be(q))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let _e=Ie(q);if(E._pendingPullIntos.length>0){let ze=E._pendingPullIntos.peek();if(be(ze.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Uq(E),ze.buffer=Ie(ze.buffer),ze.readerType==="none"&&Tle(E,ze)}if(se(T))if(utt(E),ue(T)===0)A8(E,_e,W,he);else{E._pendingPullIntos.length>0&&v2(E);let ze=new Uint8Array(_e,W,he);X(T,ze,!1)}else zq(T)?(A8(E,_e,W,he),Vq(E)):A8(E,_e,W,he);jm(E)}function Bu(E,v){let T=E._controlledReadableByteStream;T._state==="readable"&&(wle(E),i1(E),C8(E),ode(T,v))}function Dle(E,v){let T=E._queue.shift();E._queueTotalSize-=T.byteLength,Ile(E);let q=new Uint8Array(T.buffer,T.byteOffset,T.byteLength);v._chunkSteps(q)}function Gq(E){if(E._byobRequest===null&&E._pendingPullIntos.length>0){let v=E._pendingPullIntos.peek(),T=new Uint8Array(v.buffer,v.byteOffset+v.bytesFilled,v.byteLength-v.bytesFilled),q=Object.create(qm.prototype);htt(q,E,T),E._byobRequest=q}return E._byobRequest}function kle(E){let v=E._controlledReadableByteStream._state;return v==="errored"?null:v==="closed"?0:E._strategyHWM-E._queueTotalSize}function O8(E,v){let T=E._pendingPullIntos.peek();if(E._controlledReadableByteStream._state==="closed"){if(v!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(v===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(T.bytesFilled+v>T.byteLength)throw new RangeError("bytesWritten out of range")}T.buffer=Ie(T.buffer),Rle(E,v)}function x8(E,v){let T=E._pendingPullIntos.peek();if(E._controlledReadableByteStream._state==="closed"){if(v.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(v.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(T.byteOffset+T.bytesFilled!==v.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(T.bufferByteLength!==v.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(T.bytesFilled+v.byteLength>T.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let W=v.byteLength;T.buffer=Ie(v.buffer),Rle(E,W)}function Mle(E,v,T,q,W,he,_e){v._controlledReadableByteStream=E,v._pullAgain=!1,v._pulling=!1,v._byobRequest=null,v._queue=v._queueTotalSize=void 0,i1(v),v._closeRequested=!1,v._started=!1,v._strategyHWM=he,v._pullAlgorithm=q,v._cancelAlgorithm=W,v._autoAllocateChunkSize=_e,v._pendingPullIntos=new O,E._readableStreamController=v;let ze=T();p(c(ze),()=>(v._started=!0,jm(v),null),wt=>(Bu(v,wt),null))}function ftt(E,v,T){let q=Object.create(pp.prototype),W,he,_e;v.start!==void 0?W=()=>v.start(q):W=()=>{},v.pull!==void 0?he=()=>v.pull(q):he=()=>c(void 0),v.cancel!==void 0?_e=wt=>v.cancel(wt):_e=()=>c(void 0);let ze=v.autoAllocateChunkSize;if(ze===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Mle(E,q,W,he,_e,T,ze)}function htt(E,v,T){E._associatedReadableByteStreamController=v,E._view=T}function Hq(E){return new TypeError(`ReadableStreamBYOBRequest.prototype.${E} can only be used on a ReadableStreamBYOBRequest`)}function P4(E){return new TypeError(`ReadableByteStreamController.prototype.${E} can only be used on a ReadableByteStreamController`)}function mtt(E,v){Rr(E,v);let T=E?.mode;return{mode:T===void 0?void 0:ytt(T,`${v} has member 'mode' that`)}}function ytt(E,v){if(E=`${E}`,E!=="byob")throw new TypeError(`${v} '${E}' is not a valid enumeration value for ReadableStreamReaderMode`);return E}function gtt(E,v){var T;Rr(E,v);let q=(T=E?.min)!==null&&T!==void 0?T:1;return{min:Y(q,`${v} has member 'min' that`)}}function Ple(E){return new s1(E)}function Nle(E,v){E._reader._readIntoRequests.push(v)}function Ett(E,v,T){let W=E._reader._readIntoRequests.shift();T?W._closeSteps(v):W._chunkSteps(v)}function Fle(E){return E._reader._readIntoRequests.length}function zq(E){let v=E._reader;return!(v===void 0||!$m(v))}class s1{constructor(v){if(tr(v,1,"ReadableStreamBYOBReader"),te(v,"First parameter"),u1(v))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Lm(v._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");B(this,v),this._readIntoRequests=new O}get closed(){return $m(this)?this._closedPromise:l(I8("closed"))}cancel(v=void 0){return $m(this)?this._ownerReadableStream===void 0?l(H("cancel")):U(this,v):l(I8("cancel"))}read(v,T={}){if(!$m(this))return l(I8("read"));if(!ArrayBuffer.isView(v))return l(new TypeError("view must be an array buffer view"));if(v.byteLength===0)return l(new TypeError("view must have non-zero byteLength"));if(v.buffer.byteLength===0)return l(new TypeError("view's buffer must have non-zero byteLength"));if(be(v.buffer))return l(new TypeError("view's buffer has been detached"));let q;try{q=gtt(T,"options")}catch(ct){return l(ct)}let W=q.min;if(W===0)return l(new TypeError("options.min must be greater than 0"));if(ott(v)){if(W>v.byteLength)return l(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(W>v.length)return l(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return l(H("read from"));let he,_e,ze=u((ct,kt)=>{he=ct,_e=kt});return Ble(this,v,W,{_chunkSteps:ct=>he({value:ct,done:!1}),_closeSteps:ct=>he({value:ct,done:!0}),_errorSteps:ct=>_e(ct)}),ze}releaseLock(){if(!$m(this))throw I8("releaseLock");this._ownerReadableStream!==void 0&&btt(this)}}Object.defineProperties(s1.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(s1.prototype.cancel,"cancel"),i(s1.prototype.read,"read"),i(s1.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(s1.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function $m(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_readIntoRequests")?!1:E instanceof s1}function Ble(E,v,T,q){let W=E._ownerReadableStream;W._disturbed=!0,W._state==="errored"?q._errorSteps(W._storedError):ctt(W._readableStreamController,v,T,q)}function btt(E){k(E);let v=new TypeError("Reader was released");qle(E,v)}function qle(E,v){let T=E._readIntoRequests;E._readIntoRequests=new O,T.forEach(q=>{q._errorSteps(v)})}function I8(E){return new TypeError(`ReadableStreamBYOBReader.prototype.${E} can only be used on a ReadableStreamBYOBReader`)}function N4(E,v){let{highWaterMark:T}=E;if(T===void 0)return v;if(oe(T)||T<0)throw new RangeError("Invalid highWaterMark");return T}function R8(E){let{size:v}=E;return v||(()=>1)}function D8(E,v){Rr(E,v);let T=E?.highWaterMark,q=E?.size;return{highWaterMark:T===void 0?void 0:$(T),size:q===void 0?void 0:_tt(q,`${v} has member 'size' that`)}}function _tt(E,v){return _t(E,v),T=>$(E(T))}function vtt(E,v){Rr(E,v);let T=E?.abort,q=E?.close,W=E?.start,he=E?.type,_e=E?.write;return{abort:T===void 0?void 0:Stt(T,E,`${v} has member 'abort' that`),close:q===void 0?void 0:wtt(q,E,`${v} has member 'close' that`),start:W===void 0?void 0:Att(W,E,`${v} has member 'start' that`),write:_e===void 0?void 0:Ctt(_e,E,`${v} has member 'write' that`),type:he}}function Stt(E,v,T){return _t(E,T),q=>C(E,v,[q])}function wtt(E,v,T){return _t(E,T),()=>C(E,v,[])}function Att(E,v,T){return _t(E,T),q=>w(E,v,[q])}function Ctt(E,v,T){return _t(E,T),(q,W)=>C(E,v,[q,W])}function Lle(E,v){if(!S2(E))throw new TypeError(`${v} is not a WritableStream.`)}function Ttt(E){if(typeof E!="object"||E===null)return!1;try{return typeof E.aborted=="boolean"}catch{return!1}}let Ott=typeof AbortController=="function";function xtt(){if(Ott)return new AbortController}class o1{constructor(v={},T={}){v===void 0?v=null:hi(v,"First parameter");let q=D8(T,"Second parameter"),W=vtt(v,"First parameter");if($le(this),W.type!==void 0)throw new RangeError("Invalid type is specified");let _e=R8(q),ze=N4(q,1);Ktt(this,W,ze,_e)}get locked(){if(!S2(this))throw F8("locked");return w2(this)}abort(v=void 0){return S2(this)?w2(this)?l(new TypeError("Cannot abort a stream that already has a writer")):k8(this,v):l(F8("abort"))}close(){return S2(this)?w2(this)?l(new TypeError("Cannot close a stream that already has a writer")):cd(this)?l(new TypeError("Cannot close an already-closing stream")):Kle(this):l(F8("close"))}getWriter(){if(!S2(this))throw F8("getWriter");return jle(this)}}Object.defineProperties(o1.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),i(o1.prototype.abort,"abort"),i(o1.prototype.close,"close"),i(o1.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(o1.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function jle(E){return new fp(E)}function Itt(E,v,T,q,W=1,he=()=>1){let _e=Object.create(o1.prototype);$le(_e);let ze=Object.create(A2.prototype);return Wle(_e,ze,E,v,T,q,W,he),_e}function $le(E){E._state="writable",E._storedError=void 0,E._writer=void 0,E._writableStreamController=void 0,E._writeRequests=new O,E._inFlightWriteRequest=void 0,E._closeRequest=void 0,E._inFlightCloseRequest=void 0,E._pendingAbortRequest=void 0,E._backpressure=!1}function S2(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_writableStreamController")?!1:E instanceof o1}function w2(E){return E._writer!==void 0}function k8(E,v){var T;if(E._state==="closed"||E._state==="errored")return c(void 0);E._writableStreamController._abortReason=v,(T=E._writableStreamController._abortController)===null||T===void 0||T.abort(v);let q=E._state;if(q==="closed"||q==="errored")return c(void 0);if(E._pendingAbortRequest!==void 0)return E._pendingAbortRequest._promise;let W=!1;q==="erroring"&&(W=!0,v=void 0);let he=u((_e,ze)=>{E._pendingAbortRequest={_promise:void 0,_resolve:_e,_reject:ze,_reason:v,_wasAlreadyErroring:W}});return E._pendingAbortRequest._promise=he,W||Jq(E,v),he}function Kle(E){let v=E._state;if(v==="closed"||v==="errored")return l(new TypeError(`The stream (in ${v} state) is not in the writable state and cannot be closed`));let T=u((W,he)=>{let _e={_resolve:W,_reject:he};E._closeRequest=_e}),q=E._writer;return q!==void 0&&E._backpressure&&v==="writable"&&nL(q),Utt(E._writableStreamController),T}function Rtt(E){return u((T,q)=>{let W={_resolve:T,_reject:q};E._writeRequests.push(W)})}function Wq(E,v){if(E._state==="writable"){Jq(E,v);return}Yq(E)}function Jq(E,v){let T=E._writableStreamController;E._state="erroring",E._storedError=v;let q=E._writer;q!==void 0&&Vle(q,v),!Ntt(E)&&T._started&&Yq(E)}function Yq(E){E._state="errored",E._writableStreamController[R]();let v=E._storedError;if(E._writeRequests.forEach(W=>{W._reject(v)}),E._writeRequests=new O,E._pendingAbortRequest===void 0){M8(E);return}let T=E._pendingAbortRequest;if(E._pendingAbortRequest=void 0,T._wasAlreadyErroring){T._reject(v),M8(E);return}let q=E._writableStreamController[x](T._reason);p(q,()=>(T._resolve(),M8(E),null),W=>(T._reject(W),M8(E),null))}function Dtt(E){E._inFlightWriteRequest._resolve(void 0),E._inFlightWriteRequest=void 0}function ktt(E,v){E._inFlightWriteRequest._reject(v),E._inFlightWriteRequest=void 0,Wq(E,v)}function Mtt(E){E._inFlightCloseRequest._resolve(void 0),E._inFlightCloseRequest=void 0,E._state==="erroring"&&(E._storedError=void 0,E._pendingAbortRequest!==void 0&&(E._pendingAbortRequest._resolve(),E._pendingAbortRequest=void 0)),E._state="closed";let T=E._writer;T!==void 0&&Xle(T)}function Ptt(E,v){E._inFlightCloseRequest._reject(v),E._inFlightCloseRequest=void 0,E._pendingAbortRequest!==void 0&&(E._pendingAbortRequest._reject(v),E._pendingAbortRequest=void 0),Wq(E,v)}function cd(E){return!(E._closeRequest===void 0&&E._inFlightCloseRequest===void 0)}function Ntt(E){return!(E._inFlightWriteRequest===void 0&&E._inFlightCloseRequest===void 0)}function Ftt(E){E._inFlightCloseRequest=E._closeRequest,E._closeRequest=void 0}function Btt(E){E._inFlightWriteRequest=E._writeRequests.shift()}function M8(E){E._closeRequest!==void 0&&(E._closeRequest._reject(E._storedError),E._closeRequest=void 0);let v=E._writer;v!==void 0&&tL(v,E._storedError)}function Qq(E,v){let T=E._writer;T!==void 0&&v!==E._backpressure&&(v?Ytt(T):nL(T)),E._backpressure=v}class fp{constructor(v){if(tr(v,1,"WritableStreamDefaultWriter"),Lle(v,"First parameter"),w2(v))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=v,v._writer=this;let T=v._state;if(T==="writable")!cd(v)&&v._backpressure?q8(this):Zle(this),B8(this);else if(T==="erroring")rL(this,v._storedError),B8(this);else if(T==="closed")Zle(this),Wtt(this);else{let q=v._storedError;rL(this,q),Qle(this,q)}}get closed(){return Km(this)?this._closedPromise:l(Um("closed"))}get desiredSize(){if(!Km(this))throw Um("desiredSize");if(this._ownerWritableStream===void 0)throw B4("desiredSize");return $tt(this)}get ready(){return Km(this)?this._readyPromise:l(Um("ready"))}abort(v=void 0){return Km(this)?this._ownerWritableStream===void 0?l(B4("abort")):qtt(this,v):l(Um("abort"))}close(){if(!Km(this))return l(Um("close"));let v=this._ownerWritableStream;return v===void 0?l(B4("close")):cd(v)?l(new TypeError("Cannot close an already-closing stream")):Ule(this)}releaseLock(){if(!Km(this))throw Um("releaseLock");this._ownerWritableStream!==void 0&&Gle(this)}write(v=void 0){return Km(this)?this._ownerWritableStream===void 0?l(B4("write to")):Hle(this,v):l(Um("write"))}}Object.defineProperties(fp.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),i(fp.prototype.abort,"abort"),i(fp.prototype.close,"close"),i(fp.prototype.releaseLock,"releaseLock"),i(fp.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(fp.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Km(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_ownerWritableStream")?!1:E instanceof fp}function qtt(E,v){let T=E._ownerWritableStream;return k8(T,v)}function Ule(E){let v=E._ownerWritableStream;return Kle(v)}function Ltt(E){let v=E._ownerWritableStream,T=v._state;return cd(v)||T==="closed"?c(void 0):T==="errored"?l(v._storedError):Ule(E)}function jtt(E,v){E._closedPromiseState==="pending"?tL(E,v):Jtt(E,v)}function Vle(E,v){E._readyPromiseState==="pending"?ede(E,v):Qtt(E,v)}function $tt(E){let v=E._ownerWritableStream,T=v._state;return T==="errored"||T==="erroring"?null:T==="closed"?0:Jle(v._writableStreamController)}function Gle(E){let v=E._ownerWritableStream,T=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Vle(E,T),jtt(E,T),v._writer=void 0,E._ownerWritableStream=void 0}function Hle(E,v){let T=E._ownerWritableStream,q=T._writableStreamController,W=Vtt(q,v);if(T!==E._ownerWritableStream)return l(B4("write to"));let he=T._state;if(he==="errored")return l(T._storedError);if(cd(T)||he==="closed")return l(new TypeError("The stream is closing or closed and cannot be written to"));if(he==="erroring")return l(T._storedError);let _e=Rtt(T);return Gtt(q,v,W),_e}let zle={};class A2{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Xq(this))throw eL("abortReason");return this._abortReason}get signal(){if(!Xq(this))throw eL("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(v=void 0){if(!Xq(this))throw eL("error");this._controlledWritableStream._state==="writable"&&Yle(this,v)}[x](v){let T=this._abortAlgorithm(v);return P8(this),T}[R](){i1(this)}}Object.defineProperties(A2.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(A2.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Xq(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledWritableStream")?!1:E instanceof A2}function Wle(E,v,T,q,W,he,_e,ze){v._controlledWritableStream=E,E._writableStreamController=v,v._queue=void 0,v._queueTotalSize=void 0,i1(v),v._abortReason=void 0,v._abortController=xtt(),v._started=!1,v._strategySizeAlgorithm=ze,v._strategyHWM=_e,v._writeAlgorithm=q,v._closeAlgorithm=W,v._abortAlgorithm=he;let wt=Zq(v);Qq(E,wt);let ct=T(),kt=c(ct);p(kt,()=>(v._started=!0,N8(v),null),Wt=>(v._started=!0,Wq(E,Wt),null))}function Ktt(E,v,T,q){let W=Object.create(A2.prototype),he,_e,ze,wt;v.start!==void 0?he=()=>v.start(W):he=()=>{},v.write!==void 0?_e=ct=>v.write(ct,W):_e=()=>c(void 0),v.close!==void 0?ze=()=>v.close():ze=()=>c(void 0),v.abort!==void 0?wt=ct=>v.abort(ct):wt=()=>c(void 0),Wle(E,W,he,_e,ze,wt,T,q)}function P8(E){E._writeAlgorithm=void 0,E._closeAlgorithm=void 0,E._abortAlgorithm=void 0,E._strategySizeAlgorithm=void 0}function Utt(E){jq(E,zle,0),N8(E)}function Vtt(E,v){try{return E._strategySizeAlgorithm(v)}catch(T){return F4(E,T),1}}function Jle(E){return E._strategyHWM-E._queueTotalSize}function Gtt(E,v,T){try{jq(E,v,T)}catch(W){F4(E,W);return}let q=E._controlledWritableStream;if(!cd(q)&&q._state==="writable"){let W=Zq(E);Qq(q,W)}N8(E)}function N8(E){let v=E._controlledWritableStream;if(!E._started||v._inFlightWriteRequest!==void 0)return;if(v._state==="erroring"){Yq(v);return}if(E._queue.length===0)return;let q=stt(E);q===zle?Htt(E):ztt(E,q)}function F4(E,v){E._controlledWritableStream._state==="writable"&&Yle(E,v)}function Htt(E){let v=E._controlledWritableStream;Ftt(v),Lq(E);let T=E._closeAlgorithm();P8(E),p(T,()=>(Mtt(v),null),q=>(Ptt(v,q),null))}function ztt(E,v){let T=E._controlledWritableStream;Btt(T);let q=E._writeAlgorithm(v);p(q,()=>{Dtt(T);let W=T._state;if(Lq(E),!cd(T)&&W==="writable"){let he=Zq(E);Qq(T,he)}return N8(E),null},W=>(T._state==="writable"&&P8(E),ktt(T,W),null))}function Zq(E){return Jle(E)<=0}function Yle(E,v){let T=E._controlledWritableStream;P8(E),Jq(T,v)}function F8(E){return new TypeError(`WritableStream.prototype.${E} can only be used on a WritableStream`)}function eL(E){return new TypeError(`WritableStreamDefaultController.prototype.${E} can only be used on a WritableStreamDefaultController`)}function Um(E){return new TypeError(`WritableStreamDefaultWriter.prototype.${E} can only be used on a WritableStreamDefaultWriter`)}function B4(E){return new TypeError("Cannot "+E+" a stream using a released writer")}function B8(E){E._closedPromise=u((v,T)=>{E._closedPromise_resolve=v,E._closedPromise_reject=T,E._closedPromiseState="pending"})}function Qle(E,v){B8(E),tL(E,v)}function Wtt(E){B8(E),Xle(E)}function tL(E,v){E._closedPromise_reject!==void 0&&(_(E._closedPromise),E._closedPromise_reject(v),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0,E._closedPromiseState="rejected")}function Jtt(E,v){Qle(E,v)}function Xle(E){E._closedPromise_resolve!==void 0&&(E._closedPromise_resolve(void 0),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0,E._closedPromiseState="resolved")}function q8(E){E._readyPromise=u((v,T)=>{E._readyPromise_resolve=v,E._readyPromise_reject=T}),E._readyPromiseState="pending"}function rL(E,v){q8(E),ede(E,v)}function Zle(E){q8(E),nL(E)}function ede(E,v){E._readyPromise_reject!==void 0&&(_(E._readyPromise),E._readyPromise_reject(v),E._readyPromise_resolve=void 0,E._readyPromise_reject=void 0,E._readyPromiseState="rejected")}function Ytt(E){q8(E)}function Qtt(E,v){rL(E,v)}function nL(E){E._readyPromise_resolve!==void 0&&(E._readyPromise_resolve(void 0),E._readyPromise_resolve=void 0,E._readyPromise_reject=void 0,E._readyPromiseState="fulfilled")}function Xtt(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let iL=Xtt();function Ztt(E){if(!(typeof E=="function"||typeof E=="object")||E.name!=="DOMException")return!1;try{return new E,!0}catch{return!1}}function ert(){let E=iL?.DOMException;return Ztt(E)?E:void 0}function trt(){let E=function(T,q){this.message=T||"",this.name=q||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return i(E,"DOMException"),E.prototype=Object.create(Error.prototype),Object.defineProperty(E.prototype,"constructor",{value:E,writable:!0,configurable:!0}),E}let rrt=ert()||trt();function tde(E,v,T,q,W,he){let _e=de(E),ze=jle(v);E._disturbed=!0;let wt=!1,ct=c(void 0);return u((kt,Wt)=>{let Qr;if(he!==void 0){if(Qr=()=>{let dt=he.reason!==void 0?he.reason:new rrt("Aborted","AbortError"),lr=[];q||lr.push(()=>v._state==="writable"?k8(v,dt):c(void 0)),W||lr.push(()=>E._state==="readable"?Yc(E,dt):c(void 0)),oa(()=>Promise.all(lr.map(cn=>cn())),!0,dt)},he.aborted){Qr();return}he.addEventListener("abort",Qr)}function Qc(){return u((dt,lr)=>{function cn(Ha){Ha?dt():d(x2(),cn,lr)}cn(!1)})}function x2(){return wt?c(!0):d(ze._readyPromise,()=>u((dt,lr)=>{tt(_e,{_chunkSteps:cn=>{ct=d(Hle(ze,cn),void 0,e),dt(!1)},_closeSteps:()=>dt(!0),_errorSteps:lr})}))}if(mp(E,_e._closedPromise,dt=>(q?qu(!0,dt):oa(()=>k8(v,dt),!0,dt),null)),mp(v,ze._closedPromise,dt=>(W?qu(!0,dt):oa(()=>Yc(E,dt),!0,dt),null)),To(E,_e._closedPromise,()=>(T?qu():oa(()=>Ltt(ze)),null)),cd(v)||v._state==="closed"){let dt=new TypeError("the destination writable stream closed before all data could be piped to it");W?qu(!0,dt):oa(()=>Yc(E,dt),!0,dt)}_(Qc());function l1(){let dt=ct;return d(ct,()=>dt!==ct?l1():void 0)}function mp(dt,lr,cn){dt._state==="errored"?cn(dt._storedError):h(lr,cn)}function To(dt,lr,cn){dt._state==="closed"?cn():f(lr,cn)}function oa(dt,lr,cn){if(wt)return;wt=!0,v._state==="writable"&&!cd(v)?f(l1(),Ha):Ha();function Ha(){return p(dt(),()=>yp(lr,cn),I2=>yp(!0,I2)),null}}function qu(dt,lr){wt||(wt=!0,v._state==="writable"&&!cd(v)?f(l1(),()=>yp(dt,lr)):yp(dt,lr))}function yp(dt,lr){return Gle(ze),k(_e),he!==void 0&&he.removeEventListener("abort",Qr),dt?Wt(lr):kt(void 0),null}})}class hp{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!L8(this))throw $8("desiredSize");return sL(this)}close(){if(!L8(this))throw $8("close");if(!T2(this))throw new TypeError("The stream is not in a state that permits close");Vm(this)}enqueue(v=void 0){if(!L8(this))throw $8("enqueue");if(!T2(this))throw new TypeError("The stream is not in a state that permits enqueue");return C2(this,v)}error(v=void 0){if(!L8(this))throw $8("error");Jc(this,v)}[M](v){i1(this);let T=this._cancelAlgorithm(v);return j8(this),T}[I](v){let T=this._controlledReadableStream;if(this._queue.length>0){let q=Lq(this);this._closeRequested&&this._queue.length===0?(j8(this),j4(T)):q4(this),v._chunkSteps(q)}else z(T,v),q4(this)}[F](){}}Object.defineProperties(hp.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),i(hp.prototype.close,"close"),i(hp.prototype.enqueue,"enqueue"),i(hp.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hp.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function L8(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledReadableStream")?!1:E instanceof hp}function q4(E){if(!rde(E))return;if(E._pulling){E._pullAgain=!0;return}E._pulling=!0;let T=E._pullAlgorithm();p(T,()=>(E._pulling=!1,E._pullAgain&&(E._pullAgain=!1,q4(E)),null),q=>(Jc(E,q),null))}function rde(E){let v=E._controlledReadableStream;return!T2(E)||!E._started?!1:!!(u1(v)&&ue(v)>0||sL(E)>0)}function j8(E){E._pullAlgorithm=void 0,E._cancelAlgorithm=void 0,E._strategySizeAlgorithm=void 0}function Vm(E){if(!T2(E))return;let v=E._controlledReadableStream;E._closeRequested=!0,E._queue.length===0&&(j8(E),j4(v))}function C2(E,v){if(!T2(E))return;let T=E._controlledReadableStream;if(u1(T)&&ue(T)>0)X(T,v,!1);else{let q;try{q=E._strategySizeAlgorithm(v)}catch(W){throw Jc(E,W),W}try{jq(E,v,q)}catch(W){throw Jc(E,W),W}}q4(E)}function Jc(E,v){let T=E._controlledReadableStream;T._state==="readable"&&(i1(E),j8(E),ode(T,v))}function sL(E){let v=E._controlledReadableStream._state;return v==="errored"?null:v==="closed"?0:E._strategyHWM-E._queueTotalSize}function nrt(E){return!rde(E)}function T2(E){let v=E._controlledReadableStream._state;return!E._closeRequested&&v==="readable"}function nde(E,v,T,q,W,he,_e){v._controlledReadableStream=E,v._queue=void 0,v._queueTotalSize=void 0,i1(v),v._started=!1,v._closeRequested=!1,v._pullAgain=!1,v._pulling=!1,v._strategySizeAlgorithm=_e,v._strategyHWM=he,v._pullAlgorithm=q,v._cancelAlgorithm=W,E._readableStreamController=v;let ze=T();p(c(ze),()=>(v._started=!0,q4(v),null),wt=>(Jc(v,wt),null))}function irt(E,v,T,q){let W=Object.create(hp.prototype),he,_e,ze;v.start!==void 0?he=()=>v.start(W):he=()=>{},v.pull!==void 0?_e=()=>v.pull(W):_e=()=>c(void 0),v.cancel!==void 0?ze=wt=>v.cancel(wt):ze=()=>c(void 0),nde(E,W,he,_e,ze,T,q)}function $8(E){return new TypeError(`ReadableStreamDefaultController.prototype.${E} can only be used on a ReadableStreamDefaultController`)}function srt(E,v){return Lm(E._readableStreamController)?art(E):ort(E)}function ort(E,v){let T=de(E),q=!1,W=!1,he=!1,_e=!1,ze,wt,ct,kt,Wt,Qr=u(To=>{Wt=To});function Qc(){return q?(W=!0,c(void 0)):(q=!0,tt(T,{_chunkSteps:oa=>{S(()=>{W=!1;let qu=oa,yp=oa;he||C2(ct._readableStreamController,qu),_e||C2(kt._readableStreamController,yp),q=!1,W&&Qc()})},_closeSteps:()=>{q=!1,he||Vm(ct._readableStreamController),_e||Vm(kt._readableStreamController),(!he||!_e)&&Wt(void 0)},_errorSteps:()=>{q=!1}}),c(void 0))}function x2(To){if(he=!0,ze=To,_e){let oa=Q([ze,wt]),qu=Yc(E,oa);Wt(qu)}return Qr}function l1(To){if(_e=!0,wt=To,he){let oa=Q([ze,wt]),qu=Yc(E,oa);Wt(qu)}return Qr}function mp(){}return ct=L4(mp,Qc,x2),kt=L4(mp,Qc,l1),h(T._closedPromise,To=>(Jc(ct._readableStreamController,To),Jc(kt._readableStreamController,To),(!he||!_e)&&Wt(void 0),null)),[ct,kt]}function art(E){let v=de(E),T=!1,q=!1,W=!1,he=!1,_e=!1,ze,wt,ct,kt,Wt,Qr=u(dt=>{Wt=dt});function Qc(dt){h(dt._closedPromise,lr=>(dt!==v||(Bu(ct._readableStreamController,lr),Bu(kt._readableStreamController,lr),(!he||!_e)&&Wt(void 0)),null))}function x2(){$m(v)&&(k(v),v=de(E),Qc(v)),tt(v,{_chunkSteps:lr=>{S(()=>{q=!1,W=!1;let cn=lr,Ha=lr;if(!he&&!_e)try{Ha=w8(lr)}catch(I2){Bu(ct._readableStreamController,I2),Bu(kt._readableStreamController,I2),Wt(Yc(E,I2));return}he||T8(ct._readableStreamController,cn),_e||T8(kt._readableStreamController,Ha),T=!1,q?mp():W&&To()})},_closeSteps:()=>{T=!1,he||M4(ct._readableStreamController),_e||M4(kt._readableStreamController),ct._readableStreamController._pendingPullIntos.length>0&&O8(ct._readableStreamController,0),kt._readableStreamController._pendingPullIntos.length>0&&O8(kt._readableStreamController,0),(!he||!_e)&&Wt(void 0)},_errorSteps:()=>{T=!1}})}function l1(dt,lr){He(v)&&(k(v),v=Ple(E),Qc(v));let cn=lr?kt:ct,Ha=lr?ct:kt;Ble(v,dt,1,{_chunkSteps:R2=>{S(()=>{q=!1,W=!1;let D2=lr?_e:he;if(lr?he:_e)D2||x8(cn._readableStreamController,R2);else{let bde;try{bde=w8(R2)}catch(lL){Bu(cn._readableStreamController,lL),Bu(Ha._readableStreamController,lL),Wt(Yc(E,lL));return}D2||x8(cn._readableStreamController,R2),T8(Ha._readableStreamController,bde)}T=!1,q?mp():W&&To()})},_closeSteps:R2=>{T=!1;let D2=lr?_e:he,J8=lr?he:_e;D2||M4(cn._readableStreamController),J8||M4(Ha._readableStreamController),R2!==void 0&&(D2||x8(cn._readableStreamController,R2),!J8&&Ha._readableStreamController._pendingPullIntos.length>0&&O8(Ha._readableStreamController,0)),(!D2||!J8)&&Wt(void 0)},_errorSteps:()=>{T=!1}})}function mp(){if(T)return q=!0,c(void 0);T=!0;let dt=Gq(ct._readableStreamController);return dt===null?x2():l1(dt._view,!1),c(void 0)}function To(){if(T)return W=!0,c(void 0);T=!0;let dt=Gq(kt._readableStreamController);return dt===null?x2():l1(dt._view,!0),c(void 0)}function oa(dt){if(he=!0,ze=dt,_e){let lr=Q([ze,wt]),cn=Yc(E,lr);Wt(cn)}return Qr}function qu(dt){if(_e=!0,wt=dt,he){let lr=Q([ze,wt]),cn=Yc(E,lr);Wt(cn)}return Qr}function yp(){}return ct=sde(yp,mp,oa),kt=sde(yp,To,qu),Qc(v),[ct,kt]}function urt(E){return r(E)&&typeof E.getReader<"u"}function crt(E){return urt(E)?drt(E.getReader()):lrt(E)}function lrt(E){let v,T=cr(E,"async"),q=e;function W(){let _e;try{_e=vn(T)}catch(wt){return l(wt)}let ze=c(_e);return g(ze,wt=>{if(!r(wt))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Ga(wt))Vm(v._readableStreamController);else{let kt=S8(wt);C2(v._readableStreamController,kt)}})}function he(_e){let ze=T.iterator,wt;try{wt=Fe(ze,"return")}catch(Wt){return l(Wt)}if(wt===void 0)return c(void 0);let ct;try{ct=w(wt,ze,[_e])}catch(Wt){return l(Wt)}let kt=c(ct);return g(kt,Wt=>{if(!r(Wt))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return v=L4(q,W,he,0),v}function drt(E){let v,T=e;function q(){let he;try{he=E.read()}catch(_e){return l(_e)}return g(he,_e=>{if(!r(_e))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(_e.done)Vm(v._readableStreamController);else{let ze=_e.value;C2(v._readableStreamController,ze)}})}function W(he){try{return c(E.cancel(he))}catch(_e){return l(_e)}}return v=L4(T,q,W,0),v}function prt(E,v){Rr(E,v);let T=E,q=T?.autoAllocateChunkSize,W=T?.cancel,he=T?.pull,_e=T?.start,ze=T?.type;return{autoAllocateChunkSize:q===void 0?void 0:Y(q,`${v} has member 'autoAllocateChunkSize' that`),cancel:W===void 0?void 0:frt(W,T,`${v} has member 'cancel' that`),pull:he===void 0?void 0:hrt(he,T,`${v} has member 'pull' that`),start:_e===void 0?void 0:mrt(_e,T,`${v} has member 'start' that`),type:ze===void 0?void 0:yrt(ze,`${v} has member 'type' that`)}}function frt(E,v,T){return _t(E,T),q=>C(E,v,[q])}function hrt(E,v,T){return _t(E,T),q=>C(E,v,[q])}function mrt(E,v,T){return _t(E,T),q=>w(E,v,[q])}function yrt(E,v){if(E=`${E}`,E!=="bytes")throw new TypeError(`${v} '${E}' is not a valid enumeration value for ReadableStreamType`);return E}function grt(E,v){return Rr(E,v),{preventCancel:!!E?.preventCancel}}function ide(E,v){Rr(E,v);let T=E?.preventAbort,q=E?.preventCancel,W=E?.preventClose,he=E?.signal;return he!==void 0&&Ert(he,`${v} has member 'signal' that`),{preventAbort:!!T,preventCancel:!!q,preventClose:!!W,signal:he}}function Ert(E,v){if(!Ttt(E))throw new TypeError(`${v} is not an AbortSignal.`)}function brt(E,v){Rr(E,v);let T=E?.readable;P(T,"readable","ReadableWritablePair"),te(T,`${v} has member 'readable' that`);let q=E?.writable;return P(q,"writable","ReadableWritablePair"),Lle(q,`${v} has member 'writable' that`),{readable:T,writable:q}}class Xs{constructor(v={},T={}){v===void 0?v=null:hi(v,"First parameter");let q=D8(T,"Second parameter"),W=prt(v,"First parameter");if(oL(this),W.type==="bytes"){if(q.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let he=N4(q,0);ftt(this,W,he)}else{let he=R8(q),_e=N4(q,1);irt(this,W,_e,he)}}get locked(){if(!a1(this))throw Gm("locked");return u1(this)}cancel(v=void 0){return a1(this)?u1(this)?l(new TypeError("Cannot cancel a stream that already has a reader")):Yc(this,v):l(Gm("cancel"))}getReader(v=void 0){if(!a1(this))throw Gm("getReader");return mtt(v,"First parameter").mode===void 0?de(this):Ple(this)}pipeThrough(v,T={}){if(!a1(this))throw Gm("pipeThrough");tr(v,1,"pipeThrough");let q=brt(v,"First parameter"),W=ide(T,"Second parameter");if(u1(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(w2(q.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let he=tde(this,q.writable,W.preventClose,W.preventAbort,W.preventCancel,W.signal);return _(he),q.readable}pipeTo(v,T={}){if(!a1(this))return l(Gm("pipeTo"));if(v===void 0)return l("Parameter 1 is required in 'pipeTo'.");if(!S2(v))return l(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let q;try{q=ide(T,"Second parameter")}catch(W){return l(W)}return u1(this)?l(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):w2(v)?l(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):tde(this,v,q.preventClose,q.preventAbort,q.preventCancel,q.signal)}tee(){if(!a1(this))throw Gm("tee");let v=srt(this);return Q(v)}values(v=void 0){if(!a1(this))throw Gm("values");let T=grt(v,"First parameter");return Wc(this,T.preventCancel)}[ft](v){return this.values(v)}static from(v){return crt(v)}}Object.defineProperties(Xs,{from:{enumerable:!0}}),Object.defineProperties(Xs.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),i(Xs.from,"from"),i(Xs.prototype.cancel,"cancel"),i(Xs.prototype.getReader,"getReader"),i(Xs.prototype.pipeThrough,"pipeThrough"),i(Xs.prototype.pipeTo,"pipeTo"),i(Xs.prototype.tee,"tee"),i(Xs.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Xs.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Xs.prototype,ft,{value:Xs.prototype.values,writable:!0,configurable:!0});function L4(E,v,T,q=1,W=()=>1){let he=Object.create(Xs.prototype);oL(he);let _e=Object.create(hp.prototype);return nde(he,_e,E,v,T,q,W),he}function sde(E,v,T){let q=Object.create(Xs.prototype);oL(q);let W=Object.create(pp.prototype);return Mle(q,W,E,v,T,0,void 0),q}function oL(E){E._state="readable",E._reader=void 0,E._storedError=void 0,E._disturbed=!1}function a1(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_readableStreamController")?!1:E instanceof Xs}function u1(E){return E._reader!==void 0}function Yc(E,v){if(E._disturbed=!0,E._state==="closed")return c(void 0);if(E._state==="errored")return l(E._storedError);j4(E);let T=E._reader;if(T!==void 0&&$m(T)){let W=T._readIntoRequests;T._readIntoRequests=new O,W.forEach(he=>{he._closeSteps(void 0)})}let q=E._readableStreamController[M](v);return g(q,e)}function j4(E){E._state="closed";let v=E._reader;if(v!==void 0&&(fe(v),He(v))){let T=v._readRequests;v._readRequests=new O,T.forEach(q=>{q._closeSteps()})}}function ode(E,v){E._state="errored",E._storedError=v;let T=E._reader;T!==void 0&&(Ee(T,v),He(T)?Nr(T,v):qle(T,v))}function Gm(E){return new TypeError(`ReadableStream.prototype.${E} can only be used on a ReadableStream`)}function ade(E,v){Rr(E,v);let T=E?.highWaterMark;return P(T,"highWaterMark","QueuingStrategyInit"),{highWaterMark:$(T)}}let ude=E=>E.byteLength;i(ude,"size");class K8{constructor(v){tr(v,1,"ByteLengthQueuingStrategy"),v=ade(v,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=v.highWaterMark}get highWaterMark(){if(!lde(this))throw cde("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!lde(this))throw cde("size");return ude}}Object.defineProperties(K8.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(K8.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function cde(E){return new TypeError(`ByteLengthQueuingStrategy.prototype.${E} can only be used on a ByteLengthQueuingStrategy`)}function lde(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_byteLengthQueuingStrategyHighWaterMark")?!1:E instanceof K8}let dde=()=>1;i(dde,"size");class U8{constructor(v){tr(v,1,"CountQueuingStrategy"),v=ade(v,"First parameter"),this._countQueuingStrategyHighWaterMark=v.highWaterMark}get highWaterMark(){if(!fde(this))throw pde("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!fde(this))throw pde("size");return dde}}Object.defineProperties(U8.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(U8.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function pde(E){return new TypeError(`CountQueuingStrategy.prototype.${E} can only be used on a CountQueuingStrategy`)}function fde(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_countQueuingStrategyHighWaterMark")?!1:E instanceof U8}function _rt(E,v){Rr(E,v);let T=E?.cancel,q=E?.flush,W=E?.readableType,he=E?.start,_e=E?.transform,ze=E?.writableType;return{cancel:T===void 0?void 0:Art(T,E,`${v} has member 'cancel' that`),flush:q===void 0?void 0:vrt(q,E,`${v} has member 'flush' that`),readableType:W,start:he===void 0?void 0:Srt(he,E,`${v} has member 'start' that`),transform:_e===void 0?void 0:wrt(_e,E,`${v} has member 'transform' that`),writableType:ze}}function vrt(E,v,T){return _t(E,T),q=>C(E,v,[q])}function Srt(E,v,T){return _t(E,T),q=>w(E,v,[q])}function wrt(E,v,T){return _t(E,T),(q,W)=>C(E,v,[q,W])}function Art(E,v,T){return _t(E,T),q=>C(E,v,[q])}class V8{constructor(v={},T={},q={}){v===void 0&&(v=null);let W=D8(T,"Second parameter"),he=D8(q,"Third parameter"),_e=_rt(v,"First parameter");if(_e.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(_e.writableType!==void 0)throw new RangeError("Invalid writableType specified");let ze=N4(he,0),wt=R8(he),ct=N4(W,1),kt=R8(W),Wt,Qr=u(Qc=>{Wt=Qc});Crt(this,Qr,ct,kt,ze,wt),Ort(this,_e),_e.start!==void 0?Wt(_e.start(this._transformStreamController)):Wt(void 0)}get readable(){if(!hde(this))throw Ede("readable");return this._readable}get writable(){if(!hde(this))throw Ede("writable");return this._writable}}Object.defineProperties(V8.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(V8.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function Crt(E,v,T,q,W,he){function _e(){return v}function ze(Qr){return Rrt(E,Qr)}function wt(Qr){return Drt(E,Qr)}function ct(){return krt(E)}E._writable=Itt(_e,ze,ct,wt,T,q);function kt(){return Mrt(E)}function Wt(Qr){return Prt(E,Qr)}E._readable=L4(_e,kt,Wt,W,he),E._backpressure=void 0,E._backpressureChangePromise=void 0,E._backpressureChangePromise_resolve=void 0,G8(E,!0),E._transformStreamController=void 0}function hde(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_transformStreamController")?!1:E instanceof V8}function mde(E,v){Jc(E._readable._readableStreamController,v),aL(E,v)}function aL(E,v){z8(E._transformStreamController),F4(E._writable._writableStreamController,v),uL(E)}function uL(E){E._backpressure&&G8(E,!1)}function G8(E,v){E._backpressureChangePromise!==void 0&&E._backpressureChangePromise_resolve(),E._backpressureChangePromise=u(T=>{E._backpressureChangePromise_resolve=T}),E._backpressure=v}class c1{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!H8(this))throw W8("desiredSize");let v=this._controlledTransformStream._readable._readableStreamController;return sL(v)}enqueue(v=void 0){if(!H8(this))throw W8("enqueue");yde(this,v)}error(v=void 0){if(!H8(this))throw W8("error");xrt(this,v)}terminate(){if(!H8(this))throw W8("terminate");Irt(this)}}Object.defineProperties(c1.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),i(c1.prototype.enqueue,"enqueue"),i(c1.prototype.error,"error"),i(c1.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(c1.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function H8(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledTransformStream")?!1:E instanceof c1}function Trt(E,v,T,q,W){v._controlledTransformStream=E,E._transformStreamController=v,v._transformAlgorithm=T,v._flushAlgorithm=q,v._cancelAlgorithm=W,v._finishPromise=void 0,v._finishPromise_resolve=void 0,v._finishPromise_reject=void 0}function Ort(E,v){let T=Object.create(c1.prototype),q,W,he;v.transform!==void 0?q=_e=>v.transform(_e,T):q=_e=>{try{return yde(T,_e),c(void 0)}catch(ze){return l(ze)}},v.flush!==void 0?W=()=>v.flush(T):W=()=>c(void 0),v.cancel!==void 0?he=_e=>v.cancel(_e):he=()=>c(void 0),Trt(E,T,q,W,he)}function z8(E){E._transformAlgorithm=void 0,E._flushAlgorithm=void 0,E._cancelAlgorithm=void 0}function yde(E,v){let T=E._controlledTransformStream,q=T._readable._readableStreamController;if(!T2(q))throw new TypeError("Readable side is not in a state that permits enqueue");try{C2(q,v)}catch(he){throw aL(T,he),T._readable._storedError}nrt(q)!==T._backpressure&&G8(T,!0)}function xrt(E,v){mde(E._controlledTransformStream,v)}function gde(E,v){let T=E._transformAlgorithm(v);return g(T,void 0,q=>{throw mde(E._controlledTransformStream,q),q})}function Irt(E){let v=E._controlledTransformStream,T=v._readable._readableStreamController;Vm(T);let q=new TypeError("TransformStream terminated");aL(v,q)}function Rrt(E,v){let T=E._transformStreamController;if(E._backpressure){let q=E._backpressureChangePromise;return g(q,()=>{let W=E._writable;if(W._state==="erroring")throw W._storedError;return gde(T,v)})}return gde(T,v)}function Drt(E,v){let T=E._transformStreamController;if(T._finishPromise!==void 0)return T._finishPromise;let q=E._readable;T._finishPromise=u((he,_e)=>{T._finishPromise_resolve=he,T._finishPromise_reject=_e});let W=T._cancelAlgorithm(v);return z8(T),p(W,()=>(q._state==="errored"?O2(T,q._storedError):(Jc(q._readableStreamController,v),cL(T)),null),he=>(Jc(q._readableStreamController,he),O2(T,he),null)),T._finishPromise}function krt(E){let v=E._transformStreamController;if(v._finishPromise!==void 0)return v._finishPromise;let T=E._readable;v._finishPromise=u((W,he)=>{v._finishPromise_resolve=W,v._finishPromise_reject=he});let q=v._flushAlgorithm();return z8(v),p(q,()=>(T._state==="errored"?O2(v,T._storedError):(Vm(T._readableStreamController),cL(v)),null),W=>(Jc(T._readableStreamController,W),O2(v,W),null)),v._finishPromise}function Mrt(E){return G8(E,!1),E._backpressureChangePromise}function Prt(E,v){let T=E._transformStreamController;if(T._finishPromise!==void 0)return T._finishPromise;let q=E._writable;T._finishPromise=u((he,_e)=>{T._finishPromise_resolve=he,T._finishPromise_reject=_e});let W=T._cancelAlgorithm(v);return z8(T),p(W,()=>(q._state==="errored"?O2(T,q._storedError):(F4(q._writableStreamController,v),uL(E),cL(T)),null),he=>(F4(q._writableStreamController,he),uL(E),O2(T,he),null)),T._finishPromise}function W8(E){return new TypeError(`TransformStreamDefaultController.prototype.${E} can only be used on a TransformStreamDefaultController`)}function cL(E){E._finishPromise_resolve!==void 0&&(E._finishPromise_resolve(),E._finishPromise_resolve=void 0,E._finishPromise_reject=void 0)}function O2(E,v){E._finishPromise_reject!==void 0&&(_(E._finishPromise),E._finishPromise_reject(v),E._finishPromise_resolve=void 0,E._finishPromise_reject=void 0)}function Ede(E){return new TypeError(`TransformStream.prototype.${E} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=K8,t.CountQueuingStrategy=U8,t.ReadableByteStreamController=pp,t.ReadableStream=Xs,t.ReadableStreamBYOBReader=s1,t.ReadableStreamBYOBRequest=qm,t.ReadableStreamDefaultController=hp,t.ReadableStreamDefaultReader=Se,t.TransformStream=V8,t.TransformStreamDefaultController=c1,t.WritableStream=o1,t.WritableStreamDefaultController=A2,t.WritableStreamDefaultWriter=fp}))});var WLe=m(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,zLe())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(s){let a=await i.slice(n,Math.min(i.size,n+65536)).arrayBuffer();n+=a.byteLength,s.enqueue(new Uint8Array(a)),n===i.size&&s.close()}})})}catch{}});async function*wie(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,i=r.byteOffset+r.byteLength;for(;n!==i;){let s=Math.min(i-n,JLe),o=r.buffer.slice(n,n+s);n+=o.byteLength,yield new Uint8Array(o)}}else yield r;else{let n=0,i=r;for(;n!==i.size;){let o=await i.slice(n,Math.min(i.size,n+JLe)).arrayBuffer();n+=o.byteLength,yield new Uint8Array(o)}}}var vDr,JLe,YLe,eJt,Hl,eA=le(()=>{vDr=Dt(WLe(),1);JLe=65536;YLe=class Aie{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let s of e){let o;ArrayBuffer.isView(s)?o=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?o=new Uint8Array(s.slice(0)):s instanceof Aie?o=s:o=n.encode(`${s}`),this.#r+=ArrayBuffer.isView(o)?o.byteLength:o.size,this.#e.push(o)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let i=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let n of wie(this.#e,!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of wie(this.#e,!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=wie(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:i}=this,s=e<0?Math.max(i+e,0):Math.min(e,i),o=r<0?Math.max(i+r,0):Math.min(r,i),a=Math.max(o-s,0),u=this.#e,c=[],l=0;for(let p of u){if(l>=a)break;let f=ArrayBuffer.isView(p)?p.byteLength:p.size;if(s&&f<=s)s-=f,o-=f;else{let h;ArrayBuffer.isView(p)?(h=p.subarray(s,Math.min(f,o)),l+=h.byteLength):(h=p.slice(s,Math.min(f,o)),l+=h.size),o-=f,c.push(h),s=0}}let d=new Aie([],{type:String(n).toLowerCase()});return d.#r=a,d.#e=c,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(YLe.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});eJt=YLe,Hl=eJt});var tJt,rJt,pm,Cie=le(()=>{eA();tJt=class extends Hl{#e=0;#t="";constructor(e,r,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let i=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Hl&&/^(File)$/.test(e[Symbol.toStringTag])}},rJt=tJt,pm=rJt});function ZLe(t,e=Hl){var r=`${QLe()}${QLe()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((s,o)=>typeof s=="string"?n.push(i+Tie(o)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+Tie(o)+`"; filename="${Tie(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var tA,nJt,iJt,QLe,sJt,XLe,Tie,xg,fm,TP=le(()=>{eA();Cie();({toStringTag:tA,iterator:nJt,hasInstance:iJt}=Symbol),QLe=Math.random,sJt="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),XLe=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[tA])?[(r=r!==void 0?r+"":e[tA]=="File"?e.name:"blob",t),e.name!==r||e[tA]=="blob"?new pm([e],r,e):e]:[t,e+""]),Tie=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),xg=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},fm=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[tA](){return"FormData"}[nJt](){return this.entries()}static[iJt](e){return e&&typeof e=="object"&&e[tA]==="FormData"&&!sJt.some(r=>typeof e[r]!="function")}append(...e){xg("append",arguments,2),this.#e.push(XLe(...e))}delete(e){xg("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){xg("get",arguments,1),e+="";for(var r=this.#e,n=r.length,i=0;i<n;i++)if(r[i][0]===e)return r[i][1];return null}getAll(e,r){return xg("getAll",arguments,1),r=[],e+="",this.#e.forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return xg("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){xg("forEach",arguments,1);for(var[n,i]of this)e.call(r,i,n,this)}set(...e){xg("set",arguments,2);var r=[],n=!0;e=XLe(...e),this.#e.forEach(i=>{i[0]===e[0]?n&&(n=!r.push(e)):r.push(i)}),n&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var Nf,OP=le(()=>{Nf=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}});var Qo,Oie=le(()=>{OP();Qo=class extends Nf{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}});var xP,xie,rA,eje,tje,rje,IP=le(()=>{xP=Symbol.toStringTag,xie=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[xP]==="URLSearchParams",rA=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[xP]),eje=t=>typeof t=="object"&&(t[xP]==="AbortSignal"||t[xP]==="EventTarget"),tje=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},rje=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n}});var ije=m((PDr,nje)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}nje.exports=globalThis.DOMException});var Ig,sje,oje,Iie,aje,uje,cje,lje,dje,pje,RP,Rie=le(()=>{Ig=require("node:fs"),sje=require("node:path"),oje=Dt(ije(),1);Cie();eA();({stat:Iie}=Ig.promises),aje=(t,e)=>dje((0,Ig.statSync)(t),t,e),uje=(t,e)=>Iie(t).then(r=>dje(r,t,e)),cje=(t,e)=>Iie(t).then(r=>pje(r,t,e)),lje=(t,e)=>pje((0,Ig.statSync)(t),t,e),dje=(t,e,r="")=>new Hl([new RP({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],{type:r}),pje=(t,e,r="")=>new pm([new RP({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],(0,sje.basename)(e),{type:r,lastModified:t.mtimeMs}),RP=class t{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,r){return new t({path:this.#e,lastModified:this.lastModified,size:r-e,start:this.#t+e})}async*stream(){let{mtimeMs:e}=await Iie(this.#e);if(e>this.lastModified)throw new oje.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Ig.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var hje={};aa(hje,{toFormData:()=>pJt});function dJt(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,s)=>String.fromCharCode(s)),n}async function pJt(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new Die(r[1]||r[2]),i,s,o,a,u,c,l=[],d=new fm,p=S=>{o+=_.decode(S,{stream:!0})},f=S=>{l.push(S)},h=()=>{let S=new pm(l,c,{type:u});d.append(a,S)},g=()=>{d.append(a,o)},_=new TextDecoder("utf-8");_.decode(),n.onPartBegin=function(){n.onPartData=p,n.onPartEnd=g,i="",s="",o="",a="",u="",c=null,l.length=0},n.onHeaderField=function(S){i+=_.decode(S,{stream:!0})},n.onHeaderValue=function(S){s+=_.decode(S,{stream:!0})},n.onHeaderEnd=function(){if(s+=_.decode(),i=i.toLowerCase(),i==="content-disposition"){let S=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);S&&(a=S[2]||S[3]||""),c=dJt(s),c&&(n.onPartData=f,n.onPartEnd=h)}else i==="content-type"&&(u=s);s="",i=""};for await(let S of t)n.write(S);return n.end(),d}var Jd,_n,fje,hm,DP,kP,oJt,nA,aJt,uJt,cJt,lJt,Rg,Die,mje=le(()=>{Rie();TP();Jd=0,_n={START_BOUNDARY:Jd++,HEADER_FIELD_START:Jd++,HEADER_FIELD:Jd++,HEADER_VALUE_START:Jd++,HEADER_VALUE:Jd++,HEADER_VALUE_ALMOST_DONE:Jd++,HEADERS_ALMOST_DONE:Jd++,PART_DATA_START:Jd++,PART_DATA:Jd++,END:Jd++},fje=1,hm={PART_BOUNDARY:fje,LAST_BOUNDARY:fje*=2},DP=10,kP=13,oJt=32,nA=45,aJt=58,uJt=97,cJt=122,lJt=t=>t|32,Rg=()=>{},Die=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=Rg,this.onHeaderField=Rg,this.onHeadersEnd=Rg,this.onHeaderValue=Rg,this.onPartBegin=Rg,this.onPartData=Rg,this.onPartEnd=Rg,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=_n.START_BOUNDARY}write(e){let r=0,n=e.length,i=this.index,{lookbehind:s,boundary:o,boundaryChars:a,index:u,state:c,flags:l}=this,d=this.boundary.length,p=d-1,f=e.length,h,g,_=A=>{this[A+"Mark"]=r},S=A=>{delete this[A+"Mark"]},w=(A,O,x,R)=>{(O===void 0||O!==x)&&this[A](R&&R.subarray(O,x))},C=(A,O)=>{let x=A+"Mark";x in this&&(O?(w(A,this[x],r,e),delete this[x]):(w(A,this[x],e.length,e),this[x]=0))};for(r=0;r<n;r++)switch(h=e[r],c){case _n.START_BOUNDARY:if(u===o.length-2){if(h===nA)l|=hm.LAST_BOUNDARY;else if(h!==kP)return;u++;break}else if(u-1===o.length-2){if(l&hm.LAST_BOUNDARY&&h===nA)c=_n.END,l=0;else if(!(l&hm.LAST_BOUNDARY)&&h===DP)u=0,w("onPartBegin"),c=_n.HEADER_FIELD_START;else return;break}h!==o[u+2]&&(u=-2),h===o[u+2]&&u++;break;case _n.HEADER_FIELD_START:c=_n.HEADER_FIELD,_("onHeaderField"),u=0;case _n.HEADER_FIELD:if(h===kP){S("onHeaderField"),c=_n.HEADERS_ALMOST_DONE;break}if(u++,h===nA)break;if(h===aJt){if(u===1)return;C("onHeaderField",!0),c=_n.HEADER_VALUE_START;break}if(g=lJt(h),g<uJt||g>cJt)return;break;case _n.HEADER_VALUE_START:if(h===oJt)break;_("onHeaderValue"),c=_n.HEADER_VALUE;case _n.HEADER_VALUE:h===kP&&(C("onHeaderValue",!0),w("onHeaderEnd"),c=_n.HEADER_VALUE_ALMOST_DONE);break;case _n.HEADER_VALUE_ALMOST_DONE:if(h!==DP)return;c=_n.HEADER_FIELD_START;break;case _n.HEADERS_ALMOST_DONE:if(h!==DP)return;w("onHeadersEnd"),c=_n.PART_DATA_START;break;case _n.PART_DATA_START:c=_n.PART_DATA,_("onPartData");case _n.PART_DATA:if(i=u,u===0){for(r+=p;r<f&&!(e[r]in a);)r+=d;r-=p,h=e[r]}if(u<o.length)o[u]===h?(u===0&&C("onPartData",!0),u++):u=0;else if(u===o.length)u++,h===kP?l|=hm.PART_BOUNDARY:h===nA?l|=hm.LAST_BOUNDARY:u=0;else if(u-1===o.length)if(l&hm.PART_BOUNDARY){if(u=0,h===DP){l&=~hm.PART_BOUNDARY,w("onPartEnd"),w("onPartBegin"),c=_n.HEADER_FIELD_START;break}}else l&hm.LAST_BOUNDARY&&h===nA?(w("onPartEnd"),c=_n.END,l=0):u=0;if(u>0)s[u-1]=h;else if(i>0){let A=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);w("onPartData",0,i,A),i=0,_("onPartData"),r--}break;case _n.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}C("onHeaderField"),C("onHeaderValue"),C("onPartData"),this.index=u,this.state=c,this.flags=l}end(){if(this.state===_n.HEADER_FIELD_START&&this.index===0||this.state===_n.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==_n.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});async function kie(t){if(t[Ka].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Ka].disturbed=!0,t[Ka].error)throw t[Ka].error;let{body:e}=t;if(e===null)return mu.Buffer.alloc(0);if(!(e instanceof Mc.default))return mu.Buffer.alloc(0);let r=[],n=0;try{for await(let i of e){if(t.size>0&&n+i.length>t.size){let s=new Qo(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}n+=i.length,r.push(i)}}catch(i){throw i instanceof Nf?i:new Qo(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?mu.Buffer.from(r.join("")):mu.Buffer.concat(r,n)}catch(i){throw new Qo(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new Qo(`Premature close of server response while trying to fetch ${t.url}`)}var Mc,Ff,mu,fJt,Ka,Yd,I_,hJt,MP,yje,gje,PP=le(()=>{Mc=Dt(require("node:stream"),1),Ff=require("node:util"),mu=require("node:buffer");eA();TP();Oie();OP();IP();fJt=(0,Ff.promisify)(Mc.default.pipeline),Ka=Symbol("Body internals"),Yd=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:xie(e)?e=mu.Buffer.from(e.toString()):rA(e)||mu.Buffer.isBuffer(e)||(Ff.types.isAnyArrayBuffer(e)?e=mu.Buffer.from(e):ArrayBuffer.isView(e)?e=mu.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Mc.default||(e instanceof fm?(e=ZLe(e),n=e.type.split("=")[1]):e=mu.Buffer.from(String(e))));let i=e;mu.Buffer.isBuffer(e)?i=Mc.default.Readable.from(e):rA(e)&&(i=Mc.default.Readable.from(e.stream())),this[Ka]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof Mc.default&&e.on("error",s=>{let o=s instanceof Nf?s:new Qo(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[Ka].error=o})}get body(){return this[Ka].stream}get bodyUsed(){return this[Ka].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await kie(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new fm,i=new URLSearchParams(await this.text());for(let[s,o]of i)n.append(s,o);return n}let{toFormData:r}=await Promise.resolve().then(()=>(mje(),hje));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[Ka].body&&this[Ka].body.type||"",r=await this.arrayBuffer();return new Hl([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await kie(this);return new TextDecoder().decode(e)}buffer(){return kie(this)}};Yd.prototype.buffer=(0,Ff.deprecate)(Yd.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Yd.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ff.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});I_=(t,e)=>{let r,n,{body:i}=t[Ka];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Mc.default&&typeof i.getBoundary!="function"&&(r=new Mc.PassThrough({highWaterMark:e}),n=new Mc.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[Ka].stream=r,i=n),i},hJt=(0,Ff.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),MP=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":xie(t)?"application/x-www-form-urlencoded;charset=UTF-8":rA(t)?t.type||null:mu.Buffer.isBuffer(t)||Ff.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof fm?`multipart/form-data; boundary=${e[Ka].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${hJt(t)}`:t instanceof Mc.default?null:"text/plain;charset=UTF-8",yje=t=>{let{body:e}=t[Ka];return e===null?0:rA(e)?e.size:mu.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},gje=async(t,{body:e})=>{e===null?t.end():await fJt(e,t)}});function Eje(t=[]){return new Ua(t.reduce((e,r,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return NP(e),Pie(e,String(r)),!0}catch{return!1}}))}var Mie,iA,NP,Pie,Ua,FP=le(()=>{Mie=require("node:util"),iA=Dt(require("node:http"),1),NP=typeof iA.default.validateHeaderName=="function"?iA.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Pie=typeof iA.default.validateHeaderValue=="function"?iA.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},Ua=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[i,s]of Object.entries(n))r.push(...s.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!Mie.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||Mie.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(NP(n),Pie(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(o,a)=>(NP(o),Pie(o,String(a)),URLSearchParams.prototype[i].call(n,String(o).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return o=>(NP(o),URLSearchParams.prototype[i].call(n,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(Ua.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}))});var mJt,sA,Nie=le(()=>{mJt=new Set([301,302,303,307,308]),sA=t=>mJt.has(t)});var zl,yu,bje=le(()=>{FP();PP();Nie();zl=Symbol("Response internals"),yu=class t extends Yd{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,i=new Ua(r.headers);if(e!==null&&!i.has("Content-Type")){let s=MP(e,this);s&&i.append("Content-Type",s)}this[zl]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[zl].type}get url(){return this[zl].url||""}get status(){return this[zl].status}get ok(){return this[zl].status>=200&&this[zl].status<300}get redirected(){return this[zl].counter>0}get statusText(){return this[zl].statusText}get headers(){return this[zl].headers}get highWaterMark(){return this[zl].highWaterMark}clone(){return new t(I_(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!sA(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[zl].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let i=new Ua(r&&r.headers);return i.has("content-type")||i.set("content-type","application/json"),new t(n,{...r,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(yu.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}})});var _je,vje=le(()=>{_je=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""}});function Sje(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}function Tje(t){if(!Aje.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function yJt(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=(0,wje.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function R_(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:yJt(t)}function Oje(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,s=Sje(i),o=Sje(i,!0);s.toString().length>4096&&(s=o),e&&(s=e(s)),r&&(o=r(o));let a=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return o;case"unsafe-url":return s;case"strict-origin":return R_(s)&&!R_(a)?"no-referrer":o.toString();case"strict-origin-when-cross-origin":return s.origin===a.origin?s:R_(s)&&!R_(a)?"no-referrer":o;case"same-origin":return s.origin===a.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===a.origin?s:o;case"no-referrer-when-downgrade":return R_(s)&&!R_(a)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function xje(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&Aje.has(n)&&(r=n);return r}var wje,Aje,Cje,Fie=le(()=>{wje=require("node:net");Aje=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Cje="strict-origin-when-cross-origin"});var Ije,Rje,As,oA,gJt,mm,Dje,kje=le(()=>{Ije=require("node:url"),Rje=require("node:util");FP();PP();IP();vje();Fie();As=Symbol("Request internals"),oA=t=>typeof t=="object"&&typeof t[As]=="object",gJt=(0,Rje.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),mm=class t extends Yd{constructor(e,r={}){let n;if(oA(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!oA(r)&&"data"in r&&gJt(),(r.body!=null||oA(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body?r.body:oA(e)&&e.body!==null?I_(e):null;super(s,{size:r.size||e.size||0});let o=new Ua(r.headers||e.headers||{});if(s!==null&&!o.has("Content-Type")){let c=MP(s,this);c&&o.set("Content-Type",c)}let a=oA(e)?e.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!eje(a))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let u=r.referrer==null?e.referrer:r.referrer;if(u==="")u="no-referrer";else if(u){let c=new URL(u);u=/^about:(\/\/)?client$/.test(c)?"client":c}else u=void 0;this[As]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:a,referrer:u},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[As].method}get url(){return(0,Ije.format)(this[As].parsedURL)}get headers(){return this[As].headers}get redirect(){return this[As].redirect}get signal(){return this[As].signal}get referrer(){if(this[As].referrer==="no-referrer")return"";if(this[As].referrer==="client")return"about:client";if(this[As].referrer)return this[As].referrer.toString()}get referrerPolicy(){return this[As].referrerPolicy}set referrerPolicy(e){this[As].referrerPolicy=Tje(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(mm.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});Dje=t=>{let{parsedURL:e}=t[As],r=new Ua(t[As].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let a=yje(t);typeof a=="number"&&!Number.isNaN(a)&&(n=String(a))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=Cje),t.referrer&&t.referrer!=="no-referrer"?t[As].referrer=Oje(t):t[As].referrer="no-referrer",t[As].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=t;typeof i=="function"&&(i=i(e));let s=_je(e),o={path:e.pathname+s,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:e,options:o}}});var aA,Mje=le(()=>{OP();aA=class extends Nf{constructor(e,r="aborted"){super(e,r)}}});var Fje={};aa(Fje,{AbortError:()=>aA,Blob:()=>Hl,FetchError:()=>Qo,File:()=>pm,FormData:()=>fm,Headers:()=>Ua,Request:()=>mm,Response:()=>yu,blobFrom:()=>uje,blobFromSync:()=>aje,default:()=>Bie,fileFrom:()=>cje,fileFromSync:()=>lje,isRedirect:()=>sA});async function Bie(t,e){return new Promise((r,n)=>{let i=new mm(t,e),{parsedURL:s,options:o}=Dje(i);if(!EJt.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let h=VLe(i.url),g=new yu(h,{headers:{"Content-Type":h.typeFull}});r(g);return}let a=(s.protocol==="https:"?Nje.default:Pje.default).request,{signal:u}=i,c=null,l=()=>{let h=new aA("The operation was aborted.");n(h),i.body&&i.body instanceof gu.default.Readable&&i.body.destroy(h),!(!c||!c.body)&&c.body.emit("error",h)};if(u&&u.aborted){l();return}let d=()=>{l(),f()},p=a(s.toString(),o);u&&u.addEventListener("abort",d);let f=()=>{p.abort(),u&&u.removeEventListener("abort",d)};p.on("error",h=>{n(new Qo(`request to ${i.url} failed, reason: ${h.message}`,"system",h)),f()}),bJt(p,h=>{c&&c.body&&c.body.destroy(h)}),process.version<"v14"&&p.on("socket",h=>{let g;h.prependListener("end",()=>{g=h._eventsCount}),h.prependListener("close",_=>{if(c&&g<h._eventsCount&&!_){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",S)}})}),p.on("response",h=>{p.setTimeout(0);let g=Eje(h.rawHeaders);if(sA(h.statusCode)){let A=g.get("Location"),O=null;try{O=A===null?null:new URL(A,i.url)}catch{if(i.redirect!=="manual"){n(new Qo(`uri requested responds with an invalid redirect URL: ${A}`,"invalid-redirect")),f();return}}switch(i.redirect){case"error":n(new Qo(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),f();return;case"manual":break;case"follow":{if(O===null)break;if(i.counter>=i.follow){n(new Qo(`maximum redirect reached at: ${i.url}`,"max-redirect")),f();return}let x={headers:new Ua(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:I_(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!tje(i.url,O)||!rje(i.url,O))for(let M of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(M);if(h.statusCode!==303&&i.body&&e.body instanceof gu.default.Readable){n(new Qo("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&i.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length"));let R=xje(g);R&&(x.referrerPolicy=R),r(Bie(new mm(O,x))),f();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}u&&h.once("end",()=>{u.removeEventListener("abort",d)});let _=(0,gu.pipeline)(h,new gu.PassThrough,A=>{A&&n(A)});process.version<"v12.10"&&h.on("aborted",d);let S={url:i.url,status:h.statusCode,statusText:h.statusMessage,headers:g,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},w=g.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||w===null||h.statusCode===204||h.statusCode===304){c=new yu(_,S),r(c);return}let C={flush:Dg.default.Z_SYNC_FLUSH,finishFlush:Dg.default.Z_SYNC_FLUSH};if(w==="gzip"||w==="x-gzip"){_=(0,gu.pipeline)(_,Dg.default.createGunzip(C),A=>{A&&n(A)}),c=new yu(_,S),r(c);return}if(w==="deflate"||w==="x-deflate"){let A=(0,gu.pipeline)(h,new gu.PassThrough,O=>{O&&n(O)});A.once("data",O=>{(O[0]&15)===8?_=(0,gu.pipeline)(_,Dg.default.createInflate(),x=>{x&&n(x)}):_=(0,gu.pipeline)(_,Dg.default.createInflateRaw(),x=>{x&&n(x)}),c=new yu(_,S),r(c)}),A.once("end",()=>{c||(c=new yu(_,S),r(c))});return}if(w==="br"){_=(0,gu.pipeline)(_,Dg.default.createBrotliDecompress(),A=>{A&&n(A)}),c=new yu(_,S),r(c);return}c=new yu(_,S),r(c)}),gje(p,i).catch(n)})}function bJt(t,e){let r=uA.Buffer.from(`0\r
\r
`),n=!1,i=!1,s;t.on("response",o=>{let{headers:a}=o;n=a["transfer-encoding"]==="chunked"&&!a["content-length"]}),t.on("socket",o=>{let a=()=>{if(n&&!i){let c=new Error("Premature close");c.code="ERR_STREAM_PREMATURE_CLOSE",e(c)}},u=c=>{i=uA.Buffer.compare(c.slice(-5),r)===0,!i&&s&&(i=uA.Buffer.compare(s.slice(-3),r.slice(0,3))===0&&uA.Buffer.compare(c.slice(-2),r.slice(3))===0),s=c};o.prependListener("close",a),o.on("data",u),t.on("close",()=>{o.removeListener("close",a),o.removeListener("data",u)})})}var Pje,Nje,Dg,gu,uA,EJt,Bje=le(()=>{Pje=Dt(require("node:http"),1),Nje=Dt(require("node:https"),1),Dg=Dt(require("node:zlib"),1),gu=Dt(require("node:stream"),1),uA=require("node:buffer");GLe();PP();bje();FP();kje();Oie();Mje();Nie();TP();IP();Fie();Rie();EJt=new Set(["data:","http:","https:"])});var jje=m(k_=>{"use strict";var _Jt=k_&&k_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},D_;Object.defineProperty(k_,"__esModule",{value:!0});k_.Gaxios=void 0;var vJt=_Jt(uC()),SJt=require("https"),kg=mie(),wJt=wLe(),qje=require("stream"),Lje=Eie(),AJt=async()=>globalThis.crypto?.randomUUID()||(await import("crypto")).randomUUID(),BP=class{agentCache=new Map;defaults;interceptors;constructor(e){this.defaults=e||{},this.interceptors={request:new Lje.GaxiosInterceptorManager,response:new Lje.GaxiosInterceptorManager}}fetch(...e){let r=e[0],n=e[1],i,s=new Headers;return typeof r=="string"?i=new URL(r):r instanceof URL?i=r:r&&r.url&&(i=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&D_.mergeHeaders(s,r.headers),n&&D_.mergeHeaders(s,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:s,url:i}):this.request({...n,headers:s,url:i})}async request(e={}){let r=await this.#n(e);return r=await this.#t(r),this.#r(this._request(r))}async _defaultAdapter(e){let r=e.fetchImplementation||this.defaults.fetchImplementation||await D_.#u(),n={...e};delete n.data;let i=await r(e.url,n),s=await this.getResponseData(e,i);return Object.getOwnPropertyDescriptor(i,"data")?.configurable||Object.defineProperties(i,{data:{configurable:!0,writable:!0,enumerable:!0,value:s}}),Object.assign(i,{config:e,data:s})}async _request(e){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let i=[];for await(let s of r.data)i.push(s);r.data=i.toString()}let n=kg.GaxiosError.extractAPIErrorFromResponse(r,`Request failed with status code ${r.status}`);throw new kg.GaxiosError(n?.message,e,r,n)}return r}catch(r){let n;r instanceof kg.GaxiosError?n=r:r instanceof Error?n=new kg.GaxiosError(r.message,e,void 0,r):n=new kg.GaxiosError("Unexpected Gaxios Error",e,void 0,r);let{shouldRetry:i,config:s}=await(0,wJt.getRetryConfig)(n);if(i&&s)return n.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,e.retryConfig=n.config?.retryConfig,this.#i(e),this._request(e);throw e.errorRedactor&&e.errorRedactor(n),n}}async getResponseData(e,r){if(e.maxContentLength&&r.headers.has("content-length")&&e.maxContentLength<Number.parseInt(r.headers?.get("content-length")||""))throw new kg.GaxiosError("Response's `Content-Length` is over the limit.",e,Object.assign(r,{config:e}));switch(e.responseType){case"stream":return r.body;case"json":return r.json();case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"text":return r.text();default:return this.getResponseDataFromContentType(r)}}#e(e,r=[]){let n=new URL(e),i=[...r],s=(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[];for(let o of s)i.push(o.trim());for(let o of i)if(o instanceof RegExp){if(o.test(n.toString()))return!1}else if(o instanceof URL){if(o.origin===n.origin)return!1}else if(o.startsWith("*.")||o.startsWith(".")){let a=o.replace(/^\*\./,".");if(n.hostname.endsWith(a))return!1}else if(o===n.origin||o===n.hostname||o===n.href)return!1;return!0}async#t(e){let r=Promise.resolve(e);for(let n of this.interceptors.request.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#r(e){let r=Promise.resolve(e);for(let n of this.interceptors.response.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#n(e){let r=new Headers(this.defaults.headers);D_.mergeHeaders(r,e.headers);let n=(0,vJt.default)(!0,{},this.defaults,e);if(!n.url)throw new Error("URL is required.");if(n.baseURL&&(n.url=new URL(n.url,n.baseURL)),n.url=new URL(n.url),n.params)if(n.paramsSerializer){let o=n.paramsSerializer(n.params);o.startsWith("?")&&(o=o.slice(1));let a=n.url.toString().includes("?")?"&":"?";n.url=n.url+a+o}else{let o=n.url instanceof URL?n.url:new URL(n.url);for(let[a,u]of new URLSearchParams(n.params))o.searchParams.append(a,u);n.url=o}typeof e.maxContentLength=="number"&&(n.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(n.follow=e.maxRedirects);let i=typeof n.data=="string"||n.data instanceof ArrayBuffer||n.data instanceof Blob||globalThis.File&&n.data instanceof File||n.data instanceof FormData||n.data instanceof qje.Readable||n.data instanceof ReadableStream||n.data instanceof String||n.data instanceof URLSearchParams||ArrayBuffer.isView(n.data)||["Blob","File","FormData"].includes(n.data?.constructor?.name||"");if(n.multipart?.length){let o=await AJt();r.set("content-type",`multipart/related; boundary=${o}`),n.body=qje.Readable.from(this.getMultipartRequest(n.multipart,o))}else i?n.body=n.data:typeof n.data=="object"?r.get("Content-Type")==="application/x-www-form-urlencoded"?n.body=n.paramsSerializer?n.paramsSerializer(n.data):new URLSearchParams(n.data):(r.has("content-type")||r.set("content-type","application/json"),n.body=JSON.stringify(n.data)):n.data&&(n.body=n.data);n.validateStatus=n.validateStatus||this.validateStatus,n.responseType=n.responseType||"unknown",!r.has("accept")&&n.responseType==="json"&&r.set("accept","application/json");let s=n.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(!n.agent)if(s&&this.#e(n.url,n.noProxy)){let o=await D_.#a();this.agentCache.has(s)?n.agent=this.agentCache.get(s):(n.agent=new o(s,{cert:n.cert,key:n.key}),this.agentCache.set(s,n.agent))}else n.cert&&n.key&&(this.agentCache.has(n.key)?n.agent=this.agentCache.get(n.key):(n.agent=new SJt.Agent({cert:n.cert,key:n.key}),this.agentCache.set(n.key,n.agent)));return typeof n.errorRedactor!="function"&&n.errorRedactor!==!1&&(n.errorRedactor=kg.defaultErrorRedactor),n.body&&!("duplex"in n)&&(n.duplex="half"),this.#i(n),Object.assign(n,{headers:r,url:n.url instanceof URL?n.url:new URL(n.url)})}#i(e){if(e.timeout){let r=AbortSignal.timeout(e.timeout);e.signal&&!e.signal.aborted?e.signal=AbortSignal.any([e.signal,r]):e.signal=r}}validateStatus(e){return e>=200&&e<300}async getResponseDataFromContentType(e){let r=e.headers.get("Content-Type");if(r===null)return e.text();if(r=r.toLowerCase(),r.includes("application/json")){let n=await e.text();try{n=JSON.parse(n)}catch{}return n}else return r.match(/^text\//)?e.text():e.blob()}async*getMultipartRequest(e,r){let n=`--${r}--`;for(let i of e){let s=i.headers.get("Content-Type")||"application/octet-stream";yield`--${r}\r
Content-Type: ${s}\r
\r
`,typeof i.content=="string"?yield i.content:yield*i.content,yield`\r
`}yield n}static#s;static#o;static async#a(){return this.#s||=(await Promise.resolve().then(()=>Dt(ULe()))).HttpsProxyAgent,this.#s}static async#u(){let e=typeof window<"u"&&!!window;return this.#o||=e?window.fetch:(await Promise.resolve().then(()=>(Bje(),Fje))).default,this.#o}static mergeHeaders(e,...r){e=e instanceof Headers?e:new Headers(e);for(let n of r)(n instanceof Headers?n:new Headers(n)).forEach((s,o)=>{o==="set-cookie"?e.append(o,s):e.set(o,s)});return e}};k_.Gaxios=BP;D_=BP});var Ys=m(Xo=>{"use strict";var CJt=Xo&&Xo.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),TJt=Xo&&Xo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&CJt(e,t,r)};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.instance=Xo.Gaxios=Xo.GaxiosError=void 0;Xo.request=xJt;var $je=jje();Object.defineProperty(Xo,"Gaxios",{enumerable:!0,get:function(){return $je.Gaxios}});var OJt=mie();Object.defineProperty(Xo,"GaxiosError",{enumerable:!0,get:function(){return OJt.GaxiosError}});TJt(Eie(),Xo);Xo.instance=new $je.Gaxios;async function xJt(t){return Xo.instance.request(t)}});var qie=m(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.GCE_LINUX_BIOS_PATHS=void 0;Wl.isGoogleCloudServerless=Vje;Wl.isGoogleComputeEngineLinux=Gje;Wl.isGoogleComputeEngineMACAddress=Hje;Wl.isGoogleComputeEngine=zje;Wl.detectGCPResidency=RJt;var Kje=require("fs"),Uje=require("os");Wl.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var IJt=/^42:01/;function Vje(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function Gje(){if((0,Uje.platform)()!=="linux")return!1;try{(0,Kje.statSync)(Wl.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,Kje.readFileSync)(Wl.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch{return!1}}function Hje(){let t=(0,Uje.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:r}of e)if(IJt.test(r))return!0}return!1}function zje(){return Gje()||Hje()}function RJt(){return Vje()||zje()}});var Wje=m(qP=>{"use strict";Object.defineProperty(qP,"__esModule",{value:!0});qP.Colours=void 0;var _o=class t{static isEnabled(e){return e&&e.isTTY&&(typeof e.getColorDepth=="function"?e.getColorDepth()>2:!0)}static refresh(){t.enabled=t.isEnabled(process==null?void 0:process.stderr),this.enabled?(t.reset="\x1B[0m",t.bright="\x1B[1m",t.dim="\x1B[2m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.white="\x1B[37m",t.grey="\x1B[90m"):(t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="")}};qP.Colours=_o;_o.enabled=!1;_o.reset="";_o.bright="";_o.dim="";_o.red="";_o.green="";_o.yellow="";_o.blue="";_o.magenta="";_o.cyan="";_o.white="";_o.grey="";_o.refresh()});var Xje=m(Yr=>{"use strict";var DJt=Yr&&Yr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),kJt=Yr&&Yr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Jje=Yr&&Yr.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&DJt(r,e,n[i]);return kJt(r,e),r}})();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.env=Yr.DebugLogBackendBase=Yr.placeholder=Yr.AdhocDebugLogger=Yr.LogSeverity=void 0;Yr.getNodeBackend=jie;Yr.getDebugBackend=PJt;Yr.getStructuredBackend=NJt;Yr.setBackend=FJt;Yr.log=Qje;var MJt=require("events"),cA=Jje(require("process")),Yje=Jje(require("util")),Eu=Wje(),Jl;(function(t){t.DEFAULT="DEFAULT",t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR"})(Jl||(Yr.LogSeverity=Jl={}));var lA=class extends MJt.EventEmitter{constructor(e,r){super(),this.namespace=e,this.upstream=r,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(n,i)=>this.on(n,i)}),this.func.debug=(...n)=>this.invokeSeverity(Jl.DEBUG,...n),this.func.info=(...n)=>this.invokeSeverity(Jl.INFO,...n),this.func.warn=(...n)=>this.invokeSeverity(Jl.WARNING,...n),this.func.error=(...n)=>this.invokeSeverity(Jl.ERROR,...n),this.func.sublog=n=>Qje(n,this.func)}invoke(e,...r){if(this.upstream)try{this.upstream(e,...r)}catch{}try{this.emit("log",e,r)}catch{}}invokeSeverity(e,...r){this.invoke({severity:e},...r)}};Yr.AdhocDebugLogger=lA;Yr.placeholder=new lA("",()=>{}).func;var M_=class{constructor(){var e;this.cached=new Map,this.filters=[],this.filtersSet=!1;let r=(e=cA.env[Yr.env.nodeEnables])!==null&&e!==void 0?e:"*";r==="all"&&(r="*"),this.filters=r.split(",")}log(e,r,...n){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let i=this.cached.get(e);i||(i=this.makeLogger(e),this.cached.set(e,i)),i(r,...n)}catch(i){console.error(i)}}};Yr.DebugLogBackendBase=M_;var Lie=class extends M_{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(e){return this.enabledRegexp.test(e)}makeLogger(e){return this.enabledRegexp.test(e)?(r,...n)=>{var i;let s=`${Eu.Colours.green}${e}${Eu.Colours.reset}`,o=`${Eu.Colours.yellow}${cA.pid}${Eu.Colours.reset}`,a;switch(r.severity){case Jl.ERROR:a=`${Eu.Colours.red}${r.severity}${Eu.Colours.reset}`;break;case Jl.INFO:a=`${Eu.Colours.magenta}${r.severity}${Eu.Colours.reset}`;break;case Jl.WARNING:a=`${Eu.Colours.yellow}${r.severity}${Eu.Colours.reset}`;break;default:a=(i=r.severity)!==null&&i!==void 0?i:Jl.DEFAULT;break}let u=Yje.formatWithOptions({colors:Eu.Colours.enabled},...n),c=Object.assign({},r);delete c.severity;let l=Object.getOwnPropertyNames(c).length?JSON.stringify(c):"",d=l?`${Eu.Colours.grey}${l}${Eu.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",o,s,a,u,l?` ${d}`:"")}:()=>{}}setFilters(){let r=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${r}$`,"i")}};function jie(){return new Lie}var $ie=class extends M_{constructor(e){super(),this.debugPkg=e}makeLogger(e){let r=this.debugPkg(e);return(n,...i)=>{r(i[0],...i.slice(1))}}setFilters(){var e;let r=(e=cA.env.NODE_DEBUG)!==null&&e!==void 0?e:"";cA.env.NODE_DEBUG=`${r}${r?",":""}${this.filters.join(",")}`}};function PJt(t){return new $ie(t)}var Kie=class extends M_{constructor(e){var r;super(),this.upstream=(r=e)!==null&&r!==void 0?r:void 0}makeLogger(e){var r;let n=(r=this.upstream)===null||r===void 0?void 0:r.makeLogger(e);return(i,...s)=>{var o;let a=(o=i.severity)!==null&&o!==void 0?o:Jl.INFO,u=Object.assign({severity:a,message:Yje.format(...s)},i),c=JSON.stringify(u);n?n(i,c):console.log("%s",c)}}setFilters(){var e;(e=this.upstream)===null||e===void 0||e.setFilters()}};function NJt(t){return new Kie(t)}Yr.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};var Uie=new Map,bu;function FJt(t){bu=t,Uie.clear()}function Qje(t,e){if(!bu&&!cA.env[Yr.env.nodeEnables]||!t)return Yr.placeholder;e&&(t=`${e.instance.namespace}:${t}`);let r=Uie.get(t);if(r)return r.func;if(bu===null)return Yr.placeholder;bu===void 0&&(bu=jie());let n=(()=>{let i;return new lA(t,(o,...a)=>{if(i!==bu){if(bu===null)return;bu===void 0&&(bu=jie()),i=bu}bu?.log(t,o,...a)})})();return Uie.set(t,n),n.func}});var Vie=m(Mg=>{"use strict";var BJt=Mg&&Mg.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),qJt=Mg&&Mg.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&BJt(e,t,r)};Object.defineProperty(Mg,"__esModule",{value:!0});qJt(Xje(),Mg)});var pA=m(yt=>{"use strict";var e$e=yt&&yt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),LJt=yt&&yt.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),jJt=yt&&yt.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&e$e(r,e,n[i]);return LJt(r,e),r}})(),$Jt=yt&&yt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&e$e(e,t,r)};Object.defineProperty(yt,"__esModule",{value:!0});yt.gcpResidencyCache=yt.METADATA_SERVER_DETECTION=yt.HEADERS=yt.HEADER_VALUE=yt.HEADER_NAME=yt.SECONDARY_HOST_ADDRESS=yt.HOST_ADDRESS=yt.BASE_PATH=void 0;yt.instance=zJt;yt.project=WJt;yt.universe=JJt;yt.bulk=YJt;yt.isAvailable=XJt;yt.resetIsAvailableCache=ZJt;yt.getGCPResidency=zie;yt.setGCPResidency=t$e;yt.requestTimeout=r$e;var Gie=Ys(),KJt=MK(),UJt=qie(),VJt=jJt(Vie());yt.BASE_PATH="/computeMetadata/v1";yt.HOST_ADDRESS="http://169.254.169.254";yt.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";yt.HEADER_NAME="Metadata-Flavor";yt.HEADER_VALUE="Google";yt.HEADERS=Object.freeze({[yt.HEADER_NAME]:yt.HEADER_VALUE});var Zje=VJt.log("gcp-metadata");yt.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function Hie(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||yt.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(yt.BASE_PATH,t).href}function GJt(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function dA(t,e={},r=3,n=!1){let i=new Headers(yt.HEADERS),s="",o={};if(typeof t=="object"){let d=t;new Headers(d.headers).forEach((p,f)=>i.set(f,p)),s=d.metadataKey,o=d.params||o,r=d.noResponseRetries||r,n=d.fastFail||n}else s=t;typeof e=="string"?s+=`/${e}`:(GJt(e),e.property&&(s+=`/${e.property}`),new Headers(e.headers).forEach((d,p)=>i.set(p,d)),o=e.params||o);let a=n?HJt:Gie.request,u={url:`${Hie()}/${s}`,headers:i,retryConfig:{noResponseRetries:r},params:o,responseType:"text",timeout:r$e()};Zje.info("instance request %j",u);let c=await a(u);Zje.info("instance metadata is %s",c.data);let l=c.headers.get(yt.HEADER_NAME);if(l!==yt.HEADER_VALUE)throw new RangeError(`Invalid response from metadata service: incorrect ${yt.HEADER_NAME} header. Expected '${yt.HEADER_VALUE}', got ${l?`'${l}'`:"no header"}`);if(typeof c.data=="string")try{return KJt.parse(c.data)}catch{}return c.data}async function HJt(t){let e={...t,url:t.url?.toString().replace(Hie(),Hie(yt.SECONDARY_HOST_ADDRESS))},r=(0,Gie.request)(t),n=(0,Gie.request)(e);return Promise.any([r,n])}function zJt(t){return dA("instance",t)}function WJt(t){return dA("project",t)}function JJt(t){return dA("universe",t)}async function YJt(t){let e={};return await Promise.all(t.map(r=>(async()=>{let n=await dA(r),i=r.metadataKey;e[i]=n})())),e}function QJt(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var LP;async function XJt(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in yt.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(yt.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return zie();case"ping-only":}}try{return LP===void 0&&(LP=dA("instance",void 0,QJt(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await LP,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code.toString()))){let r="UNKNOWN";e.code&&(r=e.code.toString()),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}}function ZJt(){LP=void 0}yt.gcpResidencyCache=null;function zie(){return yt.gcpResidencyCache===null&&t$e(),yt.gcpResidencyCache}function t$e(t=null){yt.gcpResidencyCache=t!==null?t:(0,UJt.detectGCPResidency)()}function r$e(){return zie()?0:3e3}$Jt(qie(),yt)});var s$e=m(jP=>{"use strict";jP.byteLength=tYt;jP.toByteArray=nYt;jP.fromByteArray=oYt;var Qd=[],Pc=[],eYt=typeof Uint8Array<"u"?Uint8Array:Array,Wie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Pg=0,n$e=Wie.length;Pg<n$e;++Pg)Qd[Pg]=Wie[Pg],Pc[Wie.charCodeAt(Pg)]=Pg;var Pg,n$e;Pc[45]=62;Pc[95]=63;function i$e(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function tYt(t){var e=i$e(t),r=e[0],n=e[1];return(r+n)*3/4-n}function rYt(t,e,r){return(e+r)*3/4-r}function nYt(t){var e,r=i$e(t),n=r[0],i=r[1],s=new eYt(rYt(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Pc[t.charCodeAt(u)]<<18|Pc[t.charCodeAt(u+1)]<<12|Pc[t.charCodeAt(u+2)]<<6|Pc[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Pc[t.charCodeAt(u)]<<2|Pc[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=Pc[t.charCodeAt(u)]<<10|Pc[t.charCodeAt(u+1)]<<4|Pc[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function iYt(t){return Qd[t>>18&63]+Qd[t>>12&63]+Qd[t>>6&63]+Qd[t&63]}function sYt(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(iYt(n));return i.join("")}function oYt(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(sYt(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Qd[e>>2]+Qd[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Qd[e>>10]+Qd[e>>4&63]+Qd[e<<2&63]+"=")),i.join("")}});var Yie=m(Jie=>{"use strict";Object.defineProperty(Jie,"__esModule",{value:!0});Jie.fromArrayBufferToHex=aYt;function aYt(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}});var o$e=m($P=>{"use strict";Object.defineProperty($P,"__esModule",{value:!0});$P.BrowserCrypto=void 0;var P_=s$e(),uYt=Yie(),Qie=class t{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return P_.fromByteArray(new Uint8Array(n))}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),P_.fromByteArray(r)}static padBase64(e){for(;e.length%4!==0;)e+="=";return e}async verify(e,r,n){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s=new TextEncoder().encode(r),o=P_.toByteArray(t.padBase64(n)),a=await window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return await window.crypto.subtle.verify(i,a,o,s)}async sign(e,r){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),s=await window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),o=await window.crypto.subtle.sign(n,s,i);return P_.fromByteArray(new Uint8Array(o))}decodeBase64StringUtf8(e){let r=P_.toByteArray(t.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return P_.fromByteArray(r)}async sha256DigestHex(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return(0,uYt.fromArrayBufferToHex)(n)}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,s=await window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",s,i.encode(r))}};$P.BrowserCrypto=Qie});var a$e=m(KP=>{"use strict";Object.defineProperty(KP,"__esModule",{value:!0});KP.NodeCrypto=void 0;var N_=require("crypto"),Xie=class{async sha256DigestBase64(e){return N_.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return N_.randomBytes(e).toString("base64")}async verify(e,r,n){let i=N_.createVerify("RSA-SHA256");return i.update(r),i.end(),i.verify(e,n,"base64")}async sign(e,r){let n=N_.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return N_.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:lYt(e);return cYt(N_.createHmac("sha256",n).update(r).digest())}};KP.NodeCrypto=Xie;function cYt(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function lYt(t){return Buffer.from(t)}});var fA=m(Bf=>{"use strict";var dYt=Bf&&Bf.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),pYt=Bf&&Bf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&dYt(e,t,r)};Object.defineProperty(Bf,"__esModule",{value:!0});Bf.createCrypto=mYt;Bf.hasBrowserCrypto=u$e;var fYt=o$e(),hYt=a$e();pYt(Yie(),Bf);function mYt(){return u$e()?new fYt.BrowserCrypto:new hYt.NodeCrypto}function u$e(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}});var Yl=m(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.LRUCache=void 0;qf.snakeToCamel=l$e;qf.originalOrCamelOptions=bYt;qf.removeUndefinedValuesInObject=_Yt;qf.isValidFile=vYt;qf.getWellKnownCertificateConfigFileLocation=SYt;var yYt=require("fs"),gYt=require("os"),Zie=require("path"),EYt="certificate_config.json",c$e="gcloud";function l$e(t){return t.replace(/([_][^_])/g,e=>e.slice(1).toUpperCase())}function bYt(t){function e(r){let n=t||{};return n[r]??n[l$e(r)]}return{get:e}}var ese=class{capacity;#e=new Map;maxAge;constructor(e){this.capacity=e.capacity,this.maxAge=e.maxAge}#t(e,r){this.#e.delete(e),this.#e.set(e,{value:r,lastAccessed:Date.now()})}set(e,r){this.#t(e,r),this.#r()}get(e){let r=this.#e.get(e);if(r)return this.#t(e,r.value),this.#r(),r.value}#r(){let e=this.maxAge?Date.now()-this.maxAge:0,r=this.#e.entries().next();for(;!r.done&&(this.#e.size>this.capacity||r.value[1].lastAccessed<e);)this.#e.delete(r.value[0]),r=this.#e.entries().next()}};qf.LRUCache=ese;function _Yt(t){return Object.entries(t).forEach(([e,r])=>{(r===void 0||r==="undefined")&&delete t[e]}),t}async function vYt(t){try{return(await yYt.promises.lstat(t)).isFile()}catch{return!1}}function SYt(){let t=process.env.CLOUDSDK_CONFIG||(wYt()?Zie.join(process.env.APPDATA||"",c$e):Zie.join(process.env.HOME||"",".config",c$e));return Zie.join(t,EYt)}function wYt(){return gYt.platform().startsWith("win")}});var d$e=m((Mkr,AYt)=>{AYt.exports={name:"google-auth-library",version:"10.4.2",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"}});var tse=m(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.USER_AGENT=ym.PRODUCT_NAME=ym.pkg=void 0;var p$e=d$e();ym.pkg=p$e;var f$e="google-api-nodejs-client";ym.PRODUCT_NAME=f$e;var CYt=`${f$e}/${p$e.version}`;ym.USER_AGENT=CYt});var _u=m(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.AuthClient=Ql.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=Ql.DEFAULT_UNIVERSE=void 0;var TYt=require("events"),rse=Ys(),OYt=Yl(),xYt=Vie(),nse=tse();Ql.DEFAULT_UNIVERSE="googleapis.com";Ql.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=300*1e3;var ise=class t extends TYt.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=Ql.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=Ql.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(e={}){super();let r=(0,OYt.originalOrCamelOptions)(e);this.apiKey=e.apiKey,this.projectId=r.get("project_id")??null,this.quotaProjectId=r.get("quota_project_id"),this.credentials=r.get("credentials")??{},this.universeDomain=r.get("universe_domain")??Ql.DEFAULT_UNIVERSE,this.transporter=e.transporter??new rse.Gaxios(e.transporterOptions),r.get("useAuthRequestParameters")!==!1&&(this.transporter.interceptors.request.add(t.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(t.DEFAULT_RESPONSE_INTERCEPTOR)),e.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=e.forceRefreshOnFailure??!1}fetch(...e){let r=e[0],n=e[1],i,s=new Headers;return typeof r=="string"?i=new URL(r):r instanceof URL?i=r:r&&r.url&&(i=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&rse.Gaxios.mergeHeaders(s,r.headers),n&&rse.Gaxios.mergeHeaders(s,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:s,url:i}):this.request({...n,headers:s,url:i})}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e.has("x-goog-user-project")&&this.quotaProjectId&&e.set("x-goog-user-project",this.quotaProjectId),e}addUserProjectAndAuthHeaders(e,r){let n=r.get("x-goog-user-project"),i=r.get("authorization");return n&&e.set("x-goog-user-project",n),i&&e.set("authorization",i),e}static log=(0,xYt.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async e=>{if(!e.headers.has("x-goog-api-client")){let n=process.version.replace(/^v/,"");e.headers.set("x-goog-api-client",`gl-node/${n}`)}let r=e.headers.get("User-Agent");r?r.includes(`${nse.PRODUCT_NAME}/`)||e.headers.set("User-Agent",`${r} ${nse.USER_AGENT}`):e.headers.set("User-Agent",nse.USER_AGENT);try{let n=e,i=n[t.RequestMethodNameSymbol],s=`${Math.floor(Math.random()*1e3)}`;n[t.RequestLogIdSymbol]=s;let o={url:e.url,headers:e.headers};i?t.log.info("%s [%s] request %j",i,s,o):t.log.info("[%s] request %j",s,o)}catch{}return e}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],i=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] response %j",n,i,e.data):t.log.info("[%s] response %j",i,e.data)}catch{}return e},rejected:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],i=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] error %j",n,i,e.response?.data):t.log.error("[%s] error %j",i,e.response?.data)}catch{}throw e}};static setMethodName(e,r){try{let n=e;n[t.RequestMethodNameSymbol]=r}catch{}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};Ql.AuthClient=ise});var ose=m(UP=>{"use strict";Object.defineProperty(UP,"__esModule",{value:!0});UP.LoginTicket=void 0;var sse=class{envelope;payload;constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};UP.LoginTicket=sse});var Ng=m(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.OAuth2Client=Xd.ClientAuthentication=Xd.CertificateFormat=Xd.CodeChallengeMethod=void 0;var h$e=Ys(),IYt=require("querystring"),RYt=require("stream"),DYt=lk(),m$e=Yl(),ase=fA(),F_=_u(),kYt=ose(),y$e;(function(t){t.Plain="plain",t.S256="S256"})(y$e||(Xd.CodeChallengeMethod=y$e={}));var Lf;(function(t){t.PEM="PEM",t.JWK="JWK"})(Lf||(Xd.CertificateFormat=Lf={}));var hA;(function(t){t.ClientSecretPost="ClientSecretPost",t.ClientSecretBasic="ClientSecretBasic",t.None="None"})(hA||(Xd.ClientAuthentication=hA={}));var use=class t extends F_.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=Lf.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(e={},r,n){super(typeof e=="object"?e:{}),typeof e!="object"&&(e={clientId:e,clientSecret:r,redirectUri:n}),this._clientId=e.clientId||e.client_id,this._clientSecret=e.clientSecret||e.client_secret,this.redirectUri=e.redirectUri||e.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...e.endpoints},this.clientAuthentication=e.clientAuthentication||hA.ClientSecretPost,this.issuers=e.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+IYt.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let e=(0,ase.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),s=(await e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:s}}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}async getTokenAsync(e){let r=this.endpoints.oauth2TokenUrl.toString(),n=new Headers,i={client_id:e.client_id||this._clientId,code_verifier:e.codeVerifier,code:e.code,grant_type:"authorization_code",redirect_uri:e.redirect_uri||this.redirectUri};if(this.clientAuthentication===hA.ClientSecretBasic){let u=Buffer.from(`${this._clientId}:${this._clientSecret}`);n.set("authorization",`Basic ${u.toString("base64")}`)}this.clientAuthentication===hA.ClientSecretPost&&(i.client_secret=this._clientSecret);let s={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,m$e.removeUndefinedValuesInObject)(i)),headers:n};F_.AuthClient.setMethodName(s,"getTokenAsync");let o=await this.transporter.request(s),a=o.data;return o.data&&o.data.expires_in&&(a.expiry_date=new Date().getTime()+o.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:o}}async refreshToken(e){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r}async refreshTokenNoCache(e){if(!e)throw new Error("No refresh token is set.");let r=this.endpoints.oauth2TokenUrl.toString(),n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i;try{let o={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,m$e.removeUndefinedValuesInObject)(n))};F_.AuthClient.setMethodName(o,"refreshTokenNoCache"),i=await this.transporter.request(o)}catch(o){throw o instanceof h$e.GaxiosError&&o.message==="invalid_grant"&&o.response?.data&&/ReAuth/i.test(o.response.data.error_description)&&(o.message=JSON.stringify(o.response.data)),o}let s=i.data;return i.data&&i.data.expires_in&&(s.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete s.expires_in),this.emit("tokens",s),{tokens:s,res:i}}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){let e=await this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=await this.processAndValidateRefreshHandler();if(n?.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=await this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(e){return(await this.getRequestMetadataAsync(e)).headers}async getRequestMetadataAsync(e){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let a=new Headers({authorization:r.token_type+" "+r.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let u=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let n=null,i=null;try{n=await this.refreshToken(r.refresh_token),i=n.tokens}catch(a){let u=a;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let s=this.credentials;s.token_type=s.token_type||"Bearer",i.refresh_token=s.refresh_token,this.credentials=i;let o=new Headers({authorization:s.token_type+" "+i.access_token});return{headers:this.addSharedMetadataHeaders(o),res:n.res}}static getRevokeTokenUrl(e){return new t().getRevokeTokenURL(e).toString()}getRevokeTokenURL(e){let r=new URL(this.endpoints.oauth2RevokeUrl);return r.searchParams.append("token",e),r}revokeToken(e,r){let n={...t.RETRY_CONFIG,url:this.getRevokeTokenURL(e).toString(),method:"POST"};if(F_.AuthClient.setMethodName(n,"revokeToken"),r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){try{let n=await this.getRequestMetadataAsync();return e.headers=h$e.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,n.headers),this.apiKey&&e.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(e)}catch(n){let i=n.response;if(i){let s=i.status,o=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),a=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,u=i.config.data instanceof RYt.Readable,c=s===401||s===403;if(!r&&c&&!u&&o)return await this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&c&&!u&&a){let l=await this.processAndValidateRefreshHandler();return l?.access_token&&this.setCredentials(l),this.requestAsync(e,!0)}}throw n}}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}async verifyIdTokenAsync(e){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,this.issuers,e.maxExpiry)}async getTokenInfo(e){let{data:r}=await this.transporter.request({...t.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${e}`},url:this.endpoints.tokenInfoUrl.toString()}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){let e=new Date().getTime(),r=(0,ase.hasBrowserCrypto)()?Lf.JWK:Lf.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case Lf.PEM:i=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case Lf.JWK:i=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw new Error(`Unsupported certificate format ${r}`)}try{let c={...t.RETRY_CONFIG,url:i};F_.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),n=await this.transporter.request(c)}catch(c){throw c instanceof Error&&(c.message=`Failed to retrieve verification certificates: ${c.message}`),c}let s=n?.headers.get("cache-control"),o=-1;if(s){let c=/max-age=(?<maxAge>[0-9]+)/.exec(s)?.groups?.maxAge;c&&(o=Number(c)*1e3)}let a={};switch(r){case Lf.PEM:a=n.data;break;case Lf.JWK:for(let c of n.data.keys)a[c.kid]=c;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=o===-1?null:new Date(u.getTime()+o),this.certificateCache=a,this.certificateCacheFormat=r,{certs:a,format:r,res:n}}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let e,r=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let n={...t.RETRY_CONFIG,url:r};F_.AuthClient.setMethodName(n,"getIapPublicKeysAsync"),e=await this.transporter.request(n)}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(e,r,n,i,s){let o=(0,ase.createCrypto)();s||(s=t.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let a=e.split(".");if(a.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=a[0]+"."+a[1],c=a[2],l,d;try{l=JSON.parse(o.decodeBase64StringUtf8(a[0]))}catch(C){throw C instanceof Error&&(C.message=`Can't parse token envelope: ${a[0]}': ${C.message}`),C}if(!l)throw new Error("Can't parse token envelope: "+a[0]);try{d=JSON.parse(o.decodeBase64StringUtf8(a[1]))}catch(C){throw C instanceof Error&&(C.message=`Can't parse token payload '${a[0]}`),C}if(!d)throw new Error("Can't parse token payload: "+a[1]);if(!Object.prototype.hasOwnProperty.call(r,l.kid))throw new Error("No pem found for envelope: "+JSON.stringify(l));let p=r[l.kid];if(l.alg==="ES256"&&(c=DYt.joseToDer(c,"ES256").toString("base64")),!await o.verify(p,u,c))throw new Error("Invalid token signature: "+e);if(!d.iat)throw new Error("No issue time in token: "+JSON.stringify(d));if(!d.exp)throw new Error("No expiration time in token: "+JSON.stringify(d));let h=Number(d.iat);if(isNaN(h))throw new Error("iat field using invalid format");let g=Number(d.exp);if(isNaN(g))throw new Error("exp field using invalid format");let _=new Date().getTime()/1e3;if(g>=_+s)throw new Error("Expiration time too far in future: "+JSON.stringify(d));let S=h-t.CLOCK_SKEW_SECS_,w=g+t.CLOCK_SKEW_SECS_;if(_<S)throw new Error("Token used too early, "+_+" < "+S+": "+JSON.stringify(d));if(_>w)throw new Error("Token used too late, "+_+" > "+w+": "+JSON.stringify(d));if(i&&i.indexOf(d.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+d.iss);if(typeof n<"u"&&n!==null){let C=d.aud,A=!1;if(n.constructor===Array?A=n.indexOf(C)>-1:A=C===n,!A)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new kYt.LoginTicket(l,d)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let e=await this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};Xd.OAuth2Client=use});var lse=m(VP=>{"use strict";Object.defineProperty(VP,"__esModule",{value:!0});VP.Compute=void 0;var MYt=Ys(),g$e=pA(),PYt=Ng(),cse=class extends PYt.OAuth2Client{serviceAccountEmail;scopes;constructor(e={}){super(e),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=Array.isArray(e.scopes)?e.scopes:e.scopes?[e.scopes]:[]}async refreshTokenNoCache(){let e=`service-accounts/${this.serviceAccountEmail}/token`,r;try{let i={property:e};this.scopes.length>0&&(i.params={scopes:this.scopes.join(",")}),r=await g$e.instance(i)}catch(i){throw i instanceof MYt.GaxiosError&&(i.message=`Could not refresh access token: ${i.message}`,this.wrapError(i)),i}let n=r;return r&&r.expires_in&&(n.expiry_date=new Date().getTime()+r.expires_in*1e3,delete n.expires_in),this.emit("tokens",n),{tokens:n,res:null}}async fetchIdToken(e){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=await g$e.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n}wrapError(e){let r=e.response;r&&r.status&&(e.status=r.status,r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};VP.Compute=cse});var pse=m(GP=>{"use strict";Object.defineProperty(GP,"__esModule",{value:!0});GP.IdTokenClient=void 0;var NYt=Ng(),dse=class extends NYt.OAuth2Client{targetAudience;idTokenProvider;constructor(e){super(e),this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let r=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:r,expiry_date:this.getIdTokenExpiryDate(r)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};GP.IdTokenClient=dse});var fse=m(B_=>{"use strict";Object.defineProperty(B_,"__esModule",{value:!0});B_.GCPEnv=void 0;B_.clear=FYt;B_.getEnv=BYt;var E$e=pA(),Zd;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",t.NONE="NONE"})(Zd||(B_.GCPEnv=Zd={}));var mA;function FYt(){mA=void 0}async function BYt(){return mA||(mA=qYt(),mA)}async function qYt(){let t=Zd.NONE;return LYt()?t=Zd.APP_ENGINE:jYt()?t=Zd.CLOUD_FUNCTIONS:await VYt()?await UYt()?t=Zd.KUBERNETES_ENGINE:$Yt()?t=Zd.CLOUD_RUN:KYt()?t=Zd.CLOUD_RUN_JOBS:t=Zd.COMPUTE_ENGINE:t=Zd.NONE,t}function LYt(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function jYt(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function $Yt(){return!!process.env.K_CONFIGURATION}function KYt(){return!!process.env.CLOUD_RUN_JOB}async function UYt(){try{return await E$e.instance("attributes/cluster-name"),!0}catch{return!1}}async function VYt(){return E$e.isAvailable()}});var hse=m(($kr,b$e)=>{var HP=Pl().Buffer,GYt=require("stream"),HYt=require("util");function zP(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=HP.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=HP.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}HYt.inherits(zP,GYt);zP.prototype.write=function(e){this.buffer=HP.concat([this.buffer,HP.from(e)]),this.emit("data",e)};zP.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};b$e.exports=zP});var Ese=m((Kkr,x$e)=>{var L_=Pl().Buffer,Nc=require("crypto"),v$e=lk(),_$e=require("util"),zYt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,yA="secret must be a string or buffer",q_="key must be a string or a buffer",WYt="key must be a string, a buffer or an object",yse=typeof Nc.createPublicKey=="function";yse&&(q_+=" or a KeyObject",yA+="or a KeyObject");function S$e(t){if(!L_.isBuffer(t)&&typeof t!="string"&&(!yse||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Xl(q_)}function w$e(t){if(!L_.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Xl(WYt)}function JYt(t){if(!L_.isBuffer(t)){if(typeof t=="string")return t;if(!yse||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Xl(yA)}}function gse(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function A$e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Xl(t){var e=[].slice.call(arguments,1),r=_$e.format.bind(_$e,t).apply(null,e);return new TypeError(r)}function YYt(t){return L_.isBuffer(t)||typeof t=="string"}function gA(t){return YYt(t)||(t=JSON.stringify(t)),t}function C$e(t){return function(r,n){JYt(n),r=gA(r);var i=Nc.createHmac("sha"+t,n),s=(i.update(r),i.digest("base64"));return gse(s)}}var mse,QYt="timingSafeEqual"in Nc?function(e,r){return e.byteLength!==r.byteLength?!1:Nc.timingSafeEqual(e,r)}:function(e,r){return mse||(mse=ote()),mse(e,r)};function XYt(t){return function(r,n,i){var s=C$e(t)(r,i);return QYt(L_.from(n),L_.from(s))}}function T$e(t){return function(r,n){w$e(n),r=gA(r);var i=Nc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign(n,"base64"));return gse(s)}}function O$e(t){return function(r,n,i){S$e(i),r=gA(r),n=A$e(n);var s=Nc.createVerify("RSA-SHA"+t);return s.update(r),s.verify(i,n,"base64")}}function ZYt(t){return function(r,n){w$e(n),r=gA(r);var i=Nc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign({key:n,padding:Nc.constants.RSA_PKCS1_PSS_PADDING,saltLength:Nc.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return gse(s)}}function eQt(t){return function(r,n,i){S$e(i),r=gA(r),n=A$e(n);var s=Nc.createVerify("RSA-SHA"+t);return s.update(r),s.verify({key:i,padding:Nc.constants.RSA_PKCS1_PSS_PADDING,saltLength:Nc.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function tQt(t){var e=T$e(t);return function(){var n=e.apply(null,arguments);return n=v$e.derToJose(n,"ES"+t),n}}function rQt(t){var e=O$e(t);return function(n,i,s){i=v$e.joseToDer(i,"ES"+t).toString("base64");var o=e(n,i,s);return o}}function nQt(){return function(){return""}}function iQt(){return function(e,r){return r===""}}x$e.exports=function(e){var r={hs:C$e,rs:T$e,ps:ZYt,es:tQt,none:nQt},n={hs:XYt,rs:O$e,ps:eQt,es:rQt,none:iQt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw Xl(zYt,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:r[s](o),verify:n[s](o)}}});var bse=m((Ukr,I$e)=>{var sQt=require("buffer").Buffer;I$e.exports=function(e){return typeof e=="string"?e:typeof e=="number"||sQt.isBuffer(e)?e.toString():JSON.stringify(e)}});var N$e=m((Vkr,P$e)=>{var oQt=Pl().Buffer,R$e=hse(),aQt=Ese(),uQt=require("stream"),D$e=bse(),_se=require("util");function k$e(t,e){return oQt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cQt(t,e,r){r=r||"utf8";var n=k$e(D$e(t),"binary"),i=k$e(D$e(e),r);return _se.format("%s.%s",n,i)}function M$e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,s=aQt(e.alg),o=cQt(e,r,i),a=s.sign(o,n);return _se.format("%s.%s",o,a)}function WP(t){var e=t.secret;if(e=e??t.privateKey,e=e??t.key,/^hs/i.test(t.header.alg)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new R$e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new R$e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}_se.inherits(WP,uQt);WP.prototype.sign=function(){try{var e=M$e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};WP.sign=M$e;P$e.exports=WP});var G$e=m((Gkr,V$e)=>{var B$e=Pl().Buffer,F$e=hse(),lQt=Ese(),dQt=require("stream"),q$e=bse(),pQt=require("util"),fQt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function hQt(t){return Object.prototype.toString.call(t)==="[object Object]"}function mQt(t){if(hQt(t))return t;try{return JSON.parse(t)}catch{return}}function L$e(t){var e=t.split(".",1)[0];return mQt(B$e.from(e,"base64").toString("binary"))}function yQt(t){return t.split(".",2).join(".")}function j$e(t){return t.split(".")[2]}function gQt(t,e){e=e||"utf8";var r=t.split(".")[1];return B$e.from(r,"base64").toString(e)}function $$e(t){return fQt.test(t)&&!!L$e(t)}function K$e(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=q$e(t);var i=j$e(t),s=yQt(t),o=lQt(e);return o.verify(s,i,r)}function U$e(t,e){if(e=e||{},t=q$e(t),!$$e(t))return null;var r=L$e(t);if(!r)return null;var n=gQt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:j$e(t)}}function j_(t){t=t||{};var e=t.secret;if(e=e??t.publicKey,e=e??t.key,/^hs/i.test(t.algorithm)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new F$e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new F$e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}pQt.inherits(j_,dQt);j_.prototype.verify=function(){try{var e=K$e(this.signature.buffer,this.algorithm,this.key.buffer),r=U$e(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};j_.decode=U$e;j_.isValid=$$e;j_.verify=K$e;V$e.exports=j_});var vse=m(gm=>{var H$e=N$e(),JP=G$e(),EQt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];gm.ALGORITHMS=EQt;gm.sign=H$e.sign;gm.verify=JP.verify;gm.decode=JP.decode;gm.isValid=JP.isValid;gm.createSign=function(e){return new H$e(e)};gm.createVerify=function(e){return new JP(e)}});var aKe=m(QP=>{"use strict";Object.defineProperty(QP,"__esModule",{value:!0});QP.GoogleToken=void 0;var z$e=YP(require("fs")),bQt=Ys(),_Qt=YP(vse()),vQt=YP(require("path")),SQt=require("util");function YP(t,e){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(YP=function(s,o){if(!o&&s&&s.__esModule)return s;var a,u,c={__proto__:null,default:s};if(s===null||jf(s)!="object"&&typeof s!="function")return c;if(a=o?n:r){if(a.has(s))return a.get(s);a.set(s,c)}for(var l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((u=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(u.get||u.set)?a(c,l,u):c[l]=s[l]);return c})(t,e)}function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function wQt(t,e){rKe(t,e),e.add(t)}function AQt(t,e,r){rKe(t,e),e.set(t,r)}function rKe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function W$e(t,e,r){return t.set(Zl(t,e),r),r}function J$e(t,e){return t.get(Zl(t,e))}function Zl(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function Y$e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sKe(n.key),n)}}function nKe(t,e,r){return e&&Y$e(t.prototype,e),r&&Y$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function iKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CQt(t,e,r){return e=vA(e),TQt(t,Ose()?Reflect.construct(e,r||[],vA(t).constructor):e.apply(t,r))}function TQt(t,e){if(e&&(jf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OQt(t)}function OQt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_A(t,e)}function Sse(t){var e=typeof Map=="function"?new Map:void 0;return Sse=function(n){if(n===null||!RQt(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return IQt(n,arguments,vA(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_A(i,n)},Sse(t)}function IQt(t,e,r){if(Ose())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&_A(i,r.prototype),i}function Ose(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ose=function(){return!!t})()}function RQt(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function _A(t,e){return _A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},_A(t,e)}function vA(t){return vA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vA(t)}function vu(t,e,r){return(e=sKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sKe(t){var e=DQt(t,"string");return jf(e)=="symbol"?e:e+""}function DQt(t,e){if(jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wu(){var t,e,r=typeof Symbol=="function"?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(f,h,g,_){var S=h&&h.prototype instanceof a?h:a,w=Object.create(S.prototype);return Su(w,"_invoke",(function(C,A,O){var x,R,M,I=0,F=O||[],B=!1,U={p:0,n:0,v:t,a:k,f:k.bind(t,4),d:function(ie,j){return x=ie,R=0,M=t,U.n=j,o}};function k(H,ie){for(R=H,M=ie,e=0;!B&&I&&!j&&e<F.length;e++){var j,V=F[e],Ee=U.p,Re=V[2];H>3?(j=Re===ie)&&(M=V[(R=V[4])?5:(R=3,3)],V[4]=V[5]=t):V[0]<=Ee&&((j=H<2&&Ee<V[1])?(R=0,U.v=ie,U.n=V[1]):Ee<Re&&(j=H<3||V[0]>ie||ie>Re)&&(V[4]=H,V[5]=ie,U.n=Re,R=0))}if(j||H>1)return o;throw B=!0,ie}return function(H,ie,j){if(I>1)throw TypeError("Generator is already running");for(B&&ie===1&&k(ie,j),R=ie,M=j;(e=R<2?t:M)||!B;){x||(R?R<3?(R>1&&(U.n=-1),k(R,M)):U.n=M:U.v=M);try{if(I=2,x){if(R||(H="next"),e=x[H]){if(!(e=e.call(x,M)))throw TypeError("iterator result is not an object");if(!e.done)return e;M=e.value,R<2&&(R=0)}else R===1&&(e=x.return)&&e.call(x),R<2&&(M=TypeError("The iterator does not provide a '"+H+"' method"),R=1);x=t}else if((e=(B=U.n<0)?M:C.call(A,U))!==o)break}catch(V){x=t,R=1,M=V}finally{I=1}}return{value:e,done:B}}})(f,g,_),!0),w}var o={};function a(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(Su(e={},n,function(){return this}),e),d=c.prototype=a.prototype=Object.create(l);function p(f){return Object.setPrototypeOf?Object.setPrototypeOf(f,c):(f.__proto__=c,Su(f,i,"GeneratorFunction")),f.prototype=Object.create(d),f}return u.prototype=c,Su(d,"constructor",c),Su(c,"constructor",u),u.displayName="GeneratorFunction",Su(c,i,"GeneratorFunction"),Su(d),Su(d,i,"Generator"),Su(d,n,function(){return this}),Su(d,"toString",function(){return"[object Generator]"}),(wu=function(){return{w:s,m:p}})()}function Su(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Su=function(o,a,u,c){if(a)i?i(o,a,{value:u,enumerable:!c,configurable:!c,writable:!c}):o[a]=u;else{var l=function(p,f){Su(o,p,function(h){return this._invoke(p,f,h)})};l("next",0),l("throw",1),l("return",2)}},Su(t,e,r,n)}function Q$e(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void r(c)}a.done?e(u):Promise.resolve(u).then(n,i)}function $_(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){Q$e(s,n,i,o,a,"next",u)}function a(u){Q$e(s,n,i,o,a,"throw",u)}o(void 0)})}}var X$e=z$e.readFile?(0,SQt.promisify)(z$e.readFile):$_(wu().m(function t(){return wu().w(function(e){for(;;)switch(e.n){case 0:throw new bA("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return e.a(2)}},t)})),Z$e="https://oauth2.googleapis.com/token",kQt="https://oauth2.googleapis.com/revoke?token=",bA=(function(t){function e(r,n){var i;return iKe(this,e),i=CQt(this,e,[r]),vu(i,"code",void 0),i.code=n,i}return xQt(e,t),nKe(e)})(Sse(Error)),EA=new WeakMap,ep=new WeakSet,zkr=QP.GoogleToken=(function(){function t(e){iKe(this,t),wQt(this,ep),vu(this,"expiresAt",void 0),vu(this,"key",void 0),vu(this,"keyFile",void 0),vu(this,"iss",void 0),vu(this,"sub",void 0),vu(this,"scope",void 0),vu(this,"rawToken",void 0),vu(this,"tokenExpires",void 0),vu(this,"email",void 0),vu(this,"additionalClaims",void 0),vu(this,"eagerRefreshThresholdMillis",void 0),vu(this,"transporter",{request:function(n){return(0,bQt.request)(n)}}),AQt(this,EA,void 0),Zl(ep,this,oKe).call(this,e)}return nKe(t,[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var r=new Date().getTime();return this.rawToken&&this.expiresAt?r>=this.expiresAt:!0}},{key:"isTokenExpiring",value:function(){var r,n=new Date().getTime(),i=(r=this.eagerRefreshThresholdMillis)!==null&&r!==void 0?r:0;return this.rawToken&&this.expiresAt?this.expiresAt<=n+i:!0}},{key:"getToken",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(jf(r)==="object"&&(n=r,r=void 0),n=Object.assign({forceRefresh:!1},n),r){var i=r;Zl(ep,this,eKe).call(this,n).then(function(s){return i(null,s)},r);return}return Zl(ep,this,eKe).call(this,n)}},{key:"getCredentials",value:(function(){var e=$_(wu().m(function n(i){var s,o,a,u,c,l,d;return wu().w(function(p){for(;;)switch(p.n){case 0:s=vQt.extname(i),d=s,p.n=d===".json"?1:d===".der"||d===".crt"||d===".pem"?4:d===".p12"||d===".pfx"?6:7;break;case 1:return p.n=2,X$e(i,"utf8");case 2:if(o=p.v,a=JSON.parse(o),u=a.private_key,c=a.client_email,!(!u||!c)){p.n=3;break}throw new bA("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return p.a(2,{privateKey:u,clientEmail:c});case 4:return p.n=5,X$e(i,"utf8");case 5:return l=p.v,p.a(2,{privateKey:l});case 6:throw new bA("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new bA("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return p.a(2)}},n)}));function r(n){return e.apply(this,arguments)}return r})()},{key:"revokeToken",value:function(r){if(r){Zl(ep,this,tKe).call(this).then(function(){return r()},r);return}return Zl(ep,this,tKe).call(this)}}])})();function eKe(t){return wse.apply(this,arguments)}function wse(){return wse=$_(wu().m(function t(e){return wu().w(function(r){for(;;)switch(r.n){case 0:if(!(J$e(EA,this)&&!e.forceRefresh)){r.n=1;break}return r.a(2,J$e(EA,this));case 1:return r.p=1,r.n=2,W$e(EA,this,Zl(ep,this,MQt).call(this,e));case 2:return r.a(2,r.v);case 3:return r.p=3,W$e(EA,this,void 0),r.f(3);case 4:return r.a(2)}},t,this,[[1,,3,4]])})),wse.apply(this,arguments)}function MQt(t){return Ase.apply(this,arguments)}function Ase(){return Ase=$_(wu().m(function t(e){var r;return wu().w(function(n){for(;;)switch(n.n){case 0:if(!(this.isTokenExpiring()===!1&&e.forceRefresh===!1)){n.n=1;break}return n.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){n.n=2;break}throw new Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){n.n=4;break}return n.n=3,this.getCredentials(this.keyFile);case 3:r=n.v,this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||Zl(ep,this,PQt).call(this);case 4:return n.a(2,Zl(ep,this,NQt).call(this))}},t,this)})),Ase.apply(this,arguments)}function PQt(){if(!this.iss)throw new bA("email is required.","MISSING_CREDENTIALS")}function tKe(){return Cse.apply(this,arguments)}function Cse(){return Cse=$_(wu().m(function t(){var e;return wu().w(function(r){for(;;)switch(r.n){case 0:if(this.accessToken){r.n=1;break}throw new Error("No token to revoke.");case 1:return e=kQt+this.accessToken,r.n=2,this.transporter.request({url:e,retry:!0});case 2:Zl(ep,this,oKe).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return r.a(2)}},t,this)})),Cse.apply(this,arguments)}function oKe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,jf(t.scope)==="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis,t.transporter&&(this.transporter=t.transporter)}function NQt(){return Tse.apply(this,arguments)}function Tse(){return Tse=$_(wu().m(function t(){var e,r,n,i,s,o,a,u,c,l;return wu().w(function(d){for(;;)switch(d.n){case 0:return e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:Z$e,exp:e+3600,iat:e,sub:this.sub},r),i=_Qt.sign({header:{alg:"RS256"},payload:n,secret:this.key}),d.p=1,d.n=2,this.transporter.request({method:"POST",url:Z$e,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return s=d.v,this.rawToken=s.data,this.expiresAt=s.data.expires_in===null||s.data.expires_in===void 0?void 0:(e+s.data.expires_in)*1e3,d.a(2,this.rawToken);case 3:throw d.p=3,l=d.v,this.rawToken=void 0,this.tokenExpires=void 0,u=l.response&&(o=l.response)!==null&&o!==void 0&&o.data?(a=l.response)===null||a===void 0?void 0:a.data:{},u.error&&(c=u.error_description?": ".concat(u.error_description):"",l.message="".concat(u.error).concat(c)),l;case 4:return d.a(2)}},t,this,[[1,3]])})),Tse.apply(this,arguments)}});var Ise=m(XP=>{"use strict";Object.defineProperty(XP,"__esModule",{value:!0});XP.JWTAccess=void 0;var FQt=vse(),BQt=Yl(),uKe={alg:"RS256",typ:"JWT"},xse=class t{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new BQt.LRUCache({capacity:500,maxAge:3600*1e3});constructor(e,r,n,i){this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i??300*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),s=this.cache.get(i),o=Date.now();if(s&&s.expiration-o>this.eagerRefreshThresholdMillis)return new Headers(s.headers);let a=Math.floor(Date.now()/1e3),u=t.getExpirationTime(a),c;if(Array.isArray(n)&&(n=n.join(" ")),n?c={iss:this.email,sub:this.email,scope:n,exp:u,iat:a}:c={iss:this.email,sub:this.email,aud:e,exp:u,iat:a},r){for(let h in c)if(r[h])throw new Error(`The '${h}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let l=this.keyId?{...uKe,kid:this.keyId}:uKe,d=Object.assign(c,r),p=FQt.sign({header:l,payload:d,secret:this.key}),f=new Headers({authorization:`Bearer ${p}`});return this.cache.set(i,{expiration:u*1e3,headers:f}),f}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",s=>i+=s).on("error",n).on("end",()=>{try{let s=JSON.parse(i);this.fromJSON(s),r()}catch(s){n(s)}})})}};XP.JWTAccess=xse});var Dse=m(eN=>{"use strict";Object.defineProperty(eN,"__esModule",{value:!0});eN.JWT=void 0;var cKe=aKe(),qQt=Ise(),LQt=Ng(),ZP=_u(),Rse=class t extends LQt.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(e={}){super(e),this.email=e.email,this.keyFile=e.keyFile,this.key=e.key,this.keyId=e.keyId,this.scopes=e.scopes,this.subject=e.subject,this.additionalClaims=e.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){let r=new t(this);return r.scopes=e,r}async getRequestMetadataAsync(e){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let r=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==ZP.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==ZP.DEFAULT_UNIVERSE)throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${ZP.DEFAULT_UNIVERSE}`);if(!this.apiKey&&r)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:n}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${n.id_token}`}))}}else{this.access||(this.access=new qQt.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let n;this.hasUserScopes()?n=this.scopes:e||(n=this.defaultScopes);let i=this.useJWTAccessWithScope||this.universeDomain!==ZP.DEFAULT_UNIVERSE,s=await this.access.getRequestHeaders(e??void 0,this.additionalClaims,i?n:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(e):{headers:new Headers}}async fetchIdToken(e){let r=new cKe.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e},transporter:this.transporter});if(await r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}async authorizeAsync(){let e=await this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens}async refreshTokenNoCache(){let e=this.createGToken(),n={access_token:(await e.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:e.expiresAt,id_token:e.idToken};return this.emit("tokens",n),{res:null,tokens:n}}createGToken(){return this.gtoken||(this.gtoken=new cKe.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);this.fromJSON(s),r()}catch(s){n(s)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=await this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}};eN.JWT=Rse});var Mse=m(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:!0});K_.UserRefreshClient=K_.USER_REFRESH_ACCOUNT_TYPE=void 0;var jQt=Ng(),$Qt=_u();K_.USER_REFRESH_ACCOUNT_TYPE="authorized_user";var kse=class t extends jQt.OAuth2Client{_refreshToken;constructor(e,r,n,i,s){let o=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:s};super(o),this._refreshToken=o.refreshToken,this.credentials.refresh_token=o.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(e){let r={...t.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:e})};return $Qt.AuthClient.setMethodName(r,"fetchIdToken"),(await this.transporter.request(r)).data.id_token}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}async fromStreamAsync(e){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);return this.fromJSON(s),r()}catch(s){return n(s)}})})}static fromJSON(e){let r=new t;return r.fromJSON(e),r}};K_.UserRefreshClient=kse});var Nse=m(U_=>{"use strict";Object.defineProperty(U_,"__esModule",{value:!0});U_.Impersonated=U_.IMPERSONATED_ACCOUNT_TYPE=void 0;var lKe=Ng(),KQt=Ys(),UQt=Yl();U_.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";var Pse=class t extends lKe.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(e={}){if(super(e),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=e.sourceClient??new lKe.OAuth2Client,this.targetPrincipal=e.targetPrincipal??"",this.delegates=e.delegates??[],this.targetScopes=e.targetScopes??[],this.lifetime=e.lifetime??3600,!!!(0,UQt.originalOrCamelOptions)(e).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=e.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(e){await this.sourceClient.getAccessToken();let r=`projects/-/serviceAccounts/${this.targetPrincipal}`,n=`${this.endpoint}/v1/${r}:signBlob`,i={delegates:this.delegates,payload:Buffer.from(e).toString("base64")};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:n,data:i,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let e="projects/-/serviceAccounts/"+this.targetPrincipal,r=`${this.endpoint}/v1/${e}:generateAccessToken`,n={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},i=await this.sourceClient.request({...t.RETRY_CONFIG,url:r,data:n,method:"POST"}),s=i.data;return this.credentials.access_token=s.accessToken,this.credentials.expiry_date=Date.parse(s.expireTime),{tokens:this.credentials,res:i}}catch(e){if(!(e instanceof Error))throw e;let r=0,n="";throw e instanceof KQt.GaxiosError&&(r=e?.response?.data?.error?.status,n=e?.response?.data?.error?.message),r&&n?(e.message=`${r}: unable to impersonate: ${n}`,e):(e.message=`unable to impersonate: ${e}`,e)}}async fetchIdToken(e,r){await this.sourceClient.getAccessToken();let n=`projects/-/serviceAccounts/${this.targetPrincipal}`,i=`${this.endpoint}/v1/${n}:generateIdToken`,s={delegates:this.delegates,audience:e,includeEmail:r?.includeEmail??!0,useEmailAzp:r?.includeEmail??!0};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:i,data:s,method:"POST"})).data.token}};U_.Impersonated=Pse});var Bse=m(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0});SA.OAuthClientAuthHandler=void 0;SA.getErrorFromOAuthErrorResponse=HQt;var V_=Ys(),VQt=fA(),GQt=["PUT","POST","PATCH"],Fse=class{#e=(0,VQt.createCrypto)();#t;transporter;constructor(e){e&&"clientId"in e?(this.#t=e,this.transporter=new V_.Gaxios):(this.#t=e?.clientAuthentication,this.transporter=e?.transporter||new V_.Gaxios)}applyClientAuthenticationOptions(e,r){e.headers=V_.Gaxios.mergeHeaders(e.headers),this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){if(r)e.headers=V_.Gaxios.mergeHeaders(e.headers,{authorization:`Bearer ${r}`});else if(this.#t?.confidentialClientType==="basic"){e.headers=V_.Gaxios.mergeHeaders(e.headers);let n=this.#t.clientId,i=this.#t.clientSecret||"",s=this.#e.encodeBase64StringUtf8(`${n}:${i}`);V_.Gaxios.mergeHeaders(e.headers,{authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){if(this.#t?.confidentialClientType==="request-body"){let r=(e.method||"GET").toUpperCase();if(!GQt.includes(r))throw new Error(`${r} HTTP method does not support ${this.#t.confidentialClientType} client authentication`);let i=new Headers(e.headers).get("content-type");if(i?.startsWith("application/x-www-form-urlencoded")||e.data instanceof URLSearchParams){let s=new URLSearchParams(e.data??"");s.append("client_id",this.#t.clientId),s.append("client_secret",this.#t.clientSecret||""),e.data=s}else if(i?.startsWith("application/json"))e.data=e.data||{},Object.assign(e.data,{client_id:this.#t.clientId,client_secret:this.#t.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.#t.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};SA.OAuthClientAuthHandler=Fse;function HQt(t,e){let r=t.error,n=t.error_description,i=t.error_uri,s=`Error code ${r}`;typeof n<"u"&&(s+=`: ${n}`),typeof i<"u"&&(s+=` - ${i}`);let o=new Error(s);if(e){let a=Object.keys(e);e.stack&&a.push("stack"),a.forEach(u=>{u!=="message"&&Object.defineProperty(o,u,{value:e[u],writable:!1,enumerable:!0})})}return o}});var rN=m(tN=>{"use strict";Object.defineProperty(tN,"__esModule",{value:!0});tN.StsCredentials=void 0;var zQt=Ys(),WQt=_u(),dKe=Bse(),JQt=Yl(),qse=class t extends dKe.OAuthClientAuthHandler{#e;constructor(e={tokenExchangeEndpoint:""},r){(typeof e!="object"||e instanceof URL)&&(e={tokenExchangeEndpoint:e,clientAuthentication:r}),super(e),this.#e=e.tokenExchangeEndpoint}async exchangeToken(e,r,n){let i={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:e.scope?.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:e.actingParty?.actorToken,actor_token_type:e.actingParty?.actorTokenType,options:n&&JSON.stringify(n)},s={...t.RETRY_CONFIG,url:this.#e.toString(),method:"POST",headers:r,data:new URLSearchParams((0,JQt.removeUndefinedValuesInObject)(i))};WQt.AuthClient.setMethodName(s,"exchangeToken"),this.applyClientAuthenticationOptions(s);try{let o=await this.transporter.request(s),a=o.data;return a.res=o,a}catch(o){throw o instanceof zQt.GaxiosError&&o.response?(0,dKe.getErrorFromOAuthErrorResponse)(o.response.data,o):o}}};tN.StsCredentials=qse});var Em=m(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.BaseExternalAccountClient=Fc.CLOUD_RESOURCE_MANAGER=Fc.EXTERNAL_ACCOUNT_TYPE=Fc.EXPIRATION_TIME_OFFSET=void 0;var YQt=Ys(),QQt=require("stream"),Lse=_u(),XQt=rN(),pKe=Yl(),ZQt=tse(),eXt="urn:ietf:params:oauth:grant-type:token-exchange",tXt="urn:ietf:params:oauth:token-type:access_token",jse="https://www.googleapis.com/auth/cloud-platform",rXt=3600;Fc.EXPIRATION_TIME_OFFSET=300*1e3;Fc.EXTERNAL_ACCOUNT_TYPE="external_account";Fc.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var nXt="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",iXt="https://sts.{universeDomain}/v1/token",$se=class t extends Lse.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#e=null;constructor(e){super(e);let r=(0,pKe.originalOrCamelOptions)(e),n=r.get("type");if(n&&n!==Fc.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Fc.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);let i=r.get("client_id"),s=r.get("client_secret");this.tokenUrl=r.get("token_url")??iXt.replace("{universeDomain}",this.universeDomain);let o=r.get("subject_token_type"),a=r.get("workforce_pool_user_project"),u=r.get("service_account_impersonation_url"),c=r.get("service_account_impersonation"),l=(0,pKe.originalOrCamelOptions)(c).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(r.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),i&&(this.clientAuth={confidentialClientType:"basic",clientId:i,clientSecret:s}),this.stsCredential=new XQt.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=r.get("scopes")||[jse],this.cachedAccessToken=null,this.audience=r.get("audience"),this.subjectTokenType=o,this.workforcePoolUserProject=a;let d=new RegExp(nXt);if(this.workforcePoolUserProject&&!this.audience.match(d))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=u,this.serviceAccountImpersonationLifetime=l,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=rXt),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);return/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl)?.groups?.email||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async getProjectId(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=await this.getRequestHeaders(),n={...t.RETRY_CONFIG,headers:r,url:`${this.cloudResourceManagerURL.toString()}${e}`};Lse.AuthClient.setMethodName(n,"getProjectId");let i=await this.transporter.request(n);return this.projectId=i.data.projectId,this.projectId}return null}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=YQt.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof QQt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){this.#e=this.#e||this.#t();try{return await this.#e}finally{this.#e=null}}async#t(){let e=await this.retrieveSubjectToken(),r={grantType:eXt,audience:this.audience,requestedTokenType:tXt,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[jse]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),s=await this.stsCredential.exchangeToken(r,i,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(s.access_token):s.expires_in?this.cachedAccessToken={access_token:s.access_token,expiry_date:new Date().getTime()+s.expires_in*1e3,res:s.res}:this.cachedAccessToken={access_token:s.access_token,res:s.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}async getImpersonatedAccessToken(e){let r={...t.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${e}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};Lse.AuthClient.setMethodName(r,"getImpersonatedAccessToken");let n=await this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:this.scopes||[jse]}getMetricsHeaderValue(){let e=process.version.replace(/^v/,""),r=this.serviceAccountImpersonationUrl!==void 0,n=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${e} auth/${ZQt.pkg.version} google-byoid-sdk source/${n} sa-impersonation/${r} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}};Fc.BaseExternalAccountClient=$se});var fKe=m(nN=>{"use strict";Object.defineProperty(nN,"__esModule",{value:!0});nN.FileSubjectTokenSupplier=void 0;var Use=require("util"),Vse=require("fs"),sXt=(0,Use.promisify)(Vse.readFile??(()=>{})),oXt=(0,Use.promisify)(Vse.realpath??(()=>{})),aXt=(0,Use.promisify)(Vse.lstat??(()=>{})),Kse=class{filePath;formatType;subjectTokenFieldName;constructor(e){this.filePath=e.filePath,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName}async getSubjectToken(){let e=this.filePath;try{if(e=await oXt(e),!(await aXt(e)).isFile())throw new Error}catch(i){throw i instanceof Error&&(i.message=`The file at ${e} does not exist, or it is not a file. ${i.message}`),i}let r,n=await sXt(e,{encoding:"utf8"});if(this.formatType==="text"?r=n:this.formatType==="json"&&this.subjectTokenFieldName&&(r=JSON.parse(n)[this.subjectTokenFieldName]),!r)throw new Error("Unable to parse the subject_token from the credential_source file");return r}};nN.FileSubjectTokenSupplier=Kse});var hKe=m(iN=>{"use strict";Object.defineProperty(iN,"__esModule",{value:!0});iN.UrlSubjectTokenSupplier=void 0;var uXt=_u(),Gse=class{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(e){this.url=e.url,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName,this.headers=e.headers,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getSubjectToken(e){let r={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};uXt.AuthClient.setMethodName(r,"getSubjectToken");let n;if(this.formatType==="text"?n=(await e.transporter.request(r)).data:this.formatType==="json"&&this.subjectTokenFieldName&&(n=(await e.transporter.request(r)).data[this.subjectTokenFieldName]),!n)throw new Error("Unable to parse the subject_token from the credential_source URL");return n}};iN.UrlSubjectTokenSupplier=Gse});var mKe=m(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.CertificateSubjectTokenSupplier=Au.InvalidConfigurationError=Au.CertificateSourceUnavailableError=Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;var sN=Yl(),oN=require("fs"),aN=require("crypto"),cXt=require("https");Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";var tp=class extends Error{constructor(e){super(e),this.name="CertificateSourceUnavailableError"}};Au.CertificateSourceUnavailableError=tp;var Bc=class extends Error{constructor(e){super(e),this.name="InvalidConfigurationError"}};Au.InvalidConfigurationError=Bc;var Hse=class{certificateConfigPath;trustChainPath;cert;key;constructor(e){if(!e.useDefaultCertificateConfig&&!e.certificateConfigLocation)throw new Bc("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(e.useDefaultCertificateConfig&&e.certificateConfigLocation)throw new Bc("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=e.trustChainPath,this.certificateConfigPath=e.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new Bc("Cannot create mTLS Agent with missing certificate or key");return new cXt.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#e();let{certPath:e,keyPath:r}=await this.#t();return{cert:this.cert,key:this.key}=await this.#r(e,r),await this.#n(this.cert)}async#e(){let e=this.certificateConfigPath;if(e){if(await(0,sN.isValidFile)(e))return e;throw new tp(`Provided certificate config path is invalid: ${e}`)}let r=process.env[Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(r){if(await(0,sN.isValidFile)(r))return r;throw new tp(`Path from environment variable "${Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${r}`)}let n=(0,sN.getWellKnownCertificateConfigFileLocation)();if(await(0,sN.isValidFile)(n))return n;throw new tp(`Could not find certificate configuration file. Searched override path, the "${Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${n}).`)}async#t(){let e=this.certificateConfigPath,r;try{r=await oN.promises.readFile(e,"utf8")}catch{throw new tp(`Failed to read certificate config file at: ${e}`)}try{let n=JSON.parse(r),i=n?.cert_configs?.workload?.cert_path,s=n?.cert_configs?.workload?.key_path;if(!i||!s)throw new Bc(`Certificate config file (${e}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:i,keyPath:s}}catch(n){throw n instanceof Bc?n:new Bc(`Failed to parse certificate config from ${e}: ${n.message}`)}}async#r(e,r){let n,i;try{n=await oN.promises.readFile(e),new aN.X509Certificate(n)}catch(s){let o=s instanceof Error?s.message:String(s);throw new tp(`Failed to read certificate file at ${e}: ${o}`)}try{i=await oN.promises.readFile(r),(0,aN.createPrivateKey)(i)}catch(s){let o=s instanceof Error?s.message:String(s);throw new tp(`Failed to read private key file at ${r}: ${o}`)}return{cert:n,key:i}}async#n(e){let r=new aN.X509Certificate(e);if(!this.trustChainPath)return JSON.stringify([r.raw.toString("base64")]);try{let s=((await oN.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((u,c)=>{try{return new aN.X509Certificate(u)}catch(l){let d=l instanceof Error?l.message:String(l);throw new Bc(`Failed to parse certificate at index ${c} in trust chain file ${this.trustChainPath}: ${d}`)}}),o=s.findIndex(u=>r.raw.equals(u.raw)),a;if(o===-1)a=[r,...s];else if(o===0)a=s;else throw new Bc(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${o}).`);return JSON.stringify(a.map(u=>u.raw.toString("base64")))}catch(n){if(n instanceof Bc)throw n;let i=n instanceof Error?n.message:String(n);throw new tp(`Failed to process certificate chain from ${this.trustChainPath}: ${i}`)}}};Au.CertificateSubjectTokenSupplier=Hse});var Jse=m(uN=>{"use strict";Object.defineProperty(uN,"__esModule",{value:!0});uN.IdentityPoolClient=void 0;var lXt=Em(),zse=Yl(),dXt=fKe(),pXt=hKe(),yKe=mKe(),fXt=rN(),gKe=Ys(),Wse=class t extends lXt.BaseExternalAccountClient{subjectTokenSupplier;constructor(e){super(e);let r=(0,zse.originalOrCamelOptions)(e),n=r.get("credential_source"),i=r.get("subject_token_supplier");if(!n&&!i)throw new Error("A credential source or subject token supplier must be specified.");if(n&&i)throw new Error("Only one of credential source or subject token supplier can be specified.");if(i)this.subjectTokenSupplier=i,this.credentialSourceType="programmatic";else{let s=(0,zse.originalOrCamelOptions)(n),o=(0,zse.originalOrCamelOptions)(s.get("format")),a=o.get("type")||"text",u=o.get("subject_token_field_name");if(a!=="json"&&a!=="text")throw new Error(`Invalid credential_source format "${a}"`);if(a==="json"&&!u)throw new Error("Missing subject_token_field_name for JSON credential_source format");let c=s.get("file"),l=s.get("url"),d=s.get("certificate"),p=s.get("headers");if(c&&l||l&&d||c&&d)throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(c)this.credentialSourceType="file",this.subjectTokenSupplier=new dXt.FileSubjectTokenSupplier({filePath:c,formatType:a,subjectTokenFieldName:u});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new pXt.UrlSubjectTokenSupplier({url:l,formatType:a,subjectTokenFieldName:u,headers:p,additionalGaxiosOptions:t.RETRY_CONFIG});else if(d){this.credentialSourceType="certificate";let f=new yKe.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:d.use_default_certificate_config,certificateConfigLocation:d.certificate_config_location,trustChainPath:d.trust_chain_path});this.subjectTokenSupplier=f}else throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let e=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof yKe.CertificateSubjectTokenSupplier){let r=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new fXt.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new gKe.Gaxios({agent:r})}),this.transporter=new gKe.Gaxios({...this.transporter.defaults||{},agent:r})}return e}};uN.IdentityPoolClient=Wse});var Qse=m(lN=>{"use strict";Object.defineProperty(lN,"__esModule",{value:!0});lN.AwsRequestSigner=void 0;var cN=Ys(),bKe=fA(),EKe="AWS4-HMAC-SHA256",hXt="aws4_request",Yse=class{getCredentials;region;crypto;constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,bKe.createCrypto)()}async getRequestOptions(e){if(!e.url)throw new RangeError('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",s=e.body||r,o=e.headers,a=await this.getCredentials(),u=new URL(n);if(typeof s!="string"&&s!==void 0)throw new TypeError(`'requestPayload' is expected to be a string if provided. Got: ${s}`);let c=await yXt({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.slice(1),method:i,region:this.region,securityCredentials:a,requestPayload:s,additionalAmzHeaders:o}),l=cN.Gaxios.mergeHeaders(c.amzDate?{"x-amz-date":c.amzDate}:{},{authorization:c.authorizationHeader,host:u.host},o||{});a.token&&cN.Gaxios.mergeHeaders(l,{"x-amz-security-token":a.token});let d={url:n,method:i,headers:l};return s!==void 0&&(d.body=s),d}};lN.AwsRequestSigner=Yse;async function wA(t,e,r){return await t.signWithHmacSha256(e,r)}async function mXt(t,e,r,n,i){let s=await wA(t,`AWS4${e}`,r),o=await wA(t,s,n),a=await wA(t,o,i);return await wA(t,a,"aws4_request")}async function yXt(t){let e=cN.Gaxios.mergeHeaders(t.additionalAmzHeaders),r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,s=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),o=i.toISOString().replace(/[-]/g,"").replace(/T.*/,"");t.securityCredentials.token&&e.set("x-amz-security-token",t.securityCredentials.token);let a=cN.Gaxios.mergeHeaders({host:t.host},e.has("date")?{}:{"x-amz-date":s},e),u="",c=[...a.keys()].sort();c.forEach(w=>{u+=`${w}:${a.get(w)}
`});let l=c.join(";"),d=await t.crypto.sha256DigestHex(r),p=`${t.method.toUpperCase()}
${t.canonicalUri}
${t.canonicalQuerystring}
${u}
${l}
${d}`,f=`${o}/${t.region}/${n}/${hXt}`,h=`${EKe}
${s}
${f}
`+await t.crypto.sha256DigestHex(p),g=await mXt(t.crypto,t.securityCredentials.secretAccessKey,o,t.region,n),_=await wA(t.crypto,g,h),S=`${EKe} Credential=${t.securityCredentials.accessKeyId}/${f}, SignedHeaders=${l}, Signature=${(0,bKe.fromArrayBufferToHex)(_)}`;return{amzDate:e.has("date")?void 0:s,authorizationHeader:S,canonicalQuerystring:t.canonicalQuerystring}}});var _Ke=m(pN=>{"use strict";Object.defineProperty(pN,"__esModule",{value:!0});pN.DefaultAwsSecurityCredentialsSupplier=void 0;var dN=_u(),Xse=class{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(e){this.regionUrl=e.regionUrl,this.securityCredentialsUrl=e.securityCredentialsUrl,this.imdsV2SessionTokenUrl=e.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getAwsRegion(e){if(this.#n)return this.#n;let r=new Headers;if(!this.#n&&this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter)),!this.regionUrl)throw new RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let n={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:r};dN.AuthClient.setMethodName(n,"getAwsRegion");let i=await e.transporter.request(n);return i.data.substr(0,i.data.length-1)}async getAwsSecurityCredentials(e){if(this.#i)return this.#i;let r=new Headers;this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter));let n=await this.#t(r,e.transporter),i=await this.#r(n,r,e.transporter);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,token:i.Token}}async#e(e){let r={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return dN.AuthClient.setMethodName(r,"#getImdsV2SessionToken"),(await e.request(r)).data}async#t(e,r){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let n={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:e};return dN.AuthClient.setMethodName(n,"#getAwsRoleName"),(await r.request(n)).data}async#r(e,r,n){let i={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${e}`,headers:r};return dN.AuthClient.setMethodName(i,"#retrieveAwsSecurityCredentials"),(await n.request(i)).data}get#n(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get#i(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}};pN.DefaultAwsSecurityCredentialsSupplier=Xse});var eoe=m(fN=>{"use strict";Object.defineProperty(fN,"__esModule",{value:!0});fN.AwsClient=void 0;var gXt=Qse(),EXt=Em(),bXt=_Ke(),vKe=Yl(),_Xt=Ys(),Zse=class t extends EXt.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static#e="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(e){super(e);let r=(0,vKe.originalOrCamelOptions)(e),n=r.get("credential_source"),i=r.get("aws_security_credentials_supplier");if(!n&&!i)throw new Error("A credential source or AWS security credentials supplier must be specified.");if(n&&i)throw new Error("Only one of credential source or AWS security credentials supplier can be specified.");if(i)this.awsSecurityCredentialsSupplier=i,this.regionalCredVerificationUrl=t.#e,this.credentialSourceType="programmatic";else{let s=(0,vKe.originalOrCamelOptions)(n);this.environmentId=s.get("environment_id");let o=s.get("region_url"),a=s.get("url"),u=s.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new bXt.DefaultAwsSecurityCredentialsSupplier({regionUrl:o,securityCredentialsUrl:a,imdsV2SessionTokenUrl:u}),this.regionalCredVerificationUrl=s.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let e=this.environmentId?.match(/^(aws)(\d+)$/);if(!e||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(e[2],10)!==1)throw new Error(`aws version "${e[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new gXt.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let e=await this.awsRequestSigner.getRequestOptions({...t.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[];return _Xt.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},e.headers).forEach((i,s)=>r.push({key:s,value:i})),encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))}};fN.AwsClient=Zse});var soe=m(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.InvalidSubjectTokenError=Li.InvalidMessageFieldError=Li.InvalidCodeFieldError=Li.InvalidTokenTypeFieldError=Li.InvalidExpirationTimeFieldError=Li.InvalidSuccessFieldError=Li.InvalidVersionFieldError=Li.ExecutableResponseError=Li.ExecutableResponse=void 0;var hN="urn:ietf:params:oauth:token-type:saml2",toe="urn:ietf:params:oauth:token-type:id_token",roe="urn:ietf:params:oauth:token-type:jwt",noe=class{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(e){if(!e.version)throw new mN("Executable response must contain a 'version' field.");if(e.success===void 0)throw new yN("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==hN&&this.tokenType!==toe&&this.tokenType!==roe)throw new gN(`Executable response must contain a 'token_type' field when successful and it must be one of ${toe}, ${roe}, or ${hN}.`);if(this.tokenType===hN){if(!e.saml_response)throw new AA(`Executable response must contain a 'saml_response' field when token_type=${hN}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new AA(`Executable response must contain a 'id_token' field when token_type=${toe} or ${roe}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new EN("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new bN("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}};Li.ExecutableResponse=noe;var rp=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};Li.ExecutableResponseError=rp;var mN=class extends rp{};Li.InvalidVersionFieldError=mN;var yN=class extends rp{};Li.InvalidSuccessFieldError=yN;var ioe=class extends rp{};Li.InvalidExpirationTimeFieldError=ioe;var gN=class extends rp{};Li.InvalidTokenTypeFieldError=gN;var EN=class extends rp{};Li.InvalidCodeFieldError=EN;var bN=class extends rp{};Li.InvalidMessageFieldError=bN;var AA=class extends rp{};Li.InvalidSubjectTokenError=AA});var uoe=m(G_=>{"use strict";Object.defineProperty(G_,"__esModule",{value:!0});G_.PluggableAuthHandler=G_.ExecutableError=void 0;var Fg=soe(),vXt=require("child_process"),ooe=require("fs"),_N=class extends Error{code;constructor(e,r){super(`The executable failed with exit code: ${r} and error message: ${e}.`),this.code=r,Object.setPrototypeOf(this,new.target.prototype)}};G_.ExecutableError=_N;var aoe=class t{commandComponents;timeoutMillis;outputFile;constructor(e){if(!e.command)throw new Error("No command provided.");if(this.commandComponents=t.parseCommand(e.command),this.timeoutMillis=e.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=e.outputFile}retrieveResponseFromExecutable(e){return new Promise((r,n)=>{let i=vXt.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(e)}}),s="";i.stdout.on("data",a=>{s+=a}),i.stderr.on("data",a=>{s+=a});let o=setTimeout(()=>(i.removeAllListeners(),i.kill(),n(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);i.on("close",a=>{if(clearTimeout(o),a===0)try{let u=JSON.parse(s),c=new Fg.ExecutableResponse(u);return r(c)}catch(u){return u instanceof Fg.ExecutableResponseError?n(u):n(new Fg.ExecutableResponseError(`The executable returned an invalid response: ${s}`))}else return n(new _N(s,a.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let e;try{e=await ooe.promises.realpath(this.outputFile)}catch{return}if(!(await ooe.promises.lstat(e)).isFile())return;let r=await ooe.promises.readFile(e,{encoding:"utf8"});if(r!=="")try{let n=JSON.parse(r);return new Fg.ExecutableResponse(n).isValid()?new Fg.ExecutableResponse(n):void 0}catch(n){throw n instanceof Fg.ExecutableResponseError?n:new Fg.ExecutableResponseError(`The output file contained an invalid response: ${r}`)}}static parseCommand(e){let r=e.match(/(?:[^\s"]+|"[^"]*")+/g);if(!r)throw new Error(`Provided command: "${e}" could not be parsed.`);for(let n=0;n<r.length;n++)r[n][0]==='"'&&r[n].slice(-1)==='"'&&(r[n]=r[n].slice(1,-1));return r}};G_.PluggableAuthHandler=aoe});var loe=m(H_=>{"use strict";Object.defineProperty(H_,"__esModule",{value:!0});H_.PluggableAuthClient=H_.ExecutableError=void 0;var SXt=Em(),wXt=soe(),SKe=uoe(),AXt=uoe();Object.defineProperty(H_,"ExecutableError",{enumerable:!0,get:function(){return AXt.ExecutableError}});var CXt=30*1e3,wKe=5*1e3,AKe=120*1e3,TXt="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",CKe=1,coe=class extends SXt.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(e){if(super(e),!e.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=e.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(e.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=CXt;else if(this.timeoutMillis=e.credential_source.executable.timeout_millis,this.timeoutMillis<wKe||this.timeoutMillis>AKe)throw new Error(`Timeout must be between ${wKe} and ${AKe} milliseconds.`);this.outputFile=e.credential_source.executable.output_file,this.handler=new SKe.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(process.env[TXt]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let e;if(this.outputFile&&(e=await this.handler.retrieveCachedResponse()),!e){let r=new Map;r.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),r.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),r.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&r.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let n=this.getServiceAccountEmail();n&&r.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",n),e=await this.handler.retrieveResponseFromExecutable(r)}if(e.version>CKe)throw new Error(`Version of executable is not currently supported, maximum supported version is ${CKe}.`);if(!e.success)throw new SKe.ExecutableError(e.errorMessage,e.errorCode);if(this.outputFile&&!e.expirationTime)throw new wXt.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(e.isExpired())throw new Error("Executable response is expired.");return e.subjectToken}};H_.PluggableAuthClient=coe});var poe=m(vN=>{"use strict";Object.defineProperty(vN,"__esModule",{value:!0});vN.ExternalAccountClient=void 0;var OXt=Em(),xXt=Jse(),IXt=eoe(),RXt=loe(),doe=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e){return e&&e.type===OXt.EXTERNAL_ACCOUNT_TYPE?e.credential_source?.environment_id?new IXt.AwsClient(e):e.credential_source?.executable?new RXt.PluggableAuthClient(e):new xXt.IdentityPoolClient(e):null}};vN.ExternalAccountClient=doe});var moe=m(z_=>{"use strict";Object.defineProperty(z_,"__esModule",{value:!0});z_.ExternalAccountAuthorizedUserClient=z_.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;var OKe=_u(),TKe=Bse(),xKe=Ys(),DXt=require("stream"),kXt=Em();z_.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";var MXt="https://sts.{universeDomain}/v1/oauthtoken",foe=class t extends TKe.OAuthClientAuthHandler{#e;constructor(e){super(e),this.#e=e.tokenRefreshEndpoint}async refreshToken(e,r){let n={...t.RETRY_CONFIG,url:this.#e,method:"POST",headers:r,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})};OKe.AuthClient.setMethodName(n,"refreshToken"),this.applyClientAuthenticationOptions(n);try{let i=await this.transporter.request(n),s=i.data;return s.res=i,s}catch(i){throw i instanceof xKe.GaxiosError&&i.response?(0,TKe.getErrorFromOAuthErrorResponse)(i.response.data,i):i}}},hoe=class extends OKe.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(e){super(e),e.universe_domain&&(this.universeDomain=e.universe_domain),this.refreshToken=e.refresh_token;let r={confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret};this.externalAccountAuthorizedUserHandler=new foe({tokenRefreshEndpoint:e.token_url??MXt.replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:r}),this.cachedAccessToken=null,this.quotaProjectId=e.quota_project_id,typeof e?.eagerRefreshThresholdMillis!="number"?this.eagerRefreshThresholdMillis=kXt.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!e?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=xKe.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof DXt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){let e=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+e.expires_in*1e3,res:e.res},e.refresh_token!==void 0&&(this.refreshToken=e.refresh_token),this.cachedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};z_.ExternalAccountAuthorizedUserClient=hoe});var kKe=m(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.GoogleAuth=ed.GoogleAuthExceptionMessages=void 0;var PXt=require("child_process"),CA=require("fs"),NXt=Ys(),TA=pA(),FXt=require("os"),yoe=require("path"),BXt=fA(),qXt=lse(),LXt=pse(),jXt=fse(),W_=Dse(),IKe=Mse(),J_=Nse(),$Xt=poe(),OA=Em(),goe=_u(),RKe=moe(),DKe=Yl();ed.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};var Eoe=class{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#e=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(e={}){if(this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.clientOptions=e.clientOptions||{},this.jsonContent=e.credentials||null,this.apiKey=e.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw new RangeError(ed.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);e.universeDomain&&(this.clientOptions.universeDomain=e.universeDomain)}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===ed.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||=await this.getProductionProjectId(),e||=await this.getFileProjectId(),e||=await this.getDefaultServiceProjectId(),e||=await this.getGCEProjectId(),e||=await this.getExternalAccountClientProjectId(),e)return this._cachedProjectId=e,e;throw new Error(ed.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let e;try{e=await TA.universe("universe-domain"),e||=goe.DEFAULT_UNIVERSE}catch(r){if(r&&r?.response?.status===404)e=goe.DEFAULT_UNIVERSE;else throw r}return e}async getUniverseDomain(){let e=(0,DKe.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{e??=(await this.getClient()).universeDomain}catch{e??=goe.DEFAULT_UNIVERSE}return e}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}async getApplicationDefaultAsync(e={}){if(this.cachedCredential)return await this.#t(this.cachedCredential,null);let r;if(r=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof W_.JWT?r.scopes=this.scopes:r instanceof OA.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(r=await this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof W_.JWT?r.scopes=this.scopes:r instanceof OA.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(await this._checkIsGCE())return e.scopes=this.getAnyScopes(),await this.#t(new qXt.Compute(e));throw new Error(ed.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async#t(e,r=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let n=await this.getProjectIdOptional();return r&&(e.quotaProjectId=r),this.cachedCredential=e,{credential:e,projectId:n}}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=TA.getGCPResidency()||await TA.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=yoe.join(i,".config"))}return r&&(r=yoe.join(r,"gcloud","application_default_credentials.json"),CA.existsSync(r)||(r=null)),r?await this._getApplicationCredentialsFromFilePath(r,e):null}async _getApplicationCredentialsFromFilePath(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=CA.realpathSync(e),!CA.lstatSync(e).isFile())throw new Error}catch(i){throw i instanceof Error&&(i.message=`The file at ${e} does not exist, or it is not a file. ${i.message}`),i}let n=CA.createReadStream(e);return this.fromStream(n,r)}fromImpersonatedJSON(e){if(!e)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==J_.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${J_.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");let r=this.fromJSON(e.source_credentials);if(e.service_account_impersonation_url?.length>256)throw new RangeError(`Target principal is too long: ${e.service_account_impersonation_url}`);let n=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(e.service_account_impersonation_url)?.groups?.target;if(!n)throw new RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);let i=this.getAnyScopes()??[];return new J_.Impersonated({...e,sourceClient:r,targetPrincipal:n,targetScopes:Array.isArray(i)?i:[i]})}fromJSON(e,r={}){let n,i=(0,DKe.originalOrCamelOptions)(r).get("universe_domain");return e.type===IKe.USER_REFRESH_ACCOUNT_TYPE?(n=new IKe.UserRefreshClient(r),n.fromJSON(e)):e.type===J_.IMPERSONATED_ACCOUNT_TYPE?n=this.fromImpersonatedJSON(e):e.type===OA.EXTERNAL_ACCOUNT_TYPE?(n=$Xt.ExternalAccountClient.fromJSON({...e,...r}),n.scopes=this.getAnyScopes()):e.type===RKe.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?n=new RKe.ExternalAccountAuthorizedUserClient({...e,...r}):(r.scopes=this.scopes,n=new W_.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),i&&(n.universeDomain=i),n}_cacheClientFromJSON(e,r){let n=this.fromJSON(e,r);return this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(s=>n(null,s),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let s=[];e.setEncoding("utf8").on("error",i).on("data",o=>s.push(o)).on("end",()=>{try{try{let o=JSON.parse(s.join("")),a=this._cacheClientFromJSON(o,r);return n(a)}catch(o){if(!this.keyFilename)throw o;let a=new W_.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),n(a)}}catch(o){return i(o)}})})}fromAPIKey(e,r={}){return new W_.JWT({...r,apiKey:e})}_isWindows(){let e=FXt.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(e=>{(0,PXt.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch{}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=await this.getClient();if(r&&r.projectId)return r.projectId}let e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==OA.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await TA.project("project-id")}catch{return null}}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}async getCredentialsAsync(){let e=await this.getClient();if(e instanceof J_.Impersonated)return{client_email:e.getTargetPrincipal()};if(e instanceof OA.BaseExternalAccountClient){let r=e.getServiceAccountEmail();if(r)return{client_email:r,universe_domain:e.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[r,n]=await Promise.all([TA.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:r,universe_domain:n}}throw new Error(ed.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#e=this.#e||this.#r();try{return await this.#e}finally{this.#e=null}}async#r(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let e=yoe.resolve(this.keyFilename),r=CA.createReadStream(e);return await this.fromStreamAsync(r,this.clientOptions)}else if(this.apiKey){let e=await this.fromAPIKey(this.apiKey,this.clientOptions);e.scopes=this.scopes;let{credential:r}=await this.#t(e);return r}else{let{credential:e}=await this.getApplicationDefaultAsync(this.clientOptions);return e}}async getIdTokenClient(e){let r=await this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new LXt.IdTokenClient({targetAudience:e,idTokenProvider:r})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e={}){let r=e.url,i=await(await this.getClient()).getRequestHeaders(r);return e.headers=NXt.Gaxios.mergeHeaders(e.headers,i),e}async fetch(...e){return(await this.getClient()).fetch(...e)}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,jXt.getEnv)()}async sign(e,r){let n=await this.getClient(),i=await this.getUniverseDomain();if(r=r||`https://iamcredentials.${i}/v1/projects/-/serviceAccounts/`,n instanceof J_.Impersonated)return(await n.sign(e)).signedBlob;let s=(0,BXt.createCrypto)();if(n instanceof W_.JWT&&n.key)return await s.sign(n.key,e);let o=await this.getCredentials();if(!o.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(s,o.client_email,e,r)}async signBlob(e,r,n,i){let s=new URL(i+`${r}:signBlob`);return(await this.request({method:"POST",url:s.href,data:{payload:e.encodeBase64StringUtf8(n)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}};ed.GoogleAuth=Eoe});var MKe=m(SN=>{"use strict";Object.defineProperty(SN,"__esModule",{value:!0});SN.IAMAuth=void 0;var boe=class{selector;token;constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};SN.IAMAuth=boe});var PKe=m(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.DownscopedClient=np.EXPIRATION_TIME_OFFSET=np.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var KXt=Ys(),UXt=require("stream"),_oe=_u(),VXt=rN(),GXt="urn:ietf:params:oauth:grant-type:token-exchange",HXt="urn:ietf:params:oauth:token-type:access_token",zXt="urn:ietf:params:oauth:token-type:access_token";np.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;np.EXPIRATION_TIME_OFFSET=300*1e3;var voe=class extends _oe.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(e,r={accessBoundary:{accessBoundaryRules:[]}}){if(super(e instanceof _oe.AuthClient?{}:e),e instanceof _oe.AuthClient?(this.authClient=e,this.credentialAccessBoundary=r):(this.authClient=e.authClient,this.credentialAccessBoundary=e.credentialAccessBoundary),this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>np.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${np.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let n of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(n.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new VXt.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=KXt.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof UXt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){let e=(await this.authClient.getAccessToken()).token,r={grantType:GXt,requestedTokenType:HXt,subjectToken:e,subjectTokenType:zXt},n=await this.stsCredential.exchangeToken(r,void 0,this.credentialAccessBoundary),i=this.authClient.credentials?.expiry_date||null,s=n.expires_in?new Date().getTime()+n.expires_in*1e3:i;return this.cachedDownscopedAccessToken={access_token:n.access_token,expiry_date:s,res:n.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};np.DownscopedClient=voe});var NKe=m(wN=>{"use strict";Object.defineProperty(wN,"__esModule",{value:!0});wN.PassThroughClient=void 0;var WXt=_u(),Soe=class extends WXt.AuthClient{async request(e){return this.transporter.request(e)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}};wN.PassThroughClient=Soe});var jKe=m(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.GoogleAuth=st.auth=st.PassThroughClient=st.ExternalAccountAuthorizedUserClient=st.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=st.ExecutableError=st.PluggableAuthClient=st.DownscopedClient=st.BaseExternalAccountClient=st.ExternalAccountClient=st.IdentityPoolClient=st.AwsRequestSigner=st.AwsClient=st.UserRefreshClient=st.LoginTicket=st.ClientAuthentication=st.OAuth2Client=st.CodeChallengeMethod=st.Impersonated=st.JWT=st.JWTAccess=st.IdTokenClient=st.IAMAuth=st.GCPEnv=st.Compute=st.DEFAULT_UNIVERSE=st.AuthClient=st.gaxios=st.gcpMetadata=void 0;var FKe=kKe();Object.defineProperty(st,"GoogleAuth",{enumerable:!0,get:function(){return FKe.GoogleAuth}});st.gcpMetadata=pA();st.gaxios=Ys();var BKe=_u();Object.defineProperty(st,"AuthClient",{enumerable:!0,get:function(){return BKe.AuthClient}});Object.defineProperty(st,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return BKe.DEFAULT_UNIVERSE}});var JXt=lse();Object.defineProperty(st,"Compute",{enumerable:!0,get:function(){return JXt.Compute}});var YXt=fse();Object.defineProperty(st,"GCPEnv",{enumerable:!0,get:function(){return YXt.GCPEnv}});var QXt=MKe();Object.defineProperty(st,"IAMAuth",{enumerable:!0,get:function(){return QXt.IAMAuth}});var XXt=pse();Object.defineProperty(st,"IdTokenClient",{enumerable:!0,get:function(){return XXt.IdTokenClient}});var ZXt=Ise();Object.defineProperty(st,"JWTAccess",{enumerable:!0,get:function(){return ZXt.JWTAccess}});var eZt=Dse();Object.defineProperty(st,"JWT",{enumerable:!0,get:function(){return eZt.JWT}});var tZt=Nse();Object.defineProperty(st,"Impersonated",{enumerable:!0,get:function(){return tZt.Impersonated}});var woe=Ng();Object.defineProperty(st,"CodeChallengeMethod",{enumerable:!0,get:function(){return woe.CodeChallengeMethod}});Object.defineProperty(st,"OAuth2Client",{enumerable:!0,get:function(){return woe.OAuth2Client}});Object.defineProperty(st,"ClientAuthentication",{enumerable:!0,get:function(){return woe.ClientAuthentication}});var rZt=ose();Object.defineProperty(st,"LoginTicket",{enumerable:!0,get:function(){return rZt.LoginTicket}});var nZt=Mse();Object.defineProperty(st,"UserRefreshClient",{enumerable:!0,get:function(){return nZt.UserRefreshClient}});var iZt=eoe();Object.defineProperty(st,"AwsClient",{enumerable:!0,get:function(){return iZt.AwsClient}});var sZt=Qse();Object.defineProperty(st,"AwsRequestSigner",{enumerable:!0,get:function(){return sZt.AwsRequestSigner}});var oZt=Jse();Object.defineProperty(st,"IdentityPoolClient",{enumerable:!0,get:function(){return oZt.IdentityPoolClient}});var aZt=poe();Object.defineProperty(st,"ExternalAccountClient",{enumerable:!0,get:function(){return aZt.ExternalAccountClient}});var uZt=Em();Object.defineProperty(st,"BaseExternalAccountClient",{enumerable:!0,get:function(){return uZt.BaseExternalAccountClient}});var cZt=PKe();Object.defineProperty(st,"DownscopedClient",{enumerable:!0,get:function(){return cZt.DownscopedClient}});var qKe=loe();Object.defineProperty(st,"PluggableAuthClient",{enumerable:!0,get:function(){return qKe.PluggableAuthClient}});Object.defineProperty(st,"ExecutableError",{enumerable:!0,get:function(){return qKe.ExecutableError}});var LKe=moe();Object.defineProperty(st,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return LKe.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}});Object.defineProperty(st,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return LKe.ExternalAccountAuthorizedUserClient}});var lZt=NKe();Object.defineProperty(st,"PassThroughClient",{enumerable:!0,get:function(){return lZt.PassThroughClient}});var dZt=new FKe.GoogleAuth;st.auth=dZt});var $f=m((bMr,UKe)=>{"use strict";var $Ke=["nodebuffer","arraybuffer","fragments"],KKe=typeof Blob<"u";KKe&&$Ke.push("blob");UKe.exports={BINARY_TYPES:$Ke,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:KKe,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var xA=m((_Mr,AN)=>{"use strict";var{EMPTY_BUFFER:pZt}=$f(),Aoe=Buffer[Symbol.species];function fZt(t,e){if(t.length===0)return pZt;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return n<e?new Aoe(r.buffer,r.byteOffset,n):r}function VKe(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[s]^e[s&3]}function GKe(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function hZt(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function Coe(t){if(Coe.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new Aoe(t):ArrayBuffer.isView(t)?e=new Aoe(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),Coe.readOnly=!1),e}AN.exports={concat:fZt,mask:VKe,toArrayBuffer:hZt,toBuffer:Coe,unmask:GKe};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");AN.exports.mask=function(e,r,n,i,s){s<48?VKe(e,r,n,i,s):t.mask(e,r,n,i,s)},AN.exports.unmask=function(e,r){e.length<32?GKe(e,r):t.unmask(e,r)}}catch{}});var WKe=m((vMr,zKe)=>{"use strict";var HKe=Symbol("kDone"),Toe=Symbol("kRun"),Ooe=class{constructor(e){this[HKe]=()=>{this.pending--,this[Toe]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Toe]()}[Toe](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[HKe])}}};zKe.exports=Ooe});var RA=m((SMr,XKe)=>{"use strict";var IA=require("zlib"),JKe=xA(),mZt=WKe(),{kStatusCode:YKe}=$f(),yZt=Buffer[Symbol.species],gZt=Buffer.from([0,0,255,255]),TN=Symbol("permessage-deflate"),Kf=Symbol("total-length"),Y_=Symbol("callback"),bm=Symbol("buffers"),Q_=Symbol("error"),CN,xoe=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!CN){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;CN=new mZt(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Y_];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){CN.add(i=>{this._decompress(e,r,(s,o)=>{i(),n(s,o)})})}compress(e,r,n){CN.add(i=>{this._compress(e,r,(s,o)=>{i(),n(s,o)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?IA.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=IA.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[TN]=this,this._inflate[Kf]=0,this._inflate[bm]=[],this._inflate.on("error",bZt),this._inflate.on("data",QKe)}this._inflate[Y_]=n,this._inflate.write(e),r&&this._inflate.write(gZt),this._inflate.flush(()=>{let s=this._inflate[Q_];if(s){this._inflate.close(),this._inflate=null,n(s);return}let o=JKe.concat(this._inflate[bm],this._inflate[Kf]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Kf]=0,this._inflate[bm]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?IA.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=IA.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Kf]=0,this._deflate[bm]=[],this._deflate.on("data",EZt)}this._deflate[Y_]=n,this._deflate.write(e),this._deflate.flush(IA.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=JKe.concat(this._deflate[bm],this._deflate[Kf]);r&&(s=new yZt(s.buffer,s.byteOffset,s.length-4)),this._deflate[Y_]=null,this._deflate[Kf]=0,this._deflate[bm]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};XKe.exports=xoe;function EZt(t){this[bm].push(t),this[Kf]+=t.length}function QKe(t){if(this[Kf]+=t.length,this[TN]._maxPayload<1||this[Kf]<=this[TN]._maxPayload){this[bm].push(t);return}this[Q_]=new RangeError("Max payload size exceeded"),this[Q_].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Q_][YKe]=1009,this.removeListener("data",QKe),this.reset()}function bZt(t){if(this[TN]._inflate=null,this[Q_]){this[Y_](this[Q_]);return}t[YKe]=1007,this[Y_](t)}});var X_=m((wMr,ON)=>{"use strict";var{isUtf8:ZKe}=require("buffer"),{hasBlob:_Zt}=$f(),vZt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function SZt(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Ioe(t){let e=t.length,r=0;for(;r<e;)if((t[r]&128)===0)r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function wZt(t){return _Zt&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}ON.exports={isBlob:wZt,isValidStatusCode:SZt,isValidUTF8:Ioe,tokenChars:vZt};if(ZKe)ON.exports.isValidUTF8=function(t){return t.length<24?Ioe(t):ZKe(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");ON.exports.isValidUTF8=function(e){return e.length<32?Ioe(e):t(e)}}catch{}});var Poe=m((AMr,oUe)=>{"use strict";var{Writable:AZt}=require("stream"),eUe=RA(),{BINARY_TYPES:CZt,EMPTY_BUFFER:tUe,kStatusCode:TZt,kWebSocket:OZt}=$f(),{concat:Roe,toArrayBuffer:xZt,unmask:IZt}=xA(),{isValidStatusCode:RZt,isValidUTF8:rUe}=X_(),xN=Buffer[Symbol.species],qc=0,nUe=1,iUe=2,sUe=3,Doe=4,koe=5,IN=6,Moe=class extends AZt{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||CZt[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[OZt]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=qc}_write(e,r,n){if(this._opcode===8&&this._state==qc)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new xN(n.buffer,n.byteOffset+e,n.length-e),new xN(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new xN(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case qc:this.getInfo(e);break;case nUe:this.getPayloadLength16(e);break;case iUe:this.getPayloadLength64(e);break;case sUe:this.getMask();break;case Doe:this.getData(e);break;case koe:case IN:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(r[0]&64)===64;if(n&&!this._extensions[eUe.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=nUe:this._payloadLength===127?this._state=iUe:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=sUe:this._state=Doe}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Doe}getData(e){let r=tUe;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&IZt(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=koe,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[eUe.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(s)}this.dataMessage(r),this._state===qc&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=qc;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Roe(n,r):this._binaryType==="arraybuffer"?i=xZt(Roe(n,r)):this._binaryType==="blob"?i=new Blob(n):i=n,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=qc):(this._state=IN,setImmediate(()=>{this.emit("message",i,!0),this._state=qc,this.startLoop(e)}))}else{let i=Roe(n,r);if(!this._skipUTF8Validation&&!rUe(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===koe||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=qc):(this._state=IN,setImmediate(()=>{this.emit("message",i,!1),this._state=qc,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,tUe),this.end();else{let n=e.readUInt16BE(0);if(!RZt(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(s);return}let i=new xN(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!rUe(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(s);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=qc;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=qc):(this._state=IN,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=qc,this.startLoop(r)}))}createError(e,r,n,i,s){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=s,o[TZt]=i,o}};oUe.exports=Moe});var Boe=m((TMr,cUe)=>{"use strict";var{Duplex:CMr}=require("stream"),{randomFillSync:DZt}=require("crypto"),aUe=RA(),{EMPTY_BUFFER:kZt,kWebSocket:MZt,NOOP:PZt}=$f(),{isBlob:Z_,isValidStatusCode:NZt}=X_(),{mask:uUe,toBuffer:Bg}=xA(),Lc=Symbol("kByteLength"),FZt=Buffer.alloc(4),RN=8*1024,qg,e4=RN,td=0,BZt=1,qZt=2,Noe=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=td,this.onerror=PZt,this[MZt]=void 0}static frame(e,r){let n,i=!1,s=2,o=!1;r.mask&&(n=r.maskBuffer||FZt,r.generateMask?r.generateMask(n):(e4===RN&&(qg===void 0&&(qg=Buffer.alloc(RN)),DZt(qg,0,RN),e4=0),n[0]=qg[e4++],n[1]=qg[e4++],n[2]=qg[e4++],n[3]=qg[e4++]),o=(n[0]|n[1]|n[2]|n[3])===0,s=6);let a;typeof e=="string"?(!r.mask||o)&&r[Lc]!==void 0?a=r[Lc]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!o);let u=a;a>=65536?(s+=8,u=127):a>125&&(s+=2,u=126);let c=Buffer.allocUnsafe(i?a+s:s);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[s-4]=n[0],c[s-3]=n[1],c[s-2]=n[2],c[s-1]=n[3],o?[c,e]:i?(uUe(e,n,c,s,a),[c]):(uUe(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,i){let s;if(e===void 0)s=kZt;else{if(typeof e!="number"||!NZt(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[Lc]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==td?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(t.frame(s,o),i)}ping(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):Z_(e)?(i=e.size,s=!1):(e=Bg(e),i=e.length,s=Bg.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Lc]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};Z_(e)?this._state!==td?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==td?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):Z_(e)?(i=e.size,s=!1):(e=Bg(e),i=e.length,s=Bg.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Lc]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};Z_(e)?this._state!==td?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==td?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let i=this._extensions[aUe.extensionName],s=r.binary?2:1,o=r.compress,a,u;typeof e=="string"?(a=Buffer.byteLength(e),u=!1):Z_(e)?(a=e.size,u=!1):(e=Bg(e),a=e.length,u=Bg.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=i._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0);let c={[Lc]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:o};Z_(e)?this._state!==td?this.enqueue([this.getBlobData,e,this._compress,c,n]):this.getBlobData(e,this._compress,c,n):this._state!==td?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}getBlobData(e,r,n,i){this._bufferedBytes+=n[Lc],this._state=qZt,e.arrayBuffer().then(s=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(Foe,this,a,i);return}this._bufferedBytes-=n[Lc];let o=Bg(s);r?this.dispatch(o,r,n,i):(this._state=td,this.sendFrame(t.frame(o,n),i),this.dequeue())}).catch(s=>{process.nextTick(LZt,this,s,i)})}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let s=this._extensions[aUe.extensionName];this._bufferedBytes+=n[Lc],this._state=BZt,s.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");Foe(this,u,i);return}this._bufferedBytes-=n[Lc],this._state=td,n.readOnly=!1,this.sendFrame(t.frame(a,n),i),this.dequeue()})}dequeue(){for(;this._state===td&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Lc],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Lc],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};cUe.exports=Noe;function Foe(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let i=t._queue[n],s=i[i.length-1];typeof s=="function"&&s(e)}}function LZt(t,e,r){Foe(t,e,r),t.onerror(e)}});var EUe=m((OMr,gUe)=>{"use strict";var{kForOnEventAttribute:DA,kListener:qoe}=$f(),lUe=Symbol("kCode"),dUe=Symbol("kData"),pUe=Symbol("kError"),fUe=Symbol("kMessage"),hUe=Symbol("kReason"),t4=Symbol("kTarget"),mUe=Symbol("kType"),yUe=Symbol("kWasClean"),Uf=class{constructor(e){this[t4]=null,this[mUe]=e}get target(){return this[t4]}get type(){return this[mUe]}};Object.defineProperty(Uf.prototype,"target",{enumerable:!0});Object.defineProperty(Uf.prototype,"type",{enumerable:!0});var Lg=class extends Uf{constructor(e,r={}){super(e),this[lUe]=r.code===void 0?0:r.code,this[hUe]=r.reason===void 0?"":r.reason,this[yUe]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[lUe]}get reason(){return this[hUe]}get wasClean(){return this[yUe]}};Object.defineProperty(Lg.prototype,"code",{enumerable:!0});Object.defineProperty(Lg.prototype,"reason",{enumerable:!0});Object.defineProperty(Lg.prototype,"wasClean",{enumerable:!0});var r4=class extends Uf{constructor(e,r={}){super(e),this[pUe]=r.error===void 0?null:r.error,this[fUe]=r.message===void 0?"":r.message}get error(){return this[pUe]}get message(){return this[fUe]}};Object.defineProperty(r4.prototype,"error",{enumerable:!0});Object.defineProperty(r4.prototype,"message",{enumerable:!0});var kA=class extends Uf{constructor(e,r={}){super(e),this[dUe]=r.data===void 0?null:r.data}get data(){return this[dUe]}};Object.defineProperty(kA.prototype,"data",{enumerable:!0});var jZt={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[DA]&&i[qoe]===e&&!i[DA])return;let n;if(t==="message")n=function(s,o){let a=new kA("message",{data:o?s:s.toString()});a[t4]=this,DN(e,this,a)};else if(t==="close")n=function(s,o){let a=new Lg("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[t4]=this,DN(e,this,a)};else if(t==="error")n=function(s){let o=new r4("error",{error:s,message:s.message});o[t4]=this,DN(e,this,o)};else if(t==="open")n=function(){let s=new Uf("open");s[t4]=this,DN(e,this,s)};else return;n[DA]=!!r[DA],n[qoe]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[qoe]===e&&!r[DA]){this.removeListener(t,r);break}}};gUe.exports={CloseEvent:Lg,ErrorEvent:r4,Event:Uf,EventTarget:jZt,MessageEvent:kA};function DN(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Loe=m((xMr,bUe)=>{"use strict";var{tokenChars:MA}=X_();function ip(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function $Zt(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,s=!1,o,a,u=-1,c=-1,l=-1,d=0;for(;d<t.length;d++)if(c=t.charCodeAt(d),o===void 0)if(l===-1&&MA[c]===1)u===-1&&(u=d);else if(d!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=t.slice(u,l);c===44?(ip(e,f,r),r=Object.create(null)):o=f,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(l===-1&&MA[c]===1)u===-1&&(u=d);else if(c===32||c===9)l===-1&&u!==-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d),ip(r,t.slice(u,l),!0),c===44&&(ip(e,o,r),r=Object.create(null),o=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,d),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(i){if(MA[c]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1?u=d:n||(n=!0),i=!1}else if(s)if(MA[c]===1)u===-1&&(u=d);else if(c===34&&u!==-1)s=!1,l=d;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===34&&t.charCodeAt(d-1)===61)s=!0;else if(l===-1&&MA[c]===1)u===-1&&(u=d);else if(u!==-1&&(c===32||c===9))l===-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=t.slice(u,l);n&&(f=f.replace(/\\/g,""),n=!1),ip(r,a,f),c===44&&(ip(e,o,r),r=Object.create(null),o=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(u===-1||s||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=d);let p=t.slice(u,l);return o===void 0?ip(e,p,r):(a===void 0?ip(r,p,!0):n?ip(r,a,p.replace(/\\/g,"")):ip(r,a,p),ip(e,o,r)),e}function KZt(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}bUe.exports={format:KZt,parse:$Zt}});var NN=m((DMr,DUe)=>{"use strict";var UZt=require("events"),VZt=require("https"),GZt=require("http"),SUe=require("net"),HZt=require("tls"),{randomBytes:zZt,createHash:WZt}=require("crypto"),{Duplex:IMr,Readable:RMr}=require("stream"),{URL:joe}=require("url"),_m=RA(),JZt=Poe(),YZt=Boe(),{isBlob:QZt}=X_(),{BINARY_TYPES:_Ue,EMPTY_BUFFER:kN,GUID:XZt,kForOnEventAttribute:$oe,kListener:ZZt,kStatusCode:eer,kWebSocket:Cs,NOOP:wUe}=$f(),{EventTarget:{addEventListener:ter,removeEventListener:rer}}=EUe(),{format:ner,parse:ier}=Loe(),{toBuffer:ser}=xA(),oer=30*1e3,AUe=Symbol("kAborted"),Koe=[8,13],Vf=["CONNECTING","OPEN","CLOSING","CLOSED"],aer=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,qn=class t extends UZt{constructor(e,r,n){super(),this._binaryType=_Ue[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=kN,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),CUe(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){_Ue.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new JZt({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),s=new YZt(e,this._extensions,n.generateMask);this._receiver=i,this._sender=s,this._socket=e,i[Cs]=this,s[Cs]=this,e[Cs]=this,i.on("conclude",ler),i.on("drain",der),i.on("error",per),i.on("message",fer),i.on("ping",her),i.on("pong",mer),s.onerror=yer,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",xUe),e.on("data",PN),e.on("end",IUe),e.on("error",RUe),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[_m.extensionName]&&this._extensions[_m.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Cu(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),OUe(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Uoe(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||kN,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Uoe(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||kN,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Uoe(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[_m.extensionName]||(i.compress=!1),this._sender.send(e||kN,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Cu(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(qn,"CONNECTING",{enumerable:!0,value:Vf.indexOf("CONNECTING")});Object.defineProperty(qn.prototype,"CONNECTING",{enumerable:!0,value:Vf.indexOf("CONNECTING")});Object.defineProperty(qn,"OPEN",{enumerable:!0,value:Vf.indexOf("OPEN")});Object.defineProperty(qn.prototype,"OPEN",{enumerable:!0,value:Vf.indexOf("OPEN")});Object.defineProperty(qn,"CLOSING",{enumerable:!0,value:Vf.indexOf("CLOSING")});Object.defineProperty(qn.prototype,"CLOSING",{enumerable:!0,value:Vf.indexOf("CLOSING")});Object.defineProperty(qn,"CLOSED",{enumerable:!0,value:Vf.indexOf("CLOSED")});Object.defineProperty(qn.prototype,"CLOSED",{enumerable:!0,value:Vf.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(qn.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(qn.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[$oe])return e[ZZt];return null},set(e){for(let r of this.listeners(t))if(r[$oe]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[$oe]:!0})}})});qn.prototype.addEventListener=ter;qn.prototype.removeEventListener=rer;DUe.exports=qn;function CUe(t,e,r,n){let i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Koe[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=i.autoPong,!Koe.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${Koe.join(", ")})`);let s;if(e instanceof joe)s=e;else try{s=new joe(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",u;if(s.protocol!=="ws:"&&!o&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!s.pathname?u="The URL's pathname is empty":s.hash&&(u="The URL contains a fragment identifier"),u){let g=new SyntaxError(u);if(t._redirects===0)throw g;MN(t,g);return}let c=o?443:80,l=zZt(16).toString("base64"),d=o?VZt.request:GZt.request,p=new Set,f;if(i.createConnection=i.createConnection||(o?cer:uer),i.defaultPort=i.defaultPort||c,i.port=s.port||c,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(f=new _m(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=ner({[_m.extensionName]:f.offer()})),r.length){for(let g of r){if(typeof g!="string"||!aer.test(g)||p.has(g))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(g)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){let g=i.path.split(":");i.socketPath=g[0],i.path=g[1]}let h;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?i.socketPath:s.host;let g=n&&n.headers;if(n={...n,headers:{}},g)for(let[_,S]of Object.entries(g))n.headers[_.toLowerCase()]=S}else if(t.listenerCount("redirect")===0){let g=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!g||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,g||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),h=t._req=d(i),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=d(i);i.timeout&&h.on("timeout",()=>{Cu(t,h,"Opening handshake has timed out")}),h.on("error",g=>{h===null||h[AUe]||(h=t._req=null,MN(t,g))}),h.on("response",g=>{let _=g.headers.location,S=g.statusCode;if(_&&i.followRedirects&&S>=300&&S<400){if(++t._redirects>i.maxRedirects){Cu(t,h,"Maximum redirects exceeded");return}h.abort();let w;try{w=new joe(_,e)}catch{let A=new SyntaxError(`Invalid URL: ${_}`);MN(t,A);return}CUe(t,w,r,n)}else t.emit("unexpected-response",h,g)||Cu(t,h,`Unexpected server response: ${g.statusCode}`)}),h.on("upgrade",(g,_,S)=>{if(t.emit("upgrade",g),t.readyState!==qn.CONNECTING)return;h=t._req=null;let w=g.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){Cu(t,_,"Invalid Upgrade header");return}let C=WZt("sha1").update(l+XZt).digest("base64");if(g.headers["sec-websocket-accept"]!==C){Cu(t,_,"Invalid Sec-WebSocket-Accept header");return}let A=g.headers["sec-websocket-protocol"],O;if(A!==void 0?p.size?p.has(A)||(O="Server sent an invalid subprotocol"):O="Server sent a subprotocol but none was requested":p.size&&(O="Server sent no subprotocol"),O){Cu(t,_,O);return}A&&(t._protocol=A);let x=g.headers["sec-websocket-extensions"];if(x!==void 0){if(!f){Cu(t,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let R;try{R=ier(x)}catch{Cu(t,_,"Invalid Sec-WebSocket-Extensions header");return}let M=Object.keys(R);if(M.length!==1||M[0]!==_m.extensionName){Cu(t,_,"Server indicated an extension that was not requested");return}try{f.accept(R[_m.extensionName])}catch{Cu(t,_,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[_m.extensionName]=f}t.setSocket(_,S,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(h,t):h.end()}function MN(t,e){t._readyState=qn.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function uer(t){return t.path=t.socketPath,SUe.connect(t)}function cer(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=SUe.isIP(t.host)?"":t.host),HZt.connect(t)}function Cu(t,e,r){t._readyState=qn.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Cu),e.setHeader?(e[AUe]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(MN,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function Uoe(t,e,r){if(e){let n=QZt(e)?e.size:ser(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${Vf[t.readyState]})`);process.nextTick(r,n)}}function ler(t,e){let r=this[Cs];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Cs]!==void 0&&(r._socket.removeListener("data",PN),process.nextTick(TUe,r._socket),t===1005?r.close():r.close(t,e))}function der(){let t=this[Cs];t.isPaused||t._socket.resume()}function per(t){let e=this[Cs];e._socket[Cs]!==void 0&&(e._socket.removeListener("data",PN),process.nextTick(TUe,e._socket),e.close(t[eer])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function vUe(){this[Cs].emitClose()}function fer(t,e){this[Cs].emit("message",t,e)}function her(t){let e=this[Cs];e._autoPong&&e.pong(t,!this._isServer,wUe),e.emit("ping",t)}function mer(t){this[Cs].emit("pong",t)}function TUe(t){t.resume()}function yer(t){let e=this[Cs];e.readyState!==qn.CLOSED&&(e.readyState===qn.OPEN&&(e._readyState=qn.CLOSING,OUe(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function OUe(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),oer)}function xUe(){let t=this[Cs];this.removeListener("close",xUe),this.removeListener("data",PN),this.removeListener("end",IUe),t._readyState=qn.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Cs]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",vUe),t._receiver.on("finish",vUe))}function PN(t){this[Cs]._receiver.write(t)||this.pause()}function IUe(){let t=this[Cs];t._readyState=qn.CLOSING,t._receiver.end(),this.end()}function RUe(){let t=this[Cs];this.removeListener("error",RUe),this.on("error",wUe),t&&(t._readyState=qn.CLOSING,this.destroy())}});var NUe=m((MMr,PUe)=>{"use strict";var kMr=NN(),{Duplex:ger}=require("stream");function kUe(t){t.emit("close")}function Eer(){!this.destroyed&&this._writableState.finished&&this.destroy()}function MUe(t){this.removeListener("error",MUe),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function ber(t,e){let r=!0,n=new ger({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&n._readableState.objectMode?s.toString():s;n.push(a)||t.pause()}),t.once("error",function(s){n.destroyed||(r=!1,n.destroy(s))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(kUe,n);return}let o=!1;t.once("error",function(u){o=!0,s(u)}),t.once("close",function(){o||s(i),process.nextTick(kUe,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,s,o)});return}t.send(i,o)},n.on("end",Eer),n.on("error",MUe),n}PUe.exports=ber});var BUe=m((PMr,FUe)=>{"use strict";var{tokenChars:_er}=X_();function ver(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(n===-1&&_er[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}FUe.exports={parse:ver}});var VUe=m((FMr,UUe)=>{"use strict";var Ser=require("events"),FN=require("http"),{Duplex:NMr}=require("stream"),{createHash:wer}=require("crypto"),qUe=Loe(),jg=RA(),Aer=BUe(),Cer=NN(),{GUID:Ter,kWebSocket:Oer}=$f(),xer=/^[+/0-9A-Za-z]{22}==$/,LUe=0,jUe=1,KUe=2,Voe=class extends Ser{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Cer,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=FN.createServer((n,i)=>{let s=FN.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Ier(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=LUe}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===KUe){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(PA,this);return}if(e&&this.once("close",e),this._state!==jUe)if(this._state=jUe,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(PA,this):process.nextTick(PA,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{PA(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",$Ue);let s=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){$g(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){$g(this,e,r,400,"Invalid Upgrade header");return}if(s===void 0||!xer.test(s)){$g(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==13&&a!==8){$g(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(e)){NA(r,400);return}let u=e.headers["sec-websocket-protocol"],c=new Set;if(u!==void 0)try{c=Aer.parse(u)}catch{$g(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&l!==void 0){let p=new jg(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=qUe.parse(l);f[jg.extensionName]&&(p.accept(f[jg.extensionName]),d[jg.extensionName]=p)}catch{$g(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,h,g,_)=>{if(!f)return NA(r,h||401,g,_);this.completeUpgrade(d,s,c,e,r,n,i)});return}if(!this.options.verifyClient(p))return NA(r,401)}this.completeUpgrade(d,s,c,e,r,n,i)}completeUpgrade(e,r,n,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[Oer])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>LUe)return NA(s,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${wer("sha1").update(r+Ter).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;d&&(c.push(`Sec-WebSocket-Protocol: ${d}`),l._protocol=d)}if(e[jg.extensionName]){let d=e[jg.extensionName].params,p=qUe.format({[jg.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${p}`),l._extensions=e}this.emit("headers",c,i),s.write(c.concat(`\r
`).join(`\r
`)),s.removeListener("error",$Ue),l.setSocket(s,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(PA,this)})),a(l,i)}};UUe.exports=Voe;function Ier(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function PA(t){t._state=KUe,t.emit("close")}function $Ue(){this.destroy()}function NA(t,e,r,n){r=r||FN.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${FN.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function $g(t,e,r,n,i,s){if(t.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,$g),t.emit("wsClientError",o,r,e)}else NA(r,n,i,s)}});var Rer,Der,ker,Goe,Mer,GUe=le(()=>{Rer=Dt(NUe(),1),Der=Dt(Poe(),1),ker=Dt(Boe(),1),Goe=Dt(NN(),1),Mer=Dt(VUe(),1)});function Ber(){return{geminiUrl:Ner,vertexUrl:Fer}}function qer(t,e,r,n){var i,s;if(!t?.baseUrl){let o=Ber();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:r:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}function rt(t,e){let r=/\{([^}]+)\}/g;return t.replace(r,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function b(t,e,r){for(let s=0;s<e.length-1;s++){let o=e[s];if(o.endsWith("[]")){let a=o.slice(0,-2);if(!(a in t))if(Array.isArray(r))t[a]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){let u=t[a];if(Array.isArray(r))for(let c=0;c<u.length;c++){let l=u[c];b(l,e.slice(s+1),r[c])}else for(let c of u)b(c,e.slice(s+1),r)}return}else if(o.endsWith("[0]")){let a=o.slice(0,-3);a in t||(t[a]=[{}]);let u=t[a];b(u[0],e.slice(s+1),r);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}let n=e[e.length-1],i=t[n];if(i!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===i)return;if(typeof i=="object"&&typeof r=="object"&&i!==null&&r!==null)Object.assign(i,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[n]=r}function y(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return r;let i=e[n];if(i.endsWith("[]")){let s=i.slice(0,-2);if(s in t){let o=t[s];return Array.isArray(o)?o.map(a=>y(a,e.slice(n+1),r)):r}else return r}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return r;throw n}}function Ler(t,e){for(let[r,n]of Object.entries(e)){let i=r.split("."),s=n.split("."),o=new Set,a=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){a=u;break}if(a!==-1&&s.length>a)for(let u=a;u<s.length;u++){let c=s[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}Hoe(t,i,s,0,o)}}function Hoe(t,e,r,n,i){if(n>=e.length||typeof t!="object"||t===null)return;let s=e[n];if(s.endsWith("[]")){let o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(let u of a[o])Hoe(u,e,r,n+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),u={};for(let c of a)u[c]=o[c];for(let[c,l]of Object.entries(u)){let d=[];for(let p of r.slice(n))p==="*"?d.push(c):d.push(p);b(o,d,l)}for(let c of a)delete o[c]}}else{let o=t;s in o&&Hoe(o[s],e,r,n+1,i)}}function Rae(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function jer(t){let e={},r=y(t,["operationName"]);r!=null&&b(e,["operationName"],r);let n=y(t,["resourceName"]);return n!=null&&b(e,["_url","resourceName"],n),e}function $er(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response","generateVideoResponse"]);return o!=null&&b(e,["response"],Uer(o)),e}function Ker(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response"]);return o!=null&&b(e,["response"],Ver(o)),e}function Uer(t){let e={},r=y(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Ger(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function Ver(t){let e={},r=y(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Her(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function Ger(t){let e={},r=y(t,["video"]);return r!=null&&b(e,["video"],Jer(r)),e}function Her(t){let e={},r=y(t,["_self"]);return r!=null&&b(e,["video"],Yer(r)),e}function zer(t){let e={},r=y(t,["operationName"]);return r!=null&&b(e,["_url","operationName"],r),e}function Wer(t){let e={},r=y(t,["operationName"]);return r!=null&&b(e,["_url","operationName"],r),e}function Jer(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["uri"],r);let n=y(t,["encodedVideo"]);n!=null&&b(e,["videoBytes"],Rae(n));let i=y(t,["encoding"]);return i!=null&&b(e,["mimeType"],i),e}function Yer(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["uri"],r);let n=y(t,["bytesBase64Encoded"]);n!=null&&b(e,["videoBytes"],Rae(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Mr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function rGe(t,e){let r=Mr(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function nGe(t){return Array.isArray(t)?t.map(e=>YN(e)):[YN(t)]}function YN(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function iGe(t){let e=YN(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sGe(t){let e=YN(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BVe(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function oGe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>BVe(e)):[BVe(t)]}function iae(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function qVe(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function LVe(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vo(t){if(t==null)throw new Error("ContentUnion is required");return iae(t)?t:{role:"user",parts:oGe(t)}}function Dae(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{let n=vo(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){let r=vo(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>vo(r)):[vo(e)]}function jc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(qVe(t)||LVe(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vo(t)]}let e=[],r=[],n=iae(t[0]);for(let i of t){let s=iae(i);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(qVe(i)||LVe(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(i)}}return n||e.push({role:"user",parts:oGe(r)}),e}function Qer(t,e){t.includes("null")&&(e.nullable=!0);let r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(vm).includes(r[0].toUpperCase())?r[0].toUpperCase():vm.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let n of r)e.anyOf.push({type:Object.values(vm).includes(n.toUpperCase())?n.toUpperCase():vm.TYPE_UNSPECIFIED})}}function i4(t){let e={},r=["items"],n=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Qer(t.type,e);for(let[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(vm).includes(a.toUpperCase())?a.toUpperCase():vm.TYPE_UNSPECIFIED}else if(r.includes(o))e[o]=i4(a);else if(n.includes(o)){let u=[];for(let c of a){if(c.type=="null"){e.nullable=!0;continue}u.push(i4(c))}e[o]=u}else if(i.includes(o)){let u={};for(let[c,l]of Object.entries(a))u[c]=i4(l);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=a}return e}function kae(t){return i4(t)}function Mae(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Pae(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function u4(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=i4(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=i4(e.response));return t}function c4(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let r of t)e.push(r);return e}function Xer(t,e,r,n=1){let i=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:i?`${r}/${e}`:e}function Hf(t,e){if(typeof e!="string")throw new Error("name must be a string");return Xer(t,e,"cachedContents")}function aGe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Sm(t){return Rae(t)}function Zer(t){return t!=null&&typeof t=="object"&&"name"in t}function uGe(t){return t!=null&&typeof t=="object"&&"video"in t}function cGe(t){return t!=null&&typeof t=="object"&&"uri"in t}function Nae(t){var e;let r;if(Zer(t)&&(r=t.name),!(cGe(t)&&(r=t.uri,r===void 0))&&!(uGe(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){let i=r.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${r}`);r=i[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function lGe(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function dGe(t){for(let e of["models","tunedModels","publisherModels"])if(etr(t,e))return t[e];return[]}function etr(t,e){return t!==null&&typeof t=="object"&&e in t}function ttr(t,e={}){let r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(n.responseJsonSchema=r.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function rtr(t,e={}){let r=[],n=new Set;for(let i of t){let s=i.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);let o=ttr(i,e);o.functionDeclarations&&r.push(...o.functionDeclarations)}return{functionDeclarations:r}}function pGe(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;let n=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,i=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function ntr(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fGe(t){if(typeof t!="object"||t===null)return{};let e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;let i=r.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(let o of i){if(typeof o!="object"||o===null)continue;let u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function l4(t,e){let r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function hGe(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function itr(t){let e={},r=y(t,["responsesFile"]);r!=null&&b(e,["fileName"],r);let n=y(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Ntr(o))),b(e,["inlinedResponses"],s)}let i=y(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["inlinedEmbedContentResponses"],s)}return e}function str(t){let e={},r=y(t,["predictionsFormat"]);r!=null&&b(e,["format"],r);let n=y(t,["gcsDestination","outputUriPrefix"]);n!=null&&b(e,["gcsUri"],n);let i=y(t,["bigqueryDestination","outputUri"]);return i!=null&&b(e,["bigqueryUri"],i),e}function otr(t){let e={},r=y(t,["format"]);r!=null&&b(e,["predictionsFormat"],r);let n=y(t,["gcsUri"]);n!=null&&b(e,["gcsDestination","outputUriPrefix"],n);let i=y(t,["bigqueryUri"]);if(i!=null&&b(e,["bigqueryDestination","outputUri"],i),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(y(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function BN(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata","displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["metadata","state"]);i!=null&&b(e,["state"],hGe(i));let s=y(t,["metadata","createTime"]);s!=null&&b(e,["createTime"],s);let o=y(t,["metadata","endTime"]);o!=null&&b(e,["endTime"],o);let a=y(t,["metadata","updateTime"]);a!=null&&b(e,["updateTime"],a);let u=y(t,["metadata","model"]);u!=null&&b(e,["model"],u);let c=y(t,["metadata","output"]);return c!=null&&b(e,["dest"],itr(fGe(c))),e}function sae(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["state"]);i!=null&&b(e,["state"],hGe(i));let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["createTime"]);o!=null&&b(e,["createTime"],o);let a=y(t,["startTime"]);a!=null&&b(e,["startTime"],a);let u=y(t,["endTime"]);u!=null&&b(e,["endTime"],u);let c=y(t,["updateTime"]);c!=null&&b(e,["updateTime"],c);let l=y(t,["model"]);l!=null&&b(e,["model"],l);let d=y(t,["inputConfig"]);d!=null&&b(e,["src"],atr(d));let p=y(t,["outputConfig"]);return p!=null&&b(e,["dest"],str(fGe(p))),e}function atr(t){let e={},r=y(t,["instancesFormat"]);r!=null&&b(e,["format"],r);let n=y(t,["gcsSource","uris"]);n!=null&&b(e,["gcsUri"],n);let i=y(t,["bigquerySource","inputUri"]);return i!=null&&b(e,["bigqueryUri"],i),e}function utr(t,e){let r={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let n=y(e,["fileName"]);n!=null&&b(r,["fileName"],n);let i=y(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Ptr(t,o))),b(r,["requests","requests"],s)}return r}function ctr(t){let e={},r=y(t,["format"]);r!=null&&b(e,["instancesFormat"],r);let n=y(t,["gcsUri"]);n!=null&&b(e,["gcsSource","uris"],n);let i=y(t,["bigqueryUri"]);if(i!=null&&b(e,["bigquerySource","inputUri"],i),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ltr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function dtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],l4(t,n)),r}function ptr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],l4(t,n)),r}function ftr(t){let e={},r=y(t,["content"]);r!=null&&b(e,["content"],r);let n=y(t,["citationMetadata"]);n!=null&&b(e,["citationMetadata"],htr(n));let i=y(t,["tokenCount"]);i!=null&&b(e,["tokenCount"],i);let s=y(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);let o=y(t,["urlContextMetadata"]);o!=null&&b(e,["urlContextMetadata"],o);let a=y(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);let u=y(t,["groundingMetadata"]);u!=null&&b(e,["groundingMetadata"],u);let c=y(t,["index"]);c!=null&&b(e,["index"],c);let l=y(t,["logprobsResult"]);l!=null&&b(e,["logprobsResult"],l);let d=y(t,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>f)),b(e,["safetyRatings"],p)}return e}function htr(t){let e={},r=y(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),b(e,["citations"],n)}return e}function mGe(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Ktr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function mtr(t,e){let r={},n=y(t,["displayName"]);if(e!==void 0&&n!=null&&b(e,["batch","displayName"],n),y(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function ytr(t,e){let r={},n=y(t,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);let i=y(t,["dest"]);return e!==void 0&&i!=null&&b(e,["outputConfig"],otr(ntr(i))),r}function jVe(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["src"]);i!=null&&b(r,["batch","inputConfig"],utr(t,pGe(t,i)));let s=y(e,["config"]);return s!=null&&mtr(s,r),r}function gtr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["model"],Mr(t,n));let i=y(e,["src"]);i!=null&&b(r,["inputConfig"],ctr(pGe(t,i)));let s=y(e,["config"]);return s!=null&&ytr(s,r),r}function Etr(t,e){let r={},n=y(t,["displayName"]);return e!==void 0&&n!=null&&b(e,["batch","displayName"],n),r}function btr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["src"]);i!=null&&b(r,["batch","inputConfig"],Ttr(t,i));let s=y(e,["config"]);return s!=null&&Etr(s,r),r}function _tr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],l4(t,n)),r}function vtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],l4(t,n)),r}function Str(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);return s!=null&&b(e,["error"],s),e}function wtr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);return s!=null&&b(e,["error"],s),e}function Atr(t,e){let r={},n=y(e,["contents"]);if(n!=null){let s=Dae(t,n);Array.isArray(s)&&(s=s.map(o=>o)),b(r,["requests[]","request","content"],s)}let i=y(e,["config"]);return i!=null&&(b(r,["_self"],Ctr(i,r)),Ler(r,{"requests[].*":"requests[].request.*"})),r}function Ctr(t,e){let r={},n=y(t,["taskType"]);e!==void 0&&n!=null&&b(e,["requests[]","taskType"],n);let i=y(t,["title"]);e!==void 0&&i!=null&&b(e,["requests[]","title"],i);let s=y(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),y(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Ttr(t,e){let r={},n=y(e,["fileName"]);n!=null&&b(r,["file_name"],n);let i=y(e,["inlinedRequests"]);return i!=null&&b(r,["requests"],Atr(t,i)),r}function Otr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function xtr(t,e,r){let n={},i=y(e,["systemInstruction"]);r!==void 0&&i!=null&&b(r,["systemInstruction"],mGe(vo(i)));let s=y(e,["temperature"]);s!=null&&b(n,["temperature"],s);let o=y(e,["topP"]);o!=null&&b(n,["topP"],o);let a=y(e,["topK"]);a!=null&&b(n,["topK"],a);let u=y(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);let c=y(e,["maxOutputTokens"]);c!=null&&b(n,["maxOutputTokens"],c);let l=y(e,["stopSequences"]);l!=null&&b(n,["stopSequences"],l);let d=y(e,["responseLogprobs"]);d!=null&&b(n,["responseLogprobs"],d);let p=y(e,["logprobs"]);p!=null&&b(n,["logprobs"],p);let f=y(e,["presencePenalty"]);f!=null&&b(n,["presencePenalty"],f);let h=y(e,["frequencyPenalty"]);h!=null&&b(n,["frequencyPenalty"],h);let g=y(e,["seed"]);g!=null&&b(n,["seed"],g);let _=y(e,["responseMimeType"]);_!=null&&b(n,["responseMimeType"],_);let S=y(e,["responseSchema"]);S!=null&&b(n,["responseSchema"],kae(S));let w=y(e,["responseJsonSchema"]);if(w!=null&&b(n,["responseJsonSchema"],w),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let C=y(e,["safetySettings"]);if(r!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(k=>Utr(k))),b(r,["safetySettings"],U)}let A=y(e,["tools"]);if(r!==void 0&&A!=null){let U=c4(A);Array.isArray(U)&&(U=U.map(k=>Vtr(u4(k)))),b(r,["tools"],U)}let O=y(e,["toolConfig"]);if(r!==void 0&&O!=null&&b(r,["toolConfig"],O),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let x=y(e,["cachedContent"]);r!==void 0&&x!=null&&b(r,["cachedContent"],Hf(t,x));let R=y(e,["responseModalities"]);R!=null&&b(n,["responseModalities"],R);let M=y(e,["mediaResolution"]);M!=null&&b(n,["mediaResolution"],M);let I=y(e,["speechConfig"]);if(I!=null&&b(n,["speechConfig"],Mae(I)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let F=y(e,["thinkingConfig"]);F!=null&&b(n,["thinkingConfig"],F);let B=y(e,["imageConfig"]);return B!=null&&b(n,["imageConfig"],B),n}function Itr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>ftr(c))),b(e,["candidates"],u)}let i=y(t,["modelVersion"]);i!=null&&b(e,["modelVersion"],i);let s=y(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);let o=y(t,["responseId"]);o!=null&&b(e,["responseId"],o);let a=y(t,["usageMetadata"]);return a!=null&&b(e,["usageMetadata"],a),e}function Rtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],l4(t,n)),r}function Dtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],l4(t,n)),r}function ktr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function Mtr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ptr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["request","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let a=jc(i);Array.isArray(a)&&(a=a.map(u=>mGe(u))),b(r,["request","contents"],a)}let s=y(e,["metadata"]);s!=null&&b(r,["metadata"],s);let o=y(e,["config"]);return o!=null&&b(r,["request","generationConfig"],xtr(t,o,y(r,["request"],{}))),r}function Ntr(t){let e={},r=y(t,["response"]);r!=null&&b(e,["response"],Itr(r));let n=y(t,["error"]);return n!=null&&b(e,["error"],n),e}function Ftr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);if(e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),y(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function Btr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);e!==void 0&&i!=null&&b(e,["_query","pageToken"],i);let s=y(t,["filter"]);return e!==void 0&&s!=null&&b(e,["_query","filter"],s),r}function qtr(t){let e={},r=y(t,["config"]);return r!=null&&Ftr(r,e),e}function Ltr(t){let e={},r=y(t,["config"]);return r!=null&&Btr(r,e),e}function jtr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>BN(o))),b(e,["batchJobs"],s)}return e}function $tr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>sae(o))),b(e,["batchJobs"],s)}return e}function Ktr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],ltr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],Otr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function Utr(t){let e={};if(y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=y(t,["category"]);r!=null&&b(e,["category"],r);let n=y(t,["threshold"]);return n!=null&&b(e,["threshold"],n),e}function Vtr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],Mtr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],ktr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function Gtr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function $Ve(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>prr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function Htr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);e!==void 0&&i!=null&&b(e,["expireTime"],i);let s=y(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);let o=y(t,["contents"]);if(e!==void 0&&o!=null){let l=jc(o);Array.isArray(l)&&(l=l.map(d=>$Ve(d))),b(e,["contents"],l)}let a=y(t,["systemInstruction"]);e!==void 0&&a!=null&&b(e,["systemInstruction"],$Ve(vo(a)));let u=y(t,["tools"]);if(e!==void 0&&u!=null){let l=u;Array.isArray(l)&&(l=l.map(d=>frr(d))),b(e,["tools"],l)}let c=y(t,["toolConfig"]);if(e!==void 0&&c!=null&&b(e,["toolConfig"],c),y(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function ztr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);e!==void 0&&i!=null&&b(e,["expireTime"],i);let s=y(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);let o=y(t,["contents"]);if(e!==void 0&&o!=null){let d=jc(o);Array.isArray(d)&&(d=d.map(p=>p)),b(e,["contents"],d)}let a=y(t,["systemInstruction"]);e!==void 0&&a!=null&&b(e,["systemInstruction"],vo(a));let u=y(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>hrr(p))),b(e,["tools"],d)}let c=y(t,["toolConfig"]);e!==void 0&&c!=null&&b(e,["toolConfig"],c);let l=y(t,["kmsKeyName"]);return e!==void 0&&l!=null&&b(e,["encryption_spec","kmsKeyName"],l),r}function Wtr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["model"],rGe(t,n));let i=y(e,["config"]);return i!=null&&Htr(i,r),r}function Jtr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["model"],rGe(t,n));let i=y(e,["config"]);return i!=null&&ztr(i,r),r}function Ytr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Hf(t,n)),r}function Qtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Hf(t,n)),r}function Xtr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function Ztr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function err(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function trr(t){let e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let r=y(t,["description"]);r!=null&&b(e,["description"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["parameters"]);i!=null&&b(e,["parameters"],i);let s=y(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);let o=y(t,["response"]);o!=null&&b(e,["response"],o);let a=y(t,["responseJsonSchema"]);return a!=null&&b(e,["responseJsonSchema"],a),e}function rrr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Hf(t,n)),r}function nrr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Hf(t,n)),r}function irr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function srr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function orr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);return e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),r}function arr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);return e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),r}function urr(t){let e={},r=y(t,["config"]);return r!=null&&orr(r,e),e}function crr(t){let e={},r=y(t,["config"]);return r!=null&&arr(r,e),e}function lrr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["cachedContents"],s)}return e}function drr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["cachedContents"],s)}return e}function prr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],Gtr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],err(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function frr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],srr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],irr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function hrr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>trr(p))),b(e,["functionDeclarations"],d)}let n=y(t,["retrieval"]);n!=null&&b(e,["retrieval"],n);let i=y(t,["googleSearch"]);i!=null&&b(e,["googleSearch"],i);let s=y(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);let o=y(t,["enterpriseWebSearch"]);o!=null&&b(e,["enterpriseWebSearch"],o);let a=y(t,["googleMaps"]);a!=null&&b(e,["googleMaps"],a);let u=y(t,["urlContext"]);u!=null&&b(e,["urlContext"],u);let c=y(t,["computerUse"]);c!=null&&b(e,["computerUse"],c);let l=y(t,["codeExecution"]);return l!=null&&b(e,["codeExecution"],l),e}function mrr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);return e!==void 0&&i!=null&&b(e,["expireTime"],i),r}function yrr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);return e!==void 0&&i!=null&&b(e,["expireTime"],i),r}function grr(t,e){let r={},n=y(e,["name"]);n!=null&&b(r,["_url","name"],Hf(t,n));let i=y(e,["config"]);return i!=null&&mrr(i,r),r}function Err(t,e){let r={},n=y(e,["name"]);n!=null&&b(r,["_url","name"],Hf(t,n));let i=y(e,["config"]);return i!=null&&yrr(i,r),r}function KVe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function In(t){return this instanceof In?(this.v=t,this):new In(t)}function s4(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(g){return new Promise(function(_,S){s.push([f,g,_,S])>1||u(f,g)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(g){p(s[0][3],g)}}function c(f){f.value instanceof In?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function BA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof KVe=="function"?KVe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function brr(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:yGe(r)}function yGe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function _rr(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function UVe(t){if(t===void 0||t.length===0)return[];let e=[],r=t.length,n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{let i=[],s=!0;for(;n<r&&t[n].role==="model";)i.push(t[n]),s&&!yGe(t[n])&&(s=!1),n++;s?e.push(...i):e.pop()}return e}function vrr(t){let e={},r=y(t,["file"]);return r!=null&&b(e,["file"],r),e}function Srr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function wrr(t){let e={},r=y(t,["name"]);return r!=null&&b(e,["_url","file"],Nae(r)),e}function Arr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function Crr(t){let e={},r=y(t,["name"]);return r!=null&&b(e,["_url","file"],Nae(r)),e}function Trr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);return e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),r}function Orr(t){let e={},r=y(t,["config"]);return r!=null&&Trr(r,e),e}function xrr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["files"],s)}return e}function qN(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Irr(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Vrr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function Rrr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Drr(t){let e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let r=y(t,["description"]);r!=null&&b(e,["description"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["parameters"]);i!=null&&b(e,["parameters"],i);let s=y(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);let o=y(t,["response"]);o!=null&&b(e,["response"],o);let a=y(t,["responseJsonSchema"]);return a!=null&&b(e,["responseJsonSchema"],a),e}function krr(t){let e={},r=y(t,["modelSelectionConfig"]);r!=null&&b(e,["modelConfig"],r);let n=y(t,["audioTimestamp"]);n!=null&&b(e,["audioTimestamp"],n);let i=y(t,["candidateCount"]);i!=null&&b(e,["candidateCount"],i);let s=y(t,["enableAffectiveDialog"]);s!=null&&b(e,["enableAffectiveDialog"],s);let o=y(t,["frequencyPenalty"]);o!=null&&b(e,["frequencyPenalty"],o);let a=y(t,["logprobs"]);a!=null&&b(e,["logprobs"],a);let u=y(t,["maxOutputTokens"]);u!=null&&b(e,["maxOutputTokens"],u);let c=y(t,["mediaResolution"]);c!=null&&b(e,["mediaResolution"],c);let l=y(t,["presencePenalty"]);l!=null&&b(e,["presencePenalty"],l);let d=y(t,["responseJsonSchema"]);d!=null&&b(e,["responseJsonSchema"],d);let p=y(t,["responseLogprobs"]);p!=null&&b(e,["responseLogprobs"],p);let f=y(t,["responseMimeType"]);f!=null&&b(e,["responseMimeType"],f);let h=y(t,["responseModalities"]);h!=null&&b(e,["responseModalities"],h);let g=y(t,["responseSchema"]);g!=null&&b(e,["responseSchema"],g);let _=y(t,["routingConfig"]);_!=null&&b(e,["routingConfig"],_);let S=y(t,["seed"]);S!=null&&b(e,["seed"],S);let w=y(t,["speechConfig"]);w!=null&&b(e,["speechConfig"],gGe(w));let C=y(t,["stopSequences"]);C!=null&&b(e,["stopSequences"],C);let A=y(t,["temperature"]);A!=null&&b(e,["temperature"],A);let O=y(t,["thinkingConfig"]);O!=null&&b(e,["thinkingConfig"],O);let x=y(t,["topK"]);x!=null&&b(e,["topK"],x);let R=y(t,["topP"]);if(R!=null&&b(e,["topP"],R),y(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mrr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function Prr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nrr(t,e){let r={},n=y(t,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],n);let i=y(t,["responseModalities"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","responseModalities"],i);let s=y(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);let o=y(t,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);let a=y(t,["topK"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topK"],a);let u=y(t,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);let c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","mediaResolution"],c);let l=y(t,["seed"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","seed"],l);let d=y(t,["speechConfig"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","speechConfig"],Pae(d));let p=y(t,["thinkingConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","thinkingConfig"],p);let f=y(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=y(t,["systemInstruction"]);e!==void 0&&h!=null&&b(e,["setup","systemInstruction"],Irr(vo(h)));let g=y(t,["tools"]);if(e!==void 0&&g!=null){let x=c4(g);Array.isArray(x)&&(x=x.map(R=>Hrr(u4(R)))),b(e,["setup","tools"],x)}let _=y(t,["sessionResumption"]);e!==void 0&&_!=null&&b(e,["setup","sessionResumption"],Grr(_));let S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&b(e,["setup","inputAudioTranscription"],S);let w=y(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&b(e,["setup","outputAudioTranscription"],w);let C=y(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&b(e,["setup","realtimeInputConfig"],C);let A=y(t,["contextWindowCompression"]);e!==void 0&&A!=null&&b(e,["setup","contextWindowCompression"],A);let O=y(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],O),r}function Frr(t,e){let r={},n=y(t,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],krr(n));let i=y(t,["responseModalities"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","responseModalities"],i);let s=y(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);let o=y(t,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);let a=y(t,["topK"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topK"],a);let u=y(t,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);let c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","mediaResolution"],c);let l=y(t,["seed"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","seed"],l);let d=y(t,["speechConfig"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","speechConfig"],gGe(Pae(d)));let p=y(t,["thinkingConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","thinkingConfig"],p);let f=y(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=y(t,["systemInstruction"]);e!==void 0&&h!=null&&b(e,["setup","systemInstruction"],vo(h));let g=y(t,["tools"]);if(e!==void 0&&g!=null){let x=c4(g);Array.isArray(x)&&(x=x.map(R=>zrr(u4(R)))),b(e,["setup","tools"],x)}let _=y(t,["sessionResumption"]);e!==void 0&&_!=null&&b(e,["setup","sessionResumption"],_);let S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&b(e,["setup","inputAudioTranscription"],S);let w=y(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&b(e,["setup","outputAudioTranscription"],w);let C=y(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&b(e,["setup","realtimeInputConfig"],C);let A=y(t,["contextWindowCompression"]);e!==void 0&&A!=null&&b(e,["setup","contextWindowCompression"],A);let O=y(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],O),r}function Brr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["setup","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&b(r,["config"],Nrr(i,r)),r}function qrr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["setup","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&b(r,["config"],Frr(i,r)),r}function Lrr(t){let e={},r=y(t,["musicGenerationConfig"]);return r!=null&&b(e,["musicGenerationConfig"],r),e}function jrr(t){let e={},r=y(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),b(e,["weightedPrompts"],n)}return e}function $rr(t){let e={},r=y(t,["media"]);if(r!=null){let c=nGe(r);Array.isArray(c)&&(c=c.map(l=>qN(l))),b(e,["mediaChunks"],c)}let n=y(t,["audio"]);n!=null&&b(e,["audio"],qN(sGe(n)));let i=y(t,["audioStreamEnd"]);i!=null&&b(e,["audioStreamEnd"],i);let s=y(t,["video"]);s!=null&&b(e,["video"],qN(iGe(s)));let o=y(t,["text"]);o!=null&&b(e,["text"],o);let a=y(t,["activityStart"]);a!=null&&b(e,["activityStart"],a);let u=y(t,["activityEnd"]);return u!=null&&b(e,["activityEnd"],u),e}function Krr(t){let e={},r=y(t,["media"]);if(r!=null){let c=nGe(r);Array.isArray(c)&&(c=c.map(l=>l)),b(e,["mediaChunks"],c)}let n=y(t,["audio"]);n!=null&&b(e,["audio"],sGe(n));let i=y(t,["audioStreamEnd"]);i!=null&&b(e,["audioStreamEnd"],i);let s=y(t,["video"]);s!=null&&b(e,["video"],iGe(s));let o=y(t,["text"]);o!=null&&b(e,["text"],o);let a=y(t,["activityStart"]);a!=null&&b(e,["activityStart"],a);let u=y(t,["activityEnd"]);return u!=null&&b(e,["activityEnd"],u),e}function Urr(t){let e={},r=y(t,["setupComplete"]);r!=null&&b(e,["setupComplete"],r);let n=y(t,["serverContent"]);n!=null&&b(e,["serverContent"],n);let i=y(t,["toolCall"]);i!=null&&b(e,["toolCall"],i);let s=y(t,["toolCallCancellation"]);s!=null&&b(e,["toolCallCancellation"],s);let o=y(t,["usageMetadata"]);o!=null&&b(e,["usageMetadata"],Wrr(o));let a=y(t,["goAway"]);a!=null&&b(e,["goAway"],a);let u=y(t,["sessionResumptionUpdate"]);return u!=null&&b(e,["sessionResumptionUpdate"],u),e}function Vrr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],qN(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],Rrr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function Grr(t){let e={},r=y(t,["handle"]);if(r!=null&&b(e,["handle"],r),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gGe(t){let e={},r=y(t,["voiceConfig"]);if(r!=null&&b(e,["voiceConfig"],r),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let n=y(t,["languageCode"]);return n!=null&&b(e,["languageCode"],n),e}function Hrr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],Prr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],Mrr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function zrr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>Drr(p))),b(e,["functionDeclarations"],d)}let n=y(t,["retrieval"]);n!=null&&b(e,["retrieval"],n);let i=y(t,["googleSearch"]);i!=null&&b(e,["googleSearch"],i);let s=y(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);let o=y(t,["enterpriseWebSearch"]);o!=null&&b(e,["enterpriseWebSearch"],o);let a=y(t,["googleMaps"]);a!=null&&b(e,["googleMaps"],a);let u=y(t,["urlContext"]);u!=null&&b(e,["urlContext"],u);let c=y(t,["computerUse"]);c!=null&&b(e,["computerUse"],c);let l=y(t,["codeExecution"]);return l!=null&&b(e,["codeExecution"],l),e}function Wrr(t){let e={},r=y(t,["promptTokenCount"]);r!=null&&b(e,["promptTokenCount"],r);let n=y(t,["cachedContentTokenCount"]);n!=null&&b(e,["cachedContentTokenCount"],n);let i=y(t,["candidatesTokenCount"]);i!=null&&b(e,["responseTokenCount"],i);let s=y(t,["toolUsePromptTokenCount"]);s!=null&&b(e,["toolUsePromptTokenCount"],s);let o=y(t,["thoughtsTokenCount"]);o!=null&&b(e,["thoughtsTokenCount"],o);let a=y(t,["totalTokenCount"]);a!=null&&b(e,["totalTokenCount"],a);let u=y(t,["promptTokensDetails"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["promptTokensDetails"],f)}let c=y(t,["cacheTokensDetails"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["cacheTokensDetails"],f)}let l=y(t,["candidatesTokensDetails"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["responseTokensDetails"],f)}let d=y(t,["toolUsePromptTokensDetails"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["toolUsePromptTokensDetails"],f)}let p=y(t,["trafficType"]);return p!=null&&b(e,["trafficType"],p),e}function Jrr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Yrr(t){let e={},r=y(t,["content"]);r!=null&&b(e,["content"],r);let n=y(t,["citationMetadata"]);n!=null&&b(e,["citationMetadata"],Qrr(n));let i=y(t,["tokenCount"]);i!=null&&b(e,["tokenCount"],i);let s=y(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);let o=y(t,["urlContextMetadata"]);o!=null&&b(e,["urlContextMetadata"],o);let a=y(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);let u=y(t,["groundingMetadata"]);u!=null&&b(e,["groundingMetadata"],u);let c=y(t,["index"]);c!=null&&b(e,["index"],c);let l=y(t,["logprobsResult"]);l!=null&&b(e,["logprobsResult"],l);let d=y(t,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>f)),b(e,["safetyRatings"],p)}return e}function Qrr(t){let e={},r=y(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),b(e,["citations"],n)}return e}function Xrr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let s=jc(i);Array.isArray(s)&&(s=s.map(o=>o)),b(r,["contents"],s)}return r}function Zrr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["tokensInfo"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(e,["tokensInfo"],i)}return e}function enr(t){let e={},r=y(t,["values"]);r!=null&&b(e,["values"],r);let n=y(t,["statistics"]);return n!=null&&b(e,["statistics"],tnr(n)),e}function tnr(t){let e={},r=y(t,["truncated"]);r!=null&&b(e,["truncated"],r);let n=y(t,["token_count"]);return n!=null&&b(e,["tokenCount"],n),e}function tF(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>oir(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function rnr(t){let e={},r=y(t,["controlType"]);r!=null&&b(e,["controlType"],r);let n=y(t,["enableControlImageComputation"]);return n!=null&&b(e,["computeControl"],n),e}function nnr(t){let e={};if(y(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function inr(t,e){let r={},n=y(t,["systemInstruction"]);e!==void 0&&n!=null&&b(e,["systemInstruction"],vo(n));let i=y(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>SGe(a))),b(e,["tools"],o)}let s=y(t,["generationConfig"]);return e!==void 0&&s!=null&&b(e,["generationConfig"],znr(s)),r}function snr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=jc(i);Array.isArray(o)&&(o=o.map(a=>tF(a))),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&nnr(s),r}function onr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=jc(i);Array.isArray(o)&&(o=o.map(a=>a)),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&inr(s,r),r}function anr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["totalTokens"]);n!=null&&b(e,["totalTokens"],n);let i=y(t,["cachedContentTokenCount"]);return i!=null&&b(e,["cachedContentTokenCount"],i),e}function unr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["totalTokens"]);return n!=null&&b(e,["totalTokens"],n),e}function cnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function lnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function dnr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function pnr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function fnr(t,e){let r={},n=y(t,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);let i=y(t,["negativePrompt"]);e!==void 0&&i!=null&&b(e,["parameters","negativePrompt"],i);let s=y(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);let o=y(t,["aspectRatio"]);e!==void 0&&o!=null&&b(e,["parameters","aspectRatio"],o);let a=y(t,["guidanceScale"]);e!==void 0&&a!=null&&b(e,["parameters","guidanceScale"],a);let u=y(t,["seed"]);e!==void 0&&u!=null&&b(e,["parameters","seed"],u);let c=y(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&b(e,["parameters","safetySetting"],c);let l=y(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);let d=y(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&b(e,["parameters","includeSafetyAttributes"],d);let p=y(t,["includeRaiReason"]);e!==void 0&&p!=null&&b(e,["parameters","includeRaiReason"],p);let f=y(t,["language"]);e!==void 0&&f!=null&&b(e,["parameters","language"],f);let h=y(t,["outputMimeType"]);e!==void 0&&h!=null&&b(e,["parameters","outputOptions","mimeType"],h);let g=y(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&b(e,["parameters","outputOptions","compressionQuality"],g);let _=y(t,["addWatermark"]);e!==void 0&&_!=null&&b(e,["parameters","addWatermark"],_);let S=y(t,["labels"]);e!==void 0&&S!=null&&b(e,["labels"],S);let w=y(t,["editMode"]);e!==void 0&&w!=null&&b(e,["parameters","editMode"],w);let C=y(t,["baseSteps"]);return e!==void 0&&C!=null&&b(e,["parameters","editConfig","baseSteps"],C),r}function hnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>pir(u))),b(r,["instances[0]","referenceImages"],a)}let o=y(e,["config"]);return o!=null&&fnr(o,r),r}function mnr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rF(s))),b(e,["generatedImages"],i)}return e}function ynr(t,e){let r={},n=y(t,["taskType"]);e!==void 0&&n!=null&&b(e,["requests[]","taskType"],n);let i=y(t,["title"]);e!==void 0&&i!=null&&b(e,["requests[]","title"],i);let s=y(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),y(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function gnr(t,e){let r={},n=y(t,["taskType"]);e!==void 0&&n!=null&&b(e,["instances[]","task_type"],n);let i=y(t,["title"]);e!==void 0&&i!=null&&b(e,["instances[]","title"],i);let s=y(t,["outputDimensionality"]);e!==void 0&&s!=null&&b(e,["parameters","outputDimensionality"],s);let o=y(t,["mimeType"]);e!==void 0&&o!=null&&b(e,["instances[]","mimeType"],o);let a=y(t,["autoTruncate"]);return e!==void 0&&a!=null&&b(e,["parameters","autoTruncate"],a),r}function Enr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let a=Dae(t,i);Array.isArray(a)&&(a=a.map(u=>u)),b(r,["requests[]","content"],a)}let s=y(e,["config"]);s!=null&&ynr(s,r);let o=y(e,["model"]);return o!==void 0&&b(r,["requests[]","model"],Mr(t,o)),r}function bnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=Dae(t,i);Array.isArray(o)&&(o=o.map(a=>a)),b(r,["instances[]","content"],o)}let s=y(e,["config"]);return s!=null&&gnr(s,r),r}function _nr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["embeddings"],s)}let i=y(t,["metadata"]);return i!=null&&b(e,["metadata"],i),e}function vnr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>enr(o))),b(e,["embeddings"],s)}let i=y(t,["metadata"]);return i!=null&&b(e,["metadata"],i),e}function Snr(t){let e={},r=y(t,["endpoint"]);r!=null&&b(e,["name"],r);let n=y(t,["deployedModelId"]);return n!=null&&b(e,["deployedModelId"],n),e}function wnr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Anr(t){let e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let r=y(t,["description"]);r!=null&&b(e,["description"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["parameters"]);i!=null&&b(e,["parameters"],i);let s=y(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);let o=y(t,["response"]);o!=null&&b(e,["response"],o);let a=y(t,["responseJsonSchema"]);return a!=null&&b(e,["responseJsonSchema"],a),e}function Cnr(t,e,r){let n={},i=y(e,["systemInstruction"]);r!==void 0&&i!=null&&b(r,["systemInstruction"],tF(vo(i)));let s=y(e,["temperature"]);s!=null&&b(n,["temperature"],s);let o=y(e,["topP"]);o!=null&&b(n,["topP"],o);let a=y(e,["topK"]);a!=null&&b(n,["topK"],a);let u=y(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);let c=y(e,["maxOutputTokens"]);c!=null&&b(n,["maxOutputTokens"],c);let l=y(e,["stopSequences"]);l!=null&&b(n,["stopSequences"],l);let d=y(e,["responseLogprobs"]);d!=null&&b(n,["responseLogprobs"],d);let p=y(e,["logprobs"]);p!=null&&b(n,["logprobs"],p);let f=y(e,["presencePenalty"]);f!=null&&b(n,["presencePenalty"],f);let h=y(e,["frequencyPenalty"]);h!=null&&b(n,["frequencyPenalty"],h);let g=y(e,["seed"]);g!=null&&b(n,["seed"],g);let _=y(e,["responseMimeType"]);_!=null&&b(n,["responseMimeType"],_);let S=y(e,["responseSchema"]);S!=null&&b(n,["responseSchema"],kae(S));let w=y(e,["responseJsonSchema"]);if(w!=null&&b(n,["responseJsonSchema"],w),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let C=y(e,["safetySettings"]);if(r!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(k=>fir(k))),b(r,["safetySettings"],U)}let A=y(e,["tools"]);if(r!==void 0&&A!=null){let U=c4(A);Array.isArray(U)&&(U=U.map(k=>bir(u4(k)))),b(r,["tools"],U)}let O=y(e,["toolConfig"]);if(r!==void 0&&O!=null&&b(r,["toolConfig"],O),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let x=y(e,["cachedContent"]);r!==void 0&&x!=null&&b(r,["cachedContent"],Hf(t,x));let R=y(e,["responseModalities"]);R!=null&&b(n,["responseModalities"],R);let M=y(e,["mediaResolution"]);M!=null&&b(n,["mediaResolution"],M);let I=y(e,["speechConfig"]);if(I!=null&&b(n,["speechConfig"],Mae(I)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let F=y(e,["thinkingConfig"]);F!=null&&b(n,["thinkingConfig"],F);let B=y(e,["imageConfig"]);return B!=null&&b(n,["imageConfig"],B),n}function Tnr(t,e,r){let n={},i=y(e,["systemInstruction"]);r!==void 0&&i!=null&&b(r,["systemInstruction"],vo(i));let s=y(e,["temperature"]);s!=null&&b(n,["temperature"],s);let o=y(e,["topP"]);o!=null&&b(n,["topP"],o);let a=y(e,["topK"]);a!=null&&b(n,["topK"],a);let u=y(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);let c=y(e,["maxOutputTokens"]);c!=null&&b(n,["maxOutputTokens"],c);let l=y(e,["stopSequences"]);l!=null&&b(n,["stopSequences"],l);let d=y(e,["responseLogprobs"]);d!=null&&b(n,["responseLogprobs"],d);let p=y(e,["logprobs"]);p!=null&&b(n,["logprobs"],p);let f=y(e,["presencePenalty"]);f!=null&&b(n,["presencePenalty"],f);let h=y(e,["frequencyPenalty"]);h!=null&&b(n,["frequencyPenalty"],h);let g=y(e,["seed"]);g!=null&&b(n,["seed"],g);let _=y(e,["responseMimeType"]);_!=null&&b(n,["responseMimeType"],_);let S=y(e,["responseSchema"]);S!=null&&b(n,["responseSchema"],kae(S));let w=y(e,["responseJsonSchema"]);w!=null&&b(n,["responseJsonSchema"],w);let C=y(e,["routingConfig"]);C!=null&&b(n,["routingConfig"],C);let A=y(e,["modelSelectionConfig"]);A!=null&&b(n,["modelConfig"],A);let O=y(e,["safetySettings"]);if(r!==void 0&&O!=null){let j=O;Array.isArray(j)&&(j=j.map(V=>V)),b(r,["safetySettings"],j)}let x=y(e,["tools"]);if(r!==void 0&&x!=null){let j=c4(x);Array.isArray(j)&&(j=j.map(V=>SGe(u4(V)))),b(r,["tools"],j)}let R=y(e,["toolConfig"]);r!==void 0&&R!=null&&b(r,["toolConfig"],R);let M=y(e,["labels"]);r!==void 0&&M!=null&&b(r,["labels"],M);let I=y(e,["cachedContent"]);r!==void 0&&I!=null&&b(r,["cachedContent"],Hf(t,I));let F=y(e,["responseModalities"]);F!=null&&b(n,["responseModalities"],F);let B=y(e,["mediaResolution"]);B!=null&&b(n,["mediaResolution"],B);let U=y(e,["speechConfig"]);U!=null&&b(n,["speechConfig"],vGe(Mae(U)));let k=y(e,["audioTimestamp"]);k!=null&&b(n,["audioTimestamp"],k);let H=y(e,["thinkingConfig"]);H!=null&&b(n,["thinkingConfig"],H);let ie=y(e,["imageConfig"]);return ie!=null&&b(n,["imageConfig"],ie),n}function VVe(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=jc(i);Array.isArray(o)&&(o=o.map(a=>tF(a))),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&b(r,["generationConfig"],Cnr(t,s,r)),r}function GVe(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=jc(i);Array.isArray(o)&&(o=o.map(a=>a)),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&b(r,["generationConfig"],Tnr(t,s,r)),r}function HVe(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>Yrr(c))),b(e,["candidates"],u)}let i=y(t,["modelVersion"]);i!=null&&b(e,["modelVersion"],i);let s=y(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);let o=y(t,["responseId"]);o!=null&&b(e,["responseId"],o);let a=y(t,["usageMetadata"]);return a!=null&&b(e,["usageMetadata"],a),e}function zVe(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["candidates"],c)}let i=y(t,["createTime"]);i!=null&&b(e,["createTime"],i);let s=y(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);let o=y(t,["promptFeedback"]);o!=null&&b(e,["promptFeedback"],o);let a=y(t,["responseId"]);a!=null&&b(e,["responseId"],a);let u=y(t,["usageMetadata"]);return u!=null&&b(e,["usageMetadata"],u),e}function Onr(t,e){let r={};if(y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let n=y(t,["numberOfImages"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);let i=y(t,["aspectRatio"]);e!==void 0&&i!=null&&b(e,["parameters","aspectRatio"],i);let s=y(t,["guidanceScale"]);if(e!==void 0&&s!=null&&b(e,["parameters","guidanceScale"],s),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=y(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&b(e,["parameters","safetySetting"],o);let a=y(t,["personGeneration"]);e!==void 0&&a!=null&&b(e,["parameters","personGeneration"],a);let u=y(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&b(e,["parameters","includeSafetyAttributes"],u);let c=y(t,["includeRaiReason"]);e!==void 0&&c!=null&&b(e,["parameters","includeRaiReason"],c);let l=y(t,["language"]);e!==void 0&&l!=null&&b(e,["parameters","language"],l);let d=y(t,["outputMimeType"]);e!==void 0&&d!=null&&b(e,["parameters","outputOptions","mimeType"],d);let p=y(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&b(e,["parameters","outputOptions","compressionQuality"],p),y(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let f=y(t,["imageSize"]);if(e!==void 0&&f!=null&&b(e,["parameters","sampleImageSize"],f),y(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function xnr(t,e){let r={},n=y(t,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);let i=y(t,["negativePrompt"]);e!==void 0&&i!=null&&b(e,["parameters","negativePrompt"],i);let s=y(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);let o=y(t,["aspectRatio"]);e!==void 0&&o!=null&&b(e,["parameters","aspectRatio"],o);let a=y(t,["guidanceScale"]);e!==void 0&&a!=null&&b(e,["parameters","guidanceScale"],a);let u=y(t,["seed"]);e!==void 0&&u!=null&&b(e,["parameters","seed"],u);let c=y(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&b(e,["parameters","safetySetting"],c);let l=y(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);let d=y(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&b(e,["parameters","includeSafetyAttributes"],d);let p=y(t,["includeRaiReason"]);e!==void 0&&p!=null&&b(e,["parameters","includeRaiReason"],p);let f=y(t,["language"]);e!==void 0&&f!=null&&b(e,["parameters","language"],f);let h=y(t,["outputMimeType"]);e!==void 0&&h!=null&&b(e,["parameters","outputOptions","mimeType"],h);let g=y(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&b(e,["parameters","outputOptions","compressionQuality"],g);let _=y(t,["addWatermark"]);e!==void 0&&_!=null&&b(e,["parameters","addWatermark"],_);let S=y(t,["labels"]);e!==void 0&&S!=null&&b(e,["labels"],S);let w=y(t,["imageSize"]);e!==void 0&&w!=null&&b(e,["parameters","sampleImageSize"],w);let C=y(t,["enhancePrompt"]);return e!==void 0&&C!=null&&b(e,["parameters","enhancePrompt"],C),r}function Inr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["config"]);return s!=null&&Onr(s,r),r}function Rnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["config"]);return s!=null&&xnr(s,r),r}function Dnr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Unr(o))),b(e,["generatedImages"],s)}let i=y(t,["positivePromptSafetyAttributes"]);return i!=null&&b(e,["positivePromptSafetyAttributes"],bGe(i)),e}function knr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>rF(o))),b(e,["generatedImages"],s)}let i=y(t,["positivePromptSafetyAttributes"]);return i!=null&&b(e,["positivePromptSafetyAttributes"],_Ge(i)),e}function Mnr(t,e){let r={},n=y(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n),y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=y(t,["durationSeconds"]);if(e!==void 0&&i!=null&&b(e,["parameters","durationSeconds"],i),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=y(t,["aspectRatio"]);e!==void 0&&s!=null&&b(e,["parameters","aspectRatio"],s);let o=y(t,["resolution"]);e!==void 0&&o!=null&&b(e,["parameters","resolution"],o);let a=y(t,["personGeneration"]);if(e!==void 0&&a!=null&&b(e,["parameters","personGeneration"],a),y(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=y(t,["negativePrompt"]);e!==void 0&&u!=null&&b(e,["parameters","negativePrompt"],u);let c=y(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&b(e,["parameters","enhancePrompt"],c),y(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let l=y(t,["lastFrame"]);e!==void 0&&l!=null&&b(e,["instances[0]","lastFrame"],nF(l));let d=y(t,["referenceImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>kir(f))),b(e,["instances[0]","referenceImages"],p)}if(y(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(y(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Pnr(t,e){let r={},n=y(t,["numberOfVideos"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);let i=y(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);let s=y(t,["fps"]);e!==void 0&&s!=null&&b(e,["parameters","fps"],s);let o=y(t,["durationSeconds"]);e!==void 0&&o!=null&&b(e,["parameters","durationSeconds"],o);let a=y(t,["seed"]);e!==void 0&&a!=null&&b(e,["parameters","seed"],a);let u=y(t,["aspectRatio"]);e!==void 0&&u!=null&&b(e,["parameters","aspectRatio"],u);let c=y(t,["resolution"]);e!==void 0&&c!=null&&b(e,["parameters","resolution"],c);let l=y(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);let d=y(t,["pubsubTopic"]);e!==void 0&&d!=null&&b(e,["parameters","pubsubTopic"],d);let p=y(t,["negativePrompt"]);e!==void 0&&p!=null&&b(e,["parameters","negativePrompt"],p);let f=y(t,["enhancePrompt"]);e!==void 0&&f!=null&&b(e,["parameters","enhancePrompt"],f);let h=y(t,["generateAudio"]);e!==void 0&&h!=null&&b(e,["parameters","generateAudio"],h);let g=y(t,["lastFrame"]);e!==void 0&&g!=null&&b(e,["instances[0]","lastFrame"],rd(g));let _=y(t,["referenceImages"]);if(e!==void 0&&_!=null){let C=_;Array.isArray(C)&&(C=C.map(A=>Mir(A))),b(e,["instances[0]","referenceImages"],C)}let S=y(t,["mask"]);e!==void 0&&S!=null&&b(e,["instances[0]","mask"],Dir(S));let w=y(t,["compressionQuality"]);return e!==void 0&&w!=null&&b(e,["parameters","compressionQuality"],w),r}function Nnr(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response","generateVideoResponse"]);return o!=null&&b(e,["response"],Lnr(o)),e}function Fnr(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response"]);return o!=null&&b(e,["response"],jnr(o)),e}function Bnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["image"]);s!=null&&b(r,["instances[0]","image"],nF(s));let o=y(e,["video"]);o!=null&&b(r,["instances[0]","video"],wGe(o));let a=y(e,["source"]);a!=null&&$nr(a,r);let u=y(e,["config"]);return u!=null&&Mnr(u,r),r}function qnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["image"]);s!=null&&b(r,["instances[0]","image"],rd(s));let o=y(e,["video"]);o!=null&&b(r,["instances[0]","video"],AGe(o));let a=y(e,["source"]);a!=null&&Knr(a,r);let u=y(e,["config"]);return u!=null&&Pnr(u,r),r}function Lnr(t){let e={},r=y(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Gnr(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function jnr(t){let e={},r=y(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Hnr(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function $nr(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["image"]);e!==void 0&&i!=null&&b(e,["instances[0]","image"],nF(i));let s=y(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],wGe(s)),r}function Knr(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["image"]);e!==void 0&&i!=null&&b(e,["instances[0]","image"],rd(i));let s=y(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],AGe(s)),r}function Unr(t){let e={},r=y(t,["_self"]);r!=null&&b(e,["image"],Xnr(r));let n=y(t,["raiFilteredReason"]);n!=null&&b(e,["raiFilteredReason"],n);let i=y(t,["_self"]);return i!=null&&b(e,["safetyAttributes"],bGe(i)),e}function rF(t){let e={},r=y(t,["_self"]);r!=null&&b(e,["image"],EGe(r));let n=y(t,["raiFilteredReason"]);n!=null&&b(e,["raiFilteredReason"],n);let i=y(t,["_self"]);i!=null&&b(e,["safetyAttributes"],_Ge(i));let s=y(t,["prompt"]);return s!=null&&b(e,["enhancedPrompt"],s),e}function Vnr(t){let e={},r=y(t,["_self"]);r!=null&&b(e,["mask"],EGe(r));let n=y(t,["labels"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(e,["labels"],i)}return e}function Gnr(t){let e={},r=y(t,["video"]);return r!=null&&b(e,["video"],Iir(r)),e}function Hnr(t){let e={},r=y(t,["_self"]);return r!=null&&b(e,["video"],Rir(r)),e}function znr(t){let e={},r=y(t,["modelSelectionConfig"]);r!=null&&b(e,["modelConfig"],r);let n=y(t,["audioTimestamp"]);n!=null&&b(e,["audioTimestamp"],n);let i=y(t,["candidateCount"]);i!=null&&b(e,["candidateCount"],i);let s=y(t,["enableAffectiveDialog"]);s!=null&&b(e,["enableAffectiveDialog"],s);let o=y(t,["frequencyPenalty"]);o!=null&&b(e,["frequencyPenalty"],o);let a=y(t,["logprobs"]);a!=null&&b(e,["logprobs"],a);let u=y(t,["maxOutputTokens"]);u!=null&&b(e,["maxOutputTokens"],u);let c=y(t,["mediaResolution"]);c!=null&&b(e,["mediaResolution"],c);let l=y(t,["presencePenalty"]);l!=null&&b(e,["presencePenalty"],l);let d=y(t,["responseJsonSchema"]);d!=null&&b(e,["responseJsonSchema"],d);let p=y(t,["responseLogprobs"]);p!=null&&b(e,["responseLogprobs"],p);let f=y(t,["responseMimeType"]);f!=null&&b(e,["responseMimeType"],f);let h=y(t,["responseModalities"]);h!=null&&b(e,["responseModalities"],h);let g=y(t,["responseSchema"]);g!=null&&b(e,["responseSchema"],g);let _=y(t,["routingConfig"]);_!=null&&b(e,["routingConfig"],_);let S=y(t,["seed"]);S!=null&&b(e,["seed"],S);let w=y(t,["speechConfig"]);w!=null&&b(e,["speechConfig"],vGe(w));let C=y(t,["stopSequences"]);C!=null&&b(e,["stopSequences"],C);let A=y(t,["temperature"]);A!=null&&b(e,["temperature"],A);let O=y(t,["thinkingConfig"]);O!=null&&b(e,["thinkingConfig"],O);let x=y(t,["topK"]);x!=null&&b(e,["topK"],x);let R=y(t,["topP"]);if(R!=null&&b(e,["topP"],R),y(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Wnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function Jnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function Ynr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function Qnr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Xnr(t){let e={},r=y(t,["bytesBase64Encoded"]);r!=null&&b(e,["imageBytes"],Sm(r));let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function EGe(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["gcsUri"],r);let n=y(t,["bytesBase64Encoded"]);n!=null&&b(e,["imageBytes"],Sm(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function nF(t){let e={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let r=y(t,["imageBytes"]);r!=null&&b(e,["bytesBase64Encoded"],Sm(r));let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function rd(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["gcsUri"],r);let n=y(t,["imageBytes"]);n!=null&&b(e,["bytesBase64Encoded"],Sm(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Znr(t,e,r){let n={},i=y(e,["pageSize"]);r!==void 0&&i!=null&&b(r,["_query","pageSize"],i);let s=y(e,["pageToken"]);r!==void 0&&s!=null&&b(r,["_query","pageToken"],s);let o=y(e,["filter"]);r!==void 0&&o!=null&&b(r,["_query","filter"],o);let a=y(e,["queryBase"]);return r!==void 0&&a!=null&&b(r,["_url","models_url"],lGe(t,a)),n}function eir(t,e,r){let n={},i=y(e,["pageSize"]);r!==void 0&&i!=null&&b(r,["_query","pageSize"],i);let s=y(e,["pageToken"]);r!==void 0&&s!=null&&b(r,["_query","pageToken"],s);let o=y(e,["filter"]);r!==void 0&&o!=null&&b(r,["_query","filter"],o);let a=y(e,["queryBase"]);return r!==void 0&&a!=null&&b(r,["_url","models_url"],lGe(t,a)),n}function tir(t,e){let r={},n=y(e,["config"]);return n!=null&&Znr(t,n,r),r}function rir(t,e){let r={},n=y(e,["config"]);return n!=null&&eir(t,n,r),r}function nir(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["_self"]);if(i!=null){let s=dGe(i);Array.isArray(s)&&(s=s.map(o=>dae(o))),b(e,["models"],s)}return e}function iir(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["_self"]);if(i!=null){let s=dGe(i);Array.isArray(s)&&(s=s.map(o=>pae(o))),b(e,["models"],s)}return e}function sir(t){let e={},r=y(t,["maskMode"]);r!=null&&b(e,["maskMode"],r);let n=y(t,["segmentationClasses"]);n!=null&&b(e,["maskClasses"],n);let i=y(t,["maskDilation"]);return i!=null&&b(e,["dilation"],i),e}function dae(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);i!=null&&b(e,["description"],i);let s=y(t,["version"]);s!=null&&b(e,["version"],s);let o=y(t,["_self"]);o!=null&&b(e,["tunedModelInfo"],_ir(o));let a=y(t,["inputTokenLimit"]);a!=null&&b(e,["inputTokenLimit"],a);let u=y(t,["outputTokenLimit"]);u!=null&&b(e,["outputTokenLimit"],u);let c=y(t,["supportedGenerationMethods"]);return c!=null&&b(e,["supportedActions"],c),e}function pae(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);i!=null&&b(e,["description"],i);let s=y(t,["versionId"]);s!=null&&b(e,["version"],s);let o=y(t,["deployedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>Snr(p))),b(e,["endpoints"],d)}let a=y(t,["labels"]);a!=null&&b(e,["labels"],a);let u=y(t,["_self"]);u!=null&&b(e,["tunedModelInfo"],vir(u));let c=y(t,["defaultCheckpointId"]);c!=null&&b(e,["defaultCheckpointId"],c);let l=y(t,["checkpoints"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>p)),b(e,["checkpoints"],d)}return e}function oir(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],Jrr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],wnr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function air(t){let e={},r=y(t,["productImage"]);return r!=null&&b(e,["image"],rd(r)),e}function uir(t,e){let r={},n=y(t,["numberOfImages"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);let i=y(t,["baseSteps"]);e!==void 0&&i!=null&&b(e,["parameters","editConfig","baseSteps"],i);let s=y(t,["outputGcsUri"]);e!==void 0&&s!=null&&b(e,["parameters","storageUri"],s);let o=y(t,["seed"]);e!==void 0&&o!=null&&b(e,["parameters","seed"],o);let a=y(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&b(e,["parameters","safetySetting"],a);let u=y(t,["personGeneration"]);e!==void 0&&u!=null&&b(e,["parameters","personGeneration"],u);let c=y(t,["addWatermark"]);e!==void 0&&c!=null&&b(e,["parameters","addWatermark"],c);let l=y(t,["outputMimeType"]);e!==void 0&&l!=null&&b(e,["parameters","outputOptions","mimeType"],l);let d=y(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&b(e,["parameters","outputOptions","compressionQuality"],d);let p=y(t,["enhancePrompt"]);e!==void 0&&p!=null&&b(e,["parameters","enhancePrompt"],p);let f=y(t,["labels"]);return e!==void 0&&f!=null&&b(e,["labels"],f),r}function cir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["source"]);i!=null&&dir(i,r);let s=y(e,["config"]);return s!=null&&uir(s,r),r}function lir(t){let e={},r=y(t,["predictions"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>rF(i))),b(e,["generatedImages"],n)}return e}function dir(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["personImage"]);e!==void 0&&i!=null&&b(e,["instances[0]","personImage","image"],rd(i));let s=y(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>air(a))),b(e,["instances[0]","productImages"],o)}return r}function pir(t){let e={},r=y(t,["referenceImage"]);r!=null&&b(e,["referenceImage"],rd(r));let n=y(t,["referenceId"]);n!=null&&b(e,["referenceId"],n);let i=y(t,["referenceType"]);i!=null&&b(e,["referenceType"],i);let s=y(t,["maskImageConfig"]);s!=null&&b(e,["maskImageConfig"],sir(s));let o=y(t,["controlImageConfig"]);o!=null&&b(e,["controlImageConfig"],rnr(o));let a=y(t,["styleImageConfig"]);a!=null&&b(e,["styleImageConfig"],a);let u=y(t,["subjectImageConfig"]);return u!=null&&b(e,["subjectImageConfig"],u),e}function bGe(t){let e={},r=y(t,["safetyAttributes","categories"]);r!=null&&b(e,["categories"],r);let n=y(t,["safetyAttributes","scores"]);n!=null&&b(e,["scores"],n);let i=y(t,["contentType"]);return i!=null&&b(e,["contentType"],i),e}function _Ge(t){let e={},r=y(t,["safetyAttributes","categories"]);r!=null&&b(e,["categories"],r);let n=y(t,["safetyAttributes","scores"]);n!=null&&b(e,["scores"],n);let i=y(t,["contentType"]);return i!=null&&b(e,["contentType"],i),e}function fir(t){let e={};if(y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=y(t,["category"]);r!=null&&b(e,["category"],r);let n=y(t,["threshold"]);return n!=null&&b(e,["threshold"],n),e}function hir(t){let e={},r=y(t,["image"]);return r!=null&&b(e,["image"],rd(r)),e}function mir(t,e){let r={},n=y(t,["mode"]);e!==void 0&&n!=null&&b(e,["parameters","mode"],n);let i=y(t,["maxPredictions"]);e!==void 0&&i!=null&&b(e,["parameters","maxPredictions"],i);let s=y(t,["confidenceThreshold"]);e!==void 0&&s!=null&&b(e,["parameters","confidenceThreshold"],s);let o=y(t,["maskDilation"]);e!==void 0&&o!=null&&b(e,["parameters","maskDilation"],o);let a=y(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&b(e,["parameters","binaryColorThreshold"],a);let u=y(t,["labels"]);return e!==void 0&&u!=null&&b(e,["labels"],u),r}function yir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["source"]);i!=null&&Eir(i,r);let s=y(e,["config"]);return s!=null&&mir(s,r),r}function gir(t){let e={},r=y(t,["predictions"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>Vnr(i))),b(e,["generatedMasks"],n)}return e}function Eir(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["image"]);e!==void 0&&i!=null&&b(e,["instances[0]","image"],rd(i));let s=y(t,["scribbleImage"]);return e!==void 0&&s!=null&&b(e,["instances[0]","scribble"],hir(s)),r}function vGe(t){let e={},r=y(t,["voiceConfig"]);if(r!=null&&b(e,["voiceConfig"],r),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let n=y(t,["languageCode"]);return n!=null&&b(e,["languageCode"],n),e}function bir(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],Qnr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],Ynr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function SGe(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>Anr(p))),b(e,["functionDeclarations"],d)}let n=y(t,["retrieval"]);n!=null&&b(e,["retrieval"],n);let i=y(t,["googleSearch"]);i!=null&&b(e,["googleSearch"],i);let s=y(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);let o=y(t,["enterpriseWebSearch"]);o!=null&&b(e,["enterpriseWebSearch"],o);let a=y(t,["googleMaps"]);a!=null&&b(e,["googleMaps"],a);let u=y(t,["urlContext"]);u!=null&&b(e,["urlContext"],u);let c=y(t,["computerUse"]);c!=null&&b(e,["computerUse"],c);let l=y(t,["codeExecution"]);return l!=null&&b(e,["codeExecution"],l),e}function _ir(t){let e={},r=y(t,["baseModel"]);r!=null&&b(e,["baseModel"],r);let n=y(t,["createTime"]);n!=null&&b(e,["createTime"],n);let i=y(t,["updateTime"]);return i!=null&&b(e,["updateTime"],i),e}function vir(t){let e={},r=y(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&b(e,["baseModel"],r);let n=y(t,["createTime"]);n!=null&&b(e,["createTime"],n);let i=y(t,["updateTime"]);return i!=null&&b(e,["updateTime"],i),e}function Sir(t,e){let r={},n=y(t,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);e!==void 0&&i!=null&&b(e,["description"],i);let s=y(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),r}function wir(t,e){let r={},n=y(t,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);e!==void 0&&i!=null&&b(e,["description"],i);let s=y(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),r}function Air(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","name"],Mr(t,n));let i=y(e,["config"]);return i!=null&&Sir(i,r),r}function Cir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&wir(i,r),r}function Tir(t,e){let r={},n=y(t,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);let i=y(t,["includeRaiReason"]);e!==void 0&&i!=null&&b(e,["parameters","includeRaiReason"],i);let s=y(t,["outputMimeType"]);e!==void 0&&s!=null&&b(e,["parameters","outputOptions","mimeType"],s);let o=y(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&b(e,["parameters","outputOptions","compressionQuality"],o);let a=y(t,["enhanceInputImage"]);e!==void 0&&a!=null&&b(e,["parameters","upscaleConfig","enhanceInputImage"],a);let u=y(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&b(e,["parameters","upscaleConfig","imagePreservationFactor"],u);let c=y(t,["labels"]);e!==void 0&&c!=null&&b(e,["labels"],c);let l=y(t,["numberOfImages"]);e!==void 0&&l!=null&&b(e,["parameters","sampleCount"],l);let d=y(t,["mode"]);return e!==void 0&&d!=null&&b(e,["parameters","mode"],d),r}function Oir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["image"]);i!=null&&b(r,["instances[0]","image"],rd(i));let s=y(e,["upscaleFactor"]);s!=null&&b(r,["parameters","upscaleConfig","upscaleFactor"],s);let o=y(e,["config"]);return o!=null&&Tir(o,r),r}function xir(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rF(s))),b(e,["generatedImages"],i)}return e}function Iir(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["uri"],r);let n=y(t,["encodedVideo"]);n!=null&&b(e,["videoBytes"],Sm(n));let i=y(t,["encoding"]);return i!=null&&b(e,["mimeType"],i),e}function Rir(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["uri"],r);let n=y(t,["bytesBase64Encoded"]);n!=null&&b(e,["videoBytes"],Sm(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Dir(t){let e={},r=y(t,["image"]);r!=null&&b(e,["_self"],rd(r));let n=y(t,["maskMode"]);return n!=null&&b(e,["maskMode"],n),e}function kir(t){let e={},r=y(t,["image"]);r!=null&&b(e,["image"],nF(r));let n=y(t,["referenceType"]);return n!=null&&b(e,["referenceType"],n),e}function Mir(t){let e={},r=y(t,["image"]);r!=null&&b(e,["image"],rd(r));let n=y(t,["referenceType"]);return n!=null&&b(e,["referenceType"],n),e}function wGe(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["uri"],r);let n=y(t,["videoBytes"]);n!=null&&b(e,["encodedVideo"],Sm(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["encoding"],i),e}function AGe(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["gcsUri"],r);let n=y(t,["videoBytes"]);n!=null&&b(e,["bytesBase64Encoded"],Sm(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}async function JVe(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let r=t.status,n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(n);throw r>=400&&r<600?new QN({message:i,status:r}):new Error(i)}}function $ir(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,o){let a=Object.assign({},s);for(let u in o)if(Object.prototype.hasOwnProperty.call(o,u)){let c=o[u],l=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&l&&typeof l=="object"&&!Array.isArray(l)?a[u]=n(l,c):(l&&c&&typeof l!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof l}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}let i=n(r,e);t.body=JSON.stringify(i)}function CGe(t){for(let e of t)if(Vir(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Uir}function TGe(t){var e;let r=(e=t[fae])!==null&&e!==void 0?e:"";t[fae]=(r+` ${Kir}`).trimStart()}function Vir(t){return t!==null&&typeof t=="object"&&t instanceof mae}function Gir(t,e=100){return s4(this,arguments,function*(){let n,i=0;for(;i<e;){let s=yield In(t.listTools({cursor:n}));for(let o of s.tools)yield yield In(o),i++;if(!s.nextCursor)break;n=s.nextCursor}})}async function Hir(t,e,r){let n=new nae,i;r.data instanceof Blob?i=JSON.parse(await r.data.text()):i=JSON.parse(r.data),Object.assign(n,i),e(n)}function zir(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function Wir(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}async function Yir(t,e,r){let n=new rae,i;r.data instanceof Blob?i=await r.data.text():r.data instanceof ArrayBuffer?i=new TextDecoder().decode(r.data):i=r.data;let s=JSON.parse(i);if(t.isVertexAI()){let o=Urr(s);Object.assign(n,o)}else Object.assign(n,s);e(n)}function Xir(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function Zir(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}function QVe(t){var e,r,n;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let o of(r=t?.tools)!==null&&r!==void 0?r:[])if(o4(o)){i=!0;break}if(!i)return!0;let s=(n=t?.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function o4(t){return"callTool"in t&&typeof t.callTool=="function"}function esr(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(i=>o4(i)))!==null&&n!==void 0?n:!1}function tsr(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(i=>!o4(i)))!==null&&n!==void 0?n:!1}function XVe(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}function rsr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function nsr(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>dsr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function isr(t,e,r){let n={},i=y(e,["expireTime"]);r!==void 0&&i!=null&&b(r,["expireTime"],i);let s=y(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&b(r,["newSessionExpireTime"],s);let o=y(e,["uses"]);r!==void 0&&o!=null&&b(r,["uses"],o);let a=y(e,["liveConnectConstraints"]);r!==void 0&&a!=null&&b(r,["bidiGenerateContentSetup"],lsr(t,a));let u=y(e,["lockAdditionalFields"]);return r!==void 0&&u!=null&&b(r,["fieldMask"],u),n}function ssr(t,e){let r={},n=y(e,["config"]);return n!=null&&b(r,["config"],isr(t,n,r)),r}function osr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function asr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function usr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function csr(t,e){let r={},n=y(t,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],n);let i=y(t,["responseModalities"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","responseModalities"],i);let s=y(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);let o=y(t,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);let a=y(t,["topK"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topK"],a);let u=y(t,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);let c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","mediaResolution"],c);let l=y(t,["seed"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","seed"],l);let d=y(t,["speechConfig"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","speechConfig"],Pae(d));let p=y(t,["thinkingConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","thinkingConfig"],p);let f=y(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=y(t,["systemInstruction"]);e!==void 0&&h!=null&&b(e,["setup","systemInstruction"],nsr(vo(h)));let g=y(t,["tools"]);if(e!==void 0&&g!=null){let x=c4(g);Array.isArray(x)&&(x=x.map(R=>fsr(u4(R)))),b(e,["setup","tools"],x)}let _=y(t,["sessionResumption"]);e!==void 0&&_!=null&&b(e,["setup","sessionResumption"],psr(_));let S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&b(e,["setup","inputAudioTranscription"],S);let w=y(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&b(e,["setup","outputAudioTranscription"],w);let C=y(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&b(e,["setup","realtimeInputConfig"],C);let A=y(t,["contextWindowCompression"]);e!==void 0&&A!=null&&b(e,["setup","contextWindowCompression"],A);let O=y(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],O),r}function lsr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["setup","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&b(r,["config"],csr(i,r)),r}function dsr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],rsr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],osr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function psr(t){let e={},r=y(t,["handle"]);if(r!=null&&b(e,["handle"],r),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fsr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],usr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],asr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function hsr(t){let e=[];for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){let i=Object.keys(n).map(s=>`${r}.${s}`);e.push(...i)}else e.push(r)}return e.join(",")}function msr(t,e){let r=null,n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){let s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(r){let s=hsr(r);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));let u=[];s&&u.push(s),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}function ysr(t){let e;if(t){if(e=t,e.scopes){if(typeof e.scopes=="string"&&e.scopes!==FA||Array.isArray(e.scopes)&&e.scopes.indexOf(FA)<0)throw new Error(`Invalid auth scopes. Scopes must include: ${FA}`)}else return e.scopes=[FA],e;return e}else return e={scopes:[FA]},e}async function gsr(t,e){var r,n,i;let s=Nae(t.file);if(s!==void 0)return await e.request({path:`files/${s}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal});if(uGe(t.file)){let o=(i=t.file.video)===null||i===void 0?void 0:i.videoBytes;if(typeof o=="string")return o;throw new Error("Failed to download generated video, Uri or videoBytes not found.")}else if(cGe(t.file)){let o=t.file.videoBytes;if(typeof o=="string")return o;throw new Error("Failed to download video, Uri or videoBytes not found.")}else throw new Error("Unsupported file type")}function Esr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function bsr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function _sr(t,e,r){let n={};if(y(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=y(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&b(e,["displayName"],i),y(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=y(t,["epochCount"]);e!==void 0&&s!=null&&b(e,["tuningTask","hyperparameters","epochCount"],s);let o=y(t,["learningRateMultiplier"]);if(o!=null&&b(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),y(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(y(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=y(t,["batchSize"]);e!==void 0&&a!=null&&b(e,["tuningTask","hyperparameters","batchSize"],a);let u=y(t,["learningRate"]);if(e!==void 0&&u!=null&&b(e,["tuningTask","hyperparameters","learningRate"],u),y(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function vsr(t,e,r){let n={},i=y(t,["validationDataset"]);e!==void 0&&i!=null&&b(e,["supervisedTuningSpec"],Fsr(i));let s=y(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&b(e,["tunedModelDisplayName"],s);let o=y(t,["description"]);e!==void 0&&o!=null&&b(e,["description"],o);let a=y(t,["epochCount"]);e!==void 0&&a!=null&&b(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);let u=y(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&b(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);let c=y(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&b(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);let l=y(t,["adapterSize"]);if(e!==void 0&&l!=null&&b(e,["supervisedTuningSpec","hyperParameters","adapterSize"],l),y(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(y(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let d=y(t,["labels"]);return e!==void 0&&d!=null&&b(e,["labels"],d),n}function Ssr(t,e){let r={},n=y(t,["baseModel"]);n!=null&&b(r,["baseModel"],n);let i=y(t,["preTunedModel"]);i!=null&&b(r,["preTunedModel"],i);let s=y(t,["trainingDataset"]);s!=null&&b(r,["tuningTask","trainingData"],Msr(s));let o=y(t,["config"]);return o!=null&&_sr(o,r),r}function wsr(t,e){let r={},n=y(t,["baseModel"]);n!=null&&b(r,["baseModel"],n);let i=y(t,["preTunedModel"]);i!=null&&b(r,["preTunedModel"],i);let s=y(t,["trainingDataset"]);s!=null&&Psr(s,r);let o=y(t,["config"]);return o!=null&&vsr(o,r),r}function Asr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function Csr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function Tsr(t,e,r){let n={},i=y(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);let s=y(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);let o=y(t,["filter"]);return e!==void 0&&o!=null&&b(e,["_query","filter"],o),n}function Osr(t,e,r){let n={},i=y(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);let s=y(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);let o=y(t,["filter"]);return e!==void 0&&o!=null&&b(e,["_query","filter"],o),n}function xsr(t,e){let r={},n=y(t,["config"]);return n!=null&&Tsr(n,r),r}function Isr(t,e){let r={},n=y(t,["config"]);return n!=null&&Osr(n,r),r}function Rsr(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["nextPageToken"]);i!=null&&b(r,["nextPageToken"],i);let s=y(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>OGe(a))),b(r,["tuningJobs"],o)}return r}function Dsr(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["nextPageToken"]);i!=null&&b(r,["nextPageToken"],i);let s=y(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Oae(a))),b(r,["tuningJobs"],o)}return r}function ksr(t,e){let r={},n=y(t,["name"]);n!=null&&b(r,["model"],n);let i=y(t,["name"]);return i!=null&&b(r,["endpoint"],i),r}function Msr(t,e){let r={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=y(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(r,["examples","examples"],i)}return r}function Psr(t,e,r){let n={},i=y(t,["gcsUri"]);e!==void 0&&i!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],i);let s=y(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],s),y(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function OGe(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["name"]);i!=null&&b(r,["name"],i);let s=y(t,["state"]);s!=null&&b(r,["state"],aGe(s));let o=y(t,["createTime"]);o!=null&&b(r,["createTime"],o);let a=y(t,["tuningTask","startTime"]);a!=null&&b(r,["startTime"],a);let u=y(t,["tuningTask","completeTime"]);u!=null&&b(r,["endTime"],u);let c=y(t,["updateTime"]);c!=null&&b(r,["updateTime"],c);let l=y(t,["description"]);l!=null&&b(r,["description"],l);let d=y(t,["baseModel"]);d!=null&&b(r,["baseModel"],d);let p=y(t,["_self"]);return p!=null&&b(r,["tunedModel"],ksr(p)),r}function Oae(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["name"]);i!=null&&b(r,["name"],i);let s=y(t,["state"]);s!=null&&b(r,["state"],aGe(s));let o=y(t,["createTime"]);o!=null&&b(r,["createTime"],o);let a=y(t,["startTime"]);a!=null&&b(r,["startTime"],a);let u=y(t,["endTime"]);u!=null&&b(r,["endTime"],u);let c=y(t,["updateTime"]);c!=null&&b(r,["updateTime"],c);let l=y(t,["error"]);l!=null&&b(r,["error"],l);let d=y(t,["description"]);d!=null&&b(r,["description"],d);let p=y(t,["baseModel"]);p!=null&&b(r,["baseModel"],p);let f=y(t,["tunedModel"]);f!=null&&b(r,["tunedModel"],f);let h=y(t,["preTunedModel"]);h!=null&&b(r,["preTunedModel"],h);let g=y(t,["supervisedTuningSpec"]);g!=null&&b(r,["supervisedTuningSpec"],g);let _=y(t,["tuningDataStats"]);_!=null&&b(r,["tuningDataStats"],_);let S=y(t,["encryptionSpec"]);S!=null&&b(r,["encryptionSpec"],S);let w=y(t,["partnerModelTuningSpec"]);w!=null&&b(r,["partnerModelTuningSpec"],w);let C=y(t,["customBaseModel"]);C!=null&&b(r,["customBaseModel"],C);let A=y(t,["experiment"]);A!=null&&b(r,["experiment"],A);let O=y(t,["labels"]);O!=null&&b(r,["labels"],O);let x=y(t,["outputUri"]);x!=null&&b(r,["outputUri"],x);let R=y(t,["pipelineJob"]);R!=null&&b(r,["pipelineJob"],R);let M=y(t,["serviceAccount"]);M!=null&&b(r,["serviceAccount"],M);let I=y(t,["tunedModelDisplayName"]);I!=null&&b(r,["tunedModelDisplayName"],I);let F=y(t,["veoTuningSpec"]);return F!=null&&b(r,["veoTuningSpec"],F),r}function Nsr(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["name"]);i!=null&&b(r,["name"],i);let s=y(t,["metadata"]);s!=null&&b(r,["metadata"],s);let o=y(t,["done"]);o!=null&&b(r,["done"],o);let a=y(t,["error"]);return a!=null&&b(r,["error"],a),r}function Fsr(t,e){let r={},n=y(t,["gcsUri"]);n!=null&&b(r,["validationDatasetUri"],n);let i=y(t,["vertexDatasetResource"]);return i!=null&&b(r,["validationDatasetUri"],i),r}async function Bsr(t,e,r){var n,i,s;let o=0,a=0,u=new Vg(new Response),c="upload";for(o=t.size;a<o;){let d=Math.min(xGe,o-a),p=t.slice(a,a+d);a+d>=o&&(c+=", finalize");let f=0,h=RGe;for(;f<IGe&&(u=await r.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((n=u?.headers)===null||n===void 0)&&n[a4]));)f++,await kGe(h),h=h*DGe;if(a+=d,((i=u?.headers)===null||i===void 0?void 0:i[a4])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let l=await u?.json();if(((s=u?.headers)===null||s===void 0?void 0:s[a4])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function qsr(t){return{size:t.size,type:t.type}}function kGe(t){return new Promise(e=>setTimeout(e,t))}function Ug(t){var e,r,n;return(n=(r=(e=process==null?void 0:process.env)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0}function jsr(t){return $sr(Ug(t))}function $sr(t){return t===void 0?!1:t.toLowerCase()==="true"}function Ksr(){let t=Ug("GOOGLE_API_KEY"),e=Ug("GEMINI_API_KEY");return t&&e&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),t||e||void 0}var eGe,ZN,tGe,eF,Ner,Fer,Gf,HUe,zUe,WUe,vm,JUe,YUe,QUe,XUe,ZUe,eVe,tVe,rVe,nVe,iVe,sVe,oVe,LN,aVe,zoe,uVe,cVe,lVe,dVe,pVe,fVe,hVe,mVe,yVe,gVe,EVe,bVe,_Ve,vVe,SVe,wVe,AVe,CVe,TVe,OVe,xVe,IVe,RVe,DVe,kVe,MVe,PVe,NVe,FVe,n4,Vg,Kg,jN,$N,Woe,Joe,Yoe,Qoe,KN,UN,VN,Xoe,GN,HN,zN,WN,Zoe,eae,tae,JN,rae,nae,Gg,Hg,oae,aae,uae,cae,QN,lae,Pir,Nir,Fir,fae,Bir,qir,Lir,jir,WVe,hae,Kir,Uir,mae,yae,gae,Jir,Eae,Qir,bae,YVe,_ae,vae,Sae,ZVe,FA,wae,Aae,Cae,Tae,xae,xGe,IGe,RGe,DGe,a4,Iae,Lsr,XN,MGe=le(()=>{eGe=Dt(jKe(),1),ZN=require("fs"),tGe=require("node:stream");GUe();eF=Dt(require("fs/promises"),1);Gf=class{};(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(HUe||(HUe={}));(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(zUe||(zUe={}));(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(WUe||(WUe={}));(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(vm||(vm={}));(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(JUe||(JUe={}));(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(YUe||(YUe={}));(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(QUe||(QUe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(XUe||(XUe={}));(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ZUe||(ZUe={}));(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eVe||(eVe={}));(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tVe||(tVe={}));(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(rVe||(rVe={}));(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(nVe||(nVe={}));(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iVe||(iVe={}));(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(sVe||(sVe={}));(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oVe||(oVe={}));(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(LN||(LN={}));(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aVe||(aVe={}));(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zoe||(zoe={}));(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(uVe||(uVe={}));(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(cVe||(cVe={}));(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(lVe||(lVe={}));(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(dVe||(dVe={}));(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(pVe||(pVe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fVe||(fVe={}));(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hVe||(hVe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(mVe||(mVe={}));(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(yVe||(yVe={}));(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(gVe||(gVe={}));(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(EVe||(EVe={}));(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(bVe||(bVe={}));(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_Ve||(_Ve={}));(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vVe||(vVe={}));(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(SVe||(SVe={}));(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(wVe||(wVe={}));(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(AVe||(AVe={}));(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(CVe||(CVe={}));(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(TVe||(TVe={}));(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(OVe||(OVe={}));(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(xVe||(xVe={}));(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(IVe||(IVe={}));(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(RVe||(RVe={}));(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(DVe||(DVe={}));(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kVe||(kVe={}));(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(MVe||(MVe={}));(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(PVe||(PVe={}));(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(NVe||(NVe={}));(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(FVe||(FVe={}));(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(n4||(n4={}));Vg=class{constructor(e){let r={};for(let n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}},Kg=class{get text(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",l=!1,d=[];for(let p of(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(let[f,h]of Object.entries(p))f!=="text"&&f!=="thought"&&(h!==null||h!==void 0)&&d.push(f);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;l=!0,c+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?c:void 0}get data(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",l=[];for(let d of(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(let[p,f]of Object.entries(d))p!=="inlineData"&&(f!==null||f!==void 0)&&l.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(c+=atob(d.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(l=>l.functionCall).map(l=>l.functionCall).filter(l=>l!==void 0);if(c?.length!==0)return c}get executableCode(){var e,r,n,i,s,o,a,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let l=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if(l?.length!==0)return(c=l?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,r,n,i,s,o,a,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let l=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if(l?.length!==0)return(c=l?.[0])===null||c===void 0?void 0:c.output}},jN=class{},$N=class{},Woe=class{},Joe=class{},Yoe=class{},Qoe=class{},KN=class{},UN=class{},VN=class{},Xoe=class{},GN=class t{_fromAPIResponse({apiResponse:e,isVertexAI:r}){let n=new t,i,s=e;return r?i=Ker(s):i=$er(s),Object.assign(n,i),n}},HN=class{},zN=class{},WN=class{},Zoe=class{},eae=class{},tae=class{},JN=class{},rae=class{get text(){var e,r,n;let i="",s=!1,o=[];for(let a of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&o.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,r,n;let i="",s=[];for(let o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[a,u]of Object.entries(o))a!=="inlineData"&&u!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}},nae=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Gg||(Gg={}));Hg=class{constructor(e,r,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,i)}init(e,r,n){var i,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!n||Object.keys(n).length===0?o={config:{}}:typeof n=="object"?o=Object.assign({},n):o=n,o.config&&(o.config.pageToken=r.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};oae=class extends Gf{constructor(e){super(),this.apiClient=e,this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)},this.list=async(r={})=>new Hg(Gg.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}createInlinedGenerateContentRequest(e){let r=jVe(this.apiClient,e),n=r._url,i=rt("{model}:batchGenerateContent",n),a=r.batch.inputConfig.requests,u=a.requests,c=[];for(let l of u){let d=Object.assign({},l);if(d.systemInstruction){let p=d.systemInstruction;delete d.systemInstruction;let f=d.request;f.systemInstruction=p,d.request=f}c.push(d)}return a.requests=c,delete r.config,delete r._url,delete r._query,{path:i,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){let n=r?Object.assign({},r):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),n.dest===void 0){let s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?n.dest=`${s.slice(0,-6)}/dest`:n.dest=`${s}_dest_${i}`;else if(o)n.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=gtr(this.apiClient,e);return a=rt("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>sae(l))}else{let c=jVe(this.apiClient,e);return a=rt("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>BN(l))}}async createEmbeddingsInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=btr(this.apiClient,e);return s=rt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>BN(u))}}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Dtr(this.apiClient,e);return a=rt("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>sae(l))}else{let c=Rtr(this.apiClient,e);return a=rt("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>BN(l))}}async cancel(e){var r,n,i,s;let o="",a={};if(this.apiClient.isVertexAI()){let u=ptr(this.apiClient,e);o=rt("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{let u=dtr(this.apiClient,e);o=rt("batches/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Ltr(e);return a=rt("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=$tr(l),p=new JN;return Object.assign(p,d),p})}else{let c=qtr(e);return a=rt("batches",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=jtr(l),p=new JN;return Object.assign(p,d),p})}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=vtr(this.apiClient,e);return a=rt("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>wtr(l))}else{let c=_tr(this.apiClient,e);return a=rt("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>Str(l))}}};aae=class extends Gf{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Hg(Gg.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Jtr(this.apiClient,e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=Wtr(this.apiClient,e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=nrr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=rrr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Qtr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Ztr(l),p=new zN;return Object.assign(p,d),p})}else{let c=Ytr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Xtr(l),p=new zN;return Object.assign(p,d),p})}}async update(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Err(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=grr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=crr(e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=drr(l),p=new WN;return Object.assign(p,d),p})}else{let c=urr(e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=lrr(l),p=new WN;return Object.assign(p,d),p})}}};uae=class{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new cae(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},cae=class{constructor(e,r,n,i={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),_rr(s)}async sendMessage(e){var r;await this.sendPromise;let n=vo(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,o,a;let u=await i,c=(o=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,l=u.automaticFunctionCallingHistory,d=this.getHistory(!0).length,p=[];l!=null&&(p=(a=l.slice(d))!==null&&a!==void 0?a:[]);let f=c?[c]:[];this.recordHistory(n,f,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var r;await this.sendPromise;let n=vo(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let s=await i;return this.processStreamResponse(s,n)}getHistory(e=!1){let r=e?UVe(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,i;return s4(this,arguments,function*(){var o,a,u,c;let l=[];try{for(var d=!0,p=BA(e),f;f=yield In(p.next()),o=f.done,!o;d=!0){c=f.value,d=!1;let h=c;if(brr(h)){let g=(i=(n=h.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content;g!==void 0&&l.push(g)}yield yield In(h)}}catch(h){a={error:h}}finally{try{!d&&!o&&(u=p.return)&&(yield In(u.call(p)))}finally{if(a)throw a.error}}this.recordHistory(r,l)})}recordHistory(e,r,n){let i=[];r.length>0&&r.every(s=>s.role!==void 0)?i=r:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...UVe(n)):this.history.push(e),this.history.push(...i)}};QN=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};lae=class extends Gf{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Hg(Gg.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Orr(e);return s=rt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=xrr(u),l=new Zoe;return Object.assign(l,c),l})}}async createInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=vrr(e);return s=rt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=Srr(u),l=new eae;return Object.assign(l,c),l})}}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Crr(e);return s=rt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=wrr(e);return s=rt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=Arr(u),l=new tae;return Object.assign(l,c),l})}}};Pir="Content-Type",Nir="X-Server-Timeout",Fir="User-Agent",fae="x-goog-api-client",Bir="1.27.0",qir=`google-genai-sdk/${Bir}`,Lir="v1beta1",jir="v1beta",WVe=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,hae=class{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let i={};this.clientOptions.vertexai?(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Lir,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:jir,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){let i=[this.getRequestUrlInternal(r)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,r,n);if(e.queryParams)for(let[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,r){let n=JSON.parse(JSON.stringify(e));for(let[i,s]of Object.entries(r))typeof s=="object"?n[i]=Object.assign(Object.assign({},n[i]),s):s!==void 0&&(n[i]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,r,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n,i){if(r&&r.timeout||i){let s=new AbortController,o=s.signal;if(r.timeout&&r?.timeout>0){let a=setTimeout(()=>s.abort(),r.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return r&&r.extraBody!==null&&$ir(e,r.extraBody),e.headers=await this.getHeadersInternal(r,n),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await JVe(i),new Vg(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await JVe(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var r;return s4(this,arguments,function*(){let i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){let{done:a,value:u}=yield In(i.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let c=s.decode(u,{stream:!0});try{let d=JSON.parse(c);if("error"in d){let p=JSON.parse(JSON.stringify(d.error)),f=p.status,h=p.code,g=`got status: ${f}. ${JSON.stringify(d)}`;if(h>=400&&h<600)throw new QN({message:g,status:h})}}catch(d){if(d.name==="ApiError")throw d}o+=c;let l=o.match(WVe);for(;l;){let d=l[1];try{let p=new Response(d,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield In(new Vg(p)),o=o.slice(l[0].length),l=o.match(WVe)}catch(p){throw new Error(`exception parsing stream chunk ${d}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){let e={},r=qir+" "+this.clientOptions.userAgentExtra;return e[Fir]=r,e[fae]=r,e[Pir]="application/json",e}async getHeadersInternal(e,r){let n=new Headers;if(e&&e.headers){for(let[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(Nir,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,r),n}async uploadFile(e,r){var n;let i={};r!=null&&(i.mimeType=r.mimeType,i.name=r.name,i.displayName=r.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);let a=(n=r?.mimeType)!==null&&n!==void 0?n:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;let u=await this.fetchUploadUrl(i,r);return s.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let i={};r?.httpOptions?i=r.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};let s={file:e},o=await this.request({path:rt("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!o?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let a=(n=o?.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}};Kir="mcp_used/unknown",Uir=!1;mae=class t{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new t(e,r)}async initialize(){var e,r,n,i;if(this.mcpTools.length>0)return;let s={},o=[];for(let l of this.mcpClients)try{for(var a=!0,u=(r=void 0,BA(Gir(l))),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let d=i;o.push(d);let p=d.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=l}}catch(d){r={error:d}}finally{try{!a&&!e&&(n=u.return)&&await n.call(u)}finally{if(r)throw r.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),rtr(this.mcpTools,this.config)}async callTool(e){await this.initialize();let r=[];for(let n of e)if(n.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[n.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let o=await i.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return r}};yae=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Wir(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},l=new Promise(C=>{c=C}),d=e.callbacks,p=function(){c({})},f=this.apiClient,h={onopen:p,onmessage:C=>{Hir(f,d.onmessage,C)},onerror:(r=d?.onerror)!==null&&r!==void 0?r:function(C){},onclose:(n=d?.onclose)!==null&&n!==void 0?n:function(C){}},g=this.webSocketFactory.create(u,zir(o),h);g.connect(),await l;let w={setup:{model:Mr(this.apiClient,e.model)}};return g.send(JSON.stringify(w)),new gae(g,this.apiClient)}},gae=class{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let r=jrr(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let r=Lrr(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){let r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(n4.PLAY)}pause(){this.sendPlaybackControl(n4.PAUSE)}stop(){this.sendPlaybackControl(n4.STOP)}resetContext(){this.sendPlaybackControl(n4.RESET_CONTEXT)}close(){this.conn.close()}};Jir="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";Eae=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new yae(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),l,d=this.apiClient.getHeaders();e.config&&e.config.tools&&CGe(e.config.tools)&&TGe(d);let p=Zir(d);if(this.apiClient.isVertexAI())l=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,l);else{let I=this.apiClient.getApiKey(),F="BidiGenerateContent",B="key";I?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",B="access_token"),l=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${B}=${I}`}let f=()=>{},h=new Promise(I=>{f=I}),g=e.callbacks,_=function(){var I;(I=g?.onopen)===null||I===void 0||I.call(g),f({})},S=this.apiClient,w={onopen:_,onmessage:I=>{Yir(S,g.onmessage,I)},onerror:(r=g?.onerror)!==null&&r!==void 0?r:function(I){},onclose:(n=g?.onclose)!==null&&n!==void 0?n:function(I){}},C=this.webSocketFactory.create(l,Xir(p),w);C.connect(),await h;let A=Mr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){let I=this.apiClient.getProject(),F=this.apiClient.getLocation();A=`projects/${I}/locations/${F}/`+A}let O={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[LN.AUDIO]}:e.config.responseModalities=[LN.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let x=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],R=[];for(let I of x)if(this.isCallableTool(I)){let F=I;R.push(await F.tool())}else R.push(I);R.length>0&&(e.config.tools=R);let M={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=qrr(this.apiClient,M):O=Brr(this.apiClient,M),delete O.config,C.send(JSON.stringify(O)),new bae(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},Qir={turnComplete:!0},bae=class{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=jc(r.turns),e.isVertexAI()||(n=n.map(i=>tF(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(let s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Jir)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Qir),e);let r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:Krr(e)}:r={realtimeInput:$rr(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}};YVe=10;_ae=class extends Gf{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,i,s,o,a;let u=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!esr(r)||QVe(r.config))return await this.generateContentInternal(u);if(tsr(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,l,d=jc(u.contents),p=(s=(i=(n=u.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:YVe,f=0;for(;f<p&&(c=await this.generateContentInternal(u),!(!c.functionCalls||c.functionCalls.length===0));){let h=c.candidates[0].content,g=[];for(let _ of(a=(o=r.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(o4(_)){let w=await _.callTool(c.functionCalls);g.push(...w)}f++,l={role:"user",parts:g},u.contents=jc(u.contents),u.contents.push(h),u.contents.push(l),XVe(u.config)&&(d.push(h),d.push(l))}return XVe(u.config)&&(c.automaticFunctionCallingHistory=d),c},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),QVe(r.config)){let n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var i;let s,o=[];if(n?.generatedImages)for(let u of n.generatedImages)u&&u?.safetyAttributes&&((i=u?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=u?.safetyAttributes:o.push(u);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:n.sdkHttpResponse},a}),this.list=async r=>{var n;let o={config:Object.assign(Object.assign({},{queryBase:!0}),r?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((n=o.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Hg(Gg.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async r=>{let n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));let i={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(i)},this.generateVideos=async r=>{var n,i,s,o,a,u;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=r.video)===null||n===void 0)&&n.uri&&(!((i=r.video)===null||i===void 0)&&i.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((o=(s=r.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((u=(a=r.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,i;let s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;let o=await Promise.all(s.map(async u=>o4(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&CGe(e.config.tools)){let u=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{},c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),TGe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var r,n,i;let s=new Map;for(let o of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(o4(o)){let a=o,u=await a.tool();for(let c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var r,n,i;let s=(i=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:YVe,o=!1,a=0,u=await this.initAfcToolsMap(e);return(function(c,l,d){var p,f;return s4(this,arguments,function*(){for(var h,g,_,S;a<s;){o&&(a++,o=!1);let O=yield In(c.processParamsMaybeAddMcpUsage(d)),x=yield In(c.generateContentStreamInternal(O)),R=[],M=[];try{for(var w=!0,C=(g=void 0,BA(x)),A;A=yield In(C.next()),h=A.done,!h;w=!0){S=A.value,w=!1;let I=S;if(yield yield In(I),I.candidates&&(!((p=I.candidates[0])===null||p===void 0)&&p.content)){M.push(I.candidates[0].content);for(let F of(f=I.candidates[0].content.parts)!==null&&f!==void 0?f:[])if(a<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(l.has(F.functionCall.name)){let B=yield In(l.get(F.functionCall.name).callTool([F.functionCall]));R.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${l.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(I){g={error:I}}finally{try{!w&&!h&&(_=C.return)&&(yield In(_.call(C)))}finally{if(g)throw g.error}}if(R.length>0){o=!0;let I=new Kg;I.candidates=[{content:{role:"user",parts:R}}],yield yield In(I);let F=[];F.push(...M),F.push({role:"user",parts:R});let B=jc(d.contents).concat(F);d.contents=B}else break}})})(this,u,e)}async generateContentInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=GVe(this.apiClient,e);return a=rt("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=zVe(l),p=new Kg;return Object.assign(p,d),p})}else{let c=VVe(this.apiClient,e);return a=rt("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=HVe(l),p=new Kg;return Object.assign(p,d),p})}}async generateContentStreamInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=GVe(this.apiClient,e);return a=rt("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),o.then(function(d){return s4(this,arguments,function*(){var p,f,h,g;try{for(var _=!0,S=BA(d),w;w=yield In(S.next()),p=w.done,!p;_=!0){g=w.value,_=!1;let C=g,A=zVe(yield In(C.json()));A.sdkHttpResponse={headers:C.headers};let O=new Kg;Object.assign(O,A),yield yield In(O)}}catch(C){f={error:C}}finally{try{!_&&!p&&(h=S.return)&&(yield In(h.call(S)))}finally{if(f)throw f.error}}})})}else{let c=VVe(this.apiClient,e);return a=rt("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(d){return s4(this,arguments,function*(){var p,f,h,g;try{for(var _=!0,S=BA(d),w;w=yield In(S.next()),p=w.done,!p;_=!0){g=w.value,_=!1;let C=g,A=HVe(yield In(C.json()));A.sdkHttpResponse={headers:C.headers};let O=new Kg;Object.assign(O,A),yield yield In(O)}}catch(C){f={error:C}}finally{try{!_&&!p&&(h=S.return)&&(yield In(h.call(S)))}finally{if(f)throw f.error}}})})}}async embedContent(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=bnr(this.apiClient,e);return a=rt("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=vnr(l),p=new jN;return Object.assign(p,d),p})}else{let c=Enr(this.apiClient,e);return a=rt("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=_nr(l),p=new jN;return Object.assign(p,d),p})}}async generateImagesInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Rnr(this.apiClient,e);return a=rt("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=knr(l),p=new $N;return Object.assign(p,d),p})}else{let c=Inr(this.apiClient,e);return a=rt("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Dnr(l),p=new $N;return Object.assign(p,d),p})}}async editImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=hnr(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=mnr(u),l=new Woe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Oir(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=xir(u),l=new Joe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=cir(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=lir(u),l=new Yoe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=yir(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=gir(u),l=new Qoe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Jnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>pae(l))}else{let c=Wnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>dae(l))}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=rir(this.apiClient,e);return a=rt("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=iir(l),p=new KN;return Object.assign(p,d),p})}else{let c=tir(this.apiClient,e);return a=rt("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=nir(l),p=new KN;return Object.assign(p,d),p})}}async update(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Cir(this.apiClient,e);return a=rt("{model}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>pae(l))}else{let c=Air(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>dae(l))}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=lnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=pnr(l),p=new UN;return Object.assign(p,d),p})}else{let c=cnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=dnr(l),p=new UN;return Object.assign(p,d),p})}}async countTokens(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=onr(this.apiClient,e);return a=rt("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=unr(l),p=new VN;return Object.assign(p,d),p})}else{let c=snr(this.apiClient,e);return a=rt("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=anr(l),p=new VN;return Object.assign(p,d),p})}}async computeTokens(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Xrr(this.apiClient,e);return s=rt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=Zrr(u),l=new Xoe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=qnr(this.apiClient,e);return a=rt("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>{let d=Fnr(l),p=new GN;return Object.assign(p,d),p})}else{let c=Bnr(this.apiClient,e);return a=rt("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>{let d=Nnr(l),p=new GN;return Object.assign(p,d),p})}}};vae=class extends Gf{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=r.name.split("/operations/")[0],s;n&&"httpOptions"in n&&(s=n.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=r.name.split("/operations/")[0],s;n&&"httpOptions"in n&&(s=n.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Wer(e);return a=rt("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o}else{let c=zer(e);return a=rt("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o}}async fetchPredictVideosOperationInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=jer(e);return s=rt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};Sae=class extends Gf{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=ssr(this.apiClient,e);s=rt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;let u=msr(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),i.then(c=>c)}}};ZVe="x-goog-api-key",FA="https://www.googleapis.com/auth/cloud-platform",wae=class{constructor(e){if(e.apiKey!==void 0){this.apiKey=e.apiKey;return}let r=ysr(e.googleAuthOptions);this.googleAuth=new eGe.GoogleAuth(r)}async addAuthHeaders(e,r){if(this.apiKey!==void 0){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(e);return}return this.addGoogleAuthHeaders(e,r)}addKeyHeader(e){if(e.get(ZVe)===null){if(this.apiKey===void 0)throw new Error("Trying to set API key header but apiKey is not set");e.append(ZVe,this.apiKey)}}async addGoogleAuthHeaders(e,r){if(this.googleAuth===void 0)throw new Error("Trying to set google-auth headers but googleAuth is unset");let n=await this.googleAuth.getRequestHeaders(r);for(let[i,s]of n)e.get(i)===null&&e.append(i,s)}};Aae=class{async download(e,r){if(e.downloadPath){let n=await gsr(e,r);if(n instanceof Vg){let i=(0,ZN.createWriteStream)(e.downloadPath);tGe.Readable.fromWeb(n.responseInternal.body).pipe(i)}else(0,ZN.writeFile)(e.downloadPath,n,{encoding:"base64"},i=>{if(i)throw new Error(`Failed to write file to ${e.downloadPath}: ${i}`)})}}};Cae=class{create(e,r,n){return new Tae(e,r,n)}},Tae=class{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new Goe.default(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};xae=class extends Gf{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new Hg(Gg.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{var n;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){let i={tunedModelName:r.baseModel};!((n=r.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(i.checkpointId=r.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},r),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{let i=Object.assign({},r);return await this.tuneInternal(i)}else{let i=Object.assign({},r),s=await this.tuneMldevInternal(i),o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:zoe.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Csr(e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>Oae(l))}else{let c=Asr(e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>OGe(l))}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Isr(e);return a=rt("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Dsr(l),p=new HN;return Object.assign(p,d),p})}else{let c=xsr(e);return a=rt("tunedModels",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Rsr(l),p=new HN;return Object.assign(p,d),p})}}async cancel(e){var r,n,i,s;let o="",a={};if(this.apiClient.isVertexAI()){let u=bsr(e);o=rt("{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{let u=Esr(e);o=rt("{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=wsr(e);return s=rt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>Oae(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ssr(e);return s=rt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>Nsr(u))}}},xGe=1024*1024*8,IGe=3,RGe=1e3,DGe=2,a4="x-goog-upload-status";Iae=class{async stat(e){let r={size:0,type:void 0};if(typeof e=="string"){let n=await eF.stat(e);return r.size=n.size,r.type=this.inferMimeType(e),r}else return await qsr(e)}async upload(e,r,n){return typeof e=="string"?await this.uploadFileFromPath(e,r,n):Bsr(e,r,n)}inferMimeType(e){let r=e.slice(e.lastIndexOf(".")+1);return{aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"}[r.toLowerCase()]}async uploadFileFromPath(e,r,n){var i,s,o;let a=0,u=0,c=new Vg(new Response),l="upload",d;try{if(d=await eF.open(e,"r"),!d)throw new Error("Failed to open file");for(a=(await d.stat()).size;u<a;){let f=Math.min(xGe,a-u);u+f>=a&&(l+=", finalize");let h=new Uint8Array(f),{bytesRead:g}=await d.read(h,0,f,u);if(g!==f)throw new Error(`Failed to read ${f} bytes from file at offset ${u}. bytes actually read: ${g}`);let _=new Blob([h]),S=0,w=RGe;for(;S<IGe&&(c=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:r,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(u),"Content-Length":String(g)}}}),!(!((i=c?.headers)===null||i===void 0)&&i[a4]));)S++,await kGe(w),w=w*DGe;if(u+=g,((s=c?.headers)===null||s===void 0?void 0:s[a4])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let p=await c?.json();if(((o=c?.headers)===null||o===void 0?void 0:o[a4])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}finally{d&&await d.close()}}};Lsr="gl-node/",XN=class{constructor(e){var r,n,i,s,o,a;if((e.project||e.location)&&e.apiKey)throw new Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=(n=(r=e.vertexai)!==null&&r!==void 0?r:jsr("GOOGLE_GENAI_USE_VERTEXAI"))!==null&&n!==void 0?n:!1;let u=Ksr(),c=Ug("GOOGLE_CLOUD_PROJECT"),l=Ug("GOOGLE_CLOUD_LOCATION");this.apiKey=(i=e.apiKey)!==null&&i!==void 0?i:u,this.project=(s=e.project)!==null&&s!==void 0?s:c,this.location=(o=e.location)!==null&&o!==void 0?o:l,e.vertexai&&(!((a=e.googleAuthOptions)===null||a===void 0)&&a.credentials&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(c||l)&&e.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(e.project||e.location)&&u?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(c||l)&&u&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0));let d=qer(e.httpOptions,e.vertexai,Ug("GOOGLE_VERTEX_BASE_URL"),Ug("GOOGLE_GEMINI_BASE_URL"));d&&(e.httpOptions?e.httpOptions.baseUrl=d:e.httpOptions={baseUrl:d}),this.apiVersion=e.apiVersion;let p=new wae({apiKey:this.apiKey,googleAuthOptions:e.googleAuthOptions});this.apiClient=new hae({auth:p,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Lsr+process.version,uploader:new Iae,downloader:new Aae}),this.models=new _ae(this.apiClient),this.live=new Eae(this.apiClient,p,new Cae),this.batches=new oae(this.apiClient),this.chats=new uae(this.models,this.apiClient),this.caches=new aae(this.apiClient),this.files=new lae(this.apiClient),this.operations=new vae(this.apiClient),this.authTokens=new Sae(this.apiClient),this.tunings=new xae(this.apiClient)}}});var iF,PGe=le(()=>{"use strict";iF=class{buildPromptForTranslateDocument(e){return`
      You are a translation assistant. ALL OUTPUT MUST BE IN ${e}. 
      If you ever include any text that is not in ${e}, the response will be considered INVALID.

      Task:
      Analyze the document provided. Ignore all images, photos, logos, diagrams, and visual artifacts. 
      Extract only the legible text, translate it into ${e}, and produce a JSON object with the following properties only:

      - "translatedText": a single string containing the FULL translated document text in ${e}.
      - "structuredTranslatedText": an object mapping page keys to HTML strings for each page, e.g. { "page1": "...", "page2": "..." }.
        Each page string must be valid HTML (semantic tags) and include only the translated text (no original-language text), with inline Tailwind CSS classes allowed.

      REQUIRED FORMAT (must be raw JSON only):
      - Respond with raw JSON only. Do NOT add any surrounding text, Markdown, or code fences.
      - The JSON must parse with JSON.parse() without error.
      - Property names must be exactly: translatedText, structuredTranslatedText.

      IMPORTANT BEHAVIORAL RULES:
      1. ALL textual content (including inside structuredTranslatedText HTML) MUST BE IN ${e}. Do NOT include any original-language fragments or English.
      2. The value of translatedText MUST EXACTLY MATCH the textual content inside the structuredTranslatedText HTML (ignoring HTML tags). They must contain the same translation.
      3. Use semantic HTML elements (p, h1-h6, ul/li, etc.). You may include inline Tailwind classes on those tags.
      4. Do NOT include any additional properties, metadata, comments, or explanatory text.
      5. If you cannot translate or detect the language, return this JSON with an "error" property explaining the issue, and no other text: { "error": "explanation in ${e}" }.
      6. If the translation would be identical to the input (e.g., input already in ${e}), still return the JSON object with translatedText in ${e}.
      
      7. **STRICTLY IGNORE IMAGES AND GRAPHICS**: 
         - Do NOT attempt to translate text inside complex logos, stamps, or low-quality images.
         - Do NOT write descriptions of images (e.g., do NOT write "[Logo]", "[Signature]", or "[Image of house]"). 
         - Do NOT use HTML <img> tags. 
         - Focus ONLY on the main body text, headers, and tables.

      PLACEHOLDER EXAMPLE (do NOT return this example; output must be real JSON as specified):
      {
        "translatedText": "<TRANSLATED_TEXT_IN_${e}>",
        "structuredTranslatedText": {
          "page1": "<p class="text-base">&lt;TRANSLATED_TEXT_FOR_PAGE_1_IN_${e}&gt;</p>"
        }
      }

      Remember:
      - Raw JSON only. No markdown, no code fences, no explanation.
      - All content must be in ${e}.
      - IGNORE IMAGES.
      `}buildPromptForSummarizeDocument(e,r){return`
You are a multilingual document analysis assistant.

Your task:
1. Carefully read the following document written in ${r}.
2. Extract structured information and produce a concise, factual JSON summary.
3. **All textual fields (title, sender, summary, action plan, action plans, etc.) must be written fully in ${r}.**

---

### DOCUMENT CONTENT
${e}

---

### OUTPUT FORMAT
Return only **raw JSON** (no markdown, no code fences, no explanations).
The JSON must include these exact keys and meanings:

{
  "title": "string \u2014 short descriptive title of the document (in ${r})",
  "receivedDate": "string \u2014 date when the document was received (ISO 8601 format, e.g. ${new Date().toISOString()})",
  "sender": "string \u2014 name of the person, organization, or institution that sent or authored the document (in ${r})",
  "summary": "string \u2014 comprehensive and factual summary of the document\u2019s full content (in ${r})",

  "actionPlan": [
    {
      "title": "string \u2014 key point, recommendation, or insight derived from the document (in ${r})",
      "reason": "string \u2014 explanation or context for why this key point or recommendation is important (in ${r})"
    }
  ],

  "actionPlans": [
    {
      "title": "string \u2014 specific actionable task the user should perform based on this document (in ${r})",
      "due_date": "string \u2014 ISO 8601 date by which this task should be completed",
      "completed": false,
      "location": "string \u2014 where or in what context this action should take place (in ${r})"
    }
  ]
}

---

### DIFFERENCE BETWEEN actionPlan AND actionPlans
- **actionPlan** = Key insights or recommendations *summarized from* the document. Think of them as what the document is *telling or advising* the reader.
  - Example: \u201CRenew your ID before expiry.\u201D / \u201CKeep record of transaction history.\u201D
- **actionPlans** = Specific actionable tasks the *user needs to do* as a result of the document.
  - Example: \u201CVisit the municipal office to renew ID before 2025-12-31.\u201D / \u201CSend follow-up email to finance department.\u201D

---

### CRITICAL INSTRUCTIONS
- All text must be written fully in ${r}.
- If the document is already in ${r}, keep it in that same language.
- Avoid English or mixed-language responses.
- Ensure the JSON is valid and can be parsed directly with \`JSON.parse()\`.
- Do NOT include markdown, explanations, or text outside the JSON.
- If any information is missing, infer it if possible, or leave the field as an empty string ("").

---

### EXAMPLE (placeholders only \u2014 do not output in English):
{
  "title": "<TITOLO_DEL_DOCUMENTO>",
  "receivedDate": "${new Date().toISOString()}",
  "sender": "<MITTENTE>",
  "summary": "<RIASSUNTO_COMPLETO_IN_${r.toUpperCase()}>",
  "actionPlan": [
    { "title": "<PUNTO_CHIAVE>", "reason": "<SPIEGAZIONE>" }
  ],
  "actionPlans": [
    { "title": "<AZIONE_DA_FARE>", "due_date": "${new Date().toISOString()}", "completed": false, "location": "<LUOGO>" }
  ]
}
`}buildChatBotPrompt(e,r,n){let i=!!n,s=`
You are an expert, highly knowledgeable assistant helping the user understand and discuss a document${i?" and an attached file":""}.

Your goal is to provide clear, accurate, comprehensive, and genuinely helpful responses that enable the user to fully understand the topic and make informed decisions.

Context:
- Translated document text: ${e.translatedText||"No translated text available"}
${i?"- The user has attached a specific file for you to analyze.":""}

Guidelines:
- Base your answers strictly on the translated text, the conversation history${i?", and the content of the attached file":""}.
- Provide thorough and well-structured explanations when needed, not just brief summaries.
- Be factual, precise, and technically accurate.
- Anticipate follow-up questions and proactively clarify complex points.
- When appropriate, include links to official documentation, specifications, or trusted technical resources to guide the user further.
- Do not hallucinate information or fabricate sources.

Language Rule:
- Always respond in the same language as the user's current prompt (${r}), even if the document or attached file is written in a different language.
`.trim(),o=[];e.chats.forEach(c=>{o.push({role:"user",parts:[{text:c.userPrompt}]}),c.response&&o.push({role:"model",parts:[{text:c.response}]})});let a=[];n&&a.push({inlineData:{mimeType:n.mimetype,data:n.buffer.toString("base64")}});let u=r;return i&&(u=`${r}

[System Note: User has attached a file. Analyze it in context. Respond in the language of this prompt.]`),a.push({text:u}),o.push({role:"user",parts:a}),{systemInstruction:s,contents:o}}}});var LMr,FGe,NGe,Fae,zg,BGe=le(()=>{"use strict";LMr=Dt(mLe());MGe();cP();FGe=Dt(Ym());Sy();lw();PGe();NGe=[(0,FGe.injectable)()];zg=class{constructor(){this.geminiAi=void 0;this.userPrompt=void 0;this.model="gemini-2.5-flash";this.geminiAi=new XN({apiKey:_s.GEMINI_API_KEY}),this.userPrompt=new iF}async translateDocument(e,r){if(!e||!e.buffer)throw new Error("Valid file is required for translation");let i=[{text:this.userPrompt.buildPromptForTranslateDocument(r)},{inlineData:{mimeType:e.mimetype,data:e.buffer.toString("base64")}}];try{let s=await this.geminiAi.models.generateContent({model:this.model,contents:i,config:{responseMimeType:"application/json"}});if(!s)throw Ge.error("Gemini returned empty response",{response:s}),new Error("Gemini returned empty response");let o=s.text;if(!o)throw new Error("No text returned from Gemini");return this.parseResponse(o)}catch(s){throw Ge.error("\u274C Gemini document translation failed",{message:s.message,name:s.name,stack:s.stack,cause:s.cause,isNetworkError:s.message?.includes("fetch failed"),hint:s.message?.includes("fetch failed")?"Likely a network or API connection issue (check endpoint and key).":"Internal Gemini processing error."}),new Error(s||"Gemini document translation failed")}}async summarizeDocument(e,r){let n=this.userPrompt.buildPromptForSummarizeDocument(e,r);try{let i=[{text:n}],o=(await this.geminiAi.models.generateContent({model:this.model,contents:i,config:{responseMimeType:"application/json"}})).text;if(!o)throw new Error("No response received from Gemini AI");return this.parseResponse(o)}catch(i){throw Ge.error("\u274C Gemini document summarization failed",{message:i.message,name:i.name,stack:i.stack,cause:i.cause,isNetworkError:i.message?.includes("fetch failed"),hint:i.message?.includes("fetch failed")?"Likely a network or API connection issue (check endpoint and key).":"Internal Gemini processing error."}),new Error(i||"Gemini summarization translation failed")}}parseResponse(e){try{let r=e.trim(),n=r.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(n&&n[1])r=n[1].trim();else{let s=r.indexOf("{"),o=r.lastIndexOf("}");s!==-1&&o!==-1&&o>s&&(r=r.substring(s,o+1))}let i=JSON.parse(r);return{translatedText:i.translatedText??"",structuredTranslatedText:i.structuredTranslatedText??{},title:i.title??"",sender:i.sender??"",receivedDate:i.receivedDate??new Date().toISOString(),summary:i.summary??"",actionPlan:i.actionPlan??[],actionPlans:Array.isArray(i.actionPlans)?i.actionPlans.map(s=>({id:Sg(),title:s.title??"",dueDate:s.due_date??new Date().toISOString(),completed:s.completed??!1,location:s.location??""})):[]}}catch(r){throw Ge.error("Failed to parse Gemini response",{originalResponse:e,error:r}),r}}async*chatBotStream(e,r,n){try{let{systemInstruction:i,contents:s}=this.userPrompt.buildChatBotPrompt(e,r,n),o=await this.geminiAi.models.generateContentStream({model:this.model,contents:s,config:{systemInstruction:i}});for await(let a of o){let u=a.text;u&&(yield u)}}catch(i){throw Ge.error("\u274C Gemini chat bot failed",{message:i.message,name:i.name,stack:i.stack,cause:i.cause,isNetworkError:i.message?.includes("fetch failed"),hint:i.message?.includes("fetch failed")?"Likely a network or API connection issue (check endpoint and key).":"Internal Gemini processing error."}),new Error(i||"Gemini chatbot failed")}}};Fae=d1(null),zg=f1(Fae,0,"GeminiAIService",NGe,zg),p1(Fae,1,zg)});var qGe=m(()=>{"use strict";var qA=Dt(Ym());yBe();OBe();kBe();BGe();qA.container.register("IUserService",{useClass:vg});qA.container.register("IDocumentService",{useClass:wg});qA.container.register("IGeminiAIService",{useClass:zg});qA.container.register("IChatBotService",{useClass:Ag})});var Zo={};aa(Zo,{__addDisposableResource:()=>cHe,__assign:()=>sF,__asyncDelegator:()=>tHe,__asyncGenerator:()=>eHe,__asyncValues:()=>rHe,__await:()=>d4,__awaiter:()=>WGe,__classPrivateFieldGet:()=>oHe,__classPrivateFieldIn:()=>uHe,__classPrivateFieldSet:()=>aHe,__createBinding:()=>aF,__decorate:()=>$Ge,__disposeResources:()=>lHe,__esDecorate:()=>UGe,__exportStar:()=>YGe,__extends:()=>LGe,__generator:()=>JGe,__importDefault:()=>sHe,__importStar:()=>iHe,__makeTemplateObject:()=>nHe,__metadata:()=>zGe,__param:()=>KGe,__propKey:()=>GGe,__read:()=>Lae,__rest:()=>jGe,__rewriteRelativeImportExtension:()=>dHe,__runInitializers:()=>VGe,__setFunctionName:()=>HGe,__spread:()=>QGe,__spreadArray:()=>ZGe,__spreadArrays:()=>XGe,__values:()=>oF,default:()=>Gsr});function LGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Bae(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function jGe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function $Ge(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function KGe(t,e){return function(r,n){e(r,n,t)}}function UGe(t,e,r,n,i,s){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,l=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]=g==="access"?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(S||null))};var _=(0,r[f])(a==="accessor"?{get:l.get,set:l.set}:l[u],h);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(d=o(_.get))&&(l.get=d),(d=o(_.set))&&(l.set=d),(d=o(_.init))&&i.unshift(d)}else(d=o(_))&&(a==="field"?i.unshift(d):l[u]=d)}c&&Object.defineProperty(c,n.name,l),p=!0}function VGe(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function GGe(t){return typeof t=="symbol"?t:"".concat(t)}function HGe(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function zGe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function WGe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function JGe(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function YGe(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&aF(e,t,r)}function oF(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lae(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function QGe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Lae(arguments[e]));return t}function XGe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function ZGe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function d4(t){return this instanceof d4?(this.v=t,this):new d4(t)}function eHe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(g){return new Promise(function(_,S){s.push([f,g,_,S])>1||u(f,g)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(g){p(s[0][3],g)}}function c(f){f.value instanceof d4?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function tHe(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:d4(t[i](o)),done:!1}:s?s(o):o}:s}}function rHe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof oF=="function"?oF(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function nHe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function iHe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=qae(t),n=0;n<r.length;n++)r[n]!=="default"&&aF(e,t,r[n]);return Usr(e,t),e}function sHe(t){return t&&t.__esModule?t:{default:t}}function oHe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function aHe(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function uHe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function cHe(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function lHe(t){function e(s){t.error=t.hasError?new Vsr(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function dHe(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}var Bae,sF,aF,Usr,qae,Vsr,Gsr,ea=le(()=>{Bae=function(t,e){return Bae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Bae(t,e)};sF=function(){return sF=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},sF.apply(this,arguments)};aF=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});Usr=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},qae=function(t){return qae=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},qae(t)};Vsr=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};Gsr={__extends:LGe,__assign:sF,__rest:jGe,__decorate:$Ge,__param:KGe,__esDecorate:UGe,__runInitializers:VGe,__propKey:GGe,__setFunctionName:HGe,__metadata:zGe,__awaiter:WGe,__generator:JGe,__createBinding:aF,__exportStar:YGe,__values:oF,__read:Lae,__spread:QGe,__spreadArrays:XGe,__spreadArray:ZGe,__await:d4,__asyncGenerator:eHe,__asyncDelegator:tHe,__asyncValues:rHe,__makeTemplateObject:nHe,__importStar:iHe,__importDefault:sHe,__classPrivateFieldGet:oHe,__classPrivateFieldSet:aHe,__classPrivateFieldIn:uHe,__addDisposableResource:cHe,__disposeResources:lHe,__rewriteRelativeImportExtension:dHe}});var Uae=m(uF=>{"use strict";Object.defineProperty(uF,"__esModule",{value:!0});uF.AsyncFifoQueue=void 0;var jae=class{constructor(e){this.value=void 0,this.next=null,this.value=e}},$ae=class{constructor(){this.length=0,this.head=null,this.tail=null}push(e){let r=new jae(e);return this.length?this.tail.next=r:this.head=r,this.tail=r,this.length+=1,r}shift(){if(this.length){let e=this.head;return this.head=this.head.next,this.length-=1,e}else return null}},Kae=class{constructor(e=!1){this.ignoreErrors=e,this.queue=new $ae,this.pending=new Set,this.newPromise()}add(e){this.pending.add(e),e.then(r=>{this.pending.delete(e),this.queue.length===0&&this.resolvePromise(r),this.queue.push(r)}).catch(r=>{this.ignoreErrors&&this.queue.push(void 0),this.pending.delete(e),this.rejectPromise(r)})}async waitAll(){await Promise.all(this.pending)}numTotal(){return this.pending.size+this.queue.length}numPending(){return this.pending.size}numQueued(){return this.queue.length}resolvePromise(e){this.resolve(e),this.newPromise()}rejectPromise(e){this.reject(e),this.newPromise()}newPromise(){this.nextPromise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}async wait(){return this.nextPromise}async fetch(){var e;if(!(this.pending.size===0&&this.queue.length===0)){for(;this.queue.length===0;)try{await this.wait()}catch(r){this.ignoreErrors||console.error("Unexpected Error in AsyncFifoQueue",r)}return(e=this.queue.shift())===null||e===void 0?void 0:e.value}}};uF.AsyncFifoQueue=Kae});var Vae=m(cF=>{"use strict";Object.defineProperty(cF,"__esModule",{value:!0});cF.Backoffs=void 0;var p4=class{static normalize(e){if(Number.isFinite(e))return{type:"fixed",delay:e};if(e)return e}static calculate(e,r,n,i,s){if(e)return Hsr(e,s)(r,e.type,n,i)}};cF.Backoffs=p4;p4.builtinStrategies={fixed:function(t,e=0){return function(){if(e>0){let r=t*(1-e);return Math.floor(Math.random()*t*e+r)}else return t}},exponential:function(t,e=0){return function(r){if(e>0){let n=Math.round(Math.pow(2,r-1)*t),i=n*(1-e);return Math.floor(Math.random()*n*e+i)}else return Math.round(Math.pow(2,r-1)*t)}}};function Hsr(t,e){if(t.type in p4.builtinStrategies)return p4.builtinStrategies[t.type](t.delay,t.jitter);if(e)return e;throw new Error(`Unknown backoff strategy ${t.type}.
      If a custom backoff strategy is used, specify it when the queue is created.`)}});var fHe=m(lF=>{"use strict";Object.defineProperty(lF,"__esModule",{value:!0});lF.ChildCommand=void 0;var pHe;(function(t){t[t.Init=0]="Init",t[t.Start=1]="Start",t[t.Stop=2]="Stop",t[t.GetChildrenValuesResponse=3]="GetChildrenValuesResponse",t[t.GetIgnoredChildrenFailuresResponse=4]="GetIgnoredChildrenFailuresResponse",t[t.MoveToWaitingChildrenResponse=5]="MoveToWaitingChildrenResponse"})(pHe||(lF.ChildCommand=pHe={}))});var mHe=m(dF=>{"use strict";Object.defineProperty(dF,"__esModule",{value:!0});dF.ErrorCode=void 0;var hHe;(function(t){t[t.JobNotExist=-1]="JobNotExist",t[t.JobLockNotExist=-2]="JobLockNotExist",t[t.JobNotInState=-3]="JobNotInState",t[t.JobPendingChildren=-4]="JobPendingChildren",t[t.ParentJobNotExist=-5]="ParentJobNotExist",t[t.JobLockMismatch=-6]="JobLockMismatch",t[t.ParentJobCannotBeReplaced=-7]="ParentJobCannotBeReplaced",t[t.JobBelongsToJobScheduler=-8]="JobBelongsToJobScheduler",t[t.JobHasFailedChildren=-9]="JobHasFailedChildren",t[t.SchedulerJobIdCollision=-10]="SchedulerJobIdCollision",t[t.SchedulerJobSlotsBusy=-11]="SchedulerJobSlotsBusy"})(hHe||(dF.ErrorCode=hHe={}))});var gHe=m(pF=>{"use strict";Object.defineProperty(pF,"__esModule",{value:!0});pF.ParentCommand=void 0;var yHe;(function(t){t[t.Completed=0]="Completed",t[t.Error=1]="Error",t[t.Failed=2]="Failed",t[t.InitFailed=3]="InitFailed",t[t.InitCompleted=4]="InitCompleted",t[t.Log=5]="Log",t[t.MoveToDelayed=6]="MoveToDelayed",t[t.MoveToWait=7]="MoveToWait",t[t.Progress=8]="Progress",t[t.Update=9]="Update",t[t.GetChildrenValues=10]="GetChildrenValues",t[t.GetIgnoredChildrenFailures=11]="GetIgnoredChildrenFailures",t[t.MoveToWaitingChildren=12]="MoveToWaitingChildren"})(yHe||(pF.ParentCommand=yHe={}))});var bHe=m(fF=>{"use strict";Object.defineProperty(fF,"__esModule",{value:!0});fF.MetricsTime=void 0;var EHe;(function(t){t[t.ONE_MINUTE=1]="ONE_MINUTE",t[t.FIVE_MINUTES=5]="FIVE_MINUTES",t[t.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",t[t.THIRTY_MINUTES=30]="THIRTY_MINUTES",t[t.ONE_HOUR=60]="ONE_HOUR",t[t.ONE_WEEK=10080]="ONE_WEEK",t[t.TWO_WEEKS=20160]="TWO_WEEKS",t[t.ONE_MONTH=80640]="ONE_MONTH"})(EHe||(fF.MetricsTime=EHe={}))});var SHe=m(f4=>{"use strict";Object.defineProperty(f4,"__esModule",{value:!0});f4.SpanKind=f4.TelemetryAttributes=void 0;var _He;(function(t){t.QueueName="bullmq.queue.name",t.QueueOperation="bullmq.queue.operation",t.BulkCount="bullmq.job.bulk.count",t.BulkNames="bullmq.job.bulk.names",t.JobName="bullmq.job.name",t.JobId="bullmq.job.id",t.JobKey="bullmq.job.key",t.JobIds="bullmq.job.ids",t.JobAttemptsMade="bullmq.job.attempts.made",t.DeduplicationKey="bullmq.job.deduplication.key",t.JobOptions="bullmq.job.options",t.JobProgress="bullmq.job.progress",t.QueueDrainDelay="bullmq.queue.drain.delay",t.QueueGrace="bullmq.queue.grace",t.QueueCleanLimit="bullmq.queue.clean.limit",t.QueueRateLimit="bullmq.queue.rate.limit",t.JobType="bullmq.job.type",t.QueueOptions="bullmq.queue.options",t.QueueEventMaxLength="bullmq.queue.event.max.length",t.WorkerOptions="bullmq.worker.options",t.WorkerName="bullmq.worker.name",t.WorkerId="bullmq.worker.id",t.WorkerRateLimit="bullmq.worker.rate.limit",t.WorkerDoNotWaitActive="bullmq.worker.do.not.wait.active",t.WorkerForceClose="bullmq.worker.force.close",t.WorkerStalledJobs="bullmq.worker.stalled.jobs",t.WorkerFailedJobs="bullmq.worker.failed.jobs",t.WorkerJobsToExtendLocks="bullmq.worker.jobs.to.extend.locks",t.JobFinishedTimestamp="bullmq.job.finished.timestamp",t.JobProcessedTimestamp="bullmq.job.processed.timestamp",t.JobResult="bullmq.job.result",t.JobFailedReason="bullmq.job.failed.reason",t.FlowName="bullmq.flow.name",t.JobSchedulerId="bullmq.job.scheduler.id"})(_He||(f4.TelemetryAttributes=_He={}));var vHe;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(vHe||(f4.SpanKind=vHe={}))});var Tu=m(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});var LA=(ea(),Jt(Zo));LA.__exportStar(fHe(),Wg);LA.__exportStar(mHe(),Wg);LA.__exportStar(gHe(),Wg);LA.__exportStar(bHe(),Wg);LA.__exportStar(SHe(),Wg)});var zae=m(hF=>{"use strict";Object.defineProperty(hF,"__esModule",{value:!0});hF.Child=void 0;var zsr=require("child_process"),Wsr=require("net"),Jsr=require("worker_threads"),Gae=Tu(),Ysr=require("events"),Qsr={1:"Uncaught Fatal Exception",2:"Unused",3:"Internal JavaScript Parse Error",4:"Internal JavaScript Evaluation Failure",5:"Fatal Error",6:"Non-function Internal Exception Handler",7:"Internal Exception Handler Run-Time Failure",8:"Unused",9:"Invalid Argument",10:"Internal JavaScript Run-Time Failure",12:"Invalid Debug Argument",13:"Unfinished Top-Level Await"},Hae=class extends Ysr.EventEmitter{constructor(e,r,n={useWorkerThreads:!1}){super(),this.mainFile=e,this.processFile=r,this.opts=n,this._exitCode=null,this._signalCode=null,this._killed=!1}get pid(){if(this.childProcess)return this.childProcess.pid;if(this.worker)return Math.abs(this.worker.threadId);throw new Error("No child process or worker thread")}get exitCode(){return this._exitCode}get signalCode(){return this._signalCode}get killed(){return this.childProcess?this.childProcess.killed:this._killed}async init(){let e=await eor(process.execArgv),r;this.opts.useWorkerThreads?this.worker=r=new Jsr.Worker(this.mainFile,Object.assign({execArgv:e,stdin:!0,stdout:!0,stderr:!0},this.opts.workerThreadsOptions?this.opts.workerThreadsOptions:{})):this.childProcess=r=(0,zsr.fork)(this.mainFile,[],Object.assign({execArgv:e,stdio:"pipe"},this.opts.workerForkOptions?this.opts.workerForkOptions:{})),r.on("exit",(n,i)=>{this._exitCode=n,i=typeof i>"u"?null:i,this._signalCode=i,this._killed=!0,this.emit("exit",n,i),r.removeAllListeners(),this.removeAllListeners()}),r.on("error",(...n)=>this.emit("error",...n)),r.on("message",(...n)=>this.emit("message",...n)),r.on("close",(...n)=>this.emit("close",...n)),r.stdout.pipe(process.stdout),r.stderr.pipe(process.stderr),await this.initChild()}async send(e){return new Promise((r,n)=>{this.childProcess?this.childProcess.send(e,i=>{i?n(i):r()}):this.worker?r(this.worker.postMessage(e)):r()})}killProcess(e="SIGKILL"){this.childProcess?this.childProcess.kill(e):this.worker&&this.worker.terminate()}async kill(e="SIGKILL",r){if(this.hasProcessExited())return;let n=Xsr(this.childProcess||this.worker);if(this.killProcess(e),r!==void 0&&(r===0||isFinite(r))){let i=setTimeout(()=>{this.hasProcessExited()||this.killProcess("SIGKILL")},r);await n,clearTimeout(i)}await n}async initChild(){let e=new Promise((r,n)=>{let i=o=>{if(o.cmd===Gae.ParentCommand.InitCompleted)r();else if(o.cmd===Gae.ParentCommand.InitFailed){let a=new Error;a.stack=o.err.stack,a.message=o.err.message,n(a)}this.off("message",i),this.off("close",s)},s=(o,a)=>{o>128&&(o-=128);let u=Qsr[o]||`Unknown exit code ${o}`;n(new Error(`Error initializing child: ${u} and signal ${a}`)),this.off("message",i),this.off("close",s)};this.on("message",i),this.on("close",s)});await this.send({cmd:Gae.ChildCommand.Init,value:this.processFile}),await e}hasProcessExited(){return!!(this.exitCode!==null||this.signalCode)}};hF.Child=Hae;function Xsr(t){return new Promise(e=>{t.once("exit",()=>e())})}var Zsr=async()=>new Promise(t=>{let e=(0,Wsr.createServer)();e.listen(0,()=>{let{port:r}=e.address();e.close(()=>t(r))})}),eor=async t=>{let e=[],r=[];for(let n=0;n<t.length;n++){let i=t[n];if(i.indexOf("--inspect")===-1)e.push(i);else{let s=i.split("=")[0],o=await Zsr();r.push(`${s}=${o}`)}}return e.concat(r)}});var Yae=m((mF,Jae)=>{"use strict";Object.defineProperty(mF,"__esModule",{value:!0});mF.ChildPool=void 0;var wHe=require("path"),tor=zae(),ror=3e4,nor=()=>typeof require=="function"&&typeof Jae=="object"&&typeof Jae.exports=="object",Wae=class{constructor({mainFile:e=nor()?wHe.join(process.cwd(),"dist/cjs/classes/main.js"):wHe.join(process.cwd(),"dist/esm/classes/main.js"),useWorkerThreads:r,workerForkOptions:n,workerThreadsOptions:i}){this.retained={},this.free={},this.opts={mainFile:e,useWorkerThreads:r,workerForkOptions:n,workerThreadsOptions:i}}async retain(e){let r=this.getFree(e).pop();if(r)return this.retained[r.pid]=r,r;r=new tor.Child(this.opts.mainFile,e,{useWorkerThreads:this.opts.useWorkerThreads,workerForkOptions:this.opts.workerForkOptions,workerThreadsOptions:this.opts.workerThreadsOptions}),r.on("exit",this.remove.bind(this,r));try{if(await r.init(),r.exitCode!==null||r.signalCode!==null)throw new Error("Child exited before it could be retained");return this.retained[r.pid]=r,r}catch(n){throw console.error(n),this.release(r),n}}release(e){delete this.retained[e.pid],this.getFree(e.processFile).push(e)}remove(e){delete this.retained[e.pid];let r=this.getFree(e.processFile),n=r.indexOf(e);n>-1&&r.splice(n,1)}async kill(e,r="SIGKILL"){return this.remove(e),e.kill(r,ror)}async clean(){let e=Object.values(this.retained).concat(this.getAllFree());this.retained={},this.free={},await Promise.all(e.map(r=>this.kill(r,"SIGTERM")))}getFree(e){return this.free[e]=this.free[e]||[]}getAllFree(){return Object.values(this.free).reduce((e,r)=>e.concat(r),[])}};mF.ChildPool=Wae});var jA=m((uPr,AHe)=>{"use strict";var ior="2.0.0",sor=Number.MAX_SAFE_INTEGER||9007199254740991,oor=16,aor=250,uor=["major","premajor","minor","preminor","patch","prepatch","prerelease"];AHe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:oor,MAX_SAFE_BUILD_LENGTH:aor,MAX_SAFE_INTEGER:sor,RELEASE_TYPES:uor,SEMVER_SPEC_VERSION:ior,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var $A=m((cPr,CHe)=>{"use strict";var cor=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};CHe.exports=cor});var h4=m((sp,THe)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Qae,MAX_SAFE_BUILD_LENGTH:lor,MAX_LENGTH:dor}=jA(),por=$A();sp=THe.exports={};var hor=sp.re=[],mor=sp.safeRe=[],Xe=sp.src=[],yor=sp.safeSrc=[],Ze=sp.t={},gor=0,Xae="[a-zA-Z0-9-]",Eor=[["\\s",1],["\\d",dor],[Xae,lor]],bor=t=>{for(let[e,r]of Eor)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Bt=(t,e,r)=>{let n=bor(e),i=gor++;por(t,i,e),Ze[t]=i,Xe[i]=e,yor[i]=n,hor[i]=new RegExp(e,r?"g":void 0),mor[i]=new RegExp(n,r?"g":void 0)};Bt("NUMERICIDENTIFIER","0|[1-9]\\d*");Bt("NUMERICIDENTIFIERLOOSE","\\d+");Bt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Xae}*`);Bt("MAINVERSION",`(${Xe[Ze.NUMERICIDENTIFIER]})\\.(${Xe[Ze.NUMERICIDENTIFIER]})\\.(${Xe[Ze.NUMERICIDENTIFIER]})`);Bt("MAINVERSIONLOOSE",`(${Xe[Ze.NUMERICIDENTIFIERLOOSE]})\\.(${Xe[Ze.NUMERICIDENTIFIERLOOSE]})\\.(${Xe[Ze.NUMERICIDENTIFIERLOOSE]})`);Bt("PRERELEASEIDENTIFIER",`(?:${Xe[Ze.NONNUMERICIDENTIFIER]}|${Xe[Ze.NUMERICIDENTIFIER]})`);Bt("PRERELEASEIDENTIFIERLOOSE",`(?:${Xe[Ze.NONNUMERICIDENTIFIER]}|${Xe[Ze.NUMERICIDENTIFIERLOOSE]})`);Bt("PRERELEASE",`(?:-(${Xe[Ze.PRERELEASEIDENTIFIER]}(?:\\.${Xe[Ze.PRERELEASEIDENTIFIER]})*))`);Bt("PRERELEASELOOSE",`(?:-?(${Xe[Ze.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Xe[Ze.PRERELEASEIDENTIFIERLOOSE]})*))`);Bt("BUILDIDENTIFIER",`${Xae}+`);Bt("BUILD",`(?:\\+(${Xe[Ze.BUILDIDENTIFIER]}(?:\\.${Xe[Ze.BUILDIDENTIFIER]})*))`);Bt("FULLPLAIN",`v?${Xe[Ze.MAINVERSION]}${Xe[Ze.PRERELEASE]}?${Xe[Ze.BUILD]}?`);Bt("FULL",`^${Xe[Ze.FULLPLAIN]}$`);Bt("LOOSEPLAIN",`[v=\\s]*${Xe[Ze.MAINVERSIONLOOSE]}${Xe[Ze.PRERELEASELOOSE]}?${Xe[Ze.BUILD]}?`);Bt("LOOSE",`^${Xe[Ze.LOOSEPLAIN]}$`);Bt("GTLT","((?:<|>)?=?)");Bt("XRANGEIDENTIFIERLOOSE",`${Xe[Ze.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Bt("XRANGEIDENTIFIER",`${Xe[Ze.NUMERICIDENTIFIER]}|x|X|\\*`);Bt("XRANGEPLAIN",`[v=\\s]*(${Xe[Ze.XRANGEIDENTIFIER]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIER]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIER]})(?:${Xe[Ze.PRERELEASE]})?${Xe[Ze.BUILD]}?)?)?`);Bt("XRANGEPLAINLOOSE",`[v=\\s]*(${Xe[Ze.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIERLOOSE]})(?:${Xe[Ze.PRERELEASELOOSE]})?${Xe[Ze.BUILD]}?)?)?`);Bt("XRANGE",`^${Xe[Ze.GTLT]}\\s*${Xe[Ze.XRANGEPLAIN]}$`);Bt("XRANGELOOSE",`^${Xe[Ze.GTLT]}\\s*${Xe[Ze.XRANGEPLAINLOOSE]}$`);Bt("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Qae}})(?:\\.(\\d{1,${Qae}}))?(?:\\.(\\d{1,${Qae}}))?`);Bt("COERCE",`${Xe[Ze.COERCEPLAIN]}(?:$|[^\\d])`);Bt("COERCEFULL",Xe[Ze.COERCEPLAIN]+`(?:${Xe[Ze.PRERELEASE]})?(?:${Xe[Ze.BUILD]})?(?:$|[^\\d])`);Bt("COERCERTL",Xe[Ze.COERCE],!0);Bt("COERCERTLFULL",Xe[Ze.COERCEFULL],!0);Bt("LONETILDE","(?:~>?)");Bt("TILDETRIM",`(\\s*)${Xe[Ze.LONETILDE]}\\s+`,!0);sp.tildeTrimReplace="$1~";Bt("TILDE",`^${Xe[Ze.LONETILDE]}${Xe[Ze.XRANGEPLAIN]}$`);Bt("TILDELOOSE",`^${Xe[Ze.LONETILDE]}${Xe[Ze.XRANGEPLAINLOOSE]}$`);Bt("LONECARET","(?:\\^)");Bt("CARETTRIM",`(\\s*)${Xe[Ze.LONECARET]}\\s+`,!0);sp.caretTrimReplace="$1^";Bt("CARET",`^${Xe[Ze.LONECARET]}${Xe[Ze.XRANGEPLAIN]}$`);Bt("CARETLOOSE",`^${Xe[Ze.LONECARET]}${Xe[Ze.XRANGEPLAINLOOSE]}$`);Bt("COMPARATORLOOSE",`^${Xe[Ze.GTLT]}\\s*(${Xe[Ze.LOOSEPLAIN]})$|^$`);Bt("COMPARATOR",`^${Xe[Ze.GTLT]}\\s*(${Xe[Ze.FULLPLAIN]})$|^$`);Bt("COMPARATORTRIM",`(\\s*)${Xe[Ze.GTLT]}\\s*(${Xe[Ze.LOOSEPLAIN]}|${Xe[Ze.XRANGEPLAIN]})`,!0);sp.comparatorTrimReplace="$1$2$3";Bt("HYPHENRANGE",`^\\s*(${Xe[Ze.XRANGEPLAIN]})\\s+-\\s+(${Xe[Ze.XRANGEPLAIN]})\\s*$`);Bt("HYPHENRANGELOOSE",`^\\s*(${Xe[Ze.XRANGEPLAINLOOSE]})\\s+-\\s+(${Xe[Ze.XRANGEPLAINLOOSE]})\\s*$`);Bt("STAR","(<|>)?=?\\s*\\*");Bt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Bt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var yF=m((lPr,OHe)=>{"use strict";var _or=Object.freeze({loose:!0}),vor=Object.freeze({}),Sor=t=>t?typeof t!="object"?_or:t:vor;OHe.exports=Sor});var Zae=m((dPr,RHe)=>{"use strict";var xHe=/^[0-9]+$/,IHe=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=xHe.test(t),n=xHe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},wor=(t,e)=>IHe(e,t);RHe.exports={compareIdentifiers:IHe,rcompareIdentifiers:wor}});var So=m((pPr,kHe)=>{"use strict";var gF=$A(),{MAX_LENGTH:DHe,MAX_SAFE_INTEGER:EF}=jA(),{safeRe:bF,t:_F}=h4(),Aor=yF(),{compareIdentifiers:eue}=Zae(),tue=class t{constructor(e,r){if(r=Aor(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>DHe)throw new TypeError(`version is longer than ${DHe} characters`);gF("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?bF[_F.LOOSE]:bF[_F.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>EF||this.major<0)throw new TypeError("Invalid major version");if(this.minor>EF||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>EF||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<EF)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(gF("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(gF("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return eue(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(gF("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return eue(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?bF[_F.PRERELEASELOOSE]:bF[_F.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),eue(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};kHe.exports=tue});var Jg=m((fPr,PHe)=>{"use strict";var MHe=So(),Cor=(t,e,r=!1)=>{if(t instanceof MHe)return t;try{return new MHe(t,e)}catch(n){if(!r)return null;throw n}};PHe.exports=Cor});var FHe=m((hPr,NHe)=>{"use strict";var Tor=Jg(),Oor=(t,e)=>{let r=Tor(t,e);return r?r.version:null};NHe.exports=Oor});var qHe=m((mPr,BHe)=>{"use strict";var xor=Jg(),Ior=(t,e)=>{let r=xor(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};BHe.exports=Ior});var $He=m((yPr,jHe)=>{"use strict";var LHe=So(),Ror=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new LHe(t instanceof LHe?t.version:t,r).inc(e,n,i).version}catch{return null}};jHe.exports=Ror});var VHe=m((gPr,UHe)=>{"use strict";var KHe=Jg(),Dor=(t,e)=>{let r=KHe(t,null,!0),n=KHe(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};UHe.exports=Dor});var HHe=m((EPr,GHe)=>{"use strict";var kor=So(),Mor=(t,e)=>new kor(t,e).major;GHe.exports=Mor});var WHe=m((bPr,zHe)=>{"use strict";var Por=So(),Nor=(t,e)=>new Por(t,e).minor;zHe.exports=Nor});var YHe=m((_Pr,JHe)=>{"use strict";var For=So(),Bor=(t,e)=>new For(t,e).patch;JHe.exports=Bor});var XHe=m((vPr,QHe)=>{"use strict";var qor=Jg(),Lor=(t,e)=>{let r=qor(t,e);return r&&r.prerelease.length?r.prerelease:null};QHe.exports=Lor});var $c=m((SPr,eze)=>{"use strict";var ZHe=So(),jor=(t,e,r)=>new ZHe(t,r).compare(new ZHe(e,r));eze.exports=jor});var rze=m((wPr,tze)=>{"use strict";var $or=$c(),Kor=(t,e,r)=>$or(e,t,r);tze.exports=Kor});var ize=m((APr,nze)=>{"use strict";var Uor=$c(),Vor=(t,e)=>Uor(t,e,!0);nze.exports=Vor});var vF=m((CPr,oze)=>{"use strict";var sze=So(),Gor=(t,e,r)=>{let n=new sze(t,r),i=new sze(e,r);return n.compare(i)||n.compareBuild(i)};oze.exports=Gor});var uze=m((TPr,aze)=>{"use strict";var Hor=vF(),zor=(t,e)=>t.sort((r,n)=>Hor(r,n,e));aze.exports=zor});var lze=m((OPr,cze)=>{"use strict";var Wor=vF(),Jor=(t,e)=>t.sort((r,n)=>Wor(n,r,e));cze.exports=Jor});var KA=m((xPr,dze)=>{"use strict";var Yor=$c(),Qor=(t,e,r)=>Yor(t,e,r)>0;dze.exports=Qor});var SF=m((IPr,pze)=>{"use strict";var Xor=$c(),Zor=(t,e,r)=>Xor(t,e,r)<0;pze.exports=Zor});var rue=m((RPr,fze)=>{"use strict";var ear=$c(),tar=(t,e,r)=>ear(t,e,r)===0;fze.exports=tar});var nue=m((DPr,hze)=>{"use strict";var rar=$c(),nar=(t,e,r)=>rar(t,e,r)!==0;hze.exports=nar});var wF=m((kPr,mze)=>{"use strict";var iar=$c(),sar=(t,e,r)=>iar(t,e,r)>=0;mze.exports=sar});var AF=m((MPr,yze)=>{"use strict";var oar=$c(),aar=(t,e,r)=>oar(t,e,r)<=0;yze.exports=aar});var iue=m((PPr,gze)=>{"use strict";var uar=rue(),car=nue(),lar=KA(),dar=wF(),par=SF(),far=AF(),har=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return uar(t,r,n);case"!=":return car(t,r,n);case">":return lar(t,r,n);case">=":return dar(t,r,n);case"<":return par(t,r,n);case"<=":return far(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};gze.exports=har});var bze=m((NPr,Eze)=>{"use strict";var mar=So(),yar=Jg(),{safeRe:CF,t:TF}=h4(),gar=(t,e)=>{if(t instanceof mar)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?CF[TF.COERCEFULL]:CF[TF.COERCE]);else{let u=e.includePrerelease?CF[TF.COERCERTLFULL]:CF[TF.COERCERTL],c;for(;(c=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return yar(`${n}.${i}.${s}${o}${a}`,e)};Eze.exports=gar});var vze=m((FPr,_ze)=>{"use strict";var sue=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};_ze.exports=sue});var Kc=m((BPr,Cze)=>{"use strict";var Ear=/\s+/g,oue=class t{constructor(e,r){if(r=_ar(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof aue)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(Ear," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!wze(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&xar(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Tar)|(this.options.loose&&Oar))+":"+e,i=Sze.get(n);if(i)return i;let s=this.options.loose,o=s?ta[wo.HYPHENRANGELOOSE]:ta[wo.HYPHENRANGE];e=e.replace(o,qar(this.options.includePrerelease)),Rn("hyphen replace",e),e=e.replace(ta[wo.COMPARATORTRIM],war),Rn("comparator trim",e),e=e.replace(ta[wo.TILDETRIM],Aar),Rn("tilde trim",e),e=e.replace(ta[wo.CARETTRIM],Car),Rn("caret trim",e);let a=e.split(" ").map(d=>Iar(d,this.options)).join(" ").split(/\s+/).map(d=>Bar(d,this.options));s&&(a=a.filter(d=>(Rn("loose invalid filter",d,this.options),!!d.match(ta[wo.COMPARATORLOOSE])))),Rn("range list",a);let u=new Map,c=a.map(d=>new aue(d,this.options));for(let d of c){if(wze(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return Sze.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>Aze(n,r)&&e.set.some(i=>Aze(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Sar(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Lar(this.set[r],e,this.options))return!0;return!1}};Cze.exports=oue;var bar=vze(),Sze=new bar,_ar=yF(),aue=UA(),Rn=$A(),Sar=So(),{safeRe:ta,t:wo,comparatorTrimReplace:war,tildeTrimReplace:Aar,caretTrimReplace:Car}=h4(),{FLAG_INCLUDE_PRERELEASE:Tar,FLAG_LOOSE:Oar}=jA(),wze=t=>t.value==="<0.0.0-0",xar=t=>t.value==="",Aze=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},Iar=(t,e)=>(t=t.replace(ta[wo.BUILD],""),Rn("comp",t,e),t=kar(t,e),Rn("caret",t),t=Rar(t,e),Rn("tildes",t),t=Par(t,e),Rn("xrange",t),t=Far(t,e),Rn("stars",t),t),ra=t=>!t||t.toLowerCase()==="x"||t==="*",Rar=(t,e)=>t.trim().split(/\s+/).map(r=>Dar(r,e)).join(" "),Dar=(t,e)=>{let r=e.loose?ta[wo.TILDELOOSE]:ta[wo.TILDE];return t.replace(r,(n,i,s,o,a)=>{Rn("tilde",t,n,i,s,o,a);let u;return ra(i)?u="":ra(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:ra(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Rn("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Rn("tilde return",u),u})},kar=(t,e)=>t.trim().split(/\s+/).map(r=>Mar(r,e)).join(" "),Mar=(t,e)=>{Rn("caret",t,e);let r=e.loose?ta[wo.CARETLOOSE]:ta[wo.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,u)=>{Rn("caret",t,i,s,o,a,u);let c;return ra(s)?c="":ra(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:ra(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(Rn("replaceCaret pr",u),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(Rn("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Rn("caret return",c),c})},Par=(t,e)=>(Rn("replaceXRanges",t,e),t.split(/\s+/).map(r=>Nar(r,e)).join(" ")),Nar=(t,e)=>{t=t.trim();let r=e.loose?ta[wo.XRANGELOOSE]:ta[wo.XRANGE];return t.replace(r,(n,i,s,o,a,u)=>{Rn("xRange",t,n,i,s,o,a,u);let c=ra(s),l=c||ra(o),d=l||ra(a),p=d;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):l?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),Rn("xRange return",n),n})},Far=(t,e)=>(Rn("replaceStars",t,e),t.trim().replace(ta[wo.STAR],"")),Bar=(t,e)=>(Rn("replaceGTE0",t,e),t.trim().replace(ta[e.includePrerelease?wo.GTE0PRE:wo.GTE0],"")),qar=t=>(e,r,n,i,s,o,a,u,c,l,d,p)=>(ra(n)?r="":ra(i)?r=`>=${n}.0.0${t?"-0":""}`:ra(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,ra(c)?u="":ra(l)?u=`<${+c+1}.0.0-0`:ra(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:t?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),Lar=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Rn(t[n].semver),t[n].semver!==aue.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var UA=m((qPr,Dze)=>{"use strict";var VA=Symbol("SemVer ANY"),lue=class t{static get ANY(){return VA}constructor(e,r){if(r=Tze(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),cue("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===VA?this.value="":this.value=this.operator+this.semver.version,cue("comp",this)}parse(e){let r=this.options.loose?Oze[xze.COMPARATORLOOSE]:Oze[xze.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Ize(n[2],this.options.loose):this.semver=VA}toString(){return this.value}test(e){if(cue("Comparator.test",e,this.options.loose),this.semver===VA||e===VA)return!0;if(typeof e=="string")try{e=new Ize(e,this.options)}catch{return!1}return uue(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Rze(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Rze(this.value,r).test(e.semver):(r=Tze(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||uue(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||uue(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Dze.exports=lue;var Tze=yF(),{safeRe:Oze,t:xze}=h4(),uue=iue(),cue=$A(),Ize=So(),Rze=Kc()});var GA=m((LPr,kze)=>{"use strict";var jar=Kc(),$ar=(t,e,r)=>{try{e=new jar(e,r)}catch{return!1}return e.test(t)};kze.exports=$ar});var Pze=m((jPr,Mze)=>{"use strict";var Kar=Kc(),Uar=(t,e)=>new Kar(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Mze.exports=Uar});var Fze=m(($Pr,Nze)=>{"use strict";var Var=So(),Gar=Kc(),Har=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Gar(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Var(n,r))}),n};Nze.exports=Har});var qze=m((KPr,Bze)=>{"use strict";var zar=So(),War=Kc(),Jar=(t,e,r)=>{let n=null,i=null,s=null;try{s=new War(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new zar(n,r))}),n};Bze.exports=Jar});var $ze=m((UPr,jze)=>{"use strict";var due=So(),Yar=Kc(),Lze=KA(),Qar=(t,e)=>{t=new Yar(t,e);let r=new due("0.0.0");if(t.test(r)||(r=new due("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new due(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Lze(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Lze(r,s))&&(r=s)}return r&&t.test(r)?r:null};jze.exports=Qar});var Uze=m((VPr,Kze)=>{"use strict";var Xar=Kc(),Zar=(t,e)=>{try{return new Xar(t,e).range||"*"}catch{return null}};Kze.exports=Zar});var OF=m((GPr,zze)=>{"use strict";var eur=So(),Hze=UA(),{ANY:tur}=Hze,rur=Kc(),nur=GA(),Vze=KA(),Gze=SF(),iur=AF(),sur=wF(),our=(t,e,r,n)=>{t=new eur(t,n),e=new rur(e,n);let i,s,o,a,u;switch(r){case">":i=Vze,s=iur,o=Gze,a=">",u=">=";break;case"<":i=Gze,s=sur,o=Vze,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(nur(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===tur&&(f=new Hze(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&s(t,p.semver))return!1;if(p.operator===u&&o(t,p.semver))return!1}return!0};zze.exports=our});var Jze=m((HPr,Wze)=>{"use strict";var aur=OF(),uur=(t,e,r)=>aur(t,e,">",r);Wze.exports=uur});var Qze=m((zPr,Yze)=>{"use strict";var cur=OF(),lur=(t,e,r)=>cur(t,e,"<",r);Yze.exports=lur});var eWe=m((WPr,Zze)=>{"use strict";var Xze=Kc(),dur=(t,e,r)=>(t=new Xze(t,r),e=new Xze(e,r),t.intersects(e,r));Zze.exports=dur});var rWe=m((JPr,tWe)=>{"use strict";var pur=GA(),fur=$c();tWe.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((l,d)=>fur(l,d,r));for(let l of o)pur(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var uWe=m((YPr,aWe)=>{"use strict";var nWe=Kc(),fue=UA(),{ANY:pue}=fue,HA=GA(),hue=$c(),hur=(t,e,r={})=>{if(t===e)return!0;t=new nWe(t,r),e=new nWe(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=yur(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},mur=[new fue(">=0.0.0-0")],iWe=[new fue(">=0.0.0")],yur=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===pue){if(e.length===1&&e[0].semver===pue)return!0;r.includePrerelease?t=mur:t=iWe}if(e.length===1&&e[0].semver===pue){if(r.includePrerelease)return!0;e=iWe}let n=new Set,i,s;for(let f of t)f.operator===">"||f.operator===">="?i=sWe(i,f,r):f.operator==="<"||f.operator==="<="?s=oWe(s,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(i&&s){if(o=hue(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let f of n){if(i&&!HA(f,String(i),r)||s&&!HA(f,String(s),r))return null;for(let h of e)if(!HA(f,String(h),r))return!1;return!0}let a,u,c,l,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=sWe(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!HA(i.semver,String(f),r))return!1}if(s){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=oWe(s,f,r),u===f&&u!==s)return!1}else if(s.operator==="<="&&!HA(s.semver,String(f),r))return!1}if(!f.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&l&&!i&&o!==0||p||d)},sWe=(t,e,r)=>{if(!t)return e;let n=hue(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},oWe=(t,e,r)=>{if(!t)return e;let n=hue(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};aWe.exports=hur});var pWe=m((QPr,dWe)=>{"use strict";var mue=h4(),cWe=jA(),gur=So(),lWe=Zae(),Eur=Jg(),bur=FHe(),_ur=qHe(),vur=$He(),Sur=VHe(),wur=HHe(),Aur=WHe(),Cur=YHe(),Tur=XHe(),Our=$c(),xur=rze(),Iur=ize(),Rur=vF(),Dur=uze(),kur=lze(),Mur=KA(),Pur=SF(),Nur=rue(),Fur=nue(),Bur=wF(),qur=AF(),Lur=iue(),jur=bze(),$ur=UA(),Kur=Kc(),Uur=GA(),Vur=Pze(),Gur=Fze(),Hur=qze(),zur=$ze(),Wur=Uze(),Jur=OF(),Yur=Jze(),Qur=Qze(),Xur=eWe(),Zur=rWe(),ecr=uWe();dWe.exports={parse:Eur,valid:bur,clean:_ur,inc:vur,diff:Sur,major:wur,minor:Aur,patch:Cur,prerelease:Tur,compare:Our,rcompare:xur,compareLoose:Iur,compareBuild:Rur,sort:Dur,rsort:kur,gt:Mur,lt:Pur,eq:Nur,neq:Fur,gte:Bur,lte:qur,cmp:Lur,coerce:jur,Comparator:$ur,Range:Kur,satisfies:Uur,toComparators:Vur,maxSatisfying:Gur,minSatisfying:Hur,minVersion:zur,validRange:Wur,outside:Jur,gtr:Yur,ltr:Qur,intersects:Xur,simplifyRange:Zur,subset:ecr,SemVer:gur,re:mue.re,src:mue.src,tokens:mue.t,SEMVER_SPEC_VERSION:cWe.SEMVER_SPEC_VERSION,RELEASE_TYPES:cWe.RELEASE_TYPES,compareIdentifiers:lWe.compareIdentifiers,rcompareIdentifiers:lWe.rcompareIdentifiers}});var Uc=m(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.QUEUE_EVENT_SUFFIX=bt.toString=bt.errorToJSON=bt.parseObjectValues=bt.isRedisVersionLowerThan=bt.childSend=bt.asyncSend=bt.DELAY_TIME_1=bt.DELAY_TIME_5=bt.clientCommandMessageReg=bt.optsEncodeMap=bt.optsDecodeMap=bt.errorObject=void 0;bt.tryCatch=ncr;bt.lengthInUtf8Bytes=icr;bt.isEmpty=scr;bt.array2obj=ocr;bt.objectToFlatArray=acr;bt.delay=ucr;bt.increaseMaxListeners=fWe;bt.invertObject=hWe;bt.isRedisInstance=mWe;bt.isRedisCluster=ccr;bt.decreaseMaxListeners=lcr;bt.removeAllQueueData=dcr;bt.getParentKey=pcr;bt.isNotConnectionError=fcr;bt.removeUndefinedFields=Scr;bt.trace=wcr;var tcr=oP(),rcr=ss(),yue=pWe(),gue=Tu();bt.errorObject={value:null};function ncr(t,e,r){try{return t.apply(e,r)}catch(n){return bt.errorObject.value=n,bt.errorObject}}function icr(t){return Buffer.byteLength(t,"utf8")}function scr(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ocr(t){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}function acr(t){let e=[];for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&t[r]!==void 0&&(e[e.length]=r,e[e.length]=t[r]);return e}function ucr(t,e){return new Promise(r=>{let n,i=()=>{e?.signal.removeEventListener("abort",i),clearTimeout(n),r()};n=setTimeout(i,t),e?.signal.addEventListener("abort",i)})}function fWe(t,e){let r=t.getMaxListeners();t.setMaxListeners(r+e)}function hWe(t){return Object.entries(t).reduce((e,[r,n])=>(e[n]=r,e),{})}bt.optsDecodeMap={de:"deduplication",fpof:"failParentOnFailure",cpof:"continueParentOnFailure",idof:"ignoreDependencyOnFailure",kl:"keepLogs",rdof:"removeDependencyOnFailure"};bt.optsEncodeMap=Object.assign(Object.assign({},hWe(bt.optsDecodeMap)),{debounce:"de"});function mWe(t){return t?["connect","disconnect","duplicate"].every(r=>typeof t[r]=="function"):!1}function ccr(t){return mWe(t)&&t.isCluster}function lcr(t,e){fWe(t,-e)}async function dcr(t,e,r=process.env.BULLMQ_TEST_PREFIX||"bull"){if(t instanceof tcr.Cluster)return Promise.resolve(!1);let n=`${r}:${e}:*`;await await new Promise((s,o)=>{let a=t.scanStream({match:n});a.on("data",u=>{if(u.length){let c=t.pipeline();u.forEach(l=>{c.del(l)}),c.exec().catch(l=>{o(l)})}}),a.on("end",()=>s()),a.on("error",u=>o(u))}),await t.quit()}function pcr(t){if(t)return`${t.queue}:${t.id}`}bt.clientCommandMessageReg=/ERR unknown command ['`]\s*client\s*['`]/;bt.DELAY_TIME_5=5e3;bt.DELAY_TIME_1=100;function fcr(t){let{code:e,message:r}=t;return r!==rcr.CONNECTION_CLOSED_ERROR_MSG&&!r.includes("ECONNREFUSED")&&e!=="ECONNREFUSED"}var hcr=(t,e)=>new Promise((r,n)=>{typeof t.send=="function"?t.send(e,i=>{i?n(i):r()}):typeof t.postMessage=="function"?r(t.postMessage(e)):r()});bt.asyncSend=hcr;var mcr=(t,e)=>(0,bt.asyncSend)(t,e);bt.childSend=mcr;var ycr=(t,e)=>{let r=yue.valid(yue.coerce(t));return yue.lt(r,e)};bt.isRedisVersionLowerThan=ycr;var gcr=t=>{let e={};for(let r of Object.entries(t))e[r[0]]=JSON.parse(r[1]);return e};bt.parseObjectValues=gcr;var Ecr=t=>{let e=new WeakSet;return e.add(t),(r,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}},bcr=t=>{let e={};return Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]}),JSON.parse(JSON.stringify(e,Ecr(t)))};bt.errorToJSON=bcr;var _cr=1/0,vcr=t=>{if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return`${t.map(r=>r==null?r:(0,bt.toString)(r))}`;if(typeof t=="symbol"||Object.prototype.toString.call(t)=="[object Symbol]")return t.toString();let e=`${t}`;return e==="0"&&1/t===-_cr?"-0":e};bt.toString=vcr;bt.QUEUE_EVENT_SUFFIX=":qe";function Scr(t){let e={};for(let r in t)t[r]!==void 0&&(e[r]=t[r]);return e}async function wcr(t,e,r,n,i,s,o){if(t){let{tracer:a,contextManager:u}=t,c=u.active(),l;o&&(l=u.fromMetadata(c,o));let d=i?`${n} ${i}`:n,p=a.startSpan(d,{kind:e},l);try{p.setAttributes({[gue.TelemetryAttributes.QueueName]:r,[gue.TelemetryAttributes.QueueOperation]:n});let f,h;return e===gue.SpanKind.CONSUMER&&l?f=p.setSpanOnContext(l):f=p.setSpanOnContext(c),s.length==2&&(h=u.getMetadata(f)),await u.with(f,()=>s(p,h))}catch(f){throw p.recordException(f),f}finally{p.end()}}else return s()}});var yWe=m(xF=>{"use strict";Object.defineProperty(xF,"__esModule",{value:!0});xF.ChildProcessor=void 0;var Ou=Tu(),Eue=Uc(),wm;(function(t){t[t.Idle=0]="Idle",t[t.Started=1]="Started",t[t.Terminating=2]="Terminating",t[t.Errored=3]="Errored"})(wm||(wm={}));var bue=process.env.NODE_ENV==="test"?500:5e3,vue=class{constructor(e,r){this.send=e,this.receiver=r}async init(e){let r;try{let{default:i}=await import(e);if(r=i,r.default&&(r=r.default),typeof r!="function")throw new Error("No function is exported in processor file")}catch(i){return this.status=wm.Errored,this.send({cmd:Ou.ParentCommand.InitFailed,err:(0,Eue.errorToJSON)(i)})}let n=r;r=function(i,s){try{return Promise.resolve(n(i,s))}catch(o){return Promise.reject(o)}},this.processor=r,this.status=wm.Idle,await this.send({cmd:Ou.ParentCommand.InitCompleted})}async start(e,r){if(this.status!==wm.Idle)return this.send({cmd:Ou.ParentCommand.Error,err:(0,Eue.errorToJSON)(new Error("cannot start a not idling child process"))});this.status=wm.Started,this.currentJobPromise=(async()=>{try{let n=this.wrapJob(e,this.send),i=await this.processor(n,r);await this.send({cmd:Ou.ParentCommand.Completed,value:typeof i>"u"?null:i})}catch(n){await this.send({cmd:Ou.ParentCommand.Failed,value:(0,Eue.errorToJSON)(n.message?n:new Error(n))})}finally{this.status=wm.Idle,this.currentJobPromise=void 0}})()}async stop(){}async waitForCurrentJobAndExit(){this.status=wm.Terminating;try{await this.currentJobPromise}finally{process.exit(process.exitCode||0)}}wrapJob(e,r){let n=Object.assign(Object.assign({},e),{queueQualifiedName:e.queueQualifiedName,data:JSON.parse(e.data||"{}"),opts:e.opts,returnValue:JSON.parse(e.returnvalue||"{}"),async updateProgress(i){this.progress=i,await r({cmd:Ou.ParentCommand.Progress,value:i})},log:async i=>{await r({cmd:Ou.ParentCommand.Log,value:i})},moveToDelayed:async(i,s)=>{await r({cmd:Ou.ParentCommand.MoveToDelayed,value:{timestamp:i,token:s}})},moveToWait:async i=>{await r({cmd:Ou.ParentCommand.MoveToWait,value:{token:i}})},moveToWaitingChildren:async(i,s)=>{let o=Math.random().toString(36).substring(2,15);return await r({requestId:o,cmd:Ou.ParentCommand.MoveToWaitingChildren,value:{token:i,opts:s}}),_ue(o,this.receiver,bue,"moveToWaitingChildren")},updateData:async i=>{await r({cmd:Ou.ParentCommand.Update,value:i}),n.data=i},getChildrenValues:async()=>{let i=Math.random().toString(36).substring(2,15);return await r({requestId:i,cmd:Ou.ParentCommand.GetChildrenValues}),_ue(i,this.receiver,bue,"getChildrenValues")},getIgnoredChildrenFailures:async()=>{let i=Math.random().toString(36).substring(2,15);return await r({requestId:i,cmd:Ou.ParentCommand.GetIgnoredChildrenFailures}),_ue(i,this.receiver,bue,"getIgnoredChildrenFailures")}});return n}};xF.ChildProcessor=vue;var _ue=async(t,e,r,n)=>new Promise((i,s)=>{let o=a=>{a.requestId===t&&(i(a.value),e.off("message",o))};e.on("message",o),setTimeout(()=>{e.off("message",o),s(new Error(`TimeoutError: ${n} timed out in (${r}ms)`))},r)})});var gWe=m(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.DelayedError=Yg.DELAYED_ERROR=void 0;Yg.DELAYED_ERROR="bullmq:movedToDelayed";var Sue=class extends Error{constructor(e=Yg.DELAYED_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Yg.DelayedError=Sue});var EWe=m(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.RateLimitError=Qg.RATE_LIMIT_ERROR=void 0;Qg.RATE_LIMIT_ERROR="bullmq:rateLimitExceeded";var wue=class extends Error{constructor(e=Qg.RATE_LIMIT_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Qg.RateLimitError=wue});var Cue=m(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.UnrecoverableError=Xg.UNRECOVERABLE_ERROR=void 0;Xg.UNRECOVERABLE_ERROR="bullmq:unrecoverable";var Aue=class extends Error{constructor(e=Xg.UNRECOVERABLE_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Xg.UnrecoverableError=Aue});var bWe=m(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.WaitingChildrenError=Zg.WAITING_CHILDREN_ERROR=void 0;Zg.WAITING_CHILDREN_ERROR="bullmq:movedToWaitingChildren";var Tue=class extends Error{constructor(e=Zg.WAITING_CHILDREN_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Zg.WaitingChildrenError=Tue});var _We=m(e2=>{"use strict";Object.defineProperty(e2,"__esModule",{value:!0});e2.WaitingError=e2.WAITING_ERROR=void 0;e2.WAITING_ERROR="bullmq:movedToWait";var Oue=class extends Error{constructor(e=e2.WAITING_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};e2.WaitingError=Oue});var IF=m(t2=>{"use strict";Object.defineProperty(t2,"__esModule",{value:!0});var zA=(ea(),Jt(Zo));zA.__exportStar(gWe(),t2);zA.__exportStar(EWe(),t2);zA.__exportStar(Cue(),t2);zA.__exportStar(bWe(),t2);zA.__exportStar(_We(),t2)});var vWe=m(xue=>{"use strict";Object.defineProperty(xue,"__esModule",{value:!0});xue.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var SWe=m(Iue=>{"use strict";Object.defineProperty(Iue,"__esModule",{value:!0});Iue.default="00000000-0000-0000-0000-000000000000"});var wWe=m(Rue=>{"use strict";Object.defineProperty(Rue,"__esModule",{value:!0});Rue.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var WA=m(Due=>{"use strict";Object.defineProperty(Due,"__esModule",{value:!0});var Acr=wWe();function Ccr(t){return typeof t=="string"&&Acr.default.test(t)}Due.default=Ccr});var JA=m(kue=>{"use strict";Object.defineProperty(kue,"__esModule",{value:!0});var Tcr=WA();function Ocr(t){if(!(0,Tcr.default)(t))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(t.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(t.slice(9,13),16))>>>8,e&255,(e=parseInt(t.slice(14,18),16))>>>8,e&255,(e=parseInt(t.slice(19,23),16))>>>8,e&255,(e=parseInt(t.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}kue.default=Ocr});var zf=m(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0});YA.unsafeStringify=void 0;var xcr=WA(),Qs=[];for(let t=0;t<256;++t)Qs.push((t+256).toString(16).slice(1));function AWe(t,e=0){return(Qs[t[e+0]]+Qs[t[e+1]]+Qs[t[e+2]]+Qs[t[e+3]]+"-"+Qs[t[e+4]]+Qs[t[e+5]]+"-"+Qs[t[e+6]]+Qs[t[e+7]]+"-"+Qs[t[e+8]]+Qs[t[e+9]]+"-"+Qs[t[e+10]]+Qs[t[e+11]]+Qs[t[e+12]]+Qs[t[e+13]]+Qs[t[e+14]]+Qs[t[e+15]]).toLowerCase()}YA.unsafeStringify=AWe;function Icr(t,e=0){let r=AWe(t,e);if(!(0,xcr.default)(r))throw TypeError("Stringified UUID is invalid");return r}YA.default=Icr});var kF=m(Mue=>{"use strict";Object.defineProperty(Mue,"__esModule",{value:!0});var Rcr=require("crypto"),DF=new Uint8Array(256),RF=DF.length;function Dcr(){return RF>DF.length-16&&((0,Rcr.randomFillSync)(DF),RF=0),DF.slice(RF,RF+=16)}Mue.default=Dcr});var Pue=m(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});XA.updateV1State=void 0;var CWe=kF(),kcr=zf(),QA={};function Mcr(t,e,r){let n,i=t?._v6??!1;if(t){let s=Object.keys(t);s.length===1&&s[0]==="_v6"&&(t=void 0)}if(t)n=TWe(t.random??t.rng?.()??(0,CWe.default)(),t.msecs,t.nsecs,t.clockseq,t.node,e,r);else{let s=Date.now(),o=(0,CWe.default)();OWe(QA,s,o),n=TWe(o,QA.msecs,QA.nsecs,i?void 0:QA.clockseq,i?void 0:QA.node,e,r)}return e??(0,kcr.unsafeStringify)(n)}function OWe(t,e,r){return t.msecs??=-1/0,t.nsecs??=0,e===t.msecs?(t.nsecs++,t.nsecs>=1e4&&(t.node=void 0,t.nsecs=0)):e>t.msecs?t.nsecs=0:e<t.msecs&&(t.node=void 0),t.node||(t.node=r.slice(10,16),t.node[0]|=1,t.clockseq=(r[8]<<8|r[9])&16383),t.msecs=e,t}XA.updateV1State=OWe;function TWe(t,e,r,n,i,s,o=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),o=0;else if(o<0||o+16>s.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);e??=Date.now(),r??=0,n??=(t[8]<<8|t[9])&16383,i??=t.slice(10,16),e+=122192928e5;let a=((e&268435455)*1e4+r)%4294967296;s[o++]=a>>>24&255,s[o++]=a>>>16&255,s[o++]=a>>>8&255,s[o++]=a&255;let u=e/4294967296*1e4&268435455;s[o++]=u>>>8&255,s[o++]=u&255,s[o++]=u>>>24&15|16,s[o++]=u>>>16&255,s[o++]=n>>>8|128,s[o++]=n&255;for(let c=0;c<6;++c)s[o++]=i[c];return s}XA.default=Mcr});var Fue=m(Nue=>{"use strict";Object.defineProperty(Nue,"__esModule",{value:!0});var Pcr=JA(),Ncr=zf();function Fcr(t){let e=typeof t=="string"?(0,Pcr.default)(t):t,r=Bcr(e);return typeof t=="string"?(0,Ncr.unsafeStringify)(r):r}Nue.default=Fcr;function Bcr(t){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var xWe=m(Bue=>{"use strict";Object.defineProperty(Bue,"__esModule",{value:!0});var qcr=require("crypto");function Lcr(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),(0,qcr.createHash)("md5").update(t).digest()}Bue.default=Lcr});var ZA=m(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.URL=Wf.DNS=Wf.stringToBytes=void 0;var IWe=JA(),jcr=zf();function RWe(t){t=unescape(encodeURIComponent(t));let e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r);return e}Wf.stringToBytes=RWe;Wf.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Wf.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $cr(t,e,r,n,i,s){let o=typeof r=="string"?RWe(r):r,a=typeof n=="string"?(0,IWe.default)(n):n;if(typeof n=="string"&&(n=(0,IWe.default)(n)),n?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(a),u.set(o,a.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){s=s||0;for(let c=0;c<16;++c)i[s+c]=u[c];return i}return(0,jcr.unsafeStringify)(u)}Wf.default=$cr});var kWe=m(r2=>{"use strict";Object.defineProperty(r2,"__esModule",{value:!0});r2.URL=r2.DNS=void 0;var Kcr=xWe(),que=ZA(),DWe=ZA();Object.defineProperty(r2,"DNS",{enumerable:!0,get:function(){return DWe.DNS}});Object.defineProperty(r2,"URL",{enumerable:!0,get:function(){return DWe.URL}});function Lue(t,e,r,n){return(0,que.default)(48,Kcr.default,t,e,r,n)}Lue.DNS=que.DNS;Lue.URL=que.URL;r2.default=Lue});var MWe=m(jue=>{"use strict";Object.defineProperty(jue,"__esModule",{value:!0});var Ucr=require("crypto");jue.default={randomUUID:Ucr.randomUUID}});var NWe=m($ue=>{"use strict";Object.defineProperty($ue,"__esModule",{value:!0});var PWe=MWe(),Vcr=kF(),Gcr=zf();function Hcr(t,e,r){if(PWe.default.randomUUID&&!e&&!t)return PWe.default.randomUUID();t=t||{};let n=t.random??t.rng?.()??(0,Vcr.default)();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,Gcr.unsafeStringify)(n)}$ue.default=Hcr});var FWe=m(Kue=>{"use strict";Object.defineProperty(Kue,"__esModule",{value:!0});var zcr=require("crypto");function Wcr(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),(0,zcr.createHash)("sha1").update(t).digest()}Kue.default=Wcr});var qWe=m(n2=>{"use strict";Object.defineProperty(n2,"__esModule",{value:!0});n2.URL=n2.DNS=void 0;var Jcr=FWe(),Uue=ZA(),BWe=ZA();Object.defineProperty(n2,"DNS",{enumerable:!0,get:function(){return BWe.DNS}});Object.defineProperty(n2,"URL",{enumerable:!0,get:function(){return BWe.URL}});function Vue(t,e,r,n){return(0,Uue.default)(80,Jcr.default,t,e,r,n)}Vue.DNS=Uue.DNS;Vue.URL=Uue.URL;n2.default=Vue});var LWe=m(Gue=>{"use strict";Object.defineProperty(Gue,"__esModule",{value:!0});var Ycr=zf(),Qcr=Pue(),Xcr=Fue();function Zcr(t,e,r){t??={},r??=0;let n=(0,Qcr.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,Xcr.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,Ycr.unsafeStringify)(n)}Gue.default=Zcr});var jWe=m(Hue=>{"use strict";Object.defineProperty(Hue,"__esModule",{value:!0});var elr=JA(),tlr=zf();function rlr(t){let e=typeof t=="string"?(0,elr.default)(t):t,r=nlr(e);return typeof t=="string"?(0,tlr.unsafeStringify)(r):r}Hue.default=rlr;function nlr(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var VWe=m(e8=>{"use strict";Object.defineProperty(e8,"__esModule",{value:!0});e8.updateV7State=void 0;var $We=kF(),ilr=zf(),zue={};function slr(t,e,r){let n;if(t)n=KWe(t.random??t.rng?.()??(0,$We.default)(),t.msecs,t.seq,e,r);else{let i=Date.now(),s=(0,$We.default)();UWe(zue,i,s),n=KWe(s,zue.msecs,zue.seq,e,r)}return e??(0,ilr.unsafeStringify)(n)}function UWe(t,e,r){return t.msecs??=-1/0,t.seq??=0,e>t.msecs?(t.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],t.msecs=e):(t.seq=t.seq+1|0,t.seq===0&&t.msecs++),t}e8.updateV7State=UWe;function KWe(t,e,r,n,i=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),i=0;else if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??=Date.now(),r??=t[6]*127<<24|t[7]<<16|t[8]<<8|t[9],n[i++]=e/1099511627776&255,n[i++]=e/4294967296&255,n[i++]=e/16777216&255,n[i++]=e/65536&255,n[i++]=e/256&255,n[i++]=e&255,n[i++]=112|r>>>28&15,n[i++]=r>>>20&255,n[i++]=128|r>>>14&63,n[i++]=r>>>6&255,n[i++]=r<<2&255|t[10]&3,n[i++]=t[11],n[i++]=t[12],n[i++]=t[13],n[i++]=t[14],n[i++]=t[15],n}e8.default=slr});var GWe=m(Wue=>{"use strict";Object.defineProperty(Wue,"__esModule",{value:!0});var olr=WA();function alr(t){if(!(0,olr.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}Wue.default=alr});var MF=m(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.version=qr.validate=qr.v7=qr.v6ToV1=qr.v6=qr.v5=qr.v4=qr.v3=qr.v1ToV6=qr.v1=qr.stringify=qr.parse=qr.NIL=qr.MAX=void 0;var ulr=vWe();Object.defineProperty(qr,"MAX",{enumerable:!0,get:function(){return ulr.default}});var clr=SWe();Object.defineProperty(qr,"NIL",{enumerable:!0,get:function(){return clr.default}});var llr=JA();Object.defineProperty(qr,"parse",{enumerable:!0,get:function(){return llr.default}});var dlr=zf();Object.defineProperty(qr,"stringify",{enumerable:!0,get:function(){return dlr.default}});var plr=Pue();Object.defineProperty(qr,"v1",{enumerable:!0,get:function(){return plr.default}});var flr=Fue();Object.defineProperty(qr,"v1ToV6",{enumerable:!0,get:function(){return flr.default}});var hlr=kWe();Object.defineProperty(qr,"v3",{enumerable:!0,get:function(){return hlr.default}});var mlr=NWe();Object.defineProperty(qr,"v4",{enumerable:!0,get:function(){return mlr.default}});var ylr=qWe();Object.defineProperty(qr,"v5",{enumerable:!0,get:function(){return ylr.default}});var glr=LWe();Object.defineProperty(qr,"v6",{enumerable:!0,get:function(){return glr.default}});var Elr=jWe();Object.defineProperty(qr,"v6ToV1",{enumerable:!0,get:function(){return Elr.default}});var blr=VWe();Object.defineProperty(qr,"v7",{enumerable:!0,get:function(){return blr.default}});var _lr=WA();Object.defineProperty(qr,"validate",{enumerable:!0,get:function(){return _lr.default}});var vlr=GWe();Object.defineProperty(qr,"version",{enumerable:!0,get:function(){return vlr.default}})});var WWe=m((ONr,zWe)=>{"use strict";var HWe=()=>process.platform==="linux",PF=null,Slr=()=>{if(!PF)if(HWe()&&process.report){let t=process.report.excludeNetwork;process.report.excludeNetwork=!0,PF=process.report.getReport(),process.report.excludeNetwork=t}else PF={};return PF};zWe.exports={isLinux:HWe,getReport:Slr}});var YWe=m((xNr,JWe)=>{"use strict";var m4=require("fs"),wlr="/usr/bin/ldd",Alr="/proc/self/exe",NF=2048,Clr=t=>{let e=m4.openSync(t,"r"),r=Buffer.alloc(NF),n=m4.readSync(e,r,0,NF,0);return m4.close(e,()=>{}),r.subarray(0,n)},Tlr=t=>new Promise((e,r)=>{m4.open(t,"r",(n,i)=>{if(n)r(n);else{let s=Buffer.alloc(NF);m4.read(i,s,0,NF,0,(o,a)=>{e(s.subarray(0,a)),m4.close(i,()=>{})})}})});JWe.exports={LDD_PATH:wlr,SELF_PATH:Alr,readFileSync:Clr,readFile:Tlr}});var XWe=m((INr,QWe)=>{"use strict";var Olr=t=>{if(t.length<64||t.readUInt32BE(0)!==2135247942||t.readUInt8(4)!==2||t.readUInt8(5)!==1)return null;let e=t.readUInt32LE(32),r=t.readUInt16LE(54),n=t.readUInt16LE(56);for(let i=0;i<n;i++){let s=e+i*r;if(t.readUInt32LE(s)===3){let a=t.readUInt32LE(s+8),u=t.readUInt32LE(s+32);return t.subarray(a,a+u).toString().replace(/\0.*$/g,"")}}return null};QWe.exports={interpreterPath:Olr}});var gJe=m((RNr,yJe)=>{"use strict";var eJe=require("child_process"),{isLinux:y4,getReport:tJe}=WWe(),{LDD_PATH:FF,SELF_PATH:rJe,readFile:Jue,readFileSync:Yue}=YWe(),{interpreterPath:nJe}=XWe(),op,ap,up,iJe="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",Am="",sJe=()=>Am||new Promise(t=>{eJe.exec(iJe,(e,r)=>{Am=e?" ":r,t(Am)})}),oJe=()=>{if(!Am)try{Am=eJe.execSync(iJe,{encoding:"utf8"})}catch{Am=" "}return Am},Jf="glibc",aJe=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,i2="musl",xlr=t=>t.includes("libc.musl-")||t.includes("ld-musl-"),uJe=()=>{let t=tJe();return t.header&&t.header.glibcVersionRuntime?Jf:Array.isArray(t.sharedObjects)&&t.sharedObjects.some(xlr)?i2:null},cJe=t=>{let[e,r]=t.split(/[\r\n]+/);return e&&e.includes(Jf)?Jf:r&&r.includes(i2)?i2:null},lJe=t=>{if(t){if(t.includes("/ld-musl-"))return i2;if(t.includes("/ld-linux-"))return Jf}return null},dJe=t=>(t=t.toString(),t.includes("musl")?i2:t.includes("GNU C Library")?Jf:null),Ilr=async()=>{if(ap!==void 0)return ap;ap=null;try{let t=await Jue(FF);ap=dJe(t)}catch{}return ap},Rlr=()=>{if(ap!==void 0)return ap;ap=null;try{let t=Yue(FF);ap=dJe(t)}catch{}return ap},Dlr=async()=>{if(op!==void 0)return op;op=null;try{let t=await Jue(rJe),e=nJe(t);op=lJe(e)}catch{}return op},klr=()=>{if(op!==void 0)return op;op=null;try{let t=Yue(rJe),e=nJe(t);op=lJe(e)}catch{}return op},pJe=async()=>{let t=null;if(y4()&&(t=await Dlr(),!t&&(t=await Ilr(),t||(t=uJe()),!t))){let e=await sJe();t=cJe(e)}return t},fJe=()=>{let t=null;if(y4()&&(t=klr(),!t&&(t=Rlr(),t||(t=uJe()),!t))){let e=oJe();t=cJe(e)}return t},Mlr=async()=>y4()&&await pJe()!==Jf,Plr=()=>y4()&&fJe()!==Jf,Nlr=async()=>{if(up!==void 0)return up;up=null;try{let e=(await Jue(FF)).match(aJe);e&&(up=e[1])}catch{}return up},Flr=()=>{if(up!==void 0)return up;up=null;try{let e=Yue(FF).match(aJe);e&&(up=e[1])}catch{}return up},hJe=()=>{let t=tJe();return t.header&&t.header.glibcVersionRuntime?t.header.glibcVersionRuntime:null},ZWe=t=>t.trim().split(/\s+/)[1],mJe=t=>{let[e,r,n]=t.split(/[\r\n]+/);return e&&e.includes(Jf)?ZWe(e):r&&n&&r.includes(i2)?ZWe(n):null},Blr=async()=>{let t=null;if(y4()&&(t=await Nlr(),t||(t=hJe()),!t)){let e=await sJe();t=mJe(e)}return t},qlr=()=>{let t=null;if(y4()&&(t=Flr(),t||(t=hJe()),!t)){let e=oJe();t=mJe(e)}return t};yJe.exports={GLIBC:Jf,MUSL:i2,family:pJe,familySync:fJe,isNonGlibcLinux:Mlr,isNonGlibcLinuxSync:Plr,version:Blr,versionSync:qlr}});var DJe=m((DNr,RJe)=>{var Llr=require("fs"),nd=require("path"),jlr=require("url"),_Je=require("os"),vJe=typeof __webpack_require__=="function"?__non_webpack_require__:require,$lr=process.config&&process.config.variables||{},Klr=!!process.env.PREBUILDS_ONLY,tce=process.versions,Xue=tce.modules;(tce.deno||process.isBun)&&(Xue="unsupported");var Que=Glr()?"electron":Vlr()?"node-webkit":"node",BF=process.env.npm_config_arch||_Je.arch(),qF=process.env.npm_config_platform||_Je.platform(),SJe=process.env.LIBC||(Hlr(qF)?"musl":"glibc"),Zue=process.env.ARM_VERSION||(BF==="arm64"?"8":$lr.arm_version)||"",wJe=(tce.uv||"").split(".")[0];RJe.exports=cp;function cp(t){return vJe(cp.resolve(t))}cp.resolve=cp.path=function(t){t=nd.resolve(t||".");var e="",r;try{e=vJe(nd.join(t,"package.json")).name;var n=e.toUpperCase().replace(/-/g,"_");process.env[n+"_PREBUILD"]&&(t=process.env[n+"_PREBUILD"])}catch(g){r=g}if(!Klr){var i=EJe(nd.join(t,"build/Release"),bJe);if(i)return i;var s=EJe(nd.join(t,"build/Debug"),bJe);if(s)return s}var o=f(t);if(o)return o;var a=f(nd.dirname(process.execPath));if(a)return a;var u=(e[0]=="@"?"":"@"+e+"/")+e+"-"+qF+"-"+BF,c;try{var l=nd.dirname(require("module").createRequire(jlr.pathToFileURL(nd.join(t,"package.json"))).resolve(u));return h(l)}catch(g){c=g}var d=["platform="+qF,"arch="+BF,"runtime="+Que,"abi="+Xue,"uv="+wJe,Zue?"armv="+Zue:"","libc="+SJe,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");let p="No native build was found for "+d+`
    attempted loading from: `+t+" and package: "+u+`
`;throw r&&(p+="Error finding package.json: "+r.message+`
`),c&&(p+="Error resolving package: "+c.message+`
`),new Error(p);function f(g){var _=ece(nd.join(g,"prebuilds")).map(AJe),S=_.filter(CJe(qF,BF)).sort(TJe)[0];if(S)return h(nd.join(g,"prebuilds",S.name))}function h(g){var _=ece(g).map(OJe),S=_.filter(xJe(Que,Xue)),w=S.sort(IJe(Que))[0];if(w)return nd.join(g,w.file)}};function ece(t){try{return Llr.readdirSync(t)}catch{return[]}}function EJe(t,e){var r=ece(t).filter(e);return r[0]&&nd.join(t,r[0])}function bJe(t){return/\.node$/.test(t)}function AJe(t){var e=t.split("-");if(e.length===2){var r=e[0],n=e[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:t,platform:r,architectures:n}}}function CJe(t,e){return function(r){return r==null||r.platform!==t?!1:r.architectures.includes(e)}}function TJe(t,e){return t.architectures.length-e.architectures.length}function OJe(t){var e=t.split("."),r=e.pop(),n={file:t,specificity:0};if(r==="node"){for(var i=0;i<e.length;i++){var s=e[i];if(s==="node"||s==="electron"||s==="node-webkit")n.runtime=s;else if(s==="napi")n.napi=!0;else if(s.slice(0,3)==="abi")n.abi=s.slice(3);else if(s.slice(0,2)==="uv")n.uv=s.slice(2);else if(s.slice(0,4)==="armv")n.armv=s.slice(4);else if(s==="glibc"||s==="musl")n.libc=s;else continue;n.specificity++}return n}}function xJe(t,e){return function(r){return!(r==null||r.runtime!==t&&!Ulr(r)||r.abi!==e&&!r.napi||r.uv&&r.uv!==wJe||r.armv&&r.armv!==Zue||r.libc&&r.libc!==SJe)}}function Ulr(t){return t.runtime==="node"&&t.napi}function IJe(t){return function(e,r){return e.runtime!==r.runtime?e.runtime===t?-1:1:e.abi!==r.abi?e.abi?-1:1:e.specificity!==r.specificity?e.specificity>r.specificity?-1:1:0}}function Vlr(){return!!(process.versions&&process.versions.nw)}function Glr(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function Hlr(t){if(t!=="linux")return!1;let{familySync:e,MUSL:r}=gJe();return e()===r}cp.parseTags=OJe;cp.matchTags=xJe;cp.compareTags=IJe;cp.parseTuple=AJe;cp.matchTuple=CJe;cp.compareTuples=TJe});var kJe=m((kNr,nce)=>{var rce=typeof __webpack_require__=="function"?__non_webpack_require__:require;typeof rce.addon=="function"?nce.exports=rce.addon.bind(rce):nce.exports=DJe()});var PJe=m((MNr,MJe)=>{MJe.exports=kJe()(__dirname)});var mYe=m(Ur=>{"use strict";var JJe=require("stream"),zlr=require("module"),ace;try{ace=new TextDecoder}catch{}var qe,Iu,J=0,fce=[],a2=fce,n8=0,an={},_r,Qf,xu=0,Vc=0,os,Xf,Co=[],mr,NJe={useRecords:!1,mapsAsObjects:!0},VF=class{},hce=new VF;hce.name="MessagePack 0xC1";var Cm=!1,YJe=2,uce,cce,lce;try{new Function("")}catch{YJe=1/0}var Tm=class t{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,r){if(qe)return sYe(()=>(HF(),this?this.unpack(e,r):t.prototype.unpack.call(NJe,e,r)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof Buffer<"u"?Buffer.from(e):new Uint8Array(e)),typeof r=="object"?(Iu=r.end||e.length,J=r.start||0):(J=0,Iu=r>-1?r:e.length),n8=0,Vc=0,Qf=null,a2=fce,os=null,qe=e;try{mr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw qe=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof t){if(an=this,this.structures)return _r=this.structures,LF(r);(!_r||_r.length>0)&&(_r=[])}else an=NJe,(!_r||_r.length>0)&&(_r=[]);return LF(r)}unpackMultiple(e,r){let n,i=0;try{Cm=!0;let s=e.length,o=this?this.unpack(e,s):YF.unpack(e,s);if(r){if(r(o,i,J)===!1)return;for(;J<s;)if(i=J,r(LF(),i,J)===!1)return}else{for(n=[o];J<s;)i=J,n.push(LF());return n}}catch(s){throw s.lastPosition=i,s.values=n,s}finally{Cm=!1,HF()}}_mergeStructures(e,r){cce&&(e=cce.call(this,e)),e=e||[],Object.isFrozen(e)&&(e=e.map(n=>n.slice(0)));for(let n=0,i=e.length;n<i;n++){let s=e[n];s&&(s.isShared=!0,n>=32&&(s.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in r||[])if(n>=0){let i=e[n],s=r[n];s&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[n]=i),e[n]=s)}return this.structures=e}decode(e,r){return this.unpack(e,r)}};function LF(t){try{if(!an.trusted&&!Cm){let r=_r.sharedLength||0;r<_r.length&&(_r.length=r)}let e;if(an.randomAccessStructure&&qe[J]<64&&qe[J]>=32&&uce?(e=uce(qe,J,Iu,an),qe=null,!(t&&t.lazy)&&e&&(e=e.toJSON()),J=Iu):e=Ii(),os&&(J=os.postBundlePosition,os=null),Cm&&(_r.restoreStructures=null),J==Iu)_r&&_r.restoreStructures&&FJe(),_r=null,qe=null,Xf&&(Xf=null);else{if(J>Iu)throw new Error("Unexpected end of MessagePack data");if(!Cm){let r;try{r=JSON.stringify(e,(n,i)=>typeof i=="bigint"?`${i}n`:i).slice(0,100)}catch(n){r="(JSON view not available "+n+")"}throw new Error("Data read, but end of buffer not reached "+r)}}return e}catch(e){throw _r&&_r.restoreStructures&&FJe(),HF(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||J>Iu)&&(e.incomplete=!0),e}}function FJe(){for(let t in _r.restoreStructures)_r[t]=_r.restoreStructures[t];_r.restoreStructures=null}function Ii(){let t=qe[J++];if(t<160)if(t<128){if(t<64)return t;{let e=_r[t&63]||an.getStructures&&QJe()[t&63];return e?(e.read||(e.read=mce(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,an.mapsAsObjects){let e={};for(let r=0;r<t;r++){let n=rYe();n==="__proto__"&&(n="__proto_"),e[n]=Ii()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(Ii(),Ii());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=Ii();return an.freezeData?Object.freeze(e):e}else if(t<192){let e=t-160;if(Vc>=J)return Qf.slice(J-xu,(J+=e)-xu);if(Vc==0&&Iu<140){let r=e<16?yce(e):tYe(e);if(r!=null)return r}return GF(e)}else{let e;switch(t){case 192:return null;case 193:return os?(e=Ii(),e>0?os[1].slice(os.position1,os.position1+=e):os[0].slice(os.position0,os.position0-=e)):hce;case 194:return!1;case 195:return!0;case 196:if(e=qe[J++],e===void 0)throw new Error("Unexpected end of buffer");return ice(e);case 197:return e=mr.getUint16(J),J+=2,ice(e);case 198:return e=mr.getUint32(J),J+=4,ice(e);case 199:return s2(qe[J++]);case 200:return e=mr.getUint16(J),J+=2,s2(e);case 201:return e=mr.getUint32(J),J+=4,s2(e);case 202:if(e=mr.getFloat32(J),an.useFloat32>2){let r=_4[(qe[J]&127)<<1|qe[J+1]>>7];return J+=4,(r*e+(e>0?.5:-.5)>>0)/r}return J+=4,e;case 203:return e=mr.getFloat64(J),J+=8,e;case 204:return qe[J++];case 205:return e=mr.getUint16(J),J+=2,e;case 206:return e=mr.getUint32(J),J+=4,e;case 207:return an.int64AsType==="number"?(e=mr.getUint32(J)*4294967296,e+=mr.getUint32(J+4)):an.int64AsType==="string"?e=mr.getBigUint64(J).toString():an.int64AsType==="auto"?(e=mr.getBigUint64(J),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=mr.getBigUint64(J),J+=8,e;case 208:return mr.getInt8(J++);case 209:return e=mr.getInt16(J),J+=2,e;case 210:return e=mr.getInt32(J),J+=4,e;case 211:return an.int64AsType==="number"?(e=mr.getInt32(J)*4294967296,e+=mr.getUint32(J+4)):an.int64AsType==="string"?e=mr.getBigInt64(J).toString():an.int64AsType==="auto"?(e=mr.getBigInt64(J),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=mr.getBigInt64(J),J+=8,e;case 212:if(e=qe[J++],e==114)return KJe(qe[J++]&63);{let r=Co[e];if(r)return r.read?(J++,r.read(Ii())):r.noBuffer?(J++,r()):r(qe.subarray(J,++J));throw new Error("Unknown extension "+e)}case 213:return e=qe[J],e==114?(J++,KJe(qe[J++]&63,qe[J++])):s2(2);case 214:return s2(4);case 215:return s2(8);case 216:return s2(16);case 217:return e=qe[J++],Vc>=J?Qf.slice(J-xu,(J+=e)-xu):XJe(e);case 218:return e=mr.getUint16(J),J+=2,Vc>=J?Qf.slice(J-xu,(J+=e)-xu):ZJe(e);case 219:return e=mr.getUint32(J),J+=4,Vc>=J?Qf.slice(J-xu,(J+=e)-xu):eYe(e);case 220:return e=mr.getUint16(J),J+=2,qJe(e);case 221:return e=mr.getUint32(J),J+=4,qJe(e);case 222:return e=mr.getUint16(J),J+=2,LJe(e);case 223:return e=mr.getUint32(J),J+=4,LJe(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}var Wlr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function mce(t,e){function r(){if(r.count++>YJe){let i=t.read=new Function("r","return function(){return "+(an.freezeData?"Object.freeze":"")+"({"+t.map(s=>s==="__proto__"?"__proto_:r()":Wlr.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"})}")(Ii);return t.highByte===0&&(t.read=BJe(e,t.read)),i()}let n={};for(let i=0,s=t.length;i<s;i++){let o=t[i];o==="__proto__"&&(o="__proto_"),n[o]=Ii()}return an.freezeData?Object.freeze(n):n}return r.count=0,t.highByte===0?BJe(e,r):r}var BJe=(t,e)=>function(){let r=qe[J++];if(r===0)return e();let n=t<32?-(t+(r<<5)):t+(r<<5),i=_r[n]||QJe()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=mce(i,t)),i.read()};function QJe(){let t=sYe(()=>(qe=null,an.getStructures()));return _r=an._mergeStructures(t,_r)}var GF=u2,XJe=u2,ZJe=u2,eYe=u2;Ur.isNativeAccelerationEnabled=!1;function Jlr(t){Ur.isNativeAccelerationEnabled=!0,GF=e(1),XJe=e(2),ZJe=e(3),eYe=e(5);function e(r){return function(i){let s=a2[n8++];if(s==null){if(os)return u2(i);let a=qe.byteOffset,u=t(J-r+a,Iu+a,qe.buffer);if(typeof u=="string")s=u,a2=fce;else if(a2=u,n8=1,Vc=1,s=a2[0],s===void 0)throw new Error("Unexpected end of buffer")}let o=s.length;return o<=i?(J+=i,s):(Qf=s,xu=J,Vc=J+o,J+=i,s.slice(0,i))}}}function u2(t){let e;if(t<16&&(e=yce(t)))return e;if(t>64&&ace)return ace.decode(qe.subarray(J,J+=t));let r=J+t,n=[];for(e="";J<r;){let i=qe[J++];if((i&128)===0)n.push(i);else if((i&224)===192){let s=qe[J++]&63;n.push((i&31)<<6|s)}else if((i&240)===224){let s=qe[J++]&63,o=qe[J++]&63;n.push((i&31)<<12|s<<6|o)}else if((i&248)===240){let s=qe[J++]&63,o=qe[J++]&63,a=qe[J++]&63,u=(i&7)<<18|s<<12|o<<6|a;u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u)}else n.push(i);n.length>=4096&&(e+=Ts.apply(String,n),n.length=0)}return n.length>0&&(e+=Ts.apply(String,n)),e}function Ylr(t,e,r){let n=qe;qe=t,J=e;try{return u2(r)}finally{qe=n}}function qJe(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=Ii();return an.freezeData?Object.freeze(e):e}function LJe(t){if(an.mapsAsObjects){let e={};for(let r=0;r<t;r++){let n=rYe();n==="__proto__"&&(n="__proto_"),e[n]=Ii()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(Ii(),Ii());return e}}var Ts=String.fromCharCode;function tYe(t){let e=J,r=new Array(t);for(let n=0;n<t;n++){let i=qe[J++];if((i&128)>0){J=e;return}r[n]=i}return Ts.apply(String,r)}function yce(t){if(t<4)if(t<2){if(t===0)return"";{let e=qe[J++];if((e&128)>1){J-=1;return}return Ts(e)}}else{let e=qe[J++],r=qe[J++];if((e&128)>0||(r&128)>0){J-=2;return}if(t<3)return Ts(e,r);let n=qe[J++];if((n&128)>0){J-=3;return}return Ts(e,r,n)}else{let e=qe[J++],r=qe[J++],n=qe[J++],i=qe[J++];if((e&128)>0||(r&128)>0||(n&128)>0||(i&128)>0){J-=4;return}if(t<6){if(t===4)return Ts(e,r,n,i);{let s=qe[J++];if((s&128)>0){J-=5;return}return Ts(e,r,n,i,s)}}else if(t<8){let s=qe[J++],o=qe[J++];if((s&128)>0||(o&128)>0){J-=6;return}if(t<7)return Ts(e,r,n,i,s,o);let a=qe[J++];if((a&128)>0){J-=7;return}return Ts(e,r,n,i,s,o,a)}else{let s=qe[J++],o=qe[J++],a=qe[J++],u=qe[J++];if((s&128)>0||(o&128)>0||(a&128)>0||(u&128)>0){J-=8;return}if(t<10){if(t===8)return Ts(e,r,n,i,s,o,a,u);{let c=qe[J++];if((c&128)>0){J-=9;return}return Ts(e,r,n,i,s,o,a,u,c)}}else if(t<12){let c=qe[J++],l=qe[J++];if((c&128)>0||(l&128)>0){J-=10;return}if(t<11)return Ts(e,r,n,i,s,o,a,u,c,l);let d=qe[J++];if((d&128)>0){J-=11;return}return Ts(e,r,n,i,s,o,a,u,c,l,d)}else{let c=qe[J++],l=qe[J++],d=qe[J++],p=qe[J++];if((c&128)>0||(l&128)>0||(d&128)>0||(p&128)>0){J-=12;return}if(t<14){if(t===12)return Ts(e,r,n,i,s,o,a,u,c,l,d,p);{let f=qe[J++];if((f&128)>0){J-=13;return}return Ts(e,r,n,i,s,o,a,u,c,l,d,p,f)}}else{let f=qe[J++],h=qe[J++];if((f&128)>0||(h&128)>0){J-=14;return}if(t<15)return Ts(e,r,n,i,s,o,a,u,c,l,d,p,f,h);let g=qe[J++];if((g&128)>0){J-=15;return}return Ts(e,r,n,i,s,o,a,u,c,l,d,p,f,h,g)}}}}}function jJe(){let t=qe[J++],e;if(t<192)e=t-160;else switch(t){case 217:e=qe[J++];break;case 218:e=mr.getUint16(J),J+=2;break;case 219:e=mr.getUint32(J),J+=4;break;default:throw new Error("Expected string")}return u2(e)}function ice(t){return an.copyBuffers?Uint8Array.prototype.slice.call(qe,J,J+=t):qe.subarray(J,J+=t)}function s2(t){let e=qe[J++];if(Co[e]){let r;return Co[e](qe.subarray(J,r=J+=t),n=>{J=n;try{return Ii()}finally{J=r}})}else throw new Error("Unknown extension type "+e)}var $Je=new Array(4096);function rYe(){let t=qe[J++];if(t>=160&&t<192){if(t=t-160,Vc>=J)return Qf.slice(J-xu,(J+=t)-xu);if(!(Vc==0&&Iu<180))return GF(t)}else return J--,nYe(Ii());let e=(t<<5^(t>1?mr.getUint16(J):t>0?qe[J]:0))&4095,r=$Je[e],n=J,i=J+t-3,s,o=0;if(r&&r.bytes==t){for(;n<i;){if(s=mr.getUint32(n),s!=r[o++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(s=qe[n++],s!=r[o++]){n=1879048192;break}if(n===i)return J=n,r.string;i-=3,n=J}for(r=[],$Je[e]=r,r.bytes=t;n<i;)s=mr.getUint32(n),r.push(s),n+=4;for(i+=3;n<i;)s=qe[n++],r.push(s);let a=t<16?yce(t):tYe(t);return a!=null?r.string=a:r.string=GF(t)}function nYe(t){if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";if(an.allowArraysInMapKeys&&Array.isArray(t)&&t.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return t.flat().toString();throw new Error(`Invalid property type for record: ${typeof t}`)}var KJe=(t,e)=>{let r=Ii().map(nYe),n=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let i=_r[t];return i&&(i.isShared||Cm)&&((_r.restoreStructures||(_r.restoreStructures=[]))[t]=i),_r[t]=r,r.read=mce(r,n),r.read()};Co[0]=()=>{};Co[0].noBuffer=!0;Co[66]=t=>{let e=t.byteLength%8||8,r=BigInt(t[0]&128?t[0]-256:t[0]);for(let n=1;n<e;n++)r<<=BigInt(8),r+=BigInt(t[n]);if(t.byteLength!==e){let n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=(s,o)=>{let a=o-s;if(a<=40){let d=n.getBigUint64(s);for(let p=s+8;p<o;p+=8)d<<=64n,d|=n.getBigUint64(p);return d}let u=s+(a>>4<<3),c=i(s,u),l=i(u,o);return c<<BigInt((o-u)*8)|l};r=r<<BigInt((n.byteLength-e)*8)|i(e,n.byteLength)}return r};var UJe={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:typeof AggregateError=="function"?AggregateError:null};Co[101]=()=>{let t=Ii();if(!UJe[t[0]]){let e=Error(t[1],{cause:t[2]});return e.name=t[0],e}return UJe[t[0]](t[1],{cause:t[2]})};Co[105]=t=>{if(an.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=mr.getUint32(J-4);Xf||(Xf=new Map);let r=qe[J],n;r>=144&&r<160||r==220||r==221?n=[]:r>=128&&r<144||r==222||r==223?n=new Map:(r>=199&&r<=201||r>=212&&r<=216)&&qe[J+1]===115?n=new Set:n={};let i={target:n};Xf.set(e,i);let s=Ii();if(i.used)Object.assign(n,s);else return i.target=s;if(n instanceof Map)for(let[o,a]of s.entries())n.set(o,a);if(n instanceof Set)for(let o of Array.from(s))n.add(o);return n};Co[112]=t=>{if(an.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=mr.getUint32(J-4),r=Xf.get(e);return r.used=!0,r.target};Co[115]=()=>new Set(Ii());var iYe=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array"),Qlr=typeof globalThis=="object"?globalThis:window;Co[116]=t=>{let e=t[0],r=Uint8Array.prototype.slice.call(t,1).buffer,n=iYe[e];if(!n){if(e===16)return r;if(e===17)return new DataView(r);throw new Error("Could not find typed array for code "+e)}return new Qlr[n](r)};Co[120]=()=>{let t=Ii();return new RegExp(t[0],t[1])};var Xlr=[];Co[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=J;return J+=e-t.length,os=Xlr,os=[jJe(),jJe()],os.position0=0,os.position1=0,os.postBundlePosition=J,J=r,Ii()};Co[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function sYe(t){lce&&lce();let e=Iu,r=J,n=n8,i=xu,s=Vc,o=Qf,a=a2,u=Xf,c=os,l=new Uint8Array(qe.slice(0,Iu)),d=_r,p=_r.slice(0,_r.length),f=an,h=Cm,g=t();return Iu=e,J=r,n8=n,xu=i,Vc=s,Qf=o,a2=a,Xf=u,os=c,qe=l,Cm=h,_r=d,_r.splice(0,_r.length,...p),an=f,mr=new DataView(qe.buffer,qe.byteOffset,qe.byteLength),g}function HF(){qe=null,Xf=null,_r=null}function Zlr(t){t.unpack?Co[t.type]=t.unpack:Co[t.type]=t}var _4=new Array(147);for(let t=0;t<256;t++)_4[t]=+("1e"+Math.floor(45.15-t*.30103));var edr=Tm,YF=new Tm({useRecords:!1}),tdr=YF.unpack,rdr=YF.unpackMultiple,ndr=YF.unpack,oYe={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},aYe=new Float32Array(1),VJe=new Uint8Array(aYe.buffer,0,4);function idr(t){aYe[0]=t;let e=_4[(VJe[3]&127)<<1|VJe[2]>>7];return(e*t+(t>0?.5:-.5)>>0)/e}function sdr(t,e,r){uce=t,cce=e,lce=r}var $F;try{$F=new TextEncoder}catch{}var zF,gce,b4=typeof Buffer<"u",jF=b4?function(t){return Buffer.allocUnsafeSlow(t)}:Uint8Array,uYe=b4?Buffer:Uint8Array,GJe=b4?4294967296:2144337920,pe,t8,on,ee=0,Ao,Yn=null,cYe,odr=21760,adr=/[\u0080-\uFFFF]/,Yf=Symbol("record-id"),Om=class extends Tm{constructor(e){super(e),this.offset=0;let r,n,i,s,o=uYe.prototype.utf8Write?function(k,H){return pe.utf8Write(k,H,pe.byteLength-H)}:$F&&$F.encodeInto?function(k,H){return $F.encodeInto(k,pe.subarray(H)).written}:!1,a=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,l=e.maxSharedStructures;if(l==null&&(l=c?32:0),l>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let d=e.maxOwnStructures;d==null&&(d=c?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let p=l>32||d+l>64,f=l+64,h=l+d+64;if(h>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],_=0,S=0;this.pack=this.encode=function(k,H){if(pe||(pe=new jF(8192),on=pe.dataView||(pe.dataView=new DataView(pe.buffer,0,8192)),ee=0),Ao=pe.length-10,Ao-ee<2048?(pe=new jF(pe.length),on=pe.dataView||(pe.dataView=new DataView(pe.buffer,0,pe.length)),Ao=pe.length-10,ee=0):ee=ee+7&2147483640,r=ee,H&_dr&&(ee+=H&255),s=a.structuredClone?new Map:null,a.bundleStrings&&typeof k!="string"?(Yn=[],Yn.size=1/0):Yn=null,i=a.structures,i){i.uninitialized&&(i=a._mergeStructures(a.getStructures()));let j=i.sharedLength||0;if(j>l)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let V=0;V<j;V++){let Ee=i[V];if(!Ee)continue;let Re,fe=i.transitions;for(let Ve=0,Me=Ee.length;Ve<Me;Ve++){let Ce=Ee[Ve];Re=fe[Ce],Re||(Re=fe[Ce]=Object.create(null)),fe=Re}fe[Yf]=V+64}this.lastNamedStructuresLength=j}u||(i.nextId=j+64)}n&&(n=!1);let ie;try{a.randomAccessStructure&&k&&k.constructor&&k.constructor===Object?U(k):A(k);let j=Yn;if(Yn&&zJe(r,A,0),s&&s.idsToInsert){let V=s.idsToInsert.sort((Ve,Me)=>Ve.offset>Me.offset?1:-1),Ee=V.length,Re=-1;for(;j&&Ee>0;){let Ve=V[--Ee].offset+r;Ve<j.stringsPosition+r&&Re===-1&&(Re=0),Ve>j.position+r?Re>=0&&(Re+=6):(Re>=0&&(on.setUint32(j.position+r,on.getUint32(j.position+r)+Re),Re=-1),j=j.previous,Ee++)}Re>=0&&j&&on.setUint32(j.position+r,on.getUint32(j.position+r)+Re),ee+=V.length*6,ee>Ao&&I(ee),a.offset=ee;let fe=udr(pe.subarray(r,ee),V);return s=null,fe}return a.offset=ee,H&Edr?(pe.start=r,pe.end=ee,pe):pe.subarray(r,ee)}catch(j){throw ie=j,j}finally{if(i&&(w(),n&&a.saveStructures)){let j=i.sharedLength||0,V=pe.subarray(r,ee),Ee=lYe(i,a);if(!ie)return a.saveStructures(Ee,Ee.isCompatible)===!1?a.pack(k,H):(a.lastNamedStructuresLength=j,pe.length>1073741824&&(pe=null),V)}pe.length>1073741824&&(pe=null),H&bdr&&(ee=r)}};let w=()=>{S<10&&S++;let k=i.sharedLength||0;if(i.length>k&&!u&&(i.length=k),_>1e4)i.transitions=null,S=0,_=0,g.length>0&&(g=[]);else if(g.length>0&&!u){for(let H=0,ie=g.length;H<ie;H++)g[H][Yf]=0;g=[]}},C=k=>{var H=k.length;H<16?pe[ee++]=144|H:H<65536?(pe[ee++]=220,pe[ee++]=H>>8,pe[ee++]=H&255):(pe[ee++]=221,on.setUint32(ee,H),ee+=4);for(let ie=0;ie<H;ie++)A(k[ie])},A=k=>{ee>Ao&&(pe=I(ee));var H=typeof k,ie;if(H==="string"){let j=k.length;if(Yn&&j>=4&&j<4096){if((Yn.size+=j)>odr){let fe,Ve=(Yn[0]?Yn[0].length*3+Yn[1].length:0)+10;ee+Ve>Ao&&(pe=I(ee+Ve));let Me;Yn.position?(Me=Yn,pe[ee]=200,ee+=3,pe[ee++]=98,fe=ee-r,ee+=4,zJe(r,A,0),on.setUint16(fe+r-3,ee-r-fe)):(pe[ee++]=214,pe[ee++]=98,fe=ee-r,ee+=4),Yn=["",""],Yn.previous=Me,Yn.size=0,Yn.position=fe}let Re=adr.test(k);Yn[Re?0:1]+=k,pe[ee++]=193,A(Re?-j:j);return}let V;j<32?V=1:j<256?V=2:j<65536?V=3:V=5;let Ee=j*3;if(ee+Ee>Ao&&(pe=I(ee+Ee)),j<64||!o){let Re,fe,Ve,Me=ee+V;for(Re=0;Re<j;Re++)fe=k.charCodeAt(Re),fe<128?pe[Me++]=fe:fe<2048?(pe[Me++]=fe>>6|192,pe[Me++]=fe&63|128):(fe&64512)===55296&&((Ve=k.charCodeAt(Re+1))&64512)===56320?(fe=65536+((fe&1023)<<10)+(Ve&1023),Re++,pe[Me++]=fe>>18|240,pe[Me++]=fe>>12&63|128,pe[Me++]=fe>>6&63|128,pe[Me++]=fe&63|128):(pe[Me++]=fe>>12|224,pe[Me++]=fe>>6&63|128,pe[Me++]=fe&63|128);ie=Me-ee-V}else ie=o(k,ee+V);ie<32?pe[ee++]=160|ie:ie<256?(V<2&&pe.copyWithin(ee+2,ee+1,ee+1+ie),pe[ee++]=217,pe[ee++]=ie):ie<65536?(V<3&&pe.copyWithin(ee+3,ee+2,ee+2+ie),pe[ee++]=218,pe[ee++]=ie>>8,pe[ee++]=ie&255):(V<5&&pe.copyWithin(ee+5,ee+3,ee+3+ie),pe[ee++]=219,on.setUint32(ee,ie),ee+=4),ee+=ie}else if(H==="number")if(k>>>0===k)k<32||k<128&&this.useRecords===!1||k<64&&!this.randomAccessStructure?pe[ee++]=k:k<256?(pe[ee++]=204,pe[ee++]=k):k<65536?(pe[ee++]=205,pe[ee++]=k>>8,pe[ee++]=k&255):(pe[ee++]=206,on.setUint32(ee,k),ee+=4);else if(k>>0===k)k>=-32?pe[ee++]=256+k:k>=-128?(pe[ee++]=208,pe[ee++]=k+256):k>=-32768?(pe[ee++]=209,on.setInt16(ee,k),ee+=2):(pe[ee++]=210,on.setInt32(ee,k),ee+=4);else{let j;if((j=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){pe[ee++]=202,on.setFloat32(ee,k);let V;if(j<4||(V=k*_4[(pe[ee]&127)<<1|pe[ee+1]>>7])>>0===V){ee+=4;return}else ee--}pe[ee++]=203,on.setFloat64(ee,k),ee+=8}else if(H==="object"||H==="function")if(!k)pe[ee++]=192;else{if(s){let V=s.get(k);if(V){if(!V.id){let Ee=s.idsToInsert||(s.idsToInsert=[]);V.id=Ee.push(V)}pe[ee++]=214,pe[ee++]=112,on.setUint32(ee,V.id),ee+=4;return}else s.set(k,{offset:ee-r})}let j=k.constructor;if(j===Object)M(k);else if(j===Array)C(k);else if(j===Map)if(this.mapAsEmptyObject)pe[ee++]=128;else{ie=k.size,ie<16?pe[ee++]=128|ie:ie<65536?(pe[ee++]=222,pe[ee++]=ie>>8,pe[ee++]=ie&255):(pe[ee++]=223,on.setUint32(ee,ie),ee+=4);for(let[V,Ee]of k)A(V),A(Ee)}else{for(let V=0,Ee=zF.length;V<Ee;V++){let Re=gce[V];if(k instanceof Re){let fe=zF[V];if(fe.write){fe.type&&(pe[ee++]=212,pe[ee++]=fe.type,pe[ee++]=0);let _t=fe.write.call(this,k);_t===k?Array.isArray(k)?C(k):M(k):A(_t);return}let Ve=pe,Me=on,Ce=ee;pe=null;let Rr;try{Rr=fe.pack.call(this,k,_t=>(pe=Ve,Ve=null,ee+=_t,ee>Ao&&I(ee),{target:pe,targetView:on,position:ee-_t}),A)}finally{Ve&&(pe=Ve,on=Me,ee=Ce,Ao=pe.length-10)}Rr&&(Rr.length+ee>Ao&&I(Rr.length+ee),ee=HJe(Rr,pe,ee,fe.type));return}}if(Array.isArray(k))C(k);else{if(k.toJSON){let V=k.toJSON();if(V!==k)return A(V)}if(H==="function")return A(this.writeFunction&&this.writeFunction(k));M(k)}}}else if(H==="boolean")pe[ee++]=k?195:194;else if(H==="bigint"){if(k<9223372036854776e3&&k>=-9223372036854776e3)pe[ee++]=211,on.setBigInt64(ee,k);else if(k<18446744073709552e3&&k>0)pe[ee++]=207,on.setBigUint64(ee,k);else if(this.largeBigIntToFloat)pe[ee++]=203,on.setFloat64(ee,Number(k));else{if(this.largeBigIntToString)return A(k.toString());if(this.useBigIntExtension||this.moreTypes){let j=k<0?BigInt(-1):BigInt(0),V;if(k>>BigInt(65536)===j){let Ee=BigInt(18446744073709552e3)-BigInt(1),Re=[];for(;Re.push(k&Ee),k>>BigInt(63)!==j;)k>>=BigInt(64);V=new Uint8Array(new BigUint64Array(Re).buffer),V.reverse()}else{let Ee=k<0,Re=(Ee?~k:k).toString(16);if(Re.length%2?Re="0"+Re:parseInt(Re.charAt(0),16)>=8&&(Re="00"+Re),b4)V=Buffer.from(Re,"hex");else{V=new Uint8Array(Re.length/2);for(let fe=0;fe<V.length;fe++)V[fe]=parseInt(Re.slice(fe*2,fe*2+2),16)}if(Ee)for(let fe=0;fe<V.length;fe++)V[fe]=~V[fe]}V.length+ee>Ao&&I(V.length+ee),ee=HJe(V,pe,ee,66);return}else throw new RangeError(k+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}ee+=8}else if(H==="undefined")this.encodeUndefinedAsNil?pe[ee++]=192:(pe[ee++]=212,pe[ee++]=0,pe[ee++]=0);else throw new Error("Unknown type: "+H)},O=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?k=>{let H;if(this.skipValues){H=[];for(let V in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(V))&&!this.skipValues.includes(k[V])&&H.push(V)}else H=Object.keys(k);let ie=H.length;ie<16?pe[ee++]=128|ie:ie<65536?(pe[ee++]=222,pe[ee++]=ie>>8,pe[ee++]=ie&255):(pe[ee++]=223,on.setUint32(ee,ie),ee+=4);let j;if(this.coercibleKeyAsNumber)for(let V=0;V<ie;V++){j=H[V];let Ee=Number(j);A(isNaN(Ee)?j:Ee),A(k[j])}else for(let V=0;V<ie;V++)A(j=H[V]),A(k[j])}:k=>{pe[ee++]=222;let H=ee-r;ee+=2;let ie=0;for(let j in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(j))&&(A(j),A(k[j]),ie++);if(ie>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');pe[H+++r]=ie>>8,pe[H+r]=ie&255},x=this.useRecords===!1?O:e.progressiveRecords&&!p?k=>{let H,ie=i.transitions||(i.transitions=Object.create(null)),j=ee++-r,V;for(let Ee in k)if(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Ee)){if(H=ie[Ee],H)ie=H;else{let Re=Object.keys(k),fe=ie;ie=i.transitions;let Ve=0;for(let Me=0,Ce=Re.length;Me<Ce;Me++){let Rr=Re[Me];H=ie[Rr],H||(H=ie[Rr]=Object.create(null),Ve++),ie=H}j+r+1==ee?(ee--,F(ie,Re,Ve)):B(ie,Re,j,Ve),V=!0,ie=fe[Ee]}A(k[Ee])}if(!V){let Ee=ie[Yf];Ee?pe[j+r]=Ee:B(ie,Object.keys(k),j,0)}}:k=>{let H,ie=i.transitions||(i.transitions=Object.create(null)),j=0;for(let Ee in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Ee))&&(H=ie[Ee],H||(H=ie[Ee]=Object.create(null),j++),ie=H);let V=ie[Yf];V?V>=96&&p?(pe[ee++]=((V-=96)&31)+96,pe[ee++]=V>>5):pe[ee++]=V:F(ie,ie.__keys__||Object.keys(k),j);for(let Ee in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Ee))&&A(k[Ee])},R=typeof this.useRecords=="function"&&this.useRecords,M=R?k=>{R(k)?x(k):O(k)}:x,I=k=>{let H;if(k>16777216){if(k-r>GJe)throw new Error("Packed buffer would be larger than maximum buffer size");H=Math.min(GJe,Math.round(Math.max((k-r)*(k>67108864?1.25:2),4194304)/4096)*4096)}else H=(Math.max(k-r<<2,pe.length-1)>>12)+1<<12;let ie=new jF(H);return on=ie.dataView||(ie.dataView=new DataView(ie.buffer,0,H)),k=Math.min(k,pe.length),pe.copy?pe.copy(ie,0,r,k):ie.set(pe.slice(r,k)),ee-=r,r=0,Ao=ie.length-10,pe=ie},F=(k,H,ie)=>{let j=i.nextId;j||(j=64),j<f&&this.shouldShareStructure&&!this.shouldShareStructure(H)?(j=i.nextOwnId,j<h||(j=f),i.nextOwnId=j+1):(j>=h&&(j=f),i.nextId=j+1);let V=H.highByte=j>=96&&p?j-96>>5:-1;k[Yf]=j,k.__keys__=H,i[j-64]=H,j<f?(H.isShared=!0,i.sharedLength=j-63,n=!0,V>=0?(pe[ee++]=(j&31)+96,pe[ee++]=V):pe[ee++]=j):(V>=0?(pe[ee++]=213,pe[ee++]=114,pe[ee++]=(j&31)+96,pe[ee++]=V):(pe[ee++]=212,pe[ee++]=114,pe[ee++]=j),ie&&(_+=S*ie),g.length>=d&&(g.shift()[Yf]=0),g.push(k),A(H))},B=(k,H,ie,j)=>{let V=pe,Ee=ee,Re=Ao,fe=r;pe=t8,ee=0,r=0,pe||(t8=pe=new jF(8192)),Ao=pe.length-10,F(k,H,j),t8=pe;let Ve=ee;if(pe=V,ee=Ee,Ao=Re,r=fe,Ve>1){let Me=ee+Ve-1;Me>Ao&&I(Me);let Ce=ie+r;pe.copyWithin(Ce+Ve,Ce+1,ee),pe.set(t8.slice(0,Ve),Ce),ee=Me}else pe[ie+r]=t8[0]},U=k=>{let H=cYe(k,pe,r,ee,i,I,(ie,j,V)=>{if(V)return n=!0;ee=j;let Ee=pe;return A(ie),w(),Ee!==pe?{position:ee,targetView:on,target:pe}:ee},this);if(H===0)return M(k);ee=H}}useBuffer(e){pe=e,pe.dataView||(pe.dataView=new DataView(pe.buffer,pe.byteOffset,pe.byteLength)),on=pe.dataView,ee=0}set position(e){ee=e}get position(){return ee}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}};gce=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,VF];zF=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:s,position:o}=e(6);i[o++]=214,i[o++]=255,s.setUint32(o,n)}else if(n>0&&n<4294967296){let{target:i,targetView:s,position:o}=e(10);i[o++]=215,i[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:i,targetView:s,position:o}=e(3);i[o++]=212,i[o++]=255,i[o++]=255}else{let{target:i,targetView:s,position:o}=e(15);i[o++]=199,i[o++]=12,i[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){if(this.setAsEmptyObject)return e(0),r({});let n=Array.from(t),{target:i,position:s}=e(this.moreTypes?3:0);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),r(n)}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),r([t.name,t.message,t.cause])}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),r([t.source,t.flags])}},{pack(t,e){this.moreTypes?sce(t,16,e):oce(b4?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==uYe&&this.moreTypes?sce(t,iYe.indexOf(r.name),e):oce(t,e)}},{pack(t,e){this.moreTypes?sce(t,17,e):oce(b4?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];function sce(t,e,r,n){let i=t.byteLength;if(i+1<256){var{target:s,position:o}=r(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=r(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:a}=r(7+i);s[o++]=201,a.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=e,t.buffer||(t=new Uint8Array(t)),s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function oce(t,e){let r=t.byteLength;var n,i;if(r<256){var{target:n,position:i}=e(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=e(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=r&255}else{var{target:n,position:i,targetView:s}=e(r+5);n[i++]=198,s.setUint32(i,r),i+=4}n.set(t,i)}function HJe(t,e,r,n){let i=t.length;switch(i){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:i<256?(e[r++]=199,e[r++]=i):i<65536?(e[r++]=200,e[r++]=i>>8,e[r++]=i&255):(e[r++]=201,e[r++]=i>>24,e[r++]=i>>16&255,e[r++]=i>>8&255,e[r++]=i&255)}return e[r++]=n,e.set(t,r),r+=i,r}function udr(t,e){let r,n=e.length*6,i=t.length-n;for(;r=e.pop();){let s=r.offset,o=r.id;t.copyWithin(s+n,s,i),n-=6;let a=s+n;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,i=s}return t}function zJe(t,e,r){if(Yn.length>0){on.setUint32(Yn.position+t,ee+r-Yn.position-t),Yn.stringsPosition=ee-t;let n=Yn;Yn=null,e(n[0]),e(n[1])}}function cdr(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");gce.unshift(t.Class),zF.unshift(t)}Zlr(t)}function lYe(t,e){return t.isCompatible=r=>{let n=!r||(e.lastNamedStructuresLength||0)===r.length;return n||e._mergeStructures(r),n},t}function ldr(t,e){cYe=t,lYe=e}var dYe=new Om({useRecords:!1}),ddr=dYe.pack,pdr=dYe.pack,fdr=Om,{NEVER:hdr,ALWAYS:mdr,DECIMAL_ROUND:ydr,DECIMAL_FIT:gdr}=oYe,Edr=512,bdr=1024,_dr=2048,dce=3,E4=0,r8=2,KF=1,Ece=16,pYe=["num","object","string","ascii"];pYe[Ece]="date";var vdr=[!1,!0,!0,!1,!1,!0,!0,!1],fYe;try{new Function(""),fYe=!0}catch{}var o2,Sdr=typeof Buffer<"u",UF,lp;try{UF=new TextEncoder}catch{}var wdr=Sdr?function(t,e,r){return t.utf8Write(e,r,t.byteLength-r)}:UF&&UF.encodeInto?function(t,e,r){return UF.encodeInto(e,t.subarray(r)).written}:!1;ldr(hYe,xdr);function hYe(t,e,r,n,i,s,o,a){let u=a.typedStructs||(a.typedStructs=[]),c=e.dataView,l=(u.lastStringStart||100)+n,d=e.length-10,p=n;n>d&&(e=s(n),c=e.dataView,n-=r,p-=r,l-=r,r=0,d=e.length-10);let f,h=l,g=u.transitions||(u.transitions=Object.create(null)),_=u.nextId||u.length,S=_<15?1:_<240?2:_<61440?3:_<15728640?4:0;if(S===0)return 0;n+=S;let w=[],C,A=0;for(let x in t){let R=t[x],M=g[x];switch(M||(g[x]=M={key:x,parent:g,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),n>d&&(e=s(n),c=e.dataView,n-=r,p-=r,l-=r,h-=r,r=0,d=e.length-10),typeof R){case"number":let I=R;if(_<200||!M.num64){if(I>>0===I&&I<536870912&&I>-520093696){I<246&&I>=0&&(M.num8&&!(_>200&&M.num32)||I<32&&!M.num32)?(g=M.num8||Va(M,E4,1),e[n++]=I):(g=M.num32||Va(M,E4,4),c.setUint32(n,I,!0),n+=4);break}else if(I<4294967296&&I>=-2147483648&&(c.setFloat32(n,I,!0),vdr[e[n+3]>>>5])){let k;if((k=I*_4[(e[n+3]&127)<<1|e[n+2]>>7])>>0===k){g=M.num32||Va(M,E4,4),n+=4;break}}}g=M.num64||Va(M,E4,8),c.setFloat64(n,I,!0),n+=8;break;case"string":let F=R.length;if(f=h-l,(F<<2)+h>d&&(e=s((F<<2)+h),c=e.dataView,n-=r,p-=r,l-=r,h-=r,r=0,d=e.length-10),F>65280+f>>2){w.push(x,R,n-p);break}let B,U=h;if(F<64){let k,H,ie;for(k=0;k<F;k++)H=R.charCodeAt(k),H<128?e[h++]=H:H<2048?(B=!0,e[h++]=H>>6|192,e[h++]=H&63|128):(H&64512)===55296&&((ie=R.charCodeAt(k+1))&64512)===56320?(B=!0,H=65536+((H&1023)<<10)+(ie&1023),k++,e[h++]=H>>18|240,e[h++]=H>>12&63|128,e[h++]=H>>6&63|128,e[h++]=H&63|128):(B=!0,e[h++]=H>>12|224,e[h++]=H>>6&63|128,e[h++]=H&63|128)}else h+=wdr(e,R,h),B=h-U>F;if(f<160||f<246&&(M.ascii8||M.string8)){if(B)(g=M.string8)||(u.length>10&&(g=M.ascii8)?(g.__type=r8,M.ascii8=null,M.string8=g,o(null,0,!0)):g=Va(M,r8,1));else if(f===0&&!C){C=!0,g=M.ascii0||Va(M,dce,0);break}else!(g=M.ascii8)&&!(u.length>10&&(g=M.string8))&&(g=Va(M,dce,1));e[n++]=f}else g=M.string16||Va(M,r8,2),c.setUint16(n,f,!0),n+=2;break;case"object":if(R){R.constructor===Date?(g=M.date64||Va(M,Ece,8),c.setFloat64(n,R.getTime(),!0),n+=8):w.push(x,R,A);break}else M=WJe(M,n,c,-10),M?(g=M,n=o2):w.push(x,R,A);break;case"boolean":g=M.num8||M.ascii8||Va(M,E4,1),e[n++]=R?249:248;break;case"undefined":M=WJe(M,n,c,-9),M?(g=M,n=o2):w.push(x,R,A);break;default:w.push(x,R,A)}A++}for(let x=0,R=w.length;x<R;){let M=w[x++],I=w[x++],F=w[x++],B=g[M];B||(g[M]=B={key:M,parent:g,enumerationOffset:F-A,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null});let U;if(I){let k;f=h-l,f<65280?(g=B.object16,g?k=2:(g=B.object32)?k=4:(g=Va(B,KF,2),k=2)):(g=B.object32||Va(B,KF,4),k=4),U=o(I,h),typeof U=="object"?(h=U.position,c=U.targetView,e=U.target,l-=r,n-=r,p-=r,r=0):h=U,k===2?(c.setUint16(n,f,!0),n+=2):(c.setUint32(n,f,!0),n+=4)}else g=B.object16||Va(B,KF,2),c.setInt16(n,I===null?-10:-9,!0),n+=2;A++}let O=g[Yf];if(O==null){O=a.typedStructs.length;let x=[],R=g,M,I;for(;(I=R.__type)!==void 0;){let F=R.__size;R=R.__parent,M=R.key;let B=[I,F,M];R.enumerationOffset&&B.push(R.enumerationOffset),x.push(B),R=R.parent}x.reverse(),g[Yf]=O,a.typedStructs[O]=x,o(null,0,!0)}switch(S){case 1:if(O>=16)return 0;e[p]=O+32;break;case 2:if(O>=256)return 0;e[p]=56,e[p+1]=O;break;case 3:if(O>=65536)return 0;e[p]=57,c.setUint16(p+1,O,!0);break;case 4:if(O>=16777216)return 0;c.setUint32(p,(O<<8)+58,!0);break}if(n<l){if(l===h)return n;e.copyWithin(n,l,h),h+=n-l,u.lastStringStart=n-p}else if(n>l)return l===h?n:(u.lastStringStart=n-p,hYe(t,e,r,p,i,s,o,a));return h}function WJe(t,e,r,n){let i;if(i=t.ascii8||t.num8)return r.setInt8(e,n,!0),o2=e+1,i;if(i=t.string16||t.object16)return r.setInt16(e,n,!0),o2=e+2,i;if(i=t.num32)return r.setUint32(e,3758096640+n,!0),o2=e+4,i;if(i=t.num64)return r.setFloat64(e,NaN,!0),r.setInt8(e,n),o2=e+8,i;o2=e}function Va(t,e,r){let n=pYe[e]+(r<<3),i=t[n]||(t[n]=Object.create(null));return i.__type=e,i.__size=r,i.__parent=t,i}function Adr(t){if(!(t instanceof Map))return t;let e=t.get("typed")||[];Object.isFrozen(e)&&(e=e.map(i=>i.slice(0)));let r=t.get("named"),n=Object.create(null);for(let i=0,s=e.length;i<s;i++){let o=e[i],a=n;for(let[u,c,l]of o){let d=a[l];d||(a[l]=d={key:l,parent:a,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),a=Va(d,u,c)}a[Yf]=i}return e.transitions=n,this.typedStructs=e,this.lastTypedStructuresLength=e.length,r}var pce=Symbol.for("source");function Cdr(t,e,r,n){let i=t[e++]-32;if(i>=24)switch(i){case 24:i=t[e++];break;case 25:i=t[e++]+(t[e++]<<8);break;case 26:i=t[e++]+(t[e++]<<8)+(t[e++]<<16);break;case 27:i=t[e++]+(t[e++]<<8)+(t[e++]<<16)+(t[e++]<<24);break}let s=n.typedStructs&&n.typedStructs[i];if(!s){if(t=Uint8Array.prototype.slice.call(t,e,r),r-=e,e=0,!n.getStructures)throw new Error(`Reference to shared structure ${i} without getStructures method`);if(n._mergeStructures(n.getStructures()),!n.typedStructs)throw new Error("Could not find any shared typed structures");if(n.lastTypedStructuresLength=n.typedStructs.length,s=n.typedStructs[i],!s)throw new Error("Could not find typed structure "+i)}var o=s.construct,a=s.fullConstruct;if(!o){o=s.construct=function(){},a=s.fullConstruct=function(){},a.prototype=n.structPrototype||{};var u=o.prototype=n.structPrototype?Object.create(n.structPrototype):{};let l=[],d=0,p;for(let f=0,h=s.length;f<h;f++){let g=s[f],[_,S,w,C]=g;w==="__proto__"&&(w="__proto_");let A={key:w,offset:d};C?l.splice(f+C,0,A):l.push(A);let O;switch(S){case 0:O=()=>0;break;case 1:O=(R,M)=>{let I=R.bytes[M+A.offset];return I>=246?g4(I):I};break;case 2:O=(R,M)=>{let I=R.bytes,B=(I.dataView||(I.dataView=new DataView(I.buffer,I.byteOffset,I.byteLength))).getUint16(M+A.offset,!0);return B>=65280?g4(B&255):B};break;case 4:O=(R,M)=>{let I=R.bytes,B=(I.dataView||(I.dataView=new DataView(I.buffer,I.byteOffset,I.byteLength))).getUint32(M+A.offset,!0);return B>=4294967040?g4(B&255):B};break}A.getRef=O,d+=S;let x;switch(_){case dce:p&&!p.next&&(p.next=A),p=A,A.multiGetCount=0,x=function(R){let M=R.bytes,I=R.position,F=d+I,B=O(R,I);if(typeof B!="number")return B;let U,k=A.next;for(;k&&(U=k.getRef(R,I),typeof U!="number");)U=null,k=k.next;return U==null&&(U=R.bytesEnd-F),R.srcString?R.srcString.slice(B,U):Ylr(M,B+F,U-B)};break;case r8:case KF:p&&!p.next&&(p.next=A),p=A,x=function(R){let M=R.position,I=d+M,F=O(R,M);if(typeof F!="number")return F;let B=R.bytes,U,k=A.next;for(;k&&(U=k.getRef(R,M),typeof U!="number");)U=null,k=k.next;if(U==null&&(U=R.bytesEnd-I),_===r8)return B.toString("utf8",F+I,U+I);lp=R;try{return n.unpack(B,{start:F+I,end:U+I})}finally{lp=null}};break;case E4:switch(S){case 4:x=function(R){let M=R.bytes,I=M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength)),F=R.position+A.offset,B=I.getInt32(F,!0);if(B<536870912){if(B>-520093696)return B;if(B>-536870912)return g4(B&255)}let U=I.getFloat32(F,!0),k=_4[(M[F+3]&127)<<1|M[F+2]>>7];return(k*U+(U>0?.5:-.5)>>0)/k};break;case 8:x=function(R){let M=R.bytes,F=(M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength))).getFloat64(R.position+A.offset,!0);if(isNaN(F)){let B=M[R.position+A.offset];if(B>=246)return g4(B)}return F};break;case 1:x=function(R){let I=R.bytes[R.position+A.offset];return I<246?I:g4(I)};break}break;case Ece:x=function(R){let M=R.bytes,I=M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength));return new Date(I.getFloat64(R.position+A.offset,!0))};break}A.get=x}if(fYe){let f=[],h=[],g=0,_;for(let w of l){if(n.alwaysLazyProperty&&n.alwaysLazyProperty(w.key)){_=!0;continue}Object.defineProperty(u,w.key,{get:Tdr(w.get),enumerable:!0});let C="v"+g++;h.push(C),f.push("o["+JSON.stringify(w.key)+"]="+C+"(s)")}_&&f.push("__proto__:this");let S=new Function(...h,"var c=this;return function(s){var o=new c();"+f.join(";")+";return o;}").apply(a,l.map(w=>w.get));Object.defineProperty(u,"toJSON",{value(w){return S.call(this,this[pce])}})}else Object.defineProperty(u,"toJSON",{value(f){let h={};for(let g=0,_=l.length;g<_;g++){let S=l[g].key;h[S]=this[S]}return h}})}var c=new o;return c[pce]={bytes:t,position:e,srcString:"",bytesEnd:r},c}function g4(t){switch(t){case 246:return null;case 247:return;case 248:return!1;case 249:return!0}throw new Error("Unknown constant")}function Tdr(t){return function(){return t(this[pce])}}function Odr(){lp&&(lp.bytes=Uint8Array.prototype.slice.call(lp.bytes,lp.position,lp.bytesEnd),lp.position=0,lp.bytesEnd=lp.bytes.length)}function xdr(t,e){if(e.typedStructs){let n=new Map;n.set("named",t),n.set("typed",e.typedStructs),t=n}let r=e.lastTypedStructuresLength||0;return t.isCompatible=n=>{let i=!0;return n instanceof Map?((n.get("named")||[]).length!==(e.lastNamedStructuresLength||0)&&(i=!1),(n.get("typed")||[]).length!==r&&(i=!1)):(n instanceof Array||Array.isArray(n))&&n.length!==(e.lastNamedStructuresLength||0)&&(i=!1),i||e._mergeStructures(n),i},e.lastTypedStructuresLength=e.typedStructs&&e.typedStructs.length,t}sdr(Cdr,Adr,Odr);var WF=class extends JJe.Transform{constructor(e){e||(e={}),e.writableObjectMode=!0,super(e),e.sequential=!0,this.packr=e.packr||new Om(e)}_transform(e,r,n){this.push(this.packr.pack(e)),n()}},JF=class extends JJe.Transform{constructor(e){e||(e={}),e.objectMode=!0,super(e),e.structures=[],this.unpackr=e.unpackr||new Tm(e)}_transform(e,r,n){this.incompleteBuffer&&(e=Buffer.concat([this.incompleteBuffer,e]),this.incompleteBuffer=null);let i;try{i=this.unpackr.unpackMultiple(e)}catch(s){if(s.incomplete)this.incompleteBuffer=e.slice(s.lastPosition),i=s.values;else throw s}finally{for(let s of i||[])s===null&&(s=this.getNullValue()),this.push(s)}n&&n()}getNullValue(){return Symbol.for(null)}};function Idr(t,e={}){if(!t||typeof t!="object")throw new Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable");if(typeof t[Symbol.iterator]=="function")return Rdr(t,e);if(typeof t.then=="function"||typeof t[Symbol.asyncIterator]=="function")return Ddr(t,e);throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}function*Rdr(t,e){let r=new Om(e);for(let n of t)yield r.pack(n)}async function*Ddr(t,e){let r=new Om(e);for await(let n of t)yield r.pack(n)}function kdr(t,e={}){if(!t||typeof t!="object")throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");let r=new Tm(e),n,i=s=>{let o;n&&(s=Buffer.concat([n,s]),n=void 0);try{o=r.unpackMultiple(s)}catch(a){if(a.incomplete)n=s.slice(a.lastPosition),o=a.values;else throw a}return o};if(typeof t[Symbol.iterator]=="function")return(function*(){for(let o of t)yield*i(o)})();if(typeof t[Symbol.asyncIterator]=="function")return(async function*(){for await(let o of t)yield*i(o)})()}var Mdr=kdr,Pdr=Idr,Ndr=!1,Fdr=!0,Bdr=process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED!==void 0&&process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED.toLowerCase()==="true";if(!Bdr){let t;try{typeof require=="function"?t=PJe():t=zlr.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("node.cjs",document.baseURI).href)("msgpackr-extract"),t&&Jlr(t.extractStrings)}catch{}}Ur.ALWAYS=mdr;Ur.C1=hce;Ur.DECIMAL_FIT=gdr;Ur.DECIMAL_ROUND=ydr;Ur.Decoder=edr;Ur.DecoderStream=JF;Ur.Encoder=fdr;Ur.EncoderStream=WF;Ur.FLOAT32_OPTIONS=oYe;Ur.NEVER=hdr;Ur.Packr=Om;Ur.PackrStream=WF;Ur.Unpackr=Tm;Ur.UnpackrStream=JF;Ur.addExtension=cdr;Ur.clearSource=HF;Ur.decode=ndr;Ur.decodeIter=Mdr;Ur.encode=pdr;Ur.encodeIter=Pdr;Ur.mapsAsObjects=Fdr;Ur.pack=ddr;Ur.roundFloat32=idr;Ur.unpack=tdr;Ur.unpackMultiple=rdr;Ur.useRecords=Ndr});var XF=m(QF=>{"use strict";Object.defineProperty(QF,"__esModule",{value:!0});QF.version=void 0;QF.version="5.66.4"});var vce=m(i8=>{"use strict";Object.defineProperty(i8,"__esModule",{value:!0});i8.Scripts=void 0;i8.raw2NextJobData=_ce;var qdr=mYe(),Ldr=new qdr.Packr({useRecords:!1,encodeUndefinedAsNil:!0}),Os=Ldr.pack,id=Tu(),xm=Uc(),jdr=XF(),$dr=IF(),bce=class{constructor(e){this.queue=e,this.version=jdr.version;let r=this.queue.keys;this.moveToFinishedKeys=[r.wait,r.active,r.prioritized,r.events,r.stalled,r.limiter,r.delayed,r.paused,r.meta,r.pc,void 0,void 0,void 0,void 0]}execCommand(e,r,n){let i=`${r}:${this.version}`;return e[i](n)}async isJobInList(e,r){let n=await this.queue.client,i;return(0,xm.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?i=await this.execCommand(n,"isJobInList",[e,r]):i=await n.lpos(e,r),Number.isInteger(i)}addDelayedJobArgs(e,r,n){let i=this.queue.keys,s=[i.marker,i.meta,i.id,i.delayed,i.completed,i.events];return s.push(Os(n),e.data,r),s}addDelayedJob(e,r,n,i){let s=this.addDelayedJobArgs(r,n,i);return this.execCommand(e,"addDelayedJob",s)}addPrioritizedJobArgs(e,r,n){let i=this.queue.keys,s=[i.marker,i.meta,i.id,i.prioritized,i.delayed,i.completed,i.active,i.events,i.pc];return s.push(Os(n),e.data,r),s}addPrioritizedJob(e,r,n,i){let s=this.addPrioritizedJobArgs(r,n,i);return this.execCommand(e,"addPrioritizedJob",s)}addParentJobArgs(e,r,n){let i=this.queue.keys,s=[i.meta,i.id,i.delayed,i["waiting-children"],i.completed,i.events];return s.push(Os(n),e.data,r),s}addParentJob(e,r,n,i){let s=this.addParentJobArgs(r,n,i);return this.execCommand(e,"addParentJob",s)}addStandardJobArgs(e,r,n){let i=this.queue.keys,s=[i.wait,i.paused,i.meta,i.id,i.completed,i.delayed,i.active,i.events,i.marker];return s.push(Os(n),e.data,r),s}addStandardJob(e,r,n,i){let s=this.addStandardJobArgs(r,n,i);return this.execCommand(e,"addStandardJob",s)}async addJob(e,r,n,i,s={}){let o=this.queue.keys,a=r.parent,u=[o[""],typeof i<"u"?i:"",r.name,r.timestamp,r.parentKey||null,s.parentDependenciesKey||null,a,r.repeatJobKey,r.deduplicationId?`${o.de}:${r.deduplicationId}`:null],c;if(n.repeat){let d=Object.assign({},n.repeat);d.startDate&&(d.startDate=+new Date(d.startDate)),d.endDate&&(d.endDate=+new Date(d.endDate)),c=Os(Object.assign(Object.assign({},n),{repeat:d}))}else c=Os(n);let l;if(s.addToWaitingChildren?l=await this.addParentJob(e,r,c,u):typeof n.delay=="number"&&n.delay>0?l=await this.addDelayedJob(e,r,c,u):n.priority?l=await this.addPrioritizedJob(e,r,c,u):l=await this.addStandardJob(e,r,c,u),l<0)throw this.finishedErrors({code:l,parentKey:s.parentKey,command:"addJob"});return l}pauseArgs(e){let r="wait",n="paused";e||(r="paused",n="wait");let i=[r,n,"meta","prioritized"].map(o=>this.queue.toKey(o));i.push(this.queue.keys.events,this.queue.keys.delayed,this.queue.keys.marker);let s=[e?"paused":"resumed"];return i.concat(s)}async pause(e){let r=await this.queue.client,n=this.pauseArgs(e);return this.execCommand(r,"pause",n)}addRepeatableJobArgs(e,r,n,i){let s=this.queue.keys,o=[s.repeat,s.delayed],a=[r,Os(n),i,e,s[""]];return o.concat(a)}async addRepeatableJob(e,r,n,i){let s=await this.queue.client,o=this.addRepeatableJobArgs(e,r,n,i);return this.execCommand(s,"addRepeatableJob",o)}async removeDeduplicationKey(e,r){let n=await this.queue.client,s=[`${this.queue.keys.de}:${e}`],o=[r];return this.execCommand(n,"removeDeduplicationKey",s.concat(o))}async addJobScheduler(e,r,n,i,s,o,a){let u=await this.queue.client,c=this.queue.keys,l=[c.repeat,c.delayed,c.wait,c.paused,c.meta,c.prioritized,c.marker,c.id,c.events,c.pc,c.active],d=[r,Os(s),e,n,Os(i),Os(o),Date.now(),c[""],a?this.queue.toKey(a):""],p=await this.execCommand(u,"addJobScheduler",l.concat(d));if(typeof p=="number"&&p<0)throw this.finishedErrors({code:p,command:"addJobScheduler"});return p}async updateRepeatableJobMillis(e,r,n,i){let s=[this.queue.keys.repeat,n,r,i];return this.execCommand(e,"updateRepeatableJobMillis",s)}async updateJobSchedulerNextMillis(e,r,n,i,s){let o=await this.queue.client,a=this.queue.keys,u=[a.repeat,a.delayed,a.wait,a.paused,a.meta,a.prioritized,a.marker,a.id,a.events,a.pc,s?this.queue.toKey(s):"",a.active],c=[r,e,n,Os(i),Date.now(),a[""],s];return this.execCommand(o,"updateJobScheduler",u.concat(c))}removeRepeatableArgs(e,r,n){let i=this.queue.keys,s=[i.repeat,i.delayed,i.events],o=[e,this.getRepeatConcatOptions(r,n),n,i[""]];return s.concat(o)}getRepeatConcatOptions(e,r){return r&&r.split(":").length>2?r:e}async removeRepeatable(e,r,n){let i=await this.queue.client,s=this.removeRepeatableArgs(e,r,n);return this.execCommand(i,"removeRepeatable",s)}async removeJobScheduler(e){let r=await this.queue.client,n=this.queue.keys,i=[n.repeat,n.delayed,n.events],s=[e,n[""]];return this.execCommand(r,"removeJobScheduler",i.concat(s))}removeArgs(e,r){let n=[e,"repeat"].map(s=>this.queue.toKey(s)),i=[e,r?1:0,this.queue.toKey("")];return n.concat(i)}async remove(e,r){let n=await this.queue.client,i=this.removeArgs(e,r),s=await this.execCommand(n,"removeJob",i);if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"removeJob"});return s}async removeUnprocessedChildren(e){let r=await this.queue.client,n=[this.queue.toKey(e),this.queue.keys.meta,this.queue.toKey(""),e];await this.execCommand(r,"removeUnprocessedChildren",n)}async extendLock(e,r,n,i){i=i||await this.queue.client;let s=[this.queue.toKey(e)+":lock",this.queue.keys.stalled,r,n,e];return this.execCommand(i,"extendLock",s)}async extendLocks(e,r,n){let i=await this.queue.client,s=[this.queue.keys.stalled,this.queue.toKey(""),Os(r),Os(e),n];return this.execCommand(i,"extendLocks",s)}async updateData(e,r){let n=await this.queue.client,i=[this.queue.toKey(e.id)],s=JSON.stringify(r),o=await this.execCommand(n,"updateData",i.concat([s]));if(o<0)throw this.finishedErrors({code:o,jobId:e.id,command:"updateData"})}async updateProgress(e,r){let n=await this.queue.client,i=[this.queue.toKey(e),this.queue.keys.events,this.queue.keys.meta],s=JSON.stringify(r),o=await this.execCommand(n,"updateProgress",i.concat([e,s]));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"updateProgress"})}async addLog(e,r,n){let i=await this.queue.client,s=[this.queue.toKey(e),this.queue.toKey(e)+":logs"],o=await this.execCommand(i,"addLog",s.concat([e,r,n||""]));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"addLog"});return o}moveToFinishedArgs(e,r,n,i,s,o,a,u=!0,c){var l,d,p,f,h,g,_;let S=this.queue.keys,w=this.queue.opts,C=s==="completed"?w.removeOnComplete:w.removeOnFail,A=this.queue.toKey(`metrics:${s}`),O=this.moveToFinishedKeys;O[10]=S[s],O[11]=this.queue.toKey((l=e.id)!==null&&l!==void 0?l:""),O[12]=A,O[13]=this.queue.keys.marker;let x=this.getKeepJobs(i,C),R=[e.id,a,n,typeof r>"u"?"null":r,s,!u||this.queue.closing?0:1,S[""],Os({token:o,name:w.name,keepJobs:x,limiter:w.limiter,lockDuration:w.lockDuration,attempts:e.opts.attempts,maxMetricsSize:!((d=w.metrics)===null||d===void 0)&&d.maxDataPoints?(p=w.metrics)===null||p===void 0?void 0:p.maxDataPoints:"",fpof:!!(!((f=e.opts)===null||f===void 0)&&f.failParentOnFailure),cpof:!!(!((h=e.opts)===null||h===void 0)&&h.continueParentOnFailure),idof:!!(!((g=e.opts)===null||g===void 0)&&g.ignoreDependencyOnFailure),rdof:!!(!((_=e.opts)===null||_===void 0)&&_.removeDependencyOnFailure)}),c?Os((0,xm.objectToFlatArray)(c)):void 0];return O.concat(R)}getKeepJobs(e,r){return typeof e>"u"?r||{count:e?0:-1}:typeof e=="object"?e:typeof e=="number"?{count:e}:{count:e?0:-1}}async moveToFinished(e,r){let n=await this.queue.client,i=await this.execCommand(n,"moveToFinished",r);if(i<0)throw this.finishedErrors({code:i,jobId:e,command:"moveToFinished",state:"active"});if(typeof i<"u")return _ce(i)}drainArgs(e){let r=this.queue.keys,n=[r.wait,r.paused,r.delayed,r.prioritized,r.repeat],i=[r[""],e?"1":"0"];return n.concat(i)}async drain(e){let r=await this.queue.client,n=this.drainArgs(e);return this.execCommand(r,"drain",n)}removeChildDependencyArgs(e,r){let i=[this.queue.keys[""]],s=[this.queue.toKey(e),r];return i.concat(s)}async removeChildDependency(e,r){let n=await this.queue.client,i=this.removeChildDependencyArgs(e,r),s=await this.execCommand(n,"removeChildDependency",i);switch(s){case 0:return!0;case 1:return!1;default:throw this.finishedErrors({code:s,jobId:e,parentKey:r,command:"removeChildDependency"})}}getRangesArgs(e,r,n,i){let s=this.queue.keys,o=e.map(c=>c==="waiting"?"wait":c),a=[s[""]],u=[r,n,i?"1":"0",...o];return a.concat(u)}async getRanges(e,r=0,n=1,i=!1){let s=await this.queue.client,o=this.getRangesArgs(e,r,n,i);return await this.execCommand(s,"getRanges",o)}getCountsArgs(e){let r=this.queue.keys,n=e.map(o=>o==="waiting"?"wait":o),i=[r[""]],s=[...n];return i.concat(s)}async getCounts(e){let r=await this.queue.client,n=this.getCountsArgs(e);return await this.execCommand(r,"getCounts",n)}getCountsPerPriorityArgs(e){let r=[this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized],n=e;return r.concat(n)}async getCountsPerPriority(e){let r=await this.queue.client,n=this.getCountsPerPriorityArgs(e);return await this.execCommand(r,"getCountsPerPriority",n)}getDependencyCountsArgs(e,r){let n=[`${e}:processed`,`${e}:dependencies`,`${e}:failed`,`${e}:unsuccessful`].map(s=>this.queue.toKey(s)),i=r;return n.concat(i)}async getDependencyCounts(e,r){let n=await this.queue.client,i=this.getDependencyCountsArgs(e,r);return await this.execCommand(n,"getDependencyCounts",i)}moveToCompletedArgs(e,r,n,i,s=!1){let o=Date.now();return this.moveToFinishedArgs(e,r,"returnvalue",n,"completed",i,o,s)}moveToFailedArgs(e,r,n,i,s=!1,o){let a=Date.now();return this.moveToFinishedArgs(e,r,"failedReason",n,"failed",i,a,s,o)}async isFinished(e,r=!1){let n=await this.queue.client,i=["completed","failed",e].map(s=>this.queue.toKey(s));return this.execCommand(n,"isFinished",i.concat([e,r?"1":""]))}async getState(e){let r=await this.queue.client,n=["completed","failed","delayed","active","wait","paused","waiting-children","prioritized"].map(i=>this.queue.toKey(i));return(0,xm.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?this.execCommand(r,"getState",n.concat([e])):this.execCommand(r,"getStateV2",n.concat([e]))}async changeDelay(e,r){let n=await this.queue.client,i=this.changeDelayArgs(e,r),s=await this.execCommand(n,"changeDelay",i);if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"changeDelay",state:"delayed"})}changeDelayArgs(e,r){let n=Date.now();return[this.queue.keys.delayed,this.queue.keys.meta,this.queue.keys.marker,this.queue.keys.events].concat([r,JSON.stringify(n),e,this.queue.toKey(e)])}async changePriority(e,r=0,n=!1){let i=await this.queue.client,s=this.changePriorityArgs(e,r,n),o=await this.execCommand(i,"changePriority",s);if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"changePriority"})}changePriorityArgs(e,r=0,n=!1){return[this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.active,this.queue.keys.pc,this.queue.keys.marker].concat([r,this.queue.toKey(""),e,n?1:0])}moveToDelayedArgs(e,r,n,i,s={}){let o=this.queue.keys;return[o.marker,o.active,o.prioritized,o.delayed,this.queue.toKey(e),o.events,o.meta,o.stalled].concat([this.queue.keys[""],r,e,n,i,s.skipAttempt?"1":"0",s.fieldsToUpdate?Os((0,xm.objectToFlatArray)(s.fieldsToUpdate)):void 0])}moveToWaitingChildrenArgs(e,r,n){let i=Date.now(),s=(0,xm.getParentKey)(n.child);return["active","waiting-children",e,`${e}:dependencies`,`${e}:unsuccessful`,"stalled","events"].map(a=>this.queue.toKey(a)).concat([r,s??"",JSON.stringify(i),e,this.queue.toKey("")])}isMaxedArgs(){let e=this.queue.keys;return[e.meta,e.active]}async isMaxed(){let e=await this.queue.client,r=this.isMaxedArgs();return!!await this.execCommand(e,"isMaxed",r)}async moveToDelayed(e,r,n,i="0",s={}){let o=await this.queue.client,a=this.moveToDelayedArgs(e,r,i,n,s),u=await this.execCommand(o,"moveToDelayed",a);if(u<0)throw this.finishedErrors({code:u,jobId:e,command:"moveToDelayed",state:"active"})}async moveToWaitingChildren(e,r,n={}){let i=await this.queue.client,s=this.moveToWaitingChildrenArgs(e,r,n),o=await this.execCommand(i,"moveToWaitingChildren",s);switch(o){case 0:return!0;case 1:return!1;default:throw this.finishedErrors({code:o,jobId:e,command:"moveToWaitingChildren",state:"active"})}}getRateLimitTtlArgs(e){return[this.queue.keys.limiter,this.queue.keys.meta].concat([e??"0"])}async getRateLimitTtl(e){let r=await this.queue.client,n=this.getRateLimitTtlArgs(e);return this.execCommand(r,"getRateLimitTtl",n)}async cleanJobsInSet(e,r,n=0){let i=await this.queue.client;return this.execCommand(i,"cleanJobsInSet",[this.queue.toKey(e),this.queue.toKey("events"),this.queue.toKey("repeat"),this.queue.toKey(""),r,n,e])}getJobSchedulerArgs(e){return[this.queue.keys.repeat].concat([e])}async getJobScheduler(e){let r=await this.queue.client,n=this.getJobSchedulerArgs(e);return this.execCommand(r,"getJobScheduler",n)}retryJobArgs(e,r,n,i={}){let s=[this.queue.keys.active,this.queue.keys.wait,this.queue.keys.paused,this.queue.toKey(e),this.queue.keys.meta,this.queue.keys.events,this.queue.keys.delayed,this.queue.keys.prioritized,this.queue.keys.pc,this.queue.keys.marker,this.queue.keys.stalled],o=(r?"R":"L")+"PUSH";return s.concat([this.queue.toKey(""),Date.now(),o,e,n,i.fieldsToUpdate?Os((0,xm.objectToFlatArray)(i.fieldsToUpdate)):void 0])}async retryJob(e,r,n="0",i={}){let s=await this.queue.client,o=this.retryJobArgs(e,r,n,i),a=await this.execCommand(s,"retryJob",o);if(a<0)throw this.finishedErrors({code:a,jobId:e,command:"retryJob",state:"active"})}moveJobsToWaitArgs(e,r,n){let i=[this.queue.toKey(""),this.queue.keys.events,this.queue.toKey(e),this.queue.toKey("wait"),this.queue.toKey("paused"),this.queue.keys.meta,this.queue.keys.active,this.queue.keys.marker],s=[r,n,e];return i.concat(s)}async retryJobs(e="failed",r=1e3,n=new Date().getTime()){let i=await this.queue.client,s=this.moveJobsToWaitArgs(e,r,n);return this.execCommand(i,"moveJobsToWait",s)}async promoteJobs(e=1e3){let r=await this.queue.client,n=this.moveJobsToWaitArgs("delayed",e,Number.MAX_VALUE);return this.execCommand(r,"moveJobsToWait",n)}async reprocessJob(e,r,n={}){let i=await this.queue.client,s=[this.queue.toKey(e.id),this.queue.keys.events,this.queue.toKey(r),this.queue.keys.wait,this.queue.keys.meta,this.queue.keys.paused,this.queue.keys.active,this.queue.keys.marker],o=[e.id,(e.opts.lifo?"R":"L")+"PUSH",r==="failed"?"failedReason":"returnvalue",r,n.resetAttemptsMade?"1":"0",n.resetAttemptsStarted?"1":"0"],a=await this.execCommand(i,"reprocessJob",s.concat(o));if(a!==1)throw this.finishedErrors({code:a,jobId:e.id,command:"reprocessJob",state:r})}async getMetrics(e,r=0,n=-1){let i=await this.queue.client,s=[this.queue.toKey(`metrics:${e}`),this.queue.toKey(`metrics:${e}:data`)],o=[r,n];return await this.execCommand(i,"getMetrics",s.concat(o))}async moveToActive(e,r,n){let i=this.queue.opts,s=this.queue.keys,o=[s.wait,s.active,s.prioritized,s.events,s.stalled,s.limiter,s.delayed,s.paused,s.meta,s.pc,s.marker],a=[s[""],Date.now(),Os({token:r,lockDuration:i.lockDuration,limiter:i.limiter,name:n})],u=await this.execCommand(e,"moveToActive",o.concat(a));return _ce(u)}async promote(e){let r=await this.queue.client,n=[this.queue.keys.delayed,this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.active,this.queue.keys.pc,this.queue.keys.events,this.queue.keys.marker],i=[this.queue.toKey(""),e],s=await this.execCommand(r,"promote",n.concat(i));if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"promote",state:"delayed"})}moveStalledJobsToWaitArgs(){let e=this.queue.opts,r=[this.queue.keys.stalled,this.queue.keys.wait,this.queue.keys.active,this.queue.keys["stalled-check"],this.queue.keys.meta,this.queue.keys.paused,this.queue.keys.marker,this.queue.keys.events],n=[e.maxStalledCount,this.queue.toKey(""),Date.now(),e.stalledInterval];return r.concat(n)}async moveStalledJobsToWait(){let e=await this.queue.client,r=this.moveStalledJobsToWaitArgs();return this.execCommand(e,"moveStalledJobsToWait",r)}async moveJobFromActiveToWait(e,r="0"){let n=await this.queue.client,i=[this.queue.keys.active,this.queue.keys.wait,this.queue.keys.stalled,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.limiter,this.queue.keys.prioritized,this.queue.keys.marker,this.queue.keys.events],s=[e,r,this.queue.toKey(e)],o=await this.execCommand(n,"moveJobFromActiveToWait",i.concat(s));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"moveJobFromActiveToWait",state:"active"});return o}async obliterate(e){let r=await this.queue.client,n=[this.queue.keys.meta,this.queue.toKey("")],i=[e.count,e.force?"force":null],s=await this.execCommand(r,"obliterate",n.concat(i));if(s<0)switch(s){case-1:throw new Error("Cannot obliterate non-paused queue");case-2:throw new Error("Cannot obliterate queue with active jobs")}return s}async paginate(e,r){let n=await this.queue.client,i=[e],s=5,o=r.end>=0?r.end-r.start+1:1/0,a="0",u=0,c,l,d,p=[],f=[];do{let h=[r.start+p.length,r.end,a,u,s];r.fetchJobs&&h.push(1),[a,u,c,l,d]=await this.execCommand(n,"paginate",i.concat(h)),p=p.concat(c),d&&d.length&&(f=f.concat(d.map(xm.array2obj)))}while(a!="0"&&p.length<o);if(p.length&&Array.isArray(p[0])){let h=[];for(let g=0;g<p.length;g++){let[_,S]=p[g];try{h.push({id:_,v:JSON.parse(S)})}catch(w){h.push({id:_,err:w.message})}}return{cursor:a,items:h,total:l,jobs:f}}else return{cursor:a,items:p.map(h=>({id:h})),total:l,jobs:f}}finishedErrors({code:e,jobId:r,parentKey:n,command:i,state:s}){let o;switch(e){case id.ErrorCode.JobNotExist:o=new Error(`Missing key for job ${r}. ${i}`);break;case id.ErrorCode.JobLockNotExist:o=new Error(`Missing lock for job ${r}. ${i}`);break;case id.ErrorCode.JobNotInState:o=new Error(`Job ${r} is not in the ${s} state. ${i}`);break;case id.ErrorCode.JobPendingChildren:o=new Error(`Job ${r} has pending dependencies. ${i}`);break;case id.ErrorCode.ParentJobNotExist:o=new Error(`Missing key for parent job ${n}. ${i}`);break;case id.ErrorCode.JobLockMismatch:o=new Error(`Lock mismatch for job ${r}. Cmd ${i} from ${s}`);break;case id.ErrorCode.ParentJobCannotBeReplaced:o=new Error(`The parent job ${n} cannot be replaced. ${i}`);break;case id.ErrorCode.JobBelongsToJobScheduler:o=new Error(`Job ${r} belongs to a job scheduler and cannot be removed directly. ${i}`);break;case id.ErrorCode.JobHasFailedChildren:o=new $dr.UnrecoverableError(`Cannot complete job ${r} because it has at least one failed child. ${i}`);break;case id.ErrorCode.SchedulerJobIdCollision:o=new Error(`Cannot create job scheduler iteration - job ID already exists. ${i}`);break;case id.ErrorCode.SchedulerJobSlotsBusy:o=new Error(`Cannot create job scheduler iteration - current and next time slots already have jobs. ${i}`);break;default:o=new Error(`Unknown code ${e} error for ${r}. ${i}`)}return o.code=e,o}};i8.Scripts=bce;function _ce(t){if(t){let e=[null,t[1],t[2],t[3]];return t[0]&&(e[0]=(0,xm.array2obj)(t[0])),e}return[]}});var eB=m(ZF=>{"use strict";Object.defineProperty(ZF,"__esModule",{value:!0});ZF.createScripts=void 0;var Kdr=vce(),Udr=t=>new Kdr.Scripts({keys:t.keys,client:t.client,get redisVersion(){return t.redisVersion},toKey:t.toKey,opts:t.opts,closing:t.closing});ZF.createScripts=Udr});var v4=m(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.Job=Im.PRIORITY_LIMIT=void 0;var yYe=(ea(),Jt(Zo)),Vdr=require("util"),na=Uc(),Gdr=eB(),gYe=Vae(),Hdr=Cue(),EYe=Tu(),zdr=(0,Vdr.debuglog)("bull");Im.PRIORITY_LIMIT=2**21;var Sce=class t{constructor(e,r,n,i={},s){this.queue=e,this.name=r,this.data=n,this.opts=i,this.id=s,this.progress=0,this.returnvalue=null,this.stacktrace=null,this.delay=0,this.priority=0,this.attemptsStarted=0,this.attemptsMade=0,this.stalledCounter=0;let o=this.opts,{repeatJobKey:a}=o,u=yYe.__rest(o,["repeatJobKey"]);this.opts=Object.assign({attempts:0},u),this.delay=this.opts.delay,this.priority=this.opts.priority||0,this.repeatJobKey=a,this.timestamp=i.timestamp?i.timestamp:Date.now(),this.opts.backoff=gYe.Backoffs.normalize(i.backoff),this.parentKey=(0,na.getParentKey)(i.parent),i.parent&&(this.parent={id:i.parent.id,queueKey:i.parent.queue},i.failParentOnFailure&&(this.parent.fpof=!0),i.removeDependencyOnFailure&&(this.parent.rdof=!0),i.ignoreDependencyOnFailure&&(this.parent.idof=!0),i.continueParentOnFailure&&(this.parent.cpof=!0)),this.debounceId=i.debounce?i.debounce.id:void 0,this.deduplicationId=i.deduplication?i.deduplication.id:this.debounceId,this.toKey=e.toKey.bind(e),this.createScripts(),this.queueQualifiedName=e.qualifiedName}static async create(e,r,n,i){let s=await e.client,o=new this(e,r,n,i,i&&i.jobId);return o.id=await o.addJob(s,{parentKey:o.parentKey,parentDependenciesKey:o.parentKey?`${o.parentKey}:dependencies`:""}),o}static async createBulk(e,r){let n=await e.client,i=r.map(a=>{var u;return new this(e,a.name,a.data,a.opts,(u=a.opts)===null||u===void 0?void 0:u.jobId)}),s=n.pipeline();for(let a of i)a.addJob(s,{parentKey:a.parentKey,parentDependenciesKey:a.parentKey?`${a.parentKey}:dependencies`:""});let o=await s.exec();for(let a=0;a<o.length;++a){let[u,c]=o[a];if(u)throw u;i[a].id=c}return i}static fromJSON(e,r,n){let i=JSON.parse(r.data||"{}"),s=t.optsFromJSON(r.opts),o=new this(e,r.name,i,s,r.id||n);return o.progress=JSON.parse(r.progress||"0"),o.delay=parseInt(r.delay),o.priority=parseInt(r.priority),o.timestamp=parseInt(r.timestamp),r.finishedOn&&(o.finishedOn=parseInt(r.finishedOn)),r.processedOn&&(o.processedOn=parseInt(r.processedOn)),r.rjk&&(o.repeatJobKey=r.rjk),r.deid&&(o.debounceId=r.deid,o.deduplicationId=r.deid),r.failedReason&&(o.failedReason=r.failedReason),o.attemptsStarted=parseInt(r.ats||"0"),o.attemptsMade=parseInt(r.attemptsMade||r.atm||"0"),o.stalledCounter=parseInt(r.stc||"0"),r.defa&&(o.deferredFailure=r.defa),o.stacktrace=Wdr(r.stacktrace),typeof r.returnvalue=="string"&&(o.returnvalue=bYe(r.returnvalue)),r.parentKey&&(o.parentKey=r.parentKey),r.parent&&(o.parent=JSON.parse(r.parent)),r.pb&&(o.processedBy=r.pb),r.nrjid&&(o.nextRepeatableJobId=r.nrjid),o}createScripts(){this.scripts=(0,Gdr.createScripts)(this.queue)}static optsFromJSON(e,r=na.optsDecodeMap){let n=JSON.parse(e||"{}"),i=Object.entries(n),s={};for(let o of i){let[a,u]=o;r[a]?s[r[a]]=u:a==="tm"?s.telemetry=Object.assign(Object.assign({},s.telemetry),{metadata:u}):a==="omc"?s.telemetry=Object.assign(Object.assign({},s.telemetry),{omitContext:u}):s[a]=u}return s}static async fromId(e,r){if(r){let i=await(await e.client).hgetall(e.toKey(r));return(0,na.isEmpty)(i)?void 0:this.fromJSON(e,i,r)}}static addJobLog(e,r,n,i){return e.scripts.addLog(r,n,i)}toJSON(){let e=this,{queue:r,scripts:n}=e;return yYe.__rest(e,["queue","scripts"])}asJSON(){return(0,na.removeUndefinedFields)({id:this.id,name:this.name,data:JSON.stringify(typeof this.data>"u"?{}:this.data),opts:t.optsAsJSON(this.opts),parent:this.parent?Object.assign({},this.parent):void 0,parentKey:this.parentKey,progress:this.progress,attemptsMade:this.attemptsMade,attemptsStarted:this.attemptsStarted,stalledCounter:this.stalledCounter,finishedOn:this.finishedOn,processedOn:this.processedOn,timestamp:this.timestamp,failedReason:JSON.stringify(this.failedReason),stacktrace:JSON.stringify(this.stacktrace),debounceId:this.debounceId,deduplicationId:this.deduplicationId,repeatJobKey:this.repeatJobKey,returnvalue:JSON.stringify(this.returnvalue),nrjid:this.nextRepeatableJobId})}static optsAsJSON(e={},r=na.optsEncodeMap){let n=Object.entries(e),i={};for(let[s,o]of n)if(!(typeof o>"u"))if(s in r){let u=r[s];i[u]=o}else s==="telemetry"?(o.metadata!==void 0&&(i.tm=o.metadata),o.omitContext!==void 0&&(i.omc=o.omitContext)):i[s]=o;return i}asJSONSandbox(){return Object.assign(Object.assign({},this.asJSON()),{queueName:this.queueName,queueQualifiedName:this.queueQualifiedName,prefix:this.prefix})}updateData(e){return this.data=e,this.scripts.updateData(this,e)}async updateProgress(e){this.progress=e,await this.scripts.updateProgress(this.id,e),this.queue.emit("progress",this,e)}async log(e){return t.addJobLog(this.queue,this.id,e,this.opts.keepLogs)}async removeChildDependency(){return await this.scripts.removeChildDependency(this.id,this.parentKey)?(this.parent=void 0,this.parentKey=void 0,!0):!1}async clearLogs(e){let r=await this.queue.client,n=this.toKey(this.id)+":logs";e?await r.ltrim(n,-e,-1):await r.del(n)}async remove({removeChildren:e=!0}={}){await this.queue.waitUntilReady();let r=this.queue,n=this;if(await this.scripts.remove(n.id,e))r.emit("removed",n);else throw new Error(`Job ${this.id} could not be removed because it is locked by another worker`)}async removeUnprocessedChildren(){let e=this.id;await this.scripts.removeUnprocessedChildren(e)}extendLock(e,r){return this.scripts.extendLock(this.id,e,r)}async moveToCompleted(e,r,n=!0){return this.queue.trace(EYe.SpanKind.INTERNAL,"complete",this.queue.name,async(i,s)=>{var o,a;let u;!(!((a=(o=this.opts)===null||o===void 0?void 0:o.telemetry)===null||a===void 0)&&a.omitContext)&&s&&(u=s),await this.queue.waitUntilReady(),this.returnvalue=e||void 0;let c=(0,na.tryCatch)(JSON.stringify,JSON,[e]);if(c===na.errorObject)throw na.errorObject.value;let l=this.scripts.moveToCompletedArgs(this,c,this.opts.removeOnComplete,r,n),d=await this.scripts.moveToFinished(this.id,l);return this.finishedOn=l[this.scripts.moveToFinishedKeys.length+1],this.attemptsMade+=1,d})}moveToWait(e){return this.scripts.moveJobFromActiveToWait(this.id,e)}async shouldRetryJob(e){if(this.attemptsMade+1<this.opts.attempts&&!this.discarded&&!(e instanceof Hdr.UnrecoverableError||e.name=="UnrecoverableError")){let r=this.queue.opts,n=await gYe.Backoffs.calculate(this.opts.backoff,this.attemptsMade+1,e,this,r.settings&&r.settings.backoffStrategy);return[n!=-1,n==-1?0:n]}else return[!1,0]}async moveToFailed(e,r,n=!1){this.failedReason=e?.message;let[i,s]=await this.shouldRetryJob(e);return this.queue.trace(EYe.SpanKind.INTERNAL,this.getSpanOperation(i,s),this.queue.name,async(o,a)=>{var u,c;let l;!(!((c=(u=this.opts)===null||u===void 0?void 0:u.telemetry)===null||c===void 0)&&c.omitContext)&&a&&(l=a);let d;this.updateStacktrace(e);let p={failedReason:this.failedReason,stacktrace:JSON.stringify(this.stacktrace),tm:l},f;if(i)s?d=await this.scripts.moveToDelayed(this.id,Date.now(),s,r,{fieldsToUpdate:p}):d=await this.scripts.retryJob(this.id,this.opts.lifo,r,{fieldsToUpdate:p});else{let h=this.scripts.moveToFailedArgs(this,this.failedReason,this.opts.removeOnFail,r,n,p);d=await this.scripts.moveToFinished(this.id,h),f=h[this.scripts.moveToFinishedKeys.length+1]}return f&&typeof f=="number"&&(this.finishedOn=f),s&&typeof s=="number"&&(this.delay=s),this.attemptsMade+=1,d})}getSpanOperation(e,r){return e?r?"delay":"retry":"fail"}isCompleted(){return this.isInZSet("completed")}isFailed(){return this.isInZSet("failed")}isDelayed(){return this.isInZSet("delayed")}isWaitingChildren(){return this.isInZSet("waiting-children")}isActive(){return this.isInList("active")}async isWaiting(){return await this.isInList("wait")||await this.isInList("paused")}get queueName(){return this.queue.name}get prefix(){return this.queue.opts.prefix}getState(){return this.scripts.getState(this.id)}async changeDelay(e){await this.scripts.changeDelay(this.id,e),this.delay=e}async changePriority(e){await this.scripts.changePriority(this.id,e.priority,e.lifo),this.priority=e.priority||0}async getChildrenValues(){let r=await(await this.queue.client).hgetall(this.toKey(`${this.id}:processed`));if(r)return(0,na.parseObjectValues)(r)}async getIgnoredChildrenFailures(){return(await this.queue.client).hgetall(this.toKey(`${this.id}:failed`))}async getFailedChildrenValues(){return(await this.queue.client).hgetall(this.toKey(`${this.id}:failed`))}async getDependencies(e={}){let n=(await this.queue.client).multi();if(!e.processed&&!e.unprocessed&&!e.ignored&&!e.failed){n.hgetall(this.toKey(`${this.id}:processed`)),n.smembers(this.toKey(`${this.id}:dependencies`)),n.hgetall(this.toKey(`${this.id}:failed`)),n.zrange(this.toKey(`${this.id}:unsuccessful`),0,-1);let[[i,s],[o,a],[u,c],[l,d]]=await n.exec();return{processed:(0,na.parseObjectValues)(s),unprocessed:a,failed:d,ignored:c}}else{let i={cursor:0,count:20},s=[];if(e.processed){s.push("processed");let g=Object.assign(Object.assign({},i),e.processed);n.hscan(this.toKey(`${this.id}:processed`),g.cursor,"COUNT",g.count)}if(e.unprocessed){s.push("unprocessed");let g=Object.assign(Object.assign({},i),e.unprocessed);n.sscan(this.toKey(`${this.id}:dependencies`),g.cursor,"COUNT",g.count)}if(e.ignored){s.push("ignored");let g=Object.assign(Object.assign({},i),e.ignored);n.hscan(this.toKey(`${this.id}:failed`),g.cursor,"COUNT",g.count)}let o;if(e.failed){s.push("failed");let g=Object.assign(Object.assign({},i),e.failed);o=g.cursor+g.count,n.zrange(this.toKey(`${this.id}:unsuccessful`),g.cursor,g.count-1)}let a=await n.exec(),u,c,l,d,p,f,h;return s.forEach((g,_)=>{switch(g){case"processed":{u=a[_][1][0];let S=a[_][1][1],w={};for(let C=0;C<S.length;++C)C%2&&(w[S[C-1]]=JSON.parse(S[C]));c=w;break}case"failed":{p=a[_][1];break}case"ignored":{f=a[_][1][0];let S=a[_][1][1],w={};for(let C=0;C<S.length;++C)C%2&&(w[S[C-1]]=S[C]);h=w;break}case"unprocessed":{l=a[_][1][0],d=a[_][1][1];break}}}),Object.assign(Object.assign(Object.assign(Object.assign({},u?{processed:c,nextProcessedCursor:Number(u)}:{}),f?{ignored:h,nextIgnoredCursor:Number(f)}:{}),o?{failed:p,nextFailedCursor:o}:{}),l?{unprocessed:d,nextUnprocessedCursor:Number(l)}:{})}}async getDependenciesCount(e={}){let r=[];Object.entries(e).forEach(([o,a])=>{a&&r.push(o)});let n=r.length?r:["processed","unprocessed","ignored","failed"],i=await this.scripts.getDependencyCounts(this.id,n),s={};return i.forEach((o,a)=>{s[`${n[a]}`]=o||0}),s}async waitUntilFinished(e,r){await this.queue.waitUntilReady();let n=this.id;return new Promise(async(i,s)=>{let o;r&&(o=setTimeout(()=>u(`Job wait ${this.name} timed out before finishing, no finish notification arrived after ${r}ms (id=${n})`),r));function a(g){d(),i(g.returnvalue)}function u(g){d(),s(new Error(g.failedReason||g))}let c=`completed:${n}`,l=`failed:${n}`;e.on(c,a),e.on(l,u),this.queue.on("closing",u);let d=()=>{clearInterval(o),e.removeListener(c,a),e.removeListener(l,u),this.queue.removeListener("closing",u)};await e.waitUntilReady();let[p,f]=await this.scripts.isFinished(n,!0);p!=0&&(p==-1||p==2?u({failedReason:f}):a({returnvalue:bYe(f)}))})}async moveToDelayed(e,r){let n=Date.now(),i=e-n,s=i>0?i:0,o=await this.scripts.moveToDelayed(this.id,n,s,r,{skipAttempt:!0});return this.delay=s,o}async moveToWaitingChildren(e,r={}){return await this.scripts.moveToWaitingChildren(this.id,e,r)}async promote(){let e=this.id;await this.scripts.promote(e),this.delay=0}async retry(e="failed",r={}){await this.scripts.reprocessJob(this,e,r),this.failedReason=null,this.finishedOn=null,this.processedOn=null,this.returnvalue=null,r.resetAttemptsMade&&(this.attemptsMade=0),r.resetAttemptsStarted&&(this.attemptsStarted=0)}discard(){this.discarded=!0}async isInZSet(e){return await(await this.queue.client).zscore(this.queue.toKey(e),this.id)!==null}async isInList(e){return this.scripts.isJobInList(this.queue.toKey(e),this.id)}addJob(e,r){let n=this.asJSON();return this.validateOptions(n),this.scripts.addJob(e,n,n.opts,this.id,r)}async removeDeduplicationKey(){return this.deduplicationId?await this.scripts.removeDeduplicationKey(this.deduplicationId,this.id)>0:!1}validateOptions(e){var r,n,i,s,o,a,u,c;let l=["removeDependencyOnFailure","failParentOnFailure","continueParentOnFailure","ignoreDependencyOnFailure"];if(this.opts.sizeLimit&&(0,na.lengthInUtf8Bytes)(e.data)>this.opts.sizeLimit)throw new Error(`The size of job ${this.name} exceeds the limit ${this.opts.sizeLimit} bytes`);if(this.opts.delay&&this.opts.repeat&&!(!((r=this.opts.repeat)===null||r===void 0)&&r.count))throw new Error("Delay and repeat options could not be used together");let p=l.filter(f=>this.opts[f]);if(p.length>1){let f=p.join(", ");throw new Error(`The following options cannot be used together: ${f}`)}if(!((n=this.opts)===null||n===void 0)&&n.jobId){if(`${parseInt(this.opts.jobId,10)}`===((i=this.opts)===null||i===void 0?void 0:i.jobId))throw new Error("Custom Id cannot be integers");if(!((s=this.opts)===null||s===void 0)&&s.jobId.includes(":")&&((a=(o=this.opts)===null||o===void 0?void 0:o.jobId)===null||a===void 0?void 0:a.split(":").length)!==3)throw new Error("Custom Id cannot contain :")}if(this.opts.priority){if(Math.trunc(this.opts.priority)!==this.opts.priority)throw new Error("Priority should not be float");if(this.opts.priority>Im.PRIORITY_LIMIT)throw new Error(`Priority should be between 0 and ${Im.PRIORITY_LIMIT}`)}if(this.opts.deduplication&&!(!((u=this.opts.deduplication)===null||u===void 0)&&u.id))throw new Error("Deduplication id must be provided");if(this.opts.debounce&&!(!((c=this.opts.debounce)===null||c===void 0)&&c.id))throw new Error("Debounce id must be provided");if(typeof this.opts.backoff=="object"&&typeof this.opts.backoff.jitter=="number"&&(this.opts.backoff.jitter<0||this.opts.backoff.jitter>1))throw new Error("Jitter should be between 0 and 1")}updateStacktrace(e){this.stacktrace=this.stacktrace||[],e?.stack&&(this.stacktrace.push(e.stack),this.opts.stackTraceLimit===0?this.stacktrace=[]:this.opts.stackTraceLimit&&(this.stacktrace=this.stacktrace.slice(-this.opts.stackTraceLimit)))}};Im.Job=Sce;function Wdr(t){if(!t)return[];let e=(0,na.tryCatch)(JSON.parse,JSON,[t]);return e===na.errorObject||!(e instanceof Array)?[]:e}function bYe(t){let e=(0,na.tryCatch)(JSON.parse,JSON,[t]);if(e!==na.errorObject)return e;zdr("corrupted returnvalue: "+t,e)}});var rB=m(tB=>{"use strict";Object.defineProperty(tB,"__esModule",{value:!0});tB.QueueKeys=void 0;var wce=class{constructor(e="bull"){this.prefix=e}getKeys(e){let r={};return["","active","wait","waiting-children","paused","id","delayed","prioritized","stalled-check","completed","failed","stalled","repeat","limiter","meta","events","pc","marker","de"].forEach(n=>{r[n]=this.toKey(e,n)}),r}toKey(e,r){return`${this.getQueueQualifiedName(e)}:${r}`}getQueueQualifiedName(e){return`${this.prefix}:${e}`}};tB.QueueKeys=wce});var _Ye=m(nB=>{"use strict";Object.defineProperty(nB,"__esModule",{value:!0});nB.addDelayedJob=void 0;var Jdr=`--[[
  Adds a delayed job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - computes timestamp.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
    Input:
      KEYS[1] 'marker',
      KEYS[2] 'meta'
      KEYS[3] 'id'
      KEYS[4] 'delayed'
      KEYS[5] 'completed'
      KEYS[6] events stream key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (use custom instead of one generated automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local metaKey = KEYS[2]
local idKey = KEYS[3]
local delayedKey = KEYS[4]
local completedKey = KEYS[5]
local eventsKey = KEYS[6]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local opts = cmsgpack.unpack(ARGV[3])
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, delayedKey, deduplicationKey,
  eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
local delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],
    opts, timestamp, parentKey, parentData, repeatJobKey)
addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, KEYS[1], delay)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;nB.addDelayedJob={name:"addDelayedJob",content:Jdr,keys:6}});var vYe=m(iB=>{"use strict";Object.defineProperty(iB,"__esModule",{value:!0});iB.addJobScheduler=void 0;var Ydr=`--[[
  Adds a job scheduler, i.e. a job factory that creates jobs based on a given schedule (repeat options).
    Input:
      KEYS[1]  'repeat' key
      KEYS[2]  'delayed' key
      KEYS[3]  'wait' key
      KEYS[4]  'paused' key
      KEYS[5]  'meta' key
      KEYS[6]  'prioritized' key
      KEYS[7]  'marker' key
      KEYS[8]  'id' key
      KEYS[9]  'events' key
      KEYS[10] 'pc' priority counter
      KEYS[11] 'active' key
      ARGV[1] next milliseconds
      ARGV[2] msgpacked options
            [1]  name
            [2]  tz?
            [3]  pattern?
            [4]  endDate?
            [5]  every?
      ARGV[3] jobs scheduler id
      ARGV[4] Json stringified template data
      ARGV[5] mspacked template opts
      ARGV[6] msgpacked delayed opts
      ARGV[7] timestamp
      ARGV[8] prefix key
      ARGV[9] producer key
      Output:
        repeatableKey  - OK
]] local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local waitKey = KEYS[3]
local pausedKey = KEYS[4]
local metaKey = KEYS[5]
local prioritizedKey = KEYS[6]
local eventsKey = KEYS[9]
local nextMillis = ARGV[1]
local jobSchedulerId = ARGV[3]
local templateOpts = cmsgpack.unpack(ARGV[5])
local now = tonumber(ARGV[7])
local prefixKey = ARGV[8]
local jobOpts = cmsgpack.unpack(ARGV[6])
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
local function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, 
  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,
  data, jobSchedulerId, repeatDelay)
  opts['delay'] = repeatDelay
  opts['jobId'] = jobId
  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,
    opts, timestamp, nil, nil, jobSchedulerId)
  if delay ~= 0 then
    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)
  else
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
    -- Standard or priority add
    if priority == 0 then
      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
      -- Priority add
      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)
    end
    -- Emit waiting event
    rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents,  "*", "event", "waiting", "jobId", jobId)
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
--[[
  Function to store a job scheduler
]]
local function storeJobScheduler(schedulerId, schedulerKey, repeatKey, nextMillis, opts,
  templateData, templateOpts)
  rcall("ZADD", repeatKey, nextMillis, schedulerId)
  local optionalValues = {}
  if opts['tz'] then
    table.insert(optionalValues, "tz")
    table.insert(optionalValues, opts['tz'])
  end
  if opts['limit'] then
    table.insert(optionalValues, "limit")
    table.insert(optionalValues, opts['limit'])
  end
  if opts['pattern'] then
    table.insert(optionalValues, "pattern")
    table.insert(optionalValues, opts['pattern'])
  end
  if opts['startDate'] then
    table.insert(optionalValues, "startDate")
    table.insert(optionalValues, opts['startDate'])
  end
  if opts['endDate'] then
    table.insert(optionalValues, "endDate")
    table.insert(optionalValues, opts['endDate'])
  end
  if opts['every'] then
    table.insert(optionalValues, "every")
    table.insert(optionalValues, opts['every'])
  end
  if opts['offset'] then
    table.insert(optionalValues, "offset")
    table.insert(optionalValues, opts['offset'])
  else
    local offset = rcall("HGET", schedulerKey, "offset")
    if offset then
      table.insert(optionalValues, "offset")
      table.insert(optionalValues, tonumber(offset))
    end
  end
  local jsonTemplateOpts = cjson.encode(templateOpts)
  if jsonTemplateOpts and jsonTemplateOpts ~= '{}' then
    table.insert(optionalValues, "opts")
    table.insert(optionalValues, jsonTemplateOpts)
  end
  if templateData and templateData ~= '{}' then
    table.insert(optionalValues, "data")
    table.insert(optionalValues, templateData)
  end
  table.insert(optionalValues, "ic")
  table.insert(optionalValues, rcall("HGET", schedulerKey, "ic") or 1)
  rcall("DEL", schedulerKey) -- remove all attributes and then re-insert new ones
  rcall("HMSET", schedulerKey, "name", opts['name'], unpack(optionalValues))
end
local function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
    local nextMillis
    if not prevMillis then
        if startDate then
            -- Assuming startDate is passed as milliseconds from JavaScript
            nextMillis = tonumber(startDate)
            nextMillis = nextMillis > now and nextMillis or now
        else
            nextMillis = now
        end
    else
        nextMillis = prevMillis + every
        -- check if we may have missed some iterations
        if nextMillis < now then
            nextMillis = math.floor(now / every) * every + every + (offset or 0)
        end
    end
    if not offset or offset == 0 then
        local timeSlot = math.floor(nextMillis / every) * every;
        offset = nextMillis - timeSlot;
    end
    -- Return a tuple nextMillis, offset
    return math.floor(nextMillis), math.floor(offset)
end
-- If we are overriding a repeatable job we must delete the delayed job for
-- the next iteration.
local schedulerKey = repeatKey .. ":" .. jobSchedulerId
local maxEvents = getOrSetMaxEvents(metaKey)
local templateData = ARGV[4]
local prevMillis = rcall("ZSCORE", repeatKey, jobSchedulerId)
if prevMillis then
    prevMillis = tonumber(prevMillis)
end
local schedulerOpts = cmsgpack.unpack(ARGV[2])
local every = schedulerOpts['every']
-- For backwards compatibility we also check the offset from the job itself.
-- could be removed in future major versions.
local jobOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0
local offset = schedulerOpts['offset'] or jobOffset or 0
local newOffset = offset
local updatedEvery = false
if every then
    -- if we changed the 'every' value we need to reset millis to nil
    local millis = prevMillis
    if prevMillis then
        local prevEvery = tonumber(rcall("HGET", schedulerKey, "every"))
        if prevEvery ~= every then
            millis = nil
            updatedEvery = true
        end
    end
    local startDate = schedulerOpts['startDate']
    nextMillis, newOffset = getJobSchedulerEveryNextMillis(millis, every, now, offset, startDate)
end
local function removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, jobId, metaKey,
    eventsKey)
    if rcall("ZSCORE", delayedKey, jobId) then
        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
        rcall("ZREM", delayedKey, jobId)
        return true
    elseif rcall("ZSCORE", prioritizedKey, jobId) then
        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
        rcall("ZREM", prioritizedKey, jobId)
        return true
    else
        local pausedOrWaitKey = waitKey
        if isQueuePaused(metaKey) then
            pausedOrWaitKey = pausedKey
        end
        if rcall("LREM", pausedOrWaitKey, 1, jobId) > 0 then
            removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
            return true
        end
    end
    return false
end
local removedPrevJob = false
if prevMillis then
    local currentJobId = "repeat:" .. jobSchedulerId .. ":" .. prevMillis
    local currentJobKey = schedulerKey .. ":" .. prevMillis
    -- In theory it should always exist the currentJobKey if there is a prevMillis unless something has
    -- gone really wrong.
    if rcall("EXISTS", currentJobKey) == 1 then
        removedPrevJob = removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, currentJobId,
            metaKey, eventsKey)
    end
end
if removedPrevJob then
    -- The jobs has been removed and we want to replace it, so lets use the same millis.
    if every and not updatedEvery then
        nextMillis = prevMillis
    end
else
    -- Special case where no job was removed, and we need to add the next iteration.
    schedulerOpts['offset'] = newOffset
end
-- Check for job ID collision with existing jobs (in any state)
local jobId = "repeat:" .. jobSchedulerId .. ":" .. nextMillis
local jobKey = prefixKey .. jobId
-- If there's already a job with this ID, in a state 
-- that is not updatable (active, completed, failed) we must 
-- handle the collision
local hasCollision = false
if rcall("EXISTS", jobKey) == 1 then
    if every then
        -- For 'every' case: try next time slot to avoid collision
        local nextSlotMillis = nextMillis + every
        local nextSlotJobId = "repeat:" .. jobSchedulerId .. ":" .. nextSlotMillis
        local nextSlotJobKey = prefixKey .. nextSlotJobId
        if rcall("EXISTS", nextSlotJobKey) == 0 then
            -- Next slot is free, use it
            nextMillis = nextSlotMillis
            jobId = nextSlotJobId
        else
            -- Next slot also has a job, return error code
            return -11 -- SchedulerJobSlotsBusy
        end
    else
        hasCollision = true
    end
end
local delay = nextMillis - now
-- Fast Clamp delay to minimum of 0
if delay < 0 then
    delay = 0
end
local nextJobKey = schedulerKey .. ":" .. nextMillis
if not hasCollision or removedPrevJob then
    -- jobId already calculated above during collision check
    storeJobScheduler(jobSchedulerId, schedulerKey, repeatKey, nextMillis, schedulerOpts, templateData, templateOpts)
    rcall("INCR", KEYS[8])
    addJobFromScheduler(nextJobKey, jobId, jobOpts, waitKey, pausedKey, KEYS[11], metaKey, prioritizedKey, KEYS[10],
        delayedKey, KEYS[7], eventsKey, schedulerOpts['name'], maxEvents, now, templateData, jobSchedulerId, delay)
elseif hasCollision then
    -- For 'pattern' case: return error code
    return -10 -- SchedulerJobIdCollision
end
if ARGV[9] ~= "" then
    rcall("HSET", ARGV[9], "nrjid", jobId)
end
return {jobId .. "", delay}
`;iB.addJobScheduler={name:"addJobScheduler",content:Ydr,keys:11}});var SYe=m(sB=>{"use strict";Object.defineProperty(sB,"__esModule",{value:!0});sB.addLog=void 0;var Qdr=`--[[
  Add job log
  Input:
    KEYS[1] job id key
    KEYS[2] job logs key
    ARGV[1] id
    ARGV[2] log
    ARGV[3] keepLogs
  Output:
    -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
  local logCount = rcall("RPUSH", KEYS[2], ARGV[2])
  if ARGV[3] ~= '' then
    local keepLogs = tonumber(ARGV[3])
    rcall("LTRIM", KEYS[2], -keepLogs, -1)
    return math.min(keepLogs, logCount)
  end
  return logCount
else
  return -1
end
`;sB.addLog={name:"addLog",content:Qdr,keys:2}});var wYe=m(oB=>{"use strict";Object.defineProperty(oB,"__esModule",{value:!0});oB.addParentJob=void 0;var Xdr=`--[[
  Adds a parent job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - adds the job to the waiting-children zset
    Input:
      KEYS[1] 'meta'
      KEYS[2] 'id'
      KEYS[3] 'delayed'
      KEYS[4] 'waiting-children'
      KEYS[5] 'completed'
      KEYS[6] events stream key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local metaKey = KEYS[1]
local idKey = KEYS[2]
local completedKey = KEYS[5]
local eventsKey = KEYS[6]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
-- Store the job.
storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,
         parentKey, parentData, repeatJobKey)
local waitChildrenKey = KEYS[4]
rcall("ZADD", waitChildrenKey, timestamp, jobId)
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
      "waiting-children", "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;oB.addParentJob={name:"addParentJob",content:Xdr,keys:6}});var AYe=m(aB=>{"use strict";Object.defineProperty(aB,"__esModule",{value:!0});aB.addPrioritizedJob=void 0;var Zdr=`--[[
  Adds a priotitized job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'marker',
      KEYS[2] 'meta'
      KEYS[3] 'id'
      KEYS[4] 'prioritized'
      KEYS[5] 'delayed'
      KEYS[6] 'completed'
      KEYS[7] 'active'
      KEYS[8] events stream key
      KEYS[9] 'pc' priority counter
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]] 
local metaKey = KEYS[2]
local idKey = KEYS[3]
local priorityKey = KEYS[4]
local completedKey = KEYS[6]
local activeKey = KEYS[7]
local eventsKey = KEYS[8]
local priorityCounterKey = KEYS[9]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[5],
  deduplicationKey, eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
-- Store the job.
local delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],
                                 opts, timestamp, parentKey, parentData,
                                 repeatJobKey)
-- Add the job to the prioritized set
local isPausedOrMaxed = isQueuePausedOrMaxed(metaKey, activeKey)
addJobWithPriority( KEYS[1], priorityKey, priority, jobId, priorityCounterKey, isPausedOrMaxed)
-- Emit waiting event
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;aB.addPrioritizedJob={name:"addPrioritizedJob",content:Zdr,keys:9}});var CYe=m(uB=>{"use strict";Object.defineProperty(uB,"__esModule",{value:!0});uB.addRepeatableJob=void 0;var epr=`--[[
  Adds a repeatable job
    Input:
      KEYS[1] 'repeat' key
      KEYS[2] 'delayed' key
      ARGV[1] next milliseconds
      ARGV[2] msgpacked options
            [1]  name
            [2]  tz?
            [3]  pattern?
            [4]  endDate?
            [5]  every?
      ARGV[3] legacy custom key TODO: remove this logic in next breaking change
      ARGV[4] custom key
      ARGV[5] prefix key
      Output:
        repeatableKey  - OK
]]
local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local nextMillis = ARGV[1]
local legacyCustomKey = ARGV[3]
local customKey = ARGV[4]
local prefixKey = ARGV[5]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function storeRepeatableJob(repeatKey, customKey, nextMillis, rawOpts)
  rcall("ZADD", repeatKey, nextMillis, customKey)
  local opts = cmsgpack.unpack(rawOpts)
  local optionalValues = {}
  if opts['tz'] then
    table.insert(optionalValues, "tz")
    table.insert(optionalValues, opts['tz'])
  end
  if opts['pattern'] then
    table.insert(optionalValues, "pattern")
    table.insert(optionalValues, opts['pattern'])
  end
  if opts['endDate'] then
    table.insert(optionalValues, "endDate")
    table.insert(optionalValues, opts['endDate'])
  end
  if opts['every'] then
    table.insert(optionalValues, "every")
    table.insert(optionalValues, opts['every'])
  end
  rcall("HMSET", repeatKey .. ":" .. customKey, "name", opts['name'],
    unpack(optionalValues))
  return customKey
end
-- If we are overriding a repeatable job we must delete the delayed job for
-- the next iteration.
local prevMillis = rcall("ZSCORE", repeatKey, customKey)
if prevMillis then
  local delayedJobId =  "repeat:" .. customKey .. ":" .. prevMillis
  local nextDelayedJobId =  repeatKey .. ":" .. customKey .. ":" .. nextMillis
  if rcall("ZSCORE", delayedKey, delayedJobId)
   and rcall("EXISTS", nextDelayedJobId) ~= 1 then
    removeJob(delayedJobId, true, prefixKey, true --[[remove debounce key]])
    rcall("ZREM", delayedKey, delayedJobId)
  end
end
-- Keep backwards compatibility with old repeatable jobs (<= 3.0.0)
if rcall("ZSCORE", repeatKey, legacyCustomKey) ~= false then
  return storeRepeatableJob(repeatKey, legacyCustomKey, nextMillis, ARGV[2])
end
return storeRepeatableJob(repeatKey, customKey, nextMillis, ARGV[2])
`;uB.addRepeatableJob={name:"addRepeatableJob",content:epr,keys:2}});var TYe=m(cB=>{"use strict";Object.defineProperty(cB,"__esModule",{value:!0});cB.addStandardJob=void 0;var tpr=`--[[
  Adds a job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - if delayed:
      - computes timestamp.
      - adds to delayed zset.
      - Emits a global event 'delayed' if the job is delayed.
    - if not delayed
      - Adds the jobId to the wait/paused list in one of three ways:
         - LIFO
         - FIFO
         - prioritized.
      - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'wait',
      KEYS[2] 'paused'
      KEYS[3] 'meta'
      KEYS[4] 'id'
      KEYS[5] 'completed'
      KEYS[6] 'delayed'
      KEYS[7] 'active'
      KEYS[8] events stream key
      KEYS[9] marker key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local eventsKey = KEYS[8]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", KEYS[4])
local metaKey = KEYS[3]
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, KEYS[5], eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[6],
  deduplicationKey, eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
-- Store the job.
storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,
         parentKey, parentData, repeatJobKey)
local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[1], KEYS[2])
-- LIFO or FIFO
local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
addJobInTargetList(target, KEYS[9], pushCmd, isPausedOrMaxed, jobId)
-- Emit waiting event
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;cB.addStandardJob={name:"addStandardJob",content:tpr,keys:9}});var OYe=m(lB=>{"use strict";Object.defineProperty(lB,"__esModule",{value:!0});lB.changeDelay=void 0;var rpr=`--[[
  Change job delay when it is in delayed set.
  Input:
    KEYS[1] delayed key
    KEYS[2] meta key
    KEYS[3] marker key
    KEYS[4] events stream
    ARGV[1] delay
    ARGV[2] timestamp
    ARGV[3] the id of the job
    ARGV[4] job key
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in delayed set.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
if rcall("EXISTS", ARGV[4]) == 1 then
  local jobId = ARGV[3]
  local delay = tonumber(ARGV[1])
  local score, delayedTimestamp = getDelayedScore(KEYS[1], ARGV[2], delay)
  local numRemovedElements = rcall("ZREM", KEYS[1], jobId)
  if numRemovedElements < 1 then
    return -3
  end
  rcall("HSET", ARGV[4], "delay", delay)
  rcall("ZADD", KEYS[1], score, jobId)
  local maxEvents = getOrSetMaxEvents(KEYS[2])
  rcall("XADD", KEYS[4], "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(KEYS[3], KEYS[1])
  return 0
else
  return -1
end`;lB.changeDelay={name:"changeDelay",content:rpr,keys:4}});var xYe=m(dB=>{"use strict";Object.defineProperty(dB,"__esModule",{value:!0});dB.changePriority=void 0;var npr=`--[[
  Change job priority
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] 'active'
    KEYS[6] 'pc' priority counter
    KEYS[7] 'marker'
    ARGV[1] priority value
    ARGV[2] prefix key
    ARGV[3] job id
    ARGV[4] lifo
    Output:
       0  - OK
      -1  - Missing job
]]
local jobId = ARGV[3]
local jobKey = ARGV[2] .. jobId
local priority = tonumber(ARGV[1])
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
local function reAddJobWithNewPriority( prioritizedKey, markerKey, targetKey,
    priorityCounter, lifo, priority, jobId, isPausedOrMaxed)
    if priority == 0 then
        local pushCmd = lifo and 'RPUSH' or 'LPUSH'
        addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
        if lifo then
            pushBackJobWithPriority(prioritizedKey, priority, jobId)
        else
            addJobWithPriority(markerKey, prioritizedKey, priority, jobId,
                priorityCounter, isPausedOrMaxed)
        end
    end
end
if rcall("EXISTS", jobKey) == 1 then
    local metaKey = KEYS[3]
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[5], KEYS[1], KEYS[2])
    local prioritizedKey = KEYS[4]
    local priorityCounterKey = KEYS[6]
    local markerKey = KEYS[7]
    -- Re-add with the new priority
    if rcall("ZREM", prioritizedKey, jobId) > 0 then
        reAddJobWithNewPriority( prioritizedKey, markerKey, target,
            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)
    elseif rcall("LREM", target, -1, jobId) > 0 then
        reAddJobWithNewPriority( prioritizedKey, markerKey, target,
            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)
    end
    rcall("HSET", jobKey, "priority", priority)
    return 0
else
    return -1
end
`;dB.changePriority={name:"changePriority",content:npr,keys:7}});var IYe=m(pB=>{"use strict";Object.defineProperty(pB,"__esModule",{value:!0});pB.cleanJobsInSet=void 0;var ipr=`--[[
  Remove jobs from the specific set.
  Input:
    KEYS[1]  set key,
    KEYS[2]  events stream key
    KEYS[3]  repeat key
    ARGV[1]  jobKey prefix
    ARGV[2]  timestamp
    ARGV[3]  limit the number of jobs to be removed. 0 is unlimited
    ARGV[4]  set name, can be any of 'wait', 'active', 'paused', 'delayed', 'completed', or 'failed'
]]
local rcall = redis.call
local repeatKey = KEYS[3]
local rangeStart = 0
local rangeEnd = -1
local limit = tonumber(ARGV[3])
-- If we're only deleting _n_ items, avoid retrieving all items
-- for faster performance
--
-- Start from the tail of the list, since that's where oldest elements
-- are generally added for FIFO lists
if limit > 0 then
  rangeStart = -1 - limit + 1
  rangeEnd = -1
end
-- Includes
--[[
  Function to clean job list.
  Returns jobIds and deleted count number.
]]
-- Includes
--[[
  Function to get the latest saved timestamp.
]]
local function getTimestamp(jobKey, attributes)
  if #attributes == 1 then
    return rcall("HGET", jobKey, attributes[1])
  end
  local jobTs
  for _, ts in ipairs(rcall("HMGET", jobKey, unpack(attributes))) do
    if (ts) then
      jobTs = ts
      break
    end
  end
  return jobTs
end
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function cleanList(listKey, jobKeyPrefix, rangeStart, rangeEnd,
  timestamp, isWaiting, jobSchedulersKey)
  local jobs = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  local deleted = {}
  local deletedCount = 0
  local jobTS
  local deletionMarker = ''
  local jobIdsLen = #jobs
  for i, job in ipairs(jobs) do
    if limit > 0 and deletedCount >= limit then
      break
    end
    local jobKey = jobKeyPrefix .. job
    if (isWaiting or rcall("EXISTS", jobKey .. ":lock") == 0) and
      not isJobSchedulerJob(job, jobKey, jobSchedulersKey) then
      -- Find the right timestamp of the job to compare to maxTimestamp:
      -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
      -- * processedOn represents when the job was last attempted, but it doesn't get populated until
      --   the job is first tried
      -- * timestamp is the original job submission time
      -- Fetch all three of these (in that order) and use the first one that is set so that we'll leave jobs
      -- that have been active within the grace period:
      jobTS = getTimestamp(jobKey, {"finishedOn", "processedOn", "timestamp"})
      if (not jobTS or jobTS <= timestamp) then
        -- replace the entry with a deletion marker; the actual deletion will
        -- occur at the end of the script
        rcall("LSET", listKey, rangeEnd - jobIdsLen + i, deletionMarker)
        removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]])
        deletedCount = deletedCount + 1
        table.insert(deleted, job)
      end
    end
  end
  rcall("LREM", listKey, 0, deletionMarker)
  return {deleted, deletedCount}
end
--[[
  Function to clean job set.
  Returns jobIds and deleted count number.
]] 
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  We use ZRANGEBYSCORE to make the case where we're deleting a limited number
  of items in a sorted set only run a single iteration. If we simply used
  ZRANGE, we may take a long time traversing through jobs that are within the
  grace period.
]]
local function getJobsInZset(zsetKey, rangeEnd, limit)
  if limit > 0 then
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd, "LIMIT", 0, limit)
  else
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd)
  end
end
local function cleanSet(
    setKey,
    jobKeyPrefix,
    rangeEnd,
    timestamp,
    limit,
    attributes,
    isFinished,
    jobSchedulersKey)
    local jobs = getJobsInZset(setKey, rangeEnd, limit)
    local deleted = {}
    local deletedCount = 0
    local jobTS
    for i, job in ipairs(jobs) do
        if limit > 0 and deletedCount >= limit then
            break
        end
        local jobKey = jobKeyPrefix .. job
        -- Extract a Job Scheduler Id from jobId ("repeat:job-scheduler-id:millis") 
        -- and check if it is in the scheduled jobs
        if not (jobSchedulersKey and isJobSchedulerJob(job, jobKey, jobSchedulersKey)) then
            if isFinished then
                removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )
                deletedCount = deletedCount + 1
                table.insert(deleted, job)
            else
                -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
                jobTS = getTimestamp(jobKey, attributes)
                if (not jobTS or jobTS <= timestamp) then
                    removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )
                    deletedCount = deletedCount + 1
                    table.insert(deleted, job)
                end
            end
        end
    end
    if (#deleted > 0) then
        for from, to in batches(#deleted, 7000) do
            rcall("ZREM", setKey, unpack(deleted, from, to))
        end
    end
    return {deleted, deletedCount}
end
local result
if ARGV[4] == "active" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], false --[[ hasFinished ]],
                      repeatKey)
elseif ARGV[4] == "delayed" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"processedOn", "timestamp"}, false  --[[ hasFinished ]], repeatKey)
elseif ARGV[4] == "prioritized" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"timestamp"}, false  --[[ hasFinished ]], repeatKey)
elseif ARGV[4] == "wait" or ARGV[4] == "paused" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], true --[[ hasFinished ]],
                      repeatKey)
else
  rangeEnd = ARGV[2]
  -- No need to pass repeat key as in that moment job won't be related to a job scheduler
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"finishedOn"}, true  --[[ hasFinished ]])
end
rcall("XADD", KEYS[2], "*", "event", "cleaned", "count", result[2])
return result[1]
`;pB.cleanJobsInSet={name:"cleanJobsInSet",content:ipr,keys:3}});var RYe=m(fB=>{"use strict";Object.defineProperty(fB,"__esModule",{value:!0});fB.drain=void 0;var spr=`--[[
  Drains the queue, removes all jobs that are waiting
  or delayed, but not active, completed or failed
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'delayed'
    KEYS[4] 'prioritized'
    KEYS[5] 'jobschedulers' (repeat)
    ARGV[1]  queue key prefix
    ARGV[2]  should clean delayed jobs
]]
local rcall = redis.call
local queueBaseKey = ARGV[1]
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to filter out jobs to ignore from a table.
]]
local function filterOutJobsToIgnore(jobs, jobsToIgnore)
  local filteredJobs = {}
  for i = 1, #jobs do
    if not jobsToIgnore[jobs[i]] then
      table.insert(filteredJobs, jobs[i])
    end
  end
  return filteredJobs
end
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey, true --[[remove debounce key]])
  end
  return max - #keys
end
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getListItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getZSetItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
-- We must not remove delayed jobs if they are associated to a job scheduler.
local scheduledJobs = {}
local jobSchedulers = rcall("ZRANGE", KEYS[5], 0, -1, "WITHSCORES")
-- For every job scheduler, get the current delayed job id.
for i = 1, #jobSchedulers, 2 do
    local jobSchedulerId = jobSchedulers[i]
    local jobSchedulerMillis = jobSchedulers[i + 1]
    local delayedJobId = "repeat:" .. jobSchedulerId .. ":" .. jobSchedulerMillis
    scheduledJobs[delayedJobId] = true
end
removeListJobs(KEYS[1], true, queueBaseKey, 0, scheduledJobs) -- wait
removeListJobs(KEYS[2], true, queueBaseKey, 0, scheduledJobs) -- paused
if ARGV[2] == "1" then
  removeZSetJobs(KEYS[3], true, queueBaseKey, 0, scheduledJobs) -- delayed
end
removeZSetJobs(KEYS[4], true, queueBaseKey, 0, scheduledJobs) -- prioritized
`;fB.drain={name:"drain",content:spr,keys:5}});var DYe=m(hB=>{"use strict";Object.defineProperty(hB,"__esModule",{value:!0});hB.extendLock=void 0;var opr=`--[[
  Extend lock and removes the job from the stalled set.
  Input:
    KEYS[1] 'lock',
    KEYS[2] 'stalled'
    ARGV[1]  token
    ARGV[2]  lock duration in milliseconds
    ARGV[3]  jobid
  Output:
    "1" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  --   if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2], "XX") then
  if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2]) then
    rcall("SREM", KEYS[2], ARGV[3])
    return 1
  end
end
return 0
`;hB.extendLock={name:"extendLock",content:opr,keys:2}});var kYe=m(mB=>{"use strict";Object.defineProperty(mB,"__esModule",{value:!0});mB.extendLocks=void 0;var apr=`--[[
  Extend locks for multiple jobs and remove them from the stalled set if successful.
  Return the list of job IDs for which the operation failed.
  KEYS[1] = stalled key
  ARGV[1] = baseKey
  ARGV[2] = tokens
  ARGV[3] = jobIds
  ARGV[4] = lockDuration (ms)
  Output:
    An array of failed job IDs. If empty, all succeeded.
]]
local rcall = redis.call
local stalledKey = KEYS[1]
local baseKey = ARGV[1]
local tokens = cmsgpack.unpack(ARGV[2])
local jobIds = cmsgpack.unpack(ARGV[3])
local lockDuration = ARGV[4]
local jobCount = #jobIds
local failedJobs = {}
for i = 1, jobCount, 1 do
    local lockKey = baseKey .. jobIds[i] .. ':lock'
    local jobId = jobIds[i]
    local token = tokens[i]
    local currentToken = rcall("GET", lockKey)
    if currentToken then
        if currentToken == token then
            local setResult = rcall("SET", lockKey, token, "PX", lockDuration)
            if setResult then
                rcall("SREM", stalledKey, jobId)
            else
                table.insert(failedJobs, jobId)
            end
        else
            table.insert(failedJobs, jobId)
        end
    else
        table.insert(failedJobs, jobId)
    end
end
return failedJobs
`;mB.extendLocks={name:"extendLocks",content:apr,keys:1}});var MYe=m(yB=>{"use strict";Object.defineProperty(yB,"__esModule",{value:!0});yB.getCounts=void 0;var upr=`--[[
  Get counts per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1...] types
]]
local rcall = redis.call;
local prefix = KEYS[1]
local results = {}
for i = 1, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        results[#results+1] = count-1
      else
        results[#results+1] = 0
      end
    else
      results[#results+1] = rcall("LLEN", stateKey)
    end
  elseif ARGV[i] == "active" then
    results[#results+1] = rcall("LLEN", stateKey)
  else
    results[#results+1] = rcall("ZCARD", stateKey)
  end
end
return results
`;yB.getCounts={name:"getCounts",content:upr,keys:1}});var PYe=m(gB=>{"use strict";Object.defineProperty(gB,"__esModule",{value:!0});gB.getCountsPerPriority=void 0;var cpr=`--[[
  Get counts per provided states
    Input:
      KEYS[1] wait key
      KEYS[2] paused key
      KEYS[3] meta key
      KEYS[4] prioritized key
      ARGV[1...] priorities
]]
local rcall = redis.call
local results = {}
local waitKey = KEYS[1]
local pausedKey = KEYS[2]
local prioritizedKey = KEYS[4]
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
for i = 1, #ARGV do
  local priority = tonumber(ARGV[i])
  if priority == 0 then
    if isQueuePaused(KEYS[3]) then
      results[#results+1] = rcall("LLEN", pausedKey)
    else
      results[#results+1] = rcall("LLEN", waitKey)
    end
  else
    results[#results+1] = rcall("ZCOUNT", prioritizedKey,
      priority * 0x100000000, (priority + 1)  * 0x100000000 - 1)
  end
end
return results
`;gB.getCountsPerPriority={name:"getCountsPerPriority",content:cpr,keys:4}});var NYe=m(EB=>{"use strict";Object.defineProperty(EB,"__esModule",{value:!0});EB.getDependencyCounts=void 0;var lpr=`--[[
  Get counts per child states
    Input:
      KEYS[1]    processed key
      KEYS[2]    unprocessed key
      KEYS[3]    ignored key
      KEYS[4]    failed key
      ARGV[1...] types
]]
local rcall = redis.call;
local processedKey = KEYS[1]
local unprocessedKey = KEYS[2]
local ignoredKey = KEYS[3]
local failedKey = KEYS[4]
local results = {}
for i = 1, #ARGV do
  if ARGV[i] == "processed" then
    results[#results+1] = rcall("HLEN", processedKey)
  elseif ARGV[i] == "unprocessed" then
    results[#results+1] = rcall("SCARD", unprocessedKey)
  elseif ARGV[i] == "ignored" then
    results[#results+1] = rcall("HLEN", ignoredKey)
  else
    results[#results+1] = rcall("ZCARD", failedKey)
  end
end
return results
`;EB.getDependencyCounts={name:"getDependencyCounts",content:lpr,keys:4}});var FYe=m(bB=>{"use strict";Object.defineProperty(bB,"__esModule",{value:!0});bB.getJobScheduler=void 0;var dpr=`--[[
  Get job scheduler record.
  Input:
    KEYS[1] 'repeat' key
    ARGV[1] id
]]
local rcall = redis.call
local jobSchedulerKey = KEYS[1] .. ":" .. ARGV[1]
local score = rcall("ZSCORE", KEYS[1], ARGV[1])
if score then
  return {rcall("HGETALL", jobSchedulerKey), score} -- get job data
end
return {nil, nil}
`;bB.getJobScheduler={name:"getJobScheduler",content:dpr,keys:1}});var BYe=m(_B=>{"use strict";Object.defineProperty(_B,"__esModule",{value:!0});_B.getMetrics=void 0;var ppr=`--[[
  Get metrics
  Input:
    KEYS[1] 'metrics' key
    KEYS[2] 'metrics data' key
    ARGV[1] start index
    ARGV[2] end index
]]
local rcall = redis.call;
local metricsKey = KEYS[1]
local dataKey = KEYS[2]
local metrics = rcall("HMGET", metricsKey, "count", "prevTS", "prevCount")
local data = rcall("LRANGE", dataKey, tonumber(ARGV[1]), tonumber(ARGV[2]))
local numPoints = rcall("LLEN", dataKey)
return {metrics, data, numPoints}
`;_B.getMetrics={name:"getMetrics",content:ppr,keys:2}});var qYe=m(vB=>{"use strict";Object.defineProperty(vB,"__esModule",{value:!0});vB.getRanges=void 0;var fpr=`--[[
  Get job ids per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1]    start
      ARGV[2]    end
      ARGV[3]    asc
      ARGV[4...] types
]]
local rcall = redis.call
local prefix = KEYS[1]
local rangeStart = tonumber(ARGV[1])
local rangeEnd = tonumber(ARGV[2])
local asc = ARGV[3]
local results = {}
local function getRangeInList(listKey, asc, rangeStart, rangeEnd, results)
  if asc == "1" then
    local modifiedRangeStart
    local modifiedRangeEnd
    if rangeStart == -1 then
      modifiedRangeStart = 0
    else
      modifiedRangeStart = -(rangeStart + 1)
    end
    if rangeEnd == -1 then
      modifiedRangeEnd = 0
    else
      modifiedRangeEnd = -(rangeEnd + 1)
    end
    results[#results+1] = rcall("LRANGE", listKey,
      modifiedRangeEnd,
      modifiedRangeStart)
  else
    results[#results+1] = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  end
end
for i = 4, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
      else
        results[#results+1] = {}
      end
    else
      getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
    end
  elseif ARGV[i] == "active" then
    getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
  else
    if asc == "1" then
      results[#results+1] = rcall("ZRANGE", stateKey, rangeStart, rangeEnd)
    else
      results[#results+1] = rcall("ZREVRANGE", stateKey, rangeStart, rangeEnd)
    end
  end
end
return results
`;vB.getRanges={name:"getRanges",content:fpr,keys:1}});var LYe=m(SB=>{"use strict";Object.defineProperty(SB,"__esModule",{value:!0});SB.getRateLimitTtl=void 0;var hpr=`--[[
  Get rate limit ttl
    Input:
      KEYS[1] 'limiter'
      KEYS[2] 'meta'
      ARGV[1] maxJobs
]]
local rcall = redis.call
-- Includes
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
local rateLimiterKey = KEYS[1]
if ARGV[1] ~= "0" then
  return getRateLimitTTL(tonumber(ARGV[1]), rateLimiterKey)
else
  local rateLimitMax = rcall("HGET", KEYS[2], "max")
  if rateLimitMax then
    return getRateLimitTTL(tonumber(rateLimitMax), rateLimiterKey)
  end
  return rcall("PTTL", rateLimiterKey)
end
`;SB.getRateLimitTtl={name:"getRateLimitTtl",content:hpr,keys:2}});var jYe=m(wB=>{"use strict";Object.defineProperty(wB,"__esModule",{value:!0});wB.getState=void 0;var mpr=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'prioritized'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) then
  return "prioritized"
end
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local active_items = rcall("LRANGE", KEYS[4] , 0, -1)
if checkItemInList(active_items, ARGV[1]) ~= nil then
  return "active"
end
local wait_items = rcall("LRANGE", KEYS[5] , 0, -1)
if checkItemInList(wait_items, ARGV[1]) ~= nil then
  return "waiting"
end
local paused_items = rcall("LRANGE", KEYS[6] , 0, -1)
if checkItemInList(paused_items, ARGV[1]) ~= nil then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7], ARGV[1]) then
  return "waiting-children"
end
return "unknown"
`;wB.getState={name:"getState",content:mpr,keys:8}});var $Ye=m(AB=>{"use strict";Object.defineProperty(AB,"__esModule",{value:!0});AB.getStateV2=void 0;var ypr=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) then
  return "prioritized"
end
if rcall("LPOS", KEYS[4] , ARGV[1]) then
  return "active"
end
if rcall("LPOS", KEYS[5] , ARGV[1]) then
  return "waiting"
end
if rcall("LPOS", KEYS[6] , ARGV[1]) then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7] , ARGV[1]) then
  return "waiting-children"
end
return "unknown"
`;AB.getStateV2={name:"getStateV2",content:ypr,keys:8}});var KYe=m(CB=>{"use strict";Object.defineProperty(CB,"__esModule",{value:!0});CB.isFinished=void 0;var gpr=`--[[
  Checks if a job is finished (.i.e. is in the completed or failed set)
  Input: 
    KEYS[1] completed key
    KEYS[2] failed key
    KEYS[3] job key
    ARGV[1] job id
    ARGV[2] return value?
  Output:
    0 - Not finished.
    1 - Completed.
    2 - Failed.
   -1 - Missing job. 
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[3]) ~= 1 then
  if ARGV[2] == "1" then
    return {-1,"Missing key for job " .. KEYS[3] .. ". isFinished"}
  end  
  return -1
end
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  if ARGV[2] == "1" then
    local returnValue = rcall("HGET", KEYS[3], "returnvalue")
    return {1,returnValue}
  end
  return 1
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  if ARGV[2] == "1" then
    local failedReason = rcall("HGET", KEYS[3], "failedReason")
    return {2,failedReason}
  end
  return 2
end
if ARGV[2] == "1" then
  return {0}
end
return 0
`;CB.isFinished={name:"isFinished",content:gpr,keys:3}});var UYe=m(TB=>{"use strict";Object.defineProperty(TB,"__esModule",{value:!0});TB.isJobInList=void 0;var Epr=`--[[
  Checks if job is in a given list.
  Input:
    KEYS[1]
    ARGV[1]
  Output:
    1 if element found in the list.
]]
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local items = redis.call("LRANGE", KEYS[1] , 0, -1)
return checkItemInList(items, ARGV[1])
`;TB.isJobInList={name:"isJobInList",content:Epr,keys:1}});var VYe=m(OB=>{"use strict";Object.defineProperty(OB,"__esModule",{value:!0});OB.isMaxed=void 0;var bpr=`--[[
  Checks if queue is maxed.
  Input:
    KEYS[1] meta key
    KEYS[2] active key
  Output:
    1 if element found in the list.
]]
local rcall = redis.call
-- Includes
--[[
  Function to check if queue is maxed or not.
]]
local function isQueueMaxed(queueMetaKey, activeKey)
  local maxConcurrency = rcall("HGET", queueMetaKey, "concurrency")
  if maxConcurrency then
    local activeCount = rcall("LLEN", activeKey)
    if activeCount >= tonumber(maxConcurrency) then
      return true
    end
  end
  return false
end
return isQueueMaxed(KEYS[1], KEYS[2])
`;OB.isMaxed={name:"isMaxed",content:bpr,keys:2}});var GYe=m(xB=>{"use strict";Object.defineProperty(xB,"__esModule",{value:!0});xB.moveJobFromActiveToWait=void 0;var _pr=`--[[
  Function to move job from active state to wait.
  Input:
    KEYS[1]  active key
    KEYS[2]  wait key
    KEYS[3]  stalled key
    KEYS[4]  paused key
    KEYS[5]  meta key
    KEYS[6]  limiter key
    KEYS[7]  prioritized key
    KEYS[8]  marker key
    KEYS[9]  event key
    ARGV[1] job id
    ARGV[2] lock token
    ARGV[3] job id key
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
local jobId = ARGV[1]
local token = ARGV[2]
local jobKey = ARGV[3]
if rcall("EXISTS", jobKey) == 0 then
  return -1
end
local errorCode = removeLock(jobKey, KEYS[3], token, jobId)
if errorCode < 0 then
  return errorCode
end
local metaKey = KEYS[5]
local removed = rcall("LREM", KEYS[1], 1, jobId)
if removed > 0 then
  local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[1], KEYS[2], KEYS[4])
  local priority = tonumber(rcall("HGET", ARGV[3], "priority")) or 0
  if priority > 0 then
    pushBackJobWithPriority(KEYS[7], priority, jobId)
  else
    addJobInTargetList(target, KEYS[8], "RPUSH", isPausedOrMaxed, jobId)
  end
  local maxEvents = getOrSetMaxEvents(metaKey)
  -- Emit waiting event
  rcall("XADD", KEYS[9], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", jobId, "prev", "active")
end
local pttl = rcall("PTTL", KEYS[6])
if pttl > 0 then
  return pttl
else
  return 0
end
`;xB.moveJobFromActiveToWait={name:"moveJobFromActiveToWait",content:_pr,keys:9}});var HYe=m(IB=>{"use strict";Object.defineProperty(IB,"__esModule",{value:!0});IB.moveJobsToWait=void 0;var vpr=`--[[
  Move completed, failed or delayed jobs to wait.
  Note: Does not support jobs with priorities.
  Input:
    KEYS[1] base key
    KEYS[2] events stream
    KEYS[3] state key (failed, completed, delayed)
    KEYS[4] 'wait'
    KEYS[5] 'paused'
    KEYS[6] 'meta'
    KEYS[7] 'active'
    KEYS[8] 'marker'
    ARGV[1] count
    ARGV[2] timestamp
    ARGV[3] prev state
  Output:
    1  means the operation is not completed
    0  means the operation is completed
]]
local maxCount = tonumber(ARGV[1])
local timestamp = tonumber(ARGV[2])
local rcall = redis.call;
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local metaKey = KEYS[6]
local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[4], KEYS[5])
local jobs = rcall('ZRANGEBYSCORE', KEYS[3], 0, timestamp, 'LIMIT', 0, maxCount)
if (#jobs > 0) then
    if ARGV[3] == "failed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "failedReason")
        end
    elseif ARGV[3] == "completed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "returnvalue")
        end
    end
    local maxEvents = getOrSetMaxEvents(metaKey)
    for i, key in ipairs(jobs) do
        -- Emit waiting event
        rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event",
              "waiting", "jobId", key, "prev", ARGV[3]);
    end
    for from, to in batches(#jobs, 7000) do
        rcall("ZREM", KEYS[3], unpack(jobs, from, to))
        rcall("LPUSH", target, unpack(jobs, from, to))
    end
    addBaseMarkerIfNeeded(KEYS[8], isPausedOrMaxed)
end
maxCount = maxCount - #jobs
if (maxCount <= 0) then return 1 end
return 0
`;IB.moveJobsToWait={name:"moveJobsToWait",content:vpr,keys:8}});var zYe=m(RB=>{"use strict";Object.defineProperty(RB,"__esModule",{value:!0});RB.moveStalledJobsToWait=void 0;var Spr=`--[[
  Move stalled jobs to wait.
    Input:
      KEYS[1] 'stalled' (SET)
      KEYS[2] 'wait',   (LIST)
      KEYS[3] 'active', (LIST)
      KEYS[4] 'stalled-check', (KEY)
      KEYS[5] 'meta', (KEY)
      KEYS[6] 'paused', (LIST)
      KEYS[7] 'marker'
      KEYS[8] 'event stream' (STREAM)
      ARGV[1]  Max stalled job count
      ARGV[2]  queue.toKey('')
      ARGV[3]  timestamp
      ARGV[4]  max check time
    Events:
      'stalled' with stalled job id.
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to move job to wait to be picked up by a waiting worker.
]]
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey,
  jobId, pushCmd)
  local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
  addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId", jobId, 'prev', 'active')
end
--[[
  Function to trim events, default 10000.
]]
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = getOrSetMaxEvents(metaKey)
  if maxEvents then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
local stalledKey = KEYS[1]
local waitKey = KEYS[2]
local activeKey = KEYS[3]
local stalledCheckKey = KEYS[4]
local metaKey = KEYS[5]
local pausedKey = KEYS[6]
local markerKey = KEYS[7]
local eventStreamKey = KEYS[8]
local maxStalledJobCount = tonumber(ARGV[1])
local queueKeyPrefix = ARGV[2]
local timestamp = ARGV[3]
local maxCheckTime = ARGV[4]
if rcall("EXISTS", stalledCheckKey) == 1 then
    return {}
end
rcall("SET", stalledCheckKey, timestamp, "PX", maxCheckTime)
-- Trim events before emiting them to avoid trimming events emitted in this script
trimEvents(metaKey, eventStreamKey)
-- Move all stalled jobs to wait
local stalling = rcall('SMEMBERS', stalledKey)
local stalled = {}
if (#stalling > 0) then
    rcall('DEL', stalledKey)
    -- Remove from active list
    for i, jobId in ipairs(stalling) do
        -- Markers in waitlist DEPRECATED in v5: Remove in v6.
        if string.sub(jobId, 1, 2) == "0:" then
            -- If the jobId is a delay marker ID we just remove it.
            rcall("LREM", activeKey, 1, jobId)
        else
            local jobKey = queueKeyPrefix .. jobId
            -- Check that the lock is also missing, then we can handle this job as really stalled.
            if (rcall("EXISTS", jobKey .. ":lock") == 0) then
                --  Remove from the active queue.
                local removed = rcall("LREM", activeKey, 1, jobId)
                if (removed > 0) then
                    -- If this job has been stalled too many times, such as if it crashes the worker, then fail it.
                    local stalledCount = rcall("HINCRBY", jobKey, "stc", 1)
                    -- Check if this is a repeatable job by looking at job options
                    local jobOpts = rcall("HGET", jobKey, "opts")
                    local isRepeatableJob = false
                    if jobOpts then
                        local opts = cjson.decode(jobOpts)
                        if opts and opts["repeat"] then
                            isRepeatableJob = true
                        end
                    end
                    -- Only fail job if it exceeds stall limit AND is not a repeatable job
                    if stalledCount > maxStalledJobCount and not isRepeatableJob then
                        local failedReason = "job stalled more than allowable limit"
                        rcall("HSET", jobKey, "defa", failedReason)
                    end
                    moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey, jobId,
                        "RPUSH")
                    -- Emit the stalled event
                    rcall("XADD", eventStreamKey, "*", "event", "stalled", "jobId", jobId)
                    table.insert(stalled, jobId)
                end
            end
        end
    end
end
-- Mark potentially stalled jobs
local active = rcall('LRANGE', activeKey, 0, -1)
if (#active > 0) then
    for from, to in batches(#active, 7000) do
        rcall('SADD', stalledKey, unpack(active, from, to))
    end
end
return stalled
`;RB.moveStalledJobsToWait={name:"moveStalledJobsToWait",content:Spr,keys:8}});var WYe=m(DB=>{"use strict";Object.defineProperty(DB,"__esModule",{value:!0});DB.moveToActive=void 0;var wpr=`--[[
  Move next job to be processed to active, lock it and fetch its data. The job
  may be delayed, in that case we need to move it to the delayed set instead.
  This operation guarantees that the worker owns the job during the lock
  expiration time. The worker is responsible of keeping the lock fresh
  so that no other worker picks this job again.
  Input:
    KEYS[1] wait key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] stream events key
    KEYS[5] stalled key
    -- Rate limiting
    KEYS[6] rate limiter key
    KEYS[7] delayed key
    -- Delayed jobs
    KEYS[8] paused key
    KEYS[9] meta key
    KEYS[10] pc priority counter
    -- Marker
    KEYS[11] marker key
    -- Arguments
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] opts
    opts - token - lock token
    opts - lockDuration
    opts - limiter
    opts - name - worker name
]]
local rcall = redis.call
local waitKey = KEYS[1]
local activeKey = KEYS[2]
local eventStreamKey = KEYS[4]
local rateLimiterKey = KEYS[6]
local delayedKey = KEYS[7]
local opts = cmsgpack.unpack(ARGV[3])
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,
    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  -- get a lock
  if opts['token'] ~= "0" then
    local lockKey = jobKey .. ':lock'
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  local optionalValues = {}
  if opts['name'] then
    -- Set "processedBy" field to the worker name
    table.insert(optionalValues, "pb")
    table.insert(optionalValues, opts['name'])
  end
  rcall("XADD", eventStreamKey, "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HMSET", jobKey, "processedOn", processedOn, unpack(optionalValues))
  rcall("HINCRBY", jobKey, "ats", 1)
  addBaseMarkerIfNeeded(markerKey, false)
  -- rate limit delay must be 0 in this case to prevent adding more delay
  -- when job that is moved to active needs to be processed
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
local target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(KEYS[9],
    activeKey, waitKey, KEYS[8])
-- Check if there are delayed jobs that we can move to wait.
local markerKey = KEYS[11]
promoteDelayedJobs(delayedKey, markerKey, target, KEYS[3], eventStreamKey, ARGV[1],
                   ARGV[2], KEYS[10], isPausedOrMaxed)
local maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))
local expireTime = getRateLimitTTL(maxJobs, rateLimiterKey)
-- Check if we are rate limited first.
if expireTime > 0 then return {0, 0, expireTime, 0} end
-- paused or maxed queue
if isPausedOrMaxed then return {0, 0, 0, 0} end
local limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration
-- no job ID, try non-blocking move from wait to active
local jobId = rcall("RPOPLPUSH", waitKey, activeKey)
-- Markers in waitlist DEPRECATED in v5: Will be completely removed in v6.
if jobId and string.sub(jobId, 1, 2) == "0:" then
    rcall("LREM", activeKey, 1, jobId)
    jobId = rcall("RPOPLPUSH", waitKey, activeKey)
end
if jobId then
    return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],
                                   maxJobs, limiterDuration, markerKey, opts)
else
    jobId = moveJobFromPrioritizedToActive(KEYS[3], activeKey, KEYS[10])
    if jobId then
        return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],
                                       maxJobs, limiterDuration, markerKey, opts)
    end
end
-- Return the timestamp for the next delayed job if any.
local nextTimestamp = getNextDelayedTimestamp(delayedKey)
if nextTimestamp ~= nil then return {0, 0, 0, nextTimestamp} end
return {0, 0, 0, 0}
`;DB.moveToActive={name:"moveToActive",content:wpr,keys:11}});var JYe=m(kB=>{"use strict";Object.defineProperty(kB,"__esModule",{value:!0});kB.moveToDelayed=void 0;var Apr=`--[[
  Moves job from active to delayed set.
  Input:
    KEYS[1] marker key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] delayed key
    KEYS[5] job key
    KEYS[6] events stream
    KEYS[7] meta key
    KEYS[8] stalled key
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] the id of the job
    ARGV[4] queue token
    ARGV[5] delay value
    ARGV[6] skip attempt
    ARGV[7] optional job fields to update
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in active set.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local jobKey = KEYS[5]
local metaKey = KEYS[7]
local token = ARGV[4] 
if rcall("EXISTS", jobKey) == 1 then
    local errorCode = removeLock(jobKey, KEYS[8], token, ARGV[3])
    if errorCode < 0 then
        return errorCode
    end
    updateJobFields(jobKey, ARGV[7])
    local delayedKey = KEYS[4]
    local jobId = ARGV[3]
    local delay = tonumber(ARGV[5])
    local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
    if numRemovedElements < 1 then return -3 end
    local score, delayedTimestamp = getDelayedScore(delayedKey, ARGV[2], delay)
    if ARGV[6] == "0" then
        rcall("HINCRBY", jobKey, "atm", 1)
    end
    rcall("HSET", jobKey, "delay", ARGV[5])
    local maxEvents = getOrSetMaxEvents(metaKey)
    rcall("ZADD", delayedKey, score, jobId)
    rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "delayed",
          "jobId", jobId, "delay", delayedTimestamp)
    -- Check if we need to push a marker job to wake up sleeping workers.
    local markerKey = KEYS[1]
    addDelayMarkerIfNeeded(markerKey, delayedKey)
    return 0
else
    return -1
end
`;kB.moveToDelayed={name:"moveToDelayed",content:Apr,keys:8}});var YYe=m(MB=>{"use strict";Object.defineProperty(MB,"__esModule",{value:!0});MB.moveToFinished=void 0;var Cpr=`--[[
  Move job from active to a finished status (completed o failed)
  A job can only be moved to completed if it was active.
  The job must be locked before it can be moved to a finished status,
  and the lock must be released in this script.
    Input:
      KEYS[1] wait key
      KEYS[2] active key
      KEYS[3] prioritized key
      KEYS[4] event stream key
      KEYS[5] stalled key
      -- Rate limiting
      KEYS[6] rate limiter key
      KEYS[7] delayed key
      KEYS[8] paused key
      KEYS[9] meta key
      KEYS[10] pc priority counter
      KEYS[11] completed/failed key
      KEYS[12] jobId key
      KEYS[13] metrics key
      KEYS[14] marker key
      ARGV[1]  jobId
      ARGV[2]  timestamp
      ARGV[3]  msg property returnvalue / failedReason
      ARGV[4]  return value / failed reason
      ARGV[5]  target (completed/failed)
      ARGV[6]  fetch next?
      ARGV[7]  keys prefix
      ARGV[8]  opts
      ARGV[9]  job fields to update
      opts - token - lock token
      opts - keepJobs
      opts - lockDuration - lock duration in milliseconds
      opts - attempts max attempts
      opts - maxMetricsSize
      opts - fpof - fail parent on fail
      opts - cpof - continue parent on fail
      opts - idof - ignore dependency on fail
      opts - rdof - remove dependency on fail
      opts - name - worker name
    Output:
      0 OK
      -1 Missing key.
      -2 Missing lock.
      -3 Job not in active set
      -4 Job has pending children
      -6 Lock is not owned by this client
      -9 Job has failed children
    Events:
      'completed/failed'
]]
local rcall = redis.call
--- Includes
--[[
  Functions to collect metrics based on a current and previous count of jobs.
  Granualarity is fixed at 1 minute.
]]
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
local function collectMetrics(metaKey, dataPointsList, maxDataPoints,
                                 timestamp)
    -- Increment current count
    local count = rcall("HINCRBY", metaKey, "count", 1) - 1
    -- Compute how many data points we need to add to the list, N.
    local prevTS = rcall("HGET", metaKey, "prevTS")
    if not prevTS then
        -- If prevTS is nil, set it to the current timestamp
        rcall("HSET", metaKey, "prevTS", timestamp, "prevCount", 0)
        return
    end
    local N = math.min(math.floor(timestamp / 60000) - math.floor(prevTS / 60000), tonumber(maxDataPoints))
    if N > 0 then
        local delta = count - rcall("HGET", metaKey, "prevCount")
        -- If N > 1, add N-1 zeros to the list
        if N > 1 then
            local points = {}
            points[1] = delta
            for i = 2, N do
                points[i] = 0
            end
            for from, to in batches(#points, 7000) do
                rcall("LPUSH", dataPointsList, unpack(points, from, to))
            end
        else
            -- LPUSH delta to the list
            rcall("LPUSH", dataPointsList, delta)
        end
        -- LTRIM to keep list to its max size
        rcall("LTRIM", dataPointsList, 0, maxDataPoints - 1)
        -- update prev count with current count
        rcall("HSET", metaKey, "prevCount", count, "prevTS", timestamp)
    end
end
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to recursively move from waitingChildren to failed.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
--[[
  Functions to remove jobs when removeOnFail option is provided.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
--[[
  Functions to remove jobs by max age.
]]
-- Includes
local function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix,
  shouldRemoveDebounceKey)
  local start = timestamp - maxAge * 1000
  local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix, false --[[remove debounce key]])
  end
  rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)
end
--[[
  Functions to remove jobs by max count.
]]
-- Includes
local function removeJobsByMaxCount(maxCount, targetSet, prefix)
  local start = maxCount
  local jobIds = rcall("ZREVRANGE", targetSet, start, -1)
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix, false --[[remove debounce key]])
  end
  rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1))
end
local function removeJobsOnFail(queueKeyPrefix, failedKey, jobId, opts, timestamp)
  local removeOnFailType = type(opts["removeOnFail"])
  if removeOnFailType == "number" then
    removeJobsByMaxCount(opts["removeOnFail"],
                        failedKey, queueKeyPrefix)
  elseif removeOnFailType == "boolean" then
    if opts["removeOnFail"] then
      removeJob(jobId, false, queueKeyPrefix,
                false --[[remove debounce key]])
      rcall("ZREM", failedKey, jobId)
    end
  elseif removeOnFailType ~= "nil" then
    local maxAge = opts["removeOnFail"]["age"]
    local maxCount = opts["removeOnFail"]["count"]
    if maxAge ~= nil then
      removeJobsByMaxAge(timestamp, maxAge,
                        failedKey, queueKeyPrefix)
    end
    if maxCount ~= nil and maxCount > 0 then
      removeJobsByMaxCount(maxCount, failedKey,
                            queueKeyPrefix)
    end
  end 
end
local moveParentToFailedIfNeeded = function (parentQueueKey, parentKey, parentId, jobIdKey, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    local parentDelayedKey = parentQueueKey .. ":delayed"
    local parentPrioritizedKey = parentQueueKey .. ":prioritized"
    local parentWaitingChildrenOrDelayedKey
    local prevState
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then
      parentWaitingChildrenOrDelayedKey = parentWaitingChildrenKey
      prevState = "waiting-children"
    elseif rcall("ZSCORE", parentDelayedKey, parentId) then
      parentWaitingChildrenOrDelayedKey = parentDelayedKey
      prevState = "delayed"
      rcall("HSET", parentKey, "delay", 0)
    end
    if parentWaitingChildrenOrDelayedKey then
      rcall("ZREM", parentWaitingChildrenOrDelayedKey, parentId)
      local parentQueuePrefix = parentQueueKey .. ":"
      local parentFailedKey = parentQueueKey .. ":failed"
      local deferredFailure = "child " .. jobIdKey .. " failed"
      rcall("HSET", parentKey, "defa", deferredFailure)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    else
      if not rcall("ZSCORE", parentQueueKey .. ":failed", parentId) then
        local deferredFailure = "child " .. jobIdKey .. " failed"
        rcall("HSET", parentKey, "defa", deferredFailure)
      end
    end
  end
end
local moveChildFromDependenciesIfNeeded = function (rawParentData, childKey, failedReason, timestamp)
  if rawParentData then
    local parentData = cjson.decode(rawParentData)
    local parentKey = parentData['queueKey'] .. ':' .. parentData['id']
    local parentDependenciesChildrenKey = parentKey .. ":dependencies"
    if parentData['fpof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        local parentUnsuccesssfulChildrenKey = parentKey .. ":unsuccessful"
        rcall("ZADD", parentUnsuccesssfulChildrenKey, timestamp, childKey)
        moveParentToFailedIfNeeded(
          parentData['queueKey'],
          parentKey,
          parentData['id'],
          childKey,
          timestamp
        )
      end
    elseif parentData['cpof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        local parentFailedChildrenKey = parentKey .. ":failed"
        rcall("HSET", parentFailedChildrenKey, childKey, failedReason)
        moveParentToWaitIfNeeded(parentData['queueKey'], parentKey, parentData['id'], timestamp)
      end
    elseif parentData['idof'] or parentData['rdof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        moveParentToWaitIfNoPendingDependencies(parentData['queueKey'], parentDependenciesChildrenKey,
          parentKey, parentData['id'], timestamp)
        if parentData['idof'] then
          local parentFailedChildrenKey = parentKey .. ":failed"
          rcall("HSET", parentFailedChildrenKey, childKey, failedReason)
        end
      end
    end
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
local function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,
    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  -- get a lock
  if opts['token'] ~= "0" then
    local lockKey = jobKey .. ':lock'
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  local optionalValues = {}
  if opts['name'] then
    -- Set "processedBy" field to the worker name
    table.insert(optionalValues, "pb")
    table.insert(optionalValues, opts['name'])
  end
  rcall("XADD", eventStreamKey, "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HMSET", jobKey, "processedOn", processedOn, unpack(optionalValues))
  rcall("HINCRBY", jobKey, "ats", 1)
  addBaseMarkerIfNeeded(markerKey, false)
  -- rate limit delay must be 0 in this case to prevent adding more delay
  -- when job that is moved to active needs to be processed
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
--[[
  Function to remove deduplication key if needed
  when a job is moved to completed or failed states.
]]
local function removeDeduplicationKeyIfNeededOnFinalization(prefixKey,
  deduplicationId, jobId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local pttl = rcall("PTTL", deduplicationKey)
    if pttl == 0 then
      return rcall("DEL", deduplicationKey)
    end
    if pttl == -1 then
      local currentJobId = rcall('GET', deduplicationKey)
      if currentJobId and currentJobId == jobId then
        return rcall("DEL", deduplicationKey)
      end
    end
  end
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to trim events, default 10000.
]]
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = getOrSetMaxEvents(metaKey)
  if maxEvents then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local jobIdKey = KEYS[12]
if rcall("EXISTS", jobIdKey) == 1 then -- Make sure job exists
    -- Make sure it does not have pending dependencies
    -- It must happen before removing lock
    if ARGV[5] == "completed" then
        if rcall("SCARD", jobIdKey .. ":dependencies") ~= 0 then
            return -4
        end
        if rcall("ZCARD", jobIdKey .. ":unsuccessful") ~= 0 then
            return -9
        end
    end
    local opts = cmsgpack.unpack(ARGV[8])
    local token = opts['token']
    local errorCode = removeLock(jobIdKey, KEYS[5], token, ARGV[1])
    if errorCode < 0 then
        return errorCode
    end
    updateJobFields(jobIdKey, ARGV[9]);
    local attempts = opts['attempts']
    local maxMetricsSize = opts['maxMetricsSize']
    local maxCount = opts['keepJobs']['count']
    local maxAge = opts['keepJobs']['age']
    local jobAttributes = rcall("HMGET", jobIdKey, "parentKey", "parent", "deid")
    local parentKey = jobAttributes[1] or ""
    local parentId = ""
    local parentQueueKey = ""
    if jobAttributes[2] then -- TODO: need to revisit this logic if it's still needed
        local jsonDecodedParent = cjson.decode(jobAttributes[2])
        parentId = jsonDecodedParent['id']
        parentQueueKey = jsonDecodedParent['queueKey']
    end
    local jobId = ARGV[1]
    local timestamp = ARGV[2]
    -- Remove from active list (if not active we shall return error)
    local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
    if (numRemovedElements < 1) then
        return -3
    end
    local eventStreamKey = KEYS[4]
    local metaKey = KEYS[9]
    -- Trim events before emiting them to avoid trimming events emitted in this script
    trimEvents(metaKey, eventStreamKey)
    local prefix = ARGV[7]
    removeDeduplicationKeyIfNeededOnFinalization(prefix, jobAttributes[3], jobId)
    -- If job has a parent we need to
    -- 1) remove this job id from parents dependencies
    -- 2) move the job Id to parent "processed" set
    -- 3) push the results into parent "results" list
    -- 4) if parent's dependencies is empty, then move parent to "wait/paused". Note it may be a different queue!.
    if parentId == "" and parentKey ~= "" then
        parentId = getJobIdFromKey(parentKey)
        parentQueueKey = getJobKeyPrefix(parentKey, ":" .. parentId)
    end
    if parentId ~= "" then
        if ARGV[5] == "completed" then
            local dependenciesSet = parentKey .. ":dependencies"
            if rcall("SREM", dependenciesSet, jobIdKey) == 1 then
                updateParentDepsIfNeeded(parentKey, parentQueueKey, dependenciesSet, parentId, jobIdKey, ARGV[4],
                    timestamp)
            end
        else
            moveChildFromDependenciesIfNeeded(jobAttributes[2], jobIdKey, ARGV[4], timestamp)
        end
    end
    local attemptsMade = rcall("HINCRBY", jobIdKey, "atm", 1)
    -- Remove job?
    if maxCount ~= 0 then
        local targetSet = KEYS[11]
        -- Add to complete/failed set
        rcall("ZADD", targetSet, timestamp, jobId)
        rcall("HSET", jobIdKey, ARGV[3], ARGV[4], "finishedOn", timestamp)
        -- "returnvalue" / "failedReason" and "finishedOn"
        if ARGV[5] == "failed" then
            rcall("HDEL", jobIdKey, "defa")
        end
        -- Remove old jobs?
        if maxAge ~= nil then
            removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)
        end
        if maxCount ~= nil and maxCount > 0 then
            removeJobsByMaxCount(maxCount, targetSet, prefix)
        end
    else
        removeJobKeys(jobIdKey)
        if parentKey ~= "" then
            -- TODO: when a child is removed when finished, result or failure in parent
            -- must not be deleted, those value references should be deleted when the parent
            -- is deleted
            removeParentDependencyKey(jobIdKey, false, parentKey, jobAttributes[3])
        end
    end
    rcall("XADD", eventStreamKey, "*", "event", ARGV[5], "jobId", jobId, ARGV[3], ARGV[4], "prev", "active")
    if ARGV[5] == "failed" then
        if tonumber(attemptsMade) >= tonumber(attempts) then
            rcall("XADD", eventStreamKey, "*", "event", "retries-exhausted", "jobId", jobId, "attemptsMade",
                attemptsMade)
        end
    end
    -- Collect metrics
    if maxMetricsSize ~= "" then
        collectMetrics(KEYS[13], KEYS[13] .. ':data', maxMetricsSize, timestamp)
    end
    -- Try to get next job to avoid an extra roundtrip if the queue is not closing,
    -- and not rate limited.
    if (ARGV[6] == "1") then
        local target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(metaKey, KEYS[2],
            KEYS[1], KEYS[8])
        local markerKey = KEYS[14]
        -- Check if there are delayed jobs that can be promoted
        promoteDelayedJobs(KEYS[7], markerKey, target, KEYS[3], eventStreamKey, prefix, timestamp, KEYS[10],
            isPausedOrMaxed)
        local maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))
        -- Check if we are rate limited first.
        local expireTime = getRateLimitTTL(maxJobs, KEYS[6])
        if expireTime > 0 then
            return {0, 0, expireTime, 0}
        end
        -- paused or maxed queue
        if isPausedOrMaxed then
            return {0, 0, 0, 0}
        end
        local limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration
        jobId = rcall("RPOPLPUSH", KEYS[1], KEYS[2])
        if jobId then
            -- Markers in waitlist DEPRECATED in v5: Remove in v6.
            if string.sub(jobId, 1, 2) == "0:" then
                rcall("LREM", KEYS[2], 1, jobId)
                -- If jobId is special ID 0:delay (delay greater than 0), then there is no job to process
                -- but if ID is 0:0, then there is at least 1 prioritized job to process
                if jobId == "0:0" then
                    jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])
                    return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                        limiterDuration, markerKey, opts)
                end
            else
                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                    limiterDuration, markerKey, opts)
            end
        else
            jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])
            if jobId then
                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                    limiterDuration, markerKey, opts)
            end
        end
        -- Return the timestamp for the next delayed job if any.
        local nextTimestamp = getNextDelayedTimestamp(KEYS[7])
        if nextTimestamp ~= nil then
            -- The result is guaranteed to be positive, since the
            -- ZRANGEBYSCORE command would have return a job otherwise.
            return {0, 0, 0, nextTimestamp}
        end
    end
    local waitLen = rcall("LLEN", KEYS[1])
    if waitLen == 0 then
        local activeLen = rcall("LLEN", KEYS[2])
        if activeLen == 0 then
            local prioritizedLen = rcall("ZCARD", KEYS[3])
            if prioritizedLen == 0 then
                rcall("XADD", eventStreamKey, "*", "event", "drained")
            end
        end
    end
    return 0
else
    return -1
end
`;MB.moveToFinished={name:"moveToFinished",content:Cpr,keys:14}});var QYe=m(PB=>{"use strict";Object.defineProperty(PB,"__esModule",{value:!0});PB.moveToWaitingChildren=void 0;var Tpr=`--[[
  Moves job from active to waiting children set.
  Input:
    KEYS[1] active key
    KEYS[2] wait-children key
    KEYS[3] job key
    KEYS[4] job dependencies key
    KEYS[5] job unsuccessful key
    KEYS[6] stalled key
    KEYS[7] events key
    ARGV[1] token
    ARGV[2] child key
    ARGV[3] timestamp
    ARGV[4] jobId
    ARGV[5] prefix
  Output:
    0 - OK
    1 - There are not pending dependencies.
   -1 - Missing job.
   -2 - Missing lock
   -3 - Job not in active set
   -9 - Job has failed children
]]
local rcall = redis.call
local activeKey = KEYS[1]
local waitingChildrenKey = KEYS[2]
local jobKey = KEYS[3]
local jobDependenciesKey = KEYS[4]
local jobUnsuccessfulKey = KEYS[5]
local stalledKey = KEYS[6]
local eventStreamKey = KEYS[7]
local token = ARGV[1]
local timestamp = ARGV[3]
local jobId = ARGV[4]
--- Includes
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
local function removeJobFromActive(activeKey, stalledKey, jobKey, jobId,
    token)
  local errorCode = removeLock(jobKey, stalledKey, token, jobId)
  if errorCode < 0 then
    return errorCode
  end
  local numRemovedElements = rcall("LREM", activeKey, -1, jobId)
  if numRemovedElements < 1 then
    return -3
  end
  return 0
end
local function moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
    jobKey, jobId, timestamp, token)
  local errorCode = removeJobFromActive(activeKey, stalledKey, jobKey, jobId, token)
  if errorCode < 0 then
    return errorCode
  end
  local score = tonumber(timestamp)
  rcall("ZADD", waitingChildrenKey, score, jobId)
  rcall("XADD", eventStreamKey, "*", "event", "waiting-children", "jobId", jobId, 'prev', 'active')
  return 0
end
if rcall("EXISTS", jobKey) == 1 then
  if rcall("ZCARD", jobUnsuccessfulKey) ~= 0 then
    return -9
  else
    if ARGV[2] ~= "" then
      if rcall("SISMEMBER", jobDependenciesKey, ARGV[2]) ~= 0 then
        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
          jobKey, jobId, timestamp, token)
      end
      return 1
    else
      if rcall("SCARD", jobDependenciesKey) ~= 0 then 
        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
          jobKey, jobId, timestamp, token)
      end
      return 1
    end    
  end
end
return -1
`;PB.moveToWaitingChildren={name:"moveToWaitingChildren",content:Tpr,keys:7}});var XYe=m(NB=>{"use strict";Object.defineProperty(NB,"__esModule",{value:!0});NB.obliterate=void 0;var Opr=`--[[
  Completely obliterates a queue and all of its contents
  This command completely destroys a queue including all of its jobs, current or past 
  leaving no trace of its existence. Since this script needs to iterate to find all the job
  keys, consider that this call may be slow for very large queues.
  The queue needs to be "paused" or it will return an error
  If the queue has currently active jobs then the script by default will return error,
  however this behaviour can be overrided using the 'force' option.
  Input:
    KEYS[1] meta
    KEYS[2] base
    ARGV[1] count
    ARGV[2] force
]]
local maxCount = tonumber(ARGV[1])
local baseKey = KEYS[2]
local rcall = redis.call
-- Includes
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey, true --[[remove debounce key]])
  end
  return max - #keys
end
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to filter out jobs to ignore from a table.
]]
local function filterOutJobsToIgnore(jobs, jobsToIgnore)
  local filteredJobs = {}
  for i = 1, #jobs do
    if not jobsToIgnore[jobs[i]] then
      table.insert(filteredJobs, jobs[i])
    end
  end
  return filteredJobs
end
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getListItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getZSetItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
local function removeLockKeys(keys)
  for i, key in ipairs(keys) do
    rcall("DEL", baseKey .. key .. ':lock')
  end
end
-- 1) Check if paused, if not return with error.
if rcall("HEXISTS", KEYS[1], "paused") ~= 1 then
  return -1 -- Error, NotPaused
end
-- 2) Check if there are active jobs, if there are and not "force" return error.
local activeKey = baseKey .. 'active'
local activeJobs = getListItems(activeKey, maxCount)
if (#activeJobs > 0) then
  if(ARGV[2] == "") then 
    return -2 -- Error, ExistActiveJobs
  end
end
removeLockKeys(activeJobs)
maxCount = removeJobs(activeJobs, true, baseKey, maxCount)
rcall("LTRIM", activeKey, #activeJobs, -1)
if(maxCount <= 0) then
  return 1
end
local delayedKey = baseKey .. 'delayed'
maxCount = removeZSetJobs(delayedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local repeatKey = baseKey .. 'repeat'
local repeatJobsIds = getZSetItems(repeatKey, maxCount)
for i, key in ipairs(repeatJobsIds) do
  local jobKey = repeatKey .. ":" .. key
  rcall("DEL", jobKey)
end
if(#repeatJobsIds > 0) then
  for from, to in batches(#repeatJobsIds, 7000) do
    rcall("ZREM", repeatKey, unpack(repeatJobsIds, from, to))
  end
end
maxCount = maxCount - #repeatJobsIds
if(maxCount <= 0) then
  return 1
end
local completedKey = baseKey .. 'completed'
maxCount = removeZSetJobs(completedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local waitKey = baseKey .. 'paused'
maxCount = removeListJobs(waitKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local prioritizedKey = baseKey .. 'prioritized'
maxCount = removeZSetJobs(prioritizedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local failedKey = baseKey .. 'failed'
maxCount = removeZSetJobs(failedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
if(maxCount > 0) then
  rcall("DEL",
    baseKey .. 'events',
    baseKey .. 'delay', 
    baseKey .. 'stalled-check',
    baseKey .. 'stalled',
    baseKey .. 'id',
    baseKey .. 'pc',
    baseKey .. 'meta',
    baseKey .. 'metrics:completed',
    baseKey .. 'metrics:completed:data',
    baseKey .. 'metrics:failed',
    baseKey .. 'metrics:failed:data')
  return 0
else
  return 1
end
`;NB.obliterate={name:"obliterate",content:Opr,keys:2}});var ZYe=m(FB=>{"use strict";Object.defineProperty(FB,"__esModule",{value:!0});FB.paginate=void 0;var xpr=`--[[
    Paginate a set or hash
    Input:
      KEYS[1] key pointing to the set or hash to be paginated.
      ARGV[1]  page start offset
      ARGV[2]  page end offset (-1 for all the elements)
      ARGV[3]  cursor
      ARGV[4]  offset
      ARGV[5]  max iterations
      ARGV[6]  fetch jobs?
    Output:
      [cursor, offset, items, numItems]
]]
local rcall = redis.call
-- Includes
--[[
  Function to achieve pagination for a set or hash.
  This function simulates pagination in the most efficient way possible
  for a set using sscan or hscan.
  The main limitation is that sets are not order preserving, so the
  pagination is not stable. This means that if the set is modified
  between pages, the same element may appear in different pages.
]] -- Maximum number of elements to be returned by sscan per iteration.
local maxCount = 100
-- Finds the cursor, and returns the first elements available for the requested page.
local function findPage(key, command, pageStart, pageSize, cursor, offset,
                        maxIterations, fetchJobs)
    local items = {}
    local jobs = {}
    local iterations = 0
    repeat
        -- Iterate over the set using sscan/hscan.
        local result = rcall(command, key, cursor, "COUNT", maxCount)
        cursor = result[1]
        local members = result[2]
        local step = 1
        if command == "HSCAN" then
            step = 2
        end
        if #members == 0 then
            -- If the result is empty, we can return the result.
            return cursor, offset, items, jobs
        end
        local chunkStart = offset
        local chunkEnd = offset + #members / step
        local pageEnd = pageStart + pageSize
        if chunkEnd < pageStart then
            -- If the chunk is before the page, we can skip it.
            offset = chunkEnd
        elseif chunkStart > pageEnd then
            -- If the chunk is after the page, we can return the result.
            return cursor, offset, items, jobs
        else
            -- If the chunk is overlapping the page, we need to add the elements to the result.
            for i = 1, #members, step do
                if offset >= pageEnd then
                    return cursor, offset, items, jobs
                end
                if offset >= pageStart then
                    local index = #items + 1
                    if fetchJobs ~= nil then
                        jobs[#jobs+1] = rcall("HGETALL", members[i])
                    end
                    if step == 2 then
                        items[index] = {members[i], members[i + 1]}
                    else
                        items[index] = members[i]
                    end
                end
                offset = offset + 1
            end
        end
        iterations = iterations + 1
    until cursor == "0" or iterations >= maxIterations
    return cursor, offset, items, jobs
end
local key = KEYS[1]
local scanCommand = "SSCAN"
local countCommand = "SCARD"
local type = rcall("TYPE", key)["ok"]
if type == "none" then
    return {0, 0, {}, 0}
elseif type == "hash" then
    scanCommand = "HSCAN"
    countCommand = "HLEN"
elseif type ~= "set" then
    return
        redis.error_reply("Pagination is only supported for sets and hashes.")
end
local numItems = rcall(countCommand, key)
local startOffset = tonumber(ARGV[1])
local endOffset = tonumber(ARGV[2])
if endOffset == -1 then 
  endOffset = numItems
end
local pageSize = (endOffset - startOffset) + 1
local cursor, offset, items, jobs = findPage(key, scanCommand, startOffset,
                                       pageSize, ARGV[3], tonumber(ARGV[4]),
                                       tonumber(ARGV[5]), ARGV[6])
return {cursor, offset, items, numItems, jobs}
`;FB.paginate={name:"paginate",content:xpr,keys:1}});var eQe=m(BB=>{"use strict";Object.defineProperty(BB,"__esModule",{value:!0});BB.pause=void 0;var Ipr=`--[[
  Pauses or resumes a queue globably.
  Input:
    KEYS[1] 'wait' or 'paused''
    KEYS[2] 'paused' or 'wait'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] events stream key
    KEYS[6] 'delayed'
    KEYS|7] 'marker'
    ARGV[1] 'paused' or 'resumed'
  Event:
    publish paused or resumed event.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
local markerKey = KEYS[7]
local hasJobs = rcall("EXISTS", KEYS[1]) == 1
--TODO: check this logic to be reused when changing a delay
if hasJobs then rcall("RENAME", KEYS[1], KEYS[2]) end
if ARGV[1] == "paused" then
    rcall("HSET", KEYS[3], "paused", 1)
    rcall("DEL", markerKey)
else
    rcall("HDEL", KEYS[3], "paused")
    if hasJobs or rcall("ZCARD", KEYS[4]) > 0 then
        -- Add marker if there are waiting or priority jobs
        rcall("ZADD", markerKey, 0, "0")
    else
        addDelayMarkerIfNeeded(markerKey, KEYS[6])
    end
end
rcall("XADD", KEYS[5], "*", "event", ARGV[1]);
`;BB.pause={name:"pause",content:Ipr,keys:7}});var tQe=m(qB=>{"use strict";Object.defineProperty(qB,"__esModule",{value:!0});qB.promote=void 0;var Rpr=`--[[
  Promotes a job that is currently "delayed" to the "waiting" state
    Input:
      KEYS[1] 'delayed'
      KEYS[2] 'wait'
      KEYS[3] 'paused'
      KEYS[4] 'meta'
      KEYS[5] 'prioritized'
      KEYS[6] 'active'
      KEYS[7] 'pc' priority counter
      KEYS[8] 'event stream'
      KEYS[9] 'marker'
      ARGV[1]  queue.toKey('')
      ARGV[2]  jobId
    Output:
       0 - OK
      -3 - Job not in delayed zset.
    Events:
      'waiting'
]]
local rcall = redis.call
local jobId = ARGV[2]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
if rcall("ZREM", KEYS[1], jobId) == 1 then
    local jobKey = ARGV[1] .. jobId
    local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
    local metaKey = KEYS[4]
    local markerKey = KEYS[9]
    -- Remove delayed "marker" from the wait list if there is any.
    -- Since we are adding a job we do not need the marker anymore.
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[6], KEYS[2], KEYS[3])
    local marker = rcall("LINDEX", target, 0)
    if marker and string.sub(marker, 1, 2) == "0:" then rcall("LPOP", target) end
    if priority == 0 then
        -- LIFO or FIFO
        addJobInTargetList(target, markerKey, "LPUSH", isPausedOrMaxed, jobId)
    else
        addJobWithPriority(markerKey, KEYS[5], priority, jobId, KEYS[7], isPausedOrMaxed)
    end
    rcall("XADD", KEYS[8], "*", "event", "waiting", "jobId", jobId, "prev",
          "delayed");
    rcall("HSET", jobKey, "delay", 0)
    return 0
else
    return -3
end
`;qB.promote={name:"promote",content:Rpr,keys:9}});var rQe=m(LB=>{"use strict";Object.defineProperty(LB,"__esModule",{value:!0});LB.releaseLock=void 0;var Dpr=`--[[
  Release lock
    Input:
      KEYS[1] 'lock',
      ARGV[1]  token
      ARGV[2]  lock duration in milliseconds
    Output:
      "OK" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  return rcall("DEL", KEYS[1])
else
  return 0
end
`;LB.releaseLock={name:"releaseLock",content:Dpr,keys:1}});var nQe=m(jB=>{"use strict";Object.defineProperty(jB,"__esModule",{value:!0});jB.removeChildDependency=void 0;var kpr=`--[[
  Break parent-child dependency by removing
  child reference from parent
  Input:
    KEYS[1] 'key' prefix,
    ARGV[1] job key
    ARGV[2] parent key
    Output:
       0  - OK
       1  - There is not relationship.
      -1  - Missing job key
      -5  - Missing parent key
]]
local rcall = redis.call
local jobKey = ARGV[1]
local parentKey = ARGV[2]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
if rcall("EXISTS", jobKey) ~= 1 then return -1 end
if rcall("EXISTS", parentKey) ~= 1 then return -5 end
if removeParentDependencyKey(jobKey, false, parentKey, KEYS[1], nil) then
  rcall("HDEL", jobKey, "parentKey", "parent")
  return 0
else
  return 1
end`;jB.removeChildDependency={name:"removeChildDependency",content:kpr,keys:1}});var iQe=m($B=>{"use strict";Object.defineProperty($B,"__esModule",{value:!0});$B.removeDeduplicationKey=void 0;var Mpr=`--[[
  Remove deduplication key if it matches the job id.
  Input:
    KEYS[1] deduplication key
    ARGV[1] job id
  Output:
    0 - false
    1 - true
]]
local rcall = redis.call
local deduplicationKey = KEYS[1]
local jobId = ARGV[1]
local currentJobId = rcall('GET', deduplicationKey)
if currentJobId and currentJobId == jobId then
  return rcall("DEL", deduplicationKey)
end
return 0
`;$B.removeDeduplicationKey={name:"removeDeduplicationKey",content:Mpr,keys:1}});var sQe=m(KB=>{"use strict";Object.defineProperty(KB,"__esModule",{value:!0});KB.removeJob=void 0;var Ppr=`--[[
    Remove a job from all the statuses it may be in as well as all its data.
    In order to be able to remove a job, it cannot be active.
    Input:
      KEYS[1] jobKey
      KEYS[2] repeat key
      ARGV[1] jobId
      ARGV[2] remove children
      ARGV[3] queue prefix
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to recursively check if there are no locks
  on the jobs to be removed.
  returns:
    boolean
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function isLocked( prefix, jobId, removeChildren)
  local jobKey = prefix .. jobId;
  -- Check if this job is locked
  local lockKey = jobKey .. ':lock'
  local lock = rcall("GET", lockKey)
  if not lock then
    if removeChildren == "1" then
      local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
      if (#dependencies > 0) then
        for i, childJobKey in ipairs(dependencies) do
          -- We need to get the jobId for this job.
          local childJobId = getJobIdFromKey(childJobKey)
          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
          local result = isLocked( childJobPrefix, childJobId, removeChildren )
          if result then
            return true
          end
        end
      end
    end
    return false
  end
  return true
end
--[[
    Remove a job from all the statuses it may be in as well as all its data,
    including its children. Active children can be ignored.
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove from any state.
  returns:
    prev state
]]
local function removeJobFromAnyState( prefix, jobId)
  -- We start with the ZSCORE checks, since they have O(1) complexity
  if rcall("ZSCORE", prefix .. "completed", jobId) then
    rcall("ZREM", prefix .. "completed", jobId)
    return "completed"
  elseif rcall("ZSCORE", prefix .. "waiting-children", jobId) then
    rcall("ZREM", prefix .. "waiting-children", jobId)
    return "waiting-children"
  elseif rcall("ZSCORE", prefix .. "delayed", jobId) then
    rcall("ZREM", prefix .. "delayed", jobId)
    return "delayed"
  elseif rcall("ZSCORE", prefix .. "failed", jobId) then
    rcall("ZREM", prefix .. "failed", jobId)
    return "failed"
  elseif rcall("ZSCORE", prefix .. "prioritized", jobId) then
    rcall("ZREM", prefix .. "prioritized", jobId)
    return "prioritized"
  -- We remove only 1 element from the list, since we assume they are not added multiple times
  elseif rcall("LREM", prefix .. "wait", 1, jobId) == 1 then
    return "wait"
  elseif rcall("LREM", prefix .. "paused", 1, jobId) == 1 then
    return "paused"
  elseif rcall("LREM", prefix .. "active", 1, jobId) == 1 then
    return "active"
  end
  return "unknown"
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local removeJobChildren
local removeJobWithChildren
removeJobChildren = function(prefix, jobKey, options)
    -- Check if this job has children
    -- If so, we are going to try to remove the children recursively in a depth-first way
    -- because if some job is locked, we must exit with an error.
    if not options.ignoreProcessed then
        local processed = rcall("HGETALL", jobKey .. ":processed")
        if #processed > 0 then
            for i = 1, #processed, 2 do
                local childJobId = getJobIdFromKey(processed[i])
                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local failed = rcall("HGETALL", jobKey .. ":failed")
        if #failed > 0 then
            for i = 1, #failed, 2 do
                local childJobId = getJobIdFromKey(failed[i])
                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local unsuccessful = rcall("ZRANGE", jobKey .. ":unsuccessful", 0, -1)
        if #unsuccessful > 0 then
            for i = 1, #unsuccessful, 1 do
                local childJobId = getJobIdFromKey(unsuccessful[i])
                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
    end
    local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
    if #dependencies > 0 then
        for i, childJobKey in ipairs(dependencies) do
            local childJobId = getJobIdFromKey(childJobKey)
            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
        end
    end
end
removeJobWithChildren = function(prefix, jobId, parentKey, options)
    local jobKey = prefix .. jobId
    if options.ignoreLocked then
        if isLocked(prefix, jobId) then
            return
        end
    end
    -- Check if job is in the failed zset
    local failedSet = prefix .. "failed"
    if not (options.ignoreProcessed and rcall("ZSCORE", failedSet, jobId)) then
        removeParentDependencyKey(jobKey, false, parentKey, nil)
        if options.removeChildren then
            removeJobChildren(prefix, jobKey, options)
        end
        local prev = removeJobFromAnyState(prefix, jobId)
        local deduplicationId = rcall("HGET", jobKey, "deid")
        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobId, deduplicationId)
        if removeJobKeys(jobKey) > 0 then
            local metaKey = prefix .. "meta"
            local maxEvents = getOrSetMaxEvents(metaKey)
            rcall("XADD", prefix .. "events", "MAXLEN", "~", maxEvents, "*", "event", "removed",
                "jobId", jobId, "prev", prev)
        end
    end
end
local jobId = ARGV[1]
local shouldRemoveChildren = ARGV[2]
local prefix = ARGV[3]
local jobKey = KEYS[1]
local repeatKey = KEYS[2]
if isJobSchedulerJob(jobId, jobKey, repeatKey) then
    return -8
end
if not isLocked(prefix, jobId, shouldRemoveChildren) then
    local options = {
        removeChildren = shouldRemoveChildren == "1",
        ignoreProcessed = false,
        ignoreLocked = false
    }
    removeJobWithChildren(prefix, jobId, nil, options)
    return 1
end
return 0
`;KB.removeJob={name:"removeJob",content:Ppr,keys:2}});var oQe=m(UB=>{"use strict";Object.defineProperty(UB,"__esModule",{value:!0});UB.removeJobScheduler=void 0;var Npr=`--[[
  Removes a job scheduler and its next scheduled job.
  Input:
    KEYS[1] job schedulers key
    KEYS[2] delayed jobs key
    KEYS[3] events key
    ARGV[1] job scheduler id
    ARGV[2] prefix key
  Output:
    0 - OK
    1 - Missing repeat job
  Events:
    'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local jobSchedulerId = ARGV[1]
local prefix = ARGV[2]
local millis = rcall("ZSCORE", KEYS[1], jobSchedulerId)
if millis then
  -- Delete next programmed job.
  local delayedJobId = "repeat:" .. jobSchedulerId .. ":" .. millis
  if(rcall("ZREM", KEYS[2], delayedJobId) == 1) then
    removeJobKeys(prefix .. delayedJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", delayedJobId, "prev", "delayed")
  end
end
if(rcall("ZREM", KEYS[1], jobSchedulerId) == 1) then
  rcall("DEL", KEYS[1] .. ":" .. jobSchedulerId)
  return 0
end
return 1
`;UB.removeJobScheduler={name:"removeJobScheduler",content:Npr,keys:3}});var aQe=m(VB=>{"use strict";Object.defineProperty(VB,"__esModule",{value:!0});VB.removeRepeatable=void 0;var Fpr=`--[[
  Removes a repeatable job
  Input:
    KEYS[1] repeat jobs key
    KEYS[2] delayed jobs key
    KEYS[3] events key
    ARGV[1] old repeat job id
    ARGV[2] options concat
    ARGV[3] repeat job key
    ARGV[4] prefix key
  Output:
    0 - OK
    1 - Missing repeat job
  Events:
    'removed'
]]
local rcall = redis.call
local millis = rcall("ZSCORE", KEYS[1], ARGV[2])
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
-- legacy removal TODO: remove in next breaking change
if millis then
  -- Delete next programmed job.
  local repeatJobId = ARGV[1] .. millis
  if(rcall("ZREM", KEYS[2], repeatJobId) == 1) then
    removeJobKeys(ARGV[4] .. repeatJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", repeatJobId, "prev", "delayed");
  end
end
if(rcall("ZREM", KEYS[1], ARGV[2]) == 1) then
  return 0
end
-- new removal
millis = rcall("ZSCORE", KEYS[1], ARGV[3])
if millis then
  -- Delete next programmed job.
  local repeatJobId = "repeat:" .. ARGV[3] .. ":" .. millis
  if(rcall("ZREM", KEYS[2], repeatJobId) == 1) then
    removeJobKeys(ARGV[4] .. repeatJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", repeatJobId, "prev", "delayed")
  end
end
if(rcall("ZREM", KEYS[1], ARGV[3]) == 1) then
  rcall("DEL", KEYS[1] .. ":" .. ARGV[3])
  return 0
end
return 1
`;VB.removeRepeatable={name:"removeRepeatable",content:Fpr,keys:3}});var uQe=m(GB=>{"use strict";Object.defineProperty(GB,"__esModule",{value:!0});GB.removeUnprocessedChildren=void 0;var Bpr=`--[[
    Remove a job from all the statuses it may be in as well as all its data.
    In order to be able to remove a job, it cannot be active.
    Input:
      KEYS[1] jobKey
      KEYS[2] meta key
      ARGV[1] prefix
      ARGV[2] jobId
    Events:
      'removed' for every children removed
]]
-- Includes
--[[
    Remove a job from all the statuses it may be in as well as all its data,
    including its children. Active children can be ignored.
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove from any state.
  returns:
    prev state
]]
local function removeJobFromAnyState( prefix, jobId)
  -- We start with the ZSCORE checks, since they have O(1) complexity
  if rcall("ZSCORE", prefix .. "completed", jobId) then
    rcall("ZREM", prefix .. "completed", jobId)
    return "completed"
  elseif rcall("ZSCORE", prefix .. "waiting-children", jobId) then
    rcall("ZREM", prefix .. "waiting-children", jobId)
    return "waiting-children"
  elseif rcall("ZSCORE", prefix .. "delayed", jobId) then
    rcall("ZREM", prefix .. "delayed", jobId)
    return "delayed"
  elseif rcall("ZSCORE", prefix .. "failed", jobId) then
    rcall("ZREM", prefix .. "failed", jobId)
    return "failed"
  elseif rcall("ZSCORE", prefix .. "prioritized", jobId) then
    rcall("ZREM", prefix .. "prioritized", jobId)
    return "prioritized"
  -- We remove only 1 element from the list, since we assume they are not added multiple times
  elseif rcall("LREM", prefix .. "wait", 1, jobId) == 1 then
    return "wait"
  elseif rcall("LREM", prefix .. "paused", 1, jobId) == 1 then
    return "paused"
  elseif rcall("LREM", prefix .. "active", 1, jobId) == 1 then
    return "active"
  end
  return "unknown"
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
--[[
  Function to recursively check if there are no locks
  on the jobs to be removed.
  returns:
    boolean
]]
local function isLocked( prefix, jobId, removeChildren)
  local jobKey = prefix .. jobId;
  -- Check if this job is locked
  local lockKey = jobKey .. ':lock'
  local lock = rcall("GET", lockKey)
  if not lock then
    if removeChildren == "1" then
      local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
      if (#dependencies > 0) then
        for i, childJobKey in ipairs(dependencies) do
          -- We need to get the jobId for this job.
          local childJobId = getJobIdFromKey(childJobKey)
          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
          local result = isLocked( childJobPrefix, childJobId, removeChildren )
          if result then
            return true
          end
        end
      end
    end
    return false
  end
  return true
end
local removeJobChildren
local removeJobWithChildren
removeJobChildren = function(prefix, jobKey, options)
    -- Check if this job has children
    -- If so, we are going to try to remove the children recursively in a depth-first way
    -- because if some job is locked, we must exit with an error.
    if not options.ignoreProcessed then
        local processed = rcall("HGETALL", jobKey .. ":processed")
        if #processed > 0 then
            for i = 1, #processed, 2 do
                local childJobId = getJobIdFromKey(processed[i])
                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local failed = rcall("HGETALL", jobKey .. ":failed")
        if #failed > 0 then
            for i = 1, #failed, 2 do
                local childJobId = getJobIdFromKey(failed[i])
                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local unsuccessful = rcall("ZRANGE", jobKey .. ":unsuccessful", 0, -1)
        if #unsuccessful > 0 then
            for i = 1, #unsuccessful, 1 do
                local childJobId = getJobIdFromKey(unsuccessful[i])
                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
    end
    local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
    if #dependencies > 0 then
        for i, childJobKey in ipairs(dependencies) do
            local childJobId = getJobIdFromKey(childJobKey)
            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
        end
    end
end
removeJobWithChildren = function(prefix, jobId, parentKey, options)
    local jobKey = prefix .. jobId
    if options.ignoreLocked then
        if isLocked(prefix, jobId) then
            return
        end
    end
    -- Check if job is in the failed zset
    local failedSet = prefix .. "failed"
    if not (options.ignoreProcessed and rcall("ZSCORE", failedSet, jobId)) then
        removeParentDependencyKey(jobKey, false, parentKey, nil)
        if options.removeChildren then
            removeJobChildren(prefix, jobKey, options)
        end
        local prev = removeJobFromAnyState(prefix, jobId)
        local deduplicationId = rcall("HGET", jobKey, "deid")
        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobId, deduplicationId)
        if removeJobKeys(jobKey) > 0 then
            local metaKey = prefix .. "meta"
            local maxEvents = getOrSetMaxEvents(metaKey)
            rcall("XADD", prefix .. "events", "MAXLEN", "~", maxEvents, "*", "event", "removed",
                "jobId", jobId, "prev", prev)
        end
    end
end
local prefix = ARGV[1]
local jobId = ARGV[2]
local jobKey = KEYS[1]
local metaKey = KEYS[2]
local options = {
  removeChildren = "1",
  ignoreProcessed = true,
  ignoreLocked = true
}
removeJobChildren(prefix, jobKey, options) 
`;GB.removeUnprocessedChildren={name:"removeUnprocessedChildren",content:Bpr,keys:2}});var cQe=m(HB=>{"use strict";Object.defineProperty(HB,"__esModule",{value:!0});HB.reprocessJob=void 0;var qpr=`--[[
  Attempts to reprocess a job
  Input:
    KEYS[1] job key
    KEYS[2] events stream
    KEYS[3] job state
    KEYS[4] wait key
    KEYS[5] meta
    KEYS[6] paused key
    KEYS[7] active key
    KEYS[8] marker key
    ARGV[1] job.id
    ARGV[2] (job.opts.lifo ? 'R' : 'L') + 'PUSH'
    ARGV[3] propVal - failedReason/returnvalue
    ARGV[4] prev state - failed/completed
    ARGV[5] reset attemptsMade - "1" or "0"
    ARGV[6] reset attemptsStarted - "1" or "0"
  Output:
     1 means the operation was a success
    -1 means the job does not exist
    -3 means the job was not found in the expected set.
]]
local rcall = redis.call;
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local jobKey = KEYS[1]
if rcall("EXISTS", jobKey) == 1 then
  local jobId = ARGV[1]
  if (rcall("ZREM", KEYS[3], jobId) == 1) then
    local attributesToRemove = {}
    if ARGV[5] == "1" then
      table.insert(attributesToRemove, "atm")
    end
    if ARGV[6] == "1" then
      table.insert(attributesToRemove, "ats")
    end
    rcall("HDEL", jobKey, "finishedOn", "processedOn", ARGV[3], unpack(attributesToRemove))
    local target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[7], KEYS[4], KEYS[6])
    addJobInTargetList(target, KEYS[8], ARGV[2], isPausedOrMaxed, jobId)
    local parentKey = rcall("HGET", jobKey, "parentKey")
    if parentKey and rcall("EXISTS", parentKey) == 1 then
      if ARGV[4] == "failed" then
        if rcall("ZREM", parentKey .. ":unsuccessful", jobKey) == 1 or
          rcall("ZREM", parentKey .. ":failed", jobKey) == 1 then
          rcall("SADD", parentKey .. ":dependencies", jobKey)
        end
      else
        if rcall("HDEL", parentKey .. ":processed", jobKey) == 1 then
          rcall("SADD", parentKey .. ":dependencies", jobKey)
        end
      end
    end
    local maxEvents = getOrSetMaxEvents(KEYS[5])
    -- Emit waiting event
    rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId, "prev", ARGV[4]);
    return 1
  else
    return -3
  end
else
  return -1
end
`;HB.reprocessJob={name:"reprocessJob",content:qpr,keys:8}});var lQe=m(zB=>{"use strict";Object.defineProperty(zB,"__esModule",{value:!0});zB.retryJob=void 0;var Lpr=`--[[
  Retries a failed job by moving it back to the wait queue.
    Input:
      KEYS[1]  'active',
      KEYS[2]  'wait'
      KEYS[3]  'paused'
      KEYS[4]  job key
      KEYS[5]  'meta'
      KEYS[6]  events stream
      KEYS[7]  delayed key
      KEYS[8]  prioritized key
      KEYS[9]  'pc' priority counter
      KEYS[10] 'marker'
      KEYS[11] 'stalled'
      ARGV[1]  key prefix
      ARGV[2]  timestamp
      ARGV[3]  pushCmd
      ARGV[4]  jobId
      ARGV[5]  token
      ARGV[6]  optional job fields to update
    Events:
      'waiting'
    Output:
     0  - OK
     -1 - Missing key
     -2 - Missing lock
     -3 - Job not in active set
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[1], KEYS[2], KEYS[3])
local markerKey = KEYS[10]
-- Check if there are delayed jobs that we can move to wait.
-- test example: when there are delayed jobs between retries
promoteDelayedJobs(KEYS[7], markerKey, target, KEYS[8], KEYS[6], ARGV[1], ARGV[2], KEYS[9], isPausedOrMaxed)
local jobKey = KEYS[4]
if rcall("EXISTS", jobKey) == 1 then
  local errorCode = removeLock(jobKey, KEYS[11], ARGV[5], ARGV[4]) 
  if errorCode < 0 then
    return errorCode
  end
  updateJobFields(jobKey, ARGV[6])
  local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[4])
  if (numRemovedElements < 1) then return -3 end
  local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
  --need to re-evaluate after removing job from active
  isPausedOrMaxed = isQueuePausedOrMaxed(KEYS[5], KEYS[1])
  -- Standard or priority add
  if priority == 0 then
    addJobInTargetList(target, markerKey, ARGV[3], isPausedOrMaxed, ARGV[4])
  else
    addJobWithPriority(markerKey, KEYS[8], priority, ARGV[4], KEYS[9], isPausedOrMaxed)
  end
  rcall("HINCRBY", jobKey, "atm", 1)
  local maxEvents = getOrSetMaxEvents(KEYS[5])
  -- Emit waiting event
  rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", ARGV[4], "prev", "active")
  return 0
else
  return -1
end
`;zB.retryJob={name:"retryJob",content:Lpr,keys:11}});var dQe=m(WB=>{"use strict";Object.defineProperty(WB,"__esModule",{value:!0});WB.saveStacktrace=void 0;var jpr=`--[[
  Save stacktrace and failedReason.
  Input:
    KEYS[1] job key
    ARGV[1]  stacktrace
    ARGV[2]  failedReason
  Output:
     0 - OK
    -1 - Missing key
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then
  rcall("HMSET", KEYS[1], "stacktrace", ARGV[1], "failedReason", ARGV[2])
  return 0
else
  return -1
end
`;WB.saveStacktrace={name:"saveStacktrace",content:jpr,keys:1}});var pQe=m(JB=>{"use strict";Object.defineProperty(JB,"__esModule",{value:!0});JB.updateData=void 0;var $pr=`--[[
  Update job data
  Input:
    KEYS[1] Job id key
    ARGV[1] data
  Output:
    0 - OK
   -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS",KEYS[1]) == 1 then -- // Make sure job exists
  rcall("HSET", KEYS[1], "data", ARGV[1])
  return 0
else
  return -1
end
`;JB.updateData={name:"updateData",content:$pr,keys:1}});var fQe=m(YB=>{"use strict";Object.defineProperty(YB,"__esModule",{value:!0});YB.updateJobScheduler=void 0;var Kpr=`--[[
  Updates a job scheduler and adds next delayed job
  Input:
    KEYS[1]  'repeat' key
    KEYS[2]  'delayed'
    KEYS[3]  'wait' key
    KEYS[4]  'paused' key
    KEYS[5]  'meta'
    KEYS[6]  'prioritized' key
    KEYS[7]  'marker',
    KEYS[8]  'id'
    KEYS[9]  events stream key
    KEYS[10] 'pc' priority counter
    KEYS[11] producer key
    KEYS[12] 'active' key
    ARGV[1] next milliseconds
    ARGV[2] jobs scheduler id
    ARGV[3] Json stringified delayed data
    ARGV[4] msgpacked delayed opts
    ARGV[5] timestamp
    ARGV[6] prefix key
    ARGV[7] producer id
    Output:
      next delayed job id  - OK
]] local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local waitKey = KEYS[3]
local pausedKey = KEYS[4]
local metaKey = KEYS[5]
local prioritizedKey = KEYS[6]
local nextMillis = tonumber(ARGV[1])
local jobSchedulerId = ARGV[2]
local timestamp = tonumber(ARGV[5])
local prefixKey = ARGV[6]
local producerId = ARGV[7]
local jobOpts = cmsgpack.unpack(ARGV[4])
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
local function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, 
  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,
  data, jobSchedulerId, repeatDelay)
  opts['delay'] = repeatDelay
  opts['jobId'] = jobId
  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,
    opts, timestamp, nil, nil, jobSchedulerId)
  if delay ~= 0 then
    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)
  else
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
    -- Standard or priority add
    if priority == 0 then
      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
      -- Priority add
      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)
    end
    -- Emit waiting event
    rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents,  "*", "event", "waiting", "jobId", jobId)
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
    local nextMillis
    if not prevMillis then
        if startDate then
            -- Assuming startDate is passed as milliseconds from JavaScript
            nextMillis = tonumber(startDate)
            nextMillis = nextMillis > now and nextMillis or now
        else
            nextMillis = now
        end
    else
        nextMillis = prevMillis + every
        -- check if we may have missed some iterations
        if nextMillis < now then
            nextMillis = math.floor(now / every) * every + every + (offset or 0)
        end
    end
    if not offset or offset == 0 then
        local timeSlot = math.floor(nextMillis / every) * every;
        offset = nextMillis - timeSlot;
    end
    -- Return a tuple nextMillis, offset
    return math.floor(nextMillis), math.floor(offset)
end
local prevMillis = rcall("ZSCORE", repeatKey, jobSchedulerId)
-- Validate that scheduler exists.
-- If it does not exist we should not iterate anymore.
if prevMillis then
    prevMillis = tonumber(prevMillis)
    local schedulerKey = repeatKey .. ":" .. jobSchedulerId
    local schedulerAttributes = rcall("HMGET", schedulerKey, "name", "data", "every", "startDate", "offset")
    local every = tonumber(schedulerAttributes[3])
    local now = tonumber(timestamp)
    -- If every is not found in scheduler attributes, try to get it from job options
    if not every and jobOpts['repeat'] and jobOpts['repeat']['every'] then
        every = tonumber(jobOpts['repeat']['every'])
    end
    if every then
        local startDate = schedulerAttributes[4]
        local jobOptsOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0
        local offset = schedulerAttributes[5] or jobOptsOffset or 0
        local newOffset
        nextMillis, newOffset = getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
        if not offset then
            rcall("HSET", schedulerKey, "offset", newOffset)
            jobOpts['repeat']['offset'] = newOffset
        end
    end
    local nextDelayedJobId = "repeat:" .. jobSchedulerId .. ":" .. nextMillis
    local nextDelayedJobKey = schedulerKey .. ":" .. nextMillis
    local currentDelayedJobId = "repeat:" .. jobSchedulerId .. ":" .. prevMillis
    if producerId == currentDelayedJobId then
        local eventsKey = KEYS[9]
        local maxEvents = getOrSetMaxEvents(metaKey)
        if rcall("EXISTS", nextDelayedJobKey) ~= 1 then
            rcall("ZADD", repeatKey, nextMillis, jobSchedulerId)
            rcall("HINCRBY", schedulerKey, "ic", 1)
            rcall("INCR", KEYS[8])
            -- TODO: remove this workaround in next breaking change,
            -- all job-schedulers must save job data
            local templateData = schedulerAttributes[2] or ARGV[3]
            if templateData and templateData ~= '{}' then
                rcall("HSET", schedulerKey, "data", templateData)
            end
            local delay = nextMillis - now
            -- Fast Clamp delay to minimum of 0
            if delay < 0 then
                delay = 0
            end
            jobOpts["delay"] = delay
            addJobFromScheduler(nextDelayedJobKey, nextDelayedJobId, jobOpts, waitKey, pausedKey, KEYS[12], metaKey,
                prioritizedKey, KEYS[10], delayedKey, KEYS[7], eventsKey, schedulerAttributes[1], maxEvents, ARGV[5],
                templateData or '{}', jobSchedulerId, delay)
            -- TODO: remove this workaround in next breaking change
            if KEYS[11] ~= "" then
                rcall("HSET", KEYS[11], "nrjid", nextDelayedJobId)
            end
            return nextDelayedJobId .. "" -- convert to string
        else
            rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "duplicated", "jobId", nextDelayedJobId)
        end
    end
end
`;YB.updateJobScheduler={name:"updateJobScheduler",content:Kpr,keys:12}});var hQe=m(QB=>{"use strict";Object.defineProperty(QB,"__esModule",{value:!0});QB.updateProgress=void 0;var Upr=`--[[
  Update job progress
  Input:
    KEYS[1] Job id key
    KEYS[2] event stream key
    KEYS[3] meta key
    ARGV[1] id
    ARGV[2] progress
  Output:
     0 - OK
    -1 - Missing job.
  Event:
    progress(jobId, progress)
]]
local rcall = redis.call
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
    local maxEvents = getOrSetMaxEvents(KEYS[3])
    rcall("HSET", KEYS[1], "progress", ARGV[2])
    rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event", "progress",
          "jobId", ARGV[1], "data", ARGV[2]);
    return 0
else
    return -1
end
`;QB.updateProgress={name:"updateProgress",content:Upr,keys:3}});var mQe=m(XB=>{"use strict";Object.defineProperty(XB,"__esModule",{value:!0});XB.updateRepeatableJobMillis=void 0;var Vpr=`--[[
  Adds a repeatable job
    Input:
      KEYS[1] 'repeat' key
      ARGV[1] next milliseconds
      ARGV[2] custom key
      ARGV[3] legacy custom key TODO: remove this logic in next breaking change
      Output:
        repeatableKey  - OK
]]
local rcall = redis.call
local repeatKey = KEYS[1]
local nextMillis = ARGV[1]
local customKey = ARGV[2]
local legacyCustomKey = ARGV[3]
if rcall("ZSCORE", repeatKey, customKey) then
    rcall("ZADD", repeatKey, nextMillis, customKey)
    return customKey
elseif rcall("ZSCORE", repeatKey, legacyCustomKey) ~= false then
    rcall("ZADD", repeatKey, nextMillis, legacyCustomKey)
    return legacyCustomKey
end
return ''
`;XB.updateRepeatableJobMillis={name:"updateRepeatableJobMillis",content:Vpr,keys:1}});var yQe=m(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});var gt=(ea(),Jt(Zo));gt.__exportStar(_Ye(),pt);gt.__exportStar(vYe(),pt);gt.__exportStar(SYe(),pt);gt.__exportStar(wYe(),pt);gt.__exportStar(AYe(),pt);gt.__exportStar(CYe(),pt);gt.__exportStar(TYe(),pt);gt.__exportStar(OYe(),pt);gt.__exportStar(xYe(),pt);gt.__exportStar(IYe(),pt);gt.__exportStar(RYe(),pt);gt.__exportStar(DYe(),pt);gt.__exportStar(kYe(),pt);gt.__exportStar(MYe(),pt);gt.__exportStar(PYe(),pt);gt.__exportStar(NYe(),pt);gt.__exportStar(FYe(),pt);gt.__exportStar(BYe(),pt);gt.__exportStar(qYe(),pt);gt.__exportStar(LYe(),pt);gt.__exportStar(jYe(),pt);gt.__exportStar($Ye(),pt);gt.__exportStar(KYe(),pt);gt.__exportStar(UYe(),pt);gt.__exportStar(VYe(),pt);gt.__exportStar(GYe(),pt);gt.__exportStar(HYe(),pt);gt.__exportStar(zYe(),pt);gt.__exportStar(WYe(),pt);gt.__exportStar(JYe(),pt);gt.__exportStar(YYe(),pt);gt.__exportStar(QYe(),pt);gt.__exportStar(XYe(),pt);gt.__exportStar(ZYe(),pt);gt.__exportStar(eQe(),pt);gt.__exportStar(tQe(),pt);gt.__exportStar(rQe(),pt);gt.__exportStar(nQe(),pt);gt.__exportStar(iQe(),pt);gt.__exportStar(sQe(),pt);gt.__exportStar(oQe(),pt);gt.__exportStar(aQe(),pt);gt.__exportStar(uQe(),pt);gt.__exportStar(cQe(),pt);gt.__exportStar(lQe(),pt);gt.__exportStar(dQe(),pt);gt.__exportStar(pQe(),pt);gt.__exportStar(fQe(),pt);gt.__exportStar(hQe(),pt);gt.__exportStar(mQe(),pt)});var o8=m(ZB=>{"use strict";Object.defineProperty(ZB,"__esModule",{value:!0});ZB.RedisConnection=void 0;var Gpr=(ea(),Jt(Zo)),Hpr=require("events"),gQe=oP(),EQe=ss(),Ru=Uc(),zpr=XF(),Wpr=yQe(),Jpr=["BullMQ: WARNING! Your redis options maxRetriesPerRequest must be null","and will be overridden by BullMQ."].join(" "),Ypr="BullMQ: Your redis options maxRetriesPerRequest must be null.",s8=class t extends Hpr.EventEmitter{constructor(e,r){if(super(),this.extraOptions=r,this.capabilities={canDoubleTimeout:!1,canBlockFor1Ms:!0},this.status="initializing",this.packageVersion=zpr.version,this.extraOptions=Object.assign({shared:!1,blocking:!0,skipVersionCheck:!1,skipWaitingForReady:!1},r),!(0,Ru.isRedisInstance)(e))this.checkBlockingOptions(Jpr,e),this.opts=Object.assign({port:6379,host:"127.0.0.1",retryStrategy:function(n){return Math.max(Math.min(Math.exp(n),2e4),1e3)}},e),this.extraOptions.blocking&&(this.opts.maxRetriesPerRequest=null);else{if(this._client=e,this._client.options.keyPrefix)throw new Error("BullMQ: ioredis does not support ioredis prefixes, use the prefix option instead.");(0,Ru.isRedisCluster)(this._client)?this.opts=this._client.options.redisOptions:this.opts=this._client.options,this.checkBlockingOptions(Ypr,this.opts,!0)}this.skipVersionCheck=r?.skipVersionCheck||!!(this.opts&&this.opts.skipVersionCheck),this.handleClientError=n=>{this.emit("error",n)},this.handleClientClose=()=>{this.emit("close")},this.handleClientReady=()=>{this.emit("ready")},this.initializing=this.init(),this.initializing.catch(n=>this.emit("error",n))}checkBlockingOptions(e,r,n=!1){if(this.extraOptions.blocking&&r&&r.maxRetriesPerRequest){if(n)throw new Error(e);console.error(e)}}static async waitUntilReady(e){if(e.status==="ready")return;if(e.status==="wait")return e.connect();if(e.status==="end")throw new Error(EQe.CONNECTION_CLOSED_ERROR_MSG);let r,n,i;try{await new Promise((s,o)=>{let a;i=u=>{a=u},r=()=>{s()},n=()=>{e.status!=="end"?o(a||new Error(EQe.CONNECTION_CLOSED_ERROR_MSG)):a?o(a):s()},(0,Ru.increaseMaxListeners)(e,3),e.once("ready",r),e.on("end",n),e.once("error",i)})}finally{e.removeListener("end",n),e.removeListener("error",i),e.removeListener("ready",r),(0,Ru.decreaseMaxListeners)(e,3)}}get client(){return this.initializing}loadCommands(e,r){let n=r||Wpr;for(let i in n){let s=`${n[i].name}:${e}`;this._client[s]||this._client.defineCommand(s,{numberOfKeys:n[i].keys,lua:n[i].content})}}async init(){if(!this._client){let e=this.opts,{url:r}=e,n=Gpr.__rest(e,["url"]);this._client=r?new gQe.default(r,n):new gQe.default(n)}if((0,Ru.increaseMaxListeners)(this._client,3),this._client.on("error",this.handleClientError),this._client.on("close",this.handleClientClose),this._client.on("ready",this.handleClientReady),this.extraOptions.skipWaitingForReady||await t.waitUntilReady(this._client),this.loadCommands(this.packageVersion),this._client.status!=="end"){if(this.version=await this.getRedisVersion(),this.skipVersionCheck!==!0&&!this.closing){if((0,Ru.isRedisVersionLowerThan)(this.version,t.minimumVersion))throw new Error(`Redis version needs to be greater or equal than ${t.minimumVersion} Current: ${this.version}`);(0,Ru.isRedisVersionLowerThan)(this.version,t.recommendedMinimumVersion)&&console.warn(`It is highly recommended to use a minimum Redis version of ${t.recommendedMinimumVersion}
             Current: ${this.version}`)}this.capabilities={canDoubleTimeout:!(0,Ru.isRedisVersionLowerThan)(this.version,"6.0.0"),canBlockFor1Ms:!(0,Ru.isRedisVersionLowerThan)(this.version,"7.0.8")},this.status="ready"}return this._client}async disconnect(e=!0){let r=await this.client;if(r.status!=="end"){let n,i;if(!e)return r.disconnect();let s=new Promise((o,a)=>{(0,Ru.increaseMaxListeners)(r,2),r.once("end",o),r.once("error",a),n=o,i=a});r.disconnect();try{await s}finally{(0,Ru.decreaseMaxListeners)(r,2),r.removeListener("end",n),r.removeListener("error",i)}}}async reconnect(){return(await this.client).connect()}async close(e=!1){if(!this.closing){let r=this.status;this.status="closing",this.closing=!0;try{r==="ready"&&await this.initializing,this.extraOptions.shared||(r=="initializing"||e?this._client.disconnect():await this._client.quit(),this._client.status="end")}catch(n){if((0,Ru.isNotConnectionError)(n))throw n}finally{this._client.off("error",this.handleClientError),this._client.off("close",this.handleClientClose),this._client.off("ready",this.handleClientReady),(0,Ru.decreaseMaxListeners)(this._client,3),this.removeAllListeners(),this.status="closed"}}}async getRedisVersion(){if(this.skipVersionCheck)return t.minimumVersion;let e=await this._client.info(),r="redis_version:",n="maxmemory_policy:",i=e.split(/\r?\n/),s;for(let o=0;o<i.length;o++){if(i[o].indexOf(n)===0){let a=i[o].substr(n.length);a!=="noeviction"&&console.warn(`IMPORTANT! Eviction policy is ${a}. It should be "noeviction"`)}i[o].indexOf(r)===0&&(s=i[o].substr(r.length))}return s}get redisVersion(){return this.version}};ZB.RedisConnection=s8;s8.minimumVersion="5.0.0";s8.recommendedMinimumVersion="6.2.0"});var bQe=m(tq=>{"use strict";Object.defineProperty(tq,"__esModule",{value:!0});tq.FlowProducer=void 0;var Qpr=require("events"),Xpr=MF(),c2=Uc(),Zpr=v4(),eq=rB(),efr=o8(),Rm=Tu(),Ace=class extends Qpr.EventEmitter{constructor(e={connection:{}},r=efr.RedisConnection){super(),this.opts=e,this.opts=Object.assign({prefix:"bull"},e),this.connection=new r(e.connection,{shared:(0,c2.isRedisInstance)(e.connection),blocking:!1,skipVersionCheck:e.skipVersionCheck,skipWaitingForReady:e.skipWaitingForReady}),this.connection.on("error",n=>this.emit("error",n)),this.connection.on("close",()=>{this.closing||this.emit("ioredis:close")}),this.queueKeys=new eq.QueueKeys(e.prefix),e?.telemetry&&(this.telemetry=e.telemetry)}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}get client(){return this.connection.client}get Job(){return Zpr.Job}waitUntilReady(){return this.client}async add(e,r){var n;if(this.closing)return;let s=(await this.connection.client).multi(),o=(n=e?.opts)===null||n===void 0?void 0:n.parent,a=(0,c2.getParentKey)(o),u=a?`${a}:dependencies`:void 0;return(0,c2.trace)(this.telemetry,Rm.SpanKind.PRODUCER,e.queueName,"addFlow",e.queueName,async c=>{c?.setAttributes({[Rm.TelemetryAttributes.FlowName]:e.name});let l=await this.addNode({multi:s,node:e,queuesOpts:r?.queuesOptions,parent:{parentOpts:o,parentDependenciesKey:u}});return await s.exec(),l})}async getFlow(e){if(this.closing)return;let r=await this.connection.client,n=Object.assign({depth:10,maxChildren:20,prefix:this.opts.prefix},e);return this.getNode(r,n)}async addBulk(e){if(this.closing)return;let n=(await this.connection.client).multi();return(0,c2.trace)(this.telemetry,Rm.SpanKind.PRODUCER,"","addBulkFlows","",async i=>{i?.setAttributes({[Rm.TelemetryAttributes.BulkCount]:e.length,[Rm.TelemetryAttributes.BulkNames]:e.map(o=>o.name).join(",")});let s=await this.addNodes(n,e);return await n.exec(),s})}async addNode({multi:e,node:r,parent:n,queuesOpts:i}){var s,o;let a=r.prefix||this.opts.prefix,u=this.queueFromNode(r,new eq.QueueKeys(a),a),c=i&&i[r.queueName],l=(s=c?.defaultJobOptions)!==null&&s!==void 0?s:{},d=((o=r.opts)===null||o===void 0?void 0:o.jobId)||(0,Xpr.v4)();return(0,c2.trace)(this.telemetry,Rm.SpanKind.PRODUCER,r.queueName,"addNode",r.queueName,async(p,f)=>{var h,g;p?.setAttributes({[Rm.TelemetryAttributes.JobName]:r.name,[Rm.TelemetryAttributes.JobId]:d});let _=r.opts,S=_?.telemetry;if(f&&_){let A=(h=_.telemetry)===null||h===void 0?void 0:h.omitContext,O=((g=_.telemetry)===null||g===void 0?void 0:g.metadata)||!A&&f;(O||A)&&(S={metadata:O,omitContext:A})}let w=new this.Job(u,r.name,r.data,Object.assign(Object.assign(Object.assign({},l),_),{parent:n?.parentOpts,telemetry:S}),d),C=(0,c2.getParentKey)(n?.parentOpts);if(r.children&&r.children.length>0){let A=d,O=new eq.QueueKeys(r.prefix||this.opts.prefix);await w.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,addToWaitingChildren:!0,parentKey:C});let x=`${O.toKey(r.queueName,A)}:dependencies`,R=await this.addChildren({multi:e,nodes:r.children,parent:{parentOpts:{id:A,queue:O.getQueueQualifiedName(r.queueName)},parentDependenciesKey:x},queuesOpts:i});return{job:w,children:R}}else return await w.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,parentKey:C}),{job:w}})}addNodes(e,r){return Promise.all(r.map(n=>{var i;let s=(i=n?.opts)===null||i===void 0?void 0:i.parent,o=(0,c2.getParentKey)(s),a=o?`${o}:dependencies`:void 0;return this.addNode({multi:e,node:n,parent:{parentOpts:s,parentDependenciesKey:a}})}))}async getNode(e,r){let n=this.queueFromNode(r,new eq.QueueKeys(r.prefix),r.prefix),i=await this.Job.fromId(n,r.id);if(i){let{processed:s={},unprocessed:o=[],failed:a=[],ignored:u={}}=await i.getDependencies({failed:{count:r.maxChildren},processed:{count:r.maxChildren},unprocessed:{count:r.maxChildren},ignored:{count:r.maxChildren}}),c=Object.keys(s),l=Object.keys(u),d=c.length+o.length+l.length+a.length,p=r.depth-1;if(d>0&&p){let f=await this.getChildren(e,[...c,...o,...a,...l],p,r.maxChildren);return{job:i,children:f}}else return{job:i}}}addChildren({multi:e,nodes:r,parent:n,queuesOpts:i}){return Promise.all(r.map(s=>this.addNode({multi:e,node:s,parent:n,queuesOpts:i})))}getChildren(e,r,n,i){let s=o=>{let[a,u,c]=o.split(":");return this.getNode(e,{id:c,queueName:u,prefix:a,depth:n,maxChildren:i})};return Promise.all([...r.map(s)])}queueFromNode(e,r,n){return{client:this.connection.client,name:e.queueName,keys:r.getKeys(e.queueName),toKey:i=>r.toKey(e.queueName,i),opts:{prefix:n,connection:{}},qualifiedName:r.getQueueQualifiedName(e.queueName),closing:this.closing,waitUntilReady:async()=>this.connection.client,removeListener:this.removeListener.bind(this),emit:this.emit.bind(this),on:this.on.bind(this),redisVersion:this.connection.redisVersion,trace:async()=>{}}}async close(){this.closing||(this.closing=this.connection.close()),await this.closing}disconnect(){return this.connection.disconnect()}};tq.FlowProducer=Ace});var JXe=m(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var e1=class extends Error{},Pce=class extends e1{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},Nce=class extends e1{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Fce=class extends e1{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Mm=class extends e1{},cq=class extends e1{constructor(e){super(`Invalid unit ${e}`)}},xs=class extends e1{},dp=class extends e1{constructor(){super("Zone is an abstract class")}},Ue="numeric",ad="short",Mu="long",lq={year:Ue,month:Ue,day:Ue},YQe={year:Ue,month:ad,day:Ue},tfr={year:Ue,month:ad,day:Ue,weekday:ad},QQe={year:Ue,month:Mu,day:Ue},XQe={year:Ue,month:Mu,day:Ue,weekday:Mu},ZQe={hour:Ue,minute:Ue},eXe={hour:Ue,minute:Ue,second:Ue},tXe={hour:Ue,minute:Ue,second:Ue,timeZoneName:ad},rXe={hour:Ue,minute:Ue,second:Ue,timeZoneName:Mu},nXe={hour:Ue,minute:Ue,hourCycle:"h23"},iXe={hour:Ue,minute:Ue,second:Ue,hourCycle:"h23"},sXe={hour:Ue,minute:Ue,second:Ue,hourCycle:"h23",timeZoneName:ad},oXe={hour:Ue,minute:Ue,second:Ue,hourCycle:"h23",timeZoneName:Mu},aXe={year:Ue,month:Ue,day:Ue,hour:Ue,minute:Ue},uXe={year:Ue,month:Ue,day:Ue,hour:Ue,minute:Ue,second:Ue},cXe={year:Ue,month:ad,day:Ue,hour:Ue,minute:Ue},lXe={year:Ue,month:ad,day:Ue,hour:Ue,minute:Ue,second:Ue},rfr={year:Ue,month:ad,day:Ue,weekday:ad,hour:Ue,minute:Ue},dXe={year:Ue,month:Mu,day:Ue,hour:Ue,minute:Ue,timeZoneName:ad},pXe={year:Ue,month:Mu,day:Ue,hour:Ue,minute:Ue,second:Ue,timeZoneName:ad},fXe={year:Ue,month:Mu,day:Ue,weekday:Mu,hour:Ue,minute:Ue,timeZoneName:Mu},hXe={year:Ue,month:Mu,day:Ue,weekday:Mu,hour:Ue,minute:Ue,second:Ue,timeZoneName:Mu},Nm=class{get type(){throw new dp}get name(){throw new dp}get ianaName(){return this.name}get isUniversal(){throw new dp}offsetName(e,r){throw new dp}formatOffset(e,r){throw new dp}offset(e){throw new dp}equals(e){throw new dp}get isValid(){throw new dp}},Cce=null,p8=class t extends Nm{static get instance(){return Cce===null&&(Cce=new t),Cce}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return CXe(e,r,n)}formatOffset(e,r){return d8(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},Bce=new Map;function nfr(t){let e=Bce.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Bce.set(t,e)),e}var ifr={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function sfr(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,s,o,a,u,c,l]=n;return[o,i,s,a,u,c,l]}function ofr(t,e){let r=t.formatToParts(e),n=[];for(let i=0;i<r.length;i++){let{type:s,value:o}=r[i],a=ifr[s];s==="era"?n[a]=o:At(a)||(n[a]=parseInt(o,10))}return n}var Tce=new Map,t1=class t extends Nm{static create(e){let r=Tce.get(e);return r===void 0&&Tce.set(e,r=new t(e)),r}static resetCache(){Tce.clear(),Bce.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return CXe(e,r,n,this.name)}formatOffset(e,r){return d8(this.offset(e),r)}offset(e){if(!this.valid)return NaN;let r=new Date(e);if(isNaN(r))return NaN;let n=nfr(this.name),[i,s,o,a,u,c,l]=n.formatToParts?ofr(n,r):sfr(n,r);a==="BC"&&(i=-Math.abs(i)+1);let p=gq({year:i,month:s,day:o,hour:u===24?0:u,minute:c,second:l,millisecond:0}),f=+r,h=f%1e3;return f-=h>=0?h:1e3+h,(p-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},_Qe={};function afr(t,e={}){let r=JSON.stringify([t,e]),n=_Qe[r];return n||(n=new Intl.ListFormat(t,e),_Qe[r]=n),n}var qce=new Map;function Lce(t,e={}){let r=JSON.stringify([t,e]),n=qce.get(r);return n===void 0&&(n=new Intl.DateTimeFormat(t,e),qce.set(r,n)),n}var jce=new Map;function ufr(t,e={}){let r=JSON.stringify([t,e]),n=jce.get(r);return n===void 0&&(n=new Intl.NumberFormat(t,e),jce.set(r,n)),n}var $ce=new Map;function cfr(t,e={}){let{base:r,...n}=e,i=JSON.stringify([t,n]),s=$ce.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),$ce.set(i,s)),s}var u8=null;function lfr(){return u8||(u8=new Intl.DateTimeFormat().resolvedOptions().locale,u8)}var Kce=new Map;function mXe(t){let e=Kce.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),Kce.set(t,e)),e}var Uce=new Map;function dfr(t){let e=Uce.get(t);if(!e){let r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in e||(e={...yXe,...e}),Uce.set(t,e)}return e}function pfr(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let r=t.indexOf("-u-");if(r===-1)return[t];{let n,i;try{n=Lce(t).resolvedOptions(),i=t}catch{let u=t.substring(0,r);n=Lce(u).resolvedOptions(),i=u}let{numberingSystem:s,calendar:o}=n;return[i,s,o]}}function ffr(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function hfr(t){let e=[];for(let r=1;r<=12;r++){let n=Ln.utc(2009,r,1);e.push(t(n))}return e}function mfr(t){let e=[];for(let r=1;r<=7;r++){let n=Ln.utc(2016,11,13+r);e.push(t(n))}return e}function rq(t,e,r,n){let i=t.listingMode();return i==="error"?null:i==="en"?r(e):n(e)}function yfr(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||mXe(t.locale).numberingSystem==="latn"}var Vce=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:i,floor:s,...o}=n;if(!r||Object.keys(o).length>0){let a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=ufr(e,a)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):tle(e,3);return ji(r,this.padTo)}}},Gce=class{constructor(e,r,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&t1.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=Lce(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){let n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},Hce=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&wXe()&&(this.rtf=cfr(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):Bfr(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},yXe={firstDay:1,minimalDays:4,weekend:[6,7]},un=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,n,i,s=!1){let o=e||Dn.defaultLocale,a=o||(s?"en-US":lfr()),u=r||Dn.defaultNumberingSystem,c=n||Dn.defaultOutputCalendar,l=Wce(i)||Dn.defaultWeekSettings;return new t(a,u,c,l,o)}static resetCache(){u8=null,qce.clear(),jce.clear(),$ce.clear(),Kce.clear(),Uce.clear()}static fromObject({locale:e,numberingSystem:r,outputCalendar:n,weekSettings:i}={}){return t.create(e,r,n,i)}constructor(e,r,n,i,s){let[o,a,u]=pfr(e);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=n||u||null,this.weekSettings=i,this.intl=ffr(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=yfr(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Wce(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return rq(this,e,xXe,()=>{let n=this.intl==="ja"||this.intl.startsWith("ja-");r&=!n;let i=r?{month:e,day:"numeric"}:{month:e},s=r?"format":"standalone";if(!this.monthsCache[s][e]){let o=n?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[s][e]=hfr(o)}return this.monthsCache[s][e]})}weekdays(e,r=!1){return rq(this,e,DXe,()=>{let n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=r?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=mfr(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return rq(this,void 0,()=>kXe,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ln.utc(2016,11,13,9),Ln.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return rq(this,e,MXe,()=>{let r={era:e};return this.eraCache[e]||(this.eraCache[e]=[Ln.utc(-40,1,1),Ln.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,r,n){let i=this.dtFormatter(e,r),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new Vce(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new Gce(e,this.intl,r)}relFormatter(e={}){return new Hce(this.intl,this.isEnglish(),e)}listFormatter(e={}){return afr(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||mXe(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:AXe()?dfr(this.locale):yXe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}},Oce=null,Pu=class t extends Nm{static get utcInstance(){return Oce===null&&(Oce=new t(0)),Oce}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(Eq(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${d8(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${d8(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return d8(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},dq=class extends Nm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function km(t,e){if(At(t)||t===null)return e;if(t instanceof Nm)return t;if(Sfr(t)){let r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?p8.instance:r==="utc"||r==="gmt"?Pu.utcInstance:Pu.parseSpecifier(r)||t1.create(t)}else return Pm(t)?Pu.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new dq(t)}var Qce={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},vQe={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gfr=Qce.hanidec.replace(/[\[|\]]/g,"").split("");function Efr(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(Qce.hanidec)!==-1)e+=gfr.indexOf(t[r]);else for(let i in vQe){let[s,o]=vQe[i];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}var zce=new Map;function bfr(){zce.clear()}function sd({numberingSystem:t},e=""){let r=t||"latn",n=zce.get(r);n===void 0&&(n=new Map,zce.set(r,n));let i=n.get(e);return i===void 0&&(i=new RegExp(`${Qce[r]}${e}`),n.set(e,i)),i}var SQe=()=>Date.now(),wQe="system",AQe=null,CQe=null,TQe=null,OQe=60,xQe,IQe=null,Dn=class{static get now(){return SQe}static set now(e){SQe=e}static set defaultZone(e){wQe=e}static get defaultZone(){return km(wQe,p8.instance)}static get defaultLocale(){return AQe}static set defaultLocale(e){AQe=e}static get defaultNumberingSystem(){return CQe}static set defaultNumberingSystem(e){CQe=e}static get defaultOutputCalendar(){return TQe}static set defaultOutputCalendar(e){TQe=e}static get defaultWeekSettings(){return IQe}static set defaultWeekSettings(e){IQe=Wce(e)}static get twoDigitCutoffYear(){return OQe}static set twoDigitCutoffYear(e){OQe=e%100}static get throwOnInvalid(){return xQe}static set throwOnInvalid(e){xQe=e}static resetCaches(){un.resetCache(),t1.resetCache(),Ln.resetCache(),bfr()}},ku=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},gXe=[0,31,59,90,120,151,181,212,243,273,304,334],EXe=[0,31,60,91,121,152,182,213,244,274,305,335];function Hc(t,e){return new ku("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Xce(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let i=n.getUTCDay();return i===0?7:i}function bXe(t,e,r){return r+(h8(t)?EXe:gXe)[e-1]}function _Xe(t,e){let r=h8(t)?EXe:gXe,n=r.findIndex(s=>s<e),i=e-r[n];return{month:n+1,day:i}}function Zce(t,e){return(t-e+7)%7+1}function pq(t,e=4,r=1){let{year:n,month:i,day:s}=t,o=bXe(n,i,s),a=Zce(Xce(n,i,s),r),u=Math.floor((o-a+14-e)/7),c;return u<1?(c=n-1,u=f8(c,e,r)):u>f8(n,e,r)?(c=n+1,u=1):c=n,{weekYear:c,weekNumber:u,weekday:a,...bq(t)}}function RQe(t,e=4,r=1){let{weekYear:n,weekNumber:i,weekday:s}=t,o=Zce(Xce(n,1,e),r),a=C4(n),u=i*7+s-o-7+e,c;u<1?(c=n-1,u+=C4(c)):u>a?(c=n+1,u-=C4(n)):c=n;let{month:l,day:d}=_Xe(c,u);return{year:c,month:l,day:d,...bq(t)}}function xce(t){let{year:e,month:r,day:n}=t,i=bXe(e,r,n);return{year:e,ordinal:i,...bq(t)}}function DQe(t){let{year:e,ordinal:r}=t,{month:n,day:i}=_Xe(e,r);return{year:e,month:n,day:i,...bq(t)}}function kQe(t,e){if(!At(t.localWeekday)||!At(t.localWeekNumber)||!At(t.localWeekYear)){if(!At(t.weekday)||!At(t.weekNumber)||!At(t.weekYear))throw new Mm("Cannot mix locale-based week fields with ISO-based week fields");return At(t.localWeekday)||(t.weekday=t.localWeekday),At(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),At(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function _fr(t,e=4,r=1){let n=yq(t.weekYear),i=zc(t.weekNumber,1,f8(t.weekYear,e,r)),s=zc(t.weekday,1,7);return n?i?s?!1:Hc("weekday",t.weekday):Hc("week",t.weekNumber):Hc("weekYear",t.weekYear)}function vfr(t){let e=yq(t.year),r=zc(t.ordinal,1,C4(t.year));return e?r?!1:Hc("ordinal",t.ordinal):Hc("year",t.year)}function vXe(t){let e=yq(t.year),r=zc(t.month,1,12),n=zc(t.day,1,fq(t.year,t.month));return e?r?n?!1:Hc("day",t.day):Hc("month",t.month):Hc("year",t.year)}function SXe(t){let{hour:e,minute:r,second:n,millisecond:i}=t,s=zc(e,0,23)||e===24&&r===0&&n===0&&i===0,o=zc(r,0,59),a=zc(n,0,59),u=zc(i,0,999);return s?o?a?u?!1:Hc("millisecond",i):Hc("second",n):Hc("minute",r):Hc("hour",e)}function At(t){return typeof t>"u"}function Pm(t){return typeof t=="number"}function yq(t){return typeof t=="number"&&t%1===0}function Sfr(t){return typeof t=="string"}function wfr(t){return Object.prototype.toString.call(t)==="[object Date]"}function wXe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function AXe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Afr(t){return Array.isArray(t)?t:[t]}function MQe(t,e,r){if(t.length!==0)return t.reduce((n,i)=>{let s=[e(i),i];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function Cfr(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function O4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wce(t){if(t==null)return null;if(typeof t!="object")throw new xs("Week settings must be an object");if(!zc(t.firstDay,1,7)||!zc(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!zc(e,1,7)))throw new xs("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function zc(t,e,r){return yq(t)&&t>=e&&t<=r}function Tfr(t,e){return t-e*Math.floor(t/e)}function ji(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Dm(t){if(!(At(t)||t===null||t===""))return parseInt(t,10)}function l2(t){if(!(At(t)||t===null||t===""))return parseFloat(t)}function ele(t){if(!(At(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function tle(t,e,r="round"){let n=10**e;switch(r){case"expand":return t>0?Math.ceil(t*n)/n:Math.floor(t*n)/n;case"trunc":return Math.trunc(t*n)/n;case"round":return Math.round(t*n)/n;case"floor":return Math.floor(t*n)/n;case"ceil":return Math.ceil(t*n)/n;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function h8(t){return t%4===0&&(t%100!==0||t%400===0)}function C4(t){return h8(t)?366:365}function fq(t,e){let r=Tfr(e-1,12)+1,n=t+(e-r)/12;return r===2?h8(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function gq(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function PQe(t,e,r){return-Zce(Xce(t,1,e),r)+e-1}function f8(t,e=4,r=1){let n=PQe(t,e,r),i=PQe(t+1,e,r);return(C4(t)-n+i)/7}function Jce(t){return t>99?t:t>Dn.twoDigitCutoffYear?1900+t:2e3+t}function CXe(t,e,r,n=null){let i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);let o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function Eq(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function TXe(t){let e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new xs(`Invalid unit value ${t}`);return e}function hq(t,e){let r={};for(let n in t)if(O4(t,n)){let i=t[n];if(i==null)continue;r[e(n)]=TXe(i)}return r}function d8(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${ji(r,2)}:${ji(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${ji(r,2)}${ji(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function bq(t){return Cfr(t,["hour","minute","second","millisecond"])}var Ofr=["January","February","March","April","May","June","July","August","September","October","November","December"],OXe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xfr=["J","F","M","A","M","J","J","A","S","O","N","D"];function xXe(t){switch(t){case"narrow":return[...xfr];case"short":return[...OXe];case"long":return[...Ofr];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var IXe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],RXe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ifr=["M","T","W","T","F","S","S"];function DXe(t){switch(t){case"narrow":return[...Ifr];case"short":return[...RXe];case"long":return[...IXe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var kXe=["AM","PM"],Rfr=["Before Christ","Anno Domini"],Dfr=["BC","AD"],kfr=["B","A"];function MXe(t){switch(t){case"narrow":return[...kfr];case"short":return[...Dfr];case"long":return[...Rfr];default:return null}}function Mfr(t){return kXe[t.hour<12?0:1]}function Pfr(t,e){return DXe(e)[t.weekday-1]}function Nfr(t,e){return xXe(e)[t.month-1]}function Ffr(t,e){return MXe(e)[t.year<0?0:1]}function Bfr(t,e,r="always",n=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&s){let d=t==="days";switch(e){case 1:return d?"tomorrow":`next ${i[t][0]}`;case-1:return d?"yesterday":`last ${i[t][0]}`;case 0:return d?"today":`this ${i[t][0]}`}}let o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,c=i[t],l=n?u?c[1]:c[2]||c[1]:u?i[t][0]:t;return o?`${a} ${l} ago`:`in ${a} ${l}`}function NQe(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var qfr={D:lq,DD:YQe,DDD:QQe,DDDD:XQe,t:ZQe,tt:eXe,ttt:tXe,tttt:rXe,T:nXe,TT:iXe,TTT:sXe,TTTT:oXe,f:aXe,ff:cXe,fff:dXe,ffff:fXe,F:uXe,FF:lXe,FFF:pXe,FFFF:hXe},Du=class t{static create(e,r={}){return new t(e,r)}static parseFormat(e){let r=null,n="",i=!1,s=[];for(let o=0;o<e.length;o++){let a=e.charAt(o);a==="'"?((n.length>0||i)&&s.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),r=null,n="",i=!i):i||a===r?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,r=a)}return n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return qfr[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0,n=void 0){if(this.opts.forceSimple)return ji(e,r);let i={...this.opts};return r>0&&(i.padTo=r),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,h)=>this.loc.extract(e,f,h),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>n?Mfr(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(f,h)=>n?Nfr(e,f):s(h?{month:f}:{month:f,day:"numeric"},"month"),c=(f,h)=>n?Pfr(e,f):s(h?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),l=f=>{let h=t.macroTokenToFormatOpts(f);return h?this.formatWithSystemDefault(e,h):f},d=f=>n?Ffr(e,f):s({era:f},"era"),p=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return l(f)}};return NQe(t.parseFormat(r),p)}formatDurationFromString(e,r){let n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=l=>{switch(l[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(l,d)=>p=>{let f=i(p);if(f){let h=d.isNegativeDuration&&f!==d.largestUnit?n:1,g;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(l.get(f)*h,p.length,g)}else return p},o=t.parseFormat(r),a=o.reduce((l,{literal:d,val:p})=>d?l:l.concat(p),[]),u=e.shiftTo(...a.map(i).filter(l=>l)),c={isNegativeDuration:u<0,largestUnit:Object.keys(u.values)[0]};return NQe(o,s(u,c))}},PXe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function x4(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function I4(...t){return e=>t.reduce(([r,n,i],s)=>{let[o,a,u]=s(e,i);return[{...r,...o},a||n,u]},[{},null,1]).slice(0,2)}function R4(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let i=r.exec(t);if(i)return n(i)}return[null,null]}function NXe(...t){return(e,r)=>{let n={},i;for(i=0;i<t.length;i++)n[t[i]]=Dm(e[r+i]);return[n,null,r+i]}}var FXe=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Lfr=`(?:${FXe.source}?(?:\\[(${PXe.source})\\])?)?`,rle=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,BXe=RegExp(`${rle.source}${Lfr}`),nle=RegExp(`(?:[Tt]${BXe.source})?`),jfr=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,$fr=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Kfr=/(\d{4})-?(\d{3})/,Ufr=NXe("weekYear","weekNumber","weekDay"),Vfr=NXe("year","ordinal"),Gfr=/(\d{4})-(\d\d)-(\d\d)/,qXe=RegExp(`${rle.source} ?(?:${FXe.source}|(${PXe.source}))?`),Hfr=RegExp(`(?: ${qXe.source})?`);function T4(t,e,r){let n=t[e];return At(n)?r:Dm(n)}function zfr(t,e){return[{year:T4(t,e),month:T4(t,e+1,1),day:T4(t,e+2,1)},null,e+3]}function D4(t,e){return[{hours:T4(t,e,0),minutes:T4(t,e+1,0),seconds:T4(t,e+2,0),milliseconds:ele(t[e+3])},null,e+4]}function m8(t,e){let r=!t[e]&&!t[e+1],n=Eq(t[e+1],t[e+2]),i=r?null:Pu.instance(n);return[{},i,e+3]}function y8(t,e){let r=t[e]?t1.create(t[e]):null;return[{},r,e+1]}var Wfr=RegExp(`^T?${rle.source}$`),Jfr=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Yfr(t){let[e,r,n,i,s,o,a,u,c]=t,l=e[0]==="-",d=u&&u[0]==="-",p=(f,h=!1)=>f!==void 0&&(h||f&&l)?-f:f;return[{years:p(l2(r)),months:p(l2(n)),weeks:p(l2(i)),days:p(l2(s)),hours:p(l2(o)),minutes:p(l2(a)),seconds:p(l2(u),u==="-0"),milliseconds:p(ele(c),d)}]}var Qfr={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ile(t,e,r,n,i,s,o){let a={year:e.length===2?Jce(Dm(e)):Dm(e),month:OXe.indexOf(r)+1,day:Dm(n),hour:Dm(i),minute:Dm(s)};return o&&(a.second=Dm(o)),t&&(a.weekday=t.length>3?IXe.indexOf(t)+1:RXe.indexOf(t)+1),a}var Xfr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Zfr(t){let[,e,r,n,i,s,o,a,u,c,l,d]=t,p=ile(e,i,n,r,s,o,a),f;return u?f=Qfr[u]:c?f=0:f=Eq(l,d),[p,new Pu(f)]}function e1r(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var t1r=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,r1r=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,n1r=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function FQe(t){let[,e,r,n,i,s,o,a]=t;return[ile(e,i,n,r,s,o,a),Pu.utcInstance]}function i1r(t){let[,e,r,n,i,s,o,a]=t;return[ile(e,a,r,n,i,s,o),Pu.utcInstance]}var s1r=x4(jfr,nle),o1r=x4($fr,nle),a1r=x4(Kfr,nle),u1r=x4(BXe),LXe=I4(zfr,D4,m8,y8),c1r=I4(Ufr,D4,m8,y8),l1r=I4(Vfr,D4,m8,y8),d1r=I4(D4,m8,y8);function p1r(t){return R4(t,[s1r,LXe],[o1r,c1r],[a1r,l1r],[u1r,d1r])}function f1r(t){return R4(e1r(t),[Xfr,Zfr])}function h1r(t){return R4(t,[t1r,FQe],[r1r,FQe],[n1r,i1r])}function m1r(t){return R4(t,[Jfr,Yfr])}var y1r=I4(D4);function g1r(t){return R4(t,[Wfr,y1r])}var E1r=x4(Gfr,Hfr),b1r=x4(qXe),_1r=I4(D4,m8,y8);function v1r(t){return R4(t,[E1r,LXe],[b1r,_1r])}var BQe="Invalid Duration",jXe={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},S1r={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...jXe},Gc=146097/400,S4=146097/4800,w1r={years:{quarters:4,months:12,weeks:Gc/7,days:Gc,hours:Gc*24,minutes:Gc*24*60,seconds:Gc*24*60*60,milliseconds:Gc*24*60*60*1e3},quarters:{months:3,weeks:Gc/28,days:Gc/4,hours:Gc*24/4,minutes:Gc*24*60/4,seconds:Gc*24*60*60/4,milliseconds:Gc*24*60*60*1e3/4},months:{weeks:S4/7,days:S4,hours:S4*24,minutes:S4*24*60,seconds:S4*24*60*60,milliseconds:S4*24*60*60*1e3},...jXe},p2=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],A1r=p2.slice(0).reverse();function Zf(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new as(n)}function $Xe(t,e){var r;let n=(r=e.milliseconds)!=null?r:0;for(let i of A1r.slice(1))e[i]&&(n+=e[i]*t[i].milliseconds);return n}function qQe(t,e){let r=$Xe(t,e)<0?-1:1;p2.reduceRight((n,i)=>{if(At(e[i]))return n;if(n){let s=e[n]*r,o=t[i][n],a=Math.floor(s/o);e[i]+=a*r,e[n]-=a*o*r}return i},null),p2.reduce((n,i)=>{if(At(e[i]))return n;if(n){let s=e[n]%1;e[n]-=s,e[i]+=s*t[n][i]}return i},null)}function LQe(t){let e={};for(let[r,n]of Object.entries(t))n!==0&&(e[r]=n);return e}var as=class t{constructor(e){let r=e.conversionAccuracy==="longterm"||!1,n=r?w1r:S1r;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||un.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,r){return t.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new xs(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:hq(e,t.normalizeUnit),loc:un.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(Pm(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new xs(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=m1r(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=g1r(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new xs("need to specify a reason the Duration is invalid");let n=e instanceof ku?e:new ku(e,r);if(Dn.throwOnInvalid)throw new Fce(n);return new t({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new cq(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Du.create(this.loc,n).formatDurationFromString(this,e):BQe}toHuman(e={}){if(!this.isValid)return BQe;let r=e.showZeros!==!1,n=p2.map(i=>{let s=this.values[i];return At(s)||s===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=tle(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Ln.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?$Xe(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e),n={};for(let i of p2)(O4(r.values,i)||O4(this.values,i))&&(n[i]=r.get(i)+this.get(i));return Zf(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=TXe(e(this.values[n],n));return Zf(this,{values:r},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...hq(e,t.normalizeUnit)};return Zf(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n,matrix:i}={}){let o={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:i,conversionAccuracy:n};return Zf(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return qQe(this.matrix,e),Zf(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=LQe(this.normalize().shiftToAll().toObject());return Zf(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>t.normalizeUnit(o));let r={},n={},i=this.toObject(),s;for(let o of p2)if(e.indexOf(o)>=0){s=o;let a=0;for(let c in n)a+=this.matrix[c][o]*n[c],n[c]=0;Pm(i[o])&&(a+=i[o]);let u=Math.trunc(a);r[o]=u,n[o]=(a*1e3-u*1e3)/1e3}else Pm(i[o])&&(n[o]=i[o]);for(let o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return qQe(this.matrix,r),Zf(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return Zf(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;let e=LQe(this.values);return Zf(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(let n of p2)if(!r(this.values[n],e.values[n]))return!1;return!0}},w4="Invalid Interval";function C1r(t,e){return!t||!t.isValid?h2.invalid("missing or invalid start"):!e||!e.isValid?h2.invalid("missing or invalid end"):e<t?h2.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var h2=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new xs("need to specify a reason the Interval is invalid");let n=e instanceof ku?e:new ku(e,r);if(Dn.throwOnInvalid)throw new Nce(n);return new t({invalid:n})}static fromDateTimes(e,r){let n=a8(e),i=a8(r),s=C1r(n,i);return s??new t({start:n,end:i})}static after(e,r){let n=as.fromDurationLike(r),i=a8(e);return t.fromDateTimes(i,i.plus(n))}static before(e,r){let n=as.fromDurationLike(r),i=a8(e);return t.fromDateTimes(i.minus(n),i)}static fromISO(e,r){let[n,i]=(e||"").split("/",2);if(n&&i){let s,o;try{s=Ln.fromISO(n,r),o=s.isValid}catch{o=!1}let a,u;try{a=Ln.fromISO(i,r),u=a.isValid}catch{u=!1}if(o&&u)return t.fromDateTimes(s,a);if(o){let c=as.fromISO(i,r);if(c.isValid)return t.after(s,c)}else if(u){let c=as.fromISO(n,r);if(c.isValid)return t.before(a,c)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;let n=this.start.startOf(e,r),i;return r!=null&&r.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(e,r),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?t.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(a8).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[],{s:i}=this,s=0;for(;i<this.e;){let o=r[s]||this.e,a=+o>+this.e?this.e:o;n.push(t.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(e){let r=as.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,s,o=[];for(;n<this.e;){let a=this.start.plus(r.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(t.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:t.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return t.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,c)=>u.time-c.time);for(let u of a)n+=u.type==="s"?1:-1,n===1?r=u.time:(r&&+r!=+u.time&&i.push(t.fromDateTimes(r,u.time)),r=null);return t.merge(i)}difference(...e){return t.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:w4}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=lq,r={}){return this.isValid?Du.create(this.s.loc.clone(r),e).formatInterval(this):w4}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:w4}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:w4}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:w4}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:w4}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):as.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}},f2=class{static hasDST(e=Dn.defaultZone){let r=Ln.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return t1.isValidZone(e)}static normalizeZone(e){return km(e,Dn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||un.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||un.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||un.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||un.create(r,n,s)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||un.create(r,n,s)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||un.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||un.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return un.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return un.create(r,null,"gregory").eras(e)}static features(){return{relative:wXe(),localeWeek:AXe()}}};function jQe(t,e){let r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(as.fromMillis(n).as("days"))}function T1r(t,e,r){let n=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{let l=jQe(u,c);return(l-l%7)/7}],["days",jQe]],i={},s=t,o,a;for(let[u,c]of n)r.indexOf(u)>=0&&(o=u,i[u]=c(t,e),a=s.plus(i),a>e?(i[u]--,t=s.plus(i),t>e&&(a=t,i[u]--,t=s.plus(i))):t=a);return[t,i,a,o]}function O1r(t,e,r,n){let[i,s,o,a]=T1r(t,e,r),u=e-i,c=r.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));let l=as.fromObject(s,n);return c.length>0?as.fromMillis(u,n).shiftTo(...c).plus(l):l}var x1r="missing Intl.DateTimeFormat.formatToParts support";function Pr(t,e=r=>r){return{regex:t,deser:([r])=>e(Efr(r))}}var I1r="\xA0",KXe=`[ ${I1r}]`,UXe=new RegExp(KXe,"g");function R1r(t){return t.replace(/\./g,"\\.?").replace(UXe,KXe)}function $Qe(t){return t.replace(/\./g,"").replace(UXe," ").toLowerCase()}function od(t,e){return t===null?null:{regex:RegExp(t.map(R1r).join("|")),deser:([r])=>t.findIndex(n=>$Qe(r)===$Qe(n))+e}}function KQe(t,e){return{regex:t,deser:([,r,n])=>Eq(r,n),groups:e}}function nq(t){return{regex:t,deser:([e])=>e}}function D1r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k1r(t,e){let r=sd(e),n=sd(e,"{2}"),i=sd(e,"{3}"),s=sd(e,"{4}"),o=sd(e,"{6}"),a=sd(e,"{1,2}"),u=sd(e,"{1,3}"),c=sd(e,"{1,6}"),l=sd(e,"{1,9}"),d=sd(e,"{2,4}"),p=sd(e,"{4,6}"),f=_=>({regex:RegExp(D1r(_.val)),deser:([S])=>S,literal:!0}),g=(_=>{if(t.literal)return f(_);switch(_.val){case"G":return od(e.eras("short"),0);case"GG":return od(e.eras("long"),0);case"y":return Pr(c);case"yy":return Pr(d,Jce);case"yyyy":return Pr(s);case"yyyyy":return Pr(p);case"yyyyyy":return Pr(o);case"M":return Pr(a);case"MM":return Pr(n);case"MMM":return od(e.months("short",!0),1);case"MMMM":return od(e.months("long",!0),1);case"L":return Pr(a);case"LL":return Pr(n);case"LLL":return od(e.months("short",!1),1);case"LLLL":return od(e.months("long",!1),1);case"d":return Pr(a);case"dd":return Pr(n);case"o":return Pr(u);case"ooo":return Pr(i);case"HH":return Pr(n);case"H":return Pr(a);case"hh":return Pr(n);case"h":return Pr(a);case"mm":return Pr(n);case"m":return Pr(a);case"q":return Pr(a);case"qq":return Pr(n);case"s":return Pr(a);case"ss":return Pr(n);case"S":return Pr(u);case"SSS":return Pr(i);case"u":return nq(l);case"uu":return nq(a);case"uuu":return Pr(r);case"a":return od(e.meridiems(),0);case"kkkk":return Pr(s);case"kk":return Pr(d,Jce);case"W":return Pr(a);case"WW":return Pr(n);case"E":case"c":return Pr(r);case"EEE":return od(e.weekdays("short",!1),1);case"EEEE":return od(e.weekdays("long",!1),1);case"ccc":return od(e.weekdays("short",!0),1);case"cccc":return od(e.weekdays("long",!0),1);case"Z":case"ZZ":return KQe(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return KQe(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return nq(/[a-z_+-/]{1,256}?/i);case" ":return nq(/[^\S\n\r]/);default:return f(_)}})(t)||{invalidReason:x1r};return g.token=t,g}var M1r={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function P1r(t,e,r){let{type:n,value:i}=t;if(n==="literal"){let u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}let s=e[n],o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=M1r[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function N1r(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function F1r(t,e,r){let n=t.match(e);if(n){let i={},s=1;for(let o in r)if(O4(r,o)){let a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}else return[n,{}]}function B1r(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return At(t.z)||(r=t1.create(t.z)),At(t.Z)||(r||(r=new Pu(t.Z)),n=t.Z),At(t.q)||(t.M=(t.q-1)*3+1),At(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),At(t.u)||(t.S=ele(t.u)),[Object.keys(t).reduce((s,o)=>{let a=e(o);return a&&(s[a]=t[o]),s},{}),r,n]}var Ice=null;function q1r(){return Ice||(Ice=Ln.fromMillis(1555555555555)),Ice}function L1r(t,e){if(t.literal)return t;let r=Du.macroTokenToFormatOpts(t.val),n=HXe(r,e);return n==null||n.includes(void 0)?t:n}function VXe(t,e){return Array.prototype.concat(...t.map(r=>L1r(r,e)))}var mq=class{constructor(e,r){if(this.locale=e,this.format=r,this.tokens=VXe(Du.parseFormat(r),e),this.units=this.tokens.map(n=>k1r(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){let[n,i]=N1r(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){let[r,n]=F1r(e,this.regex,this.handlers),[i,s,o]=n?B1r(n):[null,null,void 0];if(O4(n,"a")&&O4(n,"H"))throw new Mm("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function GXe(t,e,r){return new mq(t,r).explainFromTokens(e)}function j1r(t,e,r){let{result:n,zone:i,specificOffset:s,invalidReason:o}=GXe(t,e,r);return[n,i,s,o]}function HXe(t,e){if(!t)return null;let n=Du.create(e,t).dtFormatter(q1r()),i=n.formatToParts(),s=n.resolvedOptions();return i.map(o=>P1r(o,t,s))}var Rce="Invalid DateTime",UQe=864e13;function c8(t){return new ku("unsupported zone",`the zone "${t.name}" is not supported`)}function Dce(t){return t.weekData===null&&(t.weekData=pq(t.c)),t.weekData}function kce(t){return t.localWeekData===null&&(t.localWeekData=pq(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function d2(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Ln({...r,...e,old:r})}function zXe(t,e,r){let n=t-e*60*1e3,i=r.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;let s=r.offset(n);return i===s?[n,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function iq(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function oq(t,e,r){return zXe(gq(t),e,r)}function VQe(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:i,day:Math.min(t.c.day,fq(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=as.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=gq(s),[u,c]=zXe(a,r,t.zone);return o!==0&&(u+=o,c=t.zone.offset(u)),{ts:u,o:c}}function A4(t,e,r,n,i,s){let{setZone:o,zone:a}=r;if(t&&Object.keys(t).length!==0||e){let u=e||a,c=Ln.fromObject(t,{...r,zone:u,specificOffset:s});return o?c:c.setZone(a)}else return Ln.invalid(new ku("unparsable",`the input "${i}" can't be parsed as ${n}`))}function sq(t,e,r=!0){return t.isValid?Du.create(un.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Mce(t,e,r){let n=t.c.year>9999||t.c.year<0,i="";if(n&&t.c.year>=0&&(i+="+"),i+=ji(t.c.year,n?6:4),r==="year")return i;if(e){if(i+="-",i+=ji(t.c.month),r==="month")return i;i+="-"}else if(i+=ji(t.c.month),r==="month")return i;return i+=ji(t.c.day),i}function GQe(t,e,r,n,i,s,o){let a=!r||t.c.millisecond!==0||t.c.second!==0,u="";switch(o){case"day":case"month":case"year":break;default:if(u+=ji(t.c.hour),o==="hour")break;if(e){if(u+=":",u+=ji(t.c.minute),o==="minute")break;a&&(u+=":",u+=ji(t.c.second))}else{if(u+=ji(t.c.minute),o==="minute")break;a&&(u+=ji(t.c.second))}if(o==="second")break;a&&(!n||t.c.millisecond!==0)&&(u+=".",u+=ji(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!s?u+="Z":t.o<0?(u+="-",u+=ji(Math.trunc(-t.o/60)),u+=":",u+=ji(Math.trunc(-t.o%60))):(u+="+",u+=ji(Math.trunc(t.o/60)),u+=":",u+=ji(Math.trunc(t.o%60)))),s&&(u+="["+t.zone.ianaName+"]"),u}var WXe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},$1r={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},K1r={ordinal:1,hour:0,minute:0,second:0,millisecond:0},aq=["year","month","day","hour","minute","second","millisecond"],U1r=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],V1r=["year","ordinal","hour","minute","second","millisecond"];function uq(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new cq(t);return e}function HQe(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return uq(t)}}function G1r(t){if(l8===void 0&&(l8=Dn.now()),t.type!=="iana")return t.offset(l8);let e=t.name,r=Yce.get(e);return r===void 0&&(r=t.offset(l8),Yce.set(e,r)),r}function zQe(t,e){let r=km(e.zone,Dn.defaultZone);if(!r.isValid)return Ln.invalid(c8(r));let n=un.fromObject(e),i,s;if(At(t.year))i=Dn.now();else{for(let u of aq)At(t[u])&&(t[u]=WXe[u]);let o=vXe(t)||SXe(t);if(o)return Ln.invalid(o);let a=G1r(r);[i,s]=oq(t,a,r)}return new Ln({ts:i,zone:r,loc:n,o:s})}function WQe(t,e,r){let n=At(r.round)?!0:r.round,i=At(r.rounding)?"trunc":r.rounding,s=(a,u)=>(a=tle(a,n||r.calendary?0:2,r.calendary?"round":i),e.loc.clone(r).relFormatter(r).format(a,u)),o=a=>r.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(r.unit)return s(o(r.unit),r.unit);for(let a of r.units){let u=o(a);if(Math.abs(u)>=1)return s(u,a)}return s(t>e?-0:0,r.units[r.units.length-1])}function JQe(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var l8,Yce=new Map,Ln=class t{constructor(e){let r=e.zone||Dn.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new ku("invalid input"):null)||(r.isValid?null:c8(r));this.ts=At(e.ts)?Dn.now():e.ts;let i=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,s]=[e.old.c,e.old.o];else{let a=Pm(e.o)&&!e.old?e.o:r.offset(this.ts);i=iq(this.ts,a),n=Number.isNaN(i.year)?new ku("invalid input"):null,i=n?null:i,s=n?null:a}this._zone=r,this.loc=e.loc||un.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,r]=JQe(arguments),[n,i,s,o,a,u,c]=r;return zQe({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static utc(){let[e,r]=JQe(arguments),[n,i,s,o,a,u,c]=r;return e.zone=Pu.utcInstance,zQe({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static fromJSDate(e,r={}){let n=wfr(e)?e.valueOf():NaN;if(Number.isNaN(n))return t.invalid("invalid input");let i=km(r.zone,Dn.defaultZone);return i.isValid?new t({ts:n,zone:i,loc:un.fromObject(r)}):t.invalid(c8(i))}static fromMillis(e,r={}){if(Pm(e))return e<-UQe||e>UQe?t.invalid("Timestamp out of range"):new t({ts:e,zone:km(r.zone,Dn.defaultZone),loc:un.fromObject(r)});throw new xs(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Pm(e))return new t({ts:e*1e3,zone:km(r.zone,Dn.defaultZone),loc:un.fromObject(r)});throw new xs("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=km(r.zone,Dn.defaultZone);if(!n.isValid)return t.invalid(c8(n));let i=un.fromObject(r),s=hq(e,HQe),{minDaysInFirstWeek:o,startOfWeek:a}=kQe(s,i),u=Dn.now(),c=At(r.specificOffset)?n.offset(u):r.specificOffset,l=!At(s.ordinal),d=!At(s.year),p=!At(s.month)||!At(s.day),f=d||p,h=s.weekYear||s.weekNumber;if((f||l)&&h)throw new Mm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&l)throw new Mm("Can't mix ordinal dates with month/day");let g=h||s.weekday&&!f,_,S,w=iq(u,c);g?(_=U1r,S=$1r,w=pq(w,o,a)):l?(_=V1r,S=K1r,w=xce(w)):(_=aq,S=WXe);let C=!1;for(let F of _){let B=s[F];At(B)?C?s[F]=S[F]:s[F]=w[F]:C=!0}let A=g?_fr(s,o,a):l?vfr(s):vXe(s),O=A||SXe(s);if(O)return t.invalid(O);let x=g?RQe(s,o,a):l?DQe(s):s,[R,M]=oq(x,c,n),I=new t({ts:R,zone:n,o:M,loc:i});return s.weekday&&f&&e.weekday!==I.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${I.toISO()}`):I.isValid?I:t.invalid(I.invalid)}static fromISO(e,r={}){let[n,i]=p1r(e);return A4(n,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,i]=f1r(e);return A4(n,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,i]=h1r(e);return A4(n,i,r,"HTTP",r)}static fromFormat(e,r,n={}){if(At(e)||At(r))throw new xs("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=n,o=un.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,c,l]=j1r(o,e,r);return l?t.invalid(l):A4(a,u,n,`format ${r}`,e,c)}static fromString(e,r,n={}){return t.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,i]=v1r(e);return A4(n,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new xs("need to specify a reason the DateTime is invalid");let n=e instanceof ku?e:new ku(e,r);if(Dn.throwOnInvalid)throw new Pce(n);return new t({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){let n=HXe(e,un.fromObject(r));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(e,r={}){return VXe(Du.parseFormat(e),un.fromObject(r)).map(i=>i.val).join("")}static resetCache(){l8=void 0,Yce.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Dce(this).weekYear:NaN}get weekNumber(){return this.isValid?Dce(this).weekNumber:NaN}get weekday(){return this.isValid?Dce(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?kce(this).weekday:NaN}get localWeekNumber(){return this.isValid?kce(this).weekNumber:NaN}get localWeekYear(){return this.isValid?kce(this).weekYear:NaN}get ordinal(){return this.isValid?xce(this.c).ordinal:NaN}get monthShort(){return this.isValid?f2.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?f2.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?f2.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?f2.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,r=6e4,n=gq(this.c),i=this.zone.offset(n-e),s=this.zone.offset(n+e),o=this.zone.offset(n-i*r),a=this.zone.offset(n-s*r);if(o===a)return[this];let u=n-o*r,c=n-a*r,l=iq(u,o),d=iq(c,a);return l.hour===d.hour&&l.minute===d.minute&&l.second===d.second&&l.millisecond===d.millisecond?[d2(this,{ts:u}),d2(this,{ts:c})]:[this]}get isInLeapYear(){return h8(this.year)}get daysInMonth(){return fq(this.year,this.month)}get daysInYear(){return this.isValid?C4(this.year):NaN}get weeksInWeekYear(){return this.isValid?f8(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?f8(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:i}=Du.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(Pu.instance(e),r)}toLocal(){return this.setZone(Dn.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=km(e,Dn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||n){let s=e.offset(this.ts),o=this.toObject();[i]=oq(o,s,e)}return d2(this,{ts:i,zone:e})}else return t.invalid(c8(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return d2(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=hq(e,HQe),{minDaysInFirstWeek:n,startOfWeek:i}=kQe(r,this.loc),s=!At(r.weekYear)||!At(r.weekNumber)||!At(r.weekday),o=!At(r.ordinal),a=!At(r.year),u=!At(r.month)||!At(r.day),c=a||u,l=r.weekYear||r.weekNumber;if((c||o)&&l)throw new Mm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new Mm("Can't mix ordinal dates with month/day");let d;s?d=RQe({...pq(this.c,n,i),...r},n,i):At(r.ordinal)?(d={...this.toObject(),...r},At(r.day)&&(d.day=Math.min(fq(d.year,d.month),d.day))):d=DQe({...xce(this.c),...r});let[p,f]=oq(d,this.o,this.zone);return d2(this,{ts:p,o:f})}plus(e){if(!this.isValid)return this;let r=as.fromDurationLike(e);return d2(this,VQe(this,r))}minus(e){if(!this.isValid)return this;let r=as.fromDurationLike(e).negate();return d2(this,VQe(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;let n={},i=as.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(r){let s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(n.weekNumber=this.weekNumber-1),n.weekday=s}else n.weekday=1;if(i==="quarters"){let s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?Du.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):Rce}toLocaleString(e=lq,r={}){return this.isValid?Du.create(this.loc.clone(r),e).formatDateTime(this):Rce}toLocaleParts(e={}){return this.isValid?Du.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=uq(o);let a=e==="extended",u=Mce(this,a,o);return aq.indexOf(o)>=3&&(u+="T"),u+=GQe(this,a,r,n,i,s,o),u}toISODate({format:e="extended",precision:r="day"}={}){return this.isValid?Mce(this,e==="extended",uq(r)):null}toISOWeekDate(){return sq(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=uq(a),(i&&aq.indexOf(a)>=3?"T":"")+GQe(this,o==="extended",r,e,n,s,a)):null}toRFC2822(){return sq(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return sq(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Mce(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(n&&(i+=" "),r?i+="z":e&&(i+="ZZ")),sq(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Rce}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return as.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=Afr(r).map(as.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,c=O1r(a,u,s,i);return o?c.negate():c}diffNow(e="milliseconds",r={}){return this.diff(t.now(),e,r)}until(e){return this.isValid?h2.fromDateTimes(this,e):this}hasSame(e,r,n){if(!this.isValid)return!1;let i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(r,n)<=i&&i<=s.endOf(r,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||t.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),WQe(r,this.plus(n),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?WQe(e.base||t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(t.isDateTime))throw new xs("min requires all arguments be DateTimes");return MQe(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new xs("max requires all arguments be DateTimes");return MQe(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:i=null,numberingSystem:s=null}=n,o=un.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return GXe(o,e,r)}static fromStringExplain(e,r,n={}){return t.fromFormatExplain(e,r,n)}static buildFormatParser(e,r={}){let{locale:n=null,numberingSystem:i=null}=r,s=un.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new mq(s,e)}static fromFormatParser(e,r,n={}){if(At(e)||At(r))throw new xs("fromFormatParser requires an input string and a format parser");let{locale:i=null,numberingSystem:s=null}=n,o=un.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(r.locale))throw new xs(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);let{result:a,zone:u,specificOffset:c,invalidReason:l}=r.explainFromTokens(e);return l?t.invalid(l):A4(a,u,n,`format ${r.format}`,e,c)}static get DATE_SHORT(){return lq}static get DATE_MED(){return YQe}static get DATE_MED_WITH_WEEKDAY(){return tfr}static get DATE_FULL(){return QQe}static get DATE_HUGE(){return XQe}static get TIME_SIMPLE(){return ZQe}static get TIME_WITH_SECONDS(){return eXe}static get TIME_WITH_SHORT_OFFSET(){return tXe}static get TIME_WITH_LONG_OFFSET(){return rXe}static get TIME_24_SIMPLE(){return nXe}static get TIME_24_WITH_SECONDS(){return iXe}static get TIME_24_WITH_SHORT_OFFSET(){return sXe}static get TIME_24_WITH_LONG_OFFSET(){return oXe}static get DATETIME_SHORT(){return aXe}static get DATETIME_SHORT_WITH_SECONDS(){return uXe}static get DATETIME_MED(){return cXe}static get DATETIME_MED_WITH_SECONDS(){return lXe}static get DATETIME_MED_WITH_WEEKDAY(){return rfr}static get DATETIME_FULL(){return dXe}static get DATETIME_FULL_WITH_SECONDS(){return pXe}static get DATETIME_HUGE(){return fXe}static get DATETIME_HUGE_WITH_SECONDS(){return hXe}};function a8(t){if(Ln.isDateTime(t))return t;if(t&&t.valueOf&&Pm(t.valueOf()))return Ln.fromJSDate(t);if(t&&typeof t=="object")return Ln.fromObject(t);throw new xs(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var H1r="3.7.2";Nu.DateTime=Ln;Nu.Duration=as;Nu.FixedOffsetZone=Pu;Nu.IANAZone=t1;Nu.Info=f2;Nu.Interval=h2;Nu.InvalidZone=dq;Nu.Settings=Dn;Nu.SystemZone=p8;Nu.VERSION=H1r;Nu.Zone=Nm});var QXe=m((jFr,YXe)=>{"use strict";var m2=JXe();It.prototype.addYear=function(){this._date=this._date.plus({years:1})};It.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")};It.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")};It.prototype.addHour=function(){var t=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=t&&(this._date=this._date.plus({hours:1}))};It.prototype.addMinute=function(){var t=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<t&&(this._date=this._date.plus({hours:1}))};It.prototype.addSecond=function(){var t=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<t&&(this._date=this._date.plus({hours:1}))};It.prototype.subtractYear=function(){this._date=this._date.minus({years:1})};It.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")};It.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")};It.prototype.subtractHour=function(){var t=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=t&&(this._date=this._date.minus({hours:1}))};It.prototype.subtractMinute=function(){var t=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))};It.prototype.subtractSecond=function(){var t=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))};It.prototype.getDate=function(){return this._date.day};It.prototype.getFullYear=function(){return this._date.year};It.prototype.getDay=function(){var t=this._date.weekday;return t==7?0:t};It.prototype.getMonth=function(){return this._date.month-1};It.prototype.getHours=function(){return this._date.hour};It.prototype.getMinutes=function(){return this._date.minute};It.prototype.getSeconds=function(){return this._date.second};It.prototype.getMilliseconds=function(){return this._date.millisecond};It.prototype.getTime=function(){return this._date.valueOf()};It.prototype.getUTCDate=function(){return this._getUTC().day};It.prototype.getUTCFullYear=function(){return this._getUTC().year};It.prototype.getUTCDay=function(){var t=this._getUTC().weekday;return t==7?0:t};It.prototype.getUTCMonth=function(){return this._getUTC().month-1};It.prototype.getUTCHours=function(){return this._getUTC().hour};It.prototype.getUTCMinutes=function(){return this._getUTC().minute};It.prototype.getUTCSeconds=function(){return this._getUTC().second};It.prototype.toISOString=function(){return this._date.toUTC().toISO()};It.prototype.toJSON=function(){return this._date.toJSON()};It.prototype.setDate=function(t){this._date=this._date.set({day:t})};It.prototype.setFullYear=function(t){this._date=this._date.set({year:t})};It.prototype.setDay=function(t){this._date=this._date.set({weekday:t})};It.prototype.setMonth=function(t){this._date=this._date.set({month:t+1})};It.prototype.setHours=function(t){this._date=this._date.set({hour:t})};It.prototype.setMinutes=function(t){this._date=this._date.set({minute:t})};It.prototype.setSeconds=function(t){this._date=this._date.set({second:t})};It.prototype.setMilliseconds=function(t){this._date=this._date.set({millisecond:t})};It.prototype._getUTC=function(){return this._date.toUTC()};It.prototype.toString=function(){return this.toDate().toString()};It.prototype.toDate=function(){return this._date.toJSDate()};It.prototype.isLastDayOfMonth=function(){var t=this._date.plus({days:1}).startOf("day");return this._date.month!==t.month};It.prototype.isLastWeekdayOfMonth=function(){var t=this._date.plus({days:7}).startOf("day");return this._date.month!==t.month};function It(t,e){var r={zone:e};if(t?t instanceof It?this._date=t._date:t instanceof Date?this._date=m2.DateTime.fromJSDate(t,r):typeof t=="number"?this._date=m2.DateTime.fromMillis(t,r):typeof t=="string"&&(this._date=m2.DateTime.fromISO(t,r),this._date.isValid||(this._date=m2.DateTime.fromRFC2822(t,r)),this._date.isValid||(this._date=m2.DateTime.fromSQL(t,r)),this._date.isValid||(this._date=m2.DateTime.fromFormat(t,"EEE, d MMM yyyy HH:mm:ss",r))):this._date=m2.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(t));e&&e!==this._date.zoneName&&(this._date=this._date.setZone(e))}YXe.exports=It});var eZe=m(($Fr,ZXe)=>{"use strict";function y2(t){return{start:t,count:1}}function XXe(t,e){t.end=e,t.step=e-t.start,t.count=2}function sle(t,e,r){e&&(e.count===2?(t.push(y2(e.start)),t.push(y2(e.end))):t.push(e)),r&&t.push(r)}function z1r(t){for(var e=[],r=void 0,n=0;n<t.length;n++){var i=t[n];typeof i!="number"?(sle(e,r,y2(i)),r=void 0):r?r.count===1?XXe(r,i):r.step===i-r.end?(r.count++,r.end=i):r.count===2?(e.push(y2(r.start)),r=y2(r.end),XXe(r,i)):(sle(e,r),r=y2(i)):r=y2(i)}return sle(e,r),e}ZXe.exports=z1r});var rZe=m((KFr,tZe)=>{"use strict";var W1r=eZe();function J1r(t,e,r){var n=W1r(t);if(n.length===1){var i=n[0],s=i.step;if(s===1&&i.start===e&&i.end===r)return"*";if(s!==1&&i.start===e&&i.end===r-s+1)return"*/"+s}for(var o=[],a=0,u=n.length;a<u;++a){var c=n[a];if(c.count===1){o.push(c.start);continue}var s=c.step;if(c.step===1){o.push(c.start+"-"+c.end);continue}var l=c.start==0?c.count-1:c.count;c.step*l>c.end?o=o.concat(Array.from({length:c.end-c.start+1}).map(function(p,f){var h=c.start+f;return(h-c.start)%c.step===0?h:null}).filter(function(p){return p!=null})):c.end===r-c.step+1?o.push(c.start+"/"+c.step):o.push(c.start+"-"+c.end+"/"+c.step)}return o.join(",")}tZe.exports=J1r});var sZe=m((UFr,iZe)=>{"use strict";var g2=QXe(),Y1r=rZe(),nZe=1e4;function We(t,e){this._options=e,this._utc=e.utc||!1,this._tz=this._utc?"UTC":e.tz,this._currentDate=new g2(e.currentDate,this._tz),this._startDate=e.startDate?new g2(e.startDate,this._tz):null,this._endDate=e.endDate?new g2(e.endDate,this._tz):null,this._isIterator=e.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=e.nthDayOfWeek||0,this.fields=We._freezeFields(t)}We.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"];We.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"};We.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}];We.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31];We.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}};We.parseDefaults=["0","*","*","*","*","*"];We.standardValidCharacters=/^[,*\d/-]+$/;We.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/;We.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/;We.validCharacters={second:We.standardValidCharacters,minute:We.standardValidCharacters,hour:We.standardValidCharacters,dayOfMonth:We.dayOfMonthValidCharacters,month:We.standardValidCharacters,dayOfWeek:We.dayOfWeekValidCharacters};We._isValidConstraintChar=function(e,r){return typeof r!="string"?!1:e.chars.some(function(n){return r.indexOf(n)>-1})};We._parseField=function(e,r,n){switch(e){case"month":case"dayOfWeek":var i=We.aliases[e];r=r.replace(/[a-z]{3}/gi,function(u){if(u=u.toLowerCase(),typeof i[u]<"u")return i[u];throw new Error('Validation error, cannot resolve alias "'+u+'"')});break}if(!We.validCharacters[e].test(r))throw new Error("Invalid characters, got value: "+r);r.indexOf("*")!==-1?r=r.replace(/\*/g,n.min+"-"+n.max):r.indexOf("?")!==-1&&(r=r.replace(/\?/g,n.min+"-"+n.max));function s(u){var c=[];function l(h){if(h instanceof Array)for(var g=0,_=h.length;g<_;g++){var S=h[g];if(We._isValidConstraintChar(n,S)){c.push(S);continue}if(typeof S!="number"||Number.isNaN(S)||S<n.min||S>n.max)throw new Error("Constraint error, got value "+S+" expected range "+n.min+"-"+n.max);c.push(S)}else{if(We._isValidConstraintChar(n,h)){c.push(h);return}var w=+h;if(Number.isNaN(w)||w<n.min||w>n.max)throw new Error("Constraint error, got value "+h+" expected range "+n.min+"-"+n.max);e==="dayOfWeek"&&(w=w%7),c.push(w)}}var d=u.split(",");if(!d.every(function(h){return h.length>0}))throw new Error("Invalid list value format");if(d.length>1)for(var p=0,f=d.length;p<f;p++)l(o(d[p]));else l(o(u));return c.sort(We._sortCompareFn),c}function o(u){var c=1,l=u.split("/");if(l.length>2)throw new Error("Invalid repeat: "+u);return l.length>1?(l[0]==+l[0]&&(l=[l[0]+"-"+n.max,l[1]]),a(l[0],l[l.length-1])):a(u,c)}function a(u,c){var l=[],d=u.split("-");if(d.length>1){if(d.length<2)return+u;if(!d[0].length){if(!d[1].length)throw new Error("Invalid range: "+u);return+u}var p=+d[0],f=+d[1];if(Number.isNaN(p)||Number.isNaN(f)||p<n.min||f>n.max)throw new Error("Constraint error, got range "+p+"-"+f+" expected range "+n.min+"-"+n.max);if(p>f)throw new Error("Invalid range: "+u);var h=+c;if(Number.isNaN(h)||h<=0)throw new Error("Constraint error, cannot repeat at every "+h+" time.");e==="dayOfWeek"&&f%7===0&&l.push(0);for(var g=p,_=f;g<=_;g++){var S=l.indexOf(g)!==-1;!S&&h>0&&h%c===0?(h=1,l.push(g)):h++}return l}return Number.isNaN(+u)?u:+u}return s(r)};We._sortCompareFn=function(t,e){var r=typeof t=="number",n=typeof e=="number";return r&&n?t-e:!r&&n?1:r&&!n?-1:t.localeCompare(e)};We._handleMaxDaysInMonth=function(t){if(t.month.length===1){var e=We.daysInMonth[t.month[0]-1];if(t.dayOfMonth[0]>e)throw new Error("Invalid explicit day of month definition");return t.dayOfMonth.filter(function(r){return r==="L"?!0:r<=e}).sort(We._sortCompareFn)}};We._freezeFields=function(t){for(var e=0,r=We.map.length;e<r;++e){var n=We.map[e],i=t[n];t[n]=Object.freeze(i)}return Object.freeze(t)};We.prototype._applyTimezoneShift=function(t,e,r){if(r==="Month"||r==="Day"){var n=t.getTime();t[e+r]();var i=t.getTime();n===i&&(t.getMinutes()===0&&t.getSeconds()===0?t.addHour():t.getMinutes()===59&&t.getSeconds()===59&&t.subtractHour())}else{var s=t.getHours();t[e+r]();var o=t.getHours(),a=o-s;a===2?this.fields.hour.length!==24&&(this._dstStart=o):a===0&&t.getMinutes()===0&&t.getSeconds()===0&&this.fields.hour.length!==24&&(this._dstEnd=o)}};We.prototype._findSchedule=function(e){function r(S,w){for(var C=0,A=w.length;C<A;C++)if(w[C]>=S)return w[C]===S;return w[0]===S}function n(S,w){if(w<6){if(S.getDate()<8&&w===1)return!0;var C=S.getDate()%7?1:0,A=S.getDate()-S.getDate()%7,O=Math.floor(A/7)+C;return O===w}return!1}function i(S){return S.length>0&&S.some(function(w){return typeof w=="string"&&w.indexOf("L")>=0})}e=e||!1;var s=e?"subtract":"add",o=new g2(this._currentDate,this._tz),a=this._startDate,u=this._endDate,c=o.getTime(),l=0;function d(S){return S.some(function(w){if(!i([w]))return!1;var C=Number.parseInt(w[0])%7;if(Number.isNaN(C))throw new Error("Invalid last weekday of the month expression: "+w);return o.getDay()===C&&o.isLastWeekdayOfMonth()})}for(;l<nZe;){if(l++,e){if(a&&o.getTime()-a.getTime()<0)throw new Error("Out of the timespan range")}else if(u&&u.getTime()-o.getTime()<0)throw new Error("Out of the timespan range");var p=r(o.getDate(),this.fields.dayOfMonth);i(this.fields.dayOfMonth)&&(p=p||o.isLastDayOfMonth());var f=r(o.getDay(),this.fields.dayOfWeek);i(this.fields.dayOfWeek)&&(f=f||d(this.fields.dayOfWeek));var h=this.fields.dayOfMonth.length>=We.daysInMonth[o.getMonth()],g=this.fields.dayOfWeek.length===We.constraints[5].max-We.constraints[5].min+1,_=o.getHours();if(!p&&(!f||g)){this._applyTimezoneShift(o,s,"Day");continue}if(!h&&g&&!p){this._applyTimezoneShift(o,s,"Day");continue}if(h&&!g&&!f){this._applyTimezoneShift(o,s,"Day");continue}if(this._nthDayOfWeek>0&&!n(o,this._nthDayOfWeek)){this._applyTimezoneShift(o,s,"Day");continue}if(!r(o.getMonth()+1,this.fields.month)){this._applyTimezoneShift(o,s,"Month");continue}if(r(_,this.fields.hour)){if(this._dstEnd===_&&!e){this._dstEnd=null,this._applyTimezoneShift(o,"add","Hour");continue}}else if(this._dstStart!==_){this._dstStart=null,this._applyTimezoneShift(o,s,"Hour");continue}else if(!r(_-1,this.fields.hour)){o[s+"Hour"]();continue}if(!r(o.getMinutes(),this.fields.minute)){this._applyTimezoneShift(o,s,"Minute");continue}if(!r(o.getSeconds(),this.fields.second)){this._applyTimezoneShift(o,s,"Second");continue}if(c===o.getTime()){s==="add"||o.getMilliseconds()===0?this._applyTimezoneShift(o,s,"Second"):o.setMilliseconds(0);continue}break}if(l>=nZe)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new g2(o,this._tz),this._hasIterated=!0,o};We.prototype.next=function(){var e=this._findSchedule();return this._isIterator?{value:e,done:!this.hasNext()}:e};We.prototype.prev=function(){var e=this._findSchedule(!0);return this._isIterator?{value:e,done:!this.hasPrev()}:e};We.prototype.hasNext=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(),!0}catch{return!1}finally{this._currentDate=t,this._hasIterated=e}};We.prototype.hasPrev=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(!0),!0}catch{return!1}finally{this._currentDate=t,this._hasIterated=e}};We.prototype.iterate=function(e,r){var n=[];if(e>=0)for(var i=0,s=e;i<s;i++)try{var o=this.next();n.push(o),r&&r(o,i)}catch{break}else for(var i=0,s=e;i>s;i--)try{var o=this.prev();n.push(o),r&&r(o,i)}catch{break}return n};We.prototype.reset=function(e){this._currentDate=new g2(e||this._options.currentDate)};We.prototype.stringify=function(e){for(var r=[],n=e?0:1,i=We.map.length;n<i;++n){var s=We.map[n],o=this.fields[s],a=We.constraints[n];s==="dayOfMonth"&&this.fields.month.length===1?a={min:1,max:We.daysInMonth[this.fields.month[0]-1]}:s==="dayOfWeek"&&(a={min:0,max:6},o=o[o.length-1]===7?o.slice(0,-1):o),r.push(Y1r(o,a.min,a.max))}return r.join(" ")};We.parse=function(e,r){var n=this;typeof r=="function"&&(r={});function i(s,o){o||(o={}),typeof o.currentDate>"u"&&(o.currentDate=new g2(void 0,n._tz)),We.predefined[s]&&(s=We.predefined[s]);var a=[],u=(s+"").trim().split(/\s+/);if(u.length>6)throw new Error("Invalid cron expression");for(var c=We.map.length-u.length,l=0,d=We.map.length;l<d;++l){var p=We.map[l],f=u[u.length>d?l:l-c];if(l<c||!f)a.push(We._parseField(p,We.parseDefaults[l],We.constraints[l]));else{var h=p==="dayOfWeek"?w(f):f;a.push(We._parseField(p,h,We.constraints[l]))}}for(var g={},l=0,d=We.map.length;l<d;l++){var _=We.map[l];g[_]=a[l]}var S=We._handleMaxDaysInMonth(g);return g.dayOfMonth=S||g.dayOfMonth,new We(g,o);function w(C){var A=C.split("#");if(A.length>1){var O=+A[A.length-1];if(/,/.test(C))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(C))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(C))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(A.length>2||Number.isNaN(O)||O<1||O>5)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return o.nthDayOfWeek=O,A[0]}return C}}return i(e,r)};We.fieldsToExpression=function(e,r){function n(p,f,h){if(!f)throw new Error("Validation error, Field "+p+" is missing");if(f.length===0)throw new Error("Validation error, Field "+p+" contains no values");for(var g=0,_=f.length;g<_;g++){var S=f[g];if(!We._isValidConstraintChar(h,S)&&(typeof S!="number"||Number.isNaN(S)||S<h.min||S>h.max))throw new Error("Constraint error, got value "+S+" expected range "+h.min+"-"+h.max)}}for(var i={},s=0,o=We.map.length;s<o;++s){var a=We.map[s],u=e[a];n(a,u,We.constraints[s]);for(var c=[],l=-1;++l<u.length;)c[l]=u[l];if(u=c.sort(We._sortCompareFn).filter(function(p,f,h){return!f||p!==h[f-1]}),u.length!==c.length)throw new Error("Validation error, Field "+a+" contains duplicate values");i[a]=u}var d=We._handleMaxDaysInMonth(i);return i.dayOfMonth=d||i.dayOfMonth,new We(i,r||{})};iZe.exports=We});var ole=m((VFr,oZe)=>{"use strict";var _q=sZe();function Fm(){}Fm._parseEntry=function(e){var r=e.split(" ");if(r.length===6)return{interval:_q.parse(e)};if(r.length>6)return{interval:_q.parse(r.slice(0,6).join(" ")),command:r.slice(6,r.length)};throw new Error("Invalid entry: "+e)};Fm.parseExpression=function(e,r){return _q.parse(e,r)};Fm.fieldsToExpression=function(e,r){return _q.fieldsToExpression(e,r)};Fm.parseString=function(e){for(var r=e.split(`
`),n={variables:{},expressions:[],errors:{}},i=0,s=r.length;i<s;i++){var o=r[i],a=null,u=o.trim();if(u.length>0){if(u.match(/^#/))continue;if(a=u.match(/^(.*)=(.*)$/))n.variables[a[1]]=a[2];else{var c=null;try{c=Fm._parseEntry("0 "+u),n.expressions.push(c.interval)}catch(l){n.errors[u]=l}}}}return n};Fm.parseFile=function(e,r){require("fs").readFile(e,function(n,i){if(n){r(n);return}return r(null,Fm.parseString(i.toString()))})};oZe.exports=Fm});var Bm=m(vq=>{"use strict";Object.defineProperty(vq,"__esModule",{value:!0});vq.QueueBase=void 0;var Q1r=require("events"),g8=Uc(),X1r=eB(),Z1r=o8(),ehr=v4(),thr=rB(),ale=class extends Q1r.EventEmitter{constructor(e,r={connection:{}},n=Z1r.RedisConnection,i=!1){if(super(),this.name=e,this.opts=r,this.closed=!1,this.hasBlockingConnection=!1,this.hasBlockingConnection=i,this.opts=Object.assign({prefix:"bull"},r),!e)throw new Error("Queue name must be provided");if(e.includes(":"))throw new Error("Queue name cannot contain :");this.connection=new n(r.connection,{shared:(0,g8.isRedisInstance)(r.connection),blocking:i,skipVersionCheck:r.skipVersionCheck,skipWaitingForReady:r.skipWaitingForReady}),this.connection.on("error",o=>this.emit("error",o)),this.connection.on("close",()=>{this.closing||this.emit("ioredis:close")});let s=new thr.QueueKeys(r.prefix);this.qualifiedName=s.getQueueQualifiedName(e),this.keys=s.getKeys(e),this.toKey=o=>s.toKey(e,o),this.createScripts()}get client(){return this.connection.client}createScripts(){this.scripts=(0,X1r.createScripts)(this)}get redisVersion(){return this.connection.redisVersion}get Job(){return ehr.Job}emit(e,...r){try{return super.emit(e,...r)}catch(n){try{return super.emit("error",n)}catch(i){return console.error(i),!1}}}waitUntilReady(){return this.client}base64Name(){return Buffer.from(this.name).toString("base64")}clientName(e=""){let r=this.base64Name();return`${this.opts.prefix}:${r}${e}`}async close(){this.closing||(this.closing=this.connection.close()),await this.closing,this.closed=!0}disconnect(){return this.connection.disconnect()}async checkConnectionError(e,r=g8.DELAY_TIME_5){try{return await e()}catch(n){if((0,g8.isNotConnectionError)(n)&&this.emit("error",n),!this.closing&&r)await(0,g8.delay)(r);else return}}trace(e,r,n,i,s){return(0,g8.trace)(this.opts.telemetry,e,this.name,r,n,i,s)}};vq.QueueBase=ale});var wq=m(E2=>{"use strict";Object.defineProperty(E2,"__esModule",{value:!0});E2.defaultRepeatStrategy=E2.JobScheduler=void 0;var rhr=(ea(),Jt(Zo)),nhr=ole(),Sq=v4(),ihr=Bm(),E8=Tu(),shr=Uc(),ule=class extends ihr.QueueBase{constructor(e,r,n){super(e,r,n),this.repeatStrategy=r.settings&&r.settings.repeatStrategy||E2.defaultRepeatStrategy}async upsertJobScheduler(e,r,n,i,s,{override:o,producerId:a}){let{every:u,limit:c,pattern:l,offset:d}=r;if(l&&u)throw new Error("Both .pattern and .every options are defined for this repeatable job");if(!l&&!u)throw new Error("Either .pattern or .every options must be defined for this repeatable job");if(r.immediately&&r.startDate)throw new Error("Both .immediately and .startDate options are defined for this repeatable job");r.immediately&&r.every&&console.warn("Using option immediately with every does not affect the job's schedule. Job will run immediately anyway.");let p=r.count?r.count+1:1;if(typeof r.limit<"u"&&p>r.limit)return;let f=Date.now(),{endDate:h}=r;if(h&&f>new Date(h).getTime())return;let g=s.prevMillis||0;f=g<f?f:g;let{immediately:_}=r,S=rhr.__rest(r,["immediately"]),w,C=null;if(l&&(w=await this.repeatStrategy(f,r,n),w<f&&(w=f)),w||u)return this.trace(E8.SpanKind.PRODUCER,"add",`${this.name}.${n}`,async(A,O)=>{var x,R;let M=s.telemetry;if(O){let F=(x=s.telemetry)===null||x===void 0?void 0:x.omitContext,B=((R=s.telemetry)===null||R===void 0?void 0:R.metadata)||!F&&O;(B||F)&&(M={metadata:B,omitContext:F})}let I=this.getNextJobOpts(w,e,Object.assign(Object.assign({},s),{repeat:S,telemetry:M}),p,C);if(o){w<f&&(w=f);let[F,B]=await this.scripts.addJobScheduler(e,w,JSON.stringify(typeof i>"u"?{}:i),Sq.Job.optsAsJSON(s),{name:n,startDate:r.startDate?new Date(r.startDate).getTime():void 0,endDate:h?new Date(h).getTime():void 0,tz:r.tz,pattern:l,every:u,limit:c,offset:C},Sq.Job.optsAsJSON(I),a),U=typeof B=="string"?parseInt(B,10):B,k=new this.Job(this,n,i,Object.assign(Object.assign({},I),{delay:U}),F);return k.id=F,A?.setAttributes({[E8.TelemetryAttributes.JobSchedulerId]:e,[E8.TelemetryAttributes.JobId]:k.id}),k}else{let F=await this.scripts.updateJobSchedulerNextMillis(e,w,JSON.stringify(typeof i>"u"?{}:i),Sq.Job.optsAsJSON(I),a);if(F){let B=new this.Job(this,n,i,I,F);return B.id=F,A?.setAttributes({[E8.TelemetryAttributes.JobSchedulerId]:e,[E8.TelemetryAttributes.JobId]:B.id}),B}}})}getNextJobOpts(e,r,n,i,s){var o,a;let u=this.getSchedulerNextJobId({jobSchedulerId:r,nextMillis:e}),c=Date.now(),l=e+s-c,d=Object.assign(Object.assign({},n),{jobId:u,delay:l<0?0:l,timestamp:c,prevMillis:e,repeatJobKey:r});return d.repeat=Object.assign(Object.assign({},n.repeat),{offset:s,count:i,startDate:!((o=n.repeat)===null||o===void 0)&&o.startDate?new Date(n.repeat.startDate).getTime():void 0,endDate:!((a=n.repeat)===null||a===void 0)&&a.endDate?new Date(n.repeat.endDate).getTime():void 0}),d}async removeJobScheduler(e){return this.scripts.removeJobScheduler(e)}async getSchedulerData(e,r,n){let i=await e.hgetall(this.toKey("repeat:"+r));return this.transformSchedulerData(r,i,n)}transformSchedulerData(e,r,n){if(r){let i={key:e,name:r.name,next:n};return r.ic&&(i.iterationCount=parseInt(r.ic)),r.limit&&(i.limit=parseInt(r.limit)),r.startDate&&(i.startDate=parseInt(r.startDate)),r.endDate&&(i.endDate=parseInt(r.endDate)),r.tz&&(i.tz=r.tz),r.pattern&&(i.pattern=r.pattern),r.every&&(i.every=parseInt(r.every)),r.offset&&(i.offset=parseInt(r.offset)),(r.data||r.opts)&&(i.template=this.getTemplateFromJSON(r.data,r.opts)),i}if(e.includes(":"))return this.keyToData(e,n)}keyToData(e,r){let n=e.split(":"),i=n.slice(4).join(":")||null;return{key:e,name:n[0],id:n[1]||null,endDate:parseInt(n[2])||null,tz:n[3]||null,pattern:i,next:r}}async getScheduler(e){let[r,n]=await this.scripts.getJobScheduler(e);return this.transformSchedulerData(e,r?(0,shr.array2obj)(r):null,n?parseInt(n):null)}getTemplateFromJSON(e,r){let n={};return e&&(n.data=JSON.parse(e)),r&&(n.opts=Sq.Job.optsFromJSON(r)),n}async getJobSchedulers(e=0,r=-1,n=!1){let i=await this.client,s=this.keys.repeat,o=n?await i.zrange(s,e,r,"WITHSCORES"):await i.zrevrange(s,e,r,"WITHSCORES"),a=[];for(let u=0;u<o.length;u+=2)a.push(this.getSchedulerData(i,o[u],parseInt(o[u+1])));return Promise.all(a)}async getSchedulersCount(){let e=this.keys.repeat;return(await this.client).zcard(e)}getSchedulerNextJobId({nextMillis:e,jobSchedulerId:r}){return`repeat:${r}:${e}`}};E2.JobScheduler=ule;var ohr=(t,e)=>{let{pattern:r}=e,n=new Date(t),i=e.startDate&&new Date(e.startDate),s=i>n?i:n,o=(0,nhr.parseExpression)(r,Object.assign(Object.assign({},e),{currentDate:s}));try{return e.immediately?new Date().getTime():o.next().getTime()}catch{}};E2.defaultRepeatStrategy=ohr});var cle=m((zFr,aZe)=>{var{EventEmitter:ahr}=require("events"),Aq=class{constructor(){this.eventEmitter=new ahr,this.onabort=null,this.aborted=!1,this.reason=void 0}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(e,r){this.eventEmitter.removeListener(e,r)}addEventListener(e,r){this.eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[n]=="function"&&this[n](r),this.eventEmitter.emit(e,r)}throwIfAborted(){if(this.aborted)throw this.reason}static abort(e){let r=new b8;return r.abort(),r.signal}static timeout(e){let r=new b8;return setTimeout(()=>r.abort(new Error("TimeoutError")),e),r.signal}},b8=class{constructor(){this.signal=new Aq}abort(e){this.signal.aborted||(this.signal.aborted=!0,e?this.signal.reason=e:this.signal.reason=new Error("AbortError"),this.signal.dispatchEvent("abort"))}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}};aZe.exports={AbortController:b8,AbortSignal:Aq}});var dle=m(Tq=>{"use strict";Object.defineProperty(Tq,"__esModule",{value:!0});Tq.LockManager=void 0;var uhr=cle(),Cq=Tu(),lle=class{constructor(e,r){this.worker=e,this.opts=r,this.trackedJobs=new Map,this.closed=!1}start(){this.closed||this.opts.lockRenewTime>0&&this.startLockExtenderTimer()}async extendLocks(e){await this.worker.trace(Cq.SpanKind.INTERNAL,"extendLocks",this.worker.name,async r=>{r?.setAttributes({[Cq.TelemetryAttributes.WorkerId]:this.opts.workerId,[Cq.TelemetryAttributes.WorkerName]:this.opts.workerName,[Cq.TelemetryAttributes.WorkerJobsToExtendLocks]:e});try{let n=e.map(o=>{var a;return((a=this.trackedJobs.get(o))===null||a===void 0?void 0:a.token)||""}),i=await this.worker.extendJobLocks(e,n,this.opts.lockDuration);if(i.length>0){this.worker.emit("lockRenewalFailed",i);for(let o of i)this.worker.emit("error",new Error(`could not renew lock for job ${o}`))}let s=e.filter(o=>!i.includes(o));s.length>0&&this.worker.emit("locksRenewed",{count:s.length,jobIds:s})}catch(n){this.worker.emit("error",n)}})}startLockExtenderTimer(){clearTimeout(this.lockRenewalTimer),this.closed||(this.lockRenewalTimer=setTimeout(async()=>{let e=Date.now(),r=[];for(let n of this.trackedJobs.keys()){let i=this.trackedJobs.get(n),{ts:s,token:o,abortController:a}=i;if(!s){this.trackedJobs.set(n,{token:o,ts:e,abortController:a});continue}s+this.opts.lockRenewTime/2<e&&(this.trackedJobs.set(n,{token:o,ts:e,abortController:a}),r.push(n))}r.length&&await this.extendLocks(r),this.startLockExtenderTimer()},this.opts.lockRenewTime/2))}async close(){this.closed||(this.closed=!0,this.lockRenewalTimer&&(clearTimeout(this.lockRenewalTimer),this.lockRenewalTimer=void 0),this.trackedJobs.clear())}trackJob(e,r,n,i=!1){let s=i?new uhr.AbortController:void 0;return!this.closed&&e&&this.trackedJobs.set(e,{token:r,ts:n,abortController:s}),s}untrackJob(e){this.trackedJobs.delete(e)}getActiveJobCount(){return this.trackedJobs.size}isRunning(){return!this.closed&&this.lockRenewalTimer!==void 0}cancelJob(e,r){let n=this.trackedJobs.get(e);return n?.abortController?(n.abortController.abort(r),!0):!1}cancelAllJobs(e){for(let r of this.trackedJobs.values())r.abortController&&r.abortController.abort(e)}getTrackedJobIds(){return Array.from(this.trackedJobs.keys())}};Tq.LockManager=lle});var cZe=m(xq=>{"use strict";Object.defineProperty(xq,"__esModule",{value:!0});xq.QueueEvents=void 0;var uZe=(ea(),Jt(Zo)),Oq=Uc(),chr=Bm(),ple=class extends chr.QueueBase{constructor(e,r={connection:{}},n){var{connection:i,autorun:s=!0}=r,o=uZe.__rest(r,["connection","autorun"]);super(e,Object.assign(Object.assign({},o),{connection:(0,Oq.isRedisInstance)(i)?i.duplicate():i}),n,!0),this.running=!1,this.blocking=!1,this.opts=Object.assign({blockingTimeout:1e4},this.opts),s&&this.run().catch(a=>this.emit("error",a))}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}async run(){if(this.running)throw new Error("Queue Events is already running.");try{this.running=!0;let e=await this.client;try{await e.client("SETNAME",this.clientName(Oq.QUEUE_EVENT_SUFFIX))}catch(r){if(!Oq.clientCommandMessageReg.test(r.message))throw r}await this.consumeEvents(e)}catch(e){throw this.running=!1,e}}async consumeEvents(e){let r=this.opts,n=this.keys.events,i=r.lastEventId||"$";for(;!this.closing;){this.blocking=!0;let s=await this.checkConnectionError(()=>e.xread("BLOCK",r.blockingTimeout,"STREAMS",n,i));if(this.blocking=!1,s){let a=s[0][1];for(let u=0;u<a.length;u++){i=a[u][0];let c=(0,Oq.array2obj)(a[u][1]);switch(c.event){case"progress":c.data=JSON.parse(c.data);break;case"completed":c.returnvalue=JSON.parse(c.returnvalue);break}let{event:l}=c,d=uZe.__rest(c,["event"]);l==="drained"?this.emit(l,i):(this.emit(l,d,i),d.jobId&&this.emit(`${l}:${d.jobId}`,d,i))}}}}async close(){return this.closing||(this.closing=(async()=>{try{(await this.client).disconnect(),await this.connection.close(this.blocking)}finally{this.closed=!0}})()),this.closing}};xq.QueueEvents=ple});var lZe=m(Iq=>{"use strict";Object.defineProperty(Iq,"__esModule",{value:!0});Iq.QueueEventsProducer=void 0;var lhr=(ea(),Jt(Zo)),dhr=Bm(),fle=class extends dhr.QueueBase{constructor(e,r={connection:{}},n){super(e,Object.assign({blockingConnection:!1},r),n),this.opts=r}async publishEvent(e,r=1e3){let n=await this.client,i=this.keys.events,{eventName:s}=e,o=lhr.__rest(e,["eventName"]),a=["MAXLEN","~",r,"*","event",s];for(let[u,c]of Object.entries(o))a.push(u,c);await n.xadd(i,...a)}async close(){this.closing||(this.closing=this.connection.close()),await this.closing}};Iq.QueueEventsProducer=fle});var mle=m(Rq=>{"use strict";Object.defineProperty(Rq,"__esModule",{value:!0});Rq.QueueGetters=void 0;var phr=(ea(),Jt(Zo)),fhr=Bm(),dZe=Uc(),hle=class extends fhr.QueueBase{getJob(e){return this.Job.fromId(this,e)}commandByType(e,r,n){return e.map(i=>{i=i==="waiting"?"wait":i;let s=this.toKey(i);switch(i){case"completed":case"failed":case"delayed":case"prioritized":case"repeat":case"waiting-children":return n(s,r?"zcard":"zrange");case"active":case"wait":case"paused":return n(s,r?"llen":"lrange")}})}sanitizeJobTypes(e){let r=typeof e=="string"?[e]:e;if(Array.isArray(r)&&r.length>0){let n=[...r];return n.indexOf("waiting")!==-1&&n.push("paused"),[...new Set(n)]}return["active","completed","delayed","failed","paused","prioritized","waiting","waiting-children"]}async count(){return await this.getJobCountByTypes("waiting","paused","delayed","prioritized","waiting-children")}async getRateLimitTtl(e){return this.scripts.getRateLimitTtl(e)}async getDebounceJobId(e){return(await this.client).get(`${this.keys.de}:${e}`)}async getDeduplicationJobId(e){return(await this.client).get(`${this.keys.de}:${e}`)}async getGlobalConcurrency(){let r=await(await this.client).hget(this.keys.meta,"concurrency");return r?Number(r):null}async getGlobalRateLimit(){let e=await this.client,[r,n]=await e.hmget(this.keys.meta,"max","duration");return r&&n?{max:Number(r),duration:Number(n)}:null}async getJobCountByTypes(...e){let r=await this.getJobCounts(...e);return Object.values(r).reduce((n,i)=>n+i,0)}async getJobCounts(...e){let r=this.sanitizeJobTypes(e),n=await this.scripts.getCounts(r),i={};return n.forEach((s,o)=>{i[r[o]]=s||0}),i}getJobState(e){return this.scripts.getState(e)}async getMeta(){let r=await(await this.client).hgetall(this.keys.meta),{concurrency:n,max:i,duration:s,paused:o,"opts.maxLenEvents":a}=r,c=phr.__rest(r,["concurrency","max","duration","paused","opts.maxLenEvents"]);return n&&(c.concurrency=Number(n)),a&&(c.maxLenEvents=Number(a)),i&&(c.max=Number(i)),s&&(c.duration=Number(s)),c.paused=o==="1",c}getCompletedCount(){return this.getJobCountByTypes("completed")}getFailedCount(){return this.getJobCountByTypes("failed")}getDelayedCount(){return this.getJobCountByTypes("delayed")}getActiveCount(){return this.getJobCountByTypes("active")}getPrioritizedCount(){return this.getJobCountByTypes("prioritized")}async getCountsPerPriority(e){let r=[...new Set(e)],n=await this.scripts.getCountsPerPriority(r),i={};return n.forEach((s,o)=>{i[`${r[o]}`]=s||0}),i}getWaitingCount(){return this.getJobCountByTypes("waiting")}getWaitingChildrenCount(){return this.getJobCountByTypes("waiting-children")}getWaiting(e=0,r=-1){return this.getJobs(["waiting"],e,r,!0)}getWaitingChildren(e=0,r=-1){return this.getJobs(["waiting-children"],e,r,!0)}getActive(e=0,r=-1){return this.getJobs(["active"],e,r,!0)}getDelayed(e=0,r=-1){return this.getJobs(["delayed"],e,r,!0)}getPrioritized(e=0,r=-1){return this.getJobs(["prioritized"],e,r,!0)}getCompleted(e=0,r=-1){return this.getJobs(["completed"],e,r,!1)}getFailed(e=0,r=-1){return this.getJobs(["failed"],e,r,!1)}async getDependencies(e,r,n,i){let s=this.toKey(r=="processed"?`${e}:processed`:`${e}:dependencies`),{items:o,total:a,jobs:u}=await this.scripts.paginate(s,{start:n,end:i,fetchJobs:!0});return{items:o,jobs:u,total:a}}async getRanges(e,r=0,n=1,i=!1){let s=[];this.commandByType(e,!1,(u,c)=>{switch(c){case"lrange":s.push("lrange");break;case"zrange":s.push("zrange");break}});let o=await this.scripts.getRanges(e,r,n,i),a=[];return o.forEach((u,c)=>{let l=u||[];i&&s[c]==="lrange"?a=a.concat(l.reverse()):a=a.concat(l)}),[...new Set(a)]}async getJobs(e,r=0,n=-1,i=!1){let s=this.sanitizeJobTypes(e),o=await this.getRanges(s,r,n,i);return Promise.all(o.map(a=>this.Job.fromId(this,a)))}async getJobLogs(e,r=0,n=-1,i=!0){let o=(await this.client).multi(),a=this.toKey(e+":logs");i?o.lrange(a,r,n):o.lrange(a,-(n+1),-(r+1)),o.llen(a);let u=await o.exec();return i||u[0][1].reverse(),{logs:u[0][1],count:u[1][1]}}async baseGetClients(e){let r=await this.client;try{let n=await r.client("LIST");return this.parseClientList(n,e)}catch(n){if(!dZe.clientCommandMessageReg.test(n.message))throw n;return[{name:"GCP does not support client list"}]}}getWorkers(){let e=`${this.clientName()}`,r=`${this.clientName()}:w:`,n=i=>i&&(i===e||i.startsWith(r));return this.baseGetClients(n)}async getWorkersCount(){return(await this.getWorkers()).length}async getQueueEvents(){let e=`${this.clientName()}${dZe.QUEUE_EVENT_SUFFIX}`;return this.baseGetClients(r=>r===e)}async getMetrics(e,r=0,n=-1){let[i,s,o]=await this.scripts.getMetrics(e,r,n);return{meta:{count:parseInt(i[0]||"0",10),prevTS:parseInt(i[1]||"0",10),prevCount:parseInt(i[2]||"0",10)},data:s.map(a=>+a||0),count:o}}parseClientList(e,r){let n=e.split(/\r?\n/),i=[];return n.forEach(s=>{let o={};s.split(" ").forEach(function(c){let l=c.indexOf("="),d=c.substring(0,l),p=c.substring(l+1);o[d]=p});let u=o.name;r(u)&&(o.name=this.name,o.rawname=u,i.push(o))}),i}async exportPrometheusMetrics(e){let r=await this.getJobCounts(),n=[];n.push("# HELP bullmq_job_count Number of jobs in the queue by state"),n.push("# TYPE bullmq_job_count gauge");let i=e?Object.keys(e).reduce((s,o)=>`${s}, ${o}="${e[o]}"`,""):"";for(let[s,o]of Object.entries(r))n.push(`bullmq_job_count{queue="${this.name}", state="${s}"${i}} ${o}`);return n.join(`
`)}};Rq.QueueGetters=hle});var Dq=m(b2=>{"use strict";Object.defineProperty(b2,"__esModule",{value:!0});b2.getNextMillis=b2.Repeat=void 0;var hhr=(ea(),Jt(Zo)),mhr=ole(),yhr=require("crypto"),ghr=Bm(),yle=class extends ghr.QueueBase{constructor(e,r,n){super(e,r,n),this.repeatStrategy=r.settings&&r.settings.repeatStrategy||b2.getNextMillis,this.repeatKeyHashAlgorithm=r.settings&&r.settings.repeatKeyHashAlgorithm||"md5"}async updateRepeatableJob(e,r,n,{override:i}){var s,o;let a=Object.assign({},n.repeat);(s=a.pattern)!==null&&s!==void 0||(a.pattern=a.cron),delete a.cron;let u=a.count?a.count+1:1;if(typeof a.limit<"u"&&u>a.limit)return;let c=Date.now(),{endDate:l}=a;if(l&&c>new Date(l).getTime())return;let d=n.prevMillis||0;c=d<c?c:d;let p=await this.repeatStrategy(c,a,e),{every:f,pattern:h}=a,g=!!((f||h)&&a.immediately),_=g&&f?c-p:void 0;if(p){!d&&n.jobId&&(a.jobId=n.jobId);let S=pZe(e,a),w=(o=n.repeat.key)!==null&&o!==void 0?o:this.hash(S),C;if(i)C=await this.scripts.addRepeatableJob(w,p,{name:e,endDate:l?new Date(l).getTime():void 0,tz:a.tz,pattern:h,every:f},S);else{let x=await this.client;C=await this.scripts.updateRepeatableJobMillis(x,w,p,S)}let{immediately:A}=a,O=hhr.__rest(a,["immediately"]);return this.createNextJob(e,p,C,Object.assign(Object.assign({},n),{repeat:Object.assign({offset:_},O)}),r,u,g)}}async createNextJob(e,r,n,i,s,o,a){let u=this.getRepeatJobKey(e,r,n,s),c=Date.now(),l=r+(i.repeat.offset?i.repeat.offset:0)-c,d=Object.assign(Object.assign({},i),{jobId:u,delay:l<0||a?0:l,timestamp:c,prevMillis:r,repeatJobKey:n});return d.repeat=Object.assign(Object.assign({},i.repeat),{count:o}),this.Job.create(this,e,s,d)}getRepeatJobKey(e,r,n,i){return n.split(":").length>2?this.getRepeatJobId({name:e,nextMillis:r,namespace:this.hash(n),jobId:i?.id}):this.getRepeatDelayedJobId({customKey:n,nextMillis:r})}async removeRepeatable(e,r,n){var i;let s=pZe(e,Object.assign(Object.assign({},r),{jobId:n})),o=(i=r.key)!==null&&i!==void 0?i:this.hash(s),a=this.getRepeatJobId({name:e,nextMillis:"",namespace:this.hash(s),jobId:n??r.jobId,key:r.key});return this.scripts.removeRepeatable(a,s,o)}async removeRepeatableByKey(e){let r=this.keyToData(e),n=this.getRepeatJobId({name:r.name,nextMillis:"",namespace:this.hash(e),jobId:r.id});return this.scripts.removeRepeatable(n,"",e)}async getRepeatableData(e,r,n){let i=await e.hgetall(this.toKey("repeat:"+r));return i?{key:r,name:i.name,endDate:parseInt(i.endDate)||null,tz:i.tz||null,pattern:i.pattern||null,every:i.every||null,next:n}:this.keyToData(r,n)}keyToData(e,r){let n=e.split(":"),i=n.slice(4).join(":")||null;return{key:e,name:n[0],id:n[1]||null,endDate:parseInt(n[2])||null,tz:n[3]||null,pattern:i,next:r}}async getRepeatableJobs(e=0,r=-1,n=!1){let i=await this.client,s=this.keys.repeat,o=n?await i.zrange(s,e,r,"WITHSCORES"):await i.zrevrange(s,e,r,"WITHSCORES"),a=[];for(let u=0;u<o.length;u+=2)a.push(this.getRepeatableData(i,o[u],parseInt(o[u+1])));return Promise.all(a)}async getRepeatableCount(){return(await this.client).zcard(this.toKey("repeat"))}hash(e){return(0,yhr.createHash)(this.repeatKeyHashAlgorithm).update(e).digest("hex")}getRepeatDelayedJobId({nextMillis:e,customKey:r}){return`repeat:${r}:${e}`}getRepeatJobId({name:e,nextMillis:r,namespace:n,jobId:i,key:s}){return`repeat:${s??this.hash(`${e}${i||""}${n}`)}:${r}`}};b2.Repeat=yle;function pZe(t,e){let r=e.endDate?new Date(e.endDate).getTime():"",n=e.tz||"",i=e.pattern,s=i||String(e.every)||"",o=e.jobId?e.jobId:"";return`${t}:${o}:${r}:${n}:${s}`}var Ehr=(t,e)=>{let r=e.pattern;if(r&&e.every)throw new Error("Both .pattern and .every options are defined for this repeatable job");if(e.every)return Math.floor(t/e.every)*e.every+(e.immediately?0:e.every);let n=e.startDate&&new Date(e.startDate)>new Date(t)?new Date(e.startDate):new Date(t),i=(0,mhr.parseExpression)(r,Object.assign(Object.assign({},e),{currentDate:n}));try{return e.immediately?new Date().getTime():i.next().getTime()}catch{}};b2.getNextMillis=Ehr});var fZe=m(kq=>{"use strict";Object.defineProperty(kq,"__esModule",{value:!0});kq.Queue=void 0;var bhr=MF(),_hr=v4(),vhr=mle(),Shr=Dq(),Ht=Tu(),whr=wq(),Ahr=XF(),gle=class extends vhr.QueueGetters{constructor(e,r,n){var i;super(e,Object.assign({},r),n),this.token=(0,bhr.v4)(),this.libName="bullmq",this.jobsOpts=(i=r?.defaultJobOptions)!==null&&i!==void 0?i:{},this.waitUntilReady().then(s=>{if(!this.closing&&!r?.skipMetasUpdate)return s.hmset(this.keys.meta,this.metaValues)}).catch(s=>{})}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}get defaultJobOptions(){return Object.assign({},this.jobsOpts)}get metaValues(){var e,r,n,i;return{"opts.maxLenEvents":(i=(n=(r=(e=this.opts)===null||e===void 0?void 0:e.streams)===null||r===void 0?void 0:r.events)===null||n===void 0?void 0:n.maxLen)!==null&&i!==void 0?i:1e4,version:`${this.libName}:${Ahr.version}`}}async getVersion(){return await(await this.client).hget(this.keys.meta,"version")}get repeat(){return new Promise(async e=>{this._repeat||(this._repeat=new Shr.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:await this.client})),this._repeat.on("error",r=>this.emit.bind(this,r))),e(this._repeat)})}get jobScheduler(){return new Promise(async e=>{this._jobScheduler||(this._jobScheduler=new whr.JobScheduler(this.name,Object.assign(Object.assign({},this.opts),{connection:await this.client})),this._jobScheduler.on("error",r=>this.emit.bind(this,r))),e(this._jobScheduler)})}async setGlobalConcurrency(e){return(await this.client).hset(this.keys.meta,"concurrency",e)}async setGlobalRateLimit(e,r){return(await this.client).hset(this.keys.meta,"max",e,"duration",r)}async removeGlobalConcurrency(){return(await this.client).hdel(this.keys.meta,"concurrency")}async removeGlobalRateLimit(){return(await this.client).hdel(this.keys.meta,"max","duration")}async add(e,r,n){return this.trace(Ht.SpanKind.PRODUCER,"add",`${this.name}.${e}`,async(i,s)=>{var o;if(s&&!(!((o=n?.telemetry)===null||o===void 0)&&o.omitContext)){let u={metadata:s};n=Object.assign(Object.assign({},n),{telemetry:u})}let a=await this.addJob(e,r,n);return i?.setAttributes({[Ht.TelemetryAttributes.JobName]:e,[Ht.TelemetryAttributes.JobId]:a.id}),a})}async addJob(e,r,n){if(n&&n.repeat){if(n.repeat.endDate&&+new Date(n.repeat.endDate)<Date.now())throw new Error("End date must be greater than current timestamp");return(await this.repeat).updateRepeatableJob(e,r,Object.assign(Object.assign({},this.jobsOpts),n),{override:!0})}else{let i=n?.jobId;if(i=="0"||i?.startsWith("0:"))throw new Error("JobId cannot be '0' or start with 0:");let s=await this.Job.create(this,e,r,Object.assign(Object.assign(Object.assign({},this.jobsOpts),n),{jobId:i}));return this.emit("waiting",s),s}}async addBulk(e){return this.trace(Ht.SpanKind.PRODUCER,"addBulk",this.name,async(r,n)=>(r&&r.setAttributes({[Ht.TelemetryAttributes.BulkNames]:e.map(i=>i.name),[Ht.TelemetryAttributes.BulkCount]:e.length}),await this.Job.createBulk(this,e.map(i=>{var s,o,a,u,c,l;let d=(s=i.opts)===null||s===void 0?void 0:s.telemetry;if(n){let p=(a=(o=i.opts)===null||o===void 0?void 0:o.telemetry)===null||a===void 0?void 0:a.omitContext,f=((c=(u=i.opts)===null||u===void 0?void 0:u.telemetry)===null||c===void 0?void 0:c.metadata)||!p&&n;(f||p)&&(d={metadata:f,omitContext:p})}return{name:i.name,data:i.data,opts:Object.assign(Object.assign(Object.assign({},this.jobsOpts),i.opts),{jobId:(l=i.opts)===null||l===void 0?void 0:l.jobId,telemetry:d})}}))))}async upsertJobScheduler(e,r,n){var i,s;if(r.endDate&&+new Date(r.endDate)<Date.now())throw new Error("End date must be greater than current timestamp");return(await this.jobScheduler).upsertJobScheduler(e,r,(i=n?.name)!==null&&i!==void 0?i:e,(s=n?.data)!==null&&s!==void 0?s:{},Object.assign(Object.assign({},this.jobsOpts),n?.opts),{override:!0})}async pause(){await this.trace(Ht.SpanKind.INTERNAL,"pause",this.name,async()=>{await this.scripts.pause(!0),this.emit("paused")})}async close(){await this.trace(Ht.SpanKind.INTERNAL,"close",this.name,async()=>{this.closing||this._repeat&&await this._repeat.close(),await super.close()})}async rateLimit(e){await this.trace(Ht.SpanKind.INTERNAL,"rateLimit",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueRateLimit]:e}),await this.client.then(n=>n.set(this.keys.limiter,Number.MAX_SAFE_INTEGER,"PX",e))})}async resume(){await this.trace(Ht.SpanKind.INTERNAL,"resume",this.name,async()=>{await this.scripts.pause(!1),this.emit("resumed")})}async isPaused(){return await(await this.client).hexists(this.keys.meta,"paused")===1}isMaxed(){return this.scripts.isMaxed()}async getRepeatableJobs(e,r,n){return(await this.repeat).getRepeatableJobs(e,r,n)}async getJobScheduler(e){return(await this.jobScheduler).getScheduler(e)}async getJobSchedulers(e,r,n){return(await this.jobScheduler).getJobSchedulers(e,r,n)}async getJobSchedulersCount(){return(await this.jobScheduler).getSchedulersCount()}async removeRepeatable(e,r,n){return this.trace(Ht.SpanKind.INTERNAL,"removeRepeatable",`${this.name}.${e}`,async i=>(i?.setAttributes({[Ht.TelemetryAttributes.JobName]:e,[Ht.TelemetryAttributes.JobId]:n}),!await(await this.repeat).removeRepeatable(e,r,n)))}async removeJobScheduler(e){return!await(await this.jobScheduler).removeJobScheduler(e)}async removeDebounceKey(e){return this.trace(Ht.SpanKind.INTERNAL,"removeDebounceKey",`${this.name}`,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.JobKey]:e}),await(await this.client).del(`${this.keys.de}:${e}`)))}async removeDeduplicationKey(e){return this.trace(Ht.SpanKind.INTERNAL,"removeDeduplicationKey",`${this.name}`,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.DeduplicationKey]:e}),(await this.client).del(`${this.keys.de}:${e}`)))}async removeRateLimitKey(){return(await this.client).del(this.keys.limiter)}async removeRepeatableByKey(e){return this.trace(Ht.SpanKind.INTERNAL,"removeRepeatableByKey",`${this.name}`,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.JobKey]:e}),!await(await this.repeat).removeRepeatableByKey(e)))}async remove(e,{removeChildren:r=!0}={}){return this.trace(Ht.SpanKind.INTERNAL,"remove",this.name,async n=>{n?.setAttributes({[Ht.TelemetryAttributes.JobId]:e,[Ht.TelemetryAttributes.JobOptions]:JSON.stringify({removeChildren:r})});let i=await this.scripts.remove(e,r);return i===1&&this.emit("removed",e),i})}async updateJobProgress(e,r){await this.trace(Ht.SpanKind.INTERNAL,"updateJobProgress",this.name,async n=>{n?.setAttributes({[Ht.TelemetryAttributes.JobId]:e,[Ht.TelemetryAttributes.JobProgress]:JSON.stringify(r)}),await this.scripts.updateProgress(e,r),this.emit("progress",e,r)})}async addJobLog(e,r,n){return _hr.Job.addJobLog(this,e,r,n)}async drain(e=!1){await this.trace(Ht.SpanKind.INTERNAL,"drain",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueDrainDelay]:e}),await this.scripts.drain(e)})}async clean(e,r,n="completed"){return this.trace(Ht.SpanKind.INTERNAL,"clean",this.name,async i=>{let s=r||1/0,o=Math.min(1e4,s),a=Date.now()-e,u=0,c=[],l=n==="waiting"?"wait":n;for(;u<s;){let d=await this.scripts.cleanJobsInSet(l,a,o);if(this.emit("cleaned",d,l),u+=d.length,c.push(...d),d.length<o)break}return i?.setAttributes({[Ht.TelemetryAttributes.QueueGrace]:e,[Ht.TelemetryAttributes.JobType]:n,[Ht.TelemetryAttributes.QueueCleanLimit]:s,[Ht.TelemetryAttributes.JobIds]:c}),c})}async obliterate(e){await this.trace(Ht.SpanKind.INTERNAL,"obliterate",this.name,async()=>{await this.pause();let r=0;do r=await this.scripts.obliterate(Object.assign({force:!1,count:1e3},e));while(r)})}async retryJobs(e={}){await this.trace(Ht.SpanKind.PRODUCER,"retryJobs",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueOptions]:JSON.stringify(e)});let n=0;do n=await this.scripts.retryJobs(e.state,e.count,e.timestamp);while(n)})}async promoteJobs(e={}){await this.trace(Ht.SpanKind.INTERNAL,"promoteJobs",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueOptions]:JSON.stringify(e)});let n=0;do n=await this.scripts.promoteJobs(e.count);while(n)})}async trimEvents(e){return this.trace(Ht.SpanKind.INTERNAL,"trimEvents",this.name,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.QueueEventMaxLength]:e}),await(await this.client).xtrim(this.keys.events,"MAXLEN","~",e)))}async removeDeprecatedPriorityKey(){return(await this.client).del(this.toKey("priority"))}};kq.Queue=gle});var ble=m(Ele=>{"use strict";Object.defineProperty(Ele,"__esModule",{value:!0});var ia=Tu(),Chr=(t,e)=>async function(n,i){let s,o,a;try{let u=new Promise((c,l)=>{(async()=>{try{a=(p,f)=>{l(new Error("Unexpected exit code: "+p+" signal: "+f))},s=await e.retain(t),s.on("exit",a),o=async p=>{var f,h,g,_,S;try{switch(p.cmd){case ia.ParentCommand.Completed:c(p.value);break;case ia.ParentCommand.Failed:case ia.ParentCommand.Error:{let w=new Error;Object.assign(w,p.value),l(w);break}case ia.ParentCommand.Progress:await n.updateProgress(p.value);break;case ia.ParentCommand.Log:await n.log(p.value);break;case ia.ParentCommand.MoveToDelayed:await n.moveToDelayed((f=p.value)===null||f===void 0?void 0:f.timestamp,(h=p.value)===null||h===void 0?void 0:h.token);break;case ia.ParentCommand.MoveToWait:await n.moveToWait((g=p.value)===null||g===void 0?void 0:g.token);break;case ia.ParentCommand.MoveToWaitingChildren:{let w=await n.moveToWaitingChildren((_=p.value)===null||_===void 0?void 0:_.token,(S=p.value)===null||S===void 0?void 0:S.opts);s.send({requestId:p.requestId,cmd:ia.ChildCommand.MoveToWaitingChildrenResponse,value:w})}break;case ia.ParentCommand.Update:await n.updateData(p.value);break;case ia.ParentCommand.GetChildrenValues:{let w=await n.getChildrenValues();s.send({requestId:p.requestId,cmd:ia.ChildCommand.GetChildrenValuesResponse,value:w})}break;case ia.ParentCommand.GetIgnoredChildrenFailures:{let w=await n.getIgnoredChildrenFailures();s.send({requestId:p.requestId,cmd:ia.ChildCommand.GetIgnoredChildrenFailuresResponse,value:w})}break}}catch(w){l(w)}},s.on("message",o),s.send({cmd:ia.ChildCommand.Start,job:n.asJSONSandbox(),token:i})}catch(p){l(p)}})()});return await u,u}finally{s&&(s.off("message",o),s.off("exit",a),s.exitCode===null&&s.signalCode===null&&e.release(s))}};Ele.default=Chr});var mZe=m((Pq,hZe)=>{"use strict";Object.defineProperty(Pq,"__esModule",{value:!0});Pq.Worker=void 0;var Mq=require("fs"),Thr=require("url"),_8=require("path"),Ohr=MF(),xhr=cle(),v8=Uc(),Ihr=Bm(),Rhr=Dq(),Dhr=Yae(),khr=o8(),Mhr=ble(),Phr=Uae(),k4=IF(),Zt=Tu(),Nhr=wq(),Fhr=dle(),Bhr=10,_le=class extends Ihr.QueueBase{static RateLimitError(){return new k4.RateLimitError}constructor(e,r,n,i){if(super(e,Object.assign(Object.assign({drainDelay:5,concurrency:1,lockDuration:3e4,maximumRateLimitDelay:3e4,maxStalledCount:1,stalledInterval:3e4,autorun:!0,runRetryDelay:15e3},n),{blockingConnection:!0}),i),this.abortDelayController=null,this.blockUntil=0,this.drained=!1,this.limitUntil=0,this.processorAcceptsSignal=!1,this.waiting=null,this.running=!1,this.mainLoopRunning=null,!n||!n.connection)throw new Error("Worker requires a connection");if(typeof this.opts.maxStalledCount!="number"||this.opts.maxStalledCount<0)throw new Error("maxStalledCount must be greater or equal than 0");if(typeof this.opts.maxStartedAttempts=="number"&&this.opts.maxStartedAttempts<0)throw new Error("maxStartedAttempts must be greater or equal than 0");if(typeof this.opts.stalledInterval!="number"||this.opts.stalledInterval<=0)throw new Error("stalledInterval must be greater than 0");if(typeof this.opts.drainDelay!="number"||this.opts.drainDelay<=0)throw new Error("drainDelay must be greater than 0");if(this.concurrency=this.opts.concurrency,this.opts.lockRenewTime=this.opts.lockRenewTime||this.opts.lockDuration/2,this.id=(0,Ohr.v4)(),this.createLockManager(),r){if(typeof r=="function")this.processFn=r,this.processorAcceptsSignal=r.length>=3;else{if(r instanceof Thr.URL){if(!Mq.existsSync(r))throw new Error(`URL ${r} does not exist in the local file system`);r=r.href}else{let d=r+([".js",".ts",".flow",".cjs",".mjs"].includes(_8.extname(r))?"":".js");if(!Mq.existsSync(d))throw new Error(`File ${d} does not exist`)}let o=_8.dirname(hZe.filename||__filename),a=_8.join(o,"main-worker.js"),u=_8.join(o,"main.js"),c=this.opts.useWorkerThreads?a:u;try{Mq.statSync(c)}catch{let d=this.opts.useWorkerThreads?"main-worker.js":"main.js";c=_8.join(process.cwd(),`dist/cjs/classes/${d}`),Mq.statSync(c)}this.childPool=new Dhr.ChildPool({mainFile:c,useWorkerThreads:this.opts.useWorkerThreads,workerForkOptions:this.opts.workerForkOptions,workerThreadsOptions:this.opts.workerThreadsOptions}),this.createSandbox(r)}this.opts.autorun&&this.run().catch(o=>this.emit("error",o))}let s=this.clientName()+(this.opts.name?`:w:${this.opts.name}`:"");this.blockingConnection=new khr.RedisConnection((0,v8.isRedisInstance)(n.connection)?n.connection.duplicate({connectionName:s}):Object.assign(Object.assign({},n.connection),{connectionName:s}),{shared:!1,blocking:!0,skipVersionCheck:n.skipVersionCheck}),this.blockingConnection.on("error",o=>this.emit("error",o)),this.blockingConnection.on("ready",()=>setTimeout(()=>this.emit("ready"),0))}createLockManager(){this.lockManager=new Fhr.LockManager(this,{lockRenewTime:this.opts.lockRenewTime,lockDuration:this.opts.lockDuration,workerId:this.id,workerName:this.opts.name})}createSandbox(e){this.processFn=(0,Mhr.default)(e,this.childPool).bind(this)}async extendJobLocks(e,r,n){return this.scripts.extendLocks(e,r,n)}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}callProcessJob(e,r,n){return this.processFn(e,r,n)}createJob(e,r){return this.Job.fromJSON(this,e,r)}async waitUntilReady(){return await super.waitUntilReady(),this.blockingConnection.client}cancelJob(e,r){return this.lockManager.cancelJob(e,r)}cancelAllJobs(e){this.lockManager.cancelAllJobs(e)}set concurrency(e){if(typeof e!="number"||e<1||!isFinite(e))throw new Error("concurrency must be a finite number greater than 0");this._concurrency=e}get concurrency(){return this._concurrency}get repeat(){return new Promise(async e=>{if(!this._repeat){let r=await this.client;this._repeat=new Rhr.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:r})),this._repeat.on("error",n=>this.emit.bind(this,n))}e(this._repeat)})}get jobScheduler(){return new Promise(async e=>{if(!this._jobScheduler){let r=await this.client;this._jobScheduler=new Nhr.JobScheduler(this.name,Object.assign(Object.assign({},this.opts),{connection:r})),this._jobScheduler.on("error",n=>this.emit.bind(this,n))}e(this._jobScheduler)})}async run(){if(!this.processFn)throw new Error("No process function is defined.");if(this.running)throw new Error("Worker is already running.");try{if(this.running=!0,this.closing||this.paused)return;await this.startStalledCheckTimer(),this.opts.skipLockRenewal||this.lockManager.start();let e=await this.client,r=await this.blockingConnection.client;this.mainLoopRunning=this.mainLoop(e,r),await this.mainLoopRunning}finally{this.running=!1}}async waitForRateLimit(){var e;let r=this.limitUntil;if(r>Date.now()){(e=this.abortDelayController)===null||e===void 0||e.abort(),this.abortDelayController=new xhr.AbortController;let n=this.getRateLimitDelay(r-Date.now());await this.delay(n,this.abortDelayController),this.drained=!1,this.limitUntil=0}}async mainLoop(e,r){let n=new Phr.AsyncFifoQueue,i=0;for(;!this.closing&&!this.paused||n.numTotal()>0;){for(;!this.closing&&!this.paused&&!this.waiting&&n.numTotal()<this._concurrency&&!this.isRateLimited();){let o=`${this.id}:${i++}`,a=this.retryIfFailed(()=>this._getNextJob(e,r,o,{block:!0}),{delayInMs:this.opts.runRetryDelay,onlyEmitError:!0});if(n.add(a),this.waiting&&n.numTotal()>1||!await a&&n.numTotal()>1||this.blockUntil)break}let s;do s=await n.fetch();while(!s&&n.numQueued()>0);if(s){let o=s.token;n.add(this.processJob(s,o,()=>n.numTotal()<=this._concurrency))}else n.numQueued()===0&&await this.waitForRateLimit()}}async getNextJob(e,{block:r=!0}={}){var n,i;let s=await this._getNextJob(await this.client,await this.blockingConnection.client,e,{block:r});return this.trace(Zt.SpanKind.INTERNAL,"getNextJob",this.name,async o=>(o?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.QueueName]:this.name,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerOptions]:JSON.stringify({block:r}),[Zt.TelemetryAttributes.JobId]:s?.id}),s),(i=(n=s?.opts)===null||n===void 0?void 0:n.telemetry)===null||i===void 0?void 0:i.metadata)}async _getNextJob(e,r,n,{block:i=!0}={}){if(!this.paused&&!this.closing){if(this.drained&&i&&!this.limitUntil&&!this.waiting){this.waiting=this.waitForJob(r,this.blockUntil);try{if(this.blockUntil=await this.waiting,this.blockUntil<=0||this.blockUntil-Date.now()<1)return await this.moveToActive(e,n,this.opts.name)}finally{this.waiting=null}}else if(!this.isRateLimited())return this.moveToActive(e,n,this.opts.name)}}async rateLimit(e){await this.trace(Zt.SpanKind.INTERNAL,"rateLimit",this.name,async r=>{r?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerRateLimit]:e}),await this.client.then(n=>n.set(this.keys.limiter,Number.MAX_SAFE_INTEGER,"PX",e))})}get minimumBlockTimeout(){return this.blockingConnection.capabilities.canBlockFor1Ms?.001:.002}isRateLimited(){return this.limitUntil>Date.now()}async moveToActive(e,r,n){let[i,s,o,a]=await this.scripts.moveToActive(e,r,n);return this.updateDelays(o,a),this.nextJobFromJobData(i,s,r)}async waitForJob(e,r){if(this.paused)return 1/0;let n;try{if(!this.closing&&!this.isRateLimited()){let i=this.getBlockTimeout(r);if(i>0){i=this.blockingConnection.capabilities.canDoubleTimeout?i:Math.ceil(i),n=setTimeout(async()=>{e.disconnect(!this.closing)},i*1e3+1e3),this.updateDelays();let s=await e.bzpopmin(this.keys.marker,i);if(s){let[o,a,u]=s;if(a){let c=parseInt(u);return r&&c>r?r:c}}}return 0}}catch(i){(0,v8.isNotConnectionError)(i)&&this.emit("error",i),this.closing||await this.delay()}finally{clearTimeout(n)}return 1/0}getBlockTimeout(e){let r=this.opts;if(e){let n=e-Date.now();return n<=0?n:n<this.minimumBlockTimeout*1e3?this.minimumBlockTimeout:Math.min(n/1e3,Bhr)}else return Math.max(r.drainDelay,this.minimumBlockTimeout)}getRateLimitDelay(e){return Math.min(e,this.opts.maximumRateLimitDelay)}async delay(e,r){await(0,v8.delay)(e||v8.DELAY_TIME_1,r)}updateDelays(e=0,r=0){let n=Math.max(e,0);n>0?this.limitUntil=Date.now()+n:this.limitUntil=0,this.blockUntil=Math.max(r,0)||0}async nextJobFromJobData(e,r,n){if(!e)this.drained||(this.emit("drained"),this.drained=!0);else{this.drained=!1;let i=this.createJob(e,r);i.token=n;try{await this.retryIfFailed(async()=>{i.repeatJobKey&&i.repeatJobKey.split(":").length<5?await(await this.jobScheduler).upsertJobScheduler(i.repeatJobKey,i.opts.repeat,i.name,i.data,i.opts,{override:!1,producerId:i.id}):i.opts.repeat&&await(await this.repeat).updateRepeatableJob(i.name,i.data,i.opts,{override:!1})},{delayInMs:this.opts.runRetryDelay})}catch(s){let o=s instanceof Error?s.message:String(s),a=new Error(`Failed to add repeatable job for next iteration: ${o}`);this.emit("error",a);return}return i}}async processJob(e,r,n=()=>!0){var i,s;let o=(s=(i=e.opts)===null||i===void 0?void 0:i.telemetry)===null||s===void 0?void 0:s.metadata;return this.trace(Zt.SpanKind.CONSUMER,"process",this.name,async a=>{a?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.JobId]:e.id,[Zt.TelemetryAttributes.JobName]:e.name}),this.emit("active",e,"waiting");let u=Date.now(),c=this.lockManager.trackJob(e.id,r,u,this.processorAcceptsSignal);try{let l=this.getUnrecoverableErrorMessage(e);if(l)return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleFailed(new k4.UnrecoverableError(l),e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a});let d=await this.callProcessJob(e,r,c?c.signal:void 0);return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleCompleted(d,e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a})}catch(l){return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleFailed(l,e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a,onlyEmitError:!0})}finally{this.lockManager.untrackJob(e.id),a?.setAttributes({[Zt.TelemetryAttributes.JobFinishedTimestamp]:Date.now(),[Zt.TelemetryAttributes.JobProcessedTimestamp]:u})}},o)}getUnrecoverableErrorMessage(e){if(e.deferredFailure)return e.deferredFailure;if(this.opts.maxStartedAttempts&&this.opts.maxStartedAttempts<e.attemptsStarted)return"job started more than allowable limit"}async handleCompleted(e,r,n,i=()=>!0,s){if(!this.connection.closing){let o=await r.moveToCompleted(e,n,i()&&!(this.closing||this.paused));if(this.emit("completed",r,e,"active"),s?.addEvent("job completed",{[Zt.TelemetryAttributes.JobResult]:JSON.stringify(e)}),s?.setAttributes({[Zt.TelemetryAttributes.JobAttemptsMade]:r.attemptsMade}),Array.isArray(o)){let[a,u,c,l]=o;return this.updateDelays(c,l),this.nextJobFromJobData(a,u,n)}}}async handleFailed(e,r,n,i=()=>!0,s){if(!this.connection.closing){if(e.message===k4.RATE_LIMIT_ERROR){let a=await this.moveLimitedBackToWait(r,n);this.limitUntil=a>0?Date.now()+a:0;return}if(e instanceof k4.DelayedError||e.name=="DelayedError"||e instanceof k4.WaitingError||e.name=="WaitingError"||e instanceof k4.WaitingChildrenError||e.name=="WaitingChildrenError"){let a=await this.client;return this.moveToActive(a,n,this.opts.name)}let o=await r.moveToFailed(e,n,i()&&!(this.closing||this.paused));if(this.emit("failed",r,e,"active"),s?.addEvent("job failed",{[Zt.TelemetryAttributes.JobFailedReason]:e.message}),s?.setAttributes({[Zt.TelemetryAttributes.JobAttemptsMade]:r.attemptsMade}),Array.isArray(o)){let[a,u,c,l]=o;return this.updateDelays(c,l),this.nextJobFromJobData(a,u,n)}}}async pause(e){await this.trace(Zt.SpanKind.INTERNAL,"pause",this.name,async r=>{var n;r?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerDoNotWaitActive]:e}),this.paused||(this.paused=!0,e||await this.whenCurrentJobsFinished(),(n=this.stalledCheckStopper)===null||n===void 0||n.call(this),this.emit("paused"))})}resume(){this.running||this.trace(Zt.SpanKind.INTERNAL,"resume",this.name,e=>{e?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name}),this.paused=!1,this.processFn&&this.run(),this.emit("resumed")})}isPaused(){return!!this.paused}isRunning(){return this.running}async close(e=!1){return this.closing?this.closing:(this.closing=(async()=>{await this.trace(Zt.SpanKind.INTERNAL,"close",this.name,async r=>{var n,i;r?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerForceClose]:e}),this.emit("closing","closing queue"),(n=this.abortDelayController)===null||n===void 0||n.abort();let s=[()=>e||this.whenCurrentJobsFinished(!1),()=>this.lockManager.close(),()=>{var o;return(o=this.childPool)===null||o===void 0?void 0:o.clean()},()=>this.blockingConnection.close(e),()=>this.connection.close(e)];for(let o of s)try{await o()}catch(a){this.emit("error",a)}(i=this.stalledCheckStopper)===null||i===void 0||i.call(this),this.closed=!0,this.emit("closed")})})(),await this.closing)}async startStalledCheckTimer(){this.opts.skipStalledCheck||this.closing||await this.trace(Zt.SpanKind.INTERNAL,"startStalledCheckTimer",this.name,async e=>{e?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name}),this.stalledChecker().catch(r=>{this.emit("error",r)})})}async stalledChecker(){for(;!(this.closing||this.paused);)await this.checkConnectionError(()=>this.moveStalledJobsToWait()),await new Promise(e=>{let r=setTimeout(e,this.opts.stalledInterval);this.stalledCheckStopper=()=>{clearTimeout(r),e()}})}async whenCurrentJobsFinished(e=!0){this.waiting?await this.blockingConnection.disconnect(e):e=!1,this.mainLoopRunning&&await this.mainLoopRunning,e&&await this.blockingConnection.reconnect()}async retryIfFailed(e,r){var n;let i=0,s=r.maxRetries||1/0;do try{return await e()}catch(o){if((n=r.span)===null||n===void 0||n.recordException(o.message),(0,v8.isNotConnectionError)(o)){if(!this.paused&&!this.closing&&this.emit("error",o),r.onlyEmitError)return;throw o}else if(r.delayInMs&&!this.closing&&!this.closed&&await this.delay(r.delayInMs,this.abortDelayController),i+1>=s)throw o}while(++i<s)}async moveStalledJobsToWait(){await this.trace(Zt.SpanKind.INTERNAL,"moveStalledJobsToWait",this.name,async e=>{let r=await this.scripts.moveStalledJobsToWait();e?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerStalledJobs]:r}),r.forEach(n=>{e?.addEvent("job stalled",{[Zt.TelemetryAttributes.JobId]:n}),this.emit("stalled",n,"active")})})}moveLimitedBackToWait(e,r){return e.moveToWait(r)}};Pq.Worker=_le});var yZe=m(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});var Ri=(ea(),Jt(Zo));Ri.__exportStar(Uae(),Qn);Ri.__exportStar(Vae(),Qn);Ri.__exportStar(zae(),Qn);Ri.__exportStar(Yae(),Qn);Ri.__exportStar(yWe(),Qn);Ri.__exportStar(IF(),Qn);Ri.__exportStar(bQe(),Qn);Ri.__exportStar(v4(),Qn);Ri.__exportStar(wq(),Qn);Ri.__exportStar(dle(),Qn);Ri.__exportStar(Bm(),Qn);Ri.__exportStar(cZe(),Qn);Ri.__exportStar(lZe(),Qn);Ri.__exportStar(mle(),Qn);Ri.__exportStar(rB(),Qn);Ri.__exportStar(fZe(),Qn);Ri.__exportStar(o8(),Qn);Ri.__exportStar(Dq(),Qn);Ri.__exportStar(ble(),Qn);Ri.__exportStar(vce(),Qn);Ri.__exportStar(mZe(),Qn)});var EZe=m(gZe=>{"use strict";Object.defineProperty(gZe,"__esModule",{value:!0})});var _Ze=m(bZe=>{"use strict";Object.defineProperty(bZe,"__esModule",{value:!0})});var SZe=m(vZe=>{"use strict";Object.defineProperty(vZe,"__esModule",{value:!0})});var AZe=m(wZe=>{"use strict";Object.defineProperty(wZe,"__esModule",{value:!0})});var TZe=m(CZe=>{"use strict";Object.defineProperty(CZe,"__esModule",{value:!0})});var xZe=m(OZe=>{"use strict";Object.defineProperty(OZe,"__esModule",{value:!0})});var RZe=m(IZe=>{"use strict";Object.defineProperty(IZe,"__esModule",{value:!0})});var kZe=m(DZe=>{"use strict";Object.defineProperty(DZe,"__esModule",{value:!0})});var PZe=m(MZe=>{"use strict";Object.defineProperty(MZe,"__esModule",{value:!0})});var FZe=m(NZe=>{"use strict";Object.defineProperty(NZe,"__esModule",{value:!0})});var qZe=m(BZe=>{"use strict";Object.defineProperty(BZe,"__esModule",{value:!0})});var jZe=m(LZe=>{"use strict";Object.defineProperty(LZe,"__esModule",{value:!0})});var KZe=m($Ze=>{"use strict";Object.defineProperty($Ze,"__esModule",{value:!0})});var VZe=m(UZe=>{"use strict";Object.defineProperty(UZe,"__esModule",{value:!0})});var HZe=m(GZe=>{"use strict";Object.defineProperty(GZe,"__esModule",{value:!0})});var WZe=m(zZe=>{"use strict";Object.defineProperty(zZe,"__esModule",{value:!0})});var YZe=m(JZe=>{"use strict";Object.defineProperty(JZe,"__esModule",{value:!0})});var XZe=m(QZe=>{"use strict";Object.defineProperty(QZe,"__esModule",{value:!0})});var eet=m(ZZe=>{"use strict";Object.defineProperty(ZZe,"__esModule",{value:!0})});var ret=m(Nq=>{"use strict";Object.defineProperty(Nq,"__esModule",{value:!0});Nq.ClientType=void 0;var tet;(function(t){t.blocking="blocking",t.normal="normal"})(tet||(Nq.ClientType=tet={}))});var iet=m(net=>{"use strict";Object.defineProperty(net,"__esModule",{value:!0})});var oet=m(set=>{"use strict";Object.defineProperty(set,"__esModule",{value:!0})});var uet=m(aet=>{"use strict";Object.defineProperty(aet,"__esModule",{value:!0})});var det=m(cet=>{"use strict";Object.defineProperty(cet,"__esModule",{value:!0})});var fet=m(pet=>{"use strict";Object.defineProperty(pet,"__esModule",{value:!0})});var met=m(het=>{"use strict";Object.defineProperty(het,"__esModule",{value:!0})});var get=m(yet=>{"use strict";Object.defineProperty(yet,"__esModule",{value:!0})});var bet=m(Eet=>{"use strict";Object.defineProperty(Eet,"__esModule",{value:!0})});var vet=m(_et=>{"use strict";Object.defineProperty(_et,"__esModule",{value:!0})});var Aet=m(wet=>{"use strict";Object.defineProperty(wet,"__esModule",{value:!0})});var Tet=m(Cet=>{"use strict";Object.defineProperty(Cet,"__esModule",{value:!0})});var xet=m(Oet=>{"use strict";Object.defineProperty(Oet,"__esModule",{value:!0})});var Ret=m(Iet=>{"use strict";Object.defineProperty(Iet,"__esModule",{value:!0})});var ket=m(Det=>{"use strict";Object.defineProperty(Det,"__esModule",{value:!0})});var Met=m(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});var Ar=(ea(),Jt(Zo));Ar.__exportStar(EZe(),yr);Ar.__exportStar(_Ze(),yr);Ar.__exportStar(SZe(),yr);Ar.__exportStar(AZe(),yr);Ar.__exportStar(TZe(),yr);Ar.__exportStar(xZe(),yr);Ar.__exportStar(RZe(),yr);Ar.__exportStar(kZe(),yr);Ar.__exportStar(PZe(),yr);Ar.__exportStar(FZe(),yr);Ar.__exportStar(qZe(),yr);Ar.__exportStar(jZe(),yr);Ar.__exportStar(KZe(),yr);Ar.__exportStar(VZe(),yr);Ar.__exportStar(HZe(),yr);Ar.__exportStar(WZe(),yr);Ar.__exportStar(YZe(),yr);Ar.__exportStar(XZe(),yr);Ar.__exportStar(eet(),yr);Ar.__exportStar(ret(),yr);Ar.__exportStar(iet(),yr);Ar.__exportStar(oet(),yr);Ar.__exportStar(uet(),yr);Ar.__exportStar(det(),yr);Ar.__exportStar(fet(),yr);Ar.__exportStar(met(),yr);Ar.__exportStar(get(),yr);Ar.__exportStar(bet(),yr);Ar.__exportStar(vet(),yr);Ar.__exportStar(Aet(),yr);Ar.__exportStar(Tet(),yr);Ar.__exportStar(xet(),yr);Ar.__exportStar(Ret(),yr);Ar.__exportStar(ket(),yr)});var Net=m(Pet=>{"use strict";Object.defineProperty(Pet,"__esModule",{value:!0})});var Bet=m(Fet=>{"use strict";Object.defineProperty(Fet,"__esModule",{value:!0})});var Let=m(qet=>{"use strict";Object.defineProperty(qet,"__esModule",{value:!0})});var $et=m(jet=>{"use strict";Object.defineProperty(jet,"__esModule",{value:!0})});var Uet=m(Ket=>{"use strict";Object.defineProperty(Ket,"__esModule",{value:!0})});var Get=m(Vet=>{"use strict";Object.defineProperty(Vet,"__esModule",{value:!0})});var zet=m(Het=>{"use strict";Object.defineProperty(Het,"__esModule",{value:!0})});var Jet=m(Wet=>{"use strict";Object.defineProperty(Wet,"__esModule",{value:!0})});var Qet=m(Yet=>{"use strict";Object.defineProperty(Yet,"__esModule",{value:!0})});var Xet=m(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var r1=(ea(),Jt(Zo));r1.__exportStar(Net(),ud);r1.__exportStar(Bet(),ud);r1.__exportStar(Let(),ud);r1.__exportStar($et(),ud);r1.__exportStar(Uet(),ud);r1.__exportStar(Get(),ud);r1.__exportStar(zet(),ud);r1.__exportStar(Jet(),ud);r1.__exportStar(Qet(),ud)});var ett=m(Zet=>{"use strict";Object.defineProperty(Zet,"__esModule",{value:!0})});var ttt=m(n1=>{"use strict";Object.defineProperty(n1,"__esModule",{value:!0});var _2=(ea(),Jt(Zo));_2.__exportStar(yZe(),n1);_2.__exportStar(Tu(),n1);_2.__exportStar(Met(),n1);_2.__exportStar(Xet(),n1);_2.__exportStar(Uc(),n1);_2.__exportStar(ett(),n1);_2.__exportStar(eB(),n1)});var XBr=Dt(Ide()),ZBr=Dt(qGe());nQ();var itt=Dt(ttt()),Bq=Dt(Ym());Kne();Sy();cP();var Fq=Dt(KE());lw();Sy();var qhr={dbName:"Admina-Api",appName:"Admina-Api",serverApi:{version:"1",strict:!0,deprecationErrors:!0}},rtt=async(t="Application")=>{if(!_s.MONGO_URI)throw new Error("MongoDB URI is not defined in the configuration.");if(Fq.default.connection.readyState===1){Ge.info(`${t} is already connected to MongoDB.`);return}try{await Fq.default.connect(_s.MONGO_URI,qhr),Ge.info(`\u2705 ${t} connected to the database successfully.`,{uri:_s.MONGO_URI,context:t})}catch(e){throw e instanceof Error?e:(Ge.error(`Error connecting ${t} to the database`,e),new Error("Database connection failed"))}},ntt=async(t="Application")=>{try{await Fq.default.disconnect(),Ge.info(`\u{1F6D1} ${t} disconnected from the database successfully.`)}catch(e){if(e instanceof Error)throw new Error(e.message);Ge.error(`Error disconnecting ${t} from the database`,e)}};var vle=class{constructor(){this.queueName="translation-queue";this.concurrency=5;this.connectionOptions={host:"127.0.0.1",port:6379};this.init(),this.setupSignalHandlers()}async init(){try{await rtt("Worker"),this.worker=new itt.Worker(this.queueName,this.processJob.bind(this),{connection:this.connectionOptions,concurrency:this.concurrency,limiter:{max:50,duration:1e4}}),this.setupListeners(),Ge.info(`Worker started on queue "${this.queueName}" with concurrency: ${this.concurrency}`)}catch(e){Ge.error("Failed to start worker:",e),process.exit(1)}}async processJob(e){let{data:r}=e,{docId:n,user:i,targetLanguage:s,file:o}=r,a=`job:${n}`,u=Buffer.from(o.buffer,"base64"),c=Bq.container.resolve("IGeminiAIService"),l=Bq.container.resolve("IDocumentService"),d=Bq.container.resolve("IUserService");try{let p={fieldname:"file",originalname:o.originalname,mimetype:o.mimetype,buffer:u,size:u.length};await Yo.hset(a,"status","translate"),await Yo.expire(a,300);let f=await c.translateDocument(p,s);await Yo.hset(a,"status","summarize");let h=await c.summarizeDocument(f.translatedText,s),g={title:h.title||"",sender:h.sender||"",receivedDate:h.receivedDate||new Date,summary:h.summary||"",actionPlan:h.actionPlan||[],actionPlans:(h.actionPlans||[]).map(S=>({id:S.id||Sg(),title:S.title||"",dueDate:S.dueDate||new Date,completed:!1,location:S.location||""})),userId:i.userId.toString(),docId:n,translatedText:f.translatedText,structuredTranslatedText:f.structuredTranslatedText,targetLanguage:s,pdfBlobStorage:!1};await l.createDocumentByUserId(g);let _=i.plan==="free"?"lengthOfDocs.free.current":"lengthOfDocs.standard.current";await d.updateUser(i.userId,_,!0,void 0),await Yo.hset(a,"status","completed")}catch(p){throw Ge.error(`Job ${n} failed:`,p),await Yo.hmset(a,{status:"error",error:p.message}),p}}setupListeners(){this.worker&&(this.worker.on("completed",async e=>{await Yo.del(`lock:user:${e.data.user.email}`)}),this.worker.on("failed",async(e,r)=>{Ge.error(`BullMQ Event: Job ${e?.id} failed`,{error:r.message}),e&&e.attemptsMade>=e.opts.attempts&&(await Yo.del(`lock:user:${e.data.user.email}`),Ge.error(`Job ${e.id} permanently failed. Lock released.`))}),this.worker.on("error",e=>{Ge.error("Worker connection error:",e)}))}setupSignalHandlers(){let e=async r=>{Ge.warn(`Worker received ${r}, shutting down...`);try{this.worker&&(await this.worker.close(),Ge.info("BullMQ Worker closed.")),await ntt("Worker"),Yo.status==="ready"&&(await Yo.quit(),Ge.info("Redis disconnected.")),await EZ.flush(),Ge.info("Worker shutdown complete."),process.exit(0)}catch(n){Ge.error("Error during worker shutdown",n),process.exit(1)}};process.on("SIGTERM",()=>e("SIGTERM")),process.on("SIGINT",()=>e("SIGINT"))}};new vle;
/**
 * @copyright 2025 Adeniyi Bella
 * @license Apache-2.0
 */
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

mongoose/lib/connectionState.js:
  (*!
   * Connection states
   *)

mongoose/lib/helpers/immediate.js:
  (*!
   * Centralize this so we can more easily work around issues with people
   * stubbing out `process.nextTick()` in tests using sinon:
   * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
   * See gh-6074
   *)

mongoose/lib/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/error/mongooseError.js:
mongoose/lib/options.js:
mongoose/lib/helpers/clone.js:
mongoose/lib/helpers/error/combinePathErrors.js:
mongoose/lib/schema/operators/exists.js:
mongoose/lib/schema/operators/type.js:
mongoose/lib/helpers/schematype/handleImmutable.js:
mongoose/lib/helpers/document/applyDefaults.js:
mongoose/lib/helpers/document/cleanModifiedSubpaths.js:
mongoose/lib/helpers/projection/isDefiningProjection.js:
mongoose/lib/helpers/projection/isExclusive.js:
mongoose/lib/helpers/projection/isPathSelectedInclusive.js:
mongoose/lib/types/subdocument.js:
mongoose/lib/helpers/schema/idGetter.js:
mongoose/lib/helpers/schema/handleTimestampOption.js:
mongoose/lib/helpers/update/applyTimestampsToChildren.js:
mongoose/lib/helpers/update/applyTimestampsToUpdate.js:
mongoose/lib/constants.js:
mongoose/lib/helpers/model/applyHooks.js:
mongoose/lib/types/map.js:
mongoose/lib/options/schemaArrayOptions.js:
mongoose/lib/options/schemaNumberOptions.js:
mongoose/lib/options/schemaBufferOptions.js:
mongoose/lib/options/schemaDateOptions.js:
mongoose/lib/plugins/saveSubdocs.js:
mongoose/lib/plugins/sharding.js:
mongoose/lib/plugins/validateBeforeSave.js:
mongoose/lib/helpers/model/discriminator.js:
mongoose/lib/options/schemaDocumentArrayOptions.js:
mongoose/lib/schema/map.js:
mongoose/lib/options/schemaObjectIdOptions.js:
mongoose/lib/options/schemaStringOptions.js:
mongoose/lib/schema/union.js:
mongoose/lib/driver.js:
mongoose/lib/helpers/query/castUpdate.js:
mongoose/lib/helpers/projection/isInclusive.js:
mongoose/lib/helpers/query/hasDollarKeys.js:
mongoose/lib/helpers/query/selectPopulatedFields.js:
mongoose/lib/helpers/populate/leanPopulateMap.js:
mongoose/lib/helpers/populate/getVirtual.js:
mongoose/lib/helpers/populate/getSchemaTypes.js:
mongoose/lib/helpers/populate/getModelsMapForPopulate.js:
mongoose/lib/helpers/parallelLimit.js:
mongoose/lib/helpers/populate/removeDeselectedForeignField.js:
  (*!
   * ignore
   *)

mongoose/lib/types/objectid.js:
  (*!
   * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
   *)

mongoose/lib/drivers/node-mongodb-native/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from abstract Collection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/cursor/changeStream.js:
mongoose/lib/error/serverSelection.js:
mongoose/lib/stateMachine.js:
mongoose/lib/helpers/common.js:
mongoose/lib/utils.js:
mongoose/lib/schema/subdocument.js:
mongoose/lib/cursor/queryCursor.js:
mquery/lib/utils.js:
mongoose/lib/cursor/aggregationCursor.js:
mongoose/lib/documentProvider.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)

mongoose/lib/error/cast.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/error/notFound.js:
mongoose/lib/error/validator.js:
mongoose/lib/error/version.js:
mongoose/lib/error/parallelSave.js:
mongoose/lib/error/overwriteModel.js:
mongoose/lib/error/missingSchema.js:
mongoose/lib/error/bulkSaveIncompleteError.js:
mongoose/lib/error/divergentArray.js:
mongoose/lib/error/parallelValidate.js:
mongoose/lib/error/invalidSchemaOption.js:
mongoose/lib/error/bulkWriteError.js:
mongoose/lib/error/eachAsyncMultiError.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * exports
   *)

mongoose/lib/error/validation.js:
mongoose/lib/error/setOptionError.js:
  (*!
   * Module requirements
   *)
  (*!
   * Module exports
   *)

mongoose/lib/error/strict.js:
mongoose/lib/error/strictPopulate.js:
mongoose/lib/error/objectExpected.js:
mongoose/lib/error/objectParameter.js:
mongoose/lib/cast.js:
mongoose/lib/error/syncIndexes.js:
mongoose/lib/helpers/cursor/eachAsync.js:
mongoose/lib/helpers/updateValidators.js:
mongoose/lib/index.js:
  (*!
   * Module dependencies.
   *)

mongoose/lib/error/index.js:
mongoose/lib/types/index.js:
mongoose/lib/schema/index.js:
mongoose/lib/drivers/node-mongodb-native/index.js:
  (*!
   * Module exports.
   *)

mpath/lib/index.js:
  (*!
   * Split a string path into components delimited by '.' or
   * '[\d+]'
   *
   * #### Example:
   *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
   *)
  (*!
   * Recursively set nested arrays
   *)
  (*!
   * Returns the value passed to it.
   *)

mongoose/lib/internal.js:
  (*!
   * Dependencies
   *)

mongoose/lib/types/buffer.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Buffer.
   *)
  (*!
   * Compile other Buffer methods marking this buffer as modified.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/mixed.js:
mongoose/lib/schema/documentArrayElement.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/helpers/document/compile.js:
  (*!
   * exports
   *)

mongoose/lib/queryHelpers.js:
  (*!
   * Module dependencies
   *)
  (*!
   * ignore
   *)

mongoose/lib/types/arraySubdocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Subdocument
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/types/array/methods/index.js:
  (*!
   * ignore
   *)
  (*!
   * Minimize _just_ empty objects along the path chain specified
   * by `parts`, ignoring all other paths. Useful in cases where
   * you want to minimize after unsetting a path.
   *
   * #### Example:
   *
   *     const obj = { foo: { bar: { baz: {} } }, a: {} };
   *     _minimizePath(obj, 'foo.bar.baz');
   *     obj; // { a: {} }
   *)
  (*!
   * If `docs` isn't all instances of the right model, depopulate `arr`
   *)

mongoose/lib/types/array/index.js:
mongoose/lib/types/documentArray/index.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/document.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Document exposes the NodeJS event emitter API, so you can use
   * `on`, `once`, etc.
   *)
  (*!
   * Converts to POJO when you use the document for querying
   *)
  (*!
   * Runs queued functions
   *)
  (*!
   * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
   *)
  (*!
   * Applies virtuals properties to `json`.
   *)
  (*!
   * Check if the given document only has primitive values
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schemaType.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/virtualType.js:
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/schema/operators/bitwise.js:
mongoose/lib/schema/operators/helpers.js:
mongoose/lib/schema/operators/geospatial.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)

mongoose/lib/schema/number.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/array.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Virtuals defined on this array itself.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/bigint.js:
mongoose/lib/schema/boolean.js:
mongoose/lib/schema/buffer.js:
mongoose/lib/schema/decimal128.js:
mongoose/lib/schema/double.js:
mongoose/lib/schema/int32.js:
mongoose/lib/schema/objectId.js:
mongoose/lib/schema/string.js:
mongoose/lib/schema/uuid.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/date.js:
  (*!
   * Module requirements.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/documentArray.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaArray.
   *)
  (*!
   * ignore
   *)
  (*!
   * Handle casting $elemMatch operators
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter.
   *)
  (*!
   * ignore
   *)
  (*!
   * Get this schema's default toObject/toJSON options, including Mongoose global
   * options.
   *)
  (*!
   * Recursively set options on implicitly created schemas
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter
   *)
  (*!
   * Reset document state in between transaction retries re: gh-13698
   *)
  (*!
   * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
   *)
  (*!
   * Get the default buffer timeout for this connection
   *)
  (*!
   * ignore
   *)
  (*!
   * Called internally by `openUri()` to create a MongoClient instance.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/drivers/node-mongodb-native/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from Connection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/validOptions.js:
  (*!
   * Valid mongoose options
   *)

mquery/lib/mquery.js:
  (*!
   * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
   *
   *     Thing.where('type').nin(array)
   *)
  (*!
   * @ignore
   *)
  (*!
   * limit, skip, batchSize, comment
   *
   * Sets these associated options.
   *
   *     query.comment('feed query');
   *)
  (*!
   * Internal helper for updateMany, updateOne
   *)
  (*!
   * Permissions
   *)
  (*!
   * Exports.
   *)

mongoose/lib/query.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * inherit mquery
   *)
  (*!
   * Overwrite mquery's `_distinct`, because Mongoose uses that name
   * to store the field to apply distinct on.
   *)
  (*!
   * ignore
   *)
  (*!
   * If `translateAliases` option is set, call `Model.translateAliases()`
   * on the following query properties: filter, projection, update, distinct.
   *)
  (*!
   * Convert sort values
   *)
  (*!
   * Export
   *)

mongoose/lib/aggregate.js:
  (*!
   * Module dependencies
   *)
  (*!
   * define methods
   *)
  (*!
   * Helpers
   *)
  (*!
   * Exports
   *)

mongoose/lib/model.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Give the constructor the ability to emit events.
   *)
  (*!
   * Populates `docs` for a single `populateOptions` instance.
   *)
  (*!
   * Applies query middleware from this model's schema to this model's
   * Query constructor.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/browserDocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from the NodeJS document
   *)
  (*!
   * ignore
   *)
  (*!
   * Browser doc exposes the event emitter API
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/mongoose.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
   * No-op if there is already a default connection.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/CacheHelpers.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.8.0 2025-09-24 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.13.0 2025-09-24 *)

media-typer/index.js:
  (*!
   * media-typer
   * Copyright(c) 2014 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

type-is/index.js:
  (*!
   * type-is
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2014-2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

gtoken/build/cjs/src/index.cjs:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
