"use strict";var eet=Object.create;var G4=Object.defineProperty;var cde=Object.getOwnPropertyDescriptor;var tet=Object.getOwnPropertyNames;var ret=Object.getPrototypeOf,net=Object.prototype.hasOwnProperty;var ce=(t,e)=>()=>(t&&(e=t(t=0)),e);var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ha=(t,e)=>{for(var r in e)G4(t,r,{get:e[r],enumerable:!0})},lde=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of tet(e))!net.call(t,i)&&i!==r&&G4(t,i,{get:()=>e[i],enumerable:!(n=cde(e,i))||n.enumerable});return t};var St=(t,e,r)=>(r=t!=null?eet(ret(t)):{},lde(e||!t||!t.__esModule?G4(r,"default",{value:t,enumerable:!0}):r,t)),Wt=t=>lde(G4({},"__esModule",{value:!0}),t),m1=(t,e,r,n)=>{for(var i=n>1?void 0:n?cde(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G4(e,r,i),i},dde=(t,e)=>(r,n)=>e(r,n,t);var fde=b(()=>{var pde;(function(t){(function(e){var r=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:a(),n=i(t);typeof r.Reflect<"u"&&(n=i(r.Reflect,n)),e(n,r),typeof r.Reflect>"u"&&(r.Reflect=t);function i(u,c){return function(l,d){Object.defineProperty(u,l,{configurable:!0,writable:!0,value:d}),c&&c(l,d)}}function s(){try{return Function("return this;")()}catch{}}function o(){try{return(0,eval)("(function() { return this; })()")}catch{}}function a(){return s()||o()}})(function(e,r){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",s=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",u={__proto__:[]}instanceof Array,c=!a&&!u,l={create:a?function(){return Fu(Object.create(null))}:u?function(){return Fu({__proto__:null})}:function(){return Fu({})},has:c?function(Z,oe){return n.call(Z,oe)}:function(Z,oe){return oe in Z},get:c?function(Z,oe){return n.call(Z,oe)?Z[oe]:void 0}:function(Z,oe){return Z[oe]}},d=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ar(),f=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Mn(),h=typeof WeakMap=="function"?WeakMap:Gc(),y=i?Symbol.for("@reflect-metadata:registry"):void 0,E=Ht(),v=Nr(E);function w(Z,oe,D,N){if(Pe(D)){if(!H(Z))throw new TypeError;if(!Y(oe))throw new TypeError;return K(Z,oe)}else{if(!H(Z))throw new TypeError;if(!bt(oe))throw new TypeError;if(!bt(N)&&!Pe(N)&&!Ce(N))throw new TypeError;return Ce(N)&&(N=void 0),D=j(D),k(Z,oe,D,N)}}e("decorate",w);function T(Z,oe){function D(N,U){if(!bt(N))throw new TypeError;if(!Pe(U)&&!te(U))throw new TypeError;me(Z,oe,N,U)}return D}e("metadata",T);function A(Z,oe,D,N){if(!bt(D))throw new TypeError;return Pe(N)||(N=j(N)),me(Z,oe,D,N)}e("defineMetadata",A);function C(Z,oe,D){if(!bt(oe))throw new TypeError;return Pe(D)||(D=j(D)),G(Z,oe,D)}e("hasMetadata",C);function x(Z,oe,D){if(!bt(oe))throw new TypeError;return Pe(D)||(D=j(D)),ne(Z,oe,D)}e("hasOwnMetadata",x);function R(Z,oe,D){if(!bt(oe))throw new TypeError;return Pe(D)||(D=j(D)),$(Z,oe,D)}e("getMetadata",R);function M(Z,oe,D){if(!bt(oe))throw new TypeError;return Pe(D)||(D=j(D)),V(Z,oe,D)}e("getOwnMetadata",M);function I(Z,oe){if(!bt(Z))throw new TypeError;return Pe(oe)||(oe=j(oe)),Oe(Z,oe)}e("getMetadataKeys",I);function F(Z,oe){if(!bt(Z))throw new TypeError;return Pe(oe)||(oe=j(oe)),fe(Z,oe)}e("getOwnMetadataKeys",F);function B(Z,oe,D){if(!bt(oe))throw new TypeError;if(Pe(D)||(D=j(D)),!bt(oe))throw new TypeError;Pe(D)||(D=j(D));var N=Rt(oe,D,!1);return Pe(N)?!1:N.OrdinaryDeleteMetadata(Z,oe,D)}e("deleteMetadata",B);function K(Z,oe){for(var D=Z.length-1;D>=0;--D){var N=Z[D],U=N(oe);if(!Pe(U)&&!Ce(U)){if(!Y(U))throw new TypeError;oe=U}}return oe}function k(Z,oe,D,N){for(var U=Z.length-1;U>=0;--U){var Q=Z[U],xe=Q(oe,D,N);if(!Pe(xe)&&!Ce(xe)){if(!bt(xe))throw new TypeError;N=xe}}return N}function G(Z,oe,D){var N=ne(Z,oe,D);if(N)return!0;var U=ze(oe);return Ce(U)?!1:G(Z,U,D)}function ne(Z,oe,D){var N=Rt(oe,D,!1);return Pe(N)?!1:Zt(N.OrdinaryHasOwnMetadata(Z,oe,D))}function $(Z,oe,D){var N=ne(Z,oe,D);if(N)return V(Z,oe,D);var U=ze(oe);if(!Ce(U))return $(Z,U,D)}function V(Z,oe,D){var N=Rt(oe,D,!1);if(!Pe(N))return N.OrdinaryGetOwnMetadata(Z,oe,D)}function me(Z,oe,D,N){var U=Rt(D,N,!0);U.OrdinaryDefineOwnMetadata(Z,oe,D,N)}function Oe(Z,oe){var D=fe(Z,oe),N=ze(Z);if(N===null)return D;var U=Oe(N,oe);if(U.length<=0)return D;if(D.length<=0)return U;for(var Q=new f,xe=[],Re=0,Ee=D;Re<Ee.length;Re++){var Ie=Ee[Re],Be=Q.has(Ie);Be||(Q.add(Ie),xe.push(Ie))}for(var $e=0,dt=U;$e<dt.length;$e++){var Ie=dt[$e],Be=Q.has(Ie);Be||(Q.add(Ie),xe.push(Ie))}return xe}function fe(Z,oe){var D=Rt(Z,oe,!1);return D?D.OrdinaryOwnMetadataKeys(Z,oe):[]}function He(Z){if(Z===null)return 1;switch(typeof Z){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Z===null?1:6;default:return 6}}function Pe(Z){return Z===void 0}function Ce(Z){return Z===null}function Rr(Z){return typeof Z=="symbol"}function bt(Z){return typeof Z=="object"?Z!==null:typeof Z=="function"}function na(Z,oe){switch(He(Z)){case 0:return Z;case 1:return Z;case 2:return Z;case 3:return Z;case 4:return Z;case 5:return Z}var D=oe===3?"string":oe===5?"number":"default",N=z(Z,s);if(N!==void 0){var U=N.call(Z,D);if(bt(U))throw new TypeError;return U}return mi(Z,D==="default"?"number":D)}function mi(Z,oe){if(oe==="string"){var D=Z.toString;if(ie(D)){var N=D.call(Z);if(!bt(N))return N}var U=Z.valueOf;if(ie(U)){var N=U.call(Z);if(!bt(N))return N}}else{var U=Z.valueOf;if(ie(U)){var N=U.call(Z);if(!bt(N))return N}var Q=Z.toString;if(ie(Q)){var N=Q.call(Z);if(!bt(N))return N}}throw new TypeError}function Zt(Z){return!!Z}function P(Z){return""+Z}function j(Z){var oe=na(Z,3);return Rr(oe)?oe:P(oe)}function H(Z){return Array.isArray?Array.isArray(Z):Z instanceof Object?Z instanceof Array:Object.prototype.toString.call(Z)==="[object Array]"}function ie(Z){return typeof Z=="function"}function Y(Z){return typeof Z=="function"}function te(Z){switch(He(Z)){case 3:return!0;case 4:return!0;default:return!1}}function de(Z,oe){return Z===oe||Z!==Z&&oe!==oe}function z(Z,oe){var D=Z[oe];if(D!=null){if(!ie(D))throw new TypeError;return D}}function X(Z){var oe=z(Z,o);if(!ie(oe))throw new TypeError;var D=oe.call(Z);if(!bt(D))throw new TypeError;return D}function ue(Z){return Z.value}function se(Z){var oe=Z.next();return oe.done?!1:oe}function Se(Z){var oe=Z.return;oe&&oe.call(Z)}function ze(Z){var oe=Object.getPrototypeOf(Z);if(typeof Z!="function"||Z===d||oe!==d)return oe;var D=Z.prototype,N=D&&Object.getPrototypeOf(D);if(N==null||N===Object.prototype)return oe;var U=N.constructor;return typeof U!="function"||U===Z?oe:U}function et(){var Z;!Pe(y)&&typeof r.Reflect<"u"&&!(y in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(Z=Lr(r.Reflect));var oe,D,N,U=new h,Q={registerProvider:xe,getProvider:Ee,setProvider:Be};return Q;function xe($e){if(!Object.isExtensible(Q))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case Z===$e:break;case Pe(oe):oe=$e;break;case oe===$e:break;case Pe(D):D=$e;break;case D===$e:break;default:N===void 0&&(N=new f),N.add($e);break}}function Re($e,dt){if(!Pe(oe)){if(oe.isProviderFor($e,dt))return oe;if(!Pe(D)){if(D.isProviderFor($e,dt))return oe;if(!Pe(N))for(var ur=X(N);;){var wn=se(ur);if(!wn)return;var Va=ue(wn);if(Va.isProviderFor($e,dt))return Se(ur),Va}}}if(!Pe(Z)&&Z.isProviderFor($e,dt))return Z}function Ee($e,dt){var ur=U.get($e),wn;return Pe(ur)||(wn=ur.get(dt)),Pe(wn)&&(wn=Re($e,dt),Pe(wn)||(Pe(ur)&&(ur=new p,U.set($e,ur)),ur.set(dt,wn))),wn}function Ie($e){if(Pe($e))throw new TypeError;return oe===$e||D===$e||!Pe(N)&&N.has($e)}function Be($e,dt,ur){if(!Ie(ur))throw new Error("Metadata provider not registered.");var wn=Ee($e,dt);if(wn!==ur){if(!Pe(wn))return!1;var Va=U.get($e);Pe(Va)&&(Va=new p,U.set($e,Va)),Va.set(dt,ur)}return!0}}function Ht(){var Z;return!Pe(y)&&bt(r.Reflect)&&Object.isExtensible(r.Reflect)&&(Z=r.Reflect[y]),Pe(Z)&&(Z=et()),!Pe(y)&&bt(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,y,{enumerable:!1,configurable:!1,writable:!1,value:Z}),Z}function Nr(Z){var oe=new h,D={isProviderFor:function(Ie,Be){var $e=oe.get(Ie);return Pe($e)?!1:$e.has(Be)},OrdinaryDefineOwnMetadata:xe,OrdinaryHasOwnMetadata:U,OrdinaryGetOwnMetadata:Q,OrdinaryOwnMetadataKeys:Re,OrdinaryDeleteMetadata:Ee};return E.registerProvider(D),D;function N(Ie,Be,$e){var dt=oe.get(Ie),ur=!1;if(Pe(dt)){if(!$e)return;dt=new p,oe.set(Ie,dt),ur=!0}var wn=dt.get(Be);if(Pe(wn)){if(!$e)return;if(wn=new p,dt.set(Be,wn),!Z.setProvider(Ie,Be,D))throw dt.delete(Be),ur&&oe.delete(Ie),new Error("Wrong provider for target.")}return wn}function U(Ie,Be,$e){var dt=N(Be,$e,!1);return Pe(dt)?!1:Zt(dt.has(Ie))}function Q(Ie,Be,$e){var dt=N(Be,$e,!1);if(!Pe(dt))return dt.get(Ie)}function xe(Ie,Be,$e,dt){var ur=N($e,dt,!0);ur.set(Ie,Be)}function Re(Ie,Be){var $e=[],dt=N(Ie,Be,!1);if(Pe(dt))return $e;for(var ur=dt.keys(),wn=X(ur),Va=0;;){var S8=se(wn);if(!S8)return $e.length=Va,$e;var Uq=ue(S8);try{$e[Va]=Uq}catch(w8){try{Se(wn)}finally{throw w8}}Va++}}function Ee(Ie,Be,$e){var dt=N(Be,$e,!1);if(Pe(dt)||!dt.delete(Ie))return!1;if(dt.size===0){var ur=oe.get(Be);Pe(ur)||(ur.delete($e),ur.size===0&&oe.delete(ur))}return!0}}function Lr(Z){var oe=Z.defineMetadata,D=Z.hasOwnMetadata,N=Z.getOwnMetadata,U=Z.getOwnMetadataKeys,Q=Z.deleteMetadata,xe=new h,Re={isProviderFor:function(Ee,Ie){var Be=xe.get(Ee);return!Pe(Be)&&Be.has(Ie)?!0:U(Ee,Ie).length?(Pe(Be)&&(Be=new f,xe.set(Ee,Be)),Be.add(Ie),!0):!1},OrdinaryDefineOwnMetadata:oe,OrdinaryHasOwnMetadata:D,OrdinaryGetOwnMetadata:N,OrdinaryOwnMetadataKeys:U,OrdinaryDeleteMetadata:Q};return Re}function Rt(Z,oe,D){var N=E.getProvider(Z,oe);if(!Pe(N))return N;if(D){if(E.setProvider(Z,oe,v))return v;throw new Error("Illegal state.")}}function ar(){var Z={},oe=[],D=(function(){function Re(Ee,Ie,Be){this._index=0,this._keys=Ee,this._values=Ie,this._selector=Be}return Re.prototype["@@iterator"]=function(){return this},Re.prototype[o]=function(){return this},Re.prototype.next=function(){var Ee=this._index;if(Ee>=0&&Ee<this._keys.length){var Ie=this._selector(this._keys[Ee],this._values[Ee]);return Ee+1>=this._keys.length?(this._index=-1,this._keys=oe,this._values=oe):this._index++,{value:Ie,done:!1}}return{value:void 0,done:!0}},Re.prototype.throw=function(Ee){throw this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),Ee},Re.prototype.return=function(Ee){return this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),{value:Ee,done:!0}},Re})(),N=(function(){function Re(){this._keys=[],this._values=[],this._cacheKey=Z,this._cacheIndex=-2}return Object.defineProperty(Re.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Re.prototype.has=function(Ee){return this._find(Ee,!1)>=0},Re.prototype.get=function(Ee){var Ie=this._find(Ee,!1);return Ie>=0?this._values[Ie]:void 0},Re.prototype.set=function(Ee,Ie){var Be=this._find(Ee,!0);return this._values[Be]=Ie,this},Re.prototype.delete=function(Ee){var Ie=this._find(Ee,!1);if(Ie>=0){for(var Be=this._keys.length,$e=Ie+1;$e<Be;$e++)this._keys[$e-1]=this._keys[$e],this._values[$e-1]=this._values[$e];return this._keys.length--,this._values.length--,de(Ee,this._cacheKey)&&(this._cacheKey=Z,this._cacheIndex=-2),!0}return!1},Re.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Z,this._cacheIndex=-2},Re.prototype.keys=function(){return new D(this._keys,this._values,U)},Re.prototype.values=function(){return new D(this._keys,this._values,Q)},Re.prototype.entries=function(){return new D(this._keys,this._values,xe)},Re.prototype["@@iterator"]=function(){return this.entries()},Re.prototype[o]=function(){return this.entries()},Re.prototype._find=function(Ee,Ie){if(!de(this._cacheKey,Ee)){this._cacheIndex=-1;for(var Be=0;Be<this._keys.length;Be++)if(de(this._keys[Be],Ee)){this._cacheIndex=Be;break}}return this._cacheIndex<0&&Ie&&(this._cacheIndex=this._keys.length,this._keys.push(Ee),this._values.push(void 0)),this._cacheIndex},Re})();return N;function U(Re,Ee){return Re}function Q(Re,Ee){return Ee}function xe(Re,Ee){return[Re,Ee]}}function Mn(){var Z=(function(){function oe(){this._map=new p}return Object.defineProperty(oe.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),oe.prototype.has=function(D){return this._map.has(D)},oe.prototype.add=function(D){return this._map.set(D,D),this},oe.prototype.delete=function(D){return this._map.delete(D)},oe.prototype.clear=function(){this._map.clear()},oe.prototype.keys=function(){return this._map.keys()},oe.prototype.values=function(){return this._map.keys()},oe.prototype.entries=function(){return this._map.entries()},oe.prototype["@@iterator"]=function(){return this.keys()},oe.prototype[o]=function(){return this.keys()},oe})();return Z}function Gc(){var Z=16,oe=l.create(),D=N();return(function(){function Ee(){this._key=N()}return Ee.prototype.has=function(Ie){var Be=U(Ie,!1);return Be!==void 0?l.has(Be,this._key):!1},Ee.prototype.get=function(Ie){var Be=U(Ie,!1);return Be!==void 0?l.get(Be,this._key):void 0},Ee.prototype.set=function(Ie,Be){var $e=U(Ie,!0);return $e[this._key]=Be,this},Ee.prototype.delete=function(Ie){var Be=U(Ie,!1);return Be!==void 0?delete Be[this._key]:!1},Ee.prototype.clear=function(){this._key=N()},Ee})();function N(){var Ee;do Ee="@@WeakMap@@"+Re();while(l.has(oe,Ee));return oe[Ee]=!0,Ee}function U(Ee,Ie){if(!n.call(Ee,D)){if(!Ie)return;Object.defineProperty(Ee,D,{value:l.create()})}return Ee[D]}function Q(Ee,Ie){for(var Be=0;Be<Ie;++Be)Ee[Be]=Math.random()*255|0;return Ee}function xe(Ee){if(typeof Uint8Array=="function"){var Ie=new Uint8Array(Ee);return typeof crypto<"u"?crypto.getRandomValues(Ie):typeof msCrypto<"u"?msCrypto.getRandomValues(Ie):Q(Ie,Ee),Ie}return Q(new Array(Ee),Ee)}function Re(){var Ee=xe(Z);Ee[6]=Ee[6]&79|64,Ee[8]=Ee[8]&191|128;for(var Ie="",Be=0;Be<Z;++Be){var $e=Ee[Be];(Be===4||Be===6||Be===8)&&(Ie+="-"),$e<16&&(Ie+="0"),Ie+=$e.toString(16).toLowerCase()}return Ie}}function Fu(Z){return Z.__=void 0,delete Z.__,Z}})})(pde||(pde={}))});var Y8={};Ha(Y8,{__assign:()=>yL,__asyncDelegator:()=>get,__asyncGenerator:()=>yet,__asyncValues:()=>bet,__await:()=>H4,__awaiter:()=>cet,__classPrivateFieldGet:()=>wet,__classPrivateFieldSet:()=>Aet,__createBinding:()=>pet,__decorate:()=>oet,__exportStar:()=>fet,__extends:()=>iet,__generator:()=>det,__importDefault:()=>vet,__importStar:()=>Eet,__makeTemplateObject:()=>_et,__metadata:()=>uet,__param:()=>aet,__read:()=>hde,__rest:()=>set,__spread:()=>het,__spreadArrays:()=>met,__values:()=>gL});function iet(t,e){mL(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function set(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function oet(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function aet(t,e){return function(r,n){e(r,n,t)}}function uet(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function cet(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function det(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function pet(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function fet(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function gL(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hde(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function het(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(hde(arguments[e]));return t}function met(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function H4(t){return this instanceof H4?(this.v=t,this):new H4(t)}function yet(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(f){return new Promise(function(h,y){s.push([p,f,h,y])>1||a(p,f)})})}function a(p,f){try{u(n[p](f))}catch(h){d(s[0][3],h)}}function u(p){p.value instanceof H4?Promise.resolve(p.value.v).then(c,l):d(s[0][2],p)}function c(p){a("next",p)}function l(p){a("throw",p)}function d(p,f){p(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function get(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:H4(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function bet(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof gL=="function"?gL(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function _et(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Eet(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function vet(t){return t&&t.__esModule?t:{default:t}}function wet(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Aet(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var mL,yL,Q8=ce(()=>{mL=function(t,e){return mL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},mL(t,e)};yL=function(){return yL=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yL.apply(this,arguments)}});var EL=b(_L=>{"use strict";Object.defineProperty(_L,"__esModule",{value:!0});var bL;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(bL||(bL={}));_L.default=bL});var mde=b(vL=>{"use strict";Object.defineProperty(vL,"__esModule",{value:!0});var Cet=EL();Object.defineProperty(vL,"Lifecycle",{enumerable:!0,get:function(){return Cet.default}})});var Wm=b(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.defineInjectionTokenMetadata=Jc.getParamInfo=Jc.INJECTION_TOKEN_METADATA_KEY=void 0;Jc.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function Tet(t){let e=Reflect.getMetadata("design:paramtypes",t)||[],r=Reflect.getOwnMetadata(Jc.INJECTION_TOKEN_METADATA_KEY,t)||{};return Object.keys(r).forEach(n=>{e[+n]=r[n]}),e}Jc.getParamInfo=Tet;function Oet(t,e){return function(r,n,i){let s=Reflect.getOwnMetadata(Jc.INJECTION_TOKEN_METADATA_KEY,r)||{};s[i]=e?{token:t,transform:e.transformToken,transformArgs:e.args||[]}:t,Reflect.defineMetadata(Jc.INJECTION_TOKEN_METADATA_KEY,s,r)}}Jc.defineInjectionTokenMetadata=Oet});var SL=b(X8=>{"use strict";Object.defineProperty(X8,"__esModule",{value:!0});X8.isClassProvider=void 0;function xet(t){return!!t.useClass}X8.isClassProvider=xet});var wL=b(Z8=>{"use strict";Object.defineProperty(Z8,"__esModule",{value:!0});Z8.isFactoryProvider=void 0;function Iet(t){return!!t.useFactory}Z8.isFactoryProvider=Iet});var t5=b(M2=>{"use strict";Object.defineProperty(M2,"__esModule",{value:!0});M2.delay=M2.DelayedConstructor=void 0;var e5=class{constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let r={},n=!1,i,s=()=>(n||(i=e(this.wrap()),n=!0),i);return new Proxy(r,this.createHandler(s))}createHandler(e){let r={},n=i=>{r[i]=(...s)=>{s[0]=e();let o=Reflect[i];return o(...s)}};return this.reflectMethods.forEach(n),r}};M2.DelayedConstructor=e5;function Ret(t){if(typeof t>"u")throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new e5(t)}M2.delay=Ret});var r5=b(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.isConstructorToken=ld.isTransformDescriptor=ld.isTokenDescriptor=ld.isNormalToken=void 0;var Det=t5();function ket(t){return typeof t=="string"||typeof t=="symbol"}ld.isNormalToken=ket;function Met(t){return typeof t=="object"&&"token"in t&&"multiple"in t}ld.isTokenDescriptor=Met;function Pet(t){return typeof t=="object"&&"token"in t&&"transform"in t}ld.isTransformDescriptor=Pet;function Net(t){return typeof t=="function"||t instanceof Det.DelayedConstructor}ld.isConstructorToken=Net});var AL=b(n5=>{"use strict";Object.defineProperty(n5,"__esModule",{value:!0});n5.isTokenProvider=void 0;function Fet(t){return!!t.useToken}n5.isTokenProvider=Fet});var CL=b(i5=>{"use strict";Object.defineProperty(i5,"__esModule",{value:!0});i5.isValueProvider=void 0;function Bet(t){return t.useValue!=null}i5.isValueProvider=Bet});var TL=b(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});var qet=SL();Object.defineProperty(Jm,"isClassProvider",{enumerable:!0,get:function(){return qet.isClassProvider}});var Let=wL();Object.defineProperty(Jm,"isFactoryProvider",{enumerable:!0,get:function(){return Let.isFactoryProvider}});var jet=r5();Object.defineProperty(Jm,"isNormalToken",{enumerable:!0,get:function(){return jet.isNormalToken}});var $et=AL();Object.defineProperty(Jm,"isTokenProvider",{enumerable:!0,get:function(){return $et.isTokenProvider}});var Uet=CL();Object.defineProperty(Jm,"isValueProvider",{enumerable:!0,get:function(){return Uet.isValueProvider}})});var yde=b(s5=>{"use strict";Object.defineProperty(s5,"__esModule",{value:!0});s5.isProvider=void 0;var Ket=SL(),Vet=CL(),Get=AL(),Het=wL();function zet(t){return Ket.isClassProvider(t)||Vet.isValueProvider(t)||Get.isTokenProvider(t)||Het.isFactoryProvider(t)}s5.isProvider=zet});var IL=b(xL=>{"use strict";Object.defineProperty(xL,"__esModule",{value:!0});var OL=class{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);let r=this._registryMap.get(e);return r[r.length-1]||null}set(e,r){this.ensure(e),this._registryMap.get(e).push(r)}setAll(e,r){this._registryMap.set(e,r)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}};xL.default=OL});var gde=b(DL=>{"use strict";Object.defineProperty(DL,"__esModule",{value:!0});var Wet=IL(),RL=class extends Wet.default{};DL.default=RL});var bde=b(ML=>{"use strict";Object.defineProperty(ML,"__esModule",{value:!0});var kL=class{constructor(){this.scopedResolutions=new Map}};ML.default=kL});var PL=b(o5=>{"use strict";Object.defineProperty(o5,"__esModule",{value:!0});o5.formatErrorCtor=void 0;function Jet(t,e){return t===null?`at position #${e}`:`"${t.split(",")[e].trim()}" at position #${e}`}function Yet(t,e,r="    "){return[t,...e.message.split(`
`).map(n=>r+n)].join(`
`)}function Qet(t,e,r){let[,n=null]=t.toString().match(/constructor\(([\w, ]+)\)/)||[],i=Jet(n,e);return Yet(`Cannot inject the dependency ${i} of "${t.name}" constructor. Reason:`,r)}o5.formatErrorCtor=Qet});var _de=b(a5=>{"use strict";Object.defineProperty(a5,"__esModule",{value:!0});a5.isDisposable=void 0;function Xet(t){return!(typeof t.dispose!="function"||t.dispose.length>0)}a5.isDisposable=Xet});var vde=b(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.PostResolutionInterceptors=Ym.PreResolutionInterceptors=void 0;var Ede=IL(),u5=class extends Ede.default{};Ym.PreResolutionInterceptors=u5;var c5=class extends Ede.default{};Ym.PostResolutionInterceptors=c5;var NL=class{constructor(){this.preResolution=new u5,this.postResolution=new c5}};Ym.default=NL});var y1=b(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.instance=_p.typeInfo=void 0;var Zet=(Q8(),Wt(Y8)),Io=TL(),ett=yde(),l5=r5(),ttt=gde(),sa=EL(),d5=bde(),rtt=PL(),ntt=t5(),itt=_de(),stt=vde();_p.typeInfo=new Map;var FL=class t{constructor(e){this.parent=e,this._registry=new ttt.default,this.interceptors=new stt.default,this.disposed=!1,this.disposables=new Set}register(e,r,n={lifecycle:sa.default.Transient}){this.ensureNotDisposed();let i;if(ett.isProvider(r)?i=r:i={useClass:r},Io.isTokenProvider(i)){let s=[e],o=i;for(;o!=null;){let a=o.useToken;if(s.includes(a))throw new Error(`Token registration cycle detected! ${[...s,a].join(" -> ")}`);s.push(a);let u=this._registry.get(a);u&&Io.isTokenProvider(u.provider)?o=u.provider:o=null}}if((n.lifecycle===sa.default.Singleton||n.lifecycle==sa.default.ContainerScoped||n.lifecycle==sa.default.ResolutionScoped)&&(Io.isValueProvider(i)||Io.isFactoryProvider(i)))throw new Error(`Cannot use lifecycle "${sa.default[n.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:i,options:n}),this}registerType(e,r){return this.ensureNotDisposed(),Io.isNormalToken(r)?this.register(e,{useToken:r}):this.register(e,{useClass:r})}registerInstance(e,r){return this.ensureNotDisposed(),this.register(e,{useValue:r})}registerSingleton(e,r){if(this.ensureNotDisposed(),Io.isNormalToken(e)){if(Io.isNormalToken(r))return this.register(e,{useToken:r},{lifecycle:sa.default.Singleton});if(r)return this.register(e,{useClass:r},{lifecycle:sa.default.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let n=e;return r&&!Io.isNormalToken(r)&&(n=r),this.register(e,{useClass:n},{lifecycle:sa.default.Singleton})}resolve(e,r=new d5.default,n=!1){this.ensureNotDisposed();let i=this.getRegistration(e);if(!i&&Io.isNormalToken(e)){if(n)return;throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"Single"),i){let s=this.resolveRegistration(i,r);return this.executePostResolutionInterceptor(e,s,"Single"),s}if(l5.isConstructorToken(e)){let s=this.construct(e,r);return this.executePostResolutionInterceptor(e,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,r){if(this.interceptors.preResolution.has(e)){let n=[];for(let i of this.interceptors.preResolution.getAll(e))i.options.frequency!="Once"&&n.push(i),i.callback(e,r);this.interceptors.preResolution.setAll(e,n)}}executePostResolutionInterceptor(e,r,n){if(this.interceptors.postResolution.has(e)){let i=[];for(let s of this.interceptors.postResolution.getAll(e))s.options.frequency!="Once"&&i.push(s),s.callback(e,r,n);this.interceptors.postResolution.setAll(e,i)}}resolveRegistration(e,r){if(this.ensureNotDisposed(),e.options.lifecycle===sa.default.ResolutionScoped&&r.scopedResolutions.has(e))return r.scopedResolutions.get(e);let n=e.options.lifecycle===sa.default.Singleton,i=e.options.lifecycle===sa.default.ContainerScoped,s=n||i,o;return Io.isValueProvider(e.provider)?o=e.provider.useValue:Io.isTokenProvider(e.provider)?o=s?e.instance||(e.instance=this.resolve(e.provider.useToken,r)):this.resolve(e.provider.useToken,r):Io.isClassProvider(e.provider)?o=s?e.instance||(e.instance=this.construct(e.provider.useClass,r)):this.construct(e.provider.useClass,r):Io.isFactoryProvider(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,r),e.options.lifecycle===sa.default.ResolutionScoped&&r.scopedResolutions.set(e,o),o}resolveAll(e,r=new d5.default,n=!1){this.ensureNotDisposed();let i=this.getAllRegistrations(e);if(!i&&Io.isNormalToken(e)){if(n)return[];throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"All"),i){let o=i.map(a=>this.resolveRegistration(a,r));return this.executePostResolutionInterceptor(e,o,"All"),o}let s=[this.construct(e,r)];return this.executePostResolutionInterceptor(e,s,"All"),s}isRegistered(e,r=!1){return this.ensureNotDisposed(),this._registry.has(e)||r&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(let[e,r]of this._registry.entries())this._registry.setAll(e,r.filter(n=>!Io.isValueProvider(n.provider)).map(n=>(n.instance=void 0,n)))}createChildContainer(){this.ensureNotDisposed();let e=new t(this);for(let[r,n]of this._registry.entries())n.some(({options:i})=>i.lifecycle===sa.default.ContainerScoped)&&e._registry.setAll(r,n.map(i=>i.options.lifecycle===sa.default.ContainerScoped?{provider:i.provider,options:i.options}:i));return e}beforeResolution(e,r,n={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:r,options:n})}afterResolution(e,r,n={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:r,options:n})}dispose(){return Zet.__awaiter(this,void 0,void 0,function*(){this.disposed=!0;let e=[];this.disposables.forEach(r=>{let n=r.dispose();n&&e.push(n)}),yield Promise.all(e)})}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,r){if(e instanceof ntt.DelayedConstructor)return e.createProxy(i=>this.resolve(i,r));let n=(()=>{let i=_p.typeInfo.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}let s=i.map(this.resolveParams(r,e));return new e(...s)})();return itt.isDisposable(n)&&this.disposables.add(n),n}resolveParams(e,r){return(n,i)=>{try{return l5.isTokenDescriptor(n)?l5.isTransformDescriptor(n)?n.multiple?this.resolve(n.transform).transform(this.resolveAll(n.token,new d5.default,n.isOptional),...n.transformArgs):this.resolve(n.transform).transform(this.resolve(n.token,e,n.isOptional),...n.transformArgs):n.multiple?this.resolveAll(n.token,new d5.default,n.isOptional):this.resolve(n.token,e,n.isOptional):l5.isTransformDescriptor(n)?this.resolve(n.transform,e).transform(this.resolve(n.token,e),...n.transformArgs):this.resolve(n,e)}catch(s){throw new Error(rtt.formatErrorCtor(r,i,s))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}};_p.instance=new FL;_p.default=_p.instance});var Sde=b(qL=>{"use strict";Object.defineProperty(qL,"__esModule",{value:!0});var ott=Wm(),Ep=y1(),BL=r5(),att=PL();function utt(){return function(t){let e=ott.getParamInfo(t);return class extends t{constructor(...r){super(...r.concat(e.slice(r.length).map((n,i)=>{try{return BL.isTokenDescriptor(n)?BL.isTransformDescriptor(n)?n.multiple?Ep.instance.resolve(n.transform).transform(Ep.instance.resolveAll(n.token),...n.transformArgs):Ep.instance.resolve(n.transform).transform(Ep.instance.resolve(n.token),...n.transformArgs):n.multiple?Ep.instance.resolveAll(n.token):Ep.instance.resolve(n.token):BL.isTransformDescriptor(n)?Ep.instance.resolve(n.transform).transform(Ep.instance.resolve(n.token),...n.transformArgs):Ep.instance.resolve(n)}catch(s){let o=i+r.length;throw new Error(att.formatErrorCtor(t,o,s))}})))}}}}qL.default=utt});var wde=b(LL=>{"use strict";Object.defineProperty(LL,"__esModule",{value:!0});var ctt=Wm();function ltt(t,e){let r={token:t,multiple:!1,isOptional:e&&e.isOptional};return ctt.defineInjectionTokenMetadata(r)}LL.default=ltt});var p5=b(jL=>{"use strict";Object.defineProperty(jL,"__esModule",{value:!0});var dtt=Wm(),ptt=y1(),Ade=y1();function ftt(t){return function(e){ptt.typeInfo.set(e,dtt.getParamInfo(e)),t&&t.token&&(Array.isArray(t.token)?t.token.forEach(r=>{Ade.instance.register(r,e)}):Ade.instance.register(t.token,e))}}jL.default=ftt});var Cde=b($L=>{"use strict";Object.defineProperty($L,"__esModule",{value:!0});var htt=(Q8(),Wt(Y8)),mtt=y1();function ytt(t=[]){return function(e){return t.forEach(r=>{var{token:n,options:i}=r,s=htt.__rest(r,["token","options"]);return mtt.instance.register(n,s,i)}),e}}$L.default=ytt});var Tde=b(UL=>{"use strict";Object.defineProperty(UL,"__esModule",{value:!0});var gtt=p5(),btt=y1();function _tt(){return function(t){gtt.default()(t),btt.instance.registerSingleton(t)}}UL.default=_tt});var Ode=b(KL=>{"use strict";Object.defineProperty(KL,"__esModule",{value:!0});var Ett=Wm();function vtt(t,e){let r={token:t,multiple:!0,isOptional:e&&e.isOptional};return Ett.defineInjectionTokenMetadata(r)}KL.default=vtt});var xde=b(VL=>{"use strict";Object.defineProperty(VL,"__esModule",{value:!0});var Stt=Wm();function wtt(t,e,...r){let n={token:t,multiple:!0,transform:e,transformArgs:r};return Stt.defineInjectionTokenMetadata(n)}VL.default=wtt});var Ide=b(GL=>{"use strict";Object.defineProperty(GL,"__esModule",{value:!0});var Att=Wm();function Ctt(t,e,...r){return Att.defineInjectionTokenMetadata(t,{transformToken:e,args:r})}GL.default=Ctt});var Rde=b(HL=>{"use strict";Object.defineProperty(HL,"__esModule",{value:!0});var Ttt=p5(),Ott=y1();function xtt(t,e){return function(r){Ttt.default()(r),Ott.instance.register(e||r,r,{lifecycle:t})}}HL.default=xtt});var Dde=b(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var Itt=Sde();Object.defineProperty(Yc,"autoInjectable",{enumerable:!0,get:function(){return Itt.default}});var Rtt=wde();Object.defineProperty(Yc,"inject",{enumerable:!0,get:function(){return Rtt.default}});var Dtt=p5();Object.defineProperty(Yc,"injectable",{enumerable:!0,get:function(){return Dtt.default}});var ktt=Cde();Object.defineProperty(Yc,"registry",{enumerable:!0,get:function(){return ktt.default}});var Mtt=Tde();Object.defineProperty(Yc,"singleton",{enumerable:!0,get:function(){return Mtt.default}});var Ptt=Ode();Object.defineProperty(Yc,"injectAll",{enumerable:!0,get:function(){return Ptt.default}});var Ntt=xde();Object.defineProperty(Yc,"injectAllWithTransform",{enumerable:!0,get:function(){return Ntt.default}});var Ftt=Ide();Object.defineProperty(Yc,"injectWithTransform",{enumerable:!0,get:function(){return Ftt.default}});var Btt=Rde();Object.defineProperty(Yc,"scoped",{enumerable:!0,get:function(){return Btt.default}})});var kde=b(zL=>{"use strict";Object.defineProperty(zL,"__esModule",{value:!0});function qtt(t){let e;return r=>(e==null&&(e=t(r)),e)}zL.default=qtt});var Mde=b(WL=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0});function Ltt(t){let e=new WeakMap;return r=>{let n=e.get(r);return n==null&&(n=t(r),e.set(r,n)),n}}WL.default=Ltt});var Pde=b(JL=>{"use strict";Object.defineProperty(JL,"__esModule",{value:!0});function jtt(t,e,r,n=!0){let i,s;return o=>{let a=t(o);return(!n||s!==a)&&((s=a)?i=o.resolve(e):i=o.resolve(r)),i}}JL.default=jtt});var Nde=b(z4=>{"use strict";Object.defineProperty(z4,"__esModule",{value:!0});var $tt=kde();Object.defineProperty(z4,"instanceCachingFactory",{enumerable:!0,get:function(){return $tt.default}});var Utt=Mde();Object.defineProperty(z4,"instancePerContainerCachingFactory",{enumerable:!0,get:function(){return Utt.default}});var Ktt=Pde();Object.defineProperty(z4,"predicateAwareClassFactory",{enumerable:!0,get:function(){return Ktt.default}})});var Qm=b(g1=>{"use strict";Object.defineProperty(g1,"__esModule",{value:!0});var YL=(Q8(),Wt(Y8));if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Vtt=mde();Object.defineProperty(g1,"Lifecycle",{enumerable:!0,get:function(){return Vtt.Lifecycle}});YL.__exportStar(Dde(),g1);YL.__exportStar(Nde(),g1);YL.__exportStar(TL(),g1);var Gtt=t5();Object.defineProperty(g1,"delay",{enumerable:!0,get:function(){return Gtt.delay}});var Htt=y1();Object.defineProperty(g1,"container",{enumerable:!0,get:function(){return Htt.instance}})});var oa=b(Fr=>{"use strict";var ztt=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function F2(t){return ztt(t)==="Uint8Array"}function Sj(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function B2(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function wj(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function q2(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function za(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:wj(n)?Object.fromEntries(n):n)}function Wtt(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var Zm=6,$2=Symbol.for("@@mdb.bson.version"),X4=2147483647,Z4=-2147483648,Qde=Math.pow(2,63)-1,Xde=-Math.pow(2,63),Zde=Math.pow(2,53),epe=-Math.pow(2,53),Aj=1,tpe=2,Cj=3,rpe=4,Tj=5,Jtt=6,npe=7,ipe=8,spe=9,Oj=10,m5=11,Ytt=12,xj=13,ope=14,ape=15,Y4=16,upe=17,Ij=18,cpe=19,lpe=255,dpe=127,Qtt=0,Rj=4,ppe=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),be=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},Ap=class extends be{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${Zm}.x.x`)}},U2=class extends be{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},ju=class extends be{get name(){return"BSONOffsetError"}constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},Fde,Bde;function fpe(t,e,r,n){if(n){Fde??=new TextDecoder("utf8",{fatal:!0});try{return Fde.decode(t.subarray(e,r))}catch(i){throw new be("Invalid UTF-8 string in BSON document",{cause:i})}}return Bde??=new TextDecoder("utf8",{fatal:!1}),Bde.decode(t.subarray(e,r))}function hpe(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let i=[];for(let s=e;s<r;s++){let o=t[s];if(o>127)return null;i.push(o)}return String.fromCharCode(...i)}function Xtt(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,i=r;n<e.length;n++,i++){let s=e.charCodeAt(n);if(s>127)return null;t[i]=s}return e.length}function Ztt(t){return Sp.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var ert=(()=>{try{return require("crypto").randomBytes}catch{return Ztt}})(),Sp={toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new be("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},equals(t,e){return Sp.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},toBase64(t){return Sp.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return Sp.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return Sp.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let i=r-e<=20?hpe(t,e,r):null;if(i!=null)return i;let s=Sp.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let o=0;o<s.length;o++)if(s.charCodeAt(o)===65533){fpe(t,e,r,!0);break}}return s},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=Xtt(t,e,r);return n??Sp.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:ert,swap32(t){return Sp.toLocalBufferType(t).swap32()}};function trt(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function rrt(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return Q4.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var nrt=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(Q4.allocate(e));if(trt()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return rrt})(),qde=/(\d|[a-f])/i,Q4={toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new be("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return Q4.allocate(t)},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},toBase64(t){return btoa(Q4.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];if(!qde.test(i)||!qde.test(s))break;let o=Number.parseInt(`${i}${s}`,16);r.push(o)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let i=r-e<=20?hpe(t,e,r):null;return i??fpe(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:nrt,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],i=t[e+2],s=t[e+3];t[e]=s,t[e+1]=i,t[e+2]=n,t[e+3]=r}return t}},irt=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,ge=irt?Sp:Q4,ro=class{get[$2](){return Zm}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},L2=new Float64Array(1),Ar=new Uint8Array(L2.buffer,0,8);L2[0]=-1;var QL=Ar[7]===0,pt={isBigEndian:QL,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=BigInt(t[e+4]+t[e+5]*256+t[e+6]*65536+(t[e+7]<<24)),n=BigInt(t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216);return(r<<BigInt(32))+n},getFloat64LE:QL?(t,e)=>(Ar[7]=t[e],Ar[6]=t[e+1],Ar[5]=t[e+2],Ar[4]=t[e+3],Ar[3]=t[e+4],Ar[2]=t[e+5],Ar[1]=t[e+6],Ar[0]=t[e+7],L2[0]):(t,e)=>(Ar[0]=t[e],Ar[1]=t[e+1],Ar[2]=t[e+2],Ar[3]=t[e+3],Ar[4]=t[e+4],Ar[5]=t[e+5],Ar[6]=t[e+6],Ar[7]=t[e+7],L2[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=BigInt(4294967295),i=Number(r&n);t[e]=i,i>>=8,t[e+1]=i,i>>=8,t[e+2]=i,i>>=8,t[e+3]=i;let s=Number(r>>BigInt(32)&n);return t[e+4]=s,s>>=8,t[e+5]=s,s>>=8,t[e+6]=s,s>>=8,t[e+7]=s,8},setFloat64LE:QL?(t,e,r)=>(L2[0]=r,t[e]=Ar[7],t[e+1]=Ar[6],t[e+2]=Ar[5],t[e+3]=Ar[4],t[e+4]=Ar[3],t[e+5]=Ar[2],t[e+6]=Ar[1],t[e+7]=Ar[0],8):(t,e,r)=>(L2[0]=r,t[e]=Ar[0],t[e+1]=Ar[1],t[e+2]=Ar[2],t[e+3]=Ar[3],t[e+4]=Ar[4],t[e+5]=Ar[5],t[e+6]=Ar[6],t[e+7]=Ar[7],8)},lr=class t extends ro{get _bsontype(){return"Binary"}constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!Sj(e)&&!Array.isArray(e))throw new be("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=ge.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?ge.fromNumberArray(e):ge.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new be("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new be("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new be("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=ge.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=ge.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(ge.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new be("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return ge.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?ge.toHex(this.buffer.subarray(0,this.position)):e==="base64"?ge.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?ge.toUTF8(this.buffer,0,this.position,!1):ge.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&vp(this);let r=ge.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new _1(this.buffer.subarray(0,this.position));throw new be(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(ge.fromHex(e),r)}static createFromBase64(e,r){return new t(ge.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=ge.fromBase64(e.$binary)):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=ge.fromBase64(e.$binary.base64)):"$uuid"in e&&(i=4,n=_1.bytesFromString(e.$uuid)),!n)throw new be(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return i===Rj?new _1(n):new t(n,i)}inspect(e,r,n){n??=za;let i=ge.toBase64(this.buffer.subarray(0,this.position)),s=n(i,r),o=n(this.sub_type,r);return`Binary.createFromBase64(${s}, ${o})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new be("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new be("Binary datatype field is not Int8");return vp(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new be("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new be("Binary datatype field is not Float32");vp(this);let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return pt.isBigEndian&&ge.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new be("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new be("Binary datatype field is not packed bit");return vp(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new be("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new be("Binary datatype field is not packed bit");vp(this);let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let i=0;i<n.length;i++){let s=i/8|0,o=this.buffer[s+2],a=7-i%8,u=o>>a&1;n[i]=u}return n}static fromInt8Array(e){let r=ge.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2);let i=new this(r,this.SUBTYPE_VECTOR);return vp(i),i}static fromFloat32Array(e){let r=ge.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2),pt.isBigEndian&&ge.swap32(new Uint8Array(r.buffer,2));let i=new this(r,this.SUBTYPE_VECTOR);return vp(i),i}static fromPackedBits(e,r=0){let n=ge.allocate(e.byteLength+2);n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2);let i=new this(n,this.SUBTYPE_VECTOR);return vp(i),i}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let i=e.length%8;n[1]=i===0?0:8-i;for(let s=0;s<e.length;s++){let o=s>>>3,a=e[s];if(a!==0&&a!==1)throw new be(`Invalid bit value at ${s}: must be 0 or 1, found ${e[s]}`);if(a===0)continue;let u=7-s%8;n[o+2]|=a<<u}return new this(n,t.SUBTYPE_VECTOR)}};lr.BSON_BINARY_SUBTYPE_DEFAULT=0;lr.BUFFER_SIZE=256;lr.SUBTYPE_DEFAULT=0;lr.SUBTYPE_FUNCTION=1;lr.SUBTYPE_BYTE_ARRAY=2;lr.SUBTYPE_UUID_OLD=3;lr.SUBTYPE_UUID=4;lr.SUBTYPE_MD5=5;lr.SUBTYPE_ENCRYPTED=6;lr.SUBTYPE_COLUMN=7;lr.SUBTYPE_SENSITIVE=8;lr.SUBTYPE_VECTOR=9;lr.SUBTYPE_USER_DEFINED=128;lr.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function vp(t){if(t.sub_type!==lr.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===lr.VECTOR_TYPE.Float32||r===lr.VECTOR_TYPE.Int8)&&n!==0)throw new be("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===lr.VECTOR_TYPE.Float32&&e!==0&&e-2!==0&&(e-2)%4!==0)throw new be("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===lr.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new be("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===lr.VECTOR_TYPE.PackedBit&&n>7)throw new be(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var XL=16,srt=/^[0-9A-F]{32}$/i,ort=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,_1=class t extends lr{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=ge.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===XL)r=ge.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new be("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,Rj)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[ge.toHex(this.buffer.subarray(0,4)),ge.toHex(this.buffer.subarray(4,6)),ge.toHex(this.buffer.subarray(6,8)),ge.toHex(this.buffer.subarray(8,10)),ge.toHex(this.buffer.subarray(10,16))].join("-"):ge.toHex(this.buffer)}toString(e){return e==="hex"?ge.toHex(this.id):e==="base64"?ge.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return ge.equals(e.id,this.id);try{return ge.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new lr(this.id,lr.SUBTYPE_UUID)}static generate(){let e=ge.randomBytes(XL);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):F2(e)?e.byteLength===XL:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(ge.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new be("UUID string representation must be 32 hex digits or canonical hyphenated representation");return ge.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return srt.test(e)||ort.test(e)}inspect(e,r,n){return n??=za,`new UUID(${n(this.toHexString(),r)})`}},Cp=class t extends ro{get _bsontype(){return"Code"}constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=za;let i=n(this.code,r),s=i.includes(`
`);this.scope!=null&&(i+=`,${s?`
`:" "}${n(this.scope,r)}`);let o=s&&this.scope===null;return`new Code(${s?`
`:""}${i}${o?`
`:""})`}};function mpe(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var dd=class t extends ro{get _bsontype(){return"DBRef"}constructor(e,r,n,i){super();let s=e.split(".");s.length===2&&(n=s.shift(),e=s.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=za;let i=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return i[1]=n===za?`new ObjectId(${i[1]})`:i[1],`new DBRef(${i.join(", ")})`}};function ype(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let i=!1;for(;e<t.length&&t[e]==="0";++e)i=!0;return i?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function art(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var Lu;try{Lu=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var Lde=65536,urt=1<<24,j2=Lde*Lde,gpe=j2*j2,crt=gpe/2,jde={},$de={},lrt=20,drt=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,je=class t extends ro{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,r,n){super();let i=typeof r=="boolean"?r:!!n,s=typeof r=="number"?r:0,o=typeof e=="string"?t.fromString(e,i):typeof e=="bigint"?t.fromBigInt(e,i):{low:e|0,high:s|0,unsigned:i};this.low=o.low,this.high=o.high,this.unsigned=o.unsigned}static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,i,s;return r?(e>>>=0,(s=0<=e&&e<256)&&(i=$de[e],i)?i:(n=t.fromBits(e,(e|0)<0?-1:0,!0),s&&($de[e]=n),n)):(e|=0,(s=-128<=e&&e<128)&&(i=jde[e],i)?i:(n=t.fromBits(e,e<0?-1:0,!1),s&&(jde[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=gpe)return t.MAX_UNSIGNED_VALUE}else{if(e<=-9223372036854776e3)return t.MIN_VALUE;if(e+1>=crt)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%j2|0,e/j2|0,r)}static fromBigInt(e,r){let n=BigInt(4294967295),i=BigInt(32);return new t(Number(e&n),Number(e>>i&n),r)}static _fromString(e,r,n){if(e.length===0)throw new be("empty string");if(n<2||36<n)throw new be("radix");let i;if((i=e.indexOf("-"))>0)throw new be("interior hyphen");if(i===0)return t._fromString(e.substring(1),r,n).neg();let s=t.fromNumber(Math.pow(n,8)),o=t.ZERO;for(let a=0;a<e.length;a+=8){let u=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+u),n);if(u<8){let l=t.fromNumber(Math.pow(n,u));o=o.mul(l).add(t.fromNumber(c))}else o=o.mul(s),o=o.add(t.fromNumber(c))}return o.unsigned=r,o}static fromStringStrict(e,r,n){let i=!1;if(typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e.trim()!==e)throw new be(`Input: '${e}' contains leading and/or trailing whitespace`);if(!art(e,n))throw new be(`Input: '${e}' contains invalid characters for radix: ${n}`);let s=ype(e),o=t._fromString(s,i,n);if(o.toString(n).toLowerCase()!==s.toLowerCase())throw new be(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return o}static fromString(e,r,n){let i=!1;return typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,i,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,d=0,p=0,f=0;return f+=s+c,p+=f>>>16,f&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=n+a,l+=d>>>16,d&=65535,l+=r+o,l&=65535,t.fromBits(p<<16|f,l<<16|d,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new be("division by zero");if(Lu){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let s=(this.unsigned?Lu.div_u:Lu.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(s,Lu.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;i=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),i=r.add(n.div(e)),i));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let s=Math.ceil(Math.log(r)/Math.LN2),o=s<=48?1:Math.pow(2,s-48),a=t.fromNumber(r),u=a.mul(e);for(;u.isNegative()||u.gt(n);)r-=o,a=t.fromNumber(r,this.unsigned),u=a.mul(e);a.isZero()&&(a=t.ONE),i=i.add(a),n=n.sub(u)}return i}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),Lu){let r=(this.unsigned?Lu.rem_u:Lu.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Lu.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Lu){let h=Lu.mul(this.low,this.high,e.low,e.high);return t.fromBits(h,Lu.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,d=0,p=0,f=0;return f+=s*c,p+=f>>>16,f&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=s*u,d+=p>>>16,p&=65535,d+=n*c,l+=d>>>16,d&=65535,d+=i*u,l+=d>>>16,d&=65535,d+=s*a,l+=d>>>16,d&=65535,l+=r*c+n*u+i*a+s*o,l&=65535,t.fromBits(p<<16|f,l<<16|d,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*j2+(this.low>>>0):this.high*j2+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new be("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let s=t.fromNumber(e),o=this.div(s),a=o.mul(s).sub(this);return o.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,i="";for(;;){let s=n.div(r),a=(n.sub(s.mul(r)).toInt()>>>0).toString(e);if(n=s,n.isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:i=!0}={...r};if(e.$numberLong.length>lrt)throw new be("$numberLong string is too long");if(!drt.test(e.$numberLong))throw new be(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let o=BigInt(e.$numberLong);return BigInt.asIntN(64,o)}let s=t.fromString(e.$numberLong);return i?s.toNumber():s}inspect(e,r,n){n??=za;let i=n(this.toString(),r),s=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${i}${s})`}};je.TWO_PWR_24=je.fromInt(urt);je.MAX_UNSIGNED_VALUE=je.fromBits(-1,-1,!0);je.ZERO=je.fromInt(0);je.UZERO=je.fromInt(0,!0);je.ONE=je.fromInt(1);je.UONE=je.fromInt(1,!0);je.NEG_ONE=je.fromInt(-1);je.MAX_VALUE=je.fromBits(-1,2147483647,!1);je.MIN_VALUE=je.fromBits(0,-2147483648,!1);var prt=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,frt=/^(\+|-)?(Infinity|inf)$/i,hrt=/^(\+|-)?NaN$/i,P2=6111,W4=-6176,Ude=6176,Kde=34,ZL=ge.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Vde=ge.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Gde=ge.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),mrt=/^([-+])?(\d+)?$/,yrt=31,Hde=16383,grt=30,brt=31;function zde(t){return!isNaN(parseInt(t,10))}function _rt(t){let e=je.fromNumber(1e9),r=je.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new je(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function Ert(t,e){if(!t&&!e)return{high:je.fromNumber(0),low:je.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new je(t.getLowBits(),0),i=e.shiftRightUnsigned(32),s=new je(e.getLowBits(),0),o=r.multiply(i),a=r.multiply(s),u=n.multiply(i),c=n.multiply(s);return o=o.add(a.shiftRightUnsigned(32)),a=new je(a.getLowBits(),0).add(u).add(c.shiftRightUnsigned(32)),o=o.add(a.shiftRightUnsigned(32)),c=a.shiftLeft(32).add(new je(c.getLowBits(),0)),{high:o,low:c}}function vrt(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let i=t.low>>>0,s=e.low>>>0;if(i<s)return!0}return!1}function Qc(t,e){throw new be(`"${t}" is not a valid Decimal128 string - ${e}`)}var e0=class t extends ro{get _bsontype(){return"Decimal128"}constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||F2(e)){if(e.byteLength!==16)throw new be("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new be("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,i=!1,s=!1,o=!1,a=0,u=0,c=0,l=0,d=0,p=[0],f=0,h=0,y=0,E=0,v=new je(0,0),w=new je(0,0),T=0,A=0;if(e.length>=7e3)throw new be(""+e+" not a valid Decimal128 string");let C=e.match(prt),x=e.match(frt),R=e.match(hrt);if(!C&&!x&&!R||e.length===0)throw new be(""+e+" not a valid Decimal128 string");if(C){let B=C[2],K=C[4],k=C[5],G=C[6];K&&G===void 0&&Qc(e,"missing exponent power"),K&&B===void 0&&Qc(e,"missing exponent base"),K===void 0&&(k||G)&&Qc(e,"missing e before exponent")}if((e[A]==="+"||e[A]==="-")&&(i=!0,n=e[A++]==="-"),!zde(e[A])&&e[A]!=="."){if(e[A]==="i"||e[A]==="I")return new t(n?Vde:Gde);if(e[A]==="N")return new t(ZL)}for(;zde(e[A])||e[A]===".";){if(e[A]==="."){s&&Qc(e,"contains multiple periods"),s=!0,A=A+1;continue}f<Kde&&(e[A]!=="0"||o)&&(o||(d=u),o=!0,p[h++]=parseInt(e[A],10),f=f+1),o&&(c=c+1),s&&(l=l+1),u=u+1,A=A+1}if(s&&!u)throw new be(""+e+" not a valid Decimal128 string");if(e[A]==="e"||e[A]==="E"){let B=e.substr(++A).match(mrt);if(!B||!B[2])return new t(ZL);E=parseInt(B[0],10),A=A+B[0].length}if(e[A])return new t(ZL);if(!f)p[0]=0,c=1,f=1,a=0;else if(y=f-1,a=c,a!==1)for(;e[d+a-1+Number(i)+Number(s)]==="0";)a=a-1;for(E<=l&&l>E+16384?E=W4:E=E-l;E>P2;){if(y=y+1,y>=Kde){if(a===0){E=P2;break}Qc(e,"overflow")}E=E-1}if(r.allowRounding){for(;E<W4||f<c;){if(y===0&&a<f){E=W4,a=0;break}if(f<c?c=c-1:y=y-1,E<P2)E=E+1;else{if(p.join("").match(/^0+$/)){E=P2;break}Qc(e,"overflow")}}if(y+1<a){let B=u;s&&(d=d+1,B=B+1),i&&(d=d+1,B=B+1);let K=parseInt(e[d+y+1],10),k=0;if(K>=5&&(k=1,K===5)){k=p[y]%2===1?1:0;for(let G=d+y+2;G<B;G++)if(parseInt(e[G],10)){k=1;break}}if(k){let G=y;for(;G>=0&&++p[G]>9;G--)if(p[G]=0,G===0)if(E<P2)E=E+1,p[G]=1;else return new t(n?Vde:Gde)}}}else{for(;E<W4||f<c;){if(y===0){if(a===0){E=W4;break}Qc(e,"exponent underflow")}f<c?(e[c-1+Number(i)+Number(s)]!=="0"&&a!==0&&Qc(e,"inexact rounding"),c=c-1):(p[y]!==0&&Qc(e,"inexact rounding"),y=y-1),E<P2?E=E+1:Qc(e,"overflow")}y+1<a&&(s&&(d=d+1),i&&(d=d+1),parseInt(e[d+y+1],10)!==0&&Qc(e,"inexact rounding"))}if(v=je.fromNumber(0),w=je.fromNumber(0),a===0)v=je.fromNumber(0),w=je.fromNumber(0);else if(y<17){let B=0;for(w=je.fromNumber(p[B++]),v=new je(0,0);B<=y;B++)w=w.multiply(je.fromNumber(10)),w=w.add(je.fromNumber(p[B]))}else{let B=0;for(v=je.fromNumber(p[B++]);B<=y-17;B++)v=v.multiply(je.fromNumber(10)),v=v.add(je.fromNumber(p[B]));for(w=je.fromNumber(p[B++]);B<=y;B++)w=w.multiply(je.fromNumber(10)),w=w.add(je.fromNumber(p[B]))}let M=Ert(v,je.fromString("100000000000000000"));M.low=M.low.add(w),vrt(M.low,w)&&(M.high=M.high.add(je.fromNumber(1))),T=E+Ude;let I={low:je.fromNumber(0),high:je.fromNumber(0)};M.high.shiftRightUnsigned(49).and(je.fromNumber(1)).equals(je.fromNumber(1))?(I.high=I.high.or(je.fromNumber(3).shiftLeft(61)),I.high=I.high.or(je.fromNumber(T).and(je.fromNumber(16383).shiftLeft(47))),I.high=I.high.or(M.high.and(je.fromNumber(0x7fffffffffff)))):(I.high=I.high.or(je.fromNumber(T&16383).shiftLeft(49)),I.high=I.high.or(M.high.and(je.fromNumber(562949953421311)))),I.low=M.low,n&&(I.high=I.high.or(je.fromString("9223372036854775808")));let F=ge.allocateUnsafe(16);return A=0,F[A++]=I.low.low&255,F[A++]=I.low.low>>8&255,F[A++]=I.low.low>>16&255,F[A++]=I.low.low>>24&255,F[A++]=I.low.high&255,F[A++]=I.low.high>>8&255,F[A++]=I.low.high>>16&255,F[A++]=I.low.high>>24&255,F[A++]=I.high.low&255,F[A++]=I.high.low>>8&255,F[A++]=I.high.low>>16&255,F[A++]=I.high.low>>24&255,F[A++]=I.high.high&255,F[A++]=I.high.high>>8&255,F[A++]=I.high.high>>16&255,F[A++]=I.high.high>>24&255,new t(F)}toString(){let e,r=0,n=new Array(36);for(let A=0;A<n.length;A++)n[A]=0;let i=0,s=!1,o,a={parts:[0,0,0,0]},u,c,l=[];i=0;let d=this.bytes,p=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,f=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,h=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,y=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24;i=0,{low:new je(p,f),high:new je(h,y)}.high.lessThan(je.ZERO)&&l.push("-");let v=y>>26&yrt;if(v>>3===3){if(v===grt)return l.join("")+"Infinity";if(v===brt)return"NaN";e=y>>15&Hde,o=8+(y>>14&1)}else o=y>>14&7,e=y>>17&Hde;let w=e-Ude;if(a.parts[0]=(y&16383)+((o&15)<<14),a.parts[1]=h,a.parts[2]=f,a.parts[3]=p,a.parts[0]===0&&a.parts[1]===0&&a.parts[2]===0&&a.parts[3]===0)s=!0;else for(c=3;c>=0;c--){let A=0,C=_rt(a);if(a=C.quotient,A=C.rem.low,!!A)for(u=8;u>=0;u--)n[c*9+u]=A%10,A=Math.floor(A/10)}if(s)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;let T=r-1+w;if(T>=34||T<=-7||w>0){if(r>34)return l.push("0"),w>0?l.push(`E+${w}`):w<0&&l.push(`E${w}`),l.join("");l.push(`${n[i++]}`),r=r-1,r&&l.push(".");for(let A=0;A<r;A++)l.push(`${n[i++]}`);l.push("E"),T>0?l.push(`+${T}`):l.push(`${T}`)}else if(w>=0)for(let A=0;A<r;A++)l.push(`${n[i++]}`);else{let A=r+w;if(A>0)for(let C=0;C<A;C++)l.push(`${n[i++]}`);else l.push("0");for(l.push(".");A++<0;)l.push("0");for(let C=0;C<r-Math.max(A-1,0);C++)l.push(`${n[i++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=za,`new Decimal128(${n(this.toString(),r)})`}},E1=class t extends ro{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new be(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new be(`Input: '${e}' contains whitespace`);if(e==="")throw new be("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new be(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=za,`new Double(${n(this.value,r)})`}},v1=class t extends ro{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=ype(e),n=Number(e);if(X4<n)throw new be(`Input: '${e}' is larger than the maximum value for Int32`);if(Z4>n)throw new be(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new be(`Input: '${e}' is not a valid Int32 string`)}else throw new be(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=za,`new Int32(${n(this.value,r)})`}},t0=class t extends ro{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},r0=class t extends ro{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},Xm=null,J4=new WeakMap,Tp=class t extends ro{get _bsontype(){return"ObjectId"}constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new be("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=ge.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null||typeof r=="number")this.buffer=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=ge.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=ge.fromHex(r),t.cacheHexString&&J4.set(this,r);else throw new be("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new be("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&J4.set(this,ge.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=J4.get(this);if(r)return r}let e=ge.toHex(this.id);return t.cacheHexString&&J4.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=ge.allocateUnsafe(12);return pt.setInt32BE(n,0,e),Xm===null&&(Xm=ge.randomBytes(5)),n[4]=Xm[0],n[5]=Xm[1],n[6]=Xm[2],n[7]=Xm[3],n[8]=Xm[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?ge.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&ge.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=pt.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=ge.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return pt.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new be("hex string must be 24 characters");return new t(ge.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new be("base64 string must be 16 characters");return new t(ge.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&J4.has(this)}inspect(e,r,n){return n??=za,`new ObjectId(${n(this.toHexString(),r)})`}};Tp.index=Math.floor(Math.random()*16777215);function f5(t,e,r){let n=5;if(Array.isArray(t))for(let i=0;i<t.length;i++)n+=Wde(i.toString(),t[i],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let i of Object.keys(t))n+=Wde(i,t[i],e,!1,r)}return n}function Wde(t,e,r=!1,n=!1,i=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+ge.utf8ByteLength(t)+1+4+ge.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=epe&&e<=Zde&&e>=Z4&&e<=X4?(t!=null?ge.utf8ByteLength(t)+1:0)+5:(t!=null?ge.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!i?(t!=null?ge.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?ge.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[$2]!==Zm)throw new Ap;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?ge.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?ge.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||q2(e))return(t!=null?ge.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Sj(e))return(t!=null?ge.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?ge.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?ge.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?ge.utf8ByteLength(t)+1:0)+1+4+4+ge.utf8ByteLength(e.code.toString())+1+f5(e.scope,r,i):(t!=null?ge.utf8ByteLength(t)+1:0)+1+4+ge.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let s=e;return s.sub_type===lr.SUBTYPE_BYTE_ARRAY?(t!=null?ge.utf8ByteLength(t)+1:0)+(s.position+1+4+1+4):(t!=null?ge.utf8ByteLength(t)+1:0)+(s.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?ge.utf8ByteLength(t)+1:0)+ge.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let s=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(s.$db=e.db),(t!=null?ge.utf8ByteLength(t)+1:0)+1+f5(s,r,i)}else return e instanceof RegExp||B2(e)?(t!=null?ge.utf8ByteLength(t)+1:0)+1+ge.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?ge.utf8ByteLength(t)+1:0)+1+ge.utf8ByteLength(e.pattern)+1+ge.utf8ByteLength(e.options)+1:(t!=null?ge.utf8ByteLength(t)+1:0)+f5(e,r,i)+1}case"function":return r?(t!=null?ge.utf8ByteLength(t)+1:0)+1+4+ge.utf8ByteLength(e.toString())+1:0;case"bigint":return(t!=null?ge.utf8ByteLength(t)+1:0)+9;case"symbol":return 0;default:throw new be(`Unrecognized JS type: ${typeof e}`)}}function Srt(t){return t.split("").sort().join("")}var Op=class t extends ro{get _bsontype(){return"BSONRegExp"}constructor(e,r){if(super(),this.pattern=e,this.options=Srt(r??""),this.pattern.indexOf("\0")!==-1)throw new be(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new be(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new be(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new be(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let i=Wtt(r)??(a=>a);n??=za;let s=i(n(this.pattern),"regexp"),o=i(n(this.options),"regexp");return`new BSONRegExp(${s}, ${o})`}},n0=class t extends ro{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=za,`new BSONSymbol(${n(this.value,r)})`}},wrt=je,S1=class t extends wrt{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(je.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new be("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new be("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new be("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new be("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new be("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new be("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new be("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(je.fromInt(e,!0))}static fromNumber(e){return new t(je.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(je.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=je.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=je.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=za;let i=n(this.t,r),s=n(this.i,r);return`new Timestamp({ t: ${i}, i: ${s} })`}};S1.MAX_VALUE=je.MAX_UNSIGNED_VALUE;var Art=je.fromNumber(Zde),Crt=je.fromNumber(epe);function bpe(t,e,r){e=e??{};let n=e&&e.index?e.index:0,i=pt.getInt32LE(t,n);if(i<5)throw new be(`bson size must be >= 5, is ${i}`);if(e.allowObjectSmallerThanBufferSize&&t.length<i)throw new be(`buffer length ${t.length} must be >= bson size ${i}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==i)throw new be(`buffer length ${t.length} must === bson size ${i}`);if(i+n>t.byteLength)throw new be(`(bson size ${i} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+i-1]!==0)throw new be("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return h5(t,n,e,r)}var Trt=/^\$ref$|^\$id$|^\$db$/;function h5(t,e,r,n=!1){let i=r.fieldsAsRaw==null?null:r.fieldsAsRaw,s=r.raw==null?!1:r.raw,o=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,a=r.promoteBuffers??!1,u=r.promoteLongs??!0,c=r.promoteValues??!0,l=r.useBigInt64??!1;if(l&&!c)throw new be("Must either request bigint or Long for int64 deserialization");if(l&&!u)throw new be("Must either request bigint or Long for int64 deserialization");let d=r.validation==null?{utf8:!0}:r.validation,p=!0,f,h,y=d.utf8;if(typeof y=="boolean")f=y;else{p=!1;let C=Object.keys(y).map(function(x){return y[x]});if(C.length===0)throw new be("UTF-8 validation setting cannot be empty");if(typeof C[0]!="boolean")throw new be("Invalid UTF-8 validation option, must specify boolean values");if(f=C[0],!C.every(x=>x===f))throw new be("Invalid UTF-8 validation option - keys must be all true or all false")}if(!p){h=new Set;for(let C of Object.keys(y))h.add(C)}let E=e;if(t.length<5)throw new be("corrupt bson message < 5 bytes long");let v=pt.getInt32LE(t,e);if(e+=4,v<5||v>t.length)throw new be("corrupt bson message");let w=n?[]:{},T=0,A=n?!1:null;for(;;){let C=t[e++];if(C===0)break;let x=e;for(;t[x]!==0&&x<t.length;)x++;if(x>=t.byteLength)throw new be("Bad BSON Document: illegal CString");let R=n?T++:ge.toUTF8(t,e,x,!1),M=!0;p||h?.has(R)?M=f:M=!f,A!==!1&&R[0]==="$"&&(A=Trt.test(R));let I;if(e=x+1,C===tpe){let F=pt.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new be("bad string length in bson");I=ge.toUTF8(t,e,e+F-1,M),e=e+F}else if(C===npe){let F=ge.allocateUnsafe(12);for(let B=0;B<12;B++)F[B]=t[e+B];I=new Tp(F),e=e+12}else if(C===Y4&&c===!1)I=new v1(pt.getInt32LE(t,e)),e+=4;else if(C===Y4)I=pt.getInt32LE(t,e),e+=4;else if(C===Aj)I=pt.getFloat64LE(t,e),e+=8,c===!1&&(I=new E1(I));else if(C===spe){let F=pt.getInt32LE(t,e),B=pt.getInt32LE(t,e+4);e+=8,I=new Date(new je(F,B).toNumber())}else if(C===ipe){if(t[e]!==0&&t[e]!==1)throw new be("illegal boolean type value");I=t[e++]===1}else if(C===Cj){let F=e,B=pt.getInt32LE(t,e);if(B<=0||B>t.length-e)throw new be("bad embedded document length in bson");if(s)I=t.subarray(e,e+B);else{let K=r;p||(K={...r,validation:{utf8:M}}),I=h5(t,F,K,!1)}e=e+B}else if(C===rpe){let F=e,B=pt.getInt32LE(t,e),K=r,k=e+B;if(i&&i[R]&&(K={...r,raw:!0}),p||(K={...K,validation:{utf8:M}}),I=h5(t,F,K,!0),e=e+B,t[e-1]!==0)throw new be("invalid array terminator byte");if(e!==k)throw new be("corrupted array bson")}else if(C===Jtt)I=void 0;else if(C===Oj)I=null;else if(C===Ij)if(l)I=pt.getBigInt64LE(t,e),e+=8;else{let F=pt.getInt32LE(t,e),B=pt.getInt32LE(t,e+4);e+=8;let K=new je(F,B);u&&c===!0?I=K.lessThanOrEqual(Art)&&K.greaterThanOrEqual(Crt)?K.toNumber():K:I=K}else if(C===cpe){let F=ge.allocateUnsafe(16);for(let B=0;B<16;B++)F[B]=t[e+B];e=e+16,I=new e0(F)}else if(C===Tj){let F=pt.getInt32LE(t,e);e+=4;let B=F,K=t[e++];if(F<0)throw new be("Negative binary type element size found");if(F>t.byteLength)throw new be("Binary type size larger than document size");if(K===lr.SUBTYPE_BYTE_ARRAY){if(F=pt.getInt32LE(t,e),e+=4,F<0)throw new be("Negative binary type element size found for subtype 0x02");if(F>B-4)throw new be("Binary type with subtype 0x02 contains too long binary size");if(F<B-4)throw new be("Binary type with subtype 0x02 contains too short binary size")}a&&c?I=ge.toLocalBufferType(t.subarray(e,e+F)):(I=new lr(t.subarray(e,e+F),K),K===Rj&&_1.isValid(I)&&(I=I.toUUID())),e=e+F}else if(C===m5&&o===!1){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new be("Bad BSON Document: illegal CString");let F=ge.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new be("Bad BSON Document: illegal CString");let B=ge.toUTF8(t,e,x,!1);e=x+1;let K=new Array(B.length);for(x=0;x<B.length;x++)switch(B[x]){case"m":K[x]="m";break;case"s":K[x]="g";break;case"i":K[x]="i";break}I=new RegExp(F,K.join(""))}else if(C===m5&&o===!0){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new be("Bad BSON Document: illegal CString");let F=ge.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new be("Bad BSON Document: illegal CString");let B=ge.toUTF8(t,e,x,!1);e=x+1,I=new Op(F,B)}else if(C===ope){let F=pt.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new be("bad string length in bson");let B=ge.toUTF8(t,e,e+F-1,M);I=c?B:new n0(B),e=e+F}else if(C===upe)I=new S1({i:pt.getUint32LE(t,e),t:pt.getUint32LE(t,e+4)}),e+=8;else if(C===lpe)I=new r0;else if(C===dpe)I=new t0;else if(C===xj){let F=pt.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new be("bad string length in bson");let B=ge.toUTF8(t,e,e+F-1,M);I=new Cp(B),e=e+F}else if(C===ape){let F=pt.getInt32LE(t,e);if(e+=4,F<13)throw new be("code_w_scope total size shorter minimum expected length");let B=pt.getInt32LE(t,e);if(e+=4,B<=0||B>t.length-e||t[e+B-1]!==0)throw new be("bad string length in bson");let K=ge.toUTF8(t,e,e+B-1,M);e=e+B;let k=e,G=pt.getInt32LE(t,e),ne=h5(t,k,r,!1);if(e=e+G,F<8+G+B)throw new be("code_w_scope total size is too short, truncating scope");if(F>8+G+B)throw new be("code_w_scope total size is too long, clips outer document");I=new Cp(K,ne)}else if(C===Ytt){let F=pt.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new be("bad string length in bson");let B=ge.toUTF8(t,e,e+F-1,M);e=e+F;let K=ge.allocateUnsafe(12);for(let G=0;G<12;G++)K[G]=t[e+G];let k=new Tp(K);e=e+12,I=new dd(B,k)}else throw new be(`Detected unknown BSON type ${C.toString(16)} for fieldname "${R}"`);R==="__proto__"?Object.defineProperty(w,R,{value:I,writable:!0,enumerable:!0,configurable:!0}):w[R]=I}if(v!==e-E)throw n?new be("corrupt array bson"):new be("corrupt object bson");if(!A)return w;if(mpe(w)){let C=Object.assign({},w);return delete C.$ref,delete C.$id,delete C.$db,new dd(w.$ref,w.$id,w.$db,C)}return w}var y5=/\x00/,Jde=new Set(["$db","$ref","$id","$clusterTime"]);function ej(t,e,r,n){t[n++]=tpe;let i=ge.encodeUTF8Into(t,e,n);n=n+i+1,t[n-1]=0;let s=ge.encodeUTF8Into(t,r,n+4);return pt.setInt32LE(t,n,s+1),n=n+4+s,t[n++]=0,n}function tj(t,e,r,n){let s=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=X4&&r>=Z4?Y4:Aj;t[n++]=s;let o=ge.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,s===Y4?n+=pt.setInt32LE(t,n,r):n+=pt.setFloat64LE(t,n,r),n}function rj(t,e,r,n){t[n++]=Ij;let i=ge.encodeUTF8Into(t,e,n);return n+=i,t[n++]=0,n+=pt.setBigInt64LE(t,n,r),n}function N2(t,e,r,n){t[n++]=Oj;let i=ge.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function nj(t,e,r,n){t[n++]=ipe;let i=ge.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,t[n++]=r?1:0,n}function ij(t,e,r,n){t[n++]=spe;let i=ge.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=je.fromNumber(r.getTime()),o=s.getLowBits(),a=s.getHighBits();return n+=pt.setInt32LE(t,n,o),n+=pt.setInt32LE(t,n,a),n}function sj(t,e,r,n){t[n++]=m5;let i=ge.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.source&&r.source.match(y5)!=null)throw new be("value "+r.source+" must not contain null bytes");return n=n+ge.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function oj(t,e,r,n){t[n++]=m5;let i=ge.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.pattern.match(y5)!=null)throw new be("pattern "+r.pattern+" must not contain null bytes");n=n+ge.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let s=r.options.split("").sort().join("");return n=n+ge.encodeUTF8Into(t,s,n),t[n++]=0,n}function aj(t,e,r,n){r===null?t[n++]=Oj:r._bsontype==="MinKey"?t[n++]=lpe:t[n++]=dpe;let i=ge.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function uj(t,e,r,n){t[n++]=npe;let i=ge.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=r.serializeInto(t,n),n}function cj(t,e,r,n){t[n++]=Tj;let i=ge.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.length;if(n+=pt.setInt32LE(t,n,s),t[n++]=Qtt,s<=16)for(let o=0;o<s;o++)t[n+o]=r[o];else t.set(r,n);return n=n+s,n}function lj(t,e,r,n,i,s,o,a,u){if(u.has(r))throw new be("Cannot convert circular structure to BSON");u.add(r),t[n++]=Array.isArray(r)?rpe:Cj;let c=ge.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=e3(t,r,i,n,s+1,o,a,u);return u.delete(r),l}function dj(t,e,r,n){t[n++]=cpe;let i=ge.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;for(let s=0;s<16;s++)t[n+s]=r.bytes[s];return n+16}function pj(t,e,r,n){t[n++]=r._bsontype==="Long"?Ij:upe;let i=ge.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.getLowBits(),o=r.getHighBits();return n+=pt.setInt32LE(t,n,s),n+=pt.setInt32LE(t,n,o),n}function fj(t,e,r,n){r=r.valueOf(),t[n++]=Y4;let i=ge.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=pt.setInt32LE(t,n,r),n}function hj(t,e,r,n){t[n++]=Aj;let i=ge.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=pt.setFloat64LE(t,n,r.value),n}function mj(t,e,r,n){t[n++]=xj;let i=ge.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.toString(),o=ge.encodeUTF8Into(t,s,n+4)+1;return pt.setInt32LE(t,n,o),n=n+4+o-1,t[n++]=0,n}function yj(t,e,r,n,i=!1,s=0,o=!1,a=!0,u){if(r.scope&&typeof r.scope=="object"){t[n++]=ape;let c=ge.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=n,d=r.code;n=n+4;let p=ge.encodeUTF8Into(t,d,n+4)+1;pt.setInt32LE(t,n,p),t[n+4+p-1]=0,n=n+p+4;let f=e3(t,r.scope,i,n,s+1,o,a,u);n=f-1;let h=f-l;l+=pt.setInt32LE(t,l,h),t[n++]=0}else{t[n++]=xj;let c=ge.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=r.code.toString(),d=ge.encodeUTF8Into(t,l,n+4)+1;pt.setInt32LE(t,n,d),n=n+4+d-1,t[n++]=0}return n}function gj(t,e,r,n){t[n++]=Tj;let i=ge.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.buffer,o=r.position;if(r.sub_type===lr.SUBTYPE_BYTE_ARRAY&&(o=o+4),n+=pt.setInt32LE(t,n,o),t[n++]=r.sub_type,r.sub_type===lr.SUBTYPE_BYTE_ARRAY&&(o=o-4,n+=pt.setInt32LE(t,n,o)),r.sub_type===lr.SUBTYPE_VECTOR&&vp(r),o<=16)for(let a=0;a<o;a++)t[n+a]=s[a];else t.set(s,n);return n=n+r.position,n}function bj(t,e,r,n){t[n++]=ope;let i=ge.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=ge.encodeUTF8Into(t,r.value,n+4)+1;return pt.setInt32LE(t,n,s),n=n+4+s-1,t[n++]=0,n}function _j(t,e,r,n,i,s,o){t[n++]=Cj;let a=ge.encodeUTF8Into(t,e,n);n=n+a,t[n++]=0;let u=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let l=e3(t,c,!1,n,i+1,s,!0,o),d=l-u;return u+=pt.setInt32LE(t,n,d),l}function e3(t,e,r,n,i,s,o,a){if(a==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new be("serialize does not support an array as the root input");if(typeof e!="object")throw new be("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new be("BSON types cannot be serialized as a document");if(q2(e)||B2(e)||F2(e)||Sj(e))throw new be("date, regexp, typedarray, and arraybuffer cannot be BSON documents");a=new Set}a.add(e);let u=n+4;if(Array.isArray(e))for(let l=0;l<e.length;l++){let d=`${l}`,p=e[l];typeof p?.toBSON=="function"&&(p=p.toBSON());let f=typeof p;if(p===void 0)u=N2(t,d,p,u);else if(p===null)u=N2(t,d,p,u);else if(f==="string")u=ej(t,d,p,u);else if(f==="number")u=tj(t,d,p,u);else if(f==="bigint")u=rj(t,d,p,u);else if(f==="boolean")u=nj(t,d,p,u);else if(f==="object"&&p._bsontype==null)p instanceof Date||q2(p)?u=ij(t,d,p,u):p instanceof Uint8Array||F2(p)?u=cj(t,d,p,u):p instanceof RegExp||B2(p)?u=sj(t,d,p,u):u=lj(t,d,p,u,r,i,s,o,a);else if(f==="object"){if(p[$2]!==Zm)throw new Ap;if(p._bsontype==="ObjectId")u=uj(t,d,p,u);else if(p._bsontype==="Decimal128")u=dj(t,d,p,u);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")u=pj(t,d,p,u);else if(p._bsontype==="Double")u=hj(t,d,p,u);else if(p._bsontype==="Code")u=yj(t,d,p,u,r,i,s,o,a);else if(p._bsontype==="Binary")u=gj(t,d,p,u);else if(p._bsontype==="BSONSymbol")u=bj(t,d,p,u);else if(p._bsontype==="DBRef")u=_j(t,d,p,u,i,s,a);else if(p._bsontype==="BSONRegExp")u=oj(t,d,p,u);else if(p._bsontype==="Int32")u=fj(t,d,p,u);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")u=aj(t,d,p,u);else if(typeof p._bsontype<"u")throw new be(`Unrecognized or invalid _bsontype: ${String(p._bsontype)}`)}else f==="function"&&s&&(u=mj(t,d,p,u))}else if(e instanceof Map||wj(e)){let l=e.entries(),d=!1;for(;!d;){let p=l.next();if(d=!!p.done,d)continue;let f=p.value?p.value[0]:void 0,h=p.value?p.value[1]:void 0;typeof h?.toBSON=="function"&&(h=h.toBSON());let y=typeof h;if(typeof f=="string"&&!Jde.has(f)){if(f.match(y5)!=null)throw new be("key "+f+" must not contain null bytes");if(r){if(f[0]==="$")throw new be("key "+f+" must not start with '$'");if(f.includes("."))throw new be("key "+f+" must not contain '.'")}}if(h===void 0)o===!1&&(u=N2(t,f,h,u));else if(h===null)u=N2(t,f,h,u);else if(y==="string")u=ej(t,f,h,u);else if(y==="number")u=tj(t,f,h,u);else if(y==="bigint")u=rj(t,f,h,u);else if(y==="boolean")u=nj(t,f,h,u);else if(y==="object"&&h._bsontype==null)h instanceof Date||q2(h)?u=ij(t,f,h,u):h instanceof Uint8Array||F2(h)?u=cj(t,f,h,u):h instanceof RegExp||B2(h)?u=sj(t,f,h,u):u=lj(t,f,h,u,r,i,s,o,a);else if(y==="object"){if(h[$2]!==Zm)throw new Ap;if(h._bsontype==="ObjectId")u=uj(t,f,h,u);else if(h._bsontype==="Decimal128")u=dj(t,f,h,u);else if(h._bsontype==="Long"||h._bsontype==="Timestamp")u=pj(t,f,h,u);else if(h._bsontype==="Double")u=hj(t,f,h,u);else if(h._bsontype==="Code")u=yj(t,f,h,u,r,i,s,o,a);else if(h._bsontype==="Binary")u=gj(t,f,h,u);else if(h._bsontype==="BSONSymbol")u=bj(t,f,h,u);else if(h._bsontype==="DBRef")u=_j(t,f,h,u,i,s,a);else if(h._bsontype==="BSONRegExp")u=oj(t,f,h,u);else if(h._bsontype==="Int32")u=fj(t,f,h,u);else if(h._bsontype==="MinKey"||h._bsontype==="MaxKey")u=aj(t,f,h,u);else if(typeof h._bsontype<"u")throw new be(`Unrecognized or invalid _bsontype: ${String(h._bsontype)}`)}else y==="function"&&s&&(u=mj(t,f,h,u))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new be("toBSON function did not return an object");for(let l of Object.keys(e)){let d=e[l];typeof d?.toBSON=="function"&&(d=d.toBSON());let p=typeof d;if(typeof l=="string"&&!Jde.has(l)){if(l.match(y5)!=null)throw new be("key "+l+" must not contain null bytes");if(r){if(l[0]==="$")throw new be("key "+l+" must not start with '$'");if(l.includes("."))throw new be("key "+l+" must not contain '.'")}}if(d===void 0)o===!1&&(u=N2(t,l,d,u));else if(d===null)u=N2(t,l,d,u);else if(p==="string")u=ej(t,l,d,u);else if(p==="number")u=tj(t,l,d,u);else if(p==="bigint")u=rj(t,l,d,u);else if(p==="boolean")u=nj(t,l,d,u);else if(p==="object"&&d._bsontype==null)d instanceof Date||q2(d)?u=ij(t,l,d,u):d instanceof Uint8Array||F2(d)?u=cj(t,l,d,u):d instanceof RegExp||B2(d)?u=sj(t,l,d,u):u=lj(t,l,d,u,r,i,s,o,a);else if(p==="object"){if(d[$2]!==Zm)throw new Ap;if(d._bsontype==="ObjectId")u=uj(t,l,d,u);else if(d._bsontype==="Decimal128")u=dj(t,l,d,u);else if(d._bsontype==="Long"||d._bsontype==="Timestamp")u=pj(t,l,d,u);else if(d._bsontype==="Double")u=hj(t,l,d,u);else if(d._bsontype==="Code")u=yj(t,l,d,u,r,i,s,o,a);else if(d._bsontype==="Binary")u=gj(t,l,d,u);else if(d._bsontype==="BSONSymbol")u=bj(t,l,d,u);else if(d._bsontype==="DBRef")u=_j(t,l,d,u,i,s,a);else if(d._bsontype==="BSONRegExp")u=oj(t,l,d,u);else if(d._bsontype==="Int32")u=fj(t,l,d,u);else if(d._bsontype==="MinKey"||d._bsontype==="MaxKey")u=aj(t,l,d,u);else if(typeof d._bsontype<"u")throw new be(`Unrecognized or invalid _bsontype: ${String(d._bsontype)}`)}else p==="function"&&s&&(u=mj(t,l,d,u))}}a.delete(e),t[u++]=0;let c=u-n;return n+=pt.setInt32LE(t,n,c),u}function Ort(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var xrt={$oid:Tp,$binary:lr,$uuid:lr,$symbol:n0,$numberInt:v1,$numberDecimal:e0,$numberDouble:E1,$numberLong:je,$minKey:r0,$maxKey:t0,$regex:Op,$regularExpression:Op,$timestamp:S1};function _pe(t,e={}){if(typeof t=="number"){let n=t<=X4&&t>=Z4,i=t<=Qde&&t>=Xde;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new v1(t);if(i)return e.useBigInt64?BigInt(t):je.fromNumber(t)}return new E1(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let i=xrt[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,i=new Date;if(e.legacy)if(typeof n=="number")i.setTime(n);else if(typeof n=="string")i.setTime(Date.parse(n));else if(typeof n=="bigint")i.setTime(Number(n));else throw new U2(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")i.setTime(Date.parse(n));else if(je.isLong(n))i.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)i.setTime(n);else if(typeof n=="bigint")i.setTime(Number(n));else throw new U2(`Unrecognized type for EJSON date: ${typeof n}`);return i}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=_pe(t.$scope)),Cp.fromExtendedJSON(t)}if(mpe(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof dd)return n;let i=Object.keys(n).filter(o=>o.startsWith("$")),s=!0;if(i.forEach(o=>{["$ref","$id","$db"].indexOf(o)===-1&&(s=!1)}),s)return dd.fromExtendedJSON(n)}return t}function Irt(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return wp(r,e)}finally{e.seenObjects.pop()}})}function Yde(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function wp(t,e){if(t instanceof Map||wj(t)){let r=Object.create(null);for(let[n,i]of t){if(typeof n!="string")throw new be("Can only serialize maps with string keys");r[n]=i}return wp(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(l=>l.propertyName),i=n.slice(0,r).map(l=>`${l} -> `).join(""),s=n[r],o=" -> "+n.slice(r+1,n.length-1).map(l=>`${l} -> `).join(""),a=n[n.length-1],u=" ".repeat(i.length+s.length/2),c="-".repeat(o.length+(s.length+a.length)/2-1);throw new be(`Converting circular structure to EJSON:
    ${i}${s}${o}${a}
    ${u}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return Irt(t,e);if(t===void 0)return null;if(t instanceof Date||q2(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:Yde(t)}:e.relaxed&&n?{$date:Yde(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=Z4&&t<=X4)return{$numberInt:t.toString()};if(t>=Xde&&t<=Qde)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||B2(t)){let r=t.flags;if(r===void 0){let i=t.toString().match(/[gimuy]*$/);i&&(r=i[0])}return new Op(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?Drt(t,e):t}var Rrt={Binary:t=>new lr(t.value(),t.sub_type),Code:t=>new Cp(t.code,t.scope),DBRef:t=>new dd(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new e0(t.bytes),Double:t=>new E1(t.value),Int32:t=>new v1(t.value),Long:t=>je.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new t0,MinKey:()=>new r0,ObjectId:t=>new Tp(t),BSONRegExp:t=>new Op(t.pattern,t.options),BSONSymbol:t=>new n0(t.value),Timestamp:t=>S1.fromBits(t.low,t.high)};function Drt(t,e){if(t==null||typeof t!="object")throw new be("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let i of Object.keys(t)){e.seenObjects.push({propertyName:i,obj:null});try{let s=wp(t[i],e);i==="__proto__"?Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):n[i]=s}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[$2]!==Zm)throw new Ap;if(Ort(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let i=Rrt[t._bsontype];if(!i)throw new be("Unrecognized or invalid _bsontype: "+t._bsontype);n=i(n)}return r==="Code"&&n.scope?n=new Cp(n.code,wp(n.scope,e)):r==="DBRef"&&n.oid&&(n=new dd(wp(n.collection,e),wp(n.oid,e),wp(n.db,e),wp(n.fields,e))),n.toExtendedJSON(e)}else throw new be("_bsontype must be a string, but was: "+typeof r)}}function Epe(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,i)=>{if(n.indexOf("\0")!==-1)throw new be(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return _pe(i,r)})}function vpe(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let i=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),s=wp(t,i);return JSON.stringify(s,e,r)}function krt(t,e){return e=e||{},JSON.parse(vpe(t,e))}function Mrt(t,e){return e=e||{},Epe(JSON.stringify(t),e)}var i0=Object.create(null);i0.parse=Epe;i0.stringify=vpe;i0.serialize=krt;i0.deserialize=Mrt;Object.freeze(i0);var jn={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function Ej(t,e){try{return pt.getNonnegativeInt32LE(t,e)}catch(r){throw new ju("BSON size cannot be negative",e,{cause:r})}}function vj(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new ju("Null terminator not found",e);return r}function Prt(t,e=0){if(e??=0,t.length<5)throw new ju(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=Ej(t,e);if(r>t.length-e)throw new ju(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new ju("BSON documents must end in 0x00",e+r);let n=[],i=e+4;for(;i<=r+e;){let s=t[i];if(i+=1,s===0){if(i-e!==r)throw new ju("Invalid 0x00 type byte",i);break}let o=i,a=vj(t,i)-o;i+=a+1;let u;if(s===jn.double||s===jn.long||s===jn.date||s===jn.timestamp)u=8;else if(s===jn.int)u=4;else if(s===jn.objectId)u=12;else if(s===jn.decimal)u=16;else if(s===jn.bool)u=1;else if(s===jn.null||s===jn.undefined||s===jn.maxKey||s===jn.minKey)u=0;else if(s===jn.regex)u=vj(t,vj(t,i)+1)+1-i;else if(s===jn.object||s===jn.array||s===jn.javascriptWithScope)u=Ej(t,i);else if(s===jn.string||s===jn.binData||s===jn.dbPointer||s===jn.javascript||s===jn.symbol)u=Ej(t,i)+4,s===jn.binData&&(u+=1),s===jn.dbPointer&&(u+=12);else throw new ju(`Invalid 0x${s.toString(16).padStart(2,"0")} type byte`,i);if(u>r)throw new ju("value reports length larger than document",i);n.push([s,o,a,i,u]),i+=u}return n}var K2=Object.create(null);K2.parseToElements=Prt;K2.ByteUtils=ge;K2.NumberUtils=pt;Object.freeze(K2);var Spe=1024*1024*17,b1=ge.allocate(Spe);function wpe(t){b1.length<t&&(b1=ge.allocate(t))}function Ape(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,i=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,s=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:Spe;b1.length<s&&(b1=ge.allocate(s));let o=e3(b1,t,r,0,0,n,i,null),a=ge.allocateUnsafe(o);return a.set(b1.subarray(0,o),0),a}function Cpe(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,s=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,a=e3(b1,t,n,0,0,i,s,null);return e.set(b1.subarray(0,a),o),o+a-1}function Tpe(t,e={}){return bpe(ge.toLocalBufferType(t),e)}function Ope(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return f5(t,r,n)}function xpe(t,e,r,n,i,s){let o=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},s),a=ge.toLocalBufferType(t),u=e;for(let c=0;c<r;c++){let l=pt.getInt32LE(a,u);o.index=u,n[i+c]=bpe(a,o),u=u+l}return u}var Nrt=Object.freeze({__proto__:null,BSONError:be,BSONOffsetError:ju,BSONRegExp:Op,BSONRuntimeError:U2,BSONSymbol:n0,BSONType:ppe,BSONValue:ro,BSONVersionError:Ap,Binary:lr,Code:Cp,DBRef:dd,Decimal128:e0,Double:E1,EJSON:i0,Int32:v1,Long:je,MaxKey:t0,MinKey:r0,ObjectId:Tp,Timestamp:S1,UUID:_1,calculateObjectSize:Ope,deserialize:Tpe,deserializeStream:xpe,onDemand:K2,serialize:Ape,serializeWithBufferAndIndex:Cpe,setInternalBufferSize:wpe});Fr.BSON=Nrt;Fr.BSONError=be;Fr.BSONOffsetError=ju;Fr.BSONRegExp=Op;Fr.BSONRuntimeError=U2;Fr.BSONSymbol=n0;Fr.BSONType=ppe;Fr.BSONValue=ro;Fr.BSONVersionError=Ap;Fr.Binary=lr;Fr.Code=Cp;Fr.DBRef=dd;Fr.Decimal128=e0;Fr.Double=E1;Fr.EJSON=i0;Fr.Int32=v1;Fr.Long=je;Fr.MaxKey=t0;Fr.MinKey=r0;Fr.ObjectId=Tp;Fr.Timestamp=S1;Fr.UUID=_1;Fr.calculateObjectSize=Ope;Fr.deserialize=Tpe;Fr.deserializeStream=xpe;Fr.onDemand=K2;Fr.serialize=Ape;Fr.serializeWithBufferAndIndex=Cpe;Fr.setInternalBufferSize=wpe});var yr=b(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.toUTF8=st.getBigInt64LE=st.getFloat64LE=st.getInt32LE=st.UUID=st.Timestamp=st.serialize=st.ObjectId=st.MinKey=st.MaxKey=st.Long=st.Int32=st.EJSON=st.Double=st.deserialize=st.Decimal128=st.DBRef=st.Code=st.calculateObjectSize=st.BSONType=st.BSONSymbol=st.BSONRegExp=st.BSONError=st.BSON=st.Binary=void 0;st.parseToElementsToArray=Frt;st.pluckBSONSerializeOptions=Brt;st.resolveBSONOptions=qrt;st.parseUtf8ValidationOption=Lrt;var t3=oa(),yi=oa();Object.defineProperty(st,"Binary",{enumerable:!0,get:function(){return yi.Binary}});Object.defineProperty(st,"BSON",{enumerable:!0,get:function(){return yi.BSON}});Object.defineProperty(st,"BSONError",{enumerable:!0,get:function(){return yi.BSONError}});Object.defineProperty(st,"BSONRegExp",{enumerable:!0,get:function(){return yi.BSONRegExp}});Object.defineProperty(st,"BSONSymbol",{enumerable:!0,get:function(){return yi.BSONSymbol}});Object.defineProperty(st,"BSONType",{enumerable:!0,get:function(){return yi.BSONType}});Object.defineProperty(st,"calculateObjectSize",{enumerable:!0,get:function(){return yi.calculateObjectSize}});Object.defineProperty(st,"Code",{enumerable:!0,get:function(){return yi.Code}});Object.defineProperty(st,"DBRef",{enumerable:!0,get:function(){return yi.DBRef}});Object.defineProperty(st,"Decimal128",{enumerable:!0,get:function(){return yi.Decimal128}});Object.defineProperty(st,"deserialize",{enumerable:!0,get:function(){return yi.deserialize}});Object.defineProperty(st,"Double",{enumerable:!0,get:function(){return yi.Double}});Object.defineProperty(st,"EJSON",{enumerable:!0,get:function(){return yi.EJSON}});Object.defineProperty(st,"Int32",{enumerable:!0,get:function(){return yi.Int32}});Object.defineProperty(st,"Long",{enumerable:!0,get:function(){return yi.Long}});Object.defineProperty(st,"MaxKey",{enumerable:!0,get:function(){return yi.MaxKey}});Object.defineProperty(st,"MinKey",{enumerable:!0,get:function(){return yi.MinKey}});Object.defineProperty(st,"ObjectId",{enumerable:!0,get:function(){return yi.ObjectId}});Object.defineProperty(st,"serialize",{enumerable:!0,get:function(){return yi.serialize}});Object.defineProperty(st,"Timestamp",{enumerable:!0,get:function(){return yi.Timestamp}});Object.defineProperty(st,"UUID",{enumerable:!0,get:function(){return yi.UUID}});function Frt(t,e){let r=t3.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}st.getInt32LE=t3.BSON.onDemand.NumberUtils.getInt32LE;st.getFloat64LE=t3.BSON.onDemand.NumberUtils.getFloat64LE;st.getBigInt64LE=t3.BSON.onDemand.NumberUtils.getBigInt64LE;st.toUTF8=t3.BSON.onDemand.ByteUtils.toUTF8;function Brt(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}}function qrt(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function Lrt(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var Fe=b(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.MongoWriteConcernError=le.MongoServerSelectionError=le.MongoSystemError=le.MongoMissingDependencyError=le.MongoMissingCredentialsError=le.MongoCompatibilityError=le.MongoInvalidArgumentError=le.MongoParseError=le.MongoNetworkTimeoutError=le.MongoNetworkError=le.MongoClientClosedError=le.MongoTopologyClosedError=le.MongoCursorExhaustedError=le.MongoServerClosedError=le.MongoCursorInUseError=le.MongoOperationTimeoutError=le.MongoUnexpectedServerResponseError=le.MongoGridFSChunkError=le.MongoGridFSStreamError=le.MongoTailableCursorError=le.MongoChangeStreamError=le.MongoClientBulkWriteExecutionError=le.MongoClientBulkWriteCursorError=le.MongoClientBulkWriteError=le.MongoGCPError=le.MongoAzureError=le.MongoOIDCError=le.MongoAWSError=le.MongoKerberosError=le.MongoExpiredSessionError=le.MongoTransactionError=le.MongoNotConnectedError=le.MongoDecompressionError=le.MongoBatchReExecutionError=le.MongoStalePrimaryError=le.MongoRuntimeError=le.MongoAPIError=le.MongoDriverError=le.MongoServerError=le.MongoError=le.MongoErrorLabel=le.GET_MORE_RESUMABLE_CODES=le.MONGODB_ERROR_CODES=le.NODE_IS_RECOVERING_ERROR_MESSAGE=le.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;le.needsRetryableWriteLabel=$rt;le.isRetryableWriteError=Rpe;le.isRetryableReadError=Urt;le.isNodeShuttingDownError=zrt;le.isSDAMUnrecoverableError=Wrt;le.isNetworkTimeoutError=Jrt;le.isResumableError=Yrt;le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");le.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");le.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");le.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});le.GET_MORE_RESUMABLE_CODES=new Set([le.MONGODB_ERROR_CODES.HostUnreachable,le.MONGODB_ERROR_CODES.HostNotFound,le.MONGODB_ERROR_CODES.NetworkTimeout,le.MONGODB_ERROR_CODES.ShutdownInProgress,le.MONGODB_ERROR_CODES.PrimarySteppedDown,le.MONGODB_ERROR_CODES.ExceededTimeLimit,le.MONGODB_ERROR_CODES.SocketException,le.MONGODB_ERROR_CODES.NotWritablePrimary,le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,le.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,le.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,le.MONGODB_ERROR_CODES.StaleShardVersion,le.MONGODB_ERROR_CODES.StaleEpoch,le.MONGODB_ERROR_CODES.StaleConfig,le.MONGODB_ERROR_CODES.RetryChangeStream,le.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,le.MONGODB_ERROR_CODES.CursorNotFound]);le.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function jrt(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var Xc=class extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(e,r){super(e,r),this.errorLabelSet=new Set}static buildErrorMessage(e){return typeof e=="string"?e:jrt(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this.errorLabelSet.has(e)}addErrorLabel(e){this.errorLabelSet.add(e)}};le.MongoError=Xc;var r3=class extends Xc{constructor(e){if(super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels)for(let r of e.errorLabels)this.addErrorLabel(r);this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};le.MongoServerError=r3;var s0=class extends Xc{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};le.MongoDriverError=s0;var ks=class extends s0{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};le.MongoAPIError=ks;var aa=class extends s0{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};le.MongoRuntimeError=aa;var kj=class extends aa{constructor(e,r){super(e,r)}get name(){return"MongoStalePrimaryError"}};le.MongoStalePrimaryError=kj;var Mj=class extends ks{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};le.MongoBatchReExecutionError=Mj;var Pj=class extends aa{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};le.MongoDecompressionError=Pj;var Nj=class extends ks{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};le.MongoNotConnectedError=Nj;var Fj=class extends ks{constructor(e){super(e)}get name(){return"MongoTransactionError"}};le.MongoTransactionError=Fj;var Bj=class extends ks{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};le.MongoExpiredSessionError=Bj;var qj=class extends aa{constructor(e){super(e)}get name(){return"MongoKerberosError"}};le.MongoKerberosError=qj;var Lj=class extends aa{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};le.MongoAWSError=Lj;var n3=class extends aa{constructor(e){super(e)}get name(){return"MongoOIDCError"}};le.MongoOIDCError=n3;var jj=class extends n3{constructor(e){super(e)}get name(){return"MongoAzureError"}};le.MongoAzureError=jj;var $j=class extends n3{constructor(e){super(e)}get name(){return"MongoGCPError"}};le.MongoGCPError=$j;var Uj=class extends r3{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};le.MongoClientBulkWriteError=Uj;var Kj=class extends aa{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};le.MongoClientBulkWriteCursorError=Kj;var Vj=class extends aa{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};le.MongoClientBulkWriteExecutionError=Vj;var Gj=class extends aa{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};le.MongoChangeStreamError=Gj;var Hj=class extends ks{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};le.MongoTailableCursorError=Hj;var zj=class extends aa{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};le.MongoGridFSStreamError=zj;var Wj=class extends aa{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};le.MongoGridFSChunkError=Wj;var Jj=class extends aa{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};le.MongoUnexpectedServerResponseError=Jj;var Yj=class extends s0{get name(){return"MongoOperationTimeoutError"}};le.MongoOperationTimeoutError=Yj;var Qj=class extends ks{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};le.MongoCursorInUseError=Qj;var Xj=class extends ks{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};le.MongoServerClosedError=Xj;var Zj=class extends ks{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};le.MongoCursorExhaustedError=Zj;var e$=class extends ks{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};le.MongoTopologyClosedError=e$;var t$=class extends ks{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}};le.MongoClientClosedError=t$;var w1=class extends Xc{constructor(e,r){super(e,{cause:r?.cause}),this.beforeHandshake=!!r?.beforeHandshake}get name(){return"MongoNetworkError"}};le.MongoNetworkError=w1;var r$=class extends w1{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};le.MongoNetworkTimeoutError=r$;var g5=class extends s0{constructor(e){super(e)}get name(){return"MongoParseError"}};le.MongoParseError=g5;var n$=class extends ks{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};le.MongoInvalidArgumentError=n$;var i$=class extends ks{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};le.MongoCompatibilityError=i$;var s$=class extends ks{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};le.MongoMissingCredentialsError=s$;var o$=class extends ks{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};le.MongoMissingDependencyError=o$;var b5=class extends Xc{constructor(e,r){r&&r.error?super(Xc.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};le.MongoSystemError=b5;var _5=class extends b5{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};le.MongoServerSelectionError=_5;var E5=class extends r3{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};le.MongoWriteConcernError=E5;var Ipe=new Set([le.MONGODB_ERROR_CODES.HostUnreachable,le.MONGODB_ERROR_CODES.HostNotFound,le.MONGODB_ERROR_CODES.NetworkTimeout,le.MONGODB_ERROR_CODES.ShutdownInProgress,le.MONGODB_ERROR_CODES.PrimarySteppedDown,le.MONGODB_ERROR_CODES.SocketException,le.MONGODB_ERROR_CODES.NotWritablePrimary,le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,le.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,le.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,le.MONGODB_ERROR_CODES.ExceededTimeLimit,le.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),Dj=Ipe;function $rt(t,e,r){if(t instanceof w1)return!0;if(t instanceof Xc&&(e>=9||Rpe(t))&&!t.hasErrorLabel(le.MongoErrorLabel.HandshakeError))return!1;if(t instanceof E5){if(r==="Mongos"&&e<9)return Dj.has(t.result.code??0);let s=t.result.writeConcernError.code??Number(t.code);return Dj.has(Number.isNaN(s)?0:s)}return t instanceof Xc?Dj.has(Number(t.code)):!!(le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||le.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function Rpe(t){return t.hasErrorLabel(le.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel(le.MongoErrorLabel.PoolRequstedRetry)}function Urt(t){return!!((typeof t.code=="number"?Ipe.has(t.code):!1)||t instanceof w1||le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||le.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var Krt=new Set([le.MONGODB_ERROR_CODES.ShutdownInProgress,le.MONGODB_ERROR_CODES.PrimarySteppedDown,le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,le.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Vrt=new Set([le.MONGODB_ERROR_CODES.NotWritablePrimary,le.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,le.MONGODB_ERROR_CODES.LegacyNotPrimary]),Grt=new Set([le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.ShutdownInProgress]);function Dpe(t){return typeof t.code=="number"?Krt.has(t.code):le.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||le.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function Hrt(t){return typeof t.code=="number"?Vrt.has(t.code):Dpe(t)?!1:le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function zrt(t){return!!(typeof t.code=="number"&&Grt.has(t.code))}function Wrt(t){return t instanceof g5||t==null?!0:Dpe(t)||Hrt(t)}function Jrt(t){return!!(t instanceof w1&&t.message.match(/timed out/))}function Yrt(t,e){return t==null||!(t instanceof Xc)?!1:t instanceof w1||t instanceof _5?!0:e!=null&&e>=9?t.code===le.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel(le.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?le.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var A1=b(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.OP_MSG=Dr.OP_COMPRESSED=Dr.OP_DELETE=Dr.OP_QUERY=Dr.OP_INSERT=Dr.OP_UPDATE=Dr.OP_REPLY=Dr.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=Dr.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=Dr.MIN_SUPPORTED_QE_SERVER_VERSION=Dr.MIN_SUPPORTED_QE_WIRE_VERSION=Dr.MAX_SUPPORTED_WIRE_VERSION=Dr.MIN_SUPPORTED_WIRE_VERSION=Dr.MAX_SUPPORTED_SERVER_VERSION=Dr.MIN_SUPPORTED_SERVER_VERSION=void 0;Dr.MIN_SUPPORTED_SERVER_VERSION="4.2";Dr.MAX_SUPPORTED_SERVER_VERSION="8.2";Dr.MIN_SUPPORTED_WIRE_VERSION=8;Dr.MAX_SUPPORTED_WIRE_VERSION=27;Dr.MIN_SUPPORTED_QE_WIRE_VERSION=21;Dr.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Dr.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;Dr.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";Dr.OP_REPLY=1;Dr.OP_UPDATE=2001;Dr.OP_INSERT=2002;Dr.OP_QUERY=2004;Dr.OP_DELETE=2006;Dr.OP_COMPRESSED=2012;Dr.OP_MSG=2013});var gi=b(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.END=re.CHANGE=re.INIT=re.MORE=re.RESPONSE=re.SERVER_HEARTBEAT_FAILED=re.SERVER_HEARTBEAT_SUCCEEDED=re.SERVER_HEARTBEAT_STARTED=re.COMMAND_FAILED=re.COMMAND_SUCCEEDED=re.COMMAND_STARTED=re.CLUSTER_TIME_RECEIVED=re.CONNECTION_CHECKED_IN=re.CONNECTION_CHECKED_OUT=re.CONNECTION_CHECK_OUT_FAILED=re.CONNECTION_CHECK_OUT_STARTED=re.CONNECTION_CLOSED=re.CONNECTION_READY=re.CONNECTION_CREATED=re.CONNECTION_POOL_READY=re.CONNECTION_POOL_CLEARED=re.CONNECTION_POOL_CLOSED=re.CONNECTION_POOL_CREATED=re.WAITING_FOR_SUITABLE_SERVER=re.SERVER_SELECTION_SUCCEEDED=re.SERVER_SELECTION_FAILED=re.SERVER_SELECTION_STARTED=re.TOPOLOGY_DESCRIPTION_CHANGED=re.TOPOLOGY_CLOSED=re.TOPOLOGY_OPENING=re.SERVER_DESCRIPTION_CHANGED=re.SERVER_CLOSED=re.SERVER_OPENING=re.DESCRIPTION_RECEIVED=re.UNPINNED=re.PINNED=re.MESSAGE=re.ENDED=re.CLOSED=re.CONNECT=re.OPEN=re.CLOSE=re.TIMEOUT=re.ERROR=re.SYSTEM_JS_COLLECTION=re.SYSTEM_COMMAND_COLLECTION=re.SYSTEM_USER_COLLECTION=re.SYSTEM_PROFILE_COLLECTION=re.SYSTEM_INDEX_COLLECTION=re.SYSTEM_NAMESPACE_COLLECTION=void 0;re.kDecoratedKeys=re.kDecorateResult=re.LEGACY_HELLO_COMMAND_CAMEL_CASE=re.LEGACY_HELLO_COMMAND=re.MONGO_CLIENT_EVENTS=re.LOCAL_SERVER_EVENTS=re.SERVER_RELAY_EVENTS=re.APM_EVENTS=re.TOPOLOGY_EVENTS=re.CMAP_EVENTS=re.HEARTBEAT_EVENTS=re.RESUME_TOKEN_CHANGED=void 0;re.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";re.SYSTEM_INDEX_COLLECTION="system.indexes";re.SYSTEM_PROFILE_COLLECTION="system.profile";re.SYSTEM_USER_COLLECTION="system.users";re.SYSTEM_COMMAND_COLLECTION="$cmd";re.SYSTEM_JS_COLLECTION="system.js";re.ERROR="error";re.TIMEOUT="timeout";re.CLOSE="close";re.OPEN="open";re.CONNECT="connect";re.CLOSED="closed";re.ENDED="ended";re.MESSAGE="message";re.PINNED="pinned";re.UNPINNED="unpinned";re.DESCRIPTION_RECEIVED="descriptionReceived";re.SERVER_OPENING="serverOpening";re.SERVER_CLOSED="serverClosed";re.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";re.TOPOLOGY_OPENING="topologyOpening";re.TOPOLOGY_CLOSED="topologyClosed";re.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";re.SERVER_SELECTION_STARTED="serverSelectionStarted";re.SERVER_SELECTION_FAILED="serverSelectionFailed";re.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";re.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";re.CONNECTION_POOL_CREATED="connectionPoolCreated";re.CONNECTION_POOL_CLOSED="connectionPoolClosed";re.CONNECTION_POOL_CLEARED="connectionPoolCleared";re.CONNECTION_POOL_READY="connectionPoolReady";re.CONNECTION_CREATED="connectionCreated";re.CONNECTION_READY="connectionReady";re.CONNECTION_CLOSED="connectionClosed";re.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";re.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";re.CONNECTION_CHECKED_OUT="connectionCheckedOut";re.CONNECTION_CHECKED_IN="connectionCheckedIn";re.CLUSTER_TIME_RECEIVED="clusterTimeReceived";re.COMMAND_STARTED="commandStarted";re.COMMAND_SUCCEEDED="commandSucceeded";re.COMMAND_FAILED="commandFailed";re.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";re.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";re.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";re.RESPONSE="response";re.MORE="more";re.INIT="init";re.CHANGE="change";re.END="end";re.RESUME_TOKEN_CHANGED="resumeTokenChanged";re.HEARTBEAT_EVENTS=Object.freeze([re.SERVER_HEARTBEAT_STARTED,re.SERVER_HEARTBEAT_SUCCEEDED,re.SERVER_HEARTBEAT_FAILED]);re.CMAP_EVENTS=Object.freeze([re.CONNECTION_POOL_CREATED,re.CONNECTION_POOL_READY,re.CONNECTION_POOL_CLEARED,re.CONNECTION_POOL_CLOSED,re.CONNECTION_CREATED,re.CONNECTION_READY,re.CONNECTION_CLOSED,re.CONNECTION_CHECK_OUT_STARTED,re.CONNECTION_CHECK_OUT_FAILED,re.CONNECTION_CHECKED_OUT,re.CONNECTION_CHECKED_IN]);re.TOPOLOGY_EVENTS=Object.freeze([re.SERVER_OPENING,re.SERVER_CLOSED,re.SERVER_DESCRIPTION_CHANGED,re.TOPOLOGY_OPENING,re.TOPOLOGY_CLOSED,re.TOPOLOGY_DESCRIPTION_CHANGED,re.ERROR,re.TIMEOUT,re.CLOSE]);re.APM_EVENTS=Object.freeze([re.COMMAND_STARTED,re.COMMAND_SUCCEEDED,re.COMMAND_FAILED]);re.SERVER_RELAY_EVENTS=Object.freeze([re.SERVER_HEARTBEAT_STARTED,re.SERVER_HEARTBEAT_SUCCEEDED,re.SERVER_HEARTBEAT_FAILED,re.COMMAND_STARTED,re.COMMAND_SUCCEEDED,re.COMMAND_FAILED,...re.CMAP_EVENTS]);re.LOCAL_SERVER_EVENTS=Object.freeze([re.CONNECT,re.DESCRIPTION_RECEIVED,re.CLOSED,re.ENDED]);re.MONGO_CLIENT_EVENTS=Object.freeze([...re.CMAP_EVENTS,...re.APM_EVENTS,...re.TOPOLOGY_EVENTS,...re.HEARTBEAT_EVENTS]);re.LEGACY_HELLO_COMMAND="ismaster";re.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";re.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");re.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var el=b(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ReadConcern=Zc.ReadConcernLevel=void 0;Zc.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var a$=class t{constructor(e){this.level=Zc.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return Zc.ReadConcernLevel.majority}static get AVAILABLE(){return Zc.ReadConcernLevel.available}static get LINEARIZABLE(){return Zc.ReadConcernLevel.linearizable}static get SNAPSHOT(){return Zc.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};Zc.ReadConcern=a$});var ps=b(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.ReadPreference=no.ReadPreferenceMode=void 0;var o0=Fe();no.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var ds=class t{constructor(e,r,n){if(!t.isValid(e))throw new o0.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new o0.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new o0.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new o0.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new o0.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new o0.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let i=r.mode||r.preference;if(i&&typeof i=="string")return new t(i,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new o0.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};no.ReadPreference=ds;ds.PRIMARY=no.ReadPreferenceMode.primary;ds.PRIMARY_PREFERRED=no.ReadPreferenceMode.primaryPreferred;ds.SECONDARY=no.ReadPreferenceMode.secondary;ds.SECONDARY_PREFERRED=no.ReadPreferenceMode.secondaryPreferred;ds.NEAREST=no.ReadPreferenceMode.nearest;ds.primary=new ds(no.ReadPreferenceMode.primary);ds.primaryPreferred=new ds(no.ReadPreferenceMode.primaryPreferred);ds.secondary=new ds(no.ReadPreferenceMode.secondary);ds.secondaryPreferred=new ds(no.ReadPreferenceMode.secondaryPreferred);ds.nearest=new ds(no.ReadPreferenceMode.nearest)});var Wa=b(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.ServerType=Ro.TopologyType=Ro.STATE_CONNECTED=Ro.STATE_CONNECTING=Ro.STATE_CLOSED=Ro.STATE_CLOSING=void 0;Ro._advanceClusterTime=Qrt;Ro.STATE_CLOSING="closing";Ro.STATE_CLOSED="closed";Ro.STATE_CONNECTING="connecting";Ro.STATE_CONNECTED="connected";Ro.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});Ro.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function Qrt(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var Do=b(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});a0.WriteConcern=a0.WRITE_CONCERN_KEYS=void 0;a0.throwIfWriteConcernError=Zrt;var kpe=kr(),Xrt=Fe();a0.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var u$=class t{constructor(e,r,n,i){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),i!=null&&(this.journal=this.j=!!i)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let s={...r instanceof t?r:r.writeConcern,...n},{w:o=void 0,wtimeout:a=void 0,j:u=void 0,fsync:c=void 0,journal:l=void 0,wtimeoutMS:d=void 0}=s;if(o!=null||a!=null||d!=null||u!=null||l!=null||c!=null)return new t(o,a??d,u??l,c)}};a0.WriteConcern=u$;function Zrt(t){if(typeof t=="object"&&t!=null){let e=kpe.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!kpe.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new Xrt.MongoWriteConcernError(e)}}});var Ze=b(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.kDispose=Ne.randomBytes=Ne.COSMOS_DB_MSG=Ne.DOCUMENT_DB_MSG=Ne.COSMOS_DB_CHECK=Ne.DOCUMENT_DB_CHECK=Ne.MONGODB_WARNING_CODE=Ne.DEFAULT_PK_FACTORY=Ne.HostAddress=Ne.BufferPool=Ne.List=Ne.MongoDBCollectionNamespace=Ne.MongoDBNamespace=Ne.ByteUtils=void 0;Ne.isUint8Array=ant;Ne.hostMatchesWildcards=unt;Ne.normalizeHintField=cnt;Ne.isObject=l$;Ne.mergeOptions=dnt;Ne.filterOptions=pnt;Ne.applyRetryableWrites=fnt;Ne.isPromiseLike=hnt;Ne.decorateWithCollation=mnt;Ne.decorateWithReadConcern=ynt;Ne.getTopology=gnt;Ne.ns=bnt;Ne.makeCounter=_nt;Ne.uuidV4=Ent;Ne.maxWireVersion=vnt;Ne.arrayStrictEqual=Snt;Ne.errorStrictEqual=wnt;Ne.makeStateMachine=Ant;Ne.now=qpe;Ne.calculateDurationInMs=Cnt;Ne.hasAtomicOperators=Lpe;Ne.resolveTimeoutOptions=Tnt;Ne.resolveOptions=Ont;Ne.isSuperset=jpe;Ne.isHello=xnt;Ne.setDifference=Int;Ne.isRecord=Dnt;Ne.emitWarning=$pe;Ne.emitWarningOnce=knt;Ne.enumToString=Mnt;Ne.supportsRetryableWrites=Pnt;Ne.shuffle=Nnt;Ne.commandSupportsReadConcern=Fnt;Ne.compareObjectId=Bnt;Ne.parseInteger=Upe;Ne.parseUnsignedInteger=qnt;Ne.checkParentDomainMatch=Lnt;Ne.get=jnt;Ne.request=$nt;Ne.isHostMatch=Unt;Ne.promiseWithResolvers=h$;Ne.squashError=Knt;Ne.once=Vnt;Ne.maybeAddIdToDocuments=Gnt;Ne.fileIsAccessible=Hnt;Ne.csotMin=znt;Ne.noop=Wnt;Ne.decorateDecryptionResult=Kpe;Ne.addAbortListener=m$;Ne.abortable=Jnt;var Fpe=require("crypto"),ent=require("fs"),Bpe=require("http"),c$=require("timers"),tnt=require("url"),rnt=require("url"),nnt=require("util"),f$=yr(),Mpe=A1(),v5=gi(),ko=Fe(),int=el(),snt=ps(),ont=Wa(),Ppe=Do();Ne.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return Ne.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return Ne.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return Ne.ByteUtils.toLocalBufferType(t).toString("base64")}};function ant(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function unt(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function cnt(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var lnt=t=>Object.prototype.toString.call(t);function l$(t){return lnt(t)==="[object Object]"}function dnt(t,e){return{...t,...e}}function pnt(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function fnt(t,e){return e&&e.s.options?.retryWrites&&(t.retryWrites=!0),t}function hnt(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function mnt(t,e){e.collation&&typeof e.collation=="object"&&(t.collation=e.collation)}function ynt(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function gnt(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new ko.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function bnt(t){return i3.fromString(t)}var i3=class t{constructor(e,r){this.db=e,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new S5(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new ko.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),i=n.join(".");return new t(r,i===""?void 0:i)}};Ne.MongoDBNamespace=i3;var S5=class extends i3{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};Ne.MongoDBCollectionNamespace=S5;function*_nt(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function Ent(){let t=Fpe.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function vnt(t){if(t){if(t.hello)return t.hello.maxWireVersion;if(t.serverApi?.version||t.loadBalanced)return Mpe.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function Snt(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function wnt(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function Ant(t){return function(r,n){let i=t[r.s.state];if(i&&i.indexOf(n)<0)throw new ko.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${i}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function qpe(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function Cnt(t){if(typeof t!="number")return-1;let e=qpe()-t;return e<0?0:e}function Lpe(t,e){if(Array.isArray(t)){for(let n of t)if(Lpe(n))return!0;return!1}let r=Object.keys(t);if(e?.ignoreUndefined){let n=!0;for(let i of r)if(t[i]!==void 0){n=!1;break}if(n)throw new ko.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return r.length>0&&r[0][0]==="$"}function Tnt(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s,...e}}function Ont(t,e){let r=Object.assign({},e,(0,f$.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,i=e?.session;if(!i?.inTransaction()){let a=int.ReadConcern.fromOptions(e)??t?.readConcern;a&&(r.readConcern=a);let u=Ppe.WriteConcern.fromOptions(e)??t?.writeConcern;u&&(n!=null&&(u=Ppe.WriteConcern.fromOptions({writeConcern:{...u,wtimeout:void 0,wtimeoutMS:void 0}})),r.writeConcern=u)}r.timeoutMS=n;let s=snt.ReadPreference.fromOptions(e)??t?.readPreference;if(s&&(r.readPreference=s),i?.explicit&&i?.timeoutContext!=null&&e?.timeoutMS!=null)throw new ko.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function jpe(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function xnt(t){return!!(t[v5.LEGACY_HELLO_COMMAND]||t.hello)}function Int(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var Rnt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function Dnt(t,e=void 0){if(!l$(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!l$(r.prototype)||!Rnt(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return jpe(n,e)}return!0}var w5=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};Ne.List=w5;var d$=class{constructor(){this.buffers=new w5,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new ko.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let i=this.buffers.shift();if(i==null)break;let s=e-n,o=Math.min(s,i.byteLength),a=i.subarray(0,o);r.set(a,n),n+=o,this.totalByteLength-=o,o<i.byteLength&&this.buffers.unshift(i.subarray(o))}return r}};Ne.BufferPool=d$;var p$=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,i;try{i=new rnt.URL(n)}catch(u){let c=new ko.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=u,c}let s=i.hostname,o=i.port,a=decodeURIComponent(s).toLowerCase();if(a.startsWith("[")&&a.endsWith("]")&&(this.isIPv6=!0,a=a.substring(1,s.length-1)),this.host=a.toLowerCase(),typeof o=="number"?this.port=o:typeof o=="string"&&o!==""?this.port=Number.parseInt(o,10):this.port=27017,this.port===0)throw new ko.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};Ne.HostAddress=p$;Ne.DEFAULT_PK_FACTORY={createPk(){return new f$.ObjectId}};Ne.MONGODB_WARNING_CODE="MONGODB DRIVER";function $pe(t){return process.emitWarning(t,{code:Ne.MONGODB_WARNING_CODE})}var Npe=new Set;function knt(t){if(!Npe.has(t))return Npe.add(t),$pe(t)}function Mnt(t){return Object.values(t).join(", ")}function Pnt(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==ont.ServerType.Standalone):!1}function Nnt(t,e=0){let r=Array.from(t);if(e>r.length)throw new ko.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,i=e%r.length===0?1:r.length-e;for(;n>i;){let s=Math.floor(Math.random()*n);n-=1;let o=r[n];r[n]=r[s],r[s]=o}return e%r.length===0?r:r.slice(i)}function Fnt(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function Bnt(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:Ne.ByteUtils.compare(t.id,e.id)}function Upe(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function qnt(t){let e=Upe(t);return e!=null&&e>=0?e:null}function Lnt(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,i=/^.*?\./,s=n.split(".").length<3,o=`.${r.replace(i,"")}`,a=s?n:`.${n.replace(i,"")}`;if(a.startsWith(".")||(a="."+a),s&&r.split(".").length<=n.split(".").length)throw new ko.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!o.endsWith(a))throw new ko.MongoAPIError("Server record does not share hostname with parent URI")}function jnt(t,e={}){return new Promise((r,n)=>{let i,s=Bpe.get(t,e,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>a+=u),o.on("end",()=>{(0,c$.clearTimeout)(i),r({status:o.statusCode,body:a})})}).on("error",o=>{(0,c$.clearTimeout)(i),n(o)}).end();i=(0,c$.setTimeout)(()=>{s.destroy(new ko.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function $nt(t,e={}){return await new Promise((r,n)=>{let i={method:"GET",timeout:1e4,json:!0,...tnt.parse(t),...e},s=Bpe.request(i,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>{a+=u}),o.once("end",()=>{if(e.json===!1){r(a);return}try{let u=JSON.parse(a);r(u)}catch{n(new ko.MongoRuntimeError(`Invalid JSON response: "${a}"`))}})});s.once("timeout",()=>s.destroy(new ko.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),s.once("error",o=>n(o)),s.end()})}Ne.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;Ne.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;Ne.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";Ne.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Unt(t,e){return!!(e&&t.test(e.toLowerCase()))}function h$(){let t,e;return{promise:new Promise(function(i,s){t=i,e=s}),resolve:t,reject:e}}function Knt(t){}Ne.randomBytes=(0,nnt.promisify)(Fpe.randomBytes);async function Vnt(t,e,r){r?.signal?.throwIfAborted();let{promise:n,resolve:i,reject:s}=h$(),o=c=>i(c),a=c=>s(c),u=m$(r?.signal,function(){s(this.reason)});t.once(e,o).once("error",a);try{return await n}finally{t.off(e,o),t.off("error",a),u?.[Ne.kDispose]()}}function Gnt(t,e,r){return(r.forceServerObjectId??t.db.options?.forceServerObjectId??!1)||e._id==null&&(e._id=t.s.pkFactory.createPk()),e}async function Hnt(t,e){try{return await ent.promises.access(t,e),!0}catch{return!1}}function znt(t,e){return t===0?e:e===0?t:Math.min(t,e)}function Wnt(){}function Kpe(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,f$.deserialize)(e)),Buffer.isBuffer(t)))throw new ko.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let i=e[n];if(i&&i._bsontype==="Binary"&&i.sub_type===6){t[v5.kDecoratedKeys]||Object.defineProperty(t,v5.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[v5.kDecoratedKeys].push(n);continue}Kpe(t[n],i,!1)}}Ne.kDispose=Symbol.dispose??Symbol("dispose");function m$(t,e){if(t!=null)return t.addEventListener("abort",e,{once:!0}),{[Ne.kDispose]:()=>t.removeEventListener("abort",e)}}async function Jnt(t,{signal:e}){if(e==null)return await t;let{promise:r,reject:n}=h$(),i=e.aborted?n(e.reason):m$(e,function(){n(this.reason)});try{return await Promise.race([t,r])}finally{i?.[Ne.kDispose]()}}});var Vpe=b(A5=>{"use strict";Object.defineProperty(A5,"__esModule",{value:!0});A5.OnDemandDocument=void 0;var Jt=yr(),s3={type:0,nameOffset:1,nameLength:2,offset:3,length:4},y$=class t{constructor(e,r=0,n=!1,i){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=e,this.offset=r,this.isArray=n,this.elements=i??(0,Jt.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[s3.nameLength],i=r[s3.nameOffset];if(e.length!==n)return!1;let s=i+n;for(let o=i,a=0;a<e.length&&o<s;a++,o++)if(this.bson[o]!==e.charCodeAt(a))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let i={element:this.elements[e],value:void 0};return this.cache[e]=i,this.indexFound[e]=!0,i}else return null;else return null;for(let n=0;n<this.elements.length;n++){let i=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,i)){let s={element:i,value:void 0};return this.cache[e]=s,this.indexFound[n]=!0,s}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[s3.type],i=e[s3.offset],s=e[s3.length];if(r!==n)return null;switch(r){case Jt.BSONType.null:case Jt.BSONType.undefined:return null;case Jt.BSONType.double:return(0,Jt.getFloat64LE)(this.bson,i);case Jt.BSONType.int:return(0,Jt.getInt32LE)(this.bson,i);case Jt.BSONType.long:return(0,Jt.getBigInt64LE)(this.bson,i);case Jt.BSONType.bool:return!!this.bson[i];case Jt.BSONType.objectId:return new Jt.ObjectId(this.bson.subarray(i,i+12));case Jt.BSONType.timestamp:return new Jt.Timestamp((0,Jt.getBigInt64LE)(this.bson,i));case Jt.BSONType.string:return(0,Jt.toUTF8)(this.bson,i+4,i+s-1,!1);case Jt.BSONType.binData:{let o=(0,Jt.getInt32LE)(this.bson,i),a=this.bson[i+4];if(a===2){let u=(0,Jt.getInt32LE)(this.bson,i+1+4);if(u<0)throw new Jt.BSONError("Negative binary type element size found for subtype 0x02");if(u>o-4)throw new Jt.BSONError("Binary type with subtype 0x02 contains too long binary size");if(u<o-4)throw new Jt.BSONError("Binary type with subtype 0x02 contains too short binary size");return new Jt.Binary(this.bson.subarray(i+1+4+4,i+1+4+4+u),2)}return new Jt.Binary(this.bson.subarray(i+1+4,i+1+4+o),a)}case Jt.BSONType.date:return new Date(Number((0,Jt.getBigInt64LE)(this.bson,i)));case Jt.BSONType.object:return new t(this.bson,i);case Jt.BSONType.array:return new t(this.bson,i,!0);default:throw new Jt.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let i=this.getElement(e);if(i==null){if(n===!0)throw new Jt.BSONError(`BSON element "${e}" is missing`);return null}if(i.value==null){let s=this.toJSValue(i.element,r);if(s==null){if(n===!0)throw new Jt.BSONError(`BSON element "${e}" is missing`);return null}i.value=s}return i.value}getNumber(e,r){let n=this.get(e,Jt.BSONType.bool),i=n==null?null:n?1:0,s=this.get(e,Jt.BSONType.long),o=s==null?null:Number(s),a=i??o??this.get(e,Jt.BSONType.int)??this.get(e,Jt.BSONType.double);if(r===!0&&a==null)throw new Jt.BSONError(`BSON element "${e}" is missing`);return a}toObject(e){return(0,Jt.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,Jt.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};A5.OnDemandDocument=y$});var kr=b(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.ClientBulkWriteCursorResponse=tl.ExplainedCursorResponse=tl.CursorResponse=tl.MongoDBResponse=void 0;tl.isErrorResponse=Hpe;var dr=yr(),u0=Fe(),Gpe=Ze(),Ynt=Vpe(),C5={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function Hpe(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[C5.nameLength]===2){let i=n[C5.nameOffset];if(t[i]===111&&t[i+1]===107){let s=n[C5.offset],o=n[C5.length];for(let a=s;a<s+o;a++)if(t[a]!==0)return!1;return!0}}}return!0}var V2=class t extends Ynt.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(i){throw new u0.MongoUnexpectedServerResponseError(i.message,{cause:i})}}static is(e){return e instanceof t}static make(e){let r=(0,dr.parseToElementsToArray)(e,0);return Hpe(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===u0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",dr.BSONType.object)?.getNumber("code")===u0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",dr.BSONType.array);if(n?.size()){for(let i=0;i<n.size();i++)if(n.get(i,dr.BSONType.object)?.getNumber("code")===u0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",dr.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",dr.BSONType.object)?.get("atClusterTime",dr.BSONType.timestamp)??this.get("atClusterTime",dr.BSONType.timestamp)}get operationTime(){return this.get("operationTime",dr.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",dr.BSONType.string)}get errmsg(){return this.get("errmsg",dr.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",dr.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",dr.BSONType.timestamp,!0),n=e.get("signature",dr.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,dr.pluckBSONSerializeOptions)(e??{}),validation:(0,dr.parseUtf8ValidationOption)(e)};return super.toObject(r)}};tl.MongoDBResponse=V2;V2.empty=new V2(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));var o3=class t extends V2{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new t((0,dr.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",dr.BSONType.object,!0)}get id(){try{return dr.Long.fromBigInt(this.cursor.get("id",dr.BSONType.long,!0))}catch(e){throw new u0.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",dr.BSONType.string);return e!=null?(0,Gpe.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",dr.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",dr.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",dr.BSONType.array,!0);else throw new u0.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",dr.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",dr.BSONType.array,!0);else throw new u0.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",dr.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,dr.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,dr.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let i=r.toObject(e);return n&&(0,Gpe.decorateDecryptionResult)(i,n.toObject(e),!0),i}}clear(){this.iterated=this.batchSize}};tl.CursorResponse=o3;var g$=class extends o3{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return dr.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};tl.ExplainedCursorResponse=g$;var b$=class extends o3{get insertedCount(){return this.get("nInserted",dr.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",dr.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",dr.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",dr.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",dr.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",dr.BSONType.object,!1)}};tl.ClientBulkWriteCursorResponse=b$});var a3=b(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.Explain=pd.ExplainVerbosity=void 0;pd.validateExplainTimeoutOptions=Xnt;pd.decorateWithExplain=Znt;var Qnt=Fe();pd.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var _$=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?pd.ExplainVerbosity.allPlansExecution:pd.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};pd.Explain=_$;function Xnt(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new Qnt.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function Znt(t,e){let{verbosity:r,maxTimeMS:n}=e,i={explain:t,verbosity:r};return typeof n=="number"&&(i.maxTimeMS=n),i}});var Hr=b($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.AbstractOperation=$u.Aspect=void 0;$u.defineAspects=tit;var eit=yr(),E$=ps();$u.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};var v$=class{constructor(e={}){this.readPreference=this.hasAspect($u.Aspect.WRITE_OPERATION)?E$.ReadPreference.primary:E$.ReadPreference.fromOptions(e)??E$.ReadPreference.primary,this.bsonOptions=(0,eit.resolveBSONOptions)(e),this._session=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this._session}set session(e){this._session=e}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect($u.Aspect.RETRYABLE)&&this.hasAspect($u.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect($u.Aspect.RETRYABLE)&&this.hasAspect($u.Aspect.WRITE_OPERATION)}handleOk(e){return e.toObject(this.bsonOptions)}handleError(e){throw e}};$u.AbstractOperation=v$;function tit(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var Jn=b(O5=>{"use strict";Object.defineProperty(O5,"__esModule",{value:!0});O5.CommandOperation=void 0;var rit=A1(),nit=Fe(),S$=a3(),iit=el(),T5=Ze(),zpe=Do(),c0=Hr(),w$=class extends c0.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new T5.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new T5.MongoDBNamespace("admin","$cmd"),this.readConcern=iit.ReadConcern.fromOptions(r),this.writeConcern=zpe.WriteConcern.fromOptions(r),this.hasAspect(c0.Aspect.EXPLAINABLE))this.explain=S$.Explain.fromOptions(r),this.explain&&(0,S$.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new nit.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(c0.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}buildOptions(e){return{...this.options,...this.bsonOptions,timeoutContext:e,readPreference:this.readPreference,session:this.session}}buildCommand(e,r){let n=this.buildCommandDocument(e,r),i=this.session&&this.session.inTransaction();return this.readConcern&&(0,T5.commandSupportsReadConcern)(n)&&!i&&Object.assign(n,{readConcern:this.readConcern}),this.writeConcern&&this.hasAspect(c0.Aspect.WRITE_OPERATION)&&!i&&zpe.WriteConcern.apply(n,this.writeConcern),this.options.collation&&typeof this.options.collation=="object"&&!this.hasAspect(c0.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:this.options.collation}),typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.rawData!=null&&this.hasAspect(c0.Aspect.SUPPORTS_RAW_DATA)&&(0,T5.maxWireVersion)(e)>=rit.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION&&(n.rawData=this.options.rawData),this.hasAspect(c0.Aspect.EXPLAINABLE)&&this.explain?(0,S$.decorateWithExplain)(n,this.explain):n}};O5.CommandOperation=w$});var C$=b(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.DeleteManyOperation=xp.DeleteOneOperation=xp.DeleteOperation=void 0;xp.makeDeleteStatement=A$;var sit=kr(),u3=Fe(),oit=Ze(),ait=Jn(),Mo=Hr(),G2=class extends ait.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=sit.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}buildCommandDocument(e,r){let n=this.options,i=typeof n.ordered=="boolean"?n.ordered:!0,s={delete:this.ns.collection,deletes:this.statements,ordered:i};if(n.let&&(s.let=n.let),n.comment!==void 0&&(s.comment=n.comment),this.writeConcern&&this.writeConcern.w===0&&(0,oit.maxWireVersion)(e)<9&&this.statements.find(a=>a.hint))throw new u3.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+");return s}};xp.DeleteOperation=G2;var x5=class extends G2{constructor(e,r,n){super(e,[A$(r,{...n,limit:1})],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new u3.MongoServerError(r);if(r.writeErrors)throw new u3.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};xp.DeleteOneOperation=x5;var I5=class extends G2{constructor(e,r,n){super(e,[A$(r,n)],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new u3.MongoServerError(r);if(r.writeErrors)throw new u3.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};xp.DeleteManyOperation=I5;function A$(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,Mo.defineAspects)(G2,[Mo.Aspect.RETRYABLE,Mo.Aspect.WRITE_OPERATION,Mo.Aspect.SUPPORTS_RAW_DATA]);(0,Mo.defineAspects)(x5,[Mo.Aspect.RETRYABLE,Mo.Aspect.WRITE_OPERATION,Mo.Aspect.EXPLAINABLE,Mo.Aspect.SKIP_COLLATION,Mo.Aspect.SUPPORTS_RAW_DATA]);(0,Mo.defineAspects)(I5,[Mo.Aspect.WRITE_OPERATION,Mo.Aspect.EXPLAINABLE,Mo.Aspect.SKIP_COLLATION,Mo.Aspect.SUPPORTS_RAW_DATA])});var l3=b(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;Ip.writableServerSelector=cit;Ip.sameServerSelector=lit;Ip.secondaryWritableServerSelector=dit;Ip.readPreferenceServerSelector=O$;var T$=Fe(),c3=ps(),Ja=Wa(),uit=1e4,Wpe=90;Ip.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function cit(){return function(e,r){return R5(e,r.filter(n=>n.isWritable))}}function lit(t){return function(r,n){return t?n.filter(i=>i.address===t.address&&i.type!==Ja.ServerType.Unknown):[]}}function dit(t,e){return!e||!t||t&&t<Ip.MIN_SECONDARY_WRITE_WIRE_VERSION?O$(c3.ReadPreference.primary):O$(e)}function pit(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,i=(e.heartbeatFrequencyMS+uit)/1e3;if(n<i)throw new T$.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${i} seconds`);if(n<Wpe)throw new T$.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${Wpe} seconds`);if(e.type===Ja.TopologyType.ReplicaSetWithPrimary){let s=Array.from(e.servers.values()).filter(D5)[0];return r.reduce((o,a)=>{let c=(a.lastUpdateTime-a.lastWriteDate-(s.lastUpdateTime-s.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}if(e.type===Ja.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let s=r.reduce((o,a)=>a.lastWriteDate>o.lastWriteDate?a:o);return r.reduce((o,a)=>{let c=(s.lastWriteDate-a.lastWriteDate+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}return r}function fit(t,e){let r=Object.keys(t),n=Object.keys(e);for(let i=0;i<r.length;++i){let s=r[i];if(n.indexOf(s)===-1||e[s]!==t[s])return!1}return!0}function hit(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],i=e.reduce((s,o)=>(fit(n,o.tags)&&s.push(o),s),[]);if(i.length)return i}return[]}function R5(t,e){let r=e.reduce((i,s)=>Math.min(s.roundTripTime,i),1/0),n=r+t.localThresholdMS;return e.reduce((i,s)=>(s.roundTripTime<=n&&s.roundTripTime>=r&&i.push(s),i),[])}function D5(t){return t.type===Ja.ServerType.RSPrimary}function mit(t){return t.type===Ja.ServerType.RSSecondary}function yit(t){return t.type===Ja.ServerType.RSSecondary||t.type===Ja.ServerType.RSPrimary}function Jpe(t){return t.type!==Ja.ServerType.Unknown}function git(t){return t.type===Ja.ServerType.LoadBalancer}function O$(t){if(!t.isValid())throw new T$.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,i=[]){if(r.type===Ja.TopologyType.LoadBalanced)return n.filter(git);if(r.type===Ja.TopologyType.Unknown)return[];if(r.type===Ja.TopologyType.Single)return R5(r,n.filter(Jpe));if(r.type===Ja.TopologyType.Sharded){let u=n.filter(l=>!i.includes(l)),c=u.length>0?u:i;return R5(r,c.filter(Jpe))}let s=t.mode;if(s===c3.ReadPreference.PRIMARY)return n.filter(D5);if(s===c3.ReadPreference.PRIMARY_PREFERRED){let u=n.filter(D5);if(u.length)return u}let o=s===c3.ReadPreference.NEAREST?yit:mit,a=R5(r,hit(t,pit(t,r,n.filter(o))));return s===c3.ReadPreference.SECONDARY_PREFERRED&&a.length===0?n.filter(D5):a}}});var Vi=b(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.LegacyTimeoutContext=Ku.CSOTTimeoutContext=Ku.TimeoutContext=Ku.Timeout=Ku.TimeoutError=void 0;var Ype=require("timers"),l0=Fe(),x$=Ze(),d3=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};Ku.TimeoutError=d3;var Uu=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,i=!!r?.unref,s=r?.rejection;if(n<0)throw new l0.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let o;super((a,u)=>{o=u,e(x$.noop,u)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),s==null&&this.duration>0?(this.id=(0,Ype.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(new d3(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&i&&this.id.unref()):s!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(s))}clear(){(0,Ype.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,x$.squashError),new d3("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};Ku.Timeout=Uu;function bit(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function _it(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var p3=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(_it(e))return new k5(e);if(bit(e))return new M5(e);throw new l0.MongoRuntimeError("Unrecognized options")}};Ku.TimeoutContext=p3;var k5=class t extends p3{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return Uu.reject(new l0.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,x$.csotMin)(e,r)===r?this._serverSelectionTimeout=Uu.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=Uu.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new l0.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Uu.expires(e):Uu.reject(new l0.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Uu.expires(e):Uu.reject(new l0.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new l0.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};Ku.CSOTTimeoutContext=k5;var M5=class t extends p3{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?Uu.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?Uu.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};Ku.LegacyTimeoutContext=M5});var f3=b(d0=>{"use strict";Object.defineProperty(d0,"__esModule",{value:!0});d0.AggregateOperation=d0.DB_AGGREGATE_COLLECTION=void 0;var I$=kr(),Qpe=Fe(),Eit=Do(),vit=Jn(),H2=Hr();d0.DB_AGGREGATE_COLLECTION=1;var P5=class extends vit.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.SERVER_COMMAND_RESPONSE_TYPE=I$.CursorResponse,this.options={...n},this.target=e.collection||d0.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let i=r[r.length-1];(i.$out||i.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage||delete this.options.writeConcern,this.explain&&this.writeConcern)throw new Qpe.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(n?.cursor!=null&&typeof n.cursor!="object")throw new Qpe.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?I$.ExplainedCursorResponse:I$.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}buildCommandDocument(){let e=this.options,r={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&this.writeConcern&&Eit.WriteConcern.apply(r,this.writeConcern),e.bypassDocumentValidation===!0&&(r.bypassDocumentValidation=e.bypassDocumentValidation),typeof e.allowDiskUse=="boolean"&&(r.allowDiskUse=e.allowDiskUse),e.hint&&(r.hint=e.hint),e.let&&(r.let=e.let),e.comment!==void 0&&(r.comment=e.comment),r.cursor=e.cursor||{},e.batchSize&&!this.hasWriteStage&&(r.cursor.batchSize=e.batchSize),r}handleOk(e){return e}};d0.AggregateOperation=P5;(0,H2.defineAspects)(P5,[H2.Aspect.READ_OPERATION,H2.Aspect.RETRYABLE,H2.Aspect.EXPLAINABLE,H2.Aspect.CURSOR_CREATING,H2.Aspect.SUPPORTS_RAW_DATA])});var fs=b(N5=>{"use strict";Object.defineProperty(N5,"__esModule",{value:!0});N5.executeOperation=Cit;N5.autoConnect=tfe;var io=Fe(),Xpe=ps(),Zpe=l3(),Sit=Vi(),R$=Ze(),wit=f3(),Rp=Hr(),Ait=io.MONGODB_ERROR_CODES.IllegalOperation,efe="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function Cit(t,e,r){if(!(e instanceof Rp.AbstractOperation))throw new io.MongoRuntimeError("This method requires a valid operation instance");let n=t.topology==null?await(0,R$.abortable)(tfe(t),e.options):t.topology,i=e.session,s;if(i==null)s=Symbol(),i=t.startSession({owner:s,explicit:!1});else{if(i.hasEnded)throw new io.MongoExpiredSessionError("Use of expired sessions is not permitted");if(i.snapshotEnabled&&!n.capabilities.supportsSnapshotReads)throw new io.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(i.client!==t)throw new io.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}e.session??=i;let o=e.readPreference??Xpe.ReadPreference.primary,a=!!i?.inTransaction(),u=e.hasAspect(Rp.Aspect.READ_OPERATION);if(a&&!o.equals(Xpe.ReadPreference.primary)&&(u||e.commandName==="runCommand"))throw new io.MongoTransactionError(`Read preference in a transaction must be primary, not: ${o.mode}`);i?.isPinned&&i.transaction.isCommitted&&!e.bypassPinningCheck&&i.unpin(),r??=Sit.TimeoutContext.create({session:i,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await Tit(e,{topology:n,timeoutContext:r,session:i,readPreference:o})}finally{i?.owner!=null&&i.owner===s&&await i.endSession()}}async function tfe(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new io.MongoNotConnectedError("Client must be connected before running operations");t.s.options.__skipPingOnConnect=!0;try{if(await t.connect(),t.topology==null)throw new io.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options.__skipPingOnConnect}}return t.topology}async function Tit(t,{topology:e,timeoutContext:r,session:n,readPreference:i}){let s;t.hasAspect(Rp.Aspect.MUST_SELECT_SAME_SERVER)?s=(0,Zpe.sameServerSelector)(t.server?.description):t instanceof wit.AggregateOperation&&t.hasWriteStage?s=(0,Zpe.secondaryWritableServerSelector)(e.commonWireVersion,i):s=i;let o=await e.selectServer(s,{session:n,operationName:t.commandName,timeoutContext:r,signal:t.options.signal}),a=t.hasAspect(Rp.Aspect.READ_OPERATION),u=t.hasAspect(Rp.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,l=e.s.options.retryReads&&!c&&t.canRetryRead,d=e.s.options.retryWrites&&!c&&(0,R$.supportsRetryableWrites)(o)&&t.canRetryWrite,p=t.hasAspect(Rp.Aspect.RETRYABLE)&&n!=null&&(a&&l||u&&d);u&&d&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let f=p?r.csotEnabled()?1/0:2:1,h,y;for(let E=0;E<f;E++){if(h){if(u&&h.code===Ait)throw new io.MongoServerError({message:efe,errmsg:efe,originalError:h});if(t.hasAspect(Rp.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||u&&!(0,io.isRetryableWriteError)(h)||a&&!(0,io.isRetryableReadError)(h))throw h;if(h instanceof io.MongoNetworkError&&t.hasAspect(Rp.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),o=await e.selectServer(s,{session:n,operationName:t.commandName,previousServer:y,signal:t.options.signal}),u&&!(0,R$.supportsRetryableWrites)(o))throw new io.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}t.server=o;try{E>0&&t.hasAspect(Rp.Aspect.COMMAND_BATCHING)&&t.resetBatch();try{let v=await o.command(t,r);return t.handleOk(v)}catch(v){return t.handleError(v)}}catch(v){if(!(v instanceof io.MongoError))throw v;if(h!=null&&v.hasErrorLabel(io.MongoErrorLabel.NoWritesPerformed))throw h;y=o.description,h=v,r.clear()}}throw h??new io.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var D$=b(z2=>{"use strict";Object.defineProperty(z2,"__esModule",{value:!0});z2.InsertOneOperation=z2.InsertOperation=void 0;var Oit=kr(),rfe=Fe(),xit=Ze(),Iit=Jn(),C1=Hr(),h3=class extends Iit.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=Oit.MongoDBResponse,this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}buildCommandDocument(e,r){let n=this.options??{},i=typeof n.ordered=="boolean"?n.ordered:!0,s={insert:this.ns.collection,documents:this.documents,ordered:i};return typeof n.bypassDocumentValidation=="boolean"&&(s.bypassDocumentValidation=n.bypassDocumentValidation),n.comment!==void 0&&(s.comment=n.comment),s}};z2.InsertOperation=h3;var F5=class extends h3{constructor(e,r,n){super(e.s.namespace,[(0,xit.maybeAddIdToDocuments)(e,r,n)],n)}handleOk(e){let r=super.handleOk(e);if(r.code)throw new rfe.MongoServerError(r);if(r.writeErrors)throw new rfe.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};z2.InsertOneOperation=F5;(0,C1.defineAspects)(h3,[C1.Aspect.RETRYABLE,C1.Aspect.WRITE_OPERATION,C1.Aspect.SUPPORTS_RAW_DATA]);(0,C1.defineAspects)(F5,[C1.Aspect.RETRYABLE,C1.Aspect.WRITE_OPERATION,C1.Aspect.SUPPORTS_RAW_DATA])});var J2=b(k$=>{"use strict";Object.defineProperty(k$,"__esModule",{value:!0});k$.formatSort=jit;var nfe=Fe();function W2(t=1){let e=`${t}`.toLowerCase();if(Rit(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new nfe.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function Rit(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function Dit(t){if(Array.isArray(t)&&t.length===2)try{return W2(t[1]),!0}catch{return!1}return!1}function kit(t){return Array.isArray(t)&&Array.isArray(t[0])}function Mit(t){return t instanceof Map&&t.size>0}function Pit(t){return Array.isArray(t)}function Nit(t){return new Map([[`${t[0]}`,W2([t[1]])]])}function Fit(t){let e=t.map(([r,n])=>[`${r}`,W2(n)]);return new Map(e)}function Bit(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function qit(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,W2(n)]);return new Map(e)}function Lit(t){let e=Array.from(t).map(([r,n])=>[`${r}`,W2(n)]);return new Map(e)}function jit(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,W2(e)]]);if(typeof t!="object")throw new nfe.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!Pit(t))return Mit(t)?Lit(t):Object.keys(t).length?qit(t):void 0;if(t.length)return kit(t)?Fit(t):Dit(t)?Nit(t):Bit(t)}}});var P$=b(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.ReplaceOneOperation=rl.UpdateManyOperation=rl.UpdateOneOperation=rl.UpdateOperation=void 0;rl.makeUpdateStatement=j5;var $it=kr(),nl=Fe(),Uit=J2(),M$=Ze(),Kit=Jn(),bi=Hr(),p0=class extends Kit.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=$it.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}buildCommandDocument(e,r){let n=this.options,i={update:this.ns.collection,updates:this.statements,ordered:n.ordered??!0};return typeof n.bypassDocumentValidation=="boolean"&&(i.bypassDocumentValidation=n.bypassDocumentValidation),n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),i}};rl.UpdateOperation=p0;var B5=class extends p0{constructor(e,r,n,i){if(super(e,[j5(r,n,{...i,multi:!1})],i),!(0,M$.hasAtomicOperators)(n,i))throw new nl.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new nl.MongoServerError(r);if(r.writeErrors)throw new nl.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};rl.UpdateOneOperation=B5;var q5=class extends p0{constructor(e,r,n,i){if(super(e,[j5(r,n,{...i,multi:!0})],i),!(0,M$.hasAtomicOperators)(n,i))throw new nl.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new nl.MongoServerError(r);if(r.writeErrors)throw new nl.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};rl.UpdateManyOperation=q5;var L5=class extends p0{constructor(e,r,n,i){if(super(e,[j5(r,n,{...i,multi:!1})],i),(0,M$.hasAtomicOperators)(n))throw new nl.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new nl.MongoServerError(r);if(r.writeErrors)throw new nl.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};rl.ReplaceOneOperation=L5;function j5(t,e,r){if(t==null||typeof t!="object")throw new nl.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new nl.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),!r.multi&&r.sort!=null&&(n.sort=(0,Uit.formatSort)(r.sort)),n}(0,bi.defineAspects)(p0,[bi.Aspect.RETRYABLE,bi.Aspect.WRITE_OPERATION,bi.Aspect.SKIP_COLLATION,bi.Aspect.SUPPORTS_RAW_DATA]);(0,bi.defineAspects)(B5,[bi.Aspect.RETRYABLE,bi.Aspect.WRITE_OPERATION,bi.Aspect.EXPLAINABLE,bi.Aspect.SKIP_COLLATION,bi.Aspect.SUPPORTS_RAW_DATA]);(0,bi.defineAspects)(q5,[bi.Aspect.WRITE_OPERATION,bi.Aspect.EXPLAINABLE,bi.Aspect.SKIP_COLLATION,bi.Aspect.SUPPORTS_RAW_DATA]);(0,bi.defineAspects)(L5,[bi.Aspect.RETRYABLE,bi.Aspect.WRITE_OPERATION,bi.Aspect.SKIP_COLLATION,bi.Aspect.SUPPORTS_RAW_DATA])});var Q2=b(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.BulkOperationBase=vr.FindOperators=vr.MongoBulkWriteError=vr.WriteError=vr.WriteConcernError=vr.BulkWriteResult=vr.Batch=vr.BatchType=void 0;vr.mergeBatchResults=F$;var ofe=yr(),Gi=Fe(),y3=C$(),Vit=fs(),Git=D$(),f0=P$(),Hit=Vi(),il=Ze(),ife=Do();vr.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var N$=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};vr.Batch=N$;var T1=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(i=>n===i.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new Y2({errmsg:e,code:Gi.MONGODB_ERROR_CODES.WriteConcernTimeout})}}}toString(){return`BulkWriteResult(${ofe.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};vr.BulkWriteResult=T1;var Y2=class{constructor(e){this.serverError=e}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}};vr.WriteConcernError=Y2;var g3=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};vr.WriteError=g3;function F$(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let s={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new g3(s));return}else if(n.ok===0&&e.ok===0)return;afe(t)&&n.n&&(e.nInserted=e.nInserted+n.n),L$(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let i=0;if(Array.isArray(n.upserted)){i=n.upserted.length;for(let s=0;s<n.upserted.length;s++)e.upserted.push({index:n.upserted[s].index+t.originalZeroIndex,_id:n.upserted[s]._id})}else n.upserted&&(i=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(q$(t)&&n.n){let s=n.nModified;e.nUpserted=e.nUpserted+i,e.nMatched=e.nMatched+(n.n-i),typeof s=="number"?e.nModified=e.nModified+s:e.nModified=0}if(Array.isArray(n.writeErrors))for(let s=0;s<n.writeErrors.length;s++){let o={index:t.originalIndexes[n.writeErrors[s].index],code:n.writeErrors[s].code,errmsg:n.writeErrors[s].errmsg,errInfo:n.writeErrors[s].errInfo,op:t.operations[n.writeErrors[s].index]};e.writeErrors.push(new g3(o))}n.writeConcernError&&e.writeConcernErrors.push(new Y2(n.writeConcernError))}async function sfe(t,e){if(t.s.batches.length===0)return new T1(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let i=(0,il.resolveOptions)(t,{...e,ordered:t.isOrdered});i.bypassDocumentValidation!==!0&&delete i.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(i.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(i.checkKeys=!1),i.retryWrites&&(q$(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.multi)),L$(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.limit===0)));let s=afe(n)?new Git.InsertOperation(t.s.namespace,n.operations,i):q$(n)?new f0.UpdateOperation(t.s.namespace,n.operations,i):L$(n)?new y3.DeleteOperation(t.s.namespace,n.operations,i):null;if(s==null)throw new Gi.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let o=null,a;try{a=await(0,Vit.executeOperation)(t.s.collection.client,s,i.timeoutContext)}catch(c){o=c}if(o!=null)if(o instanceof Gi.MongoWriteConcernError){F$(n,t.s.bulkResult,o,a);let c=new T1(t.s.bulkResult,t.isOrdered);throw new h0({message:o.result.writeConcernError.errmsg,code:o.result.writeConcernError.code},c)}else throw new h0(o,new T1(t.s.bulkResult,t.isOrdered));F$(n,t.s.bulkResult,o,a);let u=new T1(t.s.bulkResult,t.isOrdered);t.handleWriteError(u)}t.s.batches.length=0;let r=new T1(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var h0=class extends Gi.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof Y2?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};vr.MongoBulkWriteError=h0;var $5=class{constructor(e){this.bulkOperation=e}update(e){let r=m3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,f0.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,il.hasAtomicOperators)(e,this.bulkOperation.bsonOptions))throw new Gi.MongoInvalidArgumentError("Update document requires atomic operators");let r=m3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,f0.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,il.hasAtomicOperators)(e))throw new Gi.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=m3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,f0.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=m3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.DELETE,(0,y3.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=m3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.DELETE,(0,y3.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};vr.FindOperators=$5;var B$=class{constructor(e,r,n){this.collection=e,this.isOrdered=n;let i=(0,il.getTopology)(e);r=r??{};let s=e.s.namespace,o=!1,a=void 0,u=i.lastHello(),c=!!(i.s.options&&i.s.options.autoEncrypter),l=u&&u.maxBsonObjectSize?u.maxBsonObjectSize:1024*1024*16,d=c?1024*1024*2:l,p=u&&u.maxWriteBatchSize?u.maxWriteBatchSize:1e3,f=(p-1).toString(10).length+2,h=Object.assign({},r);h=(0,il.applyRetryableWrites)(h,e.db);let y={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:y,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:ife.WriteConcern.fromOptions(r),maxBsonObjectSize:l,maxBatchSizeBytes:d,maxWriteBatchSize:p,maxKeySize:f,namespace:s,topology:i,options:h,bsonOptions:(0,ofe.resolveBSONOptions)(r),currentOp:a,executed:o,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,il.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(vr.BatchType.INSERT,e)}find(e){if(!e)throw new Gi.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new $5(this)}raw(e){if(e==null||typeof e!="object")throw new Gi.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,il.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList(vr.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new Gi.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,f0.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,il.hasAtomicOperators)(r.u))throw new Gi.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new Gi.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,f0.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,il.hasAtomicOperators)(r.u,this.bsonOptions))throw new Gi.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new Gi.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,f0.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,il.hasAtomicOperators)(r.u,this.bsonOptions))throw new Gi.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new Gi.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(vr.BatchType.DELETE,(0,y3.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new Gi.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(vr.BatchType.DELETE,(0,y3.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new Gi.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new Gi.MongoBatchReExecutionError;let r=ife.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new Gi.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n=(0,il.resolveOptions)(this.collection,{...this.s.options,...e});return n.timeoutContext??=Hit.TimeoutContext.create({session:n.session,timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),n.session==null?await this.collection.client.withSession({explicit:!1},async i=>await sfe(this,{...n,session:i})):await sfe(this,{...n})}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new h0({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new h0(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}};vr.BulkOperationBase=B$;function afe(t){return t.batchType===vr.BatchType.INSERT}function q$(t){return t.batchType===vr.BatchType.UPDATE}function L$(t){return t.batchType===vr.BatchType.DELETE}function m3(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var cfe=b((upr,ufe)=>{"use strict";var zit=Q2().BulkWriteResult;ufe.exports=zit});var b3=b((mfe,yfe)=>{"use strict";var fd=yfe.exports=mfe=Object.create(null),lfe="disconnected",dfe="connected",pfe="connecting",ffe="disconnecting",hfe="uninitialized";fd[0]=lfe;fd[1]=dfe;fd[2]=pfe;fd[3]=ffe;fd[99]=hfe;fd[lfe]=0;fd[dfe]=1;fd[pfe]=2;fd[ffe]=3;fd[hfe]=99});var Vu=b((cpr,gfe)=>{"use strict";var Wit=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):t=>setTimeout(t,0);gfe.exports=function(e){return Wit(e)}});var j$=b((lpr,_fe)=>{"use strict";var Jit=require("events").EventEmitter,Yit=b3(),bfe=Vu();function jr(t,e,r){r===void 0&&(r={}),this.opts=r,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!e?._hasOpened,this.emitter=new Jit,Yit.connected===this.conn.readyState&&this.onOpen()}jr.prototype.name;jr.prototype.collectionName;jr.prototype.conn;jr.prototype.onOpen=function(){this.buffer=!1,bfe(()=>this.doQueue())};jr.prototype.onClose=function(){};jr.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this};jr.prototype.removeQueue=function(t,e){let r=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return r===-1?!1:(this.queue.splice(r,1),!0)};jr.prototype.doQueue=function(){for(let e of this.queue)typeof e[0]=="function"?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];let t=this;return bfe(function(){t.emitter.emit("queue")}),this};jr.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};jr.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};jr.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};jr.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};jr.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};jr.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};jr.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};jr.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};jr.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};jr.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};jr.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};jr.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};jr.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};jr.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};jr.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};jr.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};jr.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};jr.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};jr.prototype._shouldBufferCommands=function(){let e=this.opts;return e.bufferCommands!=null?e.bufferCommands:e&&e.schemaUserProvidedOptions!=null&&e.schemaUserProvidedOptions.bufferCommands!=null?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()};jr.prototype._getBufferTimeoutMS=function(){let e=this.conn,r=this.opts;return r.bufferTimeoutMS!=null?r.bufferTimeoutMS:r&&r.schemaUserProvidedOptions!=null&&r.schemaUserProvidedOptions.bufferTimeoutMS!=null?r.schemaUserProvidedOptions.bufferTimeoutMS:e._getBufferTimeoutMS()};_fe.exports=jr});var qt=b((dpr,Efe)=>{"use strict";var U5=class extends Error{};Object.defineProperty(U5.prototype,"name",{value:"MongooseError"});Efe.exports=U5});var Sfe=b(V5=>{"use strict";Object.defineProperty(V5,"__esModule",{value:!0});V5.ListDatabasesOperation=void 0;var Qit=kr(),vfe=Ze(),Xit=Jn(),$$=Hr(),K5=class extends Xit.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Qit.MongoDBResponse,this.options=r??{},this.ns=new vfe.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(e,r){let n={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(n.nameOnly=this.options.nameOnly),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),(0,vfe.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(n.comment=this.options.comment),n}};V5.ListDatabasesOperation=K5;(0,$$.defineAspects)(K5,[$$.Aspect.READ_OPERATION,$$.Aspect.RETRYABLE])});var U$=b(H5=>{"use strict";Object.defineProperty(H5,"__esModule",{value:!0});H5.RemoveUserOperation=void 0;var Zit=kr(),est=Jn(),wfe=Hr(),G5=class extends est.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Zit.MongoDBResponse,this.options=n,this.username=r}get commandName(){return"dropUser"}buildCommandDocument(e){return{dropUser:this.username}}handleOk(e){return!0}};H5.RemoveUserOperation=G5;(0,wfe.defineAspects)(G5,[wfe.Aspect.WRITE_OPERATION])});var _3=b(X2=>{"use strict";Object.defineProperty(X2,"__esModule",{value:!0});X2.RunCursorCommandOperation=X2.RunCommandOperation=void 0;var Afe=kr(),tst=Hr(),z5=class extends tst.AbstractOperation{constructor(e,r,n){super(n),this.SERVER_COMMAND_RESPONSE_TYPE=Afe.MongoDBResponse,this.command=r,this.options=n,this.ns=e.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(e,r){return this.command}buildOptions(e){return{...this.options,session:this.session,timeoutContext:e,signal:this.options.signal,readPreference:this.options.readPreference}}};X2.RunCommandOperation=z5;var K$=class extends z5{constructor(){super(...arguments),this.SERVER_COMMAND_RESPONSE_TYPE=Afe.CursorResponse}handleOk(e){return e}};X2.RunCursorCommandOperation=K$});var Cfe=b(W5=>{"use strict";Object.defineProperty(W5,"__esModule",{value:!0});W5.ValidateCollectionOperation=void 0;var rst=kr(),V$=Fe(),nst=Jn(),G$=class extends nst.CommandOperation{constructor(e,r,n){super(e.s.db,n),this.SERVER_COMMAND_RESPONSE_TYPE=rst.MongoDBResponse,this.options=n,this.collectionName=r}get commandName(){return"validate"}buildCommandDocument(e,r){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(n=>n[0]!=="session"))}}handleOk(e){let r=super.handleOk(e);if(r.result!=null&&typeof r.result!="string")throw new V$.MongoUnexpectedServerResponseError("Error with validation data");if(r.result!=null&&r.result.match(/exception|corrupt/)!=null)throw new V$.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(r.valid!=null&&!r.valid)throw new V$.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return e}};W5.ValidateCollectionOperation=G$});var z$=b(Y5=>{"use strict";Object.defineProperty(Y5,"__esModule",{value:!0});Y5.Admin=void 0;var ist=yr(),J5=fs(),sst=Sfe(),ost=U$(),ast=_3(),ust=Cfe(),cst=Ze(),H$=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,J5.executeOperation)(this.s.db.client,new ast.RunCommandOperation(new cst.MongoDBNamespace("admin"),e,{...(0,ist.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,J5.executeOperation)(this.s.db.client,new ost.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,J5.executeOperation)(this.s.db.client,new ust.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,J5.executeOperation)(this.s.db.client,new sst.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};Y5.Admin=H$});var J$=b(X5=>{"use strict";Object.defineProperty(X5,"__esModule",{value:!0});X5.OrderedBulkOperation=void 0;var lst=yr(),Tfe=Fe(),Q5=Q2(),W$=class extends Q5.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=lst.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Tfe.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new Q5.Batch(e,this.s.currentIndex));let i=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Q5.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===Q5.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new Tfe.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=i+n,this.s.currentIndex+=1,this}};X5.OrderedBulkOperation=W$});var Q$=b(Z5=>{"use strict";Object.defineProperty(Z5,"__esModule",{value:!0});Z5.UnorderedBulkOperation=void 0;var dst=yr(),Ofe=Fe(),Dp=Q2(),Y$=class extends Dp.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=dst.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Ofe.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Dp.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Dp.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Dp.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let i=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Dp.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Dp.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new Ofe.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Dp.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Dp.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Dp.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=i+n,this}};Z5.UnorderedBulkOperation=Y$});var I1=b(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.MongoLogger=Yt.MongoLoggableComponent=Yt.SEVERITY_LEVEL_MAP=Yt.DEFAULT_MAX_DOCUMENT_LENGTH=Yt.SeverityLevel=void 0;Yt.parseSeverityFromString=tU;Yt.createStdioLogger=m0;Yt.stringifyWithMaxLen=x1;Yt.defaultLogTransform=Rfe;var xfe=require("util"),Ife=yr(),dn=gi(),y0=Ze();Yt.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});Yt.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var eU=class extends Map{constructor(e){let r=[];for(let[n,i]of e)r.push([i,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};Yt.SEVERITY_LEVEL_MAP=new eU([[Yt.SeverityLevel.OFF,-1/0],[Yt.SeverityLevel.EMERGENCY,0],[Yt.SeverityLevel.ALERT,1],[Yt.SeverityLevel.CRITICAL,2],[Yt.SeverityLevel.ERROR,3],[Yt.SeverityLevel.WARNING,4],[Yt.SeverityLevel.NOTICE,5],[Yt.SeverityLevel.INFORMATIONAL,6],[Yt.SeverityLevel.DEBUG,7],[Yt.SeverityLevel.TRACE,8]]);Yt.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function tU(t){let e=Object.values(Yt.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function m0(t){return{write:(0,xfe.promisify)((e,r)=>{let n=(0,xfe.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function pst({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:m0(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:m0(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:m0(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:m0(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:m0(process.stderr),mongodbLogPathIsStdErr:!0}}function Z2(t,e,r){return tU(t)??tU(e)??r}function fst(t,e){let r=Yt.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=Yt.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function x1(t,e,r={}){let n="",i=0,s=function(a,u){if(!(i>=e)){if(a==="")return i+=1,u;if(i+=a.length+4,u==null)return u;switch(typeof u){case"string":i+=u.length+2;break;case"number":case"bigint":i+=String(u).length;break;case"boolean":i+=u?4:5;break;case"object":if((0,y0.isUint8Array)(u))i+=22+u.byteLength+u.byteLength*.33+18|0;else if("_bsontype"in u){let c=u;switch(c._bsontype){case"Int32":i+=String(c.value).length;break;case"Double":i+=(c.value|0)===c.value?String(c.value).length+2:String(c.value).length;break;case"Long":i+=c.toString().length;break;case"ObjectId":i+=35;break;case"MaxKey":case"MinKey":i+=13;break;case"Binary":i+=22+u.position+u.position*.33+18|0;break;case"Timestamp":i+=19+String(c.t).length+5+String(c.i).length+2;break;case"Code":c.scope==null?i+=c.code.length+10+2:i+=c.code.length+10+11;break;case"BSONRegExp":i+=34+c.pattern.length+13+c.options.length+3;break}}}return u}};if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{e!==0?n=Ife.EJSON.stringify(t,s,0,r):n=Ife.EJSON.stringify(t,r)}catch(o){n=`Extended JSON serialization failed with: ${o.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function hst(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function eC(t,e,r=Yt.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:i,topologyDescription:s,message:o}=e;return t.selector=x1(n,r),t.operation=i,t.topologyDescription=x1(s,r),t.message=o,t}function X$(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=y0.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function Ya(t,e){let{host:r,port:n}=y0.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function O1(t,e){return t.topologyId=e.topologyId,t}function Z$(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:i,port:s}=y0.HostAddress.fromString(n).toHostPort();return t.serverHost=i,t.serverPort=s,t}function Rfe(t,e=Yt.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case dn.SERVER_SELECTION_STARTED:return r=eC(r,t,e),r;case dn.SERVER_SELECTION_FAILED:return r=eC(r,t,e),r.failure=t.failure?.message,r;case dn.SERVER_SELECTION_SUCCEEDED:return r=eC(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case dn.WAITING_FOR_SUITABLE_SERVER:return r=eC(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case dn.COMMAND_STARTED:return r=X$(r,t),r.message="Command started",r.command=x1(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case dn.COMMAND_SUCCEEDED:return r=X$(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=x1(t.reply,e,{relaxed:!0}),r;case dn.COMMAND_FAILED:return r=X$(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case dn.CONNECTION_POOL_CREATED:if(r=Ya(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:a}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:a}}return r;case dn.CONNECTION_POOL_READY:return r=Ya(r,t),r.message="Connection pool ready",r;case dn.CONNECTION_POOL_CLEARED:return r=Ya(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case dn.CONNECTION_POOL_CLOSED:return r=Ya(r,t),r.message="Connection pool closed",r;case dn.CONNECTION_CREATED:return r=Ya(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case dn.CONNECTION_READY:return r=Ya(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case dn.CONNECTION_CLOSED:switch(r=Ya(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case dn.CONNECTION_CHECK_OUT_STARTED:return r=Ya(r,t),r.message="Connection checkout started",r;case dn.CONNECTION_CHECK_OUT_FAILED:switch(r=Ya(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case dn.CONNECTION_CHECKED_OUT:return r=Ya(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case dn.CONNECTION_CHECKED_IN:return r=Ya(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case dn.SERVER_OPENING:return r=O1(r,t),r=Ya(r,t),r.message="Starting server monitoring",r;case dn.SERVER_CLOSED:return r=O1(r,t),r=Ya(r,t),r.message="Stopped server monitoring",r;case dn.SERVER_HEARTBEAT_STARTED:return r=O1(r,t),r=Z$(r,t),r.message="Server heartbeat started",r;case dn.SERVER_HEARTBEAT_SUCCEEDED:return r=O1(r,t),r=Z$(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=x1(t.reply,e,{relaxed:!0}),r;case dn.SERVER_HEARTBEAT_FAILED:return r=O1(r,t),r=Z$(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case dn.TOPOLOGY_OPENING:return r=O1(r,t),r.message="Starting topology monitoring",r;case dn.TOPOLOGY_CLOSED:return r=O1(r,t),r.message="Stopped topology monitoring",r;case dn.TOPOLOGY_DESCRIPTION_CHANGED:return r=O1(r,t),r.message="Topology description changed",r.previousDescription=r.reply=x1(t.previousDescription,e),r.newDescription=r.reply=x1(t.newDescription,e),r;default:for(let[n,i]of Object.entries(t))i!=null&&(r[n]=i)}return r}var rU=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(Yt.MongoLoggableComponent)){e[r]={};for(let n of Object.values(Yt.SeverityLevel))e[r][n]=fst(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(Yt.MongoLoggableComponent)){this.componentSeverities[e]=Yt.SeverityLevel.OFF;for(let r of Object.values(Yt.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=m0(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(Yt.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===Yt.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let i={t:new Date,c:r,s:e};if(typeof n=="string"?i.message=n:typeof n=="object"&&(hst(n)?i={...i,...n.toLog()}:i={...i,...Rfe(n,this.maxDocumentLength)}),(0,y0.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(i)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let s=this.logDestination.write(i);(0,y0.isPromiseLike)(s)&&(this.pendingLog=s.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(s){this.logWriteFailureHandler(s)}}static resolveOptions(e,r){let n=pst(e,r),i={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},s=Z2(i.mongodbLogComponentSeverities?.default,i.MONGODB_LOG_ALL,Yt.SeverityLevel.OFF);return{componentSeverities:{command:Z2(i.mongodbLogComponentSeverities?.command,i.MONGODB_LOG_COMMAND,s),topology:Z2(i.mongodbLogComponentSeverities?.topology,i.MONGODB_LOG_TOPOLOGY,s),serverSelection:Z2(i.mongodbLogComponentSeverities?.serverSelection,i.MONGODB_LOG_SERVER_SELECTION,s),connection:Z2(i.mongodbLogComponentSeverities?.connection,i.MONGODB_LOG_CONNECTION,s),client:Z2(i.mongodbLogComponentSeverities?.client,i.MONGODB_LOG_CLIENT,s),default:s},maxDocumentLength:i.mongodbLogMaxDocumentLength??(0,y0.parseUnsignedInteger)(i.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:i.mongodbLogPath,logDestinationIsStdErr:i.mongodbLogPathIsStdErr}}};Yt.MongoLogger=rU});var Qa=b(eb=>{"use strict";Object.defineProperty(eb,"__esModule",{value:!0});eb.CancellationToken=eb.TypedEventEmitter=void 0;var mst=require("events"),yst=I1(),gst=Ze(),tC=class extends mst.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...i){if(this.emit(e,...i),this.component){let s={topologyId:r,serverConnectionId:n??null,...i[0]};this.mongoLogger?.debug(this.component,s)}}emitAndLogCommand(e,r,n,i,...s){if(e&&this.emit(r,...s),i){let o={databaseName:n,...s[0]};this.mongoLogger?.debug(yst.MongoLoggableComponent.COMMAND,o)}}};eb.TypedEventEmitter=tC;var nU=class extends tC{constructor(...e){super(...e),this.on("error",gst.noop)}};eb.CancellationToken=nU});var iU=b(iC=>{"use strict";Object.defineProperty(iC,"__esModule",{value:!0});iC.GetMoreOperation=void 0;var bst=kr(),Dfe=Fe(),_st=Ze(),rC=Hr(),nC=class extends rC.AbstractOperation{constructor(e,r,n,i){super(i),this.SERVER_COMMAND_RESPONSE_TYPE=bst.CursorResponse,this.options=i,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}buildCommand(e){if(this.cursorId==null||this.cursorId.isZero())throw new Dfe.MongoRuntimeError("Unable to iterate cursor with no id");let r=this.ns.collection;if(r==null)throw new Dfe.MongoRuntimeError("A collection name must be determined before getMore");let n={getMore:this.cursorId,collection:r};return typeof this.options.batchSize=="number"&&(n.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(n.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,_st.maxWireVersion)(e)>=9&&(n.comment=this.options.comment),n}buildOptions(e){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:e,...this.options}}handleOk(e){return e}};iC.GetMoreOperation=nC;(0,rC.defineAspects)(nC,[rC.Aspect.READ_OPERATION,rC.Aspect.MUST_SELECT_SAME_SERVER])});var kfe=b(oC=>{"use strict";Object.defineProperty(oC,"__esModule",{value:!0});oC.KillCursorsOperation=void 0;var Est=kr(),vst=Fe(),sU=Hr(),sC=class extends sU.AbstractOperation{constructor(e,r,n,i){super(i),this.SERVER_COMMAND_RESPONSE_TYPE=Est.MongoDBResponse,this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}buildCommand(e,r){let n=this.ns.collection;if(n==null)throw new vst.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:n,cursors:[this.cursorId]}}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){}};oC.KillCursorsOperation=sC;(0,sU.defineAspects)(sC,[sU.Aspect.MUST_SELECT_SAME_SERVER])});var uC=b((wpr,jfe)=>{"use strict";var aC=Object.prototype.hasOwnProperty,Lfe=Object.prototype.toString,Mfe=Object.defineProperty,Pfe=Object.getOwnPropertyDescriptor,Nfe=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Lfe.call(e)==="[object Array]"},Ffe=function(e){if(!e||Lfe.call(e)!=="[object Object]")return!1;var r=aC.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&aC.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||aC.call(e,i)},Bfe=function(e,r){Mfe&&r.name==="__proto__"?Mfe(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},qfe=function(e,r){if(r==="__proto__")if(aC.call(e,r)){if(Pfe)return Pfe(e,r).value}else return;return e[r]};jfe.exports=function t(){var e,r,n,i,s,o,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(r in e)n=qfe(a,r),i=qfe(e,r),a!==i&&(l&&i&&(Ffe(i)||(s=Nfe(i)))?(s?(s=!1,o=n&&Nfe(n)?n:[]):o=n&&Ffe(n)?n:{},Bfe(a,{name:r,newValue:t(l,o,i)})):typeof i<"u"&&Bfe(a,{name:r,newValue:i}));return a}});var Kfe=b((Apr,Ufe)=>{"use strict";var Yn={};Ufe.exports=Yn;function $fe(t){return t<0?-1:1}function Sst(t){return t%1===.5&&(t&1)===0?Math.floor(t):Math.round(t)}function R1(t,e){e.unsigned||--t;let r=e.unsigned?0:-Math.pow(2,t),n=Math.pow(2,t)-1,i=e.moduloBitLength?Math.pow(2,e.moduloBitLength):Math.pow(2,t),s=e.moduloBitLength?Math.pow(2,e.moduloBitLength-1):Math.pow(2,t-1);return function(o,a){a||(a={});let u=+o;if(a.enforceRange){if(!Number.isFinite(u))throw new TypeError("Argument is not a finite number");if(u=$fe(u)*Math.floor(Math.abs(u)),u<r||u>n)throw new TypeError("Argument is not in byte range");return u}if(!isNaN(u)&&a.clamp)return u=Sst(u),u<r&&(u=r),u>n&&(u=n),u;if(!Number.isFinite(u)||u===0)return 0;if(u=$fe(u)*Math.floor(Math.abs(u)),u=u%i,!e.unsigned&&u>=s)return u-i;if(e.unsigned){if(u<0)u+=i;else if(u===-0)return 0}return u}}Yn.void=function(){};Yn.boolean=function(t){return!!t};Yn.byte=R1(8,{unsigned:!1});Yn.octet=R1(8,{unsigned:!0});Yn.short=R1(16,{unsigned:!1});Yn["unsigned short"]=R1(16,{unsigned:!0});Yn.long=R1(32,{unsigned:!1});Yn["unsigned long"]=R1(32,{unsigned:!0});Yn["long long"]=R1(32,{unsigned:!1,moduloBitLength:64});Yn["unsigned long long"]=R1(32,{unsigned:!0,moduloBitLength:64});Yn.double=function(t){let e=+t;if(!Number.isFinite(e))throw new TypeError("Argument is not a finite floating-point value");return e};Yn["unrestricted double"]=function(t){let e=+t;if(isNaN(e))throw new TypeError("Argument is NaN");return e};Yn.float=Yn.double;Yn["unrestricted float"]=Yn["unrestricted double"];Yn.DOMString=function(t,e){return e||(e={}),e.treatNullAsEmptyString&&t===null?"":String(t)};Yn.ByteString=function(t,e){let r=String(t),n;for(let i=0;(n=r.codePointAt(i))!==void 0;++i)if(n>255)throw new TypeError("Argument is not a valid bytestring");return r};Yn.USVString=function(t){let e=String(t),r=e.length,n=[];for(let i=0;i<r;++i){let s=e.charCodeAt(i);if(s<55296||s>57343)n.push(String.fromCodePoint(s));else if(56320<=s&&s<=57343)n.push(String.fromCodePoint(65533));else if(i===r-1)n.push(String.fromCodePoint(65533));else{let o=e.charCodeAt(i+1);if(56320<=o&&o<=57343){let a=s&1023,u=o&1023;n.push(String.fromCodePoint(65536+1024*a+u)),++i}else n.push(String.fromCodePoint(65533))}}return n.join("")};Yn.Date=function(t,e){if(!(t instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(t))return t};Yn.RegExp=function(t,e){return t instanceof RegExp||(t=new RegExp(t)),t}});var Vfe=b((Cpr,D1)=>{"use strict";D1.exports.mixin=function(e,r){let n=Object.getOwnPropertyNames(r);for(let i=0;i<n.length;++i)Object.defineProperty(e,n[i],Object.getOwnPropertyDescriptor(r,n[i]))};D1.exports.wrapperSymbol=Symbol("wrapper");D1.exports.implSymbol=Symbol("impl");D1.exports.wrapperForImpl=function(t){return t[D1.exports.wrapperSymbol]};D1.exports.implForWrapper=function(t){return t[D1.exports.implSymbol]}});var Gfe=b((Tpr,wst)=>{wst.exports=[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1e3,1e3],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6e3],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8e3,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8e3]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9e3],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[3e4]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13e3,13e3],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43e3,43e3],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64e3,64e3],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66e3,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[12e4,12e4],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128e3,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23e3]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149e3]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32e3]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195e3,195e3],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[4e4]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918e3,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]});var Qfe=b((Opr,lC)=>{"use strict";var zfe=require("punycode"),Hfe=Gfe(),tb={TRANSITIONAL:0,NONTRANSITIONAL:1};function Wfe(t){return t.split("\0").map(function(e){return e.normalize("NFC")}).join("\0")}function Jfe(t){for(var e=0,r=Hfe.length-1;e<=r;){var n=Math.floor((e+r)/2),i=Hfe[n];if(i[0][0]<=t&&i[0][1]>=t)return i;i[0][0]>t?r=n-1:e=n+1}return null}var Ast=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function Yfe(t){return t.replace(Ast,"_").length}function Cst(t,e,r){for(var n=!1,i="",s=Yfe(t),o=0;o<s;++o){var a=t.codePointAt(o),u=Jfe(a);switch(u[1]){case"disallowed":n=!0,i+=String.fromCodePoint(a);break;case"ignored":break;case"mapped":i+=String.fromCodePoint.apply(String,u[2]);break;case"deviation":r===tb.TRANSITIONAL?i+=String.fromCodePoint.apply(String,u[2]):i+=String.fromCodePoint(a);break;case"valid":i+=String.fromCodePoint(a);break;case"disallowed_STD3_mapped":e?(n=!0,i+=String.fromCodePoint(a)):i+=String.fromCodePoint.apply(String,u[2]);break;case"disallowed_STD3_valid":e&&(n=!0),i+=String.fromCodePoint(a);break}}return{string:i,error:n}}var Tst=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function Ost(t,e){t.substr(0,4)==="xn--"&&(t=zfe.toUnicode(t),e=tb.NONTRANSITIONAL);var r=!1;(Wfe(t)!==t||t[3]==="-"&&t[4]==="-"||t[0]==="-"||t[t.length-1]==="-"||t.indexOf(".")!==-1||t.search(Tst)===0)&&(r=!0);for(var n=Yfe(t),i=0;i<n;++i){var s=Jfe(t.codePointAt(i));if(cC===tb.TRANSITIONAL&&s[1]!=="valid"||cC===tb.NONTRANSITIONAL&&s[1]!=="valid"&&s[1]!=="deviation"){r=!0;break}}return{label:t,error:r}}function cC(t,e,r){var n=Cst(t,e,r);n.string=Wfe(n.string);for(var i=n.string.split("."),s=0;s<i.length;++s)try{var o=Ost(i[s]);i[s]=o.label,n.error=n.error||o.error}catch{n.error=!0}return{string:i.join("."),error:n.error}}lC.exports.toASCII=function(t,e,r,n){var i=cC(t,e,r),s=i.string.split(".");if(s=s.map(function(u){try{return zfe.toASCII(u)}catch{return i.error=!0,u}}),n){var o=s.slice(0,s.length-1).join(".").length;(o.length>253||o.length===0)&&(i.error=!0);for(var a=0;a<s.length;++a)if(s.length>63||s.length===0){i.error=!0;break}}return i.error?null:s.join(".")};lC.exports.toUnicode=function(t,e){var r=cC(t,e,tb.NONTRANSITIONAL);return{domain:r.string,error:r.error}};lC.exports.PROCESSING_OPTIONS=tb});var hd=b((xpr,Xa)=>{"use strict";var rb=require("punycode"),Xfe=Qfe(),r1e={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},er=Symbol("failure");function Zfe(t){return rb.ucs2.decode(t).length}function e1e(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function E3(t){return t>=48&&t<=57}function v3(t){return t>=65&&t<=90||t>=97&&t<=122}function xst(t){return v3(t)||E3(t)}function sl(t){return E3(t)||t>=65&&t<=70||t>=97&&t<=102}function t1e(t){return t==="."||t.toLowerCase()==="%2e"}function Ist(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function Rst(t,e){return v3(t)&&(e===58||e===124)}function n1e(t){return t.length===2&&v3(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function Dst(t){return t.length===2&&v3(t.codePointAt(0))&&t[1]===":"}function kst(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/)!==-1}function Mst(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/)!==-1}function oU(t){return r1e[t]!==void 0}function Hi(t){return oU(t.scheme)}function Pst(t){return r1e[t]}function i1e(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e="0"+e),"%"+e}function Nst(t){let e=new Buffer(t),r="";for(let n=0;n<e.length;++n)r+=i1e(e[n]);return r}function Fst(t){let e=new Buffer(t),r=[];for(let n=0;n<e.length;++n)e[n]!==37?r.push(e[n]):e[n]===37&&sl(e[n+1])&&sl(e[n+2])?(r.push(parseInt(e.slice(n+1,n+3).toString(),16)),n+=2):r.push(e[n]);return new Buffer(r).toString()}function dC(t){return t<=31||t>126}var Bst=new Set([32,34,35,60,62,63,96,123,125]);function s1e(t){return dC(t)||Bst.has(t)}var qst=new Set([47,58,59,61,64,91,92,93,94,124]);function uU(t){return s1e(t)||qst.has(t)}function g0(t,e){let r=String.fromCodePoint(t);return e(t)?Nst(r):r}function Lst(t){let e=10;return t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t===""?0:(e===10?/[^0-9]/:e===16?/[^0-9A-Fa-f]/:/[^0-7]/).test(t)?er:parseInt(t,e)}function jst(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return t;let r=[];for(let s of e){if(s==="")return t;let o=Lst(s);if(o===er)return t;r.push(o)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return er;if(r[r.length-1]>=Math.pow(256,5-r.length))return er;let n=r.pop(),i=0;for(let s of r)n+=s*Math.pow(256,3-i),++i;return n}function $st(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e="."+e),r=Math.floor(r/256);return e}function Ust(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0;if(t=rb.ucs2.decode(t),t[i]===58){if(t[i+1]!==58)return er;i+=2,++r,n=r}for(;i<t.length;){if(r===8)return er;if(t[i]===58){if(n!==null)return er;++i,++r,n=r;continue}let s=0,o=0;for(;o<4&&sl(t[i]);)s=s*16+parseInt(e1e(t,i),16),++i,++o;if(t[i]===46){if(o===0||(i-=o,r>6))return er;let a=0;for(;t[i]!==void 0;){let u=null;if(a>0)if(t[i]===46&&a<4)++i;else return er;if(!E3(t[i]))return er;for(;E3(t[i]);){let c=parseInt(e1e(t,i));if(u===null)u=c;else{if(u===0)return er;u=u*10+c}if(u>255)return er;++i}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return er;break}else if(t[i]===58){if(++i,t[i]===void 0)return er}else if(t[i]!==void 0)return er;e[r]=s,++r}if(n!==null){let s=r-n;for(r=7;r!==0&&s>0;){let o=e[n+s-1];e[n+s-1]=e[r],e[r]=o,--r,--s}}else if(n===null&&r!==8)return er;return e}function Kst(t){let e="",n=Gst(t).idx,i=!1;for(let s=0;s<=7;++s)if(!(i&&t[s]===0)){if(i&&(i=!1),n===s){e+=s===0?"::":":",i=!0;continue}e+=t[s].toString(16),s!==7&&(e+=":")}return e}function aU(t,e){if(t[0]==="[")return t[t.length-1]!=="]"?er:Ust(t.substring(1,t.length-1));if(!e)return Vst(t);let r=Fst(t),n=Xfe.toASCII(r,!1,Xfe.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(n===null||kst(n))return er;let i=jst(n);return typeof i=="number"||i===er?i:n}function Vst(t){if(Mst(t))return er;let e="",r=rb.ucs2.decode(t);for(let n=0;n<r.length;++n)e+=g0(r[n],dC);return e}function Gst(t){let e=null,r=1,n=null,i=0;for(let s=0;s<t.length;++s)t[s]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=s),++i);return i>r&&(e=n,r=i),{idx:e,len:r}}function cU(t){return typeof t=="number"?$st(t):t instanceof Array?"["+Kst(t)+"]":t}function Hst(t){return t.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}function zst(t){return t.replace(/\u0009|\u000A|\u000D/g,"")}function o1e(t){let e=t.path;e.length!==0&&(t.scheme==="file"&&e.length===1&&Jst(e[0])||e.pop())}function a1e(t){return t.username!==""||t.password!==""}function Wst(t){return t.host===null||t.host===""||t.cannotBeABaseURL||t.scheme==="file"}function Jst(t){return/^[A-Za-z]:$/.test(t)}function Qn(t,e,r,n,i){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let o=Hst(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let s=zst(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=rb.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this["parse "+this.state](o,a);if(u){if(u===er){this.failure=!0;break}}else break}}Qn.prototype["parse scheme start"]=function(e,r){if(v3(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,er;return!0};Qn.prototype["parse scheme"]=function(e,r){if(xst(e)||e===43||e===45||e===46)this.buffer+=r.toLowerCase();else if(e===58){if(this.stateOverride&&(Hi(this.url)&&!oU(this.buffer)||!Hi(this.url)&&oU(this.buffer)||(a1e(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&(this.url.host===""||this.url.host===null))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;this.url.scheme==="file"?((this.input[this.pointer+1]!==47||this.input[this.pointer+2]!==47)&&(this.parseError=!0),this.state="file"):Hi(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Hi(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===47?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,er;return!0};Qn.prototype["parse no scheme"]=function(e){return this.base===null||this.base.cannotBeABaseURL&&e!==35?er:(this.base.cannotBeABaseURL&&e===35?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};Qn.prototype["parse special relative or authority"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};Qn.prototype["parse path or authority"]=function(e){return e===47?this.state="authority":(this.state="path",--this.pointer),!0};Qn.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,isNaN(e)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===47?this.state="relative slash":e===63?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):Hi(this.url)&&e===92?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0};Qn.prototype["parse relative slash"]=function(e){return Hi(this.url)&&(e===47||e===92)?(e===92&&(this.parseError=!0),this.state="special authority ignore slashes"):e===47?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};Qn.prototype["parse special authority slashes"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};Qn.prototype["parse special authority ignore slashes"]=function(e){return e!==47&&e!==92?(this.state="authority",--this.pointer):this.parseError=!0,!0};Qn.prototype["parse authority"]=function(e,r){if(e===64){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let n=Zfe(this.buffer);for(let i=0;i<n;++i){let s=this.buffer.codePointAt(i);if(s===58&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=g0(s,uU);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===47||e===63||e===35||Hi(this.url)&&e===92){if(this.atFlag&&this.buffer==="")return this.parseError=!0,er;this.pointer-=Zfe(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};Qn.prototype["parse hostname"]=Qn.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===58&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,er;let n=aU(this.buffer,Hi(this.url));if(n===er)return er;if(this.url.host=n,this.buffer="",this.state="port",this.stateOverride==="hostname")return!1}else if(isNaN(e)||e===47||e===63||e===35||Hi(this.url)&&e===92){if(--this.pointer,Hi(this.url)&&this.buffer==="")return this.parseError=!0,er;if(this.stateOverride&&this.buffer===""&&(a1e(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=aU(this.buffer,Hi(this.url));if(n===er)return er;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===91?this.arrFlag=!0:e===93&&(this.arrFlag=!1),this.buffer+=r;return!0};Qn.prototype["parse port"]=function(e,r){if(E3(e))this.buffer+=r;else if(isNaN(e)||e===47||e===63||e===35||Hi(this.url)&&e===92||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>Math.pow(2,16)-1)return this.parseError=!0,er;this.url.port=n===Pst(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,er;return!0};var Yst=new Set([47,92,63,35]);Qn.prototype["parse file"]=function(e){return this.url.scheme="file",e===47||e===92?(e===92&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?isNaN(e)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===63?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1===0||!Rst(e,this.input[this.pointer+1])||this.input.length-this.pointer-1>=2&&!Yst.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),o1e(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0};Qn.prototype["parse file slash"]=function(e){return e===47||e===92?(e===92&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(Dst(this.base.path[0])?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0};Qn.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===47||e===92||e===63||e===35)if(--this.pointer,!this.stateOverride&&n1e(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=aU(this.buffer,Hi(this.url));if(n===er)return er;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};Qn.prototype["parse path start"]=function(e){return Hi(this.url)?(e===92&&(this.parseError=!0),this.state="path",e!==47&&e!==92&&--this.pointer):!this.stateOverride&&e===63?(this.url.query="",this.state="query"):!this.stateOverride&&e===35?(this.url.fragment="",this.state="fragment"):e!==void 0&&(this.state="path",e!==47&&--this.pointer),!0};Qn.prototype["parse path"]=function(e){if(isNaN(e)||e===47||Hi(this.url)&&e===92||!this.stateOverride&&(e===63||e===35)){if(Hi(this.url)&&e===92&&(this.parseError=!0),Ist(this.buffer)?(o1e(this.url),e!==47&&!(Hi(this.url)&&e===92)&&this.url.path.push("")):t1e(this.buffer)&&e!==47&&!(Hi(this.url)&&e===92)?this.url.path.push(""):t1e(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&n1e(this.buffer)&&(this.url.host!==""&&this.url.host!==null&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="",this.url.scheme==="file"&&(e===void 0||e===63||e===35))for(;this.url.path.length>1&&this.url.path[0]==="";)this.parseError=!0,this.url.path.shift();e===63&&(this.url.query="",this.state="query"),e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!sl(this.input[this.pointer+1])||!sl(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=g0(e,s1e);return!0};Qn.prototype["parse cannot-be-a-base-URL path"]=function(e){return e===63?(this.url.query="",this.state="query"):e===35?(this.url.fragment="",this.state="fragment"):(!isNaN(e)&&e!==37&&(this.parseError=!0),e===37&&(!sl(this.input[this.pointer+1])||!sl(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path[0]=this.url.path[0]+g0(e,dC))),!0};Qn.prototype["parse query"]=function(e,r){if(isNaN(e)||!this.stateOverride&&e===35){(!Hi(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8");let n=new Buffer(this.buffer);for(let i=0;i<n.length;++i)n[i]<33||n[i]>126||n[i]===34||n[i]===35||n[i]===60||n[i]===62?this.url.query+=i1e(n[i]):this.url.query+=String.fromCodePoint(n[i]);this.buffer="",e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!sl(this.input[this.pointer+1])||!sl(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r;return!0};Qn.prototype["parse fragment"]=function(e){return isNaN(e)||(e===0?this.parseError=!0:(e===37&&(!sl(this.input[this.pointer+1])||!sl(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=g0(e,dC))),!0};function Qst(t,e){let r=t.scheme+":";if(t.host!==null?(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=":"+t.password),r+="@"),r+=cU(t.host),t.port!==null&&(r+=":"+t.port)):t.host===null&&t.scheme==="file"&&(r+="//"),t.cannotBeABaseURL)r+=t.path[0];else for(let n of t.path)r+="/"+n;return t.query!==null&&(r+="?"+t.query),!e&&t.fragment!==null&&(r+="#"+t.fragment),r}function Xst(t){let e=t.scheme+"://";return e+=cU(t.host),t.port!==null&&(e+=":"+t.port),e}Xa.exports.serializeURL=Qst;Xa.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":try{return Xa.exports.serializeURLOrigin(Xa.exports.parseURL(t.path[0]))}catch{return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return Xst({scheme:t.scheme,host:t.host,port:t.port});case"file":return"file://";default:return"null"}};Xa.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new Qn(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?"failure":r.url};Xa.exports.setTheUsername=function(t,e){t.username="";let r=rb.ucs2.decode(e);for(let n=0;n<r.length;++n)t.username+=g0(r[n],uU)};Xa.exports.setThePassword=function(t,e){t.password="";let r=rb.ucs2.decode(e);for(let n=0;n<r.length;++n)t.password+=g0(r[n],uU)};Xa.exports.serializeHost=cU;Xa.exports.cannotHaveAUsernamePasswordPort=Wst;Xa.exports.serializeInteger=function(t){return String(t)};Xa.exports.parseURL=function(t,e){return e===void 0&&(e={}),Xa.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var c1e=b(u1e=>{"use strict";var Xn=hd();u1e.implementation=class{constructor(e){let r=e[0],n=e[1],i=null;if(n!==void 0&&(i=Xn.basicURLParse(n),i==="failure"))throw new TypeError("Invalid base URL");let s=Xn.basicURLParse(r,{baseURL:i});if(s==="failure")throw new TypeError("Invalid URL");this._url=s}get href(){return Xn.serializeURL(this._url)}set href(e){let r=Xn.basicURLParse(e);if(r==="failure")throw new TypeError("Invalid URL");this._url=r}get origin(){return Xn.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(e){Xn.basicURLParse(e+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){Xn.cannotHaveAUsernamePasswordPort(this._url)||Xn.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){Xn.cannotHaveAUsernamePasswordPort(this._url)||Xn.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?Xn.serializeHost(e.host):Xn.serializeHost(e.host)+":"+Xn.serializeInteger(e.port)}set host(e){this._url.cannotBeABaseURL||Xn.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":Xn.serializeHost(this._url.host)}set hostname(e){this._url.cannotBeABaseURL||Xn.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":Xn.serializeInteger(this._url.port)}set port(e){Xn.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:Xn.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:this._url.path.length===0?"":"/"+this._url.path.join("/")}set pathname(e){this._url.cannotBeABaseURL||(this._url.path=[],Xn.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":"?"+this._url.query}set search(e){let r=this._url;if(e===""){r.query=null;return}let n=e[0]==="?"?e.substring(1):e;r.query="",Xn.basicURLParse(n,{url:r,stateOverride:"query"})}get hash(){return this._url.fragment===null||this._url.fragment===""?"":"#"+this._url.fragment}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",Xn.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var p1e=b((Dpr,S3)=>{"use strict";var Gu=Kfe(),d1e=Vfe(),l1e=c1e(),Zr=d1e.implSymbol;function hs(t){if(!this||this[Zr]||!(this instanceof hs))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let e=[];for(let r=0;r<arguments.length&&r<2;++r)e[r]=arguments[r];e[0]=Gu.USVString(e[0]),e[1]!==void 0&&(e[1]=Gu.USVString(e[1])),S3.exports.setup(this,e)}hs.prototype.toJSON=function(){if(!this||!S3.exports.is(this))throw new TypeError("Illegal invocation");let e=[];for(let r=0;r<arguments.length&&r<0;++r)e[r]=arguments[r];return this[Zr].toJSON.apply(this[Zr],e)};Object.defineProperty(hs.prototype,"href",{get(){return this[Zr].href},set(t){t=Gu.USVString(t),this[Zr].href=t},enumerable:!0,configurable:!0});hs.prototype.toString=function(){if(!this||!S3.exports.is(this))throw new TypeError("Illegal invocation");return this.href};Object.defineProperty(hs.prototype,"origin",{get(){return this[Zr].origin},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"protocol",{get(){return this[Zr].protocol},set(t){t=Gu.USVString(t),this[Zr].protocol=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"username",{get(){return this[Zr].username},set(t){t=Gu.USVString(t),this[Zr].username=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"password",{get(){return this[Zr].password},set(t){t=Gu.USVString(t),this[Zr].password=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"host",{get(){return this[Zr].host},set(t){t=Gu.USVString(t),this[Zr].host=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"hostname",{get(){return this[Zr].hostname},set(t){t=Gu.USVString(t),this[Zr].hostname=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"port",{get(){return this[Zr].port},set(t){t=Gu.USVString(t),this[Zr].port=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"pathname",{get(){return this[Zr].pathname},set(t){t=Gu.USVString(t),this[Zr].pathname=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"search",{get(){return this[Zr].search},set(t){t=Gu.USVString(t),this[Zr].search=t},enumerable:!0,configurable:!0});Object.defineProperty(hs.prototype,"hash",{get(){return this[Zr].hash},set(t){t=Gu.USVString(t),this[Zr].hash=t},enumerable:!0,configurable:!0});S3.exports={is(t){return!!t&&t[Zr]instanceof l1e.implementation},create(t,e){let r=Object.create(hs.prototype);return this.setup(r,t,e),r},setup(t,e,r){r||(r={}),r.wrapper=t,t[Zr]=new l1e.implementation(e,r),t[Zr][d1e.wrapperSymbol]=t},interface:hs,expose:{Window:{URL:hs},Worker:{URL:hs}}}});var f1e=b(md=>{"use strict";md.URL=p1e().interface;md.serializeURL=hd().serializeURL;md.serializeURLOrigin=hd().serializeURLOrigin;md.basicURLParse=hd().basicURLParse;md.setTheUsername=hd().setTheUsername;md.setThePassword=hd().setThePassword;md.serializeHost=hd().serializeHost;md.serializeInteger=hd().serializeInteger;md.parseURL=hd().parseURL});var C1e=b((al,A1e)=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});function ob(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ol=ob(require("stream")),g1e=ob(require("http")),fC=ob(require("url")),b1e=ob(f1e()),Zst=ob(require("https")),b0=ob(require("zlib")),eot=ol.Readable,kp=Symbol("buffer"),lU=Symbol("type"),A3=class t{constructor(){this[lU]="";let e=arguments[0],r=arguments[1],n=[],i=0;if(e){let o=e,a=Number(o.length);for(let u=0;u<a;u++){let c=o[u],l;c instanceof Buffer?l=c:ArrayBuffer.isView(c)?l=Buffer.from(c.buffer,c.byteOffset,c.byteLength):c instanceof ArrayBuffer?l=Buffer.from(c):c instanceof t?l=c[kp]:l=Buffer.from(typeof c=="string"?c:String(c)),i+=l.length,n.push(l)}}this[kp]=Buffer.concat(n);let s=r&&r.type!==void 0&&String(r.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[lU]=s)}get size(){return this[kp].length}get type(){return this[lU]}text(){return Promise.resolve(this[kp].toString())}arrayBuffer(){let e=this[kp],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){let e=new eot;return e._read=function(){},e.push(this[kp]),e.push(null),e}toString(){return"[object Blob]"}slice(){let e=this.size,r=arguments[0],n=arguments[1],i,s;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?s=e:n<0?s=Math.max(e+n,0):s=Math.min(n,e);let o=Math.max(s-i,0),u=this[kp].slice(i,i+o),c=new t([],{type:arguments[2]});return c[kp]=u,c}};Object.defineProperties(A3.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(A3.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function Ms(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Ms.prototype=Object.create(Error.prototype);Ms.prototype.constructor=Ms;Ms.prototype.name="FetchError";var hU;try{hU=require("encoding").convert}catch{}var Pp=Symbol("Body internals"),h1e=ol.PassThrough;function ms(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var s=r.timeout;let o=s===void 0?0:s;t==null?t=null:_1e(t)?t=Buffer.from(t.toString()):T3(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ol||(t=Buffer.from(String(t)))),this[Pp]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=o,t instanceof ol&&t.on("error",function(a){let u=a.name==="AbortError"?a:new Ms(`Invalid response body while trying to fetch ${e.url}: ${a.message}`,"system",a);e[Pp].error=u})}ms.prototype={get body(){return this[Pp].body},get bodyUsed(){return this[Pp].disturbed},arrayBuffer(){return nb.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return nb.call(this).then(function(e){return Object.assign(new A3([],{type:t.toLowerCase()}),{[kp]:e})})},json(){var t=this;return nb.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return ms.Promise.reject(new Ms(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return nb.call(this).then(function(t){return t.toString()})},buffer(){return nb.call(this)},textConverted(){var t=this;return nb.call(this).then(function(e){return tot(e,t.headers)})}};Object.defineProperties(ms.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});ms.mixIn=function(t){for(let e of Object.getOwnPropertyNames(ms.prototype))if(!(e in t)){let r=Object.getOwnPropertyDescriptor(ms.prototype,e);Object.defineProperty(t,e,r)}};function nb(){var t=this;if(this[Pp].disturbed)return ms.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Pp].disturbed=!0,this[Pp].error)return ms.Promise.reject(this[Pp].error);let e=this.body;if(e===null)return ms.Promise.resolve(Buffer.alloc(0));if(T3(e)&&(e=e.stream()),Buffer.isBuffer(e))return ms.Promise.resolve(e);if(!(e instanceof ol))return ms.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new ms.Promise(function(s,o){let a;t.timeout&&(a=setTimeout(function(){i=!0,o(new Ms(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(u){u.name==="AbortError"?(i=!0,o(u)):o(new Ms(`Invalid response body while trying to fetch ${t.url}: ${u.message}`,"system",u))}),e.on("data",function(u){if(!(i||u===null)){if(t.size&&n+u.length>t.size){i=!0,o(new Ms(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=u.length,r.push(u)}}),e.on("end",function(){if(!i){clearTimeout(a);try{s(Buffer.concat(r,n))}catch(u){o(new Ms(`Could not create Buffer from response body for ${t.url}: ${u.message}`,"system",u))}}})})}function tot(t,e){if(typeof hU!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");let r=e.get("content-type"),n="utf-8",i,s;return r&&(i=/charset=([^;]*)/i.exec(r)),s=t.slice(0,1024).toString(),!i&&s&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(s)),!i&&s&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(s),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&s&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),hU(t,"UTF-8",n).toString()}function _1e(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function T3(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function E1e(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof ol&&typeof n.getBoundary!="function"&&(e=new h1e,r=new h1e,n.pipe(e),n.pipe(r),t[Pp].body=e,n=r),n}function v1e(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":_1e(t)?"application/x-www-form-urlencoded;charset=UTF-8":T3(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof ol?null:"text/plain;charset=UTF-8"}function S1e(t){let e=t.body;return e===null?0:T3(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function rot(t,e){let r=e.body;r===null?t.end():T3(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}ms.Promise=global.Promise;var w1e=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,mU=/[^\t\x20-\x7e\x80-\xff]/;function w3(t){if(t=`${t}`,w1e.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function m1e(t){if(t=`${t}`,mU.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function ib(t,e){e=e.toLowerCase();for(let r in t)if(r.toLowerCase()===e)return r}var _i=Symbol("map"),zu=class t{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[_i]=Object.create(null),e instanceof t){let r=e.raw(),n=Object.keys(r);for(let i of n)for(let s of r[i])this.append(i,s);return}if(e!=null)if(typeof e=="object"){let r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");let n=[];for(let i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(let i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(let n of Object.keys(e)){let i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,w3(e);let r=ib(this[_i],e);return r===void 0?null:this[_i][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=yU(this),i=0;for(;i<n.length;){var s=n[i];let o=s[0],a=s[1];e.call(r,a,o,this),n=yU(this),i++}}set(e,r){e=`${e}`,r=`${r}`,w3(e),m1e(r);let n=ib(this[_i],e);this[_i][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,w3(e),m1e(r);let n=ib(this[_i],e);n!==void 0?this[_i][n].push(r):this[_i][e]=[r]}has(e){return e=`${e}`,w3(e),ib(this[_i],e)!==void 0}delete(e){e=`${e}`,w3(e);let r=ib(this[_i],e);r!==void 0&&delete this[_i][r]}raw(){return this[_i]}keys(){return dU(this,"key")}values(){return dU(this,"value")}[Symbol.iterator](){return dU(this,"key+value")}};zu.prototype.entries=zu.prototype[Symbol.iterator];Object.defineProperty(zu.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(zu.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function yU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[_i]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[_i][n].join(", ")}:function(n){return[n.toLowerCase(),t[_i][n].join(", ")]})}var gU=Symbol("internal");function dU(t,e){let r=Object.create(bU);return r[gU]={target:t,kind:e,index:0},r}var bU=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==bU)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[gU];let e=t.target,r=t.kind,n=t.index,i=yU(e,r),s=i.length;return n>=s?{value:void 0,done:!0}:(this[gU].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(bU,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function not(t){let e=Object.assign({__proto__:null},t[_i]),r=ib(t[_i],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function iot(t){let e=new zu;for(let r of Object.keys(t))if(!w1e.test(r))if(Array.isArray(t[r]))for(let n of t[r])mU.test(n)||(e[_i][r]===void 0?e[_i][r]=[n]:e[_i][r].push(n));else mU.test(t[r])||(e[_i][r]=[t[r]]);return e}var k1=Symbol("Response internals"),sot=g1e.STATUS_CODES,Hu=class t{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ms.call(this,e,r);let n=r.status||200,i=new zu(r.headers);if(e!=null&&!i.has("Content-Type")){let s=v1e(e);s&&i.append("Content-Type",s)}this[k1]={url:r.url,status:n,statusText:r.statusText||sot[n],headers:i,counter:r.counter}}get url(){return this[k1].url||""}get status(){return this[k1].status}get ok(){return this[k1].status>=200&&this[k1].status<300}get redirected(){return this[k1].counter>0}get statusText(){return this[k1].statusText}get headers(){return this[k1].headers}clone(){return new t(E1e(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}};ms.mixIn(Hu.prototype);Object.defineProperties(Hu.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(Hu.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var Mp=Symbol("Request internals"),oot=fC.URL||b1e.URL,aot=fC.parse,uot=fC.format;function pU(t){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(t)&&(t=new oot(t).toString()),aot(t)}var cot="destroy"in ol.Readable.prototype;function pC(t){return typeof t=="object"&&typeof t[Mp]=="object"}function lot(t){let e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}var P1=class t{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;pC(e)?n=pU(e.url):(e&&e.href?n=pU(e.href):n=pU(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||pC(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body!=null?r.body:pC(e)&&e.body!==null?E1e(e):null;ms.call(this,s,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});let o=new zu(r.headers||e.headers||{});if(s!=null&&!o.has("Content-Type")){let u=v1e(s);u&&o.append("Content-Type",u)}let a=pC(e)?e.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!lot(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Mp]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:a},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[Mp].method}get url(){return uot(this[Mp].parsedURL)}get headers(){return this[Mp].headers}get redirect(){return this[Mp].redirect}get signal(){return this[Mp].signal}clone(){return new t(this)}};ms.mixIn(P1.prototype);Object.defineProperty(P1.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(P1.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function dot(t){let e=t[Mp].parsedURL,r=new zu(t[Mp].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof ol.Readable&&!cot)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){let s=S1e(t);typeof s=="number"&&(n=String(s))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),Object.assign({},e,{method:t.method,headers:not(r),agent:i})}function sb(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}sb.prototype=Object.create(Error.prototype);sb.prototype.constructor=sb;sb.prototype.name="AbortError";var C3=fC.URL||b1e.URL,y1e=ol.PassThrough,pot=function(e,r){let n=new C3(r).hostname,i=new C3(e).hostname;return n===i||n[n.length-i.length-1]==="."&&n.endsWith(i)},fot=function(e,r){let n=new C3(r).protocol,i=new C3(e).protocol;return n===i};function M1(t,e){if(!M1.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return ms.Promise=M1.Promise,new M1.Promise(function(r,n){let i=new P1(t,e),s=dot(i),o=(s.protocol==="https:"?Zst:g1e).request,a=i.signal,u=null,c=function(){let y=new sb("The user aborted a request.");n(y),i.body&&i.body instanceof ol.Readable&&fU(i.body,y),!(!u||!u.body)&&u.body.emit("error",y)};if(a&&a.aborted){c();return}let l=function(){c(),f()},d=o(s),p;a&&a.addEventListener("abort",l);function f(){d.abort(),a&&a.removeEventListener("abort",l),clearTimeout(p)}i.timeout&&d.once("socket",function(h){p=setTimeout(function(){n(new Ms(`network timeout at: ${i.url}`,"request-timeout")),f()},i.timeout)}),d.on("error",function(h){n(new Ms(`request to ${i.url} failed, reason: ${h.message}`,"system",h)),u&&u.body&&fU(u.body,h),f()}),hot(d,function(h){a&&a.aborted||u&&u.body&&fU(u.body,h)}),parseInt(process.version.substring(1))<14&&d.on("socket",function(h){h.addListener("close",function(y){let E=h.listenerCount("data")>0;if(u&&E&&!y&&!(a&&a.aborted)){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",v)}})}),d.on("response",function(h){clearTimeout(p);let y=iot(h.headers);if(M1.isRedirect(h.statusCode)){let A=y.get("Location"),C=null;try{C=A===null?null:new C3(A,i.url).toString()}catch{if(i.redirect!=="manual"){n(new Ms(`uri requested responds with an invalid redirect URL: ${A}`,"invalid-redirect")),f();return}}switch(i.redirect){case"error":n(new Ms(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),f();return;case"manual":if(C!==null)try{y.set("Location",C)}catch(R){n(R)}break;case"follow":if(C===null)break;if(i.counter>=i.follow){n(new Ms(`maximum redirect reached at: ${i.url}`,"max-redirect")),f();return}let x={headers:new zu(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(!pot(i.url,C)||!fot(i.url,C))for(let R of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(R);if(h.statusCode!==303&&i.body&&S1e(i)===null){n(new Ms("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&i.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length")),r(M1(new P1(C,x))),f();return}}h.once("end",function(){a&&a.removeEventListener("abort",l)});let E=h.pipe(new y1e),v={url:i.url,status:h.statusCode,statusText:h.statusMessage,headers:y,size:i.size,timeout:i.timeout,counter:i.counter},w=y.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||w===null||h.statusCode===204||h.statusCode===304){u=new Hu(E,v),r(u);return}let T={flush:b0.Z_SYNC_FLUSH,finishFlush:b0.Z_SYNC_FLUSH};if(w=="gzip"||w=="x-gzip"){E=E.pipe(b0.createGunzip(T)),u=new Hu(E,v),r(u);return}if(w=="deflate"||w=="x-deflate"){let A=h.pipe(new y1e);A.once("data",function(C){(C[0]&15)===8?E=E.pipe(b0.createInflate()):E=E.pipe(b0.createInflateRaw()),u=new Hu(E,v),r(u)}),A.on("end",function(){u||(u=new Hu(E,v),r(u))});return}if(w=="br"&&typeof b0.createBrotliDecompress=="function"){E=E.pipe(b0.createBrotliDecompress()),u=new Hu(E,v),r(u);return}u=new Hu(E,v),r(u)}),rot(d,i)})}function hot(t,e){let r;t.on("socket",function(n){r=n}),t.on("response",function(n){let i=n.headers;i["transfer-encoding"]==="chunked"&&!i["content-length"]&&n.once("close",function(s){if(r&&r.listenerCount("data")>0&&!s){let a=new Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",e(a)}})})}function fU(t,e){t.destroy?t.destroy(e):(t.emit("error",e),t.end())}M1.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308};M1.Promise=global.Promise;A1e.exports=al=M1;Object.defineProperty(al,"__esModule",{value:!0});al.default=al;al.Headers=zu;al.Request=P1;al.Response=Hu;al.FetchError=Ms;al.AbortError=sb});var hC=b((Mpr,T1e)=>{"use strict";var yd=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";yd.writable=t=>yd(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";yd.readable=t=>yd(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";yd.duplex=t=>yd.writable(t)&&yd.readable(t);yd.transform=t=>yd.duplex(t)&&typeof t._transform=="function";T1e.exports=yd});var EU=b(mC=>{"use strict";Object.defineProperty(mC,"__esModule",{value:!0});mC.GaxiosError=void 0;var _U=class extends Error{constructor(e,r,n){super(e),this.response=n,this.config=r,this.response.data=mot(r.responseType,n.data),this.code=n.status.toString()}};mC.GaxiosError=_U;function mot(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}});var x1e=b(yC=>{"use strict";Object.defineProperty(yC,"__esModule",{value:!0});yC.getRetryConfig=void 0;async function yot(t){var e;let r=O1e(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!await(r.shouldRetry||got)(t))return{shouldRetry:!1,config:t.config};let o=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let a=r.retryBackoff?r.retryBackoff(t,o):new Promise(u=>{setTimeout(u,o)});return r.onRetryAttempt&&r.onRetryAttempt(t),await a,{shouldRetry:!0,config:t.config}}yC.getRetryConfig=yot;function got(t){let e=O1e(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let s=t.response.status;if(s>=n&&s<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function O1e(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var vU=b((Fpr,I1e)=>{var ab=1e3,ub=ab*60,cb=ub*60,_0=cb*24,bot=_0*7,_ot=_0*365.25;I1e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Eot(t);if(r==="number"&&isFinite(t))return e.long?Sot(t):vot(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Eot(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*_ot;case"weeks":case"week":case"w":return r*bot;case"days":case"day":case"d":return r*_0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*cb;case"minutes":case"minute":case"mins":case"min":case"m":return r*ub;case"seconds":case"second":case"secs":case"sec":case"s":return r*ab;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function vot(t){var e=Math.abs(t);return e>=_0?Math.round(t/_0)+"d":e>=cb?Math.round(t/cb)+"h":e>=ub?Math.round(t/ub)+"m":e>=ab?Math.round(t/ab)+"s":t+"ms"}function Sot(t){var e=Math.abs(t);return e>=_0?gC(t,e,_0,"day"):e>=cb?gC(t,e,cb,"hour"):e>=ub?gC(t,e,ub,"minute"):e>=ab?gC(t,e,ab,"second"):t+" ms"}function gC(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var SU=b((Bpr,R1e)=>{function wot(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=vU(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function y(...E){if(!y.enabled)return;let v=y,w=Number(new Date),T=w-(d||w);v.diff=T,v.prev=d,v.curr=w,d=w,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let A=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=E[A];x=M.call(v,I),E.splice(A,1),A--}return x}),r.formatArgs.call(v,E),(v.log||r.log).apply(v,E)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:E=>{p=E}}),typeof r.init=="function"&&r.init(y),y}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,y=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,y=p,f++):(p++,f++);else if(h!==-1)f=h+1,y++,p=y;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}R1e.exports=wot});var D1e=b((ua,bC)=>{ua.formatArgs=Cot;ua.save=Tot;ua.load=Oot;ua.useColors=Aot;ua.storage=xot();ua.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ua.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Aot(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Cot(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+bC.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ua.log=console.debug||console.log||(()=>{});function Tot(t){try{t?ua.storage.setItem("debug",t):ua.storage.removeItem("debug")}catch{}}function Oot(){let t;try{t=ua.storage.getItem("debug")||ua.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function xot(){try{return localStorage}catch{}}bC.exports=SU()(ua);var{formatters:Iot}=bC.exports;Iot.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var M1e=b((qpr,k1e)=>{"use strict";k1e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var O3=b((Lpr,N1e)=>{"use strict";var Rot=require("os"),P1e=require("tty"),Wu=M1e(),{env:ys}=process,N1;Wu("no-color")||Wu("no-colors")||Wu("color=false")||Wu("color=never")?N1=0:(Wu("color")||Wu("colors")||Wu("color=true")||Wu("color=always"))&&(N1=1);"FORCE_COLOR"in ys&&(ys.FORCE_COLOR==="true"?N1=1:ys.FORCE_COLOR==="false"?N1=0:N1=ys.FORCE_COLOR.length===0?1:Math.min(parseInt(ys.FORCE_COLOR,10),3));function wU(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function AU(t,e){if(N1===0)return 0;if(Wu("color=16m")||Wu("color=full")||Wu("color=truecolor"))return 3;if(Wu("color=256"))return 2;if(t&&!e&&N1===void 0)return 0;let r=N1||0;if(ys.TERM==="dumb")return r;if(process.platform==="win32"){let n=Rot.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ys)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ys)||ys.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in ys)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ys.TEAMCITY_VERSION)?1:0;if(ys.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ys){let n=parseInt((ys.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ys.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ys.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ys.TERM)||"COLORTERM"in ys?1:r}function Dot(t){let e=AU(t,t&&t.isTTY);return wU(e)}N1e.exports={supportsColor:Dot,stdout:wU(AU(!0,P1e.isatty(1))),stderr:wU(AU(!0,P1e.isatty(2)))}});var B1e=b((gs,EC)=>{var kot=require("tty"),_C=require("util");gs.init=Lot;gs.log=Fot;gs.formatArgs=Pot;gs.save=Bot;gs.load=qot;gs.useColors=Mot;gs.destroy=_C.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");gs.colors=[6,2,3,4,5,1];try{let t=O3();t&&(t.stderr||t).level>=2&&(gs.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}gs.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Mot(){return"colors"in gs.inspectOpts?!!gs.inspectOpts.colors:kot.isatty(process.stderr.fd)}function Pot(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+EC.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Not()+e+" "+t[0]}function Not(){return gs.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Fot(...t){return process.stderr.write(_C.formatWithOptions(gs.inspectOpts,...t)+`
`)}function Bot(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function qot(){return process.env.DEBUG}function Lot(t){t.inspectOpts={};let e=Object.keys(gs.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=gs.inspectOpts[e[r]]}EC.exports=SU()(gs);var{formatters:F1e}=EC.exports;F1e.o=function(t){return this.inspectOpts.colors=this.useColors,_C.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};F1e.O=function(t){return this.inspectOpts.colors=this.useColors,_C.inspect(t,this.inspectOpts)}});var vC=b((jpr,CU)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?CU.exports=D1e():CU.exports=B1e()});var q1e=b(TU=>{"use strict";Object.defineProperty(TU,"__esModule",{value:!0});function jot(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(s,o)=>{s?i(s):n(o)})})}}TU.default=jot});var $1e=b((xU,j1e)=>{"use strict";var L1e=xU&&xU.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},$ot=require("events"),Uot=L1e(vC()),Kot=L1e(q1e()),x3=Uot.default("agent-base");function Vot(t){return!!t&&typeof t.addRequest=="function"}function OU(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function SC(t,e){return new SC.Agent(t,e)}(function(t){class e extends $ot.EventEmitter{constructor(n,i){super();let s=i;typeof n=="function"?this.callback=n:n&&(s=n),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:OU()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:OU()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let s=Object.assign({},i);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=OU()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,n._last=!0,n.shouldKeepAlive=!1;let o=!1,a=null,u=s.timeout||this.timeout,c=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{a=null,o=!0;let f=new Error(`A "socket" was not created for HTTP request before ${u}ms`);f.code="ETIMEOUT",c(f)},d=f=>{o||(a!==null&&(clearTimeout(a),a=null),c(f))},p=f=>{if(o)return;if(a!=null&&(clearTimeout(a),a=null),Vot(f)){x3("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,s);return}if(f){f.once("free",()=>{this.freeSocket(f,s)}),n.onSocket(f);return}let h=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);c(h)};if(typeof this.callback!="function"){c(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(x3("Converting legacy callback function to promise"),this.promisifiedCallback=Kot.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(a=setTimeout(l,u)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{x3("Resolving socket for %o request: %o",s.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,s)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){x3("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){x3("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(SC||(SC={}));j1e.exports=SC});var U1e=b(R3=>{"use strict";var Got=R3&&R3.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(R3,"__esModule",{value:!0});var Hot=Got(vC()),I3=Hot.default("https-proxy-agent:parse-proxy-response");function zot(t){return new Promise((e,r)=>{let n=0,i=[];function s(){let d=t.read();d?l(d):t.once("readable",s)}function o(){t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",a),t.removeListener("readable",s)}function a(d){I3("onclose had error %o",d)}function u(){I3("onend")}function c(d){o(),I3("onerror %o",d),r(d)}function l(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){I3("have not received end of HTTP headers yet..."),s();return}let h=p.toString("ascii",0,p.indexOf(`\r
`)),y=+h.split(" ")[1];I3("got proxy server response: %o",h),e({statusCode:y,buffered:p})}t.on("error",c),t.on("close",a),t.on("end",u),s()})}R3.default=zot});var G1e=b(E0=>{"use strict";var Wot=E0&&E0.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},lb=E0&&E0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(E0,"__esModule",{value:!0});var K1e=lb(require("net")),V1e=lb(require("tls")),Jot=lb(require("url")),Yot=lb(require("assert")),Qot=lb(vC()),Xot=$1e(),Zot=lb(U1e()),D3=Qot.default("https-proxy-agent:agent"),IU=class extends Xot.Agent{constructor(e){let r;if(typeof e=="string"?r=Jot.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");D3("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||rat(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return Wot(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,s;i?(D3("Creating `tls.Socket`: %o",n),s=V1e.default.connect(n)):(D3("Creating `net.Socket`: %o",n),s=K1e.default.connect(n));let o=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:c,port:l,secureEndpoint:d}=r;tat(l,d)||(c+=`:${l}`),o.Host=c,o.Connection="close";for(let E of Object.keys(o))u+=`${E}: ${o[E]}\r
`;let p=Zot.default(s);s.write(`${u}\r
`);let{statusCode:f,buffered:h}=yield p;if(f===200){if(e.once("socket",eat),r.secureEndpoint){D3("Upgrading socket connection to TLS");let E=r.servername||r.host;return V1e.default.connect(Object.assign(Object.assign({},nat(r,"host","hostname","path","port")),{socket:s,servername:E}))}return s}s.destroy();let y=new K1e.default.Socket({writable:!1});return y.readable=!0,e.once("socket",E=>{D3("replaying proxy buffer for failed request"),Yot.default(E.listenerCount("data")>0),E.push(h),E.push(null)}),y})}};E0.default=IU;function eat(t){t.resume()}function tat(t,e){return!!(!e&&t===80||e&&t===443)}function rat(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function nat(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var z1e=b((kU,H1e)=>{"use strict";var iat=kU&&kU.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},RU=iat(G1e());function DU(t){return new RU.default(t)}(function(t){t.HttpsProxyAgent=RU.default,t.prototype=RU.default.prototype})(DU||(DU={}));H1e.exports=DU});var X1e=b(db=>{"use strict";var wC=db&&db.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(db,"__esModule",{value:!0});db.Gaxios=void 0;var sat=wC(uC()),oat=require("https"),aat=wC(C1e()),uat=wC(require("querystring")),cat=wC(hC()),J1e=require("url"),lat=EU(),dat=x1e(),pat=hat()?window.fetch:aat.default;function fat(){return typeof window<"u"&&!!window}function hat(){return fat()&&!!window.fetch}function mat(){return typeof Buffer<"u"}function W1e(t,e){return!!Y1e(t,e)}function Y1e(t,e){e=e.toLowerCase();for(let r of Object.keys(t?.headers||{}))if(e===r.toLowerCase())return t.headers[r]}var MU;function Q1e(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(MU=z1e()),i}Q1e();function yat(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new J1e.URL(t);return!!n.find(s=>s.startsWith("*.")||s.startsWith(".")?(s=s.replace(/^\*\./,"."),i.hostname.endsWith(s)):s===i.origin||s===i.hostname)}function gat(t){if(!yat(t))return Q1e()}var PU=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}async request(e={}){return e=this.validateOpts(e),this._request(e)}async _defaultAdapter(e){let n=await(e.fetchImplementation||pat)(e.url,e),i=await this.getResponseData(e,n);return this.translateResponse(e,n,i)}async _request(e={}){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let n="";await new Promise(i=>{r.data.on("data",s=>{n+=s}),r.data.on("end",i)}),r.data=n}throw new lat.GaxiosError(`Request failed with status code ${r.status}`,e,r)}return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:s}=await(0,dat.getRetryConfig)(n);if(i&&s)return n.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,this._request(n.config);throw n}}async getResponseData(e,r){switch(e.responseType){case"stream":return r.body;case"json":{let n=await r.text();try{n=JSON.parse(n)}catch{}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}}validateOpts(e){let r=(0,sat.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let s=r.paramsSerializer(r.params);s.startsWith("?")&&(s=s.slice(1));let o=r.url.includes("?")?"&":"?";r.url=r.url+o+s}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let s=typeof FormData>"u"?!1:r?.data instanceof FormData;cat.default.readable(r.data)?r.body=r.data:mat()&&Buffer.isBuffer(r.data)?(r.body=r.data,W1e(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?s||(Y1e(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(W1e(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=gat(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let s=new J1e.URL(i);r.agent=new MU({port:s.port,host:s.host,protocol:s.protocol,cert:r.cert,key:r.key})}else r.agent=new MU(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new oat.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return uat.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((s,o)=>{i[o]=s}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};db.Gaxios=PU});var ehe=b(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.request=ul.instance=ul.Gaxios=ul.GaxiosError=void 0;var Z1e=X1e();Object.defineProperty(ul,"Gaxios",{enumerable:!0,get:function(){return Z1e.Gaxios}});var bat=EU();Object.defineProperty(ul,"GaxiosError",{enumerable:!0,get:function(){return bat.GaxiosError}});ul.instance=new Z1e.Gaxios;async function _at(t){return ul.instance.request(t)}ul.request=_at});var NU=b((the,AC)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,u=14,c=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function f(C){var x,R,M,I=Ce.prototype={constructor:Ce,toString:null,valueOf:null},F=new Ce(1),B=20,K=4,k=-7,G=21,ne=-1e7,$=1e7,V=!1,me=1,Oe=0,fe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},He="0123456789abcdefghijklmnopqrstuvwxyz",Pe=!0;function Ce(P,j){var H,ie,Y,te,de,z,X,ue,se=this;if(!(se instanceof Ce))return new Ce(P,j);if(j==null){if(P&&P._isBigNumber===!0){se.s=P.s,!P.c||P.e>$?se.c=se.e=null:P.e<ne?se.c=[se.e=0]:(se.e=P.e,se.c=P.c.slice());return}if((z=typeof P=="number")&&P*0==0){if(se.s=1/P<0?(P=-P,-1):1,P===~~P){for(te=0,de=P;de>=10;de/=10,te++);te>$?se.c=se.e=null:(se.e=te,se.c=[P]);return}ue=String(P)}else{if(!r.test(ue=String(P)))return M(se,ue,z);se.s=ue.charCodeAt(0)==45?(ue=ue.slice(1),-1):1}(te=ue.indexOf("."))>-1&&(ue=ue.replace(".","")),(de=ue.search(/e/i))>0?(te<0&&(te=de),te+=+ue.slice(de+1),ue=ue.substring(0,de)):te<0&&(te=ue.length)}else{if(v(j,2,He.length,"Base"),j==10&&Pe)return se=new Ce(P),mi(se,B+se.e+1,K);if(ue=String(P),z=typeof P=="number"){if(P*0!=0)return M(se,ue,z,j);if(se.s=1/P<0?(ue=ue.slice(1),-1):1,Ce.DEBUG&&ue.replace(/^0\.0*|\./,"").length>15)throw Error(o+P)}else se.s=ue.charCodeAt(0)===45?(ue=ue.slice(1),-1):1;for(H=He.slice(0,j),te=de=0,X=ue.length;de<X;de++)if(H.indexOf(ie=ue.charAt(de))<0){if(ie=="."){if(de>te){te=X;continue}}else if(!Y&&(ue==ue.toUpperCase()&&(ue=ue.toLowerCase())||ue==ue.toLowerCase()&&(ue=ue.toUpperCase()))){Y=!0,de=-1,te=0;continue}return M(se,String(P),z,j)}z=!1,ue=R(ue,j,10,se.s),(te=ue.indexOf("."))>-1?ue=ue.replace(".",""):te=ue.length}for(de=0;ue.charCodeAt(de)===48;de++);for(X=ue.length;ue.charCodeAt(--X)===48;);if(ue=ue.slice(de,++X)){if(X-=de,z&&Ce.DEBUG&&X>15&&(P>c||P!==i(P)))throw Error(o+se.s*P);if((te=te-de-1)>$)se.c=se.e=null;else if(te<ne)se.c=[se.e=0];else{if(se.e=te,se.c=[],de=(te+1)%u,te<0&&(de+=u),de<X){for(de&&se.c.push(+ue.slice(0,de)),X-=u;de<X;)se.c.push(+ue.slice(de,de+=u));de=u-(ue=ue.slice(de)).length}else de-=X;for(;de--;ue+="0");se.c.push(+ue)}}else se.c=[se.e=0]}Ce.clone=f,Ce.ROUND_UP=0,Ce.ROUND_DOWN=1,Ce.ROUND_CEIL=2,Ce.ROUND_FLOOR=3,Ce.ROUND_HALF_UP=4,Ce.ROUND_HALF_DOWN=5,Ce.ROUND_HALF_EVEN=6,Ce.ROUND_HALF_CEIL=7,Ce.ROUND_HALF_FLOOR=8,Ce.EUCLID=9,Ce.config=Ce.set=function(P){var j,H;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty(j="DECIMAL_PLACES")&&(H=P[j],v(H,0,p,j),B=H),P.hasOwnProperty(j="ROUNDING_MODE")&&(H=P[j],v(H,0,8,j),K=H),P.hasOwnProperty(j="EXPONENTIAL_AT")&&(H=P[j],H&&H.pop?(v(H[0],-p,0,j),v(H[1],0,p,j),k=H[0],G=H[1]):(v(H,-p,p,j),k=-(G=H<0?-H:H))),P.hasOwnProperty(j="RANGE"))if(H=P[j],H&&H.pop)v(H[0],-p,-1,j),v(H[1],1,p,j),ne=H[0],$=H[1];else if(v(H,-p,p,j),H)ne=-($=H<0?-H:H);else throw Error(s+j+" cannot be zero: "+H);if(P.hasOwnProperty(j="CRYPTO"))if(H=P[j],H===!!H)if(H)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))V=H;else throw V=!H,Error(s+"crypto unavailable");else V=H;else throw Error(s+j+" not true or false: "+H);if(P.hasOwnProperty(j="MODULO_MODE")&&(H=P[j],v(H,0,9,j),me=H),P.hasOwnProperty(j="POW_PRECISION")&&(H=P[j],v(H,0,p,j),Oe=H),P.hasOwnProperty(j="FORMAT"))if(H=P[j],typeof H=="object")fe=H;else throw Error(s+j+" not an object: "+H);if(P.hasOwnProperty(j="ALPHABET"))if(H=P[j],typeof H=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(H))Pe=H.slice(0,10)=="0123456789",He=H;else throw Error(s+j+" invalid: "+H)}else throw Error(s+"Object expected: "+P);return{DECIMAL_PLACES:B,ROUNDING_MODE:K,EXPONENTIAL_AT:[k,G],RANGE:[ne,$],CRYPTO:V,MODULO_MODE:me,POW_PRECISION:Oe,FORMAT:fe,ALPHABET:He}},Ce.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!Ce.DEBUG)return!0;var j,H,ie=P.c,Y=P.e,te=P.s;e:if({}.toString.call(ie)=="[object Array]"){if((te===1||te===-1)&&Y>=-p&&Y<=p&&Y===i(Y)){if(ie[0]===0){if(Y===0&&ie.length===1)return!0;break e}if(j=(Y+1)%u,j<1&&(j+=u),String(ie[0]).length==j){for(j=0;j<ie.length;j++)if(H=ie[j],H<0||H>=a||H!==i(H))break e;if(H!==0)return!0}}}else if(ie===null&&Y===null&&(te===null||te===1||te===-1))return!0;throw Error(s+"Invalid BigNumber: "+P)},Ce.maximum=Ce.max=function(){return bt(arguments,-1)},Ce.minimum=Ce.min=function(){return bt(arguments,1)},Ce.random=(function(){var P=9007199254740992,j=Math.random()*P&2097151?function(){return i(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(H){var ie,Y,te,de,z,X=0,ue=[],se=new Ce(F);if(H==null?H=B:v(H,0,p),de=n(H/u),V)if(crypto.getRandomValues){for(ie=crypto.getRandomValues(new Uint32Array(de*=2));X<de;)z=ie[X]*131072+(ie[X+1]>>>11),z>=9e15?(Y=crypto.getRandomValues(new Uint32Array(2)),ie[X]=Y[0],ie[X+1]=Y[1]):(ue.push(z%1e14),X+=2);X=de/2}else if(crypto.randomBytes){for(ie=crypto.randomBytes(de*=7);X<de;)z=(ie[X]&31)*281474976710656+ie[X+1]*1099511627776+ie[X+2]*4294967296+ie[X+3]*16777216+(ie[X+4]<<16)+(ie[X+5]<<8)+ie[X+6],z>=9e15?crypto.randomBytes(7).copy(ie,X):(ue.push(z%1e14),X+=7);X=de/7}else throw V=!1,Error(s+"crypto unavailable");if(!V)for(;X<de;)z=j(),z<9e15&&(ue[X++]=z%1e14);for(de=ue[--X],H%=u,de&&H&&(z=l[u-H],ue[X]=i(de/z)*z);ue[X]===0;ue.pop(),X--);if(X<0)ue=[te=0];else{for(te=-1;ue[0]===0;ue.splice(0,1),te-=u);for(X=1,z=ue[0];z>=10;z/=10,X++);X<u&&(te-=u-X)}return se.e=te,se.c=ue,se}})(),Ce.sum=function(){for(var P=1,j=arguments,H=new Ce(j[0]);P<j.length;)H=H.plus(j[P++]);return H},R=(function(){var P="0123456789";function j(H,ie,Y,te){for(var de,z=[0],X,ue=0,se=H.length;ue<se;){for(X=z.length;X--;z[X]*=ie);for(z[0]+=te.indexOf(H.charAt(ue++)),de=0;de<z.length;de++)z[de]>Y-1&&(z[de+1]==null&&(z[de+1]=0),z[de+1]+=z[de]/Y|0,z[de]%=Y)}return z.reverse()}return function(H,ie,Y,te,de){var z,X,ue,se,Se,ze,et,Ht,Nr=H.indexOf("."),Lr=B,Rt=K;for(Nr>=0&&(se=Oe,Oe=0,H=H.replace(".",""),Ht=new Ce(ie),ze=Ht.pow(H.length-Nr),Oe=se,Ht.c=j(A(y(ze.c),ze.e,"0"),10,Y,P),Ht.e=Ht.c.length),et=j(H,ie,Y,de?(z=He,P):(z=P,He)),ue=se=et.length;et[--se]==0;et.pop());if(!et[0])return z.charAt(0);if(Nr<0?--ue:(ze.c=et,ze.e=ue,ze.s=te,ze=x(ze,Ht,Lr,Rt,Y),et=ze.c,Se=ze.r,ue=ze.e),X=ue+Lr+1,Nr=et[X],se=Y/2,Se=Se||X<0||et[X+1]!=null,Se=Rt<4?(Nr!=null||Se)&&(Rt==0||Rt==(ze.s<0?3:2)):Nr>se||Nr==se&&(Rt==4||Se||Rt==6&&et[X-1]&1||Rt==(ze.s<0?8:7)),X<1||!et[0])H=Se?A(z.charAt(1),-Lr,z.charAt(0)):z.charAt(0);else{if(et.length=X,Se)for(--Y;++et[--X]>Y;)et[X]=0,X||(++ue,et=[1].concat(et));for(se=et.length;!et[--se];);for(Nr=0,H="";Nr<=se;H+=z.charAt(et[Nr++]));H=A(H,ue,z.charAt(0))}return H}})(),x=(function(){function P(ie,Y,te){var de,z,X,ue,se=0,Se=ie.length,ze=Y%d,et=Y/d|0;for(ie=ie.slice();Se--;)X=ie[Se]%d,ue=ie[Se]/d|0,de=et*X+ue*ze,z=ze*X+de%d*d+se,se=(z/te|0)+(de/d|0)+et*ue,ie[Se]=z%te;return se&&(ie=[se].concat(ie)),ie}function j(ie,Y,te,de){var z,X;if(te!=de)X=te>de?1:-1;else for(z=X=0;z<te;z++)if(ie[z]!=Y[z]){X=ie[z]>Y[z]?1:-1;break}return X}function H(ie,Y,te,de){for(var z=0;te--;)ie[te]-=z,z=ie[te]<Y[te]?1:0,ie[te]=z*de+ie[te]-Y[te];for(;!ie[0]&&ie.length>1;ie.splice(0,1));}return function(ie,Y,te,de,z){var X,ue,se,Se,ze,et,Ht,Nr,Lr,Rt,ar,Mn,Gc,Fu,Z,oe,D,N=ie.s==Y.s?1:-1,U=ie.c,Q=Y.c;if(!U||!U[0]||!Q||!Q[0])return new Ce(!ie.s||!Y.s||(U?Q&&U[0]==Q[0]:!Q)?NaN:U&&U[0]==0||!Q?N*0:N/0);for(Nr=new Ce(N),Lr=Nr.c=[],ue=ie.e-Y.e,N=te+ue+1,z||(z=a,ue=h(ie.e/u)-h(Y.e/u),N=N/u|0),se=0;Q[se]==(U[se]||0);se++);if(Q[se]>(U[se]||0)&&ue--,N<0)Lr.push(1),Se=!0;else{for(Fu=U.length,oe=Q.length,se=0,N+=2,ze=i(z/(Q[0]+1)),ze>1&&(Q=P(Q,ze,z),U=P(U,ze,z),oe=Q.length,Fu=U.length),Gc=oe,Rt=U.slice(0,oe),ar=Rt.length;ar<oe;Rt[ar++]=0);D=Q.slice(),D=[0].concat(D),Z=Q[0],Q[1]>=z/2&&Z++;do{if(ze=0,X=j(Q,Rt,oe,ar),X<0){if(Mn=Rt[0],oe!=ar&&(Mn=Mn*z+(Rt[1]||0)),ze=i(Mn/Z),ze>1)for(ze>=z&&(ze=z-1),et=P(Q,ze,z),Ht=et.length,ar=Rt.length;j(et,Rt,Ht,ar)==1;)ze--,H(et,oe<Ht?D:Q,Ht,z),Ht=et.length,X=1;else ze==0&&(X=ze=1),et=Q.slice(),Ht=et.length;if(Ht<ar&&(et=[0].concat(et)),H(Rt,et,ar,z),ar=Rt.length,X==-1)for(;j(Q,Rt,oe,ar)<1;)ze++,H(Rt,oe<ar?D:Q,ar,z),ar=Rt.length}else X===0&&(ze++,Rt=[0]);Lr[se++]=ze,Rt[0]?Rt[ar++]=U[Gc]||0:(Rt=[U[Gc]],ar=1)}while((Gc++<Fu||Rt[0]!=null)&&N--);Se=Rt[0]!=null,Lr[0]||Lr.splice(0,1)}if(z==a){for(se=1,N=Lr[0];N>=10;N/=10,se++);mi(Nr,te+(Nr.e=se+ue*u-1)+1,de,Se)}else Nr.e=ue,Nr.r=+Se;return Nr}})();function Rr(P,j,H,ie){var Y,te,de,z,X;if(H==null?H=K:v(H,0,8),!P.c)return P.toString();if(Y=P.c[0],de=P.e,j==null)X=y(P.c),X=ie==1||ie==2&&(de<=k||de>=G)?T(X,de):A(X,de,"0");else if(P=mi(new Ce(P),j,H),te=P.e,X=y(P.c),z=X.length,ie==1||ie==2&&(j<=te||te<=k)){for(;z<j;X+="0",z++);X=T(X,te)}else if(j-=de+(ie===2&&te>de),X=A(X,te,"0"),te+1>z){if(--j>0)for(X+=".";j--;X+="0");}else if(j+=te-z,j>0)for(te+1==z&&(X+=".");j--;X+="0");return P.s<0&&Y?"-"+X:X}function bt(P,j){for(var H,ie,Y=1,te=new Ce(P[0]);Y<P.length;Y++)ie=new Ce(P[Y]),(!ie.s||(H=E(te,ie))===j||H===0&&te.s===j)&&(te=ie);return te}function na(P,j,H){for(var ie=1,Y=j.length;!j[--Y];j.pop());for(Y=j[0];Y>=10;Y/=10,ie++);return(H=ie+H*u-1)>$?P.c=P.e=null:H<ne?P.c=[P.e=0]:(P.e=H,P.c=j),P}M=(function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,H=/^\.([^.]+)$/,ie=/^-?(Infinity|NaN)$/,Y=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(te,de,z,X){var ue,se=z?de:de.replace(Y,"");if(ie.test(se))te.s=isNaN(se)?null:se<0?-1:1;else{if(!z&&(se=se.replace(P,function(Se,ze,et){return ue=(et=et.toLowerCase())=="x"?16:et=="b"?2:8,!X||X==ue?ze:Se}),X&&(ue=X,se=se.replace(j,"$1").replace(H,"0.$1")),de!=se))return new Ce(se,ue);if(Ce.DEBUG)throw Error(s+"Not a"+(X?" base "+X:"")+" number: "+de);te.s=null}te.c=te.e=null}})();function mi(P,j,H,ie){var Y,te,de,z,X,ue,se,Se=P.c,ze=l;if(Se){e:{for(Y=1,z=Se[0];z>=10;z/=10,Y++);if(te=j-Y,te<0)te+=u,de=j,X=Se[ue=0],se=i(X/ze[Y-de-1]%10);else if(ue=n((te+1)/u),ue>=Se.length)if(ie){for(;Se.length<=ue;Se.push(0));X=se=0,Y=1,te%=u,de=te-u+1}else break e;else{for(X=z=Se[ue],Y=1;z>=10;z/=10,Y++);te%=u,de=te-u+Y,se=de<0?0:i(X/ze[Y-de-1]%10)}if(ie=ie||j<0||Se[ue+1]!=null||(de<0?X:X%ze[Y-de-1]),ie=H<4?(se||ie)&&(H==0||H==(P.s<0?3:2)):se>5||se==5&&(H==4||ie||H==6&&(te>0?de>0?X/ze[Y-de]:0:Se[ue-1])%10&1||H==(P.s<0?8:7)),j<1||!Se[0])return Se.length=0,ie?(j-=P.e+1,Se[0]=ze[(u-j%u)%u],P.e=-j||0):Se[0]=P.e=0,P;if(te==0?(Se.length=ue,z=1,ue--):(Se.length=ue+1,z=ze[u-te],Se[ue]=de>0?i(X/ze[Y-de]%ze[de])*z:0),ie)for(;;)if(ue==0){for(te=1,de=Se[0];de>=10;de/=10,te++);for(de=Se[0]+=z,z=1;de>=10;de/=10,z++);te!=z&&(P.e++,Se[0]==a&&(Se[0]=1));break}else{if(Se[ue]+=z,Se[ue]!=a)break;Se[ue--]=0,z=1}for(te=Se.length;Se[--te]===0;Se.pop());}P.e>$?P.c=P.e=null:P.e<ne&&(P.c=[P.e=0])}return P}function Zt(P){var j,H=P.e;return H===null?P.toString():(j=y(P.c),j=H<=k||H>=G?T(j,H):A(j,H,"0"),P.s<0?"-"+j:j)}return I.absoluteValue=I.abs=function(){var P=new Ce(this);return P.s<0&&(P.s=1),P},I.comparedTo=function(P,j){return E(this,new Ce(P,j))},I.decimalPlaces=I.dp=function(P,j){var H,ie,Y,te=this;if(P!=null)return v(P,0,p),j==null?j=K:v(j,0,8),mi(new Ce(te),P+te.e+1,j);if(!(H=te.c))return null;if(ie=((Y=H.length-1)-h(this.e/u))*u,Y=H[Y])for(;Y%10==0;Y/=10,ie--);return ie<0&&(ie=0),ie},I.dividedBy=I.div=function(P,j){return x(this,new Ce(P,j),B,K)},I.dividedToIntegerBy=I.idiv=function(P,j){return x(this,new Ce(P,j),0,1)},I.exponentiatedBy=I.pow=function(P,j){var H,ie,Y,te,de,z,X,ue,se,Se=this;if(P=new Ce(P),P.c&&!P.isInteger())throw Error(s+"Exponent not an integer: "+Zt(P));if(j!=null&&(j=new Ce(j)),z=P.e>14,!Se.c||!Se.c[0]||Se.c[0]==1&&!Se.e&&Se.c.length==1||!P.c||!P.c[0])return se=new Ce(Math.pow(+Zt(Se),z?P.s*(2-w(P)):+Zt(P))),j?se.mod(j):se;if(X=P.s<0,j){if(j.c?!j.c[0]:!j.s)return new Ce(NaN);ie=!X&&Se.isInteger()&&j.isInteger(),ie&&(Se=Se.mod(j))}else{if(P.e>9&&(Se.e>0||Se.e<-1||(Se.e==0?Se.c[0]>1||z&&Se.c[1]>=24e7:Se.c[0]<8e13||z&&Se.c[0]<=9999975e7)))return te=Se.s<0&&w(P)?-0:0,Se.e>-1&&(te=1/te),new Ce(X?1/te:te);Oe&&(te=n(Oe/u+2))}for(z?(H=new Ce(.5),X&&(P.s=1),ue=w(P)):(Y=Math.abs(+Zt(P)),ue=Y%2),se=new Ce(F);;){if(ue){if(se=se.times(Se),!se.c)break;te?se.c.length>te&&(se.c.length=te):ie&&(se=se.mod(j))}if(Y){if(Y=i(Y/2),Y===0)break;ue=Y%2}else if(P=P.times(H),mi(P,P.e+1,1),P.e>14)ue=w(P);else{if(Y=+Zt(P),Y===0)break;ue=Y%2}Se=Se.times(Se),te?Se.c&&Se.c.length>te&&(Se.c.length=te):ie&&(Se=Se.mod(j))}return ie?se:(X&&(se=F.div(se)),j?se.mod(j):te?mi(se,Oe,K,de):se)},I.integerValue=function(P){var j=new Ce(this);return P==null?P=K:v(P,0,8),mi(j,j.e+1,P)},I.isEqualTo=I.eq=function(P,j){return E(this,new Ce(P,j))===0},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(P,j){return E(this,new Ce(P,j))>0},I.isGreaterThanOrEqualTo=I.gte=function(P,j){return(j=E(this,new Ce(P,j)))===1||j===0},I.isInteger=function(){return!!this.c&&h(this.e/u)>this.c.length-2},I.isLessThan=I.lt=function(P,j){return E(this,new Ce(P,j))<0},I.isLessThanOrEqualTo=I.lte=function(P,j){return(j=E(this,new Ce(P,j)))===-1||j===0},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&this.c[0]==0},I.minus=function(P,j){var H,ie,Y,te,de=this,z=de.s;if(P=new Ce(P,j),j=P.s,!z||!j)return new Ce(NaN);if(z!=j)return P.s=-j,de.plus(P);var X=de.e/u,ue=P.e/u,se=de.c,Se=P.c;if(!X||!ue){if(!se||!Se)return se?(P.s=-j,P):new Ce(Se?de:NaN);if(!se[0]||!Se[0])return Se[0]?(P.s=-j,P):new Ce(se[0]?de:K==3?-0:0)}if(X=h(X),ue=h(ue),se=se.slice(),z=X-ue){for((te=z<0)?(z=-z,Y=se):(ue=X,Y=Se),Y.reverse(),j=z;j--;Y.push(0));Y.reverse()}else for(ie=(te=(z=se.length)<(j=Se.length))?z:j,z=j=0;j<ie;j++)if(se[j]!=Se[j]){te=se[j]<Se[j];break}if(te&&(Y=se,se=Se,Se=Y,P.s=-P.s),j=(ie=Se.length)-(H=se.length),j>0)for(;j--;se[H++]=0);for(j=a-1;ie>z;){if(se[--ie]<Se[ie]){for(H=ie;H&&!se[--H];se[H]=j);--se[H],se[ie]+=a}se[ie]-=Se[ie]}for(;se[0]==0;se.splice(0,1),--ue);return se[0]?na(P,se,ue):(P.s=K==3?-1:1,P.c=[P.e=0],P)},I.modulo=I.mod=function(P,j){var H,ie,Y=this;return P=new Ce(P,j),!Y.c||!P.s||P.c&&!P.c[0]?new Ce(NaN):!P.c||Y.c&&!Y.c[0]?new Ce(Y):(me==9?(ie=P.s,P.s=1,H=x(Y,P,0,3),P.s=ie,H.s*=ie):H=x(Y,P,0,me),P=Y.minus(H.times(P)),!P.c[0]&&me==1&&(P.s=Y.s),P)},I.multipliedBy=I.times=function(P,j){var H,ie,Y,te,de,z,X,ue,se,Se,ze,et,Ht,Nr,Lr,Rt=this,ar=Rt.c,Mn=(P=new Ce(P,j)).c;if(!ar||!Mn||!ar[0]||!Mn[0])return!Rt.s||!P.s||ar&&!ar[0]&&!Mn||Mn&&!Mn[0]&&!ar?P.c=P.e=P.s=null:(P.s*=Rt.s,!ar||!Mn?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(ie=h(Rt.e/u)+h(P.e/u),P.s*=Rt.s,X=ar.length,Se=Mn.length,X<Se&&(Ht=ar,ar=Mn,Mn=Ht,Y=X,X=Se,Se=Y),Y=X+Se,Ht=[];Y--;Ht.push(0));for(Nr=a,Lr=d,Y=Se;--Y>=0;){for(H=0,ze=Mn[Y]%Lr,et=Mn[Y]/Lr|0,de=X,te=Y+de;te>Y;)ue=ar[--de]%Lr,se=ar[de]/Lr|0,z=et*ue+se*ze,ue=ze*ue+z%Lr*Lr+Ht[te]+H,H=(ue/Nr|0)+(z/Lr|0)+et*se,Ht[te--]=ue%Nr;Ht[te]=H}return H?++ie:Ht.splice(0,1),na(P,Ht,ie)},I.negated=function(){var P=new Ce(this);return P.s=-P.s||null,P},I.plus=function(P,j){var H,ie=this,Y=ie.s;if(P=new Ce(P,j),j=P.s,!Y||!j)return new Ce(NaN);if(Y!=j)return P.s=-j,ie.minus(P);var te=ie.e/u,de=P.e/u,z=ie.c,X=P.c;if(!te||!de){if(!z||!X)return new Ce(Y/0);if(!z[0]||!X[0])return X[0]?P:new Ce(z[0]?ie:Y*0)}if(te=h(te),de=h(de),z=z.slice(),Y=te-de){for(Y>0?(de=te,H=X):(Y=-Y,H=z),H.reverse();Y--;H.push(0));H.reverse()}for(Y=z.length,j=X.length,Y-j<0&&(H=X,X=z,z=H,j=Y),Y=0;j;)Y=(z[--j]=z[j]+X[j]+Y)/a|0,z[j]=a===z[j]?0:z[j]%a;return Y&&(z=[Y].concat(z),++de),na(P,z,de)},I.precision=I.sd=function(P,j){var H,ie,Y,te=this;if(P!=null&&P!==!!P)return v(P,1,p),j==null?j=K:v(j,0,8),mi(new Ce(te),P,j);if(!(H=te.c))return null;if(Y=H.length-1,ie=Y*u+1,Y=H[Y]){for(;Y%10==0;Y/=10,ie--);for(Y=H[0];Y>=10;Y/=10,ie++);}return P&&te.e+1>ie&&(ie=te.e+1),ie},I.shiftedBy=function(P){return v(P,-c,c),this.times("1e"+P)},I.squareRoot=I.sqrt=function(){var P,j,H,ie,Y,te=this,de=te.c,z=te.s,X=te.e,ue=B+4,se=new Ce("0.5");if(z!==1||!de||!de[0])return new Ce(!z||z<0&&(!de||de[0])?NaN:de?te:1/0);if(z=Math.sqrt(+Zt(te)),z==0||z==1/0?(j=y(de),(j.length+X)%2==0&&(j+="0"),z=Math.sqrt(+j),X=h((X+1)/2)-(X<0||X%2),z==1/0?j="5e"+X:(j=z.toExponential(),j=j.slice(0,j.indexOf("e")+1)+X),H=new Ce(j)):H=new Ce(z+""),H.c[0]){for(X=H.e,z=X+ue,z<3&&(z=0);;)if(Y=H,H=se.times(Y.plus(x(te,Y,ue,1))),y(Y.c).slice(0,z)===(j=y(H.c)).slice(0,z))if(H.e<X&&--z,j=j.slice(z-3,z+1),j=="9999"||!ie&&j=="4999"){if(!ie&&(mi(Y,Y.e+B+2,0),Y.times(Y).eq(te))){H=Y;break}ue+=4,z+=4,ie=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(mi(H,H.e+B+2,1),P=!H.times(H).eq(te));break}}return mi(H,H.e+B+1,K,P)},I.toExponential=function(P,j){return P!=null&&(v(P,0,p),P++),Rr(this,P,j,1)},I.toFixed=function(P,j){return P!=null&&(v(P,0,p),P=P+this.e+1),Rr(this,P,j)},I.toFormat=function(P,j,H){var ie,Y=this;if(H==null)P!=null&&j&&typeof j=="object"?(H=j,j=null):P&&typeof P=="object"?(H=P,P=j=null):H=fe;else if(typeof H!="object")throw Error(s+"Argument not an object: "+H);if(ie=Y.toFixed(P,j),Y.c){var te,de=ie.split("."),z=+H.groupSize,X=+H.secondaryGroupSize,ue=H.groupSeparator||"",se=de[0],Se=de[1],ze=Y.s<0,et=ze?se.slice(1):se,Ht=et.length;if(X&&(te=z,z=X,X=te,Ht-=te),z>0&&Ht>0){for(te=Ht%z||z,se=et.substr(0,te);te<Ht;te+=z)se+=ue+et.substr(te,z);X>0&&(se+=ue+et.slice(te)),ze&&(se="-"+se)}ie=Se?se+(H.decimalSeparator||"")+((X=+H.fractionGroupSize)?Se.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(H.fractionGroupSeparator||"")):Se):se}return(H.prefix||"")+ie+(H.suffix||"")},I.toFraction=function(P){var j,H,ie,Y,te,de,z,X,ue,se,Se,ze,et=this,Ht=et.c;if(P!=null&&(z=new Ce(P),!z.isInteger()&&(z.c||z.s!==1)||z.lt(F)))throw Error(s+"Argument "+(z.isInteger()?"out of range: ":"not an integer: ")+Zt(z));if(!Ht)return new Ce(et);for(j=new Ce(F),ue=H=new Ce(F),ie=X=new Ce(F),ze=y(Ht),te=j.e=ze.length-et.e-1,j.c[0]=l[(de=te%u)<0?u+de:de],P=!P||z.comparedTo(j)>0?te>0?j:ue:z,de=$,$=1/0,z=new Ce(ze),X.c[0]=0;se=x(z,j,0,1),Y=H.plus(se.times(ie)),Y.comparedTo(P)!=1;)H=ie,ie=Y,ue=X.plus(se.times(Y=ue)),X=Y,j=z.minus(se.times(Y=j)),z=Y;return Y=x(P.minus(H),ie,0,1),X=X.plus(Y.times(ue)),H=H.plus(Y.times(ie)),X.s=ue.s=et.s,te=te*2,Se=x(ue,ie,te,K).minus(et).abs().comparedTo(x(X,H,te,K).minus(et).abs())<1?[ue,ie]:[X,H],$=de,Se},I.toNumber=function(){return+Zt(this)},I.toPrecision=function(P,j){return P!=null&&v(P,1,p),Rr(this,P,j,2)},I.toString=function(P){var j,H=this,ie=H.s,Y=H.e;return Y===null?ie?(j="Infinity",ie<0&&(j="-"+j)):j="NaN":(P==null?j=Y<=k||Y>=G?T(y(H.c),Y):A(y(H.c),Y,"0"):P===10&&Pe?(H=mi(new Ce(H),B+Y+1,K),j=A(y(H.c),H.e,"0")):(v(P,2,He.length,"Base"),j=R(A(y(H.c),Y,"0"),10,P,ie,!0)),ie<0&&H.c[0]&&(j="-"+j)),j},I.valueOf=I.toJSON=function(){return Zt(this)},I._isBigNumber=!0,C!=null&&Ce.set(C),Ce}function h(C){var x=C|0;return C>0||C===x?x:x-1}function y(C){for(var x,R,M=1,I=C.length,F=C[0]+"";M<I;){for(x=C[M++]+"",R=u-x.length;R--;x="0"+x);F+=x}for(I=F.length;F.charCodeAt(--I)===48;);return F.slice(0,I+1||1)}function E(C,x){var R,M,I=C.c,F=x.c,B=C.s,K=x.s,k=C.e,G=x.e;if(!B||!K)return null;if(R=I&&!I[0],M=F&&!F[0],R||M)return R?M?0:-K:B;if(B!=K)return B;if(R=B<0,M=k==G,!I||!F)return M?0:!I^R?1:-1;if(!M)return k>G^R?1:-1;for(K=(k=I.length)<(G=F.length)?k:G,B=0;B<K;B++)if(I[B]!=F[B])return I[B]>F[B]^R?1:-1;return k==G?0:k>G^R?1:-1}function v(C,x,R,M){if(C<x||C>R||C!==i(C))throw Error(s+(M||"Argument")+(typeof C=="number"?C<x||C>R?" out of range: ":" not an integer: ":" not a primitive number: ")+String(C))}function w(C){var x=C.c.length-1;return h(C.e/u)==x&&C.c[x]%2!=0}function T(C,x){return(C.length>1?C.charAt(0)+"."+C.slice(1):C)+(x<0?"e":"e+")+x}function A(C,x,R){var M,I;if(x<0){for(I=R+".";++x;I+=R);C=I+C}else if(M=C.length,++x>M){for(I=R,x-=M;--x;I+=R);C+=I}else x<M&&(C=C.slice(0,x)+"."+C.slice(x));return C}e=f(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof AC<"u"&&AC.exports?AC.exports=e:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=e)})(the)});var she=b((Hpr,ihe)=>{var rhe=NU(),nhe=ihe.exports;(function(){"use strict";function t(c){return c<10?"0"+c:c}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function a(c){return r.lastIndex=0,r.test(c)?'"'+c.replace(r,function(l){var d=s[l];return typeof d=="string"?d:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function u(c,l){var d,p,f,h,y=n,E,v=l[c],w=v!=null&&(v instanceof rhe||rhe.isBigNumber(v));switch(v&&typeof v=="object"&&typeof v.toJSON=="function"&&(v=v.toJSON(c)),typeof o=="function"&&(v=o.call(l,c,v)),typeof v){case"string":return w?v:a(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":case"bigint":return String(v);case"object":if(!v)return"null";if(n+=i,E=[],Object.prototype.toString.apply(v)==="[object Array]"){for(h=v.length,d=0;d<h;d+=1)E[d]=u(d,v)||"null";return f=E.length===0?"[]":n?`[
`+n+E.join(`,
`+n)+`
`+y+"]":"["+E.join(",")+"]",n=y,f}if(o&&typeof o=="object")for(h=o.length,d=0;d<h;d+=1)typeof o[d]=="string"&&(p=o[d],f=u(p,v),f&&E.push(a(p)+(n?": ":":")+f));else Object.keys(v).forEach(function(T){var A=u(T,v);A&&E.push(a(T)+(n?": ":":")+A)});return f=E.length===0?"{}":n?`{
`+n+E.join(`,
`+n)+`
`+y+"}":"{"+E.join(",")+"}",n=y,f}}typeof nhe.stringify!="function"&&(nhe.stringify=function(c,l,d){var p;if(n="",i="",typeof d=="number")for(p=0;p<d;p+=1)i+=" ";else typeof d=="string"&&(i=d);if(o=l,l&&typeof l!="function"&&(typeof l!="object"||typeof l.length!="number"))throw new Error("JSON.stringify");return u("",{"":c})})})()});var ahe=b((zpr,ohe)=>{var CC=null,Eat=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,vat=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,Sat=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},s,o=function(y){throw{name:"SyntaxError",message:y,at:r,text:s}},a=function(y){return y&&y!==n&&o("Expected '"+y+"' instead of '"+n+"'"),n=s.charAt(r),r+=1,n},u=function(){var y,E="";for(n==="-"&&(E="-",a("-"));n>="0"&&n<="9";)E+=n,a();if(n===".")for(E+=".";a()&&n>="0"&&n<="9";)E+=n;if(n==="e"||n==="E")for(E+=n,a(),(n==="-"||n==="+")&&(E+=n,a());n>="0"&&n<="9";)E+=n,a();if(y=+E,!isFinite(y))o("Bad number");else return CC==null&&(CC=NU()),E.length>15?e.storeAsString?E:e.useNativeBigInt?BigInt(E):new CC(E):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(y):new CC(y):y},c=function(){var y,E,v="",w;if(n==='"')for(var T=r;a();){if(n==='"')return r-1>T&&(v+=s.substring(T,r-1)),a(),v;if(n==="\\"){if(r-1>T&&(v+=s.substring(T,r-1)),a(),n==="u"){for(w=0,E=0;E<4&&(y=parseInt(a(),16),!!isFinite(y));E+=1)w=w*16+y;v+=String.fromCharCode(w)}else if(typeof i[n]=="string")v+=i[n];else break;T=r}}o("Bad string")},l=function(){for(;n&&n<=" ";)a()},d=function(){switch(n){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+n+"'")},p,f=function(){var y=[];if(n==="["){if(a("["),l(),n==="]")return a("]"),y;for(;n;){if(y.push(p()),l(),n==="]")return a("]"),y;a(","),l()}}o("Bad array")},h=function(){var y,E=Object.create(null);if(n==="{"){if(a("{"),l(),n==="}")return a("}"),E;for(;n;){if(y=c(),l(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(E,y)&&o('Duplicate key "'+y+'"'),Eat.test(y)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?p():E[y]=p():vat.test(y)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?p():E[y]=p():E[y]=p(),l(),n==="}")return a("}"),E;a(","),l()}}o("Bad object")};return p=function(){switch(l(),n){case"{":return h();case"[":return f();case'"':return c();case"-":return u();default:return n>="0"&&n<="9"?u():d()}},function(y,E){var v;return s=y+"",r=0,n=" ",v=p(),l(),n&&o("Syntax error"),typeof E=="function"?(function w(T,A){var C,x,R=T[A];return R&&typeof R=="object"&&Object.keys(R).forEach(function(M){x=w(R,M),x!==void 0?R[M]=x:delete R[M]}),E.call(T,A,R)})({"":v},""):v}};ohe.exports=Sat});var FU=b((Wpr,TC)=>{var uhe=she().stringify,che=ahe();TC.exports=function(t){return{parse:che(t),stringify:uhe}};TC.exports.parse=che();TC.exports.stringify=uhe});var BU=b(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.detectGCPResidency=so.isGoogleComputeEngine=so.isGoogleComputeEngineMACAddress=so.isGoogleComputeEngineLinux=so.isGoogleCloudServerless=so.GCE_LINUX_BIOS_PATHS=void 0;var lhe=require("fs"),dhe=require("os");so.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var wat=/^42:01/;function phe(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}so.isGoogleCloudServerless=phe;function fhe(){if((0,dhe.platform)()!=="linux")return!1;try{(0,lhe.statSync)(so.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,lhe.readFileSync)(so.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch{return!1}}so.isGoogleComputeEngineLinux=fhe;function hhe(){let t=(0,dhe.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:r}of e)if(wat.test(r))return!0}return!1}so.isGoogleComputeEngineMACAddress=hhe;function mhe(){return fhe()||hhe()}so.isGoogleComputeEngine=mhe;function Aat(){return phe()||mhe()}so.detectGCPResidency=Aat});var bhe=b(ft=>{"use strict";var Cat=ft&&ft.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Tat=ft&&ft.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Cat(e,t,r)};Object.defineProperty(ft,"__esModule",{value:!0});ft.requestTimeout=ft.setGCPResidency=ft.getGCPResidency=ft.gcpResidencyCache=ft.resetIsAvailableCache=ft.isAvailable=ft.project=ft.instance=ft.METADATA_SERVER_DETECTION=ft.HEADERS=ft.HEADER_VALUE=ft.HEADER_NAME=ft.SECONDARY_HOST_ADDRESS=ft.HOST_ADDRESS=ft.BASE_PATH=void 0;var qU=ehe(),Oat=FU(),xat=BU();ft.BASE_PATH="/computeMetadata/v1";ft.HOST_ADDRESS="http://169.254.169.254";ft.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";ft.HEADER_NAME="Metadata-Flavor";ft.HEADER_VALUE="Google";ft.HEADERS=Object.freeze({[ft.HEADER_NAME]:ft.HEADER_VALUE});ft.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function LU(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||ft.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(ft.BASE_PATH,t).href}function Iat(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function jU(t,e,r=3,n=!1){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),Iat(e);try{let o=await(n?Rat:qU.request)({url:`${LU()}/${t}${i}`,headers:Object.assign({},ft.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:ghe()});if(o.headers[ft.HEADER_NAME.toLowerCase()]!==ft.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${ft.HEADER_NAME} header.`);if(!o.data)throw new Error("Invalid response from the metadata service");if(typeof o.data=="string")try{return Oat.parse(o.data)}catch{}return o.data}catch(s){let o=s;throw o.response&&o.response.status!==200&&(o.message=`Unsuccessful response status code. ${o.message}`),s}}async function Rat(t){let e={...t,url:t.url.replace(LU(),LU(ft.SECONDARY_HOST_ADDRESS))},r=!1,n=(0,qU.request)(t).then(s=>(r=!0,s)).catch(s=>{if(r)return i;throw r=!0,s}),i=(0,qU.request)(e).then(s=>(r=!0,s)).catch(s=>{if(r)return n;throw r=!0,s});return Promise.race([n,i])}function Dat(t){return jU("instance",t)}ft.instance=Dat;function kat(t){return jU("project",t)}ft.project=kat;function Mat(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var OC;async function Pat(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in ft.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(ft.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return $U();case"ping-only":}}try{return OC===void 0&&(OC=jU("instance",void 0,Mat(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await OC,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}}ft.isAvailable=Pat;function Nat(){OC=void 0}ft.resetIsAvailableCache=Nat;ft.gcpResidencyCache=null;function $U(){return ft.gcpResidencyCache===null&&yhe(),ft.gcpResidencyCache}ft.getGCPResidency=$U;function yhe(t=null){ft.gcpResidencyCache=t!==null?t:(0,xat.detectGCPResidency)()}ft.setGCPResidency=yhe;function ghe(){return $U()?0:3e3}ft.requestTimeout=ghe;Tat(BU(),ft)});var ll=b(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.aws4=void 0;cl.getKerberos=Fat;cl.getZstdLibrary=Bat;cl.getAwsCredentialProvider=qat;cl.getGcpMetadata=Lat;cl.getSnappy=jat;cl.getSocks=$at;cl.getMongoDBClientEncryption=Kat;var F1=Fe();function k3(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function Fat(){let t;try{t=require("kerberos")}catch(e){t=k3(new F1.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function Bat(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=k3(new F1.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function qat(){try{return require("@aws-sdk/credential-providers")}catch(t){return k3(new F1.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function Lat(){try{return bhe()}catch(t){return k3(new F1.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function jat(){try{return require("snappy")}catch(t){return{kModuleError:new F1.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function $at(){try{return require("socks")}catch(t){return{kModuleError:new F1.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}cl.aws4=Uat();function Uat(){let t;try{t=require("aws4")}catch(e){t=k3(new F1.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function Kat(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new F1.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var B1=b(pb=>{"use strict";Object.defineProperty(pb,"__esModule",{value:!0});pb.AuthProvider=pb.AuthContext=void 0;var Vat=Fe(),UU=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};pb.AuthContext=UU;var KU=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new Vat.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};pb.AuthProvider=KU});var xC=b(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.GSSAPI=dl.GSSAPICanonicalizationValue=void 0;dl.performGSSAPICanonicalizeHostName=vhe;dl.resolveCname=zU;var GU=require("dns"),Gat=ll(),_he=Fe(),Hat=Ze(),zat=B1();dl.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function VU(t,e){return await t.command((0,Hat.ns)("$external.$cmd"),e)}var M3,HU=class extends zat.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new _he.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:i}=n,s=await Wat(e),o=await s.step(""),a=await VU(r,Jat(o)),u=await Ehe(s,10,a.payload),c=await VU(r,Yat(u,a.conversationId)),l=await Qat(s,i,c.payload);await VU(r,{saslContinue:1,conversationId:c.conversationId,payload:l})}};dl.GSSAPI=HU;async function Wat(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new _he.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(Xat(),"kModuleError"in M3)throw M3.kModuleError;let{initializeClient:n}=M3,{username:i,password:s}=r,o=r.mechanismProperties,a=o.SERVICE_NAME??"mongodb",u=await vhe(e.host,o),c={};s!=null&&Object.assign(c,{user:i,password:s});let l=o.SERVICE_HOST??u,d=`${a}${process.platform==="win32"?"/":"@"}${l}`;return"SERVICE_REALM"in o&&(d=`${d}@${o.SERVICE_REALM}`),await n(d,c)}function Jat(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function Yat(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function Ehe(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await Ehe(t,e-1,r)}}async function Qat(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function vhe(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===dl.GSSAPICanonicalizationValue.none)return t;if(r===dl.GSSAPICanonicalizationValue.on||r===dl.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await GU.promises.lookup(t);try{let i=await GU.promises.resolvePtr(n);return i.length>0?i[0]:t}catch{return await zU(t)}}else return await zU(t)}async function zU(t){try{let e=await GU.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function Xat(){M3||(M3=(0,Gat.getKerberos)())}});var bd=b(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.AUTH_MECHS_AUTH_SRC_EXTERNAL=gd.AuthMechanism=void 0;gd.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});gd.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([gd.AuthMechanism.MONGODB_GSSAPI,gd.AuthMechanism.MONGODB_AWS,gd.AuthMechanism.MONGODB_OIDC,gd.AuthMechanism.MONGODB_X509])});var IC=b(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});v0.MongoCredentials=v0.DEFAULT_ALLOWED_HOSTS=void 0;var Ju=Fe(),Zat=xC(),Po=bd();function eut(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(Po.AuthMechanism.MONGODB_SCRAM_SHA256)?Po.AuthMechanism.MONGODB_SCRAM_SHA256:Po.AuthMechanism.MONGODB_SCRAM_SHA1:Po.AuthMechanism.MONGODB_SCRAM_SHA256}var She=["test","azure","gcp","k8s"],whe="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";v0.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var tut="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",WU=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||Po.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN})),this.mechanism===Po.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:v0.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:eut(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===Po.AuthMechanism.MONGODB_GSSAPI||this.mechanism===Po.AuthMechanism.MONGODB_PLAIN||this.mechanism===Po.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===Po.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new Ju.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===Po.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new Ju.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new Ju.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new Ju.MongoInvalidArgumentError(tut);if(this.mechanismProperties.ENVIRONMENT&&!She.includes(this.mechanismProperties.ENVIRONMENT))throw new Ju.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${She.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new Ju.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new Ju.MongoInvalidArgumentError(whe);for(let n of r)if(typeof n!="string")throw new Ju.MongoInvalidArgumentError(whe)}}if(Po.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new Ju.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===Po.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new Ju.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===Po.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new Ju.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(Zat.GSSAPICanonicalizationValue).includes(e))throw new Ju.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??Po.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};v0.MongoCredentials=WU});var Ahe=b((rfr,rut)=>{rut.exports={name:"mongodb",version:"6.20.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.2"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.3.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.5.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var JU=b(q1=>{"use strict";Object.defineProperty(q1,"__esModule",{value:!0});q1.LimitedSizeDocument=void 0;q1.isDriverInfoEqual=sut;q1.makeClientMetadata=out;q1.addContainerMetadata=uut;q1.getFAASEnv=Ohe;var P3=require("os"),N3=require("process"),fb=yr(),Che=Fe(),nut=Ze(),iut=Ahe().version;function sut(t,e){let r=(n,i)=>(n||=void 0,i||=void 0,n===i);return r(t.name,e.name)&&r(t.platform,e.platform)&&r(t.version,e.version)}var F3=class{constructor(e){this.document=new Map,this.documentSize=5,this.maxSize=e}ifItFitsItSits(e,r){let n=fb.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return fb.BSON.deserialize(fb.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};q1.LimitedSizeDocument=F3;function out(t,{appName:e=""}){let r=new F3(512);if(e.length>0){let a=Buffer.byteLength(e,"utf8")<=128?e:Buffer.from(e,"utf8").subarray(0,128).toString("utf8");r.ifItFitsItSits("application",{name:a})}let n={name:"nodejs",version:iut};for(let{name:a="",version:u=""}of t)a.length>0&&(n.name=`${n.name}|${a}`),u.length>0&&(n.version=`${n.version}|${u}`);if(!r.ifItFitsItSits("driver",n))throw new Che.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let i=cut();for(let{platform:a=""}of t)a.length>0&&(i=`${i}|${a}`);if(!r.ifItFitsItSits("platform",i))throw new Che.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let s=new Map().set("name",N3.platform).set("architecture",N3.arch).set("version",P3.release()).set("type",P3.type());if(!r.ifItFitsItSits("os",s)){for(let a of s.keys())if(s.delete(a),s.size===0||r.ifItFitsItSits("os",s))break}let o=Ohe();if(o!=null&&!r.ifItFitsItSits("env",o)){for(let a of o.keys())if(o.delete(a),o.size===0||r.ifItFitsItSits("env",o))break}return r.toObject()}var The;async function aut(){let t={};The??=(0,nut.fileIsAccessible)("/.dockerenv");let e=await The,{KUBERNETES_SERVICE_HOST:r=""}=N3.env,n=r.length>0;return e&&(t.runtime="docker"),n&&(t.orchestrator="kubernetes"),t}async function uut(t){let e=await aut();if(Object.keys(e).length===0)return t;let r=new F3(512),n={...t?.env,container:e};for(let[i,s]of Object.entries(t))i!=="env"?r.ifItFitsItSits(i,s):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",s);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function Ohe(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:i="",VERCEL:s="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:o="",AWS_REGION:a="",FUNCTION_MEMORY_MB:u="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:l="",VERCEL_REGION:d=""}=N3.env,p=t.startsWith("AWS_Lambda_")||e.length>0,f=r.length>0,h=n.length>0||i.length>0,y=s.length>0,E=new Map;return y&&!(f||h)?(d.length>0&&E.set("region",d),E.set("name","vercel"),E):p&&!(f||h||y)?(a.length>0&&E.set("region",a),o.length>0&&Number.isInteger(+o)&&E.set("memory_mb",new fb.Int32(o)),E.set("name","aws.lambda"),E):f&&!(h||p||y)?(E.set("name","azure.func"),E):h&&!(f||p||y)?(c.length>0&&E.set("region",c),u.length>0&&Number.isInteger(+u)&&E.set("memory_mb",new fb.Int32(u)),l.length>0&&Number.isInteger(+l)&&E.set("timeout_sec",new fb.Int32(l)),E.set("name","gcp.func"),E):null}function cut(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${P3.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${P3.endianness()}`:`Node.js ${N3.version}, ${P3.endianness()}`}});var DC=b($r=>{"use strict";function zr(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function yb(t,e){if(typeof t=="bigint")throw zr(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function Ihe(t){return t>0&&t%1===.5&&(t&1)===0||t<0&&t%1===-.5&&(t&1)===1?B3(Math.floor(t)):B3(Math.round(t))}function RC(t){return B3(Math.trunc(t))}function xhe(t){return t<0?-1:1}function lut(t,e){let r=t%e;return xhe(e)!==xhe(r)?r+e:r}function B3(t){return t===0?0:t}function gb(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let i=2**t,s=2**(t-1);return(o,a={})=>{let u=yb(o,a);if(u=B3(u),a.enforceRange){if(!Number.isFinite(u))throw zr(TypeError,"is not a finite number",a);if(u=RC(u),u<r||u>n)throw zr(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,a);return u}return!Number.isNaN(u)&&a.clamp?(u=Math.min(Math.max(u,r),n),u=Ihe(u),u):!Number.isFinite(u)||u===0?0:(u=RC(u),u>=r&&u<=n?u:(u=lut(u,i),!e&&u>=s?u-i:u))}}function Rhe(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,i=e?BigInt.asUintN:BigInt.asIntN;return(s,o={})=>{let a=yb(s,o);if(a=B3(a),o.enforceRange){if(!Number.isFinite(a))throw zr(TypeError,"is not a finite number",o);if(a=RC(a),a<n||a>r)throw zr(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,o);return a}if(!Number.isNaN(a)&&o.clamp)return a=Math.min(Math.max(a,n),r),a=Ihe(a),a;if(!Number.isFinite(a)||a===0)return 0;let u=BigInt(RC(a));return u=i(t,u),Number(u)}}$r.any=t=>t;$r.undefined=()=>{};$r.boolean=t=>!!t;$r.byte=gb(8,{unsigned:!1});$r.octet=gb(8,{unsigned:!0});$r.short=gb(16,{unsigned:!1});$r["unsigned short"]=gb(16,{unsigned:!0});$r.long=gb(32,{unsigned:!1});$r["unsigned long"]=gb(32,{unsigned:!0});$r["long long"]=Rhe(64,{unsigned:!1});$r["unsigned long long"]=Rhe(64,{unsigned:!0});$r.double=(t,e={})=>{let r=yb(t,e);if(!Number.isFinite(r))throw zr(TypeError,"is not a finite floating-point value",e);return r};$r["unrestricted double"]=(t,e={})=>yb(t,e);$r.float=(t,e={})=>{let r=yb(t,e);if(!Number.isFinite(r))throw zr(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw zr(TypeError,"is outside the range of a single-precision floating-point value",e);return n};$r["unrestricted float"]=(t,e={})=>{let r=yb(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};$r.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw zr(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};$r.ByteString=(t,e={})=>{let r=$r.DOMString(t,e),n;for(let i=0;(n=r.codePointAt(i))!==void 0;++i)if(n>255)throw zr(TypeError,"is not a valid ByteString",e);return r};$r.USVString=(t,e={})=>{let r=$r.DOMString(t,e),n=r.length,i=[];for(let s=0;s<n;++s){let o=r.charCodeAt(s);if(o<55296||o>57343)i.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)i.push(String.fromCodePoint(65533));else if(s===n-1)i.push(String.fromCodePoint(65533));else{let a=r.charCodeAt(s+1);if(56320<=a&&a<=57343){let u=o&1023,c=a&1023;i.push(String.fromCodePoint(65536+1024*u+c)),++s}else i.push(String.fromCodePoint(65533))}}return i.join("")};$r.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw zr(TypeError,"is not an object",e);return t};var dut=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,put=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function YU(t){try{return dut.call(t),!0}catch{return!1}}function hb(t){try{return put.call(t),!0}catch{return!1}}function mb(t){try{return new Uint8Array(t),!1}catch{return!0}}$r.ArrayBuffer=(t,e={})=>{if(!YU(t))throw e.allowShared&&!hb(t)?zr(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):zr(TypeError,"is not an ArrayBuffer",e);if(mb(t))throw zr(TypeError,"is a detached ArrayBuffer",e);return t};var fut=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;$r.DataView=(t,e={})=>{try{fut.call(t)}catch{throw zr(TypeError,"is not a DataView",e)}if(!e.allowShared&&hb(t.buffer))throw zr(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(mb(t.buffer))throw zr(TypeError,"is backed by a detached ArrayBuffer",e);return t};var hut=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";$r[e]=(n,i={})=>{if(!ArrayBuffer.isView(n)||hut.call(n)!==e)throw zr(TypeError,`is not ${r} ${e} object`,i);if(!i.allowShared&&hb(n.buffer))throw zr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",i);if(mb(n.buffer))throw zr(TypeError,"is a view on a detached ArrayBuffer",i);return n}});$r.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw zr(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&hb(t.buffer))throw zr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(mb(t.buffer))throw zr(TypeError,"is a view on a detached ArrayBuffer",e);return t};$r.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&hb(t.buffer))throw zr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(mb(t.buffer))throw zr(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!YU(t))throw zr(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!hb(t)&&!YU(t))throw zr(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(mb(t))throw zr(TypeError,"is a detached ArrayBuffer",e);return t};$r.DOMTimeStamp=$r["unsigned long long"]});var MC=b((Bhe,qhe)=>{"use strict";function mut(t){return typeof t=="object"&&t!==null||typeof t=="function"}var Dhe=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function yut(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function gut(t,e){let r=Phe(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var khe=Symbol("wrapper"),Mhe=Symbol("impl"),bb=Symbol("SameObject caches"),kC=Symbol.for("[webidl2js] constructor registry"),but=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function Phe(t){if(Dhe(t,kC))return t[kC];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=but}return t[kC]=e,e}function _ut(t,e,r){return t[bb]||(t[bb]=Object.create(null)),e in t[bb]||(t[bb][e]=r()),t[bb][e]}function Nhe(t){return t?t[khe]:null}function Fhe(t){return t?t[Mhe]:null}function Eut(t){let e=Nhe(t);return e||t}function vut(t){let e=Fhe(t);return e||t}var Sut=Symbol("internal");function wut(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var Aut=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function Cut(t){try{return Aut.call(t),!0}catch{return!1}}function Tut([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var Out=Symbol("supports property index"),xut=Symbol("supported property indices"),Iut=Symbol("supports property name"),Rut=Symbol("supported property names"),Dut=Symbol("indexed property get"),kut=Symbol("indexed property set new"),Mut=Symbol("indexed property set existing"),Put=Symbol("named property get"),Nut=Symbol("named property set new"),Fut=Symbol("named property set existing"),But=Symbol("named property delete"),qut=Symbol("async iterator get the next iteration result"),Lut=Symbol("async iterator return steps"),jut=Symbol("async iterator initialization steps"),$ut=Symbol("async iterator end of iteration");qhe.exports=Bhe={isObject:mut,hasOwn:Dhe,define:yut,newObjectInRealm:gut,wrapperSymbol:khe,implSymbol:Mhe,getSameObject:_ut,ctorRegistrySymbol:kC,initCtorRegistry:Phe,wrapperForImpl:Nhe,implForWrapper:Fhe,tryWrapperForImpl:Eut,tryImplForWrapper:vut,iterInternalSymbol:Sut,isArrayBuffer:Cut,isArrayIndexPropName:wut,supportsPropertyIndex:Out,supportedPropertyIndices:xut,supportsPropertyName:Iut,supportedPropertyNames:Rut,indexedGet:Dut,indexedSetNew:kut,indexedSetExisting:Mut,namedGet:Put,namedSetNew:Nut,namedSetExisting:Fut,namedDelete:But,asyncIteratorNext:qut,asyncIteratorReturn:Lut,asyncIteratorInit:jut,asyncIteratorEOI:$ut,iteratorResult:Tut}});var Hhe=b((sfr,Ghe)=>{"use strict";var Uut=/^xn--/,Kut=/[^\0-\x7F]/,Vut=/[\x2E\u3002\uFF0E\uFF61]/g,Gut={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},QU=35,_d=Math.floor,XU=String.fromCharCode;function L1(t){throw new RangeError(Gut[t])}function Hut(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function jhe(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(Vut,".");let i=t.split("."),s=Hut(i,e).join(".");return n+s}function $he(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let s=t.charCodeAt(r++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var zut=t=>String.fromCodePoint(...t),Wut=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},Lhe=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},Uhe=function(t,e,r){let n=0;for(t=r?_d(t/700):t>>1,t+=_d(t/e);t>QU*26>>1;n+=36)t=_d(t/QU);return _d(n+(QU+1)*t/(t+38))},Khe=function(t){let e=[],r=t.length,n=0,i=128,s=72,o=t.lastIndexOf("-");o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&L1("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<r;){let u=n;for(let l=1,d=36;;d+=36){a>=r&&L1("invalid-input");let p=Wut(t.charCodeAt(a++));p>=36&&L1("invalid-input"),p>_d((2147483647-n)/l)&&L1("overflow"),n+=p*l;let f=d<=s?1:d>=s+26?26:d-s;if(p<f)break;let h=36-f;l>_d(2147483647/h)&&L1("overflow"),l*=h}let c=e.length+1;s=Uhe(n-u,c,u==0),_d(n/c)>2147483647-i&&L1("overflow"),i+=_d(n/c),n%=c,e.splice(n++,0,i)}return String.fromCodePoint(...e)},Vhe=function(t){let e=[];t=$he(t);let r=t.length,n=128,i=0,s=72;for(let u of t)u<128&&e.push(XU(u));let o=e.length,a=o;for(o&&e.push("-");a<r;){let u=2147483647;for(let l of t)l>=n&&l<u&&(u=l);let c=a+1;u-n>_d((2147483647-i)/c)&&L1("overflow"),i+=(u-n)*c,n=u;for(let l of t)if(l<n&&++i>2147483647&&L1("overflow"),l===n){let d=i;for(let p=36;;p+=36){let f=p<=s?1:p>=s+26?26:p-s;if(d<f)break;let h=d-f,y=36-f;e.push(XU(Lhe(f+h%y,0))),d=_d(h/y)}e.push(XU(Lhe(d,0))),s=Uhe(i,c,a===o),i=0,++a}++i,++n}return e.join("")},Jut=function(t){return jhe(t,function(e){return Uut.test(e)?Khe(e.slice(4).toLowerCase()):e})},Yut=function(t){return jhe(t,function(e){return Kut.test(e)?"xn--"+Vhe(e):e})},Qut={version:"2.3.1",ucs2:{decode:$he,encode:zut},decode:Khe,encode:Vhe,toASCII:Yut,toUnicode:Jut};Ghe.exports=Qut});var Whe=b((ofr,zhe)=>{"use strict";var Xut=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,Zut=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,ect=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,tct=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,rct=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,nct=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,ict=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,sct=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,oct=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,act=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,uct=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,cct=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;zhe.exports={combiningMarks:Xut,combiningClassVirama:Zut,validZWNJ:ect,bidiDomain:tct,bidiS1LTR:rct,bidiS1RTL:nct,bidiS2:ict,bidiS3:sct,bidiS4EN:oct,bidiS4AN:act,bidiS5:uct,bidiS6:cct}});var Jhe=b((afr,lct)=>{lct.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\u{10D70}"],[68945,1,"\u{10D71}"],[68946,1,"\u{10D72}"],[68947,1,"\u{10D73}"],[68948,1,"\u{10D74}"],[68949,1,"\u{10D75}"],[68950,1,"\u{10D76}"],[68951,1,"\u{10D77}"],[68952,1,"\u{10D78}"],[68953,1,"\u{10D79}"],[68954,1,"\u{10D7A}"],[68955,1,"\u{10D7B}"],[68956,1,"\u{10D7C}"],[68957,1,"\u{10D7D}"],[68958,1,"\u{10D7E}"],[68959,1,"\u{10D7F}"],[68960,1,"\u{10D80}"],[68961,1,"\u{10D81}"],[68962,1,"\u{10D82}"],[68963,1,"\u{10D83}"],[68964,1,"\u{10D84}"],[68965,1,"\u{10D85}"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118e3,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,1,"\u{243AB}"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var Qhe=b((ufr,Yhe)=>{"use strict";Yhe.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var rme=b((cfr,tme)=>{"use strict";var eK=Hhe(),Yu=Whe(),Xhe=Jhe(),{STATUS_MAPPING:j1}=Qhe();function ZU(t){return/[^\x00-\x7F]/u.test(t)}function Zhe(t){let e=0,r=Xhe.length-1;for(;e<=r;){let n=Math.floor((e+r)/2),i=Xhe[n],s=Array.isArray(i[0])?i[0][0]:i[0],o=Array.isArray(i[0])?i[0][1]:i[0];if(s<=t&&o>=t)return i.slice(1);s>t?r=n-1:e=n+1}return null}function dct(t,{transitionalProcessing:e}){let r="";for(let n of t){let[i,s]=Zhe(n.codePointAt(0));switch(i){case j1.disallowed:r+=n;break;case j1.ignored:break;case j1.mapped:e&&n==="\u1E9E"?r+="ss":r+=s;break;case j1.deviation:e?r+=s:r+=n;break;case j1.valid:r+=n;break}}return r}function pct(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,transitionalProcessing:i,useSTD3ASCIIRules:s,isBidi:o}){if(t.length===0)return!0;if(t.normalize("NFC")!==t)return!1;let a=Array.from(t);if(e&&(a[2]==="-"&&a[3]==="-"||t.startsWith("-")||t.endsWith("-"))||!e&&t.startsWith("xn--")||t.includes(".")||Yu.combiningMarks.test(a[0]))return!1;for(let u of a){let c=u.codePointAt(0),[l]=Zhe(c);if(i){if(l!==j1.valid)return!1}else if(l!==j1.valid&&l!==j1.deviation)return!1;if(s&&c<=127&&!/^(?:[a-z]|[0-9]|-)$/u.test(u))return!1}if(n){let u=0;for(let[c,l]of a.entries())if(l==="\u200C"||l==="\u200D"){if(c>0){if(Yu.combiningClassVirama.test(a[c-1]))continue;if(l==="\u200C"){let d=a.indexOf("\u200C",c+1),p=d<0?a.slice(u):a.slice(u,d);if(Yu.validZWNJ.test(p.join(""))){u=c+1;continue}}}return!1}}if(r&&o){let u;if(Yu.bidiS1LTR.test(a[0]))u=!1;else if(Yu.bidiS1RTL.test(a[0]))u=!0;else return!1;if(u){if(!Yu.bidiS2.test(t)||!Yu.bidiS3.test(t)||Yu.bidiS4EN.test(t)&&Yu.bidiS4AN.test(t))return!1}else if(!Yu.bidiS5.test(t)||!Yu.bidiS6.test(t))return!1}return!0}function fct(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return eK.decode(r.substring(4))}catch{return""}return r}).join(".");return Yu.bidiDomain.test(e)}function eme(t,e){let r=dct(t,e);r=r.normalize("NFC");let n=r.split("."),i=fct(n),s=!1;for(let[o,a]of n.entries()){let u=a,c=e.transitionalProcessing;if(u.startsWith("xn--")){if(ZU(u)){s=!0;continue}try{u=eK.decode(u.substring(4))}catch{if(!e.ignoreInvalidPunycode){s=!0;continue}}n[o]=u,(u===""||!ZU(u))&&(s=!0),c=!1}if(s)continue;pct(u,{...e,transitionalProcessing:c,isBidi:i})||(s=!0)}return{string:n.join("."),error:s}}function hct(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,verifyDNSLength:s=!1,transitionalProcessing:o=!1,ignoreInvalidPunycode:a=!1}={}){let u=eme(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i,transitionalProcessing:o,ignoreInvalidPunycode:a}),c=u.string.split(".");if(c=c.map(l=>{if(ZU(l))try{return`xn--${eK.encode(l)}`}catch{u.error=!0}return l}),s){let l=c.join(".").length;(l>253||l===0)&&(u.error=!0);for(let d=0;d<c.length;++d)if(c[d].length>63||c[d].length===0){u.error=!0;break}}return u.error?null:c.join(".")}function mct(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,transitionalProcessing:s=!1,ignoreInvalidPunycode:o=!1}={}){let a=eme(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i,transitionalProcessing:s,ignoreInvalidPunycode:o});return{domain:a.string,error:a.error}}tme.exports={toASCII:hct,toUnicode:mct}});var rK=b((lfr,ime)=>{"use strict";function tK(t){return t>=48&&t<=57}function nme(t){return t>=65&&t<=90||t>=97&&t<=122}function yct(t){return nme(t)||tK(t)}function gct(t){return tK(t)||t>=65&&t<=70||t>=97&&t<=102}ime.exports={isASCIIDigit:tK,isASCIIAlpha:nme,isASCIIAlphanumeric:yct,isASCIIHex:gct}});var PC=b((dfr,sme)=>{"use strict";var bct=new TextEncoder,_ct=new TextDecoder("utf-8",{ignoreBOM:!0});function Ect(t){return bct.encode(t)}function vct(t){return _ct.decode(t)}sme.exports={utf8Encode:Ect,utf8DecodeWithoutBOM:vct}});var NC=b((pfr,pme)=>{"use strict";var{isASCIIHex:ome}=rK(),{utf8Encode:ame}=PC();function gr(t){return t.codePointAt(0)}function Sct(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function ume(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let i=t[n];if(i!==37)e[r++]=i;else if(i===37&&(!ome(t[n+1])||!ome(t[n+2])))e[r++]=i;else{let s=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=s,n+=2}}return e.slice(0,r)}function wct(t){let e=ame(t);return ume(e)}function nK(t){return t<=31||t>126}var Act=new Set([gr(" "),gr('"'),gr("<"),gr(">"),gr("`")]);function Cct(t){return nK(t)||Act.has(t)}var Tct=new Set([gr(" "),gr('"'),gr("#"),gr("<"),gr(">")]);function iK(t){return nK(t)||Tct.has(t)}function Oct(t){return iK(t)||t===gr("'")}var xct=new Set([gr("?"),gr("`"),gr("{"),gr("}"),gr("^")]);function cme(t){return iK(t)||xct.has(t)}var Ict=new Set([gr("/"),gr(":"),gr(";"),gr("="),gr("@"),gr("["),gr("\\"),gr("]"),gr("|")]);function lme(t){return cme(t)||Ict.has(t)}var Rct=new Set([gr("$"),gr("%"),gr("&"),gr("+"),gr(",")]);function Dct(t){return lme(t)||Rct.has(t)}var kct=new Set([gr("!"),gr("'"),gr("("),gr(")"),gr("~")]);function Mct(t){return Dct(t)||kct.has(t)}function dme(t,e){let r=ame(t),n="";for(let i of r)e(i)?n+=Sct(i):n+=String.fromCharCode(i);return n}function Pct(t,e){return dme(String.fromCodePoint(t),e)}function Nct(t,e,r=!1){let n="";for(let i of t)r&&i===" "?n+="+":n+=dme(i,e);return n}pme.exports={isC0ControlPercentEncode:nK,isFragmentPercentEncode:Cct,isQueryPercentEncode:iK,isSpecialQueryPercentEncode:Oct,isPathPercentEncode:cme,isUserinfoPercentEncode:lme,isURLEncodedPercentEncode:Mct,percentDecodeString:wct,percentDecodeBytes:ume,utf8PercentEncodeString:Nct,utf8PercentEncodeCodePoint:Pct}});var lK=b((ffr,No)=>{"use strict";var Fct=rme(),Ns=rK(),{utf8DecodeWithoutBOM:Bct}=PC(),{percentDecodeString:qct,utf8PercentEncodeCodePoint:BC,utf8PercentEncodeString:qC,isC0ControlPercentEncode:yme,isFragmentPercentEncode:Lct,isQueryPercentEncode:jct,isSpecialQueryPercentEncode:$ct,isPathPercentEncode:Uct,isUserinfoPercentEncode:aK}=NC();function ke(t){return t.codePointAt(0)}var gme={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Mt=Symbol("failure");function fme(t){return[...t].length}function hme(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function mme(t){return t==="."||t.toLowerCase()==="%2e"}function Kct(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function Vct(t,e){return Ns.isASCIIAlpha(t)&&(e===ke(":")||e===ke("|"))}function bme(t){return t.length===2&&Ns.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function Gct(t){return t.length===2&&Ns.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function _me(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function Hct(t){return _me(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function FC(t){return gme[t]!==void 0}function Ps(t){return FC(t.scheme)}function sK(t){return!FC(t.scheme)}function Eme(t){return gme[t]}function vme(t){if(t==="")return Mt;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?Mt:parseInt(t,e)}function zct(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return Mt;let r=[];for(let s of e){let o=vme(s);if(o===Mt)return Mt;r.push(o)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return Mt;if(r[r.length-1]>=256**(5-r.length))return Mt;let n=r.pop(),i=0;for(let s of r)n+=s*256**(3-i),++i;return n}function Wct(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function Jct(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0;if(t=Array.from(t,s=>s.codePointAt(0)),t[i]===ke(":")){if(t[i+1]!==ke(":"))return Mt;i+=2,++r,n=r}for(;i<t.length;){if(r===8)return Mt;if(t[i]===ke(":")){if(n!==null)return Mt;++i,++r,n=r;continue}let s=0,o=0;for(;o<4&&Ns.isASCIIHex(t[i]);)s=s*16+parseInt(hme(t,i),16),++i,++o;if(t[i]===ke(".")){if(o===0||(i-=o,r>6))return Mt;let a=0;for(;t[i]!==void 0;){let u=null;if(a>0)if(t[i]===ke(".")&&a<4)++i;else return Mt;if(!Ns.isASCIIDigit(t[i]))return Mt;for(;Ns.isASCIIDigit(t[i]);){let c=parseInt(hme(t,i));if(u===null)u=c;else{if(u===0)return Mt;u=u*10+c}if(u>255)return Mt;++i}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return Mt;break}else if(t[i]===ke(":")){if(++i,t[i]===void 0)return Mt}else if(t[i]!==void 0)return Mt;e[r]=s,++r}if(n!==null){let s=r-n;for(r=7;r!==0&&s>0;){let o=e[n+s-1];e[n+s-1]=e[r],e[r]=o,--r,--s}}else if(n===null&&r!==8)return Mt;return e}function Yct(t){let e="",r=Zct(t),n=!1;for(let i=0;i<=7;++i)if(!(n&&t[i]===0)){if(n&&(n=!1),r===i){e+=i===0?"::":":",n=!0;continue}e+=t[i].toString(16),i!==7&&(e+=":")}return e}function oK(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?Mt:Jct(t.substring(1,t.length-1));if(e)return Xct(t);let r=Bct(qct(t)),n=elt(r);return n===Mt?Mt:Qct(n)?zct(n):n}function Qct(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(vme(r)!==Mt||/^[0-9]+$/u.test(r))}function Xct(t){return _me(t)?Mt:qC(t,yme)}function Zct(t){let e=null,r=1,n=null,i=0;for(let s=0;s<t.length;++s)t[s]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=s),++i);return i>r?n:e}function uK(t){return typeof t=="number"?Wct(t):t instanceof Array?`[${Yct(t)}]`:t}function elt(t,e=!1){let r=Fct.toASCII(t,{checkHyphens:e,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:e,transitionalProcessing:!1,verifyDNSLength:e,ignoreInvalidPunycode:!1});return r===null||!e&&(r===""||Hct(r))?Mt:r}function tlt(t){let e=0,r=t.length;for(;e<r&&!(t.charCodeAt(e)>32);++e);for(;r>e&&!(t.charCodeAt(r-1)>32);--r);return t.substring(e,r)}function rlt(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function Sme(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&ilt(e[0])||e.pop())}function wme(t){return t.username!==""||t.password!==""}function nlt(t){return t.host===null||t.host===""||t.scheme==="file"}function q3(t){return typeof t.path=="string"}function ilt(t){return/^[A-Za-z]:$/u.test(t)}function Zn(t,e,r,n,i){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let o=tlt(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let s=rlt(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,o=>o.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this[`parse ${this.state}`](o,a);if(u){if(u===Mt){this.failure=!0;break}}else break}}Zn.prototype["parse scheme start"]=function(e,r){if(Ns.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Mt;return!0};Zn.prototype["parse scheme"]=function(e,r){if(Ns.isASCIIAlphanumeric(e)||e===ke("+")||e===ke("-")||e===ke("."))this.buffer+=r.toLowerCase();else if(e===ke(":")){if(this.stateOverride&&(Ps(this.url)&&!FC(this.buffer)||!Ps(this.url)&&FC(this.buffer)||(wme(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===Eme(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==ke("/")||this.input[this.pointer+2]!==ke("/"))&&(this.parseError=!0),this.state="file"):Ps(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Ps(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===ke("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Mt;return!0};Zn.prototype["parse no scheme"]=function(e){return this.base===null||q3(this.base)&&e!==ke("#")?Mt:(q3(this.base)&&e===ke("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};Zn.prototype["parse special relative or authority"]=function(e){return e===ke("/")&&this.input[this.pointer+1]===ke("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};Zn.prototype["parse path or authority"]=function(e){return e===ke("/")?this.state="authority":(this.state="path",--this.pointer),!0};Zn.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===ke("/")?this.state="relative slash":Ps(this.url)&&e===ke("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===ke("?")?(this.url.query="",this.state="query"):e===ke("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};Zn.prototype["parse relative slash"]=function(e){return Ps(this.url)&&(e===ke("/")||e===ke("\\"))?(e===ke("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===ke("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};Zn.prototype["parse special authority slashes"]=function(e){return e===ke("/")&&this.input[this.pointer+1]===ke("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};Zn.prototype["parse special authority ignore slashes"]=function(e){return e!==ke("/")&&e!==ke("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};Zn.prototype["parse authority"]=function(e,r){if(e===ke("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=fme(this.buffer);for(let i=0;i<n;++i){let s=this.buffer.codePointAt(i);if(s===ke(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=BC(s,aK);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ps(this.url)&&e===ke("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Mt;this.pointer-=fme(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};Zn.prototype["parse hostname"]=Zn.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===ke(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Mt;if(this.stateOverride==="hostname")return!1;let n=oK(this.buffer,sK(this.url));if(n===Mt)return Mt;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ps(this.url)&&e===ke("\\")){if(--this.pointer,Ps(this.url)&&this.buffer==="")return this.parseError=!0,Mt;if(this.stateOverride&&this.buffer===""&&(wme(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=oK(this.buffer,sK(this.url));if(n===Mt)return Mt;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===ke("[")?this.arrFlag=!0:e===ke("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};Zn.prototype["parse port"]=function(e,r){if(Ns.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ps(this.url)&&e===ke("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,Mt;this.url.port=n===Eme(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Mt;return!0};var slt=new Set([ke("/"),ke("\\"),ke("?"),ke("#")]);function Ame(t,e){let r=t.length-e;return r>=2&&Vct(t[e],t[e+1])&&(r===2||slt.has(t[e+2]))}Zn.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===ke("/")||e===ke("\\")?(e===ke("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===ke("?")?(this.url.query="",this.state="query"):e===ke("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,Ame(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):Sme(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};Zn.prototype["parse file slash"]=function(e){return e===ke("/")||e===ke("\\")?(e===ke("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!Ame(this.input,this.pointer)&&Gct(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};Zn.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===ke("/")||e===ke("\\")||e===ke("?")||e===ke("#"))if(--this.pointer,!this.stateOverride&&bme(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=oK(this.buffer,sK(this.url));if(n===Mt)return Mt;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};Zn.prototype["parse path start"]=function(e){return Ps(this.url)?(e===ke("\\")&&(this.parseError=!0),this.state="path",e!==ke("/")&&e!==ke("\\")&&--this.pointer):!this.stateOverride&&e===ke("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===ke("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==ke("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};Zn.prototype["parse path"]=function(e){return isNaN(e)||e===ke("/")||Ps(this.url)&&e===ke("\\")||!this.stateOverride&&(e===ke("?")||e===ke("#"))?(Ps(this.url)&&e===ke("\\")&&(this.parseError=!0),Kct(this.buffer)?(Sme(this.url),e!==ke("/")&&!(Ps(this.url)&&e===ke("\\"))&&this.url.path.push("")):mme(this.buffer)&&e!==ke("/")&&!(Ps(this.url)&&e===ke("\\"))?this.url.path.push(""):mme(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&bme(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===ke("?")&&(this.url.query="",this.state="query"),e===ke("#")&&(this.url.fragment="",this.state="fragment")):(e===ke("%")&&(!Ns.isASCIIHex(this.input[this.pointer+1])||!Ns.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=BC(e,Uct)),!0};Zn.prototype["parse opaque path"]=function(e){if(e===ke("?"))this.url.query="",this.state="query";else if(e===ke("#"))this.url.fragment="",this.state="fragment";else if(e===ke(" ")){let r=this.input[this.pointer+1];r===ke("?")||r===ke("#")?this.url.path+="%20":this.url.path+=" "}else!isNaN(e)&&e!==ke("%")&&(this.parseError=!0),e===ke("%")&&(!Ns.isASCIIHex(this.input[this.pointer+1])||!Ns.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=BC(e,yme));return!0};Zn.prototype["parse query"]=function(e,r){if((!Ps(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===ke("#")||isNaN(e)){let n=Ps(this.url)?$ct:jct;this.url.query+=qC(this.buffer,n),this.buffer="",e===ke("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===ke("%")&&(!Ns.isASCIIHex(this.input[this.pointer+1])||!Ns.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};Zn.prototype["parse fragment"]=function(e){return isNaN(e)||(e===ke("%")&&(!Ns.isASCIIHex(this.input[this.pointer+1])||!Ns.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=BC(e,Lct)),!0};function olt(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=uK(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!q3(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=cK(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function alt(t){let e=`${t.scheme}://`;return e+=uK(t.host),t.port!==null&&(e+=`:${t.port}`),e}function cK(t){if(q3(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}No.exports.serializeURL=olt;No.exports.serializePath=cK;No.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=No.exports.parseURL(cK(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":No.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return alt({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};No.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new Zn(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};No.exports.setTheUsername=function(t,e){t.username=qC(e,aK)};No.exports.setThePassword=function(t,e){t.password=qC(e,aK)};No.exports.serializeHost=uK;No.exports.cannotHaveAUsernamePasswordPort=nlt;No.exports.hasAnOpaquePath=q3;No.exports.serializeInteger=function(t){return String(t)};No.exports.parseURL=function(t,e){return e===void 0&&(e={}),No.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var dK=b((hfr,Dme)=>{"use strict";var{utf8Encode:ult,utf8DecodeWithoutBOM:Cme}=PC(),{percentDecodeBytes:Tme,utf8PercentEncodeString:Ome,isURLEncodedPercentEncode:xme}=NC();function Ime(t){return t.codePointAt(0)}function clt(t){let e=plt(t,Ime("&")),r=[];for(let n of e){if(n.length===0)continue;let i,s,o=n.indexOf(Ime("="));o>=0?(i=n.slice(0,o),s=n.slice(o+1)):(i=n,s=new Uint8Array(0)),i=Rme(i,43,32),s=Rme(s,43,32);let a=Cme(Tme(i)),u=Cme(Tme(s));r.push([a,u])}return r}function llt(t){return clt(ult(t))}function dlt(t){let e="";for(let[r,n]of t.entries()){let i=Ome(n[0],xme,!0),s=Ome(n[1],xme,!0);r!==0&&(e+="&"),e+=`${i}=${s}`}return e}function plt(t,e){let r=[],n=0,i=t.indexOf(e);for(;i>=0;)r.push(t.slice(n,i)),n=i+1,i=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function Rme(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}Dme.exports={parseUrlencodedString:llt,serializeUrlencoded:dlt}});var Pme=b(Mme=>{"use strict";var kme=DC(),LC=MC();Mme.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...i){let s=LC.tryWrapperForImpl(this),o;for(let a=0;a<i.length;a++)i[a]=LC.tryWrapperForImpl(i[a]);return o=Reflect.apply(e,s,i),o=kme.any(o,{context:r,globals:t}),o}return n.construct=(...i)=>{for(let o=0;o<i.length;o++)i[o]=LC.tryWrapperForImpl(i[o]);let s=Reflect.construct(e,i);return s=kme.any(s,{context:r,globals:t}),s},n[LC.wrapperSymbol]=e,n.objectReference=e,n}});var Fme=b(Nme=>{"use strict";var pK=dK();Nme.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let i=r[0];if(this._list=[],this._url=null,!n&&typeof i=="string"&&i[0]==="?"&&(i=i.slice(1)),Array.isArray(i))for(let s of i){if(s.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([s[0],s[1]])}else if(typeof i=="object"&&Object.getPrototypeOf(i)===null)for(let s of Object.keys(i)){let o=i[s];this._list.push([s,o])}else this._list=pK.parseUrlencodedString(i)}_updateSteps(){if(this._url!==null){let e=pK.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,i=0;for(;i<this._list.length;)this._list[i][0]===e?n?this._list.splice(i,1):(n=!0,this._list[i][1]=r,i++):i++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return pK.serializeUrlencoded(this._list)}}});var fK=b(Cr=>{"use strict";var ca=DC(),en=MC(),flt=Pme(),Bme=en.newObjectInRealm,Ei=en.implSymbol,Lme=en.ctorRegistrySymbol,qme="URLSearchParams";Cr.is=t=>en.isObject(t)&&en.hasOwn(t,Ei)&&t[Ei]instanceof $1.implementation;Cr.isImpl=t=>en.isObject(t)&&t instanceof $1.implementation;Cr.convert=(t,e,{context:r="The provided value"}={})=>{if(Cr.is(e))return en.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};Cr.createDefaultIterator=(t,e,r)=>{let i=t[Lme]["URLSearchParams Iterator"],s=Object.create(i);return Object.defineProperty(s,en.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),s};function jme(t,e){let r;return e!==void 0&&(r=e.prototype),en.isObject(r)||(r=t[Lme].URLSearchParams.prototype),Object.create(r)}Cr.create=(t,e,r)=>{let n=jme(t);return Cr.setup(n,t,e,r)};Cr.createImpl=(t,e,r)=>{let n=Cr.create(t,e,r);return en.implForWrapper(n)};Cr._internalSetup=(t,e)=>{};Cr.setup=(t,e,r=[],n={})=>(n.wrapper=t,Cr._internalSetup(t,e),Object.defineProperty(t,Ei,{value:new $1.implementation(e,r,n),configurable:!0}),t[Ei][en.wrapperSymbol]=t,$1.init&&$1.init(t[Ei]),t);Cr.new=(t,e)=>{let r=jme(t,e);return Cr._internalSetup(r,t),Object.defineProperty(r,Ei,{value:Object.create($1.implementation.prototype),configurable:!0}),r[Ei][en.wrapperSymbol]=r,$1.init&&$1.init(r[Ei]),r[Ei]};var hlt=new Set(["Window","Worker"]);Cr.install=(t,e)=>{if(!e.some(i=>hlt.has(i)))return;let r=en.initCtorRegistry(t);class n{constructor(){let s=[];{let o=arguments[0];if(o!==void 0)if(en.isObject(o))if(o[Symbol.iterator]!==void 0)if(en.isObject(o)){let a=[],u=o;for(let c of u){if(en.isObject(c)){let l=[],d=c;for(let p of d)p=ca.USVString(p,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),l.push(p);c=l}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");a.push(c)}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(en.isObject(o)){let a=Object.create(null);for(let u of Reflect.ownKeys(o)){let c=Object.getOwnPropertyDescriptor(o,u);if(c&&c.enumerable){let l=u;l=ca.USVString(l,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let d=o[u];d=ca.USVString(d,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),a[l]=d}}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else o=ca.USVString(o,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else o="";s.push(o)}return Cr.setup(Object.create(new.target.prototype),t,s)}append(s,o){let a=this!==null&&this!==void 0?this:t;if(!Cr.is(a))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=ca.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=ca.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return en.tryWrapperForImpl(a[Ei].append(...u))}delete(s){let o=this!==null&&this!==void 0?this:t;if(!Cr.is(o))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ca.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=ca.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return en.tryWrapperForImpl(o[Ei].delete(...a))}get(s){let o=this!==null&&this!==void 0?this:t;if(!Cr.is(o))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ca.USVString(u,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return o[Ei].get(...a)}getAll(s){let o=this!==null&&this!==void 0?this:t;if(!Cr.is(o))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ca.USVString(u,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return en.tryWrapperForImpl(o[Ei].getAll(...a))}has(s){let o=this!==null&&this!==void 0?this:t;if(!Cr.is(o))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ca.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=ca.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return o[Ei].has(...a)}set(s,o){let a=this!==null&&this!==void 0?this:t;if(!Cr.is(a))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=ca.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=ca.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return en.tryWrapperForImpl(a[Ei].set(...u))}sort(){let s=this!==null&&this!==void 0?this:t;if(!Cr.is(s))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return en.tryWrapperForImpl(s[Ei].sort())}toString(){let s=this!==null&&this!==void 0?this:t;if(!Cr.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return s[Ei].toString()}keys(){if(!Cr.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return Cr.createDefaultIterator(t,this,"key")}values(){if(!Cr.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return Cr.createDefaultIterator(t,this,"value")}entries(){if(!Cr.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return Cr.createDefaultIterator(t,this,"key+value")}forEach(s){if(!Cr.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");s=flt.convert(t,s,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let o=arguments[1],a=Array.from(this[Ei]),u=0;for(;u<a.length;){let[c,l]=a[u].map(en.tryWrapperForImpl);s.call(o,l,c,this),a=Array.from(this[Ei]),u++}}get size(){let s=this!==null&&this!==void 0?this:t;if(!Cr.is(s))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return s[Ei].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[qme]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),en.define(r["URLSearchParams Iterator"],{next(){let i=this&&this[en.iterInternalSymbol];if(!i)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:s,kind:o,index:a}=i,u=Array.from(s[Ei]),c=u.length;if(a>=c)return Bme(t,{value:void 0,done:!0});let l=u[a];return i.index=a+1,Bme(t,en.iteratorResult(l.map(en.tryWrapperForImpl),o))}}),Object.defineProperty(t,qme,{configurable:!0,writable:!0,value:n})};var $1=Fme()});var Vme=b(Kme=>{"use strict";var Wr=lK(),$me=dK(),mlt=fK();Kme.implementation=class Ume{constructor(e,[r,n]){let i=null;if(n!==void 0&&(i=Wr.basicURLParse(n),i===null))throw new TypeError(`Invalid base URL: ${n}`);let s=Wr.basicURLParse(r,{baseURL:i});if(s===null)throw new TypeError(`Invalid URL: ${r}`);let o=s.query!==null?s.query:"";this._url=s,this._query=mlt.createImpl(e,[o],{doNotStripQMark:!0}),this._query._url=this}static parse(e,r,n){try{return new Ume(e,[r,n])}catch{return null}}static canParse(e,r){let n=null;return!(r!==void 0&&(n=Wr.basicURLParse(r),n===null)||Wr.basicURLParse(e,{baseURL:n})===null)}get href(){return Wr.serializeURL(this._url)}set href(e){let r=Wr.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=$me.parseUrlencodedString(n))}get origin(){return Wr.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){Wr.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){Wr.cannotHaveAUsernamePasswordPort(this._url)||Wr.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){Wr.cannotHaveAUsernamePasswordPort(this._url)||Wr.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?Wr.serializeHost(e.host):`${Wr.serializeHost(e.host)}:${Wr.serializeInteger(e.port)}`}set host(e){Wr.hasAnOpaquePath(this._url)||Wr.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":Wr.serializeHost(this._url.host)}set hostname(e){Wr.hasAnOpaquePath(this._url)||Wr.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":Wr.serializeInteger(this._url.port)}set port(e){Wr.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:Wr.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return Wr.serializePath(this._url)}set pathname(e){Wr.hasAnOpaquePath(this._url)||(this._url.path=[],Wr.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[];return}let n=e[0]==="?"?e.substring(1):e;r.query="",Wr.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=$me.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",Wr.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var zme=b(Lt=>{"use strict";var oo=DC(),la=MC(),Tr=la.implSymbol,ylt=la.ctorRegistrySymbol,Gme="URL";Lt.is=t=>la.isObject(t)&&la.hasOwn(t,Tr)&&t[Tr]instanceof Ed.implementation;Lt.isImpl=t=>la.isObject(t)&&t instanceof Ed.implementation;Lt.convert=(t,e,{context:r="The provided value"}={})=>{if(Lt.is(e))return la.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function Hme(t,e){let r;return e!==void 0&&(r=e.prototype),la.isObject(r)||(r=t[ylt].URL.prototype),Object.create(r)}Lt.create=(t,e,r)=>{let n=Hme(t);return Lt.setup(n,t,e,r)};Lt.createImpl=(t,e,r)=>{let n=Lt.create(t,e,r);return la.implForWrapper(n)};Lt._internalSetup=(t,e)=>{};Lt.setup=(t,e,r=[],n={})=>(n.wrapper=t,Lt._internalSetup(t,e),Object.defineProperty(t,Tr,{value:new Ed.implementation(e,r,n),configurable:!0}),t[Tr][la.wrapperSymbol]=t,Ed.init&&Ed.init(t[Tr]),t);Lt.new=(t,e)=>{let r=Hme(t,e);return Lt._internalSetup(r,t),Object.defineProperty(r,Tr,{value:Object.create(Ed.implementation.prototype),configurable:!0}),r[Tr][la.wrapperSymbol]=r,Ed.init&&Ed.init(r[Tr]),r[Tr]};var glt=new Set(["Window","Worker"]);Lt.install=(t,e)=>{if(!e.some(i=>glt.has(i)))return;let r=la.initCtorRegistry(t);class n{constructor(s){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=oo.USVString(a,{context:"Failed to construct 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=oo.USVString(a,{context:"Failed to construct 'URL': parameter 2",globals:t})),o.push(a)}return Lt.setup(Object.create(new.target.prototype),t,o)}toJSON(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return s[Tr].toJSON()}get href(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return s[Tr].href}set href(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),o[Tr].href=s}toString(){let s=this;if(!Lt.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return s[Tr].href}get origin(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return s[Tr].origin}get protocol(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return s[Tr].protocol}set protocol(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),o[Tr].protocol=s}get username(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return s[Tr].username}set username(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),o[Tr].username=s}get password(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return s[Tr].password}set password(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),o[Tr].password=s}get host(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return s[Tr].host}set host(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),o[Tr].host=s}get hostname(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return s[Tr].hostname}set hostname(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),o[Tr].hostname=s}get port(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return s[Tr].port}set port(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),o[Tr].port=s}get pathname(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return s[Tr].pathname}set pathname(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),o[Tr].pathname=s}get search(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return s[Tr].search}set search(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),o[Tr].search=s}get searchParams(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return la.getSameObject(this,"searchParams",()=>la.tryWrapperForImpl(s[Tr].searchParams))}get hash(){let s=this!==null&&this!==void 0?this:t;if(!Lt.is(s))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return s[Tr].hash}set hash(s){let o=this!==null&&this!==void 0?this:t;if(!Lt.is(o))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");s=oo.USVString(s,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),o[Tr].hash=s}static parse(s){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=oo.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=oo.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:t})),o.push(a)}return la.tryWrapperForImpl(Ed.implementation.parse(t,...o))}static canParse(s){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=oo.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=oo.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),o.push(a)}return Ed.implementation.canParse(...o)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{parse:{enumerable:!0},canParse:{enumerable:!0}}),r[Gme]=n,Object.defineProperty(t,Gme,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var Ed=Vme()});var Wme=b(hK=>{"use strict";var blt=zme(),_lt=fK();hK.URL=blt;hK.URLSearchParams=_lt});var Yme=b(ao=>{"use strict";var{URL:Elt,URLSearchParams:vlt}=Wme(),pl=lK(),Jme=NC(),jC={Array,Object,Promise,String,TypeError};Elt.install(jC,["Window"]);vlt.install(jC,["Window"]);ao.URL=jC.URL;ao.URLSearchParams=jC.URLSearchParams;ao.parseURL=pl.parseURL;ao.basicURLParse=pl.basicURLParse;ao.serializeURL=pl.serializeURL;ao.serializePath=pl.serializePath;ao.serializeHost=pl.serializeHost;ao.serializeInteger=pl.serializeInteger;ao.serializeURLOrigin=pl.serializeURLOrigin;ao.setTheUsername=pl.setTheUsername;ao.setThePassword=pl.setThePassword;ao.cannotHaveAUsernamePasswordPort=pl.cannotHaveAUsernamePasswordPort;ao.hasAnOpaquePath=pl.hasAnOpaquePath;ao.percentDecodeString=Jme.percentDecodeString;ao.percentDecodeBytes=Jme.percentDecodeBytes});var Xme=b(Qu=>{"use strict";var Slt=Qu&&Qu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),wlt=Qu&&Qu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Alt=Qu&&Qu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Slt(e,t,r);return wlt(e,t),e};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.redactConnectionString=Qu.redactValidConnectionString=void 0;var Qme=Alt(mK());function Clt(t,e){var r,n;let i=t.clone(),s=(r=e?.replacementString)!==null&&r!==void 0?r:"_credentials_",o=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0;if((i.username||i.password)&&o?(i.username=s,i.password=""):i.password&&(i.password=s),i.searchParams.has("authMechanismProperties")){let a=new Qme.CommaAndColonSeparatedRecord(i.searchParams.get("authMechanismProperties"));a.get("AWS_SESSION_TOKEN")&&(a.set("AWS_SESSION_TOKEN",s),i.searchParams.set("authMechanismProperties",a.toString()))}return i.searchParams.has("tlsCertificateKeyFilePassword")&&i.searchParams.set("tlsCertificateKeyFilePassword",s),i.searchParams.has("proxyUsername")&&o&&i.searchParams.set("proxyUsername",s),i.searchParams.has("proxyPassword")&&i.searchParams.set("proxyPassword",s),i}Qu.redactValidConnectionString=Clt;function Tlt(t,e){var r,n;let i=(r=e?.replacementString)!==null&&r!==void 0?r:"<credentials>",s=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0,o;try{o=new Qme.default(t)}catch{}if(o)return e={...e,replacementString:"___credentials___"},o.redact(e).toString().replace(/___credentials___/g,i);let a=i,u=[c=>c.replace(s?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${a}$3`),c=>c.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${a}`),c=>c.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${a}`),c=>s?c.replace(/(proxyUsername=)([^&]+)/gi,`$1${a}`):c,c=>c.replace(/(proxyPassword=)([^&]+)/gi,`$1${a}`)];for(let c of u)t=c(t);return t}Qu.redactConnectionString=Tlt});var mK=b(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.CommaAndColonSeparatedRecord=Np.ConnectionString=Np.redactConnectionString=void 0;var Olt=Yme(),Zme=Xme();Object.defineProperty(Np,"redactConnectionString",{enumerable:!0,get:function(){return Zme.redactConnectionString}});var L3="__this_is_a_placeholder__";function xlt(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var Ilt=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,$C=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function Rlt(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return $C.prototype._normalizeKey.call(this,r)}}}var yK=class extends Olt.URL{},fl=class extends Error{get name(){return"MongoParseError"}},UC=class t extends yK{constructor(e,r={}){var n;let{looseValidation:i}=r;if(!i&&!xlt(e))throw new fl('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let s=e.match(Ilt);if(!s)throw new fl(`Invalid connection string "${e}"`);let{protocol:o,username:a,password:u,hosts:c,rest:l}=(n=s.groups)!==null&&n!==void 0?n:{};if(!i){if(!o||!c)throw new fl(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(a??""),decodeURIComponent(u??"")}catch(f){throw new fl(f.message)}let p=/[:/?#[\]@]/gi;if(a?.match(p))throw new fl(`Username contains unescaped characters ${a}`);if(!a||!u){let f=e.replace(`${o}://`,"");if(f.startsWith("@")||f.startsWith(":"))throw new fl("URI contained empty userinfo section")}if(u?.match(p))throw new fl("Password contains unescaped characters")}let d="";typeof a=="string"&&(d+=a),typeof u=="string"&&(d+=`:${u}`),d&&(d+="@");try{super(`${o.toLowerCase()}://${d}${L3}${l}`)}catch(p){throw i&&new t(e,{...r,looseValidation:!1}),typeof p.message=="string"&&(p.message=p.message.replace(L3,c)),p}if(this._hosts=c.split(","),!i){if(this.isSRV&&this.hosts.length!==1)throw new fl("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(p=>p.includes(":")))throw new fl("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,Rlt(this.searchParams.constructor).prototype)}get host(){return L3}set host(e){throw new Error("No single host for connection string")}get hostname(){return L3}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(L3,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,Zme.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:a,search:u,searchParams:c,hash:l}=this;return{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:a,search:u,searchParams:c,hash:l}}};Np.ConnectionString=UC;var gK=class extends $C{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};Np.CommaAndColonSeparatedRecord=gK;Np.default=UC});var $3=b(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.OpCompressedRequest=da.OpMsgResponse=da.OpMsgRequest=da.DocumentSequence=da.OpReply=da.OpQueryRequest=void 0;var vb=yr(),j3=Fe(),bK=U3(),_b=A1(),Eb=0,Dlt=2,klt=4,Mlt=8,Plt=16,Nlt=32,Flt=64,Blt=128,qlt=1,Llt=2,jlt=4,$lt=8,Ult=vb.BSON.onDemand.ByteUtils.encodeUTF8Into,EK=class t{constructor(e,r,n){this.moreToCome=!1;let i=`${e}.$cmd`;if(typeof e!="string")throw new j3.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new j3.MongoRuntimeError("A query document must be specified for query");if(i.indexOf("\0")!==-1)throw new j3.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=e,this.query=r,this.ns=i,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=Eb++}nextRequestId(){return Eb+1}static getRequestId(){return++Eb}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=Dlt),this.secondaryOk&&(n|=klt),this.oplogReplay&&(n|=Mlt),this.noCursorTimeout&&(n|=Plt),this.awaitData&&(n|=Nlt),this.exhaust&&(n|=Flt),this.partial&&(n|=Blt),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let i=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);e.push(i);let s=vb.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(s),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=vb.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let o=i.length+s.length+(r?r.length:0),a=4;return i[3]=o>>24&255,i[2]=o>>16&255,i[1]=o>>8&255,i[0]=o&255,i[a+3]=this.requestId>>24&255,i[a+2]=this.requestId>>16&255,i[a+1]=this.requestId>>8&255,i[a]=this.requestId&255,a=a+4,i[a+3]=0,i[a+2]=0,i[a+1]=0,i[a]=0,a=a+4,i[a+3]=_b.OP_QUERY>>24&255,i[a+2]=_b.OP_QUERY>>16&255,i[a+1]=_b.OP_QUERY>>8&255,i[a]=_b.OP_QUERY&255,a=a+4,i[a+3]=n>>24&255,i[a+2]=n>>16&255,i[a+1]=n>>8&255,i[a]=n&255,a=a+4,a=a+i.write(this.ns,a,"utf8")+1,i[a-1]=0,i[a+3]=this.numberToSkip>>24&255,i[a+2]=this.numberToSkip>>16&255,i[a+1]=this.numberToSkip>>8&255,i[a]=this.numberToSkip&255,a=a+4,i[a+3]=this.numberToReturn>>24&255,i[a+2]=this.numberToReturn>>16&255,i[a+1]=this.numberToReturn>>8&255,i[a]=this.numberToReturn&255,a=a+4,e}};da.OpQueryRequest=EK;var vK=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new vb.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&qlt)!==0,this.queryFailure=(this.responseFlags&Llt)!==0,this.shardConfigStale=(this.responseFlags&jlt)!==0,this.awaitCapable=(this.responseFlags&$lt)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};da.OpReply=vK;var t0e=1,r0e=2,n0e=65536,KC=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,Ult(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let i of r)this.push(i,vb.serialize(i))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};da.DocumentSequence=KC;var VC=class t{constructor(e,r,n){if(r==null)throw new j3.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=e,this.command=r,this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=t0e),this.moreToCome&&(r|=r0e),this.exhaustAllowed&&(r|=n0e);let n=Buffer.alloc(20);e.push(n);let i=n.length,s=this.command;return i+=this.makeSections(e,s),n.writeInt32LE(i,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(_b.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),i=Buffer.allocUnsafe(1);i[0]=0;let s=this.serializeBson(r);return e.push(i),e.push(s),e.push(n),i.length+s.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,i]of Object.entries(e))i instanceof KC&&(r.push(i.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return vb.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return Eb=Eb+1&2147483647,Eb}};da.OpMsgRequest=VC;var SK=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&t0e)!==0,this.moreToCome=(this.responseFlags&r0e)!==0,this.exhaustAllowed=(this.responseFlags&n0e)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new j3.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};da.OpMsgResponse=SK;var _K=16,e0e=9,wK=class{constructor(e,r){this.command=e,this.options={zlibCompressionLevel:r.zlibCompressionLevel,agreedCompressor:r.agreedCompressor}}static canCompress(e){let r=e instanceof VC?e.command:e.query,n=Object.keys(r)[0];return!bK.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(_K),n=e.readInt32LE(12),i=await(0,bK.compress)(this.options,r),s=Buffer.alloc(_K);s.writeInt32LE(_K+e0e+i.length,0),s.writeInt32LE(this.command.requestId,4),s.writeInt32LE(0,8),s.writeInt32LE(_b.OP_COMPRESSED,12);let o=Buffer.alloc(e0e);return o.writeInt32LE(n,0),o.writeInt32LE(r.length,4),o.writeUInt8(bK.Compressor[this.options.agreedCompressor],8),[s,o,i]}};da.OpCompressedRequest=wK});var U3=b(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.uncompressibleCommands=Fs.Compressor=void 0;Fs.compress=zlt;Fs.decompress=a0e;Fs.compressCommand=Wlt;Fs.decompressResponse=Jlt;var i0e=require("util"),GC=require("zlib"),Klt=gi(),s0e=ll(),CK=Fe(),Sb=$3(),AK=A1();Fs.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});Fs.uncompressibleCommands=new Set([Klt.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var Vlt=3,Glt=(0,i0e.promisify)(GC.inflate.bind(GC)),Hlt=(0,i0e.promisify)(GC.deflate.bind(GC)),U1,S0=null;function o0e(){if(S0==null){let t=(0,s0e.getSnappy)();if("kModuleError"in t)throw t.kModuleError;S0=t}return S0}async function zlt(t,e){let r={};switch(t.agreedCompressor){case"snappy":return S0??=o0e(),await S0.compress(e);case"zstd":{if(u0e(),"kModuleError"in U1)throw U1.kModuleError;return await U1.compress(e,Vlt)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await Hlt(e,r);default:throw new CK.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function a0e(t,e){if(t!==Fs.Compressor.snappy&&t!==Fs.Compressor.zstd&&t!==Fs.Compressor.zlib&&t!==Fs.Compressor.none)throw new CK.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case Fs.Compressor.snappy:return S0??=o0e(),await S0.uncompress(e,{asBuffer:!0});case Fs.Compressor.zstd:{if(u0e(),"kModuleError"in U1)throw U1.kModuleError;return await U1.decompress(e)}case Fs.Compressor.zlib:return await Glt(e);default:return e}}function u0e(){U1||(U1=(0,s0e.getZstdLibrary)())}var K3=16;async function Wlt(t,e){let n=await(e.agreedCompressor==="none"||!Sb.OpCompressedRequest.canCompress(t)?t:new Sb.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function Jlt(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==AK.OP_COMPRESSED){let a=e.opCode===AK.OP_MSG?Sb.OpMsgResponse:Sb.OpReply,u=t.subarray(K3);return new a(t,e,u)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(K3),length:t.readInt32LE(K3+4)},n=t[K3+8],i=t.slice(K3+9),s=r.opCode===AK.OP_MSG?Sb.OpMsgResponse:Sb.OpReply,o=await a0e(n,i);if(o.length!==r.length)throw new CK.MongoDecompressionError("Message body and message header must be the same length");return new s(t,r,o)}});var OK=b(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.hmacSha256Hook=zi.hmacSha512Hook=zi.aes256CtrDecryptHook=zi.aes256CtrEncryptHook=zi.aes256CbcDecryptHook=zi.aes256CbcEncryptHook=void 0;zi.makeAES256Hook=G3;zi.randomHook=Ylt;zi.sha256Hook=Qlt;zi.makeHmacHook=TK;zi.signRsaSha256Hook=Xlt;var V3=require("crypto");function G3(t,e){return function(r,n,i,s){let o;try{let a=V3[t](e,r,n);a.setAutoPadding(!1),o=a.update(i);let u=a.final();u.length>0&&(o=Buffer.concat([o,u]))}catch(a){return a}return o.copy(s),o.length}}function Ylt(t,e){try{V3.randomFillSync(t,0,e)}catch(r){return r}return e}function Qlt(t,e){let r;try{r=V3.createHash("sha256").update(t).digest()}catch(n){return n}return r.copy(e),r.length}function TK(t){return(e,r,n)=>{let i;try{i=V3.createHmac(t,e).update(r).digest()}catch(s){return s}return i.copy(n),i.length}}function Xlt(t,e,r){let n;try{let i=V3.createSign("sha256WithRSAEncryption"),s=Buffer.from(`-----BEGIN PRIVATE KEY-----
${t.toString("base64")}
-----END PRIVATE KEY-----
`);n=i.update(e).end().sign(s)}catch(i){return i}return n.copy(r),n.length}zi.aes256CbcEncryptHook=G3("createCipheriv","aes-256-cbc");zi.aes256CbcDecryptHook=G3("createDecipheriv","aes-256-cbc");zi.aes256CtrEncryptHook=G3("createCipheriv","aes-256-ctr");zi.aes256CtrDecryptHook=G3("createDecipheriv","aes-256-ctr");zi.hmacSha512Hook=TK("sha512");zi.hmacSha256Hook=TK("sha256")});var wb=b(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.MongoCryptKMSRequestNetworkTimeoutError=pa.MongoCryptAzureKMSRequestError=pa.MongoCryptCreateEncryptedCollectionError=pa.MongoCryptCreateDataKeyError=pa.MongoCryptInvalidArgumentError=pa.MongoCryptError=void 0;var Zlt=Fe(),K1=class extends Zlt.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};pa.MongoCryptError=K1;var xK=class extends K1{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};pa.MongoCryptInvalidArgumentError=xK;var IK=class extends K1{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};pa.MongoCryptCreateDataKeyError=IK;var RK=class extends K1{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};pa.MongoCryptCreateEncryptedCollectionError=RK;var DK=class extends K1{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};pa.MongoCryptAzureKMSRequestError=DK;var kK=class extends K1{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};pa.MongoCryptKMSRequestNetworkTimeoutError=kK});var FK=b(V1=>{"use strict";Object.defineProperty(V1,"__esModule",{value:!0});V1.LegacyAWSTemporaryCredentialProvider=V1.AWSSDKCredentialProvider=V1.AWSTemporaryCredentialProvider=void 0;var edt=ll(),tdt=Fe(),HC=Ze(),rdt="http://169.254.170.2",MK="http://169.254.169.254",c0e="/latest/meta-data/iam/security-credentials",Fp=class t{static get awsSDK(){return t._awsSDK??=(0,edt.getAwsCredentialProvider)(),t._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in t.awsSDK)}};V1.AWSTemporaryCredentialProvider=Fp;var PK=class extends Fp{constructor(e){super(),e&&(this._provider=e)}get provider(){if("kModuleError"in Fp.awsSDK)throw Fp.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,s=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&s?Fp.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):Fp.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new tdt.MongoAWSError(e.message,{cause:e})}}};V1.AWSSDKCredentialProvider=PK;var NK=class extends Fp{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,HC.request)(`${rdt}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let e=await(0,HC.request)(`${MK}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),r=await(0,HC.request)(`${MK}/${c0e}`,{json:!1,headers:{"X-aws-ec2-metadata-token":e}});return await(0,HC.request)(`${MK}/${c0e}/${r}`,{headers:{"X-aws-ec2-metadata-token":e}})}};V1.LegacyAWSTemporaryCredentialProvider=NK});var l0e=b(BK=>{"use strict";Object.defineProperty(BK,"__esModule",{value:!0});BK.loadAWSCredentials=idt;var ndt=FK();async function idt(t,e){let r=new ndt.AWSSDKCredentialProvider(e),{SecretAccessKey:n="",AccessKeyId:i="",Token:s}=await r.getCredentials(),o={secretAccessKey:n,accessKeyId:i};return s!=null&&(o.sessionToken=s),{...t,aws:o}}});var qK=b(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.tokenCache=fa.AzureCredentialCache=fa.AZURE_BASE_URL=void 0;fa.addAzureParams=d0e;fa.prepareRequest=p0e;fa.fetchAzureKMSToken=f0e;fa.loadAzureCredentials=cdt;var sdt=Fe(),odt=Ze(),Ab=wb(),adt=6e3;fa.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var zC=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=adt}resetCache(){this.cachedToken=null}_getToken(){return f0e()}};fa.AzureCredentialCache=zC;fa.tokenCache=new zC;async function udt(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new Ab.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new Ab.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new Ab.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new Ab.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let i=Number(n.expires_in)*1e3;if(Number.isNaN(i))throw new Ab.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+i}}function d0e(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function p0e(t){let e=new URL(t.url?.toString()??fa.AZURE_BASE_URL);return d0e(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function f0e(t={}){let{headers:e,url:r}=p0e(t);try{let n=await(0,odt.get)(r,{headers:e});return await udt(n)}catch(n){throw n instanceof sdt.MongoNetworkTimeoutError?new Ab.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function cdt(t){let e=await fa.tokenCache.getToken();return{...t,azure:e}}});var h0e=b(LK=>{"use strict";Object.defineProperty(LK,"__esModule",{value:!0});LK.loadGCPCredentials=ddt;var ldt=ll();async function ddt(t){let e=(0,ldt.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var jK=b(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.isEmptyCredentials=WC;JC.refreshKMSCredentials=mdt;var pdt=l0e(),fdt=qK(),hdt=h0e();function WC(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function mdt(t,e){let r=t;return WC("aws",t)&&(r=await(0,pdt.loadAWSCredentials)(r,e?.aws)),WC("gcp",t)&&(r=await(0,hdt.loadGCPCredentials)(r)),WC("azure",t)&&(r=await(0,fdt.loadAzureCredentials)(r)),r}});var UK=b(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});YC.StateMachine=void 0;var m0e=require("fs/promises"),ydt=require("net"),gdt=require("tls"),Bp=yr(),y0e=Bs(),bdt=ll(),_dt=Fe(),g0e=Vi(),G1=Ze(),Edt=QC(),H1=wb(),H3=null;function vdt(){if(H3==null){let t=(0,bdt.getSocks)();if("kModuleError"in t)throw t.kModuleError;H3=t}return H3}var w0=0,_0e=1,E0e=2,v0e=3,S0e=7,w0e=4,A0e=5,C0e=6,Sdt=443,wdt=new Map([[w0,"MONGOCRYPT_CTX_ERROR"],[_0e,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[E0e,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[v0e,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[S0e,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[w0e,"MONGOCRYPT_CTX_NEED_KMS"],[A0e,"MONGOCRYPT_CTX_READY"],[C0e,"MONGOCRYPT_CTX_DONE"]]),Adt=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function b0e(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var Cdt,$K=class{constructor(e,r=(0,Bp.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let i=e._keyVaultNamespace,s=e._keyVaultClient,o=e._metaDataClient,a=e._mongocryptdClient,u=e._mongocryptdManager,c=null,l=()=>r.status,d=()=>r.state;for(;d()!==C0e&&d()!==w0;)switch(n.signal?.throwIfAborted(),b0e(`[context#${r.id}] ${wdt.get(d())||d()}`),d()){case _0e:{let p=(0,Bp.deserialize)(r.nextMongoOperation());if(!o)throw new H1.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let f=this.fetchCollectionInfo(o,r.ns,p,n);for await(let h of f)if(r.addMongoOperationResponse((0,Bp.serialize)(h)),d()===w0)break;if(d()===w0)break;r.finishMongoOperation();break}case E0e:{let p=r.nextMongoOperation();if(d()===w0)break;if(!a)throw new H1.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let f=u?await u.withRespawn(this.markCommand.bind(this,a,r.ns,p,n)):await this.markCommand(a,r.ns,p,n);r.addMongoOperationResponse(f),r.finishMongoOperation();break}case v0e:{let p=r.nextMongoOperation(),f=await this.fetchKeys(s,i,p,n);f.length===0&&(c=Cdt??=(0,Bp.serialize)({v:[]}));for(let h of f)r.addMongoOperationResponse((0,Bp.serialize)(h));r.finishMongoOperation();break}case S0e:{let p=await e.askForKMSCredentials();r.provideKMSProviders((0,Bp.serialize)(p));break}case w0e:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case A0e:{let p=r.finalize();if(d()===w0){let f=l().message||"Finalization error";throw new H1.MongoCryptError(f)}c=p;break}default:throw new H1.MongoCryptError(`Unknown state: ${d()}`)}if(d()===w0||c==null){let p=l().message;throw p||b0e("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new H1.MongoCryptError(p??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),i=n[1]!=null?Number.parseInt(n[1],10):Sdt,s={host:n[0],servername:n[0],port:i,...(0,Edt.autoSelectSocketOptions)(this.options.socketOptions||{})},o=e.message,a=new G1.BufferPool,u,c;function l(){for(let y of[c,u])y&&y.destroy()}function d(y){return new H1.MongoCryptError("KMS request failed",{cause:y})}function p(){return new H1.MongoCryptError("KMS request closed")}let f=this.options.tlsOptions;if(f){let y=e.kmsProvider,E=f[y];if(E){let v=this.validateTlsOptions(y,E);if(v)throw v;try{await this.setTlsOptions(E,s)}catch(w){throw d(w)}}}let h;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){u=new ydt.Socket;let{promise:w,reject:T,resolve:A}=(0,G1.promiseWithResolvers)();u.once("error",x=>T(d(x))).once("close",()=>T(p())).once("connect",()=>A());let C={...s,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};u.connect(C),await w;try{H3??=vdt(),s.socket=(await H3.SocksClient.createConnection({existing_socket:u,command:"connect",destination:{host:s.host,port:s.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(x){throw d(x)}}c=gdt.connect(s,()=>{c.write(o)});let{promise:y,reject:E,resolve:v}=(0,G1.promiseWithResolvers)();h=(0,G1.addAbortListener)(r?.signal,function(){l(),E(this.reason)}),c.once("error",w=>E(d(w))).once("close",()=>E(p())).on("data",w=>{for(a.append(w);e.bytesNeeded>0&&a.length;){let T=Math.min(e.bytesNeeded,a.length);e.addResponse(a.read(T))}e.bytesNeeded<=0&&v()}),await(r?.timeoutContext?.csotEnabled()?Promise.all([y,g0e.Timeout.expires(r.timeoutContext?.remainingTimeMS)]):y)}catch(y){throw y instanceof g0e.TimeoutError?new _dt.MongoOperationTimeoutError("KMS request timed out"):y}finally{l(),h?.[G1.kDispose]()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let i of Adt)if(n.includes(i))return new H1.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${i}`)}async setTlsOptions(e,r){if(e.secureContext&&(r.secureContext=e.secureContext),e.tlsCertificateKeyFile){let n=await m0e.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await m0e.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}fetchCollectionInfo(e,r,n,i){let{db:s}=G1.MongoDBCollectionNamespace.fromString(r);return e.db(s).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:i?.timeoutContext&&new y0e.CursorTimeoutContext(i?.timeoutContext,Symbol()),signal:i?.signal,nameOnly:!1})}async markCommand(e,r,n,i){let{db:s}=G1.MongoDBCollectionNamespace.fromString(r),o={promoteLongs:!1,promoteValues:!1},a=(0,Bp.deserialize)(n,o),u={timeoutMS:void 0,signal:void 0};i?.timeoutContext?.csotEnabled()&&(u.timeoutMS=i.timeoutContext.remainingTimeMS),i?.signal&&(u.signal=i.signal);let c=await e.db(s).command(a,{...o,...u});return(0,Bp.serialize)(c,this.bsonOptions)}fetchKeys(e,r,n,i){let{db:s,collection:o}=G1.MongoDBCollectionNamespace.fromString(r),a={timeoutContext:void 0,signal:void 0};return i?.timeoutContext!=null&&(a.timeoutContext=new y0e.CursorTimeoutContext(i.timeoutContext,Symbol())),i?.signal!=null&&(a.signal=i.signal),e.db(s).collection(o,{readConcern:{level:"majority"}}).find((0,Bp.deserialize)(n),a).toArray()}};YC.StateMachine=$K});var QC=b(J3=>{"use strict";Object.defineProperty(J3,"__esModule",{value:!0});J3.ClientEncryption=void 0;J3.autoSelectSocketOptions=W3;var Fo=yr(),Tdt=ll(),z3=Vi(),ha=Ze(),Odt=OK(),z1=wb(),T0e=jK(),XC=UK(),KK=class t{static getMongoCrypt(){let e=(0,Tdt.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,ha.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,T0e.isEmptyCredentials)("aws",this._kmsProviders))throw new z1.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(r.keyVaultNamespace==null)throw new z1.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let i={...r,cryptoCallbacks:Odt,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,Fo.serialize)(this._kmsProviders)};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let s=t.getMongoCrypt();this._mongoCrypt=new s(i)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new z1.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((f,h)=>{if(typeof f!="string")throw new z1.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${h} was of type ${typeof f}`);return(0,Fo.serialize)({keyAltName:f})}));let i;r.keyMaterial&&(i=(0,Fo.serialize)({keyMaterial:r.keyMaterial}));let s=(0,Fo.serialize)({provider:e,...r.masterKey}),o=this._mongoCrypt.makeDataKeyContext(s,{keyAltNames:n,keyMaterial:i}),a=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W3(this._client.s.options)}),u=r?.timeoutContext??z3.TimeoutContext.create((0,ha.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,Fo.deserialize)(await a.execute(this,o,{timeoutContext:u})),{db:l,collection:d}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:p}=await this._keyVaultClient.db(l).collection(d).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0});return p}async rewrapManyDataKey(e,r){let n;if(r){let f=Object.assign({provider:r.provider},r.masterKey);n=(0,Fo.serialize)(f)}let i=(0,Fo.serialize)(e),s=this._mongoCrypt.makeRewrapManyDataKeyContext(i,n),o=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W3(this._client.s.options)}),a=z3.TimeoutContext.create((0,ha.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:u}=(0,Fo.deserialize)(await o.execute(this,s,{timeoutContext:a}));if(u.length===0)return{};let{db:c,collection:l}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),d=u.map(f=>({updateOne:{filter:{_id:f._id},update:{$set:{masterKey:f.masterKey,keyMaterial:f.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(l).bulkWrite(d,{writeConcern:{w:"majority"},timeoutMS:a.csotEnabled()?a?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:i}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:i}=ha.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),s=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},s,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:i,masterKey:s,createCollectionOptions:{encryptedFields:{...o},...a}}=n,u=this._timeoutMS!=null?z3.TimeoutContext.create((0,ha.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(o.fields)){let c=o.fields.map(async p=>p==null||typeof p!="object"||p.keyId!=null?p:{...p,keyId:await this.createDataKey(i,{masterKey:s,timeoutContext:u?.csotEnabled()?u?.clone():void 0})}),l=await Promise.allSettled(c);o.fields=l.map((p,f)=>p.status==="fulfilled"?p.value:o.fields[f]);let d=l.find(p=>p.status==="rejected");if(d!=null)throw new z1.MongoCryptCreateDataKeyError(o,{cause:d.reason})}try{return{collection:await e.createCollection(r,{...a,encryptedFields:o,timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:o}}catch(c){throw new z1.MongoCryptCreateEncryptedCollectionError(o,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,Fo.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),i=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W3(this._client.s.options)}),s=this._timeoutMS!=null?z3.TimeoutContext.create((0,ha.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:o}=(0,Fo.deserialize)(await i.execute(this,n,{timeoutContext:s}));return o}async askForKMSCredentials(){return await(0,T0e.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:i,keyId:s,keyAltName:o,contentionFactor:a,queryType:u,rangeOptions:c,textOptions:l}=n,d={expressionMode:r,algorithm:i};if(s&&(d.keyId=s.buffer),o){if(s)throw new z1.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof o!="string")throw new z1.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof o}`);d.keyAltName=(0,Fo.serialize)({keyAltName:o})}(typeof a=="number"||typeof a=="bigint")&&(d.contentionFactor=a),typeof u=="string"&&(d.queryType=u),typeof c=="object"&&(d.rangeOptions=(0,Fo.serialize)(c)),typeof l=="object"&&(d.textOptions=(0,Fo.serialize)(l));let p=(0,Fo.serialize)({v:e}),f=new XC.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W3(this._client.s.options)}),h=this._mongoCrypt.makeExplicitEncryptionContext(p,d),y=this._timeoutMS!=null?z3.TimeoutContext.create((0,ha.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:E}=(0,Fo.deserialize)(await f.execute(this,h,{timeoutContext:y}));return E}};J3.ClientEncryption=KK;function W3(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var O0e=b(eT=>{"use strict";Object.defineProperty(eT,"__esModule",{value:!0});eT.MongocryptdManager=void 0;var xdt=Fe(),ZC=class t{constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof xdt.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};eT.MongocryptdManager=ZC;ZC.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var zK=b(Cb=>{"use strict";var k0e;Object.defineProperty(Cb,"__esModule",{value:!0});Cb.AutoEncrypter=Cb.AutoEncryptionLoggerLevel=void 0;var x0e=require("net"),Y3=yr(),Idt=gi(),Rdt=ll(),VK=Fe(),Ddt=W1(),kdt=Ze(),GK=QC(),Mdt=OK(),I0e=wb(),Pdt=O0e(),R0e=jK(),D0e=UK();Cb.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var HK=class t{static getMongoCrypt(){let e=(0,Rdt.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){if(this[k0e]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{},this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,R0e.isEmptyCredentials)("aws",this._kmsProviders))throw new I0e.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let n={enableMultipleCollinfo:!0,cryptoCallbacks:Mdt};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,Y3.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,Y3.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,Y3.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),r.keyExpirationMS!=null&&(n.keyExpirationMS=r.keyExpirationMS),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let i=t.getMongoCrypt();if(this._mongocrypt=new i(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new I0e.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new Pdt.MongocryptdManager(r.extraOptions);let s={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!x0e.getDefaultAutoSelectFamily&&(s.family=4),x0e.getDefaultAutoSelectFamily&&Object.assign(s,(0,GK.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new Ddt.MongoClient(this._mongocryptdManager.uri,s)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new VK.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new VK.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){throw new VK.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e})}}}async close(){await this._mongocryptdClient?.close()}async encrypt(e,r,n={}){if(n.signal?.throwIfAborted(),this._bypassEncryption)return r;let i=Buffer.isBuffer(r)?r:(0,Y3.serialize)(r,n),s=this._mongocrypt.makeEncryptionContext(kdt.MongoDBCollectionNamespace.fromString(e).db,i);s.id=this._contextCounter++,s.ns=e,s.document=r;let o=new D0e.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,GK.autoSelectSocketOptions)(this._client.s.options)});return(0,Y3.deserialize)(await o.execute(this,s,n),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){r.signal?.throwIfAborted();let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new D0e.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,GK.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r)}async askForKMSCredentials(){return await(0,R0e.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};Cb.AutoEncrypter=HK;k0e=Idt.kDecorateResult});var P0e=b(tT=>{"use strict";Object.defineProperty(tT,"__esModule",{value:!0});tT.Encrypter=void 0;var Ndt=zK(),Fdt=gi(),Bdt=ll(),M0e=Fe(),qdt=W1(),WK=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new M0e.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this.internalClient=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new Ndt.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let i=this.internalClient;if(i==null){let s={};for(let o of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(o)||Reflect.set(s,o,Reflect.get(n,o));s.minPoolSize=0,i=new qdt.MongoClient(r,s),this.internalClient=i;for(let o of Fdt.MONGO_CLIENT_EVENTS)for(let a of e.listeners(o))i.on(o,a);e.on("newListener",(o,a)=>{i?.on(o,a)}),this.needsConnecting=!0}return i}async connectInternalClient(){let e=this.internalClient;this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}async close(e){let r;try{await this.autoEncrypter.close()}catch(i){r=i}let n=this.internalClient;if(n!=null&&e!==n)return await n.close();if(r!=null)throw r}static checkForMongoCrypt(){let e=(0,Bdt.getMongoDBClientEncryption)();if("kModuleError"in e)throw new M0e.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};tT.Encrypter=WK});var JK=b(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});rT.ConnectionPoolMetrics=void 0;var Tb=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};rT.ConnectionPoolMetrics=Tb;Tb.TXN="txn";Tb.CURSOR="cursor";Tb.OTHER="other"});var QK=b(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.Transaction=jt.TxnState=void 0;jt.isTransactionCommand=Gdt;var N0e=Fe(),Ldt=el(),jdt=ps(),$dt=Do();jt.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var Udt={[jt.TxnState.NO_TRANSACTION]:[jt.TxnState.NO_TRANSACTION,jt.TxnState.STARTING_TRANSACTION],[jt.TxnState.STARTING_TRANSACTION]:[jt.TxnState.TRANSACTION_IN_PROGRESS,jt.TxnState.TRANSACTION_COMMITTED,jt.TxnState.TRANSACTION_COMMITTED_EMPTY,jt.TxnState.TRANSACTION_ABORTED],[jt.TxnState.TRANSACTION_IN_PROGRESS]:[jt.TxnState.TRANSACTION_IN_PROGRESS,jt.TxnState.TRANSACTION_COMMITTED,jt.TxnState.TRANSACTION_ABORTED],[jt.TxnState.TRANSACTION_COMMITTED]:[jt.TxnState.TRANSACTION_COMMITTED,jt.TxnState.TRANSACTION_COMMITTED_EMPTY,jt.TxnState.STARTING_TRANSACTION,jt.TxnState.NO_TRANSACTION],[jt.TxnState.TRANSACTION_ABORTED]:[jt.TxnState.STARTING_TRANSACTION,jt.TxnState.NO_TRANSACTION],[jt.TxnState.TRANSACTION_COMMITTED_EMPTY]:[jt.TxnState.TRANSACTION_COMMITTED_EMPTY,jt.TxnState.NO_TRANSACTION]},Kdt=new Set([jt.TxnState.STARTING_TRANSACTION,jt.TxnState.TRANSACTION_IN_PROGRESS]),Vdt=new Set([jt.TxnState.TRANSACTION_COMMITTED,jt.TxnState.TRANSACTION_COMMITTED_EMPTY,jt.TxnState.TRANSACTION_ABORTED]),YK=class{constructor(e){e=e??{},this.state=jt.TxnState.NO_TRANSACTION,this.options={};let r=$dt.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new N0e.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=Ldt.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=jdt.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===jt.TxnState.STARTING_TRANSACTION}get isActive(){return Kdt.has(this.state)}get isCommitted(){return Vdt.has(this.state)}transition(e){let r=Udt[this.state];if(r&&r.includes(e)){this.state=e,(this.state===jt.TxnState.NO_TRANSACTION||this.state===jt.TxnState.STARTING_TRANSACTION||this.state===jt.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new N0e.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};jt.Transaction=YK;function Gdt(t){return!!(t.commitTransaction||t.abortTransaction)}});var xb=b(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.ServerSessionPool=hl.ServerSession=hl.ClientSession=void 0;hl.maybeClearPinnedConnection=sT;hl.applySession=Ydt;hl.updateSessionFromResponse=Qdt;var iT=yr(),oT=JK(),q0e=gi(),Ct=Fe(),Hdt=Qa(),nT=fs(),XK=_3(),zdt=el(),ZK=ps(),Wdt=Ib(),tV=Wa(),eV=Vi(),Jr=QK(),qs=Ze(),Ob=Do(),aT=class t extends Hdt.TypedEventEmitter{constructor(e,r,n,i){if(super(),this.timeoutContext=null,this.on("error",qs.noop),e==null)throw new Ct.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof uT))throw new Ct.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},this.snapshotEnabled=n.snapshot===!0,n.causalConsistency===!0&&this.snapshotEnabled)throw new Ct.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=i,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let s=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??s},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new Jr.Transaction}get id(){return this.serverSession?.id}get serverSession(){let e=this._serverSession;if(e==null){if(this.explicit)throw new Ct.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new Ct.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this._serverSession=e}return e}get loadBalanced(){return this.client.topology?.description.type===tV.TopologyType.LoadBalanced}pin(e){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=e,e.emit(q0e.PINNED,this.inTransaction()?oT.ConnectionPoolMetrics.TXN:oT.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return sT(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,qs.squashError)(r)}finally{if(!this.hasEnded){let r=this.serverSession;r!=null&&(this.sessionPool.release(r),this._serverSession=new Q3(r)),this.hasEnded=!0,this.emit("ended",this)}sT(this,{force:!0,...e})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new Ct.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new Ct.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new Ct.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,tV._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:qs.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this.snapshotEnabled)throw new Ct.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new Ct.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin(),this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new Jr.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(Jr.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===Jr.TxnState.NO_TRANSACTION)throw new Ct.MongoTransactionError("No transaction started");if(this.transaction.state===Jr.TxnState.STARTING_TRANSACTION||this.transaction.state===Jr.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(Jr.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===Jr.TxnState.TRANSACTION_ABORTED)throw new Ct.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(i!=null)if(n==null&&this.timeoutContext==null)Ob.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i});else{let a=Object.keys(i);(a.length>2||!a.includes("wtimeoutMS")&&!a.includes("wTimeoutMS"))&&Ob.WriteConcern.apply(r,{...i,wtimeoutMS:void 0})}(this.transaction.state===Jr.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?Ob.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}):Ob.WriteConcern.apply(r,{w:"majority",...i,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let s=new XK.RunCommandOperation(new qs.MongoDBNamespace("admin"),r,{session:this,readPreference:ZK.ReadPreference.primary,bypassPinningCheck:!0}),o=this.timeoutContext??(typeof n=="number"?eV.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,nT.executeOperation)(this.client,s,o),this.commitAttempted=void 0;return}catch(a){if(this.commitAttempted=!0,a instanceof Ct.MongoError&&(0,Ct.isRetryableWriteError)(a)){Ob.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}),this.unpin({force:!0});try{await(0,nT.executeOperation)(this.client,new XK.RunCommandOperation(new qs.MongoDBNamespace("admin"),r,{session:this,readPreference:ZK.ReadPreference.primary,bypassPinningCheck:!0}),o);return}catch(u){throw B0e(u)&&u.addErrorLabel(Ct.MongoErrorLabel.UnknownTransactionCommitResult),F0e(u)&&this.unpin({error:u}),u}}throw B0e(a)&&a.addErrorLabel(Ct.MongoErrorLabel.UnknownTransactionCommitResult),F0e(a)&&this.unpin({error:a}),a}finally{this.transaction.transition(Jr.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===Jr.TxnState.NO_TRANSACTION)throw new Ct.MongoTransactionError("No transaction started");if(this.transaction.state===Jr.TxnState.STARTING_TRANSACTION){this.transaction.transition(Jr.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===Jr.TxnState.TRANSACTION_ABORTED)throw new Ct.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===Jr.TxnState.TRANSACTION_COMMITTED||this.transaction.state===Jr.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new Ct.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=n!=null?eV.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,s=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;s!=null&&n==null&&Ob.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...s}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let o=new XK.RunCommandOperation(new qs.MongoDBNamespace("admin"),r,{session:this,readPreference:ZK.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,nT.executeOperation)(this.client,o,i),this.unpin();return}catch(a){if(this.unpin(),a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a;if(a instanceof Ct.MongoError&&(0,Ct.isRetryableWriteError)(a))try{await(0,nT.executeOperation)(this.client,o,i);return}catch(u){if(u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u}}finally{this.transaction.transition(Jr.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&sT(this,{force:!1})}}toBSON(){throw new Ct.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let i=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=i!=null?eV.TimeoutContext.create({timeoutMS:i,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let s=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,qs.now)(),o=!1,a;try{for(;!o;){this.startTransaction(r);try{let u=e(this);if(!(0,qs.isPromiseLike)(u))throw new Ct.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(a=await u,this.transaction.state===Jr.TxnState.NO_TRANSACTION||this.transaction.state===Jr.TxnState.TRANSACTION_COMMITTED||this.transaction.state===Jr.TxnState.TRANSACTION_ABORTED)return a}catch(u){if(!(u instanceof Ct.MongoError)||u instanceof Ct.MongoInvalidArgumentError)throw await this.abortTransaction(),u;if((this.transaction.state===Jr.TxnState.STARTING_TRANSACTION||this.transaction.state===Jr.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),u.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,qs.now)()-s<12e4))continue;throw u}for(;!o;)try{await this.commitTransaction(),o=!0}catch(u){if(!cT(u)&&u.hasErrorLabel(Ct.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,qs.now)()-s<12e4))continue;if(u.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,qs.now)()-s<12e4))break;throw u}}return a}finally{this.timeoutContext=null}}};hl.ClientSession=aT;(0,Wdt.configureResourceManagement)(aT.prototype);var Jdt=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function F0e(t){if(t instanceof Ct.MongoError){if((0,Ct.isRetryableWriteError)(t)||t instanceof Ct.MongoWriteConcernError||cT(t)){if(L0e(t))return!0}else if(t.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError))return!0}return!1}function B0e(t){let e=(0,Ct.isRetryableWriteError)(t);return e||=t instanceof Ct.MongoWriteConcernError,e||=cT(t),e&&=L0e(t),e}function L0e(t){let e=t instanceof Ct.MongoServerError&&t.codeName&&Jdt.has(t.codeName);return cT(t)||!e&&t.code!==Ct.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==Ct.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function sT(t,e){let r=t.pinnedConnection,n=e?.error;if(t.inTransaction()&&n&&n instanceof Ct.MongoError&&n.hasErrorLabel(Ct.MongoErrorLabel.TransientTransactionError))return;let i=t.client.topology;if(r&&i!=null){let o=Array.from(i.s.servers.values())[0];(e?.error==null||e?.force)&&(o.pool.checkIn(r),t.pinnedConnection=void 0,r.emit(q0e.UNPINNED,t.transaction.state!==Jr.TxnState.NO_TRANSACTION?oT.ConnectionPoolMetrics.TXN:oT.ConnectionPoolMetrics.CURSOR),e?.forceClear&&o.pool.clear({serviceId:r.serviceId}))}}function cT(t){return t==null||!(t instanceof Ct.MongoServerError)?!1:t.code===Ct.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===Ct.MONGODB_ERROR_CODES.MaxTimeMSExpired}var Q3=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new iT.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new iT.Binary((0,qs.uuidV4)(),iT.Binary.SUBTYPE_UUID)},this.lastUse=(0,qs.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,qs.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};hl.ServerSession=Q3;var uT=class{constructor(e){if(e==null)throw new Ct.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new qs.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new Q3),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};hl.ServerSessionPool=uT;function Ydt(t,e,r){if(t.hasEnded)return new Ct.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new Ct.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new Ct.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,qs.now)(),e.lsid=n.id;let i=t.inTransaction()||(0,Jr.isTransactionCommand)(e);if((r.willRetryWrite||i)&&(n.txnNumber+=t.txnNumberIncrement,t.txnNumberIncrement=0,e.txnNumber=iT.Long.fromNumber(n.txnNumber)),!i){t.transaction.state!==Jr.TxnState.NO_TRANSACTION&&t.transaction.transition(Jr.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,qs.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t.snapshotEnabled&&(e.readConcern=e.readConcern||{level:zdt.ReadConcernLevel.snapshot},t.snapshotTime!=null&&Object.assign(e.readConcern,{atClusterTime:t.snapshotTime}));return}if(e.autocommit=!1,t.transaction.state===Jr.TxnState.STARTING_TRANSACTION){t.transaction.transition(Jr.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let o=t.transaction.options.readConcern||t?.clientOptions?.readConcern;o&&(e.readConcern=o),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function Qdt(t,e){if(e.$clusterTime&&(0,tV._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.snapshotEnabled&&t.snapshotTime==null){let r=e.atClusterTime;r&&(t.snapshotTime=r)}}});var lV=b(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.SENSITIVE_COMMANDS=Xu.CommandFailedEvent=Xu.CommandSucceededEvent=Xu.CommandStartedEvent=void 0;var X3=gi(),U0e=Ze(),rV=$3(),nV=class{constructor(e,r,n){this.name=X3.COMMAND_STARTED;let i=uV(r),s=oV(i),{address:o,connectionId:a,serviceId:u}=cV(e);Xu.SENSITIVE_COMMANDS.has(s)&&(this.commandObj={},this.commandObj[s]=!0),this.address=o,this.connectionId=a,this.serviceId=u,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=s,this.command=aV(s,i,i),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};Xu.CommandStartedEvent=nV;var iV=class{constructor(e,r,n,i,s){this.name=X3.COMMAND_SUCCEEDED;let o=uV(r),a=oV(o),{address:u,connectionId:c,serviceId:l}=cV(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,U0e.calculateDurationInMs)(i),this.reply=aV(a,o,ept(n)),this.serverConnectionId=s,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};Xu.CommandSucceededEvent=iV;var sV=class{constructor(e,r,n,i,s){this.name=X3.COMMAND_FAILED;let o=uV(r),a=oV(o),{address:u,connectionId:c,serviceId:l}=cV(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,U0e.calculateDurationInMs)(i),this.failure=aV(a,o,n),this.serverConnectionId=s,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};Xu.CommandFailedEvent=sV;Xu.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var Xdt=new Set(["hello",X3.LEGACY_HELLO_COMMAND,X3.LEGACY_HELLO_COMMAND_CAMEL_CASE]),oV=t=>Object.keys(t)[0],Zdt=t=>t.ns.split(".")[1],aV=(t,e,r)=>Xu.SENSITIVE_COMMANDS.has(t)||Xdt.has(t)&&e.speculativeAuthenticate?{}:r,j0e={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},$0e={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function uV(t){if(t instanceof rV.OpMsgRequest){let n={...t.command};return n.ops instanceof rV.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof rV.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:Zdt(t)},Object.keys(j0e).forEach(i=>{t.query[i]!=null&&(n[j0e[i]]={...t.query[i]})})),Object.keys($0e).forEach(i=>{let s=i;t[s]!=null&&(n[$0e[s]]=t[s])}),n}let e={},r={...t};return t.query&&(e={...t.query},r.query=e),t.query?e:r}function ept(t){return t&&(t.result?t.result:t)}function cV(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var Z3=b(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});kb.ServerDescription=void 0;kb.parseServerType=K0e;kb.compareTopologyVersion=V0e;var Rb=yr(),tpt=Fe(),Db=Ze(),ki=Wa(),rpt=new Set([ki.ServerType.RSPrimary,ki.ServerType.Standalone,ki.ServerType.Mongos,ki.ServerType.LoadBalancer]),npt=new Set([ki.ServerType.RSPrimary,ki.ServerType.RSSecondary,ki.ServerType.Mongos,ki.ServerType.Standalone,ki.ServerType.LoadBalancer]),dV=class{constructor(e,r,n={}){if(e==null||e==="")throw new tpt.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?Db.HostAddress.fromString(e).toString():e.toString(),this.type=K0e(r,n),this.hosts=r?.hosts?.map(i=>i.toLowerCase())??[],this.passives=r?.passives?.map(i=>i.toLowerCase())??[],this.arbiters=r?.arbiters?.map(i=>i.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,Db.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return Db.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===ki.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return npt.has(this.type)}get isWritable(){return rpt.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||V0e(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,Db.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,Db.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,Db.arrayStrictEqual)(this.hosts,e.hosts)&&ipt(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};kb.ServerDescription=dV;function K0e(t,e){return e?.loadBalanced?ki.ServerType.LoadBalancer:!t||!t.ok?ki.ServerType.Unknown:t.isreplicaset?ki.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?ki.ServerType.Mongos:t.setName?t.hidden?ki.ServerType.RSOther:t.isWritablePrimary?ki.ServerType.RSPrimary:t.secondary?ki.ServerType.RSSecondary:t.arbiterOnly?ki.ServerType.RSArbiter:ki.ServerType.RSOther:ki.ServerType.Standalone}function ipt(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(i=>e[i]===t[i])}function V0e(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?Rb.Long.fromBigInt(t.counter):Rb.Long.isLong(t.counter)?t.counter:Rb.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?Rb.Long.fromBigInt(e.counter):Rb.Long.isLong(e.counter)?e.counter:Rb.Long.fromNumber(e.counter);return r.compare(n)}});var G0e=b(lT=>{"use strict";Object.defineProperty(lT,"__esModule",{value:!0});lT.StreamDescription=void 0;var spt=yr(),opt=Wa(),apt=Z3(),upt=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],pV=class{constructor(e,r){this.hello=null,this.address=e,this.type=opt.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,apt.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of upt)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return spt.Long.isLong(e)?e.toBigInt():BigInt(e)}};lT.StreamDescription=pV});var H0e=b(fV=>{"use strict";Object.defineProperty(fV,"__esModule",{value:!0});fV.onData=cpt;var ev=Ze();function cpt(t,{timeoutContext:e,signal:r}){r?.throwIfAborted();let n=new ev.List,i=new ev.List,s=null,o=!1,a={next(){let f=n.shift();if(f!=null)return Promise.resolve({value:f,done:!1});if(s!=null){let v=Promise.reject(s);return s=null,v}if(o)return p();let{promise:h,resolve:y,reject:E}=(0,ev.promiseWithResolvers)();return i.push({resolve:y,reject:E}),h},return(){return p()},throw(f){return d(f),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await p()}};t.on("data",l),t.on("error",d);let u=(0,ev.addAbortListener)(r,function(){d(this.reason)}),c=e?.timeoutForSocketRead;return c?.throwIfExpired(),c?.then(void 0,d),a;function l(f){let h=i.shift();h!=null?h.resolve({value:f,done:!1}):n.push(f)}function d(f){let h=i.shift();h!=null?h.reject(f):s=f,p()}function p(){t.off("data",l),t.off("error",d),u?.[ev.kDispose](),o=!0,c?.clear();let f={value:void 0,done:o};for(let h of i)h.resolve(f);return Promise.resolve(f)}}});var yV=b(fT=>{"use strict";Object.defineProperty(fT,"__esModule",{value:!0});fT.TopologyDescription=void 0;var lpt=yr(),pT=A1(),dT=Fe(),hV=Ze(),pr=Wa(),J1=Z3(),dpt=pT.MIN_SUPPORTED_SERVER_VERSION,ppt=pT.MAX_SUPPORTED_SERVER_VERSION,z0e=pT.MIN_SUPPORTED_WIRE_VERSION,W0e=pT.MAX_SUPPORTED_WIRE_VERSION,fpt=new Set([pr.ServerType.Mongos,pr.ServerType.Unknown]),J0e=new Set([pr.ServerType.Mongos,pr.ServerType.Standalone]),Y0e=new Set([pr.ServerType.RSSecondary,pr.ServerType.RSArbiter,pr.ServerType.RSOther]),mV=class t{constructor(e,r=null,n=null,i=null,s=null,o=null,a=null){a=a??{},this.type=e??pr.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=a.heartbeatFrequencyMS??0,this.localThresholdMS=a.localThresholdMS??15,this.setName=n??null,this.maxElectionId=s??null,this.maxSetVersion=i??null,this.commonWireVersion=o??0;for(let u of this.servers.values())if(!(u.type===pr.ServerType.Unknown||u.type===pr.ServerType.LoadBalancer)&&(u.minWireVersion>W0e&&(this.compatible=!1,this.compatibilityError=`Server at ${u.address} requires wire version ${u.minWireVersion}, but this version of the driver only supports up to ${W0e} (MongoDB ${ppt})`),u.maxWireVersion<z0e)){this.compatible=!1,this.compatibilityError=`Server at ${u.address} reports wire version ${u.maxWireVersion}, but this version of the driver requires at least ${z0e} (MongoDB ${dpt}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,u]of this.servers)if(u.isReadable){if(u.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=u.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,u.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),i=new Set(this.servers.keys()),s=new Set(n),o=new Set;for(let u of i)s.delete(u),n.has(u)||o.add(u);if(s.size===0&&o.size===0)return this;let a=new Map(this.servers);for(let u of o)a.delete(u);if(s.size>0){if(r===0)for(let u of s)a.set(u,new J1.ServerDescription(u));else if(a.size<r){let u=(0,hV.shuffle)(s,r-a.size);for(let c of u)a.set(c,new J1.ServerDescription(c))}}return new t(this.type,a,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:i,maxSetVersion:s,maxElectionId:o,commonWireVersion:a}=this,u=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(a==null?a=e.maxWireVersion:a=Math.min(a,e.maxWireVersion)),typeof e.setName=="string"&&typeof i=="string"&&e.setName!==i&&(n===pr.TopologyType.Single?e=new J1.ServerDescription(r):c.delete(r)),c.set(r,e),n===pr.TopologyType.Single)return new t(pr.TopologyType.Single,c,i,s,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===pr.TopologyType.Unknown&&(u===pr.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=hpt(u)),n===pr.TopologyType.Sharded&&(fpt.has(u)||c.delete(r)),n===pr.TopologyType.ReplicaSetNoPrimary){if(J0e.has(u)&&c.delete(r),u===pr.ServerType.RSPrimary){let l=Q0e(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else if(Y0e.has(u)){let l=ypt(c,e,i);n=l[0],i=l[1]}}if(n===pr.TopologyType.ReplicaSetWithPrimary)if(J0e.has(u))c.delete(r),n=A0(c);else if(u===pr.ServerType.RSPrimary){let l=Q0e(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else Y0e.has(u)?n=mpt(c,e,i):n=A0(c);return new t(n,c,i,s,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==pr.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return lpt.EJSON.serialize(this)}};fT.TopologyDescription=mV;function hpt(t){switch(t){case pr.ServerType.Standalone:return pr.TopologyType.Single;case pr.ServerType.Mongos:return pr.TopologyType.Sharded;case pr.ServerType.RSPrimary:return pr.TopologyType.ReplicaSetWithPrimary;case pr.ServerType.RSOther:case pr.ServerType.RSSecondary:return pr.TopologyType.ReplicaSetNoPrimary;default:return pr.TopologyType.Unknown}}function Q0e(t,e,r=null,n=null,i=null){let s=(u,c,l)=>`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${u.setVersion}, server electionId: ${u.electionId}, topology setVersion: ${c}, topology electionId: ${l}`;if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[A0(t),r,n,i];if(e.maxWireVersion>=17){let u=(0,hV.compareObjectId)(i,e.electionId),c=u===0,l=u===-1,d=(n??-1)<=(e.setVersion??-1);if(l||c&&d)i=e.electionId,n=e.setVersion;else return t.set(e.address,new J1.ServerDescription(e.address,void 0,{error:new dT.MongoStalePrimaryError(s(e,n,i))})),[A0(t),r,n,i]}else{let u=e.electionId?e.electionId:null;if(e.setVersion&&u){if(n&&i&&(n>e.setVersion||(0,hV.compareObjectId)(i,u)>0))return t.set(e.address,new J1.ServerDescription(e.address,void 0,{error:new dT.MongoStalePrimaryError(s(e,n,i))})),[A0(t),r,n,i];i=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[u,c]of t)if(c.type===pr.ServerType.RSPrimary&&c.address!==e.address){t.set(u,new J1.ServerDescription(c.address,void 0,{error:new dT.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}e.allHosts.forEach(u=>{t.has(u)||t.set(u,new J1.ServerDescription(u))});let o=Array.from(t.keys()),a=e.allHosts;return o.filter(u=>a.indexOf(u)===-1).forEach(u=>{t.delete(u)}),[A0(t),r,n,i]}function mpt(t,e,r=null){if(r==null)throw new dT.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),A0(t)}function ypt(t,e,r=null){let n=pr.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(i=>{t.has(i)||t.set(i,new J1.ServerDescription(i))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function A0(t){for(let e of t.values())if(e.type===pr.ServerType.RSPrimary)return pr.TopologyType.ReplicaSetWithPrimary;return pr.TopologyType.ReplicaSetNoPrimary}});var Z0e=b(hT=>{"use strict";Object.defineProperty(hT,"__esModule",{value:!0});hT.getReadPreference=_pt;hT.isSharded=Ept;var gpt=Fe(),gV=ps(),X0e=Wa(),bpt=yV();function _pt(t){let e=t?.readPreference??gV.ReadPreference.primary;if(typeof e=="string"&&(e=gV.ReadPreference.fromString(e)),!(e instanceof gV.ReadPreference))throw new gpt.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function Ept(t){return t==null?!1:t.description&&t.description.type===X0e.ServerType.Mongos?!0:t.description&&t.description instanceof bpt.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===X0e.ServerType.Mongos):!1}});var gT=b(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.CryptoConnection=qp.SizedMessageTransform=qp.Connection=void 0;qp.hasSessionSupport=Ipt;var vpt=require("stream"),nye=require("timers"),Spt=yr(),Y1=gi(),$n=Fe(),eye=I1(),wpt=Qa(),Apt=ps(),Cpt=Wa(),tye=xb(),rye=Vi(),Za=Ze(),bV=lV(),mT=$3(),Tpt=G0e(),Opt=U3(),xpt=H0e(),tv=kr(),_V=Z0e();function Ipt(t){return t.description.logicalSessionTimeoutMinutes!=null}function Rpt(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?Za.HostAddress.fromHostPort(r,n).toString():(0,Za.uuidV4)().toString("hex")}var ml=class t extends wpt.TypedEventEmitter{constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",Za.noop),this.socket=e,this.id=r.id,this.address=Rpt(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new Tpt.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,Za.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new yT({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,Za.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,Za.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(eye.MongoLoggableComponent.COMMAND,eye.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,Za.now)()}onSocketError(e){this.onError(new $n.MongoNetworkError(e.message,{cause:e}))}onTransformError(e){this.onError(e)}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new $n.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,nye.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new $n.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new $n.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,Za.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let i={...r},s=(0,_V.getReadPreference)(n),o=n?.session,a=this.clusterTime;if(this.serverApi){let{version:l,strict:d,deprecationErrors:p}=this.serverApi;i.apiVersion=l,d!=null&&(i.apiStrict=d),p!=null&&(i.apiDeprecationErrors=p)}if(this.hasSessionSupport&&o){o.clusterTime&&a&&o.clusterTime.clusterTime.greaterThan(a.clusterTime)&&(a=o.clusterTime);let l=(0,tye.applySession)(o,i,n);if(l)throw l}else if(o?.explicit)throw new $n.MongoCompatibilityError("Current topology does not support sessions");a&&(i.$clusterTime=a),this.description.type!==Cpt.ServerType.Standalone&&(!(0,_V.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&s?.mode==="primary"?i.$readPreference=Apt.ReadPreference.primaryPreferred.toJSON():(0,_V.isSharded)(this)&&!this.supportsOpMsg&&s?.mode!=="primary"?i={$query:i,$readPreference:s.toJSON()}:s?.mode!=="primary"&&(i.$readPreference=s.toJSON()));let u={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:s.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(i,n),this.supportsOpMsg?new mT.OpMsgRequest(e,i,u):new mT.OpQueryRequest(e,i,u)}async*sendWire(e,r,n){this.throwIfAborted();let i=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(i);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext,signal:r.signal}),r.noResponse||e.moreToCome){yield tv.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new $n.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let s of this.readMany(r)){this.socket.setTimeout(0);let o=s.parse();yield(n??tv.MongoDBResponse).make(o),this.throwIfAborted(),this.socket.setTimeout(i)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,i){n?.signal?.throwIfAborted();let s=this.prepareCommand(e.db,r,n),o=0;this.shouldEmitAndLogCommand&&(o=(0,Za.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,s.databaseName,this.established,new bV.CommandStartedEvent(this,s,this.description.serverConnectionId)));let a=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},u,c;try{this.throwIfAborted();for await(u of this.sendWire(s,n,i)){if(c=void 0,n.session!=null&&(0,tye.updateSessionFromResponse)(n.session,u),u.$clusterTime&&(this.clusterTime=u.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,u.$clusterTime)),u.ok===0)throw n.timeoutContext?.csotEnabled()&&u.isMaxTimeExpiredError?new $n.MongoOperationTimeoutError("Server reported a timeout error",{cause:new $n.MongoServerError(c??=u.toObject(a))}):new $n.MongoServerError(c??=u.toObject(a));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,s.databaseName,this.established,new bV.CommandSucceededEvent(this,s,n.noResponse?void 0:s.moreToCome?{ok:1}:c??=u.toObject(a),o,this.description.serverConnectionId)),i==null?yield c??=u.toObject(a):yield u,this.throwIfAborted()}}catch(l){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,s.databaseName,this.established,new bV.CommandFailedEvent(this,s,l,o,this.description.serverConnectionId)),l}}async command(e,r,n={},i){this.throwIfAborted(),n.signal?.throwIfAborted();for await(let s of this.sendCommand(e,r,n,i)){if(n.timeoutContext?.csotEnabled()){if(tv.MongoDBResponse.is(s)){if(s.isMaxTimeExpiredError)throw new $n.MongoOperationTimeoutError("Server reported a timeout error",{cause:new $n.MongoServerError(s.toObject())})}else if(Array.isArray(s?.writeErrors)&&s.writeErrors.some(o=>o?.code===$n.MONGODB_ERROR_CODES.MaxTimeMSExpired)||s?.writeConcernError?.code===$n.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new $n.MongoOperationTimeoutError("Server reported a timeout error",{cause:new $n.MongoServerError(s)})}return s}throw new $n.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,i){(async()=>{this.throwIfAborted();for await(let o of this.sendCommand(e,r,n))i(void 0,o),this.throwIfAborted();throw new $n.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,i)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!mT.OpCompressedRequest.canCompress(e)?e:new mT.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),i=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new $n.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");if(this.socket.write(i))return;let s=(0,Za.once)(this.socket,"drain",r),o=r?.timeoutContext?.timeoutForSocketWrite,a=o?Promise.race([s,o]):s;try{return await a}catch(u){if(rye.TimeoutError.is(u)){let c=new $n.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(c),c}else u===r.signal?.reason&&this.onError(u);throw u}finally{o?.clear()}}async*readMany(e){try{this.dataEvents=(0,xpt.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,Opt.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){if(rye.TimeoutError.is(r)){let n=new $n.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(n),n}else r===e.signal?.reason&&this.onError(r);throw r}finally{this.dataEvents=null,this.messageStream.pause()}}};qp.Connection=ml;ml.COMMAND_STARTED=Y1.COMMAND_STARTED;ml.COMMAND_SUCCEEDED=Y1.COMMAND_SUCCEEDED;ml.COMMAND_FAILED=Y1.COMMAND_FAILED;ml.CLUSTER_TIME_RECEIVED=Y1.CLUSTER_TIME_RECEIVED;ml.CLOSE=Y1.CLOSE;ml.PINNED=Y1.PINNED;ml.UNPINNED=Y1.UNPINNED;var yT=class extends vpt.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new Za.BufferPool,this.connection=e}_transform(e,r,n){for(this.connection.delayedTimeoutId!=null&&((0,nye.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);this.bufferPool.length;){let i=this.bufferPool.getInt32();if(i==null)break;if(i<0)return n(new $n.MongoParseError(`Message size cannot be negative: ${i}`));if(i>this.bufferPool.length)break;let s=this.bufferPool.read(i);if(!this.push(s))return n(new $n.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}n()}};qp.SizedMessageTransform=yT;var EV=class extends ml{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,i){let{autoEncrypter:s}=this;if(!s)throw new $n.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});if((0,Za.maxWireVersion)(this)===0)return await super.command(e,r,n,i);let a=r.find||r.findAndModify?r.sort:null,u=r.createIndexes?r.indexes.map(f=>f.key):null,c=await s.encrypt(e.toString(),r,n);if(a!=null&&(r.find||r.findAndModify)&&(c.sort=a),u!=null&&r.createIndexes)for(let[f,h]of u.entries())c.indexes[f].key=h;let l=await super.command(e,c,n,i??tv.MongoDBResponse),d=await s.decrypt(l.toBytes(),n),p=i?.make(d)??(0,Spt.deserialize)(d,n);return s[Y1.kDecorateResult]&&(i==null?(0,Za.decorateDecryptionResult)(p,l.toObject(),!0):p instanceof tv.CursorResponse&&(p.encryptedResponse=l)),p}};qp.CryptoConnection=EV});var wV=b(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.LEGAL_TCP_SOCKET_OPTIONS=eu.LEGAL_TLS_SOCKET_OPTIONS=void 0;eu.connect=Ppt;eu.makeConnection=aye;eu.performInitialHandshake=uye;eu.prepareHandshakeDocument=cye;eu.makeSocket=_T;var sye=require("net"),Dpt=require("tls"),oye=gi(),kpt=ll(),Un=Fe(),vV=Ze(),Mpt=B1(),bT=bd(),iye=gT(),Mb=A1();async function Ppt(t){let e=null;try{let r=await _T(t);return e=aye(t,r),await uye(e,t),e}catch(r){throw e?.destroy(),r}}function aye(t,e){let r=t.connectionType??iye.Connection;return t.autoEncrypter&&(r=iye.CryptoConnection),new r(e,t)}function Npt(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),i=!Number.isNaN(r)&&r>=Mb.MIN_SUPPORTED_WIRE_VERSION,s=!Number.isNaN(n)&&n<=Mb.MAX_SUPPORTED_WIRE_VERSION;if(i){if(s)return null;let a=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${Mb.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${Mb.MAX_SUPPORTED_SERVER_VERSION})`;return new Un.MongoCompatibilityError(a)}let o=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${Mb.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${Mb.MIN_SUPPORTED_SERVER_VERSION})`;return new Un.MongoCompatibilityError(o)}async function uye(t,e){let r=e.credentials;if(r&&r.mechanism!==bT.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new Un.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new Mpt.AuthContext(t,r,e);t.authContext=n;let i=await cye(n),s={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(s.socketTimeoutMS=e.connectTimeoutMS);let o=new Date().getTime(),a=await c(i,s);"isWritablePrimary"in a||(a.isWritablePrimary=a[oye.LEGACY_HELLO_COMMAND]),a.helloOk&&(t.helloOk=!0);let u=Npt(a,e);if(u)throw u;if(e.loadBalanced&&!a.serviceId)throw new Un.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=a,t.lastHelloMS=new Date().getTime()-o,!a.arbiterOnly&&r){n.response=a;let l=r.resolveAuthMechanism(a),d=e.authProviders.getOrCreateProvider(l.mechanism,l.mechanismProperties);if(!d)throw new Un.MongoInvalidArgumentError(`No AuthProvider for ${l.mechanism} defined.`);try{await d.auth(n)}catch(p){throw p instanceof Un.MongoError&&(p.addErrorLabel(Un.MongoErrorLabel.HandshakeError),(0,Un.needsRetryableWriteLabel)(p,a.maxWireVersion,t.description.type)&&p.addErrorLabel(Un.MongoErrorLabel.RetryableWriteError)),p}}t.established=!0;async function c(l,d){try{return await t.command((0,vV.ns)("admin.$cmd"),l,d)}catch(p){throw p instanceof Un.MongoError&&p.addErrorLabel(Un.MongoErrorLabel.HandshakeError),p}}}async function cye(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,i=await e.extendedMetadata,s={[n?.version||e.loadBalanced===!0?"hello":oye.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:i,compression:r};e.loadBalanced===!0&&(s.loadBalanced=!0);let o=t.credentials;if(o){if(o.mechanism===bT.AuthMechanism.MONGODB_DEFAULT&&o.username){s.saslSupportedMechs=`${o.source}.${o.username}`;let u=t.options.authProviders.getOrCreateProvider(bT.AuthMechanism.MONGODB_SCRAM_SHA256,o.mechanismProperties);if(!u)throw new Un.MongoInvalidArgumentError(`No AuthProvider for ${bT.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await u.prepare(s,t)}let a=t.options.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!a)throw new Un.MongoInvalidArgumentError(`No AuthProvider for ${o.mechanism} defined.`);return await a.prepare(s,t)}return s}eu.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];eu.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function SV(t){let e=t.hostAddress;if(!e)throw new Un.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of eu.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(r.keepAliveInitialDelay??=12e4,r.keepAlive=!0,r.noDelay=t.noDelay??!0,typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new Un.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function Fpt(t){let e=SV(t);for(let r of eu.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!sye.isIP(e.host)&&(e.servername=e.host),e}async function _T(t){let e=t.tls??!1,r=t.connectTimeoutMS??3e4,n=t.existingSocket,i;if(t.proxyHost!=null)return await qpt({...t,connectTimeoutMS:r});if(e){let c=Dpt.connect(Fpt(t));typeof c.disableRenegotiation=="function"&&c.disableRenegotiation(),i=c}else n?i=n:i=sye.createConnection(SV(t));i.setTimeout(r);let s=null,{promise:o,resolve:a,reject:u}=(0,vV.promiseWithResolvers)();if(n)a(i);else{let c=performance.now(),l=e?"secureConnect":"connect";i.once(l,()=>a(i)).once("error",d=>u(new Un.MongoNetworkError(Un.MongoError.buildErrorMessage(d),{cause:d}))).once("timeout",()=>{u(new Un.MongoNetworkTimeoutError(`Socket '${l}' timed out after ${performance.now()-c|0}ms (connectTimeoutMS: ${r})`))}).once("close",()=>u(new Un.MongoNetworkError(`Socket closed after ${performance.now()-c|0} during connection establishment`))),t.cancellationToken!=null&&(s=()=>u(new Un.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-c|0}`)),t.cancellationToken.once("cancel",s))}try{return i=await o,i}catch(c){throw i.destroy(),c}finally{i.setTimeout(0),s!=null&&t.cancellationToken?.removeListener("cancel",s)}}var rv=null;function Bpt(){if(rv==null){let t=(0,kpt.getSocks)();if("kModuleError"in t)throw t.kModuleError;rv=t}return rv}async function qpt(t){let e=vV.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await _T({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=SV(t);if(typeof n.host!="string"||typeof n.port!="number")throw new Un.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");rv??=Bpt();let i;try{i=(await rv.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(s){throw new Un.MongoNetworkError(Un.MongoError.buildErrorMessage(s),{cause:s})}return await _T({...t,existingSocket:i,proxyHost:void 0})}});var ET=b(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.ServerHeartbeatFailedEvent=Mi.ServerHeartbeatSucceededEvent=Mi.ServerHeartbeatStartedEvent=Mi.TopologyClosedEvent=Mi.TopologyOpeningEvent=Mi.TopologyDescriptionChangedEvent=Mi.ServerClosedEvent=Mi.ServerOpeningEvent=Mi.ServerDescriptionChangedEvent=void 0;var Lp=gi(),AV=class{constructor(e,r,n,i){this.name=Lp.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=i}};Mi.ServerDescriptionChangedEvent=AV;var CV=class{constructor(e,r){this.name=Lp.SERVER_OPENING,this.topologyId=e,this.address=r}};Mi.ServerOpeningEvent=CV;var TV=class{constructor(e,r){this.name=Lp.SERVER_CLOSED,this.topologyId=e,this.address=r}};Mi.ServerClosedEvent=TV;var OV=class{constructor(e,r,n){this.name=Lp.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};Mi.TopologyDescriptionChangedEvent=OV;var xV=class{constructor(e){this.name=Lp.TOPOLOGY_OPENING,this.topologyId=e}};Mi.TopologyOpeningEvent=xV;var IV=class{constructor(e){this.name=Lp.TOPOLOGY_CLOSED,this.topologyId=e}};Mi.TopologyClosedEvent=IV;var RV=class{constructor(e,r){this.name=Lp.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};Mi.ServerHeartbeatStartedEvent=RV;var DV=class{constructor(e,r,n,i){this.name=Lp.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=i}};Mi.ServerHeartbeatSucceededEvent=DV;var kV=class{constructor(e,r,n,i){this.name=Lp.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=i}};Mi.ServerHeartbeatFailedEvent=kV});var GV=b(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.ConnectionPoolClearedEvent=pn.ConnectionCheckedInEvent=pn.ConnectionCheckedOutEvent=pn.ConnectionCheckOutFailedEvent=pn.ConnectionCheckOutStartedEvent=pn.ConnectionClosedEvent=pn.ConnectionReadyEvent=pn.ConnectionCreatedEvent=pn.ConnectionPoolClosedEvent=pn.ConnectionPoolReadyEvent=pn.ConnectionPoolCreatedEvent=pn.ConnectionPoolMonitoringEvent=void 0;var yl=gi(),VV=Ze(),ma=class{constructor(e){this.time=new Date,this.address=e.address}};pn.ConnectionPoolMonitoringEvent=ma;var MV=class extends ma{constructor(e){super(e),this.name=yl.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}}};pn.ConnectionPoolCreatedEvent=MV;var PV=class extends ma{constructor(e){super(e),this.name=yl.CONNECTION_POOL_READY}};pn.ConnectionPoolReadyEvent=PV;var NV=class extends ma{constructor(e){super(e),this.name=yl.CONNECTION_POOL_CLOSED}};pn.ConnectionPoolClosedEvent=NV;var FV=class extends ma{constructor(e,r){super(e),this.name=yl.CONNECTION_CREATED,this.connectionId=r.id}};pn.ConnectionCreatedEvent=FV;var BV=class extends ma{constructor(e,r,n){super(e),this.name=yl.CONNECTION_READY,this.durationMS=(0,VV.now)()-n,this.connectionId=r.id}};pn.ConnectionReadyEvent=BV;var qV=class extends ma{constructor(e,r,n,i){super(e),this.name=yl.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=i??null}};pn.ConnectionClosedEvent=qV;var LV=class extends ma{constructor(e){super(e),this.name=yl.CONNECTION_CHECK_OUT_STARTED}};pn.ConnectionCheckOutStartedEvent=LV;var jV=class extends ma{constructor(e,r,n,i){super(e),this.name=yl.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,VV.now)()-n,this.reason=r,this.error=i}};pn.ConnectionCheckOutFailedEvent=jV;var $V=class extends ma{constructor(e,r,n){super(e),this.name=yl.CONNECTION_CHECKED_OUT,this.durationMS=(0,VV.now)()-n,this.connectionId=r.id}};pn.ConnectionCheckedOutEvent=$V;var UV=class extends ma{constructor(e,r){super(e),this.name=yl.CONNECTION_CHECKED_IN,this.connectionId=r.id}};pn.ConnectionCheckedInEvent=UV;var KV=class extends ma{constructor(e,r={}){super(e),this.name=yl.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};pn.ConnectionPoolClearedEvent=KV});var JV=b(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.WaitQueueTimeoutError=vd.PoolClearedOnNetworkError=vd.PoolClearedError=vd.PoolClosedError=void 0;var vT=Fe(),HV=class extends vT.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};vd.PoolClosedError=HV;var ST=class extends vT.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(vT.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}};vd.PoolClearedError=ST;var zV=class extends ST{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};vd.PoolClearedOnNetworkError=zV;var WV=class extends vT.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};vd.WaitQueueTimeoutError=WV});var dye=b(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.ConnectionPool=js.PoolState=void 0;var Pb=require("timers"),Zu=gi(),gl=Fe(),lye=Qa(),Lpt=Vi(),jp=Ze(),jpt=wV(),wT=gT(),Ls=GV(),Nb=JV(),$pt=JK();js.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var ya=class t extends lye.TypedEventEmitter{constructor(e,r){if(super(),this.on("error",jp.noop),this.options=Object.freeze({connectionType:wT.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new gl.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=js.PoolState.paused,this.server=e,this.connections=new jp.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,jp.makeCounter)(1),this.cancellationToken=new lye.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new jp.List,this.metrics=new $pt.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new Ls.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===js.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){this.poolState===js.PoolState.paused&&(this.poolState=js.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new Ls.ConnectionPoolReadyEvent(this)),(0,Pb.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize())}async checkOut(e){let r=(0,jp.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new Ls.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:i,reject:s}=(0,jp.promiseWithResolvers)(),o=e.timeoutContext.connectionCheckoutTimeout,a={resolve:i,reject:s,cancelled:!1,checkoutTime:r},u=(0,jp.addAbortListener)(e.signal,function(){a.cancelled=!0,s(this.reason)});this.waitQueue.push(a),process.nextTick(()=>this.processWaitQueue());try{return o?.throwIfExpired(),await(o?Promise.race([n,o]):n)}catch(c){if(Lpt.TimeoutError.is(c)){o?.clear(),a.cancelled=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Ls.ConnectionCheckOutFailedEvent(this,"timeout",a.checkoutTime));let l=new Nb.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new gl.MongoOperationTimeoutError("Timed out during connection checkout",{cause:l}):l}throw c}finally{u?.[jp.kDispose](),o?.clear()}}checkIn(e){if(!this.checkedOut.has(e))return;let r=this.closed,n=this.connectionIsStale(e),i=!!(r||n||e.closed);if(i||(e.markAvailable(),this.connections.unshift(e)),this.checkedOut.delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new Ls.ConnectionCheckedInEvent(this,e)),i){let s=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,s)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:s}=e;if(!s)throw new gl.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let o=s.toHexString(),a=this.serviceGenerations.get(o);if(a==null)throw new gl.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(o,a+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Ls.ConnectionPoolClearedEvent(this,{serviceId:s}));return}let r=e.interruptInUseConnections??!1,n=this.generation;this.generation+=1;let i=this.poolState===js.PoolState.paused;this.poolState=js.PoolState.paused,this.clearMinPoolSizeTimer(),i||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Ls.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this.checkedOut)r.generation<=e&&r.onError(new Nb.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let e of this.checkedOut)e.onError(new gl.MongoClientClosedError)}close(){if(!this.closed){this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return=="function"&&this.connectionCounter.return(void 0),this.poolState=js.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this.connections)this.emitAndLog(t.CONNECTION_CLOSED,new Ls.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this.connections.clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new Ls.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new gl.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new gl.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let i=n.resolveAuthMechanism(e.hello),s=this.server.topology.client.s.authProviders.getOrCreateProvider(i.mechanism,i.mechanismProperties);if(!s)throw new gl.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await s.reauth(r)}clearMinPoolSizeTimer(){let e=this.minPoolSizeTimer;e&&(0,Pb.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new Ls.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),i=this.serviceGenerations.get(n);return e.generation!==i}return e.generation!==this.generation}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let i=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,i),!0}createConnection(e){let r={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,extendedMetadata:this.server.topology.client.options.extendedMetadata};this.pending++;let n=(0,jp.now)();this.emitAndLog(t.CONNECTION_CREATED,new Ls.ConnectionCreatedEvent(this,{id:r.id})),(0,jpt.connect)(r).then(i=>{if(this.poolState!==js.PoolState.ready){this.pending--,i.destroy(),e(this.closed?new Nb.PoolClosedError(this):new Nb.PoolClearedError(this));return}for(let s of[...Zu.APM_EVENTS,wT.Connection.CLUSTER_TIME_RECEIVED])i.on(s,o=>this.emit(s,o));if(this.loadBalanced){i.on(wT.Connection.PINNED,o=>this.metrics.markPinned(o)),i.on(wT.Connection.UNPINNED,o=>this.metrics.markUnpinned(o));let s=i.serviceId;if(s){let o,a=s.toHexString();(o=this.serviceGenerations.get(a))?i.generation=o:(this.serviceGenerations.set(a,0),i.generation=0)}}i.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new Ls.ConnectionReadyEvent(this,i,n)),this.pending--,e(void 0,i)},i=>{this.pending--,this.server.handleError(i),this.emitAndLog(t.CONNECTION_CLOSED,new Ls.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",i)),(i instanceof gl.MongoNetworkError||i instanceof gl.MongoServerError)&&(i.connectionGeneration=r.generation),e(i??new gl.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this.poolState===js.PoolState.ready&&(this.connections.prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this.connections.push(n),process.nextTick(()=>this.processWaitQueue())),this.poolState===js.PoolState.ready&&((0,Pb.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,Pb.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,Pb.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,Pb.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this.processingWaitQueue)return;for(this.processingWaitQueue=!0;this.waitQueueSize;){let n=this.waitQueue.first();if(!n){this.waitQueue.shift();continue}if(n.cancelled){this.waitQueue.shift();continue}if(this.poolState!==js.PoolState.ready){let s=this.closed?"poolClosed":"connectionError",o=this.closed?new Nb.PoolClosedError(this):new Nb.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Ls.ConnectionCheckOutFailedEvent(this,s,n.checkoutTime,o)),this.waitQueue.shift(),n.reject(o);continue}if(!this.availableConnectionCount)break;let i=this.connections.shift();if(!i)break;this.destroyConnectionIfPerished(i)||(this.checkedOut.add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Ls.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),this.waitQueue.shift(),n.resolve(i))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this.waitQueue.shift();!n||n.cancelled||this.createConnection((i,s)=>{n.cancelled?!i&&s&&this.connections.push(s):i?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Ls.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,i)),n.reject(i)):s&&(this.checkedOut.add(s),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Ls.ConnectionCheckedOutEvent(this,s,n.checkoutTime)),n.resolve(s)),process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}};js.ConnectionPool=ya;ya.CONNECTION_POOL_CREATED=Zu.CONNECTION_POOL_CREATED;ya.CONNECTION_POOL_CLOSED=Zu.CONNECTION_POOL_CLOSED;ya.CONNECTION_POOL_CLEARED=Zu.CONNECTION_POOL_CLEARED;ya.CONNECTION_POOL_READY=Zu.CONNECTION_POOL_READY;ya.CONNECTION_CREATED=Zu.CONNECTION_CREATED;ya.CONNECTION_READY=Zu.CONNECTION_READY;ya.CONNECTION_CLOSED=Zu.CONNECTION_CLOSED;ya.CONNECTION_CHECK_OUT_STARTED=Zu.CONNECTION_CHECK_OUT_STARTED;ya.CONNECTION_CHECK_OUT_FAILED=Zu.CONNECTION_CHECK_OUT_FAILED;ya.CONNECTION_CHECKED_OUT=Zu.CONNECTION_CHECKED_OUT;ya.CONNECTION_CHECKED_IN=Zu.CONNECTION_CHECKED_IN});var eG=b(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0});AT.Server=void 0;var Upt=gT(),Kpt=dye(),Vpt=JV(),Sd=gi(),Pn=Fe(),Gpt=Qa(),Hpt=f3(),XV=QK(),C0=Ze(),pye=Do(),tn=Wa(),zpt=tG(),ZV=Z3(),Wpt=l3(),nv=(0,C0.makeStateMachine)({[tn.STATE_CLOSED]:[tn.STATE_CLOSED,tn.STATE_CONNECTING],[tn.STATE_CONNECTING]:[tn.STATE_CONNECTING,tn.STATE_CLOSING,tn.STATE_CONNECTED,tn.STATE_CLOSED],[tn.STATE_CONNECTED]:[tn.STATE_CONNECTED,tn.STATE_CLOSING,tn.STATE_CLOSED],[tn.STATE_CLOSING]:[tn.STATE_CLOSING,tn.STATE_CLOSED]}),bl=class t extends Gpt.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",C0.noop),this.serverApi=n.serverApi;let i={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new Kpt.ConnectionPool(this,i),this.s={description:r,options:n,state:tn.STATE_CLOSED,operationCount:0};for(let s of[...Sd.CMAP_EVENTS,...Sd.APM_EVENTS])this.pool.on(s,o=>this.emit(s,o));if(this.pool.on(Upt.Connection.CLUSTER_TIME_RECEIVED,s=>{this.clusterTime=s}),this.loadBalanced){this.monitor=null;return}this.monitor=new zpt.Monitor(this,this.s.options);for(let s of Sd.HEARTBEAT_EVENTS)this.monitor.on(s,o=>this.emit(s,o));this.monitor.on("resetServer",s=>YV(this,s)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,s=>{this.emit(t.DESCRIPTION_RECEIVED,new ZV.ServerDescription(this.description.hostAddress,s.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===tn.STATE_CONNECTING&&(nv(this,tn.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===tn.TopologyType.LoadBalanced}connect(){this.s.state===tn.STATE_CLOSED&&(nv(this,tn.STATE_CONNECTING),this.loadBalanced?(nv(this,tn.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){this.s.state!==tn.STATE_CLOSED&&(nv(this,tn.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),nv(this,tn.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r){if(this.s.state===tn.STATE_CLOSING||this.s.state===tn.STATE_CLOSED)throw new Pn.MongoServerClosedError;let n=e.session,i=n?.pinnedConnection;if(this.incrementOperationCount(),i==null)try{i=await this.pool.checkOut({timeoutContext:r,signal:e.options.signal})}catch(d){throw this.decrementOperationCount(),d instanceof Vpt.PoolClearedError||this.handleError(d),d}let s=null,o=()=>{if(this.decrementOperationCount(),n?.pinnedConnection!==i)if(s!=null){let d=()=>{this.pool.checkIn(i)};s.then(d,d)}else this.pool.checkIn(i)},a;try{a=e.buildCommand(i,n)}catch(d){throw o(),d}let u=e.buildOptions(r),c=e.ns;this.loadBalanced&&Jpt(a,n)&&!n?.pinnedConnection&&n?.pin(i),u.directConnection=this.topology.s.options.directConnection,e instanceof Hpt.AggregateOperation&&e.hasWriteStage&&(0,C0.maxWireVersion)(i)<Wpt.MIN_SECONDARY_WRITE_WIRE_VERSION&&delete u.readPreference,this.description.iscryptd&&(u.omitMaxTimeMS=!0);try{try{let d=await i.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,pye.throwIfWriteConcernError)(d),d}catch(d){throw this.decorateCommandError(i,a,u,d)}}catch(d){if(d instanceof Pn.MongoError&&d.code===Pn.MONGODB_ERROR_CODES.Reauthenticate){s=this.pool.reauthenticate(i),s.then(void 0,p=>{s=null,(0,C0.squashError)(p)}),await(0,C0.abortable)(s,u),s=null;try{let p=await i.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,pye.throwIfWriteConcernError)(p),p}catch(p){throw this.decorateCommandError(i,a,u,p)}}else throw d}finally{o()}}handleError(e,r){if(!(e instanceof Pn.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let i=e instanceof Pn.MongoNetworkError&&!(e instanceof Pn.MongoNetworkTimeoutError),s=e instanceof Pn.MongoNetworkError&&e.beforeHandshake,o=e.hasErrorLabel(Pn.MongoErrorLabel.HandshakeError);if(i||s||o)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(Pn.MongoErrorLabel.ResetPool),YV(this,e));else if((0,Pn.isSDAMUnrecoverableError)(e)&&Qpt(this,e)){let a=(0,Pn.isNodeShuttingDownError)(e);this.loadBalanced&&r&&a&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(a&&e.addErrorLabel(Pn.MongoErrorLabel.ResetPool),YV(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,i){if(typeof i!="object"||i==null||!("name"in i))throw new Pn.MongoRuntimeError("An unexpected error type: "+typeof i);if(i.name==="AbortError"&&"cause"in i&&i.cause instanceof Pn.MongoError&&(i=i.cause),!(i instanceof Pn.MongoError)||Ypt(this.pool,e))return i;let s=n?.session;return i instanceof Pn.MongoNetworkError?(s&&!s.hasEnded&&s.serverSession&&(s.serverSession.isDirty=!0),QV(s,r)&&!i.hasErrorLabel(Pn.MongoErrorLabel.TransientTransactionError)&&i.addErrorLabel(Pn.MongoErrorLabel.TransientTransactionError),(fye(this.topology)||(0,XV.isTransactionCommand)(r))&&(0,C0.supportsRetryableWrites)(this)&&!QV(s,r)&&i.addErrorLabel(Pn.MongoErrorLabel.RetryableWriteError)):(fye(this.topology)||(0,XV.isTransactionCommand)(r))&&(0,Pn.needsRetryableWriteLabel)(i,(0,C0.maxWireVersion)(this),this.description.type)&&!QV(s,r)&&i.addErrorLabel(Pn.MongoErrorLabel.RetryableWriteError),s&&s.isPinned&&i.hasErrorLabel(Pn.MongoErrorLabel.TransientTransactionError)&&s.unpin({force:!0}),this.handleError(i,e),i}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};AT.Server=bl;bl.SERVER_HEARTBEAT_STARTED=Sd.SERVER_HEARTBEAT_STARTED;bl.SERVER_HEARTBEAT_SUCCEEDED=Sd.SERVER_HEARTBEAT_SUCCEEDED;bl.SERVER_HEARTBEAT_FAILED=Sd.SERVER_HEARTBEAT_FAILED;bl.CONNECT=Sd.CONNECT;bl.DESCRIPTION_RECEIVED=Sd.DESCRIPTION_RECEIVED;bl.CLOSED=Sd.CLOSED;bl.ENDED=Sd.ENDED;function YV(t,e){t.loadBalanced||(e instanceof Pn.MongoNetworkError&&!(e instanceof Pn.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit(bl.DESCRIPTION_RECEIVED,new ZV.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function Jpt(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function Ypt(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function Qpt(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,ZV.compareTopologyVersion)(n,r)<0}function QV(t,e){return t&&t.inTransaction()&&!(0,XV.isTransactionCommand)(e)}function fye(t){return t.s.options.retryWrites!==!1}});var tG=b(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.RTTSampler=ga.MonitorInterval=ga.RTTPinger=ga.Monitor=ga.ServerMonitoringMode=void 0;var Q1=require("timers"),hye=yr(),CT=wV(),Xpt=JU(),rG=gi(),Fb=Fe(),Zpt=I1(),mye=Qa(),$s=Ze(),Us=Wa(),iv=ET(),sv=eG(),Bb="idle",T0="monitoring",qb=(0,$s.makeStateMachine)({[Us.STATE_CLOSING]:[Us.STATE_CLOSING,Bb,Us.STATE_CLOSED],[Us.STATE_CLOSED]:[Us.STATE_CLOSED,T0],[Bb]:[Bb,T0,Us.STATE_CLOSING],[T0]:[T0,Bb,Us.STATE_CLOSING]}),eft=new Set([Us.STATE_CLOSING,Us.STATE_CLOSED,T0]);function ov(t){return t.s.state===Us.STATE_CLOSED||t.s.state===Us.STATE_CLOSING}ga.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var nG=class extends mye.TypedEventEmitter{constructor(e,r){super(),this.component=Zpt.MongoLoggableComponent.TOPOLOGY,this.on("error",$s.noop),this.server=e,this.connection=null,this.cancellationToken=new mye.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:Us.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,Xpt.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new OT(10);let n=this.cancellationToken,i={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete i.credentials,i.autoEncrypter&&delete i.autoEncrypter,this.connectOptions=Object.freeze(i)}connect(){if(this.s.state!==Us.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this.monitorId=new av(gye(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){eft.has(this.s.state)||this.monitorId?.wake()}reset(){let e=this.server.description.topologyVersion;if(ov(this)||e==null)return;qb(this,Us.STATE_CLOSING),yye(this),qb(this,Bb);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this.monitorId=new av(gye(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){ov(this)||(qb(this,Us.STATE_CLOSING),yye(this),this.emit("close"),qb(this,Us.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};ga.Monitor=nG;function yye(t){t.monitorId?.stop(),t.monitorId=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t.cancellationToken.emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function iG(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===ga.ServerMonitoringMode.poll?!1:r===ga.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function tft(t,e){let r,n,i=t.server.description.topologyVersion,s=iG(t,i);t.emitAndLogHeartbeat(sv.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new iv.ServerHeartbeatStartedEvent(t.address,s));function o(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat(sv.Server.SERVER_HEARTBEAT_FAILED,t.server.topology.s.id,void 0,new iv.ServerHeartbeatFailedEvent(t.address,(0,$s.calculateDurationInMs)(r),c,n));let l=c instanceof Fb.MongoError?c:new Fb.MongoError(Fb.MongoError.buildErrorMessage(c),{cause:c});l.addErrorLabel(Fb.MongoErrorLabel.ResetPool),l instanceof Fb.MongoNetworkTimeoutError&&l.addErrorLabel(Fb.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",l),e(c)}function a(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[rG.LEGACY_HELLO_COMMAND]);let l=s&&t.rttPinger?t.rttPinger.latestRtt??(0,$s.calculateDurationInMs)(r):(0,$s.calculateDurationInMs)(r);t.addRttSample(l),t.emitAndLogHeartbeat(sv.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.connectionId,new iv.ServerHeartbeatSucceededEvent(t.address,l,c,s)),s?(t.emitAndLogHeartbeat(sv.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new iv.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,$s.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:u}=t;if(u&&!u.closed){let{serverApi:c,helloOk:l}=u,d=t.options.connectTimeoutMS,p=t.options.heartbeatFrequencyMS,f={[c?.version||l?"hello":rG.LEGACY_HELLO_COMMAND]:1,...s&&i?{maxAwaitTimeMS:p,topologyVersion:rft(i)}:{}},h=s?{socketTimeoutMS:d?d+p:0,exhaustAllowed:!0}:{socketTimeoutMS:d};if(s&&t.rttPinger==null&&(t.rttPinger=new TT(t)),r=(0,$s.now)(),s)return n=!0,u.exhaustCommand((0,$s.ns)("admin.$cmd"),f,h,(y,E)=>y?o(y):a(E));n=!1,u.command((0,$s.ns)("admin.$cmd"),f,h).then(a,o);return}(async()=>{let c=await(0,CT.makeSocket)(t.connectOptions),l=(0,CT.makeConnection)(t.connectOptions,c);r=(0,$s.now)();try{return await(0,CT.performInitialHandshake)(l,t.connectOptions),l}catch(d){throw l.destroy(),d}})().then(c=>{if(ov(t)){c.destroy();return}let l=(0,$s.calculateDurationInMs)(r);t.addRttSample(l),t.connection=c,t.emitAndLogHeartbeat(sv.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.hello?.connectionId,new iv.ServerHeartbeatSucceededEvent(t.address,l,c.hello,iG(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,o(c)})}function gye(t){return e=>{if(t.s.state===T0){process.nextTick(e);return}qb(t,T0);function r(){ov(t)||qb(t,Bb),e()}tft(t,(n,i)=>{if(n&&t.server.description.type===Us.ServerType.Unknown)return r();iG(t,i?.topologyVersion)&&(0,Q1.setTimeout)(()=>{ov(t)||t.monitorId?.wake()},0),r()})}}function rft(t){return{processId:t.processId,counter:hye.Long.isLong(t.counter)?t.counter:hye.Long.fromNumber(t.counter)}}var TT=class{constructor(e){this.connection=void 0,this.cancellationToken=e.cancellationToken,this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this.monitorId=(0,Q1.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,Q1.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,$s.calculateDurationInMs)(e),this.monitorId=(0,Q1.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,$s.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,CT.connect)(this.monitor.connectOptions).then(i=>{this.measureAndReschedule(e,i)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":rG.LEGACY_HELLO_COMMAND;r.command((0,$s.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};ga.RTTPinger=TT;var av=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,Q1.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,$s.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,$s.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,Q1.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,$s.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,Q1.clearTimeout)(this.timerId),this.timerId=(0,Q1.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};ga.MonitorInterval=av;var OT=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};ga.RTTSampler=OT});var dG=b(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.DEFAULT_OPTIONS=tu.OPTIONS=void 0;tu.resolveSRVRecord=dft;tu.parseOptions=fft;var sG=require("dns"),nft=mK(),ift=require("url"),Lb=IC(),wd=bd(),bye=U3(),_ye=P0e(),rt=Fe(),xT=W1(),uG=I1(),oG=el(),X1=ps(),sft=tG(),uo=Ze(),$p=Do(),aG=["authSource","replicaSet","loadBalanced"],oft="loadBalanced option only supported with a single host in the URI",aft="loadBalanced option not supported with a replicaSet option",uft="loadBalanced option not supported when directConnection is provided";function Sye(t){return async function(r){try{return await sG.promises[t](r)}catch(n){if(n.code===sG.TIMEOUT)return await sG.promises[t](r);throw n}}}var cft=Sye("resolveSrv"),lft=Sye("resolveTxt");async function dft(t){if(typeof t.srvHost!="string")throw new rt.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=lft(e);r.then(void 0,uo.squashError);let n=`_${t.srvServiceName}._tcp.${e}`,i=await cft(n);if(i.length===0)throw new rt.MongoAPIError("No addresses found at host");for(let{name:p}of i)(0,uo.checkParentDomainMatch)(p,e);let s=i.map(p=>uo.HostAddress.fromString(`${p.name}:${p.port??27017}`));cG(s,t,!0);let o;try{o=await r}catch(p){if(p.code!=="ENODATA"&&p.code!=="ENOTFOUND")throw p;return s}if(o.length>1)throw new rt.MongoParseError("Multiple text records not allowed");let a=new ift.URLSearchParams(o[0].join(""));if([...a.keys()].some(p=>!aG.includes(p)))throw new rt.MongoParseError(`Text record may only set any of: ${aG.join(", ")}`);if(aG.some(p=>a.get(p)===""))throw new rt.MongoParseError("Cannot have empty URI params in DNS TXT Record");let c=a.get("authSource")??void 0,l=a.get("replicaSet")??void 0,d=a.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&c&&t.credentials&&!wd.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=Lb.MongoCredentials.merge(t.credentials,{source:c})),!t.userSpecifiedReplicaSet&&l&&(t.replicaSet=l),d==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new rt.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return cG(s,t,!0),s}function pft(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new rt.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames")}function Up(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new rt.MongoParseError(`${t} must be either "true" or "false"`)}}function lG(t,e){let r=(0,uo.parseInteger)(e);if(r!=null)return r;throw new rt.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function uv(t,e){let r=lG(t,e);if(r<0)throw new rt.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*Eye(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,i]=r.split(/:(.*)/);if(i==null)throw new rt.MongoParseError("Cannot have undefined values in key value pairs");yield[n,i]}}var jb=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function fft(t,e=void 0,r={}){if(e!=null&&!(e instanceof xT.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new rt.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new rt.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new nft.default(t),{hosts:i,isSRV:s}=n,o=Object.create(null);o.hosts=s?[]:i.map(uo.HostAddress.fromString);let a=new jb;if(n.pathname!=="/"&&n.pathname!==""){let h=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);h&&a.set("dbName",[h])}if(n.username!==""){let h={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(h.password=decodeURIComponent(n.password)),a.set("auth",[h])}for(let h of n.searchParams.keys()){let y=n.searchParams.getAll(h),E=/readPreferenceTags/i.test(h);if(!E&&y.length>1)throw new rt.MongoInvalidArgumentError(`URI option "${h}" cannot appear more than once in the connection string`);if(!E&&y.includes(""))throw new rt.MongoAPIError(`URI option "${h}" cannot be specified with no value`);a.has(h)||a.set(h,y)}let u=new jb(Object.entries(r).filter(([,h])=>h!=null));if(a.has("serverApi"))throw new rt.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=a.get("authMechanismProperties");if(c){for(let h of c)if(/(^|,)ALLOWED_HOSTS:/.test(h))throw new rt.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(u.has("loadBalanced"))throw new rt.MongoParseError("loadBalanced is only a valid option in the URI");let l=new jb,d=new Set([...a.keys(),...u.keys()]);for(let h of d){let y=[],E=u.get(h);E!=null&&y.push(E);let v=a.get(h)??[];y.push(...v),l.set(h,y)}if(l.has("tls")||l.has("ssl")){let h=(l.get("tls")||[]).concat(l.get("ssl")||[]).map(Up.bind(null,"tls/ssl"));if(new Set(h).size!==1)throw new rt.MongoParseError("All values of tls/ssl must be the same.")}pft(l);let p=(0,uo.setDifference)(d,Array.from(Object.keys(tu.OPTIONS)).map(h=>h.toLowerCase()));if(p.size!==0){let h=p.size>1?"options":"option",y=p.size>1?"are":"is";throw new rt.MongoParseError(`${h} ${Array.from(p).join(", ")} ${y} not supported`)}for(let[h,y]of Object.entries(tu.OPTIONS)){let E=l.get(h);if(!E||E.length===0)tu.DEFAULT_OPTIONS.has(h)&&vye(o,h,y,[tu.DEFAULT_OPTIONS.get(h)]);else{let{deprecated:v}=y;if(v){let w=typeof v=="string"?`: ${v}`:"";(0,uo.emitWarning)(`${h} is a deprecated option${w}`)}vye(o,h,y,E)}}if(o.credentials){let h=o.credentials.mechanism===wd.AuthMechanism.MONGODB_GSSAPI,y=o.credentials.mechanism===wd.AuthMechanism.MONGODB_X509,E=o.credentials.mechanism===wd.AuthMechanism.MONGODB_AWS,v=o.credentials.mechanism===wd.AuthMechanism.MONGODB_OIDC;if((h||y)&&l.has("authSource")&&o.credentials.source!=="$external")throw new rt.MongoParseError(`authMechanism ${o.credentials.mechanism} requires an authSource of '$external'`);if(!(h||y||E||v)&&o.dbName&&!l.has("authSource")&&(o.credentials=Lb.MongoCredentials.merge(o.credentials,{source:o.dbName})),E&&o.credentials.username&&!o.credentials.password)throw new rt.MongoMissingCredentialsError(`When using ${o.credentials.mechanism} password must be set when a username is specified`);o.credentials.validate(),o.credentials.password===""&&o.credentials.username===""&&o.credentials.mechanism===wd.AuthMechanism.MONGODB_DEFAULT&&Object.keys(o.credentials.mechanismProperties).length===0&&delete o.credentials}if(o.dbName||(o.dbName="test"),cG(i,o,s),e&&o.autoEncryption&&(_ye.Encrypter.checkForMongoCrypt(),o.encrypter=new _ye.Encrypter(e,t,r),o.autoEncrypter=o.encrypter.autoEncrypter),o.userSpecifiedAuthSource=u.has("authSource")||a.has("authSource"),o.userSpecifiedReplicaSet=u.has("replicaSet")||a.has("replicaSet"),s){if(o.srvHost=i[0],o.directConnection)throw new rt.MongoAPIError("SRV URI does not support directConnection");if(o.srvMaxHosts>0&&typeof o.replicaSet=="string")throw new rt.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let h=!u.has("tls")&&!a.has("tls"),y=!u.has("ssl")&&!a.has("ssl");h&&y&&(o.tls=!0)}else if(a.has("srvMaxHosts")||u.has("srvMaxHosts")||a.has("srvServiceName")||u.has("srvServiceName"))throw new rt.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(o.directConnection&&o.hosts.length!==1)throw new rt.MongoParseError("directConnection option requires exactly one host");if(!o.proxyHost&&(o.proxyPort||o.proxyUsername||o.proxyPassword))throw new rt.MongoParseError("Must specify proxyHost if other proxy options are passed");if(o.proxyUsername&&!o.proxyPassword||!o.proxyUsername&&o.proxyPassword)throw new rt.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(h=>a.get(h)??[]).some(h=>h.length>1))throw new rt.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return o.mongoLoggerOptions=uG.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:o.mongodbLogPath,mongodbLogComponentSeverities:o.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:o.mongodbLogMaxDocumentLength}),o}function cG(t,e,r){if(e.loadBalanced){if(t.length>1)throw new rt.MongoParseError(oft);if(e.replicaSet)throw new rt.MongoParseError(aft);if(e.directConnection)throw new rt.MongoParseError(uft);if(r&&e.srvMaxHosts>0)throw new rt.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function vye(t,e,r,n){let{target:i,type:s,transform:o}=r,a=i??e;switch(s){case"boolean":t[a]=Up(a,n[0]);break;case"int":t[a]=lG(a,n[0]);break;case"uint":t[a]=uv(a,n[0]);break;case"string":if(n[0]==null)break;t[a]=String(n[0]);break;case"record":if(!(0,uo.isRecord)(n[0]))throw new rt.MongoParseError(`${a} must be an object`);t[a]=n[0];break;case"any":t[a]=n[0];break;default:{if(!o)throw new rt.MongoParseError("Descriptors missing a type must define a transform");let u=o({name:a,options:t,values:n});t[a]=u;break}}}tu.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,uo.isRecord)(r,["username","password"]))throw new rt.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return Lb.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(wd.AuthMechanism),[n]=r.filter(o=>o.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new rt.MongoParseError(`authMechanism one of ${r}, got ${e}`);let i=t.credentials?.source;(n===wd.AuthMechanism.MONGODB_PLAIN||wd.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(i="$external");let s=t.credentials?.password;return n===wd.AuthMechanism.MONGODB_X509&&s===""&&(s=void 0),Lb.MongoCredentials.merge(t.credentials,{mechanism:n,source:i,password:s})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[i,s]of Eye(n))try{r[i]=Up(i,s)}catch{r[i]=s}else{if(!(0,uo.isRecord)(n))throw new rt.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return Lb.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return Lb.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new rt.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(xT.ServerApiVersion).join('", "')}"]`);if(!Object.values(xT.ServerApiVersion).some(n=>n===r))throw new rt.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(xT.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new rt.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let i of n)if(Object.keys(bye.Compressor).includes(String(i)))e.add(String(i));else throw new rt.MongoInvalidArgumentError(`${i} is not a valid compression mechanism. Must be one of: ${Object.keys(bye.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=lG(t,e);if(r===4||r===6)return r;throw new rt.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=$p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:Up(t,r)}});if(!n)throw new rt.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=$p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Up(t,r)}});if(!n)throw new rt.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=$p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Up(t,r)}});if(!n)throw new rt.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=uv(t,e);if(r===0)throw new rt.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=uv(t,r);return e.readPreference?X1.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new X1.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:uo.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,uo.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new rt.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof oG.ReadConcern||(0,uo.isRecord)(t,["level"]))return oG.ReadConcern.fromOptions({...e.readConcern,...t});throw new rt.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return oG.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:X1.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof X1.ReadPreference)return X1.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,uo.isRecord)(t,["mode"])){let r=X1.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new rt.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new X1.ReadPreference(t,e.readPreference?.tags,r)}throw new rt.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let i of r){let s=Object.create(null);if(typeof i=="string")for(let[o,a]of Eye(i))s[o]=a;if((0,uo.isRecord)(i))for(let[o,a]of Object.entries(i))s[o]=a;n.push(s)}return X1.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(sft.ServerMonitoringMode).includes(t))throw new rt.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!Up(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return Up(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=Up(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return $p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,uo.isRecord)(t)||t instanceof $p.WriteConcern)return $p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return $p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new rt.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=$p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:uv("wtimeout",t)}});if(r)return r;throw new rt.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=$p.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:uv("wtimeoutMS",t)}});if(r)return r;throw new rt.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new rt.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new rt.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new rt.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(uG.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new rt.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(uG.SeverityLevel).some(n=>n===r))throw new rt.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};tu.DEFAULT_OPTIONS=new jb(Object.entries(tu.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]))});var wye=b(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});RT.ListCollectionsOperation=void 0;var pG=kr(),hft=Ze(),mft=Jn(),cv=Hr(),IT=class extends mft.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=pG.CursorResponse,this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize),this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?pG.ExplainedCursorResponse:pG.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return(0,hft.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}handleOk(e){return e}};RT.ListCollectionsOperation=IT;(0,cv.defineAspects)(IT,[cv.Aspect.READ_OPERATION,cv.Aspect.RETRYABLE,cv.Aspect.CURSOR_CREATING,cv.Aspect.SUPPORTS_RAW_DATA])});var hG=b(DT=>{"use strict";Object.defineProperty(DT,"__esModule",{value:!0});DT.ListCollectionsCursor=void 0;var yft=fs(),gft=wye(),bft=Bs(),fG=class t extends bft.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new gft.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e,signal:this.signal}),n=await(0,yft.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};DT.ListCollectionsCursor=fG});var Cye=b(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});kT.RunCommandCursor=void 0;var $b=Fe(),Aye=fs(),_ft=iU(),Eft=_3(),vft=Ze(),Sft=Bs(),mG=class extends Sft.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new $b.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new $b.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new $b.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new $b.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new $b.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,vft.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new Eft.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference}),n=await(0,Aye.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(e){if(!this.session)throw new $b.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r=new _ft.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,Aye.executeOperation)(this.client,r,this.timeoutContext)}};kT.RunCommandCursor=mG});var lv=b(Z1=>{"use strict";Object.defineProperty(Z1,"__esModule",{value:!0});Z1.ListIndexesOperation=Z1.DropIndexOperation=Z1.CreateIndexesOperation=void 0;var yG=kr(),wft=Fe(),gG=Ze(),bG=Jn(),_l=Hr(),Aft=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function Cft(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function Tft(t){return Array.isArray(t)&&t.length===2&&Cft(t[1])}function Oft(t){let e=new Map,r=!Array.isArray(t)||Tft(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[i,s]of n)e.set(i,s);else if((0,gG.isObject)(n))for(let[i,s]of Object.entries(n))e.set(i,s);return e}function xft(t){let e=Object.entries(t).filter(([r])=>Aft.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var MT=class t extends bG.CommandOperation{constructor(e,r,n,i){super(e,i),this.SERVER_COMMAND_RESPONSE_TYPE=yG.MongoDBResponse,this.options=i??{},this.options.collation=void 0,this.collectionName=r,this.indexes=n.map(s=>{let o=s.key instanceof Map?s.key:new Map(Object.entries(s.key)),a=s.name??Array.from(o).flat().join("_");return{...xft(s),name:a,key:o}}),this.ns=e.s.namespace}static fromIndexDescriptionArray(e,r,n,i){return new t(e,r,n,i)}static fromIndexSpecification(e,r,n,i={}){let s=Oft(n),o={...i,key:s};return new t(e,r,[o],i)}get commandName(){return"createIndexes"}buildCommandDocument(e){let r=this.options,n=this.indexes,i=(0,gG.maxWireVersion)(e),s={createIndexes:this.collectionName,indexes:n};if(r.commitQuorum!=null){if(i<9)throw new wft.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");s.commitQuorum=r.commitQuorum}return s}handleOk(e){return this.indexes.map(n=>n.name||"")}};Z1.CreateIndexesOperation=MT;var PT=class extends bG.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=yG.MongoDBResponse,this.options=n??{},this.collection=e,this.indexName=r,this.ns=e.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(e){return{dropIndexes:this.collection.collectionName,index:this.indexName}}};Z1.DropIndexOperation=PT;var NT=class extends bG.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=yG.CursorResponse,this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(e){let r=(0,gG.maxWireVersion)(e),n=this.options.batchSize?{batchSize:this.options.batchSize}:{},i={listIndexes:this.collectionNamespace.collection,cursor:n};return r>=9&&this.options.comment!==void 0&&(i.comment=this.options.comment),i}handleOk(e){return e}};Z1.ListIndexesOperation=NT;(0,_l.defineAspects)(NT,[_l.Aspect.READ_OPERATION,_l.Aspect.RETRYABLE,_l.Aspect.CURSOR_CREATING,_l.Aspect.SUPPORTS_RAW_DATA]);(0,_l.defineAspects)(MT,[_l.Aspect.WRITE_OPERATION,_l.Aspect.SUPPORTS_RAW_DATA]);(0,_l.defineAspects)(PT,[_l.Aspect.WRITE_OPERATION,_l.Aspect.SUPPORTS_RAW_DATA])});var xye=b(dv=>{"use strict";Object.defineProperty(dv,"__esModule",{value:!0});dv.CreateCollectionOperation=void 0;dv.createCollections=qft;var Tye=A1(),Ift=kr(),Rft=Kb(),Dft=Fe(),kft=Vi(),Mft=Ze(),Pft=Jn(),_G=fs(),Nft=lv(),Oye=Hr(),Fft=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),Bft="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",Ub=class extends Pft.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Ift.MongoDBResponse,this.options=n,this.db=e,this.name=r}get commandName(){return"create"}buildCommandDocument(e,r){let n=([i,s])=>s!=null&&typeof s!="function"&&!Fft.has(i);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(n))}}handleOk(e){return new Rft.Collection(this.db,this.name,this.options)}};dv.CreateCollectionOperation=Ub;async function qft(t,e,r){let n=kft.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),i=r.encryptedFields??t.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${t.databaseName}.${e}`];if(i){class o extends Ub{buildCommandDocument(l,d){if(!l.description.loadBalanced&&(0,Mft.maxWireVersion)(l)<Tye.MIN_SUPPORTED_QE_WIRE_VERSION)throw new Dft.MongoCompatibilityError(`${Bft} The minimum server version required is ${Tye.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(l,d)}}let a=i.escCollection??`enxcol_.${e}.esc`,u=i.ecocCollection??`enxcol_.${e}.ecoc`;for(let c of[a,u]){let l=new o(t,c,{clusteredIndex:{key:{_id:1},unique:!0},session:r.session});await(0,_G.executeOperation)(t.client,l,n)}r.encryptedFields||(r={...r,encryptedFields:i})}let s=await(0,_G.executeOperation)(t.client,new Ub(t,e,r),n);if(i){let o=Nft.CreateIndexesOperation.fromIndexSpecification(t,e,{__safeContent__:1},{session:r.session});await(0,_G.executeOperation)(t.client,o,n)}return s}(0,Oye.defineAspects)(Ub,[Oye.Aspect.WRITE_OPERATION])});var kye=b(O0=>{"use strict";Object.defineProperty(O0,"__esModule",{value:!0});O0.DropDatabaseOperation=O0.DropCollectionOperation=void 0;O0.dropCollections=Kft;var Lft=x0(),Rye=kr(),jft=Bs(),$ft=Fe(),Uft=Vi(),Dye=Jn(),Iye=fs(),FT=Hr(),Vb=class extends Dye.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Rye.MongoDBResponse,this.options=n,this.name=r}get commandName(){return"drop"}buildCommandDocument(e,r){return{drop:this.name}}handleOk(e){return!0}};O0.DropCollectionOperation=Vb;async function Kft(t,e,r){let n=Uft.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),i=t.client.s.options.autoEncryption?.encryptedFieldsMap,s=r.encryptedFields??i?.[`${t.databaseName}.${e}`];if(!s&&i&&(s=(await t.listCollections({name:e},{nameOnly:!1,session:r.session,timeoutContext:new jft.CursorTimeoutContext(n,Symbol())}).toArray())?.[0]?.options?.encryptedFields),s){let o=s.escCollection||`enxcol_.${e}.esc`,a=s.ecocCollection||`enxcol_.${e}.ecoc`;for(let u of[o,a]){let c=new Vb(t,u,r);try{await(0,Iye.executeOperation)(t.client,c,n)}catch(l){if(!(l instanceof Lft.MongoServerError)||l.code!==$ft.MONGODB_ERROR_CODES.NamespaceNotFound)throw l}}}return await(0,Iye.executeOperation)(t.client,new Vb(t,e,r),n)}var BT=class extends Dye.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Rye.MongoDBResponse,this.options=r}get commandName(){return"dropDatabase"}buildCommandDocument(e,r){return{dropDatabase:1}}handleOk(e){return!0}};O0.DropDatabaseOperation=BT;(0,FT.defineAspects)(Vb,[FT.Aspect.WRITE_OPERATION]);(0,FT.defineAspects)(BT,[FT.Aspect.WRITE_OPERATION])});var Pye=b(qT=>{"use strict";Object.defineProperty(qT,"__esModule",{value:!0});qT.ProfilingLevelOperation=void 0;var Vft=yr(),Gft=kr(),Mye=Fe(),Hft=Jn(),EG=class extends Gft.MongoDBResponse{get was(){return this.get("was",Vft.BSONType.int,!0)}},vG=class extends Hft.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=EG,this.options=r}get commandName(){return"profile"}buildCommandDocument(e){return{profile:-1}}handleOk(e){if(e.ok===1){let r=e.was;if(r===0)return"off";if(r===1)return"slow_only";if(r===2)return"all";throw new Mye.MongoUnexpectedServerResponseError(`Illegal profiling level value ${r}`)}else throw new Mye.MongoUnexpectedServerResponseError("Error with profile command")}};qT.ProfilingLevelOperation=vG});var SG=b(jT=>{"use strict";Object.defineProperty(jT,"__esModule",{value:!0});jT.RenameOperation=void 0;var zft=kr(),Wft=Kb(),Jft=Ze(),Yft=Jn(),Nye=Hr(),LT=class extends Yft.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=zft.MongoDBResponse,this.collection=e,this.newName=r,this.options=n,this.ns=new Jft.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(e,r){let n=this.collection.namespace,i=this.collection.s.namespace.withCollection(this.newName).toString(),s=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1;return{renameCollection:n,to:i,dropTarget:s}}handleOk(e){return new Wft.Collection(this.collection.db,this.newName,this.collection.s.options)}};jT.RenameOperation=LT;(0,Nye.defineAspects)(LT,[Nye.Aspect.WRITE_OPERATION])});var AG=b(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.SetProfilingLevelOperation=Ad.ProfilingLevel=void 0;var Qft=kr(),Xft=Fe(),Zft=Ze(),e1t=Jn(),t1t=new Set(["off","slow_only","all"]);Ad.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var wG=class extends e1t.CommandOperation{constructor(e,r,n){switch(super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Qft.MongoDBResponse,this.options=n,r){case Ad.ProfilingLevel.off:this.profile=0;break;case Ad.ProfilingLevel.slowOnly:this.profile=1;break;case Ad.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}buildCommandDocument(e){let r=this.level;if(!t1t.has(r))throw new Xft.MongoInvalidArgumentError(`Profiling level must be one of "${(0,Zft.enumToString)(Ad.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(e){return this.level}};Ad.SetProfilingLevelOperation=wG});var Bye=b(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0});UT.DbStatsOperation=void 0;var r1t=kr(),n1t=Jn(),Fye=Hr(),$T=class extends n1t.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=r1t.MongoDBResponse,this.options=r}get commandName(){return"dbStats"}buildCommandDocument(e){let r={dbStats:!0};return this.options.scale!=null&&(r.scale=this.options.scale),r}};UT.DbStatsOperation=$T;(0,Fye.defineAspects)($T,[Fye.Aspect.READ_OPERATION])});var VT=b(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});KT.Db=void 0;var i1t=z$(),qye=yr(),s1t=I0(),Lye=Kb(),Gb=gi(),o1t=pv(),a1t=hG(),u1t=Cye(),jye=Fe(),c1t=xye(),$ye=kye(),eh=fs(),l1t=lv(),d1t=Pye(),p1t=U$(),f1t=SG(),h1t=_3(),m1t=AG(),y1t=Bye(),g1t=el(),Uye=ps(),bs=Ze(),b1t=Do(),_1t=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],Kp=class{constructor(e,r,n){if(n=n??{},n=(0,bs.filterOptions)(n,_1t),typeof r=="string"&&r.includes("."))throw new jye.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:Uye.ReadPreference.fromOptions(n),bsonOptions:(0,qye.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??bs.DEFAULT_PK_FACTORY,readConcern:g1t.ReadConcern.fromOptions(n),writeConcern:b1t.WriteConcern.fromOptions(n),namespace:new bs.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return r=(0,bs.resolveOptions)(this,r),await(0,c1t.createCollections)(this,e,r)}async command(e,r){return await(0,eh.executeOperation)(this.client,new h1t.RunCommandOperation(this.s.namespace,e,(0,bs.resolveOptions)(void 0,{...(0,qye.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference,signal:r?.signal})))}aggregate(e=[],r){return new o1t.AggregationCursor(this.client,this.s.namespace,e,(0,bs.resolveOptions)(this,r))}admin(){return new i1t.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new jye.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new Lye.Collection(this,e,(0,bs.resolveOptions)(this,r))}async stats(e){return await(0,eh.executeOperation)(this.client,new y1t.DbStatsOperation(this,(0,bs.resolveOptions)(this,e)))}listCollections(e={},r={}){return new a1t.ListCollectionsCursor(this,e,(0,bs.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,eh.executeOperation)(this.client,new f1t.RenameOperation(this.collection(e),r,(0,bs.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:Uye.ReadPreference.primary})))}async dropCollection(e,r){return r=(0,bs.resolveOptions)(this,r),await(0,$ye.dropCollections)(this,e,r)}async dropDatabase(e){return await(0,eh.executeOperation)(this.client,new $ye.DropDatabaseOperation(this,(0,bs.resolveOptions)(this,e)))}async collections(e){return e=(0,bs.resolveOptions)(this,e),(await this.listCollections({},{...e,nameOnly:!0}).toArray()).filter(({name:n})=>!n.includes("$")).map(({name:n})=>new Lye.Collection(this,n,this.s.options))}async createIndex(e,r,n){return(await(0,eh.executeOperation)(this.client,l1t.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,eh.executeOperation)(this.client,new p1t.RemoveUserOperation(this,e,(0,bs.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,eh.executeOperation)(this.client,new m1t.SetProfilingLevelOperation(this,e,(0,bs.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,eh.executeOperation)(this.client,new d1t.ProfilingLevelOperation(this,(0,bs.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,bs.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new s1t.ChangeStream(this,e,(0,bs.resolveOptions)(this,r))}runCursorCommand(e,r){return new u1t.RunCommandCursor(this,e,r)}};KT.Db=Kp;Kp.SYSTEM_NAMESPACE_COLLECTION=Gb.SYSTEM_NAMESPACE_COLLECTION;Kp.SYSTEM_INDEX_COLLECTION=Gb.SYSTEM_INDEX_COLLECTION;Kp.SYSTEM_PROFILE_COLLECTION=Gb.SYSTEM_PROFILE_COLLECTION;Kp.SYSTEM_USER_COLLECTION=Gb.SYSTEM_USER_COLLECTION;Kp.SYSTEM_COMMAND_COLLECTION=Gb.SYSTEM_COMMAND_COLLECTION;Kp.SYSTEM_JS_COLLECTION=Gb.SYSTEM_JS_COLLECTION});var Kye=b(GT=>{"use strict";Object.defineProperty(GT,"__esModule",{value:!0});GT.MongoDBAWS=void 0;var CG=yr(),TG=ll(),zb=Fe(),Hb=Ze(),E1t=B1(),OG=FK(),v1t=IC(),S1t=bd(),w1t=110,xG={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},IG=class extends E1t.AuthProvider{constructor(e){super(),this.credentialProvider=e,this.credentialFetcher=OG.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new OG.AWSSDKCredentialProvider(e):new OG.LegacyAWSTemporaryCredentialProvider}async auth(e){let{connection:r}=e;if(!e.credentials)throw new zb.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in TG.aws4)throw TG.aws4.kModuleError;let{sign:n}=TG.aws4;if((0,Hb.maxWireVersion)(r)<9)throw new zb.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials.username||(e.credentials=await A1t(e.credentials,this.credentialFetcher));let{credentials:i}=e,s=i.username,o=i.password,a=i.mechanismProperties.AWS_SESSION_TOKEN,u=s&&o&&a?{accessKeyId:s,secretAccessKey:o,sessionToken:a}:s&&o?{accessKeyId:s,secretAccessKey:o}:void 0,c=i.source,l=await(0,Hb.randomBytes)(32),d={saslStart:1,mechanism:"MONGODB-AWS",payload:CG.serialize({r:l,p:w1t},xG)},p=await r.command((0,Hb.ns)(`${c}.$cmd`),d,void 0),f=CG.deserialize(p.payload.buffer,xG),h=f.h,y=f.s.buffer;if(y.length!==64)throw new zb.MongoRuntimeError(`Invalid server nonce length ${y.length}, expected 64`);if(!Hb.ByteUtils.equals(y.subarray(0,l.byteLength),l))throw new zb.MongoRuntimeError("Server nonce does not begin with client nonce");if(h.length<1||h.length>255||h.indexOf("..")!==-1)throw new zb.MongoRuntimeError(`Server returned an invalid host: "${h}"`);let E="Action=GetCallerIdentity&Version=2011-06-15",v=n({method:"POST",host:h,region:C1t(f.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":E.length,"X-MongoDB-Server-Nonce":Hb.ByteUtils.toBase64(y),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:E},u),w={a:v.headers.Authorization,d:v.headers["X-Amz-Date"]};a&&(w.t=a);let T={saslContinue:1,conversationId:p.conversationId,payload:CG.serialize(w,xG)};await r.command((0,Hb.ns)(`${c}.$cmd`),T,void 0)}};GT.MongoDBAWS=IG;async function A1t(t,e){function r(i){if(!i.AccessKeyId||!i.SecretAccessKey)throw new zb.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new v1t.MongoCredentials({username:i.AccessKeyId,password:i.SecretAccessKey,source:t.source,mechanism:S1t.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:i.Token}})}let n=await e.getCredentials();return r(n)}function C1t(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var Gye=b(HT=>{"use strict";Object.defineProperty(HT,"__esModule",{value:!0});HT.finishCommandDocument=T1t;HT.startCommandDocument=O1t;var Wb=yr(),Vye=bd();function T1t(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new Wb.Binary(Wb.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:Vye.AuthMechanism.MONGODB_OIDC,payload:new Wb.Binary(Wb.BSON.serialize({jwt:t}))}}function O1t(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:Vye.AuthMechanism.MONGODB_OIDC,payload:new Wb.Binary(Wb.BSON.serialize(e))}}});var MG=b(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.CallbackWorkflow=th.AUTOMATED_TIMEOUT_MS=th.HUMAN_TIMEOUT_MS=void 0;var x1t=require("timers/promises"),I1t=Fe(),Hye=Ze(),RG=Gye();th.HUMAN_TIMEOUT_MS=3e5;th.AUTOMATED_TIMEOUT_MS=6e4;var R1t=["accessToken","expiresInSeconds","refreshToken"],D1t="User provided OIDC callbacks must return a valid object with an accessToken.",DG=100,kG=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-DG}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let i=(0,RG.finishCommandDocument)(n);return i.db=r.source,{speculativeAuthenticate:i}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let i;return n?.speculativeAuthenticate?i=n.speculativeAuthenticate:i=await e.command((0,Hye.ns)(r.source),(0,RG.startCommandDocument)(r),void 0),i}async finishAuthentication(e,r,n,i){await e.command((0,Hye.ns)(r.source),(0,RG.finishCommandDocument)(n,i),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if(k1t(r))throw new I1t.MongoMissingCredentialsError(D1t);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let i=Date.now()-this.lastExecutionTime;return i<=DG&&await(0,x1t.setTimeout)(DG-i,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};th.CallbackWorkflow=kG;function k1t(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>R1t.includes(e))}});var BG=b(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0});zT.AutomatedCallbackWorkflow=void 0;var PG=Fe(),zye=Vi(),M1t=WT(),NG=MG(),FG=class extends NG.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let i=this.cache.getAccessToken();e.accessToken||(e.accessToken=i);try{return await this.finishAuthentication(e,r,i)}catch(s){if(s instanceof PG.MongoError&&s.code===PG.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw s}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:M1t.OIDC_VERSION};e.username&&(n.username=e.username),e.mechanismProperties.TOKEN_RESOURCE&&(n.tokenAudience=e.mechanismProperties.TOKEN_RESOURCE);let i=zye.Timeout.expires(NG.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),i])}catch(s){throw zye.TimeoutError.is(s)?(r.abort(),new PG.MongoOIDCError(`OIDC callback timed out after ${NG.AUTOMATED_TIMEOUT_MS}ms.`)):s}finally{i.clear()}}};zT.AutomatedCallbackWorkflow=FG});var Jye=b(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0});JT.callback=void 0;var Wye=qK(),qG=Fe(),P1t=Ze(),N1t=Object.freeze({Metadata:"true",Accept:"application/json"}),F1t="Azure endpoint did not return a value with only access_token and expires_in properties",B1t="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",q1t=async t=>{let e=t.tokenAudience,r=t.username;if(!e)throw new qG.MongoAzureError(B1t);let n=await L1t(e,r);if(!j1t(n))throw new qG.MongoAzureError(F1t);return n};JT.callback=q1t;async function L1t(t,e){let r=new URL(Wye.AZURE_BASE_URL);(0,Wye.addAzureParams)(r,t,e);let n=await(0,P1t.get)(r,{headers:N1t});if(n.status!==200)throw new qG.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let i=JSON.parse(n.body);return{accessToken:i.access_token,expiresInSeconds:Number(i.expires_in)}}function j1t(t){return t==null||typeof t!="object"?!1:"accessToken"in t&&typeof t.accessToken=="string"&&"expiresInSeconds"in t&&typeof t.expiresInSeconds=="number"}});var Qye=b(YT=>{"use strict";Object.defineProperty(YT,"__esModule",{value:!0});YT.callback=void 0;var Yye=Fe(),$1t=Ze(),U1t="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",K1t=Object.freeze({"Metadata-Flavor":"Google"}),V1t="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",G1t=async t=>{let e=t.tokenAudience;if(!e)throw new Yye.MongoGCPError(V1t);return await H1t(e)};YT.callback=G1t;async function H1t(t){let e=new URL(U1t);e.searchParams.append("audience",t);let r=await(0,$1t.get)(e,{headers:K1t});if(r.status!==200)throw new Yye.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{accessToken:r.body}}});var ege=b(QT=>{"use strict";Object.defineProperty(QT,"__esModule",{value:!0});QT.callback=void 0;var z1t=require("fs/promises"),W1t="/var/run/secrets/kubernetes.io/serviceaccount/token",Xye="AZURE_FEDERATED_TOKEN_FILE",Zye="AWS_WEB_IDENTITY_TOKEN_FILE",J1t=async()=>{let t;return process.env[Xye]?t=process.env[Xye]:process.env[Zye]?t=process.env[Zye]:t=W1t,{accessToken:await(0,z1t.readFile)(t,"utf8")}};QT.callback=J1t});var jG=b(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});XT.TokenCache=void 0;var Y1t=Fe(),fv=class extends Y1t.MongoDriverError{},LG=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new fv("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new fv("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new fv("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};XT.TokenCache=LG});var tge=b(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0});ZT.callback=void 0;var Q1t=require("fs"),X1t=Fe(),Z1t="OIDC_TOKEN_FILE must be set in the environment.",eht=async()=>{let t=process.env.OIDC_TOKEN_FILE;if(!t)throw new X1t.MongoAWSError(Z1t);return{accessToken:await Q1t.promises.readFile(t,"utf8")}};ZT.callback=eht});var WT=b(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.MongoDBOIDC=ec.OIDC_WORKFLOWS=ec.OIDC_VERSION=void 0;var nge=Fe(),tht=B1(),e7=BG(),rht=Jye(),nht=Qye(),iht=ege(),t7=jG(),sht=tge(),oht="AuthContext must provide credentials.";ec.OIDC_VERSION=1;ec.OIDC_WORKFLOWS=new Map;ec.OIDC_WORKFLOWS.set("test",()=>new e7.AutomatedCallbackWorkflow(new t7.TokenCache,sht.callback));ec.OIDC_WORKFLOWS.set("azure",()=>new e7.AutomatedCallbackWorkflow(new t7.TokenCache,rht.callback));ec.OIDC_WORKFLOWS.set("gcp",()=>new e7.AutomatedCallbackWorkflow(new t7.TokenCache,nht.callback));ec.OIDC_WORKFLOWS.set("k8s",()=>new e7.AutomatedCallbackWorkflow(new t7.TokenCache,iht.callback));var $G=class extends tht.AuthProvider{constructor(e){if(super(),!e)throw new nge.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:i}=e;if(i?.speculativeAuthenticate?.done&&!n)return;let s=rge(e);n?await this.workflow.reauthenticate(r,s):await this.workflow.execute(r,s,i)}async prepare(e,r){let{connection:n}=r,i=rge(r),s=await this.workflow.speculativeAuth(n,i);return{...e,...s}}};ec.MongoDBOIDC=$G;function rge(t){let{credentials:e}=t;if(!e)throw new nge.MongoMissingCredentialsError(oht);return e}});var sge=b(r7=>{"use strict";Object.defineProperty(r7,"__esModule",{value:!0});r7.HumanCallbackWorkflow=void 0;var aht=yr(),hv=Fe(),ige=Vi(),uht=WT(),UG=MG(),KG=class extends UG.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let a=this.cache.getAccessToken();e.accessToken=a;try{return await this.finishAuthentication(e,r,a)}catch(u){if(u instanceof hv.MongoError&&u.code===hv.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw u}}if(this.cache.hasRefreshToken){let a=this.cache.getRefreshToken(),u=await this.fetchAccessToken(this.cache.getIdpInfo(),r,a);this.cache.put(u),e.accessToken=u.accessToken;try{return await this.finishAuthentication(e,r,u.accessToken)}catch(c){if(c instanceof hv.MongoError&&c.code===hv.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),i=n.conversationId,s=aht.BSON.deserialize(n.payload.buffer),o=await this.fetchAccessToken(s,r);return this.cache.put(o,s),e.accessToken=o.accessToken,await this.finishAuthentication(e,r,o.accessToken,i)}async fetchAccessToken(e,r,n){let i=new AbortController,s={timeoutContext:i.signal,version:uht.OIDC_VERSION,idpInfo:e};r.username&&(s.username=r.username),n&&(s.refreshToken=n);let o=ige.Timeout.expires(UG.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(s),o])}catch(a){throw ige.TimeoutError.is(a)?(i.abort(),new hv.MongoOIDCError(`OIDC callback timed out after ${UG.HUMAN_TIMEOUT_MS}ms.`)):a}finally{o.clear()}}};r7.HumanCallbackWorkflow=KG});var oge=b(n7=>{"use strict";Object.defineProperty(n7,"__esModule",{value:!0});n7.Plain=void 0;var cht=yr(),lht=Fe(),dht=Ze(),pht=B1(),VG=class extends pht.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new lht.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:i,password:s}=n,a={saslStart:1,mechanism:"PLAIN",payload:new cht.Binary(Buffer.from(`\0${i}\0${s}`)),autoAuthorize:1};await r.command((0,dht.ns)("$external.$cmd"),a,void 0)}};n7.Plain=VG});var lge=b((O1r,cge)=>{"use strict";var age=t=>t.codePointAt(0),fht=t=>t[0],hht=t=>t[t.length-1];function uge(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let i=t.charCodeAt(n);if(i>=55296&&i<=56319&&r>n+1){let s=t.charCodeAt(n+1);if(s>=56320&&s<=57343){e.push((i-55296)*1024+s-56320+65536),n+=1;continue}}e.push(i)}return e}function mv({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:i,bidirectional_l:s},o,a={}){let u=r,c=e;if(typeof o!="string")throw new TypeError("Expected string.");if(o.length===0)return"";let l=uge(o).map(w=>u.get(w)?32:w).filter(w=>!c.get(w)),d=String.fromCodePoint.apply(null,l).normalize("NFKC"),p=uge(d);if(p.some(w=>n.get(w)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(a.allowUnassigned!==!0&&p.some(T=>t.get(T)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let h=p.some(w=>i.get(w)),y=p.some(w=>s.get(w));if(h&&y)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let E=i.get(age(fht(d))),v=i.get(age(hht(d)));if(h&&!(E&&v))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return d}mv.saslprep=mv;mv.default=mv;cge.exports=mv});var fge=b((x1r,pge)=>{pge.exports=Vp;function Vp(t,e){if(!(this instanceof Vp))return new Vp(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?i7(this.deduplicate.length):null}Vp.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};Vp.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};Vp.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;mht(this,t)}bht(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var i=this.path[n],s=r[i];if(!s){if(e)return;s=r[i]=new Array(32768)}r=s}return r};Vp.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],i=r&&r[n];return!i&&!e&&(i=r[n]=new dge(t,i7(this.pageSize)),t>=this.length&&(this.length=t+1)),i&&i.buffer===this.deduplicate&&this.deduplicate&&!e&&(i.buffer=ght(i.buffer),i.deduplicate=0),i};Vp.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var i=r[n],s=yht(e,this.pageSize);i?i.buffer=s:r[n]=new dge(t,s)};Vp.prototype.toBuffer=function(){for(var t=new Array(this.length),e=i7(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),i=0;i<32768&&r<t.length;i++)t[r++]=n&&n[i]?n[i].buffer:e;return Buffer.concat(t)};function mht(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function yht(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=i7(e);return t.copy(r),r}function i7(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function ght(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function dge(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function bht(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var mge=b((I1r,hge)=>{var _ht=fge();hge.exports=rh;function rh(t){if(!(this instanceof rh))return new rh(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||_ht(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!vht(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}rh.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};rh.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};rh.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,i=this.getByte(n);return this.setByte(n,e?i|128>>r:i&(255^128>>r))};rh.prototype.toBuffer=function(){for(var t=Eht(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};rh.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,i=this.pages.get(n,!1);return r+=this.pageOffset,i.buffer[r]===e?!1:(i.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(i),!0)};function Eht(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function vht(t){return!(t&t-1)}});var yge=b(yv=>{"use strict";var Sht=yv&&yv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yv,"__esModule",{value:!0});yv.createMemoryCodePoints=Aht;var wht=Sht(mge());function Aht(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let l=t.slice(e,e+c);return e+=c,(0,wht.default)({buffer:l})}let n=r(),i=r(),s=r(),o=r(),a=r(),u=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:i,non_ASCII_space_characters:s,prohibited_characters:o,bidirectional_r_al:a,bidirectional_l:u}}});var gge=b(GG=>{"use strict";Object.defineProperty(GG,"__esModule",{value:!0});var Cht=require("zlib");GG.default=(0,Cht.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var Ege=b((HG,_ge)=>{"use strict";var bge=HG&&HG.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Tht=bge(lge()),Oht=yge(),xht=bge(gge()),Iht=(0,Oht.createMemoryCodePoints)(xht.default);function gv(t,e){return(0,Tht.default)(Iht,t,e)}gv.saslprep=gv;gv.default=gv;_ge.exports=gv});var Oge=b(Jb=>{"use strict";Object.defineProperty(Jb,"__esModule",{value:!0});Jb.ScramSHA256=Jb.ScramSHA1=void 0;var Rht=Ege(),R0=require("crypto"),zG=yr(),El=Fe(),a7=Ze(),Dht=B1(),vge=bd(),u7=class extends Dht.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,i=r.credentials;if(!i)throw new El.MongoMissingCredentialsError("AuthContext must provide credentials.");let s=await(0,a7.randomBytes)(24);return r.nonce=s,{...e,speculativeAuthenticate:{...Cge(n,i,s),db:i.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await Tge(this.cryptoMethod,n.speculativeAuthenticate,e):await kht(this.cryptoMethod,e)}};function wge(t){return t.replace("=","=3D").replace(",","=2C")}function Age(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function Cge(t,e,r){let n=wge(e.username);return{saslStart:1,mechanism:t==="sha1"?vge.AuthMechanism.MONGODB_SCRAM_SHA1:vge.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new zG.Binary(Buffer.concat([Buffer.from("n,,","utf8"),Age(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function kht(t,e){let{connection:r,credentials:n}=e;if(!n)throw new El.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new El.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let i=e.nonce,s=n.source,o=Cge(t,n,i),a=await r.command((0,a7.ns)(`${s}.$cmd`),o,void 0);await Tge(t,a,e)}async function Tge(t,e,r){let n=r.connection,i=r.credentials;if(!i)throw new El.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new El.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let s=r.nonce,o=i.source,a=wge(i.username),u=i.password,c=t==="sha256"?(0,Rht.saslprep)(u):Mht(a,u),l=Buffer.isBuffer(e.payload)?new zG.Binary(e.payload):e.payload,d=Sge(l),p=parseInt(d.i,10);if(p&&p<4096)throw new El.MongoRuntimeError(`Server returned an invalid iteration count ${p}`);let f=d.s,h=d.r;if(h.startsWith("nonce"))throw new El.MongoRuntimeError(`Server returned an invalid nonce: ${h}`);let y=`c=biws,r=${h}`,E=qht(c,Buffer.from(f,"base64"),p,t),v=s7(t,E,"Client Key"),w=s7(t,E,"Server Key"),T=Nht(t,v),A=[Age(a,s),l.toString("utf8"),y].join(","),C=s7(t,T,A),x=`p=${Pht(v,C)}`,R=[y,x].join(","),M=s7(t,w,A),I={saslContinue:1,conversationId:e.conversationId,payload:new zG.Binary(Buffer.from(R))},F=await n.command((0,a7.ns)(`${o}.$cmd`),I,void 0),B=Sge(F.payload);if(!Lht(Buffer.from(B.v,"base64"),M))throw new El.MongoRuntimeError("Server returned an invalid signature");if(F.done!==!1)return;let K={saslContinue:1,conversationId:F.conversationId,payload:Buffer.alloc(0)};await n.command((0,a7.ns)(`${o}.$cmd`),K,void 0)}function Sge(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let i=0;i<n.length;i++){let s=(n[i].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[s[0]]=s[1]}return r}function Mht(t,e){if(typeof t!="string")throw new El.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new El.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new El.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=R0.createHash("md5")}catch(n){throw R0.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function Pht(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let i=0;i<r;i+=1)n.push(t[i]^e[i]);return Buffer.from(n).toString("base64")}function Nht(t,e){return R0.createHash(t).update(e).digest()}function s7(t,e,r){return R0.createHmac(t,e).update(r).digest()}var o7={},WG=0;function Fht(){o7={},WG=0}var Bht={sha256:32,sha1:20};function qht(t,e,r,n){let i=[t,e.toString("base64"),r].join("_");if(o7[i]!=null)return o7[i];let s=R0.pbkdf2Sync(t,e,r,Bht[n],n);return WG>=200&&Fht(),o7[i]=s,WG+=1,s}function Lht(t,e){if(t.length!==e.length)return!1;if(typeof R0.timingSafeEqual=="function")return R0.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var JG=class extends u7{constructor(){super("sha1")}};Jb.ScramSHA1=JG;var YG=class extends u7{constructor(){super("sha256")}};Jb.ScramSHA256=YG});var Rge=b(c7=>{"use strict";Object.defineProperty(c7,"__esModule",{value:!0});c7.X509=void 0;var xge=Fe(),jht=Ze(),$ht=B1(),QG=class extends $ht.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new xge.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:Ige(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new xge.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,jht.ns)("$external.$cmd"),Ige(n),void 0)}};c7.X509=QG;function Ige(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var eH=b(l7=>{"use strict";Object.defineProperty(l7,"__esModule",{value:!0});l7.MongoClientAuthProviders=void 0;var Uht=xC(),Kht=Kye(),Mge=WT(),Vht=BG(),Ght=sge(),Dge=jG(),Hht=oge(),nh=bd(),kge=Oge(),zht=Rge(),ZG=Fe(),Wht=new Map([[nh.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:t})=>new Kht.MongoDBAWS(t)],[nh.AuthMechanism.MONGODB_CR,()=>{throw new ZG.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[nh.AuthMechanism.MONGODB_GSSAPI,()=>new Uht.GSSAPI],[nh.AuthMechanism.MONGODB_OIDC,t=>new Mge.MongoDBOIDC(Jht(t))],[nh.AuthMechanism.MONGODB_PLAIN,()=>new Hht.Plain],[nh.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new kge.ScramSHA1],[nh.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new kge.ScramSHA256],[nh.AuthMechanism.MONGODB_X509,()=>new zht.X509]]),XG=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let i=Wht.get(e);if(!i)throw new ZG.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let s=i(r);return this.existingProviders.set(e,s),s}};l7.MongoClientAuthProviders=XG;function Jht(t){if(t.OIDC_HUMAN_CALLBACK)return new Ght.HumanCallbackWorkflow(new Dge.TokenCache,t.OIDC_HUMAN_CALLBACK);if(t.OIDC_CALLBACK)return new Vht.AutomatedCallbackWorkflow(new Dge.TokenCache,t.OIDC_CALLBACK);{let e=t.ENVIRONMENT,r=Mge.OIDC_WORKFLOWS.get(e)?.();if(!r)throw new ZG.MongoInvalidArgumentError(`Could not load workflow for environment ${t.ENVIRONMENT}`);return r}}});var tH=b(p7=>{"use strict";Object.defineProperty(p7,"__esModule",{value:!0});p7.ClientBulkWriteOperation=void 0;var Yht=kr(),Qht=Ze(),Xht=Jn(),D0=Hr(),d7=class extends Xht.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.SERVER_COMMAND_RESPONSE_TYPE=Yht.ClientBulkWriteCursorResponse,this.commandBuilder=e,this.options=r,this.ns=new Qht.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(e){return e}buildCommandDocument(e,r){let n=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize);return this.canRetryWrite||(this.options.willRetryWrite=!1),n}};p7.ClientBulkWriteOperation=d7;(0,D0.defineAspects)(d7,[D0.Aspect.WRITE_OPERATION,D0.Aspect.SKIP_COLLATION,D0.Aspect.CURSOR_CREATING,D0.Aspect.RETRYABLE,D0.Aspect.COMMAND_BATCHING,D0.Aspect.SUPPORTS_RAW_DATA])});var Nge=b(f7=>{"use strict";Object.defineProperty(f7,"__esModule",{value:!0});f7.ClientBulkWriteCursor=void 0;var Zht=tH(),emt=fs(),Pge=Ze(),tmt=Bs(),rH=class t extends tmt.AbstractCursor{constructor(e,r,n={}){super(e,new Pge.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,Pge.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new Zht.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,emt.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};f7.ClientBulkWriteCursor=rH});var $ge=b(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.buildReplaceOneOperation=Kn.buildUpdateManyOperation=Kn.buildUpdateOneOperation=Kn.buildDeleteManyOperation=Kn.buildDeleteOneOperation=Kn.buildInsertOneOperation=Kn.ClientBulkWriteCommandBuilder=void 0;Kn.buildOperation=oH;var nH=yr(),Fge=$3(),bv=Fe(),qge=J2(),aH=Ze(),Bge=1e3,sH=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??aH.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let i=0,s=0,o=this.baseCommand(),a=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let u=this.models[this.currentModelIndex],c=u.namespace,l=a.get(c);if((u.name==="deleteMany"||u.name==="updateMany")&&(this.isBatchRetryable=!1),l!=null){let d=oH(u,l,this.pkFactory,this.options),p;try{p=nH.BSON.serialize(d)}catch(f){throw new bv.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:f})}if(iH("ops",p,n),i+p.length<e&&o.ops.documents.length<r)i=Bge+o.ops.push(d,p),this.currentModelIndex++;else break}else{a.set(c,s);let d={ns:c},p=oH(u,s,this.pkFactory,this.options),f,h;try{f=nH.BSON.serialize(d),h=nH.BSON.serialize(p)}catch(y){throw new bv.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:y})}if(iH("nsInfo",f,n),iH("ops",h,n),i+f.length+h.length<e&&o.ops.documents.length<r)i=Bge+o.nsInfo.push(d,f)+o.ops.push(p,h),s++,this.currentModelIndex++;else break}}return this.lastOperations=o.ops.documents,o}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new Fge.DocumentSequence("ops"),nsInfo:new Fge.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};Kn.ClientBulkWriteCommandBuilder=sH;function iH(t,e,r){if(e.length>r)throw new bv.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var rmt=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};Kn.buildInsertOneOperation=rmt;var nmt=(t,e)=>Lge(t,e,!1);Kn.buildDeleteOneOperation=nmt;var imt=(t,e)=>Lge(t,e,!0);Kn.buildDeleteManyOperation=imt;function Lge(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var smt=(t,e,r)=>jge(t,e,!1,r);Kn.buildUpdateOneOperation=smt;var omt=(t,e,r)=>jge(t,e,!0,r);Kn.buildUpdateManyOperation=omt;function amt(t,e){if(!(0,aH.hasAtomicOperators)(t,e))throw new bv.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function jge(t,e,r,n){amt(t.update,n);let i={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(i.hint=t.hint),t.upsert&&(i.upsert=t.upsert),t.arrayFilters&&(i.arrayFilters=t.arrayFilters),t.collation&&(i.collation=t.collation),!r&&"sort"in t&&t.sort!=null&&(i.sort=(0,qge.formatSort)(t.sort)),i}var umt=(t,e)=>{if((0,aH.hasAtomicOperators)(t.replacement))throw new bv.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),t.sort!=null&&(r.sort=(0,qge.formatSort)(t.sort)),r};Kn.buildReplaceOneOperation=umt;function oH(t,e,r,n){switch(t.name){case"insertOne":return(0,Kn.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,Kn.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,Kn.buildDeleteManyOperation)(t,e);case"updateOne":return(0,Kn.buildUpdateOneOperation)(t,e,n);case"updateMany":return(0,Kn.buildUpdateManyOperation)(t,e,n);case"replaceOne":return(0,Kn.buildReplaceOneOperation)(t,e)}}});var Uge=b(h7=>{"use strict";Object.defineProperty(h7,"__esModule",{value:!0});h7.ClientBulkWriteResultsMerger=void 0;var cmt=x0(),lmt=Fe(),dmt={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},uH=class{static unacknowledged(){return dmt}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let i=new lmt.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw i.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),i.partialResult=this.result,i}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof cmt.MongoWriteConcernError){let i=n.result;if(r={insertedCount:i.nInserted,upsertedCount:i.nUpserted,matchedCount:i.nMatched,modifiedCount:i.nModified,deletedCount:i.nDeleted,writeConcernError:i.writeConcernError},this.options.verboseResults&&i.cursor.firstBatch)for(let s of i.cursor.firstBatch)s.ok===1&&this.processDocument(e,s)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let i={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(i.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,i)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};h7.ClientBulkWriteResultsMerger=uH});var Gge=b(m7=>{"use strict";Object.defineProperty(m7,"__esModule",{value:!0});m7.ClientBulkWriteExecutor=void 0;var Kge=Bs(),pmt=Nge(),k0=Fe(),fmt=Vi(),hmt=Ze(),mmt=Do(),ymt=fs(),gmt=tH(),bmt=$ge(),Vge=Uge(),cH=class{constructor(e,r,n){if(r.length===0)throw new k0.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=mmt.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new k0.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new k0.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new bmt.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,hmt.resolveTimeoutOptions)(this.client,this.options),i=fmt.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let s=new gmt.ClientBulkWriteOperation(r,this.options);await(0,ymt.executeOperation)(this.client,s,i)}return Vge.ClientBulkWriteResultsMerger.unacknowledged()}else{let s=new Vge.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let o=new Kge.CursorTimeoutContext(i,Symbol()),a={...this.options,timeoutContext:o,...n.timeoutMS!=null&&{timeoutMode:Kge.CursorTimeoutMode.LIFETIME}},u=new pmt.ClientBulkWriteCursor(this.client,r,a);try{await s.merge(u)}catch(c){if(c instanceof k0.MongoServerError&&!(c instanceof k0.MongoClientBulkWriteError)){let l=new k0.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw l.cause=c,l.partialResult=s.bulkWriteResult,l}else throw c}}if(s.writeConcernErrors.length>0||s.writeErrors.size>0){let o=new k0.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw o.writeConcernErrors=s.writeConcernErrors,o.writeErrors=s.writeErrors,o.partialResult=s.bulkWriteResult,o}return s.bulkWriteResult}}};m7.ClientBulkWriteExecutor=cH});var hH=b(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.WaitingForSuitableServerEvent=tc.ServerSelectionSucceededEvent=tc.ServerSelectionFailedEvent=tc.ServerSelectionStartedEvent=tc.ServerSelectionEvent=void 0;var _mt=Ze(),y7=gi(),M0=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};tc.ServerSelectionEvent=M0;var lH=class extends M0{constructor(e,r,n){super(e,r,n),this.name=y7.SERVER_SELECTION_STARTED,this.message="Server selection started"}};tc.ServerSelectionStartedEvent=lH;var dH=class extends M0{constructor(e,r,n,i){super(e,r,i),this.name=y7.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};tc.ServerSelectionFailedEvent=dH;var pH=class extends M0{constructor(e,r,n,i){super(e,r,i),this.name=y7.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:s,port:o}=_mt.HostAddress.fromString(n).toHostPort();this.serverHost=s,this.serverPort=o}};tc.ServerSelectionSucceededEvent=pH;var fH=class extends M0{constructor(e,r,n,i){super(e,r,i),this.name=y7.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};tc.WaitingForSuitableServerEvent=fH});var yH=b(Yb=>{"use strict";Object.defineProperty(Yb,"__esModule",{value:!0});Yb.SrvPoller=Yb.SrvPollingEvent=void 0;var Emt=require("dns"),mH=require("timers"),vmt=Fe(),Smt=Qa(),_v=Ze(),g7=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>_v.HostAddress.fromSrvRecord(e).toString()))}};Yb.SrvPollingEvent=g7;var b7=class t extends Smt.TypedEventEmitter{constructor(e){if(super(),this.on("error",_v.noop),!e||!e.srvHost)throw new vmt.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,mH.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,mH.clearTimeout)(this._timeout),this._timeout=(0,mH.setTimeout)(()=>{this._poll().then(void 0,_v.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new g7(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await Emt.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let i of r)try{(0,_v.checkParentDomainMatch)(i.name,this.srvHost),n.push(i)}catch(s){(0,_v.squashError)(s)}if(!n.length){this.failure();return}this.success(n)}};Yb.SrvPoller=b7;b7.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var Zge=b(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});Qb.ServerCapabilities=Qb.Topology=void 0;var wmt=dG(),_a=gi(),Cd=Fe(),Nn=I1(),Amt=Qa(),Ev=ps(),gH=Vi(),ba=Ze(),$t=Wa(),ih=ET(),Hge=eG(),_H=Z3(),bH=l3(),oh=hH(),_7=yH(),zge=yV(),Cmt=0,vv=(0,ba.makeStateMachine)({[$t.STATE_CLOSED]:[$t.STATE_CLOSED,$t.STATE_CONNECTING],[$t.STATE_CONNECTING]:[$t.STATE_CONNECTING,$t.STATE_CLOSING,$t.STATE_CONNECTED,$t.STATE_CLOSED],[$t.STATE_CONNECTED]:[$t.STATE_CONNECTED,$t.STATE_CLOSING,$t.STATE_CLOSED],[$t.STATE_CLOSING]:[$t.STATE_CLOSING,$t.STATE_CLOSED]}),co=class t extends Amt.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",ba.noop),this.client=e,n=n??{hosts:[ba.HostAddress.fromString("localhost:27017")],...Object.fromEntries(wmt.DEFAULT_OPTIONS.entries())},typeof r=="string"?r=[ba.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let i=[];for(let c of r)if(typeof c=="string")i.push(ba.HostAddress.fromString(c));else if(c instanceof ba.HostAddress)i.push(c);else throw new Cd.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let s=Tmt(n),o=Cmt++,a=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=i.length?i:(0,ba.shuffle)(i,n.srvMaxHosts),u=new Map;for(let c of a)u.set(c.toString(),new _H.ServerDescription(c));this.waitQueue=new ba.List,this.s={id:o,options:n,seedlist:i,state:$t.STATE_CLOSED,description:new zge.TopologyDescription(s,u,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new _7.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,i=r!==$t.TopologyType.Sharded&&n===$t.TopologyType.Sharded,o=!!this.s.srvPoller?.listeners(_7.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);i&&!o&&(this.s.srvPoller?.on(_7.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(Wge(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new ih.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new E7(this.lastHello())}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===$t.STATE_CONNECTED)return this;vv(this,$t.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new ih.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new ih.TopologyDescriptionChangedEvent(this.s.id,new zge.TopologyDescription($t.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(a=>[a.address,Qge(this,a)])),this.s.options.loadBalanced)for(let a of r){let u=new _H.ServerDescription(a.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(u)}let n=this.client.s.options.serverSelectionTimeoutMS,i=e.readPreference??Ev.ReadPreference.primary,s=gH.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),o={operationName:"handshake",...e,timeoutContext:s};try{let a=await this.selectServer((0,bH.readPreferenceServerSelector)(i),o);if(!(this.s.options.__skipPingOnConnect===!0)&&this.s.credentials){let c=await a.pool.checkOut({timeoutContext:s});return a.pool.checkIn(c),vv(this,$t.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}return vv(this,$t.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}catch(a){throw this.close(),a}}closeCheckedOutConnections(){for(let e of this.s.servers.values())return e.closeCheckedOutConnections()}close(){if(!(this.s.state===$t.STATE_CLOSED||this.s.state===$t.STATE_CLOSING)){for(let e of this.s.servers.values())Yge(e,this);this.s.servers.clear(),vv(this,$t.STATE_CLOSING),Xge(this.waitQueue,new Cd.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(_7.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),vv(this,$t.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new ih.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,bH.readPreferenceServerSelector)(Ev.ReadPreference.fromString(e));else{let f;e instanceof Ev.ReadPreference?f=e:(Ev.ReadPreference.translate(r),f=r.readPreference||Ev.ReadPreference.primary),n=(0,bH.readPreferenceServerSelector)(f)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.ServerSelectionStartedEvent(e,this.description,r.operationName));let i;r.timeoutContext?i=r.timeoutContext.serverSelectionTimeout:i=gH.Timeout.expires(r.serverSelectionTimeoutMS??0);let s=this.description.type===$t.TopologyType.Sharded,o=r.session,a=o&&o.transaction;if(s&&a&&a.server)return this.client.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.ServerSelectionSucceededEvent(e,this.description,a.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&i?.clear(),a.server;let{promise:u,resolve:c,reject:l}=(0,ba.promiseWithResolvers)(),d={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:a,resolve:c,reject:l,cancelled:!1,startTime:(0,ba.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer},p=(0,ba.addAbortListener)(r.signal,function(){d.cancelled=!0,l(this.reason)});this.waitQueue.push(d),Jge(this);try{i?.throwIfExpired();let f=await(i?Promise.race([u,i]):u);return r.timeoutContext?.csotEnabled()&&f.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=f.description.minRoundTripTime),f}catch(f){if(gH.TimeoutError.is(f)){d.cancelled=!0;let h=new Cd.MongoServerSelectionError(`Server selection timed out after ${i?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.ServerSelectionFailedEvent(e,this.description,h,r.operationName)),r.timeoutContext?.csotEnabled()?new Cd.MongoOperationTimeoutError("Timed out during server selection",{cause:h}):h}throw f}finally{p?.[ba.kDispose](),r.timeoutContext?.clearServerSelectionTimeout&&i?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||Omt(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let i=e.$clusterTime;i&&(0,$t._advanceClusterTime)(this,i);let s=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new Cd.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!s){let o=this.s.description.servers.get(e.address);o&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new ih.ServerDescriptionChangedEvent(this.s.id,e.address,n,o))}Wge(this,e),this.waitQueue.length>0&&Jge(this),s||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new ih.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===$t.STATE_CONNECTED}isDestroyed(){return this.s.state===$t.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(i=>i.type!==$t.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};Qb.Topology=co;co.SERVER_OPENING=_a.SERVER_OPENING;co.SERVER_CLOSED=_a.SERVER_CLOSED;co.SERVER_DESCRIPTION_CHANGED=_a.SERVER_DESCRIPTION_CHANGED;co.TOPOLOGY_OPENING=_a.TOPOLOGY_OPENING;co.TOPOLOGY_CLOSED=_a.TOPOLOGY_CLOSED;co.TOPOLOGY_DESCRIPTION_CHANGED=_a.TOPOLOGY_DESCRIPTION_CHANGED;co.ERROR=_a.ERROR;co.OPEN=_a.OPEN;co.CONNECT=_a.CONNECT;co.CLOSE=_a.CLOSE;co.TIMEOUT=_a.TIMEOUT;function Yge(t,e){for(let r of _a.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.close(),e.emitAndLog(co.SERVER_CLOSED,new ih.ServerClosedEvent(e.s.id,t.description.address));for(let r of _a.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function Tmt(t){return t?.directConnection?$t.TopologyType.Single:t?.replicaSet?$t.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?$t.TopologyType.LoadBalanced:$t.TopologyType.Unknown}function Qge(t,e){t.emitAndLog(co.SERVER_OPENING,new ih.ServerOpeningEvent(t.s.id,e.address));let r=new Hge.Server(t,e,t.s.options);for(let n of _a.SERVER_RELAY_EVENTS)r.on(n,i=>t.emit(n,i));return r.on(Hge.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function Wge(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof Cd.MongoError&&e.error.hasErrorLabel(Cd.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(Cd.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==$t.ServerType.Unknown&&n===$t.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=Qge(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let i=t.s.servers.get(n);t.s.servers.delete(n),i&&Yge(i,t)}}function Xge(t,e){for(;t.length;){let r=t.shift();r&&(r.cancelled||(r.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function Jge(t){if(t.s.state===$t.STATE_CLOSED){Xge(t.waitQueue,new Cd.MongoTopologyClosedError);return}let e=t.description.type===$t.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t.waitQueue.length;for(let i=0;i<n;++i){let s=t.waitQueue.shift();if(!s||s.cancelled)continue;let o;try{let c=s.serverSelector,l=s.previousServer;o=c?c(t.description,r,l?[l]:[]):r}catch(c){t.client.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);continue}let a;if(o.length===0){s.waitingLogged||(t.client.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.WaitingForSuitableServerEvent(s.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,ba.now)()-s.startTime):-1,s.operationName)),s.waitingLogged=!0),t.waitQueue.push(s);continue}else if(o.length===1)a=t.s.servers.get(o[0].address);else{let c=(0,ba.shuffle)(o,2),l=t.s.servers.get(c[0].address),d=t.s.servers.get(c[1].address);a=l&&d&&l.s.operationCount<d.s.operationCount?l:d}if(!a){let c=new Cd.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);return}let u=s.transaction;e&&u&&u.isActive&&a&&u.pinServer(a),t.client.mongoLogger?.willLog(Nn.MongoLoggableComponent.SERVER_SELECTION,Nn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Nn.MongoLoggableComponent.SERVER_SELECTION,new oh.ServerSelectionSucceededEvent(s.serverSelector,s.topologyDescription,a.pool.address,s.operationName)),s.resolve(a)}if(t.waitQueue.length>0)for(let[,i]of t.s.servers)process.nextTick(function(){return i.requestCheck()})}function Omt(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,_H.compareTopologyVersion)(n,e.topologyVersion)>0}var E7=class{constructor(e){this.minWireVersion=e.minWireVersion||0,this.maxWireVersion=e.maxWireVersion||0}get hasAggregationCursor(){return!0}get hasWriteCommands(){return!0}get hasTextSearch(){return!0}get hasAuthCommands(){return!0}get hasListCollectionsCommand(){return!0}get hasListIndexesCommand(){return!0}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return!0}get commandsTakeCollation(){return!0}};Qb.ServerCapabilities=E7});var W1=b(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});Xb.MongoClient=Xb.ServerApiVersion=void 0;var EH=require("fs"),xmt=yr(),Imt=I0(),Rmt=IC(),Dmt=bd(),vH=JU(),kmt=kr(),e2e=dG(),Mmt=gi(),Pmt=VT(),SH=Fe(),Nmt=eH(),t2e=I1(),Fmt=Qa(),Bmt=Gge(),qmt=fs(),Lmt=Hr(),r2e=ps(),jmt=Ib(),$mt=l3(),n2e=Zge(),i2e=xb(),Wi=Ze();Xb.ServerApiVersion=Object.freeze({v1:"1"});var v7=class extends Fmt.TypedEventEmitter{constructor(e,r){super(),this.driverInfoList=[],this.on("error",Wi.noop),this.options=(0,e2e.parseOptions)(e,this,r),this.appendMetadata(this.options.driverInfo);let n=Object.values(this.options.mongoLoggerOptions.componentSeverities).some(s=>s!==t2e.SeverityLevel.OFF);this.mongoLogger=n?new t2e.MongoLogger(this.options.mongoLoggerOptions):void 0;let i=this;this.s={url:e,bsonOptions:(0,xmt.resolveBSONOptions)(this.options),namespace:(0,Wi.ns)("admin"),hasBeenClosed:!1,sessionPool:new i2e.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new Nmt.MongoClientAuthProviders,get options(){return i.options},get readConcern(){return i.options.readConcern},get writeConcern(){return i.options.writeConcern},get readPreference(){return i.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}appendMetadata(e){this.driverInfoList.some(n=>(0,vH.isDriverInfoEqual)(n,e))||(this.driverInfoList.push(e),this.options.metadata=(0,vH.makeClientMetadata)(this.driverInfoList,this.options),this.options.extendedMetadata=(0,vH.addContainerMetadata)(this.options.metadata).then(void 0,Wi.squashError).then(n=>n??{}))}checkForNonGenuineHosts(){let e=this.options.hosts.filter(s=>(0,Wi.isHostMatch)(Wi.DOCUMENT_DB_CHECK,s.host)),r=(0,Wi.isHostMatch)(Wi.DOCUMENT_DB_CHECK,this.options.srvHost),n=this.options.hosts.filter(s=>(0,Wi.isHostMatch)(Wi.COSMOS_DB_CHECK,s.host)),i=(0,Wi.isHostMatch)(Wi.COSMOS_DB_CHECK,this.options.srvHost);e.length!==0||r?this.mongoLogger?.info("client",Wi.DOCUMENT_DB_MSG):(n.length!==0||i)&&this.mongoLogger?.info("client",Wi.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(e){this.options.monitorCommands=e}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new SH.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new Bmt.ClientBulkWriteExecutor(this,e,(0,Wi.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this.options;if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await EH.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await EH.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await EH.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,e2e.resolveSRVRecord)(e);for(let[i,s]of n.entries())e.hosts[i]=s}if(e.credentials?.mechanism===Dmt.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||Rmt.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let s of e.hosts)if(!(0,Wi.hostMatchesWildcards)(s.toHostPort().host,n))throw new SH.MongoInvalidArgumentError(`Host '${s}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new n2e.Topology(this,e.hosts,e),this.topology.once(n2e.Topology.OPEN,()=>this.emit("open",this));for(let n of Mmt.MONGO_CLIENT_EVENTS)this.topology.on(n,(...i)=>this.emit(n,...i));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let e=Array.from(this.s.activeCursors,c=>c.close());this.s.activeCursors.clear(),await Promise.all(e);let r=Array.from(this.s.activeSessions,c=>c.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;let n=(0,$mt.readPreferenceServerSelector)(r2e.ReadPreference.primaryPreferred),i=this.topology.description,s=Array.from(i.servers.values());if(n(i,s).length!==0){let c=Array.from(this.s.sessionPool.sessions,({id:l})=>l);if(c.length!==0)try{class l extends Lmt.AbstractOperation{constructor(){super(...arguments),this.ns=Wi.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=kmt.MongoDBResponse}buildCommand(p,f){return{endSessions:c}}buildOptions(p){return{timeoutContext:p,readPreference:r2e.ReadPreference.primaryPreferred,noResponse:!0}}get commandName(){return"endSessions"}}await(0,qmt.executeOperation)(this,new l)}catch(l){(0,Wi.squashError)(l)}}let a=this.topology;this.topology=void 0,a.close();let{encrypter:u}=this.options;u&&await u.close(this)}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this.options,r);return new Pmt.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new i2e.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this.options);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},i=typeof e=="function"?e:r;if(i==null)throw new SH.MongoInvalidArgumentError("Missing required callback parameter");let s=this.startSession(n);try{return await i(s)}finally{try{await s.endSession()}catch(o){(0,Wi.squashError)(o)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new Imt.ChangeStream(this,e,(0,Wi.resolveOptions)(this,r))}};Xb.MongoClient=v7;(0,jmt.configureResourceManagement)(v7.prototype)});var Ib=b(S7=>{"use strict";Object.defineProperty(S7,"__esModule",{value:!0});S7.configureResourceManagement=Sv;S7.configureExplicitResourceManagement=Umt;function Sv(t){Symbol.asyncDispose&&Object.defineProperty(t,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function Umt(){let{MongoClient:t}=W1(),{ClientSession:e}=xb(),{AbstractCursor:r}=Bs(),{ChangeStream:n}=I0();Sv(t.prototype),Sv(e.prototype),Sv(r.prototype),Sv(n.prototype)}});var Bs=b(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.CursorTimeoutContext=ei.AbstractCursor=ei.CursorTimeoutMode=ei.CURSOR_FLAGS=void 0;var u2e=require("stream"),Zb=yr(),Ji=Fe(),Kmt=Qa(),s2e=fs(),Vmt=iU(),Gmt=kfe(),o2e=el(),w7=ps(),Hmt=Ib(),zmt=xb(),wH=Vi(),ru=Ze();ei.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function a2e(){this.client.s.activeCursors.delete(this)}ei.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var wv=class extends Kmt.TypedEventEmitter{constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,this.on("error",ru.noop),!e.s.isMongoClient)throw new Ji.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof w7.ReadPreference?n.readPreference:w7.ReadPreference.primary,...(0,Zb.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new Ji.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=ei.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=ei.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===ei.CursorTimeoutMode.LIFETIME)throw new Ji.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new Ji.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===ei.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let i=o2e.ReadConcern.fromOptions(n);i&&(this.cursorOptions.readConcern=i),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),this.cursorSession=n.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext,this.signal=n.signal,this.abortListener=(0,ru.addAbortListener)(this.signal,()=>{this.close().then(void 0,ru.squashError)}),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){this.cursorClient.s.activeCursors.add(this),this.listeners("close").includes(a2e)||this.once("close",a2e)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let i=0;i<n;i++){let s=this.documents?.shift(this.deserializationOptions);s!=null&&r.push(s)}return r}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,ru.squashError)(e)}}}stream(e){let r=new AH(this),n=(0,ru.addAbortListener)(this.signal,function(){r.destroy(this.reason)});if(r.once("end",()=>{n?.[ru.kDispose]()}),e?.transform){let i=e.transform,s=r.pipe(new u2e.Transform({objectMode:!0,highWaterMark:1,transform(o,a,u){try{let c=i(o);u(void 0,c)}catch(c){u(c)}}}));return r.on("error",o=>s.emit("error",o)),s}return r}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===Zb.Long.ZERO)return!1;this.cursorOptions.timeoutMode===ei.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===ei.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===Zb.Long.ZERO)throw new Ji.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===ei.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===ei.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===Zb.Long.ZERO)throw new Ji.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===ei.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===ei.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(this.signal?.throwIfAborted(),typeof e!="function")throw new Ji.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let i of n)e.push(await this.transformDocument(i));else e.push(...n)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!ei.CURSOR_FLAGS.includes(e))throw new Ji.MongoInvalidArgumentError(`Flag ${e} is not one of ${ei.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new Ji.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof w7.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=w7.ReadPreference.fromString(e);else throw new Ji.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=o2e.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Ji.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new Ji.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new Ji.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new Ji.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");this.initialized&&(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1&&(this.cursorSession.hasEnded||this.cursorSession.endSession().then(void 0,ru.squashError),this.cursorSession=null))}async getMore(e){if(this.cursorId==null)throw new Ji.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new Ji.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new Ji.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r={...this.cursorOptions,session:this.cursorSession,batchSize:e},n=new Vmt.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,r);return await(0,s2e.executeOperation)(this.cursorClient,n,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new Av(wH.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))return;let e=this.cursorOptions.batchSize||1e3;try{let r=await this.getMore(e);this.cursorId=r.id,this.documents=r}catch(r){try{await this.cleanup(void 0,r)}catch(n){(0,ru.squashError)(n)}throw r}this.isDead&&await this.cleanup()}async cleanup(e,r){this.abortListener?.[ru.kDispose](),this.isClosed=!0;let n=()=>e!=null?(this.timeoutContext?.clear(),new Av(wH.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();await(async o=>{try{await o()}finally{this.emitClose()}})(async()=>{let o=this.cursorSession;if(o)try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!o.hasEnded){this.isKilled=!0;let a=this.cursorId;this.cursorId=Zb.Long.ZERO,await(0,s2e.executeOperation)(this.cursorClient,new Gmt.KillCursorsOperation(a,this.cursorNamespace,this.selectedServer,{session:o}),n())}}catch(a){(0,ru.squashError)(a)}finally{o.owner===this&&await o.endSession({error:r}),o.inTransaction()||(0,zmt.maybeClearPinnedConnection)(o,{error:r})}})}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new Ji.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,ru.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new Ji.MongoCursorInUseError}};ei.AbstractCursor=wv;wv.CLOSE="close";var AH=class extends u2e.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===Zb.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,ru.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,ru.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e)).catch(e=>{this._readInProgress=!1,this.destroy(e)})}};(0,Hmt.configureResourceManagement)(wv.prototype);var Av=class t extends wH.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};ei.CursorTimeoutContext=Av});var C7=b(A7=>{"use strict";Object.defineProperty(A7,"__esModule",{value:!0});A7.ExplainableCursor=void 0;var Wmt=Bs(),CH=class extends Wmt.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,i;return e==null&&r==null?(n=void 0,i=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,i=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,i=r),{timeout:i,explain:n}}};A7.ExplainableCursor=CH});var pv=b(T7=>{"use strict";Object.defineProperty(T7,"__esModule",{value:!0});T7.AggregationCursor=void 0;var TH=Fe(),c2e=a3(),l2e=f3(),d2e=fs(),Jmt=Ze(),p2e=Bs(),Ymt=C7(),OH=class t extends Ymt.ExplainableCursor{constructor(e,r,n=[],i={}){super(e,r,i),this.pipeline=n,this.aggregateOptions=i;let s=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===p2e.CursorTimeoutMode.ITERATION&&(s?.$merge!=null||s?.$out!=null))throw new TH.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,Jmt.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,c2e.validateExplainTimeoutOptions)(r,c2e.Explain.fromOptions(r))}catch{throw new TH.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new l2e.AggregateOperation(this.namespace,this.pipeline,r),i=await(0,d2e.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:i}}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,d2e.executeOperation)(this.client,new l2e.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===p2e.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new TH.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};T7.AggregationCursor=OH});var xH=b(I7=>{"use strict";Object.defineProperty(I7,"__esModule",{value:!0});I7.CountOperation=void 0;var Qmt=kr(),Xmt=Jn(),O7=Hr(),x7=class extends Xmt.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.SERVER_COMMAND_RESPONSE_TYPE=Qmt.MongoDBResponse,this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}buildCommandDocument(e,r){let n=this.options,i={count:this.collectionName,query:this.query};return typeof n.limit=="number"&&(i.limit=n.limit),typeof n.skip=="number"&&(i.skip=n.skip),n.hint!=null&&(i.hint=n.hint),typeof n.maxTimeMS=="number"&&(i.maxTimeMS=n.maxTimeMS),i}handleOk(e){return e.getNumber("n")??0}};I7.CountOperation=x7;(0,O7.defineAspects)(x7,[O7.Aspect.READ_OPERATION,O7.Aspect.RETRYABLE,O7.Aspect.SUPPORTS_RAW_DATA])});var f2e=b(D7=>{"use strict";Object.defineProperty(D7,"__esModule",{value:!0});D7.FindOperation=void 0;var IH=kr(),Zmt=Fe(),e0t=J2(),t0t=Ze(),r0t=Jn(),e_=Hr(),R7=class extends r0t.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=IH.CursorResponse,this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new Zmt.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?IH.ExplainedCursorResponse:IH.CursorResponse}get commandName(){return"find"}buildOptions(e){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:e}}handleOk(e){return e}buildCommandDocument(){return n0t(this.ns,this.filter,this.options)}};D7.FindOperation=R7;function n0t(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,e0t.formatSort)(r.sort)),r.projection){let i=r.projection;i&&Array.isArray(i)&&(i=i.length?i.reduce((s,o)=>(s[o]=1,s),{}):{_id:1}),n.projection=i}return r.hint&&(n.hint=(0,t0t.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?n.limit=-r.batchSize:r.batchSize===r.limit?n.batchSize=r.batchSize+1:n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,e_.defineAspects)(R7,[e_.Aspect.READ_OPERATION,e_.Aspect.RETRYABLE,e_.Aspect.EXPLAINABLE,e_.Aspect.CURSOR_CREATING,e_.Aspect.SUPPORTS_RAW_DATA])});var PH=b(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});t_.FindCursor=t_.FLAGS=void 0;var i0t=kr(),rc=Fe(),h2e=a3(),s0t=xH(),RH=fs(),m2e=f2e(),DH=J2(),kH=Ze(),o0t=C7();t_.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var MH=class t extends o0t.ExplainableCursor{constructor(e,r,n={},i={}){super(e,r,i),this.numReturned=0,this.cursorFilter=n,this.findOptions=i,i.sort!=null&&(this.findOptions.sort=(0,DH.formatSort)(i.sort))}clone(){let e=(0,kH.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,h2e.validateExplainTimeoutOptions)(r,h2e.Explain.fromOptions(r))}catch{throw new rc.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new m2e.FindOperation(this.namespace,this.cursorFilter,r),i=await(0,RH.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=i.batchSize,{server:n.server,session:e,response:i}}async getMore(e){let r=this.numReturned;if(r){let i=this.findOptions.limit;if(e=i&&i>0&&r+e>i?i-r:e,e<=0){try{await this.close()}catch(s){(0,kH.squashError)(s)}return i0t.CursorResponse.emptyGetMore}}let n=await super.getMore(e);return this.numReturned=this.numReturned+n.batchSize,n}async count(e){if((0,kH.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new rc.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,RH.executeOperation)(this.client,new s0t.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,RH.executeOperation)(this.client,new m2e.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new rc.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,DH.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new rc.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new rc.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new rc.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new rc.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,DH.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new rc.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new rc.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new rc.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new rc.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new rc.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};t_.FindCursor=MH});var FH=b(k7=>{"use strict";Object.defineProperty(k7,"__esModule",{value:!0});k7.ListIndexesCursor=void 0;var a0t=fs(),u0t=lv(),c0t=Bs(),NH=class t extends c0t.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new u0t.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,a0t.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};k7.ListIndexesCursor=NH});var y2e=b(M7=>{"use strict";Object.defineProperty(M7,"__esModule",{value:!0});M7.ListSearchIndexesCursor=void 0;var l0t=pv(),BH=class extends l0t.AggregationCursor{constructor({fullNamespace:e,client:r},n,i={}){let s=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,s,i)}};M7.ListSearchIndexesCursor=BH});var g2e=b(N7=>{"use strict";Object.defineProperty(N7,"__esModule",{value:!0});N7.DistinctOperation=void 0;var d0t=kr(),p0t=Jn(),Cv=Hr(),P7=class extends p0t.CommandOperation{constructor(e,r,n,i){super(e,i),this.SERVER_COMMAND_RESPONSE_TYPE=d0t.MongoDBResponse,this.options=i??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}buildCommandDocument(e){let r={distinct:this.collection.collectionName,key:this.key,query:this.query};return this.options.comment!==void 0&&(r.comment=this.options.comment),this.options.hint!=null&&(r.hint=this.options.hint),r}handleOk(e){return this.explain?e.toObject(this.bsonOptions):e.toObject(this.bsonOptions).values}};N7.DistinctOperation=P7;(0,Cv.defineAspects)(P7,[Cv.Aspect.READ_OPERATION,Cv.Aspect.RETRYABLE,Cv.Aspect.EXPLAINABLE,Cv.Aspect.SUPPORTS_RAW_DATA])});var b2e=b(B7=>{"use strict";Object.defineProperty(B7,"__esModule",{value:!0});B7.EstimatedDocumentCountOperation=void 0;var f0t=kr(),h0t=Jn(),Tv=Hr(),F7=class extends h0t.CommandOperation{constructor(e,r={}){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=f0t.MongoDBResponse,this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}buildCommandDocument(e,r){let n={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(n.comment=this.options.comment),n}handleOk(e){return e.getNumber("n")??0}};B7.EstimatedDocumentCountOperation=F7;(0,Tv.defineAspects)(F7,[Tv.Aspect.READ_OPERATION,Tv.Aspect.RETRYABLE,Tv.Aspect.CURSOR_CREATING,Tv.Aspect.SUPPORTS_RAW_DATA])});var $H=b(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.FindOneAndUpdateOperation=nu.FindOneAndReplaceOperation=nu.FindOneAndDeleteOperation=nu.FindAndModifyOperation=nu.ReturnDocument=void 0;var m0t=kr(),ah=Fe(),y0t=ps(),g0t=J2(),q7=Ze(),b0t=Jn(),Ov=Hr();nu.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function _2e(t,e){return t.new=e.returnDocument===nu.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var P0=class extends b0t.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=m0t.MongoDBResponse,this.options=n,this.readPreference=y0t.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}buildCommandDocument(e,r){let n=this.options,i={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};n.includeResultMetadata??=!1;let s=(0,g0t.formatSort)(n.sort);if(s&&(i.sort=s),n.projection&&(i.fields=n.projection),n.maxTimeMS&&(i.maxTimeMS=n.maxTimeMS),n.writeConcern&&(i.writeConcern=n.writeConcern),n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),(0,q7.decorateWithCollation)(i,n),n.hint){if(this.writeConcern?.w===0&&(0,q7.maxWireVersion)(e)<9)throw new ah.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");i.hint=n.hint}return i}handleOk(e){let r=super.handleOk(e);return this.options.includeResultMetadata?r:r.value??null}};nu.FindAndModifyOperation=P0;var qH=class extends P0{constructor(e,r,n){if(r==null||typeof r!="object")throw new ah.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n)}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.remove=!0,n}};nu.FindOneAndDeleteOperation=qH;var LH=class extends P0{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new ah.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new ah.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,q7.hasAtomicOperators)(n))throw new ah.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,i),this.replacement=n}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.replacement,_2e(n,this.options),n}};nu.FindOneAndReplaceOperation=LH;var jH=class extends P0{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new ah.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new ah.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,q7.hasAtomicOperators)(n,i))throw new ah.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,i),this.update=n,this.options=i}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.update,_2e(n,this.options),this.options.arrayFilters&&(n.arrayFilters=this.options.arrayFilters),n}};nu.FindOneAndUpdateOperation=jH;(0,Ov.defineAspects)(P0,[Ov.Aspect.WRITE_OPERATION,Ov.Aspect.RETRYABLE,Ov.Aspect.EXPLAINABLE,Ov.Aspect.SUPPORTS_RAW_DATA])});var E2e=b(L7=>{"use strict";Object.defineProperty(L7,"__esModule",{value:!0});L7.CreateSearchIndexesOperation=void 0;var _0t=kr(),E0t=Hr(),UH=class extends E0t.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=_0t.MongoDBResponse,this.collection=e,this.descriptions=r,this.ns=e.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(e,r){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(e){return super.handleOk(e).indexesCreated.map(r=>r.name)}buildOptions(e){return{session:this.session,timeoutContext:e}}};L7.CreateSearchIndexesOperation=UH});var S2e=b(j7=>{"use strict";Object.defineProperty(j7,"__esModule",{value:!0});j7.DropSearchIndexOperation=void 0;var v0t=kr(),v2e=Fe(),S0t=Hr(),KH=class extends S0t.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=v0t.MongoDBResponse,this.collection=e,this.name=r,this.ns=e.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(e,r){let i={dropSearchIndex:this.collection.fullNamespace.collection};return typeof this.name=="string"&&(i.name=this.name),i}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){if(!(e instanceof v2e.MongoServerError&&e.code===v2e.MONGODB_ERROR_CODES.NamespaceNotFound))throw e}};j7.DropSearchIndexOperation=KH});var w2e=b($7=>{"use strict";Object.defineProperty($7,"__esModule",{value:!0});$7.UpdateSearchIndexOperation=void 0;var w0t=kr(),A0t=Hr(),VH=class extends A0t.AbstractOperation{constructor(e,r,n){super(),this.SERVER_COMMAND_RESPONSE_TYPE=w0t.MongoDBResponse,this.collection=e,this.name=r,this.definition=n,this.ns=e.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(e,r){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}};$7.UpdateSearchIndexOperation=VH});var Kb=b(K7=>{"use strict";Object.defineProperty(K7,"__esModule",{value:!0});K7.Collection=void 0;var C0t=yr(),T0t=J$(),O0t=Q$(),x0t=I0(),I0t=pv(),R0t=PH(),D0t=FH(),k0t=y2e(),r_=Fe(),M0t=xH(),A2e=C$(),P0t=g2e(),N0t=b2e(),vi=fs(),GH=$H(),U7=lv(),F0t=D$(),B0t=SG(),q0t=E2e(),L0t=S2e(),j0t=w2e(),HH=P$(),$0t=el(),zH=ps(),Ur=Ze(),C2e=Do(),WH=class{constructor(e,r,n){this.db=e,this.s={db:e,options:n,namespace:new Ur.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??Ur.DEFAULT_PK_FACTORY,readPreference:zH.ReadPreference.fromOptions(n),bsonOptions:(0,C0t.resolveBSONOptions)(n,e),readConcern:$0t.ReadConcern.fromOptions(n),writeConcern:C2e.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,Ur.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,vi.executeOperation)(this.client,new F0t.InsertOneOperation(this,e,(0,Ur.resolveOptions)(this,r)))}async insertMany(e,r){if(!Array.isArray(e))throw new r_.MongoInvalidArgumentError('Argument "docs" must be an array of documents');r=(0,Ur.resolveOptions)(this,r??{});let n=C2e.WriteConcern.fromOptions(r)?.w!==0;try{let i=await this.bulkWrite(e.map(s=>({insertOne:{document:s}})),r);return{acknowledged:n,insertedCount:i.insertedCount,insertedIds:i.insertedIds}}catch(i){throw i&&i.message==="Operation must be an object with an operation key"?new r_.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):i}}async bulkWrite(e,r){if(!Array.isArray(e))throw new r_.MongoInvalidArgumentError('Argument "operations" must be an array of documents');r=(0,Ur.resolveOptions)(this,r??{}),this.client.topology!=null||await(0,vi.autoConnect)(this.client);let i=r.ordered===!1?this.initializeUnorderedBulkOp(r):this.initializeOrderedBulkOp(r);for(let s of e)i.raw(s);return await i.execute({...r})}async updateOne(e,r,n){return await(0,vi.executeOperation)(this.client,new HH.UpdateOneOperation(this.s.namespace,e,r,(0,Ur.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,vi.executeOperation)(this.client,new HH.ReplaceOneOperation(this.s.namespace,e,r,(0,Ur.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,vi.executeOperation)(this.client,new HH.UpdateManyOperation(this.s.namespace,e,r,(0,Ur.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,vi.executeOperation)(this.client,new A2e.DeleteOneOperation(this.s.namespace,e,(0,Ur.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,vi.executeOperation)(this.client,new A2e.DeleteManyOperation(this.s.namespace,e,(0,Ur.resolveOptions)(this,r)))}async rename(e,r){return await(0,vi.executeOperation)(this.client,new B0t.RenameOperation(this,e,(0,Ur.resolveOptions)(void 0,{...r,readPreference:zH.ReadPreference.PRIMARY})))}async drop(e){return await this.db.dropCollection(this.collectionName,e)}async findOne(e={},r={}){let{batchSize:n,noCursorTimeout:i,...s}=r;s.singleBatch=!0;let o=this.find(e,s).limit(1),a=await o.next();return await o.close(),a}find(e={},r={}){return new R0t.FindCursor(this.client,this.s.namespace,e,(0,Ur.resolveOptions)(this,r))}async options(e){e=(0,Ur.resolveOptions)(this,e);let[r]=await this.db.listCollections({name:this.collectionName},{...e,nameOnly:!1}).toArray();if(r==null||r.options==null)throw new r_.MongoAPIError(`collection ${this.namespace} not found`);return r.options}async isCapped(e){let{capped:r}=await this.options(e);return!!r}async createIndex(e,r){return(await(0,vi.executeOperation)(this.client,U7.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,Ur.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,vi.executeOperation)(this.client,U7.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,Ur.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,vi.executeOperation)(this.client,new U7.DropIndexOperation(this,e,{...(0,Ur.resolveOptions)(this,r),readPreference:zH.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,vi.executeOperation)(this.client,new U7.DropIndexOperation(this,"*",(0,Ur.resolveOptions)(this,e))),!0}catch(r){if(r instanceof r_.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new D0t.ListIndexesCursor(this,(0,Ur.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],i=new Set(await this.listIndexes(r).map(({name:s})=>s).toArray());return n.every(s=>i.has(s))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,vi.executeOperation)(this.client,new N0t.EstimatedDocumentCountOperation(this,(0,Ur.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let i=this.aggregate(n,r),s=await i.next();return await i.close(),s?.n??0}async distinct(e,r={},n={}){return await(0,vi.executeOperation)(this.client,new P0t.DistinctOperation(this,e,r,(0,Ur.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:s,key:o})=>[s,Object.entries(o)]))}async findOneAndDelete(e,r){return await(0,vi.executeOperation)(this.client,new GH.FindOneAndDeleteOperation(this,e,(0,Ur.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,vi.executeOperation)(this.client,new GH.FindOneAndReplaceOperation(this,e,r,(0,Ur.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,vi.executeOperation)(this.client,new GH.FindOneAndUpdateOperation(this,e,r,(0,Ur.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new r_.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new I0t.AggregationCursor(this.client,this.s.namespace,e,(0,Ur.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new x0t.ChangeStream(this,e,(0,Ur.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new O0t.UnorderedBulkOperation(this,(0,Ur.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new T0t.OrderedBulkOperation(this,(0,Ur.resolveOptions)(this,e))}async count(e={},r={}){return await(0,vi.executeOperation)(this.client,new M0t.CountOperation(this.fullNamespace,e,(0,Ur.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new k0t.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,vi.executeOperation)(this.client,new q0t.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,vi.executeOperation)(this.client,new L0t.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,vi.executeOperation)(this.client,new j0t.UpdateSearchIndexOperation(this,e,r))}};K7.Collection=WH});var QH=b(V7=>{"use strict";Object.defineProperty(V7,"__esModule",{value:!0});V7.ChangeStreamCursor=void 0;var JH=I0(),T2e=gi(),U0t=f3(),K0t=fs(),O2e=Ze(),V0t=Bs(),YH=class t extends V0t.AbstractCursor{constructor(e,r,n=[],i={}){super(e,r,{...i,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=i,this._resumeToken=null,this.startAtOperationTime=i.startAtOperationTime??null,i.startAfter?this.resumeToken=i.startAfter:i.resumeAfter&&(this.resumeToken=i.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(JH.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new U0t.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,K0t.executeOperation)(e.client,r,this.timeoutContext),i=r.server;return this.maxWireVersion=(0,O2e.maxWireVersion)(i),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit(T2e.INIT,n),this.emit(T2e.RESPONSE),{server:i,session:e,response:n}}async getMore(e){let r=await super.getMore(e);return this.maxWireVersion=(0,O2e.maxWireVersion)(this.server),this._processBatch(r),this.emit(JH.ChangeStream.MORE,r),this.emit(JH.ChangeStream.RESPONSE),r}};V7.ChangeStreamCursor=YH});var I0=b(H7=>{"use strict";Object.defineProperty(H7,"__esModule",{value:!0});H7.ChangeStream=void 0;var G0t=Kb(),vl=gi(),H0t=Bs(),z0t=QH(),W0t=VT(),_s=Fe(),J0t=W1(),Y0t=Qa(),Q0t=Ib(),X0t=Vi(),Td=Ze(),Z0t=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],N0={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},eyt=[vl.RESUME_TOKEN_CHANGED,vl.END,vl.CLOSE],tyt="A change stream document has been received that lacks a resume token (_id).",G7="ChangeStream is closed",nc=class t extends Y0t.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let i;if(delete this.options.writeConcern,e instanceof G0t.Collection)this.type=N0.COLLECTION,i=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof W0t.Db)this.type=N0.DATABASE,i=e.client.options.serverSelectionTimeoutMS;else if(e instanceof J0t.MongoClient)this.type=N0.CLUSTER,i=e.options.serverSelectionTimeoutMS;else throw new _s.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this.isClosed=!1,this.mode=!1,this.on("newListener",s=>{s==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",s=>{s==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new X0t.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:i}))}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof _s.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Td.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof _s.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Td.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.tryNext();return e?this._processChange(e):null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof _s.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Td.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,Td.squashError)(e)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(e){if(this.closed)throw new _s.MongoChangeStreamError(G7);return this.streamOptions=e,this.cursor.stream(e)}_setIsEmitter(){if(this.mode==="iterator")throw new _s.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new _s.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(e){let r=(0,Td.filterOptions)(e,Z0t);this.type===N0.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],i=this.type===N0.CLUSTER?this.parent:this.type===N0.DATABASE?this.parent.client:this.type===N0.COLLECTION?this.parent.client:null;if(i==null)throw new _s.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let s=new z0t.ChangeStreamCursor(i,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new H0t.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let o of eyt)s.on(o,a=>this.emit(o,a));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(s),s}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,Td.squashError)}_streamEvents(e){this._setIsEmitter();let r=this.cursorStream??e.stream();this.cursorStream=r,r.on("data",n=>{try{let i=this._processChange(n);this.emit(t.CHANGE,i)}catch(i){this.emit(t.ERROR,i)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(e){if(this.isClosed)throw new _s.MongoAPIError(G7);if(e==null)throw new _s.MongoRuntimeError(G7);if(e&&!e._id)throw new _s.MongoChangeStreamError(tyt);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this.isClosed||(r&&((0,_s.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof _s.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,Td.squashError)(n),this._resume(e))).then(()=>{e instanceof _s.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this.isClosed)throw new _s.MongoAPIError(G7);if(r&&((0,_s.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof _s.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,Td.squashError)(n)}if(await this._resume(e),e instanceof _s.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,Td.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,Td.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};H7.ChangeStream=nc;nc.RESPONSE=vl.RESPONSE;nc.MORE=vl.MORE;nc.INIT=vl.INIT;nc.CLOSE=vl.CLOSE;nc.CHANGE=vl.CHANGE;nc.END=vl.END;nc.ERROR=vl.ERROR;nc.RESUME_TOKEN_CHANGED=vl.RESUME_TOKEN_CHANGED;(0,Q0t.configureResourceManagement)(nc.prototype)});var XH=b(z7=>{"use strict";Object.defineProperty(z7,"__esModule",{value:!0});z7.GridFSBucketReadStream=void 0;var ryt=require("stream"),nyt=Bs(),iu=Fe(),iyt=Vi(),xv=class extends ryt.Readable{constructor(e,r,n,i,s){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:i,init:!1,expectedEnd:0,options:{start:0,end:0,...s},readPreference:n,timeoutContext:s?.timeoutMS!=null?new iyt.CSOTTimeoutContext({timeoutMS:s.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||ayt(this,()=>syt(this))}start(e=0){return x2e(this),this.s.options.start=e,this}end(e=0){return x2e(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};z7.GridFSBucketReadStream=xv;xv.FILE="file";function x2e(t){if(t.s.init)throw new iu.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function syt(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,d=>t.destroy(d));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,i=t.s.expected++,s=Math.min(t.s.file.chunkSize,n);if(r.n>i)return t.destroy(new iu.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${i}`));if(r.n<i)return t.destroy(new iu.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${i}`));let o=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(o.byteLength!==s)return n<=0?t.destroy(new iu.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new iu.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${o.byteLength}, expected: ${s}`));if(t.s.bytesRead+=o.byteLength,o.byteLength===0)return t.push(null);let a=null,u=null;t.s.bytesToSkip!=null&&(a=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=i===t.s.expectedEnd-1,l=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?u=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&l<r.data.byteLength&&(u=l),(a!=null||u!=null)&&(o=o.slice(a||0,u||o.byteLength)),t.push(o)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function oyt(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=i=>{if(t.destroyed)return;if(!i){let u=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new iu.MongoRuntimeError(u);return c.code="ENOENT",t.destroy(c)}if(i.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=uyt(t,i,t.s.options)}catch(a){return t.destroy(a)}let s={files_id:i._id};if(t.s.options&&t.s.options.start!=null){let a=Math.floor(t.s.options.start/i.chunkSize);a>0&&(s.n={$gte:a})}let o;try{o=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(a){return t.destroy(a)}t.s.cursor=t.s.chunks.find(s,{timeoutMode:t.s.options.timeoutMS!=null?nyt.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:o}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(i.length/i.chunkSize),t.s.file=i;try{t.s.bytesToTrim=cyt(t,i,t.s.cursor,t.s.options)}catch(a){return t.destroy(a)}t.emit(xv.FILE,i)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(i){t.destroyed||t.destroy(i);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,i=>{t.destroyed||t.destroy(i)})}function ayt(t,e){if(t.s.file)return e();t.s.init||(oyt(t),t.s.init=!0),t.once("file",()=>{e()})}function uyt(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new iu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new iu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new iu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new iu.MongoInvalidArgumentError("Start option must be defined")}function cyt(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new iu.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new iu.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let i=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-i),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new iu.MongoInvalidArgumentError("End option must be defined")}});var tz=b(J7=>{"use strict";Object.defineProperty(J7,"__esModule",{value:!0});J7.GridFSBucketWriteStream=void 0;var lyt=require("stream"),R2e=yr(),D2e=Bs(),Sl=Fe(),dyt=Vi(),I2e=Ze(),pyt=Do(),ZH=class extends lyt.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=pyt.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new R2e.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new dyt.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,I2e.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,hyt(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof Sl.MongoOperationTimeoutError)return F0(this,r,e);(0,I2e.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){yyt(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,gyt(this,e)}async abort(){if(this.state.streamEnd)throw new Sl.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new Sl.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};J7.GridFSBucketWriteStream=ZH;function F0(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function k2e(t,e,r){return{_id:new R2e.ObjectId,files_id:t,n:e,data:r}}async function fyt(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?D2e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(s){if(s instanceof Sl.MongoError&&s.code===Sl.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw s}n.find(s=>Object.keys(s.key).length===2&&s.key.files_id===1&&s.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function ez(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=myt(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.contentType,t.options.aliases,t.options.metadata);if(W7(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return F0(t,new Sl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},i=>F0(t,i,e));return}process.nextTick(e)}async function hyt(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},i;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let s={timeoutMode:e!=null?D2e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{i=await t.files.listIndexes(s).toArray()}catch(a){if(a instanceof Sl.MongoError&&a.code===Sl.MONGODB_ERROR_CODES.NamespaceNotFound)i=[];else throw a}i.find(a=>Object.keys(a.key).length===2&&a.key.filename===1&&a.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await fyt(t)}function myt(t,e,r,n,i,s,o){let a={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return i&&(a.contentType=i),s&&(a.aliases=s),o&&(a.metadata=o),a}function yyt(t,e,r,n){if(W7(t,n))return;let i=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=i.length,t.pos+i.length<t.chunkSizeBytes){i.copy(t.bufToStore,t.pos),t.pos+=i.length,process.nextTick(n);return}let s=i.length,o=t.chunkSizeBytes-t.pos,a=Math.min(o,i.length),u=0;for(;s>0;){let c=i.length-s;i.copy(t.bufToStore,t.pos,c,c+a),t.pos+=a,o-=a;let l;if(o===0){l=k2e(t.id,t.n,Buffer.from(t.bufToStore));let d=t.timeoutContext?.remainingTimeMS;if(d!=null&&d<=0)return F0(t,new Sl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++u,W7(t,n))return;t.chunks.insertOne(l,{writeConcern:t.writeConcern,timeoutMS:d}).then(()=>{--t.state.outstandingRequests,--u,u||ez(t,n)},p=>F0(t,p,n)),o=t.chunkSizeBytes,t.pos=0,++t.n}s-=a,a=Math.min(o,s)}}function gyt(t,e){if(t.pos===0)return ez(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=k2e(t.id,t.n,r);if(W7(t,e))return;let i=t.timeoutContext?.remainingTimeMS;if(i!=null&&i<=0)return F0(t,new Sl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:i}).then(()=>{--t.state.outstandingRequests,ez(t,e)},s=>F0(t,s,e))}function W7(t,e){return t.state.aborted?(process.nextTick(e,new Sl.MongoAPIError("Stream has been aborted")),!0):!1}});var F2e=b(X7=>{"use strict";Object.defineProperty(X7,"__esModule",{value:!0});X7.GridFSBucket=void 0;var rz=Fe(),byt=Qa(),M2e=Vi(),Y7=Ze(),_yt=Do(),P2e=XH(),N2e=tz(),Eyt={bucketName:"fs",chunkSizeBytes:255*1024},Q7=class extends byt.TypedEventEmitter{constructor(e,r){super(),this.on("error",Y7.noop),this.setMaxListeners(0);let n=(0,Y7.resolveOptions)(e,{...Eyt,...r,writeConcern:_yt.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new N2e.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new N2e.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new P2e.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,Y7.resolveOptions)(this.s.db,r),i;n&&(i=new M2e.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:s}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:i?.remainingTimeMS}),o=i?.remainingTimeMS;if(o!=null&&o<=0)throw new rz.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:o}),s===0)throw new rz.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},i;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},i=r.revision):i=-r.revision-1),new P2e.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:i})}async rename(e,r,n){let i={_id:e},s={$set:{filename:r}},{matchedCount:o}=await this.s._filesCollection.updateOne(i,s,n);if(o===0)throw new rz.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,Y7.resolveOptions)(this.s.db,e),n;if(r&&(n=new M2e.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let i=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:i})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};X7.GridFSBucket=Q7;Q7.INDEX="index"});var x0=b(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.MongoRuntimeError=L.MongoParseError=L.MongoOperationTimeoutError=L.MongoOIDCError=L.MongoNotConnectedError=L.MongoNetworkTimeoutError=L.MongoNetworkError=L.MongoMissingDependencyError=L.MongoMissingCredentialsError=L.MongoKerberosError=L.MongoInvalidArgumentError=L.MongoGridFSStreamError=L.MongoGridFSChunkError=L.MongoGCPError=L.MongoExpiredSessionError=L.MongoError=L.MongoDriverError=L.MongoDecompressionError=L.MongoCursorInUseError=L.MongoCursorExhaustedError=L.MongoCompatibilityError=L.MongoClientClosedError=L.MongoClientBulkWriteExecutionError=L.MongoClientBulkWriteError=L.MongoClientBulkWriteCursorError=L.MongoChangeStreamError=L.MongoBatchReExecutionError=L.MongoAzureError=L.MongoAWSError=L.MongoAPIError=L.ExplainableCursor=L.ChangeStreamCursor=L.ClientEncryption=L.MongoBulkWriteError=L.UUID=L.Timestamp=L.ObjectId=L.MinKey=L.MaxKey=L.Long=L.Int32=L.Double=L.Decimal128=L.DBRef=L.Code=L.BSONType=L.BSONSymbol=L.BSONRegExp=L.Binary=L.BSON=void 0;L.CommandFailedEvent=L.WriteConcern=L.ReadPreference=L.ReadConcern=L.TopologyType=L.ServerType=L.ReadPreferenceMode=L.ReadConcernLevel=L.ProfilingLevel=L.ReturnDocument=L.SeverityLevel=L.MongoLoggableComponent=L.ServerApiVersion=L.ExplainVerbosity=L.MongoErrorLabel=L.CursorTimeoutMode=L.CURSOR_FLAGS=L.Compressor=L.AuthMechanism=L.GSSAPICanonicalizationValue=L.AutoEncryptionLoggerLevel=L.BatchType=L.UnorderedBulkOperation=L.OrderedBulkOperation=L.MongoClient=L.ListIndexesCursor=L.ListCollectionsCursor=L.GridFSBucketWriteStream=L.GridFSBucketReadStream=L.GridFSBucket=L.FindCursor=L.Db=L.Collection=L.ClientSession=L.ChangeStream=L.CancellationToken=L.AggregationCursor=L.Admin=L.AbstractCursor=L.configureExplicitResourceManagement=L.MongoWriteConcernError=L.MongoUnexpectedServerResponseError=L.MongoTransactionError=L.MongoTopologyClosedError=L.MongoTailableCursorError=L.MongoSystemError=L.MongoStalePrimaryError=L.MongoServerSelectionError=L.MongoServerError=L.MongoServerClosedError=void 0;L.MongoClientAuthProviders=L.MongoCryptKMSRequestNetworkTimeoutError=L.MongoCryptInvalidArgumentError=L.MongoCryptError=L.MongoCryptCreateEncryptedCollectionError=L.MongoCryptCreateDataKeyError=L.MongoCryptAzureKMSRequestError=L.SrvPollingEvent=L.WaitingForSuitableServerEvent=L.ServerSelectionSucceededEvent=L.ServerSelectionStartedEvent=L.ServerSelectionFailedEvent=L.ServerSelectionEvent=L.TopologyOpeningEvent=L.TopologyDescriptionChangedEvent=L.TopologyClosedEvent=L.ServerOpeningEvent=L.ServerHeartbeatSucceededEvent=L.ServerHeartbeatStartedEvent=L.ServerHeartbeatFailedEvent=L.ServerDescriptionChangedEvent=L.ServerClosedEvent=L.ConnectionReadyEvent=L.ConnectionPoolReadyEvent=L.ConnectionPoolMonitoringEvent=L.ConnectionPoolCreatedEvent=L.ConnectionPoolClosedEvent=L.ConnectionPoolClearedEvent=L.ConnectionCreatedEvent=L.ConnectionClosedEvent=L.ConnectionCheckOutStartedEvent=L.ConnectionCheckOutFailedEvent=L.ConnectionCheckedOutEvent=L.ConnectionCheckedInEvent=L.CommandSucceededEvent=L.CommandStartedEvent=void 0;var vyt=z$();Object.defineProperty(L,"Admin",{enumerable:!0,get:function(){return vyt.Admin}});var Syt=J$();Object.defineProperty(L,"OrderedBulkOperation",{enumerable:!0,get:function(){return Syt.OrderedBulkOperation}});var wyt=Q$();Object.defineProperty(L,"UnorderedBulkOperation",{enumerable:!0,get:function(){return wyt.UnorderedBulkOperation}});var Ayt=I0();Object.defineProperty(L,"ChangeStream",{enumerable:!0,get:function(){return Ayt.ChangeStream}});var Cyt=Kb();Object.defineProperty(L,"Collection",{enumerable:!0,get:function(){return Cyt.Collection}});var Tyt=Bs();Object.defineProperty(L,"AbstractCursor",{enumerable:!0,get:function(){return Tyt.AbstractCursor}});var Oyt=pv();Object.defineProperty(L,"AggregationCursor",{enumerable:!0,get:function(){return Oyt.AggregationCursor}});var xyt=PH();Object.defineProperty(L,"FindCursor",{enumerable:!0,get:function(){return xyt.FindCursor}});var Iyt=hG();Object.defineProperty(L,"ListCollectionsCursor",{enumerable:!0,get:function(){return Iyt.ListCollectionsCursor}});var Ryt=FH();Object.defineProperty(L,"ListIndexesCursor",{enumerable:!0,get:function(){return Ryt.ListIndexesCursor}});var Dyt=VT();Object.defineProperty(L,"Db",{enumerable:!0,get:function(){return Dyt.Db}});var kyt=F2e();Object.defineProperty(L,"GridFSBucket",{enumerable:!0,get:function(){return kyt.GridFSBucket}});var Myt=XH();Object.defineProperty(L,"GridFSBucketReadStream",{enumerable:!0,get:function(){return Myt.GridFSBucketReadStream}});var Pyt=tz();Object.defineProperty(L,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return Pyt.GridFSBucketWriteStream}});var Nyt=W1();Object.defineProperty(L,"MongoClient",{enumerable:!0,get:function(){return Nyt.MongoClient}});var Fyt=Qa();Object.defineProperty(L,"CancellationToken",{enumerable:!0,get:function(){return Fyt.CancellationToken}});var Byt=xb();Object.defineProperty(L,"ClientSession",{enumerable:!0,get:function(){return Byt.ClientSession}});var qyt=yr();Object.defineProperty(L,"BSON",{enumerable:!0,get:function(){return qyt.BSON}});var Bo=yr();Object.defineProperty(L,"Binary",{enumerable:!0,get:function(){return Bo.Binary}});Object.defineProperty(L,"BSONRegExp",{enumerable:!0,get:function(){return Bo.BSONRegExp}});Object.defineProperty(L,"BSONSymbol",{enumerable:!0,get:function(){return Bo.BSONSymbol}});Object.defineProperty(L,"BSONType",{enumerable:!0,get:function(){return Bo.BSONType}});Object.defineProperty(L,"Code",{enumerable:!0,get:function(){return Bo.Code}});Object.defineProperty(L,"DBRef",{enumerable:!0,get:function(){return Bo.DBRef}});Object.defineProperty(L,"Decimal128",{enumerable:!0,get:function(){return Bo.Decimal128}});Object.defineProperty(L,"Double",{enumerable:!0,get:function(){return Bo.Double}});Object.defineProperty(L,"Int32",{enumerable:!0,get:function(){return Bo.Int32}});Object.defineProperty(L,"Long",{enumerable:!0,get:function(){return Bo.Long}});Object.defineProperty(L,"MaxKey",{enumerable:!0,get:function(){return Bo.MaxKey}});Object.defineProperty(L,"MinKey",{enumerable:!0,get:function(){return Bo.MinKey}});Object.defineProperty(L,"ObjectId",{enumerable:!0,get:function(){return Bo.ObjectId}});Object.defineProperty(L,"Timestamp",{enumerable:!0,get:function(){return Bo.Timestamp}});Object.defineProperty(L,"UUID",{enumerable:!0,get:function(){return Bo.UUID}});var Lyt=Q2();Object.defineProperty(L,"MongoBulkWriteError",{enumerable:!0,get:function(){return Lyt.MongoBulkWriteError}});var jyt=QC();Object.defineProperty(L,"ClientEncryption",{enumerable:!0,get:function(){return jyt.ClientEncryption}});var $yt=QH();Object.defineProperty(L,"ChangeStreamCursor",{enumerable:!0,get:function(){return $yt.ChangeStreamCursor}});var Uyt=C7();Object.defineProperty(L,"ExplainableCursor",{enumerable:!0,get:function(){return Uyt.ExplainableCursor}});var Ut=Fe();Object.defineProperty(L,"MongoAPIError",{enumerable:!0,get:function(){return Ut.MongoAPIError}});Object.defineProperty(L,"MongoAWSError",{enumerable:!0,get:function(){return Ut.MongoAWSError}});Object.defineProperty(L,"MongoAzureError",{enumerable:!0,get:function(){return Ut.MongoAzureError}});Object.defineProperty(L,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return Ut.MongoBatchReExecutionError}});Object.defineProperty(L,"MongoChangeStreamError",{enumerable:!0,get:function(){return Ut.MongoChangeStreamError}});Object.defineProperty(L,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteCursorError}});Object.defineProperty(L,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteError}});Object.defineProperty(L,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteExecutionError}});Object.defineProperty(L,"MongoClientClosedError",{enumerable:!0,get:function(){return Ut.MongoClientClosedError}});Object.defineProperty(L,"MongoCompatibilityError",{enumerable:!0,get:function(){return Ut.MongoCompatibilityError}});Object.defineProperty(L,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return Ut.MongoCursorExhaustedError}});Object.defineProperty(L,"MongoCursorInUseError",{enumerable:!0,get:function(){return Ut.MongoCursorInUseError}});Object.defineProperty(L,"MongoDecompressionError",{enumerable:!0,get:function(){return Ut.MongoDecompressionError}});Object.defineProperty(L,"MongoDriverError",{enumerable:!0,get:function(){return Ut.MongoDriverError}});Object.defineProperty(L,"MongoError",{enumerable:!0,get:function(){return Ut.MongoError}});Object.defineProperty(L,"MongoExpiredSessionError",{enumerable:!0,get:function(){return Ut.MongoExpiredSessionError}});Object.defineProperty(L,"MongoGCPError",{enumerable:!0,get:function(){return Ut.MongoGCPError}});Object.defineProperty(L,"MongoGridFSChunkError",{enumerable:!0,get:function(){return Ut.MongoGridFSChunkError}});Object.defineProperty(L,"MongoGridFSStreamError",{enumerable:!0,get:function(){return Ut.MongoGridFSStreamError}});Object.defineProperty(L,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return Ut.MongoInvalidArgumentError}});Object.defineProperty(L,"MongoKerberosError",{enumerable:!0,get:function(){return Ut.MongoKerberosError}});Object.defineProperty(L,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return Ut.MongoMissingCredentialsError}});Object.defineProperty(L,"MongoMissingDependencyError",{enumerable:!0,get:function(){return Ut.MongoMissingDependencyError}});Object.defineProperty(L,"MongoNetworkError",{enumerable:!0,get:function(){return Ut.MongoNetworkError}});Object.defineProperty(L,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return Ut.MongoNetworkTimeoutError}});Object.defineProperty(L,"MongoNotConnectedError",{enumerable:!0,get:function(){return Ut.MongoNotConnectedError}});Object.defineProperty(L,"MongoOIDCError",{enumerable:!0,get:function(){return Ut.MongoOIDCError}});Object.defineProperty(L,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return Ut.MongoOperationTimeoutError}});Object.defineProperty(L,"MongoParseError",{enumerable:!0,get:function(){return Ut.MongoParseError}});Object.defineProperty(L,"MongoRuntimeError",{enumerable:!0,get:function(){return Ut.MongoRuntimeError}});Object.defineProperty(L,"MongoServerClosedError",{enumerable:!0,get:function(){return Ut.MongoServerClosedError}});Object.defineProperty(L,"MongoServerError",{enumerable:!0,get:function(){return Ut.MongoServerError}});Object.defineProperty(L,"MongoServerSelectionError",{enumerable:!0,get:function(){return Ut.MongoServerSelectionError}});Object.defineProperty(L,"MongoStalePrimaryError",{enumerable:!0,get:function(){return Ut.MongoStalePrimaryError}});Object.defineProperty(L,"MongoSystemError",{enumerable:!0,get:function(){return Ut.MongoSystemError}});Object.defineProperty(L,"MongoTailableCursorError",{enumerable:!0,get:function(){return Ut.MongoTailableCursorError}});Object.defineProperty(L,"MongoTopologyClosedError",{enumerable:!0,get:function(){return Ut.MongoTopologyClosedError}});Object.defineProperty(L,"MongoTransactionError",{enumerable:!0,get:function(){return Ut.MongoTransactionError}});Object.defineProperty(L,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return Ut.MongoUnexpectedServerResponseError}});Object.defineProperty(L,"MongoWriteConcernError",{enumerable:!0,get:function(){return Ut.MongoWriteConcernError}});var Kyt=Ib();Object.defineProperty(L,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return Kyt.configureExplicitResourceManagement}});var Vyt=Q2();Object.defineProperty(L,"BatchType",{enumerable:!0,get:function(){return Vyt.BatchType}});var Gyt=zK();Object.defineProperty(L,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return Gyt.AutoEncryptionLoggerLevel}});var Hyt=xC();Object.defineProperty(L,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return Hyt.GSSAPICanonicalizationValue}});var zyt=bd();Object.defineProperty(L,"AuthMechanism",{enumerable:!0,get:function(){return zyt.AuthMechanism}});var Wyt=U3();Object.defineProperty(L,"Compressor",{enumerable:!0,get:function(){return Wyt.Compressor}});var B2e=Bs();Object.defineProperty(L,"CURSOR_FLAGS",{enumerable:!0,get:function(){return B2e.CURSOR_FLAGS}});Object.defineProperty(L,"CursorTimeoutMode",{enumerable:!0,get:function(){return B2e.CursorTimeoutMode}});var Jyt=Fe();Object.defineProperty(L,"MongoErrorLabel",{enumerable:!0,get:function(){return Jyt.MongoErrorLabel}});var Yyt=a3();Object.defineProperty(L,"ExplainVerbosity",{enumerable:!0,get:function(){return Yyt.ExplainVerbosity}});var Qyt=W1();Object.defineProperty(L,"ServerApiVersion",{enumerable:!0,get:function(){return Qyt.ServerApiVersion}});var q2e=I1();Object.defineProperty(L,"MongoLoggableComponent",{enumerable:!0,get:function(){return q2e.MongoLoggableComponent}});Object.defineProperty(L,"SeverityLevel",{enumerable:!0,get:function(){return q2e.SeverityLevel}});var Xyt=$H();Object.defineProperty(L,"ReturnDocument",{enumerable:!0,get:function(){return Xyt.ReturnDocument}});var Zyt=AG();Object.defineProperty(L,"ProfilingLevel",{enumerable:!0,get:function(){return Zyt.ProfilingLevel}});var egt=el();Object.defineProperty(L,"ReadConcernLevel",{enumerable:!0,get:function(){return egt.ReadConcernLevel}});var tgt=ps();Object.defineProperty(L,"ReadPreferenceMode",{enumerable:!0,get:function(){return tgt.ReadPreferenceMode}});var L2e=Wa();Object.defineProperty(L,"ServerType",{enumerable:!0,get:function(){return L2e.ServerType}});Object.defineProperty(L,"TopologyType",{enumerable:!0,get:function(){return L2e.TopologyType}});var rgt=el();Object.defineProperty(L,"ReadConcern",{enumerable:!0,get:function(){return rgt.ReadConcern}});var ngt=ps();Object.defineProperty(L,"ReadPreference",{enumerable:!0,get:function(){return ngt.ReadPreference}});var igt=Do();Object.defineProperty(L,"WriteConcern",{enumerable:!0,get:function(){return igt.WriteConcern}});var nz=lV();Object.defineProperty(L,"CommandFailedEvent",{enumerable:!0,get:function(){return nz.CommandFailedEvent}});Object.defineProperty(L,"CommandStartedEvent",{enumerable:!0,get:function(){return nz.CommandStartedEvent}});Object.defineProperty(L,"CommandSucceededEvent",{enumerable:!0,get:function(){return nz.CommandSucceededEvent}});var ic=GV();Object.defineProperty(L,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckedInEvent}});Object.defineProperty(L,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckedOutEvent}});Object.defineProperty(L,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckOutFailedEvent}});Object.defineProperty(L,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return ic.ConnectionCheckOutStartedEvent}});Object.defineProperty(L,"ConnectionClosedEvent",{enumerable:!0,get:function(){return ic.ConnectionClosedEvent}});Object.defineProperty(L,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return ic.ConnectionCreatedEvent}});Object.defineProperty(L,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolClearedEvent}});Object.defineProperty(L,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolClosedEvent}});Object.defineProperty(L,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolCreatedEvent}});Object.defineProperty(L,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolMonitoringEvent}});Object.defineProperty(L,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return ic.ConnectionPoolReadyEvent}});Object.defineProperty(L,"ConnectionReadyEvent",{enumerable:!0,get:function(){return ic.ConnectionReadyEvent}});var Gp=ET();Object.defineProperty(L,"ServerClosedEvent",{enumerable:!0,get:function(){return Gp.ServerClosedEvent}});Object.defineProperty(L,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return Gp.ServerDescriptionChangedEvent}});Object.defineProperty(L,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return Gp.ServerHeartbeatFailedEvent}});Object.defineProperty(L,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return Gp.ServerHeartbeatStartedEvent}});Object.defineProperty(L,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return Gp.ServerHeartbeatSucceededEvent}});Object.defineProperty(L,"ServerOpeningEvent",{enumerable:!0,get:function(){return Gp.ServerOpeningEvent}});Object.defineProperty(L,"TopologyClosedEvent",{enumerable:!0,get:function(){return Gp.TopologyClosedEvent}});Object.defineProperty(L,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return Gp.TopologyDescriptionChangedEvent}});Object.defineProperty(L,"TopologyOpeningEvent",{enumerable:!0,get:function(){return Gp.TopologyOpeningEvent}});var Iv=hH();Object.defineProperty(L,"ServerSelectionEvent",{enumerable:!0,get:function(){return Iv.ServerSelectionEvent}});Object.defineProperty(L,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return Iv.ServerSelectionFailedEvent}});Object.defineProperty(L,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return Iv.ServerSelectionStartedEvent}});Object.defineProperty(L,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return Iv.ServerSelectionSucceededEvent}});Object.defineProperty(L,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return Iv.WaitingForSuitableServerEvent}});var sgt=yH();Object.defineProperty(L,"SrvPollingEvent",{enumerable:!0,get:function(){return sgt.SrvPollingEvent}});var n_=wb();Object.defineProperty(L,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return n_.MongoCryptAzureKMSRequestError}});Object.defineProperty(L,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return n_.MongoCryptCreateDataKeyError}});Object.defineProperty(L,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return n_.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(L,"MongoCryptError",{enumerable:!0,get:function(){return n_.MongoCryptError}});Object.defineProperty(L,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return n_.MongoCryptInvalidArgumentError}});Object.defineProperty(L,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return n_.MongoCryptKMSRequestNetworkTimeoutError}});var ogt=eH();Object.defineProperty(L,"MongoClientAuthProviders",{enumerable:!0,get:function(){return ogt.MongoClientAuthProviders}})});var nt=b(Yi=>{"use strict";Yi.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");Yi.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");Yi.arrayParentSymbol=Symbol("mongoose#Array#_parent");Yi.arrayPathSymbol=Symbol("mongoose#Array#_path");Yi.arraySchemaSymbol=Symbol("mongoose#Array#_schema");Yi.documentArrayParent=Symbol("mongoose#documentArrayParent");Yi.documentIsSelected=Symbol("mongoose#Document#isSelected");Yi.documentIsModified=Symbol("mongoose#Document#isModified");Yi.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");Yi.documentSchemaSymbol=Symbol("mongoose#Document#schema");Yi.getSymbol=Symbol("mongoose#Document#get");Yi.modelSymbol=Symbol("mongoose#Model");Yi.objectIdSymbol=Symbol("mongoose#ObjectId");Yi.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");Yi.schemaTypeSymbol=Symbol("mongoose#schemaType");Yi.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");Yi.scopeSymbol=Symbol("mongoose#Document#scope");Yi.validatorErrorSymbol=Symbol("mongoose#validatorError")});var Hp=b((fhr,j2e)=>{"use strict";var Rv=oa().ObjectId,agt=nt().objectIdSymbol;Object.defineProperty(Rv.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});Object.hasOwn(Rv.prototype,"valueOf")||(Rv.prototype.valueOf=function(){return this.toString()});Rv.prototype[agt]=!0;j2e.exports=Rv});var qo=b((hhr,$2e)=>{"use strict";$2e.exports=function(e){if(e!=null&&typeof e.constructor=="function")return e.constructor.name}});var wl=b(U2e=>{"use strict";U2e.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var Z7=b((yhr,K2e)=>{"use strict";K2e.exports=oa().Decimal128});var B0=b((ghr,V2e)=>{"use strict";V2e.exports=new Set(["__proto__","constructor","prototype"])});var eO=b(G2e=>{"use strict";G2e.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}});var Dv=b((_hr,H2e)=>{"use strict";var ugt=eO().isMongooseArray;H2e.exports=function(t){return t!=null&&(ugt(t)||t.$__!=null||t.isMongooseBuffer||t.$isMongooseMap)}});var iz=b((Ehr,z2e)=>{"use strict";var cgt=/^function\s*([^\s(]+)/;z2e.exports=function(t){return t.name||(t.toString().trim().match(cgt)||[])[1]}});var Ks=b((vhr,W2e)=>{"use strict";function lgt(t,e){return t!=null&&t._bsontype===e}W2e.exports=lgt});var uh=b((Shr,J2e)=>{"use strict";J2e.exports=function(t){return Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object Object]"}});var i_=b((whr,Y2e)=>{"use strict";Y2e.exports=function(e){if(e==null||typeof e!="object")return!1;let r=Object.getPrototypeOf(e);return!r||r.constructor.name==="Object"}});var s_=b(sz=>{"use strict";var Q2e=Symbol("mongoose#trustedSymbol");sz.trustedSymbol=Q2e;sz.trusted=function(e){return e==null||typeof e!="object"||(e[Q2e]=!0),e}});var Vn=b((Chr,X2e)=>{"use strict";var dgt=Z7(),pgt=Hp(),fgt=B0(),hgt=Dv(),mgt=iz(),oz=Ks(),ygt=eO().isMongooseArray,ggt=uh(),bgt=i_(),_gt=nt(),az=s_().trustedSymbol,Egt=oa();function tO(t,e,r){if(t==null)return t;if(oz(t,"Double"))return new Egt.Double(t.value);if(typeof t=="number"||typeof t=="string"||typeof t=="boolean"||typeof t=="bigint")return t;if(Array.isArray(t))return vgt(t,e);if(hgt(t)){if(e){if(e.retainDocuments&&t.$__!=null){let s=t.$clone();return t.__index!=null&&(s.__index=t.__index),t.__parentArray!=null&&(s.__parentArray=e.parentArray??t.__parentArray),s.$__setParent(e.parentDoc??t.$__parent),s}if(e.retainDocuments&&t.$isMongooseMap){let s=e.parentDoc??t.$__parent,o=t.constructor,a=new o({},t.$__path,s,t.$__schemaType);for(let[u,c]of t)a.$__set(u,tO(c,{...e,parentDoc:s}));return a}}if(bgt(t)&&t.$__!=null&&t._doc!=null)return t._doc;let i;return e&&e.json&&typeof t.toJSON=="function"?i=t.toJSON(e):i=t.toObject(e),i}let n=t.constructor;if(n)switch(mgt(n)){case"Object":return uz(t,e,r);case"Date":return new n(+t);case"RegExp":return Sgt(t);default:break}return oz(t,"ObjectId")?e&&e.flattenObjectIds?t.toJSON():new pgt(t.id):oz(t,"Decimal128")?e&&e.flattenDecimals?t.toJSON():dgt.fromString(t.toString()):!n&&ggt(t)?uz(t,e,r):typeof t=="object"&&t[_gt.schemaTypeSymbol]?t.clone():e&&e.bson&&typeof t.toBSON=="function"?t:typeof t.valueOf=="function"?t.valueOf():uz(t,e,r)}X2e.exports=tO;function uz(t,e,r){let n=e&&e.minimize,i=e&&e.omitUndefined,s=e&&e._seen,o={},a;if(s&&s.has(t))return s.get(t);s&&s.set(t,o),az in t&&e?.copyTrustedSymbol!==!1&&(o[az]=t[az]);let u=Object.keys(t),c=u.length;for(let l=0;l<c;++l){let d=u[l];if(fgt.has(d))continue;let p=tO(t[d],e,!1);(n===!1||i)&&typeof p>"u"?delete o[d]:(n!==!0||typeof p<"u")&&(a||(a=!0),o[d]=p)}return n&&!r?a&&o:o}function vgt(t,e){let r=0,n=t.length,i=null;for(e?.retainDocuments?t.isMongooseDocumentArray?i=new(t.$schemaType()).schema.base.Types.DocumentArray([],t.$path(),t.$parent(),t.$schemaType()):t.isMongooseArray?i=new(t.$parent()).schema.base.Types.Array([],t.$path(),t.$parent(),t.$schemaType()):i=new Array(n):i=new Array(n),t=ygt(t)?t.__array:t,i.isMongooseDocumentArray&&(e={...e,parentArray:i}),r=0;r<n;++r)i[r]=tO(t[r],e,!0);return i}function Sgt(t){let e=new RegExp(t.source,t.flags);return e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex),e}});var tbe=b((Thr,ebe)=>{"use strict";var rO=j$(),cz=qt(),lz=x0().Collection,wgt=Hp(),Z2e=qo(),Agt=wl().internalToObjectOptions,Cgt=require("stream"),dz=require("util"),Tgt=Object.freeze({...Agt,copyTrustedSymbol:!1});function Al(t,e,r){this.collection=null,this.Promise=r.Promise||Promise,this.modelName=r.modelName,delete r.modelName,this._closed=!1,rO.apply(this,arguments)}Object.setPrototypeOf(Al.prototype,rO.prototype);Al.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),rO.prototype.onOpen.call(this),this.collection};Al.prototype.onClose=function(t){rO.prototype.onClose.call(this,t)};Al.prototype._getCollection=function(){return this.collection?this.collection:this.conn.db!=null?(this.collection=this.conn.db.collection(this.name),this.collection):null};var kv={watch:!0,find:!0,aggregate:!0};function Ogt(t){Al.prototype[t]=function(){let e=this._getCollection(),r=Array.from(arguments),n=this,i=n&&n.conn&&n.conn.base&&n.conn.base.options&&n.conn.base.options.debug,s=n&&n.conn&&n.conn.options&&n.conn.options.debug,o=s??i,a=arguments[arguments.length-1],u=new wgt;if(this.conn.$wasForceClosed){let d=new cz("Connection was force closed");if(r.length>0&&typeof r[r.length-1]=="function"){r[r.length-1](d);return}else throw d}let c=r,l=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,args:r});let d,p=r,f=null,h=null;kv[t]&&typeof a=="function"?(this.addQueue(t,p),d=a):kv[t]?f=new this.Promise((E,v)=>{d=function(T,A){if(h!=null&&clearTimeout(h),T!=null)return v(T);E(A)},p=r.concat([d]),this.addQueue(t,p)}):typeof a=="function"?(d=function(){return h!=null&&clearTimeout(h),a.apply(this,arguments)},p=r.slice(0,r.length-1).concat([d])):f=new Promise((E,v)=>{d=function(T,A){if(h!=null&&clearTimeout(h),T!=null)return v(T);E(A)},p=r.concat([d]),this.addQueue(t,p)});let y=this._getBufferTimeoutMS();if(h=setTimeout(()=>{if(this.removeQueue(t,p)){let v="Operation `"+this.name+"."+t+"()` buffering timed out after "+y+"ms",w=new cz(v);this.conn.emit("buffer-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,error:w}),d(w)}},y),!kv[t]&&typeof a=="function"){this.addQueue(t,p);return}return f}else!kv[t]&&typeof a=="function"&&(l=function(p,f){return p!=null?n.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,error:p}):n.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,result:f}),a.apply(this,arguments)},c=r.slice(0,r.length-1).concat([l]));if(o)if(typeof o=="function"){let d=null;typeof r[r.length-1]=="function"?d=r.slice(0,r.length-1):d=r,o.apply(n,[n.name,t].concat(d))}else if(o instanceof Cgt.Writable)this.$printToStream(n.name,t,r,o);else{let d=o.color==null?!0:o.color,p=o.shell==null?!1:o.shell;this.$print(n.name,t,r,d,p)}this.conn.emit("operation-start",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,params:c});try{if(e==null){let p="Cannot call `"+this.name+"."+t+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new cz(p)}if(kv[t]&&typeof a=="function"){let p=e[t].apply(e,c.slice(0,c.length-1));return this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,result:p}),a.call(this,null,p)}let d=e[t].apply(e,c);return d!=null&&typeof d.then=="function"?d.then(p=>(typeof a=="function"?a(null,p):this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,result:p}),p),p=>{if(typeof a=="function"){a(p);return}else this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,error:p});throw p}):d}catch(d){if(typeof a=="function")return a(d);throw this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,error:d}),d}}}for(let t of Object.getOwnPropertyNames(lz.prototype))Object.getOwnPropertyDescriptor(lz.prototype,t).get===void 0&&typeof lz.prototype[t]=="function"&&Ogt(t);Al.prototype.$print=function(t,e,r,n,i){let s=n?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",o=[t,e].join("."),a=[];for(let c=r.length-1;c>=0;--c)(this.$format(r[c])||a.length)&&a.unshift(this.$format(r[c],n,i));let u="("+a.join(", ")+")";console.info(s+o+u)};Al.prototype.$printToStream=function(t,e,r,n){let i=[t,e].join("."),s=[];for(let a=r.length-1;a>=0;--a)(this.$format(r[a])||s.length)&&s.unshift(this.$format(r[a]));let o="("+s.join(", ")+")";n.write(i+o,"utf8")};Al.prototype.$format=function(t,e,r){let n=typeof t;return n==="function"||n==="undefined"?"":pz(t,!1,e,r)};function o_(t){let e={inspect:function(){return t}};return dz.inspect.custom&&(e[dz.inspect.custom]=e.inspect),e}function xgt(t){return pz(t,!0)}function Igt(t,e){t[e]=o_('ObjectId("'+t[e].toHexString()+'")')}function Rgt(t,e,r){r?t[e]=o_('ISODate("'+t[e].toUTCString()+'")'):t[e]=o_('new Date("'+t[e].toUTCString()+'")')}function pz(t,e,r,n){if(t&&typeof t.toBSON=="function"&&(t=t.toBSON()),t==null)return t;let i=Vn(),s=e?t:i(t,Tgt),o=Z2e(s);if(o==="Binary")s="BinData("+s.sub_type+', "'+s.toString("base64")+'")';else if(o==="ObjectId")s=o_('ObjectId("'+s.toHexString()+'")');else if(o==="Date")s=o_('new Date("'+s.toUTCString()+'")');else if(o==="Object"){let a=Object.keys(s),u=a.length,c;for(let l=0;l<u;++l)if(c=a[l],s[c]){let d;if(typeof s[c].toBSON=="function")try{s[c]=s[c].toBSON()}catch(f){d=f}let p=Z2e(s[c]);if(p==="Binary")s[c]="BinData("+s[c].sub_type+', "'+s[c].buffer.toString("base64")+'")';else if(p==="Object")s[c]=pz(s[c],!0);else if(p==="ObjectId")Igt(s,c);else if(p==="Date")Rgt(s,c,n);else if(p==="ClientSession")s[c]=o_('ClientSession("'+(s[c]&&s[c].id&&s[c].id.id&&s[c].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(s[c]))s[c]=s[c].map(xgt);else if(d!=null)throw d}}return e?s:dz.inspect(s,!1,10,r).replace(/\n/g,"").replace(/\s{2,}/g," ")}Al.prototype.getIndexes=Al.prototype.indexInformation;ebe.exports=Al});var hz=b((Ohr,nbe)=>{"use strict";var Dgt=require("events").EventEmitter,Mv=qt();var rbe=["close","change","end","error","resumeTokenChanged"];var fz=class extends Dgt{constructor(e,r,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=r,this.options=n,this.errored=!1,n&&n.hydrate&&!n.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let i=null;if(this.$driverChangeStreamPromise=new Promise((s,o)=>{try{e((a,u)=>{if(a!=null)return this.errored=!0,this.emit("error",a),o(a);this.driverChangeStream=u,this.emit("ready"),s()})}catch(a){i=a,this.errored=!0,this.emit("error",a),o(a)}}),i!=null)throw i}_bindEvents(){if(!this.bindedEvents){if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),rbe.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),rbe.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})}}hasNext(e){if(this.errored)throw new Mv("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(e)}next(e){if(this.errored)throw new Mv("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(e!=null){let n=e;e=(i,s)=>i!=null?n(i):(s.fullDocument!=null&&(s.fullDocument=this.options.model.hydrate(s.fullDocument)),n(null,s))}let r=this.driverChangeStream.next(e);return r&&typeof r.then=="function"&&(r=r.then(n=>(n.fullDocument!=null&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),n))),r}return this.driverChangeStream.next(e)}addListener(e,r){if(this.errored)throw new Mv("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(e,r)}on(e,r){if(this.errored)throw new Mv("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(e,r)}once(e,r){if(this.errored)throw new Mv("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(e,r)}_queue(e){this.once("ready",()=>e())}close(){return this.closed=!0,this.driverChangeStream?this.driverChangeStream.close():this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}};nbe.exports=fz});var q0=b((xhr,obe)=>{"use strict";function Br(){this._pres=new Map,this._posts=new Map}Br.skipWrappedFunction=function(){if(!(this instanceof Br.skipWrappedFunction))return new Br.skipWrappedFunction(...arguments);this.args=[...arguments]};Br.overwriteResult=function(){if(!(this instanceof Br.overwriteResult))return new Br.overwriteResult(...arguments);this.args=[...arguments]};Br.prototype.execPre=function(t,e,r,n){arguments.length===3&&(n=r,r=[]);let i=this._pres.get(t)||[],s=i.length,o=i.numAsync||0,a=0,u=o,c=!1,l=r,d=null;if(!s)return Nv(function(){n(null)});function p(){if(a>=s)return;let h=i[a];if(h.isAsync){let y=[Pv(f),Pv(function(E){if(E){if(c)return;if(E instanceof Br.skipWrappedFunction)d=E;else return c=!0,n(E)}if(--u===0&&a>=s)return n(d)})];nO(h.fn,e,y,y[0])}else if(h.fn.length>0){let y=[Pv(f)],E=arguments.length>=2?arguments:[null].concat(l);for(let v=1;v<E.length;++v)v===E.length-1&&typeof E[v]=="function"||y.push(E[v]);nO(h.fn,e,y,y[0])}else{let y=null;try{y=h.fn.call(e)}catch(E){if(E!=null)return n(E)}if(iO(y))y.then(()=>f(),E=>f(E));else{if(++a>=s)return u>0?void 0:Nv(function(){n(d)});p()}}}p.apply(null,[null].concat(r));function f(h){if(h){if(c)return;if(h instanceof Br.skipWrappedFunction)d=h;else return c=!0,n(h)}if(++a>=s)return u>0?void 0:n(d);p.apply(e,arguments)}};Br.prototype.execPreSync=function(t,e,r){let n=this._pres.get(t)||[],i=n.length;for(let s=0;s<i;++s)n[s].fn.apply(e,r||[])};Br.prototype.execPost=function(t,e,r,n,i){arguments.length<5&&(i=n,n=null);let s=this._posts.get(t)||[],o=s.length,a=0,u=null;if(n&&n.error&&(u=n.error),!o)return Nv(function(){i.apply(null,[u].concat(r))});function c(){let l=s[a].fn,d=0,p=r.length,f=[];for(let h=0;h<p;++h)d+=r[h]&&r[h]._kareemIgnore?0:1,(!r[h]||!r[h]._kareemIgnore)&&f.push(r[h]);if(u)if(sbe(s[a],d)){let h=Pv(function(y){if(y){if(y instanceof Br.overwriteResult)return r=y.args,++a>=o?i.call(null,u):c();u=y}if(++a>=o)return i.call(null,u);c()});nO(l,e,[u].concat(f).concat([h]),h)}else{if(++a>=o)return i.call(null,u);c()}else{let h=Pv(function(y){if(y)return y instanceof Br.overwriteResult?(r=y.args,++a>=o?i.apply(null,[null].concat(r)):c()):(u=y,c());if(++a>=o)return i.apply(null,[null].concat(r));c()});if(sbe(s[a],d))return++a>=o?i.apply(null,[null].concat(r)):c();if(l.length===d+1)nO(l,e,f.concat([h]),h);else{let y,E;try{E=l.apply(e,f)}catch(v){y=v,u=v}if(iO(E))return E.then(v=>{h(v instanceof Br.overwriteResult?v:null)},v=>h(v));if(E instanceof Br.overwriteResult&&(r=E.args),++a>=o)return i.apply(null,[y].concat(r));c()}}}c()};Br.prototype.execPostSync=function(t,e,r){let n=this._posts.get(t)||[],i=n.length;for(let s=0;s<i;++s){let o=n[s].fn.apply(e,r||[]);o instanceof Br.overwriteResult&&(r=o.args)}return r};Br.prototype.createWrapperSync=function(t,e){let r=this;return function(){r.execPreSync(t,this,arguments);let i=e.apply(this,arguments);return r.execPostSync(t,this,[i])[0]}};function ibe(t,e,r,n,i,s,o){return s.useErrorHandlers?t.execPost(r,n,i,{error:e},function(a){return typeof o=="function"&&o(a)}):typeof o=="function"&&o(e)}Br.prototype.wrap=function(t,e,r,n,i){let s=n.length>0?n[n.length-1]:null,o=Array.from(n);typeof s=="function"&&o.pop();let a=this;i=i||{};let u=i.checkForPromise;this.execPre(t,r,n,function(c){if(c&&!(c instanceof Br.skipWrappedFunction)){let f=i.numCallbackParams||0,h=i.contextParameter?[r]:[];for(let y=h.length;y<f;++y)h.push(null);return ibe(a,c,t,r,h,i,s)}let l=e.length,d;if(c instanceof Br.skipWrappedFunction)return d=c.args[0],p(null,...c.args);try{d=e.apply(r,o.concat(p))}catch(f){return p(f)}if(u){if(iO(d))return d.then(f=>p(null,f),f=>p(f));if(l<o.length+1)return p(null,d)}function p(){let f=Array.from(arguments);if(f.shift(),i.nullResultByDefault&&f.length===0&&f.push(null),arguments[0])return ibe(a,arguments[0],t,r,f,i,s);a.execPost(t,r,f,function(){s!==null&&(arguments[0]?s(arguments[0]):s.apply(r,arguments))})}})};Br.prototype.filter=function(t){let e=this.clone(),r=Array.from(e._pres.keys());for(let i of r){let s=this._pres.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._pres.delete(i);continue}s.numAsync=s.filter(o=>o.isAsync).length,e._pres.set(i,s)}let n=Array.from(e._posts.keys());for(let i of n){let s=this._posts.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._posts.delete(i);continue}e._posts.set(i,s)}return e};Br.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)};Br.prototype.createWrapper=function(t,e,r,n){let i=this;return this.hasHooks(t)?function(){let s=r||this;i.wrap(t,e,s,Array.from(arguments),n)}:function(){Nv(()=>e.apply(this,arguments))}};Br.prototype.pre=function(t,e,r,n,i){let s={};typeof e=="object"&&e!==null?(s=e,e=s.isAsync):typeof arguments[1]!="boolean"&&(r=e,e=!1);let o=this._pres.get(t)||[];if(this._pres.set(t,o),e&&(o.numAsync=o.numAsync||0,++o.numAsync),typeof r!="function")throw new Error('pre() requires a function, got "'+typeof r+'"');return i?o.unshift(Object.assign({},s,{fn:r,isAsync:e})):o.push(Object.assign({},s,{fn:r,isAsync:e})),this};Br.prototype.post=function(t,e,r,n){let i=this._posts.get(t)||[];if(typeof e=="function"&&(n=!!r,r=e,e={}),typeof r!="function")throw new Error('post() requires a function, got "'+typeof r+'"');return n?i.unshift(Object.assign({},e,{fn:r})):i.push(Object.assign({},e,{fn:r})),this._posts.set(t,i),this};Br.prototype.clone=function(){let t=new Br;for(let e of this._pres.keys()){let r=this._pres.get(e).slice();r.numAsync=this._pres.get(e).numAsync,t._pres.set(e,r)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t};Br.prototype.merge=function(t,e){e=arguments.length===1?!0:e;let r=e?this.clone():this;for(let n of t._pres.keys()){let i=r._pres.get(n)||[],s=t._pres.get(n).filter(a=>i.map(u=>u.fn).indexOf(a.fn)===-1),o=i.concat(s);o.numAsync=i.numAsync||0,o.numAsync+=s.filter(a=>a.isAsync).length,r._pres.set(n,o)}for(let n of t._posts.keys()){let i=r._posts.get(n)||[],s=t._posts.get(n).filter(o=>i.indexOf(o)===-1);r._posts.set(n,i.concat(s))}return r};function nO(t,e,r,n){let i;try{i=t.apply(e,r)}catch(s){return n(s)}iO(i)&&i.then(()=>n(),s=>n(s))}function iO(t){return typeof t=="object"&&t!==null&&typeof t.then=="function"}function Pv(t){let e=!1,r=this;return function(){if(!e)return e=!0,Nv(()=>t.apply(r,arguments))}}var Nv=typeof process=="object"&&process!==null&&process.nextTick||function(e){setTimeout(e,0)};function sbe(t,e){return t.errorHandler?!0:t.fn.length===e+2}obe.exports=Br});var cbe=b((abe,ube)=>{"use strict";var lo=ube.exports=abe={};lo.DocumentNotFoundError=null;lo.general={};lo.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";lo.general.required="Path `{PATH}` is required.";lo.Number={};lo.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";lo.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";lo.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";lo.Date={};lo.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";lo.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";lo.String={};lo.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";lo.String.match="Path `{PATH}` is invalid ({VALUE}).";lo.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";lo.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var po=b((Ihr,pbe)=>{"use strict";var kgt=qt(),Mgt=require("util"),sO=class extends kgt{constructor(e,r,n,i,s){if(arguments.length>0){let o=lbe(r),a=dbe(s),u=mz(null,e,r,n,a,o,i);super(u),this.init(e,r,n,i,s)}else super(mz())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,r,n,i,s){this.stringValue=yz(r),this.messageFormat=dbe(s),this.kind=e,this.value=r,this.path=n,this.reason=i,this.valueType=lbe(r)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.message=mz(e,this.kind,this.value,this.path,this.messageFormat,this.valueType)}};Object.defineProperty(sO.prototype,"name",{value:"CastError"});function yz(t){let e=Mgt.inspect(t);return e=e.replace(/^'|'$/g,'"'),e.startsWith('"')||(e='"'+e+'"'),e}function lbe(t){if(t==null)return""+t;let e=typeof t;return e!=="object"||typeof t.constructor!="function"?e:t.constructor.name}function dbe(t){let e=t&&t._castErrorMessage||null;if(typeof e=="string"||typeof e=="function")return e}function mz(t,e,r,n,i,s,o){if(typeof i=="string"){let a=yz(r),u=i.replace("{KIND}",e).replace("{VALUE}",a).replace("{PATH}",n);return t!=null&&(u=u.replace("{MODEL}",t.modelName)),u}else{if(typeof i=="function")return i(r,n,t,e);{let a=yz(r),u=s?" (type "+s+")":"",c="Cast to "+e+" failed for value "+a+u+' at path "'+n+'"';return t!=null&&(c+=' for model "'+t.modelName+'"'),o!=null&&typeof o.constructor=="function"&&o.constructor.name!=="AssertionError"&&o.constructor.name!=="Error"&&(c+=' because of "'+o.constructor.name+'"'),c}}}pbe.exports=sO});var aO=b((Rhr,hbe)=>{"use strict";var fbe=qt(),Pgt=require("util"),oO=class extends fbe{constructor(e,r,n,i){let s,o=fbe.messages;o.DocumentNotFoundError!=null?s=typeof o.DocumentNotFoundError=="function"?o.DocumentNotFoundError(e,r):o.DocumentNotFoundError:s='No document found for query "'+Pgt.inspect(e)+'" on model "'+r+'"',super(s),this.result=i,this.numAffected=n,this.filter=e,this.query=e}};Object.defineProperty(oO.prototype,"name",{value:"DocumentNotFoundError"});hbe.exports=oO});var gz=b((Dhr,mbe)=>{"use strict";mbe.exports=function(e){let r=Object.keys(e.errors||{}),n=r.length,i=[],s;for(let o=0;o<n;++o)s=r[o],e!==e.errors[s]&&i.push(s+": "+e.errors[s].message);return i.join(", ")}});var j0=b((khr,bbe)=>{"use strict";var Ngt=qt(),Fgt=qo(),ybe=require("util"),gbe=gz(),L0=class t extends Ngt{constructor(e){let r;Fgt(e)==="model"?r=e.constructor.modelName+" validation failed":r="Validation failed",super(r),this.errors={},this._message=r,e&&(e.$errors=this.errors)}toString(){return this.name+": "+gbe(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(`${e}.${i}`,n[i]);return}this.errors[e]=r,this.message=this._message+": "+gbe(this)}};ybe.inspect.custom&&(L0.prototype[ybe.inspect.custom]=L0.prototype.inspect);Object.defineProperty(L0.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(L0.prototype,"name",{value:"ValidationError"});bbe.exports=L0});var bz=b((Mhr,vbe)=>{"use strict";var _be=qt(),a_=class extends _be{constructor(e,r){let n=e.message;n||(n=_be.messages.general.default);let i=Ebe(n,e,r);super(i),e=Object.assign({},e,{message:i}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}};Object.defineProperty(a_.prototype,"name",{value:"ValidatorError"});Object.defineProperty(a_.prototype,"properties",{enumerable:!1,writable:!0,value:null});a_.prototype.formatMessage=Ebe;function Ebe(t,e,r){if(typeof t=="function")return t(e,r);let n=Object.keys(e);for(let i of n)i!=="message"&&(t=t.replace("{"+i.toUpperCase()+"}",e[i]));return t}vbe.exports=a_});var _z=b((Phr,Sbe)=>{"use strict";var Bgt=qt(),uO=class extends Bgt{constructor(e,r,n){let i=n.join(", ");super('No matching document found for id "'+e._doc._id+'" version '+r+' modifiedPaths "'+i+'"'),this.version=r,this.modifiedPaths=n}};Object.defineProperty(uO.prototype,"name",{value:"VersionError"});Sbe.exports=uO});var Ez=b((Nhr,wbe)=>{"use strict";var qgt=qt(),cO=class extends qgt{constructor(e){super("Can't save() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(cO.prototype,"name",{value:"ParallelSaveError"});wbe.exports=cO});var vz=b((Fhr,Abe)=>{"use strict";var Lgt=qt(),lO=class extends Lgt{constructor(e){super("Cannot overwrite `"+e+"` model once compiled.")}};Object.defineProperty(lO.prototype,"name",{value:"OverwriteModelError"});Abe.exports=lO});var Tbe=b((Bhr,Cbe)=>{"use strict";var jgt=qt(),dO=class extends jgt{constructor(e){let r=`Schema hasn't been registered for model "`+e+`".
Use mongoose.model(name, schema)`;super(r)}};Object.defineProperty(dO.prototype,"name",{value:"MissingSchemaError"});Cbe.exports=dO});var Sz=b((qhr,Obe)=>{"use strict";var $gt=qt(),pO=class extends $gt{constructor(e,r,n){let i=n?.matchedCount??0,s=n?.insertedCount??0,o=r.map(u=>u._id).join(", ");o.length>100&&(o=o.slice(0,100)+"...");let a=r.length-i-s;super(`${e}.bulkSave() was not able to update ${a} of the given documents due to incorrect version or optimistic concurrency, document ids: ${o}`),this.modelName=e,this.documents=r,this.bulkWriteResult=n,this.numDocumentsNotUpdated=a}};Object.defineProperty(pO.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});Obe.exports=pO});var Ibe=b((Lhr,xbe)=>{"use strict";var Ugt=qo();xbe.exports=function(e){if(Ugt(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.type==="Unknown")}});var Dbe=b((jhr,Rbe)=>{"use strict";var Kgt=qo();Rbe.exports=function(e){if(Kgt(e)!=="TopologyDescription"||e.servers.size===0)return!1;for(let r of e.servers.values())if(r.host.endsWith(".mongodb.net")===!1||r.port!==27017)return!1;return!0}});var Mbe=b(($hr,kbe)=>{"use strict";var Vgt=qo(),Ggt="Client network socket disconnected before secure TLS connection was established";kbe.exports=function(e){if(Vgt(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.error&&n.error.message.indexOf(Ggt)!==-1)}});var wz=b((Uhr,Pbe)=>{"use strict";var Hgt=qt(),zgt=Ibe(),Wgt=Dbe(),Jgt=Mbe();var Ygt="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",Qgt="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html",fO=class extends Hgt{assimilateError(e){let r=e.reason;Wgt(r)&&zgt(r)&&e.message.indexOf("bad auth")===-1&&e.message.indexOf("Authentication failed")===-1?this.message=Ygt:Jgt(r)?this.message=Qgt:this.message=e.message;for(let i in e)i!=="name"&&(this[i]=e[i]);return this.cause=r,this}};Object.defineProperty(fO.prototype,"name",{value:"MongooseServerSelectionError"});Pbe.exports=fO});var Az=b((Khr,Nbe)=>{"use strict";var Xgt=qt(),hO=class extends Xgt{constructor(e){let r="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join(`
  `)+`
Use Model.updateOne() to update these arrays instead. See https://mongoosejs.com/docs/faq.html#divergent-array-error for more information.`;super(r)}};Object.defineProperty(hO.prototype,"name",{value:"DivergentArrayError"});Nbe.exports=hO});var ch=b((Vhr,Fbe)=>{"use strict";var Zgt=qt(),mO=class extends Zgt{constructor(e,r,n){r=r||"Field `"+e+"` is not in schema and strict mode is set to throw.",super(r),this.isImmutableError=!!n,this.path=e}};Object.defineProperty(mO.prototype,"name",{value:"StrictModeError"});Fbe.exports=mO});var Cz=b((Ghr,Bbe)=>{"use strict";var e2t=qt(),yO=class extends e2t{constructor(e,r){r=r||"Cannot populate path `"+e+"` because it is not in your schema. Set the `strictPopulate` option to false to override.",super(r),this.path=e}};Object.defineProperty(yO.prototype,"name",{value:"StrictPopulateError"});Bbe.exports=yO});var Ea=b((qbe,Lbe)=>{"use strict";var Vs=qt();Lbe.exports=qbe=Vs;Vs.messages=cbe();Vs.Messages=Vs.messages;Vs.CastError=po();Vs.DocumentNotFoundError=aO();Vs.ValidationError=j0();Vs.ValidatorError=bz();Vs.VersionError=_z();Vs.ParallelSaveError=Ez();Vs.OverwriteModelError=vz();Vs.MissingSchemaError=Tbe();Vs.MongooseBulkSaveIncompleteError=Sz();Vs.MongooseServerSelectionError=wz();Vs.DivergentArrayError=Az();Vs.StrictModeError=ch();Vs.StrictPopulateError=Cz()});var su=b((Hhr,jbe)=>{"use strict";jbe.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var Sa=b((zhr,$be)=>{"use strict";var t2t=Vn(),Gs=class{constructor(e){if(e==null)return this;Object.assign(this,t2t(e))}},va=su();Object.defineProperty(Gs.prototype,"type",va);Object.defineProperty(Gs.prototype,"validate",va);Object.defineProperty(Gs.prototype,"cast",va);Object.defineProperty(Gs.prototype,"required",va);Object.defineProperty(Gs.prototype,"default",va);Object.defineProperty(Gs.prototype,"ref",va);Object.defineProperty(Gs.prototype,"refPath",va);Object.defineProperty(Gs.prototype,"select",va);Object.defineProperty(Gs.prototype,"index",va);Object.defineProperty(Gs.prototype,"unique",va);Object.defineProperty(Gs.prototype,"immutable",va);Object.defineProperty(Gs.prototype,"sparse",va);Object.defineProperty(Gs.prototype,"text",va);Object.defineProperty(Gs.prototype,"transform",va);$be.exports=Gs});var gO=b((Whr,u_)=>{"use strict";var r2t=po();u_.exports=function(e,r){if(u_.exports.convertToTrue.has(e))return!0;if(u_.exports.convertToFalse.has(e))return!1;if(e==null)return e;throw new r2t("boolean",e,r)};u_.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);u_.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var bO=b((Jhr,Ube)=>{"use strict";var n2t=gO();Ube.exports=function(t){let e=this!=null?this.path:null;return n2t(t,e)}});var Tz=b((Yhr,Kbe)=>{"use strict";Kbe.exports=function(t){if(Array.isArray(t)){if(!t.every(e=>typeof e=="number"||typeof e=="string"))throw new Error("$type array values must be strings or numbers");return t}if(typeof t!="number"&&typeof t!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return t}});var Gbe=b((Qhr,Vbe)=>{"use strict";var i2t=ch();Vbe.exports=function(t){t.$immutable?(t.$immutableSetter=s2t(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};function s2t(t,e){return function(n,i,s,o){if(this==null||this.$__==null||this.isNew||o&&o.overwriteImmutable||!(typeof e=="function"?e.call(this,this):e))return n;let u=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(t):this.$__getValue(t);if(this.$__.strictMode==="throw"&&n!==u)throw new i2t(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return u}}});var zbe=b((Xhr,Hbe)=>{"use strict";Hbe.exports=function(e){return typeof e=="function"&&e.constructor&&e.constructor.name==="AsyncFunction"}});var Jbe=b((Zhr,Wbe)=>{"use strict";Wbe.exports=function(e){let r=Object.keys(e),n=!0;for(let i=0,s=r.length;i<s;++i)if(typeof e[r[i]]=="object"&&e[r[i]]!==null){n=!1;break}return n}});var Qbe=b((emr,Ybe)=>{"use strict";Ybe.exports=function(e){let r=[],n="",i="DEFAULT";for(let s=0;s<e.length;++s)i==="IN_SQUARE_BRACKETS"&&!/\d/.test(e[s])&&e[s]!=="]"&&(i="DEFAULT",n=r[r.length-1]+"["+n,r.splice(r.length-1,1)),e[s]==="["?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="IN_SQUARE_BRACKETS"):e[s]==="]"?i==="IN_SQUARE_BRACKETS"?(i="IMMEDIATELY_AFTER_SQUARE_BRACKETS",r.push(n),n=""):(i="DEFAULT",n+=e[s]):e[s]==="."?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="DEFAULT"):n+=e[s];return i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&r.push(n),r}});var t_e=b(zp=>{var Fv=Qbe(),Xbe=["__proto__","constructor","prototype"];zp.get=function(t,e,r,n){var i;typeof r=="function"&&(r.length<2?(n=r,r=void 0):(i=r,r=void 0)),n||(n=e_e);var s=typeof t=="string"?Fv(t):t;if(!Array.isArray(s))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=e,a,u=0;u<s.length;++u){if(a=s[u],typeof s[u]!="string"&&typeof s[u]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof s[u]);if(Array.isArray(o)&&!/^\d+$/.test(a)){var c=s.slice(u);return[].concat(o).map(function(d){return d?zp.get(c,d,r||i,n):n(void 0)})}if(i)o=i(o,a);else{var l=r&&o[r]?o[r]:o;o=l instanceof Map?l.get(a):l[a]}if(!o)return n(o)}return n(o)};zp.has=function(t,e){var r=typeof t=="string"?Fv(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof r[s]);if(i==null||typeof i!="object"||!(r[s]in i))return!1;i=i[r[s]]}return!0};zp.unset=function(t,e){var r=typeof t=="string"?Fv(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(i==null||typeof i!="object"||!(r[s]in i))return!1;if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof r[s]);if(Xbe.indexOf(r[s])!==-1)return!1;if(s===n-1)return delete i[r[s]],!0;i=i instanceof Map?i.get(r[s]):i[r[s]]}return!0};zp.set=function(t,e,r,n,i,s){var o;typeof n=="function"&&(n.length<2?(i=n,n=void 0):(o=n,n=void 0)),i||(i=e_e);var a=typeof t=="string"?Fv(t):t;if(!Array.isArray(a))throw new TypeError("Invalid `path`. Must be either string or array");if(r!=null){for(var u=0;u<a.length;++u){if(typeof a[u]!="string"&&typeof a[u]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof a[u]);if(Xbe.indexOf(a[u])!==-1)return}for(var c=s||/\$/.test(t)&&s!==!1,l=r,d,u=0,p=a.length-1;u<p;++u){if(d=a[u],d=="$"){if(u==p-1)break;continue}if(Array.isArray(l)&&!/^\d+$/.test(d)){var f=a.slice(u);if(!c&&Array.isArray(e))for(var h=0;h<l.length&&h<e.length;++h)zp.set(f,e[h],l[h],n||o,i,c);else for(var h=0;h<l.length;++h)zp.set(f,e,l[h],n||o,i,c);return}if(o)l=o(l,d);else{var y=n&&l[n]?l[n]:l;l=y instanceof Map?y.get(d):y[d]}if(!l)return}if(d=a[p],n&&l[n]&&(l=l[n]),Array.isArray(l)&&!/^\d+$/.test(d))if(!c&&Array.isArray(e))Zbe(l,e,d,o,n,i);else for(var h=0;h<l.length;++h){var E=l[h];E&&(o?o(E,d,i(e)):(E[n]&&(E=E[n]),E[d]=i(e)))}else o?o(l,d,i(e)):l instanceof Map?l.set(d,i(e)):l[d]=i(e)}};zp.stringToParts=Fv;function Zbe(t,e,r,n,i,s){for(var o,a=0;a<t.length&&a<e.length;++a)o=t[a],Array.isArray(o)&&Array.isArray(e[a])?Zbe(o,e[a],r,n,i,s):o&&(n?n(o,r,s(e[a])):(o[i]&&(o=o[i]),o[r]=s(e[a])))}function e_e(t){return t}});var ou=b((r_e,n_e)=>{"use strict";n_e.exports=r_e=t_e()});var xz=b((rmr,i_e)=>{"use strict";var o2t=Vn(),Oz=class{constructor(e){if(this._docs={},this._childDocs=[],e!=null&&(e=o2t(e),Object.assign(this,e),typeof e.subPopulate=="object"&&(this.populate=e.subPopulate),e.perDocumentLimit!=null&&e.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+e.path+"`.")}};i_e.exports=Oz});var o_e=b(s_e=>{"use strict";s_e.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}});var _O=b((imr,a_e)=>{"use strict";var a2t=Vu(),c_=Symbol("mongoose#emitted");a_e.exports=function(e,r,n,i){if(typeof e=="function")try{return r(function(s){if(s!=null){n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[c_]&&(s[c_]=!0,n.emit("error",s));try{e(s)}catch(o){return a2t(()=>{throw o})}return}e.apply(this,arguments)})}catch(s){return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[c_]&&(s[c_]=!0,n.emit("error",s)),e(s)}return i=i||global.Promise,new i((s,o)=>{r(function(a,u){if(a!=null)return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!a[c_]&&(a[c_]=!0,n.emit("error",a)),o(a);if(arguments.length>2)return s(Array.prototype.slice.call(arguments,1));s(u)})})}});var EO=b((smr,u_e)=>{"use strict";u_e.exports=function(e,r,n){let i=Object.keys(r.tree),s={};for(let o of i)n&&(e.paths[o]||e.nested[o]||e.singleNestedPaths[o])||(s[o]=r.tree[o]);e.options._isMerging=!0,e.add(s,null),delete e.options._isMerging,e.callQueue=e.callQueue.concat(r.callQueue),e.method(r.methods),e.static(r.statics);for(let[o,a]of Object.entries(r._userProvidedOptions))o in e._userProvidedOptions||e.set(o,a);for(let o in r.query)e.query[o]=r.query[o];for(let o in r.virtuals)e.virtuals[o]=r.virtuals[o].clone();e._indexes=e._indexes.concat(r._indexes||[]),e.s.hooks.merge(r.s.hooks,!1)}});var d_e=b((c_e,l_e)=>{"use strict";var omr=wt(),sc=l_e.exports=c_e=function(){};sc.ctor=function(){let t=[...arguments],e=function(){sc.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new sc,e.prototype.constructor=e,e.prototype.stateNames=t,t.forEach(function(r){e.prototype[r]=function(n){this._changeState(n,r)}}),e};sc.prototype._changeState=function(e,r){let n=this.paths[e];if(n===r)return;let i=this.states[n];i&&delete i[e],this.paths[e]=r,this.states[r]=this.states[r]||{},this.states[r][e]=!0};sc.prototype.clear=function(e){if(this.states[e]==null)return;let r=Object.keys(this.states[e]),n=r.length,i;for(;n--;)i=r[n],delete this.states[e][i],delete this.paths[i]};sc.prototype.clearPath=function(e){let r=this.paths[e];r&&(delete this.paths[e],delete this.states[r][e])};sc.prototype.getStatePaths=function(e){return this.states[e]!=null?this.states[e]:{}};sc.prototype.some=function(){let e=this,r=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(r,function(n){return e.states[n]==null?!1:Object.keys(e.states[n]).length})};sc.prototype._iter=function(e){return function(){let r=[...arguments],n=r.pop();r.length||(r=this.stateNames);let i=this;return r.reduce(function(o,a){return i.states[a]==null?o:o.concat(Object.keys(i.states[a]))},[])[e](function(o,a,u){return n(o,a,u)})}};sc.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};sc.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};sc.prototype.clone=function(){let e=new this.constructor;e.paths={...this.paths};for(let r of this.stateNames)r in this.states&&(e.states[r]=this.states[r]==null?this.states[r]:{...this.states[r]});return e}});var h_e=b((p_e,f_e)=>{"use strict";var u2t=d_e(),c2t=u2t.ctor("require","modify","init","default","ignore");f_e.exports=p_e=ti;function ti(){this.activePaths=new c2t}ti.prototype.strictMode=!0;ti.prototype.fullPath=void 0;ti.prototype.selected=void 0;ti.prototype.shardval=void 0;ti.prototype.saveError=void 0;ti.prototype.validationError=void 0;ti.prototype.adhocPaths=void 0;ti.prototype.removing=void 0;ti.prototype.inserting=void 0;ti.prototype.saving=void 0;ti.prototype.version=void 0;ti.prototype._id=void 0;ti.prototype.ownerDocument=void 0;ti.prototype.populate=void 0;ti.prototype.populated=void 0;ti.prototype.primitiveAtomics=void 0;ti.prototype.wasPopulated=!1;ti.prototype.scope=void 0;ti.prototype.session=null;ti.prototype.pathsToScopes=null;ti.prototype.cachedRequired=null});var l_=b((amr,g_e)=>{"use strict";var Iz=oa().Binary,l2t=oa().UUID,m_e=wt();function Lo(t,e,r){let n=t;t==null&&(n=0);let i,s,o;Array.isArray(e)?(s=e[0],o=e[1]):i=e;let a;return typeof n=="number"||n instanceof Number?a=Buffer.alloc(n):a=Buffer.from(n,i,r),m_e.decorate(a,Lo.mixin),a.isMongooseBuffer=!0,a[Lo.pathSymbol]=s,a[y_e]=o,a._subtype=0,a}var d2t=Symbol.for("mongoose#Buffer#_path"),y_e=Symbol.for("mongoose#Buffer#_parent");Lo.pathSymbol=d2t;Lo.mixin={_subtype:void 0,_markModified:function(){let t=this[y_e];return t&&t.markModified(this[Lo.pathSymbol]),this},write:function(){let t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){let e=Buffer.prototype.copy.apply(this,arguments);return t&&t.isMongooseBuffer&&t._markModified(),e}};m_e.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(t){Buffer.prototype[t]&&(Lo.mixin[t]=function(){let e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})});Lo.mixin.toObject=function(t){let e=typeof t=="number"?t:this._subtype||0;return new Iz(Buffer.from(this),e)};Lo.mixin.$toObject=Lo.mixin.toObject;Lo.mixin.toBSON=function(){return new Iz(this,this._subtype||0)};Lo.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new l2t(this)};Lo.mixin.equals=function(t){if(!Buffer.isBuffer(t)||this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0};Lo.mixin.subtype=function(t){if(typeof t!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==t&&this._markModified(),this._subtype=t};Lo.Binary=Iz;g_e.exports=Lo});var $0=b(Rz=>{"use strict";Rz.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");Rz.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var d_=b((cmr,b_e)=>{"use strict";var vO=ri(),p2t=$0(),f2t=uh(),h2t=wt();function oc(t,e,r,n){if(e&&e.default){let i=e.default;Array.isArray(i)&&i.length===0?e.default=Array:!e.shared&&f2t(i)&&Object.keys(i).length===0&&(e.default=function(){return{}})}vO.call(this,t,e,"Mixed",n),this[p2t.schemaMixedSymbol]=!0}oc.schemaName="Mixed";oc.defaultOptions={};oc.prototype=Object.create(vO.prototype);oc.prototype.constructor=oc;oc.get=vO.get;oc.set=vO.set;oc.setters=[];oc.prototype.cast=function(t){return t instanceof Error?h2t.errorToPOJO(t):t};oc.prototype.castForQuery=function(t,e){return e};oc.prototype.toJSONSchema=function(e){return{}};b_e.exports=oc});var E_e=b((dmr,__e)=>{"use strict";__e.exports=class{constructor(e,r,n){this.subdocSnapshot=e,this.activePaths=r,this.version=n}}});var wO=b((pmr,v_e)=>{"use strict";var m2t=qt(),SO=class extends m2t{constructor(e,r){let n=Array.isArray(r)?"array":"primitive value";super("Tried to set nested object field `"+e+`\` to ${n} \``+r+"`"),this.path=e}};Object.defineProperty(SO.prototype,"name",{value:"ObjectExpectedError"});v_e.exports=SO});var CO=b((fmr,S_e)=>{"use strict";var y2t=qt(),AO=class extends y2t{constructor(e,r,n){super('Parameter "'+r+'" to '+n+'() must be an object, got "'+(e?.toString()??e+"")+'" (type '+typeof e+")")}};Object.defineProperty(AO.prototype,"name",{value:"ObjectParameterError"});S_e.exports=AO});var A_e=b((hmr,w_e)=>{"use strict";var g2t=qt(),TO=class extends g2t{constructor(e){super("Can't validate() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(TO.prototype,"name",{value:"ParallelValidateError"});w_e.exports=TO});var Dz=b((mmr,C_e)=>{"use strict";C_e.exports=function(e){let r={},n=Object.keys(e);for(let i of n){if(i.indexOf(".")===-1){r[i]=1;continue}let s=i.split("."),o=s[0];for(let a=0;a<s.length;++a)r[o]=1,a+1<s.length&&(o=o+"."+s[a+1])}return r}});var O_e=b((ymr,T_e)=>{"use strict";T_e.exports=function(e){return e==null||typeof e!="object"?!1:e.$slice==null&&e.$elemMatch==null&&e.$meta==null&&e.$==null}});var OO=b((gmr,x_e)=>{"use strict";var b2t=O_e();x_e.exports=function(e,r,n,i,s,o,a){let u=Object.keys(e.$__schema.paths),c=u.length,l=a&&a.skipParentChangeTracking;for(let d=0;d<c;++d){let p,f="",h=u[d];if(h==="_id"&&e.$__.skipId)continue;let y=e.$__schema.paths[h],E=y.splitPath(),v=E.length;if(E[v-1]==="$*")continue;let w=!1,T=e._doc;for(let A=0;A<v&&T!=null;++A){let C=E[A];if(f+=(f.length?".":"")+C,n===!0){if(f in r)break}else if(n===!1&&r&&!w){let x=y.$isSingleNested||y.$isMongooseDocumentArray;if(f in r&&!b2t(r[f])||A===v-1&&x&&i!=null&&i[f])w=!0;else if(i!=null&&!i[f])break}if(A===v-1){if(T[C]!==void 0)break;if(s!=null){if(typeof y.defaultValue=="function"){if(!y.defaultValue.$runBeforeSetters&&s||y.defaultValue.$runBeforeSetters&&!s)break}else if(!s)continue}if(o&&o[f])break;if(r&&n!==null){if(n===!0){if(h in r)continue;try{p=y.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(T[C]=p,kz(e,h,l))}else if(w){try{p=y.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(T[C]=p,kz(e,h,l))}}else{try{p=y.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(T[C]=p,kz(e,h,l))}}else T=T[C]}}};function kz(t,e,r){t.$__.activePaths.default(e),!r&&t.$isSubdocument&&t.$isSingleNested&&t.$parent()!=null&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}});var xO=b((bmr,R_e)=>{"use strict";R_e.exports=function(e,r,n){n=n||{};let i=n.skipDocArrays,s=0;if(!e)return s;for(let o of Object.keys(e.$__.activePaths.getStatePaths("modify"))){if(i){let a=e.$__schema.path(o);if(a&&a.$isMongooseDocumentArray)continue}o.startsWith(r+".")&&(e.$__.activePaths.clearPath(o),++s,e.$isSubdocument&&I_e(e,o))}return s};function I_e(t,e,r=new Set){if(r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");let n=t.$parent(),i=t.$__pathRelativeToParent(void 0,!1)+"."+e;n.$__.activePaths.clearPath(i),n.$isSubdocument&&I_e(n,i,r)}});var RO=b(Mz=>{"use strict";var _2t=Vn(),E2t=nt().documentSchemaSymbol,v2t=wl().internalToObjectOptions,S2t=wt(),p_,w2t=nt().getSymbol,IO=nt().scopeSymbol,D_e=S2t.isPOJO;Mz.compile=k_e;Mz.defineKey=M_e;var A2t=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),C2t=Object.freeze({noDottedPath:!0});function k_e(t,e,r,n){p_=p_||ac();let i=n.typeKey;for(let s of Object.keys(t)){let o=t[s],u=D_e(o)&&Object.keys(o).length>0&&(!o[i]||i==="type"&&D_e(o.type)&&o.type.type)?o:null;M_e({prop:s,subprops:u,prototype:e,prefix:r,options:n})}}function M_e({prop:t,subprops:e,prototype:r,prefix:n,options:i}){p_=p_||ac();let s=(n?n+".":"")+t;n=n||"";let o=n?Object.freeze({}):C2t;e?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){let a=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[s]){let u=Object.create(p_.prototype,T2t(this));n||(u.$__[IO]=this),u.$__.nestedPath=s,Object.defineProperty(u,"schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,E2t,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return _2t(a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(u,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(u,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(u,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(u,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(s,null,A2t)||{}).length===0}}),Object.defineProperty(u,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),k_e(e,u,s,i),this.$__.getters[s]=u}return this.$__.getters[s]},set:function(a){a!=null&&a.$__isNested?a=a.$__get():a instanceof p_&&!a.$__isNested&&(a=a.$toObject(v2t)),(this.$__[IO]||this).$set(s,a)}}):Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){return this[w2t].call(this.$__[IO]||this,s,null,o)},set:function(a){this.$set.call(this.$__[IO]||this,s,a)}})}function T2t(t){let e={};return Object.getOwnPropertyNames(t).forEach(function(r){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(r)!==-1&&(e[r]=Object.getOwnPropertyDescriptor(t,r),e[r].enumerable=!1)}),e}});var N_e=b((Emr,P_e)=>{"use strict";P_e.exports=function(e){return e==null?null:Object.keys(e)[0]}});var DO=b(Pz=>{"use strict";var O2t=oa().Binary,F_e=Ks(),B_e=Dv(),x2t=Ea(),I2t=require("util");Pz.flatten=q_e;Pz.modifiedPaths=L_e;function q_e(t,e,r,n){let i;t&&B_e(t)&&!Buffer.isBuffer(t)?i=Object.keys(t.toObject({transform:!1,virtuals:!1})||{}):i=Object.keys(t||{});let s=i.length,o={};e=e?e+".":"";for(let a=0;a<s;++a){let u=i[a],c=t[u];o[e+u]=c;let l=n&&n.path&&n.path(e+u),d=n&&n.nested&&n.nested[e+u];if(!(l&&l.instance==="Mixed")){if(j_e(c)){if(r&&r.skipArrays&&Array.isArray(c))continue;let p=q_e(c,e+u,r,n);for(let f in p)o[f]=p[f];Array.isArray(c)&&(o[e+u]=c)}if(d){let p=Object.keys(n.paths);for(let f of p)f.startsWith(e+u+".")&&!Object.hasOwn(o,f)&&(o[f]=void 0)}}}return o}function L_e(t,e,r,n=null){if(t==null||typeof t!="object")return;if(n==null&&(n={raw:{update:t,path:e},trace:new WeakSet}),n.trace.has(t))throw new x2t(`a circular reference in the update value, updateValue:
${I2t.inspect(n.raw.update,{showHidden:!1,depth:1})}
updatePath: '${n.raw.path}'`);n.trace.add(t);let i=Object.keys(t||{}),s=i.length;r=r||{},e=e?e+".":"";for(let o=0;o<s;++o){let a=i[o],u=t[a],c=e+a;r[c]=!0,!Buffer.isBuffer(u)&&B_e(u)&&(u=u.toObject({transform:!1,virtuals:!1})),j_e(u)&&L_e(u,e+a,r,n)}return n.trace.delete(t),r}function j_e(t){return t&&typeof t=="object"&&!(t instanceof Date)&&!F_e(t,"ObjectId")&&(!Array.isArray(t)||t.length!==0)&&!(t instanceof Buffer)&&!F_e(t,"Decimal128")&&!(t instanceof O2t)}});var ni=b((Smr,$_e)=>{"use strict";$_e.exports=function(e,r,n){let i,s=!1;if(typeof r=="string"){if(r.indexOf(".")===-1){let u=Nz(e,r);return u??n}i=r.split(".")}else if(s=!0,i=r,i.length===1){let u=Nz(e,i[0]);return u??n}let o=r,a=e;for(let u of i){if(a==null)return n;if(!s&&a[o]!=null)return a[o];a=Nz(a,u),s||(o=o.substr(u.length+1))}return a??n};function Nz(t,e){return t==null?t:t instanceof Map?t.get(e):t[e]}});var Fz=b((wmr,K_e)=>{"use strict";var U_e=Ks();K_e.exports=function(e,r){return typeof e=="string"&&typeof r=="string"||typeof e=="number"&&typeof r=="number"?e===r:U_e(e,"ObjectId")&&U_e(r,"ObjectId")?e.toString()===r.toString():!1}});var kO=b((Amr,V_e)=>{"use strict";var R2t=Fz();V_e.exports=function(e,r){if(e==null||e.discriminators==null)return null;for(let n of Object.keys(e.discriminators)){let i=e.discriminators[n];if(i.discriminatorMapping!=null&&R2t(i.discriminatorMapping.value,r))return i}return null}});var H_e=b((Cmr,G_e)=>{"use strict";var D2t=ni(),k2t=kO();G_e.exports=function t(e,r,n){n=n||{};let i=n.typeOnly,s=Array.isArray(r)?r:r.indexOf(".")===-1?[r]:r.split("."),o=null,a="adhocOrUndefined",u=k2t(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let c=0;c<s.length;++c){let l=s.slice(0,c+1).join(".");if(o=u.path(l),o==null){a="adhocOrUndefined";continue}if(o.instance==="Mixed")return i?"real":o;if(a=u.pathType(l),(o.$isSingleNested||o.$isMongooseDocumentArrayElement)&&o.schema.discriminators!=null){let d=o.schema.discriminators,p=e.get(l+"."+D2t(o,"schema.options.discriminatorKey"));if(p==null||d[p]==null)continue;let f=s.slice(c+1).join(".");return t(e.get(l),f,n)}}return i?a:o}});var W_e=b((Tmr,z_e)=>{"use strict";var M2t=ni();z_e.exports=function(e,r,n){let i=n!=null?Object.keys(M2t(e.tree,n,{})):Object.keys(e.tree),s=new Set(Object.keys(r)),o;if(s.size>1){o=new Set;for(let a of i)s.has(a)&&o.add(a);for(let a of s)o.has(a)||o.add(a);o=Array.from(o)}else o=Array.from(s);return o}});var Y_e=b((Omr,J_e)=>{"use strict";J_e.exports=function(e,r){if(r.length===1)return;let n=r[0],i;for(let s=0;s<r.length-1;++s){let o=e.path(n);o&&o.schema?(i=o.schema.options.strict,e=o.schema,n=o.$isMongooseDocumentArray&&!isNaN(r[s+1])?"":r[s+1]):n+=n.length?"."+r[s+1]:r[s+1]}return i}});var MO=b((xmr,Q_e)=>{"use strict";var P2t=wt(),N2t=new Set(["__index","__parentArray","_doc"]);Q_e.exports=function(e,r){if(P2t.isPOJO(e)&&e.$__!=null&&e._doc!=null){if(r){let n={};for(let i of Object.keys(e))typeof i!="symbol"&&i[0]!=="$"&&(N2t.has(i)||(n[i]=e[i]));return{...e._doc,...n}}return e._doc}return e}});var f_=b((Imr,X_e)=>{"use strict";X_e.exports=function(e){return e==null?!0:typeof e=="object"?!("$meta"in e)&&!("$slice"in e):!0}});var h_=b((Rmr,Z_e)=>{"use strict";var F2t=f_(),B2t=i_();Z_e.exports=function t(e){if(e==null)return null;let r=Object.keys(e),n=null;if(r.length===1&&r[0]==="_id")n=!e._id;else for(let i=0;i<r.length;++i){let s=r[i];if(s!=="_id"&&F2t(e[s])&&(n=B2t(e[s])?t(e[s])??n:!e[s],n!=null))break}return n}});var Bz=b((Dmr,eEe)=>{"use strict";var q2t=f_();eEe.exports=function(e,r){if(e==null)return!1;if(r==="_id")return e._id===0;let n=Object.keys(e),i=null;for(let s of n)if(q2t(e[s])){i=e[r]===1?"inclusive":"exclusive";break}return i==="inclusive"?e[r]!==1:i==="exclusive"?e[r]===0:!1}});var qz=b((kmr,tEe)=>{"use strict";var L2t=wt();tEe.exports=function(e,r){if(e._doc._id==null||r==null||r.length===0)return;let n=String(e._doc._id);for(let i of r){if(i.isVirtual)continue;let o=i.path.split(".");for(let a=0;a<o.length-1;++a){let u=o.slice(0,a+1).join("."),c=o.slice(a+1).join("."),l=e.get(u);if(l!=null&&L2t.isMongooseDocumentArray(l)){for(let d=0;d<l.length;++d)l[d]&&l[d].populated(c,i._docs[n]==null?void 0:i._docs[n][d],i);break}}}}});var Lz=b((Mmr,nEe)=>{"use strict";var{isPOJO:j2t}=wt();nEe.exports=rEe;function rEe(t){let e=Object.keys(t),r=e.length,n,i,s;for(;r--;){if(i=e[r],s=t[i],j2t(s)&&(t[i]=rEe(s)),t[i]===void 0){delete t[i];continue}n=!0}return n?t:void 0}});var jz=b((Pmr,iEe)=>{"use strict";var $2t=/\./g;iEe.exports=function(e){if(e.indexOf(".")===-1)return[e];let r=e.split($2t),n=r.length,i=new Array(n),s="";for(let o=0;o<n;++o)s+=s.length!==0?"."+r[o]:r[o],i[o]=s;return i}});var oEe=b((Nmr,sEe)=>{"use strict";sEe.exports=function(e,r,n,i,s){let o=Object.keys(e).reduce((u,c)=>u||c.startsWith(r+"."),!1),a=r+"."+n.options.discriminatorKey;!o&&s.length===1&&s[0]===a&&i.splice(i.indexOf(a),1)}});var uc=b((Fmr,aEe)=>{"use strict";var U2t=Fz();aEe.exports=function(e,r){if(e==null)return null;for(let n of Object.keys(e)){let i=e[n];if(i.schema&&i.schema.discriminatorMapping&&U2t(i.schema.discriminatorMapping.value,r))return i}return null}});var PO=b((Bmr,uEe)=>{"use strict";uEe.exports=function(e,r){let n=r.split("."),i="",s,o,a;for(let u=0;u<n.length;++u)if(i+=i.length?".":""+n[u],e[i]){for(o=Object.keys(e),a=o.length,s=0;s<a;++s)o[u].indexOf(i+".")===0&&o[u].indexOf(r);return!0}return!1}});var Bv=b(U0=>{"use strict";var cEe=xz(),K2t=oEe(),lEe=ni(),V2t=uc(),G2t=f_(),H2t=Vn(),z2t=PO();U0.preparePopulationOptionsMQ=function(e,r){let n=e._mongooseOptions.populate,i=Object.keys(n).reduce((a,u)=>a.concat([n[u]]),[]);r.lean!=null&&i.filter(a=>(a&&a.options&&a.options.lean)==null).forEach(W2t(r.lean));let s=e&&e.options&&e.options.session||null;s!=null&&i.forEach(a=>{if(a.options==null){a.options={session:s};return}"session"in a.options||(a.options.session=s)});let o=e._fieldsForExec();for(let a=0;a<i.length;++a)i[a]instanceof cEe?i[a]=new cEe({...i[a],_queryProjection:o,_localModel:e.model}):(i[a]._queryProjection=o,i[a]._localModel=e.model);return i};U0.createModel=function(e,r,n,i,s){e.hooks.execPreSync("createModel",r);let o=e.schema?e.schema.discriminatorMapping:null,a=o&&o.isRoot?o.key:null,u=r[a];if(a&&u&&e.discriminators){let l=e.discriminators[u]||V2t(e.discriminators,u);if(l){let d=H2t(i);U0.applyPaths(d,l.schema);let p={strict:s?.strict};return new l(void 0,d,p)}}let c={skipId:!0,isNew:!1,willInit:!0};return s!=null&&"defaults"in s&&(c.defaults=s.defaults),s!=null&&"strict"in s&&(c.strict=s.strict),new e(void 0,n,c)};U0.createModelAndInit=function(e,r,n,i,s,o,a){let u=o?{populated:o}:void 0,c=U0.createModel(e,r,n,i,s);try{c.$init(r,u,a)}catch(l){a(l,c)}};U0.applyPaths=function(e,r,n){let i,s,o=new Set;if(e){s=Object.keys(e);let p=[];for(let f=0;f<s.length;++f){let h=s[f];s[f][0]==="-"&&(delete e[h],h==="-_id"?e._id=0:p.push(h.slice(1)))}s=Object.keys(e);for(let f=0;f<s.length;++f){if(s[f][0]==="+")continue;let h=e[s[f]];if(G2t(h)&&!(s[f]==="_id"&&s.length>1)&&!(s[f]===r.options.discriminatorKey&&s.length>1&&h!=null&&!h)){i=!h;break}}for(let f of p){let h=r.path(f);!h||!h.selected||i!==!1?(e[f]=0,i=!0):h&&h.selected&&i===!1&&o.add(f)}}let a=[],u=[],c=[];switch(l(r),i){case!0:for(let p of u)e[p]=0;break;case!1:r&&r.paths._id&&r.paths._id.options&&r.paths._id.options.select===!1&&(e._id=0);for(let p of a)o.has(p)||z2t(e,p)||(e[p]=e[p]||1);break;case void 0:if(e==null)break;for(let p of Object.keys(e||{}))p.startsWith("+")&&delete e[p];for(let p of u)e[p]==null&&(e[p]=0);break}function l(p,f){if(f||(f=""),c.indexOf(p)!==-1)return[];c.push(p);let h=[];return p.eachPath(function(y,E){if(f&&(y=f+"."+y),E.$isSchemaMap||y.endsWith(".$*")){let w="+"+y,T=e&&w in e;E.options&&E.options.select===!1&&!T&&u.push(y);return}let v=d(y,E);if(v==null&&!Array.isArray(E)&&E.$isMongooseArray&&!E.$isMongooseDocumentArray&&(v=d(y,E.caster)),v!=null&&h.push(v),E.schema){let w=l(E.schema,y);i===!1&&K2t(e,y,E.schema,a,w)}}),c.pop(),h}function d(p,f){if(e==null||typeof f.selected!="boolean")return;if(f.selected===!1&&e[p]){n&&(e[p]=0);return}if(!i&&f.selected&&p===r.options.discriminatorKey&&e[p]!=null&&!e[p]){delete e[p];return}if(i===!1&&f.selected&&e[p]!=null&&!e[p]){delete e[p];return}let h="+"+p;if(e&&h in e){delete e[h],i===!1&&s.length>1&&!~s.indexOf(p)&&!n?e[p]=1:i==null&&n&&f.selected===!1&&(e[p]=0);return}let E=p.split("."),v="";for(let w=0;w<E.length;++w)if(v+=v.length?"."+E[w]:E[w],u.indexOf(v)!==-1)return;if(!i&&(f&&f.options&&f.options.$skipDiscriminatorCheck)){let w="";for(let T=0;T<E.length;++T){w+=(w.length===0?"":".")+E[T];let A=lEe(e,w,!1)||lEe(e,w+".$",!1);if(A&&typeof A!="object")return}}return(f.selected?a:u).push(p),p}};function W2t(t){return function(e){e.options||(e.options={}),t!=null&&Array.isArray(t.virtuals)&&(t=Object.assign({},t),t.virtuals=t.virtuals.filter(r=>typeof r=="string"&&r.startsWith(e.path+".")).map(r=>r.slice(e.path.length+1))),e.options.lean=t}}});var $z=b((Lmr,dEe)=>{"use strict";function J2t(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}dEe.exports=J2t});var fEe=b((jmr,pEe)=>{"use strict";pEe.exports=function(e,r,n){let i=r[0],s=n,o=e;for(let a=0;a<r.length-1;++a){let u=s.path(i);if(u&&u.schema){let c=o.get(i);if(s=u.schema,i=r[a+1],Array.isArray(c)&&!isNaN(i)&&(c=c[i],i=""),c==null)break;o=c}else i+=i.length?"."+r[a+1]:r[a+1]}return o}});var NO=b(($mr,mEe)=>{"use strict";var Wp=ac(),Y2t=Vu(),Q2t=wl().internalToObjectOptions,hEe=require("util"),X2t=wt();mEe.exports=Kr;function Kr(t,e,r,n,i){if(typeof n=="object"&&n!=null&&i==null&&(i=n,n=void 0),r!=null){let o={isNew:r.isNew};"defaults"in r.$__&&(o.defaults=r.$__.defaults),i=Object.assign(o,i)}i!=null&&i.path!=null&&(this.$basePath=i.path),i!=null&&i.pathRelativeToParent!=null&&(this.$pathRelativeToParent=i.pathRelativeToParent);let s=i;i!=null&&i.path!=null&&(s=Object.assign({},i),delete s.path),Wp.call(this,t,e,n,s),delete this.$__.priorDoc}Kr.prototype=Object.create(Wp.prototype);Object.defineProperty(Kr.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(Kr.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});Kr.prototype.toBSON=function(){return this.toObject(Q2t)};Kr.prototype.save=async function(e){return e=e||{},e.suppressWarning||X2t.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),new Promise((r,n)=>{this.$__save(i=>{if(i!=null)return n(i);r(this)})})};Kr.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+"."+t:this.$__.fullPath};Kr.prototype.$__pathRelativeToParent=function(t){return this.$pathRelativeToParent!=null?t==null?this.$pathRelativeToParent:this.$pathRelativeToParent+"."+t:t==null?this.$basePath:this.$basePath?[this.$basePath,t].join("."):t};Kr.prototype.$__save=function(t){return Y2t(()=>t(null,this))};Kr.prototype.$isValid=function(t){let e=this.$parent(),r=this.$__pathRelativeToParent(t);return e!=null&&r!=null?e.$isValid(r):Wp.prototype.$isValid.call(this,t)};Kr.prototype.markModified=function(t){Wp.prototype.markModified.call(this,t);let e=this.$parent();if(e==null)return;let r=this.$__pathRelativeToParent(t);if(r==null)return;let n=this.$__pathRelativeToParent().replace(/\.$/,"");e.isDirectModified(n)||this.isNew||this.$__parent.markModified(r,this)};Kr.prototype.isModified=function(t,e,r){let n=this.$parent();return n!=null?(Array.isArray(t)||typeof t=="string"?(t=Array.isArray(t)?t:t.split(" "),t=t.map(i=>this.$__pathRelativeToParent(i)).filter(i=>i!=null)):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e,r)):Wp.prototype.isModified.call(this,t,e,r)};Kr.prototype.$markValid=function(t){Wp.prototype.$markValid.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$markValid(r)};Kr.prototype.invalidate=function(t,e,r){Wp.prototype.invalidate.call(this,t,e,r);let n=this.$parent(),i=this.$__pathRelativeToParent(t);if(n!=null&&i!=null)n.invalidate(i,e,r);else if(e.kind==="cast"||e.name==="CastError"||i==null)throw e;return this.ownerDocument().$__.validationError};Kr.prototype.$ignore=function(t){Wp.prototype.$ignore.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$ignore(r)};Kr.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!0));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return this.$__.fullPath=e.join("."),this.$__.ownerDocument=t,this.$__.ownerDocument};Kr.prototype.$__fullPathWithIndexes=function(){let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!1));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return e.join(".")};Kr.prototype.parent=function(){return this.$__parent};Kr.prototype.$parent=Kr.prototype.parent;Kr.prototype.$__setParent=function(e){this.$__parent=e};Kr.prototype.$__deleteOne=function(t){if(t!=null)return t(null,this)};Kr.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};Kr.prototype.deleteOne=function(t,e){if(typeof t=="function"&&(e=t,t=null),Z2t(this),!t||!t.noop){this.$__removeFromParent();let r=this.ownerDocument();r.$__.removedSubdocs=r.$__.removedSubdocs||[],r.$__.removedSubdocs.push(this)}return this.$__deleteOne(e)};Kr.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};Kr.prototype.inspect=function(){return this.toObject()};hEe.inspect.custom&&(Kr.prototype[hEe.inspect.custom]=Kr.prototype.inspect);Kr.prototype.$toObject=function(e,r){let n=Wp.prototype.$toObject.call(this,e,r);if(!(Object.keys(n).length===0&&e?._calledWithOptions!=null&&(e._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??e.minimize)&&!this.constructor.$__required))return n};function Z2t(t){let e=t.ownerDocument();function r(){e.$removeListener("save",r),e.$removeListener("deleteOne",r),t.emit("deleteOne",t),t.constructor.emit("deleteOne",t)}e.$on("save",r),e.$on("deleteOne",r)}});var y_=b((Umr,bEe)=>{"use strict";var yEe=require("events").EventEmitter,gEe=NO(),ebt=wt(),m_=nt().documentArrayParent;function jo(t,e,r,n,i){ebt.isMongooseDocumentArray(e)?(this.__parentArray=e,this[m_]=e.$parent()):(this.__parentArray=void 0,this[m_]=void 0),this.$setIndex(i),this.$__parent=this[m_];let s;typeof r=="object"&&r!=null?(s={isNew:!0,...r},r=void 0):s={isNew:!0},gEe.call(this,t,n,this[m_],r,s)}jo.prototype=Object.create(gEe.prototype);jo.prototype.constructor=jo;Object.defineProperty(jo.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(jo.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let t in yEe.prototype)jo[t]=yEe.prototype[t];jo.prototype.$setIndex=function(t){if(this.__index=t,this.$__!=null&&this.$__.validationError!=null){let e=Object.keys(this.$__.validationError.errors);for(let r of e)this.invalidate(r,this.$__.validationError.errors[r])}};jo.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};jo.prototype.$__removeFromParent=function(){let t=this._doc._id;if(!t)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:t})};jo.prototype.$__fullPath=function(t,e){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+"."+t:this.$__.fullPath:t?this.$__.fullPath+"."+this.__index+"."+t:this.$__.fullPath+"."+this.__index)};jo.prototype.$__pathRelativeToParent=function(t,e){return this.__index==null||!this.__parentArray||!this.__parentArray.$path?null:e?t==null?this.__parentArray.$path():this.__parentArray.$path()+"."+t:t==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+t};jo.prototype.$parent=function(){return this[m_]};jo.prototype.$__setParent=function(e){this[m_]=e,this.$__parent=e};jo.prototype.parentArray=function(){return this.__parentArray};bEe.exports=jo});var qO=b((Kmr,TEe)=>{"use strict";var Vz=ac(),Uz=y_(),tbt=qt(),_Ee=xO(),rbt=Vn(),EEe=wl().internalToObjectOptions,wEe=ou(),fo=wt(),Kz=Ks(),nbt=nt().arrayAtomicsBackupSymbol,Cl=nt().arrayAtomicsSymbol,lh=nt().arrayParentSymbol,dh=nt().arrayPathSymbol,$o=nt().arraySchemaSymbol,AEe=nt().populateModelSymbol,ibt=Symbol("mongoose#Array#sliced"),vEe=Array.prototype.push;var BO={$__getAtomics(){let t=[],e=Object.keys(this[Cl]||{}),r=e.length,n=Object.assign({},EEe,{_isNested:!0});if(r===0)return t[0]=["$set",this.toObject(n)],t;for(;r--;){let i=e[r],s=this[Cl][i];fo.isMongooseObject(s)?s=s.toObject(n):Array.isArray(s)?s=this.toObject.call(s,n):s!=null&&Array.isArray(s.$each)?s.$each=this.toObject.call(s.$each,n):s!=null&&typeof s.valueOf=="function"&&(s=s.valueOf()),i==="$addToSet"&&(s={$each:s}),t.push([i,s])}return t},getAtomics(){return this.$__getAtomics()},clearAtomics(){this[nbt]=this[Cl],this[Cl]={}},$atomics(){return this[Cl]},$parent(){return this[lh]},$path(){return this[dh]},$schemaType(){return this[$o]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema(){return this[$o]},_cast(t){let e=!1,r,n=this[lh];if(n&&(e=n.$populated(this[dh],!0)),e&&t!==null&&t!==void 0){if(r=e.options[AEe],r==null)throw new tbt("No populated model found for path `"+this[dh]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(Buffer.isBuffer(t)||Kz(t,"ObjectId")||!fo.isObject(t))&&(t={_id:t}),t.schema&&t.schema.discriminatorMapping&&t.schema.discriminatorMapping.key!==void 0||(t=new r(t)),this[$o].caster.applySetters(t,n,!0)}return this[$o].caster.applySetters(t,n,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){let e=this[lh],r;if(e){if(r=this[dh],arguments.length&&(r=r+"."+t),r!=null&&r.endsWith(".$"))return this;e.markModified(r,arguments.length!==0?t:e)}return this},_registerAtomic(t,e){if(this[ibt])return;if(t==="$set")return this[Cl]={$set:e},_Ee(this[lh],this[dh]),this._markModified(),this;let r=this[Cl];if(t==="$pop"&&!("$pop"in r)){let i=this;this[lh].once("save",function(){i._popped=i._shifted=null})}if(r.$set||Object.keys(r).length&&!(t in r))return this[Cl]={$set:this},this;let n;if(t==="$pullAll"||t==="$addToSet")r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(t==="$pullDocs"){let i=r.$pull||(r.$pull={});e[0]instanceof Uz?(n=i.$or||(i.$or=[]),Array.prototype.push.apply(n,e.map(s=>s.toObject({transform:(o,a)=>(s==null||s.$__==null||Object.keys(s.$__.activePaths.getStatePaths("default")).forEach(u=>{wEe.unset(u,a),CEe(a,u)}),a),virtuals:!1})))):(n=i._id||(i._id={$in:[]}),n.$in=n.$in.concat(e))}else if(t==="$push")if(r.$push=r.$push||{$each:[]},e!=null&&fo.hasUserDefinedProperty(e,"$each"))r.$push=e;else if(e.length===1)r.$push.$each.push(e[0]);else if(e.length<1e4)r.$push.$each.push(...e);else for(let i of e)r.$push.$each.push(i);else r[t]=e;return this},addToSet(){FO(this,arguments),SEe(this,arguments);let t=[].map.call(arguments,this._mapCast,this),e=[],r="";t[0]instanceof Uz?r="doc":t[0]instanceof Date?r="date":Kz(t[0],"ObjectId")&&(r="ObjectId");let n=fo.isMongooseArray(t)?t.__array:t,i=fo.isMongooseArray(this)?this.__array:this;return n.forEach(function(s){let o,a=+s;switch(r){case"doc":o=this.some(function(u){return u.equals(s)});break;case"date":o=this.some(function(u){return+u===a});break;case"ObjectId":o=this.find(u=>u.toString()===s.toString());break;default:o=~this.indexOf(s);break}o||(this._markModified(),i.push(s),this._registerAtomic("$addToSet",s),[].push.call(e,s))},this),e},hasAtomics(){return fo.isPOJO(this[Cl])?Object.keys(this[Cl]).length:0},includes(t,e){return this.indexOf(t,e)!==-1},indexOf(t,e){Kz(t,"ObjectId")&&(t=t.toString()),e=e??0;let r=this.length;for(let n=e;n<r;++n)if(t==this[n])return n;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let t=[].map.call(arguments,this._mapCast,this);this._markModified();let e=[].push.apply(this,t);return this._registerAtomic("$set",this),e},pop(){this._markModified();let t=[].pop.call(this);return this._registerAtomic("$set",this),t},pull(){let t=[].map.call(arguments,(i,s)=>this._cast(i,s,{defaults:!1}),this),e=this;fo.isMongooseArray(e)&&(e=e.__array);let r=e.length,n;for(this._markModified();r--;)n=e[r],n instanceof Vz?t.some(function(s){return n.equals(s)})&&e.splice(r,1):~this.indexOf.call(t,n)&&e.splice(r,1);return t[0]instanceof Uz?this._registerAtomic("$pullDocs",t.map(function(i){let s=i.$__getValue("_id");return s===void 0||i.$isDefault("_id")?i:s})):this._registerAtomic("$pullAll",t),_Ee(this[lh],this[dh])>0&&this._registerAtomic("$set",this),this},push(){let t=arguments,e=t,r=t[0]!=null&&fo.hasUserDefinedProperty(t[0],"$each"),n=fo.isMongooseArray(this)?this.__array:this;if(r&&(e=t[0],t=t[0].$each),this[$o]==null)return vEe.apply(this,t);FO(this,t),SEe(this,t),t=[].map.call(t,this._mapCast,this);let i,s=this[Cl];return this._markModified(),r?(e.$each=t,(s.$push&&s.$push.$each&&s.$push.$each.length||0)!==0&&s.$push.$position!=e.$position?(e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=n.length):i=[].push.apply(n,t),this._registerAtomic("$set",this)):e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=this.length):i=[].push.apply(n,t)):(e=t,i=vEe.apply(n,t)),this._registerAtomic("$push",e),i},remove(){return this.pull.apply(this,arguments)},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=BO._cast.call(this,e,t);return BO._markModified.call(this,t),n[t]=i,this},shift(){let t=fo.isMongooseArray(this)?this.__array:this;this._markModified();let e=[].shift.call(t);return this._registerAtomic("$set",this),e},sort(){let t=fo.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic("$set",this),e},splice(){let t,e=fo.isMongooseArray(this)?this.__array:this;if(this._markModified(),FO(this,Array.prototype.slice.call(arguments,2)),arguments.length){let r;if(this[$o]==null)r=arguments;else{r=[];for(let n=0;n<arguments.length;++n)r[n]=n<2?arguments[n]:this._cast(arguments[n],arguments[0]+(n-2))}t=[].splice.apply(e,r),this._registerAtomic("$set",this)}return t},toBSON(){return this.toObject(EEe)},toObject(t){let e=fo.isMongooseArray(this)?this.__array:this;return t&&t.depopulate?(t=rbt(t),t._isNested=!0,[].concat(e).map(function(r){return r instanceof Vz?r.toObject(t):r})):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){FO(this,arguments);let t;this[$o]==null?t=arguments:t=[].map.call(arguments,this._cast,this);let e=fo.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic("$set",this),this.length}};function sbt(t,e){if(!e)return!1;for(let r of t){if(r==null)return!1;let n=r.constructor;if(!(r instanceof Vz)||n.modelName!==e&&n.baseModelName!==e)return!1}return!0}function CEe(t,e,r){if(typeof e=="string"){if(e.indexOf(".")===-1)return;e=wEe.stringToParts(e)}r=r||0,!(r>=e.length)&&(t==null||typeof t!="object"||(CEe(t[e[0]],e,r+1),t[e[0]]!=null&&typeof t[e[0]]=="object"&&Object.keys(t[e[0]]).length===0&&delete t[e[0]]))}function FO(t,e){let r=t==null?null:t[$o]&&t[$o].caster&&t[$o].caster.options&&t[$o].caster.options.ref||null;t.length===0&&e.length!==0&&sbt(e,r)&&t[lh].$populated(t[dh],[],{[AEe]:e[0].constructor})}function SEe(t,e){let r=t==null?null:t[$o]&&t[$o].caster&&t[$o].caster.options&&t[$o].caster.options.ref||null,n=t[lh],i=t[dh];if(!(!r||!n.populated(i))){for(let s of e)if(s!=null&&(typeof s!="object"||s instanceof String||s instanceof Number||s instanceof Buffer||fo.isMongooseType(s))){n.depopulate(i);break}}}var obt=["filter","flat","flatMap","map","slice"];for(let t of obt)Array.prototype[t]!=null&&(BO[t]=function(){let e=fo.isMongooseArray(this)?this.__array:this,r=[].concat(e);return r[t].apply(r,arguments)});TEe.exports=BO});var Hz=b((DEe,kEe)=>{"use strict";var Gz=qO(),LO=nt().arrayAtomicsSymbol,abt=nt().arrayAtomicsBackupSymbol,OEe=nt().arrayParentSymbol,ubt=nt().arrayPathSymbol,xEe=nt().arraySchemaSymbol,IEe=Array.prototype.push,REe=/^\d+$/;function cbt(t,e,r,n){let i;if(Array.isArray(t)){let a=t.length;if(a===0)i=new Array;else if(a===1)i=new Array(1),i[0]=t[0];else if(a<1e4)i=new Array,IEe.apply(i,t);else{i=new Array;for(let u=0;u<a;++u)IEe.call(i,t[u])}}else i=[];let s={[LO]:{},[abt]:void 0,[ubt]:e,[xEe]:n,[OEe]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:i};t&&t[LO]!=null&&(s[LO]=t[LO]),r!=null&&r.$__&&(s[OEe]=r,s[xEe]=n||r.schema.path(e));let o=new Proxy(i,{get:function(a,u){return Object.hasOwn(s,u)?s[u]:Object.hasOwn(Gz,u)?Gz[u]:n&&n.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applyGetters(void 0,a):typeof u=="string"&&REe.test(u)&&n?.$embeddedSchemaType!=null?n.$embeddedSchemaType.applyGetters(i[u],r):i[u]},set:function(a,u,c){return typeof u=="string"&&REe.test(u)?Gz.set.call(o,u,c,!1):Object.hasOwn(s,u)?s[u]=c:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applySetters(c,a):i[u]=c,!0}});return o}kEe.exports=DEe=cbt});var FEe=b((Vmr,NEe)=>{"use strict";var jO=qO(),lbt=ac(),MEe=uc(),dbt=wl().internalToObjectOptions,K0=wt(),pbt=Ks(),UO=nt().arrayParentSymbol,zz=nt().arrayPathSymbol,qv=nt().arraySchemaSymbol,PEe=nt().documentArrayParent,fbt=Array.prototype.toString,Wz={toBSON(){return this.toObject(dbt)},toString(){return fbt.call(this.__array.map(t=>t!=null&&t.$__!=null?t.toString():t))},getArrayParent(){return this[UO]},$schemaType(){return this[qv]},_cast(t,e,r){if(this[qv]==null)return t;let n=this[qv].casterConstructor;if((n.$isMongooseDocumentArray?K0.isMongooseDocumentArray(t):t instanceof n)||t&&t.constructor&&t.constructor.baseCasterConstructor===n)return t[PEe]&&t.__parentArray||(t[PEe]=this[UO],t.__parentArray=this),t.$setIndex(e),t;if(t==null)return null;if((Buffer.isBuffer(t)||pbt(t,"ObjectId")||!K0.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(typeof t[n.schema.options.discriminatorKey]=="string"&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{let o=MEe(n.discriminators,t[n.schema.options.discriminatorKey]);o&&(n=o)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);let s=new n(t,this,r,void 0,e);return s.isNew=!0,s},id(t){if(t==null)return null;let e=this[qv],r=null;e&&e.schema?r=e.schema.path("_id"):e&&e.casterConstructor&&e.casterConstructor.schema&&(r=e.casterConstructor.schema.path("_id"));let n=null;if(r)try{n=r.cast(t)}catch{}let i;for(let s of this)if(s&&(i=s.get("_id"),i!=null))if(i instanceof lbt){if(i=i.get("_id"),n!=null&&K0.deepEqual(n,i))return s;if(n==null&&(t==i||K0.deepEqual(t,i)))return s}else{if(n!=null&&K0.deepEqual(n,i))return s;if(n==null&&(i==t||K0.deepEqual(t,i)))return s}return null},toObject(t){return[].concat(this.map(function(e){return e==null?null:typeof e.toObject!="function"?e:e.toObject(t)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let t=jO.push.apply(this,arguments);return $O(this),t},pull(){let t=jO.pull.apply(this,arguments);return $O(this),t},shift(){let t=jO.shift.apply(this,arguments);return $O(this),t},splice(){let t=jO.splice.apply(this,arguments);return $O(this),t},inspect(){return this.toObject()},create(t){let e=this[qv].casterConstructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(typeof t[e.schema.options.discriminatorKey]=="string"&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{let r=MEe(e.discriminators,t[e.schema.options.discriminatorKey]);r&&(e=r)}return new e(t,this)},notify(t){let e=this;return function r(n,i){i=i||e;let s=i.length;for(;s--;)i[s]!=null&&(t==="save"&&(n=e[s]),K0.isMongooseArray(i[s])?r(n,i[s]):i[s]&&i[s].emit(t,n))}},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=Wz._cast.call(this,e,t);return Wz._markModified.call(this,t),n[t]=i,this},_markModified(t,e){let r=this[UO],n;if(r){if(n=this[zz],arguments.length)if(e!=null){let i=t.__index;n=n+"."+i+"."+e}else n=n+"."+t;if(n!=null&&n.endsWith(".$"))return this;r.markModified(n,arguments.length!==0?t:r)}return this}};NEe.exports=Wz;function $O(t){let e=t[UO];if(!e||e.$__.populated==null)return;let r=Object.keys(e.$__.populated).filter(n=>n.startsWith(t[zz]+"."));for(let n of r){let i=n.slice((t[zz]+".").length);Array.isArray(e.$__.populated[n].value)&&(e.$__.populated[n].value=t.map(s=>s.$populated(i)))}}});var G0=b((Gmr,qEe)=>{"use strict";var BEe=qO(),Jz=FEe(),Yz=nt().arrayAtomicsSymbol,hbt=nt().arrayAtomicsBackupSymbol,Qz=nt().arrayParentSymbol,Xz=nt().arrayPathSymbol,V0=nt().arraySchemaSymbol,mbt=Array.prototype.push,ybt=/^\d+$/;function gbt(t,e,r,n){let i=[],s={[Yz]:{},[hbt]:void 0,[Xz]:e,[V0]:void 0,[Qz]:void 0};if(Array.isArray(t)&&(t[Xz]===e&&t[Qz]===r&&(s[Yz]=Object.assign({},t[Yz])),t.forEach(a=>{mbt.call(i,a)})),s[Xz]=e,s.__array=i,r&&r.$__)for(s[Qz]=r,s[V0]=r.$__schema.path(e);s[V0]!=null&&s[V0].$isMongooseArray&&!s[V0].$isMongooseDocumentArray;)s[V0]=s[V0].casterConstructor;let o=new Proxy(i,{get:function(a,u){return u==="isMongooseArray"||u==="isMongooseArrayProxy"||u==="isMongooseDocumentArray"||u==="isMongooseDocumentArrayProxy"?!0:Object.hasOwn(s,u)?s[u]:Object.hasOwn(Jz,u)?Jz[u]:n&&n.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applyGetters(void 0,a):Object.hasOwn(BEe,u)?BEe[u]:i[u]},set:function(a,u,c){return typeof u=="string"&&ybt.test(u)?Jz.set.call(o,u,c,!1):Object.hasOwn(s,u)?s[u]=c:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applySetters(c,a):i[u]=c,!0}});return o}qEe.exports=gbt});var ac=b((n6e,i6e)=>{"use strict";var bbt=Az(),eW=require("events").EventEmitter,_bt=h_e(),Ebt=l_(),wa=Ea(),LEe=d_(),vbt=E_e(),Sbt=wO(),zEe=CO(),wbt=A_e(),Abt=ph(),HO=ch(),WO=j0(),WEe=bz(),JEe=Dz(),tW=OO(),KO=xO(),Tl=Vn(),Cbt=RO().compile,Tbt=RO().defineKey,Obt=N_e(),xbt=DO().flatten,Zz=H_e(),jEe=W_e(),Ibt=Y_e(),Rbt=MO(),$Ee=Vu(),UEe=Ks(),YEe=f_(),Dbt=h_(),KEe=Bz(),rW=require("util").inspect,QEe=wl().internalToObjectOptions,kbt=qz(),Mbt=Lz(),Pbt=ou(),nW=jz(),Nbt=Bv(),Ft=wt(),Fbt=$z(),GO=Ft.deepEqual,Bbt=Ft.isMongooseObject,jv=nt().arrayAtomicsBackupSymbol,Aa=nt().arrayAtomicsSymbol,qbt=nt().documentArrayParent,Lbt=nt().documentIsModified,XEe=nt().documentModifiedPaths,jbt=nt().documentSchemaSymbol,$bt=nt().getSymbol,Ubt=nt().modelSymbol,VEe=nt().populateModelSymbol,Kbt=nt().scopeSymbol,Vbt=$0().schemaMixedSymbol,Gbt=fEe(),VO=nt().sessionNewDocuments,zO,GEe,Lv,ZEe=Ft.specialProperties,$v=1,H0=2,Jp=$v|H0;function _e(t,e,r,n){if(typeof r=="object"&&r!=null&&(n=r,r=n.skipId),n=Object.assign({},n),this.$__schema==null){let c=Ft.isObject(e)&&!e.instanceOfSchema?new Abt(e):e;this.$__setSchema(c),e=r,r=n,n=arguments[4]||{}}if(this.$__=new _bt,n.isNew!=null&&n.isNew!==!0&&(this.$isNew=n.isNew),n.priorDoc!=null&&(this.$__.priorDoc=n.priorDoc),r&&(this.$__.skipId=r),t!=null&&typeof t!="object")throw new zEe(t,"obj","Document");let i=!0;n.defaults!==void 0&&(this.$__.defaults=n.defaults,i=n.defaults);let s=this.$__schema;typeof e=="boolean"||e==="throw"?(e!==!0&&(this.$__.strictMode=e),e=void 0):n.strict!==void 0?this.$__.strictMode=n.strict:s.options.strict!==!0&&(this.$__.strictMode=s.options.strict);let o=s.requiredPaths(!0);for(let c of o)this.$__.activePaths.require(c);let a=null;Ft.isPOJO(e)&&Object.keys(e).length>0&&(a=Dbt(e),this.$__.selected=e,this.$__.exclude=a);let u=a===!1&&e?JEe(e):null;if(this._doc==null&&(this.$__buildDoc(t,e,r,a,u,!1),i&&tW(this,e,a,u,!0,null,{skipParentChangeTracking:!0})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,n):this.$set(t,void 0,!0,n),t instanceof _e&&(this.$isNew=t.$isNew)),n.willInit&&i?n.skipDefaults&&(this.$__.skipDefaults=n.skipDefaults):i&&tW(this,e,a,u,!1,n.skipDefaults),!this.$__.strictMode&&t){let c=this;Object.keys(this._doc).forEach(function(d){!(d in s.tree)&&!(d in s.methods)&&!(d in s.virtuals)&&!d.startsWith("$")&&Tbt({prop:d,subprops:null,prototype:c})})}e_t(this)}_e.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(_e.prototype,"isNew",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}});Object.defineProperty(_e.prototype,"errors",{get:function(){return this.$errors},set:function(t){this.$errors=t}});_e.prototype.$isNew=!0;Ft.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(t){_e.prototype[t]=function(){if(!this.$__.emitter){if(t==="emit")return;this.$__.emitter=new eW,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},_e.prototype[`$${t}`]=_e.prototype[t]});_e.prototype.constructor=_e;for(let t in eW.prototype)_e[t]=eW.prototype[t];_e.prototype.$__schema;_e.prototype.schema;Object.defineProperty(_e.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}});_e.prototype.isNew;Object.defineProperty(_e.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});_e.prototype.id;_e.prototype.$errors;Object.defineProperty(_e.prototype,"$op",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}});function Hbt(t,e,r){if(t==null)return;let n=Object.keys(r.$__schema.paths),i=n.length,s=e.indexOf(".")===-1?[e]:e.split(".");for(let o=0;o<i;++o){let a="",u=n[o];if(!u.startsWith(e+"."))continue;let c=r.$__schema.paths[u],l=c.splitPath().slice(s.length),d=l.length;if(c.defaultValue===void 0)continue;let p=t;for(let f=0;f<d&&p!=null;++f){let h=l[f];if(f===d-1){if(p[h]!==void 0)break;try{let y=c.getDefault(r,!1);y!==void 0&&(p[h]=y)}catch(y){r.invalidate(e+"."+a,y);break}break}a+=(a.length?".":"")+h,p[h]=p[h]||{},p=p[h]}}}_e.prototype.$__buildDoc=function(t,e,r,n,i){let s={},o=Object.keys(this.$__schema.paths).filter(c=>!c.includes("$*")),a=o.length,u=0;for(;u<a;++u){let c=o[u];if(c==="_id"&&(r||t&&"_id"in t))continue;let l=this.$__schema.paths[c].splitPath(),d=l.length,p=d-1,f="",h=s,y=!1;for(let E=0;E<d;++E){let v=l[E];if(f.length?f+="."+v:f=v,n===!0){if(f in e)break}else if(n===!1&&e&&!y){if(f in e)y=!0;else if(!i[f])break}E<p&&(h=h[v]||(h[v]={}))}}this._doc=s};_e.prototype.toBSON=function(){return this.toObject(QEe)};_e.prototype.init=function(t,e,r){if(typeof e=="function"&&(r=e,e=null),t==null)throw new zEe(t,"doc","init");return this.$__init(t,e),r&&r(null,this),this};_e.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};_e.prototype.$__init=function(t,e){if(this.$isNew=!1,e=e||{},t._id!=null&&e.populated&&e.populated.length){let n=String(t._id);for(let i of e.populated)if(i.isVirtual?this.$populated(i.path,Ft.getValue(i.path,t),i):this.$populated(i.path,i._docs[n],i),i._childDocs!=null){for(let s of i._childDocs)s==null||s.$__==null||(s.$__.parent=this);i._childDocs=[]}}e6e(this,t,this._doc,e),kbt(this,e.populated),this.$emit("init",this),this.constructor.emit("init",this);let r=this.$__.exclude===!1&&this.$__.selected?JEe(this.$__.selected):null;return tW(this,this.$__.selected,this.$__.exclude,r,!1,this.$__.skipDefaults),this};function e6e(t,e,r,n,i){i=i||"",e.$__!=null&&(e=e._doc);let s=Object.keys(e),o=s.length,a,u,c,l=t.$__.strictMode,d=t.$__schema;for(let p=0;p<o;++p){if(c=s[p],ZEe.has(c)||(u=i?i+c:c,a=d.path(u),d.$isRootDiscriminator&&!t.$__isSelected(u)))continue;let f=e[c];if(!a&&Ft.isPOJO(f))r[c]||(r[c]={},(!l&&!(c in d.tree)&&!(c in d.methods)&&!(c in d.virtuals)||n?.virtuals&&c in d.virtuals)&&(t[c]=r[c])),e6e(t,f,r[c],n,u+".");else if(a){if(Object.hasOwn(r,c)&&f!==void 0&&!n.hydratedPopulatedDocs&&delete r[c],f===null)r[c]=a._castNullish(null);else if(f!==void 0){let h=f.$__==null?null:f.$__.wasPopulated;if(a&&!h&&!n.hydratedPopulatedDocs)try{n&&n.setters?r[c]=a.applySetters(f,t,!1,null,n):r[c]=a.cast(f,t,!0,void 0,n)}catch(y){t.invalidate(y.path,new WEe({path:y.path,message:y.message,type:"cast",value:y.value,reason:y}))}else a&&n.hydratedPopulatedDocs?(r[c]=a.cast(f,t,!0,void 0,{hydratedPopulatedDocs:!0}),r[c]&&r[c].$__&&r[c].$__.wasPopulated?t.$populated(u,r[c].$__.wasPopulated.value,r[c].$__.wasPopulated.options):Array.isArray(r[c])&&r[c].length&&r[c][0]?.$__?.wasPopulated&&t.$populated(u,r[c].map(y=>y?.$__?.wasPopulated?.value).filter(y=>y!=null),r[c][0].$__.wasPopulated.options)):r[c]=f}t.$isModified(u)||t.$__.activePaths.init(u)}else if(r[c]=f,!l&&!i)t[c]=f;else if(n?.virtuals&&c in d.virtuals)t[c]=f;else if(n?.strict==="throw")throw new HO(c)}}_e.prototype.updateOne=function(e,r,n){let i=this.constructor.updateOne(),s=this;return i.pre(function(a){s.constructor._middleware.execPre("updateOne",s,[s,e,r],(u,c)=>(this.updateOne({_id:s._doc._id},e,r),s.$session()!=null&&("session"in i.options||(i.options.session=s.$session())),a(u,c)))}),i.post(function(a){s.constructor._middleware.execPost("updateOne",s,[s],{},a)}),n!=null?i.exec(n):i};_e.prototype.replaceOne=function(){let e=[...arguments];return e.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,e)};_e.prototype.$session=function(e){if(arguments.length===0)return this.$__.session!=null&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(e!=null&&e.hasEnded)throw new wa("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(!(e==null&&this.$__.session==null)){if(this.$__.session=e,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)n.$session(e)}return e}};_e.prototype.$timestamps=function(e){if(arguments.length===0)return this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;let r=this.$timestamps();return e!==r&&(this.$__.timestamps=e),this};_e.prototype.overwrite=function(e){let r=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(e))));for(let n of r)n!=="_id"&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,e[n]));return this};_e.prototype.$set=function(e,r,n,i){Ft.isPOJO(n)&&(i=n,n=void 0);let s=i&&i.merge,o=n&&n!==!0,a=n===!0,u,c,l=0,d,p,f,h=i&&"strict"in i,y=h?i.strict:this.$__.strictMode;if(o&&(u=this.$__.adhocPaths||(this.$__.adhocPaths={}),u[e]=this.$__schema.interpretAsType(e,n,this.$__schema.options)),e==null)[e,r]=[r,e];else if(typeof e!="string"){e instanceof _e&&(e.$__isNested?e=e.toObject():e=e.$__schema===this.$__schema?iW(e,{...e._doc}):e._doc),e==null&&([e,r]=[r,e]),f=r?r+".":"",c=jEe(this.$__schema,e);let M=c.length,I=i&&i._skipMinimizeTopLevel||!1;if(M===0&&I)return delete i._skipMinimizeTopLevel,r&&this.$set(r,{}),this;i=Object.assign({},i,{_skipMinimizeTopLevel:!1});for(let K=0;K<M;++K){p=c[K];let k=f?f+p:p;d=this.$__schema.pathType(k);let G=e[p];if(n===!0&&!f&&G!=null&&d==="nested"&&this._doc[p]!=null&&delete this._doc[p],Ft.isNonBuiltinObject(G)&&d==="nested"){this.$set(k,G,a,i),Hbt(this.$get(k),k,this);continue}else if(y){if(a&&G===void 0&&this.$get(k)!==void 0)continue;if(d==="adhocOrUndefined"&&(d=Zz(this,k,{typeOnly:!0})),d==="real"||d==="virtual")this.$set(k,G,a,i);else if(d==="nested"&&G instanceof _e)this.$set(k,G.toObject({transform:!1}),a,i);else{if(y==="throw")throw d==="nested"?new Sbt(p,G):new HO(p);d==="nested"&&G==null&&this.$set(k,G,a,i)}}else this.$set(k,G,a,i)}let F={},B=Object.keys(this.$__schema.tree);for(let K=0,k=B.length;K<k;++K)(p=B[K])&&Object.hasOwn(this._doc,p)&&(F[p]=void 0);return this._doc=Object.assign(F,this._doc),this}let E=this.$__schema.pathType(e),v=null;if(E==="adhocOrUndefined"&&(v=e.indexOf(".")===-1?[e]:e.split("."),E=Zz(this,v,{typeOnly:!0})),E==="adhocOrUndefined"&&!h){v==null&&(v=e.indexOf(".")===-1?[e]:e.split("."));let M=Ibt(this.$__schema,v);M!==void 0&&(y=M)}r=Rbt(r,!0);let w=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(e);if(!a)return this.$__getValue(e)})();if(E==="nested"&&r){if(typeof r=="object"&&r!=null){if(r.$__!=null&&(r=r.toObject(QEe)),r==null)return this.invalidate(e,new wa.CastError("Object",r,e)),this;let M=this.$isModified(e),I=this.$__.savedState!=null&&Object.hasOwn(this.$__.savedState,e);if(this.$__.savedState!=null&&!this.$isNew&&!Object.hasOwn(this.$__.savedState,e)){let B=this.$__getValue(e);this.$__.savedState[e]=B;let K=Object.keys(B||{});for(let k of K)this.$__.savedState[e+"."+k]=B[k]}if(!s)this.$__setValue(e,null),KO(this,e);else return this.$set(r,e,a,i);let F=jEe(this.$__schema,r,e);this.$__setValue(e,{});for(let B of F)this.$set(e+"."+B,r[B],a,{...i,_skipMarkModified:!0});return w!=null&&(!M||I)&&Ft.deepEqual(I?this.$__.savedState[e]:w,r)?this.unmarkModified(e):this.markModified(e),this}return this.invalidate(e,new wa.CastError("Object",r,e)),this}let T;if(v==null&&(v=e.indexOf(".")===-1?[e]:e.split(".")),typeof this.$__schema.aliases[v[0]]=="string"&&(v[0]=this.$__schema.aliases[v[0]]),E==="adhocOrUndefined"&&y){let M;for(l=0;l<v.length;++l){let I=v.slice(0,l+1).join(".");if(l+1<v.length&&this.$__schema.pathType(I)==="virtual")return Pbt.set(e,r,this),this;if(T=this.$__schema.path(I),T!=null){if(T instanceof LEe){M=!0;break}else if(T.$isSchemaMap&&T.$__schemaType instanceof LEe&&l<v.length-1){M=!0,T=T.$__schemaType;break}}}if(T==null&&(T=Zz(this,e)),!M&&!T){if(y==="throw")throw new HO(e);return this}}else{if(E==="virtual")return T=this.$__schema.virtualpath(e),T.applySetters(r,this),this;T=this.$__path(e)}let A=this._doc,C="";for(l=0;l<v.length-1;++l)A=A instanceof Map?A.get(v[l]):A[v[l]],C+=(C.length!==0?".":"")+v[l],A||(this.$set(C,{}),this.$__isSelected(C)||this.unmarkModified(C),A=this.$__getValue(C));let x;if(v.length<=1)x=e;else{let M=v.length;for(l=0;l<M;++l){let I=v.slice(0,l+1).join(".");if(this.$get(I,null,{getters:!1})===null){x=I;break}}x||(x=e)}if(!T)return this.$__set(x,e,i,a,v,T,r,w),E==="nested"&&r==null&&KO(this,e),this;if((T.$isSingleNested||T.$isMongooseArray)&&Xbt(this,e),r!=null&&s&&T.$isSingleNested){r instanceof _e&&(r=r.toObject({virtuals:!1,transform:!1}));let M=Object.keys(r);for(let I of M)this.$set(e+"."+I,r[I],a,i);return this}let R=!0;try{let M=(()=>{if(T.options==null||!(r instanceof _e))return!1;let K=r.constructor,k=typeof T.options.ref=="function"&&!T.options.ref[Ubt]?T.options.ref.call(this,this):T.options.ref,G=k?.modelName||k;if(G!=null&&(G===K.modelName||G===K.baseModelName))return!0;let ne=T.options.refPath;if(ne==null)return!1;let $=r.get(ne);return $===K.modelName||$===K.baseModelName})(),I=!1;if(M&&r instanceof _e&&(!r.$__.wasPopulated||Ft.deepEqual(r.$__.wasPopulated.value,r._doc._id))){let K=T&&T.$isSingleNested?T.cast(r,this):r._doc._id;this.$populated(e,K,{[VEe]:r.constructor}),r.$__.wasPopulated={value:K},I=!0}let F,B=this.$__schema.options.typeKey;if(T.options&&Array.isArray(T.options[B])&&T.options[B].length&&T.options[B][0]&&T.options[B][0].ref&&zbt(r,T.options[B][0].ref)){F={[VEe]:r[0].constructor},this.$populated(e,r.map(function(K){return K._doc._id}),F);for(let K of r)K.$__.wasPopulated={value:K._doc._id};I=!0}if(!M||!T.$isSingleNested||!r.$__){let K=this;this.$__schema.singleNestedPaths[e]!=null&&v.length>1&&(K=Gbt(this,v,this.schema)),i!=null&&i.overwriteImmutable?r=T.applySetters(r,K,!1,w,{path:e,overwriteImmutable:!0}):r=T.applySetters(r,K,!1,w,{path:e})}if(Array.isArray(r)&&!Array.isArray(T)&&T.$isMongooseDocumentArray&&r.length!==0&&r[0]!=null&&r[0].$__!=null&&r[0].$__.populated!=null){let K=Object.keys(r[0].$__.populated);for(let k of K)this.$populated(e+"."+k,r.map(G=>G.$populated(k)),r[0].$__.populated[k].options);I=!0}if(!I&&this.$__.populated){if(Array.isArray(r)&&this.$__.populated[e])for(let K=0;K<r.length;++K)r[K]instanceof _e&&r.set(K,r[K]._doc._id,!0);delete this.$__.populated[e]}r!=null&&T.$isSingleNested&&Zbt(r,T,w),this.$markValid(e)}catch(M){M instanceof wa.StrictModeError&&M.isImmutableError?this.invalidate(e,M):M instanceof wa.CastError?(this.invalidate(M.path,M),M.$originalErrorPath&&this.invalidate(e,new wa.CastError(T.instance,r,e,M.$originalErrorPath))):this.invalidate(e,new wa.CastError(T.instance,r,e,M)),R=!1}if(R){let M=null,I=null;if(!a){let K=this.$isSubdocument?this.ownerDocument():this;M=K.$__.savedState,I=this.$isSubdocument?this.$__.fullPath+"."+e:e,K.$__saveInitialState(I)}this.$__set(x,e,i,a,v,T,r,w);let F=!!this.$__.session?.transaction,B=this.$__.session&&this.$__.session[VO]&&this.$__.session[VO].has(this)&&this.$__.session[VO].get(this).modifiedPaths&&!this.$__.session[VO].get(this).modifiedPaths.has(I);M!=null&&Object.hasOwn(M,I)&&(!F||B)&&Ft.deepEqual(r,M[I])&&this.unmarkModified(e)}return T.$isSingleNested&&(this.isDirectModified(e)||r==null)?KO(this,e):T.$isSchemaMap&&r==null&&KO(this,e),this};function zbt(t,e){if(!Array.isArray(t)||t.length===0)return!1;for(let r of t)if(!(r instanceof _e)||r.constructor.modelName==null||r.constructor.modelName!=e&&r.constructor.baseModelName!=e)return!1;return!0}_e.prototype.set=_e.prototype.$set;_e.prototype.$__shouldModify=function(t,e,r,n,i,s,o,a){return r&&r._skipMarkModified?!1:this.$isNew||e in this.$__.activePaths.getStatePaths("modify")||o===void 0&&!this.$__isSelected(e)?!0:o===void 0&&e in this.$__.activePaths.getStatePaths("default")||this.$populated(e)&&o instanceof _e&&GO(o._doc._id,a)?!1:!!(!GO(o,a!==void 0?a:Ft.getValue(e,this))||!n&&o!==null&&o!==void 0&&e in this.$__.activePaths.getStatePaths("default")&&GO(o,s.getDefault(this,n)))};_e.prototype.$__set=function(t,e,r,n,i,s,o,a){Lv=Lv||y_();let u=this.$__shouldModify(t,e,r,n,i,s,o,a);u?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[e]&&(delete this.$__.primitiveAtomics[e],Object.keys(this.$__.primitiveAtomics).length===0&&delete this.$__.primitiveAtomics),this.markModified(t),GEe||(GEe=Hz()),o&&Ft.isMongooseArray(o)&&(o._registerAtomic("$set",o),Ft.isMongooseDocumentArray(o)&&o.forEach(function(f){f&&f.__parentArray&&(f.__parentArray=o)}))):Array.isArray(o)&&Array.isArray(a)&&Ft.isMongooseArray(o)&&Ft.isMongooseArray(a)&&(o[Aa]=a[Aa],o[jv]=a[jv],Ft.isMongooseDocumentArray(o)&&o.forEach(f=>{f!=null&&(f.$isNew=!1)}));let c=this._doc,l=0,d=i.length,p="";for(;l<d;l++){let h=l+1===d;if(p+=p?"."+i[l]:i[l],!ZEe.has(i[l]))if(h)c instanceof Map?c.set(i[l],o):c.$isSingleNested?(i[l]in c||(c[i[l]]=o),c._doc[i[l]]=o,u&&c.markModified(i[l])):c[i[l]]=o;else{let y=c instanceof Map,E=y?c.get(i[l]):c[i[l]];Ft.isPOJO(E)||E&&E instanceof Lv||E&&!Array.isArray(E)&&E.$isSingleNested||E&&Array.isArray(E)||E==null&&(E={},y?c.set(i[l],E):c[i[l]]=E),c=E}}};_e.prototype.$__getValue=function(t){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${t}" (type ${typeof t})`);return Ft.getValue(t,this._doc)};_e.prototype.$inc=function(e,r){if(r==null&&(r=1),Array.isArray(e))return e.forEach(u=>this.$inc(u,r)),this;let n=this.$__path(e);if(n==null){if(this.$__.strictMode==="throw")throw new HO(e);if(this.$__.strictMode===!0)return this}else if(n.instance!=="Number")return this.invalidate(e,new wa.CastError(n.instance,r,e)),this;let i=this.$__getValue(e)||0,s=!1,o=null,a=r;try{r=n.cast(r),o=n.applySetters(i+r,this),a=o-i,s=!0}catch(u){this.invalidate(e,new wa.CastError("number",r,e,u))}return s&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[e]==null?this.$__.primitiveAtomics[e]={$inc:a}:this.$__.primitiveAtomics[e].$inc+=a,this.markModified(e),this.$__setValue(e,o)),this};_e.prototype.$__setValue=function(t,e){return Ft.setValue(t,e,this._doc),this};_e.prototype.get=function(t,e,r){let n;r==null&&(r={}),e&&(n=this.$__schema.interpretAsType(t,e,this.$__schema.options));let i=r.noDottedPath,s=i?this.$__schema.paths[t]:this.$__path(t);if(s==null&&(s=this.$__schema.virtualpath(t),s!=null))return s.applyGetters(void 0,this);if(i){let c=this._doc[t];return n&&(c=n.cast(c)),s!=null&&r.getters!==!1?s.applyGetters(c,this):c}if(s!=null&&s.instance==="Mixed"){let c=this.$__schema.virtualpath(t);c!=null&&(s=c)}let o=t.indexOf(".")!==-1,a=this._doc,u=o?t.split("."):[t];typeof this.$__schema.aliases[u[0]]=="string"&&(u[0]=this.$__schema.aliases[u[0]]);for(let c=0,l=u.length;c<l;c++)a&&a._doc&&(a=a._doc),a==null?a=void 0:a instanceof Map?a=a.get(u[c],{getters:!1}):c===l-1?a=Ft.getValue(u[c],a):a=a[u[c]];if(n&&(a=n.cast(a)),s!=null&&r.getters!==!1)a=s.applyGetters(a,this);else if(this.$__schema.nested[t]&&r.virtuals)return iW(this,Tl(a)||{},{path:t});return a};_e.prototype[$bt]=_e.prototype.get;_e.prototype.$get=_e.prototype.get;_e.prototype.$__path=function(t){let e=this.$__.adhocPaths,r=e&&Object.hasOwn(e,t)?e[t]:null;return r||this.$__schema.path(t)};_e.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),e!=null&&!this.$isSubdocument&&(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)};_e.prototype.$__saveInitialState=function(e){let r=this.$__.savedState,n=e;if(r!=null){let i=n.indexOf("."),s=i===-1?n:n.slice(0,i);Object.hasOwn(r,s)||(r[s]=Tl(this.$__getValue(s)))}};_e.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[t]};_e.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)};_e.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};_e.prototype.$isEmpty=function(t){let e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let r=this.$get(t);return r==null?!0:typeof r!="object"?!1:Ft.isPOJO(r)?t6e(r):Object.keys(r.toObject(e)).length===0}return Object.keys(this.toObject(e)).length===0};function t6e(t){if(t==null)return!0;if(typeof t!="object"||Array.isArray(t))return!1;for(let e of Object.keys(t))if(!t6e(t[e]))return!1;return!0}_e.prototype.modifiedPaths=function(t){t=t||{};let e=Object.keys(this.$__.activePaths.getStatePaths("modify")),r=new Set,n=0,i=0,s=e.length;for(n=0;n<s;++n){let o=e[n],a=nW(o),u=a.length;for(i=0;i<u;++i)r.add(a[i]);if(!t.includeChildren)continue;let c=0,l=this.$get(o);if(typeof l=="object"&&l!==null){l._doc&&(l=l._doc);let d=l.length;if(Array.isArray(l))for(c=0;c<d;++c){let p=o+"."+c;if(!r.has(p)&&(r.add(p),l[c]!=null&&l[c].$__)){let f=l[c].modifiedPaths(),h=0,y=f.length;for(h=0;h<y;++h)r.add(p+"."+f[h])}}else{let p=Object.keys(l),f=0,h=p.length;for(f=0;f<h;++f)r.add(o+"."+p[f])}}}return Array.from(r)};_e.prototype[XEe]=_e.prototype.modifiedPaths;_e.prototype.isModified=function(t,e,r){if(t){let n=e&&e.ignoreAtomics,i=this.$__.activePaths.states.modify;if(i==null)return!1;typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));for(let u of t)if(i[u]!=null)return!0;let s=r||this[XEe](),o=t.some(function(u){return!!~s.indexOf(u)}),a=Object.keys(i);return n&&(a=a.filter(u=>{let c=this.$__getValue(u);return!(c!=null&&c[Aa]!=null&&c[Aa].$set===void 0)})),o||t.some(function(u){return a.some(function(c){return c===u||u.startsWith(c+".")})})}return this.$__.activePaths.some("modify")};_e.prototype.$isModified=_e.prototype.isModified;_e.prototype[Lbt]=_e.prototype.isModified;_e.prototype.$isDefault=function(t){if(t==null)return this.$__.activePaths.some("default");if(typeof t=="string"&&t.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("default"),t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>Object.hasOwn(this.$__.activePaths.getStatePaths("default"),r))};_e.prototype.$isDeleted=function(t){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)};_e.prototype.isDirectModified=function(t){if(t==null)return this.$__.activePaths.some("modify");if(typeof t=="string"&&t.indexOf(" ")===-1){let r=Object.hasOwn(this.$__.activePaths.getStatePaths("modify"),t);if(r||t.indexOf(".")===-1)return r;let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&o.isDirectModified(n.slice(i+1).join(".")))return!0}return!1}let e=t;return typeof e=="string"&&(e=e.split(" ")),e.some(r=>this.isDirectModified(r))};_e.prototype.isInit=function(t){if(t==null)return this.$__.activePaths.some("init");if(typeof t=="string"&&t.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("init"),t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>Object.hasOwn(this.$__.activePaths.getStatePaths("init"),r))};_e.prototype.isSelected=function(e){if(this.$__.selected==null)return!0;if(!e)return!1;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(s=>this.$__isSelected(s));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let s of r)if(s!=="_id"&&YEe(this.$__.selected[s])){n=!!this.$__.selected[s];break}if(n===null)return!0;if(e in this.$__.selected)return n;let i=e+".";for(let s of r)if(s!=="_id"){if(s.startsWith(i))return n||s!==i;if(i.startsWith(s+"."))return n}return!n};_e.prototype.$__isSelected=_e.prototype.isSelected;_e.prototype.isDirectSelected=function(e){if(this.$__.selected==null)return!0;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(i=>this.isDirectSelected(i));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let i of r)if(i!=="_id"&&YEe(this.$__.selected[i])){n=!!this.$__.selected[i];break}return n===null?!0:Object.hasOwn(this.$__.selected,e)?n:!n};_e.prototype.validate=async function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new wa("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(r=arguments[0],e=null),r&&typeof r.pathsToSkip=="string"){let i=r.pathsToSkip.indexOf(" ")===-1;r.pathsToSkip=i?[r.pathsToSkip]:r.pathsToSkip.split(" ")}let n=r&&r._skipParallelValidateCheck;if(this.$isSubdocument==null){if(this.$__.validating&&!n)throw new wbt(this);n||(this.$__.validating=!0)}return new Promise((i,s)=>{this.$__validate(e,r,o=>{if(this.$op=null,this.$__.validating=null,o!=null)return s(o);i()})})};_e.prototype.$validate=_e.prototype.validate;function Wbt(t){let e=Object.keys(t.$__.activePaths.getStatePaths("require")),r=0,n=e.length;for(r=0;r<n;++r){let i=e[r],s=t.$__schema.path(i);if(s!=null&&typeof s.originalRequiredValue=="function"){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[i]=s.originalRequiredValue.call(t,t)}catch(o){t.invalidate(i,o)}}}}function r6e(t,e,r,n){let i={};Wbt(t);let s=new Set(Object.keys(t.$__.activePaths.getStatePaths("require")).filter(function(u){return!t.$__isSelected(u)&&!t.$isModified(u)||u.endsWith(".$*")?!1:t.$__.cachedRequired!=null&&u in t.$__.cachedRequired?t.$__.cachedRequired[u]:!0}));Object.keys(t.$__.activePaths.getStatePaths("init")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("modify")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("default")).forEach(o);function o(u){u.endsWith(".$*")||s.add(u)}if(!n){let u=[];for(let l of Object.keys(t.$__schema.paths)){let d=t.$__schema.path(l);if(d.$isSingleNested){let p=t.$get(l);p&&u.push(p)}else if(d.$isMongooseDocumentArray){let p=t.$get(l);if(p&&p.length)for(let f of p)f&&u.push(f)}}let c=t.modifiedPaths();for(let l of u)if(l.$basePath){let d=l.$__pathRelativeToParent();for(let f of l.modifiedPaths())s.delete(d+"."+f);let p=l.$parent();if(p==null)throw new Error("Cannot validate subdocument that does not have a parent");t.$isModified(d,null,c)&&!Object.hasOwn(p.$__.activePaths.getStatePaths("modify"),d)&&!p.$isDefault(d)&&(s.add(d),t.$__.pathsToScopes==null&&(t.$__.pathsToScopes={}),t.$__.pathsToScopes[d]=l.$isDocumentArrayElement?l.__parentArray:l.$parent(),i[d]={skipSchemaValidators:!0},l.$isDocumentArrayElement&&l.__index!=null&&(i[d].index=l.__index))}}for(let u of s){let c=t.$__schema.path(u);if(c){if(c.$isMongooseDocumentArray)for(let l of s)(l==null||l.startsWith(c.path+"."))&&s.delete(l);(!c.caster&&c.validators.length===0&&!c.$parentSchemaDocArray||c.$isMongooseArray&&!c.$isMongooseDocumentArray&&!c.$embeddedSchemaType.$isMongooseArray&&c.validators.length===0&&c.$embeddedSchemaType.validators.length===0)&&s.delete(u)}}Array.isArray(e)?s=Ybt(s,e):Array.isArray(r)&&(s=Qbt(s,r)),Jbt(t,s);let a={skipArrays:!0};for(let u of s)if(t.$__schema.nested[u]){let c=t.$__getValue(u);Bbt(c)&&(c=c.toObject({transform:!1}));let l=xbt(c,u,a,t.$__schema),d=t.$__schema.singleNestedPaths;for(let p of Object.keys(l))Object.hasOwn(d,p)||o(p)}for(let u of s){let c=t.$__schema.path(u);if(!c||(c.$parentSchemaDocArray&&typeof c.$parentSchemaDocArray.path=="string"&&s.add(c.$parentSchemaDocArray.path),!c.$isSchemaMap))continue;let l=t.$__getValue(u);if(l!=null)for(let d of l.keys())s.add(u+"."+d)}return s=Array.from(s),[s,i]}function Jbt(t,e){for(let r of e){let n=t.$__schema.path(r);if(!n||!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!(n&&n.schemaOptions&&n.schemaOptions.required)||n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.$embeddedSchemaType.$isMongooseArray&&n.$embeddedSchemaType.validators.length===0)continue;let i=t.$__getValue(r);JO(i,e,r)}}function JO(t,e,r){if(t!=null){let n=t.length;for(let i=0;i<n;++i)Array.isArray(t[i])?JO(t[i],e,r+"."+i):e.add(r+"."+i)}}_e.prototype.$__validate=function(t,e,r){this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!t?t=[...this.$__.saveOptions.pathsToSave]:typeof t=="function"?(r=t,e=null,t=null):typeof e=="function"&&(r=e,e=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i=e&&e.pathsToSkip||null,s;n?s=!!e.validateModifiedOnly:s=this.$__schema.options.validateModifiedOnly;let o=e&&e.validateAllPaths;if(o){if(i)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(n&&s)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let a=this,u=()=>{let E=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,s&&E!=null){let v=Object.keys(E.errors);for(let w of v)this.$isModified(w)||delete E.errors[w];Object.keys(E.errors).length===0&&(E=void 0)}if(this.$__.cachedRequired={},this.$emit("validate",a),this.constructor.emit("validate",a),E){for(let v in E.errors)!this[qbt]&&E.errors[v]instanceof wa.CastError&&this.invalidate(v,E.errors[v]);return E}},c,l;if(o){c=new Set(Object.keys(this.$__schema.paths));for(let E of c){let v=this.$__schema.path(E);if(!v||!v.$isMongooseArray)continue;let w=this.$__getValue(E);w&&JO(w,c,E)}c=[...c],l={}}else{let E=r6e(this,t,i,e&&e._nestedValidate);c=s?E[0].filter(v=>this.$isModified(v)):E[0],l=E[1]}if(typeof t=="string"&&(t=t.split(" ")),c.length===0)return $Ee(function(){let E=u();if(E)return a.$__schema.s.hooks.execPost("validate:error",a,[a],{error:E},function(v){r(v)});r(null,a)});let d={},p=0,f=this.$__.saveOptions?.pathsToSave;if(Array.isArray(f)){f=new Set(f);for(let E of c)f.has(E)&&h(E)}else for(let E of c)h(E);function h(E){E==null||d[E]||(d[E]=!0,p++,$Ee(function(){let v=a.$__schema.path(E);if(!v)return--p||y();if(!a.$isValid(E)){--p||y();return}if(v[Vbt]!=null&&E!==v.path)return--p||y();let w=a.$__getValue(E),T;(T=a.$populated(E))?w=T:w!=null&&w.$__!=null&&w.$__.wasPopulated&&(w=w._doc._id);let A=a.$__.pathsToScopes!=null&&E in a.$__.pathsToScopes?a.$__.pathsToScopes[E]:a,C={...l[E],path:E,validateAllPaths:o,_nestedValidate:!0};v.doValidate(w,function(x){if(x){if((v.$isSingleNested||v.$isArraySubdocument||v.$isMongooseDocumentArray)&&x instanceof WO)return--p||y();a.invalidate(E,x,void 0,!0)}--p||y()},A,C)}))}function y(){let E=u();if(E)return a.$__schema.s.hooks.execPost("validate:error",a,[a],{error:E},function(v){r(v)});r(null,a)}};function Ybt(t,e){let r=new Set(e),n=new Map([]);for(let s of e){if(s.indexOf(".")===-1)continue;let o=s.split("."),a=o[0];for(let u=1;u<o.length;++u)n.set(a,s),a=a+"."+o[u]}let i=new Set;for(let s of t)r.has(s)?i.add(s):n.has(s)&&i.add(n.get(s));return i}function Qbt(t,e){return e=new Set(e),t=Array.from(t).filter(r=>!e.has(r)),new Set(t)}_e.prototype.validateSync=function(t,e){let r=this;arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(e=arguments[0],t=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i;n?i=!!e.validateModifiedOnly:i=this.$__schema.options.validateModifiedOnly;let s=e&&e.pathsToSkip,o=e&&e.validateAllPaths;if(o){if(s)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}typeof t=="string"?t=t.indexOf(" ")===-1?[t]:t.split(" "):typeof s=="string"&&s.indexOf(" ")!==-1&&(s=s.split(" "));let a,u;if(o){a=new Set(Object.keys(this.$__schema.paths));for(let d of a){let p=this.$__schema.path(d);if(!p||!p.$isMongooseArray)continue;let f=this.$__getValue(d);f&&JO(f,a,d)}a=[...a],u={}}else{let d=r6e(this,t,s);a=i?d[0].filter(p=>this.$isModified(p)):d[0],u=d[1]}let c={};for(let d=0,p=a.length;d<p;++d){let f=a[d];if(c[f])continue;c[f]=!0;let h=r.$__schema.path(f);if(!h||!r.$isValid(f))continue;let y=r.$__getValue(f),E=h.doValidateSync(y,r,{skipSchemaValidators:u[f],path:f,validateModifiedOnly:i,validateAllPaths:o});if(E){if((h.$isSingleNested||h.$isArraySubdocument||h.$isMongooseDocumentArray)&&E instanceof WO)continue;r.invalidate(f,E,void 0,!0)}}let l=r.$__.validationError;if(r.$__.validationError=void 0,r.$emit("validate",r),r.constructor.emit("validate",r),l)for(let d in l.errors)l.errors[d]instanceof wa.CastError&&r.invalidate(d,l.errors[d]);return l};_e.prototype.invalidate=function(t,e,r,n){if(this.$__.validationError||(this.$__.validationError=new WO(this)),!this.$__.validationError.errors[t])return(!e||typeof e=="string")&&(e=new WEe({path:t,message:e,type:n||"user defined",value:r})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)};_e.prototype.$markValid=function(t){!this.$__.validationError||!this.$__.validationError.errors[t]||(delete this.$__.validationError.errors[t],Object.keys(this.$__.validationError.errors).length===0&&(this.$__.validationError=null))};function Xbt(t,e){if(!t.$__.validationError)return;let r=Object.keys(t.$__.validationError.errors);for(let n of r)n.startsWith(e+".")&&delete t.$__.validationError.errors[n];Object.keys(t.$__.validationError.errors).length===0&&(t.$__.validationError=null)}function Zbt(t,e,r){let n=e.schema;if(n!=null)for(let i of Object.keys(n.paths)){let s=n.paths[i];if(s.$immutableSetter==null)continue;let o=r?.$__getValue(i);s.$immutableSetter.call(t,o)}}_e.prototype.$isValid=function(t){return this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0?!0:t==null?!1:(t.indexOf(" ")!==-1&&(t=t.split(" ")),Array.isArray(t)?t.some(e=>this.$__.validationError.errors[e]==null):this.$__.validationError.errors[t]==null)};_e.prototype.$__reset=function(){let e=this,r=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(r&&r.length>0)for(let n of r)n.$__reset();return this.$__dirty().forEach(function(n){let i=n.value;i&&typeof i.clearAtomics=="function"?i.clearAtomics():i&&i[Aa]&&(i[jv]=i[Aa],i[Aa]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,e=this,this.$__schema.requiredPaths().forEach(function(n){e.$__.activePaths.require(n)}),this};_e.prototype.$__undoReset=function(){if(!(this.$__.backup==null||this.$__.backup.activePaths==null)){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let e of this.$__dirty()){let r=e.value;r&&r[Aa]&&r[jv]&&(r[Aa]=r[jv])}if(!this.$isSubdocument)for(let e of this.$getAllSubdocs())e.$__undoReset()}};_e.prototype.$__dirty=function(){let t=this,e=this.$__.activePaths.map("modify",function(i){return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}});e=e.concat(this.$__.activePaths.map("default",function(i){if(!(i==="_id"||t.$__getValue(i)==null))return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}}));let r=new Map(e.filter(i=>i!=null).map(i=>[i.path,i.value])),n=[];return e.forEach(function(i){if(!i)return;let s=null,o=nW(i.path);for(let a=0;a<o.length-1;a++)if(r.has(o[a])){s=r.get(o[a]);break}s==null?n.push(i):s!=null&&s[Aa]!=null&&s.hasAtomics()&&(s[Aa]={},s[Aa].$set=s)}),n};_e.prototype.$__setSchema=function(t){Cbt(t.tree,this,void 0,t.options);for(let e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();t.path("schema")==null&&(this.schema=t),this.$__schema=t,this[jbt]=t};_e.prototype.$__getArrayPathsToValidate=function(){return zO||(zO=G0()),this.$__.activePaths.map("init","modify",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&Array.isArray(t)&&Ft.isMongooseDocumentArray(t)&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})};_e.prototype.$getAllSubdocs=function(t){if(t?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;zO||(zO=G0()),Lv=Lv||y_();let e=[];function r(n){let i=[];for(let{model:s}of n.$__schema.childSchemas){let o=n.$__getValue(s.path);if(o!=null){if(o.$__&&i.push(o),Array.isArray(o))for(let a of o)a!=null&&a.$__&&i.push(a);if(o instanceof Map)for(let a of o.values())a!=null&&a.$__&&i.push(a)}}for(let s of i)r(s);e.push(...i)}return r(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=e),e};function e_t(t){let e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(let r of e)r[0]!=="pre"&&r[0]!=="post"&&r[0]!=="on"&&t[r[0]].apply(t,r[1])}_e.prototype.$__handleReject=function(e){this.$listeners("error").length?this.$emit("error",e):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",e)};_e.prototype.$toObject=function(t,e){let r=this.$__schema._defaultToObjectOptions(e),n=this.$__hasOnlyPrimitiveValues();t=Ft.isPOJO(t)?{...t}:{},t._calledWithOptions=t._calledWithOptions||{...t};let i;t._calledWithOptions.minimize!=null?i=t.minimize:this.$__schemaTypeOptions?.minimize!=null?i=this.$__schemaTypeOptions.minimize:r!=null&&r.minimize!=null?i=r.minimize:i=this.$__schema.options.minimize,t.minimize=i,n||(t._seen=t._seen||new Map);let s=t._calledWithOptions.depopulate??r?.depopulate??t.depopulate??!1;if(s&&t._isNested&&this.$__.wasPopulated)return Tl(this.$__.wasPopulated.value||this._doc._id,t);if(s&&(t.depopulate=!0),r!=null)for(let f of Object.keys(r))t[f]==null&&(t[f]=r[f]);t._isNested=!0,t.json=e,t.minimize=i;let o=t._parentOptions;t._parentOptions=this.$isSubdocument?t:null;let a=t._calledWithOptions.schemaFieldsOnly??t.schemaFieldsOnly??r.schemaFieldsOnly??!1,u;if(n&&!t.flattenObjectIds)u=this.$__toObjectShallow(a);else if(a){u={};for(let f of Object.keys(this.$__schema.paths)){let h=this.$__getValue(f);if(h===void 0)continue;let y=f,E=u;if(f.indexOf(".")!==-1){let v=f.split(".");y=v[v.length-1];for(let w=0;w<v.length-1;++w)E[v[w]]=E[v[w]]??{},E=E[v[w]]}if(h===null){E[y]=null;continue}E[y]=Tl(h,t)}}else u=Tl(this._doc,t)||{};let c=t._calledWithOptions.getters??t.getters??r.getters??!1;c&&(t_t(this,u),t.minimize&&(u=Mbt(u)||{}));let l=t._calledWithOptions.virtuals??r.virtuals??o?.virtuals??void 0;(l||c&&l!==!1)&&iW(this,u,t,t),t.versionKey===!1&&this.$__schema.options.versionKey&&delete u[this.$__schema.options.versionKey];let d=t._calledWithOptions.transform??!0,p;if(d===!0?p=r.transform:typeof d=="function"&&(p=d),d&&r_t(this,u),t.useProjection&&n_t(this,u),typeof p=="function"){let f=p(this,u,t);typeof f<"u"&&(u=f)}return u};_e.prototype.$__toObjectShallow=function(e){let r={};if(this._doc!=null){let n=Object.keys(e?this.$__schema.paths:this._doc);for(let i of n){let s=this._doc[i];s instanceof Date?r[i]=new Date(s):s!==void 0&&(r[i]=s)}}return r};_e.prototype.toObject=function(t){return this.$toObject(t)};function iW(t,e,r,n){let i=t.$__schema,s=i.virtuals,o=Object.keys(s),a=o.length,u=a,c,l,d=t._doc,p,f=typeof(n&&n.aliases)=="boolean"?n.aliases:!0;r=r||{};let h=null;if(Array.isArray(r.virtuals))h=new Set(r.virtuals);else if(r.virtuals&&r.virtuals.pathsToSkip){h=new Set(o);for(let y=0;y<r.virtuals.pathsToSkip.length;y++)h.has(r.virtuals.pathsToSkip[y])&&h.delete(r.virtuals.pathsToSkip[y])}if(!d)return e;for(a=0;a<u;++a){if(c=o[a],h!=null&&!h.has(c)||!f&&Object.hasOwn(i.aliases,c))continue;if(l=c,r.path!=null){if(!c.startsWith(r.path+"."))continue;l=c.substring(r.path.length+1)}if(l.indexOf(".")===-1&&l===c){if(p=s[c].applyGetters(void 0,t),p===void 0)continue;p=Tl(p,r),e[l]=p;continue}let y=l.split(".");if(p=Tl(t.get(c),r),p===void 0)continue;let E=y.length;d=e;for(let v=0;v<E-1;++v)d[y[v]]=d[y[v]]||{},d=d[y[v]];d[y[E-1]]=p}return e}function t_t(t,e){let r=t.$__schema,n=Object.keys(r.paths),i=n.length,s,o=t._doc,a;if(!o)return e;for(;i--;){s=n[i];let u=s.split("."),c=u.length,l=c-1,d=e,p;if(o=t._doc,!!t.$__isSelected(s))for(let f=0;f<c&&(p=u[f],a=o[p],!(d!=null&&typeof d!="object"));++f){if(f===l){if(d[p]=r.paths[s].applyGetters(d[p],t),Array.isArray(d[p])&&r.paths[s].$embeddedSchemaType)for(let h=0;h<d[p].length;++h)d[p][h]=r.paths[s].$embeddedSchemaType.applyGetters(d[p][h],t)}else if(a==null){p in o&&(d[p]=a);break}else d=d[p]||(d[p]={});o=a}}return e}function r_t(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;for(let s of n){let o=r.paths[s],a=o.options.transform??o.constructor?.defaultOptions?.transform,u=o.$embeddedSchemaType?.options?.transform??o.$embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof a=="function"){let c=t.$get(s);if(c===void 0)continue;let l=a.call(t,c);HEe(s,l),Ft.setValue(s,l,e)}else if(typeof u=="function"){let c=t.$get(s);if(c===void 0)continue;let l=[].concat(c);for(let d=0;d<l.length;++d){let p=u.call(t,l[d]);l[d]=p,HEe(s,p)}e[s]=l}}return e}function HEe(t,e){if(Fbt(e))throw new Error("`transform` function must be synchronous, but the transform on path `"+t+"` returned a promise.")}function n_t(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;let s=t.$__.selected;if(s===void 0&&(s={},Nbt.applyPaths(s,r)),s==null||Object.keys(s).length===0)return e;for(let o of n)s[o]!=null&&!s[o]&&delete e[o];return e}_e.prototype.toJSON=function(t){return this.$toObject(t,!0)};_e.prototype.ownerDocument=function(){return this};_e.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this};_e.prototype.$parent=_e.prototype.parent;_e.prototype.$__setParent=function(e){this.$__.parent=e,this.$__parent=e};_e.prototype.inspect=function(t){let e=Ft.isPOJO(t),r;e&&(r=t,r.minimize=!1);let n=arguments.length>0?this.toObject(r):this.toObject();return n??"MongooseDocument { "+n+" }"};rW.custom&&(_e.prototype[rW.custom]=_e.prototype.inspect);_e.prototype.toString=function(){let t=this.inspect();return typeof t=="string"?t:rW(t)};_e.prototype.equals=function(t){if(!t)return!1;let e=this.$__getValue("_id"),r=t.$__!=null?t.$__getValue("_id"):t;return!e&&!r?GO(this,t):e&&e.equals?e.equals(r):e===r};_e.prototype.populate=async function(){let e={},r=[...arguments];if(typeof r[r.length-1]=="function")throw new wa("Document.prototype.populate() no longer accepts a callback");if(r.length!==0){let s=Ft.populate.apply(null,r);for(let o of s)e[o.path]=o}let n=Ft.object.vals(e),i=this.constructor;if(this.$__isNested){i=this.$__[Kbt].constructor;let s=this.$__.nestedPath;n.forEach(function(o){o.path=s+"."+o.path})}if(this.$session()!=null){let s=this.$session();n.forEach(o=>{if(o.options==null){o.options={session:s};return}"session"in o.options||(o.options.session=s)})}return n.forEach(s=>{s._localModel=i}),i.populate(this,n)};_e.prototype.$getPopulatedDocs=function(){let e=[];this.$__.populated!=null&&(e=e.concat(Object.keys(this.$__.populated)));let r=[];for(let n of e){let i=this.$get(n);Array.isArray(i)?r=r.concat(i):i instanceof _e&&r.push(i)}return r};_e.prototype.populated=function(t,e,r){if(e==null||e===!0){if(!this.$__.populated||typeof t!="string")return;let i=t.endsWith(".$*")?t.replace(/\.\$\*$/,""):t,s=this.$__.populated[i];return s?e===!0?s:s.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:r};let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&this.$populated(s)){let a=n.slice(i+1).join(".");o.$populated(a,e,r);break}}return e};_e.prototype.$populated=_e.prototype.populated;_e.prototype.$assertPopulated=function(e,r){if(Array.isArray(e))return e.forEach(n=>this.$assertPopulated(n,r)),this;if(arguments.length>1&&this.$set(r),!this.$populated(e))throw new wa(`Expected path "${e}" to be populated`);return this};_e.prototype.depopulate=function(t){typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));let e,r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let s of r)delete this.$$populatedVirtuals[s],delete this._doc[s],delete n[s];let i=Object.keys(n);for(let s of i)if(e=this.$populated(s),!!e)if(delete n[s],Array.isArray(e)){let o=Ft.getValue(s,this._doc);if(o.isMongooseArray){let a=o.__array;for(let u=0;u<a.length;++u){let c=a[u];c!=null&&(a[u]=c instanceof _e?c._doc._id:c._id)}}else Ft.setValue(s,e,this._doc)}else Ft.setValue(s,e,this._doc);return this}for(let i of t)if(e=this.$populated(i),delete n[i],r.indexOf(i)!==-1)delete this.$$populatedVirtuals[i],delete this._doc[i];else if(e)if(Array.isArray(e)){let s=Ft.getValue(i,this._doc);if(s.isMongooseArray){let o=s.__array;for(let a=0;a<o.length;++a){let u=o[a];u!=null&&(o[a]=u instanceof _e?u._doc._id:u._id)}}else Ft.setValue(i,e,this._doc)}else Ft.setValue(i,e,this._doc);return this};_e.prototype.$__fullPath=function(t){return t||""};_e.prototype.getChanges=function(){let t=this.$__delta();return t?t[1]:{}};_e.prototype.$__delta=function(){let e=this.$__dirty(),r=this.$__schema.options.optimisticConcurrency;if(r)if(Array.isArray(r)){let u=new Set(r);this.modifiedPaths().find(l=>u.has(l))&&(this.$__.version=e.length?Jp:$v)}else this.$__.version=e.length?Jp:$v;if(!e.length&&Jp!==this.$__.version)return;let n={},i={},s=e.length,o=[],a=0;for(n._id=this._doc._id,(n&&n._id&&n._id.$__||null)!=null&&(n._id=n._id.toObject({transform:!1,depopulate:!0}));a<s;++a){let u=e[a],c=u.value,l=i_t(this,u.path,c);if(l){o.push(l);continue}if(!this.$populated(u.path,!0)&&this.$__.selected){let p=u.path.split("."),f=p[0];if(this.$__.selected[f]&&this.$__.selected[f].$elemMatch)if(p.length>1&&p[1]==0&&typeof n[f]>"u")n[f]=this.$__.selected[f],p[1]="$",u.path=p.join(".");else{o.push(u.path);continue}}if(!(this.$isDefault(u.path)&&this.$__.selected&&(u.path.indexOf(".")===-1&&KEe(this.$__.selected,u.path)||nW(u.path).find(f=>KEe(this.$__.isSelected,f))))&&!o.length)if(c===void 0)Yp(this,n,i,u,1,"$unset");else if(c===null)Yp(this,n,i,u,null);else if(typeof c.getAtomics=="function")s_t(this,n,i,u,c);else if(c[Ebt.pathSymbol]&&Buffer.isBuffer(c))c=c.toObject(),Yp(this,n,i,u,c);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[u.path]!=null){let p=this.$__.primitiveAtomics[u.path],f=Obt(p);Yp(this,n,i,u,p[f],f)}else c=Tl(c,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),Yp(this,n,i,u,c)}return o.length?new bbt(o):(this.$__.version&&this.$__version(n,i),Object.keys(i).length===0?[n,null]:[n,i])};function i_t(t,e,r){let n=t.$populated(e,!0);if(!n&&t.$__.selected){let s=e.split(".")[0];if(t.$__.selected[s+".$"])return s}if(!(n&&Ft.isMongooseArray(r)))return;if(n.options.match||n.options.options&&Object.hasOwn(n.options.options,"limit")||n.options.options&&n.options.options.skip||n.options.select&&(n.options.select._id===0||/\s?-_id\s?/.test(n.options.select))){let s=r[Aa];if(Object.keys(s).length===0||s.$set||s.$pop)return e}}function Yp(t,e,r,n,i,s){if(s||(s="$set"),r[s]||(r[s]={}),r[s][n.path]=i,t.$__schema.options.versionKey!==!1&&!o_t(t,n.path)&&Jp!==(Jp&t.$__.version)&&!t.$__schema.options.optimisticConcurrency){switch(s){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}s==="$push"||s==="$addToSet"||s==="$pullAll"||s==="$pull"?/\.\d+\.|\.\d+$/.test(n.path)?t.$__.version=Jp:t.$__.version|=H0:/^\$p/.test(s)||Array.isArray(i)?t.$__.version=Jp:/\.\d+\.|\.\d+$/.test(n.path)&&(t.$__.version|=$v)}}function s_t(t,e,r,n,i){if(r.$set&&r.$set[n.path])return;if(typeof i.getAtomics=="function"){i.getAtomics().forEach(function(d){let p=d[0],f=d[1];Yp(t,e,r,n,f,p)});return}if(typeof i.$__getAtomics=="function"){i.$__getAtomics().forEach(function(d){let p=d[0],f=d[1];Yp(t,e,r,n,f,p)});return}let s=i[Aa],o=Object.keys(s),a=o.length,u,c;if(a===0)return Ft.isMongooseObject(i)?i=i.toObject({depopulate:1,_isNested:!0}):i.valueOf&&(i=i.valueOf()),Yp(t,e,r,n,i);function l(d){return Ft.isMongooseObject(d)?d.toObject({depopulate:1,_isNested:!0}):d}for(;a--;)c=o[a],u=s[c],Ft.isMongooseObject(u)?u=u.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(u)?u=u.map(l):u.valueOf&&(u=u.valueOf()),c==="$addToSet"&&(u={$each:u}),Yp(t,e,r,n,u,c)}function o_t(t,e){let r=t.$__schema.options.skipVersioning;return r?(e=e.replace(/\.\d+\./,"."),r[e]):!1}_e.prototype.$clone=function(){let t=this.constructor,e=new t;if(e.$isNew=this.$isNew,this._doc&&(e._doc=Tl(this._doc,{retainDocuments:!0,parentDoc:e})),this.$__){let r=this.$__.constructor,n=new r;for(let i of Object.getOwnPropertyNames(this.$__))i!=="activePaths"&&(n[i]=Tl(this.$__[i]));Object.assign(n.activePaths,Tl({...this.$__.activePaths})),e.$__=n}return e};_e.prototype.$createModifiedPathsSnapshot=function(){let e=new WeakMap;if(!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.set(n,n.$__.activePaths.clone())}return new vbt(e,this.$__.activePaths.clone(),this.$__.version)};_e.prototype.$restoreModifiedPathsSnapshot=function(e){if(this.$__.activePaths=e.activePaths.clone(),this.$__.version=e.version,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.subdocSnapshot.has(n)&&(n.$__.activePaths=e.subdocSnapshot.get(n))}return this};_e.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let e=this.$getAllSubdocs();for(let r of e)r.$clearModifiedPaths()}return this};_e.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(e=>e==null||typeof e!="object"||Ft.isNativeObject(e)&&!Array.isArray(e)||UEe(e,"ObjectId")||UEe(e,"Decimal128")))};_e.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let e=H0===(H0&this.$__.version);if(this.$__.version=void 0,e){let r=this.$__schema.options.versionKey,n=this.$__getValue(r)||0;this.$__setValue(r,n+1)}};_e.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let e=H0===(H0&this.$__.version);if(this.$__.version=void 0,e){let r=this.$__schema.options.versionKey,n=this.$__getValue(r)||0;this.$__setValue(r,n+1)}};_e.VERSION_WHERE=$v;_e.VERSION_INC=H0;_e.VERSION_ALL=Jp;_e.ValidationError=WO;i6e.exports=n6e=_e});var wt=b(Ye=>{"use strict";var a_t=oa().UUID,u_t=vU(),o6e=ou(),c_t=Hp(),a6e=xz(),oW=Vn(),l_t=Vu(),d_t=uh(),u6e=eO(),c6e=o_e(),fh=Ks(),p_t=i_(),f_t=iz(),Uv=Dv(),h_t=_O(),m_t=EO(),Kv=B0(),{trustedSymbol:g_}=s_(),sW;Ye.specialProperties=Kv;Ye.isMongooseArray=u6e.isMongooseArray;Ye.isMongooseDocumentArray=c6e.isMongooseDocumentArray;Ye.registerMongooseArray=u6e.registerMongooseArray;Ye.registerMongooseDocumentArray=c6e.registerMongooseDocumentArray;var aW=/\s/,uW=/\s+/;Ye.toCollectionName=function(t,e){if(t==="system.profile"||t==="system.indexes")return t;if(typeof e=="function"){if(typeof t!="string")throw new TypeError("Collection name must be a string");if(t.length===0)throw new TypeError("Collection name cannot be empty");return e(t)}return t};Ye.deepEqual=function t(e,r){if(e===r)return!0;if(typeof e!="object"||typeof r!="object")return e===r;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(fh(e,"ObjectId")&&fh(r,"ObjectId")||fh(e,"Decimal128")&&fh(r,"Decimal128"))return e.toString()===r.toString();if(e instanceof RegExp&&r instanceof RegExp)return e.source===r.source&&e.ignoreCase===r.ignoreCase&&e.multiline===r.multiline&&e.global===r.global&&e.dotAll===r.dotAll&&e.unicode===r.unicode&&e.sticky===r.sticky&&e.hasIndices===r.hasIndices;if(e==null||r==null||e.prototype!==r.prototype)return!1;if(e instanceof Map||r instanceof Map)return!(e instanceof Map)||!(r instanceof Map)?!1:t(Array.from(e.keys()),Array.from(r.keys()))&&t(Array.from(e.values()),Array.from(r.values()));if(e instanceof Number&&r instanceof Number)return e.valueOf()===r.valueOf();if(Buffer.isBuffer(e))return Ye.buffer.areEqual(e,r);if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return!1;let o=e.length;if(o!==r.length)return!1;for(let a=0;a<o;++a)if(!t(e[a],r[a]))return!1;return!0}e.$__!=null?e=e._doc:Uv(e)&&(e=e.toObject()),r.$__!=null?r=r._doc:Uv(r)&&(r=r.toObject());let n=Object.keys(e),i=Object.keys(r),s=n.length;if(s!==i.length)return!1;for(let o=s-1;o>=0;o--)if(n[o]!==i[o])return!1;for(let o of n)if(!t(e[o],r[o]))return!1;return!0};Ye.last=function(t){if(t.length>0)return t[t.length-1]};Ye.promiseOrCallback=h_t;Ye.cloneArrays=function(e){return Array.isArray(e)?e.map(r=>Ye.cloneArrays(r)):e};Ye.omit=function(e,r){if(r==null)return Object.assign({},e);Array.isArray(r)||(r=[r]);let n=Object.assign({},e);for(let i of r)delete n[i];return n};Ye.clonePOJOsAndArrays=function(e){if(e==null||e.$__!=null)return e;if(p_t(e)){e={...e};for(let r of Object.keys(e))e[r]=Ye.clonePOJOsAndArrays(e[r]);return e}if(Array.isArray(e)){e=[...e];for(let r=0;r<e.length;++r)e[r]=Ye.clonePOJOsAndArrays(e[r]);return e}return e};Ye.merge=function t(e,r,n,i){n=n||{};let s=Object.keys(r),o=0,a=s.length,u;r[g_]&&(e[g_]=r[g_]),i=i||"";let c=n.omitNested||{};for(;o<a;)if(u=s[o++],!(n.omit&&n.omit[u])&&!c[i]&&!Kv.has(u))if(e[u]==null)e[u]=Ye.clonePOJOsAndArrays(r[u]);else if(Ye.isObject(r[u])){if(Ye.isObject(e[u])||(e[u]={}),r[u]!=null){if(n.isDiscriminatorSchemaMerge&&r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?m_t(e[u],r[u].clone(),n.isDiscriminatorSchemaMerge):e[u]=r[u].clone();continue}else if(fh(r[u],"ObjectId")){e[u]=new c_t(r[u]);continue}}t(e[u],r[u],n,i?i+"."+u:u)}else n.overwrite&&(e[u]=r[u]);return e};Ye.toObject=function t(e){sW||(sW=ac());let r;if(e==null)return e;if(e instanceof sW)return e.toObject();if(Array.isArray(e)){r=[];for(let n of e)r.push(t(n));return r}if(Ye.isPOJO(e)){r={},e[g_]&&(r[g_]=e[g_]);for(let n of Object.keys(e))Kv.has(n)||(r[n]=t(e[n]));return r}return e};Ye.isObject=d_t;Ye.isPOJO=i_();Ye.isNonBuiltinObject=function(e){return typeof e=="object"&&!Ye.isNativeObject(e)&&!Ye.isMongooseType(e)&&!(e instanceof a_t)&&e!=null};Ye.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String};Ye.isEmptyObject=function(t){return t!=null&&typeof t=="object"&&Object.keys(t).length===0};Ye.hasKey=function(e,r){let n=Object.keys(e);for(let i of n)if(i===r||Ye.isPOJO(e[i])&&Ye.hasKey(e[i],r))return!0;return!1};Ye.tick=function(e){if(typeof e=="function")return function(){try{e.apply(this,arguments)}catch(r){l_t(function(){throw r})}}};Ye.isMongooseType=function(t){return fh(t,"ObjectId")||fh(t,"Decimal128")||t instanceof Buffer};Ye.isMongooseObject=Uv;Ye.expires=function(e){e&&e.constructor.name==="Object"&&"expires"in e&&(e.expireAfterSeconds=typeof e.expires!="string"?e.expires:Math.round(u_t(e.expires)/1e3),delete e.expires)};Ye.populate=function(e,r,n,i,s,o,a,u){let c=null;if(arguments.length===1){if(e instanceof a6e)return e._docs={},e._childDocs=[],[e];if(Array.isArray(e))return l(e).map(p=>Ye.populate(p)[0]);Ye.isObject(e)?c=Object.assign({},e):c={path:e}}else typeof n=="object"?c={path:e,select:r,match:n,options:i}:c={path:e,select:r,model:n,match:i,options:s,populate:o,justOne:a,count:u};if(typeof c.path!="string"&&!(Array.isArray(c.path)&&c.path.every(d=>typeof d=="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof e+"`");return y_t(c);function l(d){let p=[];return d.forEach(function(f){aW.test(f.path)?f.path.split(uW).forEach(function(y){let E=Object.assign({},f);E.path=y,p.push(E)}):p.push(f)}),p}};function y_t(t){if(Array.isArray(t.populate)){let n=[];t.populate.forEach(function(i){if(aW.test(i.path)){let s=Object.assign({},i);s.path.split(uW).forEach(function(a){s.path=a,n.push(Ye.populate(s)[0])})}else n.push(Ye.populate(i)[0])}),t.populate=Ye.populate(n)}else t.populate!=null&&typeof t.populate=="object"&&(t.populate=Ye.populate(t.populate));let e=[],r=aW.test(t.path)?t.path.split(uW):Array.isArray(t.path)?t.path:[t.path];t.options!=null&&(t.options=oW(t.options));for(let n of r)e.push(new a6e(Object.assign({},t,{path:n})));return e}Ye.getValue=function(t,e,r){return o6e.get(t,e,b_t,r)};var g_t=Object.freeze({getters:!1});function b_t(t,e){if(e==="$*"&&t instanceof Map)return t;let r=t?._doc||t;return r!=null&&r.isMongooseArrayProxy&&(r=r.__array),r instanceof Map?r.get(e,g_t):r[e]}Ye.setValue=function(t,e,r,n,i){o6e.set(t,e,r,"_doc",n,i)};Ye.object={};Ye.object.vals=function(e){let r=Object.keys(e),n=r.length,i=[];for(;n--;)i.push(e[r[n]]);return i};Ye.isNullOrUndefined=function(t){return t==null};Ye.array={};Ye.array.flatten=function t(e,r,n){return n||(n=[]),e.forEach(function(i){Array.isArray(i)?t(i,r,n):(!r||r(i))&&n.push(i)}),n};Ye.hasUserDefinedProperty=function(t,e){if(t==null)return!1;if(Array.isArray(e)){for(let r of e)if(Ye.hasUserDefinedProperty(t,r))return!0;return!1}if(Object.hasOwn(t,e))return!0;if(typeof t=="object"&&e in t){let r=t[e];return r!==Object.prototype[e]&&r!==Array.prototype[e]}return!1};var s6e=Math.pow(2,32)-1;Ye.isArrayIndex=function(t){return typeof t=="number"?t>=0&&t<=s6e:typeof t=="string"&&/^\d+$/.test(t)?(t=+t,t>=0&&t<=s6e):!1};Ye.array.unique=function(t){let e=new Set,r=new Set,n=[];for(let i of t)if(typeof i=="number"||typeof i=="string"||i==null){if(e.has(i))continue;n.push(i),e.add(i)}else if(fh(i,"ObjectId")){if(r.has(i.toString()))continue;n.push(i),r.add(i.toString())}else n.push(i);return n};Ye.buffer={};Ye.buffer.areEqual=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0};Ye.getFunctionName=f_t;Ye.decorate=function(t,e){for(let r in e)Kv.has(r)||(t[r]=e[r])};Ye.mergeClone=function(t,e){Uv(e)&&(e=e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));let r=Object.keys(e),n=r.length,i=0,s;for(;i<n;)if(s=r[i++],!Kv.has(s))if(typeof t[s]>"u")t[s]=oW(e[s],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=e[s];if(o!=null&&o.valueOf&&!(o instanceof Date)&&(o=o.valueOf()),Ye.isObject(o)){let a=o;Uv(o)&&!o.isMongooseBuffer&&(a=a.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(a=Buffer.from(a)),Ye.mergeClone(t[s],a)}else t[s]=oW(o,{flattenDecimals:!1})}};Ye.each=function(t,e){for(let r of t)e(r)};Ye.renameObjKey=function(t,e,r){return Object.keys(t).reduce((i,s)=>(s===e?i[r]=t[e]:i[s]=t[s],i),{})};Ye.getOption=function(t){let e=Array.prototype.slice.call(arguments,1);for(let r of e)if(r!=null&&r[t]!=null)return r[t];return null};Ye.noop=function(){};Ye.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=e[i];return n};Ye.warn=function(e){return process.emitWarning(e,{code:"MONGOOSE"})};Ye.injectTimestampsOption=function(e,r){r!=null&&(e.timestamps=r)}});var ri=b((QO,g6e)=>{"use strict";var Vv=Ea(),m6e=Sa(),__t=bO(),E_t=Tz(),YO=Vn(),cW=Gbe(),v_t=zbe(),lW=Jbe(),l6e=Vu(),S_t=nt().schemaTypeSymbol,z0=wt(),y6e=nt().validatorErrorSymbol,w_t=nt().documentIsModified,d6e=nt().populateModelSymbol,dW=Vv.CastError,pW=Vv.ValidatorError,A_t={_skipMarkModified:!0};function Dt(t,e,r,n){this[S_t]=!0,this.path=t,this.instance=r,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=Object.hasOwn(this.constructor,"getters")?this.constructor.getters.slice():[],this.setters=Object.hasOwn(this.constructor,"setters")?this.constructor.setters.slice():[],this.splitPath(),e=e||{};let i=this.constructor.defaultOptions||{},s=Object.keys(i);for(let u of s)u==="validate"?this.validate(i.validate):Object.hasOwn(i,u)&&!Object.hasOwn(e,u)&&(e[u]=i[u]);e.select==null&&delete e.select;let o=this.OptionsConstructor||m6e;this.options=new o(e),this.parentSchema=n,this._index=null,z0.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,cW(this));let a=Object.keys(this.options);for(let u of a){if(u==="cast"){Array.isArray(this.options[u])?this.castFunction.apply(this,this.options[u]):this.castFunction(this.options[u]);continue}if(z0.hasUserDefinedProperty(this.options,u)&&typeof this[u]=="function"){if(u==="index"&&this._index){if(e.index===!1){let d=this._index;if(typeof d=="object"&&d!=null){if(d.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(d.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let c=e[u];if(u==="default"){this.default(c);continue}let l=Array.isArray(c)?c:[c];this[u].apply(this,l)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}Dt.prototype.OptionsConstructor=m6e;Dt.prototype.path;Dt.prototype.toJSON=function(){let e={...this};return delete e.parentSchema,e};Dt.prototype.validators;Dt.prototype.isRequired;Dt.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path!=null)return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};Dt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=r=>r),this._cast=e,this._cast)};Dt.prototype.castFunction=function(e,r){return arguments.length===0?this._castFunction:(e===!1&&(e=this.constructor._defaultCaster||(n=>n)),typeof e=="string"?(this._castErrorMessage=e,this._castFunction):(e!=null&&(this._castFunction=e),r!=null&&(this._castErrorMessage=r),this._castFunction))};Dt.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")};Dt.set=function(e,r){Object.hasOwn(this,"defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=r};Dt.get=function(t){this.getters=Object.hasOwn(this,"getters")?this.getters:[],this.getters.push(t)};Dt.prototype.default=function(t){if(arguments.length===1){if(t===void 0){this.defaultValue=void 0;return}if(t!=null&&t.instanceOfSchema)throw new Vv("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=t,this.defaultValue}else arguments.length>1&&(this.defaultValue=[...arguments]);return this.defaultValue};Dt.prototype.index=function(t){return this._index=t,z0.expires(this._index),this};Dt.prototype.unique=function(e,r){if(this._index===!1){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return!Object.hasOwn(this.options,"index")&&e===!1?this:(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!e,typeof r=="string"&&(this._duplicateKeyErrorMessage=r),this)};Dt.prototype.text=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return!Object.hasOwn(this.options,"index")&&t===!1?this:(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=t,this)};Dt.prototype.sparse=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return!Object.hasOwn(this.options,"index")&&t===!1?this:(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=t,this)};Dt.prototype.immutable=function(t){return this.$immutable=t,cW(this),this};Dt.prototype.transform=function(t){return this.options.transform=t,this};Dt.prototype.set=function(t){if(typeof t!="function")throw new TypeError("A setter must be a function.");return this.setters.push(t),this};Dt.prototype.get=function(t){if(typeof t!="function")throw new TypeError("A getter must be a function.");return this.getters.push(t),this};Dt.prototype.validateAll=function(t){for(let e=0;e<t.length;e++)this.validate(t[e]);return this};Dt.prototype.validate=function(t,e,r){if(typeof t=="function"||t&&z0.getFunctionName(t.constructor)==="RegExp"){let o;return typeof e=="function"?(o={validator:t,message:e},o.type=r||"user defined"):e instanceof Object&&!r?(o=lW(e)?Object.assign({},e):YO(e),o.message||(o.message=o.msg),o.validator=t,o.type=o.type||"user defined"):(e==null&&(e=Vv.messages.general.default),r||(r="user defined"),o={message:e,type:r,validator:t}),this.validators.push(o),this}let n,i,s;for(n=0,i=arguments.length;n<i;n++){if(s=arguments[n],!z0.isPOJO(s)){let o="Invalid validator. Received ("+typeof s+") "+s+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(o)}this.validate(s.validator,s)}return this};Dt.prototype.required=function(t,e){let r={};if(arguments.length>0&&t==null)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof t=="object"&&(r=t,e=r.message||e,t=t.isRequired),t===!1)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let n=this;this.isRequired=!0,this.requiredValidator=function(s){let o=this&&this.$__&&this.$__.cachedRequired;if(o!=null&&!this.$__isSelected(n.path)&&!this[w_t](n.path))return!0;if(o!=null&&n.path in o){let a=o[n.path]?n.checkRequired(s,this):!0;return delete o[n.path],a}else if(typeof t=="function")return t.apply(this)?n.checkRequired(s,this):!0;return n.checkRequired(s,this)},this.originalRequiredValue=t,typeof t=="string"&&(e=t,t=void 0);let i=e||Vv.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:i,type:"required"})),this};Dt.prototype.ref=function(t){return this.options.ref=t,this};Dt.prototype.getDefault=function(t,e,r){let n;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?n=this.defaultValue.call(t):n=this.defaultValue.call(t,t):n=this.defaultValue,n!=null){if(typeof n=="object"&&(!this.options||!this.options.shared)&&(n=YO(n)),r&&r.skipCast)return this._applySetters(n,t);let i=this.applySetters(n,t,e,void 0,A_t);return i&&!Array.isArray(i)&&i.$isSingleNested&&(i.$__parent=t),i}return n};Dt.prototype._applySetters=function(t,e,r,n,i){let s=t;if(r)return s;let o=this.setters;for(let a=o.length-1;a>=0;a--)s=o[a].call(e,s,n,this,i);return s};Dt.prototype._castNullish=function(e){return e};Dt.prototype.applySetters=function(t,e,r,n,i){let s=this._applySetters(t,e,r,n,i);return s==null?this._castNullish(s):(s=this.cast(s,e,r,n,i),s)};Dt.prototype.applyGetters=function(t,e){let r=t,n=this.getters,i=n.length;if(i===0)return r;for(let s=0;s<i;++s)r=n[s].call(e,r,this);return r};Dt.prototype.select=function(e){return this.selected=!!e,this};Dt.prototype.doValidate=function(t,e,r,n){let i=!1,s=this.path;if(typeof e!="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof e}`);let o=this.validators.filter(c=>typeof c=="object"&&c!==null),a=o.length;if(!a)return e(null);for(let c=0,l=o.length;c<l&&!i;++c){let d=o[c],p=d.validator,f,h=lW(d)?Object.assign({},d):YO(d);if(h.path=n&&n.path?n.path:s,h.fullPath=this.$fullPath,h.value=t,typeof t=="string"&&(h.length=t.length,h.value.length>30&&(h.value=h.value.slice(0,30)+"...")),p instanceof RegExp){u(p.test(t),h,r);continue}if(typeof p=="function"){if(t===void 0&&p!==this.requiredValidator){u(!0,h,r);continue}try{h.propsParameter?f=p.call(r,t,h):f=p.call(r,t)}catch(y){f=!1,h.reason=y,y.message&&(h.message=y.message)}f!=null&&typeof f.then=="function"?f.then(function(y){u(y,h,r)},function(y){h.reason=y,h.message=y.message,f=!1,u(f,h,r)}):u(f,h,r)}}function u(c,l,d){if(!i)if(c===void 0||c)--a<=0&&l6e(function(){e(null)});else{let p=l.ErrorConstructor||pW;i=new p(l,d),i[y6e]=!0,l6e(function(){e(i)})}}};function p6e(t,e){if(t!==void 0&&!t){let r=e.ErrorConstructor||pW,n=new r(e);return n[y6e]=!0,n}}Dt.prototype.doValidateSync=function(t,e,r){let n=this.path;if(!this.validators.length)return null;let s=this.validators;if(t===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")s=[this.validators[0]];else return null;let o=null,a=0,u=s.length;for(a=0;a<u;++a){let c=s[a];if(c===null||typeof c!="object")continue;let l=c.validator,d=lW(c)?Object.assign({},c):YO(c);d.path=r&&r.path?r.path:n,d.fullPath=this.$fullPath,d.value=t,typeof t=="string"&&(d.length=t.length,d.value.length>30&&(d.value=d.value.slice(0,30)+"..."));let p=!1;if(!v_t(l)){if(l instanceof RegExp){o=p6e(l.test(t),d);continue}if(typeof l=="function"){try{d.propsParameter?p=l.call(e,t,d):p=l.call(e,t)}catch(f){p=!1,d.reason=f}if(!(p!=null&&typeof p.then=="function")&&(o=p6e(p,d),o))break}}}return o};Dt._isRef=function(t,e,r,n){let i=n&&t.options&&(t.options.ref||t.options.refPath);if(!i&&r&&r.$__!=null){let s=r.$__fullPath(t.path,!0),o=r.ownerDocument();i=s!=null&&o.$populated(s)||r.$populated(t.path)}return i?e==null||!Buffer.isBuffer(e)&&e._bsontype!=="Binary"&&z0.isObject(e)?!0:n:!1};Dt.prototype._castRef=function(e,r,n,i){if(e==null)return e;if(e.$__!=null)return e.$__.wasPopulated=e.$__.wasPopulated||{value:e._doc._id},e;if(Buffer.isBuffer(e)||!z0.isObject(e)){if(n)return e;throw new dW(this.instance,e,this.path,null,this)}let s=r.$__fullPath(this.path,!0),a=r.ownerDocument().$populated(s,!0),u=e;if(!r.$__.populated||!r.$__.populated[s]||!r.$__.populated[s].options||!r.$__.populated[s].options.options||!r.$__.populated[s].options.options.lean){let c=a?a.options[d6e]:r.constructor.db.model(this.options.ref);u=c.hydrate(e,null,i),u.$__.wasPopulated={value:u._doc._id,options:{[d6e]:c}}}return u};function f6e(t,e){return this.castForQuery(null,t,e)}function C_t(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function h6e(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return Array.isArray(n)&&n.length===0?n:r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}Dt.prototype.$conditionalHandlers={$all:C_t,$eq:f6e,$in:h6e,$ne:f6e,$nin:h6e,$exists:__t,$type:E_t};Dt.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t);return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof dW&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Dt.checkRequired=function(t){return arguments.length!==0&&(this._checkRequired=t),this._checkRequired};Dt.prototype.checkRequired=function(t){return t!=null};Dt.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(e.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(e.$immutable=this.$immutable,cW(e)),this._index!==void 0&&(e._index=this._index),this.selected!==void 0&&(e.selected=this.selected),this.isRequired!==void 0&&(e.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e};Dt.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType};Dt.prototype._duplicateKeyErrorMessage=null;Dt.prototype.toJSONSchema=function(e){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};Dt.prototype.autoEncryptionType=function(){return null};g6e.exports=QO=Dt;QO.CastError=dW;QO.ValidatorError=pW});var fW=b((zmr,b6e)=>{"use strict";var Ol=su(),Ca=class{constructor(e){Object.assign(this,e),e!=null&&e.options!=null&&(this.options=Object.assign({},e.options))}};Object.defineProperty(Ca.prototype,"ref",Ol);Object.defineProperty(Ca.prototype,"refPath",Ol);Object.defineProperty(Ca.prototype,"localField",Ol);Object.defineProperty(Ca.prototype,"foreignField",Ol);Object.defineProperty(Ca.prototype,"justOne",Ol);Object.defineProperty(Ca.prototype,"count",Ol);Object.defineProperty(Ca.prototype,"match",Ol);Object.defineProperty(Ca.prototype,"options",Ol);Object.defineProperty(Ca.prototype,"skip",Ol);Object.defineProperty(Ca.prototype,"limit",Ol);Object.defineProperty(Ca.prototype,"perDocumentLimit",Ol);b6e.exports=Ca});var XO=b((Wmr,_6e)=>{"use strict";_6e.exports=function(e,r,n){return e==null?e:(e._doc!=null&&(e=e._doc),arguments.length>=3?typeof e!="object"||n===void 0?void 0:(e instanceof Map?e.set(r,n):e[r]=n,n):r==="$*"?e instanceof Map?Array.from(e.values()):Object.keys(e).map(i=>e[i]):e instanceof Map?e.get(r):e[r])}});var hW=b((Jmr,w6e)=>{"use strict";var T_t=qt(),O_t=Bz(),E6e=XO(),v6e=ou(),x_t=require("util"),I_t=wt(),S6e=/(\.\d+$|\.\d+\.)/g;w6e.exports=function(e,r,n,i,s){if(e==null)return[];if(typeof e=="string"&&s!=null&&O_t(s,e))throw new T_t("refPath `"+e+"` must not be excluded in projection, got "+x_t.inspect(s));if(S6e.test(n)){let u=n.split(S6e);if(u[u.length-1]==="")throw new Error("Can't populate individual element in an array");let c="",l=e;for(let f=0;f<u.length;f+=2){let h=u[f];if(l.startsWith(h+"."))c+=l.substring(0,h.length)+u[f+1],l=l.substring(h.length+1);else if(f===u.length-1){c+=l,l="";break}else throw new Error("Could not normalize ref path, chunk "+h+" not in populated path")}let d=v6e.get(c,r,E6e),p=Array.isArray(d)?d:[d];return p=I_t.array.flatten(p),p}let o=v6e.get(e,r,E6e),a;return i!=null&&Object.hasOwn(i.virtuals,e)?a=[i.virtuals[e].applyGetters(void 0,r)]:a=Array.isArray(o)?o:[o],a}});var ZO=b((Ymr,A6e)=>{"use strict";var R_t=hW(),D_t=wt(),k_t=nt().modelSymbol;function Qp(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}Qp.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let e="$"+this.path;this.getters.push(function(){return this.$locals[e]}),this.setters.push(function(r){this.$locals[e]=r})};Qp.prototype.clone=function(){let t=new Qp(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t};Qp.prototype.get=function(t){return this.getters.push(t),this};Qp.prototype.set=function(t){return this.setters.push(t),this};Qp.prototype.applyGetters=function(t,e){D_t.hasUserDefinedProperty(this.options,["ref","refPath"])&&e.$$populatedVirtuals&&Object.hasOwn(e.$$populatedVirtuals,this.path)&&(t=e.$$populatedVirtuals[this.path]);let r=t;for(let n of this.getters)r=n.call(e,r,this,e);return r};Qp.prototype.applySetters=function(t,e){let r=t;for(let n of this.setters)r=n.call(e,r,this,e);return r};Qp.prototype._getModelNamesForPopulate=function(e){if(this.options.refPath)return R_t(this.options.refPath,e,this.path);let r=null;return typeof this.options.ref=="function"&&!this.options.ref[k_t]?r=this.options.ref.call(e,e):r=this.options.ref,r!=null&&!Array.isArray(r)?[r]:r};A6e.exports=Qp});var mW=b((Qmr,C6e)=>{"use strict";C6e.exports=function(e){let r={_id:{auto:!0}};r._id[e.options.typeKey]="ObjectId",e.add(r)}});var yW=b((Xmr,T6e)=>{"use strict";T6e.exports=function(e,r){let n=e.discriminatorMapping&&e.discriminatorMapping.value;if(n&&!("sparse"in r)){let i=e.options.discriminatorKey;r.partialFilterExpression=r.partialFilterExpression||{},r.partialFilterExpression[i]=n}return r}});var x6e=b((Zmr,O6e)=>{"use strict";var gW=ni(),M_t=uh(),P_t=yW();O6e.exports=function(e){let r=[],n=new WeakMap,i=e.constructor.indexTypes,s=new Map;return o(e),r;function o(u,c,l){if(n.has(u))return;n.set(u,!0),c=c||"";let d=Object.keys(u.paths);for(let p of d){let f=u.paths[p];if(l!=null&&l.paths[p])continue;if(f._duplicateKeyErrorMessage!=null&&(u._duplicateKeyErrorMessagesByPath=u._duplicateKeyErrorMessagesByPath||{},u._duplicateKeyErrorMessagesByPath[p]=f._duplicateKeyErrorMessage),f.$isMongooseDocumentArray||f.$isSingleNested){if(gW(f,"options.excludeIndexes")!==!0&&gW(f,"schemaOptions.excludeIndexes")!==!0&&gW(f,"schema.options.excludeIndexes")!==!0&&o(f.schema,c+p+"."),f.schema.discriminators!=null){let y=f.schema.discriminators,E=Object.keys(y);for(let v of E)o(y[v],c+p+".",f.schema)}if(f.$isMongooseDocumentArray)continue}let h=f._index||f.caster&&f.caster._index;if(h!==!1&&h!==null&&h!==void 0){let y={},E=M_t(h),v=E?{...h}:{},w=typeof h=="string"?h:E?h.type:!1;if(w&&i.indexOf(w)!==-1)y[c+p]=w;else if(v.text)y[c+p]="text",delete v.text;else{let A=!1;h==="descending"||h==="desc"?A=!0:h==="ascending"||h==="asc"?A=!1:A=Number(h)===-1,y[c+p]=A?-1:1}delete v.type,"background"in v||(v.background=!0),u.options.autoIndex!=null&&(v._autoIndex=u.options.autoIndex);let T=v&&v.name;typeof T=="string"?s.has(T)?Object.assign(s.get(T),y):(r.push([y,v]),s.set(T,y)):(r.push([y,v]),s.set(T,y))}}n.delete(u),c?a(u,c):(u._indexes.forEach(function(p){let f=p[1];"background"in f||(f.background=!0),P_t(u,f)}),r=r.concat(u._indexes))}function a(u,c){let l=u._indexes,d=l.length;for(let p=0;p<d;++p){let f=l[p][0],h=l[p][1],y=Object.keys(f),E=y.length,v={};for(let T=0;T<E;++T){let A=y[T];v[c+A]=f[A]}let w=Object.assign({},h);if(h!=null&&h.partialFilterExpression!=null){w.partialFilterExpression={};let T=h.partialFilterExpression;for(let A of Object.keys(T))w.partialFilterExpression[c+A]=T[A]}r.push([v,w])}}}});var bW=b((e0r,I6e)=>{"use strict";I6e.exports=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e}});var D6e=b((t0r,R6e)=>{"use strict";R6e.exports=function(e){return!(!e.paths.id&&e.paths._id&&e.options.id)||e.aliases&&e.aliases.id||e.virtual("id").get(N_t),e};function N_t(){return this._id!=null?this._id.toString():null}});var M6e=b((r0r,k6e)=>{"use strict";k6e.exports=function(e,r){let n=Object.keys(e),i=Object.keys(r);if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++){let o=n[s];if(o!==i[s]||e[o]!==r[o])return!1}return!0}});var N6e=b((n0r,P6e)=>{"use strict";P6e.exports=function(e,r,n,i){return i.justOne||i.count?(e[r]=Array.isArray(n)?n[0]:n,typeof e[r]!="object"&&(e[r]=i.count?n:null)):(e[r]=Array.isArray(n)?n:n==null?[]:[n],e[r]=e[r].filter(function(s){return s&&typeof s=="object"})),e[r]}});var Gv=b((i0r,F6e)=>{"use strict";F6e.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var ex=b((s0r,B6e)=>{"use strict";B6e.exports=F_t;function F_t(t,e){return t==null?null:typeof t=="boolean"?e:typeof t[e]=="boolean"?t[e]?e:null:e in t?t[e]:e}});var EW=b((o0r,q6e)=>{"use strict";var B_t=Gv(),Xp=ex();q6e.exports=W0;function W0(t,e,r){if(e==null)return;if(Object.keys(e).some(a=>a[0]==="$")){if(e.$push&&o(e.$push),e.$addToSet&&o(e.$addToSet),e.$set!=null){let a=Object.keys(e.$set);for(let u of a)_W(r,u,e.$set,t)}if(e.$setOnInsert!=null){let a=Object.keys(e.$setOnInsert);for(let u of a)_W(r,u,e.$setOnInsert,t)}}let s=Object.keys(e).filter(a=>a[0]!=="$");for(let a of s)_W(r,a,e,t);function o(a){for(let u of Object.keys(a)){let c=r.path(u.replace(/\.\$\./i,".").replace(/.\$$/,""));if(a[u]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps){let l=c.schema.options.timestamps,d=Xp(l,"createdAt"),p=Xp(l,"updatedAt");a[u].$each?a[u].$each.forEach(function(f){p!=null&&(f[p]=t),d!=null&&(f[d]=t),W0(t,f,c.schema)}):(p!=null&&(a[u][p]=t),d!=null&&(a[u][d]=t),W0(t,a[u],c.schema))}}}}function q_t(t,e,r){let n=e.schema.options.timestamps,i=t.length;if(!n){for(let a=0;a<i;++a)W0(r,t[a],e.schema);return}let s=Xp(n,"createdAt"),o=Xp(n,"updatedAt");for(let a=0;a<i;++a)o!=null&&(t[a][o]=r),s!=null&&(t[a][s]=r),W0(r,t[a],e.schema)}function L_t(t,e,r){let n=e.schema.options.timestamps;if(!n){W0(r,t,e.schema);return}let i=Xp(n,"createdAt"),s=Xp(n,"updatedAt");s!=null&&(t[s]=r),i!=null&&(t[i]=r),W0(r,t,e.schema)}function _W(t,e,r,n){let i=B_t(e),s=t.path(i);if(!s)return;let o=[],a=i.split(".");for(let u=a.length-1;u>0;--u){let c=t.path(a.slice(0,u).join("."));c!=null&&(c.$isMongooseDocumentArray||c.$isSingleNested)&&o.push({parentPath:e.split(".").slice(0,u).join("."),parentSchemaType:c})}if(Array.isArray(r[e])&&s.$isMongooseDocumentArray)q_t(r[e],s,n);else if(r[e]&&s.$isSingleNested)L_t(r[e],s,n);else if(o.length>0)for(let u of o){let c=u.parentPath,l=u.parentSchemaType,d=l.schema.options.timestamps,p=Xp(d,"updatedAt");if(!(!d||p==null)){if(l.$isSingleNested)r[c+"."+p]=n;else if(l.$isMongooseDocumentArray){let f=e.substring(c.length+1);if(/^\d+$/.test(f)){r[c+"."+f][p]=n;continue}let h=f.indexOf(".");f=h!==-1?f.substring(0,h):f,r[c+"."+f+"."+p]=n}}}else if(s.schema!=null&&s.schema!=t&&r[e]){let u=s.schema.options.timestamps,c=Xp(u,"createdAt"),l=Xp(u,"updatedAt");if(!u)return;l!=null&&(r[e][l]=n),c!=null&&(r[e][c]=n)}}});var vW=b((a0r,j6e)=>{"use strict";var L6e=ni();j6e.exports=j_t;function j_t(t,e,r,n,i,s){let o=n,a=o,u=L6e(i,"timestamps",!0);if(!u||o==null)return n;let c=u!=null&&u.createdAt===!1,l=u!=null&&u.updatedAt===!1;if(s)return n&&n.$set&&(n=n.$set,o.$set={},a=o.$set),!l&&r&&!n[r]&&(a[r]=t),!c&&e&&!n[e]&&(a[e]=t),o;if(n=n||{},Array.isArray(o))return r==null||o.push({$set:{[r]:t}}),o;if(o.$set=o.$set||{},!l&&r&&(!n.$currentDate||!n.$currentDate[r])){let d=!1;if(r.indexOf(".")!==-1){let p=r.split(".");for(let f=1;f<p.length;++f){let h=p.slice(-f).join("."),y=p.slice(0,-f).join(".");if(n[y]!=null){n[y][h]=t,d=!0;break}else if(n.$set&&n.$set[y]){n.$set[y][h]=t,d=!0;break}}}d||(o.$set[r]=t),Object.hasOwn(o,r)&&delete o[r]}if(!c&&e){let d=L6e(i,"overwriteImmutable",!1),p=n[e]!=null||n?.$set[e]!=null;if(d&&p)n[e]!=null&&(o.$set[e]=n[e],delete n[e]);else{n[e]&&delete n[e],n.$set&&n.$set[e]&&delete n.$set[e];let f=!1;if(e.indexOf(".")!==-1){let h=e.split(".");for(let y=1;y<h.length;++y){let E=h.slice(-y).join("."),v=h.slice(0,-y).join(".");if(n[v]!=null){n[v][E]=t,f=!0;break}else if(n.$set&&n.$set[v]){n.$set[v][E]=t,f=!0;break}}}f||(o.$setOnInsert=o.$setOnInsert||{},o.$setOnInsert[e]=t)}}return Object.keys(o.$set).length===0&&delete o.$set,o}});var U6e=b((u0r,$6e)=>{"use strict";$6e.exports=function(e,r,n,i,s){let o=r!=null&&r.updatedAt===!1,a=r!=null&&r.createdAt===!1,u=n!=null?n():e.ownerDocument().constructor.base.now();if(!a&&(e.isNew||e.$isSubdocument)&&i&&!e.$__getValue(i)&&e.$__isSelected(i)&&e.$set(i,u,void 0,{overwriteImmutable:!0}),!o&&s&&(e.isNew||e.$isModified())){let c=u;e.isNew&&i!=null&&(c=e.$__getValue(i)),e.$set(s,c)}}});var H6e=b((c0r,G6e)=>{"use strict";var $_t=EW(),U_t=vW(),K_t=ni(),K6e=ex(),V_t=U6e(),G_t=$0(),V6e=new Set(["replaceOne","findOneAndReplace"]);G6e.exports=function(e,r){let n=e.childSchemas.find(i);function i(d){return!!d.schema.options.timestamps}if(!r&&!n)return;let s=K6e(r,"createdAt"),o=K6e(r,"updatedAt"),a=r!=null&&Object.hasOwn(r,"currentTime")?r.currentTime:null,u={};if(e.$timestamps={createdAt:s,updatedAt:o},s&&!e.paths[s]){let d=e.base!=null?e.base.get("timestamps.createdAt.immutable"):null,p=d??!0;u[s]={[e.options.typeKey||"type"]:Date,immutable:p}}o&&!e.paths[o]&&(u[o]=Date),e.add(u),e.pre("save",function(p){let f=K_t(this,"$__.saveOptions.timestamps");if(f===!1)return p();V_t(this,f,a,s,o),p()}),e.methods.initializeTimestamps=function(){let d=a!=null?a():this.constructor.base.now();if(s&&!this.get(s)&&this.$set(s,d),o&&!this.get(o)&&this.$set(o,d),this.$isSubdocument)return this;let p=this.$getAllSubdocs();for(let f of p)f.initializeTimestamps&&f.initializeTimestamps();return this},l[G_t.builtInMiddleware]=!0;let c={query:!0,model:!1};e.pre("findOneAndReplace",c,l),e.pre("findOneAndUpdate",c,l),e.pre("replaceOne",c,l),e.pre("update",c,l),e.pre("updateOne",c,l),e.pre("updateMany",c,l);function l(d){let p=a!=null?a():this.model.base.now();V6e.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),U_t(p,s,o,this.getUpdate(),this._mongooseOptions,V6e.has(this.op)),$_t(p,this.getUpdate(),this.model.schema),d()}}});var W6e=b((l0r,z6e)=>{"use strict";var H_t=qt(),z_t=require("util");z6e.exports=W_t;function W_t(t,e){if(typeof t!="string"&&typeof t!="function")throw new H_t('Invalid ref at path "'+e+'". Got '+z_t.inspect(t,{depth:0}))}});var tx=b(b_=>{"use strict";var J6e=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);b_.queryOperations=J6e;var J_t=J6e.concat(["validate"]);b_.queryMiddlewareFunctions=J_t;var Y_t=["aggregate"];b_.aggregateMiddlewareFunctions=Y_t;var Q_t=["bulkWrite","createCollection","insertMany"];b_.modelMiddlewareFunctions=Q_t;var X_t=["validate","save","remove","updateOne","deleteOne","init"];b_.documentMiddlewareFunctions=X_t});var rx=b((p0r,Y6e)=>{"use strict";var Z_t=$0(),eEt=_O();Y6e.exports=Hv;Hv.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];var tEt=new Set(Hv.middlewareFunctions.flatMap(t=>[t,`$__${t}`]));function Hv(t,e,r){r=r||{};let n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},i=r.decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(let c of Object.keys(e.paths)){let l=e.paths[c],d=null;if(l.$isSingleNested)d=l.caster;else if(l.$isMongooseDocumentArray)d=l.Constructor;else continue;if(!d.$appliedHooks&&(Hv(d,l.schema,{...r,isChildSchema:!0}),d.discriminators!=null)){let p=Object.keys(d.discriminators);for(let f of p)Hv(d.discriminators[f],d.discriminators[f].schema,r)}}let s=e.s.hooks.filter(c=>c.name==="updateOne"||c.name==="deleteOne"?!!c.document:c.name==="remove"||c.name==="init"?c.document==null||!!c.document:c.query!=null||c.document!=null?c.document!==!1:!0).filter(c=>e.methods[c.name]?!c.fn[Z_t.builtInMiddleware]:!0);t._middleware=s,i.$__originalValidate=i.$__originalValidate||i.$__validate;let o=r&&r.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let c of o){let l=c==="validate"?"$__originalValidate":`$__${c}`,d=s.createWrapper(c,i[l],null,n);i[`$__${c}`]=d}i.$__init=s.createWrapperSync("init",i.$__init,null,n);let a=Object.keys(e.methods),u=Object.assign({},n,{checkForPromise:!0});for(let c of a){if(tEt.has(c)||!s.hasHooks(c))continue;let l=i[c];i[c]=function(){let d=Array.prototype.slice.call(arguments),p=d.slice(-1).pop(),f=typeof p=="function"?d.slice(0,d.length-1):d;return eEt(p,h=>this[`$__${c}`].apply(this,f.concat([h])),t.events)},i[`$__${c}`]=s.createWrapper(c,l,null,u)}}});var X6e=b((f0r,Q6e)=>{"use strict";Q6e.exports=oa().Double});var nx=b((h0r,n4e)=>{"use strict";var rEt=qt(),Z6e=Vn(),nEt=wt().deepEqual,iEt=qo(),sEt=MO(),e4e=require("util"),oEt=B0(),SW=Ks(),aEt=xO(),t4e=nt().populateModelSymbol;var xl=class extends Map{constructor(e,r,n,i,s){iEt(e)==="Object"&&(e=Object.keys(e).reduce((o,a)=>o.concat([[a,e[a]]]),[])),super(e),this.$__parent=n!=null&&n.$__!=null?n:null,this.$__parent?.$isSingleNested&&this.$__parent.$basePath?(this.$__path=this.$__parent.$basePath+"."+r,this.$__pathRelativeToParent=r):s?.path?(this.$__path=s.path,this.$__pathRelativeToParent=null):(this.$__path=r,this.$__pathRelativeToParent=null),this.$__schemaType=i,this.$__runDeferred()}$init(e,r){r4e(e),super.set(e,r),r!=null&&r.$isSingleNested&&(r.$basePath=this.$__path+"."+e,this.$__pathRelativeToParent!=null?r.$pathRelativeToParent=this.$__pathRelativeToParent+"."+e:r.$pathRelativeToParent=this.$__path+"."+e)}$__set(e,r){super.set(e,r)}get(e,r){return SW(e,"ObjectId")&&(e=e.toString()),r=r||{},r.getters===!1?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,r){if(SW(e,"ObjectId")&&(e=e.toString()),r4e(e),r=sEt(r),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:e,value:r});return}let n,i=this.$__parent,s=i!=null&&i.$__&&i.$__.populated?i.$populated(a.call(this),!0)||i.$populated(this.$__path,!0):null,o=this.get(e);if(s!=null){if(this.$__schemaType.$isSingleNested)throw new rEt(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);Array.isArray(r)&&this.$__schemaType.$isMongooseArray?r=r.map(u=>(u.$__==null&&(u=new s.options[t4e](u)),u.$__.wasPopulated={value:u._doc._id},u)):r!=null&&(r.$__==null&&(r=new s.options[t4e](r)),r.$__.wasPopulated={value:r._doc._id})}else try{let u=null;(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap)&&(u={path:a.call(this)},this.$__schemaType.$isSingleNested&&(u.pathRelativeToParent=this.$__pathRelativeToParent!=null?this.$__pathRelativeToParent+"."+e:this.$__path+"."+e)),r=this.$__schemaType.applySetters(r,this.$__parent,!1,this.get(e),u)}catch(u){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(a.call(this),u);return}throw u}if(super.set(e,r),r!=null&&r.$isSingleNested&&(this.$__pathRelativeToParent!=null?r.$pathRelativeToParent=this.$__pathRelativeToParent+"."+e:r.$pathRelativeToParent=this.$__path+"."+e),i!=null&&i.$__!=null&&!nEt(r,o)){let u;this.$__pathRelativeToParent!=null?u=this.$__pathRelativeToParent+"."+e:u=a.call(this),i.markModified(u),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&aEt(i,u)}function a(){return n||(n=this.$__path+"."+e,n)}}clear(){super.clear();let e=this.$__parent;e?.markModified(this.$__path)}delete(e){return SW(e,"ObjectId")&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(e&&e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=Z6e(this.get(i),e);return r}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(e){if(typeof(e&&e.flattenMaps)!="boolean"||e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=Z6e(this.get(i),e);return r}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(let e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}};e4e.inspect.custom&&Object.defineProperty(xl.prototype,e4e.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:xl.prototype.inspect});Object.defineProperty(xl.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(xl.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(xl.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(xl.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(xl.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(xl.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function r4e(t){let e=typeof t;if(e!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${e}`);if(t.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${t}"`);if(t.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${t}"`);if(oEt.has(t))throw new Error(`Mongoose maps do not support reserved key name "${t}"`)}n4e.exports=xl});var s4e=b((m0r,i4e)=>{"use strict";i4e.exports=oa().UUID});var __=b(cc=>{"use strict";cc.Array=Hz();cc.Buffer=l_();cc.Document=cc.Embedded=y_();cc.DocumentArray=G0();cc.Double=X6e();cc.Decimal128=Z7();cc.ObjectId=Hp();cc.Map=nx();cc.Subdocument=NO();cc.UUID=s4e()});var a4e=b((g0r,o4e)=>{"use strict";var uEt=Sa(),E_=class extends uEt{},wW=su();Object.defineProperty(E_.prototype,"enum",wW);Object.defineProperty(E_.prototype,"of",wW);Object.defineProperty(E_.prototype,"castNonArrays",wW);o4e.exports=E_});var c4e=b((b0r,u4e)=>{"use strict";u4e.exports=AW;function AW(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(t.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(t.length===1&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};let e=AW(t[0]);for(let r=1;r<t.length;++r){let n=AW(t[r]);n.min<e.min&&(e.min=n.min),n.max>e.max&&(e.max=n.max),e.containsNonArrayItem=e.containsNonArrayItem||n.containsNonArrayItem}return e.min=e.min+1,e.max=e.max+1,e}});var zv=b((_0r,d4e)=>{"use strict";var l4e=require("assert");d4e.exports=function(e){if(e==null)return e;if(e==="")return null;if((typeof e=="string"||typeof e=="boolean")&&(e=Number(e)),l4e.ok(!isNaN(e)),e instanceof Number)return e.valueOf();if(typeof e=="number")return e;if(!Array.isArray(e)&&typeof e.valueOf=="function")return Number(e.valueOf());if(e.toString&&!Array.isArray(e)&&e.toString()==Number(e))return Number(e);l4e.ok(!1)}});var CW=b((E0r,p4e)=>{"use strict";p4e.exports=function(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))for(let r=e.length-1;r>=0;--r)e[r]===void 0&&e.splice(r,1);for(let r of Object.keys(e))e[r]===void 0&&delete e[r];return e}});var m4e=b((v0r,h4e)=>{"use strict";var v_=po(),f4e=ch(),ix=zv(),cEt=CW(),lEt=new Set(["$and","$or"]),dEt=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),pEt=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),fEt=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),hEt=new Set(["$arrayElemAt","$first","$last"]),mEt=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),yEt=new Set(["$not"]);h4e.exports=function(e,r,n){if(typeof e=="boolean")return e;if(typeof e!="object"||e===null)throw new Error("`$expr` must be an object or boolean literal");return lc(e,r,n)};function lc(t,e,r){if(Wv(t)||t===null)return t;t.$cond!=null?Array.isArray(t.$cond)?t.$cond=t.$cond.map(i=>lc(i,e,r)):(t.$cond.if=lc(t.$cond.if,e,r),t.$cond.then=lc(t.$cond.then,e,r),t.$cond.else=lc(t.$cond.else,e,r)):t.$ifNull!=null?t.$ifNull.map(i=>lc(i,e,r)):t.$switch!=null&&(Array.isArray(t.$switch.branches)&&(t.$switch.branches=t.$switch.branches.map(i=>lc(i,e,r))),"default"in t.$switch&&(t.$switch.default=lc(t.$switch.default,e,r)));let n=Object.keys(t);for(let i of n)lEt.has(i)?t[i]=t[i].map(s=>lc(s,e,r)):dEt.has(i)?t[i]=_Et(t[i],e,r):pEt.has(i)?t[i]=bEt(t[i],e,r):fEt.has(i)?t[i]=TW(t[i],e,r):yEt.has(i)&&(t[i]=lc(t[i],e,r));if(t.$in&&(t.$in=gEt(t.$in,e,r)),t.$size&&(t.$size=TW(t.$size,e,r)),t.$round){let i=t.$round;if(!Array.isArray(i)||i.length<1||i.length>2)throw new v_("Array",i,"$round");t.$round=i.map(s=>TW(s,e,r))}return cEt(t),t}function TW(t){if(!sx(t))return t;try{return ix(t)}catch{throw new v_("Number",t)}}function gEt(t,e,r){let n=t[1];if(!Wv(n))return t;let i=t[0],s=e.path(n.slice(1));if(s===null){if(r===!1)return t;if(r==="throw")throw new f4e("$in");return}if(!s.$isMongooseArray)throw new Error("Path must be an array for $in");return[s.$isMongooseDocumentArray?s.$embeddedSchemaType.cast(i):s.caster.cast(i),n]}function bEt(t){if(!Array.isArray(t)){if(!sx(t))return t;try{return ix(t)}catch{throw new v_("Number",t)}}return t.map(e=>{if(!sx(e))return e;try{return ix(e)}catch{throw new v_("Number",e)}})}function _Et(t,e,r){if(!Array.isArray(t)||t.length!==2)throw new Error("Comparison operator must be an array of length 2");t[0]=lc(t[0],e,r);let n=t[0];if(sx(t[1])){let i=null,s=null,o=null;if(Wv(n))i=n.slice(1),s=e.path(i);else if(typeof n=="object"&&n!=null)for(let u of Object.keys(n))mEt.has(u)&&Wv(n[u])?(i=n[u].slice(1)+"."+u,o=ix):hEt.has(u)&&Wv(n[u])&&(i=n[u].slice(1)+"."+u,s=e.path(n[u].slice(1)),s!=null&&(s.$isMongooseDocumentArray?s=s.$embeddedSchemaType:s.$isMongooseArray&&(s=s.caster)));let a=typeof t[1]=="object"&&t[1]!=null&&t[1].$literal!=null;if(s!=null)a?t[1]={$literal:s.cast(t[1].$literal)}:t[1]=s.cast(t[1]);else if(o!=null)if(a)try{t[1]={$literal:o(t[1].$literal)}}catch{throw new v_(o.name.replace(/^cast/,""),t[1],i+".$literal")}else try{t[1]=o(t[1])}catch{throw new v_(o.name.replace(/^cast/,""),t[1],i)}else{if(i!=null&&r===!0)return;if(i!=null&&r==="throw")throw new f4e(i)}}else t[1]=lc(t[1]);return t}function Wv(t){return typeof t=="string"&&t[0]==="$"}function sx(t){return typeof t=="string"&&t[0]==="$"?!1:typeof t=="object"&&t!==null&&Object.keys(t).find(e=>e[0]==="$")?t.$literal!=null:!0}});var ox=b((S0r,y4e)=>{"use strict";var EEt=po();y4e.exports=function(e,r){if(e==null)return e;if(e._id&&typeof e._id=="string")return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new EEt("string",e,r)}});var E4e=b((w0r,_4e)=>{"use strict";var vEt=po(),g4e=gO(),b4e=ox();_4e.exports=function(e,r){if(e==null||typeof e!="object")throw new vEt("$text",e,r);return e.$search!=null&&(e.$search=b4e(e.$search,r+".$search")),e.$language!=null&&(e.$language=b4e(e.$language,r+".$language")),e.$caseSensitive!=null&&(e.$caseSensitive=g4e(e.$caseSensitive,r+".$castSensitive")),e.$diacriticSensitive!=null&&(e.$diacriticSensitive=g4e(e.$diacriticSensitive,r+".$diacriticSensitive")),e}});var Jv=b((A0r,v4e)=>{"use strict";var SEt=new Set(["$ref","$id","$db"]);v4e.exports=function(e){return e[0]==="$"&&!SEt.has(e)}});var J0=b((C0r,T4e)=>{"use strict";var S4e=po(),OW=ch(),wEt=Yv(),AEt=m4e(),CEt=ox(),TEt=E4e(),OEt=ni(),w4e=kO(),A4e=Jv(),xEt=require("util"),IW=uh(),xW=Dv(),C4e=wt(),IEt=["Polygon","MultiPolygon"];T4e.exports=function t(e,r,n,i){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",xEt.inspect(r));if(r==null)return r;e!=null&&e.discriminators!=null&&r[e.options.discriminatorKey]!=null&&(e=w4e(e,r[e.options.discriminatorKey])||e);let s=Object.keys(r),o=s.length,a,u,c,l,d,p,f;for(n=n||{};o--;)if(d=s[o],f=r[d],d==="$or"||d==="$nor"||d==="$and"){if(!Array.isArray(f))throw new S4e("Array",f,d);for(let h=f.length-1;h>=0;h--){if(f[h]==null||typeof f[h]!="object")throw new S4e("Object",f[h],d+"."+h);let y=Object.keys(f[h]).length,E=f[h][e.options.discriminatorKey];if(E==null)f[h]=t(e,f[h],n,i);else{let v=w4e(i.schema,E);f[h]=t(v||e,f[h],n,i)}Object.keys(f[h]).length===0&&y!==0&&f.splice(h,1)}f.length===0&&delete r[d]}else if(d==="$where"){if(p=typeof f,p!=="string"&&p!=="function")throw new Error("Must have a string or function for $where");p==="function"&&(r[d]=f.toString());continue}else if(d==="$expr"){f=AEt(f,e);continue}else if(d==="$elemMatch")f=t(e,f,n,i);else if(d==="$text")f=TEt(f,d);else if(d==="$comment"&&!Object.hasOwn(e.paths,"$comment"))f=CEt(f,d),r[d]=f;else{if(!e)continue;if(c=e.path(d),!c){let h=d.split("."),y=h.length;for(;y--;){let E=h.slice(0,y).join("."),v=h.slice(y).join("."),w=e.path(E),T=w&&w.schema&&w.schema.options&&w.schema.options.discriminatorKey;if(w!=null&&(w.schema&&w.schema.discriminators)!=null&&T!=null&&v!==T){let A=OEt(r,E+"."+T),C=w.schema.discriminators;typeof A=="string"&&C[A]!=null?c=C[A].path(v):A!=null&&Object.keys(A).length===1&&Array.isArray(A.$in)&&A.$in.length===1&&typeof A.$in[0]=="string"&&C[A.$in[0]]!=null&&(c=C[A.$in[0]].path(v))}}}if(c){if(f==null)continue;if(C4e.isPOJO(f))if(u=Object.keys(f).some(A4e),!u)r[d]=c.castForQuery(null,f,i);else{let h=Object.keys(f),y,E=h.length;for(;E--;)if(y=h[E],l=f[y],y==="$elemMatch")l&&c!=null&&c.schema!=null?t(c.schema,l,n,i):l&&c!=null&&c.$isMongooseArray&&(C4e.isPOJO(l)&&l.$not!=null?t(e,l,n,i):f[y]=c.castForQuery(y,l,i));else if(y==="$not"){if(l&&c){if(a=Object.keys(l),a.length&&A4e(a[0]))for(let v in l)l[v]=c.castForQuery(v,l[v],i);else f[y]=c.castForQuery(y,l,i);continue}}else f[y]=c.castForQuery(y,l,i)}else if(Array.isArray(f)&&["Buffer","Array"].indexOf(c.instance)===-1&&!n.sanitizeFilter){let h=[],y=f;for(let E of y)h.push(c.castForQuery(null,E,i));r[d]={$in:h}}else r[d]=c.castForQuery(null,f,i)}else{let h=d.split("."),y=h.length,E,v,w;for(;y--&&(E=h.slice(0,y).join("."),c=e.path(E),!c););if(c){if(c.caster&&c.caster.schema){w={},v=h.slice(y).join("."),w[v]=f;let C=t(c.caster.schema,w,n,i)[v];C===void 0?delete r[d]:r[d]=C}else r[d]=f;continue}if(IW(f)){let C="";if(f.$near?C="$near":f.$nearSphere?C="$nearSphere":f.$within?C="$within":f.$geoIntersects?C="$geoIntersects":f.$geoWithin&&(C="$geoWithin"),C){let x=new wEt.Number("__QueryCasting__",null,null,e),R=f[C];if(f.$maxDistance!=null&&(f.$maxDistance=x.castForQuery(null,f.$maxDistance,i)),f.$minDistance!=null&&(f.$minDistance=x.castForQuery(null,f.$minDistance,i)),C==="$within"){let M=R.$center||R.$centerSphere||R.$box||R.$polygon;if(!M)throw new Error("Bad $within parameter: "+JSON.stringify(f));R=M}else if(C==="$near"&&typeof R.type=="string"&&Array.isArray(R.coordinates))R=R.coordinates;else if((C==="$near"||C==="$nearSphere"||C==="$geoIntersects")&&R.$geometry&&typeof R.$geometry.type=="string"&&Array.isArray(R.$geometry.coordinates))R.$maxDistance!=null&&(R.$maxDistance=x.castForQuery(null,R.$maxDistance,i)),R.$minDistance!=null&&(R.$minDistance=x.castForQuery(null,R.$minDistance,i)),xW(R.$geometry)&&(R.$geometry=R.$geometry.toObject({transform:!1,virtuals:!1})),R=R.$geometry.coordinates;else if(C==="$geoWithin")if(R.$geometry){xW(R.$geometry)&&(R.$geometry=R.$geometry.toObject({virtuals:!1}));let M=R.$geometry.type;if(IEt.indexOf(M)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+M+'", must be "Polygon" or "MultiPolygon"');R=R.$geometry.coordinates}else R=R.$box||R.$polygon||R.$center||R.$centerSphere,xW(R)&&(R=R.toObject({virtuals:!1}));RW(R,x,i);continue}}if(e.nested[d])continue;let T="strict"in n?n.strict:e.options.strict,A=REt(n,e._userProvidedOptions,e.options,i);if(n.upsert&&T)throw T==="throw"?new OW(d):new OW(d,'Path "'+d+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(A==="throw")throw new OW(d,'Path "'+d+`" is not in schema and strictQuery is 'throw'.`);A&&delete r[d]}}return r};function RW(t,e,r){if(Array.isArray(t))t.forEach(function(n,i){if(Array.isArray(n)||IW(n))return RW(n,e,r);t[i]=e.castForQuery(null,n,r)});else{let n=Object.keys(t),i=n.length;for(;i--;){let s=n[i],o=t[s];Array.isArray(o)||IW(o)?(RW(o,e,r),t[s]=o):t[s]=e.castForQuery({val:o,context:r})}}}function REt(t,e,r,n){if("strictQuery"in t)return t.strictQuery;if("strictQuery"in e)return e.strictQuery;let i=n&&n.mongooseCollection&&n.mongooseCollection.conn&&n.mongooseCollection.conn.base&&n.mongooseCollection.conn.base.options;return i&&"strictQuery"in i?i.strictQuery:r.strictQuery}});var x4e=b((T0r,O4e)=>{"use strict";var DEt=Sa(),Y0=class extends DEt{},ax=su();Object.defineProperty(Y0.prototype,"min",ax);Object.defineProperty(Y0.prototype,"max",ax);Object.defineProperty(Y0.prototype,"enum",ax);Object.defineProperty(Y0.prototype,"populate",ax);O4e.exports=Y0});var ho=b((O0r,I4e)=>{"use strict";I4e.exports=function(e,r,n,i){return n?i?{bsonType:r}:{bsonType:[r,"null"]}:i?{type:e}:{type:[e,"null"]}}});var Qv=b((x0r,D4e)=>{"use strict";var kEt=po();function MEt(t){let e=this;return Array.isArray(t)?t.map(function(r){return R4e(e.path,r)}):Buffer.isBuffer(t)?t:R4e(e.path,t)}function R4e(t,e){let r=Number(e);if(isNaN(r))throw new kEt("number",e,t);return r}D4e.exports=MEt});var MW=b((I0r,k4e)=>{"use strict";var lx=Ea(),PEt=x4e(),Zp=ri(),NEt=zv(),FEt=ho(),ux=Qv(),DW=wt(),kW=Zp.CastError;function An(t,e,r,n){Zp.call(this,t,e,"Number",n)}An.get=Zp.get;An.set=Zp.set;An.setters=[];An._cast=NEt;An.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};An._defaultCaster=t=>{if(typeof t!="number")throw new Error;return t};An.schemaName="Number";An.defaultOptions={};An.prototype=Object.create(Zp.prototype);An.prototype.constructor=An;An.prototype.OptionsConstructor=PEt;An._checkRequired=t=>typeof t=="number"||t instanceof Number;An.checkRequired=Zp.checkRequired;An.prototype.checkRequired=function(e,r){return typeof e=="object"&&Zp._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():An.checkRequired())(e)};An.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t!=null){let r=e||lx.messages.Number.min;r=r.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(n){return n==null||n>=t},message:r,type:"min",min:t})}return this};An.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t!=null){let r=e||lx.messages.Number.max;r=r.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(n){return n==null||n<=t},message:r,type:"max",max:t})}return this};An.prototype.enum=function(t,e){if(this.enumValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.enumValidator},this)),!Array.isArray(t)){if(DW.isPOJO(t)&&t.values!=null?(e=t.message,t=t.values):typeof t=="number"&&(t=Array.prototype.slice.call(arguments),e=null),DW.isPOJO(t)){let n=Object.keys(t).sort(),i=Object.values(t).sort();n.length===i.length&&n.every((s,o)=>s===String(i[o]))&&i.filter(s=>typeof s=="number").length===Math.floor(i.length/2)?t=i.filter(s=>typeof s=="number"):t=Object.values(t)}e=e||lx.messages.Number.enum}return e=e??lx.messages.Number.enum,this.enumValidator=r=>r==null||t.indexOf(r)!==-1,this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:t}),this};An.prototype.cast=function(t,e,r,n,i){if(typeof t!="number"&&Zp._isRef(this,t,e,r)&&(t==null||DW.isNonBuiltinObject(t)))return this._castRef(t,e,r,i);let s=t&&typeof t._id<"u"?t._id:t,o;typeof this._castFunction=="function"?o=this._castFunction:typeof this.constructor.cast=="function"?o=this.constructor.cast():o=An.cast();try{return o(s)}catch(a){throw new kW("Number",s,this.path,a,this)}};function cx(t){return this.cast(t)}function BEt(t){let e=this;return Array.isArray(t)?t.map(function(r){return e.cast(r)}):[this.cast(t)]}var qEt={...Zp.prototype.$conditionalHandlers,$bitsAllClear:ux,$bitsAnyClear:ux,$bitsAllSet:ux,$bitsAnySet:ux,$gt:cx,$gte:cx,$lt:cx,$lte:cx,$mod:BEt};Object.defineProperty(An.prototype,"$conditionalHandlers",{enumerable:!1,value:qEt});An.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new kW("number",e,this.path,null,this);return n.call(this,e,r)}try{e=this.applySetters(e,r)}catch(i){throw i instanceof kW&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}return e};An.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return FEt("number","number",e?.useBsonType,r)};k4e.exports=An});var Xv=b(PW=>{"use strict";var LEt=MW();PW.castToNumber=M4e;PW.castArraysOfNumbers=P4e;function M4e(t){return LEt.cast()(t)}function P4e(t,e){t.forEach(function(r,n){Array.isArray(r)?P4e(r,e):t[n]=M4e.call(e,r)})}});var BW=b(dx=>{"use strict";var N4e=Xv().castArraysOfNumbers,Zv=Xv().castToNumber;dx.cast$geoIntersects=UEt;dx.cast$near=jEt;dx.cast$within=$Et;function jEt(t){let e=px();if(Array.isArray(t))return N4e(t,this),t;if(FW(this,t),t&&t.$geometry)return NW(t,this);if(!Array.isArray(t))throw new TypeError("$near must be either an array or an object with a $geometry property");return e.prototype.castForQuery.call(this,null,t)}function NW(t,e){switch(t.$geometry.type){case"Polygon":case"LineString":case"Point":N4e(t.$geometry.coordinates,e);break;default:break}return FW(e,t),t}function $Et(t){if(FW(this,t),t.$box||t.$polygon){let e=t.$box?"$box":"$polygon";t[e].forEach(r=>{if(!Array.isArray(r)){let n="Invalid $within $box argument. Expected an array, received "+r;throw new TypeError(n)}r.forEach((n,i)=>{r[i]=Zv.call(this,n)})})}else if(t.$center||t.$centerSphere){let e=t.$center?"$center":"$centerSphere";t[e].forEach((r,n)=>{Array.isArray(r)?r.forEach((i,s)=>{r[s]=Zv.call(this,i)}):t[e][n]=Zv.call(this,r)})}else t.$geometry&&NW(t,this);return t}function UEt(t){if(t.$geometry)return NW(t,this),t}function FW(t,e){e.$maxDistance&&(e.$maxDistance=Zv.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=Zv.call(t,e.$minDistance))}});var px=b((k0r,L4e)=>{"use strict";var KEt=bO(),VEt=Tz(),B4e=qt(),GEt=a4e(),dc=ri(),hx=dc.CastError,mx=d_(),HEt=fW(),F4e=ZO(),zEt=c4e(),qW=J0(),WEt=Vn(),JEt=qo(),YEt=Jv(),yx=require("util"),hh=wt(),QEt=Xv().castToNumber,XEt=ho(),LW=BW(),ZEt=uc(),eS,fx,q4e=Symbol("mongoose#isNestedArray"),e6t=Object.freeze({});function fr(t,e,r,n,i){fx||(fx=__().Embedded);let s="type";if(n&&n.typeKey&&(s=n.typeKey),this.schemaOptions=n,e){let u={};hh.isPOJO(e)&&(e[s]?(u=WEt(e),delete u[s],e=e[s]):e=mx),r!=null&&r.ref!=null&&u.ref==null&&(u.ref=r.ref),e===Object&&(e=mx);let c=typeof e=="string"?e:hh.getFunctionName(e),l=Yv(),d=Object.hasOwn(l,c)?l[c]:e;if(this.casterConstructor=d,this.casterConstructor instanceof fr&&(this.casterConstructor[q4e]=!0),typeof d=="function"&&!d.$isArraySubdocument&&!d.$isSchemaMap){let p=this.caster instanceof fx?null:t;d===fr?this.caster=new d(p,u,n,null,i):this.caster=new d(p,u,n,i)}else this.caster=d,this.caster instanceof fx||(this.caster.path=t);this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,dc.call(this,t,r,"Array",i);let o,a;if(this.defaultValue!=null&&(o=this.defaultValue,a=typeof o=="function"),!("defaultValue"in this)||this.defaultValue!=null){let u=function(){return a?o.call(this):o!=null?[].concat(o):[]};u.$runBeforeSetters=!a,this.default(u)}}fr.schemaName="Array";fr.options={castNonArrays:!0};fr.defaultOptions={};fr.set=dc.set;fr.setters=[];fr.get=dc.get;fr.prototype=Object.create(dc.prototype);fr.prototype.constructor=fr;fr.prototype.OptionsConstructor=GEt;fr._checkRequired=dc.prototype.checkRequired;fr.checkRequired=dc.checkRequired;fr.prototype.virtuals=null;fr.prototype.checkRequired=function(e,r){return typeof e=="object"&&dc._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():fr.checkRequired())(e)};fr.prototype.enum=function(){let t=this;for(;;){let r=t&&t.caster&&t.caster.instance;if(r==="Array"){t=t.caster;continue}if(r!=="String"&&r!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+r);break}let e=arguments;return!Array.isArray(arguments)&&hh.isObject(arguments)&&(e=hh.object.vals(e)),t.caster.enum.apply(t.caster,e),this};fr.prototype.applyGetters=function(t,e){return e!=null&&e.$__!=null&&e.$populated(this.path)?t:dc.prototype.applyGetters.call(this,t,e)};fr.prototype._applySetters=function(t,e,r,n){if(this.casterConstructor.$isMongooseArray&&fr.options.castNonArrays&&!this[q4e]){let i=0,s=this;for(;s!=null&&s.$isMongooseArray&&!s.$isMongooseDocumentArray;)++i,s=s.casterConstructor;if(t!=null&&t.length!==0){let o=zEt(t);if(o.min===o.max&&o.max<i&&o.containsNonArrayItem)for(let a=o.max;a<i;++a)t=[t]}}return dc.prototype._applySetters.call(this,t,e,r,n)};fr.prototype.cast=function(t,e,r,n,i){eS||(eS=__().Array);let s,o;if(Array.isArray(t)){if(!t.length&&e){let f=e.schema.indexedPaths(),h=this.path;for(s=0,o=f.length;s<o;++s){let E=f[s][0][h];if(E==="2dsphere"||E==="2d")return}let y=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(y!=null){for(s=0,o=f.length;s<o;++s)if(f[s][0][y]==="2dsphere")return}}i=i||e6t;let c=hh.isMongooseArray(t)?t.__array:t,l=i.path||this.path;if(i.arrayPathIndex!=null&&(l+="."+i.arrayPathIndex),t=eS(c,l,e,this),c=t.__array,r&&e!=null&&e.$__!=null&&e.$populated(this.path))return t;let d=this.caster,p=d.$isMongooseArray;if(d&&this.casterConstructor!==mx)try{let f=c.length;for(s=0;s<f;s++){let h={};p&&(i.arrayPath!=null||d._arrayParentPath!=null)&&(h.arrayPathIndex=s),i.hydratedPopulatedDocs&&(h.hydratedPopulatedDocs=i.hydratedPopulatedDocs),c[s]=d.applySetters(c[s],e,r,void 0,h)}}catch(f){throw new hx("["+f.kind+"]",yx.inspect(t),this.path+"."+s,f,this)}return t}let a=this.options.castNonArrays!=null?this.options.castNonArrays:fr.options.castNonArrays;if(r||a)return e&&r&&e.markModified(this.path),this.cast([t],e,r);throw new hx("Array",yx.inspect(t),this.path,null,this)};fr.prototype._castForPopulate=function(e,r){if(eS||(eS=__().Array),Array.isArray(e)){let n,i=e.__array?e.__array:e,s=i.length,o=this.caster;if(o&&this.casterConstructor!==mx)try{for(n=0;n<s;n++){let a={};o.$isMongooseArray&&o._arrayParentPath!=null&&(a.arrayPathIndex=n),i[n]=o.cast(i[n],r,!1,void 0,a)}}catch(a){throw new hx("["+a.kind+"]",yx.inspect(e),this.path+"."+n,a,this)}return e}throw new hx("Array",yx.inspect(e),this.path,null,this)};fr.prototype.$toObject=fr.prototype.toObject;fr.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)if(e=e.casterConstructor,e==null||typeof e=="function")throw new B4e("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return e.discriminator(...t)};fr.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.caster,t,this.schemaOptions,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e};fr.prototype._castForQuery=function(t,e){let r=this.casterConstructor;if(t&&r.discriminators&&r.schema&&r.schema.options&&r.schema.options.discriminatorKey)if(typeof t[r.schema.options.discriminatorKey]=="string"&&r.discriminators[t[r.schema.options.discriminatorKey]])r=r.discriminators[t[r.schema.options.discriminatorKey]];else{let u=ZEt(r.discriminators,t[r.schema.options.discriminatorKey]);u&&(r=u)}let n=this.casterConstructor.prototype,i=n&&n.castForQuery,s=n&&n.cast,o=r.castForQuery,a=this.caster;return Array.isArray(t)?(this.setters.reverse().forEach(u=>{t=u.call(this,t,this)}),t=t.map(function(u){return hh.isObject(u)&&u.$elemMatch?u:i?(u=i.call(a,null,u,e),u):s?(u=s.call(a,u),u):o?(u=o.call(a,null,u,e),u):(u!=null&&(u=new r(u)),u)})):i?t=i.call(a,null,t,e):s?t=s.call(a,t):o?t=o.call(a,null,t,e):t!=null&&(t=new r(t)),t};fr.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Array.");return n.call(this,e,r)}else return this._castForQuery(e,r)};fr.prototype.virtual=function(e,r){if(e instanceof F4e||JEt(e)==="VirtualType")return this.virtual(e.path,e.options);if(r=new HEt(r),hh.hasUserDefinedProperty(r,["ref","refPath"]))throw new B4e("Cannot set populate virtual as a property of an array");let n=new F4e(r,e);return this.virtuals===null&&(this.virtuals={}),this.virtuals[e]=n,n};function t6t(t,e){return Array.isArray(t)||(t=[t]),t=t.map(r=>{if(!hh.isObject(r))return r;if(r.$elemMatch!=null)return{$elemMatch:qW(this.casterConstructor.schema,r.$elemMatch,null,this&&this.$$context)};let n={};return n[this.path]=r,qW(this.casterConstructor.schema,n,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,t,e)}function r6t(t,e){let r=Object.keys(t),n=r.length;for(let i=0;i<n;++i){let s=r[i],o=t[s];YEt(s)&&o!=null&&(t[s]=this.castForQuery(s,o,e))}return t}var fn=fr.prototype.$conditionalHandlers={};fn.$all=t6t;fn.$options=String;fn.$elemMatch=r6t;fn.$geoIntersects=LW.cast$geoIntersects;fn.$or=jW("$or");fn.$and=jW("$and");fn.$nor=jW("$nor");function jW(t){return function(r,n){if(!Array.isArray(r))throw new TypeError("conditional "+t+" requires an array");let i=[];for(let s of r)i.push(qW(this.casterConstructor.schema??n.schema,s,null,this&&this.$$context));return i}}fn.$near=fn.$nearSphere=LW.cast$near;fn.$within=fn.$geoWithin=LW.cast$within;fn.$size=fn.$minDistance=fn.$maxDistance=QEt;fn.$exists=KEt;fn.$type=VEt;fn.$eq=fn.$gt=fn.$gte=fn.$lt=fn.$lte=fn.$not=fn.$regex=fn.$ne=fr.prototype._castForQuery;fn.$nin=dc.prototype.$conditionalHandlers.$nin;fn.$in=dc.prototype.$conditionalHandlers.$in;fr.prototype.toJSONSchema=function(e){let r=this.getEmbeddedSchemaType(),n=this.options.required&&typeof this.options.required!="function";return{...XEt("array","array",e?.useBsonType,n),items:r.toJSONSchema(e)}};fr.prototype.autoEncryptionType=function(){return"array"};L4e.exports=fr});var U4e=b((M0r,$4e)=>{"use strict";var{Long:n6t}=oa(),$W=9223372036854775807n,UW=-9223372036854775808n,j4e=`Mongoose only supports BigInts between ${UW} and ${$W} because MongoDB does not support arbitrary precision integers`;$4e.exports=function(e){if(e==null)return e;if(e==="")return null;if(typeof e=="bigint"){if(e>$W||e<UW)throw new Error(j4e);return e}if(e instanceof n6t)return e.toBigInt();if(typeof e=="string"||typeof e=="number"){if(e=BigInt(e),e>$W||e<UW)throw new Error(j4e);return e}throw new Error(`Cannot convert value to BigInt: "${e}"`)}});var G4e=b((P0r,V4e)=>{"use strict";var K4e=po(),S_=ri(),i6t=U4e(),s6t=ho();function ii(t,e,r,n){S_.call(this,t,e,"BigInt",n)}ii.schemaName="BigInt";ii.defaultOptions={};ii.prototype=Object.create(S_.prototype);ii.prototype.constructor=ii;ii._cast=i6t;ii.set=S_.set;ii.setters=[];ii.get=S_.get;ii.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};ii._checkRequired=t=>t!=null;ii.checkRequired=S_.checkRequired;ii.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};ii.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=ii.cast();try{return e(t)}catch(r){throw new K4e("BigInt",t,this.path,r,this)}};var o6t={...S_.prototype.$conditionalHandlers,$gt:gx,$gte:gx,$lt:gx,$lte:gx};Object.defineProperty(ii.prototype,"$conditionalHandlers",{enumerable:!1,value:o6t});function gx(t,e){return this.castForQuery(null,t,e)}ii.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof K4e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};ii.prototype._castNullish=function(e){return typeof e>"u"||(typeof this.constructor.cast=="function"?this.constructor.cast():ii.cast())==null,e};ii.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return s6t("string","long",e?.useBsonType,r)};ii.prototype.autoEncryptionType=function(){return"long"};V4e.exports=ii});var W4e=b((N0r,z4e)=>{"use strict";var H4e=po(),w_=ri(),tS=gO(),a6t=ho();function Cn(t,e,r,n){w_.call(this,t,e,"Boolean",n)}Cn.schemaName="Boolean";Cn.defaultOptions={};Cn.prototype=Object.create(w_.prototype);Cn.prototype.constructor=Cn;Cn._cast=tS;Cn.set=w_.set;Cn.setters=[];Cn.get=w_.get;Cn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Cn._defaultCaster=t=>{if(t!=null&&typeof t!="boolean")throw new Error;return t};Cn._checkRequired=t=>t===!0||t===!1;Cn.checkRequired=w_.checkRequired;Cn.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Object.defineProperty(Cn,"convertToTrue",{get:()=>tS.convertToTrue,set:t=>{tS.convertToTrue=t}});Object.defineProperty(Cn,"convertToFalse",{get:()=>tS.convertToFalse,set:t=>{tS.convertToFalse=t}});Cn.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Cn.cast();try{return e(t)}catch(r){throw new H4e("Boolean",t,this.path,r,this)}};var u6t={...w_.prototype.$conditionalHandlers};Object.defineProperty(Cn.prototype,"$conditionalHandlers",{enumerable:!1,value:u6t});Cn.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof H4e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Cn.prototype._castNullish=function(e){if(typeof e>"u")return e;let r=typeof this.constructor.cast=="function"?this.constructor.cast():Cn.cast();return r==null?e:r.convertToFalse instanceof Set&&r.convertToFalse.has(e)?!1:r.convertToTrue instanceof Set&&r.convertToTrue.has(e)?!0:e};Cn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return a6t("boolean","bool",e?.useBsonType,r)};Cn.prototype.autoEncryptionType=function(){return"bool"};z4e.exports=Cn});var Y4e=b((F0r,J4e)=>{"use strict";var c6t=Sa(),bx=class extends c6t{},l6t=su();Object.defineProperty(bx.prototype,"subtype",l6t);J4e.exports=bx});var Z4e=b((B0r,X4e)=>{"use strict";var A_=l_(),d6t=Y4e(),ef=ri(),p6t=ho(),_x=Qv(),Q4e=wt(),KW=A_.Binary,vx=ef.CastError;function Qi(t,e,r,n){ef.call(this,t,e,"Buffer",n)}Qi.schemaName="Buffer";Qi.defaultOptions={};Qi.prototype=Object.create(ef.prototype);Qi.prototype.constructor=Qi;Qi.prototype.OptionsConstructor=d6t;Qi._checkRequired=t=>!!(t&&t.length);Qi.set=ef.set;Qi.setters=[];Qi.get=ef.get;Qi.checkRequired=ef.checkRequired;Qi.prototype.checkRequired=function(t,e){return ef._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)};Qi.prototype.cast=function(t,e,r,n,i){let s;if(ef._isRef(this,t,e,r)){if(t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new A_(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof KW){if(s=new A_(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new vx("Buffer",t,this.path,null,this);return s._subtype=t.sub_type,s}if(t==null||Q4e.isNonBuiltinObject(t))return this._castRef(t,e,r,i)}if(t&&t._id&&(t=t._id),t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new A_(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof KW){if(s=new A_(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new vx("Buffer",t,this.path,null,this);return s._subtype=t.sub_type,s}if(t===null)return t;let o=typeof t;if(o==="string"||o==="number"||Array.isArray(t)||o==="object"&&t.type==="Buffer"&&Array.isArray(t.data))return o==="number"&&(t=[t]),s=new A_(t,[this.path,e]),this.options.subtype!=null&&(s._subtype=this.options.subtype),s;if(Q4e.isPOJO(t)&&(t.$binary instanceof KW||typeof t.$binary=="string")){let a=this.cast(Buffer.from(t.$binary,"base64"));if(t.$type!=null)return a._subtype=t.$type,a}throw new vx("Buffer",t,this.path,null,this)};Qi.prototype.subtype=function(t){return this.options.subtype=t,this};function Ex(t,e){return this.castForQuery(null,t,e)}var f6t={...ef.prototype.$conditionalHandlers,$bitsAllClear:_x,$bitsAnyClear:_x,$bitsAllSet:_x,$bitsAnySet:_x,$gt:Ex,$gte:Ex,$lt:Ex,$lte:Ex};Object.defineProperty(Qi.prototype,"$conditionalHandlers",{enumerable:!1,value:f6t});Qi.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Buffer.");return n.call(this,e)}let i;try{i=this.applySetters(e,r)}catch(s){throw s instanceof vx&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}return i&&i.toObject({transform:!1,virtuals:!1})};Qi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return p6t("string","binData",e?.useBsonType,r)};Qi.prototype.autoEncryptionType=function(){return"binData"};X4e.exports=Qi});var t3e=b((q0r,e3e)=>{"use strict";var h6t=Sa(),C_=class extends h6t{},VW=su();Object.defineProperty(C_.prototype,"min",VW);Object.defineProperty(C_.prototype,"max",VW);Object.defineProperty(C_.prototype,"expires",VW);e3e.exports=C_});var n3e=b((L0r,r3e)=>{"use strict";var GW=require("assert");r3e.exports=function(e){if(e==null||e==="")return null;if(e instanceof Date)return GW.ok(!isNaN(e.valueOf())),e;let r;if(GW.ok(typeof e!="boolean"),e instanceof Number||typeof e=="number"?r=new Date(e):typeof e=="string"&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?r=new Date(Number(e)):typeof e.valueOf=="function"?r=new Date(e.valueOf()):r=new Date(e),!isNaN(r.valueOf()))return r;GW.ok(!1)}});var a3e=b((j0r,o3e)=>{"use strict";var i3e=Ea(),m6t=t3e(),mh=ri(),y6t=n3e(),g6t=ho(),b6t=qo(),_6t=wt(),s3e=mh.CastError;function hn(t,e,r,n){mh.call(this,t,e,"Date",n)}hn.schemaName="Date";hn.defaultOptions={};hn.prototype=Object.create(mh.prototype);hn.prototype.constructor=hn;hn.prototype.OptionsConstructor=m6t;hn._cast=y6t;hn.set=mh.set;hn.setters=[];hn.get=mh.get;hn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};hn._defaultCaster=t=>{if(t!=null&&!(t instanceof Date))throw new Error;return t};hn.prototype.expires=function(t){return b6t(this._index)!=="Object"&&(this._index={}),this._index.expires=t,_6t.expires(this._index),this};hn._checkRequired=t=>t instanceof Date;hn.checkRequired=mh.checkRequired;hn.prototype.checkRequired=function(t,e){return typeof t=="object"&&mh._isRef(this,t,e,!0)?t!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():hn.checkRequired())(t)};hn.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t){let r=e||i3e.messages.Date.min;typeof r=="string"&&(r=r.replace(/{MIN}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.minValidator=function(i){let s=t;typeof t=="function"&&t!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()>=o.valueOf()},message:r,type:"min",min:t})}return this};hn.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t){let r=e||i3e.messages.Date.max;typeof r=="string"&&(r=r.replace(/{MAX}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.maxValidator=function(i){let s=t;typeof s=="function"&&s!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()<=o.valueOf()},message:r,type:"max",max:t})}return this};hn.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=hn.cast();try{return e(t)}catch(r){throw new s3e("date",t,this.path,r,this)}};function Sx(t){return this.cast(t)}var E6t={...mh.prototype.$conditionalHandlers,$gt:Sx,$gte:Sx,$lt:Sx,$lte:Sx};Object.defineProperty(hn.prototype,"$conditionalHandlers",{enumerable:!1,value:E6t});hn.prototype.castForQuery=function(t,e,r){if(t==null)try{return this.applySetters(e,r)}catch(i){throw i instanceof s3e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}let n=this.$conditionalHandlers[t];if(!n)throw new Error("Can't use "+t+" with Date.");return n.call(this,e)};hn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return g6t("string","date",e?.useBsonType,r)};hn.prototype.autoEncryptionType=function(){return"date"};o3e.exports=hn});var c3e=b(($0r,u3e)=>{"use strict";var Q0=Z7(),v6t=require("assert");u3e.exports=function(e){if(e==null)return e;if(typeof e=="object"&&typeof e.$numberDecimal=="string")return Q0.fromString(e.$numberDecimal);if(e instanceof Q0)return e;if(typeof e=="string")return Q0.fromString(e);if(typeof Buffer=="function"&&Buffer.isBuffer(e))return new Q0(e);if(typeof Uint8Array=="function"&&e instanceof Uint8Array)return new Q0(e);if(typeof e=="number")return Q0.fromString(String(e));if(typeof e.valueOf=="function"&&typeof e.valueOf()=="string")return Q0.fromString(e.valueOf());v6t.ok(!1)}});var d3e=b((U0r,l3e)=>{"use strict";var tf=ri(),S6t=tf.CastError,w6t=c3e(),A6t=ho(),HW=Ks();function Si(t,e,r,n){tf.call(this,t,e,"Decimal128",n)}Si.schemaName="Decimal128";Si.defaultOptions={};Si.prototype=Object.create(tf.prototype);Si.prototype.constructor=Si;Si._cast=w6t;Si.set=tf.set;Si.setters=[];Si.get=tf.get;Si.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Si._defaultCaster=t=>{if(t!=null&&!HW(t,"Decimal128"))throw new Error;return t};Si._checkRequired=t=>HW(t,"Decimal128");Si.checkRequired=tf.checkRequired;Si.prototype.checkRequired=function(e,r){return tf._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Si.checkRequired())(e)};Si.prototype.cast=function(t,e,r,n,i){if(tf._isRef(this,t,e,r))return HW(t,"Decimal128")?t:this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Si.cast();try{return s(t)}catch(o){throw new S6t("Decimal128",t,this.path,o,this)}};function wx(t){return this.cast(t)}var C6t={...tf.prototype.$conditionalHandlers,$gt:wx,$gte:wx,$lt:wx,$lte:wx};Object.defineProperty(Si.prototype,"$conditionalHandlers",{enumerable:!1,value:C6t});Si.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return A6t("string","decimal",e?.useBsonType,r)};Si.prototype.autoEncryptionType=function(){return"decimal"};l3e.exports=Si});var h3e=b((K0r,f3e)=>{"use strict";var T6t=Sa(),rS=class extends T6t{},p3e=su();Object.defineProperty(rS.prototype,"_id",p3e);Object.defineProperty(rS.prototype,"minimize",p3e);f3e.exports=rS});var zW=b((V0r,m3e)=>{"use strict";m3e.exports=function(e,r,n){if(e.length===0)return n();let i=e.length,s=null;for(let o of e)r(o,function(a){if(s==null){if(a!=null)return s=a,n(s);if(--i<=0)return n()}})}});var g3e=b((G0r,y3e)=>{"use strict";var O6t=zW();y3e.exports=function(e){e.s.hooks.pre("save",!1,function(i){if(this.$isSubdocument){i();return}let s=this,o=this.$getAllSubdocs({useCache:!0});if(!o.length){i();return}O6t(o,function(a,u){a.$__schema.s.hooks.execPre("save",a,function(c){u(c)})},function(a){if(s.$__.saveOptions&&(s.$__.saveOptions.__subdocs=null),a)return s.$__schema.s.hooks.execPost("save:error",s,[s],{error:a},function(u){i(u)});i()})},null,!0),e.s.hooks.post("save",async function(){let i=this.$__.removedSubdocs;if(!i||!i.length)return;let s=[];for(let o of i)s.push(new Promise((a,u)=>{o.$__schema.s.hooks.execPost("deleteOne",o,[o],function(c){if(c)return u(c);a()})}));this.$__.removedSubdocs=null,await Promise.all(s)}),e.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let i=this,s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let o=[];for(let a of s)o.push(new Promise((u,c)=>{a.$__schema.s.hooks.execPost("save",a,[a],function(l){if(l)return c(l);u()})}));try{await Promise.all(o)}catch(a){await new Promise((u,c)=>{this.$__schema.s.hooks.execPost("save:error",i,[i],{error:a},function(l){if(l)return c(l);u()})})}},null,!0)}});var E3e=b((H0r,JW)=>{"use strict";var x6t=nt().objectIdSymbol,b3e=wt();JW.exports=function(e){e.post("init",function(){return WW.call(this),this}),e.pre("save",function(n){_3e.call(this),n()}),e.pre("deleteOne",{document:!0,query:!1},function(n){_3e.call(this),n()}),e.post("save",function(){WW.call(this)})};function _3e(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let r=0;r<e;++r)this.$where[t[r]]=this.$__.shardval[t[r]]}}JW.exports.storeShard=WW;function WW(){let t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!b3e.isPOJO(t))return;let e=this.$__.shardval={},r=Object.keys(t),n=r.length,i;for(let s=0;s<n;++s)i=this.$__getValue(r[s]),i==null?e[r[s]]=i:b3e.isMongooseObject(i)?e[r[s]]=i.toObject({depopulate:!0,_isNested:!0}):i instanceof Date||i[x6t]?e[r[s]]=i:typeof i.valueOf=="function"?e[r[s]]=i.valueOf():e[r[s]]=i}});var w3e=b((z0r,S3e)=>{"use strict";var T_=nt().arrayAtomicsSymbol,YW=nt().sessionNewDocuments,I6t=wt();S3e.exports=function(e){e.pre("save",function(){let n=this.$session();if(n!=null&&!(n.transaction==null||n[YW]==null)&&!n[YW].has(this)){let i={};this.isNew&&(i.isNew=!0),this.$__schema.options.versionKey&&(i.versionKey=this.get(this.$__schema.options.versionKey)),i.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),i.atomics=R6t(this),n[YW].set(this,i)}})};function R6t(t,e){let r=new Map;e=e||new Map;let n=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(let s of n){let o=t.$__getValue(s);if(o!=null&&Array.isArray(o)&&I6t.isMongooseDocumentArray(o)&&o.length&&o[T_]!=null&&Object.keys(o[T_]).length!==0){let a=e.get(s)||{};r.set(s,v3e(a,o[T_]))}}let i=t.$__dirty();for(let s of i){let o=s.path,a=s.value;if(a!=null&&a[T_]!=null&&Object.keys(a[T_]).length!==0){let u=e.get(o)||{};r.set(o,v3e(u,a[T_]))}}return r}function v3e(t,e){return t=t||{},e.$pullAll!=null&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),e.$push!=null&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),e.$addToSet!=null&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),e.$set!=null&&(t.$set=Array.isArray(e.$set)?[...e.$set]:Object.assign({},e.$set)),t}});var C3e=b((W0r,A3e)=>{"use strict";A3e.exports=function(e){e.pre("save",!1,function(i,s){let o=this;if(this.$isSubdocument)return i();let a=s&&typeof s=="object"&&"validateBeforeSave"in s,u;if(a?u=!!s.validateBeforeSave:u=this.$__schema.options.validateBeforeSave,u){let l=s&&typeof s=="object"&&"validateModifiedOnly"in s?{validateModifiedOnly:s.validateModifiedOnly}:null;this.$validate(l).then(()=>{this.$op="save",i()},d=>{o.$__schema.s.hooks.execPost("save:error",o,[o],{error:d},function(p){o.$op="save",i(p)})})}else i()},null,!0)}});var QW=b(nS=>{"use strict";nS.saveSubdocs=g3e();nS.sharding=E3e();nS.trackTransaction=w3e();nS.validateBeforeSave=C3e()});var x3e=b((Y0r,O3e)=>{"use strict";var T3e=QW();O3e.exports=function(e){for(let r of Object.values(T3e))r(e,{deduplicate:!0});e.plugins=Object.values(T3e).map(r=>({fn:r,opts:{deduplicate:!0}})).concat(e.plugins)}});var D3e=b((Q0r,R3e)=>{"use strict";var D6t=EO(),k6t=B0(),M6t=Ks(),P6t=Hp(),N6t=ri(),I3e=uh();R3e.exports=function t(e,r,n,i){let s=Object.keys(r),o=0,a=s.length,u;if(n=n||"",i=i||new WeakSet,!i.has(r)){for(i.add(r);o<a;)if(u=s[o++],!(!n&&(u==="discriminators"||u==="base"||u==="_applyDiscriminators"||u==="_userProvidedOptions"||u==="options"||u==="tree"))&&!(n==="tree"&&r!=null&&r.instanceOfSchema)&&!k6t.has(u)){if(e[u]==null)e[u]=r[u];else if(I3e(r[u])){if(I3e(e[u])||(e[u]={}),r[u]!=null){if(r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested||r[u].$isMongooseDocumentArrayElement&&e[u].$isMongooseDocumentArrayElement)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?D6t(e[u],r[u].clone(),!0):e[u]=r[u].clone();continue}else if(M6t(r[u],"ObjectId")){e[u]=new P6t(r[u]);continue}else if(r[u]instanceof N6t&&(e[u]==null&&(e[u]=r[u].clone()),!r[u].$isMongooseDocumentArray&&!r[u].$isSingleNested))continue}t(e[u],r[u],n?n+"."+u:u,i)}}r!=null&&r.instanceOfSchema&&(e.tree=Object.assign({},r.tree,e.tree))}}});var Ax=b((X0r,P3e)=>{"use strict";var k3e=d_(),F6t=x3e(),B6t=Vn(),q6t=RO().defineKey,L6t=ni(),XW=wt(),j6t=D3e(),M3e={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function $6t(t,e){if(t.encryptionType()==null&&e.encryptionType()==null)return;let r=i(n(t),n(e));for(let s of r){if(t._hasEncryptedField(s)&&e._hasEncryptedField(s))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${s}`);if(t._hasEncryptedField(s)||e._hasEncryptedField(s))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${s}`)}function n(s){return[...Object.keys(s.paths),...Object.keys(s.singleNestedPaths)]}function*i(s,o){let a=new Set(s);for(let u of o)a.has(u)&&(yield u)}}P3e.exports=function(e,r,n,i,s,o,a){if(!(n&&n.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(o=o??!0,e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+r+'" can only be a discriminator of the root model');if(s){let p=L6t(e.base,"options.applyPluginsToDiscriminators",!1)||!o;e.base._applyPlugins(n,{skipTopLevel:!p})}else o||F6t(n);let u=e.schema.options.discriminatorKey,c=e.schema.path(u);if(c!=null)XW.hasUserDefinedProperty(c.options,"select")||(c.options.select=!0),c.options.$skipDiscriminatorCheck=!0;else{let p={};p[u]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},p[u][e.schema.options.typeKey]=String,e.schema.add(p),q6t({prop:u,prototype:e.prototype,options:e.schema.options})}if(n.path(u)&&n.path(u).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+r+'" cannot have field with name "'+u+'"');let l=r;(typeof i=="string"&&i.length||i!=null)&&(l=i),$6t(e.schema,n);function d(p,f){p._baseSchema=f,f.paths._id&&f.paths._id.options&&!f.paths._id.options.auto&&p.remove("_id");let h=Object.keys(f.paths),y=[];for(let R of h){if(p.nested[R]){y.push(R);continue}if(R.indexOf(".")===-1)continue;let M=R.split(".").slice(0,-1),I="";for(let F of M)I+=(I.length?".":"")+F,(p.paths[I]instanceof k3e||p.singleNestedPaths[I]instanceof k3e)&&y.push(R)}p.obj={...p.obj},j6t(p,f),p._gatherChildSchemas();for(let R of y)delete p.paths[R];p.childSchemas.forEach(R=>{R.model.prototype.$__setSchema(R.schema)});let E={};E[u]={default:l,select:!0,set:function(R){if(R===l||Array.isArray(l)&&XW.deepEqual(R,l))return l;throw new Error(`Can't set discriminator key "`+u+'"')},$skipDiscriminatorCheck:!0},E[u][p.options.typeKey]=c?c.options[p.options.typeKey]:String,p.add(E),p.discriminatorMapping={key:u,value:l,isRoot:!1},f.options.collection&&(p.options.collection=f.options.collection);let v=p.options.toJSON,w=p.options.toObject,T=p.options._id,A=p.options.id,C=Object.keys(p.options);p.options.discriminatorKey=f.options.discriminatorKey;let x=p._userProvidedOptions;for(let R of C)if(!M3e[R]&&R in x&&!XW.deepEqual(p.options[R],f.options[R]))throw new Error("Can't customize discriminator option "+R+" (can only modify "+Object.keys(M3e).join(", ")+")");p.options=B6t(f.options);for(let R of Object.keys(x))p.options[R]=x[R];v&&(p.options.toJSON=v),w&&(p.options.toObject=w),typeof T<"u"&&(p.options._id=T),p.options.id=A,o&&(p.s.hooks=e.schema.s.hooks.merge(p.s.hooks)),s&&(p.plugins=Array.prototype.slice.call(f.plugins)),p.callQueue=f.callQueue.concat(p.callQueue),delete p._requiredpaths}if(d(n,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:u,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[r]=n,e.discriminators[r]&&!n.options.overwriteModels&&!a)throw new Error('Discriminator with name "'+r+'" already exists');return n}});var Cx=b((Z0r,N3e)=>{"use strict";var U6t=uc();N3e.exports=function(e,r,n){let i=e.schema.options.discriminatorKey,s=r!=null&&r[i];if(s==null&&(s=n),e.discriminators&&s!=null)if(e.discriminators[s])e=e.discriminators[s];else{let o=U6t(e.discriminators,s);o&&(e=o)}return e}});var ZW=b((eyr,F3e)=>{"use strict";var K6t=mW();F3e.exports=function(e,r){return r==null||r._id==null||(e=e.clone(),r._id?e.paths._id||(K6t(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}});var eJ=b((tyr,B3e)=>{"use strict";var V6t=qt(),Tx=class extends V6t{constructor(e,r){let n=`Cannot create use schema for property "${e}" because the schema has the ${r} option enabled.`;super(n)}};Object.defineProperty(Tx.prototype,"name",{value:"InvalidSchemaOptionError"});B3e.exports=Tx});var iJ=b((ryr,$3e)=>{"use strict";var q3e=po(),tJ=require("events").EventEmitter,G6t=wO(),H6t=h3e(),X0=ri(),z6t=OO(),W6t=bO(),L3e=Xv().castToNumber,J6t=ho(),Y6t=Ax(),rJ=BW(),nJ=Cx(),Q6t=ZW(),X6t=wl().internalToObjectOptions,Z6t=h_(),e4t=wt(),t4t=eJ(),Ox;$3e.exports=Pi;function Pi(t,e,r,n){if(t.options.timeseries)throw new t4t(e,"timeseries");let i=Pi.defaultOptions&&Pi.defaultOptions._id;i!=null&&(r=r||{},r._id=i),t=Q6t(t,r),this.caster=j3e(t,null,r),this.caster.path=e,this.caster.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,X0.call(this,e,r,"Embedded",n)}Pi.prototype=Object.create(X0.prototype);Pi.prototype.constructor=Pi;Pi.prototype.OptionsConstructor=H6t;function j3e(t,e,r){Ox||(Ox=NO());let n=function(o,a,u){this.$__parent=u,Ox.apply(this,arguments),u!=null&&this.$session(u.$session())};t._preCompile();let i=e!=null?e.prototype:Ox.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.prototype.constructor=n,n.prototype.$__schemaTypeOptions=r,n.$__required=r?.required,n.base=t.base,n.schema=t,n.$isSingleNested=!0,n.events=new tJ,n.prototype.toBSON=function(){return this.toObject(X6t)};for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in tJ.prototype)n[s]=tJ.prototype[s];return n}var Od={...X0.prototype.$conditionalHandlers};Od.$geoWithin=function(e,r){return{$geometry:this.castForQuery(null,e.$geometry,r)}};Od.$near=Od.$nearSphere=rJ.cast$near;Od.$within=Od.$geoWithin=rJ.cast$within;Od.$geoIntersects=rJ.cast$geoIntersects;Od.$minDistance=L3e;Od.$maxDistance=L3e;Od.$exists=W6t;Object.defineProperty(Pi.prototype,"$conditionalHandlers",{enumerable:!1,value:Od});Pi.prototype.cast=function(t,e,r,n,i){if(t&&t.$isSingleNested&&t.parent===e)return t;if(t!=null&&(typeof t!="object"||Array.isArray(t)))throw new G6t(this.path,t);let s=this.schema.path(this.schema.options.discriminatorKey),o=s==null?null:s.getDefault(e),a=nJ(this.caster,t,o),u,c=e&&e.$__&&e.$__.selected,l=this.path,d=c==null?null:Object.keys(c).reduce((p,f)=>(f.startsWith(l+".")&&(p=p||{},p[f.substring(l.length+1)]=c[f]),p),null);if(r){u=new a(void 0,d,e,!1,{defaults:!1}),delete u.$__.defaults,i.path!=null&&(i={...i},delete i.path),u.$init(t,i);let p=Z6t(d);z6t(u,d,p)}else return i=Object.assign({},i,{priorDoc:n}),Object.keys(t).length===0?new a({},d,e,void 0,i):new a(t,d,e,void 0,i);return u};Pi.prototype.castForQuery=function(t,e,r,n){let i;if(t!=null){if(i=this.$conditionalHandlers[t],!i)throw new Error("Can't use "+t);return i.call(this,e)}if(e==null)return e;let s=nJ(this.caster,e);if(e instanceof s)return e;this.options.runSetters&&(e=this._applySetters(e,r));let o=n!=null&&n.strict!=null?n.strict:void 0;try{e=new s(e,o)}catch(a){throw a instanceof q3e?a:new q3e("Embedded",e,this.path,a,this)}return e};Pi.prototype.doValidate=function(t,e,r,n){let i=nJ(this.caster,t);if(t&&!(t instanceof i)&&(t=new i(t,null,r!=null&&r.$__!=null?r:null)),n&&n.skipSchemaValidators)return t?t.validate().then(()=>e(null),s=>e(s)):e(null);X0.prototype.doValidate.call(this,t,function(s){if(s)return e(s);if(!t)return e(null);t.validate().then(()=>e(null),o=>e(o))},r,n)};Pi.prototype.doValidateSync=function(t,e,r){if(!r||!r.skipSchemaValidators){let n=X0.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()};Pi.prototype.discriminator=function(t,e,r){r=r||{};let n=e4t.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;return e.instanceOfSchema&&i&&(e=e.clone()),e=Y6t(this.caster,t,e,n,null,null,r.overwriteExisting),this.caster.discriminators[t]=j3e(e,this.caster),this.caster.discriminators[t]};Pi.defaultOptions={};Pi.set=X0.set;Pi.setters=[];Pi.get=X0.get;Pi.prototype.toJSON=function(){return{path:this.path,options:this.options}};Pi.prototype.clone=function(){let t=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0},this.parentSchema);return t.validators=this.validators.slice(),this.requiredValidator!==void 0&&(t.requiredValidator=this.requiredValidator),t.caster.discriminators=Object.assign({},this.caster.discriminators),t._appliedDiscriminators=this._appliedDiscriminators,t};Pi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return{...this.schema.toJSONSchema(e),...J6t("object","object",e?.useBsonType,r)}}});var K3e=b((nyr,U3e)=>{"use strict";var r4t=qt(),sJ=ri(),n4t=iJ(),i4t=Cx();function rf(t,e,r,n){if(this.$parentSchemaType=e&&e.$parentSchemaType,!this.$parentSchemaType)throw new r4t("Cannot create DocumentArrayElement schematype without a parent");delete e.$parentSchemaType,sJ.call(this,t,e,"DocumentArrayElement",n),this.$isMongooseDocumentArrayElement=!0}rf.schemaName="DocumentArrayElement";rf.defaultOptions={};rf.prototype=Object.create(sJ.prototype);rf.prototype.constructor=rf;rf.prototype.cast=function(...t){return this.$parentSchemaType.cast(...t)[0]};rf.prototype.doValidate=function(t,e,r,n){let i=i4t(this.caster,t);return t&&!(t instanceof i)&&(t=new i(t,r,null,null,n&&n.index!=null?n.index:null)),n4t.prototype.doValidate.call(this,t,e,r,n)};rf.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let t=sJ.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,t.caster=this.caster,t.schema=this.schema,t};U3e.exports=rf});var H3e=b((iyr,G3e)=>{"use strict";var s4t=Sa(),iS=class extends s4t{},V3e=su();Object.defineProperty(iS.prototype,"excludeIndexes",V3e);Object.defineProperty(iS.prototype,"_id",V3e);G3e.exports=iS});var tve=b((syr,eve)=>{"use strict";var z3e=po(),o4t=K3e(),oJ=require("events").EventEmitter,uJ=px(),a4t=H3e(),sS=ri(),W3e=J0(),J3e=ho(),u4t=Ax(),Y3e=ZW(),c4t=MO(),l4t=Jv(),O_=wt(),xx=Cx(),d4t=eJ(),Q3e=nt().arrayAtomicsSymbol,aJ=nt().arrayPathSymbol,p4t=nt().documentArrayParent,nf,Z0;function Fn(t,e,r,n,i){if(e.options&&e.options.timeseries)throw new d4t(t,"timeseries");let s=Fn.defaultOptions&&Fn.defaultOptions._id;s!=null&&(n=n||{},n._id=s),n!=null&&n._id!=null?e=Y3e(e,n):r!=null&&r._id!=null&&(e=Y3e(e,r));let o=Z3e(e,r);o.prototype.$basePath=t,uJ.call(this,t,o,r,null,i),this.schema=e,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=o,o.base=e.base;let a=this.defaultValue;(!("defaultValue"in this)||a!=null)&&this.default(function(){let c=a.call(this);return c!=null&&!Array.isArray(c)&&(c=[c]),c});let u=this;this.$embeddedSchemaType=new o4t(t+".$",{...n||{},$parentSchemaType:u},n,i),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}Fn.schemaName="DocumentArray";Fn.options={castNonArrays:!0};Fn.prototype=Object.create(uJ.prototype);Fn.prototype.constructor=Fn;Fn.prototype.OptionsConstructor=a4t;Object.defineProperty(Fn.prototype,"$conditionalHandlers",{enumerable:!1,value:{...uJ.prototype.$conditionalHandlers}});function Z3e(t,e,r){Z0||(Z0=y_());function n(){Z0.apply(this,arguments),!(this.__parentArray==null||this.__parentArray.getArrayParent()==null)&&this.$session(this.__parentArray.getArrayParent().$session())}t._preCompile();let i=r!=null?r.prototype:Z0.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.schema=t,n.prototype.constructor=n,n.$isArraySubdocument=!0,n.events=new oJ,n.base=t.base;for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in oJ.prototype)n[s]=oJ.prototype[s];return n.options=e,n}Fn.prototype.discriminator=function(t,e,r){typeof t=="function"&&(t=O_.getFunctionName(t)),r=r||{};let n=O_.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;e.instanceOfSchema&&i&&(e=e.clone()),e=u4t(this.casterConstructor,t,e,n,null,null,r?.overwriteExisting);let s=Z3e(e,null,this.casterConstructor);s.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(s,"name",{value:t})}catch{}return this.casterConstructor.discriminators[t]=s,this.casterConstructor.discriminators[t]};Fn.prototype.doValidate=function(t,e,r,n){nf||(nf=G0());let i=this;try{sS.prototype.doValidate.call(this,t,s,r)}catch(o){return e(o)}function s(o){if(o)return e(o);let a=t&&t.length,u;if(!a||n&&n.updateValidator)return e();O_.isMongooseDocumentArray(t)||(t=new nf(t,i.path,r));function c(l){l!=null&&(u=l),--a||e(u)}for(let l=0,d=a;l<d;++l){let p=t[l];if(p==null){--a||e(u);continue}if(!(p instanceof Z0)){let f=xx(i.casterConstructor,t[l]);p=t[l]=new f(p,t,void 0,void 0,l)}if(n!=null&&n.validateModifiedOnly&&!p.$isModified()){--a||e(u);continue}p.$__validate(null,n,c)}}};Fn.prototype.doValidateSync=function(t,e,r){let n=sS.prototype.doValidateSync.call(this,t,e);if(n!=null)return n;let i=t&&t.length,s=null;if(i){for(let o=0,a=i;o<a;++o){let u=t[o];if(!u)continue;if(!(u instanceof Z0)){let l=xx(this.casterConstructor,t[o]);u=t[o]=new l(u,t,void 0,void 0,o)}if(r!=null&&r.validateModifiedOnly&&!u.$isModified())continue;let c=u.validateSync(r);c&&s==null&&(s=c)}return s}};Fn.prototype.getDefault=function(t,e,r){let n=typeof this.defaultValue=="function"?this.defaultValue.call(t):this.defaultValue;if(n==null||r&&r.skipCast)return n;nf||(nf=G0()),Array.isArray(n)||(n=[n]),n=new nf(n,this.path,t);for(let i=0;i<n.length;++i){let s=xx(this.casterConstructor,n[i]),o=new s({},n,void 0,void 0,i);o.$init(n[i]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},n[i]=o}return n};var f4t=Object.freeze({transform:!1,virtuals:!1}),X3e=Object.freeze({skipId:!1,willInit:!0});Fn.prototype.cast=function(t,e,r,n,i){if(nf||(nf=G0()),t!=null&&t[aJ]!=null&&t===n)return t;let s,o;i=i||{};let a=i.path||this.path;if(!Array.isArray(t)){if(!r&&!Fn.options.castNonArrays)throw new z3e("DocumentArray",t,this.path,null,this);return e&&r&&e.markModified(a),this.cast([t],e,r,n,i)}(!i.skipDocumentArrayCast||O_.isMongooseDocumentArray(t))&&(t=new nf(t,a,e,this)),n!=null&&(t[Q3e]=n[Q3e]||{}),i.arrayPathIndex!=null&&(t[aJ]=a+"."+i.arrayPathIndex);let u=O_.isMongooseDocumentArray(t)?t.__array:t,c=u.length;for(let l=0;l<c;++l){if(!u[l])continue;let d=xx(this.casterConstructor,u[l]),p=c4t(u[l],!0);if(u[l]!==p&&(u[l]=p),u[l]instanceof Z0){if(u[l][p4t]!==e)if(r){let f=new d(null,t,X3e,s,l);u[l]=f.$init(u[l])}else{let f=new d(u[l],t,void 0,void 0,l);u[l]=f}u[l].__index==null&&u[l].$setIndex(l)}else if(u[l]!=null)if(r)e?s||(s=h4t(this,e.$__.selected,r)):s=!0,o=new d(null,t,X3e,s,l),u[l]=o.$init(u[l],i);else if(n&&typeof n.id=="function"&&(o=n.id(u[l]._id)),n&&o&&O_.deepEqual(o.toObject(f4t),u[l]))o.set(u[l]),u[l]=o;else try{o=new d(u[l],t,void 0,void 0,l),u[l]=o}catch(f){throw new z3e("embedded",u[l],t[aJ],f,this)}}return t};Fn.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e._appliedDiscriminators=this._appliedDiscriminators,e};Fn.prototype.applyGetters=function(t,e){return sS.prototype.applyGetters.call(this,t,e)};function h4t(t,e,r){if(!(r&&e))return;let n=t.path+".",i=Object.keys(e),s=i.length,o={},a,u,c;for(;s--;)if(u=i[s],u.startsWith(n)){if(c=u.substring(n.length),c==="$")continue;c.startsWith("$.")&&(c=c.substring(2)),a||(a=!0),o[c]=e[u]}return a&&o||void 0}Fn.defaultOptions={};Fn.set=sS.set;Fn.setters=[];Fn.get=sS.get;Fn.prototype.$conditionalHandlers.$elemMatch=m4t;function m4t(t,e){let r=Object.keys(t),n=r.length;for(let a=0;a<n;++a){let u=r[a],c=t[u];l4t(u)&&c!=null&&(t[u]=this.castForQuery(u,c,e))}let i=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,s=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(i!=null&&t[i]!=null&&s[t[i]]!=null)return W3e(s[t[i]],t,null,this&&this.$$context);let o=this.casterConstructor.schema??e.schema;return W3e(o,t,null,this&&this.$$context)}Fn.prototype.toJSONSchema=function(e){let r=J3e("object","object",e?.useBsonType,!1),n=this.options.required&&typeof this.options.required!="function";return{...J3e("array","array",e?.useBsonType,n),items:{...r,...this.schema.toJSONSchema(e)}}};eve.exports=Fn});var ive=b((oyr,nve)=>{"use strict";var rve=require("assert"),cJ=oa(),y4t=Ks();nve.exports=function(e){if(e==null||e==="")return null;let r;if(y4t(e,"Long"))r=e.toNumber();else if(typeof e=="string")try{return r=cJ.Double.fromString(e),r}catch{rve.ok(!1)}else if(typeof e=="object"){let n=e.valueOf()??e.toString();if(typeof n=="string")try{return r=cJ.Double.fromString(e),r}catch{rve.ok(!1)}else r=Number(n)}else r=Number(e);return new cJ.Double(r)}});var ove=b((ayr,sve)=>{"use strict";var g4t=po(),x_=ri(),b4t=ive(),_4t=ho();function Ni(t,e,r,n){x_.call(this,t,e,"Double",n)}Ni.schemaName="Double";Ni.defaultOptions={};Ni.prototype=Object.create(x_.prototype);Ni.prototype.constructor=Ni;Ni._cast=b4t;Ni.set=x_.set;Ni.setters=[];Ni.get=x_.get;Ni._defaultCaster=t=>{if(t!=null&&t._bsontype!=="Double")throw new Error;return t};Ni.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ni._checkRequired=t=>t!=null;Ni.checkRequired=x_.checkRequired;Ni.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Ni.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Ni.cast();try{return e(t)}catch(r){throw new g4t("Double",t,this.path,r,this)}};function Ix(t){return this.cast(t)}var E4t={...x_.prototype.$conditionalHandlers,$gt:Ix,$gte:Ix,$lt:Ix,$lte:Ix};Object.defineProperty(Ni.prototype,"$conditionalHandlers",{enumerable:!1,value:E4t});Ni.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return _4t("number","double",e?.useBsonType,r)};Ni.prototype.autoEncryptionType=function(){return"double"};sve.exports=Ni});var uve=b((uyr,ave)=>{"use strict";var v4t=Ks(),S4t=require("assert");ave.exports=function(e){if(e==null)return e;if(e==="")return null;let r=v4t(e,"Long")?e.toNumber():Number(e);if(r===(r|0)&&r>=-2147483648&&r<=2147483647)return r;S4t.ok(!1)}});var dve=b((cyr,lve)=>{"use strict";var cve=po(),I_=ri(),w4t=uve(),A4t=ho(),Rx=Qv();function wi(t,e,r,n){I_.call(this,t,e,"Int32",n)}wi.schemaName="Int32";wi.defaultOptions={};wi.prototype=Object.create(I_.prototype);wi.prototype.constructor=wi;wi._cast=w4t;wi.set=I_.set;wi.setters=[];wi.get=I_.get;wi._defaultCaster=t=>{if(t!=null&&(typeof t!="number"||t!==(t|0)||t<-2147483648||t>2147483647))throw new Error;return t};wi.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};wi._checkRequired=t=>t!=null;wi.checkRequired=I_.checkRequired;wi.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};wi.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=wi.cast();try{return e(t)}catch(r){throw new cve("Int32",t,this.path,r,this)}};var C4t={...I_.prototype.$conditionalHandlers,$gt:Dx,$gte:Dx,$lt:Dx,$lte:Dx,$bitsAllClear:Rx,$bitsAnyClear:Rx,$bitsAllSet:Rx,$bitsAnySet:Rx};Object.defineProperty(wi.prototype,"$conditionalHandlers",{enumerable:!1,value:C4t});function Dx(t,e){return this.castForQuery(null,t,e)}wi.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof cve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};wi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return A4t("number","int",e?.useBsonType,r)};wi.prototype.autoEncryptionType=function(){return"int"};lve.exports=wi});var fve=b((lyr,pve)=>{"use strict";var T4t=Sa(),kx=class extends T4t{},O4t=su();Object.defineProperty(kx.prototype,"of",O4t);pve.exports=kx});var yve=b((dyr,mve)=>{"use strict";var lJ=nx(),x4t=fve(),hve=ri(),I4t=ho(),R4t=qt(),D4t=ph(),oS=wt(),ey=class extends hve{constructor(e,r,n,i){super(e,r,"Map",i),this.$isSchemaMap=!0,this._createNestedSchemaType(i,e,r,n)}set(e,r){return hve.set(e,r)}cast(e,r,n,i,s){if(e instanceof lJ)return e;let o=this.path;if(n){let a=new lJ({},o,r,this.$__schemaType,s),u=a.$__pathRelativeToParent!=null?a.$__pathRelativeToParent:a.$__path;if(e instanceof global.Map)for(let c of e.keys()){let l=e.get(c);l==null?l=a.$__schemaType._castNullish(l):l=a.$__schemaType.cast(l,r,!0,null,{...s,path:u+"."+c}),a.$init(c,l)}else for(let c of Object.keys(e)){let l=e[c];l==null?l=a.$__schemaType._castNullish(l):l=a.$__schemaType.cast(l,r,!0,null,{...s,path:u+"."+c}),a.$init(c,l)}return a}return new lJ(e,o,r,this.$__schemaType,s)}clone(){let e=super.clone();return this.$__schemaType!=null&&(e.$__schemaType=this.$__schemaType.clone()),e}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(e){let r=e?.useBsonType,n=this.getEmbeddedSchemaType(),i=this.options.required&&typeof this.options.required!="function",s=I4t("object","object",r,i);return s.additionalProperties=n.toJSONSchema(e),s}autoEncryptionType(){return"object"}};ey.schemaName="Map";ey.prototype.OptionsConstructor=x4t;ey.defaultOptions={};ey.prototype._createNestedSchemaType=function(e,r,n,i){let s=r+".$*",o={type:{}};oS.hasUserDefinedProperty(n,"of")&&(oS.isPOJO(n.of)&&Object.keys(n.of).length>0&&!oS.hasUserDefinedProperty(n.of,e.options.typeKey)?o={[e.options.typeKey]:new D4t(n.of)}:oS.isPOJO(n.of)?o=Object.assign({},n.of):o={[e.options.typeKey]:n.of},o[e.options.typeKey]&&o[e.options.typeKey].instanceOfSchema&&o[e.options.typeKey].eachPath((c,l)=>{if(l.options.select===!0||l.options.select===!1)throw new R4t('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+r+"."+c+'"')}),oS.hasUserDefinedProperty(n,"ref")&&(o.ref=n.ref)),this.$__schemaType=e.interpretAsType(s,o,i)};mve.exports=ey});var _ve=b((pyr,bve)=>{"use strict";var k4t=Sa(),aS=class extends k4t{},gve=su();Object.defineProperty(aS.prototype,"auto",gve);Object.defineProperty(aS.prototype,"populate",gve);bve.exports=aS});var Sve=b((fyr,vve)=>{"use strict";var Eve=Ks(),dJ=Hp();vve.exports=function(e){if(e==null||Eve(e,"ObjectId"))return e;if(e._id){if(Eve(e._id,"ObjectId"))return e._id;if(e._id.toString instanceof Function)return new dJ(e._id.toString())}return e.toString instanceof Function?new dJ(e.toString()):new dJ(e)}});var Tve=b((hyr,Cve)=>{"use strict";var M4t=_ve(),sf=ri(),P4t=Sve(),N4t=ho(),F4t=qo(),fJ=Hp(),hJ=Ks(),wve=wt(),B4t=sf.CastError,pJ;function Gn(t,e,r,n){let i=typeof t=="string"&&t.length===24&&/^[a-f0-9]+$/i.test(t),s=e&&e.suppressWarning;(i||typeof t>"u")&&!s&&wve.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),sf.call(this,t,e,"ObjectId",n)}Gn.schemaName="ObjectId";Gn.defaultOptions={};Gn.prototype=Object.create(sf.prototype);Gn.prototype.constructor=Gn;Gn.prototype.OptionsConstructor=M4t;Gn.get=sf.get;Gn.set=sf.set;Gn.setters=[];Gn.prototype.auto=function(t){return t&&(this.default(Ave),this.set(L4t)),this};Gn._checkRequired=t=>hJ(t,"ObjectId");Gn._cast=P4t;Gn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Gn._defaultCaster=t=>{if(!hJ(t,"ObjectId"))throw new Error(t+" is not an instance of ObjectId");return t};Gn.checkRequired=sf.checkRequired;Gn.prototype.checkRequired=function(e,r){return sf._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Gn.checkRequired())(e)};Gn.prototype.cast=function(t,e,r,n,i){if(!hJ(t,"ObjectId")&&sf._isRef(this,t,e,r)){if((F4t(t)||"").toLowerCase()==="objectid")return new fJ(t.toHexString());if(t==null||wve.isNonBuiltinObject(t))return this._castRef(t,e,r,i)}let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Gn.cast();try{return s(t)}catch(o){throw new B4t("ObjectId",t,this.path,o,this)}};function Mx(t){return this.cast(t)}var q4t={...sf.prototype.$conditionalHandlers,$gt:Mx,$gte:Mx,$lt:Mx,$lte:Mx};Object.defineProperty(Gn.prototype,"$conditionalHandlers",{enumerable:!1,value:q4t});function Ave(){return new fJ}Ave.$runBeforeSetters=!0;function L4t(t){return pJ||(pJ=ac()),this instanceof pJ&&t===void 0?new fJ:t}Gn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return N4t("string","objectId",e?.useBsonType,r)};Gn.prototype.autoEncryptionType=function(){return"objectId"};Cve.exports=Gn});var xve=b((myr,Ove)=>{"use strict";var j4t=Sa(),au=class extends j4t{},xd=su();Object.defineProperty(au.prototype,"enum",xd);Object.defineProperty(au.prototype,"match",xd);Object.defineProperty(au.prototype,"lowercase",xd);Object.defineProperty(au.prototype,"trim",xd);Object.defineProperty(au.prototype,"uppercase",xd);Object.defineProperty(au.prototype,"minLength",xd);Object.defineProperty(au.prototype,"minlength",xd);Object.defineProperty(au.prototype,"maxLength",xd);Object.defineProperty(au.prototype,"maxlength",xd);Object.defineProperty(au.prototype,"populate",xd);Ove.exports=au});var mJ=b((yyr,kve)=>{"use strict";var of=ri(),cS=Ea(),$4t=xve(),U4t=ox(),K4t=ho(),Ive=wt(),V4t=Ks(),Dve=of.CastError;function Sr(t,e,r,n){this.enumValues=[],this.regExp=null,of.call(this,t,e,"String",n)}Sr.schemaName="String";Sr.defaultOptions={};Sr.prototype=Object.create(of.prototype);Sr.prototype.constructor=Sr;Object.defineProperty(Sr.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:$4t});Sr._cast=U4t;Sr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Sr._defaultCaster=t=>{if(t!=null&&typeof t!="string")throw new Error;return t};Sr.get=of.get;Sr.set=of.set;Sr.setters=[];Sr._checkRequired=t=>(t instanceof String||typeof t=="string")&&t.length;Sr.checkRequired=of.checkRequired;Sr.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;let t,e;Ive.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=Ive.object.vals(arguments[0]),e=cS.messages.String.enum):(t=arguments,e=cS.messages.String.enum);for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=function(n){return n==null||~r.indexOf(n)},this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};Sr.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toLowerCase()))};Sr.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toUpperCase()))};Sr.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.trim()))};Sr.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minlengthValidator},this)),t!=null){let r=e||cS.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(n){return n===null||n.length>=t},message:r,type:"minlength",minlength:t})}return this};Sr.prototype.minLength=Sr.prototype.minlength;Sr.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxlengthValidator},this)),t!=null){let r=e||cS.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(n){return n===null||n.length<=t},message:r,type:"maxlength",maxlength:t})}return this};Sr.prototype.maxLength=Sr.prototype.maxlength;Sr.prototype.match=function(e,r){let n=r||cS.messages.String.match,i=function(s){return e?(e.lastIndex=0,s!=null&&s!==""?e.test(s):!0):!1};return this.validators.push({validator:i,message:n,type:"regexp",regexp:e}),this};Sr.prototype.checkRequired=function(e,r){return typeof e=="object"&&of._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Sr.checkRequired())(e)};Sr.prototype.cast=function(t,e,r,n,i){if(typeof t!="string"&&of._isRef(this,t,e,r))return this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Sr.cast();try{return s(t)}catch{throw new Dve("string",t,this.path,null,this)}};function uS(t,e){return this.castForQuery(null,t,e)}function G4t(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function Rve(t){return t==null?this._castNullish(t):this.cast(t,this)}var H4t={...of.prototype.$conditionalHandlers,$all:G4t,$gt:uS,$gte:uS,$lt:uS,$lte:uS,$options:Rve,$regex:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"?e:Rve.call(this,e)},$not:uS};Object.defineProperty(Sr.prototype,"$conditionalHandlers",{enumerable:!1,value:H4t});Sr.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with String.");return n.call(this,e,r)}if(Object.prototype.toString.call(e)==="[object RegExp]"||V4t(e,"BSONRegExp"))return e;try{return this.applySetters(e,r)}catch(i){throw i instanceof Dve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Sr.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return K4t("string","string",e?.useBsonType,r)};Sr.prototype.autoEncryptionType=function(){return"string"};kve.exports=Sr});var Pve=b((gyr,bJ)=>{"use strict";var gJ=l_(),yJ=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,z4t=gJ.Binary;bJ.exports=function(e){if(e==null)return e;function r(n){let i=new gJ(n);return i._subtype=4,i}if(typeof e=="string"){if(yJ.test(e))return Mve(e);throw new Error(`"${e}" is not a valid UUID string`)}if(Buffer.isBuffer(e))return r(e);if(e instanceof z4t)return r(e.value(!0));if(e.toString&&e.toString!==Object.prototype.toString&&yJ.test(e.toString()))return Mve(e.toString());throw new Error(`"${e}" cannot be casted to a UUID`)};bJ.exports.UUID_FORMAT=yJ;function W4t(t){return t!=null&&Buffer.from(t,"hex")}function Mve(t){typeof t!="string"&&(t="");let e=t.replace(/[{}-]/g,""),r=W4t(e),n=new gJ(r);return n._subtype=4,n}});var Lve=b((byr,qve)=>{"use strict";var J4t=l_(),yh=ri(),Nve=yh.CastError,Fve=Pve(),Y4t=ho(),Bve=wt(),Px=Qv(),Q4t=Fve.UUID_FORMAT,X4t=J4t.Binary;function Nx(t){let e;return typeof t!="string"&&t!=null?(e=t.toString("hex"),e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32)):t}function Ai(t,e,r,n){yh.call(this,t,e,"UUID",n),this.getters.push(function(i){return i!=null&&i.$__!=null?i:Buffer.isBuffer(i)?Nx(i):i instanceof X4t?Nx(i.buffer):Bve.isPOJO(i)&&i.type==="Buffer"&&Array.isArray(i.data)?Nx(Buffer.from(i.data)):i})}Ai.schemaName="UUID";Ai.defaultOptions={};Ai.prototype=Object.create(yh.prototype);Ai.prototype.constructor=Ai;Ai._cast=Fve;Ai.get=yh.get;Ai.set=yh.set;Ai.setters=[];Ai.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ai._checkRequired=t=>t!=null;Ai.checkRequired=yh.checkRequired;Ai.prototype.checkRequired=function(e){return Buffer.isBuffer(e)&&(e=Nx(e)),e!=null&&Q4t.test(e)};Ai.prototype.cast=function(t,e,r,n,i){if(Bve.isNonBuiltinObject(t)&&yh._isRef(this,t,e,r))return this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Ai.cast();try{return s(t)}catch(o){throw new Nve(Ai.schemaName,t,this.path,o,this)}};function lS(t){return this.cast(t)}function _J(t){return t.map(e=>this.cast(e))}var Z4t={...yh.prototype.$conditionalHandlers,$bitsAllClear:Px,$bitsAnyClear:Px,$bitsAllSet:Px,$bitsAnySet:Px,$all:_J,$gt:lS,$gte:lS,$in:_J,$lt:lS,$lte:lS,$ne:lS,$nin:_J};Object.defineProperty(Ai.prototype,"$conditionalHandlers",{enumerable:!1,value:Z4t});Ai.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with UUID.");return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof Nve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Ai.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Y4t("string","binData",e?.useBsonType,r)};Ai.prototype.autoEncryptionType=function(){return"binData"};qve.exports=Ai});var $ve=b((_yr,jve)=>{"use strict";var e3t=Sa(),Fx=class extends e3t{},t3t=su();Object.defineProperty(Fx.prototype,"of",t3t);jve.exports=Fx});var Kve=b((Eyr,Uve)=>{"use strict";var r3t=$ve(),n3t=ri(),R_=Symbol("firstValue");var D_=class extends n3t{constructor(e,r,n,i){if(super(e,r,"Union",i),!r||!Array.isArray(r.of)||r.of.length===0)throw new Error("Union schema type requires an array of types");this.schemaTypes=r.of.map(s=>i.interpretAsType(e,s,n))}cast(e,r,n,i,s){let o=R_,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u].cast(e,r,n,i,s);if(c===e)return c;o===R_&&(o=c)}catch(c){a=c}if(o!==R_)return o;throw a}applySetters(e,r,n,i,s){let o=R_,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u]._applySetters(e,r,n,i,s);if(c==null?c=this.schemaTypes[u]._castNullish(c):c=this.schemaTypes[u].cast(c,r,n,i,s),c===e)return c;o===R_&&(o=c)}catch(c){a=c}if(o!==R_)return o;throw a}clone(){let e=super.clone();return e.schemaTypes=this.schemaTypes.map(r=>r.clone()),e}};D_.schemaName="Union";D_.defaultOptions={};D_.prototype.OptionsConstructor=r3t;Uve.exports=D_});var Yv=b(rn=>{"use strict";rn.Array=px();rn.BigInt=G4e();rn.Boolean=W4e();rn.Buffer=Z4e();rn.Date=a3e();rn.Decimal128=rn.Decimal=d3e();rn.DocumentArray=tve();rn.Double=ove();rn.Int32=dve();rn.Map=yve();rn.Mixed=d_();rn.Number=MW();rn.ObjectId=Tve();rn.String=mJ();rn.Subdocument=iJ();rn.UUID=Lve();rn.Union=Kve();rn.Oid=rn.ObjectId;rn.Object=rn.Mixed;rn.Bool=rn.Boolean;rn.ObjectID=rn.ObjectId});var ph=b((AJ,eSe)=>{"use strict";var i3t=require("events").EventEmitter,s3t=q0(),gh=qt(),SJ=ri(),Vve=Sa(),o3t=fW(),wJ=ZO(),Gve=mW(),zs=Vn(),Hve=ni(),a3t=qo(),u3t=x6e(),Lx=bW(),c3t=D6e(),zve=M6e(),l3t=EO(),Bx=ou(),d3t=N6e(),p3t=H6e(),si=wt(),f3t=W6e(),h3t=/\.\d+(\.|$)/,bh,m3t=tx().queryMiddlewareFunctions,y3t=rx().middlewareFunctions,Wve=m3t.concat(y3t).reduce((t,e)=>t.add(e),new Set),EJ=si.isPOJO,Jve=0,g3t=/^\d+$/;function Le(t,e){if(!(this instanceof Le))return new Le(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=e&&e.methods||{},this.methodOptions={},this.statics=e&&e.statics||{},this.tree={},this.query=e&&e.query||{},this.childSchemas=[],this.plugins=[],this.$id=++Jve,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new s3t},this.options=this.defaultOptions(e),Array.isArray(t))for(let i of t)this.add(i);else t&&this.add(t);if(e&&e.virtuals){let i=e.virtuals,s=Object.keys(i);for(let o of s){let a=i[o].options?i[o].options:void 0,u=this.virtual(o,a);i[o].get&&u.get(i[o].get),i[o].set&&u.set(i[o].set)}}let r=t&&t._id&&si.isObject(t._id);!this.paths._id&&this.options._id&&!r&&Gve(this),this.setupTimestamp(this.options.timestamps)}function Yve(t,e){for(let r of Object.keys(e)){let n=null;if(e[r]!=null)n=e[r];else{let s=Hve(t.paths[r],"options");if(s==null)continue;n=s.alias}if(!n)continue;let i=t.paths[r].path;if(Array.isArray(n)){for(let s of n){if(typeof s!="string")throw new Error("Invalid value for alias option on "+i+", got "+s);t.aliases[s]=i,t.virtual(s).get((function(o){return function(){return typeof this.get=="function"?this.get(o):this[o]}})(i)).set((function(o){return function(a){return this.$set(o,a)}})(i))}continue}if(typeof n!="string")throw new Error("Invalid value for alias option on "+i+", got "+n);t.aliases[n]=i,t.virtual(n).get((function(s){return function(){return typeof this.get=="function"?this.get(s):this[s]}})(i)).set((function(s){return function(o){return this.$set(s,o)}})(i))}}Le.prototype=Object.create(i3t.prototype);Le.prototype.constructor=Le;Le.prototype.instanceOfSchema=!0;Object.defineProperty(Le.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(Le.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(Le.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});Le.prototype.obj;Le.prototype.paths;Le.prototype.tree;Le.prototype.clone=function(){let t=this._clone();return t.on("init",e=>this.emit("init",e)),t};Le.prototype._clone=function(e){e=e||(this.base==null?Le:this.base.Schema);let r=new e({},this._userProvidedOptions);r.base=this.base,r.obj=this.obj,r.options=zs(this.options),r.callQueue=this.callQueue.map(function(n){return n}),r.methods=zs(this.methods),r.methodOptions=zs(this.methodOptions),r.statics=zs(this.statics),r.query=zs(this.query),r.plugins=Array.prototype.slice.call(this.plugins),r._indexes=zs(this._indexes),r._searchIndexes=zs(this._searchIndexes),r.s.hooks=this.s.hooks.clone(),r.tree=zs(this.tree),r.paths=Object.fromEntries(Object.entries(this.paths).map(([n,i])=>[n,i.clone()])),r.nested=zs(this.nested),r.subpaths=zs(this.subpaths);for(let n of Object.values(r.paths))if(n.$isSingleNested){let i=n.path;for(let s of Object.keys(n.schema.paths))r.singleNestedPaths[i+"."+s]=n.schema.paths[s];for(let s of Object.keys(n.schema.singleNestedPaths))r.singleNestedPaths[i+"."+s]=n.schema.singleNestedPaths[s];for(let s of Object.keys(n.schema.subpaths))r.singleNestedPaths[i+"."+s]=n.schema.subpaths[s];for(let s of Object.keys(n.schema.nested))r.singleNestedPaths[i+"."+s]="nested"}return r._gatherChildSchemas(),r.virtuals=zs(this.virtuals),r.$globalPluginsApplied=this.$globalPluginsApplied,r.$isRootDiscriminator=this.$isRootDiscriminator,r.$implicitlyCreated=this.$implicitlyCreated,r.$id=++Jve,r.$originalSchemaId=this.$id,r.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(r.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(r.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(r._applyDiscriminators=new Map(this._applyDiscriminators)),r.aliases=Object.assign({},this.aliases),r.encryptedFields=zs(this.encryptedFields),r};Le.prototype.pick=function(t,e){let r=new Le({},e||this.options);if(!Array.isArray(t))throw new gh('Schema#pick() only accepts an array argument, got "'+typeof t+'"');for(let n of t)if(this._hasEncryptedField(n)){let i=this.encryptedFields[n],s=this.path(n);r.add({[n]:{encrypt:i,[this.options.typeKey]:s}})}else if(this.nested[n])r.add({[n]:Hve(this.tree,n)});else{let i=this.path(n);if(i==null)throw new gh("Path `"+n+"` is not in the schema");r.add({[n]:i})}return this._hasEncryptedFields()||(r.options.encryptionType=null),r};Le.prototype.omit=function(t,e){let r=new Le(this,e||this.options);if(!Array.isArray(t))throw new gh('Schema#omit() only accepts an array argument, got "'+typeof t+'"');r.remove(t);for(let n in r.singleNestedPaths)t.includes(n)&&delete r.singleNestedPaths[n];return r};Le.prototype.defaultOptions=function(t){this._userProvidedOptions=t==null?{}:zs(t);let e=this.base&&this.base.options||{},r="strict"in e?e.strict:!0,n="strictQuery"in e?e.strictQuery:!1,i="id"in e?e.id:!0;if(t={strict:r,strictQuery:n,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:i,typeKey:"type",...t},t.versionKey&&typeof t.versionKey!="string")throw new gh("`versionKey` must be falsy or string, got `"+typeof t.versionKey+"`");if(typeof t.read=="string"?t.read=Lx(t.read):Array.isArray(t.read)&&typeof t.read[0]=="string"&&(t.read={mode:Lx(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new gh("Must set `versionKey` if using `optimisticConcurrency`");return t};Le.prototype.discriminator=function(t,e,r){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(t,{schema:e,options:r}),this};Le.prototype._defaultToObjectOptions=function(t){let e=t?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[e])return this._defaultToObjectOptionsMap[e];let r=this.base&&this.base.options&&this.base.options[e]||{},n=this.options[e]||{},i=Object.assign({},r,n);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[e]=i,i};Le.prototype.encryptionType=function(t){if(arguments.length===0)return this.options.encryptionType;if(!(typeof t=="string"||t===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=t};Le.prototype.add=function(e,r){if(e instanceof Le||e!=null&&e.instanceOfSchema)return l3t(this,e),this;if(e._id===!1&&r==null&&(this.options._id=!1),r=r||"",r==="__proto__."||r==="constructor."||r==="prototype.")return this;let n=Object.keys(e),i=this.options.typeKey;for(let o of n){if(si.specialProperties.has(o))continue;let a=r+o,u=e[o];if(u==null)throw new TypeError("Invalid value for schema path `"+a+'`, got value "'+u+'"');if(o==="_id"&&u===!1)continue;let c=!1;if(typeof u=="string"){let l=this.base!=null?this.base.Schema.Types:Le.Types,d=u.charAt(0).toUpperCase()+u.substring(1);c=l[d]!=null}if(o!=="_id"&&(typeof u!="object"&&typeof u!="function"&&!c||u==null))throw new TypeError(`Invalid schema configuration: \`${u}\` is not a valid type at path \`${o}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(u instanceof wJ||(u.constructor&&u.constructor.name||null)==="VirtualType"){this.virtual(u);continue}if(Array.isArray(u)&&u.length===1&&u[0]==null)throw new TypeError("Invalid value for schema Array path `"+a+'`, got value "'+u[0]+'"');if(EJ(u)||u instanceof Vve)if(Object.keys(u).length<1)r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(a,u);else if(!u[i]||i==="type"&&EJ(u.type)&&u.type.type)this.nested[a]=!0,this.add(u,a+".");else{let l=u[i];if(EJ(l)&&Object.keys(l).length>0){r&&(this.nested[r.substring(0,r.length-1)]=!0);let d={};this._userProvidedOptions.typeKey&&(d.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(d.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(d.toObject=si.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(d.toJSON=si.omit(this._userProvidedOptions.toJSON,["transform"]));let p=new Le(l,d);p.$implicitlyCreated=!0;let f=Object.assign({},u,{[i]:p});this.path(r+o,f)}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),u!=null&&!u.instanceOfSchema&&si.isPOJO(u.discriminators)){let d=this.path(r+o);for(let p in u.discriminators)d.discriminator(p,u.discriminators[p])}}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),u[0]!=null&&!u[0].instanceOfSchema&&si.isPOJO(u[0].discriminators)){let l=this.path(r+o);for(let d in u[0].discriminators)l.discriminator(d,u[0].discriminators[d])}if(u.instanceOfSchema&&u.encryptionType()!=null){if(this.encryptionType()!=u.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[l,d]of Object.entries(u.encryptedFields)){let p=a+"."+l;this._addEncryptedField(p,d)}}else if(typeof u=="object"&&"encrypt"in u){let{encrypt:l}=u;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(a,l)}else this._removeEncryptedField(a)}let s=Object.fromEntries(Object.entries(e).map(([o])=>[r+o,null]));return Yve(this,s),this};Le.prototype._addEncryptedField=function(e,r){if(this.path(e).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${e}'`);this.encryptedFields[e]=zs(r)};Le.prototype._removeEncryptedField=function(e){delete this.encryptedFields[e]};Le.prototype._hasEncryptedFields=function(){return Object.keys(this.encryptedFields).length>0};Le.prototype._hasEncryptedField=function(e){return e in this.encryptedFields};Le.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([e,r])=>{let n=this.path(e).autoEncryptionType();return{path:e,bsonType:n,...r}})}};Le.prototype._buildSchemaMap=function(){function t(n,i,s){let o=0,a=n[o];for(;o<n.length-1;++o,a=n[o])i[a]=i[a]==null?{bsonType:"object",properties:{}}:i[a],i=i[a].properties;i[a]=s}let e=(n,[i,s])=>{let o=this.path(i).autoEncryptionType(),a=i.split("."),u={encrypt:{...s,bsonType:o}};return t(a,n,u),n};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(e,{})}};Le.prototype.alias=function(t,e){return Yve(this,{[t]:e}),this};Le.prototype.removeIndex=function(e){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof e!="object"&&typeof e!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof e=="object")for(let r=this._indexes.length-1;r>=0;--r)zve(this._indexes[r][0],e)&&this._indexes.splice(r,1);else for(let r=this._indexes.length-1;r>=0;--r)this._indexes[r][1]!=null&&this._indexes[r][1].name===e&&this._indexes.splice(r,1);return this};Le.prototype.clearIndexes=function(){return this._indexes.length=0,this};Le.prototype.searchIndex=function(e){return this._searchIndexes.push(e),this};Le.reserved=Object.create(null);Le.prototype.reserved=Le.reserved;var Hs=Le.reserved;Hs.prototype=Hs.emit=Hs.listeners=Hs.removeListener=Hs.collection=Hs.errors=Hs.get=Hs.init=Hs.isModified=Hs.isNew=Hs.populated=Hs.remove=Hs.save=Hs.toObject=Hs.validate=1;Hs.collection=1;Le.prototype.path=function(t,e){if(e===void 0){if(this.paths[t]!=null)return this.paths[t];let u=Qve(t),c=b3t(this,t,u);if(c!=null)return c;let l=Xve(this,t);return l??(c=this.hasMixedParent(u),c??(h3t.test(t)?_3t(this,t,u):void 0))}let r=t.split(".")[0];if(Hs[r]&&!this.options.suppressReservedKeysWarning){let u=`\`${r}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;si.warn(u)}typeof e=="object"&&si.hasUserDefinedProperty(e,"ref")&&f3t(e.ref,t);let n=t.split(/\./),i=n.pop(),s=this.tree,o="";for(let u of n){if(si.specialProperties.has(u))throw new Error("Cannot set special property `"+u+"` on a schema");if(o=o+=(o.length>0?".":"")+u,s[u]||(this.nested[o]=!0,s[u]={}),typeof s[u]!="object"){let c="Cannot set nested path `"+t+"`. Parent path `"+o+"` already set to type "+s[u].name+".";throw new Error(c)}s=s[u]}s[i]=zs(e),this.paths[t]=this.interpretAsType(t,e,this.options);let a=this.paths[t];if(this.childSchemas=this.childSchemas.filter(u=>u.path!==t),a.$isSchemaMap){let u=t+".$*";this.paths[u]=a.$__schemaType,this.mapPaths.push(this.paths[u]),a.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:a.$__schemaType.schema,model:a.$__schemaType.caster,path:t})}if(a.$isSingleNested){for(let u of Object.keys(a.schema.paths))this.singleNestedPaths[t+"."+u]=a.schema.paths[u];for(let u of Object.keys(a.schema.singleNestedPaths))this.singleNestedPaths[t+"."+u]=a.schema.singleNestedPaths[u];for(let u of Object.keys(a.schema.subpaths))this.singleNestedPaths[t+"."+u]=a.schema.subpaths[u];for(let u of Object.keys(a.schema.nested))this.singleNestedPaths[t+"."+u]="nested";Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.caster.base=this.base,this.childSchemas.push({schema:a.schema,model:a.caster,path:t})}else a.$isMongooseDocumentArray&&(Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.casterConstructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.casterConstructor,path:t}));if(a.$isMongooseArray&&a.caster instanceof SJ){let u=t,c=a,l=[];for(;c.$isMongooseArray;)u=u+".$",c.$isMongooseDocumentArray?(c.$embeddedSchemaType._arrayPath=u,c.$embeddedSchemaType._arrayParentPath=t,c=c.$embeddedSchemaType):(c.caster._arrayPath=u,c.caster._arrayParentPath=t,c=c.caster),this.subpaths[u]=c;for(let d of l)this.subpaths[d.path]=d}if(a.$isMongooseDocumentArray){for(let u of Object.keys(a.schema.paths)){let c=a.schema.paths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.subpaths)){let c=a.schema.subpaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.singleNestedPaths)){let c=a.schema.singleNestedPaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}}return this};Le.prototype._gatherChildSchemas=function(){let e=[];for(let r of Object.keys(this.paths)){if(typeof r!="string")continue;let n=this.paths[r];n.$isMongooseDocumentArray||n.$isSingleNested?e.push({schema:n.schema,model:n.caster,path:r}):n.$isSchemaMap&&n.$__schemaType.$isSingleNested&&e.push({schema:n.$__schemaType.schema,model:n.$__schemaType.caster,path:r})}return this.childSchemas=e,e};function b3t(t,e,r){if(Object.hasOwn(t.paths,e))return t.paths[e];if(Object.hasOwn(t.subpaths,r)){let n=t.subpaths[r];return n==="nested"?void 0:n}if(Object.hasOwn(t.singleNestedPaths,r)&&typeof t.singleNestedPaths[r]=="object"){let n=t.singleNestedPaths[r];return n==="nested"?void 0:n}return null}function Qve(t){return/\.\d+/.test(t)?t.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):t}function Xve(t,e){if(t.mapPaths.length===0)return null;for(let r of t.mapPaths){let n=r.path.replace(/\.\$\*/g,"");if(e===n||e.startsWith(n+".")&&e.slice(n.length+1).indexOf(".")===-1)return r;if(r.schema&&e.startsWith(n+".")){let i=e.slice(n.length+1);return i=i.slice(i.indexOf(".")+1),r.schema.paths[i]}else if(r.$isSchemaMap&&e.startsWith(n+".")){let i=e.slice(n.length+1);i=i.slice(i.indexOf(".")+1);let s=r.$__schemaType._presplitPath;if(i.indexOf(".")===-1&&s[s.length-1]==="$*")return r.$__schemaType;if(i.indexOf(".")!==-1&&r.$__schemaType.schema&&s[s.length-1]==="$*")return r.$__schemaType.schema.path(i.slice(i.indexOf(".")+1))}}return null}Object.defineProperty(Le.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});Le.prototype.interpretAsType=function(t,e,r){if(e instanceof SJ){if(e.path===t)return e;let u=e.clone();return u.path=t,u}let n=this.base!=null?this.base.Schema.Types:Le.Types,i=this.base!=null?this.base.Types:__();if(!si.isPOJO(e)&&!(e instanceof Vve)&&si.getFunctionName(e.constructor)!=="Object"){let c=e;e={},e[r.typeKey]=c}let s=e[r.typeKey]&&(e[r.typeKey]instanceof Function||r.typeKey!=="type"||!e.type.type)?e[r.typeKey]:{};if(s instanceof SJ){if(s.path===t)return s;let u=s.clone();return u.path=t,u}let o;if(si.isPOJO(s)||s==="mixed")return new n.Mixed(t,e,null,this);if(Array.isArray(s)||s===Array||s==="array"||s===n.Array){let u=s===Array||s==="array"?e.cast||e.of:s[0];if(u&&u.instanceOfSchema){if(!(u instanceof Le))if(this.options._isMerging)u=new Le(u);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u,e,null,this)}if(u&&u[r.typeKey]&&u[r.typeKey].instanceOfSchema){if(!(u[r.typeKey]instanceof Le))if(this.options._isMerging)u[r.typeKey]=new Le(u[r.typeKey]);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u[r.typeKey],e,u,this)}if(typeof u<"u"&&(Array.isArray(u)||u.type===Array||u.type=="Array"))return u&&u.type=="Array"&&(u.type=Array),new n.Array(t,this.interpretAsType(t,u,r),e,null,this);let c=u!=null&&u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u;if(typeof u=="string")u=n[u.charAt(0).toUpperCase()+u.substring(1)];else if(si.isPOJO(c))if(Object.keys(c).length){let l={minimize:r.minimize};r.typeKey&&(l.typeKey=r.typeKey),Object.hasOwn(r,"strict")&&(l.strict=r.strict),Object.hasOwn(r,"strictQuery")&&(l.strictQuery=r.strictQuery),Object.hasOwn(r,"toObject")&&(l.toObject=si.omit(r.toObject,["transform"])),Object.hasOwn(r,"toJSON")&&(l.toJSON=si.omit(r.toJSON,["transform"])),Object.hasOwn(this._userProvidedOptions,"_id")?l._id=this._userProvidedOptions._id:Le.Types.DocumentArray.defaultOptions._id!=null&&(l._id=Le.Types.DocumentArray.defaultOptions._id);let d=new Le(c,l);return d.$implicitlyCreated=!0,new n.DocumentArray(t,d,e,null,this)}else return new n.Array(t,n.Mixed,e,null,this);if(u){if(s=u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u,Array.isArray(s))return new n.Array(t,this.interpretAsType(t,s,r),e,null,this);if(o=typeof s=="string"?s:s.schemaName||si.getFunctionName(s),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${t}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!Object.hasOwn(n,o))throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type within the array \`${t}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);o==="Union"&&typeof u=="object"&&(u.parentSchema=this)}return new n.Array(t,u||n.Mixed,e,r,this)}if(s&&s.instanceOfSchema)return new n.Subdocument(s,t,e,this);if(Buffer.isBuffer(s)?o="Buffer":typeof s=="function"||typeof s=="object"?o=s.schemaName||si.getFunctionName(s):s===i.ObjectId?o="ObjectId":s===i.Decimal128?o="Decimal128":o=s==null?""+s:s.toString(),o&&(o=o.charAt(0).toUpperCase()+o.substring(1)),o==="ObjectID"&&(o="ObjectId"),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: \`${t}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(n[o]==null)throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type at path \`${t}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);return new n[o](t,e,r,this)};Le.prototype.eachPath=function(t){let e=Object.keys(this.paths),r=e.length;for(let n=0;n<r;++n)t(e[n],this.paths[e[n]]);return this};Le.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;let r=Object.keys(this.paths),n=r.length,i=[];for(;n--;){let s=r[n];this.paths[s].isRequired&&i.push(s)}return this._requiredpaths=i,this._requiredpaths};Le.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)};Le.prototype.pathType=function(t){if(Object.hasOwn(this.paths,t))return"real";if(Object.hasOwn(this.virtuals,t))return"virtual";if(Object.hasOwn(this.nested,t))return"nested";let e=Qve(t);if(Object.hasOwn(this.subpaths,e)||Object.hasOwn(this.subpaths,t))return"real";let r=Object.hasOwn(this.singleNestedPaths,e)||Object.hasOwn(this.singleNestedPaths,t);return r?r==="nested"?"nested":"real":Xve(this,t)!=null?"real":/\.\d+\.|\.\d+$/.test(t)?Zve(this,t,e):"adhocOrUndefined"};Le.prototype.hasMixedParent=function(t){let e=t.split(/\./g);t="";for(let r=0;r<e.length;++r)if(t=r>0?t+"."+e[r]:e[r],Object.hasOwn(this.paths,t)&&this.paths[t]instanceof bh.Mixed)return this.paths[t];return null};Le.prototype.setupTimestamp=function(t){return p3t(this,t)};function Zve(t,e,r){let n=e.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(n.length<2)return Object.hasOwn(t.paths,n[0])?t.paths[n[0]]:"adhocOrUndefined";let i=t.path(n[0]),s=!1;if(!i)return"adhocOrUndefined";let o=n.length-1;for(let a=1;a<n.length;++a){s=!1;let u=n[a];if(a===o&&i&&!/\D/.test(u)){i.$isMongooseDocumentArray?i=i.$embeddedSchemaType:i instanceof bh.Array?i=i.caster:i=void 0;break}if(!/\D/.test(u)){i instanceof bh.Array&&a!==o&&(i=i.caster);continue}if(!(i&&i.schema)){i=void 0;break}s=i.schema.pathType(u)==="nested",i=i.schema.path(u)}return t.subpaths[r]=i,i?"real":s?"nested":"adhocOrUndefined"}function _3t(t,e,r){return Zve(t,e,r),t.subpaths[r]}Le.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this};Le.prototype.pre=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of Wve)t.test(r)&&this.pre.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.pre.apply(this,[r].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};Le.prototype.post=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of Wve)t.test(r)&&this.post.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.post.apply(this,[r].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};Le.prototype.plugin=function(t,e){if(typeof t!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof t+'"');if(e&&e.deduplicate){for(let r of this.plugins)if(r.fn===t)return this}return this.plugins.push({fn:t,opts:e}),t(this,e),this};Le.prototype.method=function(t,e,r){if(typeof t!="string")for(let n in t)this.methods[n]=t[n],this.methodOptions[n]=zs(r);else this.methods[t]=e,this.methodOptions[t]=zs(r);return this};Le.prototype.static=function(t,e){if(typeof t!="string")for(let r in t)this.statics[r]=t[r];else this.statics[t]=e;return this};Le.prototype.index=function(t,e){t||(t={}),e||(e={}),e.expires&&si.expires(e);for(let r in t)this.aliases[r]&&(t=si.renameObjKey(t,r,this.aliases[r]));for(let r of Object.keys(t))t[r]==="ascending"||t[r]==="asc"?t[r]=1:(t[r]==="descending"||t[r]==="desc")&&(t[r]=-1);for(let r of this.indexes())e.name==null&&r[1].name==null&&zve(r[0],t)&&si.warn(`Duplicate schema index on ${JSON.stringify(t)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([t,e]),this};Le.prototype.set=function(t,e,r){if(arguments.length===1)return this.options[t];switch(t){case"read":typeof e=="string"?this.options[t]={mode:Lx(e),tags:r}:Array.isArray(e)&&typeof e[0]=="string"?this.options[t]={mode:Lx(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"timestamps":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"_id":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?Gve(this):!e&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break}return t==="strict"&&dS(this,{strict:e}),t==="strictQuery"&&dS(this,{strictQuery:e}),t==="toObject"&&(e={...e},delete e.transform,dS(this,{toObject:e})),t==="toJSON"&&(e={...e},delete e.transform,dS(this,{toJSON:e})),this};function dS(t,e){for(let{schema:r}of t.childSchemas)r.$implicitlyCreated&&(Object.assign(r.options,e),dS(r,e))}Le.prototype.get=function(t){return this.options[t]};var E3t="2d 2dsphere hashed text".split(" ");Object.defineProperty(Le,"indexTypes",{get:function(){return E3t},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});Le.prototype.indexes=function(){return u3t(this)};Le.prototype.virtual=function(t,e){if(t instanceof wJ||a3t(t)==="VirtualType")return this.virtual(t.path,t.options);if(e=new o3t(e),si.hasUserDefinedProperty(e,["ref","refPath"])){if(e.localField==null)throw new Error("Reference virtuals require `localField` option");if(e.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let i=this.virtual(t);i.options=e,this.pre("init",function(u,c){if(Bx.has(t,u)){let l=Bx.get(t,u);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(l)?l[0]:l:this.$$populatedVirtuals[t]=Array.isArray(l)?l:l==null?[]:[l],c?.hydratedPopulatedDocs&&!e.count){let d=i._getModelNamesForPopulate(this),p=this.$$populatedVirtuals[t];if(!Array.isArray(p)&&!p.$__&&d?.length===1){let f=this.db.model(d[0]);this.$$populatedVirtuals[t]=f.hydrate(p)}else if(Array.isArray(p)&&d?.length===1){let f=this.db.model(d[0]);for(let y=0;y<p.length;++y)p[y].$__||(p[y]=f.hydrate(p[y],null,{hydratedPopulatedDocs:!0}));let h=e.foreignField;this.$populated(t,p.map(y=>y==null?y:y.get(typeof h=="function"?h.call(y,y):h)),{populateModelSymbol:f})}}Bx.unset(t,u)}}),i.set(function(a){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),d3t(this.$$populatedVirtuals,t,a,e)}),typeof e.get=="function"&&i.get(e.get);let s=t.split("."),o=s[0];for(let a=0;a<s.length-1;++a)if(this.paths[o]!=null){if(this.paths[o].$isMongooseDocumentArray||this.paths[o].$isSingleNested){let u=s.slice(a+1).join(".");this.paths[o].schema.virtual(u,e);break}else if(this.paths[o].$isSchemaMap){let u=s.slice(a+2).join(".");this.paths[o].$__schemaType.schema.virtual(u,e);break}o+="."+s[a+1]}return i}let r=this.virtuals,n=t.split(".");if(this.pathType(t)==="real")throw new Error('Virtual path "'+t+'" conflicts with a real path in the schema');if(r[t]=n.reduce(function(i,s,o){return i[s]||(i[s]=o===n.length-1?new wJ(e,t):{}),i[s]},this.tree),e&&e.applyToArray&&n.length>1){let i=this.path(n.slice(0,-1).join("."));if(i&&i.$isMongooseArray)return i.virtual(n[n.length-1],e);throw new gh(`Path "${i}" is not an array`)}return r[t]};Le.prototype.virtualpath=function(t){return Object.hasOwn(this.virtuals,t)?this.virtuals[t]:null};Le.prototype.remove=function(t){return typeof t=="string"&&(t=[t]),Array.isArray(t)&&t.forEach(function(e){if(!(this.path(e)==null&&!this.nested[e])){if(this.nested[e]){let r=Object.keys(this.paths).concat(Object.keys(this.nested));for(let n of r)n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],vJ(this,n));delete this.nested[e],vJ(this,e);return}delete this.paths[e],vJ(this,e),this._removeEncryptedField(e)}},this),this};function vJ(t,e){let r=e.split("."),n=r.pop(),i=t.tree;for(let s of r)i=i[s];delete i[n]}Le.prototype.removeVirtual=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){for(let e of t)if(this.virtuals[e]==null)throw new gh(`Attempting to remove virtual "${e}" that does not exist.`);for(let e of t)delete this.paths[e],delete this.virtuals[e],e.indexOf(".")!==-1?Bx.unset(e,this.tree):delete this.tree[e]}return this};Le.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||Object.hasOwn(t.prototype,"$isMongooseModelPrototype")||Object.hasOwn(t.prototype,"$isMongooseDocumentPrototype")?this:(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach(function(r){if(r.match(/^(length|name|prototype|constructor|__proto__)$/))return;let n=Object.getOwnPropertyDescriptor(t,r);Object.hasOwn(n,"value")&&this.static(r,n.value)},this),Object.getOwnPropertyNames(t.prototype).forEach(function(r){if(r.match(/^(constructor)$/))return;let n=Object.getOwnPropertyDescriptor(t.prototype,r);e||typeof n.value=="function"&&this.method(r,n.value),typeof n.get=="function"&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),typeof n.set=="function"&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))},this),this)};Le.prototype._getSchema=function(t){let e=this,r=e.path(t),n=[];if(r)return r.$fullPath=t,r;function i(o,a){let u=o.length+1,c,l;for(;u--;)if(l=o.slice(0,u).join("."),c=a.path(l),c){if(n.push(l),c.caster){if(c.caster instanceof bh.Mixed)return c.caster.$fullPath=n.join("."),c.caster;if(u!==o.length){if(u+1===o.length&&c.$embeddedSchemaType&&(o[u]==="$"||qx(o[u])))return c.$embeddedSchemaType;if(c.schema){let d;return o[u]==="$"||qx(o[u])?u+1===o.length?c.$embeddedSchemaType:(d=i(o.slice(u+1),c.schema),d&&(d.$parentSchemaDocArray=d.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),d):(d=i(o.slice(u),c.schema),d&&(d.$parentSchemaDocArray=d.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),d)}}}else if(c.$isSchemaMap){if(u>=o.length)return c;if(u+1>=o.length||c.$__schemaType instanceof bh.Mixed)return c.$__schemaType;if(c.$__schemaType.schema!=null)return i(o.slice(u+1),c.$__schemaType.schema)}return c.$fullPath=n.join("."),c}}let s=t.split(".");for(let o=0;o<s.length;++o)(s[o]==="$"||qx(s[o]))&&(s[o]="0"),g3t.test(s[o])&&(s[o]="$");return i(s,e)};Le.prototype._getPathType=function(t){let e=this;if(e.path(t))return"real";function n(i,s){let o=i.length+1,a,u;for(;o--;){if(u=i.slice(0,o).join("."),a=s.path(u),a)return a.caster?a.caster instanceof bh.Mixed?{schema:a,pathType:"mixed"}:o!==i.length&&a.schema?i[o]==="$"||qx(i[o])?o===i.length-1?{schema:a,pathType:"nested"}:n(i.slice(o+1),a.schema):n(i.slice(o),a.schema):{schema:a,pathType:a.$isSingleNested?"nested":"array"}:{schema:a,pathType:"real"};if(o===i.length&&s.nested[u])return{schema:s,pathType:"nested"}}return{schema:a||s,pathType:"undefined"}}return n(t.split("."),e)};Le.prototype._transformDuplicateKeyError=function(e){if(!this._duplicateKeyErrorMessagesByPath||e.code!==11e3&&e.code!==11001)return e;if(e.keyPattern!=null){let r=e.keyPattern,n=Object.keys(r);if(n.length!==1)return e;let i=n[0];return Object.hasOwn(this._duplicateKeyErrorMessagesByPath,i)?new gh(this._duplicateKeyErrorMessagesByPath[i],{cause:e}):e}return e};function qx(t){return t.startsWith("$[")&&t.endsWith("]")}Le.prototype._preCompile=function(){this.plugin(c3t,{deduplicate:!0})};Le.prototype.toJSONSchema=function(e){let r=e?.useBsonType??!1,n=r?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let i of Object.keys(this.paths)){let s=this.paths[i];if(s._presplitPath.indexOf("$*")!==-1)continue;let o=s._presplitPath.length>1,a=n;if(o)for(let l=0;l<s._presplitPath.length-1;++l){let d=s._presplitPath[l];a.properties[d]==null&&(a.properties[d]=r?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}}),a=a.properties[d]}let u=s._presplitPath[s._presplitPath.length-1],c=!1;i==="_id"?(a.required||(a.required=[]),a.required.push("_id"),c=!0):s.options.required&&typeof s.options.required!="function"&&(a.required||(a.required=[]),a.required.push(u),c=!0),a.properties[u]=s.toJSONSchema(e),s.options.enum&&(a.properties[u].enum=c?s.options.enum:[...s.options.enum,null])}return n.required.length===0&&delete n.required,n};eSe.exports=AJ=Le;Le.Types=bh=Yv();AJ.ObjectId=bh.ObjectId});var CJ=b((Syr,tSe)=>{"use strict";var v3t=Ea(),jx=class extends v3t{constructor(e,r,n,i){let s=e.map(o=>o.message).join(", ");s.length>200&&(s=s.slice(0,200)+"..."),super(`${i} failed with ${e.length} Mongoose validation errors: ${s}`),this.validationErrors=e,this.results=r,this.rawResult=n,this.operation=i}};Object.defineProperty(jx.prototype,"name",{value:"MongooseBulkWriteError"});tSe.exports=jx});var nSe=b((wyr,rSe)=>{"use strict";var S3t=qt(),$x=class extends S3t{constructor(e,r){super(e),this.errors=r}};Object.defineProperty($x.prototype,"name",{value:"SyncIndexesError"});rSe.exports=$x});var TJ=b((Ayr,iSe)=>{"use strict";iSe.exports=function t(e,r,n,i){if(e[i])return;if(e[i]=!0,!n||!n.skipTopLevel){let u=null;for(let c of r){let l=c[1]==null?null:c[1].tags;if(!Array.isArray(l)){e.plugin(c[0],c[1]);continue}u=u||new Set(e.options.pluginTags||[]),l.find(d=>u.has(d))&&e.plugin(c[0],c[1])}}if(n=Object.assign({},n),delete n.skipTopLevel,n.applyPluginsToChildSchemas!==!1)for(let u of Object.keys(e.paths)){let c=e.paths[u];c.schema!=null&&(t(c.schema,r,n,i),c.caster.prototype.$__setSchema(c.schema))}let s=e.discriminators;if(s==null)return;let o=n.applyPluginsToDiscriminators,a=Object.keys(s);for(let u of a){let c=s[u];t(c,r,{skipTopLevel:!o},i)}}});var Ux=b((Cyr,OJ)=>{"use strict";var sSe=null;OJ.exports.get=function(){return sSe};OJ.exports.set=function(t){sSe=t}});var xJ=b((Tyr,oSe)=>{"use strict";function w3t(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}oSe.exports=w3t});var uSe=b((Oyr,aSe)=>{"use strict";var A3t=qt(),Kx=class extends A3t{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(Kx.prototype,"name",{value:"CreateCollectionsError"});aSe.exports=Kx});var dSe=b((xyr,lSe)=>{"use strict";var cSe=DO().modifiedPaths;lSe.exports=function(e){let r=Object.keys(e),n={},i={};for(let s of r){if(s.startsWith("$")){cSe(e[s],"",n);continue}i[s]=e[s]}return cSe(i,"",n),n}});var IJ=b((Iyr,pSe)=>{"use strict";var C3t=dSe();pSe.exports=function(e){if(e==null)return{};let r=C3t(e);return Object.keys(r).reduce((n,i)=>{let s=i.match(/\$\[[^\]]+\]/g);if(s==null)return n;for(let o of s){let a=i.indexOf(o);if(a!==i.lastIndexOf(o))throw new Error(`Path '${i}' contains the same array filter multiple times`);n[o.substring(2,o.length-1)]=i.substring(0,a-1).replace(/\$\[[^\]]+\]/g,"0")}return n},{})}});var mSe=b((Ryr,hSe)=>{"use strict";var T3t=Gv(),fSe=ni(),O3t=uc(),x3t=IJ();hSe.exports=function(e,r,n,i,s){let o=i.indexOf(".")===-1?[i]:i.split("."),a=null,u="adhocOrUndefined";n=n||{},r=r||{};let c=s!=null&&Array.isArray(s.arrayFilters)?s.arrayFilters:[],l=x3t(r),d=0;for(let p=0;p<o.length;++p){let f=o.slice(d,p+1).join("."),h=T3t(f);if(a=e.path(h),a!=null&&(u=e.pathType(h),(a.$isSingleNested||a.$isMongooseDocumentArrayElement)&&a.schema.discriminators!=null)){let y=fSe(a,"schema.options.discriminatorKey"),E=h+"."+y,v=E.replace(/\.\d+\./,"."),w=null;E in n&&(w=n[E]),v in n&&(w=n[v]);let T=h.replace(/\.\d+$/,"");a.$isMongooseDocumentArrayElement&&fSe(n[T],"$elemMatch."+y)!=null&&(w=n[T].$elemMatch[y]);let A=f+"."+y;A in r&&(w=r[A]),E in r&&(w=r[E]);for(let M of Object.keys(l)){let I=l[M]+"."+y,F=M+"."+y;if(I===v){let B=c.find(K=>Object.hasOwn(K,F));B!=null&&(w=B[F])}}if(w==null)continue;let C=O3t(a.caster.discriminators,w),x=C&&C.schema;if(x==null)continue;let R=o.slice(p+1).join(".");if(a=x.path(R),e=x,d=p+1,a!=null){u=x._getPathType(R);break}}}return{type:u,schematype:a}}});var gSe=b((Dyr,ySe)=>{"use strict";var I3t=ch();ySe.exports=function(e,r,n,i,s,o,a){if(e==null||!e.options||!e.options.immutable)return!1;let u=e.options.immutable;if(typeof u=="function"&&(u=u.call(a,a)),!u||o&&o.overwriteImmutable||r===!1)return!1;if(r==="throw")throw new I3t(null,`Field ${s} is immutable and strict = 'throw'`);return delete n[i],!0}});var ESe=b((kyr,_Se)=>{"use strict";var R3t=ni();_Se.exports=function(e,r,n){if(r==null)return;let i=Object.keys(r);for(let s of i){let o=s.startsWith("$");if(s==="$set"){let a=Object.keys(r[s]);for(let u of a)bSe(e,r[s],u,r,n)}else o||bSe(e,r,s,r,n)}};function bSe(t,e,r,n,i){let s=t.path(r);if(s==null)return;let o=R3t(s,"options.immutable",null);o!=null&&(typeof o=="function"&&(o=o.call(i,i)),o&&(n.$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[r]=e[r],delete e[r]))}});var DJ=b((Myr,vSe)=>{"use strict";var RJ=B0();vSe.exports=function(e,r,n){if(r.indexOf(".")===-1){if(RJ.has(r))return;e[r]=n;return}let i=r.split("."),s=i.pop(),o=e;for(let a of i)RJ.has(a)||(o[a]==null&&(o[a]={}),o=o[a]);RJ.has(s)||(o[s]=n)}});var BJ=b((Pyr,ISe)=>{"use strict";var Vx=po(),M_=qt(),SSe=mJ(),wSe=ch(),D3t=j0(),PJ=zv(),k3t=J0(),M3t=qo(),kJ=uc(),MJ=mSe(),ASe=gSe(),P3t=ESe(),OSe=$0().schemaMixedSymbol,N3t=DJ(),P_=wt(),{internalToObjectOptions:F3t}=wl(),NJ=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);ISe.exports=function(e,r,n,i,s){if(r==null)return;if(n=n||{},Array.isArray(r)){let d=r.length;for(let p=0;p<d;++p){let f=Object.keys(r[p]);for(let h of f)r[p][h]=B3t(h,r[p][h])}return r}if(e!=null&&s!=null&&P_.hasUserDefinedProperty(s,e.options.discriminatorKey)&&typeof s[e.options.discriminatorKey]!="object"&&e.discriminators!=null){let d=s[e.options.discriminatorKey],p=kJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&P_.hasUserDefinedProperty(r,e.options.discriminatorKey)&&e.discriminators!=null){let d=r[e.options.discriminatorKey],p=kJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&r.$set!=null&&P_.hasUserDefinedProperty(r.$set,e.options.discriminatorKey)&&e.discriminators!=null){let d=r.$set[e.options.discriminatorKey],p=kJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}n.upsert&&P3t(e,r,i);let o=Object.keys(r),a=o.length,u={},c,l=!1;for(s=s||{};a--;){let d=o[a];NJ.has(d)?d==="$set"&&u.$set||(u[d]=r[d]):(u.$set||(r.$set?u.$set=r.$set:u.$set={}),u.$set[d]=r[d],o.splice(a,1),~o.indexOf("$set")||o.push("$set"))}for(a=o.length;a--;){let d=o[a];if(c=u[d],l=l||d.startsWith("$"),c!=null&&c.$__&&(c=c.toObject(F3t),u[d]=c),c&&typeof c=="object"&&!Buffer.isBuffer(c)&&NJ.has(d))xSe(e,c,d,n,i,s);else{let p="Invalid atomic update value for "+d+". Expected an object, received "+typeof c;throw new Error(p)}d.startsWith("$")&&P_.isEmptyObject(c)&&delete u[d]}return Object.keys(u).length===0&&n.upsert&&Object.keys(s).length>0?{$setOnInsert:{...s}}:u};function B3t(t,e){if(t==="$unset"){if(typeof e!="string"&&(!Array.isArray(e)||e.find(r=>typeof r!="string")))throw new M_("Invalid $unset in pipeline, must be  a string or an array of strings");return e}if(t==="$project"){if(e==null||typeof e!="object")throw new M_("Invalid $project in pipeline, must be an object");return e}if(t==="$addFields"||t==="$set"){if(e==null||typeof e!="object")throw new M_("Invalid "+t+" in pipeline, must be an object");return e}else if(t==="$replaceRoot"||t==="$replaceWith"){if(e==null||typeof e!="object")throw new M_("Invalid "+t+" in pipeline, must be an object");return e}throw new M_('Invalid update pipeline operator: "'+t+'"')}function xSe(t,e,r,n,i,s,o){let a=n.strict;o=o?o+".":"";let u=Object.keys(e),c=u.length,l=!1,d,p,f,h=null,y=a??t.options.strict;for(;c--;){if(p=u[c],f=e[p],r==="$pull"){if(d=t._getSchema(o+p),d==null){let v=MJ(t,e,s,o+p,n);v.schematype!=null&&(d=v.schematype)}if(d!=null&&d.schema!=null){e[p]=k3t(d.schema,e[p],n,i),l=!0;continue}}let E=o?o+p:p;if(t.discriminatorMapping!=null&&E===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[p]&&!n.overwriteDiscriminatorKey){if(y==="throw"){let v=new Error(`Can't modify discriminator key "`+E+'" on discriminator model');h=ty(v,i,E,h);continue}else if(y){delete e[p];continue}}if(M3t(f)==="Object"){if(d=t._getSchema(o+p),d==null){let v=MJ(t,e,s,o+p,n);v.schematype!=null&&(d=v.schematype)}if(r!=="$setOnInsert"&&ASe(d,a,e,p,o+p,n,i))continue;if(d&&d.caster&&r in FJ)if("$each"in f){l=!0;try{e[p]={$each:k_(d,f.$each,r,p,i,o+p)}}catch(v){h=ty(v,i,p,h)}f.$slice!=null&&(e[p].$slice=f.$slice|0),f.$sort&&(e[p].$sort=f.$sort),f.$position!=null&&(e[p].$position=PJ(f.$position))}else{if(d!=null&&d.$isSingleNested){let v=a??d.schema.options.strict;try{e[p]=d.castForQuery(null,f,i,{strict:v})}catch(w){h=ty(w,i,p,h)}}else try{e[p]=k_(d,f,r,p,i,o+p)}catch(v){h=ty(v,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else if(r==="$currentDate"||r in FJ&&d){try{e[p]=k_(d,f,r,p,i,o+p)}catch(v){h=ty(v,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else if(r==="$rename"){let v=new SSe(`${o}${p}.$rename`);try{e[p]=k_(v,f,r,p,i,o+p)}catch(w){h=ty(w,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else{let v=o+p,w=t._getPathType(v),T=a;if(w&&w.schema&&T==null&&(T=w.schema.options.strict),w.pathType==="undefined"){if(T==="throw")throw new wSe(v);if(T){delete e[p];continue}}l|=xSe(t,f,r,n,i,s,o+p)||P_.isObject(f)&&Object.keys(f).length===0}}else{let v=p==="$each"||p==="$or"||p==="$and"||p==="$in";if(v&&!o)throw new M_('Invalid update: Unexpected modifier "'+p+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let w=v?o:o+p;if(d=t._getSchema(w),r!=="$setOnInsert"&&ASe(d,a,e,p,o+p,n,i))continue;let T=t._getPathType(w);if(d==null){let x=MJ(t,e,s,w,n);x.schematype!=null&&(d=x.schematype,T=x.type)}let A=a;if(T&&T.schema&&a==null&&(A=T.schema.options.strict),A&&!d&&!/real|nested/.test(T.pathType)){if(A==="throw"&&t.virtuals[w]==null)throw new wSe(o+p);delete e[p]}else{if(r==="$rename"){if(e[p]==null)throw new Vx("String",e[p],`${o}${p}.$rename`);let x=new SSe(`${o}${p}.$rename`,null,null,t);e[p]=x.castForQuery(null,e[p],i);continue}try{o.length===0||p.indexOf(".")===-1?e[p]=k_(d,f,r,p,i,o+p):(A!==!1||d!=null)&&(N3t(e,p,k_(d,f,r,p,i,o+p)),delete e[p])}catch(x){h=ty(x,i,p,h)}if(Array.isArray(e[p])&&(r==="$addToSet"||r==="$push")&&p!=="$each"&&d&&d.caster&&!d.caster.$isMongooseArray&&!d.caster[OSe]&&(e[p]={$each:e[p]}),e[p]===void 0){delete e[p];continue}l=!0}}}if(h!=null)throw h;return l}function ty(t,e,r,n){if(typeof e!="object"||!e.options.multipleCastError)throw t;return n=n||new D3t,n.addError(r,t),n}var CSe={$pop:1,$inc:1},q3t={$unset:1},FJ={$push:1,$addToSet:1,$set:1,$setOnInsert:1};var TSe={$set:1,$setOnInsert:1};function k_(t,e,r,n,i,s){if(!t){if(r in CSe)try{return PJ(e)}catch{throw new Vx("number",e,s)}return e}if(t.caster&&r in FJ&&(P_.isObject(e)||Array.isArray(e))&&!TSe[r]){let a=0,u=t;for(;u.$isMongooseArray;)++a,u=u.caster;let c=0,l=e;for(;Array.isArray(l);)++c,l=l[0];let d=a-c;for(;c<a;)e=[e],++c;let p=t.applySetters(Array.isArray(e)?e:[e],i);for(let f=0;f<d;++f)p=p[0];return p}if(r in q3t)return e;if(r in CSe){if(e==null)throw new Vx("number",e,t.path);if(r==="$inc")return t.castForQuery(null,e,i);try{return PJ(e)}catch{throw new Vx("number",e,t.path)}}if(r==="$currentDate")return typeof e=="object"?{$type:e.$type}:!!e;if(NJ.has(n))return t.castForQuery(n,e,i);if(TSe[r]){let a=e!=null&&t.$isMongooseArray&&t.$fullPath!=null&&!t.$fullPath.match(/\d+$/),u=t[OSe]!=null;return a||u?t.applySetters(e,i):t.castForQuery(null,e,i)}return t.castForQuery(null,e,i)}});var qJ=b((Nyr,RSe)=>{"use strict";RSe.exports=function(e,r,n){!n||!(r&&r.upsert)||(r.overwrite?pS(e,n)||(e[n]=0):!pS(e,n)&&!pS(e?.$set,n)&&!pS(e?.$inc,n)&&!pS(e?.$setOnInsert,n)&&(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[n]=0))};function pS(t,e){return t==null||typeof t!="object"?!1:Object.hasOwn(t,e)}});var LJ=b((Fyr,kSe)=>{"use strict";var L3t=ni();kSe.exports=function(t,e,r,n){n=n||{};let i=n.setDefaultsOnInsert!=null?n.setDefaultsOnInsert:e.base.options.setDefaultsOnInsert;if(!n.upsert||i===!1)return r;let s=Object.keys(r||{}),o={},a={},u=s.length,c=!1;for(let p=0;p<u;++p)if(s[p].charAt(0)==="$"){c=!0;break}let l=Object.keys(t),d=l.length;for(let p=0;p<d;++p){let f=l[p],h=t[f];if(h&&typeof h=="object"){let y=Object.keys(h),E=y.length,v=!1;for(let w=0;w<E;++w)if(y[w].charAt(0)==="$"){v=!0;break}if(v)continue}o[f]=!0}return n&&n.overwrite&&!c||e.eachPath(function(p,f){if(f.path==="_id"&&f.options.auto)return;let h=f.getDefault(null,!0);if(typeof h>"u")return;let y=f.splitPath();y.includes("$*")||j3t(r,o,p,y,c)||(r=r||{},r.$setOnInsert=r.$setOnInsert||{},L3t(r,p)==null&&(r.$setOnInsert[p]=h),a[p]=h)}),r};function j3t(t,e,r,n,i){if(e[r])return!0;let s=n[0];for(let o=1;o<n.length;++o){if(e[s])return!0;s+="."+n[o]}if(i){for(let o in t)if(o.charAt(0)==="$"&&DSe(t[o],r,n))return!0}else if(DSe(t,r,n))return!0;return!1}function DSe(t,e,r){if(t==null||typeof t!="object")return!1;if(Object.hasOwn(t,e))return!0;let n=r[0];for(let s=1;s<r.length;++s){if(Object.hasOwn(t,n))return!0;n+="."+r[s]}let i=e+".";for(let s in t)if(s.startsWith(i))return!0;return!1}});var jJ=b((Byr,Ci)=>{"use strict";var $3t=qt(),U3t=uc(),MSe=EW(),PSe=vW(),fS=J0(),NSe=BJ(),K3t=Vn(),FSe=qJ(),{inspect:V3t}=require("util"),BSe=LJ();Ci.exports=function(e,r,n){let i,s=e.schema.get("timestamps");return typeof s?.currentTime=="function"?i=s.currentTime():i=e.base.now(),r.insertOne?o=>Ci.exports.castInsertOne(e,r.insertOne,n).then(()=>o(null),a=>o(a)):r.updateOne?o=>{try{Ci.exports.castUpdateOne(e,r.updateOne,n,i),o(null)}catch(a){o(a)}}:r.updateMany?o=>{try{Ci.exports.castUpdateMany(e,r.updateMany,n,i),o(null)}catch(a){o(a)}}:r.replaceOne?o=>{Ci.exports.castReplaceOne(e,r.replaceOne,n).then(()=>o(null),a=>o(a))}:r.deleteOne?o=>{try{Ci.exports.castDeleteOne(e,r.deleteOne),o(null)}catch(a){o(a)}}:r.deleteMany?o=>{try{Ci.exports.castDeleteMany(e,r.deleteMany),o(null)}catch(a){o(a)}}:o=>{let a=new $3t(`Invalid op passed to \`bulkWrite()\`: ${V3t(r)}`);o(a,null)}};Ci.exports.castInsertOne=async function(e,r,n){let i=N_(e,r.document),s=new i(r.document);i.schema.options.timestamps&&Gx(r,n)&&s.initializeTimestamps(),n.session!=null&&s.$session(n.session);let o=i?.schema?.options?.versionKey;return o&&s[o]==null&&(s[o]=0),r.document=s,n.skipValidation||r.skipValidation||await r.document.$validate(),r};Ci.exports.castUpdateOne=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=N_(e,r.filter),o=s.schema,a=n.strict!=null?n.strict:s.schema.options.strict,u=K3t(r.update);hS(o,r.filter);let c=Gx(r,n);if(s.schema.$timestamps!=null&&c){let p=s.schema.$timestamps.createdAt,f=s.schema.$timestamps.updatedAt;PSe(i,p,f,u,{timestamps:r.timestamps,overwriteImmutable:r.overwriteImmutable})}c&&MSe(i,u,s.schema);let l=e.base.options.setDefaultsOnInsert;return(r.setDefaultsOnInsert==null?l:r.setDefaultsOnInsert)!==!1&&BSe(r.filter,s.schema,u,{setDefaultsOnInsert:!0,upsert:r.upsert}),FSe(u,r,s.schema.options.versionKey),r.filter=fS(s.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=NSe(s.schema,u,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey,overwriteImmutable:r.overwriteImmutable},s,r.filter),r};Ci.exports.castUpdateMany=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=N_(e,r.filter),o=s.schema,a=n.strict!=null?n.strict:s.schema.options.strict,u=e.base.options.setDefaultsOnInsert;(r.setDefaultsOnInsert==null?u:r.setDefaultsOnInsert)!==!1&&BSe(r.filter,s.schema,r.update,{setDefaultsOnInsert:!0,upsert:r.upsert});let l=Gx(r,n);if(s.schema.$timestamps!=null&&l){let d=s.schema.$timestamps.createdAt,p=s.schema.$timestamps.updatedAt;PSe(i,d,p,r.update,{timestamps:r.timestamps,overwriteImmutable:r.overwriteImmutable})}l&&MSe(i,r.update,s.schema),hS(o,r.filter),FSe(r.update,r,s.schema.options.versionKey),r.filter=fS(s.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=NSe(s.schema,r.update,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey,overwriteImmutable:r.overwriteImmutable},s,r.filter)};Ci.exports.castReplaceOne=async function(e,r,n){let i=N_(e,r.filter),s=i.schema,o=n.strict!=null?n.strict:i.schema.options.strict;hS(s,r.filter),r.filter=fS(i.schema,r.filter,{strict:o,upsert:r.upsert});let a=new i(r.replacement,o,!0);i.schema.options.timestamps&&Gx(r,n)&&a.initializeTimestamps(),n.session!=null&&a.$session(n.session);let u=i?.schema?.options?.versionKey;if(u&&a[u]==null&&(a[u]=0),r.replacement=a,n.skipValidation||r.skipValidation){r.replacement=r.replacement.toBSON();return}await r.replacement.$validate(),r.replacement=r.replacement.toBSON()};Ci.exports.castDeleteOne=function(e,r){let n=N_(e,r.filter),i=n.schema;hS(i,r.filter),r.filter=fS(n.schema,r.filter)};Ci.exports.castDeleteMany=function(e,r){let n=N_(e,r.filter),i=n.schema;hS(i,r.filter),r.filter=fS(n.schema,r.filter)};Ci.exports.cast={insertOne:Ci.exports.castInsertOne,updateOne:Ci.exports.castUpdateOne,updateMany:Ci.exports.castUpdateMany,replaceOne:Ci.exports.castReplaceOne,deleteOne:Ci.exports.castDeleteOne,deleteMany:Ci.exports.castDeleteMany};function hS(t,e){t!=null&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function N_(t,e){let r=t.schema.options.discriminatorKey;return e!=null&&Object.hasOwn(e,r)&&(t=U3t(t.discriminators,e[r])||t),t}function Gx(t,e){let r=t.timestamps,n=e.timestamps;return r??n??!0}});var $J=b((qyr,qSe)=>{"use strict";qSe.exports=function(e,r,n){return e.mongoose=e.mongoose||{},e.mongoose.validationErrors=r,e.mongoose.results=n,e}});var VJ=b((Lyr,USe)=>{"use strict";var G3t=hz(),KJ=require("events").EventEmitter,H3t=ph(),Ti=b3(),LSe=CJ(),oi=Ea(),z3t=wz(),W3t=nSe(),J3t=TJ(),Y3t=Vn(),Q3t=Ux(),X3t=ni(),Z3t=xJ(),jSe=Vu(),evt=wt(),tvt=uSe(),Hx=jJ(),{modelSymbol:zx}=nt(),rvt=$z(),UJ=$J(),nvt=nt().arrayAtomicsSymbol,mS=nt().sessionNewDocuments,ivt=globalThis.Date,svt=["MONGODB-X509"];function ot(t){this.base=t,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=Ti,this._readyState=Ti.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof t>"u"||!t.connections.length?this.id=0:this.id=t.nextConnectionId,this._queue=[]}Object.setPrototypeOf(ot.prototype,KJ.prototype);Object.defineProperty(ot.prototype,"readyState",{get:function(){return this._readyState===Ti.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS=="number"&&ivt.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2?Ti.disconnected:this._readyState},set:function(t){if(!(t in Ti))throw new Error("Invalid connection state: "+t);if(this._readyState!==t){this._readyState=t;for(let e of this.otherDbs)e.readyState=t;Ti.connected===t&&(this._hasOpened=!0),this.emit(Ti[t])}}});ot.prototype.get=function(e){return Object.hasOwn(this.config,e)?this.config[e]:X3t(this.options,e)};ot.prototype.set=function(e,r){return Object.hasOwn(this.config,e)?(this.config[e]=r,r):(this.options=this.options||{},this.options[e]=r,r)};ot.prototype.collections;ot.prototype.name;ot.prototype.models;ot.prototype.id;Object.defineProperty(ot.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(ot.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ot.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ot.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ot.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});ot.prototype.db;ot.prototype.client;ot.prototype.config;ot.prototype.createCollection=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new oi("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(e,r)};ot.prototype.bulkWrite=async function(e,r){await this._waitForConnect(),r=r||{};let n=r.ordered==null?!0:r.ordered,i=this.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&i?.session!=null&&(r={...r,session:i.session});let s=this.base.now(),o=null;if(n){let a=[];for(let u of e){if(typeof u.model!="string"&&!u.model?.[zx])throw new oi("Must specify model in Connection.prototype.bulkWrite() operations");let c=u.model[zx]?u.model:this.model(u.model);if(u.name==null)throw new oi("Must specify operation name in Connection.prototype.bulkWrite()");if(!Object.hasOwn(Hx.cast,u.name))throw new oi(`Unrecognized bulkWrite() operation name ${u.name}`);await Hx.cast[u.name](c,u,r,s),a.push({...u,namespace:c.namespace()})}o=await this.client.bulkWrite(a,r)}else{let a=[],u=[],c=[],l=[],d=[];for(let f=0;f<e.length;++f){let h=e[f];if(typeof h.model!="string"&&!h.model?.[zx]){let v=new oi("Must specify model in Connection.prototype.bulkWrite() operations");c.push({index:f,error:v}),d[f]=v;continue}let y;try{y=h.model[zx]?h.model:this.model(h.model)}catch(v){c.push({index:f,error:v});continue}if(h.name==null){let v=new oi("Must specify operation name in Connection.prototype.bulkWrite()");c.push({index:f,error:v}),d[f]=v;continue}if(!Object.hasOwn(Hx.cast,h.name)){let v=new oi(`Unrecognized bulkWrite() operation name ${h.name}`);c.push({index:f,error:v}),d[f]=v;continue}let E=null;try{E=Hx.cast[h.name](y,h,r,s)}catch(v){c.push({index:f,error:v}),d[f]=v;continue}rvt(E)?l.push(E.then(()=>{a.push({...h,namespace:y.namespace()}),u.push(f)},v=>{c.push({index:f,error:v}),d[f]=v})):(a.push({...h,namespace:y.namespace()}),u.push(f))}if(l.length>0&&await Promise.all(l),c=c.sort((f,h)=>f.index-h.index).map(f=>f.error),a.length===0){if(r.throwOnValidationError&&c.length)throw new LSe(c,d,h,"bulkWrite");let f=this.base.driver.get().BulkWriteResult,h=new f(Z3t(),!1);return UJ(h,c,d)}let p;[o,p]=await this.client.bulkWrite(a,r).then(f=>[f,null]).catch(f=>[null,f]);for(let f=0;f<u.length;++f)d[u[f]]=null;if(p&&c.length>0&&(UJ(p,c,d),p.mongoose=p.mongoose||{},p.mongoose.validationErrors=c),c.length>0){if(r.throwOnValidationError)throw new LSe(c,d,o,"bulkWrite");UJ(o,c,d)}}return o};ot.prototype.createCollections=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.createCollection({})}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new tvt(s,n)}return r};ot.prototype.withSession=async function(e){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(e)};ot.prototype.startSession=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new oi("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(e)};ot.prototype.transaction=function(e,r){return this.startSession().then(n=>(n[mS]=new Map,n.withTransaction(()=>ovt(e,n,this.base),r).then(i=>(delete n[mS],i)).catch(i=>{throw delete n[mS],i}).finally(()=>{n.endSession().catch(()=>{})})))};async function ovt(t,e,r){try{return r.transactionAsyncLocalStorage==null?await t(e):await new Promise(i=>{r.transactionAsyncLocalStorage.run({session:e},()=>i(t(e)))})}catch(n){throw avt(e),n}}function avt(t){for(let e of t[mS].keys()){let r=t[mS].get(e);Object.hasOwn(r,"isNew")&&(e.$isNew=r.isNew),Object.hasOwn(r,"versionKey")&&e.set(e.schema.options.versionKey,r.versionKey),r.modifiedPaths.length>0&&e.$__.activePaths.states.modify==null&&(e.$__.activePaths.states.modify={});for(let n of r.modifiedPaths){let i=e.$__.activePaths.paths[n];i!=null&&delete e.$__.activePaths[i][n],e.$__.activePaths.paths[n]="modify",e.$__.activePaths.states.modify[n]=!0}for(let n of r.atomics.keys()){let i=e.$__getValue(n);i!=null&&(i[nvt]=r.atomics.get(n))}}}ot.prototype.dropCollection=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new oi("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(e)};ot.prototype._waitForConnect=async function(e){if((this.readyState===Ti.connecting||this.readyState===Ti.disconnected)&&this._shouldBufferCommands()){let r=this._getBufferTimeoutMS(),n=null,i=!1,s={},o=new Promise(a=>{s.fn=a,this._queue.push(s)});if(e?await o:await Promise.race([o,new Promise(a=>{n=setTimeout(()=>{i=!0,a()},r)})]),i){let a=this._queue.indexOf(s);a!==-1&&this._queue.splice(a,1);let u="Connection operation buffering timed out after "+r+"ms";throw new oi(u)}else n!=null&&clearTimeout(n)}};ot.prototype._getBufferTimeoutMS=function(){return this.config.bufferTimeoutMS!=null?this.config.bufferTimeoutMS:this.base!=null&&this.base.get("bufferTimeoutMS")!=null?this.base.get("bufferTimeoutMS"):1e4};ot.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};ot.prototype.listDatabases=async function(){throw new oi("listDatabases() not implemented by driver")};ot.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new oi("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let e of Object.values(this.models))delete e.$init;return this.db.dropDatabase()};ot.prototype._shouldBufferCommands=function(){return this.config.bufferCommands!=null?this.config.bufferCommands:this.base.get("bufferCommands")!=null?this.base.get("bufferCommands"):!0};ot.prototype.error=function(e,r){return r?(r(e),null):(this.listeners("error").length>0&&this.emit("error",e),Promise.reject(e))};ot.prototype.onOpen=function(){this.readyState=Ti.connected;for(let t of this._queue)t.fn.apply(t.ctx,t.args);this._queue=[];for(let t in this.collections)Object.hasOwn(this.collections,t)&&this.collections[t].onOpen();this.emit("open")};ot.prototype.openUri=async function(e,r){if((this.readyState===Ti.connecting||this.readyState===Ti.connected)&&this._connectionString===e)return this;this._closeCalled=!1;let n=!1;r&&"_fireAndForget"in r&&(n=r._fireAndForget,delete r._fireAndForget);try{uvt.apply(arguments)}catch(i){throw n||(this.$initialConnection=Promise.reject(i)),i}this.$initialConnection=this.createClient(e,r).then(()=>this).catch(i=>{throw this.readyState=Ti.disconnected,this.listeners("error").length>0&&jSe(()=>this.emit("error",i)),i});for(let i of Object.values(this.models))i.init().catch(function(){});if(n)return this;try{await this.$initialConnection}catch(i){throw $Se(i)}return this};ot.prototype.on=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),KJ.prototype.on.call(this,e,r)};ot.prototype.once=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),KJ.prototype.once.call(this,e,r)};function uvt(t,e,r){if(typeof e=="function"&&r==null)throw new oi("Connection.prototype.openUri() no longer accepts a callback");if(typeof r=="function")throw new oi("Connection.prototype.openUri() no longer accepts a callback")}function $Se(t){if(t?.name==="MongoServerSelectionError"){let e=t;t=new z3t,t.assimilateError(e)}return t}ot.prototype.destroy=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new oi("Connection.prototype.destroy() no longer accepts a callback");return e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._close(e,!0)};ot.prototype.close=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new oi("Connection.prototype.close() no longer accepts a callback");e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._lastHeartbeatAt!=null&&(this._lastHeartbeatAt=null);for(let r of Object.values(this.models))delete r.$init;return this._close(e,!1)};ot.prototype._close=async function(e,r){let n=this,i=this._closeCalled;this._closeCalled=!0,this._destroyCalled=r,this.client!=null&&(this.client._closeCalled=!0,this.client._destroyCalled=r);let s=this;switch(this.readyState){case Ti.disconnected:r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),i||(await this.doClose(e),this.onClose(e));break;case Ti.connected:this.readyState=Ti.disconnecting,await this.doClose(e),r&&n.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),this.onClose(e);break;case Ti.connecting:return new Promise((o,a)=>{let u=()=>{this.removeListener("open",u),this.removeListener("error",u),r?this.destroy(e).then(o,a):this.close(e).then(o,a)};this.once("open",u),this.once("error",u)});case Ti.disconnecting:return new Promise(o=>{this.once("close",()=>{r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),o()})})}return this};ot.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};ot.prototype.onClose=function(e){this.readyState=Ti.disconnected;for(let n in this.collections)Object.hasOwn(this.collections,n)&&this.collections[n].onClose(e);this.emit("close",e);let r=typeof e=="object"&&e!==null?e.force:e;for(let n of this.otherDbs)this._destroyCalled?n.destroy({force:r,skipCloseClient:!0}):n.close({force:r,skipCloseClient:!0})};ot.prototype.collection=function(t,e){let r={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};e=Object.assign({},r,e?Y3t(e):{}),e.$wasForceClosed=this.$wasForceClosed;let n=this.base&&this.base.__driver&&this.base.__driver.Collection||Q3t.get().Collection;return t in this.collections||(this.collections[t]=new n(t,this,e)),this.collections[t]};ot.prototype.plugin=function(t,e){return this.plugins.push([t,e]),this};ot.prototype.model=function(e,r,n,i){if(!(this instanceof ot))throw new oi("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let s;if(typeof e=="function"&&(s=e,e=s.name),typeof r=="string"&&(n=r,r=!1),evt.isObject(r)&&(r.instanceOfSchema?r instanceof this.base.Schema||(r=r._clone(this.base.Schema)):r=new H3t(r)),r&&!r.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let o={cache:!1,overwriteModels:this.base.options.overwriteModels},a=Object.assign(o,i,{connection:this});if(this.models[e]&&!n&&a.overwriteModels!==!0){if(r&&r.instanceOfSchema&&r!==this.models[e].schema)throw new oi.OverwriteModelError(e);return this.models[e]}let u;if(r&&r.instanceOfSchema)return J3t(r,this.plugins,null,"$connectionPluginsApplied"),u=this.base._model(s||e,r,n,a),this.models[e]||(this.models[e]=u),u.init().catch(function(){}),u;if(this.models[e]&&n)return u=this.models[e],r=u.prototype.schema,u.__subclass(this,r,n);if(arguments.length===1){if(u=this.models[e],!u)throw new oi.MissingSchemaError(e);return u}if(!u)throw new oi.MissingSchemaError(e);return this===u.prototype.db&&(!n||n===u.collection.name)?(this.models[e]||(this.models[e]=u),u):(this.models[e]=u.__subclass(this,r,n),this.models[e])};ot.prototype.deleteModel=function(e){if(typeof e=="string"){let r=this.model(e);if(r==null)return this;let n=r.collection.name;delete this.models[e],delete this.collections[n],this.emit("deleteModel",r)}else if(e instanceof RegExp){let r=e,n=this.modelNames();for(let i of n)r.test(i)&&this.deleteModel(i)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+e+'"');return this};ot.prototype.watch=function(e,r){let n=s=>{jSe(()=>{if(this.readyState===Ti.connecting)this.once("open",function(){let o=this.db.watch(e,r);s(null,o)});else{let o=this.db.watch(e,r);s(null,o)}})};return new G3t(n,e,r)};ot.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(e){throw $Se(e)}};ot.prototype.modelNames=function(){return Object.keys(this.models)};ot.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};ot.prototype.authMechanismDoesNotRequirePassword=function(){return this.options&&this.options.auth?svt.indexOf(this.options.auth.authMechanism)>=0:!0};ot.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())};ot.prototype.getClient=function(){return this.client};ot.prototype.setClient=function(){throw new oi("Connection#setClient not implemented by driver")};ot.prototype.createClient=function(){throw new oi("Connection#createClient not implemented by driver")};ot.prototype.syncIndexes=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.syncIndexes(e)}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new W3t(s,n)}return r};ot.STATES=Ti;USe.exports=ot});var GJ=b((jyr,cvt)=>{cvt.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.22.0",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{bson:"^6.10.4",kareem:"2.6.3",mongodb:"~6.20.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.53.0","@babel/core":"7.28.5","@babel/preset-env":"7.28.5","@mongodb-js/mongodb-downloader":"^1.0.0","@typescript-eslint/eslint-plugin":"^8.19.1","@typescript-eslint/parser":"^8.19.1",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","assert-browserify":"2.0.0","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.1.2","crypto-browserify":"3.12.1",dox:"1.0.0",eslint:"8.57.1","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.18.1",marked:"15.x",mkdirp:"^3.0.1",mocha:"11.7.4",moment:"2.30.1","mongodb-memory-server":"10.3.0","mongodb-runner":"^6.0.0",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"21.0.0","stream-browserify":"3.0.0",tsd:"0.33.0",typescript:"5.9.3",uuid:"11.1.0",webpack:"5.102.1"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:prepare:publish:8x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/8.x && mv ./tmp ./docs/8.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","ts-benchmark:local":"node ./scripts/create-tarball && cd ./benchmarks/typescript/simple && rm -rf ./node_modules && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var VSe=b(($yr,KSe)=>{"use strict";var lvt=Vn(),dvt=Ea();function pvt(t,e){let r=e||{},n=r.readPreference?r.readPreference:yvt(t),i=lvt(r);return n&&n!=="primary"&&n!=="primaryPreferred"?fvt(n,i):i}function fvt(t,e){if(hvt(e)&&mvt(t))bvt();else return gvt(e)}function hvt(t){let e=t.config&&t.config.autoIndex,{autoCreate:r,autoIndex:n}=t;return!!(e||r||n)}function mvt(t){return t==="secondary"||t==="secondaryPreferred"}function yvt(t){let r=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(t);return r?r[1]:null}function gvt(t){return t.config={autoIndex:!1},t.autoCreate=!1,t.autoIndex=!1,t}function bvt(){throw new dvt('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}KSe.exports=pvt});var HSe=b(GSe=>{"use strict";GSe.setTimeout=setTimeout});var YSe=b((Kyr,JSe)=>{"use strict";var zSe=VJ(),ry=Ea(),Ta=b3(),WSe=x0(),_vt=GJ(),Evt=VSe(),vvt=HSe().setTimeout,Svt=wt(),wvt=ph();function Il(){zSe.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}Il.STATES=Ta;Object.setPrototypeOf(Il.prototype,zSe.prototype);Il.prototype.useDb=function(t,e){if(e=e||{},e.useCache&&this.relatedDbs[t])return this.relatedDbs[t];let r=new this.constructor;r.name=t,r.base=this.base,r.collections={},r.models={},r.replica=this.replica,r.config=Object.assign({},this.config,r.config),r.name=this.name,r.options=this.options,r._readyState=this._readyState,r._closeCalled=this._closeCalled,r._hasOpened=this._hasOpened,r._listening=!1,r._parent=this,r.host=this.host,r.port=this.port,r.user=this.user,r.pass=this.pass;let n=this;r.client=n.client,this.db&&this._readyState===Ta.connected?i():this._queue.push({fn:i});function i(){r.client=n.client;let s={};Object.hasOwn(e,"noListener")&&(s.noListener=e.noListener),r.db=n.client.db(t,s),r._lastHeartbeatAt=n._lastHeartbeatAt,r.onOpen()}return r.name=t,e.noListener!==!0&&this.otherDbs.push(r),r.otherDbs.push(this),e&&e.useCache&&(this.relatedDbs[r.name]=r,r.relatedDbs=this.relatedDbs),r};Il.prototype.aggregate=function(e,r){return new this.base.Aggregate(null,this).append(e).option(r??{})};Il.prototype.removeDb=function(e){let r=this.otherDbs.filter(n=>n.name===e);if(!r.length)throw new ry(`No connections to database "${e}" found`);for(let n of r)n._closeCalled=!0,n._destroyCalled=!0,n._readyState=Ta.disconnected,n.$wasForceClosed=!0;delete this.relatedDbs[e],this.otherDbs=this.otherDbs.filter(n=>n.name!==e)};Il.prototype.doClose=async function(e){if(this.client==null)return this;let r=!1;return e!=null&&typeof e=="object"&&(r=e.skipCloseClient,e=e.force),r?this:(await this.client.close(e),await new Promise(n=>vvt(n,1)),this)};Il.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};Il.prototype.createClient=async function(e,r){if(typeof e!="string")throw new ry(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof e}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new ry("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if((this.readyState===Ta.connecting||this.readyState===Ta.connected)&&this._connectionString!==e)throw new ry("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections");if(r=Evt(e,r),r){let a=r.config&&r.config.autoIndex!=null?r.config.autoIndex:r.autoIndex;a!=null&&(this.config.autoIndex=a!==!1,delete r.config,delete r.autoIndex),"autoCreate"in r&&(this.config.autoCreate=!!r.autoCreate,delete r.autoCreate),"sanitizeFilter"in r&&(this.config.sanitizeFilter=r.sanitizeFilter,delete r.sanitizeFilter),"autoSearchIndex"in r&&(this.config.autoSearchIndex=r.autoSearchIndex,delete r.autoSearchIndex),"bufferTimeoutMS"in r&&(this.config.bufferTimeoutMS=r.bufferTimeoutMS,delete r.bufferTimeoutMS),(r.user||r.pass)&&(r.auth=r.auth||{},r.auth.username=r.user,r.auth.password=r.pass,this.user=r.user,this.pass=r.pass),delete r.user,delete r.pass,r.bufferCommands!=null&&(this.config.bufferCommands=r.bufferCommands,delete r.bufferCommands)}else r={};this._connectionOptions=r;let n=r.dbName;n!=null&&(this.$dbName=n),delete r.dbName,Svt.hasUserDefinedProperty(r,"driverInfo")||(r.driverInfo={name:"Mongoose",version:_vt.version});let{schemaMap:i,encryptedFieldsMap:s}=this._buildEncryptionSchemas();if((Object.keys(i).length>0||Object.keys(s).length)&&!r.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");Object.keys(i).length>0&&(r.autoEncryption.schemaMap=i),Object.keys(s).length>0&&(r.autoEncryption.encryptedFieldsMap=s),this.readyState=Ta.connecting,this._connectionString=e;let o;try{o=new WSe.MongoClient(e,r)}catch(a){throw this.readyState=Ta.disconnected,a}this.client=o,o.setMaxListeners(0),await o.connect(),HJ(this,o,r,n);for(let a of this.otherDbs)HJ(a,o,{},a.name);return this};Il.prototype._buildEncryptionSchemas=function(){let t={},e={},r=Object.values(this.models).filter(s=>s.schema._hasEncryptedFields());for(let s of r){let{schema:o,collection:{collectionName:a}}=s,u=`${this.$dbName}.${a}`,c=o.encryptionType()==="csfle"?e:t;if(c[u]??=new wvt({},{encryptionType:o.encryptionType()}),o.discriminatorMapping&&!o.discriminatorMapping.isRoot){let d=o._baseSchema;o.eachPath(p=>{if(!d.path(p)&&c[u]._hasEncryptedField(p))throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${p}`)})}c[u].add(o)}let n=Object.fromEntries(Object.entries(e).map(([s,o])=>[s,o._buildSchemaMap()])),i=Object.fromEntries(Object.entries(t).map(([s,o])=>[s,o._buildEncryptedFields()]));return{schemaMap:n,encryptedFieldsMap:i}};Il.prototype.setClient=function(e){if(!(e instanceof WSe.MongoClient))throw new ry("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==Ta.disconnected)throw new ry("Cannot call `setClient()` on a connection that is already connected.");if(e.topology==null)throw new ry("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=e.s.url,HJ(this,e,{},e.s.options.dbName);for(let r of Object.values(this.models))r.init().catch(function(){});return this};function HJ(t,e,r,n){let i=n!=null?e.db(n):e.db();t.db=i,t.client=e,t.host=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].host||void 0,t.port=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].port||void 0,t.name=n??i.databaseName,t._closeCalled=e._closeCalled;let s=()=>{t.readyState!==Ta.connected&&(t.readyState=Ta.connected,t.emit("reconnect"),t.emit("reconnected"),t.onOpen())},o=e&&e.topology&&e.topology.description&&e.topology.description.type||"";o==="Single"?e.on("serverDescriptionChanged",a=>{a.newDescription.type==="Unknown"?t.readyState=Ta.disconnected:s()}):o.startsWith("ReplicaSet")&&e.on("topologyDescriptionChanged",a=>{let u=a.newDescription;t.readyState===Ta.connected&&u.type!=="ReplicaSetWithPrimary"?t.readyState=Ta.disconnected:t.readyState===Ta.disconnected&&u.type==="ReplicaSetWithPrimary"&&s()}),t._lastHeartbeatAt=null,e.on("serverHeartbeatSucceeded",()=>{t._lastHeartbeatAt=Date.now();for(let a of t.otherDbs)a._lastHeartbeatAt=t._lastHeartbeatAt}),r.monitorCommands&&(e.on("commandStarted",a=>t.emit("commandStarted",a)),e.on("commandFailed",a=>t.emit("commandFailed",a)),e.on("commandSucceeded",a=>t.emit("commandSucceeded",a))),t.onOpen();for(let a in t.collections)Object.hasOwn(t.collections,a)&&t.collections[a].onOpen()}JSe.exports=Il});var QSe=b(yS=>{"use strict";yS.BulkWriteResult=cfe();yS.Collection=tbe();yS.Connection=YSe();yS.ClientEncryption=x0().ClientEncryption});var ZSe=b((Gyr,XSe)=>{"use strict";var Avt=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","skipOriginalStackTraces","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);XSe.exports=Avt});var twe=b((Hyr,ewe)=>{"use strict";var Cvt=qt(),Wx=class extends Cvt{constructor(e){let r=e.map(n=>n.message).join(", ");r.length>50&&(r=r.slice(0,50)+"..."),super(`eachAsync() finished with ${e.length} errors: ${r}`),this.errors=e}};Object.defineProperty(Wx.prototype,"name",{value:"EachAsyncMultiError"});ewe.exports=Wx});var WJ=b((zyr,nwe)=>{"use strict";var Tvt=twe(),zJ=Vu();nwe.exports=async function(e,r,n){let i=n.parallel||1,s=n.batchSize,o=n.signal,a=n.continueOnError,u=[],c=Ovt(),l=!1;return new Promise((f,h)=>{if(o!=null){if(o.aborted)return f(null);o.addEventListener("abort",()=>(l=!0,f(null)),{once:!0})}if(s!=null){if(typeof s!="number")throw new TypeError("batchSize must be a number");if(Number.isInteger(s)){if(s<1)throw new TypeError("batchSize must be at least 1")}else throw new TypeError("batchSize must be an integer")}d((y,E)=>{if(y!=null)return h(y);f(E)})});function d(f){let h=0,y=0,E=null;for(let w=0;w<i;++w)c(v());function v(){let w=[],T=!1;return A;function A(C){if(T||l)return C();if(E)return C();e(function(x,R){if(E!=null)return C();if(x!=null)if(x.name==="MongoCursorExhaustedError")R=null;else if(a)u.push(x);else return E=x,f(x),C();if(R==null){if(T=!0,h<=0){let F=a?rwe(u):E;f(F)}else s&&w.length&&p(w,y++,I);return C()}if(++h,zJ(()=>C()),s&&w.push(R),s&&w.length!==s){zJ(()=>c(A));return}let M=s?w:R;function I(F){if(s?(h-=w.length,w=[]):--h,F!=null)if(a)u.push(F);else return E=F,f(F);if((T||l)&&h<=0){let B=a?rwe(u):E;return f(B)}zJ(()=>c(A))}p(M,y++,I)})}}}function p(f,h,y){let E;try{E=r(f,h)}catch(v){return y(v)}E&&typeof E.then=="function"?E.then(function(){y(null)},function(v){y(v||new Error("`eachAsync()` promise rejected without error"))}):y(null)}};function Ovt(){let t=[],e=null,r=0;return function(s){if(e===null&&t.length===0)return e=r++,s(n);t.push(s)};function n(){t.length!==0?(e=r++,t.shift()(n)):e=null}}function rwe(t){return t.length===0?null:new Tvt(t)}});var dwe=b((Wyr,lwe)=>{"use strict";var gS=qt(),owe=require("stream").Readable,xvt=WJ(),awe=Bv(),Ivt=q0(),JJ=Vu(),{once:Rvt}=require("events"),uwe=require("util");function Oa(t){owe.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=t,this._closed=!1;let e=t.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options={},e.hooks.execPre("find",t,r=>{if(r!=null){if(r instanceof Ivt.skipWrappedFunction){let n=r.args[0];if(n!=null&&(!Array.isArray(n)||n.length)){let i=new gS('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+uwe.inspect(n)+'".');this._markError(i),this.listeners("error").length>0&&this.emit("error",i);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(r),this.listeners("error").length>0&&this.emit("error",r);return}Object.assign(this.options,t._optionsForExec()),this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(this.options.transform),this.options.batchSize&&(this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),t._mongooseOptions._asyncIterator&&(this._mongooseOptions._asyncIterator=!0),e.collection._shouldBufferCommands()&&e.collection.buffer?e.collection.queue.push([()=>iwe(t,this)]):iwe(t,this)})}uwe.inherits(Oa,owe);function iwe(t,e){try{let r=t.model.collection.find(t._conditions,e.options);e.cursor=r,e.emit("cursor",r)}catch(r){e._markError(r),e.listeners("error").length>0&&e.emit("error",e._error)}}Oa.prototype._read=function(){Qx(this,(t,e)=>{if(t)return this.emit("error",t);if(!e){this.push(null),this.cursor.close(function(r){if(r)return this.emit("error",r)});return}this.push(e)})};Oa.prototype.getDriverCursor=async function(){return this.cursor?this.cursor:(await Rvt(this,"cursor"),this.cursor)};Object.defineProperty(Oa.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Oa.prototype._markError=function(t){return this._error=t,this};Oa.prototype.close=async function(){if(typeof arguments[0]=="function")throw new gS("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}};Oa.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};Oa.prototype.rewind=function(){return cwe(this,()=>{this.cursor.rewind()}),this};Oa.prototype.next=async function(){if(typeof arguments[0]=="function")throw new gS("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new gS("Cannot call `next()` on a closed cursor");return new Promise((e,r)=>{Qx(this,function(n,i){if(n)return r(n);e(i)})})};Oa.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new gS("QueryCursor.prototype.eachAsync() no longer accepts a callback");return typeof e=="function"&&(e={}),e=e||{},xvt(r=>Qx(this,r),t,e)};Oa.prototype.options;Oa.prototype.addCursorFlag=function(t,e){return cwe(this,()=>{this.cursor.addCursorFlag(t,e)}),this};Symbol.asyncIterator!=null&&(Oa.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this});function Qx(t,e){let r=e;if(r=function(n,i){return n?e(n):i===null?t._mongooseOptions._asyncIterator?e(null,{done:!0}):e(null,null):(t._transforms.length&&i!==null&&(i=t._transforms.reduce(function(s,o){return o.call(t,s)},i)),t._mongooseOptions._asyncIterator?e(null,{value:i,done:!1}):e(null,i))},t._error)return JJ(function(){r(t._error)});if(t.skipped)return JJ(()=>r(null,null));if(t.cursor)if(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=awe.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1){if(t._batchDocs&&t._batchDocs.length)return Jx(t,t._batchDocs.shift(),t._pop,r);if(t._batchExhausted)return r(null,null);t._batchDocs=[],t.cursor.next().then(n=>{Yx.call({ctx:t,callback:r},null,n)},n=>{Yx.call({ctx:t,callback:r},n)});return}else return t.cursor.next().then(n=>{if(!n){r(null,null);return}if(!t.query._mongooseOptions.populate)return Jx(t,n,null,r);Jx(t,n,t._pop,(i,s)=>{if(i!=null)return r(i);t.query.model.populate(s,t._pop).then(o=>r(null,o),o=>r(o))})},n=>{r(n)});else t.once("error",e),t.once("cursor",function(n){if(t.removeListener("error",e),n==null)return t.skipped?e(null,null):void 0;Qx(t,e)})}function Yx(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,swe.call(this);this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize?JJ(()=>this.ctx.cursor.next().then(r=>{Yx.call(this,null,r)},r=>{Yx.call(this,r)})):swe.call(this)}function swe(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{Jx(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},t=>{this.callback(t)})}function Jx(t,e,r,n){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost("find",t.query,[[e]],u=>{if(u!=null)return n(u);n(null,e)});let{model:i,_fields:s,_userProvidedFields:o,options:a}=t.query;awe.createModelAndInit(i,e,s,o,a,r,(u,c)=>{if(u!=null)return n(u);t.model.hooks.execPost("find",t.query,[[c]],l=>{if(l!=null)return n(l);n(null,c)})})}function cwe(t,e){if(t.cursor)return e();t.once("cursor",function(r){r!=null&&e()})}lwe.exports=Oa});var QJ=b((Jyr,fwe)=>{"use strict";var YJ=wt();function Dvt(t,e,r){pwe(t,e,r,"maxTimeMS")}function kvt(t,e,r){pwe(t,e,r,"allowDiskUse")}fwe.exports={applyGlobalMaxTimeMS:Dvt,applyGlobalDiskUse:kvt};function pwe(t,e,r,n){YJ.hasUserDefinedProperty(t,n)||(YJ.hasUserDefinedProperty(e,n)?t[n]=e[n]:YJ.hasUserDefinedProperty(r,n)&&(t[n]=r[n]))}});var XJ=b((Yyr,hwe)=>{"use strict";hwe.exports=function(e,r){if(r.readConcern!==void 0||r&&r.session&&r.session.transaction)return;let n=e.options?.readConcern?.level;n!=null&&(r.readConcern={level:n})}});var ZJ=b((Qyr,mwe)=>{"use strict";mwe.exports=function(e,r){if(r.writeConcern!=null||r&&r.session&&r.session.transaction)return;let n=e.options.writeConcern??{};Object.keys(n).length!=0?(r.writeConcern={},!("w"in r)&&n.w!=null&&(r.writeConcern.w=n.w),!("j"in r)&&n.j!=null&&(r.writeConcern.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.writeConcern.wtimeout=n.wtimeout)):(!("w"in r)&&n.w!=null&&(r.w=n.w),!("j"in r)&&n.j!=null&&(r.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.wtimeout=n.wtimeout))}});var bwe=b((Xyr,gwe)=>{"use strict";var ywe=Jv();gwe.exports=function(e,r,n){if(!Object.keys(n).some(ywe))return r.castForQuery(null,n,e);let s=Object.keys(n),o=s.length;for(;o--;){let a=s[o],u=n[a];if(a==="$not"){if(u&&r&&!r.caster){let c=Object.keys(u);if(c.length&&ywe(c[0]))for(let l of Object.keys(u))u[l]=r.castForQuery(l,u[l],e);else n[a]=r.castForQuery(a,u,e);continue}}else n[a]=r.castForQuery(a,u,e)}return n}});var Ewe=b((Zyr,_we)=>{"use strict";var Mvt=/^\d+$/;_we.exports=function(e,r,n){let i=e.path(r);if(i!=null)return i;let s=r.split("."),o="",a=!1;for(let u of s)if(!(a&&Mvt.test(u))){if(o=o.length===0?u:o+"."+u,i=e.path(o),i?.schema)e=i.schema,!a&&i.$isMongooseDocumentArray&&(a=!0),n&&n[o]&&(e=e.discriminators[n[o]]??e),o="";else if(i?.instance==="Mixed")break}return i}});var Cwe=b((egr,Awe)=>{"use strict";var Pvt=bwe(),vwe=Gv(),Swe=Ewe(),Nvt=IJ();Awe.exports=function(e){let r=e.options.arrayFilters;if(!Array.isArray(r))return;let n=e.getUpdate(),i=e.schema,s=Nvt(n),o=i.options.strict;e._mongooseOptions.strict!=null&&(o=e._mongooseOptions.strict),e.model&&e.model.base.options.strictQuery!=null&&(o=e.model.base.options.strictQuery),i._userProvidedOptions.strictQuery!=null&&(o=i._userProvidedOptions.strictQuery),e._mongooseOptions.strictQuery!=null&&(o=e._mongooseOptions.strictQuery),wwe(r,i,o,s,e)};function wwe(t,e,r,n,i){let s={};for(let o of t){if(o==null)throw new Error(`Got null array filter in ${t}`);let a=Object.keys(o).filter(h=>o[h]!=null);if(a.length===0)continue;let u=a[0];if(u==="$and"||u==="$or"){for(let h of a)wwe(o[h],e,r,n,i);continue}let c=u.indexOf("."),l=c===-1?u:u.substring(0,c);if(n[l]==null)continue;let d=vwe(n[l]),p=Swe(e,d,s),f=p!=null?p.schema:null;f!=null&&f.discriminators!=null&&o[l+"."+f.options.discriminatorKey]&&(f=f.discriminators[o[l+"."+f.options.discriminatorKey]]||f,s[d]=o[l+"."+f.options.discriminatorKey]);for(let h of a){if(n[h]===null||Object.keys(n).length===0)continue;let y=h.indexOf("."),E=y===-1?null:h.substring(y),v;if(E==null||f==null?v=p:(E=vwe(E),v=Swe(f,E,s)),v==null){if(!r)return;let w=E==null?d+".0":d+".0"+E;throw new Error(`Could not find path "${w}" in schema`)}typeof o[h]=="object"?o[h]=Pvt(i,v,o[h]):o[h]=v.castForQuery(null,o[h])}}}});var Xx=b((tgr,Twe)=>{"use strict";var Fvt=f_(),Bvt=i_();Twe.exports=function t(e){if(e==null)return!1;let r=Object.keys(e),n=r.length;if(n===0)return!1;for(let i=0;i<n;++i){let s=r[i];if(!s.startsWith("+")&&Fvt(e[s])&&e[s])return Bvt(e[s])?t(e[s]):!!e[s]}return!1}});var xwe=b((rgr,Owe)=>{"use strict";Owe.exports=function(e,r){return e===r||r.startsWith(e+".")}});var Iwe=b(Fi=>{"use strict";var eY=["__proto__","constructor","prototype"],Zx=Fi.clone=function t(e,r){if(e==null)return e;if(Array.isArray(e))return Fi.cloneArray(e,r);if(e.constructor){if(/ObjectI[dD]$/.test(e.constructor.name))return typeof e.clone=="function"?e.clone():new e.constructor(e.id);if(e.constructor.name==="ReadPreference")return new e.constructor(e.mode,t(e.tags,r));if(e._bsontype=="Binary"&&e.buffer&&e.value)return typeof e.clone=="function"?e.clone():new e.constructor(e.value(!0),e.sub_type);if(e.constructor.name==="Date"||e.constructor.name==="Function")return new e.constructor(+e);if(e.constructor.name==="RegExp")return new RegExp(e);if(e.constructor.name==="Buffer")return Buffer.from(e)}if(Lvt(e))return Fi.cloneObject(e,r);if(e.valueOf)return e.valueOf()};Fi.cloneObject=function(e,r){let n=r&&r.minimize,i={},s=Object.keys(e),o=s.length,a=!1,u,c="",l=0;for(l=0;l<o;++l)c=s[l],eY.indexOf(c)===-1&&(u=Zx(e[c],r),(!n||typeof u<"u")&&(a||(a=!0),i[c]=u));return n?a&&i:i};Fi.cloneArray=function(e,r){let n=[],i=e.length,s=0;for(;s<i;s++)n.push(Zx(e[s],r));return n};Fi.merge=function t(e,r){let n=Object.keys(r);for(let i of n)eY.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=r[i]:Fi.isObject(r[i])?t(e[i],r[i]):e[i]=r[i])};Fi.mergeClone=function t(e,r){let n=Object.keys(r);for(let i of n)eY.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=Zx(r[i]):Fi.isObject(r[i])?t(e[i],r[i]):e[i]=Zx(r[i]))};Fi.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e};Fi.readConcern=function(e){if(typeof e=="string"){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot";break}e={level:e}}return e};var qvt=Object.prototype.toString;Fi.toString=function(t){return qvt.call(t)};var Lvt=Fi.isObject=function(t){return Fi.toString(t)=="[object Object]"};Fi.keys=Object.keys;Fi.create=typeof Object.create=="function"?Object.create:jvt;function jvt(t){if(arguments.length>1)throw new Error("Adding properties is not supported");function e(){}return e.prototype=t,new e}Fi.inherits=function(t,e){t.prototype=Fi.create(e.prototype),t.prototype.constructor=t};Fi.isArgumentsObject=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"}});var Dwe=b((igr,Rwe)=>{var F_=1e3,B_=F_*60,q_=B_*60,ny=q_*24,$vt=ny*7,Uvt=ny*365.25;Rwe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Kvt(t);if(r==="number"&&isFinite(t))return e.long?Gvt(t):Vvt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Kvt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Uvt;case"weeks":case"week":case"w":return r*$vt;case"days":case"day":case"d":return r*ny;case"hours":case"hour":case"hrs":case"hr":case"h":return r*q_;case"minutes":case"minute":case"mins":case"min":case"m":return r*B_;case"seconds":case"second":case"secs":case"sec":case"s":return r*F_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Vvt(t){var e=Math.abs(t);return e>=ny?Math.round(t/ny)+"d":e>=q_?Math.round(t/q_)+"h":e>=B_?Math.round(t/B_)+"m":e>=F_?Math.round(t/F_)+"s":t+"ms"}function Gvt(t){var e=Math.abs(t);return e>=ny?eI(t,e,ny,"day"):e>=q_?eI(t,e,q_,"hour"):e>=B_?eI(t,e,B_,"minute"):e>=F_?eI(t,e,F_,"second"):t+" ms"}function eI(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var tY=b((sgr,kwe)=>{function Hvt(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Dwe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function y(...E){if(!y.enabled)return;let v=y,w=Number(new Date),T=w-(d||w);v.diff=T,v.prev=d,v.curr=w,d=w,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let A=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=E[A];x=M.call(v,I),E.splice(A,1),A--}return x}),r.formatArgs.call(v,E),(v.log||r.log).apply(v,E)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:E=>{p=E}}),typeof r.init=="function"&&r.init(y),y}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,y=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,y=p,f++):(p++,f++);else if(h!==-1)f=h+1,y++,p=y;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}kwe.exports=Hvt});var Mwe=b((xa,tI)=>{xa.formatArgs=Wvt;xa.save=Jvt;xa.load=Yvt;xa.useColors=zvt;xa.storage=Qvt();xa.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();xa.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function zvt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Wvt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+tI.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}xa.log=console.debug||console.log||(()=>{});function Jvt(t){try{t?xa.storage.setItem("debug",t):xa.storage.removeItem("debug")}catch{}}function Yvt(){let t;try{t=xa.storage.getItem("debug")||xa.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Qvt(){try{return localStorage}catch{}}tI.exports=tY()(xa);var{formatters:Xvt}=tI.exports;Xvt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Nwe=b((Es,nI)=>{var Zvt=require("tty"),rI=require("util");Es.init=oSt;Es.log=nSt;Es.formatArgs=tSt;Es.save=iSt;Es.load=sSt;Es.useColors=eSt;Es.destroy=rI.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Es.colors=[6,2,3,4,5,1];try{let t=O3();t&&(t.stderr||t).level>=2&&(Es.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Es.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function eSt(){return"colors"in Es.inspectOpts?!!Es.inspectOpts.colors:Zvt.isatty(process.stderr.fd)}function tSt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+nI.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=rSt()+e+" "+t[0]}function rSt(){return Es.inspectOpts.hideDate?"":new Date().toISOString()+" "}function nSt(...t){return process.stderr.write(rI.formatWithOptions(Es.inspectOpts,...t)+`
`)}function iSt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function sSt(){return process.env.DEBUG}function oSt(t){t.inspectOpts={};let e=Object.keys(Es.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Es.inspectOpts[e[r]]}nI.exports=tY()(Es);var{formatters:Pwe}=nI.exports;Pwe.o=function(t){return this.inspectOpts.colors=this.useColors,rI.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Pwe.O=function(t){return this.inspectOpts.colors=this.useColors,rI.inspect(t,this.inspectOpts)}});var Fwe=b((ogr,rY)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?rY.exports=Mwe():rY.exports=Nwe()});var qwe=b(Bwe=>{"use strict";var ai=Bwe;ai.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(ai.distinct),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};ai.distinct.select=ai.distinct.slice=ai.distinct.sort=ai.distinct.limit=ai.distinct.skip=ai.distinct.batchSize=ai.distinct.hint=ai.distinct.tailable=!0;ai.findOneAndUpdate=ai.findOneAndRemove=function(t){let e=Object.keys(ai.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};ai.findOneAndUpdate.limit=ai.findOneAndUpdate.skip=ai.findOneAndUpdate.batchSize=ai.findOneAndUpdate.tailable=!0;ai.count=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(ai.count),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};ai.count.slice=ai.count.batchSize=ai.count.tailable=!0});var nY=b((Rl,Lwe)=>{"use strict";Rl.isNode=typeof process<"u"&&typeof Lwe=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;Rl.isMongo=!Rl.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";Rl.isBrowser=!Rl.isNode&&!Rl.isMongo&&typeof window<"u";Rl.type=Rl.isNode?"node":Rl.isMongo?"mongo":Rl.isBrowser?"browser":"unknown"});var bS=b((jwe,$we)=>{"use strict";var iY=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function sY(){}for(let t=0,e=iY.length;t<e;++t){let r=iY[t];sY.prototype[r]=aSt(r)}$we.exports=jwe=sY;sY.methods=iY;function aSt(t){return function(){throw new Error("collection."+t+" not implemented")}}});var Vwe=b((Uwe,Kwe)=>{"use strict";var uSt=bS(),oY=class extends uSt{constructor(e){super(),this.collection=e,this.collectionName=e.collectionName}async find(e,r){return this.collection.find(e,r).toArray()}async findOne(e,r){return this.collection.findOne(e,r)}async count(e,r){return this.collection.count(e,r)}async distinct(e,r,n){return this.collection.distinct(e,r,n)}async updateMany(e,r,n){return this.collection.updateMany(e,r,n)}async updateOne(e,r,n){return this.collection.updateOne(e,r,n)}async replaceOne(e,r,n){return this.collection.replaceOne(e,r,n)}async deleteOne(e,r){return this.collection.deleteOne(e,r)}async deleteMany(e,r){return this.collection.deleteMany(e,r)}async findOneAndDelete(e,r){return this.collection.findOneAndDelete(e,r)}async findOneAndUpdate(e,r,n){return this.collection.findOneAndUpdate(e,r,n)}findCursor(e,r){return this.collection.find(e,r)}};Kwe.exports=Uwe=oY});var Hwe=b((ugr,Gwe)=>{"use strict";var aY=nY();if(aY.type=="unknown")throw new Error("Unknown environment");Gwe.exports=aY.isNode?Vwe():aY.isMongo?bS():bS()});var dY=b((Wwe,Jwe)=>{"use strict";var cSt=require("assert"),lSt=require("util"),Or=Iwe(),af=Fwe()("mquery");function Te(t,e){if(!(this instanceof Te))return new Te(t,e);let r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?Or.clone(r._conditions):{},this._fields=r._fields?Or.clone(r._fields):void 0,this._updateDoc=r._updateDoc?Or.clone(r._updateDoc):void 0,this._path=r._path||void 0,this._distinctDoc=r._distinctDoc||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}var iy="$geoWithin";Object.defineProperty(Te,"use$geoWithin",{get:function(){return iy=="$geoWithin"},set:function(t){t===!0?iy="$geoWithin":iy="$within"}});Te.prototype.toConstructor=function(){function e(n,i){if(!(this instanceof e))return new e(n,i);Te.call(this,n,i)}Or.inherits(e,Te);let r=e.prototype;return r.options={},r.setOptions(this.options),r.op=this.op,r._conditions=Or.clone(this._conditions),r._fields=Or.clone(this._fields),r._updateDoc=Or.clone(this._updateDoc),r._path=this._path,r._distinctDoc=this._distinctDoc,r._collection=this._collection,r._traceFunction=this._traceFunction,e};Te.prototype.setOptions=function(t){if(!(t&&Or.isObject(t)))return this;let e=Or.keys(t),r;for(let n=0;n<e.length;++n)if(r=e[n],typeof this[r]=="function"){let i=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,i)}else this.options[r]=t[r];return this};Te.prototype.collection=function(e){return this._collection=new Te.Collection(e),this};Te.prototype.collation=function(t){return this.options.collation=t,this};Te.prototype.$where=function(t){return this._conditions.$where=t,this};Te.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");let t=typeof arguments[0];if(t=="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(t=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};Te.prototype.equals=function(e){this._ensurePath("equals");let r=this._path;return this._conditions[r]=e,this};Te.prototype.eq=function(e){this._ensurePath("eq");let r=this._path;return this._conditions[r]=e,this};Te.prototype.or=function(e){let r=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};Te.prototype.nor=function(e){let r=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};Te.prototype.and=function(e){let r=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(t){Te.prototype[t]=function(){let e,r;arguments.length===1?(this._ensurePath(t),r=arguments[0],e=this._path):(r=arguments[1],e=arguments[0]);let n=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};return n["$"+t]=r,this}});Te.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};Te.prototype.exists=function(){let t,e;arguments.length===0?(this._ensurePath("exists"),t=this._path,e=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):arguments.length===2&&(t=arguments[0],e=arguments[1]);let r=this._conditions[t]||(this._conditions[t]={});return r.$exists=e,this};Te.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let t,e,r;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),e=this._path,t=arguments[0];else if(Or.isObject(arguments[0]))this._ensurePath("elemMatch"),e=this._path,r=arguments[0];else if(typeof arguments[1]=="function")e=arguments[0],t=arguments[1];else if(arguments[1]&&Or.isObject(arguments[1]))e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");t&&(r=new Te,t(r),r=r._conditions);let n=this._conditions[e]||(this._conditions[e]={});return n.$elemMatch=r,this};Te.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=iy,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);let e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};Te.prototype.box=function(){let t,e;if(arguments.length===3)t=arguments[0],e=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),t=this._path,e=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||iy]={$box:e},this};Te.prototype.polygon=function(){let t,e;typeof arguments[0]=="string"?(t=Array.from(arguments),e=t.shift()):(this._ensurePath("polygon"),e=this._path,t=Array.from(arguments));let r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||iy]={$polygon:t},this};Te.prototype.circle=function(){let t,e;if(arguments.length===1)this._ensurePath("circle"),t=this._path,e=arguments[0];else if(arguments.length===2)t=arguments[0],e=arguments[1];else throw new TypeError("Invalid argument");if(!("radius"in e&&e.center))throw new Error("center and radius are required");let r=this._conditions[t]||(this._conditions[t]={}),n=e.spherical?"$centerSphere":"$center",i=this._geoComparison||iy;return r[i]={},r[i][n]=[e.center,e.radius],"unique"in e&&(r[i].$uniqueDocs=!!e.unique),this};Te.prototype.near=function(){let e,r;if(this._geoComparison="$near",arguments.length===0)return this;if(arguments.length===1)this._ensurePath("near"),e=this._path,r=arguments[0];else if(arguments.length===2)e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");if(!r.center)throw new Error("center is required");let n=this._conditions[e]||(this._conditions[e]={}),i=r.spherical?"$nearSphere":"$near";if(Array.isArray(r.center)){n[i]=r.center;let s="maxDistance"in r?r.maxDistance:null;s!=null&&(n.$maxDistance=s),r.minDistance!=null&&(n.$minDistance=r.minDistance)}else{if(r.center.type!="Point"||!Array.isArray(r.center.coordinates))throw new Error(lSt.format("Invalid GeoJSON specified for %s",i));n[i]={$geometry:r.center},"maxDistance"in r&&(n[i].$maxDistance=r.maxDistance),"minDistance"in r&&(n[i].$minDistance=r.minDistance)}return this};Te.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let e=arguments[0];if(e!=null&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};Te.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let e,r;if(arguments.length===1)this._ensurePath("geometry"),r=this._path,e=arguments[0];else throw new TypeError("Invalid argument");if(!(e.type&&Array.isArray(e.coordinates)))throw new TypeError("Invalid argument");let n=this._conditions[r]||(this._conditions[r]={});return n[this._geoComparison]={$geometry:e},this};Te.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=typeof e,i,s;if((n=="string"||Or.isArgumentsObject(e))&&typeof e.length=="number"||Array.isArray(e)){for(n=="string"&&(e=e.split(/\s+/)),i=0,s=e.length;i<s;++i){let o=e[i];if(!o)continue;let a=o[0]=="-"?0:1;a===0&&(o=o.substring(1)),r[o]=a}return this}if(Or.isObject(e)){let o=Or.keys(e);for(i=0;i<o.length;++i)r[o[i]]=e[o[i]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};Te.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r=this._fields||(this._fields={});return r[t]={$slice:e},this};Te.prototype.sort=function(t){if(!t)return this;let e,r,n;this._validate("sort");let i=typeof t;if(Array.isArray(t)){for(r=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error("Invalid sort() argument, must be array of arrays");dSt(this.options,t[e][0],t[e][1])}return this}if(arguments.length===1&&i=="string"){for(t=t.split(/\s+/),r=t.length,e=0;e<r;++e){if(n=t[e],!n)continue;let s=n[0]=="-"?-1:1;s===-1&&(n=n.substring(1)),zwe(this.options,n,s)}return this}if(Or.isObject(t)){let s=Or.keys(t);for(e=0;e<s.length;++e)n=s[e],zwe(this.options,n,t[n]);return this}if(typeof Map<"u"&&t instanceof Map)return pSt(this.options,t),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var uY={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function zwe(t,e,r){if(Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n;if(r&&r.$meta){n=t.sort||(t.sort={}),n[e]={$meta:r.$meta};return}n=t.sort||(t.sort={});let i=String(r||1).toLowerCase();if(i=uY[i],!i)throw new TypeError("Invalid sort value: { "+e+": "+r+" }");n[e]=i}function dSt(t,e,r){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n=String(r||1).toLowerCase();if(n=uY[n],!n)throw new TypeError("Invalid sort value: [ "+e+", "+r+" ]");t.sort.push([e,n])}function pSt(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");e.forEach(function(r,n){let i=String(r||1).toLowerCase();if(i=uY[i],!i)throw new TypeError("Invalid sort value: < "+n+": "+r+" >");t.sort.set(n,i)})}["limit","skip","batchSize","comment"].forEach(function(t){Te.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}});Te.prototype.maxTime=Te.prototype.maxTimeMS=function(t){return this._validate("maxTime"),this.options.maxTimeMS=t,this};Te.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let t=arguments[0];if(Or.isObject(t)){let e=this.options.hint||(this.options.hint={});for(let r in t)e[r]=t[r];return this}if(typeof t=="string")return this.options.hint=t,this;throw new TypeError("Invalid hint. "+t)};Te.prototype.j=function(e){return this.options.j=e,this};Te.prototype.slaveOk=function(t){return this.options.slaveOk=arguments.length?!!t:!0,this};Te.prototype.read=Te.prototype.setReadPreference=function(t){return arguments.length>1&&!Te.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),Te.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=Or.readPref(t),this};Te.prototype.readConcern=Te.prototype.r=function(t){return this.options.readConcern=Or.readConcern(t),this};Te.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};Te.prototype.writeConcern=Te.prototype.w=function(e){return typeof e=="object"?(typeof e.j<"u"&&(this.options.j=e.j),typeof e.w<"u"&&(this.options.w=e.w),typeof e.wtimeout<"u"&&(this.options.wtimeout=e.wtimeout)):this.options.w=e==="m"?"majority":e,this};Te.prototype.wtimeout=Te.prototype.wTimeout=function(e){return this.options.wtimeout=e,this};Te.prototype.merge=function(t){if(!t)return this;if(!Te.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof Te?(t._conditions&&Or.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),Or.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),Or.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),Or.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(Or.merge(this._conditions,t),this)};Te.prototype.find=function(t){return this.op="find",Te.canMerge(t)&&this.merge(t),this};Te.prototype._find=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),af("_find",this._collection.collectionName,e,r),this._collection.find(e,r)};Te.prototype.cursor=function(e){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(e);let r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),af("findCursor",this._collection.collectionName,r,n),this._collection.findCursor(r,n)};Te.prototype.findOne=function(t){return this.op="findOne",Te.canMerge(t)&&this.merge(t),this};Te.prototype._findOne=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),af("findOne",this._collection.collectionName,e,r),this._collection.findOne(e,r)};Te.prototype.count=function(t){return this.op="count",this._validate(),Te.canMerge(t)&&this.merge(t),this};Te.prototype._count=async function(){let e=this._conditions,r=this._optionsForExec();return af("count",this._collection.collectionName,e,r),this._collection.count(e,r)};Te.prototype.distinct=function(t,e){return this.op="distinct",this._validate(),!e&&typeof t=="string"&&(e=t,t=void 0),typeof e=="string"&&(this._distinctDoc=e),Te.canMerge(t)&&this.merge(t),this};Te.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let e=this._conditions,r=this._optionsForExec();return af("distinct",this._collection.collectionName,e,r),this._collection.distinct(this._distinctDoc,e,r)};Te.prototype.updateMany=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),cY(this,"updateMany",e,r,n)};Te.prototype._updateMany=async function(){return lY(this,"updateMany")};Te.prototype.updateOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),cY(this,"updateOne",e,r,n)};Te.prototype._updateOne=async function(){return lY(this,"updateOne")};Te.prototype.replaceOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),this.setOptions({overwrite:!0}),cY(this,"replaceOne",e,r,n)};Te.prototype._replaceOne=async function(){return lY(this,"replaceOne")};function cY(t,e,r,n,i){return t.op=e,Te.canMerge(r)&&t.merge(r),n&&t._mergeUpdate(n),Or.isObject(i)&&t.setOptions(i),t}async function lY(t,e){let r=t._optionsForExec(),n=t._conditions,i=t._updateForExec();return af("update",t._collection.collectionName,n,i,r),t._collection[e](n,i,r)}Te.prototype.deleteOne=function(t){return this.op="deleteOne",Te.canMerge(t)&&this.merge(t),this};Te.prototype._deleteOne=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return af("deleteOne",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)};Te.prototype.deleteMany=function(t){return this.op="deleteMany",Te.canMerge(t)&&this.merge(t),this};Te.prototype._deleteMany=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return af("deleteOne",this._collection.collectionName,e,t),this._collection.deleteMany(e,t)};Te.prototype.findOneAndUpdate=function(t,e,r){return this.op="findOneAndUpdate",this._validate(),arguments.length===1&&(e=t,t=r=void 0),Te.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),r&&this.setOptions(r),this};Te.prototype._findOneAndUpdate=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,r)};Te.prototype.findOneAndRemove=Te.prototype.findOneAndDelete=function(t,e){return this.op="findOneAndRemove",this._validate(),Te.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};Te.prototype._findOneAndRemove=async function(){let t=this._optionsForExec(),e=this._conditions;return this._collection.findOneAndDelete(e,t)};Te.prototype.setTraceFunction=function(t){return this._traceFunction=t,this};Te.prototype.exec=async function(e){typeof e=="string"&&(this.op=e),cSt.ok(this.op,"Missing query type: (find, etc)");let r="_"+this.op;if(typeof this[r]!="function")throw new TypeError(`this[${r}] is not a function`);return this[r]()};Te.prototype.then=async function(t,e){return this.exec().then(t,e)};Te.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),af("cursor",this._collection.collectionName,t,e),this._collection.findCursor(t,e)};Te.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};Te.prototype.selectedInclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0||this._fields[n]&&typeof this._fields[n]=="object"&&this._fields[n].$meta)return!1}return!0};Te.prototype.selectedExclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0)return!0}return!1};Te.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof Te?t._updateDoc&&Or.mergeClone(this._updateDoc,t._updateDoc):Or.mergeClone(this._updateDoc,t)};Te.prototype._optionsForExec=function(){return Or.clone(this.options)};Te.prototype._fieldsForExec=function(){return Or.clone(this._fields)};Te.prototype._updateForExec=function(){let t=Or.clone(this._updateDoc),e=Or.keys(t),r={};for(let n of e){if(this.options.overwrite){r[n]=t[n];continue}n[0]!=="$"?(r.$set||(t.$set?r.$set=t.$set:r.$set={}),r.$set[n]=t[n],~e.indexOf("$set")||e.push("$set")):n==="$set"&&r.$set||(r[n]=t[n])}return this._compiledUpdate=r,r};Te.prototype._ensurePath=function(t){if(!this._path){let e=t+"() must be used after where() when called with these arguments";throw new Error(e)}};Te.permissions=qwe();Te._isPermitted=function(t,e){let r=Te.permissions[e];return r?r[t]!==!0:!0};Te.prototype._validate=function(t){let e,r;if(t===void 0){if(r=Te.permissions[this.op],typeof r!="function")return!0;e=r(this)}else Te._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+" cannot be used with "+this.op)};Te.canMerge=function(t){return t instanceof Te||Or.isObject(t)};Te.setGlobalTraceFunction=function(t){Te.traceFunction=t};Te.utils=Or;Te.env=nY();Te.Collection=Hwe();Te.BaseCollection=bS();Jwe.exports=Wwe=Te});var pY=b((cgr,Ywe)=>{"use strict";Ywe.exports=function(e,r){if(typeof e==="string"&&(e=e.split(/\s+/)),!Array.isArray(e)&&Object.prototype.toString.call(e)!=="[object Arguments]")return e;let i=e.length,s={};for(let o=0;o<i;++o){let a=e[o];if(!a)continue;let u=a[0]=="-"?0:1;!r&&u===0&&(a=a.substring(1)),s[a]=u}return s}});var Zwe=b((lgr,Xwe)=>{"use strict";Xwe.exports=function(e,r){let n=Object.keys(e).map(i=>Object.keys(e[i])).reduce((i,s)=>i.concat(s),[]);return r.filter(i=>Qwe(i,n))};function Qwe(t,e){let r=Object.keys(t)[0];if(r==="$and"||r==="$or")return Array.isArray(t[r])?t[r].find(s=>Qwe(s,e))!=null:!1;let n=r.indexOf("."),i=n===-1?r:r.slice(0,n);return e.find(s=>s.includes("$["+i+"]"))!=null}});var iI=b((dgr,e9e)=>{"use strict";e9e.exports=function(e){if(typeof e!="object"||e===null)return!1;let r=Object.keys(e),n=r.length;for(let i=0;i<n;++i)if(r[i][0]==="$")return!0;return!1}});var fY=b((pgr,t9e)=>{"use strict";var fSt=iI(),{trustedSymbol:hSt}=s_();t9e.exports=function t(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e)){for(let n of e)t(n);return e}let r=Object.keys(e);for(let n of r){let i=e[n];if(!(i!=null&&i[hSt])){if(n==="$and"||n==="$or"){t(i);continue}if(fSt(i)){let s=Object.keys(i);if(s.length===1&&s[0]==="$eq")continue;e[n]={$eq:e[n]}}}}return e}});var n9e=b((fgr,r9e)=>{"use strict";r9e.exports=function(e){if(e==null)return;let r=Object.keys(e);for(let n=0;n<r.length;++n)typeof e[r[n]]=="string"&&(e[r[n]]=1)}});var o9e=b((hgr,s9e)=>{"use strict";var mSt=h_(),ySt=Xx();s9e.exports=function(e,r,n){if(n==null)return;let i=Object.keys(n);if(r=r||{},ySt(e))for(let s of i){i9e(r,s)?r[s]===0&&delete e[s]:e[s]=1;let o=n[s]?.refPath;typeof o=="string"&&(i9e(r,o)?r[o]===0&&delete e[o]:e[o]=1)}else if(mSt(e))for(let s of i){r[s]==null&&delete e[s];let o=n[s]?.refPath;typeof o=="string"&&r[o]==null&&delete e[o]}};function i9e(t,e){let r=e.split("."),n=r.length,i=r[0];for(let s=1;s<n;++s){if(t[i]!=null||t[i+".$"]!=null)return!0;i+="."+r[s]}return t[i]!=null||t[i+".$"]!=null}});var l9e=b((mgr,c9e)=>{"use strict";var a9e=j0(),gSt=Gv(),u9e=DO().flatten;c9e.exports=function(t,e,r,n,i){let s=Object.keys(r||{}),o={},a={},u={},c={},l=s.length,d=!1,p,f,h;for(h=0;h<l;++h)if(s[h].startsWith("$")){if(d=!0,s[h]==="$push"||s[h]==="$addToSet"){let K=Object.keys(r[s[h]]);for(let k=0;k<K.length;++k)p=r[s[h]][K[k]],p&&p.$each?c[K[k]]=(c[K[k]]||[]).concat(p.$each):c[K[k]]=(c[K[k]]||[]).concat([p]);continue}let I=u9e(r[s[h]],null,null,e),F=Object.keys(I),B=F.length;for(let K=0;K<B;++K){let k=gSt(F[K]);f=s[h],!k.includes("$")&&(f==="$set"||f==="$setOnInsert"||f==="$pull"||f==="$pullAll"?(a[k]=I[F[K]],u[k]=f==="$pull"||f==="$pullAll"):f==="$unset"&&(a[k]=void 0),o[k]=!0)}}d||(a=u9e(r,null,null,e),o=Object.keys(a));let y=Object.keys(a),E=y.length,v=[],w=[],T=[],A=t;function C(I,F){let B=e._getSchema(y[I]);if(B!=null&&!(B.instance==="Mixed"&&B.path!==y[I]))if(F&&Array.isArray(F.$in))F.$in.forEach((K,k)=>{v.push(function(G){B.doValidate(K,function(ne){ne&&(ne.path=y[k]+".$in."+k,w.push(ne)),G(null)},A,{updateValidator:!0})})});else{if(u[y[I]]&&B.$isMongooseArray)return;B.$isMongooseDocumentArrayElement&&F!=null&&F.$__!=null?(T.push(y[I]),v.push(function(K){B.doValidate(F,function(k){if(k)if(k.errors)for(let G of Object.keys(k.errors)){let ne=k.errors[G];ne.path=y[I]+"."+G,w.push(ne)}else k.path=y[I],w.push(k);return K(null)},A,{updateValidator:!0})})):v.push(function(K){for(let k of T)if(y[I].startsWith(k+"."))return K(null);B.$isSingleNested&&T.push(y[I]),B.doValidate(F,function(k){if(B.schema!=null&&B.schema.options.storeSubdocValidationError===!1&&k instanceof a9e)return K(null);k&&(k.path=y[I],w.push(k)),K(null)},A,{updateValidator:!0})})}}for(h=0;h<E;++h)C(h,a[y[h]]);let x=Object.keys(c);for(let I of x){let F=e._getSchema(I);if(F&&F.$isMongooseDocumentArray)v.push(function(B){F.doValidate(c[I],M(I,w,B),n&&n.context==="query"?t:null)});else{F=e._getSchema(I+".0");for(let B of c[I])v.push(function(K){F.doValidate(B,M(I,w,K),n&&n.context==="query"?t:null,{updateValidator:!0})})}}if(i!=null){let I=v.length;if(I===0)return R(i);for(let F of v)F(function(){--I<=0&&R(i)});return}return function(I){let F=v.length;if(F===0)return R(I);for(let B of v)B(function(){--F<=0&&R(I)})};function R(I){if(w.length){let F=new a9e(null);for(let B of w)F.addError(B.path,B);return I(F)}I(null)}function M(I,F,B){return function(K){K&&(K.path=I,F.push(K)),B(null)}}}});var aI=b((ygr,A9e)=>{"use strict";var ES=po(),bSt=aO(),mY=q0(),mo=qt(),_h=CO(),d9e=dwe(),p9e=j0(),{applyGlobalMaxTimeMS:vS,applyGlobalDiskUse:SS}=QJ(),_St=bW(),ESt=XJ(),vSt=ZJ(),SSt=J0(),wSt=Cwe(),oI=zv(),ASt=BJ(),Ia=Vn(),CSt=uc(),wS=Bv(),TSt=wl().internalToObjectOptions,OSt=h_(),xSt=Xx(),ISt=PO(),f9e=xwe(),m9e=ou(),uu=dY(),RSt=pY(),DSt=Zwe(),kSt=fY(),MSt=n9e(),PSt=o9e(),y9e=LJ(),sI=B0(),NSt=l9e(),_S=require("util"),mn=wt(),FSt=tx().queryMiddlewareFunctions,BSt=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),qSt=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function we(t,e,r,n){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new mY,this._executionStack=null;let i=Object.keys(e);for(let o of i)this._mongooseOptions[o]=e[o];n&&(this.mongooseCollection=n),r&&(this.model=r,this.schema=r.schema),this.model&&this.model._mapreduce&&this.lean(),uu.call(this,null,e),n&&this.collection(n),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;let s=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;s!=null&&(this.options.collation=s)}function g9e(t){if(t==null||typeof t!="object"||Object.keys(t).length===0)return!0;for(let e of["$and","$or","$nor"])if(Array.isArray(t[e])&&(t[e].length===0||t[e].every(r=>g9e(r))))return!0;return!1}function j_(t,e){if(e&&e.requireFilter&&g9e(t))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}we.prototype=new uu;we.prototype.constructor=we;we.prototype.count=void 0;we.prototype.findOneAndRemove=void 0;we.base=uu.prototype;Object.defineProperty(we.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});we.use$geoWithin=uu.use$geoWithin;we.prototype.toConstructor=function(){let e=this.model,r=this.mongooseCollection,n=function(o,a){if(!(this instanceof n))return new n(o,a);this._mongooseOptions=Ia(i._mongooseOptions),we.call(this,o,a||null,e,r)};_S.inherits(n,e.Query);let i=n.prototype;i.options={};let s=Object.assign({},this.options);return s.sort!=null&&(i.sort(s.sort),delete s.sort),i.setOptions(s),i.op=this.op,i._validateOp(),i._conditions=Ia(this._conditions),i._fields=Ia(this._fields),i._update=Ia(this._update,{flattenDecimals:!1}),i._path=this._path,i._distinct=this._distinct,i._collection=this._collection,i._mongooseOptions=this._mongooseOptions,n};we.prototype.clone=function(){let t=this.model,e=this.mongooseCollection,r=new this.model.Query({},{},t,e),n=Object.assign({},this.options);return n.sort!=null&&(r.sort(n.sort),delete n.sort),r.setOptions(n),r.op=this.op,r._validateOp(),r._conditions=Ia(this._conditions),r._fields=Ia(this._fields),r._update=Ia(this._update,{flattenDecimals:!1}),r._path=this._path,r._distinct=this._distinct,r._collection=this._collection,r._mongooseOptions=this._mongooseOptions,r};we.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r={};return r[t]={$slice:e},this.select(r),this};var LSt=new Set(FSt);we.prototype._validateOp=function(){this.op!=null&&!LSt.has(this.op)&&this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};we.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};we.prototype.limit=function(e){if(this._validate("limit"),typeof e=="string")try{e=oI(e)}catch{throw new ES("Number",e,"limit")}return this.options.limit=e,this};we.prototype.skip=function(e){if(this._validate("skip"),typeof e=="string")try{e=oI(e)}catch{throw new ES("Number",e,"skip")}return this.options.skip=e,this};we.prototype.projection=function(t){return arguments.length===0?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)};we.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={}),i;this.model!=null&&mn.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?i=this.model.db.options.sanitizeProjection:this.model!=null&&mn.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?i=this.model.base.options.sanitizeProjection:i=this._mongooseOptions.sanitizeProjection;function s(o){return typeof o=="string"&&i?o=1:o}if(e=RSt(e,!0),mn.isObject(e)){if(this.selectedInclusively())Object.entries(e).forEach(([o,a])=>{a?(r["-"+o]!=null&&delete r["-"+o],r[o]=n[o]=s(a)):Object.keys(n).forEach(u=>{f9e(o,u)&&(delete r[u],delete n[u])})});else if(this.selectedExclusively())Object.entries(e).forEach(([o,a])=>{a?Object.keys(n).forEach(u=>{f9e(o,u)&&(delete r[u],delete n[u])}):(r["+"+o]!=null&&delete r["+"+o],r[o]=n[o]=s(a))});else{let o=Object.keys(e);for(let a=0;a<o.length;++a){let u=e[o[a]],c=o[a];r[c]=s(u),n[c]=s(u)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};we.prototype.schemaLevelProjections=function(e){return this._mongooseOptions.schemaLevelProjections=e,this};we.prototype.sanitizeProjection=function(e){return this._mongooseOptions.sanitizeProjection=e,this};we.prototype.read=function(e,r){return typeof e=="string"?(e=_St(e),this.options.readPreference={mode:e,tags:r}):this.options.readPreference=e,this};we.prototype.toString=function(){return this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove"?`${this.model.modelName}.${this.op}(${_S.inspect(this._conditions)})`:this.op==="distinct"?`${this.model.modelName}.distinct('${this._distinct}', ${_S.inspect(this._conditions)})`:this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne"?`${this.model.modelName}.${this.op}(${_S.inspect(this._conditions)}, ${_S.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`};we.prototype.session=function(e){return e==null&&delete this.options.session,this.options.session=e,this};we.prototype.writeConcern=function(e){return e==null?(delete this.options.writeConcern,this):(this.options.writeConcern=e,this)};we.prototype.w=function(e){return e==null&&delete this.options.w,this.options.writeConcern!=null?this.options.writeConcern.w=e:this.options.w=e,this};we.prototype.j=function(e){return e==null&&delete this.options.j,this.options.writeConcern!=null?this.options.writeConcern.j=e:this.options.j=e,this};we.prototype.wtimeout=function(e){return e==null&&delete this.options.wtimeout,this.options.writeConcern!=null?this.options.writeConcern.wtimeout=e:this.options.wtimeout=e,this};we.prototype.getOptions=function(){return this.options};we.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&Ia(t)||{},this.options=t||{},"populate"in t&&this.populate(this._mongooseOptions),this;if(t==null)return this;if(typeof t!="object")throw new Error('Options must be an object, got "'+t+'"');if(t=Object.assign({},t),Array.isArray(t.populate)){let r=t.populate;delete t.populate;let n=r.length;for(let i=0;i<n;++i)this.populate(r[i])}if("setDefaultsOnInsert"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),"overwriteDiscriminatorKey"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),"overwriteImmutable"in t&&(this._mongooseOptions.overwriteImmutable=t.overwriteImmutable,delete t.overwriteImmutable),"sanitizeProjection"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&MSt(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),"sanitizeFilter"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),"timestamps"in t&&(this._mongooseOptions.timestamps=t.timestamps,delete t.timestamps),"defaults"in t&&(this._mongooseOptions.defaults=t.defaults),"translateAliases"in t&&(this._mongooseOptions.translateAliases=t.translateAliases,delete t.translateAliases),"schemaLevelProjections"in t&&(this._mongooseOptions.schemaLevelProjections=t.schemaLevelProjections,delete t.schemaLevelProjections),t.lean==null&&this.schema&&"lean"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),typeof t.limit=="string")try{t.limit=oI(t.limit)}catch{throw new ES("Number",t.limit,"limit")}if(typeof t.skip=="string")try{t.skip=oI(t.skip)}catch{throw new ES("Number",t.skip,"skip")}for(let r of Object.keys(t))if(BSt.has(r)){let n=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,n)}else this.options[r]=t[r];return this};we.prototype.explain=function(e){return arguments.length===0?this.options.explain=!0:e===!1?delete this.options.explain:this.options.explain=e,this};we.prototype.allowDiskUse=function(t){return arguments.length===0?this.options.allowDiskUse=!0:t===!1?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this};we.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this};we.prototype.getFilter=function(){return this._conditions};we.prototype.getQuery=function(){return this._conditions};we.prototype.setQuery=function(t){this._conditions=t};we.prototype.getUpdate=function(){return this._update};we.prototype.setUpdate=function(t){this._update=t};we.prototype._fieldsForExec=function(){return this._fields==null||Object.keys(this._fields).length===0?null:Ia(this._fields)};we.prototype._updateForExec=function(){let t=Ia(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t),r=e.length,n={};for(;r--;){let i=e[r];i[0]!=="$"?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[i]=t[i],e.splice(r,1),~e.indexOf("$set")||e.push("$set")):i==="$set"&&n.$set||(n[i]=t[i])}return n};we.prototype._optionsForExec=function(t){let e=Ia(this.options);if(delete e.populate,t=t||this.model,!t)return e;ESt(t.schema,e),vSt(t.schema,e);let r=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();!Object.hasOwn(this.options,"session")&&r?.session!=null&&(e.session=r.session);let n=t&&t.schema&&t.schema.options&&t.schema.options.read;if(!("readPreference"in e)&&n&&(e.readPreference=n),e.upsert!==void 0&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let i=this._fieldsForExec();i!=null&&(e.projection=i)}if(this._mongooseOptions.populate){if(e.readPreference)for(let i of Object.values(this._mongooseOptions.populate))i.options?.readPreference===void 0&&(i.options||(i.options={}),i.options.readPreference=e.readPreference);if(e.readConcern)for(let i of Object.values(this._mongooseOptions.populate))i.options?.readConcern===void 0&&(i.options||(i.options={}),i.options.readConcern=e.readConcern)}return e};we.prototype.lean=function(t){return this._mongooseOptions.lean=arguments.length?t:!0,this};we.prototype.set=function(t,e){if(typeof t=="object"){let r=Object.keys(t);for(let n of r)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this};we.prototype.get=function(e){let r=this._update;if(r==null)return;let n=r.$set;if(n==null||mn.hasUserDefinedProperty(r,e))return r[e];if(mn.hasUserDefinedProperty(n,e))return n[e]};we.prototype.error=function(e){return arguments.length===0?this._error:(this._error=e,this)};we.prototype._unsetCastError=function(){if(!(this._error==null||!(this._error instanceof ES)))return this.error(null)};we.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions};we.prototype._castConditions=function(){let t;this.model?.db.options?.sanitizeFilter!=null?t=this.model.db.options.sanitizeFilter:this.model?.base.options?.sanitizeFilter!=null?t=this.model.base.options.sanitizeFilter:t=this._mongooseOptions.sanitizeFilter,t&&kSt(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(e){this.error(e)}};function b9e(t){try{wSt(t)}catch(e){t.error(e)}}we.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._mongooseOptions,r=this._userProvidedFields||{};vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let n={session:this&&this.options&&this.options.session||null,lean:e.lean||null},i=this._optionsForExec(),s=this._conditions,o=i.projection,a=await this.mongooseCollection.find(s,i);if(i.explain)return a.explain();let u=await a.toArray();if(u.length===0)return u;if(!e.populate){let l=this.schema.options.versionKey;return e.lean&&e.lean.versionKey===!1&&l&&u.forEach(d=>{l in d&&delete d[l]}),e.lean?E9e(this.model.schema,u,null,n):this._completeMany(u,o,r,n)}let c=wS.preparePopulationOptionsMQ(this,e);return e.lean?this.model.populate(u,c):(u=await this._completeMany(u,o,r,n),await this.model.populate(u,c),u)};we.prototype.find=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new mo("Query.prototype.find() no longer accepts a callback");return this.op="find",uu.canMerge(t)?(this.merge(t),AS(this)):t!=null&&this.error(new _h(t,"filter","find")),this};we.prototype.merge=function(t){if(!t)return this;let e={overwrite:!0};return t instanceof we?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),mn.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),mn.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),mn.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),mn.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),mn.merge(this._mongooseOptions,t._mongooseOptions),this):this.model!=null&&t instanceof this.model.base.Types.ObjectId?(mn.merge(this._conditions,{_id:t},e),this):(t&&t.$__&&(t=t.toObject(TSt)),e.omit={},Array.isArray(t.$and)&&(e.omit.$and=!0,this._conditions||(this._conditions={}),this._conditions.$and=(this._conditions.$and||[]).concat(t.$and.map(r=>mn.isPOJO(r)?mn.merge({},r):r))),Array.isArray(t.$or)&&(e.omit.$or=!0,this._conditions||(this._conditions={}),this._conditions.$or=(this._conditions.$or||[]).concat(t.$or.map(r=>mn.isPOJO(r)?mn.merge({},r):r))),mn.merge(this._conditions,t,e),this)};we.prototype.collation=function(t){return this.options==null&&(this.options={}),this.options.collation=t,this};we.prototype._completeOne=function(t,e,r,n){if(!t&&!this.options.includeResultMetadata)return n(null,null);let i=this.model,s=this._userProvidedFields||{},o=this._mongooseOptions,a=this.options;if(!a.lean&&o.lean&&(a.lean=o.lean),a.explain)return n(null,t);if(!o.populate){let c=this.schema.options.versionKey;return o.lean&&o.lean.versionKey===!1&&c&&c in t&&delete t[c],o.lean?yY(i.schema,t,null,e,a,n):h9e(i,t,e,a,r,s,null,n)}let u=wS.preparePopulationOptionsMQ(this,this._mongooseOptions);if(o.lean)return i.populate(t,u).then(c=>{yY(i.schema,c,null,e,a,n)},c=>{n(c)});h9e(i,t,e,a,r,s,[],(c,l)=>{if(c!=null)return n(c);i.populate(l,u).then(d=>{n(null,d)},d=>{n(d)})})};we.prototype._completeMany=async function(e,r,n,i){let s=this.model;return Promise.all(e.map(o=>new Promise((a,u)=>{let c=o;o=wS.createModel(s,o,r,n),i.session!=null&&o.$session(i.session),o.$init(c,i,l=>{if(l!=null)return u(l);a(o)})})))};we.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=await this.mongooseCollection.findOne(this._conditions,e);return new Promise((n,i)=>{this._completeOne(r,null,e.projection,(s,o)=>{if(s)return i(s);n(o)})})};we.prototype.findOne=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new mo("Query.prototype.findOne() no longer accepts a callback");return this.op="findOne",this._validateOp(),r&&this.setOptions(r),e&&this.select(e),uu.canMerge(t)?(this.merge(t),AS(this)):t!=null&&this.error(new _h(t,"filter","findOne")),this};we.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(n){this.error(n)}if(this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=this._conditions;return this.mongooseCollection.countDocuments(r,e)};we.prototype._applyTranslateAliases=function(){let e=!1;"translateAliases"in this._mongooseOptions?e=this._mongooseOptions.translateAliases:this.model?.schema?._userProvidedOptions?.translateAliases!=null?e=this.model.schema._userProvidedOptions.translateAliases:this.model?.base?.options?.translateAliases!=null&&(e=this.model.base.options.translateAliases),e&&this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0&&(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null&&(this._distinct=this.model.schema.aliases[this._distinct]))};we.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let e=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(e)};we.prototype.estimatedDocumentCount=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new mo("Query.prototype.estimatedDocumentCount() no longer accepts a callback");return this.op="estimatedDocumentCount",this._validateOp(),t!=null&&this.setOptions(t),this};we.prototype.countDocuments=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new mo("Query.prototype.countDocuments() no longer accepts a callback");return this.op="countDocuments",this._validateOp(),uu.canMerge(t)&&this.merge(t),e!=null&&this.setOptions(e),this};we.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,e)};we.prototype.distinct=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new mo("Query.prototype.distinct() no longer accepts a callback");return this.op="distinct",this._validateOp(),uu.canMerge(e)?(this.merge(e),AS(this)):e!=null&&this.error(new _h(e,"filter","distinct")),t!=null&&(this._distinct=t),r!=null&&this.setOptions(r),this};we.prototype.sort=function(t,e){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(e!=null&&typeof e!="object")throw new Error("sort() options argument must be an object or nullish");this.options.sort==null&&(this.options.sort={}),e&&e.override&&(this.options.sort={});let r=this.options.sort;if(typeof t=="string"){let n=t.indexOf(" ")===-1?[t]:t.split(" ");for(let i of n){let s=i[0]=="-"?-1:1;s===-1&&(i=i.slice(1)),!sI.has(i)&&(r[i]=s)}}else if(Array.isArray(t))for(let n of t){if(!Array.isArray(n))throw new TypeError("Invalid sort() argument, must be array of arrays");let i=""+n[0];sI.has(i)||(r[i]=hY(n[1],i))}else if(typeof t=="object"&&t!=null&&!(t instanceof Map))for(let n of Object.keys(t))sI.has(n)||(r[n]=hY(t[n],n));else if(t instanceof Map)for(let n of t.keys())n=""+n,!sI.has(n)&&(r[n]=hY(t.get(n),n));else if(t!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};function hY(t,e){if(t===1||t==="asc"||t==="ascending")return 1;if(t===-1||t==="desc"||t==="descending")return-1;if(t?.$meta!=null)return{$meta:t.$meta};throw new TypeError("Invalid sort value: { "+e+": "+t+" }")}we.prototype.deleteOne=function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new mo("Query.prototype.deleteOne() no longer accepts a callback");return this.op="deleteOne",this.setOptions(r),uu.canMerge(e)?(this.merge(e),AS(this)):e!=null&&this.error(new _h(e,"filter","deleteOne")),this};we.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),j_(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,e)};we.prototype.deleteMany=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new mo("Query.prototype.deleteMany() no longer accepts a callback");return this.setOptions(e),this.op="deleteMany",uu.canMerge(t)?(this.merge(t),AS(this)):t!=null&&this.error(new _h(t,"filter","deleteMany")),this};we.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),j_(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,e)};function h9e(t,e,r,n,i,s,o,a){if(n.includeResultMetadata&&e==null)return u(null),null;wS.createModelAndInit(t,e,i,s,n,o,u);function u(c,l){if(c)return a(c);if(n.includeResultMetadata)return e&&l?(n.session!=null&&l.$session(n.session),r.value=l):r.value=null,a(null,r);n.session!=null&&l.$session(n.session),a(null,l)}}function AS(t){if(!t||!t.model||!t.model.schema)return;let e=t.model.schema;e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}we.prototype.findOneAndUpdate=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new mo("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:r=void 0;break;case 1:e=t,t=r=void 0;break}uu.canMerge(t)?this.merge(t):t!=null&&this.error(new _h(t,"filter","findOneAndUpdate")),e&&this._mergeUpdate(e),r=r?Ia(r):{},r.projection&&(this.select(r.projection),delete r.projection),r.fields&&(this.select(r.fields),delete r.fields);let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};we.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),j_(this._conditions,this.options),b9e(this),this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options),"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict);let e=this._optionsForExec(this.model);_9e(e),this._update=this._castUpdate(this._update);let r=Object.assign({},e,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=y9e(this._conditions,this.model.schema,this._update,r),!this._update||Object.keys(this._update).length===0)if(e.upsert){let o=Ia(this._update);delete o._id,this._update={$set:o}}else return this._executionStack=null,await this._findOne();else{if(this._update instanceof Error)throw this._update;this._update.$set&&Object.keys(this._update.$set).length===0&&delete this._update.$set}gY(this,"runValidators",!1)&&await this.validate(this._update,e,!1),this._update.toBSON&&(this._update=this._update.toBSON());let i=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,e);for(let o of this._transforms)i=o(i);let s=e.includeResultMetadata?i.value:i;return new Promise((o,a)=>{this._completeOne(s,i,e.projection,(u,c)=>{if(u)return a(u);o(c)})})};we.prototype.findOneAndDelete=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new mo("Query.prototype.findOneAndDelete() no longer accepts a callback");return this.op="findOneAndDelete",this._validateOp(),this._validate(),uu.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};we.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),j_(this._conditions,this.options),this.error()!=null)throw this.error();let e=this.options.includeResultMetadata,r=this._conditions,n=this._optionsForExec(this.model),i=await this.mongooseCollection.findOneAndDelete(r,n);for(let o of this._transforms)i=o(i);let s=e?i.value:i;return new Promise((o,a)=>{this._completeOne(s,i,n.projection,(u,c)=>{if(u)return a(u);o(c)})})};we.prototype.findOneAndReplace=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[4]=="function")throw new mo("Query.prototype.findOneAndReplace() no longer accepts a callback");this.op="findOneAndReplace",this._validateOp(),this._validate(),uu.canMerge(t)?this.merge(t):t!=null&&this.error(new _h(t,"filter","findOneAndReplace")),e!=null&&this._mergeUpdate(e),r=r||{};let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};we.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),j_(this._conditions,this.options),this.error()!=null)throw this.error();"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict,delete this.options.strict);let e=this._conditions,r=this._optionsForExec();_9e(r);let n=this.options.includeResultMetadata,i={skipId:!0};"strict"in this._mongooseOptions&&(i.strict=this._mongooseOptions.strict);let s=gY(this,"runValidators",!1);try{let u=new this.model(this._update,null,i);if(s)await u.validate();else if(u.$__.validationError)throw u.$__.validationError;this._update=u.toBSON()}catch(u){if(u instanceof p9e)throw u;let c=new p9e;throw c.errors[u.path]=u,c}let o=await this.mongooseCollection.findOneAndReplace(e,this._update,r);for(let u of this._transforms)o=u(o);let a=n?o.value:o;return new Promise((u,c)=>{this._completeOne(a,o,r.projection,(l,d)=>{if(l)return c(l);u(d)})})};we.prototype.findById=function(t,e,r){return this.findOne({_id:t},e,r)};we.prototype.findByIdAndUpdate=function(t,e,r){return this.findOneAndUpdate({_id:t},e,r)};we.prototype.findByIdAndDelete=function(t,e){return this.findOneAndDelete({_id:t},e)};function _9e(t){"new"in t&&(t.returnDocument=t.new?"after":"before",delete t.new),"returnOriginal"in t&&(t.returnDocument=t.returnOriginal?"before":"after",delete t.returnOriginal),typeof t.returnDocument=="string"&&(t.returnOriginal=t.returnDocument==="before")}function gY(t,e,r){let n=t._optionsForExec(t.model);return e in n?n[e]:e in t.model.base.options?t.model.base.options[e]:r}function yY(t,e,r,n,i,s){if(i.lean&&typeof i.lean.transform=="function"){i.lean.transform(e);for(let o=0;o<t.childSchemas.length;o++){let a=r?r+"."+t.childSchemas[o].model.path:t.childSchemas[o].model.path,u=t.childSchemas[o].schema,c=m9e.get(a,e);if(c!=null){if(Array.isArray(c))for(let l=0;l<c.length;l++)i.lean.transform(c[l]);else i.lean.transform(c);yY(u,c,a,n,i)}}return s?s(null,e):void 0}return i.includeResultMetadata?s(null,n):s(null,e)}function E9e(t,e,r,n){if(n.lean&&typeof n.lean.transform=="function"){for(let i of e)n.lean.transform(i);for(let i=0;i<t.childSchemas.length;i++){let s=r?r+"."+t.childSchemas[i].model.path:t.childSchemas[i].model.path,o=t.childSchemas[i].schema,a=m9e.get(s,e);if(a!=null){a=a.flat();for(let u=0;u<a.length;u++)n.lean.transform(a[u]);E9e(o,a,s,n)}}}return e}we.prototype._mergeUpdate=function(t){if(this._update||(this._update=Array.isArray(t)?[]:{}),!(t==null||typeof t=="object"&&Object.keys(t).length===0))if(t instanceof we){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");t._update&&mn.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");mn.mergeClone(this._update,t)}};async function bY(t){if(this._applyTranslateAliases(),this._castConditions(),j_(this._conditions,this.options),b9e(this),this.error()!=null)throw this.error();let e=this._conditions,r=this._optionsForExec(this.model);this._update=Ia(this._update,r);let n=t==="replaceOne";if(n)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let s=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=y9e(this._conditions,this.model.schema,this._update,s)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=DSt(this._update,r.arrayFilters)),gY(this,"runValidators",!1)&&await this.validate(this._update,r,n),this._update.toBSON&&(this._update=this._update.toBSON()),this.mongooseCollection[t](e,this._update,r)}we.prototype.validate=async function(e,r,n){if(typeof arguments[3]=="function")throw new mo("Query.prototype.validate() no longer accepts a callback");await S9e(this,"validate"),n?await e.$validate():await new Promise((i,s)=>{NSt(this,this.model.schema,e,r,o=>{if(o!=null)return s(o);i()})}),await v9e(this,null,null,"validate")};we.prototype._updateMany=async function(){return bY.call(this,"updateMany")};we.prototype._updateOne=async function(){return bY.call(this,"updateOne")};we.prototype._replaceOne=async function(){return bY.call(this,"replaceOne")};we.prototype.updateMany=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),_Y(this,"updateMany",t,e,r,n)};we.prototype.updateOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),_Y(this,"updateOne",t,e,r,n)};we.prototype.replaceOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),_Y(this,"replaceOne",t,e,r,n)};function _Y(t,e,r,n,i,s){return t.op=e,t._validateOp(),n=n||{},i!=null&&"strict"in i&&(t._mongooseOptions.strict=i.strict),!(r instanceof we)&&r!=null&&r.toString()!=="[object Object]"?t.error(new _h(r,"filter",e)):t.merge(r),mn.isObject(i)&&t.setOptions(i),t._mergeUpdate(n),s&&t.exec(s),t}we.prototype.transform=function(t){return this._transforms.push(t),this};we.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case"find":if(e.length===0)throw L_(t,this);break;case"findOne":if(e==null)throw L_(t,this);break;case"replaceOne":case"updateMany":case"updateOne":if(e&&e.matchedCount===0)throw L_(t,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&e!=null&&e.value==null)throw L_(t,this);if(!this.options.includeResultMetadata&&e==null)throw L_(t,this);break;case"deleteMany":case"deleteOne":if(e.deletedCount===0)throw L_(t,this);break;default:break}return e}),this};function L_(t,e){return typeof t=="function"&&(t=t.call(e)),t==null&&(t=new bSt(e.getQuery(),e.model.modelName)),t}we.prototype.isPathSelectedInclusive=function(t){return ISt(this._fields,t)};we.prototype.exec=async function(e){if(typeof e=="function"||arguments.length>=2&&typeof arguments[1]=="function")throw new mo("Query.prototype.exec() no longer accepts a callback");if(typeof e=="string"&&(this.op=e),this.op==null)throw new mo("Query must have `op` before executing");if(this.model==null)throw new mo("Query must have an associated model before executing");let r=qSt.get(this.op);if(!r)throw new mo('Query has invalid `op`: "'+this.op+'"');if(this.options&&this.options.sort&&typeof this.options.sort=="object"&&Object.hasOwn(this.options.sort,""))throw new Error('Invalid field "" passed to sort()');if(this._executionStack!=null){let o=this.toString();o.length>60&&(o=o.slice(0,60)+"...");let a=new mo("Query was already executed: "+o);throw this.model.base.options.skipOriginalStackTraces||(a.originalStack=this._executionStack),a}else this._executionStack=this.model.base.options.skipOriginalStackTraces?!0:new Error().stack;let n=null;try{await $St(this)}catch(o){if(o instanceof mY.skipWrappedFunction)n=o;else throw o}let i,s=null;try{await S9e(this),i=n?n.args[0]:await this[r]();for(let o of this._transforms)i=o(i)}catch(o){o instanceof mY.skipWrappedFunction?i=o.args[0]:s=o,s=this.model.schema._transformDuplicateKeyError(s)}return i=await v9e(this,i,s),await jSt(this),i};function jSt(t){return new Promise((e,r)=>{t._hooks.execPost("exec",t,[],{},n=>{if(n)return r(n);e()})})}function v9e(t,e,r,n){if(t._queryMiddleware==null){if(r!=null)throw r;return e}return new Promise((i,s)=>{let o=r?{error:r}:{};t._queryMiddleware.execPost(n||t.op,t,[e],o,(a,u)=>{if(a)return s(a);i(u)})})}function $St(t){return new Promise((e,r)=>{t._hooks.execPre("exec",t,[],n=>{if(n!=null)return r(n);e()})})}function S9e(t,e){if(t._queryMiddleware!=null)return new Promise((r,n)=>{t._queryMiddleware.execPre(e||t.op,t,[],i=>{if(i!=null)return n(i);r()})})}we.prototype.then=function(t,e){return this.exec().then(t,e)};we.prototype.catch=function(t){return this.exec().then(null,t)};we.prototype.finally=function(t){return this.exec().finally(t)};we.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};we.prototype.pre=function(t){return this._hooks.pre("exec",t),this};we.prototype.post=function(t){return this._hooks.post("exec",t),this};we.prototype._castUpdate=function(e){let r=this.schema,n=r.options.discriminatorKey,i=r._baseSchema?r._baseSchema:r;if(this._mongooseOptions.overwriteDiscriminatorKey&&e[n]!=null&&i.discriminators){let o=Object.values(i.discriminators).find(a=>a.discriminatorMapping.value===e[n]);o!=null&&(r=o)}let s;return"upsert"in this.options&&(s=this.options.upsert),ASt(r,e,{strict:this._mongooseOptions.strict,upsert:s,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};we.prototype.populate=function(){let t=Array.from(arguments);if(!t.some(Boolean))return this;let e=mn.populate.apply(null,t),r=this._mongooseOptions;if(r.lean!=null){let i=r.lean;for(let s of e)(s&&s.options&&s.options.lean)==null&&(s.options=s.options||{},s.options.lean=i)}mn.isObject(r.populate)||(r.populate={});let n=r.populate;for(let i of e){let s=i.path;n[s]&&n[s].populate&&i.populate&&(i.populate=n[s].populate.concat(i.populate)),n[i.path]=i}return this};we.prototype.getPopulatedPaths=function(){let e=this._mongooseOptions.populate||{},r=Object.keys(e);for(let n of Object.keys(e)){let i=e[n];Array.isArray(i.populate)&&w9e(r,i.populate,n+".")}return r};function w9e(t,e,r){for(let n of e)t.push(r+n.path),Array.isArray(n.populate)&&w9e(t,n.populate,r+n.path+".")}we.prototype.cast=function(t,e){e||(e=this._conditions),t=t||this.model;let r=t.schema.options.discriminatorKey;e!=null&&Object.hasOwn(e,r)&&(t=CSt(t.discriminators,e[r])||t);let n={upsert:this.options&&this.options.upsert};this.options&&("strict"in this.options&&(n.strict=this.options.strict),"strictQuery"in this.options&&(n.strictQuery=this.options.strictQuery)),"sanitizeFilter"in this._mongooseOptions&&(n.sanitizeFilter=this._mongooseOptions.sanitizeFilter);try{return SSt(t.schema,e,n,this)}catch(i){throw typeof i.setModel=="function"&&i.setModel(t),i}};we.prototype._castFields=function(e){let r,n,i,s,o;if(e){i=Object.keys(e),n=[];for(let a=0;a<i.length;++a)s=i[a],e[s].$elemMatch&&(r||(r={}),r[s]=e[s],n.push(s))}if(r){try{o=this.cast(this.model,r)}catch(a){return a}for(let a=0;a<n.length;++a)s=n[a],e[s]=o[s]}return e};we.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let e;this.model!=null&&mn.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?e=this.model.db.options.sanitizeProjection:this.model!=null&&mn.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?e=this.model.base.options.sanitizeProjection:e=this._mongooseOptions.sanitizeProjection,(this._mongooseOptions.schemaLevelProjections??!0)&&wS.applyPaths(this._fields,this.model.schema,e);let n=!0;"selectPopulatedPaths"in this.model.base.options&&(n=this.model.base.options.selectPopulatedPaths),"selectPopulatedPaths"in this.model.schema.options&&(n=this.model.schema.options.selectPopulatedPaths),n&&PSt(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};we.prototype.cursor=function(e){e&&this.setOptions(e);try{this.cast(this.model)}catch(r){return new d9e(this)._markError(r)}return new d9e(this)};we.prototype.tailable=function(t,e){if(t!=null&&typeof t.constructor=="function"&&t.constructor.name==="Object"&&(e=t,t=!0),t===void 0&&(t=!0),e&&typeof e=="object")for(let r of Object.keys(e))r==="awaitData"||r==="awaitdata"?this.options.awaitData=!!e[r]:this.options[r]=e[r];return this.options.tailable=arguments.length?!!t:!0,this};we.prototype.near=function(){let t=[],e=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(typeof arguments[0]=="string")t.push(arguments[0]);else if(mn.isObject(arguments[0]))typeof arguments[0].spherical!="boolean"&&(arguments[0].spherical=e),t.push(arguments[0]);else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t.push({center:[arguments[0],arguments[1]],spherical:e});else if(typeof arguments[0]=="string"&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else if(typeof arguments[0]=="string"&&mn.isObject(arguments[1]))t.push(arguments[0]),typeof arguments[1].spherical!="boolean"&&(arguments[1].spherical=e),t.push(arguments[1]);else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]=="string"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number")t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return we.base.near.apply(this,t)};we.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};Symbol.asyncIterator!=null&&(we.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this.cursor()});we.prototype.box=function(t,e){return!Array.isArray(t)&&mn.isObject(t)&&(e=t.ur,t=t.ll),we.base.box.call(this,t,e)};we.prototype.center=we.base.circle;we.prototype.centerSphere=function(){arguments[0]!=null&&typeof arguments[0].constructor=="function"&&arguments[0].constructor.name==="Object"&&(arguments[0].spherical=!0),arguments[1]!=null&&typeof arguments[1].constructor=="function"&&arguments[1].constructor.name==="Object"&&(arguments[1].spherical=!0),we.base.circle.apply(this,arguments)};we.prototype.selectedInclusively=function(){return xSt(this._fields)};we.prototype.selectedExclusively=function(){return OSt(this._fields)};we.prototype.model;A9e.exports=we});var R9e=b((ggr,I9e)=>{"use strict";var CS=qt(),O9e=require("stream").Readable,USt=WJ(),KSt=Vu(),VSt=q0(),x9e=require("util");function Ra(t){O9e.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];let e=t._connection,r=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},e?(this.cursor=e.db.aggregate(t._pipeline,t.options||{}),setImmediate(()=>this.emit("cursor",this.cursor))):GSt(r,this,t)}x9e.inherits(Ra,O9e);function GSt(t,e,r){t.collection.buffer?t.collection.emitter.once("queue",function(){t.hooks.execPre("aggregate",r,function(n){if(n!=null){C9e(e,n);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}):t.hooks.execPre("aggregate",r,function(n){if(n!=null){C9e(e,n);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}function C9e(t,e){if(e instanceof VSt.skipWrappedFunction){let r=e.args[0];if(r!=null&&(!Array.isArray(r)||r.length)){let n=new CS('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+x9e.inspect(r)+'".');t._markError(n),t.listeners("error").length>0&&t.emit("error",n);return}t.emit("cursor",null);return}t._markError(e),t.listeners("error").length>0&&t.emit("error",e)}Ra.prototype._read=function(){let t=this;uI(this,function(e,r){if(e)return t.emit("error",e);if(!r){t.push(null),t.cursor.close(function(n){if(n)return t.emit("error",n)});return}t.push(r)})};if(Symbol.asyncIterator!=null){let t="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";Ra.prototype[Symbol.asyncIterator]=function(){throw new CS(t)}}Object.defineProperty(Ra.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Ra.prototype._markError=function(t){return this._error=t,this};Ra.prototype.close=async function(){if(typeof arguments[0]=="function")throw new CS("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}this.emit("close")};Ra.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>this.cursor.close()).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};Ra.prototype.next=async function(){if(typeof arguments[0]=="function")throw new CS("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((e,r)=>{uI(this,(n,i)=>{if(n!=null)return r(n);e(i)})})};Ra.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new CS("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let r=this;return typeof e=="function"&&(e={}),e=e||{},USt(function(n){return uI(r,n)},t,e)};Symbol.asyncIterator!=null&&(Ra.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});Ra.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(T9e)===-1&&this.map(T9e),this};Ra.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};function T9e(t){return t==null?{done:!0}:{value:t,done:!1}}Ra.prototype.addCursorFlag=function(t,e){let r=this;return HSt(this,function(){r.cursor.addCursorFlag(t,e)}),this};function HSt(t,e){if(t.cursor)return e();t.once("cursor",function(){e()})}function uI(t,e){let r=e;if(t._transforms.length&&(r=function(n,i){if(n||i===null&&!t._mongooseOptions.transformNull)return e(n,i);e(n,t._transforms.reduce(function(s,o){return o(s)},i))}),t._error)return KSt(function(){r(t._error)});if(t.cursor)return t.cursor.next().then(n=>{if(!n)return r(null,null);r(null,n)},n=>r(n));t.once("error",e),t.once("cursor",function(){uI(t,e)})}I9e.exports=Ra});var EY=b((bgr,D9e)=>{"use strict";D9e.exports=function(e,r,n){let i=r&&r.discriminatorMapping;if(n=n||"",i&&!i.isRoot){let s=e,o=(n.length>0?n+".":n)+i.key,a=i.value;if(s[0]!=null&&s[0].$match&&(s[0].$match[o]===void 0||s[0].$match[o]===a))s[0].$match[o]=a;else if(s[0]!=null&&s[0].$geoNear)s[0].$geoNear.query=s[0].$geoNear.query||{},s[0].$geoNear.query[o]=a;else if(s[0]!=null&&s[0].$search)if(s[1]&&s[1].$match!=null)s[1].$match[o]=s[1].$match[o]||a;else{let u={};u[o]=a,s.splice(1,0,{$match:u})}else{let u={};u[o]=a,s.unshift({$match:u})}}}});var M9e=b((_gr,k9e)=>{"use strict";k9e.exports=function t(e){if(Array.isArray(e))for(let r of e){if(r==null)continue;let n=r.$group||r.$bucket||r.$bucketAuto;if(n!=null)for(let s of Object.keys(n))zSt(n[s]);let i=Object.keys(r)[0];if(i&&typeof r[i]=="object"){let s=r[i];for(let o of Object.keys(s))s[o]!=null&&s[o].$function!=null&&typeof s[o].$function.body=="function"&&(s[o].$function.body=s[o].$function.body.toString())}if(r.$facet!=null)for(let s of Object.keys(r.$facet))t(r.$facet[s])}};function zSt(t){if(!(t==null||t.$accumulator==null))for(let e of["init","accumulate","merge","finalize"])typeof t.$accumulator[e]=="function"&&(t.$accumulator[e]=String(t.$accumulator[e]))}});var SY=b((Egr,q9e)=>{"use strict";var F9e=R9e(),sy=qt(),B9e=aI(),{applyGlobalMaxTimeMS:WSt,applyGlobalDiskUse:JSt}=QJ(),YSt=Vn(),QSt=qo(),vY=EY(),XSt=M9e(),P9e=wt(),{modelSymbol:ZSt}=nt(),ewt=B9e.prototype.read,twt=B9e.prototype.readConcern,N9e=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function tr(t,e){this._pipeline=[],e==null||e[ZSt]?this._model=e:this._connection=e,this.options={},arguments.length===1&&Array.isArray(t)&&this.append.apply(this,t)}tr.prototype.options;tr.prototype._optionsForExec=function(){let t=this.options||{},e=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();return!Object.hasOwn(t,"session")&&e?.session!=null&&(t.session=e.session),t};tr.prototype.model=function(t){return arguments.length===0?this._model:(this._model=t,t.schema!=null&&(this.options.readPreference==null&&t.schema.options.read!=null&&(this.options.readPreference=t.schema.options.read),this.options.collation==null&&t.schema.options.collation!=null&&(this.options.collation=t.schema.options.collation)),t)};tr.prototype.append=function(){let t=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every(rwt))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(t),this};tr.prototype.addFields=function(t){if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},t)})};tr.prototype.project=function(t){let e={};if(typeof t=="object"&&!Array.isArray(t))Object.keys(t).forEach(function(r){e[r]=t[r]});else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?0:1;n===0&&(r=r.substring(1)),e[r]=n});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:e})};tr.prototype.near=function(t){if(t==null)throw new sy("Aggregate `near()` must be called with non-nullish argument");if(t.near==null)throw new sy("Aggregate `near()` argument must have a `near` property");let e=Array.isArray(t.near)?t.near:t.near.coordinates;if(typeof t.near=="object"&&(!Array.isArray(e)||e.length<2||e.find(n=>typeof n!="number")))throw new sy(`Aggregate \`near()\` argument has invalid coordinates, got "${e}"`);let r={};return r.$geoNear=t,this.append(r)};"group match skip limit out densify fill".split(" ").forEach(function(t){tr.prototype[t]=function(e){let r={};return r["$"+t]=e,this.append(r)}});tr.prototype.unwind=function(){let t=[...arguments],e=[];for(let r of t)if(r&&typeof r=="object")e.push({$unwind:r});else if(typeof r=="string")e.push({$unwind:r[0]==="$"?r:"$"+r});else throw new Error('Invalid arg "'+r+'" to unwind(), must be string or object');return this.append.apply(this,e)};tr.prototype.replaceRoot=function(t){let e;return typeof t=="string"?e=t.startsWith("$")?t:"$"+t:e=t,this.append({$replaceRoot:{newRoot:e}})};tr.prototype.count=function(t){return this.append({$count:t})};tr.prototype.sortByCount=function(t){if(t&&typeof t=="object")return this.append({$sortByCount:t});if(typeof t=="string")return this.append({$sortByCount:t[0]==="$"?t:"$"+t});throw new TypeError('Invalid arg "'+t+'" to sortByCount(), must be string or object')};tr.prototype.lookup=function(t){return this.append({$lookup:t})};tr.prototype.graphLookup=function(t){let e={};if(t){if(!P9e.isObject(t))throw new TypeError("Invalid graphLookup() argument. Must be an object.");P9e.mergeClone(e,t);let r=e.startWith;r&&typeof r=="string"&&(e.startWith=e.startWith.startsWith("$")?e.startWith:"$"+e.startWith)}return this.append({$graphLookup:e})};tr.prototype.sample=function(t){return this.append({$sample:{size:t}})};tr.prototype.sort=function(t){let e={};if(QSt(t)==="Object"){let r=["desc","descending",-1];Object.keys(t).forEach(function(n){if(t[n]instanceof Object&&t[n].$meta){e[n]=t[n];return}e[n]=r.indexOf(t[n])===-1?1:-1})}else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?-1:1;n===-1&&(r=r.substring(1)),e[r]=n});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:e})};tr.prototype.unionWith=function(t){return this.append({$unionWith:t})};tr.prototype.read=function(t,e){return ewt.call(this,t,e),this};tr.prototype.readConcern=function(t){return twt.call(this,t),this};tr.prototype.redact=function(t,e,r){if(arguments.length===3){if(typeof e=="string"&&!N9e.has(e)||typeof r=="string"&&!N9e.has(r))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");t={$cond:{if:t,then:e,else:r}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:t})};tr.prototype.explain=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new sy("Aggregate.prototype.explain() no longer accepts a callback");let r=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");vY(this._pipeline,this._model.schema),await new Promise((o,a)=>{r.hooks.execPre("aggregate",this,u=>{if(u){let c={error:u};return r.hooks.execPost("aggregate",this,[null],c,l=>{a(l)})}else o()})});let n=r.collection.aggregate(this._pipeline,this.options);e==null&&(e=!0);let i=null;try{i=await n.explain(e)}catch(o){await new Promise((a,u)=>{let c={error:o};r.hooks.execPost("aggregate",this,[null],c,l=>l?u(l):a())})}let s={error:null};return await new Promise((o,a)=>{r.hooks.execPost("aggregate",this,[i],s,u=>u?a(u):o())}),i};tr.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this};tr.prototype.hint=function(t){return this.options.hint=t,this};tr.prototype.session=function(t){return t==null?delete this.options.session:this.options.session=t,this};tr.prototype.option=function(t){for(let e in t)this.options[e]=t[e];return this};tr.prototype.cursor=function(t){return this._optionsForExec(),this.options.cursor=t||{},new F9e(this)};tr.prototype.collation=function(t){return this.options.collation=t,this};tr.prototype.facet=function(t){return this.append({$facet:t})};tr.prototype.search=function(t){return this.append({$search:t})};tr.prototype.pipeline=function(){return this._pipeline};tr.prototype.exec=async function(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]=="function")throw new sy("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new sy("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let e=this._model,r=this._model.collection;if(WSt(this.options,e.db.options,e.base.options),JSt(this.options,e.db.options,e.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new F9e(this);if(vY(this._pipeline,this._model.schema),XSt(this._pipeline),await new Promise((o,a)=>{e.hooks.execPre("aggregate",this,u=>{if(u){let c={error:u};return e.hooks.execPost("aggregate",this,[null],c,l=>{a(l)})}else o()})}),!this._pipeline.length)throw new sy("Aggregate has empty pipeline");let n=YSt(this.options||{}),i;try{i=await(await r.aggregate(this._pipeline,n)).toArray()}catch(o){await new Promise((a,u)=>{let c={error:o};e.hooks.execPost("aggregate",this,[null],c,l=>{if(l)return u(l);a()})})}let s={error:null};return await new Promise((o,a)=>{e.hooks.execPost("aggregate",this,[i],s,u=>u?a(u):o())}),i};tr.prototype.then=function(t,e){return this.exec().then(t,e)};tr.prototype.catch=function(t){return this.exec().then(null,t)};tr.prototype.finally=function(t){return this.exec().finally(t)};Symbol.asyncIterator!=null&&(tr.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()});function rwt(t){if(typeof t!="object"||t===null)return!1;let e=Object.keys(t);return e.length===1&&e[0][0]==="$"}tr._prepareDiscriminatorPipeline=vY;q9e.exports=tr});var j9e=b((vgr,L9e)=>{"use strict";var nwt=Vn(),cI=class{constructor(e){e!=null&&Object.assign(this,nwt(e))}};cI.prototype.__subdocs=null;L9e.exports=cI});var U9e=b((Sgr,$9e)=>{"use strict";$9e.exports=function t(e,r){let n=Object.keys(r.paths),i=n.length;for(let s=0;s<i;++s){let o="",a=n[s],u=r.paths[a],c=u.splitPath(),l=c.length,d=e;for(let p=0;p<l&&d!=null;++p){let f=c[p];if(o+=(o.length?".":"")+f,p===l-1){if(typeof d[f]<"u"){u.$isSingleNested?t(d[f],u.caster.schema):u.$isMongooseDocumentArray&&Array.isArray(d[f])&&d[f].forEach(y=>t(y,u.schema));break}let h=u.getDefault(e,!1,{skipCast:!0});typeof h<"u"&&(d[f]=h,u.$isSingleNested?t(h,u.caster.schema):u.$isMongooseDocumentArray&&Array.isArray(h)&&h.forEach(y=>t(y,u.schema)))}else d[f]==null&&(d[f]={}),d=d[f]}}}});var AY=b((wgr,K9e)=>{"use strict";K9e.exports=wY;function wY(t,e=new WeakSet,r=!1){if(!e.has(t)){e.add(t);for(let n of Object.keys(t.paths)){let i=t.paths[n];if(i.schema&&(wY(i.schema,e),!!i.schema._applyDiscriminators&&!(i._appliedDiscriminators&&!r))){for(let s of i.schema._applyDiscriminators.keys()){let{schema:o,options:a}=i.schema._applyDiscriminators.get(s);wY(o,e),i.discriminator(s,o,r?{...a,overwriteExisting:!0}:a)}i._appliedDiscriminators=!0}}}}});var G9e=b((Agr,V9e)=>{"use strict";var iwt=ni(),swt=wt();V9e.exports=function t(e,r){let n=CY();function i(s,o){Object.defineProperty(e.prototype,s,{get:function(){let a={};for(let u in o.methods[s])a[u]=o.methods[s][u].bind(this);return a},configurable:!0})}for(let s of Object.keys(r.methods)){let o=r.methods[s];if(Object.hasOwn(r.tree,s))throw new Error('You have a method and a property in your schema both named "'+s+'"');if(typeof o=="function"&&n.prototype[s]===o){delete r.methods[s];continue}r.reserved[s]&&!iwt(r,`methodOptions.${s}.suppressWarning`,!1)&&swt.warn(`mongoose: the method name "${s}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${s}', fn, { suppressWarning: true })\`.`),typeof o=="function"?e.prototype[s]=o:i(s,r)}e.$appliedMethods=!0;for(let s of Object.keys(r.paths)){let o=r.paths[s];o.$isSingleNested&&!o.caster.$appliedMethods&&t(o.caster,o.schema),o.$isMongooseDocumentArray&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema)}}});var W9e=b((Cgr,z9e)=>{"use strict";var H9e=Dz(),owt=h_(),awt=Xx(),pI=wt().isPOJO;z9e.exports=function(e,r,n){if(r==null||e==null)return e;let i=null;return awt(r)?i=!1:owt(r)&&(i=!0),i==null?e:i?(n=n||H9e(r),lI(e,r,n)):(n=n||H9e(r),dI(e,r,n))};function lI(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>lI(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let a=i?i+"."+o:o;Object.hasOwn(e,a)||Object.hasOwn(n,o)?pI(e[a])||pI(n[o])?s[o]=lI(s[o],e,r,n[o],a):delete s[o]:r[a]&&(s[o]=lI(s[o],e,r,n[o],a))}return s}function dI(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>dI(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let a=i?i+"."+o:o;if(Object.hasOwn(e,a)||Object.hasOwn(n,o)){(pI(e[a])||pI(n[o]))&&(s[o]=dI(s[o],e,r,n[o],a));continue}else r[a]?s[o]=dI(s[o],e,r,n[o],a):delete s[o]}return s}});var Y9e=b((Tgr,J9e)=>{"use strict";J9e.exports=function(e){let r=!1;for(let n of Object.keys(e))e[n]==="text"&&(r=!0);return r}});var X9e=b((Ogr,Q9e)=>{"use strict";var uwt=Y9e();Q9e.exports=function(e,r,n){uwt(e)||Object.hasOwn(n,"collation")&&!Object.hasOwn(r,"collation")&&(r.collation=n.collation)}});var eAe=b((xgr,Z9e)=>{"use strict";var cwt=_O(),{queryMiddlewareFunctions:lwt,aggregateMiddlewareFunctions:dwt,modelMiddlewareFunctions:pwt,documentMiddlewareFunctions:fwt}=tx(),hwt=Array.from(new Set([...lwt,...dwt,...pwt,...fwt]));Z9e.exports=function(e,r,n){let i={useErrorHandlers:!0,numCallbackParams:1};e.$__insertMany=r.createWrapper("insertMany",e.$__insertMany,e,i),r=r.filter(s=>hwt.indexOf(s.name)!==-1?!!s.model:s.model!==!1);for(let s of Object.keys(n))if(r.hasHooks(s)){let o=e[s];e[s]=function(){let a=arguments.length,u=a>0?arguments[a-1]:null,c=typeof u=="function"?u:null,l=Array.prototype.slice.call(arguments,0,c==null?a:a-1);return cwt(c,d=>{r.execPre(s,e,l,function(p){if(p!=null)return d(p);let f=0,h=o.apply(e,l.concat(y));h!=null&&typeof h.then=="function"&&h.then(E=>y(null,E),E=>y(E));function y(E,v){if(!(f++>0)){if(E!=null)return d(E);r.execPost(s,e,[v],function(w){if(w!=null)return d(w);d(null,v)})}}})},e.events)}}}});var rAe=b((Igr,tAe)=>{"use strict";tAe.exports=function(e,r){for(let n in r.statics)e[n]=r.statics[n]}});var aAe=b((Rgr,oAe)=>{"use strict";var nAe=ex(),mwt=ou();oAe.exports=iAe;function iAe(t,e,r){return e==null?e:(ywt(t,e,r),sAe(t,e,r))}function ywt(t,e,r){for(let n of t.childSchemas){let i=n.model.path,s=n.schema;if(!i)continue;let o=mwt.get(i,e);o==null||Array.isArray(o)&&o.flat(1/0).length===0||iAe(s,o,r)}}function sAe(t,e,r){if(e==null||typeof e!="object")return;if(Array.isArray(e)){for(let a of e)sAe(t,a,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let a of Object.keys(t.discriminators)){let u=t.discriminators[a],c=u.discriminatorMapping.key,l=u.discriminatorMapping.value;if(e[c]==l){t=u;break}}let n=nAe(t.options.timestamps,"createdAt"),i=nAe(t.options.timestamps,"updatedAt"),s=r?.currentTime,o=null;s!=null?o=s():t.base?.now?o=t.base.now():o=new Date,n&&e[n]==null&&!r?.isUpdate&&(e[n]=o),i&&(e[i]=o)}});var lAe=b((Dgr,cAe)=>{"use strict";var gwt=ou();cAe.exports=uAe;function uAe(t,e,r){if(e==null)return e;let n=r,i=null;if(Array.isArray(r)){n=[],i=[];for(let s of r)s.length===1?i.push(s[0]):n.push(s)}return bwt(t,e,n),TY(t,e,i)}function bwt(t,e,r){let n=!1;for(let i of t.childSchemas){let s=i.model.path,o=i.schema;if(!s)continue;let a=gwt.get(s,e);if(a==null||Array.isArray(a)&&a.flat(1/0).length===0)continue;let u=null;if(Array.isArray(r)){u=[];for(let c of r)c[0]==s&&u.push(c.slice(1));if(u.length===0)continue}uAe(o,a,u),n=!0}r&&r.length&&!n&&TY(t,e,r)}function TY(t,e,r){if(!(e==null||typeof e!="object")){if(Array.isArray(e)){for(let n of e)TY(t,n,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let n of Object.keys(t.discriminators)){let i=t.discriminators[n],s=i.discriminatorMapping.key,o=i.discriminatorMapping.value;if(e[s]==o){t=i;break}}r==null&&(r=Object.keys(t.virtuals));for(let n of r){if(t.virtuals[n]==null)continue;let i=t.virtuals[n],s=Array.isArray(n)?n:n.indexOf(".")===-1?[n]:n.split("."),o=e;for(let c=0;c<s.length-1;++c)o[s[c]]=s[c]in o?o[s[c]]:{},o=o[s[c]];let a=i.applyGetters(o[s[s.length-1]],e);i.options&&(i.options.ref||i.options.refPath)&&a===void 0&&(i.options.justOne?a=null:a=[]),o[s[s.length-1]]=a}}}});var fI=b((kgr,dAe)=>{"use strict";dAe.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}});var TS=b((Mgr,pAe)=>{"use strict";pAe.exports=new WeakMap});var yAe=b((Pgr,mAe)=>{"use strict";var _wt=Vn(),fAe=TS(),Ewt=nt().modelSymbol,vwt=wt();mAe.exports=hAe;var hI=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function hAe(t,e,r,n,i){let s=[],o=n.isVirtual&&n.justOne&&t.length>1?!1:n.sort&&t.length>1,a=n.$nullIfNotFound,u,c,l;vwt.isMongooseArray(t)&&(t=t.__array);let d=0,p=t.length;if(o&&i&&n[hI]===void 0){n[hI]=!1;for(let f in r)if(Array.isArray(r[f])){n[hI]=!0;break}}for(d=0;d<p;++d){if(l=t[d],Array.isArray(l)){hAe(l,e,r,n,!0),s.push(l);continue}if(l===null&&o===!1){s.push(l);continue}if(l?.constructor?.name==="Binary"&&l.sub_type===4&&typeof l.toUUID=="function"||l?.constructor?.name==="Buffer"&&l._subtype===4&&typeof l.toUUID=="function"?c=String(l.toUUID()):c=String(l),u=e[c],n.clone&&u!=null)if(n.lean){let f=fAe.get(u);u=_wt(u),fAe.set(u,f)}else u=u.constructor.hydrate(u._doc);if(i)if(u)if(o){let f=r[c];n[hI]?s.push(u):s[f]=u}else s.push(u);else l!=null&&l[Ewt]!=null?s.push(l):s.push(n.retainNullValues||a?null:l);else s[d]=u||null}t.length=0,s.length&&s.forEach(function(f,h){t[h]=f})}});var OY=b((Ngr,gAe)=>{"use strict";gAe.exports=mI;function mI(t,e){if(t.virtuals[e])return{virtual:t.virtuals[e],path:void 0};let r=e.split("."),n="",i="";for(let s=0;s<r.length;++s){if(n+=(n.length>0?".":"")+r[s],t.virtuals[n]){if(s===r.length-1)return{virtual:t.virtuals[n],path:i};continue}if(!t.nested[n]){if(t.paths[n]&&t.paths[n].schema){t=t.paths[n].schema;let o=r.slice(s+1).join(".");if(t.virtuals[o]){if(s===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[i,n].filter(a=>!!a).join(".")};continue}if(s+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=mI(t.discriminators[a],o);if(u!=null){let c=[i,n,u.nestedSchemaPath].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}i+=(i.length>0?".":"")+n,n="";continue}else if(t.paths[n]?.$isSchemaMap&&t.paths[n].$__schemaType?.schema){t=t.paths[n].$__schemaType.schema,++s;let o=r.slice(s+1).join(".");if(t.virtuals[o]){if(s===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[i,n,"$*"].filter(a=>!!a).join(".")};continue}if(s+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=mI(t.discriminators[a],o);if(u!=null){let c=[i,n,u.nestedSchemaPath,"$*"].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}i+=(i.length>0?".":"")+"$*"+n,n=""}if(t.discriminators)for(let o of Object.keys(t.discriminators)){let a=mI(t.discriminators[o],e);if(a)return a}return null}}}});var _Ae=b((yI,bAe)=>{(function(t,e){typeof yI=="object"&&typeof bAe<"u"?e(yI):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sift={}))})(yI,(function(t){"use strict";var e=function(D,N){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Q){U.__proto__=Q}||function(U,Q){for(var xe in Q)Object.prototype.hasOwnProperty.call(Q,xe)&&(U[xe]=Q[xe])},e(D,N)};function r(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");e(D,N);function U(){this.constructor=D}D.prototype=N===null?Object.create(N):(U.prototype=N.prototype,new U)}typeof SuppressedError=="function"&&SuppressedError;var n=function(D){var N="[object "+D+"]";return function(U){return i(U)===N}},i=function(D){return Object.prototype.toString.call(D)},s=function(D){return D instanceof Date?D.getTime():a(D)?D.map(s):D&&typeof D.toJSON=="function"?D.toJSON():D},o=function(D){return D??null},a=n("Array"),u=n("Object"),c=n("Function"),l=function(D,N){return D.hasOwnProperty(N)&&!c(D[N])},d=function(D){return D&&(D.constructor===Object||D.constructor===Array||D.constructor.toString()==="function Object() { [native code] }"||D.constructor.toString()==="function Array() { [native code] }")&&!D.toJSON},p=function(D,N){if(D==null&&D==N||D===N)return!0;if(Object.prototype.toString.call(D)!==Object.prototype.toString.call(N))return!1;if(a(D)){if(D.length!==N.length)return!1;for(var U=0,Q=D.length;U<Q;U++)if(!p(D[U],N[U]))return!1;return!0}else if(u(D)){if(Object.keys(D).length!==Object.keys(N).length)return!1;for(var xe in D)if(!p(D[xe],N[xe]))return!1;return!0}return!1},f=function(D,N,U,Q,xe,Re){var Ee=N[Q];if(a(D)&&isNaN(Number(Ee))&&!l(D,Ee)){for(var Ie=0,Be=D.length;Ie<Be;Ie++)if(!f(D[Ie],N,U,Q,Ie,D))return!1}return Q===N.length||D==null?U(D,xe,Re,Q===0,Q===N.length):f(D[Ee],N,U,Q+1,Ee,D)},h=(function(){function D(N,U,Q,xe){this.params=N,this.owneryQuery=U,this.options=Q,this.name=xe,this.init()}return D.prototype.init=function(){},D.prototype.reset=function(){this.done=!1,this.keep=!1},D})(),y=(function(D){r(N,D);function N(U,Q,xe,Re){var Ee=D.call(this,U,Q,xe)||this;return Ee.children=Re,Ee}return N.prototype.reset=function(){this.keep=!1,this.done=!1;for(var U=0,Q=this.children.length;U<Q;U++)this.children[U].reset()},N.prototype.childrenNext=function(U,Q,xe,Re,Ee){for(var Ie=!0,Be=!0,$e=0,dt=this.children.length;$e<dt;$e++){var ur=this.children[$e];if(ur.done||ur.next(U,Q,xe,Re,Ee),ur.keep||(Be=!1),ur.done){if(!ur.keep)break}else Ie=!1}this.done=Ie,this.keep=Be},N})(h),E=(function(D){r(N,D);function N(U,Q,xe,Re,Ee){var Ie=D.call(this,U,Q,xe,Re)||this;return Ie.name=Ee,Ie}return N})(y),v=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.next=function(U,Q,xe,Re){this.childrenNext(U,Q,xe,Re)},N})(y),w=(function(D){r(N,D);function N(U,Q,xe,Re,Ee){var Ie=D.call(this,Q,xe,Re,Ee)||this;return Ie.keyPath=U,Ie.propop=!0,Ie._nextNestedValue=function(Be,$e,dt,ur,wn){return Ie.childrenNext(Be,$e,dt,ur,wn),!Ie.done},Ie}return N.prototype.next=function(U,Q,xe){f(U,this.keyPath,this._nextNestedValue,0,Q,xe)},N})(y),T=function(D,N){if(D instanceof Function)return D;if(D instanceof RegExp)return function(Q){var xe=typeof Q=="string"&&D.test(Q);return D.lastIndex=0,xe};var U=s(D);return function(Q){return N(U,s(Q))}},A=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.init=function(){this._test=T(this.params,this.options.compare)},N.prototype.next=function(U,Q,xe){(!Array.isArray(xe)||xe.hasOwnProperty(Q))&&this._test(U,Q,xe)&&(this.done=!0,this.keep=!0)},N})(h),C=function(D,N,U){return new A(D,N,U)},x=function(D){return function(N,U,Q,xe){return D(N,U,Q,xe)}},R=function(D){return x(function(N,U,Q,xe){var Re=typeof s(N),Ee=D(N);return new A(function(Ie){var Be=o(Ie);return typeof s(Be)===Re&&Ee(Be)},U,Q,xe)})},M=function(D,N,U,Q){var xe=Q.operations[D];return xe||I(D),xe(N,U,Q,D)},I=function(D){throw new Error("Unsupported operation: ".concat(D))},F=function(D,N){for(var U in D)if(N.operations.hasOwnProperty(U)||U.charAt(0)==="$")return!0;return!1},B=function(D,N,U,Q,xe){if(F(N,xe)){var Re=k(N,U,xe),Ee=Re[0],Ie=Re[1];if(Ie.length)throw new Error("Property queries must contain only operations, or exact objects.");return new w(D,N,Q,xe,Ee)}return new w(D,N,Q,xe,[new A(N,Q,xe)])},K=function(D,N,U){N===void 0&&(N=null);var Q=U===void 0?{}:U,xe=Q.compare,Re=Q.operations,Ee={compare:xe||p,operations:Object.assign({},Re||{})},Ie=k(D,null,Ee),Be=Ie[0],$e=Ie[1],dt=[];return Be.length&&dt.push(new w([],D,N,Ee,Be)),dt.push.apply(dt,$e),dt.length===1?dt[0]:new v(D,N,Ee,dt)},k=function(D,N,U){var Q=[],xe=[];if(!d(D))return Q.push(new A(D,D,U)),[Q,xe];for(var Re in D)if(U.operations.hasOwnProperty(Re)){var Ee=M(Re,D[Re],D,U);if(Ee&&!Ee.propop&&N&&!U.operations[N])throw new Error("Malformed query. ".concat(Re," cannot be matched against property."));Ee!=null&&Q.push(Ee)}else Re.charAt(0)==="$"?I(Re):xe.push(B(Re.split("."),D[Re],Re,D,U));return[Q,xe]},G=function(D){return function(N,U,Q){return D.reset(),D.next(N,U,Q),D.keep}},ne=function(D,N){return N===void 0&&(N={}),G(K(D,null,N))},$=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.init=function(){this._test=T(this.params,this.options.compare)},N.prototype.reset=function(){D.prototype.reset.call(this),this.keep=!0},N.prototype.next=function(U){this._test(U)&&(this.done=!0,this.keep=!1)},N})(h),V=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.init=function(){if(!this.params||typeof this.params!="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=K(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(U){if(a(U)){for(var Q=0,xe=U.length;Q<xe;Q++){this._queryOperation.reset();var Re=U[Q];this._queryOperation.next(Re,Q,U,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},N})(h),me=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.init=function(){this._queryOperation=K(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(U,Q,xe,Re){this._queryOperation.next(U,Q,xe,Re),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},N})(h),Oe=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.init=function(){},N.prototype.next=function(U){a(U)&&U.length===this.params&&(this.done=!0,this.keep=!0)},N})(h),fe=function(D){if(D.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},He=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!1,U}return N.prototype.init=function(){var U=this;fe(this.params),this._ops=this.params.map(function(Q){return K(Q,null,U.options)})},N.prototype.reset=function(){this.done=!1,this.keep=!1;for(var U=0,Q=this._ops.length;U<Q;U++)this._ops[U].reset()},N.prototype.next=function(U,Q,xe){for(var Re=!1,Ee=!1,Ie=0,Be=this._ops.length;Ie<Be;Ie++){var $e=this._ops[Ie];if($e.next(U,Q,xe),$e.keep){Re=!0,Ee=$e.keep;break}}this.keep=Ee,this.done=Re},N})(h),Pe=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!1,U}return N.prototype.next=function(U,Q,xe){D.prototype.next.call(this,U,Q,xe),this.keep=!this.keep},N})(He),Ce=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.init=function(){var U=this,Q=Array.isArray(this.params)?this.params:[this.params];this._testers=Q.map(function(xe){if(F(xe,U.options))throw new Error("cannot nest $ under ".concat(U.name.toLowerCase()));return T(xe,U.options.compare)})},N.prototype.next=function(U,Q,xe){for(var Re=!1,Ee=!1,Ie=0,Be=this._testers.length;Ie<Be;Ie++){var $e=this._testers[Ie];if($e(U)){Re=!0,Ee=!0;break}}this.keep=Ee,this.done=Re},N})(h),Rr=(function(D){r(N,D);function N(U,Q,xe,Re){var Ee=D.call(this,U,Q,xe,Re)||this;return Ee.propop=!0,Ee._in=new Ce(U,Q,xe,Re),Ee}return N.prototype.next=function(U,Q,xe,Re){this._in.next(U,Q,xe),a(xe)&&!Re?this._in.keep?(this.keep=!1,this.done=!0):Q==xe.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},N.prototype.reset=function(){D.prototype.reset.call(this),this._in.reset()},N})(h),bt=(function(D){r(N,D);function N(){var U=D!==null&&D.apply(this,arguments)||this;return U.propop=!0,U}return N.prototype.next=function(U,Q,xe,Re,Ee){Ee?xe.hasOwnProperty(Q)===this.params&&(this.done=!0,this.keep=!0):(this.done=!0,this.keep=!this.params)},N})(h),na=(function(D){r(N,D);function N(U,Q,xe,Re){var Ee=D.call(this,U,Q,xe,U.map(function(Ie){return K(Ie,Q,xe)}),Re)||this;return Ee.propop=!1,fe(U),Ee}return N.prototype.next=function(U,Q,xe,Re){this.childrenNext(U,Q,xe,Re)},N})(E),mi=(function(D){r(N,D);function N(U,Q,xe,Re){var Ee=D.call(this,U,Q,xe,U.map(function(Ie){return K(Ie,Q,xe)}),Re)||this;return Ee.propop=!0,Ee}return N.prototype.next=function(U,Q,xe,Re){this.childrenNext(U,Q,xe,Re)},N})(E),Zt=function(D,N,U){return new A(D,N,U)},P=function(D,N,U,Q){return new $(D,N,U,Q)},j=function(D,N,U,Q){return new He(D,N,U,Q)},H=function(D,N,U,Q){return new Pe(D,N,U,Q)},ie=function(D,N,U,Q){return new V(D,N,U,Q)},Y=function(D,N,U,Q){return new Rr(D,N,U,Q)},te=function(D,N,U,Q){return new Ce(D,N,U,Q)},de=R(function(D){return function(N){return N!=null&&N<D}}),z=R(function(D){return function(N){return N===D||N<=D}}),X=R(function(D){return function(N){return N!=null&&N>D}}),ue=R(function(D){return function(N){return N===D||N>=D}}),se=function(D,N,U){var Q=D[0],xe=D[1];return new A(function(Re){return s(Re)%Q===xe},N,U)},Se=function(D,N,U,Q){return new bt(D,N,U,Q)},ze=function(D,N,U){return new A(new RegExp(D,N.$options),N,U)},et=function(D,N,U,Q){return new me(D,N,U,Q)},Ht={number:function(D){return typeof D=="number"},string:function(D){return typeof D=="string"},bool:function(D){return typeof D=="boolean"},array:function(D){return Array.isArray(D)},null:function(D){return D===null},timestamp:function(D){return D instanceof Date}},Nr=function(D,N,U){return new A(function(Q){if(typeof D=="string"){if(!Ht[D])throw new Error("Type alias does not exist");return Ht[D](Q)}return Q!=null?Q instanceof D||Q.constructor===D:!1},N,U)},Lr=function(D,N,U,Q){return new na(D,N,U,Q)},Rt=function(D,N,U,Q){return new mi(D,N,U,Q)},ar=function(D,N,U){return new Oe(D,N,U,"$size")},Mn=function(){return null},Gc=function(D,N,U){var Q;if(c(D))Q=D;else if(!process.env.CSP_ENABLED)Q=new Function("obj","return "+D);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new A(function(xe){return Q.bind(xe)(xe)},N,U)},Fu=Object.freeze({__proto__:null,$Size:Oe,$all:Rt,$and:Lr,$elemMatch:ie,$eq:Zt,$exists:Se,$gt:X,$gte:ue,$in:te,$lt:de,$lte:z,$mod:se,$ne:P,$nin:Y,$nor:H,$not:et,$options:Mn,$or:j,$regex:ze,$size:ar,$type:Nr,$where:Gc}),Z=function(D,N,U){var Q=U===void 0?{}:U,xe=Q.compare,Re=Q.operations;return K(D,N,{compare:xe,operations:Object.assign({},Fu,Re||{})})},oe=function(D,N){N===void 0&&(N={});var U=Z(D,null,N);return G(U)};t.$Size=Oe,t.$all=Rt,t.$and=Lr,t.$elemMatch=ie,t.$eq=Zt,t.$exists=Se,t.$gt=X,t.$gte=ue,t.$in=te,t.$lt=de,t.$lte=z,t.$mod=se,t.$ne=P,t.$nin=Y,t.$nor=H,t.$not=et,t.$options=Mn,t.$or=j,t.$regex=ze,t.$size=ar,t.$type=Nr,t.$where=Gc,t.EqualsOperation=A,t.createDefaultQueryOperation=Z,t.createEqualsOperation=C,t.createOperationTester=G,t.createQueryOperation=K,t.createQueryTester=ne,t.default=oe,Object.defineProperty(t,"__esModule",{value:!0})}))});var vAe=b((Fgr,xY)=>{var EAe=_Ae();xY.exports=EAe.default;Object.assign(xY.exports,EAe)});var OAe=b((Bgr,TAe)=>{"use strict";var Swt=nx(),wwt=fI(),Awt=yAe(),gI=ni(),Cwt=OY(),CAe=TS(),SAe=XO(),Twt=qz(),IY=ou(),wAe=vAe().default,bI=wt(),{populateModelSymbol:Owt}=nt();TAe.exports=function(e){let r=Object.assign({},gI(e,"allOptions.options.options"),gI(e,"allOptions.options")),n=Object.assign({},e.options,r,{justOne:e.justOne,isVirtual:e.isVirtual});n.$nullIfNotFound=e.isVirtual;let i=e.populatedModel,s=[].concat(e.rawIds);e.allIds=[].concat(e.allIds),Awt(e.rawIds,e.rawDocs,e.rawOrder,n);let o=e.docs,a=e.rawIds,u=e.options,c=e.count&&e.isVirtual,l,d=0;function p(f){if(++d,c)return f;if(f instanceof wwt)return f.val;if(f===void 0)return f;let h=e.allIds[l];if(e.path.endsWith(".$*"))return OS(f,u,n,h);if(e.justOne===!0&&Array.isArray(f)){let y=[];for(let E of f){let v=CAe.get(E);(v==null||v===i)&&y.push(E)}for(;f.length>y.length;)Array.prototype.pop.apply(f,[]);for(let E=0;E<y.length;++E)f[E]=y[E];return OS(f[0],u,n,h)}else{if(e.justOne===!1&&!Array.isArray(f))return OS([f],u,n,h);if(e.justOne===!0&&!Array.isArray(f)&&Array.isArray(h))return OS(f,u,n,f==null?f:h[d-1])}return OS(f,u,n,h)}for(l=0;l<o.length;++l){d=0;let f=e.path.endsWith(".$*")?e.path.slice(0,-3):e.path,h=IY.get(f,o[l],SAe);if(h==null&&!Cwt(e.originalModel.schema,f))continue;let y;c?y=xwt(a[l]):Array.isArray(e.match)?y=Array.isArray(a[l])?a[l].filter(C=>C==null||wAe(e.match[l])(C)):[a[l]].filter(C=>C==null||wAe(e.match[l])(C))[0]:y=a[l];let E=e.originalModel.schema,v=gI(o[l],"$__",null)!=null,w=v?h instanceof Map:bI.isPOJO(h);if(w=w&&gI(E._getSchema(f),"$isSchemaMap"),!e.isVirtual&&w){let C=h instanceof Map?Array.from(h.keys()):Object.keys(h);y=y.reduce((x,R,M)=>(x.set(C[M],R),x),new Map)}if(v&&Array.isArray(y))for(let C of y)C!=null&&C.$__!=null&&(C.$__.parent=o[l]);else v&&y!=null&&y.$__!=null&&(y.$__.parent=o[l]);if(e.isVirtual&&v){o[l].$populated(f,e.justOne?s[0]:s,e.allOptions),Array.isArray(y)&&(y=y.map(C=>C??void 0)),IY.set(f,y,o[l],function(x,R,M){return arguments.length>=3?(x[R]=M,x[R]):x instanceof Map&&R==="$*"?[...x.values()]:x[R]},p,!1);continue}let T=f.split("."),A=o[l];for(let C=0;C<T.length-1&&!(Array.isArray(A)&&!bI.isArrayIndex(T[C])||T[C]==="$*");++C){if(A[T[C]]==null){let x=T.slice(0,C+1).join("."),R=E._getSchema(x);if(y==null&&R!=null&&R.$isMongooseArray)break;A[T[C]]={}}if(A=A[T[C]],typeof A!="object")break}o[l].$__&&(e.allOptions.options[Owt]=e.allOptions.model,o[l].$populated(f,e.unpopulatedValues[l],e.allOptions.options),y!=null&&y.$__!=null&&(y.$__.wasPopulated={value:e.unpopulatedValues[l]}),y instanceof Map&&!y.$isMongooseMap&&(y=new Swt(y,f,o[l],o[l].schema.path(f).$__schemaType))),IY.set(f,y,o[l],SAe,p,!1),o[l].$__&&Twt(o[l],[e.allOptions.options])}};function xwt(t){return Array.isArray(t)?t.some(e=>Array.isArray(e)||e===null)?t.map(e=>e==null?0:Array.isArray(e)?e.filter(r=>r!=null).length:1):t.filter(e=>e!=null).length:t==null?0:1}function OS(t,e,r,n){let i=typeof r.transform=="function",s=i?r.transform:o=>o;if(Array.isArray(t)){let o=[],a=t.length;for(let l=0;l<a;++l){let d=t[l],p=Array.isArray(n)?n[l]:n;if(!(!RY(d)&&(!r.retainNullValues||d!=null)&&!i)){{if(!r.retainNullValues&&d==null)continue;i&&(d=s(RY(d)?d:null,p))}if(AAe(d,e),o.push(d),e.originalLimit&&o.length>=e.originalLimit)break}}let u=o.length;for(;t.length>u;)Array.prototype.pop.apply(t,[]);let c=0;if(bI.isMongooseArray(t))for(c=0;c<u;++c)t.set(c,o[c],!0);else for(c=0;c<u;++c)t[c]=o[c];return t}return RY(t)||bI.isPOJO(t)?(AAe(t,e),s(t,n)):t instanceof Map?t:r.justOne===!1?[]:t==null?s(t,n):s(null,n)}function AAe(t,e){t!=null&&e.excludeId&&(typeof t.$__setValue=="function"?delete t._doc._id:delete t._id)}function RY(t){return t==null?!1:Array.isArray(t)||t.$isMongooseMap||t.$__!=null||CAe.has(t)}});var DAe=b((qgr,RAe)=>{"use strict";var Iwt=fI(),Rwt=jz(),{trusted:_I}=s_(),xAe=iI();RAe.exports=function(e,r,n,i,s){let o=Dwt(r);if(n.size===1){let a=Array.from(n)[0],u=i.schema.path(a);if(a!=="_id"||!o._id)e=IAe(e,u,s),o[a]=_I({$in:e});else if(a==="_id"&&o._id){let l=xAe(o[a])?o[a]:{$eq:o[a]};o[a]={..._I({$in:e}),...l}}let c=Rwt(a);for(let l=0;l<c.length-1;++l){let d=c[l];if(o[d]!=null&&o[d].$elemMatch!=null){o[d].$elemMatch[a.slice(d.length+1)]=_I({$in:e}),delete o[a];break}}}else{let a=[];Array.isArray(o.$or)?(o.$and=[{$or:o.$or},{$or:a}],delete o.$or):o.$or=a;for(let u of n)if(u!=="_id"||!o._id){let c=i.schema.path(u);e=IAe(e,c,s),a.push({[u]:{$in:e}})}else if(u==="_id"&&o._id){let c=xAe(o[u])?o[u]:{$eq:o[u]};o[u]={..._I({$in:e}),...c}}}return o};function IAe(t,e,r){return t=t.filter(n=>!(n instanceof Iwt)),r?t.filter(n=>{try{return e.cast(n),!0}catch{return!1}}):t}function Dwt(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(e=>Object.assign({},e)))}:Object.assign({},t[0]):Object.assign({},t)}});var NAe=b((Lgr,PAe)=>{"use strict";var kAe=d_(),kwt=ni(),Mwt=uc(),MAe=TS(),$_=ou(),Pwt=nt().populateModelSymbol;PAe.exports=function t(e,r,n,i){let s=r.path(i),o=n;if(s)return s;let a=r.discriminatorMapping&&r.discriminatorMapping.key;if(a&&e!=null){if(n!=null&&n[a]!=null){let l=Mwt(e.discriminators,n[a]);r=l?l.schema:r}else if(e.discriminators!=null)return Object.keys(e.discriminators).reduce((l,d)=>{let p=e.discriminators[d];return l.concat(t(p,p.schema,null,i))},[])}function u(l,d,p,f){let h=l.length+1,y,E;for(;h--;){if(E=l.slice(0,h).join("."),y=d.path(E),y==null)continue;if(y.caster){if(y.caster instanceof kAe)return y.caster;let T=null;if(y.schema!=null&&y.schema.discriminators!=null){let A=y.schema.discriminators,C=E+"."+y.schema.options.discriminatorKey,x=p?$_.get(C,p)||[]:[];T=Object.keys(A).reduce(function(R,M){let I=A[M].discriminatorMapping.value;return(n==null||x.indexOf(M)!==-1||x.indexOf(I)!==-1)&&R.push(A[M]),R},[])}if(h!==l.length&&y.schema){let A;if(l[h]==="$")return h+1===l.length?y:(A=u(l.slice(h+1),d,p?$_.get(E,p):null,f.concat(l.slice(0,h))),A&&(A.$parentSchemaDocArray=A.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),A);if(T!=null&&T.length>0){A=[];for(let C of T){let x=u(l.slice(h),C,p?$_.get(E,p):null,f.concat(l.slice(0,h)));x!=null&&(x.$parentSchemaDocArray=x.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y),x.$parentSchemaDocArray&&(A.$parentSchemaDocArray=x.$parentSchemaDocArray),A.push(x))}return A}else return A=u(l.slice(h),y.schema,p?$_.get(E,p):null,f.concat(l.slice(0,h))),A&&(A.$parentSchemaDocArray=A.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),A}else if(h!==l.length&&y.$isMongooseArray&&y.casterConstructor.$isMongooseArray){let A=y;for(;A.$isMongooseArray&&!A.$isMongooseDocumentArray;)A=A.casterConstructor;let C=u(l.slice(h),A.schema,null,f.concat(l.slice(0,h)));if(C!=null)return C;if(A.schema.discriminators){let x=[];for(let R of Object.keys(A.schema.discriminators)){let M=A.schema.discriminators[R]||A.schema,I=u(l.slice(h),M,null,f.concat(l.slice(0,h)));I!=null&&x.push(I)}if(x.length>0)return x}}}else if(y.$isSchemaMap&&y.$__schemaType instanceof kAe)return y.$__schemaType;let v=f.concat([E]).join(".");if(o!=null&&o.$__&&o.$populated(v,!0)&&h<l.length){let T=o.$populated(v,!0).options[Pwt];if(T!=null)return u(l.slice(h),T.schema,p?$_.get(E,p):null,f.concat(l.slice(0,h)))}let w=kwt(o,E);if(w!=null){let T=Array.isArray(w)&&w.length>0?MAe.get(w[0]):MAe.get(w),A=T!=null?T.schema:null;if(A!=null){let C=u(l.slice(h),A,p?$_.get(E,p):null,f.concat(l.slice(0,h)));if(C!=null)return C.$parentSchemaDocArray=C.$parentSchemaDocArray||(A.$isSingleNested?null:A),C}}return y}}let c=i.split(".");for(let l=0;l<c.length;++l)c[l]==="$"&&(c[l]="0");return u(c,r,n,[])}});var $Ae=b((jgr,jAe)=>{"use strict";var FY=Ea(),Nwt=fI(),Fwt=Vn(),pc=ni(),Bwt=uc(),qwt=qo(),FAe=NAe(),Lwt=OY(),xS=XO(),oy=ou(),EI=hW(),yo=wt(),MY=nt().modelSymbol,DY=nt().populateModelSymbol,PY=$0().schemaMixedSymbol,jwt=Cz();jAe.exports=function(e,r,n){let i,s=r.length,o=[],a=n.model&&n.model.modelName||n.model,u,c,l,d={},p=e.schema;if(n._localModel!=null&&n._localModel.schema.nested[n.path])return[];let f=Lwt(e.schema,n.path);if((f==null?null:f.virtual)!=null)return $wt(e,r,n,f);let y=FAe(e,p,null,n.path);if(y=Array.isArray(y)?y:[y].filter(w=>w!=null),!(n.strictPopulate===!1||n.options?.strictPopulate===!1)&&y.length===0&&n._localModel!=null)return new jwt(n._fullPath||n.path);for(let w=0;w<s;w++){i=r[w];let T=null;if(i.$__!=null&&i.populated(n.path)&&(n.forceRepopulate!=null?n.forceRepopulate:i.constructor.base.options.forceRepopulate)===!1)continue;let A=i!=null&&i.$__!=null?i.$__schema:p;if(u=FAe(e,A,i,n.path),u!=null&&u.$isMongooseDocumentArray&&u.options.ref==null&&u.options.refPath==null)continue;if(u&&u.$parentSchemaDocArray&&pc(n,"options.sort")!=null)return new FY("Cannot populate with `sort` on path "+n.path+" because it is a subproperty of a document array");l=null;let x=!1,R=null,M=null,I=null;if(u!=null&&u.instance==="Embedded"){if(u.options.ref){let V={localField:n.path+"._id",foreignField:"_id",justOne:!0},me=v(i,u,a,e),Oe=oy.get(n.path,i),fe=oy.get("_id",Oe);NY(e,o,d,me.modelNames,n,V,fe,i,M,Oe)}continue}if(Array.isArray(u)){let V=u;for(let me of V){let Oe,fe;try{fe=v(i,me,a,e),Oe=fe.modelNames,x=x||fe.isRefPath,R=R||fe.refPath,T=fe.justOne}catch(He){return He}if(!(x&&!fe.isRefPath)&&Oe){l=l||[];for(let He of Oe)l.indexOf(He)===-1&&l.push(He)}}}else{try{let V=v(i,u,a,e);l=V.modelNames,x=V.isRefPath,R=R||V.refPath,T=V.justOne,M=pc(u,"options.populate",null),x&&(I=l,l=Array.from(new Set(l)))}catch(V){return V}if(!l)continue}let F={},B=n.path,K="_id";if("justOne"in n&&n.justOne!==void 0?T=n.justOne:u&&!u[PY]&&(n.path.endsWith("."+u.path)||n.path===u.path)&&(T=Array.isArray(u)?u.every(V=>!V.$isMongooseArray):!u.$isMongooseArray),!l)continue;F.isVirtual=!1,F.justOne=T,F.localField=B,F.foreignField=K;let k=qAe(i,B,e,n,null,u),G=String(yo.getValue(K,i));n._docs[G]=Array.isArray(k)?k.slice():k;let ne=pc(n,"match",null),$=typeof ne=="function";$&&(ne=ne.call(i,i)),qY(ne),F.match=ne,F.hasMatchFunction=$,F.isRefPath=x,F.modelNamesInOrder=I,x&&(l=Uwt(i,p,F,n,R,k)||l);try{NY(e,o,d,l,n,F,k,i,M)}catch(V){return V}}return o;function v(w,T,A,C){let x,R=!1,M=null,I=T;T&&T.instance==="Array"&&(T=T.caster),T&&T.$isSchemaMap&&(T=T.$__schemaType);let F=T&&T.options&&T.options.ref;if(c=T&&T.options&&T.options.refPath,T!=null&&T[PY]&&!F&&!c&&!A)return{modelNames:null};if(A)x=[A];else if(c!=null){if(typeof c=="function"){let B=n.path.slice(0,n.path.length-T.path.length-1),K=oy.get(B,w,xS),k=Array.isArray(K)?yo.array.flatten(K):K?[K]:[];x=new Set;for(let G of k)c=c.call(G,G,n.path),EI(c,w,n.path,p,n._queryProjection).forEach(ne=>x.add(ne));x=Array.from(x)}else x=EI(c,w,n.path,p,n._queryProjection);R=!0}else{let B,K,k,G,ne=C,$=C.schema.options.discriminatorKey;if(!T&&$&&(G=yo.getValue($,w))){let V=Bwt(C.discriminators,G)||C;if(V!=null)ne=V;else try{ne=BY(C.db,G)}catch(me){return me}k=ne.schema._getSchema(n.path),k&&k.caster&&(k=k.caster)}else k=T;if(I&&I.path.endsWith(".$*")?M=!I.$isMongooseArray&&!I._arrayPath:k!=null&&(M=!k.$isMongooseArray&&!k._arrayPath),(B=pc(k,"options.ref"))!=null)if(k!=null&&typeof B=="function"&&n.path.endsWith("."+k.path)){x=new Set;let V=n.path.slice(0,n.path.length-k.path.length-1),me=oy.get(V,w,xS),Oe=Array.isArray(me)?yo.array.flatten(me):me?[me]:[];for(let fe of Oe)x.add(kY(B,fe));Oe.length===0?x=[kY(B,w)]:x=Array.from(x)}else B=kY(B,w),x=[B];else if((k=pc(T,"options.refPath"))!=null)if(R=!0,typeof K=="function"){let V=n.path.slice(0,n.path.length-k.path.length-1),me=oy.get(V,w,xS),Oe=Array.isArray(me)?yo.array.flatten(me):me?[me]:[];x=new Set;for(let fe of Oe)K=K.call(fe,fe,n.path),EI(K,w,n.path,p,n._queryProjection).forEach(He=>x.add(He));x=Array.from(x)}else x=EI(K,w,n.path,p,n._queryProjection)}if(!x)if(n._localModel==null)x=[C.modelName];else return{modelNames:x,justOne:M,isRefPath:R,refPath:c};return Array.isArray(x)||(x=[x]),{modelNames:x,justOne:M,isRefPath:R,refPath:c}}};function $wt(t,e,r,n){let i=[],s={},o=n.virtual;for(let a of e){let u=null,c={},l,d=n.nestedSchemaPath?n.nestedSchemaPath+".":"";typeof r.localField=="string"?l=r.localField:typeof o.options.localField=="function"?l=d+o.options.localField.call(a,a):Array.isArray(o.options.localField)?l=o.options.localField.map(w=>d+w):l=d+o.options.localField,c.count=o.options.count,o.options.skip!=null&&!Object.hasOwn(r,"skip")&&(r.skip=o.options.skip),o.options.limit!=null&&!Object.hasOwn(r,"limit")&&(r.limit=o.options.limit),o.options.perDocumentLimit!=null&&!Object.hasOwn(r,"perDocumentLimit")&&(r.perDocumentLimit=o.options.perDocumentLimit);let p=o.options.foreignField;if(!l||!p)return new FY(`Cannot populate virtual \`${r.path}\` on model \`${t.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);typeof l=="function"&&(l=l.call(a,a)),typeof p=="function"&&(p=p.call(a,a)),c.isRefPath=!1;let f=null;"justOne"in r&&r.justOne!==void 0&&(f=r.justOne),u=o._getModelNamesForPopulate(a),o.options.refPath?(f=!!o.options.justOne,c.isRefPath=!0):o.options.ref&&(f=!!o.options.justOne),c.isVirtual=!0,c.virtual=o,c.justOne=f;let h=pc(c,"virtual.options.match",null)||pc(c,"virtual.options.options.match",null),y=pc(r,"match",null)||h,E=typeof y=="function";if(E&&(y=y.call(a,a,c.virtual)),Array.isArray(l)&&Array.isArray(p)&&l.length===p.length){y=Object.assign({},y);for(let w=1;w<l.length;++w)y[p[w]]=LAe(oy.get(l[w],a,xS),t.schema),E=!0;l=l[0],p=p[0]}c.localField=l,c.foreignField=p,c.match=y,c.hasMatchFunction=E,qY(y);let v=qAe(a,l,t,r,o);try{NY(t,i,s,u,r,c,v,a)}catch(w){return w}}return i}function NY(t,e,r,n,i,s,o,a,u,c){let l=i.connection!=null?i.connection:t.db;if(c=c===void 0?o:c,Array.isArray(c)&&(c=yo.cloneArrays(c)),n==null)return;let d=yo.array.flatten(n),p=d.length;for(;p--;){let f=d[p];if(f==null)continue;let h;if(i.model&&i.model[MY])h=i.model;else if(f[MY])h=f,f=h.modelName;else try{h=BY(l,f)}catch(w){if(o!==void 0)throw w;h=null}let y=o,E=s.modelNamesInOrder?s.modelNamesInOrder:n;s.isRefPath&&Array.isArray(o)&&o.length===E.length&&(y=BAe(o,E,f));let v=i.perDocumentLimit==null?pc(i,"options.perDocumentLimit",null):i.perDocumentLimit;if(!r[f]||v!=null){let w={model:h};s.isVirtual&&pc(s.virtual,"options.options")?w.options=Fwt(s.virtual.options.options):u!=null&&(w.options=Object.assign({},u)),yo.merge(w,i),i[DY]=h,w[DY]=h,r[f]={model:h,options:w,match:s.hasMatchFunction?[s.match]:s.match,docs:[a],ids:[y],allIds:[o],unpopulatedValues:[c],localField:new Set([s.localField]),foreignField:new Set([s.foreignField]),justOne:s.justOne,isVirtual:s.isVirtual,virtual:s.virtual,count:s.count,[DY]:h},e.push(r[f])}else r[f].localField.add(s.localField),r[f].foreignField.add(s.foreignField),r[f].docs.push(a),r[f].ids.push(y),r[f].allIds.push(o),r[f].unpopulatedValues.push(c),s.hasMatchFunction&&r[f].match.push(s.match)}}function BY(t,e){return t.models[e]==null&&t._parent!=null?BY(t._parent,e):t.model(e)}function BAe(t,e,r){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)?t.flatMap((n,i)=>BAe(n,e[i],r)):[]:e===r?Array.isArray(t)?yo.array.flatten(t):[t]:[]}function kY(t,e){return typeof t=="function"&&!t[MY]?t.call(e,e):t}function qAe(t,e,r,n,i,s){let o=r.schema._getPathType(e),a=o==="real"?r.schema.path(e):o.schema,u=a&&a.getters?a.getters:[];e=a!=null&&a.instance==="Embedded"?e+"._id":e;let c=pc(n,"options",{}),l="getters"in c?c.getters:pc(i,"options.getters",!1);if(u.length!==0&&l){let d=t.$__!=null?t:r.hydrate(t),p=yo.getValue(e,t);if(Array.isArray(p)){let f=yo.getValue(e.split(".").slice(0,-1),d);return p.map((h,y)=>a.applyGetters(h,f[y]))}else return a.applyGetters(p,d)}else return LAe(oy.get(e,t,xS),s)}function LAe(t,e){if(t!=null&&t.$__!=null)return t._doc._id;if(t!=null&&t._id!=null&&(e==null||!e.$isSchemaMap))return t._id;if(Array.isArray(t)){let r=t.__array!=null?t.__array:t;for(let n=0;n<r.length;++n)r[n]!=null&&r[n].$__!=null&&(r[n]=r[n]._doc._id);return yo.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(qwt(t)==="Object"&&(e==null||e[PY]==null)){let r=[];for(let n of Object.keys(t))r.push(t[n]);return r}return t instanceof Map?Array.from(t.values()):t}function Uwt(t,e,r,n,i,s){if(!r.isRefPath||i==null)return;let o=i.split("."),a="",u;for(let c=0;c<o.length;++c){let l=o[c];a=a+(a.length===0?"":".")+l;let d=e.path(a);if(d!=null&&d.$isMongooseArray&&d.caster.discriminators!=null&&Object.keys(d.caster.discriminators).length!==0){let p=yo.getValue(a,t),f=n.path.substring(a.length+1),h=d.caster.schema.options.discriminatorKey;u=[];for(let y of p){let E=yo.getValue(h,y),v=d.caster.discriminators[E],w=v&&v.schema;if(w==null)continue;let T=w.path(f);if(T==null||T.options.refPath==null){let C=yo.getValue(r.localField.substring(a.length+1),y);s.forEach((x,R)=>{x===C&&(s[R]=Nwt(x))});continue}let A=yo.getValue(o.slice(c+1).join("."),y);u.push(A)}}}return u}function qY(t){if(t!=null&&typeof t=="object")for(let e of Object.keys(t)){if(e==="$where")throw new FY("Cannot use $where filter with populate() match");t[e]!=null&&typeof t[e]=="object"&&qY(t[e])}}});var KAe=b(($gr,UAe)=>{"use strict";var Kwt=ni();UAe.exports=function(e){if(Array.isArray(e)){let n=Object.keys(e[0]);return n.length===1&&n[0]==="_id"&&e[0]._id!=="hashed"}if(typeof e!="object")return!1;let r=Kwt(e,"key",{});return Object.keys(r).length===1&&Object.hasOwn(r,"_id")}});var HAe=b((Ugr,GAe)=>{"use strict";var vI=ni(),VAe=wt();GAe.exports=function(e,r,n){if(n.textIndexVersion!=null){delete n.key._fts,delete n.key._ftsx;let a={...n.weights,...n.key};if(Object.keys(a).length!==Object.keys(e).length)return!1;for(let u of Object.keys(a)){if(!(u in e))return!1;let c=a[u];if(c!==vI(r,"weights."+u)&&!(c===1&&vI(r,"weights."+u)==null))return!1}return r.default_language!==n.default_language?n.default_language==="english"&&r.default_language==null:!0}let i=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let a of i)if(!(!(a in r)&&!(a in n))){if(a==="collation"){if(r[a]==null||n[a]==null)return r[a]==null&&n[a]==null;let u=Object.keys(r.collation),c=r.collation,l=n.collation;for(let d of u)if(vI(c,d)!==vI(l,d))return!1}else if(!VAe.deepEqual(r[a],n[a]))return!1}let s=Object.keys(e),o=Object.keys(n.key);if(s.length!==o.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==o[a]||!VAe.deepEqual(e[s[a]],n.key[o[a]]))return!1;return!0}});var WAe=b((Kgr,zAe)=>{"use strict";zAe.exports=function(e,r){if(r.timeseries==null)return!1;let{timeField:n,metaField:i}=r.timeseries;return typeof n!="string"||typeof i!="string"?!1:Object.keys(e.key).length===2&&e.key[n]===1&&e.key[i]===1}});var XAe=b((Vgr,QAe)=>{"use strict";var Vwt=iI();function Gwt(t,e){return YAe({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"schema"})}function Hwt(t,e){return YAe({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"db"})}QAe.exports={getRelatedSchemaIndexes:Gwt,getRelatedDBIndexes:Hwt};function YAe({baseModelName:t,discriminatorMapping:e,indexes:r,indexesType:n}){let i=e&&e.key,s=e&&e.value;return i?t?r.filter(a=>{let u=JAe(a,n);return u&&u[i]===s}):r.filter(a=>{let u=JAe(a,n);return!u||!u[i]||Vwt(u[i])&&!("$eq"in u[i])}):r}function JAe(t,e){if(e==="schema"){let r=t[1];return r&&r.partialFilterExpression}return t.partialFilterExpression}});var e8e=b((Ggr,ZAe)=>{"use strict";ZAe.exports=zwt;function zwt(t,e,r){let n=0,i=0,s=null;if(e<=0)throw new Error("Limit must be positive");if(t.length===0)return r(null,[]);for(let c=0;c<t.length&&c<e;++c)o();function o(){t[i+n](u(i+n)),++n}let a=[];function u(c){return(l,d)=>{if(--n,++i,s==null){if(l!=null)return s=l,r(s);if(a[c]=d,i===t.length)return r(null,a);i+n<t.length&&o()}}}}});var r8e=b((Hgr,t8e)=>{"use strict";t8e.exports=function t(e,r,n){if(r!=null)for(let i=0;i<r.length;++i)Array.isArray(r[i])?t(e,r[i],n+"."+i):e.push(n+"."+i)}});var a8e=b((zgr,o8e)=>{"use strict";var n8e=ni(),i8e=ou(),s8e=pY();o8e.exports=function(e,r,n){let i=s8e(n8e(r,"select",null),!0)||s8e(n8e(r,"options.select",null),!0);if(i!=null){for(let s of e)if(Object.hasOwn(i,"-"+s))for(let o of n)o.$__!=null?i8e.unset(s,o._doc):i8e.unset(s,o)}}});var CY=b((O8e,x8e)=>{"use strict";var Wwt=SY(),Jwt=hz(),Id=ac(),Ywt=aO(),jY=require("events").EventEmitter,KY=q0(),AI=CJ(),Tt=Ea(),Qwt=CO(),Xwt=vz(),SI=aI(),Zwt=j9e(),$Y=ph(),wI=j0(),y8e=_z(),u8e=Ez(),e9t=OO(),t9t=U9e(),r9t=AY(),n9t=rx(),g8e=G9e(),i9t=W9e(),s9t=XJ(),b8e=X9e(),o9t=eAe(),_8e=rAe(),a9t=aAe(),E8e=ZJ(),u9t=lAe(),c9t=OAe(),l9t=jJ(),uf=Vn(),d9t=DAe(),v8e=qJ(),LY=xJ(),S8e=kO(),p9t=Ax(),UY=zW(),DS=ni(),f9t=qo(),IS=uc(),h9t=$Ae(),kS=Vu(),VY=wl().internalToObjectOptions,GY=KAe(),w8e=HAe(),m9t=WAe(),{getRelatedDBIndexes:y9t,getRelatedSchemaIndexes:g9t}=XAe(),HY=yW(),b9t=PO(),_9t=TS(),E9t=e8e(),v9t=EY(),A8e=r8e(),S9t=a8e(),w9t=DJ(),c8e=require("util"),nn=wt(),A9t=Lz(),C9t=Sz(),T9t=wO(),ay=$J(),uy=Symbol("mongoose#Model#collection"),cy=Symbol("mongoose#Model#db"),C8e=nt().modelSymbol,RS=Symbol("mongoose#Model#subclassed"),{VERSION_INC:l8e,VERSION_WHERE:d8e,VERSION_ALL:O9t}=Id,x9t=Object.assign({},VY,{bson:!0});function De(t,e,r){if(e instanceof $Y)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof t=="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");Id.call(this,t,e,r)}Object.setPrototypeOf(De.prototype,Id.prototype);De.prototype.$isMongooseModelPrototype=!0;De.prototype.db;De.useConnection=function(e){if(!e)throw new Error("Please provide a connection.");this.db&&(delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[cy],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[uy]),this.db=e;let r=e.collection(this.collection.collectionName,e.options);return this.prototype.collection=r,this.prototype.$collection=r,this.prototype[uy]=r,this.prototype.db=e,this.prototype[cy]=e,this.collection=r,this.$__collection=r,e.models[this.modelName]=this,this};De.prototype.collection;De.prototype.$__collection;De.prototype.modelName;De.prototype.$where;De.prototype.baseModelName;De.events;De._middleware;function T8e(t,e){if(t.$where!=null)for(let r of Object.keys(t.$where))e[r]=t.$where[r]}De.prototype.$__handleSave=function(t,e){let r={};E8e(this.$__schema,t),typeof t.writeConcern<"u"?(r.writeConcern={},"w"in t.writeConcern&&(r.writeConcern.w=t.writeConcern.w),"j"in t.writeConcern&&(r.writeConcern.j=t.writeConcern.j),"wtimeout"in t.writeConcern&&(r.writeConcern.wtimeout=t.writeConcern.wtimeout)):("w"in t&&(r.w=t.w),"j"in t&&(r.j=t.j),"wtimeout"in t&&(r.wtimeout=t.wtimeout)),"checkKeys"in t&&(r.checkKeys=t.checkKeys);let n=this.$session(),i=this[cy].base.transactionAsyncLocalStorage?.getStore();if(n!=null?r.session=n:!Object.hasOwn(t,"session")&&i?.session!=null&&(r.session=i.session),this.$isNew){let a=this.toObject(x9t);if((a||{})._id===void 0){kS(function(){e(new Tt("document must have an _id before saving"))});return}this.$__version(!0,a),this[uy].insertOne(a,r).then(u=>e(null,u),u=>{U_(this,!0),e(u,null)}),this.$__reset(),U_(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let s=this.$__delta();if(t.pathsToSave){for(let a in s[1].$set)if(!t.pathsToSave.includes(a)){if(t.pathsToSave.some(u=>a.slice(0,u.length)===u&&a.charAt(u.length)==="."))continue;delete s[1].$set[a]}}if(s){if(s instanceof Tt){e(s);return}let a=this.$__where(s[0]);if(a instanceof Tt){e(a);return}T8e(this,a);let u=s[1];if(this.$__schema.options.minimize){for(let c of Object.values(u))if(c!=null)for(let l of Object.keys(c))c[l]==null||typeof c[l]!="object"||nn.isPOJO(c[l])&&(A9t(c[l]),Object.keys(c[l]).length===0&&(delete c[l],u.$unset=u.$unset||{},u.$unset[l]=1))}this[uy].updateOne(a,u,r).then(c=>{c==null?c={$where:a}:c.$where=a,e(null,c)},c=>{this.$__undoReset(),e(c)})}else{o.call(this);return}this.$__.modifiedPaths=this.modifiedPaths().concat(Object.keys(this.$__.activePaths.getStatePaths("default"))),this.$__reset(),U_(this,!1);function o(){let a=Object.assign({},t,r),u=this.$__where(),c=this.$__schema.options.optimisticConcurrency;if(c&&!Array.isArray(c)){let l=this.$__schema.options.versionKey,d=this.$__getValue(l);d!=null&&(u[l]=d)}s9t(this.$__schema,a),this.constructor.collection.findOne(u,a).then(l=>{e(null,{$where:u,matchedCount:l?1:0})}).catch(e)}};De.prototype.$__save=function(t,e){this.$__handleSave(t,(r,n)=>{if(r)return r=this.$__schema._transformDuplicateKeyError(r),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},a=>{e(a,this)});let i=0;if((t!=null?t.writeConcern!=null?t.writeConcern.w:t.w:0)!==0){if(n!=null&&(Array.isArray(n)?i=n.length:n.matchedCount!=null?i=n.matchedCount:i=n),this.$__.version&&!this.$__.inserting){if(i<=0){let a=this.$__schema.options.versionKey,u=this.$__getValue(a)||0;this.$__undoReset();let c=this.$__.$versionError||new y8e(this,u,this.$__.modifiedPaths);return e(c,this)}this._applyVersionIncrement()}if(n!=null&&i<=0)return this.$__undoReset(),r=new Ywt(n.$where,this.constructor.modelName,i,n),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},u=>{e(u,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,i),this.constructor.emit("save",this,i),e(null,this)})};function I9t(t,e,r){let n=t.$__schema.options.versionKey;if(!n)return null;let i=t.$__getValue(n)||0;return new y8e(t,i,e.concat(r))}De.prototype.save=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new Tt("Model.prototype.save() no longer accepts a callback");let r;if(this.$op="save",this.$__.saving?r=new u8e(this):this.$__.saving=new u8e(this),e=new Zwt(e),Object.hasOwn(e,"session")&&this.$session(e.session),this.$__.timestamps!=null&&(e.timestamps=this.$__.timestamps),this.$__.$versionError=I9t(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),r)throw this.$__handleReject(r),r;return this.$__.saveOptions=e,await new Promise((n,i)=>{this.$__save(e,s=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,s!=null)return this.$__handleReject(s),i(s);n()})}),this};De.prototype.$save=De.prototype.save;De.prototype.$__version=function(t,e){let r=this.$__schema.options.versionKey;if(t===!0){r&&(w9t(e,r,0),this.$__setValue(r,0));return}if(r!==!1&&this.$__isSelected(r)){if(d8e===(d8e&this.$__.version)){let n=this.$__getValue(r);n!=null&&(t[r]=n)}l8e===(l8e&this.$__.version)&&(DS(e.$set,r,null)!=null?++e.$set[r]:(e.$inc=e.$inc||{},e.$inc[r]=1))}};De.prototype.increment=function(){return this.$__.version=O9t,this};De.prototype.$__where=function(e){return e||(e={}),e._id||(e._id=this._doc._id),this._doc._id===void 0?new Tt("No _id found on document!"):e};De.prototype.deleteOne=function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new Tt("Model.prototype.deleteOne() no longer accepts a callback");e||(e={}),Object.hasOwn(e,"session")&&this.$session(e.session);let r=this,n=this.$__where();if(n instanceof Error)throw n;let i=r.constructor.deleteOne();return this.$session()!=null&&("session"in i.options||(i.options.session=this.$session())),i.pre(async function(){await new Promise((o,a)=>{r.constructor._middleware.execPre("deleteOne",r,[r,e],u=>{i.deleteOne(n,e),u?a(u):o()})}),r.$where!=null&&this.where(r.$where)}),i.pre(function(o){UY(r.$getAllSubdocs(),(a,u)=>{a.constructor._middleware.execPre("deleteOne",a,[a,e],u)},o)}),i.pre(function(o){return r.$__.isDeleted?o(KY.skipWrappedFunction()):o()}),i.post(function(o){UY(r.$getAllSubdocs(),(a,u)=>{a.constructor._middleware.execPost("deleteOne",a,[a],{},u)},o)}),i.post(function(o){r.constructor._middleware.execPost("deleteOne",r,[r],{},o)}),i.transform(function(o){return o?.deletedCount>0&&r.$isDeleted(!0),o}),i};De.prototype.$model=function(e){return arguments.length===0?this.constructor:this[cy].model(e)};De.prototype.model=De.prototype.$model;De.exists=function(e,r){if(Nt(this,"exists"),typeof arguments[2]=="function")throw new Tt("Model.exists() no longer accepts a callback");return this.findOne(e).select({_id:1}).lean().setOptions(r)};De.discriminator=function(t,e,r){let n;if(typeof t=="function"&&(n=t,t=nn.getFunctionName(n),!(n.prototype instanceof De)))throw new Tt("The provided class "+t+" must extend Model");r=r||{};let i=nn.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0,o=typeof r.mergePlugins=="boolean"?r.mergePlugins:!0,a=typeof r.overwriteModels=="boolean"?r.overwriteModels:!1;if(Nt(this,"discriminator"),nn.isObject(e)&&!e.instanceOfSchema&&(e=new $Y(e)),e instanceof $Y&&s&&(e=e.clone()),e=p9t(this,t,e,i,o,r.mergeHooks,a),this.db.models[t]&&!e.options.overwriteModels&&!a)throw new Xwt(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,n=this.db.model(n||t,e,this.$__collection.name),this.discriminators[t]=n;let u=this.discriminators[t];if(Object.setPrototypeOf(u.prototype,this.prototype),Object.defineProperty(u,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),g8e(u,e),_8e(u,e),this[RS]!=null)for(let c of this[RS])c.discriminators=c.discriminators||{},c.discriminators[t]=n.__subclass(n.db,e,c.collection.name);return u};function Nt(t,e){if(t==null||t===global)throw new Tt("`Model."+e+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+e+"()` where `MyModel` is a Mongoose model.");if(t[C8e]==null)throw new Tt("`Model."+e+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+e+"()`")}for(let t in jY.prototype)De[t]=jY.prototype[t];De.init=function(){if(Nt(this,"init"),typeof arguments[0]=="function")throw new Tt("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let e=this.db,r=async()=>{if(nn.getOption("autoIndex",this.schema.options,e.config,e.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{if(nn.getOption("autoSearchIndex",this.schema.options,e.config,e.base.options))return await this.createSearchIndexes()},i=async()=>{let a=nn.getOption("autoCreate",this.schema.options,e.config);if(a==null&&(await e._waitForConnect(!0),a=nn.getOption("autoCreate",this.schema.options,e.config,e.base.options)),!!a)return await this.createCollection()};this.$init=i().then(()=>r()).then(()=>n());let s=this.$init.catch,o=this;return this.$init.catch=function(){return o.$caught=!0,s.apply(o.$init,arguments)},this.$init};De.createCollection=async function(e){if(Nt(this,"createCollection"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Tt("Model.createCollection() no longer accepts a callback");let r=await new Promise((u,c)=>{this.hooks.execPre("createCollection",this,[e],l=>{if(l!=null)return l instanceof KY.skipWrappedFunction?u(!0):c(l);u()})}),n=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;n!=null&&(e=Object.assign({},n,e));let i=this&&this.schema&&this.schema.options&&this.schema.options.collation;i!=null&&(e=Object.assign({collation:i},e));let s=this&&this.schema&&this.schema.options&&this.schema.options.capped;s!=null&&(typeof s=="number"?e=Object.assign({capped:!0,size:s},e):typeof s=="object"&&(e=Object.assign({capped:!0},s,e)));let o=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;o!=null&&(e=Object.assign({timeseries:o},e),e.expireAfterSeconds!=null||(e.expires!=null?nn.expires(e):this.schema.options.expireAfterSeconds!=null?e.expireAfterSeconds=this.schema.options.expireAfterSeconds:this.schema.options.expires!=null&&(e.expires=this.schema.options.expires,nn.expires(e))));let a=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;a!=null&&(e=Object.assign({clusteredIndex:{...a,unique:!0}},e));try{r||await this.db.createCollection(this.$__collection.collectionName,e)}catch(u){u!=null&&(u.name!=="MongoServerError"||u.code!==48)&&await new Promise((c,l)=>{let d={error:u};this.hooks.execPost("createCollection",this,[null],d,p=>{if(p!=null)return l(p);c()})})}return await new Promise((u,c)=>{this.hooks.execPost("createCollection",this,[this.$__collection],l=>{if(l!=null)return c(l);u()})}),this.$__collection};De.syncIndexes=async function(e){if(Nt(this,"syncIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Tt("Model.syncIndexes() no longer accepts a callback");if(e?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??this.db.base?.options?.autoCreate??!0)try{await this.createCollection()}catch(s){if(s!=null&&(s.name!=="MongoServerError"||s.code!==48))throw s}let n=await this.diffIndexes({indexOptionsToCreate:!0}),i=await this.cleanIndexes({...e,toDrop:n.toDrop});return await this.createIndexes({...e,toCreate:n.toCreate}),i};De.createSearchIndex=async function(e){return Nt(this,"createSearchIndex"),await this.$__collection.createSearchIndex(e)};De.updateSearchIndex=async function(e,r){return Nt(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(e,r)};De.dropSearchIndex=async function(e){return Nt(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(e)};De.listSearchIndexes=async function(e){return Nt(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(e)).toArray()};De.diffIndexes=async function(e){if(typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Tt("Model.syncIndexes() no longer accepts a callback");let r=this,n=await r.listIndexes().catch(u=>{if(u.codeName!="NamespaceNotFound")throw u});n===void 0&&(n=[]),n=y9t(r,n);let i=r.schema,s=g9t(r,i.indexes()),o=D9t(i,s,n),a=R9t(i,s,n,o,e);return{toDrop:o,toCreate:a}};function R9t(t,e,r,n,i){let s=[],o=i?.indexOptionsToCreate??!1;for(let[a,u]of e){let c=!1,l=HY(t,uf(u));for(let d of r)if(!GY(d)&&w8e(a,l,d)&&!n.includes(d.name)){c=!0;break}c||(o?s.push([a,u]):s.push(a))}return s}function D9t(t,e,r){let n=[];for(let i of r){let s=!1;if(!GY(i)&&!m9t(i,t.options)){for(let[o,a]of e){let u=HY(t,uf(a));if(b8e(o,u,t.options),w8e(o,u,i)){s=!0;break}}s||n.push(i.name)}}return n}De.cleanIndexes=async function(e){if(Nt(this,"cleanIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Tt("Model.cleanIndexes() no longer accepts a callback");let r=this;if(Array.isArray(e&&e.toDrop))return await p8e(e.toDrop,r,e);let n=await r.diffIndexes();return await p8e(n.toDrop,r,e)};async function p8e(t,e,r){if(t.length===0)return[];let n=e.$__collection;return r&&r.hideIndexes?await Promise.all(t.map(i=>e.db.db.command({collMod:n.collectionName,index:{name:i,hidden:!0}}))):await Promise.all(t.map(i=>n.dropIndex(i))),t}De.listIndexes=async function(){if(Nt(this,"listIndexes"),typeof arguments[0]=="function")throw new Tt("Model.listIndexes() no longer accepts a callback");return this.$__collection.buffer&&await new Promise(e=>{this.$__collection.addQueue(e)}),this.$__collection.listIndexes().toArray()};De.ensureIndexes=async function(e){if(Nt(this,"ensureIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Tt("Model.ensureIndexes() no longer accepts a callback");await new Promise((r,n)=>{k9t(this,e,i=>{if(i!=null)return n(i);r()})})};De.createIndexes=async function(e){if(Nt(this,"createIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new Tt("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(e)};function k9t(t,e,r){let n=Array.isArray(e?.toCreate)?e.toCreate:t.schema.indexes(),i;e=e||{};let s=function(d){d&&!t.$caught&&t.emit("error",d),t.emit("index",d||i),r&&r(d||i)};for(let d of n)GY(d)&&nn.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+t.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!n.length){kS(function(){s()});return}let o=function(d,p,f,h){t.emit("index-single-done",d,p,f,h)},a=function(d,p){t.emit("index-single-start",d,p)},u=t.schema._baseSchema,c=u?u.indexes():[];kS(function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()});function l(){if(e._automatic&&(t.schema.options.autoIndex===!1||t.schema.options.autoIndex==null&&t.db.config.autoIndex===!1))return s();let d=n.shift();if(!d)return s();if(e._automatic&&d[1]._autoIndex===!1||c.find(y=>nn.deepEqual(y,d)))return l();let p=uf(d[0]),f=uf(d[1]);delete f._autoIndex,HY(t.schema,f),E8e(t.schema,f),b8e(p,f,t.schema.options),a(p,e),"background"in e&&(f.background=e.background);let h=null;try{h=t.collection.createIndex(p,f)}catch(y){i||(i=y),t.$caught||t.emit("error",y),o(y,p,f),l();return}h.then(y=>{o(null,p,f,y),l()},y=>{i||(i=y),t.$caught||t.emit("error",y),o(y,p,f),l()})}}De.createSearchIndexes=async function(){Nt(this,"createSearchIndexes");let e=[];for(let r of this.schema._searchIndexes)e.push(await this.createSearchIndex(r));return e};De.schema;De.db;De.collection;De.$__collection;De.base;De.discriminators;De.translateAliases=function(e,r){Nt(this,"translateAliases");let n=(i,s)=>{let o,a=[],u=i.split("."),c=this.schema;for(let d in u){let p=u[d];if(c&&c.aliases[p]){if(o=c.aliases[p],r&&o in e)throw new Tt(`Provided object has both field "${p}" and its alias "${o}"`);a.push(o)}else o=p,a.push(p);c&&c.paths[o]?c=c.paths[o].schema:c=null}let l=a.join(".");return e instanceof Map?e.set(l,s):e[l]=s,l!==i&&(e instanceof Map?e.delete(i):delete e[i]),e};if(typeof e=="object"){if(e instanceof Map)for(let i of new Map(e))e=n(i[0],i[1]);else for(let i of Object.keys(e))if(e=n(i,e[i]),i[0]==="$")if(Array.isArray(e[i]))for(let s in e[i])e[i][s]=this.translateAliases(e[i][s]);else this.translateAliases(e[i]);return e}else return e};De.deleteOne=function(e,r){if(Nt(this,"deleteOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.prototype.deleteOne() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteOne(e)};De.deleteMany=function(e,r){if(Nt(this,"deleteMany"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.deleteMany() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteMany(e)};De.find=function(e,r,n){if(Nt(this,"find"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Tt("Model.find() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.find(e)};De.findById=function(e,r,n){if(Nt(this,"findById"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.findById() no longer accepts a callback");return this.findOne({_id:e},r,n)};De.findOne=function(e,r,n){if(Nt(this,"findOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.findOne() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.findOne(e)};De.estimatedDocumentCount=function(e){return Nt(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(e)};De.countDocuments=function(e,r){if(Nt(this,"countDocuments"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.countDocuments() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return r!=null&&n.setOptions(r),n.countDocuments(e)};De.distinct=function(e,r,n){if(Nt(this,"distinct"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.distinct() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return n!=null&&i.setOptions(n),i.distinct(e,r)};De.where=function(e,r){Nt(this,"where");let n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)};De.$where=function(){Nt(this,"$where");let e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)};De.findOneAndUpdate=function(t,e,r){if(Nt(this,"findOneAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Tt("Model.findOneAndUpdate() no longer accepts a callback");let n;r&&(n=r.fields||r.projection),e=uf(e,{depopulate:!0,_isNested:!0}),v8e(e,r,this.schema.options.versionKey);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndUpdate(t,e,r)};De.findByIdAndUpdate=function(t,e,r){if(Nt(this,"findByIdAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Tt("Model.findByIdAndUpdate() no longer accepts a callback");return t instanceof Id&&(t=t._doc._id),this.findOneAndUpdate.call(this,{_id:t},e,r)};De.findOneAndDelete=function(t,e){if(Nt(this,"findOneAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.findOneAndDelete() no longer accepts a callback");let r;e&&(r=e.select,e.select=void 0);let n=new this.Query({},{},this,this.$__collection);return n.select(r),n.findOneAndDelete(t,e)};De.findByIdAndDelete=function(t,e){if(Nt(this,"findByIdAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new Tt("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:t},e)};De.findOneAndReplace=function(t,e,r){if(Nt(this,"findOneAndReplace"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new Tt("Model.findOneAndReplace() no longer accepts a callback");let n;r&&(n=r.select,r.select=void 0);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndReplace(t,e,r)};De.create=async function(e,r){if(typeof r=="function"||typeof arguments[2]=="function")throw new Tt("Model.create() no longer accepts a callback");Nt(this,"create");let n,i=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,r=r!=null&&typeof r=="object"?r:{};else{let a=arguments[arguments.length-1];if(r={},typeof a=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new Tt("Model.create() no longer accepts a callback");n=[...arguments],n.length>1&&!a&&n.pop(),n.length===2&&n[0]!=null&&n[1]!=null&&n[0].session==null&&a&&f9t(a.session)==="ClientSession"&&!this.schema.path("session")&&nn.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(n.length===0)return Array.isArray(e)?[]:null;let s=[],o=typeof r.aggregateErrors=="boolean"?!r.aggregateErrors:!0;if(delete r.aggregateErrors,r.session&&!r.ordered&&n.length>1)throw new Tt("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(r.ordered){for(let a=0;a<n.length;a++)try{let u=n[a],c=this.discriminators&&u[i]!=null?this.discriminators[u[i]]||IS(this.discriminators,u[i]):this;if(c==null)throw new Tt(`Discriminator "${u[i]}" not found for model "${this.modelName}"`);let l=u;l instanceof c||(l=new c(l)),await l.$save(r),s.push(l)}catch(u){if(!o)s.push(u);else throw u}return s}else if(!o)s=await Promise.allSettled(n.map(async a=>{let u=this.discriminators&&a[i]!=null?this.discriminators[a[i]]||IS(this.discriminators,a[i]):this;if(u==null)throw new Tt(`Discriminator "${a[i]}" not found for model "${this.modelName}"`);let c=a;return c instanceof u||(c=new u(c)),await c.$save(r),c})),s=s.map(a=>a.status==="fulfilled"?a.value:a.reason);else{let a=null;if(s=await Promise.all(n.map(async u=>{let c=this.discriminators&&u[i]!=null?this.discriminators[u[i]]||IS(this.discriminators,u[i]):this;if(c==null)throw new Tt(`Discriminator "${u[i]}" not found for model "${this.modelName}"`);try{let l=u;return l instanceof c||(l=new c(l)),await l.$save(r),l}catch(l){a||(a=l)}})),a)throw a}return!Array.isArray(e)&&n.length===1?s[0]:s};De.insertOne=async function(e,r){Nt(this,"insertOne");let n=this.schema.options.discriminatorKey,i=this.discriminators&&e[n]!=null?this.discriminators[e[n]]||IS(this.discriminators,e[n]):this;if(i==null)throw new Tt(`Discriminator "${e[n]}" not found for model "${this.modelName}"`);return e instanceof i||(e=new i(e)),await e.$save(r)};De.watch=function(t,e){Nt(this,"watch");let r=n=>{if(t=t||[],v9t(t,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let i=this.$__collection.watch(t,e);n(null,i)});else{let i=this.$__collection.watch(t,e);n(null,i)}};return e=e||{},e.model=this,new Jwt(r,t,e)};De.startSession=function(){return Nt(this,"startSession"),this.db.startSession.apply(this.db,arguments)};De.insertMany=async function(e,r){if(Nt(this,"insertMany"),typeof r=="function"||typeof arguments[2]=="function")throw new Tt("Model.insertMany() no longer accepts a callback");return new Promise((n,i)=>{this.$__insertMany(e,r,(s,o)=>{if(s!=null)return i(s);n(o)})})};De.$__insertMany=function(t,e,r){let n=this;typeof e=="function"&&(r=e,e=null),r=r||nn.noop,e=e||{};let i=e.limit||1e3,s=!!e.rawResult,o=typeof e.ordered=="boolean"?e.ordered:!0,a=typeof e.throwOnValidationError=="boolean"?e.throwOnValidationError:!1,u=!!e.lean,c=this.db.base.transactionAsyncLocalStorage?.getStore();(!e||!Object.hasOwn(e,"session"))&&c?.session!=null&&(e={...e,session:c.session}),Array.isArray(t)||(t=[t]);let l=[],d=new Map,p=o?null:new Array(t.length),f=t.map((h,y)=>E=>{if(u)return kS(()=>E(null,h));let v=!1;if(!(h instanceof n)){if(h!=null&&typeof h!="object")return E(new Qwt(h,"arr."+y,"insertMany"));try{h=new n(h),v=!0}catch(w){return E(w)}}if(e.session!=null&&h.$session(e.session),u)return kS(()=>E(null,h));h.$validate(v?{_skipParallelValidateCheck:!0}:null).then(()=>{E(null,h)},w=>{if(o===!1)return w.index=y,l.push(w),d.set(w,y),p[y]=w,E(null,null);E(w)})});E9t(f,i,function(h,y){if(h){r(h,null);return}let E=new Map,v=new Map;for(let A=0;A<y.length;++A)E.set(y[A],A);let w=y.filter(function(A){return A!=null});for(let A=0;A<w.length;++A)v.set(A,E.get(w[A]));if(l.length>0&&l.sort((A,C)=>d.get(A)-d.get(C)),w.length===0){if(a)return r(new AI(l,p,null,"insertMany"));if(s){let A={acknowledged:!0,insertedCount:0,insertedIds:{}};return ay(A,l,l),r(null,A)}r(null,[]);return}let T=u?w:w.map(function(A){return A.$__schema.options.versionKey&&(A[A.$__schema.options.versionKey]=0),(!e||e.timestamps!==!1)&&A.initializeTimestamps&&(!A.$__||A.$__.timestamps!==!1)&&A.initializeTimestamps(),A.$__hasOnlyPrimitiveValues()?A.$__toObjectShallow():A.toObject(VY)});n.$__collection.insertMany(T,e).then(A=>{if(!u)for(let C of w)C.$__reset(),U_(C,!1);if(o===!1&&a&&l.length>0){for(let C=0;C<p.length;++C)p[C]===void 0&&(p[C]=y[C]);return r(new AI(l,p,A,"insertMany"))}if(s){if(o===!1){for(let C=0;C<p.length;++C)p[C]===void 0&&(p[C]=y[C]);ay(A,l,p)}return r(null,A)}if(e.populate!=null)return n.populate(w,e.populate).then(C=>{r(null,C)},C=>{throw C!=null&&(C.insertedDocs=w),C});r(null,w)},A=>{A.writeErrors==null&&(A.result&&A.result.result&&A.result.result.writeErrors)!=null&&(A.writeErrors=A.result.result.writeErrors);let C=A&&A.writeErrors,x=new Set((A&&A.writeErrors||[]).map(M=>M.index));if(A.writeErrors!=null)for(let M=0;M<A.writeErrors.length;++M){let I=v.get(A.writeErrors[M].index);A.writeErrors[M]={...A.writeErrors[M],index:I},o||(p[I]=A.writeErrors[M])}if(!o){for(let M=0;M<p.length;++M)p[M]===void 0&&(p[M]=y[M]);A.results=p}let R=-1;A.insertedDocs=w.filter((M,I)=>{let F=!C||x.has(I);if(o){if(R>-1)return I<R;F&&(R=I)}return!F}).map(function(I){return u||(I.$__reset(),U_(I,!1)),I}),s&&o===!1&&ay(A,l,p),r(A,null)})})};function U_(t,e){t.$isNew=e,t.$emit("isNew",e),t.constructor.emit("isNew",e);let r=t.$getAllSubdocs({useCache:!0});for(let n of r)n.$isNew=e,n.$emit("isNew",e)}De.bulkWrite=async function(e,r){if(Nt(this,"bulkWrite"),typeof r=="function"||typeof arguments[2]=="function")throw new Tt("Model.bulkWrite() no longer accepts a callback");r=r||{};let n=await new Promise((u,c)=>{this.hooks.execPre("bulkWrite",this,[e,r],l=>{if(l!=null)return l instanceof KY.skipWrappedFunction?u(l):c(l);u()})});if(n)return n.args[0];let i=r.ordered==null?!0:r.ordered;if(e.length===0){let u=this.base.driver.get().BulkWriteResult,c=new u(LY(),!1);return c.n=0,ay(c,[],[]),c}let s=r?._skipCastBulkWrite?[]:e.map(u=>l9t(this,u,r)),o=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&o?.session!=null&&(r={...r,session:o.session});let a=null;if(i){await new Promise((u,c)=>{UY(s,(l,d)=>l(d),l=>{if(l)return c(l);u()})});try{a=await this.$__collection.bulkWrite(e,r)}catch(u){await new Promise((c,l)=>{let d={error:u};this.hooks.execPost("bulkWrite",this,[null],d,p=>{if(p!=null)return l(p);c()})})}}else{let u=[],c=[],l=[];s.length>0?(u=await Promise.all(e.map((h,y)=>y>=s.length?y:new Promise(E=>{s[y](v=>{v==null?E(y):(c.push({index:y,error:v}),l[y]=v),E()})}))),u=u.filter(h=>h!=null)):u=e.map((h,y)=>y),c=c.sort((h,y)=>h.index-y.index).map(h=>h.error);let d=u.sort().map(h=>e[h]);if(d.length===0){if(r.throwOnValidationError&&c.length)throw new AI(c,l,a,"bulkWrite");let h=this.base.driver.get().BulkWriteResult,y=new h(LY(),!1);return y.result=LY(),ay(y,c,l),y}let p;[a,p]=await this.$__collection.bulkWrite(d,r).then(h=>[h,null]).catch(h=>[null,h]);let f={};if(p?.writeErrors)for(let h of p.writeErrors)f[h.err.index]=h;for(let h=0;h<u.length;++h)l[u[h]]=f[h]??null;if(p&&(c.length>0&&ay(p,c,l),await new Promise((h,y)=>{let E={error:p};this.hooks.execPost("bulkWrite",this,[null],E,v=>{if(v!=null)return y(v);h()})})),c.length>0){if(r.throwOnValidationError)throw new AI(c,l,a,"bulkWrite");ay(a,c,l)}}return await new Promise((u,c)=>{this.hooks.execPost("bulkWrite",this,[a],l=>{if(l!=null)return c(l);u()})}),a};De.bulkSave=async function(e,r){if(r=r||{},r.timestamps!=null)for(let l of e)l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=r.timestamps;else for(let l of e)l.$__.timestamps!=null&&(l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=l.$__.timestamps);await Promise.all(e.map(l=>M9t(l,r)));let n=this.buildBulkWriteOperations(e,r),i={skipValidation:!0,_skipCastBulkWrite:!0,...r},{bulkWriteResult:s,bulkWriteError:o}=await this.bulkWrite(n,i).then(l=>({bulkWriteResult:l,bulkWriteError:null}),l=>({bulkWriteResult:null,bulkWriteError:l}));if(o!=null&&o.name!=="MongoBulkWriteError")throw o;let a=s?.matchedCount??0,u=s?.insertedCount??0;if(n.length>0&&a+u<n.length&&!o)throw new C9t(this.modelName,e,s);let c=[];for(let l=0;l<e.length;l++){let d=e[l];(o&&o.writeErrors.find(f=>(f.err.op._id||f.err.op.q._id).toString()===d._doc._id.toString()))==null&&c.push(d)}if(await Promise.all(c.map(l=>P9t(l))),o!=null)throw o;return s};function M9t(t,e){return new Promise((r,n)=>{t.schema.s.hooks.execPre("save",t,[e],i=>{if(i){n(i);return}r()})})}function P9t(t){return new Promise((e,r)=>{t.$isNew&&U_(t,!1),t.$__reset(),t._applyVersionIncrement(),t.schema.s.hooks.execPost("save",t,[t],{},n=>{if(n){r(n);return}e()})})}De.applyDefaults=function t(e){if(e==null)return e;if(e.$__!=null){e9t(e,e.$__.fields,e.$__.exclude);for(let r of e.$getAllSubdocs())t(r,r.$__.fields,r.$__.exclude);return e}return t9t(e,this.schema),e};De.applyVirtuals=function(e,r){return e==null||e.$__!=null||u9t(this.schema,e,r),e};De.applyTimestamps=function(e,r){return e==null||e.$__!=null||a9t(this.schema,e,r),e};De.castObject=function(e,r){r=r||{};let n={},i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=S8e(i,e[s])||i);let o=Object.keys(i.paths);for(let u of o){let c=i.path(u);if(!c||!c.$isMongooseArray)continue;let l=DS(e,u);A8e(o,l,u)}let a=null;for(let u of o){let c=i.path(u);if(c==null)continue;let l=DS(e,u,void 0);if(l==null)continue;let d=u.indexOf(".")===-1?[u]:u.split("."),p=n;for(let f=0;f<d.length-1;++f)p[d[f]]==null&&(p[d[f]]=isNaN(d[f+1])?{}:[]),p=p[d[f]];if(c.$isMongooseDocumentArray){let f=c.options?.castNonArrays??c.constructor.options.castNonArrays;if(!Array.isArray(l)){f?p[d[d.length-1]]=[De.castObject.call(c.caster,l)]:r.ignoreCastErrors||(a=a||new wI,a.addError(u,new T9t(u,l)));continue}}if(c.$isSingleNested||c.$isMongooseDocumentArrayElement){try{l=De.castObject.call(c.caster,l)}catch(f){r.ignoreCastErrors||(a=a||new wI,a.addError(u,f));continue}p[d[d.length-1]]=l;continue}try{l=c.cast(l),p[d[d.length-1]]=l}catch(f){r.ignoreCastErrors||(a=a||new wI,a.addError(u,f));continue}}if(a!=null)throw a;return n};De.buildBulkWriteOperations=function(e,r){if(!Array.isArray(e))throw new Error(`bulkSave expects an array of documents to be passed, received \`${e}\` instead`);return i(),e.map((s,o)=>{if(!r.skipValidation){if(!(s instanceof Id))throw new Error(`documents.${o} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(r.validateBeforeSave==null||r.validateBeforeSave){let l=s.validateSync();if(l!=null)throw l}}if(s.isNew){let l={insertOne:{document:s}};return nn.injectTimestampsOption(l.insertOne,r.timestamps),l}let u=s.$__delta();if(u!=null&&!nn.isEmptyObject(u[0])){let l=s.$__where(u[0]),d=u[1];T8e(s,l);let p=this.schema.options.shardKey;if(p){let h=Object.keys(p),y=h.length;for(let E=0;E<y;++E)l[h[E]]=s[h[E]]}s.$__version(l,u);let f={updateOne:{filter:l,update:d}};return nn.injectTimestampsOption(f.updateOne,r.timestamps),f}return null}).filter(s=>s!==null);function i(){r=r||{},r.skipValidation==null&&(r.skipValidation=!1)}};De.hydrate=function(t,e,r){if(Nt(this,"hydrate"),r?.virtuals&&r?.hydratedPopulatedDocs===!1)throw new Tt("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");e!=null&&(t!=null&&t.$__!=null&&(t=t.toObject(VY)),t=i9t(t,e));let n=Bv().createModel(this,t,e,e,r);return n.$init(t,r),n};De.updateMany=function(e,r,n){if(Nt(this,"updateMany"),r==null)throw new Tt("updateMany `update` parameter cannot be nullish");return zY(this,"updateMany",e,r,n)};De.updateOne=function(e,r,n){return Nt(this,"updateOne"),zY(this,"updateOne",e,r,n)};De.replaceOne=function(e,r,n){Nt(this,"replaceOne");let i=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;return i&&!r[i]&&(r[i]=0),zY(this,"replaceOne",e,r,n)};function zY(t,e,r,n,i){let s=new t.Query({},{},t,t.collection);r instanceof Id?r=r.toObject():r=uf(r),i=typeof i=="function"?i:uf(i);let o=t&&t.schema&&t.schema.options&&t.schema.options.versionKey||null;return v8e(n,i,o),s[e](r,n,i)}De.aggregate=function(e,r){if(Nt(this,"aggregate"),typeof r=="function"||typeof arguments[2]=="function")throw new Tt("Model.aggregate() no longer accepts a callback");let n=new Wwt(e||[]);return n.model(this),r!=null&&n.option(r),n};De.validate=async function(e,r,n){if((arguments.length<3||arguments.length===3&&typeof arguments[2]=="function")&&(n=e),typeof n=="function"||typeof arguments[3]=="function")throw new Tt("Model.validate() no longer accepts a callback");let i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=S8e(i,e[s])||i);let o=Object.keys(i.paths);if(r!=null){let c=typeof r=="string"?new Set(r.split(" ")):Array.isArray(r)?new Set(r):new Set(o);o=o.filter(l=>{if(r.pathsToSkip){if(Array.isArray(r.pathsToSkip)){if(r.pathsToSkip.find(f=>f==l))return!1}else if(typeof r.pathsToSkip=="string"&&r.pathsToSkip.includes(l))return!1}let d=l.split("."),p=d[0];for(let f of d){if(c.has(p))return!0;p+="."+f}return c.has(l)})}for(let c of o){let l=i.path(c);if(!l||!l.$isMongooseArray||l.$isMongooseDocumentArray)continue;let d=DS(e,c);A8e(o,d,c)}let a=null;o=new Set(o);try{e=this.castObject(e)}catch(c){a=c;for(let l of Object.keys(a.errors||{}))o.delete(l)}let u=o.size;return new Promise((c,l)=>{if(u===0)return d();for(let f of o){let h=i.path(f);if(h==null){p();continue}let y=f.indexOf(".")===-1?[f]:f.split("."),E=e;for(let w=0;w<y.length-1;++w)E=E[y[w]];let v=DS(e,f,void 0);h.doValidate(v,w=>{w&&(a=a||new wI,a.addError(f,w)),p()},n,{path:f})}function d(){a?l(a):c(e)}function p(){if(--u<=0)return d()}})};De.populate=async function(e,r){if(Nt(this,"populate"),typeof r=="function"||typeof arguments[2]=="function")throw new Tt("Model.populate() no longer accepts a callback");if(r=nn.populate(r),r.length===0)return e;if(r.find(n=>n.ordered))for(let n of r)await f8e(this,e,n);else{let n=[];for(let i of r)n.push(f8e(this,e,i));await Promise.all(n)}return e};var N9t=/\s?-_id\s?/,F9t=/\s?-_id\s?/g;async function f8e(t,e,r){if(r.strictPopulate==null&&(r._localModel!=null&&r._localModel.schema._userProvidedOptions.strictPopulate!=null?r.strictPopulate=r._localModel.schema._userProvidedOptions.strictPopulate:(r._localModel!=null&&t.base.options.strictPopulate!=null||t.base.options.strictPopulate!=null)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),e.length===0||e.every(nn.isNullOrUndefined))return;let n=h9t(t,e,r);if(n instanceof Tt)throw n;let i=n.length,s=[];function o(c){return c!==void 0}let a=!1,u=[];for(let c=0;c<i;++c){let l=n[c],d=l.options.select,p=nn.array.flatten(l.ids,o);p=nn.array.unique(p);let f={};if(f.sort=l&&l.options&&l.options.options&&l.options.options.sort||void 0,f.excludeId=N9t.test(d)||d&&d._id===0,l.options&&l.options.options&&l.options.options.lean&&l.options.options.lean.transform&&(l.options.options._leanTransform=l.options.options.lean.transform,l.options.options.lean=!0),p.length===0||p.every(nn.isNullOrUndefined)){m8e(t,[],l,f);continue}a=!0,typeof r.foreignField=="string"&&(l.foreignField.clear(),l.foreignField.add(r.foreignField));let h=d9t(p,l.match,l.foreignField,l.model,l.options.skipInvalidIds);f.excludeId&&(typeof d=="string"?d=d.replace(F9t," "):Array.isArray(d)?d=d.filter(y=>y!=="-_id"):(d={...d},delete d._id)),l.options.options&&l.options.options.limit!=null?f.originalLimit=l.options.options.limit:l.options.limit!=null&&(f.originalLimit=l.options.limit),u.push([l,h,d,f])}if(!a){if(n.length!==0)return;if(r.populate!=null){let c=nn.populate(r.populate).map(l=>Object.assign({},l,{path:r.path+"."+l.path}));return t.populate(e,c)}return}if(r.ordered)for(let c of u)await h8e.apply(null,c).then(l=>{s=s.concat(l)});else{let c=[];for(let l of u)c.push(h8e.apply(null,l).then(d=>{s=s.concat(d)}));await Promise.all(c)}for(let c of u){let l=c[0],d=c[3];for(let p of s)l.options._childDocs.push(p);m8e(t,s,l,d)}for(let c of u)S9t(c[0].foreignField,c[0].options,s);for(let c of u){let l=c[0];if(l.options&&l.options.options&&l.options.options._leanTransform)for(let d of s)l.options.options._leanTransform(d)}}function h8e(t,e,r){let n=uf(t.options.populate),i={};t.options.skip!==void 0&&(i.skip=t.options.skip),t.options.limit!==void 0&&(i.limit=t.options.limit),t.options.perDocumentLimit!==void 0&&(i.perDocumentLimit=t.options.perDocumentLimit),Object.assign(i,t.options.options),t.count&&delete i.skip,i.perDocumentLimit!=null?(i.limit=i.perDocumentLimit,delete i.perDocumentLimit):i.limit!=null&&(i.limit=i.limit*t.ids.length);let s=t.model.find(e,r,i);for(let o of t.foreignField)o!=="_id"&&s.selectedInclusively()&&!b9t(s._fields,o)&&s.select(o);if(t.count)for(let o of t.foreignField)s.select(o);if(n){t.model.baseModelName!=null&&(Array.isArray(n)?n.forEach(a=>{a.strictPopulate=!1}):typeof n=="string"?n={path:n,strictPopulate:!1}:n.strictPopulate=!1);let o=t.options._fullPath||t.options.path;if(Array.isArray(n))for(let a of n)a._fullPath=o+"."+a.path;else typeof n=="object"&&(n._fullPath=o+"."+n.path);s.populate(n)}return s.exec().then(o=>{for(let a of o)_9t.set(a,t.model);return o})}function m8e(t,e,r,n){let i=r.options,s=r.isVirtual,o=r.justOne,a,u=i&&i.options&&i.options.lean||!1,c=e.length,l={},d={},p,f,h=uf(r.allIds);for(let y=0;y<c;y++)if(f=e[y],f!=null)for(let E of r.foreignField){if(a=nn.getValue(E,f),Array.isArray(a)){a=nn.array.unique(nn.array.flatten(a));for(let v of a)v instanceof Id&&(v=v._doc._id),v?.constructor?.name==="Binary"&&v.sub_type===4&&typeof v.toUUID=="function"||v?.constructor?.name==="Buffer"&&v._subtype===4&&typeof v.toUUID=="function"?p=String(v.toUUID()):p=String(v),d[p]?Array.isArray(d[p])?(d[p].push(f),l[p].push(y)):(d[p]=[d[p],f],l[p]=[l[p],y]):s&&!o?(d[p]=[f],l[p]=[y]):(d[p]=f,l[p]=y)}else a instanceof Id&&(a=a._doc._id),a?.constructor?.name==="Binary"&&a.sub_type===4&&typeof a.toUUID=="function"||a?.constructor?.name==="Buffer"&&a._subtype===4&&typeof a.toUUID=="function"?p=String(a.toUUID()):p=String(a),d[p]?Array.isArray(d[p])?(d[p].push(f),l[p].push(y)):(s||d[p].constructor!==f.constructor||(d[p]instanceof Id?String(d[p]._doc._id):String(d[p]._id))!==(f instanceof Id?String(f._doc._id):String(f._id)))&&(d[p]=[d[p],f],l[p]=[l[p],y]):(d[p]=f,l[p]=y);u||(f.$__.wasPopulated=f.$__.wasPopulated||{value:a})}c9t({originalModel:t,rawIds:r.isVirtual?h:r.allIds,allIds:h,unpopulatedValues:r.unpopulatedValues,foreignField:r.foreignField,rawDocs:d,rawOrder:l,docs:r.docs,path:i.path,options:n,justOne:r.justOne,isVirtual:r.isVirtual,allOptions:r,populatedModel:r.model,lean:u,virtual:r.virtual,count:r.count,match:r.match})}De.compile=function(e,r,n,i,s){if(r.options.versionKey!==!1&&!r.paths[r.options.versionKey]){let d={};d[r.options.versionKey]=Number,r.add(d)}let a;typeof e=="function"&&e.prototype instanceof De?(a=e,e=a.name,r.loadClass(a,!1),a.prototype.$isMongooseModelPrototype=!0):a=function d(p,f,h){if(d.hooks.execPreSync("createModel",p),!(this instanceof d))return new d(p,f,h);let y=d.schema.options.discriminatorKey;if(d.discriminators==null||p==null||p[y]==null){De.call(this,p,f,h);return}let E=d.discriminators[p[y]]||IS(d.discriminators,p[y]);if(E!=null)return new E(p,f,h);De.call(this,p,f,h)},a.hooks=r.s.hooks.clone(),a.base=s,a.modelName=e,a.prototype instanceof De||(Object.setPrototypeOf(a,De),Object.setPrototypeOf(a.prototype,De.prototype)),a.model=function(p){return this.db.model(p)},a.db=i,a.prototype.db=i,a.prototype[cy]=i,a.discriminators=a.prototype.discriminators=void 0,a[C8e]=!0,a.events=new jY,r._preCompile();let c={schemaUserProvidedOptions:r._userProvidedOptions||{},capped:r.options.capped,Promise:a.base.Promise,modelName:e};r.options.autoCreate!==void 0&&(c.autoCreate=r.options.autoCreate);let l=i.collection(n,c);return a.prototype.collection=l,a.prototype.$collection=l,a.prototype[uy]=l,a.prototype.$__setSchema(r),g8e(a,r),_8e(a,r),n9t(a,r),o9t(a,r.s.hooks,r.statics),a.schema=a.prototype.$__schema,a.collection=l,a.$__collection=l,a.Query=function(){SI.apply(this,arguments)},Object.setPrototypeOf(a.Query.prototype,SI.prototype),a.Query.base=SI.base,a.Query.prototype.constructor=SI,a._applyQueryMiddleware(),B9t(a,r.query),a};De.clientEncryption=function(){let e=this.base.driver.get().ClientEncryption;if(!e)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let r=this.collection?.conn?.client;if(!r)return null;let n=r.options.autoEncryption;if(!n)return null;let{keyVaultNamespace:i,keyVaultClient:s,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c}=n;return new e(s??r,{keyVaultNamespace:i,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c})};De.$__updateConnection=function(e){this.db=e,this.prototype.db=e,this.prototype[cy]=e;let r=e.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=r,this.prototype.$collection=r,this.prototype[uy]=r,this.collection=r,this.$__collection=r};function B9t(t,e){for(let r in e)t.Query.prototype[r]=e[r]}De.__subclass=function(e,r,n){let i=this,s=function l(d,p,f){if(!(this instanceof l))return new l(d,p,f);i.call(this,d,p,f)};if(Object.setPrototypeOf(s,i),Object.setPrototypeOf(s.prototype,i.prototype),s.db=e,s.prototype.db=e,s.prototype[cy]=e,i[RS]=i[RS]||[],i[RS].push(s),i.discriminators!=null){s.discriminators={};for(let l of Object.keys(i.discriminators))s.discriminators[l]=i.discriminators[l].__subclass(i.db,i.discriminators[l].schema,n)}let o=r&&typeof r!="string"?r:i.prototype.$__schema,a=o.options||{},u=o._userProvidedOptions||{};n||(n=i.prototype.$__schema.get("collection")||nn.toCollectionName(i.modelName,this.base.pluralize()));let c={schemaUserProvidedOptions:u,capped:o&&a.capped};return s.prototype.collection=e.collection(n,c),s.prototype.$collection=s.prototype.collection,s.prototype[uy]=s.prototype.collection,s.collection=s.prototype.collection,s.$__collection=s.collection,s.init().catch(()=>{}),s};De.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let e of this.schema._applyDiscriminators.keys())this.discriminator(e,this.schema._applyDiscriminators.get(e));delete this.schema._defaultToObjectOptionsMap,r9t(this.schema,new WeakSet,!0)};De.inspect=function(){return`Model { ${this.modelName} }`};De.namespace=function(){return this.db.name+"."+this.collection.collectionName};c8e.inspect.custom&&(De[c8e.inspect.custom]=De.inspect);De._applyQueryMiddleware=function(){let e=this.Query,r=this.schema.s.hooks.filter(n=>{let i=q9t(n);return n.name==="validate"?!!i.query:n.name==="deleteOne"||n.name==="updateOne"?!!i.query||Object.keys(i).length===0:n.query!=null||n.document!=null?!!n.query:!0});e.prototype._queryMiddleware=r};function q9t(t){let e={};return Object.hasOwn(t,"query")&&(e.query=t.query),Object.hasOwn(t,"document")&&(e.document=t.document),e}x8e.exports=O8e=De});var R8e=b((MS,I8e)=>{"use strict";I8e.exports=$9t;MS.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var L9t=MS.pluralization;MS.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var j9t=MS.uncountables;function $9t(t){let e;return t=t.toLowerCase(),!~j9t.indexOf(t)&&(e=L9t.filter(function(r){return t.match(r[0])}),e[0])?t.replace(e[0][0],e[0][1]):t}});var N8e=b((Wgr,P8e)=>{"use strict";var M8e=qt(),D8e=require("util"),k8e=gz(),Eh=class t extends M8e{constructor(){super(""),this.errors={}}toString(){return k8e(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(i,n[i]);return}this.errors[e]=r,this.message=k8e(this)}};D8e.inspect.custom&&(Eh.prototype[D8e.inspect.custom]=Eh.prototype.inspect);Object.defineProperty(Eh.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(Eh.prototype,"name",{value:"SetOptionError"});var WY=class extends M8e{constructor(e){super(`"${e}" is not a valid option to set`)}};Eh.SetOptionInnerError=WY;P8e.exports=Eh});var B8e=b(()=>{"use strict";var F8e=wt();typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS&&(typeof window<"u"&&F8e.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."),setTimeout.clock!=null&&typeof setTimeout.clock.Date=="function"&&F8e.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."))});var K8e=b(($8e,U8e)=>{"use strict";var q8e=ac(),L8e=require("events").EventEmitter,j8e=Ea(),U9t=ph(),K9t=Hp(),V9t=j8e.ValidationError,G9t=rx(),H9t=uh();function fc(t,e,r,n,i){if(!(this instanceof fc))return new fc(t,e,r,n,i);if(H9t(e)&&!e.instanceOfSchema&&(e=new U9t(e)),e=this.schema||e,!this.schema&&e.options._id&&(t=t||{},t._id===void 0&&(t._id=new K9t)),!e)throw new j8e.MissingSchemaError;this.$__setSchema(e),q8e.call(this,t,r,n,i),G9t(this,e,{decorateDoc:!0});for(let s in e.methods)this[s]=e.methods[s];for(let s in e.statics)this[s]=e.statics[s]}fc.prototype=Object.create(q8e.prototype);fc.prototype.constructor=fc;fc.events=new L8e;fc.$emitter=new L8e;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(t){fc[t]=function(){return fc.$emitter[t].apply(fc.$emitter,arguments)}});fc.ValidationError=V9t;U8e.exports=$8e=fc});var G8e=b((Qgr,JY)=>{"use strict";var z9t=ac(),W9t=K8e(),V8e=!1;JY.exports=function(){return V8e?W9t:z9t};JY.exports.setBrowser=function(t){V8e=t}});var t5e=b((Z8e,e5e)=>{"use strict";var J9t=ac(),Y9t=require("events").EventEmitter,z8e=q0(),cf=ph(),Q9t=ri(),PS=Yv(),X9t=ZO(),TI=b3(),H8e=ZSe(),Z9t=__(),eAt=aI(),W8e=CY(),tAt=TJ(),rAt=QW(),J8e=Ux(),nAt=R8e(),YY=wt(),iAt=GJ(),sAt=J0(),oAt=SY(),aAt=s_().trusted,uAt=fY(),cAt=Ks(),K_=qt(),CI=N8e(),lAt=AY(),Y8e=Symbol.for("mongoose:default"),Q8e=Symbol("mongoose:defaultConnection");B8e();var dAt=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:X8e}=require("node:async_hooks");function Ue(t){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new Y9t,this.__driver=J8e.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},t),(YY.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null&&QY(this),this.options.pluralization&&(this._pluralize=nAt),!t||!t[Y8e]){let r=this;this.Schema=function(){return this.base=r,cf.apply(this,arguments)},this.Schema.prototype=Object.create(cf.prototype),Object.assign(this.Schema,cf),this.Schema.base=this,this.Schema.Types=Object.assign({},cf.Types)}else for(let r of["Schema","model"])this[r]=Ue.prototype[r];this.Schema.prototype.base=this,t?.transactionAsyncLocalStorage&&(this.transactionAsyncLocalStorage=new X8e),Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(rAt).map(r=>[r,{deduplicate:!0}])})}Ue.prototype.cast=sAt;Ue.prototype.STATES=TI;Ue.prototype.ConnectionStates=TI;Ue.prototype.driver=J8e;Ue.prototype.setDriver=function(e){let r=this instanceof Ue?this:go;if(r.__driver===e)return r;if(r.connections&&r.connections.find(o=>o.readyState!==TI.disconnected)){let o="Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver";throw new K_(o)}if(r.__driver=e,Array.isArray(e.plugins))for(let o of e.plugins)typeof o=="function"&&r.plugin(o);e.SchemaTypes!=null&&Object.assign(go.Schema.Types,e.SchemaTypes);let i=e.Connection,s=r.connections[0];if(r.connections=[new i(r)],r.connections[0].models=r.models,s==null)return r;for(let o of Object.values(r.models))o.db===s&&o.$__updateConnection(r.connections[0]);return r};Ue.prototype.set=function(e,r){let n=this instanceof Ue?this:go;if(arguments.length===1&&typeof e!="object"){if(H8e.indexOf(e)===-1){let o=new CI;throw o.addError(e,new CI.SetOptionInnerError(e)),o}return n.options[e]}let i={};arguments.length===2&&(i={[e]:r}),arguments.length===1&&typeof e=="object"&&(i=e);let s;for(let[o,a]of Object.entries(i)){if(H8e.indexOf(o)===-1){s||(s=new CI),s.addError(o,new CI.SetOptionInnerError(o));continue}n.options[o]=a,o==="objectIdGetter"?a?Object.defineProperty(n.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}):delete n.Types.ObjectId.prototype._id:o==="transactionAsyncLocalStorage"?a&&!n.transactionAsyncLocalStorage?n.transactionAsyncLocalStorage=new X8e:!a&&n.transactionAsyncLocalStorage&&delete n.transactionAsyncLocalStorage:o==="createInitialConnection"&&(a&&!n.connection?QY(n):a===!1&&n.connection&&n.connection[Q8e]&&n.connection.readyState===TI.disconnected&&Object.keys(n.connection.models).length===0&&n.connections.shift())}if(s)throw s;return n};Ue.prototype.get=Ue.prototype.set;Ue.prototype.createConnection=function(e,r){let n=this instanceof Ue?this:go,i=n.__driver.Connection,s=new i(n);return n.connections.push(s),n.nextConnectionId++,n.events.emit("createConnection",s),arguments.length>0&&s.openUri(e,{...r,_fireAndForget:!0}),s};Ue.prototype.connect=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new K_("Mongoose.prototype.connect() no longer accepts a callback");let n=this instanceof Ue?this:go;return n.connection==null&&QY(n),n.connection.openUri(e,r).then(()=>n)};Ue.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new K_("Mongoose.prototype.disconnect() no longer accepts a callback");let e=this instanceof Ue?this:go;e.connections.length<=0||await Promise.all(e.connections.map(n=>n.close()))};Ue.prototype.startSession=function(){let e=this instanceof Ue?this:go;return e.connection.startSession.apply(e.connection,arguments)};Ue.prototype.pluralize=function(e){let r=this instanceof Ue?this:go;return arguments.length>0&&(r._pluralize=e),r._pluralize};Ue.prototype.model=function(e,r,n,i){let s=this instanceof Ue?this:go;if(typeof r=="string"&&(n=r,r=!1),arguments.length===1){let c=s.models[e];if(!c)throw new s.Error.MissingSchemaError(e);return c}if(YY.isObject(r)&&!(r instanceof cf)&&(r=new cf(r)),r&&!(r instanceof cf))throw new s.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");i=i||{};let o=r;r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r));let a=Object.hasOwn(s.options,"overwriteModels")?s.options.overwriteModels:i.overwriteModels;if(Object.hasOwn(s.models,e)&&i.cache!==!1&&a!==!0){if(o?.instanceOfSchema&&o!==s.models[e].schema)throw new s.Error.OverwriteModelError(e);if(n&&n!==s.models[e].collection.name){let c=s.models[e];return r=c.prototype.schema,c.__subclass(s.connection,r,n)}return s.models[e]}if(r==null)throw new s.Error.MissingSchemaError(e);let u=s._model(e,r,n,i);return s.connection.models[e]=u,s.models[e]=u,u};Ue.prototype._model=function(e,r,n,i){let s=this instanceof Ue?this:go,o;if(typeof e=="function"&&(o=e,e=o.name,!(o.prototype instanceof W8e)))throw new s.Error("The provided class "+e+" must extend Model");r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r)),(r==null||!("pluralization"in r.options))&&(r.options.pluralization=s.options.pluralization),n||(n=r.get("collection")||YY.toCollectionName(e,s.pluralize())),lAt(r);let a=i.connection||s.connection;if(o=s.Model.compile(o||e,r,n,a,s),o.init().catch(function(){}),a.emit("model",o),r._applyDiscriminators!=null)for(let u of r._applyDiscriminators.keys()){let{schema:c,options:l}=r._applyDiscriminators.get(u);o.discriminator(u,c,l)}return o};Ue.prototype.deleteModel=function(e){let r=this instanceof Ue?this:go;return r.connection.deleteModel(e),delete r.models[e],r};Ue.prototype.modelNames=function(){let e=this instanceof Ue?this:go;return Object.keys(e.models)};Ue.prototype._applyPlugins=function(e,r){let n=this instanceof Ue?this:go;r=r||{},r.applyPluginsToDiscriminators=n.options&&n.options.applyPluginsToDiscriminators||!1,r.applyPluginsToChildSchemas=typeof(n.options&&n.options.applyPluginsToChildSchemas)=="boolean"?n.options.applyPluginsToChildSchemas:!0,tAt(e,n.plugins,r,"$globalPluginsApplied")};Ue.prototype.plugin=function(e,r){let n=this instanceof Ue?this:go;return n.plugins.push([e,r]),n};Ue.prototype.__defineGetter__("connection",function(){return this.connections[0]});Ue.prototype.__defineSetter__("connection",function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)});Ue.prototype.connections;Ue.prototype.nextConnectionId;Ue.prototype.Aggregate=oAt;Ue.prototype.BaseCollection=j$();Object.defineProperty(Ue.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}});Object.defineProperty(Ue.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}});Ue.prototype.BaseConnection=VJ();Ue.prototype.version=iAt.version;Ue.prototype.Mongoose=Ue;Ue.prototype.Schema=cf;Ue.prototype.SchemaType=Q9t;Ue.prototype.SchemaTypes=cf.Types;Ue.prototype.VirtualType=X9t;Ue.prototype.Types=Z9t;Ue.prototype.Query=eAt;Ue.prototype.Model=W8e;Ue.prototype.Document=J9t;Ue.prototype.DocumentProvider=G8e();Ue.prototype.ObjectId=PS.ObjectId;Ue.prototype.isValidObjectId=function(e){return(this instanceof Ue?this:go).Types.ObjectId.isValid(e)};Ue.prototype.isObjectIdOrHexString=function(e){return cAt(e,"ObjectId")||typeof e=="string"&&dAt.test(e)};Ue.prototype.syncIndexes=function(e){return(this instanceof Ue?this:go).connection.syncIndexes(e)};Ue.prototype.Decimal128=PS.Decimal128;Ue.prototype.Mixed=PS.Mixed;Ue.prototype.Date=PS.Date;Ue.prototype.Number=PS.Number;Ue.prototype.Error=K_;Ue.prototype.MongooseError=K_;Ue.prototype.now=function(){return new Date};Ue.prototype.CastError=K_.CastError;Ue.prototype.SchemaTypeOptions=Sa();Ue.prototype.mquery=dY();Ue.prototype.sanitizeFilter=uAt;Ue.prototype.trusted=aAt;Ue.prototype.skipMiddlewareFunction=z8e.skipWrappedFunction;Ue.prototype.overwriteMiddlewareResult=z8e.overwriteResult;Ue.prototype.omitUndefined=CW();function QY(t){if(t.connection)return;let e=t.createConnection();e[Q8e]=!0,e.models=t.models}var go=e5e.exports=Z8e=new Ue({[Y8e]:!0})});var i5e=b((Xgr,n5e)=>{"use strict";var r5e=QSe();Ux().set(r5e);var XY=t5e();XY.setDriver(r5e);XY.Mongoose.prototype.mongo=x0();n5e.exports=XY});var ly=b((Zgr,yt)=>{"use strict";var _t=i5e();yt.exports=_t;yt.exports.default=_t;yt.exports.mongoose=_t;yt.exports.cast=_t.cast;yt.exports.STATES=_t.STATES;yt.exports.setDriver=_t.setDriver;yt.exports.set=_t.set;yt.exports.get=_t.get;yt.exports.createConnection=_t.createConnection;yt.exports.connect=_t.connect;yt.exports.disconnect=_t.disconnect;yt.exports.startSession=_t.startSession;yt.exports.pluralize=_t.pluralize;yt.exports.model=_t.model;yt.exports.deleteModel=_t.deleteModel;yt.exports.modelNames=_t.modelNames;yt.exports.plugin=_t.plugin;yt.exports.connections=_t.connections;yt.exports.version=_t.version;yt.exports.Aggregate=_t.Aggregate;yt.exports.Mongoose=_t.Mongoose;yt.exports.Schema=_t.Schema;yt.exports.SchemaType=_t.SchemaType;yt.exports.SchemaTypes=_t.SchemaTypes;yt.exports.VirtualType=_t.VirtualType;yt.exports.Types=_t.Types;yt.exports.Query=_t.Query;yt.exports.Model=_t.Model;yt.exports.Document=_t.Document;yt.exports.ObjectId=_t.ObjectId;yt.exports.isValidObjectId=_t.isValidObjectId;yt.exports.isObjectIdOrHexString=_t.isObjectIdOrHexString;yt.exports.syncIndexes=_t.syncIndexes;yt.exports.Decimal128=_t.Decimal128;yt.exports.Mixed=_t.Mixed;yt.exports.Date=_t.Date;yt.exports.Number=_t.Number;yt.exports.Error=_t.Error;yt.exports.MongooseError=_t.MongooseError;yt.exports.now=_t.now;yt.exports.CastError=_t.CastError;yt.exports.SchemaTypeOptions=_t.SchemaTypeOptions;yt.exports.mongo=_t.mongo;yt.exports.mquery=_t.mquery;yt.exports.sanitizeFilter=_t.sanitizeFilter;yt.exports.trusted=_t.trusted;yt.exports.skipMiddlewareFunction=_t.skipMiddlewareFunction;yt.exports.overwriteMiddlewareResult=_t.overwriteMiddlewareResult});var V_,Rd,ZY,pAt,s5e,vh,OI=ce(()=>{"use strict";V_=St(ly());Rd={free:{max:2,min:0,current:2},standard:{max:5,min:0,current:5},premium:{max:7,min:0,current:7}},ZY=new V_.Schema({max:{type:Number,default:0,min:0},min:{type:Number,default:0,min:0},current:{type:Number,default:0,min:0}},{_id:!1}),pAt=new V_.Schema({premium:{type:ZY,default:Rd.premium},standard:{type:ZY,default:Rd.standard},free:{type:ZY,default:Rd.free}},{_id:!1}),s5e=new V_.Schema({plan:{type:String,default:"free"},email:{type:String,required:[!0,"Email is required"],unique:[!0,"Email must be unique"]},username:{type:String,required:[!0,"Username is required"]},privacyPolicyAccepted:{type:Boolean,default:!0},lengthOfDocs:{type:pAt,default:{premium:Rd.premium,standard:Rd.standard,free:Rd.free}},userId:{type:String,required:[!0,"userId is required"],unique:!0},status:{type:String,enum:["active","deleted"],default:"active"},deletedAt:{type:Date,default:null},permanentDeleteAt:{type:Date,default:null},monthlyQuotaResetAt:{type:Date,default:Date.now}},{timestamps:!0,strict:!0});s5e.index({permanentDeleteAt:1},{expireAfterSeconds:0});vh=(0,V_.model)("User",s5e)});var Da=b((t2r,o5e)=>{"use strict";var eQ=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};o5e.exports=t=>{if(t.length>2)throw new eQ(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var l5e=b((r2r,c5e)=>{var u5e={};c5e.exports=u5e;var a5e={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(a5e).forEach(function(t){var e=a5e[t],r=u5e[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var p5e=b((n2r,d5e)=>{"use strict";d5e.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var h5e=b((i2r,f5e)=>{"use strict";var fAt=require("os"),Dl=p5e(),Uo=process.env,G_=void 0;Dl("no-color")||Dl("no-colors")||Dl("color=false")?G_=!1:(Dl("color")||Dl("colors")||Dl("color=true")||Dl("color=always"))&&(G_=!0);"FORCE_COLOR"in Uo&&(G_=Uo.FORCE_COLOR.length===0||parseInt(Uo.FORCE_COLOR,10)!==0);function hAt(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function mAt(t){if(G_===!1)return 0;if(Dl("color=16m")||Dl("color=full")||Dl("color=truecolor"))return 3;if(Dl("color=256"))return 2;if(t&&!t.isTTY&&G_!==!0)return 0;var e=G_?1:0;if(process.platform==="win32"){var r=fAt.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Uo)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in Uo})||Uo.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Uo)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Uo.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Uo){var n=parseInt((Uo.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Uo.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Uo.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Uo.TERM)||"COLORTERM"in Uo?1:(Uo.TERM==="dumb",e)}function tQ(t){var e=mAt(t);return hAt(e)}f5e.exports={supportsColor:tQ,stdout:tQ(process.stdout),stderr:tQ(process.stderr)}});var y5e=b((s2r,m5e)=>{m5e.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var b5e=b((o2r,g5e)=>{g5e.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(u){var c=Math.floor(Math.random()*u);return c}function o(u){var c=!1;return i.filter(function(l){c=l===u}),c}function a(u,c){var l="",d,p;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",u=u.split("");for(p in u)if(!o(p)){switch(l=l+u[p],d={up:0,down:0,mid:0},c.size){case"mini":d.up=s(8),d.mid=s(2),d.down=s(8);break;case"maxi":d.up=s(16)+3,d.mid=s(4)+1,d.down=s(64)+3;break;default:d.up=s(8)+1,d.mid=s(6)/2,d.down=s(8)+1;break}var f=["up","mid","down"];for(var h in f)for(var y=f[h],E=0;E<=d[y];E++)c[y]&&(l=l+n[y][s(n[y].length)])}return l}return a(e,r)}});var E5e=b((a2r,_5e)=>{_5e.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var S5e=b((u2r,v5e)=>{v5e.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var A5e=b((c2r,w5e)=>{w5e.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var T5e=b((l2r,C5e)=>{C5e.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var k5e=b((p2r,D5e)=>{var rr={};D5e.exports=rr;rr.themes={};var yAt=require("util"),dy=rr.styles=l5e(),x5e=Object.defineProperties,gAt=new RegExp(/[\r\n]+/g);rr.supportsColor=h5e().supportsColor;typeof rr.enabled>"u"&&(rr.enabled=rr.supportsColor()!==!1);rr.enable=function(){rr.enabled=!0};rr.disable=function(){rr.enabled=!1};rr.stripColors=rr.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var d2r=rr.stylize=function(e,r){if(!rr.enabled)return e+"";var n=dy[r];return!n&&r in rr?rr[r](e):n.open+e+n.close},bAt=/[|\\{}()[\]^$+*?.]/g,_At=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(bAt,"\\$&")};function I5e(t){var e=function r(){return vAt.apply(r,arguments)};return e._styles=t,e.__proto__=EAt,e}var R5e=(function(){var t={};return dy.grey=dy.gray,Object.keys(dy).forEach(function(e){dy[e].closeRe=new RegExp(_At(dy[e].close),"g"),t[e]={get:function(){return I5e(this._styles.concat(e))}}}),t})(),EAt=x5e(function(){},R5e);function vAt(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:yAt.inspect(o)}).join(" ");if(!rr.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=dy[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(gAt,function(o){return s.close+o+s.open}))}return e}rr.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){rr[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=rr[t[r][s]](i);return i}return rr[t[r]](n)}})(e)};function SAt(){var t={};return Object.keys(R5e).forEach(function(e){t[e]={get:function(){return I5e([e])}}}),t}var wAt=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};rr.trap=y5e();rr.zalgo=b5e();rr.maps={};rr.maps.america=E5e()(rr);rr.maps.zebra=S5e()(rr);rr.maps.rainbow=A5e()(rr);rr.maps.random=T5e()(rr);for(O5e in rr.maps)(function(t){rr[t]=function(e){return wAt(rr.maps[t],e)}})(O5e);var O5e;x5e(rr,SAt())});var rQ=b((f2r,M5e)=>{var AAt=k5e();M5e.exports=AAt});var P5e=b(nQ=>{"use strict";nQ.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};nQ.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var N5e=b(iQ=>{"use strict";iQ.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};iQ.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var F5e=b(sQ=>{"use strict";sQ.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};sQ.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var B5e=b(xI=>{"use strict";Object.defineProperty(xI,"cli",{value:P5e()});Object.defineProperty(xI,"npm",{value:N5e()});Object.defineProperty(xI,"syslog",{value:F5e()})});var Bi=b(NS=>{"use strict";Object.defineProperty(NS,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(NS,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(NS,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(NS,"configs",{value:B5e()})});var DI=b((_2r,RI)=>{"use strict";var uQ=rQ(),{LEVEL:oQ,MESSAGE:aQ}=Bi();uQ.enabled=!0;var q5e=/\s+/,II=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=q5e.test(e[i])?e[i].split(q5e):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return uQ[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=uQ[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[aQ]=="string"&&(e[aQ]=this.colorize(e[oQ],e.level,e[aQ])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[oQ],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[oQ],e.level,e.message)),e}};RI.exports=t=>new II(t);RI.exports.Colorizer=RI.exports.Format=II});var j5e=b((E2r,L5e)=>{"use strict";var{Colorizer:CAt}=DI();L5e.exports=t=>(CAt.addColors(t.colors||t),t)});var U5e=b((v2r,$5e)=>{"use strict";var TAt=Da();$5e.exports=TAt(t=>(t.message=`	${t.message}`,t))});var G5e=b((S2r,V5e)=>{"use strict";var OAt=Da(),{LEVEL:K5e,MESSAGE:cQ}=Bi();V5e.exports=OAt((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[K5e]:t[K5e]||t.level,message:t.message,[cQ]:t[cQ]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[cQ]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var dQ=b((w2r,MI)=>{"use strict";var{configs:xAt,LEVEL:H5e,MESSAGE:lQ}=Bi(),kI=class t{constructor(e={levels:xAt.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[H5e]]}${e.message}`,e[lQ]&&(e[lQ]=`${this.paddings[e[H5e]]}${e[lQ]}`),e}};MI.exports=t=>new kI(t);MI.exports.Padder=MI.exports.Format=kI});var z5e=b((A2r,pQ)=>{"use strict";var{Colorizer:IAt}=DI(),{Padder:RAt}=dQ(),{configs:DAt,MESSAGE:kAt}=Bi(),PI=class{constructor(e={}){e.levels||(e.levels=DAt.cli.levels),this.colorizer=new IAt(e),this.padder=new RAt(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[kAt]=`${e.level}:${e.message}`,e}};pQ.exports=t=>new PI(t);pQ.exports.Format=PI});var J5e=b((C2r,fQ)=>{"use strict";var MAt=Da();function W5e(t){if(t.every(PAt))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function PAt(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}fQ.exports=(...t)=>{let e=MAt(W5e(t)),r=e();return r.Format=e.Format,r};fQ.exports.cascade=W5e});var BS=b((gQ,X5e)=>{"use strict";var{hasOwnProperty:FS}=Object.prototype,fy=yQ();fy.configure=yQ;fy.stringify=fy;fy.default=fy;gQ.stringify=fy;gQ.configure=yQ;X5e.exports=fy;var NAt=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function Sh(t){return t.length<5e3&&!NAt.test(t)?`"${t}"`:JSON.stringify(t)}function hQ(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],i=r;for(;i!==0&&t[i-1]>n;)t[i]=t[i-1],i--;t[i]=n}return t}var FAt=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function mQ(t){return FAt.call(t)!==void 0&&t.length!==0}function Y5e(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function BAt(t){if(FS.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function qAt(t){let e;if(FS.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function LAt(t,e){let r;if(FS.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function Q5e(t,e){let r;if(FS.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function py(t){return t===1?"1 item":`${t} items`}function jAt(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function $At(t){if(FS.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function yQ(t){t={...t};let e=$At(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=BAt(t),n=LAt(t,"bigint"),i=qAt(t),s=typeof i=="function"?i:void 0,o=Q5e(t,"maximumDepth"),a=Q5e(t,"maximumBreadth");function u(f,h,y,E,v,w){let T=h[f];switch(typeof T=="object"&&T!==null&&typeof T.toJSON=="function"&&(T=T.toJSON(f)),T=E.call(h,f,T),typeof T){case"string":return Sh(T);case"object":{if(T===null)return"null";if(y.indexOf(T)!==-1)return r;let A="",C=",",x=w;if(Array.isArray(T)){if(T.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(T),v!==""&&(w+=v,A+=`
${w}`,C=`,
${w}`);let K=Math.min(T.length,a),k=0;for(;k<K-1;k++){let ne=u(String(k),T,y,E,v,w);A+=ne!==void 0?ne:"null",A+=C}let G=u(String(k),T,y,E,v,w);if(A+=G!==void 0?G:"null",T.length-1>a){let ne=T.length-a-1;A+=`${C}"... ${py(ne)} not stringified"`}return v!==""&&(A+=`
${x}`),y.pop(),`[${A}]`}let R=Object.keys(T),M=R.length;if(M===0)return"{}";if(o<y.length+1)return'"[Object]"';let I="",F="";v!==""&&(w+=v,C=`,
${w}`,I=" ");let B=Math.min(M,a);i&&!mQ(T)&&(R=hQ(R,s)),y.push(T);for(let K=0;K<B;K++){let k=R[K],G=u(k,T,y,E,v,w);G!==void 0&&(A+=`${F}${Sh(k)}:${I}${G}`,F=C)}if(M>a){let K=M-a;A+=`${F}"...":${I}"${py(K)} not stringified"`,F=C}return v!==""&&F.length>1&&(A=`
${w}${A}
${x}`),y.pop(),`{${A}}`}case"number":return isFinite(T)?String(T):e?e(T):"null";case"boolean":return T===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(T);default:return e?e(T):void 0}}function c(f,h,y,E,v,w){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return Sh(h);case"object":{if(h===null)return"null";if(y.indexOf(h)!==-1)return r;let T=w,A="",C=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(h),v!==""&&(w+=v,A+=`
${w}`,C=`,
${w}`);let M=Math.min(h.length,a),I=0;for(;I<M-1;I++){let B=c(String(I),h[I],y,E,v,w);A+=B!==void 0?B:"null",A+=C}let F=c(String(I),h[I],y,E,v,w);if(A+=F!==void 0?F:"null",h.length-1>a){let B=h.length-a-1;A+=`${C}"... ${py(B)} not stringified"`}return v!==""&&(A+=`
${T}`),y.pop(),`[${A}]`}y.push(h);let x="";v!==""&&(w+=v,C=`,
${w}`,x=" ");let R="";for(let M of E){let I=c(M,h[M],y,E,v,w);I!==void 0&&(A+=`${R}${Sh(M)}:${x}${I}`,R=C)}return v!==""&&R.length>1&&(A=`
${w}${A}
${T}`),y.pop(),`{${A}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function l(f,h,y,E,v){switch(typeof h){case"string":return Sh(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return l(f,h,y,E,v);if(h===null)return"null"}if(y.indexOf(h)!==-1)return r;let w=v;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(h),v+=E;let I=`
${v}`,F=`,
${v}`,B=Math.min(h.length,a),K=0;for(;K<B-1;K++){let G=l(String(K),h[K],y,E,v);I+=G!==void 0?G:"null",I+=F}let k=l(String(K),h[K],y,E,v);if(I+=k!==void 0?k:"null",h.length-1>a){let G=h.length-a-1;I+=`${F}"... ${py(G)} not stringified"`}return I+=`
${w}`,y.pop(),`[${I}]`}let T=Object.keys(h),A=T.length;if(A===0)return"{}";if(o<y.length+1)return'"[Object]"';v+=E;let C=`,
${v}`,x="",R="",M=Math.min(A,a);mQ(h)&&(x+=Y5e(h,C,a),T=T.slice(h.length),M-=h.length,R=C),i&&(T=hQ(T,s)),y.push(h);for(let I=0;I<M;I++){let F=T[I],B=l(F,h[F],y,E,v);B!==void 0&&(x+=`${R}${Sh(F)}: ${B}`,R=C)}if(A>a){let I=A-a;x+=`${R}"...": "${py(I)} not stringified"`,R=C}return R!==""&&(x=`
${v}${x}
${w}`),y.pop(),`{${x}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function d(f,h,y){switch(typeof h){case"string":return Sh(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,y);if(h===null)return"null"}if(y.indexOf(h)!==-1)return r;let E="",v=h.length!==void 0;if(v&&Array.isArray(h)){if(h.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(h);let x=Math.min(h.length,a),R=0;for(;R<x-1;R++){let I=d(String(R),h[R],y);E+=I!==void 0?I:"null",E+=","}let M=d(String(R),h[R],y);if(E+=M!==void 0?M:"null",h.length-1>a){let I=h.length-a-1;E+=`,"... ${py(I)} not stringified"`}return y.pop(),`[${E}]`}let w=Object.keys(h),T=w.length;if(T===0)return"{}";if(o<y.length+1)return'"[Object]"';let A="",C=Math.min(T,a);v&&mQ(h)&&(E+=Y5e(h,",",a),w=w.slice(h.length),C-=h.length,A=","),i&&(w=hQ(w,s)),y.push(h);for(let x=0;x<C;x++){let R=w[x],M=d(R,h[R],y);M!==void 0&&(E+=`${A}${Sh(R)}:${M}`,A=",")}if(T>a){let x=T-a;E+=`${A}"...":"${py(x)} not stringified"`}return y.pop(),`{${E}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function p(f,h,y){if(arguments.length>1){let E="";if(typeof y=="number"?E=" ".repeat(Math.min(y,10)):typeof y=="string"&&(E=y.slice(0,10)),h!=null){if(typeof h=="function")return u("",{"":f},[],h,E,"");if(Array.isArray(h))return c("",f,[],jAt(h),E,"")}if(E.length!==0)return l("",f,[],E,"")}return d("",f,[])}return p}});var bQ=b((T2r,Z5e)=>{"use strict";var UAt=Da(),{MESSAGE:KAt}=Bi(),VAt=BS();function GAt(t,e){return typeof e=="bigint"?e.toString():e}Z5e.exports=UAt((t,e)=>{let r=VAt.configure(e);return t[KAt]=r(t,e.replacer||GAt,e.space),t})});var tCe=b((O2r,eCe)=>{"use strict";var HAt=Da();eCe.exports=HAt((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var nCe=b((x2r,rCe)=>{"use strict";var zAt=Da(),{MESSAGE:WAt}=Bi(),JAt=BS();rCe.exports=zAt(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[WAt]=JAt(e),t})});var sCe=b((I2r,iCe)=>{"use strict";var YAt=Da();function QAt(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function XAt(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}iCe.exports=YAt((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?QAt(t,n,r):e.fillWith?XAt(t,e.fillWith,r):t})});var aCe=b((R2r,oCe)=>{var H_=1e3,z_=H_*60,W_=z_*60,hy=W_*24,ZAt=hy*7,e8t=hy*365.25;oCe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return t8t(t);if(r==="number"&&isFinite(t))return e.long?n8t(t):r8t(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function t8t(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*e8t;case"weeks":case"week":case"w":return r*ZAt;case"days":case"day":case"d":return r*hy;case"hours":case"hour":case"hrs":case"hr":case"h":return r*W_;case"minutes":case"minute":case"mins":case"min":case"m":return r*z_;case"seconds":case"second":case"secs":case"sec":case"s":return r*H_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function r8t(t){var e=Math.abs(t);return e>=hy?Math.round(t/hy)+"d":e>=W_?Math.round(t/W_)+"h":e>=z_?Math.round(t/z_)+"m":e>=H_?Math.round(t/H_)+"s":t+"ms"}function n8t(t){var e=Math.abs(t);return e>=hy?NI(t,e,hy,"day"):e>=W_?NI(t,e,W_,"hour"):e>=z_?NI(t,e,z_,"minute"):e>=H_?NI(t,e,H_,"second"):t+" ms"}function NI(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var cCe=b((qS,uCe)=>{"use strict";var i8t=Da(),s8t=aCe();uCe.exports=i8t(t=>{let e=+new Date;return qS.diff=e-(qS.prevTime||e),qS.prevTime=e,t.ms=`+${s8t(qS.diff)}`,t})});var pCe=b((D2r,dCe)=>{"use strict";var o8t=require("util").inspect,a8t=Da(),{LEVEL:u8t,MESSAGE:lCe,SPLAT:c8t}=Bi();dCe.exports=a8t((t,e={})=>{let r=Object.assign({},t);return delete r[u8t],delete r[lCe],delete r[c8t],t[lCe]=o8t(r,!1,e.depth||null,e.colorize),t})});var fCe=b((k2r,BI)=>{"use strict";var{MESSAGE:l8t}=Bi(),FI=class{constructor(e){this.template=e}transform(e){return e[l8t]=this.template(e),e}};BI.exports=t=>new FI(t);BI.exports.Printf=BI.exports.Format=FI});var yCe=b((M2r,mCe)=>{"use strict";var d8t=Da(),{MESSAGE:hCe}=Bi(),p8t=BS();mCe.exports=d8t(t=>{let e=p8t(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[hCe]=`${t.level}:${r} ${t.message} ${e}`:t[hCe]=`${t.level}:${r} ${t.message}`,t})});var _Ce=b((P2r,bCe)=>{"use strict";var f8t=require("util"),{SPLAT:gCe}=Bi(),h8t=/%[scdjifoO%]/g,m8t=/%%/g,_Q=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[gCe]||e.splat||[],s=n.match(m8t),o=s&&s.length||0,u=r.length-o-i.length,c=u<0?i.splice(u,-1*u):[],l=c.length;if(l)for(let d=0;d<l;d++)Object.assign(e,c[d]);return e.message=f8t.format(n,...i),e}transform(e){let r=e.message,n=e[gCe]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match(h8t);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};bCe.exports=t=>new _Q(t)});var vCe=b((qI,ECe)=>{(function(t,e){typeof qI=="object"&&typeof ECe<"u"?e(qI):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(qI,(function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function u($,V){for(var me=[],Oe=0,fe=$.length;Oe<fe;Oe++)me.push($[Oe].substr(0,V));return me}var c=function($){return function(V,me){var Oe=me[$].map(function(He){return He.toLowerCase()}),fe=Oe.indexOf(V.toLowerCase());return fe>-1?fe:null}};function l($){for(var V=[],me=1;me<arguments.length;me++)V[me-1]=arguments[me];for(var Oe=0,fe=V;Oe<fe.length;Oe++){var He=fe[Oe];for(var Pe in He)$[Pe]=He[Pe]}return $}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],f=u(p,3),h=u(d,3),y={dayNamesShort:h,dayNames:d,monthNamesShort:f,monthNames:p,amPm:["am","pm"],DoFn:function($){return $+["th","st","nd","rd"][$%10>3?0:($-$%10!==10?1:0)*$%10]}},E=l({},y),v=function($){return E=l(E,$)},w=function($){return $.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},T=function($,V){for(V===void 0&&(V=2),$=String($);$.length<V;)$="0"+$;return $},A={D:function($){return String($.getDate())},DD:function($){return T($.getDate())},Do:function($,V){return V.DoFn($.getDate())},d:function($){return String($.getDay())},dd:function($){return T($.getDay())},ddd:function($,V){return V.dayNamesShort[$.getDay()]},dddd:function($,V){return V.dayNames[$.getDay()]},M:function($){return String($.getMonth()+1)},MM:function($){return T($.getMonth()+1)},MMM:function($,V){return V.monthNamesShort[$.getMonth()]},MMMM:function($,V){return V.monthNames[$.getMonth()]},YY:function($){return T(String($.getFullYear()),4).substr(2)},YYYY:function($){return T($.getFullYear(),4)},h:function($){return String($.getHours()%12||12)},hh:function($){return T($.getHours()%12||12)},H:function($){return String($.getHours())},HH:function($){return T($.getHours())},m:function($){return String($.getMinutes())},mm:function($){return T($.getMinutes())},s:function($){return String($.getSeconds())},ss:function($){return T($.getSeconds())},S:function($){return String(Math.round($.getMilliseconds()/100))},SS:function($){return T(Math.round($.getMilliseconds()/10),2)},SSS:function($){return T($.getMilliseconds(),3)},a:function($,V){return $.getHours()<12?V.amPm[0]:V.amPm[1]},A:function($,V){return $.getHours()<12?V.amPm[0].toUpperCase():V.amPm[1].toUpperCase()},ZZ:function($){var V=$.getTimezoneOffset();return(V>0?"-":"+")+T(Math.floor(Math.abs(V)/60)*100+Math.abs(V)%60,4)},Z:function($){var V=$.getTimezoneOffset();return(V>0?"-":"+")+T(Math.floor(Math.abs(V)/60),2)+":"+T(Math.abs(V)%60,2)}},C=function($){return+$-1},x=[null,r],R=[null,o],M=["isPm",o,function($,V){var me=$.toLowerCase();return me===V.amPm[0]?0:me===V.amPm[1]?1:null}],I=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function($){var V=($+"").match(/([+-]|\d\d)/gi);if(V){var me=+V[1]*60+parseInt(V[2],10);return V[0]==="+"?me:-me}return 0}],F={D:["day",r],DD:["day",n],Do:["day",r+o,function($){return parseInt($,10)}],M:["month",r,C],MM:["month",n,C],YY:["year",n,function($){var V=new Date,me=+(""+V.getFullYear()).substr(0,2);return+(""+(+$>68?me-1:me)+$)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function($){return+$*100}],SS:["millisecond",n,function($){return+$*10}],SSS:["millisecond",i],d:x,dd:x,ddd:R,dddd:R,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:M,A:M,ZZ:I,Z:I},B={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},K=function($){return l(B,$)},k=function($,V,me){if(V===void 0&&(V=B.default),me===void 0&&(me={}),typeof $=="number"&&($=new Date($)),Object.prototype.toString.call($)!=="[object Date]"||isNaN($.getTime()))throw new Error("Invalid Date pass to format");V=B[V]||V;var Oe=[];V=V.replace(a,function(He,Pe){return Oe.push(Pe),"@@@"});var fe=l(l({},E),me);return V=V.replace(e,function(He){return A[He]($,fe)}),V.replace(/@@@/g,function(){return Oe.shift()})};function G($,V,me){if(me===void 0&&(me={}),typeof V!="string")throw new Error("Invalid format in fecha parse");if(V=B[V]||V,$.length>1e3)return null;var Oe=new Date,fe={year:Oe.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},He=[],Pe=[],Ce=V.replace(a,function(z,X){return Pe.push(w(X)),"@@@"}),Rr={},bt={};Ce=w(Ce).replace(e,function(z){var X=F[z],ue=X[0],se=X[1],Se=X[3];if(Rr[ue])throw new Error("Invalid format. "+ue+" specified twice in format");return Rr[ue]=!0,Se&&(bt[Se]=!0),He.push(X),"("+se+")"}),Object.keys(bt).forEach(function(z){if(!Rr[z])throw new Error("Invalid format. "+z+" is required in specified format")}),Ce=Ce.replace(/@@@/g,function(){return Pe.shift()});var na=$.match(new RegExp(Ce,"i"));if(!na)return null;for(var mi=l(l({},E),me),Zt=1;Zt<na.length;Zt++){var P=He[Zt-1],j=P[0],H=P[2],ie=H?H(na[Zt],mi):+na[Zt];if(ie==null)return null;fe[j]=ie}fe.isPm===1&&fe.hour!=null&&+fe.hour!=12?fe.hour=+fe.hour+12:fe.isPm===0&&+fe.hour==12&&(fe.hour=0);var Y;if(fe.timezoneOffset==null){Y=new Date(fe.year,fe.month,fe.day,fe.hour,fe.minute,fe.second,fe.millisecond);for(var te=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Zt=0,de=te.length;Zt<de;Zt++)if(Rr[te[Zt][0]]&&fe[te[Zt][0]]!==Y[te[Zt][1]]())return null}else if(Y=new Date(Date.UTC(fe.year,fe.month,fe.day,fe.hour,fe.minute-fe.timezoneOffset,fe.second,fe.millisecond)),fe.month>11||fe.month<0||fe.day>31||fe.day<1||fe.hour>23||fe.hour<0||fe.minute>59||fe.minute<0||fe.second>59||fe.second<0)return null;return Y}var ne={format:k,parse:G,defaultI18n:y,setGlobalDateI18n:v,setGlobalDateMasks:K};t.assign=l,t.default=ne,t.format=k,t.parse=G,t.defaultI18n=y,t.setGlobalDateI18n=v,t.setGlobalDateMasks=K,Object.defineProperty(t,"__esModule",{value:!0})}))});var wCe=b((N2r,SCe)=>{"use strict";var y8t=vCe(),g8t=Da();SCe.exports=g8t((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():y8t.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var CCe=b((F2r,ACe)=>{"use strict";var EQ=rQ(),b8t=Da(),{MESSAGE:vQ}=Bi();ACe.exports=b8t((t,e)=>(e.level!==!1&&(t.level=EQ.strip(t.level)),e.message!==!1&&(t.message=EQ.strip(String(t.message))),e.raw!==!1&&t[vQ]&&(t[vQ]=EQ.strip(String(t[vQ]))),t))});var wQ=b(SQ=>{"use strict";var _8t=SQ.format=Da();SQ.levels=j5e();function Ws(t,e){Object.defineProperty(_8t,t,{get(){return e()},configurable:!0})}Ws("align",function(){return U5e()});Ws("errors",function(){return G5e()});Ws("cli",function(){return z5e()});Ws("combine",function(){return J5e()});Ws("colorize",function(){return DI()});Ws("json",function(){return bQ()});Ws("label",function(){return tCe()});Ws("logstash",function(){return nCe()});Ws("metadata",function(){return sCe()});Ws("ms",function(){return cCe()});Ws("padLevels",function(){return dQ()});Ws("prettyPrint",function(){return pCe()});Ws("printf",function(){return fCe()});Ws("simple",function(){return yCe()});Ws("splat",function(){return _Ce()});Ws("timestamp",function(){return wCe()});Ws("uncolorize",function(){return CCe()})});var AQ=b(LI=>{"use strict";var{format:TCe}=require("util");LI.warn={deprecated(t){return()=>{throw new Error(TCe("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([TCe("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=LI.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=LI.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var OCe=b((L2r,E8t)=>{E8t.exports={name:"winston",description:"A logger for just about everything.",version:"3.19.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.8","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",jest:"^29.7.0",rimraf:"5.0.10",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"jest","test:unit":"jest -c test/jest.config.unit.js","test:integration":"jest -c test/jest.config.integration.js","test:typescript":"npx --package typescript tsc --project test",build:"babel lib -d dist",prebuild:"rimraf dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var ICe=b((j2r,xCe)=>{xCe.exports=require("util").deprecate});var CQ=b(($2r,RCe)=>{RCe.exports=require("stream")});var OQ=b((U2r,kCe)=>{"use strict";function v8t(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(TQ,this,t)):process.nextTick(TQ,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(jI,r):(r._writableState.errorEmitted=!0,process.nextTick(DCe,r,s)):process.nextTick(DCe,r,s):e?(process.nextTick(jI,r),e(s)):process.nextTick(jI,r)}),this)}function DCe(t,e){TQ(t,e),jI(t)}function jI(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function S8t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function TQ(t,e){t.emit("error",e)}function w8t(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}kCe.exports={destroy:v8t,undestroy:S8t,errorOrDestroy:w8t}});var wh=b((K2r,NCe)=>{"use strict";var PCe={};function hc(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,u){super(n(o,a,u))}}i.prototype.name=r.name,i.prototype.code=t,PCe[t]=i}function MCe(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function A8t(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function C8t(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function T8t(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}hc("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);hc("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&A8t(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(C8t(t," argument"))i=`The ${t} ${n} ${MCe(e,"type")}`;else{let s=T8t(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${MCe(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);hc("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");hc("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});hc("ERR_STREAM_PREMATURE_CLOSE","Premature close");hc("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});hc("ERR_MULTIPLE_CALLBACK","Callback called multiple times");hc("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");hc("ERR_STREAM_WRITE_AFTER_END","write after end");hc("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);hc("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);hc("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");NCe.exports.codes=PCe});var xQ=b((V2r,FCe)=>{"use strict";var O8t=wh().codes.ERR_INVALID_OPT_VALUE;function x8t(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function I8t(t,e,r,n){var i=x8t(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new O8t(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}FCe.exports={getHighWaterMark:I8t}});var BCe=b((G2r,IQ)=>{typeof Object.create=="function"?IQ.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:IQ.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var my=b((H2r,DQ)=>{try{if(RQ=require("util"),typeof RQ.inherits!="function")throw"";DQ.exports=RQ.inherits}catch{DQ.exports=BCe()}var RQ});var KCe=b((z2r,UCe)=>{"use strict";function qCe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LCe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qCe(Object(r),!0).forEach(function(n){R8t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qCe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R8t(t,e,r){return e=$Ce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D8t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jCe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Ce(n.key),n)}}function k8t(t,e,r){return e&&jCe(t.prototype,e),r&&jCe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Ce(t){var e=M8t(t,"string");return typeof e=="symbol"?e:String(e)}function M8t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P8t=require("buffer"),$I=P8t.Buffer,N8t=require("util"),kQ=N8t.inspect,F8t=kQ&&kQ.custom||"inspect";function B8t(t,e,r){$I.prototype.copy.call(t,e,r)}UCe.exports=(function(){function t(){D8t(this,t),this.head=null,this.tail=null,this.length=0}return k8t(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return $I.alloc(0);for(var n=$I.allocUnsafe(r>>>0),i=this.head,s=0;i;)B8t(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=$I.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:F8t,value:function(r,n){return kQ(this,LCe(LCe({},n),{},{depth:0,customInspect:!1}))}}]),t})()});var gy=b((MQ,GCe)=>{var UI=require("buffer"),Dd=UI.Buffer;function VCe(t,e){for(var r in t)e[r]=t[r]}Dd.from&&Dd.alloc&&Dd.allocUnsafe&&Dd.allocUnsafeSlow?GCe.exports=UI:(VCe(UI,MQ),MQ.Buffer=yy);function yy(t,e,r){return Dd(t,e,r)}yy.prototype=Object.create(Dd.prototype);VCe(Dd,yy);yy.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Dd(t,e,r)};yy.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Dd(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};yy.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Dd(t)};yy.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return UI.SlowBuffer(t)}});var FQ=b(zCe=>{"use strict";var NQ=gy().Buffer,HCe=NQ.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function q8t(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function L8t(t){var e=q8t(t);if(typeof e!="string"&&(NQ.isEncoding===HCe||!HCe(t)))throw new Error("Unknown encoding: "+t);return e||t}zCe.StringDecoder=LS;function LS(t){this.encoding=L8t(t);var e;switch(this.encoding){case"utf16le":this.text=G8t,this.end=H8t,e=4;break;case"utf8":this.fillLast=U8t,e=4;break;case"base64":this.text=z8t,this.end=W8t,e=3;break;default:this.write=J8t,this.end=Y8t;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=NQ.allocUnsafe(e)}LS.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};LS.prototype.end=V8t;LS.prototype.text=K8t;LS.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function PQ(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function j8t(t,e,r){var n=e.length-1;if(n<r)return 0;var i=PQ(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=PQ(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=PQ(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function $8t(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function U8t(t){var e=this.lastTotal-this.lastNeed,r=$8t(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function K8t(t,e){var r=j8t(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function V8t(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function G8t(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function H8t(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function z8t(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function W8t(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function J8t(t){return t.toString(this.encoding)}function Y8t(t){return t&&t.length?this.write(t):""}});var KI=b((J2r,YCe)=>{"use strict";var WCe=wh().codes.ERR_STREAM_PREMATURE_CLOSE;function Q8t(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function X8t(){}function Z8t(t){return t.setHeader&&typeof t.abort=="function"}function JCe(t,e,r){if(typeof e=="function")return JCe(t,null,e);e||(e={}),r=Q8t(r||X8t);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(h){r.call(t,h)},d=function(){var h;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(h=new WCe),r.call(t,h);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(h=new WCe),r.call(t,h)},p=function(){t.req.on("finish",a)};return Z8t(t)?(t.on("complete",a),t.on("abort",d),t.req?p():t.on("request",p)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",p),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",d)}}YCe.exports=JCe});var XCe=b((Y2r,QCe)=>{"use strict";var VI;function Ah(t,e,r){return e=e5t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e5t(t){var e=t5t(t,"string");return typeof e=="symbol"?e:String(e)}function t5t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r5t=KI(),Ch=Symbol("lastResolve"),by=Symbol("lastReject"),jS=Symbol("error"),GI=Symbol("ended"),_y=Symbol("lastPromise"),BQ=Symbol("handlePromise"),Ey=Symbol("stream");function Th(t,e){return{value:t,done:e}}function n5t(t){var e=t[Ch];if(e!==null){var r=t[Ey].read();r!==null&&(t[_y]=null,t[Ch]=null,t[by]=null,e(Th(r,!1)))}}function i5t(t){process.nextTick(n5t,t)}function s5t(t,e){return function(r,n){t.then(function(){if(e[GI]){r(Th(void 0,!0));return}e[BQ](r,n)},n)}}var o5t=Object.getPrototypeOf(function(){}),a5t=Object.setPrototypeOf((VI={get stream(){return this[Ey]},next:function(){var e=this,r=this[jS];if(r!==null)return Promise.reject(r);if(this[GI])return Promise.resolve(Th(void 0,!0));if(this[Ey].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[jS]?a(e[jS]):o(Th(void 0,!0))})});var n=this[_y],i;if(n)i=new Promise(s5t(n,this));else{var s=this[Ey].read();if(s!==null)return Promise.resolve(Th(s,!1));i=new Promise(this[BQ])}return this[_y]=i,i}},Ah(VI,Symbol.asyncIterator,function(){return this}),Ah(VI,"return",function(){var e=this;return new Promise(function(r,n){e[Ey].destroy(null,function(i){if(i){n(i);return}r(Th(void 0,!0))})})}),VI),o5t),u5t=function(e){var r,n=Object.create(a5t,(r={},Ah(r,Ey,{value:e,writable:!0}),Ah(r,Ch,{value:null,writable:!0}),Ah(r,by,{value:null,writable:!0}),Ah(r,jS,{value:null,writable:!0}),Ah(r,GI,{value:e._readableState.endEmitted,writable:!0}),Ah(r,BQ,{value:function(s,o){var a=n[Ey].read();a?(n[_y]=null,n[Ch]=null,n[by]=null,s(Th(a,!1))):(n[Ch]=s,n[by]=o)},writable:!0}),r));return n[_y]=null,r5t(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[by];s!==null&&(n[_y]=null,n[Ch]=null,n[by]=null,s(i)),n[jS]=i;return}var o=n[Ch];o!==null&&(n[_y]=null,n[Ch]=null,n[by]=null,o(Th(void 0,!0))),n[GI]=!0}),e.on("readable",i5t.bind(null,n)),n};QCe.exports=u5t});var rTe=b((Q2r,tTe)=>{"use strict";function ZCe(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function c5t(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){ZCe(s,n,i,o,a,"next",u)}function a(u){ZCe(s,n,i,o,a,"throw",u)}o(void 0)})}}function eTe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function l5t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eTe(Object(r),!0).forEach(function(n){d5t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eTe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d5t(t,e,r){return e=p5t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p5t(t){var e=f5t(t,"string");return typeof e=="symbol"?e:String(e)}function f5t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h5t=wh().codes.ERR_INVALID_ARG_TYPE;function m5t(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new h5t("iterable",["Iterable"],e);var i=new t(l5t({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=c5t(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?o():s=!1}catch(d){i.destroy(d)}}),a.apply(this,arguments)}return i}tTe.exports=m5t});var zQ=b((Z2r,pTe)=>{"use strict";pTe.exports=xr;var J_;xr.ReadableState=oTe;var X2r=require("events").EventEmitter,sTe=function(e,r){return e.listeners(r).length},US=CQ(),HI=require("buffer").Buffer,y5t=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function g5t(t){return HI.from(t)}function b5t(t){return HI.isBuffer(t)||t instanceof y5t}var qQ=require("util"),Xt;qQ&&qQ.debuglog?Xt=qQ.debuglog("stream"):Xt=function(){};var _5t=KCe(),GQ=OQ(),E5t=xQ(),v5t=E5t.getHighWaterMark,zI=wh().codes,S5t=zI.ERR_INVALID_ARG_TYPE,w5t=zI.ERR_STREAM_PUSH_AFTER_EOF,A5t=zI.ERR_METHOD_NOT_IMPLEMENTED,C5t=zI.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Y_,LQ,jQ;my()(xr,US);var $S=GQ.errorOrDestroy,$Q=["error","close","destroy","pause","resume"];function T5t(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function oTe(t,e,r){J_=J_||vy(),t=t||{},typeof r!="boolean"&&(r=e instanceof J_),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=v5t(this,t,"readableHighWaterMark",r),this.buffer=new _5t,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Y_||(Y_=FQ().StringDecoder),this.decoder=new Y_(t.encoding),this.encoding=t.encoding)}function xr(t){if(J_=J_||vy(),!(this instanceof xr))return new xr(t);var e=this instanceof J_;this._readableState=new oTe(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),US.call(this)}Object.defineProperty(xr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});xr.prototype.destroy=GQ.destroy;xr.prototype._undestroy=GQ.undestroy;xr.prototype._destroy=function(t,e){e(t)};xr.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=HI.from(t,e),e=""),n=!0),aTe(this,t,e,!1,n)};xr.prototype.unshift=function(t){return aTe(this,t,null,!0,!1)};function aTe(t,e,r,n,i){Xt("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,I5t(t,s);else{var o;if(i||(o=O5t(s,e)),o)$S(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==HI.prototype&&(e=g5t(e)),n)s.endEmitted?$S(t,new C5t):UQ(t,s,e,!0);else if(s.ended)$S(t,new w5t);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?UQ(t,s,e,!1):VQ(t,s)):UQ(t,s,e,!1)}else n||(s.reading=!1,VQ(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function UQ(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&WI(t)),VQ(t,e)}function O5t(t,e){var r;return!b5t(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new S5t("chunk",["string","Buffer","Uint8Array"],e)),r}xr.prototype.isPaused=function(){return this._readableState.flowing===!1};xr.prototype.setEncoding=function(t){Y_||(Y_=FQ().StringDecoder);var e=new Y_(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var nTe=1073741824;function x5t(t){return t>=nTe?t=nTe:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function iTe(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=x5t(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}xr.prototype.read=function(t){Xt("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Xt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?KQ(this):WI(this),null;if(t=iTe(t,e),t===0&&e.ended)return e.length===0&&KQ(this),null;var n=e.needReadable;Xt("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Xt("length less than watermark",n)),e.ended||e.reading?(n=!1,Xt("reading or ended",n)):n&&(Xt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=iTe(r,e)));var i;return t>0?i=lTe(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&KQ(this)),i!==null&&this.emit("data",i),i};function I5t(t,e){if(Xt("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?WI(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,uTe(t)))}}function WI(t){var e=t._readableState;Xt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Xt("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(uTe,t))}function uTe(t){var e=t._readableState;Xt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,HQ(t)}function VQ(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(R5t,t,e))}function R5t(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Xt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}xr.prototype._read=function(t){$S(this,new A5t("_read()"))};xr.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Xt("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:y;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(E,v){Xt("onunpipe"),E===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,l())}function a(){Xt("onend"),t.end()}var u=D5t(r);t.on("drain",u);var c=!1;function l(){Xt("cleanup"),t.removeListener("close",f),t.removeListener("finish",h),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",d),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",d);function d(E){Xt("ondata");var v=t.write(E);Xt("dest.write",v),v===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&dTe(n.pipes,t)!==-1)&&!c&&(Xt("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(E){Xt("onerror",E),y(),t.removeListener("error",p),sTe(t,"error")===0&&$S(t,E)}T5t(t,"error",p);function f(){t.removeListener("finish",h),y()}t.once("close",f);function h(){Xt("onfinish"),t.removeListener("close",f),y()}t.once("finish",h);function y(){Xt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Xt("pipe resume"),r.resume()),t};function D5t(t){return function(){var r=t._readableState;Xt("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&sTe(t,"data")&&(r.flowing=!0,HQ(t))}}xr.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=dTe(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};xr.prototype.on=function(t,e){var r=US.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Xt("on readable",n.length,n.reading),n.length?WI(this):n.reading||process.nextTick(k5t,this)),r};xr.prototype.addListener=xr.prototype.on;xr.prototype.removeListener=function(t,e){var r=US.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(cTe,this),r};xr.prototype.removeAllListeners=function(t){var e=US.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(cTe,this),e};function cTe(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function k5t(t){Xt("readable nexttick read 0"),t.read(0)}xr.prototype.resume=function(){var t=this._readableState;return t.flowing||(Xt("resume"),t.flowing=!t.readableListening,M5t(this,t)),t.paused=!1,this};function M5t(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(P5t,t,e))}function P5t(t,e){Xt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),HQ(t),e.flowing&&!e.reading&&t.read(0)}xr.prototype.pause=function(){return Xt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Xt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function HQ(t){var e=t._readableState;for(Xt("flow",e.flowing);e.flowing&&t.read()!==null;);}xr.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Xt("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Xt("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(a){return function(){return t[a].apply(t,arguments)}})(i));for(var s=0;s<$Q.length;s++)t.on($Q[s],this.emit.bind(this,$Q[s]));return this._read=function(o){Xt("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(xr.prototype[Symbol.asyncIterator]=function(){return LQ===void 0&&(LQ=XCe()),LQ(this)});Object.defineProperty(xr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(xr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(xr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});xr._fromList=lTe;Object.defineProperty(xr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function lTe(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function KQ(t){var e=t._readableState;Xt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(N5t,e,t))}function N5t(t,e){if(Xt("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(xr.from=function(t,e){return jQ===void 0&&(jQ=rTe()),jQ(xr,t,e)});function dTe(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var vy=b((ebr,hTe)=>{"use strict";var F5t=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};hTe.exports=kd;var fTe=zQ(),JQ=QI();my()(kd,fTe);for(WQ=F5t(JQ.prototype),JI=0;JI<WQ.length;JI++)YI=WQ[JI],kd.prototype[YI]||(kd.prototype[YI]=JQ.prototype[YI]);var WQ,YI,JI;function kd(t){if(!(this instanceof kd))return new kd(t);fTe.call(this,t),JQ.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",B5t)))}Object.defineProperty(kd.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(kd.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(kd.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function B5t(){this._writableState.ended||process.nextTick(q5t,this)}function q5t(t){t.end()}Object.defineProperty(kd.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var QI=b((tbr,ETe)=>{"use strict";ETe.exports=ui;function yTe(t){var e=this;this.next=null,this.entry=null,this.finish=function(){dCt(e,t)}}var Q_;ui.WritableState=VS;var L5t={deprecate:ICe()},gTe=CQ(),ZI=require("buffer").Buffer,j5t=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function $5t(t){return ZI.from(t)}function U5t(t){return ZI.isBuffer(t)||t instanceof j5t}var QQ=OQ(),K5t=xQ(),V5t=K5t.getHighWaterMark,Oh=wh().codes,G5t=Oh.ERR_INVALID_ARG_TYPE,H5t=Oh.ERR_METHOD_NOT_IMPLEMENTED,z5t=Oh.ERR_MULTIPLE_CALLBACK,W5t=Oh.ERR_STREAM_CANNOT_PIPE,J5t=Oh.ERR_STREAM_DESTROYED,Y5t=Oh.ERR_STREAM_NULL_VALUES,Q5t=Oh.ERR_STREAM_WRITE_AFTER_END,X5t=Oh.ERR_UNKNOWN_ENCODING,X_=QQ.errorOrDestroy;my()(ui,gTe);function Z5t(){}function VS(t,e,r){Q_=Q_||vy(),t=t||{},typeof r!="boolean"&&(r=e instanceof Q_),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=V5t(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){oCt(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new yTe(this)}VS.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(VS.prototype,"buffer",{get:L5t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var XI;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(XI=Function.prototype[Symbol.hasInstance],Object.defineProperty(ui,Symbol.hasInstance,{value:function(e){return XI.call(this,e)?!0:this!==ui?!1:e&&e._writableState instanceof VS}})):XI=function(e){return e instanceof this};function ui(t){Q_=Q_||vy();var e=this instanceof Q_;if(!e&&!XI.call(ui,this))return new ui(t);this._writableState=new VS(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),gTe.call(this)}ui.prototype.pipe=function(){X_(this,new W5t)};function eCt(t,e){var r=new Q5t;X_(t,r),process.nextTick(e,r)}function tCt(t,e,r,n){var i;return r===null?i=new Y5t:typeof r!="string"&&!e.objectMode&&(i=new G5t("chunk",["string","Buffer"],r)),i?(X_(t,i),process.nextTick(n,i),!1):!0}ui.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&U5t(t);return s&&!ZI.isBuffer(t)&&(t=$5t(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Z5t),n.ending?eCt(this,r):(s||tCt(this,n,t,r))&&(n.pendingcb++,i=nCt(this,n,s,t,e,r)),i};ui.prototype.cork=function(){this._writableState.corked++};ui.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&bTe(this,t))};ui.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new X5t(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ui.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function rCt(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=ZI.from(e,r)),e}Object.defineProperty(ui.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function nCt(t,e,r,n,i,s){if(!r){var o=rCt(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else YQ(t,e,!1,a,n,i,s);return u}function YQ(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new J5t("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function iCt(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(KS,t,e),t._writableState.errorEmitted=!0,X_(t,n)):(i(n),t._writableState.errorEmitted=!0,X_(t,n),KS(t,e))}function sCt(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function oCt(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new z5t;if(sCt(r),e)iCt(t,r,n,e,i);else{var s=_Te(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&bTe(t,r),n?process.nextTick(mTe,t,r,s,i):mTe(t,r,s,i)}}function mTe(t,e,r,n){r||aCt(t,e),e.pendingcb--,n(),KS(t,e)}function aCt(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function bTe(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,YQ(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new yTe(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,d=e.objectMode?1:u.length;if(YQ(t,e,!1,d,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ui.prototype._write=function(t,e,r){r(new H5t("_write()"))};ui.prototype._writev=null;ui.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||lCt(this,n,r),this};Object.defineProperty(ui.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function _Te(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function uCt(t,e){t._final(function(r){e.pendingcb--,r&&X_(t,r),e.prefinished=!0,t.emit("prefinish"),KS(t,e)})}function cCt(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(uCt,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function KS(t,e){var r=_Te(e);if(r&&(cCt(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function lCt(t,e,r){e.ending=!0,KS(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function dCt(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ui.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});ui.prototype.destroy=QQ.destroy;ui.prototype._undestroy=QQ.undestroy;ui.prototype._destroy=function(t,e){e(t)}});var XQ=b((rbr,wTe)=>{"use strict";var pCt=require("util"),vTe=QI(),{LEVEL:STe}=Bi(),GS=wTe.exports=function(e={}){vTe.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};pCt.inherits(GS,vTe);GS.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[STe]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};GS.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};GS.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[STe]])&&(this.handleExceptions||r.exception!==!0))};GS.prototype._nop=function(){}});var eX=b((nbr,CTe)=>{"use strict";var fCt=require("util"),{LEVEL:ZQ}=Bi(),ATe=XQ(),HS=CTe.exports=function(e={}){if(ATe.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};fCt.inherits(HS,ATe);HS.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[ZQ]])&&this.transport.log(e[ZQ],e.message,e,this._nop),n(null)};HS.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[ZQ],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};HS.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};HS.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Sy=b((ibr,tX)=>{"use strict";tX.exports=XQ();tX.exports.LegacyTransportStream=eX()});var xTe=b((obr,OTe)=>{"use strict";var hCt=require("os"),{LEVEL:TTe,MESSAGE:Z_}=Bi(),mCt=Sy();OTe.exports=class extends mCt{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:hCt.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[TTe]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[Z_]}${this.eol}`):this._consoleError(e[Z_]),r&&r();return}else if(this.consoleWarnLevels[e[TTe]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[Z_]}${this.eol}`):this._consoleWarn(e[Z_]),r&&r();return}console._stdout&&!this.forceConsole?console._stdout.write(`${e[Z_]}${this.eol}`):this._consoleLog(e[Z_]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var tR=b((eR,ITe)=>{"use strict";Object.defineProperty(eR,"__esModule",{value:!0});eR.default=yCt;function yCt(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}ITe.exports=eR.default});var DTe=b((rR,RTe)=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0});rR.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};RTe.exports=rR.default});var PTe=b(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.fallback=kTe;xh.wrap=MTe;var gCt=xh.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,bCt=xh.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,_Ct=xh.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function kTe(t){setTimeout(t,0)}function MTe(t){return(e,...r)=>t(()=>e(...r))}var zS;gCt?zS=queueMicrotask:bCt?zS=setImmediate:_Ct?zS=process.nextTick:zS=kTe;xh.default=MTe(zS)});var LTe=b((nR,qTe)=>{"use strict";Object.defineProperty(nR,"__esModule",{value:!0});nR.default=CCt;var ECt=DTe(),vCt=BTe(ECt),SCt=PTe(),wCt=BTe(SCt),ACt=wy();function BTe(t){return t&&t.__esModule?t:{default:t}}function CCt(t){return(0,ACt.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return NTe(n,r)}:(0,vCt.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return NTe(n,r);r(null,n)})}function NTe(t,e){return t.then(r=>{FTe(e,null,r)},r=>{FTe(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function FTe(t,e,r){try{t(e,r)}catch(n){(0,wCt.default)(i=>{throw i},n)}}qTe.exports=nR.default});var wy=b(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.isAsyncIterable=lf.isAsyncGenerator=lf.isAsync=void 0;var TCt=LTe(),OCt=xCt(TCt);function xCt(t){return t&&t.__esModule?t:{default:t}}function jTe(t){return t[Symbol.toStringTag]==="AsyncFunction"}function ICt(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function RCt(t){return typeof t[Symbol.asyncIterator]=="function"}function DCt(t){if(typeof t!="function")throw new Error("expected a function");return jTe(t)?(0,OCt.default)(t):t}lf.default=DCt;lf.isAsync=jTe;lf.isAsyncGenerator=ICt;lf.isAsyncIterable=RCt});var eE=b((iR,$Te)=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0});iR.default=kCt;function kCt(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},t.apply(this,n)})}return r}$Te.exports=iR.default});var KTe=b((sR,UTe)=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0});var MCt=tR(),PCt=rX(MCt),NCt=wy(),FCt=rX(NCt),BCt=eE(),qCt=rX(BCt);function rX(t){return t&&t.__esModule?t:{default:t}}sR.default=(0,qCt.default)((t,e,r)=>{var n=(0,PCt.default)(e)?[]:{};t(e,(i,s,o)=>{(0,FCt.default)(i)((a,...u)=>{u.length<2&&([u]=u),n[s]=u,o(a)})},i=>r(i,n))},3);UTe.exports=sR.default});var nX=b((oR,VTe)=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});oR.default=LCt;function LCt(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}VTe.exports=oR.default});var HTe=b((aR,GTe)=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});aR.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};GTe.exports=aR.default});var JTe=b((uR,WTe)=>{"use strict";Object.defineProperty(uR,"__esModule",{value:!0});uR.default=zCt;var jCt=tR(),$Ct=zTe(jCt),UCt=HTe(),KCt=zTe(UCt);function zTe(t){return t&&t.__esModule?t:{default:t}}function VCt(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function GCt(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function HCt(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function zCt(t){if((0,$Ct.default)(t))return VCt(t);var e=(0,KCt.default)(t);return e?GCt(e):HCt(t)}WTe.exports=uR.default});var iX=b((cR,YTe)=>{"use strict";Object.defineProperty(cR,"__esModule",{value:!0});cR.default=WCt;function WCt(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}YTe.exports=cR.default});var dR=b((lR,QTe)=>{"use strict";Object.defineProperty(lR,"__esModule",{value:!0});var JCt={};lR.default=JCt;QTe.exports=lR.default});var ZTe=b((pR,XTe)=>{"use strict";Object.defineProperty(pR,"__esModule",{value:!0});pR.default=ZCt;var YCt=dR(),QCt=XCt(YCt);function XCt(t){return t&&t.__esModule?t:{default:t}}function ZCt(t,e,r,n){let i=!1,s=!1,o=!1,a=0,u=0;function c(){a>=e||o||i||(o=!0,t.next().then(({value:p,done:f})=>{if(!(s||i)){if(o=!1,f){i=!0,a<=0&&n(null);return}a++,r(p,u,l),u++,c()}}).catch(d))}function l(p,f){if(a-=1,!s){if(p)return d(p);if(p===!1){i=!0,s=!0;return}if(f===QCt.default||i&&a<=0)return i=!0,n(null);c()}}function d(p){s||(o=!1,i=!0,n(p))}c()}XTe.exports=pR.default});var n7e=b((fR,r7e)=>{"use strict";Object.defineProperty(fR,"__esModule",{value:!0});var eTt=nX(),tTt=WS(eTt),rTt=JTe(),nTt=WS(rTt),iTt=iX(),sTt=WS(iTt),e7e=wy(),oTt=ZTe(),t7e=WS(oTt),aTt=dR(),uTt=WS(aTt);function WS(t){return t&&t.__esModule?t:{default:t}}fR.default=t=>(e,r,n)=>{if(n=(0,tTt.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,e7e.isAsyncGenerator)(e))return(0,t7e.default)(e,t,r,n);if((0,e7e.isAsyncIterable)(e))return(0,t7e.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,nTt.default)(e),s=!1,o=!1,a=0,u=!1;function c(d,p){if(!o)if(a-=1,d)s=!0,n(d);else if(d===!1)s=!0,o=!0;else{if(p===uTt.default||s&&a<=0)return s=!0,n(null);u||l()}}function l(){for(u=!0;a<t&&!s;){var d=i();if(d===null){s=!0,a<=0&&n(null);return}a+=1,r(d.value,d.key,(0,sTt.default)(c))}u=!1}l()};r7e.exports=fR.default});var oX=b((hR,i7e)=>{"use strict";Object.defineProperty(hR,"__esModule",{value:!0});var cTt=n7e(),lTt=sX(cTt),dTt=wy(),pTt=sX(dTt),fTt=eE(),hTt=sX(fTt);function sX(t){return t&&t.__esModule?t:{default:t}}function mTt(t,e,r,n){return(0,lTt.default)(e)(t,(0,pTt.default)(r),n)}hR.default=(0,hTt.default)(mTt,4);i7e.exports=hR.default});var a7e=b((mR,o7e)=>{"use strict";Object.defineProperty(mR,"__esModule",{value:!0});var yTt=oX(),gTt=s7e(yTt),bTt=eE(),_Tt=s7e(bTt);function s7e(t){return t&&t.__esModule?t:{default:t}}function ETt(t,e,r){return(0,gTt.default)(t,1,e,r)}mR.default=(0,_Tt.default)(ETt,3);o7e.exports=mR.default});var l7e=b((yR,c7e)=>{"use strict";Object.defineProperty(yR,"__esModule",{value:!0});yR.default=CTt;var vTt=KTe(),STt=u7e(vTt),wTt=a7e(),ATt=u7e(wTt);function u7e(t){return t&&t.__esModule?t:{default:t}}function CTt(t,e){return(0,STt.default)(ATt.default,t,e)}c7e.exports=yR.default});var aX=b((cbr,p7e)=>{"use strict";p7e.exports=df;var gR=wh().codes,TTt=gR.ERR_METHOD_NOT_IMPLEMENTED,OTt=gR.ERR_MULTIPLE_CALLBACK,xTt=gR.ERR_TRANSFORM_ALREADY_TRANSFORMING,ITt=gR.ERR_TRANSFORM_WITH_LENGTH_0,bR=vy();my()(df,bR);function RTt(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new OTt);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function df(t){if(!(this instanceof df))return new df(t);bR.call(this,t),this._transformState={afterTransform:RTt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",DTt)}function DTt(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){d7e(t,e,r)}):d7e(this,null,null)}df.prototype.push=function(t,e){return this._transformState.needTransform=!1,bR.prototype.push.call(this,t,e)};df.prototype._transform=function(t,e,r){r(new TTt("_transform()"))};df.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};df.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};df.prototype._destroy=function(t,e){bR.prototype._destroy.call(this,t,function(r){e(r)})};function d7e(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new ITt;if(t._transformState.transforming)throw new xTt;return t.push(null)}});var m7e=b((lbr,h7e)=>{"use strict";h7e.exports=JS;var f7e=aX();my()(JS,f7e);function JS(t){if(!(this instanceof JS))return new JS(t);f7e.call(this,t)}JS.prototype._transform=function(t,e,r){r(null,t)}});var E7e=b((dbr,_7e)=>{"use strict";var uX;function kTt(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var b7e=wh().codes,MTt=b7e.ERR_MISSING_ARGS,PTt=b7e.ERR_STREAM_DESTROYED;function y7e(t){if(t)throw t}function NTt(t){return t.setHeader&&typeof t.abort=="function"}function FTt(t,e,r,n){n=kTt(n);var i=!1;t.on("close",function(){i=!0}),uX===void 0&&(uX=KI()),uX(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,NTt(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new PTt("pipe"))}}}function g7e(t){t()}function BTt(t,e){return t.pipe(e)}function qTt(t){return!t.length||typeof t[t.length-1]!="function"?y7e:t.pop()}function LTt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=qTt(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new MTt("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return FTt(o,u,c,function(l){i||(i=l),l&&s.forEach(g7e),!u&&(s.forEach(g7e),n(i))})});return e.reduce(BTt)}_7e.exports=LTt});var Ih=b((mc,QS)=>{var YS=require("stream");process.env.READABLE_STREAM==="disable"&&YS?(QS.exports=YS.Readable,Object.assign(QS.exports,YS),QS.exports.Stream=YS):(mc=QS.exports=zQ(),mc.Stream=YS||mc,mc.Readable=mc,mc.Writable=QI(),mc.Duplex=vy(),mc.Transform=aX(),mc.PassThrough=m7e(),mc.finished=KI(),mc.pipeline=E7e())});var mX=b((pbr,S7e)=>{var tE=[],XS=[],cX=function(){};function dX(t){return~tE.indexOf(t)?!1:(tE.push(t),!0)}function pX(t){cX=t}function jTt(t){for(var e=[],r=0;r<tE.length;r++){if(tE[r].async){e.push(tE[r]);continue}if(tE[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function fX(t){return~XS.indexOf(t)?!1:(XS.push(t),!0)}function lX(){cX.apply(cX,arguments)}function v7e(t){for(var e=0;e<XS.length;e++)t=XS[e].apply(XS[e],arguments);return t}function hX(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function $Tt(t){return t.enabled=!1,t.modify=fX,t.set=pX,t.use=dX,hX(function(){return!1},t)}function UTt(t){function e(){var r=Array.prototype.slice.call(arguments,0);return lX.call(lX,t,v7e(r,t)),!0}return t.enabled=!0,t.modify=fX,t.set=pX,t.use=dX,hX(e,t)}S7e.exports=function(e){return e.introduce=hX,e.enabled=jTt,e.process=v7e,e.modify=fX,e.write=lX,e.nope=$Tt,e.yep=UTt,e.set=pX,e.use=dX,e}});var A7e=b((fbr,w7e)=>{var KTt=mX(),VTt=KTt(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});w7e.exports=VTt});var R7e=b((hbr,I7e)=>{"use strict";var Md={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},T7e=Object.create(null);for(let t in Md)Object.hasOwn(Md,t)&&(T7e[Md[t]]=t);var es={to:{},get:{}};es.get=function(t){let e=t.slice(0,3).toLowerCase(),r,n;switch(e){case"hsl":{r=es.get.hsl(t),n="hsl";break}case"hwb":{r=es.get.hwb(t),n="hwb";break}default:{r=es.get.rgb(t),n="rgb";break}}return r?{model:n,value:r}:null};es.get.rgb=function(t){if(!t)return null;let e=/^#([a-f\d]{3,4})$/i,r=/^#([a-f\d]{6})([a-f\d]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){let l=u*2;o[u]=Number.parseInt(a.slice(l,l+2),16)}c&&(o[3]=Number.parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)o[u]=Number.parseInt(a[u]+a[u],16);c&&(o[3]=Number.parseInt(c+c,16)/255)}else if(a=t.match(n)){for(u=0;u<3;u++)o[u]=Number.parseInt(a[u+1],10);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=t.match(i)){for(u=0;u<3;u++)o[u]=Math.round(Number.parseFloat(a[u+1])*2.55);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Md,a[1])?(o=Md[a[1]],o[3]=1,o):null:null;for(u=0;u<3;u++)o[u]=Rh(o[u],0,255);return o[3]=Rh(o[3],0,1),o};es.get.hsl=function(t){if(!t)return null;let e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){let n=Number.parseFloat(r[4]),i=(Number.parseFloat(r[1])%360+360)%360,s=Rh(Number.parseFloat(r[2]),0,100),o=Rh(Number.parseFloat(r[3]),0,100),a=Rh(Number.isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};es.get.hwb=function(t){if(!t)return null;let e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){let n=Number.parseFloat(r[4]),i=(Number.parseFloat(r[1])%360+360)%360,s=Rh(Number.parseFloat(r[2]),0,100),o=Rh(Number.parseFloat(r[3]),0,100),a=Rh(Number.isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};es.to.hex=function(...t){return"#"+_R(t[0])+_R(t[1])+_R(t[2])+(t[3]<1?_R(Math.round(t[3]*255)):"")};es.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};es.to.rgb.percent=function(...t){let e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};es.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};es.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};es.to.keyword=function(...t){return T7e[t.slice(0,3)]};function Rh(t,e,r){return Math.min(Math.max(e,t),r)}function _R(t){let e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var O7e={};for(let t of Object.keys(Md))O7e[Md[t]]=t;var Ke={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},pf=(6/29)**3;function rE(t){let e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function nE(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(let t of Object.keys(Ke)){if(!("channels"in Ke[t]))throw new Error("missing channels property: "+t);if(!("labels"in Ke[t]))throw new Error("missing channel labels property: "+t);if(Ke[t].labels.length!==Ke[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=Ke[t];delete Ke[t].channels,delete Ke[t].labels,Object.defineProperty(Ke[t],"channels",{value:e}),Object.defineProperty(Ke[t],"labels",{value:r})}Ke.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,u;switch(s){case i:{a=0;break}case e:{a=(r-n)/o;break}case r:{a=2+(n-e)/o;break}case n:{a=4+(e-r)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+s)/2;return s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a,u*100,c*100]};Ke.rgb.hsv=function(t){let e,r,n,i,s,o=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(o,a,u),l=c-Math.min(o,a,u),d=function(p){return(c-p)/6/l+1/2};if(l===0)i=0,s=0;else{switch(s=l/c,e=d(o),r=d(a),n=d(u),c){case o:{i=n-r;break}case a:{i=1/3+e-n;break}case u:{i=2/3+r-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,c*100]};Ke.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=Ke.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};Ke.rgb.oklab=function(t){let e=nE(t[0]/255),r=nE(t[1]/255),n=nE(t[2]/255),i=Math.cbrt(.4122214708*e+.5363325363*r+.0514459929*n),s=Math.cbrt(.2119034982*e+.6806995451*r+.1073969566*n),o=Math.cbrt(.0883024619*e+.2817188376*r+.6299787005*n),a=.2104542553*i+.793617785*s-.0040720468*o,u=1.9779984951*i-2.428592205*s+.4505937099*o,c=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,u*100,c*100]};Ke.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),s=(1-e-i)/(1-i)||0,o=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function GTt(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}Ke.rgb.keyword=function(t){let e=O7e[t];if(e)return e;let r=Number.POSITIVE_INFINITY,n;for(let i of Object.keys(Md)){let s=Md[i],o=GTt(t,s);o<r&&(r=o,n=i)}return n};Ke.keyword.rgb=function(t){return Md[t]};Ke.rgb.xyz=function(t){let e=nE(t[0]/255),r=nE(t[1]/255),n=nE(t[2]/255),i=e*.4124564+r*.3575761+n*.1804375,s=e*.2126729+r*.7151522+n*.072175,o=e*.0193339+r*.119192+n*.9503041;return[i*100,s*100,o*100]};Ke.rgb.lab=function(t){let e=Ke.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>pf?r**(1/3):7.787*r+16/116,n=n>pf?n**(1/3):7.787*n+16/116,i=i>pf?i**(1/3):7.787*i+16/116;let s=116*n-16,o=500*(r-n),a=200*(n-i);return[s,o,a]};Ke.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s;if(r===0)return s=n*255,[s,s,s];let o=n<.5?n*(1+r):n+r-n*r,a=2*n-o,u=[0,0,0];for(let c=0;c<3;c++)i=e+1/3*-(c-1),i<0&&i++,i>1&&i--,6*i<1?s=a+(o-a)*6*i:2*i<1?s=o:3*i<2?s=a+(o-a)*(2/3-i)*6:s=a,u[c]=s*255;return u};Ke.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;let o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r);return[e,a*100,o*100]};Ke.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),a=255*n*(1-r*s),u=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}};Ke.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o;o=(2-r)*n;let a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};Ke.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s;i>1&&(r/=i,n/=i);let o=Math.floor(6*e),a=1-n;s=6*e-o,(o&1)!==0&&(s=1-s);let u=r+s*(a-r),c,l,d;switch(o){default:case 6:case 0:{c=a,l=u,d=r;break}case 1:{c=u,l=a,d=r;break}case 2:{c=r,l=a,d=u;break}case 3:{c=r,l=u,d=a;break}case 4:{c=u,l=r,d=a;break}case 5:{c=a,l=r,d=u;break}}return[c*255,l*255,d*255]};Ke.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};Ke.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2404542+r*-1.5371385+n*-.4985314,s=e*-.969266+r*1.8760108+n*.041556,o=e*.0556434+r*-.2040259+n*1.0572252,i=rE(i),s=rE(s),o=rE(o),[i*255,s*255,o*255]};Ke.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>pf?e**(1/3):7.787*e+16/116,r=r>pf?r**(1/3):7.787*r+16/116,n=n>pf?n**(1/3):7.787*n+16/116;let i=116*r-16,s=500*(e-r),o=200*(r-n);return[i,s,o]};Ke.xyz.oklab=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=Math.cbrt(.8189330101*e+.3618667424*r-.1288597137*n),s=Math.cbrt(.0329845436*e+.9293118715*r+.0361456387*n),o=Math.cbrt(.0482003018*e+.2643662691*r+.633851707*n),a=.2104542553*i+.793617785*s-.0040720468*o,u=1.9779984951*i-2.428592205*s+.4505937099*o,c=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,u*100,c*100]};Ke.oklab.oklch=function(t){return Ke.lab.lch(t)};Ke.oklab.xyz=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=(.999999998*e+.396337792*r+.215803758*n)**3,s=(1.000000008*e-.105561342*r-.063854175*n)**3,o=(1.000000055*e-.089484182*r-1.291485538*n)**3,a=1.227013851*i-.55779998*s+.281256149*o,u=-.040580178*i+1.11225687*s-.071676679*o,c=-.076381285*i-.421481978*s+1.58616322*o;return[a*100,u*100,c*100]};Ke.oklab.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=(e+.3963377774*r+.2158037573*n)**3,s=(e-.1055613458*r-.0638541728*n)**3,o=(e-.0894841775*r-1.291485548*n)**3,a=rE(4.0767416621*i-3.3077115913*s+.2309699292*o),u=rE(-1.2684380046*i+2.6097574011*s-.3413193965*o),c=rE(-.0041960863*i-.7034186147*s+1.707614701*o);return[a*255,u*255,c*255]};Ke.oklch.oklab=function(t){return Ke.lch.lab(t)};Ke.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;let a=s**3,u=i**3,c=o**3;return s=a>pf?a:(s-16/116)/7.787,i=u>pf?u:(i-16/116)/7.787,o=c>pf?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};Ke.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(r*r+n*n);return[e,o,i]};Ke.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,s=r*Math.cos(i),o=r*Math.sin(i);return[e,s,o]};Ke.rgb.ansi16=function(t,e=null){let[r,n,i]=t,s=e===null?Ke.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};Ke.hsv.ansi16=function(t){return Ke.rgb.ansi16(Ke.hsv.rgb(t),t[2])};Ke.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e>>4===r>>4&&r>>4===n>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};Ke.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(Math.trunc(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};Ke.ansi256.rgb=function(t){if(t=t[0],t>=232){let s=(t-232)*10+8;return[s,s,s]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};Ke.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(r.length)+r};Ke.hex.rgb=function(t){let e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=[...r].map(a=>a+a).join(""));let n=Number.parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};Ke.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,a,u=o<1?s/(1-o):0;return o<=0?a=0:i===e?a=(r-n)/o%6:i===r?a=2+(n-e)/o:a=4+(e-r)/o,a/=6,a%=1,[a*360,o*100,u*100]};Ke.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};Ke.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};Ke.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],s=e%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=o,i[2]=0;break}case 1:{i[0]=a,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=o;break}case 3:{i[0]=0,i[1]=a,i[2]=1;break}case 4:{i[0]=o,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};Ke.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};Ke.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};Ke.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};Ke.hwb.hcg=function(t){let e=t[1]/100,n=1-t[2]/100,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};Ke.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Ke.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Ke.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Ke.gray.hsl=function(t){return[0,0,t[0]]};Ke.gray.hsv=Ke.gray.hsl;Ke.gray.hwb=function(t){return[0,100,t[0]]};Ke.gray.cmyk=function(t){return[0,0,0,t[0]]};Ke.gray.lab=function(t){return[t[0],0,0]};Ke.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(n.length)+n};Ke.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function HTt(){let t={},e=Object.keys(Ke);for(let{length:r}=e,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function zTt(t){let e=HTt(),r=[t];for(e[t].distance=0;r.length>0;){let n=r.pop(),i=Object.keys(Ke[n]);for(let{length:s}=i,o=0;o<s;o++){let a=i[o],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(a))}}return e}function WTt(t,e){return function(r){return e(t(r))}}function JTt(t,e){let r=[e[t].parent,t],n=Ke[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=WTt(Ke[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}function YTt(t){let e=zTt(t),r={},n=Object.keys(e);for(let{length:i}=n,s=0;s<i;s++){let o=n[s];e[o].parent!==null&&(r[o]=JTt(o,e))}return r}var vs={},QTt=Object.keys(Ke);function XTt(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function ZTt(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let{length:s}=i,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}for(let t of QTt){vs[t]={},Object.defineProperty(vs[t],"channels",{value:Ke[t].channels}),Object.defineProperty(vs[t],"labels",{value:Ke[t].labels});let e=YTt(t),r=Object.keys(e);for(let n of r){let i=e[n];vs[t][n]=ZTt(i),vs[t][n].raw=XTt(i)}}var x7e=["keyword","gray","hex"],yX={};for(let t of Object.keys(vs))yX[[...vs[t].labels].sort().join("")]=t;var gX={};function Zi(t,e){if(!(this instanceof Zi))return new Zi(t,e);if(e&&e in x7e&&(e=null),e&&!(e in vs))throw new Error("Unknown model: "+e);let r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Zi)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){let i=es.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=vs[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=vs[this.model].channels;let i=Array.prototype.slice.call(t,0,n);this.color=bX(i,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;let i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);let s=i.sort().join("");if(!(s in yX))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=yX[s];let{labels:o}=vs[this.model],a=[];for(r=0;r<o.length;r++)a.push(t[o[r]]);this.color=bX(a)}if(gX[this.model])for(n=vs[this.model].channels,r=0;r<n;r++){let i=gX[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Zi.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in es.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);let r=e.valpha===1?e.color:[...e.color,this.valpha];return es.to[e.model](...r)},percentString(t){let e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:[...e.color,this.valpha];return es.to.rgb.percent(...r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let t={},{channels:e}=vs[this.model],{labels:r}=vs[this.model];for(let n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){let t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){let t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Zi([...this.color.map(t7t(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Zi([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:ci("rgb",0,Xi(255)),green:ci("rgb",1,Xi(255)),blue:ci("rgb",2,Xi(255)),hue:ci(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:ci("hsl",1,Xi(100)),lightness:ci("hsl",2,Xi(100)),saturationv:ci("hsv",1,Xi(100)),value:ci("hsv",2,Xi(100)),chroma:ci("hcg",1,Xi(100)),gray:ci("hcg",2,Xi(100)),white:ci("hwb",1,Xi(100)),wblack:ci("hwb",2,Xi(100)),cyan:ci("cmyk",0,Xi(100)),magenta:ci("cmyk",1,Xi(100)),yellow:ci("cmyk",2,Xi(100)),black:ci("cmyk",3,Xi(100)),x:ci("xyz",0,Xi(95.047)),y:ci("xyz",1,Xi(100)),z:ci("xyz",2,Xi(108.833)),l:ci("lab",0,Xi(100)),a:ci("lab",1),b:ci("lab",2),keyword(t){return t!==void 0?new Zi(t):vs[this.model].keyword(this.color)},hex(t){return t!==void 0?new Zi(t):es.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new Zi(t);let e=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),es.to.hex(...e)+r},rgbNumber(){let t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){let t=this.rgb().color,e=[];for(let[r,n]of t.entries()){let i=n/255;e[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){let e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level(t){let e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){let t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){let e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){let e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){let e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){let e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){let e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){let e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){let t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Zi.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){let e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);let r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,u=1-a;return Zi.rgb(a*r.red()+u*n.red(),a*r.green()+u*n.green(),a*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(let t of Object.keys(vs)){if(x7e.includes(t))continue;let{channels:e}=vs[t];Zi.prototype[t]=function(...r){return this.model===t?new Zi(this):r.length>0?new Zi(r,t):new Zi([...r7t(vs[this.model][t].raw(this.color)),this.valpha],t)},Zi[t]=function(...r){let n=r[0];return typeof n=="number"&&(n=bX(r,e)),new Zi(n,t)}}function e7t(t,e){return Number(t.toFixed(e))}function t7t(t){return function(e){return e7t(e,t)}}function ci(t,e,r){t=Array.isArray(t)?t:[t];for(let n of t)(gX[n]||=[])[e]=r;return t=t[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Xi(t){return function(e){return Math.max(0,Math.min(t,e))}}function r7t(t){return Array.isArray(t)?t:[t]}function bX(t,e){for(let r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}function n7t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i7t=function(e){for(var r=0,n=0;r<e.length;n=e.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i},C7e=n7t(i7t);function s7t(t,e){let r=t.split(e||":"),n=C7e(r[0]);if(!r.length)return n;for(let i=0,s=r.length-1;i<s;i++)n=Zi(n).mix(Zi(C7e(r[i+1]))).saturate(1).hex();return n}I7e.exports=s7t});var k7e=b((mbr,D7e)=>{"use strict";function kl(t,e){if(e)return new kl(t).style(e);if(!(this instanceof kl))return new kl(t);this.text=t}kl.prototype.prefix="\x1B[";kl.prototype.suffix="m";kl.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var r=e.substring(0,2),n=e.substring(2,4),i=e.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};kl.prototype.rgb=function(e,r,n){var i=e/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};kl.prototype.ansi=function(e,r,n){var i=Math.round(e),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};kl.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};kl.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};D7e.exports=kl});var P7e=b((ybr,M7e)=>{var o7t=R7e(),a7t=k7e();M7e.exports=function(e,r){var n=r.namespace,i=r.colors!==!1?a7t(n+":",o7t(n)):n+":";return e[0]=i+" "+e[0],e}});var F7e=b((gbr,N7e)=>{"use strict";N7e.exports=function(e,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+r+"$").test(e))return!0}return!1}});var q7e=b((bbr,B7e)=>{var u7t=F7e();B7e.exports=function(e){return function(n){try{return u7t(n,e())}catch{}return!1}}});var j7e=b((_br,L7e)=>{var c7t=q7e();L7e.exports=c7t(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var U7e=b((Ebr,$7e)=>{$7e.exports=function(t,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var V7e=b((vbr,K7e)=>{var l7t=mX(),d7t=require("tty").isatty(1),ER=l7t(function t(e,r){return r=r||{},r.colors="colors"in r?r.colors:d7t,r.namespace=e,r.prod=!1,r.dev=!0,!t.enabled(e)&&!(r.force||t.force)?t.nope(r):t.yep(r)});ER.modify(P7e());ER.use(j7e());ER.set(U7e());K7e.exports=ER});var ZS=b((Sbr,_X)=>{process.env.NODE_ENV==="production"?_X.exports=A7e():_X.exports=V7e()});var H7e=b((wbr,G7e)=>{"use strict";var EX=require("fs"),{StringDecoder:p7t}=require("string_decoder"),{Stream:f7t}=Ih();function h7t(){}G7e.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new p7t("utf8"),i=new f7t,s="",o=0,a=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},EX.open(t.file,"a+","0644",(u,c)=>{if(u){e?e(u):i.emit("error",u),i.destroy();return}(function l(){if(i.destroyed){EX.close(c,h7t);return}return EX.read(c,r,0,r.length,o,(d,p)=>{if(d){e?e(d):i.emit("error",d),i.destroy();return}if(!p)return s&&((t.start==null||a>t.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(l,1e3);let f=n.write(r.slice(0,p));e||i.emit("data",f),f=(s+f).split(/\n+/);let h=f.length-1,y=0;for(;y<h;y++)(t.start==null||a>t.start)&&(e?e(null,f[y]):i.emit("line",f[y])),a++;return s=f[h],o+=p,l()})})()}),e?i.destroy:i}});var Y7e=b((Cbr,J7e)=>{"use strict";var ka=require("fs"),Ss=require("path"),z7e=l7e(),m7t=require("zlib"),{MESSAGE:y7t}=Bi(),{Stream:g7t,PassThrough:W7e}=Ih(),b7t=Sy(),Ml=ZS()("winston:file"),_7t=require("os"),E7t=H7e();J7e.exports=class extends b7t{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new W7e,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?Ss.basename(e.filename):"winston.log",this.dirname=e.dirname||Ss.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=Ss.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:_7t.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}_final(e){if(this._opening){this.once("open",()=>this._final(e));return}if(this._stream.end(),!this._dest||this._dest.writableFinished)return e();this._dest.once("finish",e),this._dest.once("error",e)}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[y7t]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,Ml("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),Ml("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=d(e);let n=Ss.join(this.dirname,this.filename),i="",s=[],o=0,a=ka.createReadStream(n,{encoding:"utf8"});a.on("error",p=>{if(a.readable&&a.destroy(),!!r)return p.code!=="ENOENT"?r(p):r(null,s)}),a.on("data",p=>{p=(i+p).split(/\n+/);let f=p.length-1,h=0;for(;h<f;h++)(!e.start||o>=e.start)&&u(p[h]),o++;i=p[f]}),a.on("close",()=>{i&&u(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function u(p,f){try{let h=JSON.parse(p);l(h)&&c(h)}catch(h){f||a.emit("error",h)}}function c(p){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(p=e.fields.reduce((f,h)=>(f[h]=p[h],f),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(p)}function l(p){if(!p||typeof p!="object")return;let f=new Date(p.timestamp);if(!(e.from&&f<e.from||e.until&&f>e.until||e.level&&e.level!==p.level))return!0}function d(p){return p=p||{},p.rows=p.rows||p.limit||10,p.start=p.start||0,p.until=p.until||new Date,typeof p.until!="object"&&(p.until=new Date(p.until)),p.from=p.from||p.until-1440*60*1e3,typeof p.from!="object"&&(p.from=new Date(p.from)),p.order=p.order||"desc",p}}stream(e={}){let r=Ss.join(this.dirname,this.filename),n=new g7t,i={file:r,start:e.start};return n.destroy=E7t(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);Ml("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),n=Ss.join(this.dirname,r);ka.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return Ml("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return Ml(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=Ss.join(this.dirname,this.filename);Ml("create stream start",r,this.options);let n=ka.createWriteStream(r,this.options).on("error",i=>Ml(i)).on("close",()=>Ml("close",n.path,n.bytesWritten)).on("open",()=>{Ml("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new W7e,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});return Ml("create stream ok",r),n}_incFile(e){Ml("_incFile",this.filename);let r=Ss.extname(this._basename),n=Ss.basename(this._basename,r),i=[];this.zippedArchive&&i.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(Ss.join(this.dirname,`${n}${o}${r}`),Ss.join(this.dirname,`${n}${o}${r}.gz`),s)}.bind(this)),i.push(function(s){this.tailable?this._checkMaxFilesTailable(r,n,s):(this._created+=1,this._checkMaxFilesIncrementing(r,n,s))}.bind(this)),z7e(i,e)}_getFile(){let e=Ss.extname(this._basename),r=Ss.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,u=Ss.join(this.dirname,a);ka.unlink(u,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,u){let c=`${r}${a-1}${e}${s}`,l=Ss.join(this.dirname,c);ka.exists(l,d=>{if(!d)return u(null);c=`${r}${a}${e}${s}`,ka.rename(l,Ss.join(this.dirname,c),u)})}.bind(this,o));z7e(i,()=>{ka.rename(Ss.join(this.dirname,`${r}${e}${s}`),Ss.join(this.dirname,`${r}1${e}${s}`),n)})}_compressFile(e,r,n){ka.access(e,ka.F_OK,i=>{if(i)return n();var s=m7t.createGzip(),o=ka.createReadStream(e),a=ka.createWriteStream(r);a.on("finish",()=>{ka.unlink(e,n)}),o.pipe(s).pipe(a)})}_createLogDirIfNotExist(e){ka.existsSync(e)||ka.mkdirSync(e,{recursive:!0})}}});var X7e=b((Obr,Q7e)=>{"use strict";var v7t=require("http"),S7t=require("https"),{Stream:w7t}=Ih(),A7t=Sy(),{configure:C7t}=BS();Q7e.exports=class extends A7t{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(u){return r(u)}r(null,a)})}stream(e={}){let r=new w7t;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let u=a.length-1,c=0;for(;c<u;c++)try{r.emit("log",JSON.parse(a[c]))}catch(l){r.emit("error",l)}s=a[u]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?S7t:v7t).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",u=>u.on("end",()=>r(null,u)).resume());let a=C7t({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}});var eOe=b((Ibr,Z7e)=>{"use strict";var T7t=hC(),{MESSAGE:O7t}=Bi(),x7t=require("os"),I7t=Sy();Z7e.exports=class extends I7t{constructor(e={}){if(super(e),!e.stream||!T7t(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:x7t.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[O7t]}${this.eol}`),r&&r()}}});var tOe=b(ew=>{"use strict";Object.defineProperty(ew,"Console",{configurable:!0,enumerable:!0,get(){return xTe()}});Object.defineProperty(ew,"File",{configurable:!0,enumerable:!0,get(){return Y7e()}});Object.defineProperty(ew,"Http",{configurable:!0,enumerable:!0,get(){return X7e()}});Object.defineProperty(ew,"Stream",{configurable:!0,enumerable:!0,get(){return eOe()}})});var SR=b(tw=>{"use strict";var vR=wQ(),{configs:vX}=Bi();tw.cli=vR.levels(vX.cli);tw.npm=vR.levels(vX.npm);tw.syslog=vR.levels(vX.syslog);tw.addColors=vR.levels});var nOe=b((wR,rOe)=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});var R7t=tR(),D7t=Ay(R7t),k7t=dR(),M7t=Ay(k7t),P7t=oX(),N7t=Ay(P7t),F7t=nX(),B7t=Ay(F7t),q7t=iX(),L7t=Ay(q7t),j7t=wy(),$7t=Ay(j7t),U7t=eE(),K7t=Ay(U7t);function Ay(t){return t&&t.__esModule?t:{default:t}}function V7t(t,e,r){r=(0,B7t.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function a(u,c){u===!1&&(o=!0),o!==!0&&(u?r(u):(++i===s||c===M7t.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,L7t.default)(a))}function G7t(t,e,r){return(0,N7t.default)(t,1/0,e,r)}function H7t(t,e,r){var n=(0,D7t.default)(t)?V7t:G7t;return n(t,(0,$7t.default)(e),r)}wR.default=(0,K7t.default)(H7t,3);rOe.exports=wR.default});var sOe=b((AR,iOe)=>{"use strict";Object.defineProperty(AR,"__esModule",{value:!0});AR.default=z7t;function z7t(t){return(e,r,n)=>t(e,n)}iOe.exports=AR.default});var OR=b((TR,oOe)=>{"use strict";Object.defineProperty(TR,"__esModule",{value:!0});var W7t=nOe(),J7t=CR(W7t),Y7t=sOe(),Q7t=CR(Y7t),X7t=wy(),Z7t=CR(X7t),eOt=eE(),tOt=CR(eOt);function CR(t){return t&&t.__esModule?t:{default:t}}function rOt(t,e,r){return(0,J7t.default)(t,(0,Q7t.default)((0,Z7t.default)(e)),r)}TR.default=(0,tOt.default)(rOt,3);oOe.exports=TR.default});var uOe=b((kbr,aOe)=>{"use strict";var nOt=Object.prototype.toString;aOe.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=nOt.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var SX=b((Mbr,cOe)=>{"use strict";var iOt=uOe();cOe.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=iOt(e),i}});var xR=b(nw=>{nw.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||nw.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};nw.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,u=null,c=null,l=i[5]==="native";if(i[1]){a=i[1];var d=a.lastIndexOf(".");if(a[d-1]=="."&&d--,d>0){s=a.substr(0,d),o=a.substr(d+1);var p=s.indexOf(".Module");p>0&&(a=a.substr(p+1),s=s.substr(0,p))}u=null}o&&(u=s,c=o),o==="<anonymous>"&&(c=null,a=null);var f={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:u,methodName:c,columnNumber:parseInt(i[4],10)||null,native:l};return e._createParsedCallSite(f)}}).filter(function(n){return!!n})};function rw(t){for(var e in t)this[e]=t[e]}var sOt=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],oOt=["topLevel","eval","native","constructor"];sOt.forEach(function(t){rw.prototype[t]=null,rw.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});oOt.forEach(function(t){rw.prototype[t]=!1,rw.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});nw._createParsedCallSite=function(t){return new rw(t)}});var dOe=b((Fbr,lOe)=>{"use strict";var{Writable:aOt}=Ih();lOe.exports=class extends aOt{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var AX=b((qbr,hOe)=>{"use strict";var pOe=require("os"),uOt=OR(),wX=ZS()("winston:exception"),cOt=SX(),fOe=xR(),lOt=dOe();hOe.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:pOe.loadavg(),uptime:pOe.uptime()}}getTrace(e){return(e?fOe.parse(e):fOe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new lOt(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){wX("doExit",i),wX("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);uOt(n,(a,u)=>{let c=cOt(u),l=a.transport||a;function d(p){return()=>{wX(p),c()}}l._ending=!0,l.once("finish",d("finished")),l.once("error",d("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var yOe=b((jbr,mOe)=>{"use strict";var{Writable:dOt}=Ih();mOe.exports=class extends dOt{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,n){return e.rejection?this.transport.log(e,n):(n(),!0)}}});var TX=b((Ubr,_Oe)=>{"use strict";var gOe=require("os"),pOt=OR(),CX=ZS()("winston:rejection"),fOt=SX(),bOe=xR(),hOt=yOe();_Oe.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:gOe.loadavg(),uptime:gOe.uptime()}}getTrace(e){return(e?bOe.parse(e):bOe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new hOt(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){CX("doExit",i),CX("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);pOt(n,(a,u)=>{let c=fOt(u),l=a.transport||a;function d(p){return()=>{CX(p),c()}}l._ending=!0,l.once("finish",d("finished")),l.once("error",d("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var vOe=b((Kbr,EOe)=>{"use strict";var OX=class{constructor(e){let r=IR();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};EOe.exports=OX});var IR=b((Vbr,COe)=>{"use strict";var{Stream:mOt,Transform:yOt}=Ih(),SOe=OR(),{LEVEL:Pd,SPLAT:wOe}=Bi(),AOe=hC(),gOt=AX(),bOt=TX(),_Ot=eX(),EOt=vOe(),{warn:vOt}=AQ(),SOt=SR(),wOt=/%[scdjifoO%]/g,RR=class extends yOt{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message,i.cause=n.cause),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:u,emitErrs:c,formatters:l,padLevels:d,rewriters:p,stripColors:f,exceptionHandlers:h,rejectionHandlers:y}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||bQ()(),this.defaultMeta=n||null,this.levels=i||this.levels||SOt.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new gOt(this),this.rejections=new bOt(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(E=>this.add(E))),u||c||l||d||p||f)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));h&&this.exceptions.handle(h),y&&this.rejections.handle(y)}getHighestLogLevel(){let e=iw(this.levels,this.level);return!this.transports||this.transports.length===0?e:this.transports.reduce((r,n)=>{let i=iw(this.levels,n.level);return i!==null&&i>r?i:r},e)}isLevelEnabled(e){let r=iw(this.levels,e);if(r===null)return!1;let n=iw(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=iw(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[Pd]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[Pd]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[Pd]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(wOt))){let o=Object.assign({},this.defaultMeta,i,{[Pd]:e,[wOe]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),i.cause&&(o.cause=i.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[Pd]:e,[wOe]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[Pd]||(e[Pd]=e.level),!this.levels[e[Pd]]&&this.levels[e[Pd]]!==0&&console.error("[winston] Unknown logger level: %s",e[Pd]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();SOe(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!AOe(e)||e.log.length>2?new _Ot({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!AOe(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){vOt.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,u){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(c,l)=>{if(c)return u(c);typeof a.formatResults=="function"&&(l=a.formatResults(l,e.format)),u(null,l)})}function o(a,u){s(a,(c,l)=>{u&&(l=c||l,l&&(n[a.name]=l),u()),u=null})}SOe(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(e={}){let r=new mOt,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new EOt(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function iw(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(RR.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});COe.exports=RR});var xX=b((Gbr,TOe)=>{"use strict";var{LEVEL:AOt}=Bi(),COt=SR(),TOt=IR(),OOt=ZS()("winston:create-logger");function xOt(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}TOe.exports=function(t={}){t.levels=t.levels||COt.npm.levels;class e extends TOt{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){if(OOt('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[AOt]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[xOt(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var xOe=b((zbr,OOe)=>{"use strict";var IOt=xX();OOe.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=IOt(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var ROe=b(sn=>{"use strict";var IOe=wQ(),{warn:sw}=AQ();sn.version=OCe().version;sn.transports=tOe();sn.config=SR();sn.addColors=IOe.levels;sn.format=IOe.format;sn.createLogger=xX();sn.Logger=IR();sn.ExceptionHandler=AX();sn.RejectionHandler=TX();sn.Container=xOe();sn.Transport=Sy();sn.loggers=new sn.Container;var Nd=sn.createLogger();Object.keys(sn.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>sn[t]=(...e)=>Nd[t](...e));Object.defineProperty(sn,"level",{get(){return Nd.level},set(t){Nd.level=t}});Object.defineProperty(sn,"exceptions",{get(){return Nd.exceptions}});Object.defineProperty(sn,"rejections",{get(){return Nd.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(sn,t,{get(){return Nd[t]},set(e){Nd[t]=e}})});Object.defineProperty(sn,"default",{get(){return{exceptionHandlers:Nd.exceptionHandlers,rejectionHandlers:Nd.rejectionHandlers,transports:Nd.transports}}});sw.deprecated(sn,"setLevels");sw.forFunctions(sn,"useFormat",["cli"]);sw.forProperties(sn,"useFormat",["padLevels","stripColors"]);sw.forFunctions(sn,"deprecated",["addRewriter","addFilter","clone","extend"]);sw.forProperties(sn,"deprecated",["emitErrs","levelLength"])});var ow=b(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.getUint64=yc.getInt64=yc.setInt64=yc.setUint64=yc.UINT32_MAX=void 0;yc.UINT32_MAX=4294967295;function ROt(t,e,r){let n=r/4294967296,i=r;t.setUint32(e,n),t.setUint32(e+4,i)}yc.setUint64=ROt;function DOt(t,e,r){let n=Math.floor(r/4294967296),i=r;t.setUint32(e,n),t.setUint32(e+4,i)}yc.setInt64=DOt;function kOt(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}yc.getInt64=kOt;function MOt(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}yc.getUint64=MOt});var kR=b(bo=>{"use strict";var IX,RX,DX;Object.defineProperty(bo,"__esModule",{value:!0});bo.utf8DecodeTD=bo.TEXT_DECODER_THRESHOLD=bo.utf8DecodeJs=bo.utf8EncodeTE=bo.TEXT_ENCODER_THRESHOLD=bo.utf8EncodeJs=bo.utf8Count=void 0;var DOe=ow(),DR=(typeof process>"u"||((IX=process==null?void 0:process.env)===null||IX===void 0?void 0:IX.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function POt(t){let e=t.length,r=0,n=0;for(;n<e;){let i=t.charCodeAt(n++);if((i&4294967168)===0){r++;continue}else if((i&4294965248)===0)r+=2;else{if(i>=55296&&i<=56319&&n<e){let s=t.charCodeAt(n);(s&64512)===56320&&(++n,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?r+=3:r+=4}}return r}bo.utf8Count=POt;function NOt(t,e,r){let n=t.length,i=r,s=0;for(;s<n;){let o=t.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){let a=t.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}bo.utf8EncodeJs=NOt;var aw=DR?new TextEncoder:void 0;bo.TEXT_ENCODER_THRESHOLD=DR?typeof process<"u"&&((RX=process==null?void 0:process.env)===null||RX===void 0?void 0:RX.TEXT_ENCODING)!=="force"?200:0:DOe.UINT32_MAX;function FOt(t,e,r){e.set(aw.encode(t),r)}function BOt(t,e,r){aw.encodeInto(t,e.subarray(r))}bo.utf8EncodeTE=aw?.encodeInto?BOt:FOt;var qOt=4096;function LOt(t,e,r){let n=e,i=n+r,s=[],o="";for(;n<i;){let a=t[n++];if((a&128)===0)s.push(a);else if((a&224)===192){let u=t[n++]&63;s.push((a&31)<<6|u)}else if((a&240)===224){let u=t[n++]&63,c=t[n++]&63;s.push((a&31)<<12|u<<6|c)}else if((a&248)===240){let u=t[n++]&63,c=t[n++]&63,l=t[n++]&63,d=(a&7)<<18|u<<12|c<<6|l;d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|d&1023),s.push(d)}else s.push(a);s.length>=qOt&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}bo.utf8DecodeJs=LOt;var jOt=DR?new TextDecoder:null;bo.TEXT_DECODER_THRESHOLD=DR?typeof process<"u"&&((DX=process==null?void 0:process.env)===null||DX===void 0?void 0:DX.TEXT_DECODER)!=="force"?200:0:DOe.UINT32_MAX;function $Ot(t,e,r){let n=t.subarray(e,e+r);return jOt.decode(n)}bo.utf8DecodeTD=$Ot});var MX=b(MR=>{"use strict";Object.defineProperty(MR,"__esModule",{value:!0});MR.ExtData=void 0;var kX=class{constructor(e,r){this.type=e,this.data=r}};MR.ExtData=kX});var NR=b(PR=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0});PR.DecodeError=void 0;var PX=class t extends Error{constructor(e){super(e);let r=Object.create(t.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};PR.DecodeError=PX});var NX=b(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.timestampExtension=Js.decodeTimestampExtension=Js.decodeTimestampToTimeSpec=Js.encodeTimestampExtension=Js.encodeDateToTimeSpec=Js.encodeTimeSpecToTimestamp=Js.EXT_TIMESTAMP=void 0;var UOt=NR(),kOe=ow();Js.EXT_TIMESTAMP=-1;var KOt=4294967296-1,VOt=17179869184-1;function MOe({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=VOt)if(e===0&&t<=KOt){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|r&3),s.setUint32(4,n),i}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),(0,kOe.setInt64)(n,4,t),r}}Js.encodeTimeSpecToTimestamp=MOe;function POe(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}Js.encodeDateToTimeSpec=POe;function NOe(t){if(t instanceof Date){let e=POe(t);return MOe(e)}else return null}Js.encodeTimestampExtension=NOe;function FOe(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),i=(r&3)*4294967296+n,s=r>>>2;return{sec:i,nsec:s}}case 12:{let r=(0,kOe.getInt64)(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new UOt.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}Js.decodeTimestampToTimeSpec=FOe;function BOe(t){let e=FOe(t);return new Date(e.sec*1e3+e.nsec/1e6)}Js.decodeTimestampExtension=BOe;Js.timestampExtension={type:Js.EXT_TIMESTAMP,encode:NOe,decode:BOe}});var qR=b(BR=>{"use strict";Object.defineProperty(BR,"__esModule",{value:!0});BR.ExtensionCodec=void 0;var FR=MX(),GOt=NX(),uw=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(GOt.timestampExtension)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let i=1+e;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let i=this.builtInEncoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=-1-n;return new FR.ExtData(o,s)}}}for(let n=0;n<this.encoders.length;n++){let i=this.encoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=n;return new FR.ExtData(o,s)}}}return e instanceof FR.ExtData?e:null}decode(e,r,n){let i=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return i?i(e,r,n):new FR.ExtData(r,e)}};BR.ExtensionCodec=uw;uw.defaultCodec=new uw});var FX=b(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});iE.createDataView=iE.ensureUint8Array=void 0;function qOe(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}iE.ensureUint8Array=qOe;function HOt(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=qOe(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}iE.createDataView=HOt});var qX=b(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.Encoder=Fd.DEFAULT_INITIAL_BUFFER_SIZE=Fd.DEFAULT_MAX_DEPTH=void 0;var cw=kR(),zOt=qR(),LOe=ow(),WOt=FX();Fd.DEFAULT_MAX_DEPTH=100;Fd.DEFAULT_INITIAL_BUFFER_SIZE=2048;var BX=class{constructor(e=zOt.ExtensionCodec.defaultCodec,r=void 0,n=Fd.DEFAULT_MAX_DEPTH,i=Fd.DEFAULT_INITIAL_BUFFER_SIZE,s=!1,o=!1,a=!1,u=!1){this.extensionCodec=e,this.context=r,this.maxDepth=n,this.initialBufferSize=i,this.sortKeys=s,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=u,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),i=new DataView(r);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>cw.TEXT_ENCODER_THRESHOLD){let i=(0,cw.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,cw.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=i}else{let i=(0,cw.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,cw.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=i}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=(0,WOt.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let i of e)this.doEncode(i,r+1)}countWithoutUndefined(e,r){let n=0;for(let i of r)e[i]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let i=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(let s of n){let o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,LOe.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,LOe.setInt64)(this.view,this.pos,e),this.pos+=8}};Fd.Encoder=BX});var jOe=b(LR=>{"use strict";Object.defineProperty(LR,"__esModule",{value:!0});LR.encode=void 0;var JOt=qX(),YOt={};function QOt(t,e=YOt){return new JOt.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encodeSharedRef(t)}LR.encode=QOt});var $Oe=b(jR=>{"use strict";Object.defineProperty(jR,"__esModule",{value:!0});jR.prettyByte=void 0;function XOt(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}jR.prettyByte=XOt});var UOe=b($R=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});$R.CachedKeyDecoder=void 0;var ZOt=kR(),ext=16,txt=16,LX=class{constructor(e=ext,r=txt){this.maxKeyLength=e,this.maxLengthPerKey=r,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){let i=this.caches[n-1];e:for(let s of i){let o=s.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return s.str}return null}store(e,r){let n=this.caches[e.length-1],i={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,r,n){let i=this.find(e,r,n);if(i!=null)return this.hit++,i;this.miss++;let s=(0,ZOt.utf8DecodeJs)(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,s),s}};$R.CachedKeyDecoder=LX});var UR=b(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.Decoder=hf.DataViewIndexOutOfBoundsError=void 0;var jX=$Oe(),rxt=qR(),Cy=ow(),$X=kR(),UX=FX(),nxt=UOe(),ff=NR(),ixt=t=>{let e=typeof t;return e==="string"||e==="number"},lw=-1,VX=new DataView(new ArrayBuffer(0)),sxt=new Uint8Array(VX.buffer);hf.DataViewIndexOutOfBoundsError=(()=>{try{VX.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})();var KOe=new hf.DataViewIndexOutOfBoundsError("Insufficient data"),oxt=new nxt.CachedKeyDecoder,KX=class{constructor(e=rxt.ExtensionCodec.defaultCodec,r=void 0,n=Cy.UINT32_MAX,i=Cy.UINT32_MAX,s=Cy.UINT32_MAX,o=Cy.UINT32_MAX,a=Cy.UINT32_MAX,u=oxt){this.extensionCodec=e,this.context=r,this.maxStrLength=n,this.maxBinLength=i,this.maxArrayLength=s,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=u,this.totalPos=0,this.pos=0,this.view=VX,this.bytes=sxt,this.headByte=lw,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=lw,this.stack.length=0}setBuffer(e){this.bytes=(0,UX.ensureUint8Array)(e),this.view=(0,UX.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===lw&&!this.hasRemaining(1))this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=(0,UX.ensureUint8Array)(e),i=new Uint8Array(r.length+n.length);i.set(r),i.set(n,r.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let r=!1,n;for await(let a of e){if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(u){if(!(u instanceof hf.DataViewIndexOutOfBoundsError))throw u}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,jX.prettyByte)(i)} at ${o} (${s} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,i=-1;for await(let s of e){if(r&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(i=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof hf.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e<160){let i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else{let i=e-160;r=this.decodeUtf8String(i,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let i=this.lookU8();r=this.decodeUtf8String(i,1)}else if(e===218){let i=this.lookU16();r=this.decodeUtf8String(i,2)}else if(e===219){let i=this.lookU32();r=this.decodeUtf8String(i,4)}else if(e===220){let i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===221){let i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===222){let i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===223){let i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===196){let i=this.lookU8();r=this.decodeBinary(i,1)}else if(e===197){let i=this.lookU16();r=this.decodeBinary(i,2)}else if(e===198){let i=this.lookU32();r=this.decodeBinary(i,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let i=this.lookU8();r=this.decodeExtension(i,1)}else if(e===200){let i=this.lookU16();r=this.decodeExtension(i,2)}else if(e===201){let i=this.lookU32();r=this.decodeExtension(i,4)}else throw new ff.DecodeError(`Unrecognized type byte: ${(0,jX.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let i=n[n.length-1];if(i.type===0)if(i.array[i.position]=r,i.position++,i.position===i.size)n.pop(),r=i.array;else continue e;else if(i.type===1){if(!ixt(r))throw new ff.DecodeError("The type of key must be string or number but "+typeof r);if(r==="__proto__")throw new ff.DecodeError("The key __proto__ is not allowed");i.key=r,i.type=2;continue e}else if(i.map[i.key]=r,i.readCount++,i.readCount===i.size)n.pop(),r=i.map;else{i.key=null,i.type=1;continue e}}return r}}readHeadByte(){return this.headByte===lw&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=lw}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new ff.DecodeError(`Unrecognized array type byte: ${(0,jX.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new ff.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new ff.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){var n;if(e>this.maxStrLength)throw new ff.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw KOe;let i=this.pos+r,s;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,i,e):e>$X.TEXT_DECODER_THRESHOLD?s=(0,$X.utf8DecodeTD)(this.bytes,i,e):s=(0,$X.utf8DecodeJs)(this.bytes,i,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new ff.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw KOe;let n=this.pos+r,i=this.bytes.subarray(n,n+e);return this.pos+=r+e,i}decodeExtension(e,r){if(e>this.maxExtLength)throw new ff.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),i=this.decodeBinary(e,r+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,Cy.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,Cy.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};hf.Decoder=KX});var GX=b(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.decodeMulti=Bd.decode=Bd.defaultDecodeOptions=void 0;var VOe=UR();Bd.defaultDecodeOptions={};function axt(t,e=Bd.defaultDecodeOptions){return new VOe.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}Bd.decode=axt;function uxt(t,e=Bd.defaultDecodeOptions){return new VOe.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(t)}Bd.decodeMulti=uxt});var zOe=b(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.ensureAsyncIterable=Dh.asyncIterableFromStream=Dh.isAsyncIterable=void 0;function GOe(t){return t[Symbol.asyncIterator]!=null}Dh.isAsyncIterable=GOe;function cxt(t){if(t==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*HOe(t){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;cxt(n),yield n}}finally{e.releaseLock()}}Dh.asyncIterableFromStream=HOe;function lxt(t){return GOe(t)?t:HOe(t)}Dh.ensureAsyncIterable=lxt});var JOe=b(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.decodeStream=qd.decodeMultiStream=qd.decodeArrayStream=qd.decodeAsync=void 0;var HX=UR(),zX=zOe(),KR=GX();async function dxt(t,e=KR.defaultDecodeOptions){let r=(0,zX.ensureAsyncIterable)(t);return new HX.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(r)}qd.decodeAsync=dxt;function pxt(t,e=KR.defaultDecodeOptions){let r=(0,zX.ensureAsyncIterable)(t);return new HX.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(r)}qd.decodeArrayStream=pxt;function WOe(t,e=KR.defaultDecodeOptions){let r=(0,zX.ensureAsyncIterable)(t);return new HX.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(r)}qd.decodeMultiStream=WOe;function fxt(t,e=KR.defaultDecodeOptions){return WOe(t,e)}qd.decodeStream=fxt});var XOe=b(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.decodeTimestampExtension=Kt.encodeTimestampExtension=Kt.decodeTimestampToTimeSpec=Kt.encodeTimeSpecToTimestamp=Kt.encodeDateToTimeSpec=Kt.EXT_TIMESTAMP=Kt.ExtData=Kt.ExtensionCodec=Kt.Encoder=Kt.DataViewIndexOutOfBoundsError=Kt.DecodeError=Kt.Decoder=Kt.decodeStream=Kt.decodeMultiStream=Kt.decodeArrayStream=Kt.decodeAsync=Kt.decodeMulti=Kt.decode=Kt.encode=void 0;var hxt=jOe();Object.defineProperty(Kt,"encode",{enumerable:!0,get:function(){return hxt.encode}});var YOe=GX();Object.defineProperty(Kt,"decode",{enumerable:!0,get:function(){return YOe.decode}});Object.defineProperty(Kt,"decodeMulti",{enumerable:!0,get:function(){return YOe.decodeMulti}});var VR=JOe();Object.defineProperty(Kt,"decodeAsync",{enumerable:!0,get:function(){return VR.decodeAsync}});Object.defineProperty(Kt,"decodeArrayStream",{enumerable:!0,get:function(){return VR.decodeArrayStream}});Object.defineProperty(Kt,"decodeMultiStream",{enumerable:!0,get:function(){return VR.decodeMultiStream}});Object.defineProperty(Kt,"decodeStream",{enumerable:!0,get:function(){return VR.decodeStream}});var QOe=UR();Object.defineProperty(Kt,"Decoder",{enumerable:!0,get:function(){return QOe.Decoder}});Object.defineProperty(Kt,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return QOe.DataViewIndexOutOfBoundsError}});var mxt=NR();Object.defineProperty(Kt,"DecodeError",{enumerable:!0,get:function(){return mxt.DecodeError}});var yxt=qX();Object.defineProperty(Kt,"Encoder",{enumerable:!0,get:function(){return yxt.Encoder}});var gxt=qR();Object.defineProperty(Kt,"ExtensionCodec",{enumerable:!0,get:function(){return gxt.ExtensionCodec}});var bxt=MX();Object.defineProperty(Kt,"ExtData",{enumerable:!0,get:function(){return bxt.ExtData}});var sE=NX();Object.defineProperty(Kt,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return sE.EXT_TIMESTAMP}});Object.defineProperty(Kt,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return sE.encodeDateToTimeSpec}});Object.defineProperty(Kt,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return sE.encodeTimeSpecToTimestamp}});Object.defineProperty(Kt,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return sE.decodeTimestampToTimeSpec}});Object.defineProperty(Kt,"encodeTimestampExtension",{enumerable:!0,get:function(){return sE.encodeTimestampExtension}});Object.defineProperty(Kt,"decodeTimestampExtension",{enumerable:!0,get:function(){return sE.decodeTimestampExtension}})});var exe=b(GR=>{"use strict";Object.defineProperty(GR,"__esModule",{value:!0});GR.LogLevel=void 0;var ZOe;(function(t){t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug",t.Fatal="fatal",t.Http="http",t.Verbose="verbose",t.Silly="silly",t.Trace="trace"})(ZOe||(GR.LogLevel=ZOe={}))});var YX=b(JX=>{"use strict";Object.defineProperty(JX,"__esModule",{value:!0});var WX=class{constructor(){this.length=0}push(e){let r={value:e};this.last=this.last?this.last.next=r:this.first=r,this.length++}shift(){if(this.first){let{value:e}=this.first;return this.first=this.first.next,--this.length||(this.last=void 0),e}}};JX.default=WX});var txe=b(QX=>{"use strict";Object.defineProperty(QX,"__esModule",{value:!0});QX.base64Encode=_xt;function _xt(t){return Buffer.from(t).toString("base64")}});var rxe=b(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0});oE.calculateJsonLogSizeBytes=void 0;oE.default=Cxt;var Ext=1e3,vxt=1e3,Sxt=3,wxt=100,Axt=t=>JSON.stringify(t).length+1;oE.calculateJsonLogSizeBytes=Axt;function Cxt(t=Ext,e=vxt,r=Sxt,n=wxt,i=0,s=oE.calculateJsonLogSizeBytes){let o,a,u=[],c=0,l=0,d=0;async function p(){o&&clearTimeout(o),o=null;let h=u,y=c;u=[],c=0;try{await a(h.map(E=>E.log)),h.forEach(E=>E.resolve(E.log)),l=0}catch(E){if(l<r){l++,d=Date.now()+n,u=u.concat(h),c+=y,await f();return}h.map(v=>v.reject(E)),l=0}}async function f(){if(!o)return new Promise(h=>{o=setTimeout(async function(){await p(),h()},e)})}return{initPusher:function(h){return a=h,async function(y){return new Promise(async(E,v)=>(u.push({log:y,resolve:E,reject:v}),i>0&&(c+=s(y)),(u.length>=t||i>0&&c>=i)&&Date.now()>d?await p():await f(),E))}},flush:p}}});var nxe=b(ZX=>{"use strict";Object.defineProperty(ZX,"__esModule",{value:!0});ZX.default=Txt;var XX=64;function Txt(t,e,r="The function"){if(t<=0||e<=0)return c=>c;let n=[0],i=0,s=Date.now();function o(){let c=Date.now(),l=t/XX;if(c<s+l)return;let d=Math.floor((c-s)/l);n=Array(Math.min(d,XX)).fill(0).concat(n).slice(0,XX),s+=d*l}function a(){return n.reduce((c,l)=>c+l)}function u(){n[0]++}return c=>async(...l)=>{if(o(),a()<e)return u(),await c(...l);let d=Date.now();i<d-t&&(i=d,console.error(`${r} was called more than ${e} times during last ${t}ms. Ignoring.`))}}});var ixe=b(dw=>{"use strict";var Oxt=dw&&dw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dw,"__esModule",{value:!0});dw.default=Ixt;var xxt=Oxt(YX());function Ixt(t,e=-1){let r=0,n=new xxt.default;function i(s){return async(...o)=>new Promise((a,u)=>{async function c(){if(r<t){r++;try{a(await s(...o))}catch(l){u(l)}r--,n.length>0&&n.shift()()}else if(e<0||n.length<e)n.push(c);else{u(new Error("Queue max limit exceeded"));return}}return c()})}return i}});var oxe=b(li=>{"use strict";var Rxt=li&&li.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Dxt=li&&li.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),kxt=li&&li.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Rxt(e,t,r);return Dxt(e,t),e},eZ=li&&li.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(li,"__esModule",{value:!0});li.calculateJsonLogSizeBytes=li.makeThrottle=li.makeBurstProtection=li.makeBatch=li.base64Encode=li.Queue=void 0;var Mxt=eZ(YX());li.Queue=Mxt.default;var Pxt=txe();Object.defineProperty(li,"base64Encode",{enumerable:!0,get:function(){return Pxt.base64Encode}});var sxe=kxt(rxe());li.makeBatch=sxe.default;Object.defineProperty(li,"calculateJsonLogSizeBytes",{enumerable:!0,get:function(){return sxe.calculateJsonLogSizeBytes}});var Nxt=eZ(nxe());li.makeBurstProtection=Nxt.default;var Fxt=eZ(ixe());li.makeThrottle=Fxt.default});var uxe=b((b_r,axe)=>{"use strict";var tZ=class t extends Error{constructor(e){super(t._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,t)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},Bxt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],rZ=Symbol(".toJSON called"),qxt=t=>{t[rZ]=!0;let e=t.toJSON();return delete t[rZ],e},nZ=({from:t,seen:e,to_:r,forceEnumerable:n,maxDepth:i,depth:s})=>{let o=r||(Array.isArray(t)?[]:{});if(e.push(t),s>=i)return o;if(typeof t.toJSON=="function"&&t[rZ]!==!0)return qxt(t);for(let[a,u]of Object.entries(t)){if(typeof Buffer=="function"&&Buffer.isBuffer(u)){o[a]="[object Buffer]";continue}if(typeof u!="function"){if(!u||typeof u!="object"){o[a]=u;continue}if(!e.includes(t[a])){s++,o[a]=nZ({from:t[a],seen:e.slice(),forceEnumerable:n,maxDepth:i,depth:s});continue}o[a]="[Circular]"}}for(let{property:a,enumerable:u}of Bxt)typeof t[a]=="string"&&Object.defineProperty(o,a,{value:t[a],enumerable:n?!0:u,configurable:!0,writable:!0});return o},Lxt=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;return typeof t=="object"&&t!==null?nZ({from:t,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t},jxt=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let n=new Error;return nZ({from:t,seen:[],to_:n,maxDepth:r,depth:0}),n}return new tZ(t)};axe.exports={serializeError:Lxt,deserializeError:jxt}});var lxe=b(oZ=>{"use strict";Object.defineProperty(oZ,"__esModule",{value:!0});var aE=exe(),HR=oxe(),cxe=uxe(),$xt={endpoint:"https://in.logs.betterstack.com",batchSize:1e3,batchSizeKiB:0,batchInterval:1e3,retryCount:3,retryBackoff:100,syncMax:5,syncQueuedMax:100,burstProtectionMilliseconds:5e3,burstProtectionMax:1e4,ignoreExceptions:!1,throwExceptions:!1,contextObjectMaxDepth:50,contextObjectMaxDepthWarn:!0,contextObjectCircularRefWarn:!0,sendLogsToConsoleOutput:!1,sendLogsToBetterStack:!0,calculateLogSizeBytes:HR.calculateJsonLogSizeBytes},iZ=class{constructor(e,r){if(this._middleware=[],this._countLogged=0,this._countSynced=0,this._countDropped=0,typeof e!="string"||e==="")throw new Error("Logtail source token missing");this._sourceToken=e,this._options=Object.assign(Object.assign({},$xt),r);let i=(0,HR.makeThrottle)(this._options.syncMax,this._options.syncQueuedMax)(o=>this._sync(o));this._logBurstProtection=(0,HR.makeBurstProtection)(this._options.burstProtectionMilliseconds,this._options.burstProtectionMax,"Logging"),this.log=this._logBurstProtection(this.log.bind(this));let s=(0,HR.makeBatch)(this._options.batchSize,this._options.batchInterval,this._options.retryCount,this._options.retryBackoff,this._options.batchSizeKiB*1024,this._options.calculateLogSizeBytes);this._batch=s.initPusher(o=>i(o)),this._flush=s.flush}async flush(){return this._flush()}get logged(){return this._countLogged}get synced(){return this._countSynced}get dropped(){return this._countDropped}async log(e,r=aE.LogLevel.Info,n={}){if(typeof n!="object"&&(n={extra:n}),n instanceof Error&&(n={error:n}),this._options.sendLogsToConsoleOutput)switch(r){case"debug":console.debug(e,n);break;case"info":console.info(e,n);break;case"warn":console.warn(e,n);break;case"error":console.error(e,n);break;default:console.log(`[${r.toUpperCase()}]`,e,n);break}if(typeof this._sync!="function")throw new Error("No Logtail logger sync function provided");this._countLogged++;let s=Object.assign(Object.assign({dt:new Date,level:r},n),e instanceof Error?(0,cxe.serializeError)(e):{message:e});for(let o of this._middleware){let a=await o(s);if(a==null)return s;s=a}if(s=this.serialize(s,this._options.contextObjectMaxDepth),!this._options.sendLogsToBetterStack)return s;try{await this._batch(s),this._countSynced++}catch(o){if(this._countDropped++,!this._options.ignoreExceptions){if(this._options.throwExceptions)throw o;console.error(o)}}return s}serialize(e,r,n=new WeakSet){if(e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string")return e;if(e instanceof Date)return isNaN(e.getTime())?e.toString():e.toISOString();if(e instanceof Error)return(0,cxe.serializeError)(e);if((typeof e=="object"||Array.isArray(e))&&(r<1||n.has(e)))return n.has(e)?(this._options.contextObjectCircularRefWarn&&console.warn("[Logtail] Found a circular reference when serializing logs. Please do not use circular references in your logs."),"<omitted circular reference>"):(this._options.contextObjectMaxDepthWarn&&console.warn(`[Logtail] Max depth of ${this._options.contextObjectMaxDepth} reached when serializing logs. Please do not use excessive object depth in your logs.`),`<omitted context beyond configured max depth: ${this._options.contextObjectMaxDepth}>`);if(Array.isArray(e)){n.add(e);let i=e.map(s=>this.serialize(s,r-1,n));return n.delete(e),i}else if(typeof e=="object"){let i={};return n.add(e),Object.entries(e).forEach(s=>{let o=s[0],a=s[1],u=this.serialize(a,r-1,n);u!==void 0&&(i[o]=u)}),n.delete(e),i}else return typeof e>"u"?void 0:`<omitted unserializable ${typeof e}>`}async debug(e,r={}){return this.log(e,aE.LogLevel.Debug,r)}async info(e,r={}){return this.log(e,aE.LogLevel.Info,r)}async warn(e,r={}){return this.log(e,aE.LogLevel.Warn,r)}async error(e,r={}){return this.log(e,aE.LogLevel.Error,r)}setSync(e){this._sync=e}use(e){this._middleware.push(e)}remove(e){this._middleware=this._middleware.filter(r=>r!==e)}},sZ=class extends iZ{async log(e,r=aE.LogLevel.Info,n={}){return super.log(e,r,n)}};oZ.default=sZ});var dxe=b(uE=>{"use strict";var Uxt=uE&&uE.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uE,"__esModule",{value:!0});uE.Base=void 0;var Kxt=Uxt(lxe());uE.Base=Kxt.default});var hxe=b(pw=>{"use strict";var Vxt=pw&&pw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pw,"__esModule",{value:!0});pw.getStackContext=zxt;var pxe=require("path"),Gxt=Vxt(xR()),Hxt=fxe();function zxt(t,e){let r=Wxt(t,e);return r===null?{}:{context:{runtime:{file:Yxt(r.getFileName()),type:r.getTypeName(),method:r.getMethodName(),function:r.getFunctionName(),line:r.getLineNumber(),column:r.getColumnNumber()},system:{pid:process.pid,main_file:Hxt}}}}function Wxt(t,e){for(let r of[t.warn,t.error,t.info,t.debug,t.log]){let n=Gxt.default.get(r);if(n?.length>0)return Jxt(n,e)}return null}function Jxt(t,e){if(e){t.reverse();let r=t.findIndex(n=>{var i;return((i=n.getFileName())===null||i===void 0?void 0:i.includes(e.fileName))&&(e.methodNames.includes(n.getMethodName())||e.methodNames.includes(n.getFunctionName()))});return r>0?t[r-1]:e.required?null:t[t.length-1]}return t[0]}function Yxt(t){if(typeof t!="string")return null;if(t.startsWith("file:/"))return new URL(t).pathname;{let e=(0,pxe.dirname)(fxe());return(0,pxe.relative)(e,t)}}function fxe(){let t=process==null?void 0:process.argv;if(t===void 0)return"";for(let e of t){if(typeof e!="string"||e.startsWith("-"))break;if(e.endsWith(".js"))return e}return""}});var mxe=b(cE=>{"use strict";var uZ=cE&&cE.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cE,"__esModule",{value:!0});cE.Node=void 0;var Qxt=XOe(),Xxt=uZ(require("node:http")),Zxt=uZ(require("node:https")),eIt=uZ(require("node:zlib")),tIt=dxe(),rIt=hxe(),aZ=class extends tIt.Base{constructor(e,r){r=Object.assign({timeout:3e4},r),super(e,r);let n=this.createAgent(),i=async s=>{let o=this._options,a=this.getHttpModule().request(o.endpoint,{method:"POST",headers:{"Content-Type":"application/msgpack","Content-Encoding":"gzip",Authorization:`Bearer ${this._sourceToken}`,"User-Agent":"logtail-js(node)"},agent:n,timeout:o.timeout>0?o.timeout:void 0}),u=await new Promise((c,l)=>{o.timeout>0&&a.on("timeout",()=>{a.destroy(),l(new Error(`Request timeout after ${o.timeout}ms`))}),a.on("response",c),a.on("error",l),eIt.default.gzip(this.encodeAsMsgpack(s),(d,p)=>{if(d){l(d);return}a.write(p),a.end()})});if(u.statusCode&&u.statusCode>=200&&u.statusCode<300)return s;throw new Error(u.statusMessage)};this.setSync(i)}async log(e,r,n={},i){n=Object.assign(Object.assign({},(0,rIt.getStackContext)(this,i)),n);let s=await super.log(e,r,n);return this._writeStream&&this._writeStream.write(JSON.stringify(s)+`
`),s}pipe(e){return this._writeStream=e,e}encodeAsMsgpack(e){let r=(0,Qxt.encode)(e);return Buffer.from(r.buffer,r.byteOffset,r.byteLength)}createAgent(){let r=this._options.useIPv6?6:4;return new(this.getHttpModule()).Agent({family:r})}getHttpModule(){return this._options.endpoint.startsWith("https")?Zxt.default:Xxt.default}};cE.Node=aZ});var yxe=b(zR=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});zR.Logtail=void 0;var nIt=mxe();Object.defineProperty(zR,"Logtail",{enumerable:!0,get:function(){return nIt.Node}})});var gxe=b(kh=>{"use strict";var iIt=kh&&kh.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},sIt=kh&&kh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kh,"__esModule",{value:!0});kh.LogtailTransport=void 0;var oIt=sIt(Sy()),aIt={fileName:"node_modules/winston",methodNames:["log","error","warn","info","http","verbose","debug","silly"]},cZ=class extends oIt.default{constructor(e,r){super(Object.assign(Object.assign({},r),{close:()=>{this._logtail.flush().then(()=>{r?.close&&r.close()})}})),this._logtail=e}log(e,r){setImmediate(()=>{this.emit("logged",e)});let{level:n,message:i}=e,s=iIt(e,["level","message"]);this._logtail.log(i,n,s,aIt),r()}};kh.LogtailTransport=cZ});var bxe=b(WR=>{"use strict";Object.defineProperty(WR,"__esModule",{value:!0});WR.LogtailTransport=void 0;var uIt=gxe();Object.defineProperty(WR,"LogtailTransport",{enumerable:!0,get:function(){return uIt.LogtailTransport}})});var _xe=b((T_r,cIt)=>{cIt.exports={name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var Cxe=b((O_r,mf)=>{var lZ=require("fs"),JR=require("path"),lIt=require("os"),dIt=require("crypto"),pIt=_xe(),dZ=pIt.version,Exe=["\u{1F510} encrypt with Dotenvx: https://dotenvx.com","\u{1F510} prevent committing .env to code: https://dotenvx.com/precommit","\u{1F510} prevent building .env in docker: https://dotenvx.com/prebuild","\u{1F4E1} add observability to secrets: https://dotenvx.com/ops","\u{1F465} sync secrets across teammates & machines: https://dotenvx.com/ops","\u{1F5C2}\uFE0F backup and recover secrets: https://dotenvx.com/ops","\u2705 audit secrets and track compliance: https://dotenvx.com/ops","\u{1F504} add secrets lifecycle management: https://dotenvx.com/ops","\u{1F511} add access controls to secrets: https://dotenvx.com/ops","\u{1F6E0}\uFE0F  run anywhere with `dotenvx run -- yourcommand`","\u2699\uFE0F  specify custom .env file path with { path: '/custom/path/.env' }","\u2699\uFE0F  enable debug logging with { debug: true }","\u2699\uFE0F  override existing env vars with { override: true }","\u2699\uFE0F  suppress all logs with { quiet: true }","\u2699\uFE0F  write to custom object with { processEnv: myObject }","\u2699\uFE0F  load multiple .env files with { path: ['.env.local', '.env'] }"];function fIt(){return Exe[Math.floor(Math.random()*Exe.length)]}function lE(t){return typeof t=="string"?!["false","0","no","off",""].includes(t.toLowerCase()):!!t}function hIt(){return process.stdout.isTTY}function mIt(t){return hIt()?`\x1B[2m${t}\x1B[0m`:t}var yIt=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function gIt(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=yIt.exec(r))!=null;){let i=n[1],s=n[2]||"";s=s.trim();let o=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),e[i]=s}return e}function bIt(t){t=t||{};let e=Axe(t);t.path=e;let r=ts.configDotenv(t);if(!r.parsed){let o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}let n=wxe(t).split(","),i=n.length,s;for(let o=0;o<i;o++)try{let a=n[o].trim(),u=EIt(r,a);s=ts.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=i)throw a}return ts.parse(s)}function _It(t){console.error(`[dotenv@${dZ}][WARN] ${t}`)}function fw(t){console.log(`[dotenv@${dZ}][DEBUG] ${t}`)}function Sxe(t){console.log(`[dotenv@${dZ}] ${t}`)}function wxe(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function EIt(t,e){let r;try{r=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){let u=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw u.code="INVALID_DOTENV_KEY",u}throw a}let n=r.password;if(!n){let a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}let i=r.searchParams.get("environment");if(!i){let a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}let s=`DOTENV_VAULT_${i.toUpperCase()}`,o=t.parsed[s];if(!o){let a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:n}}function Axe(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)lZ.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=JR.resolve(process.cwd(),".env.vault");return lZ.existsSync(e)?e:null}function vxe(t){return t[0]==="~"?JR.join(lIt.homedir(),t.slice(1)):t}function vIt(t){let e=lE(process.env.DOTENV_CONFIG_DEBUG||t&&t.debug),r=lE(process.env.DOTENV_CONFIG_QUIET||t&&t.quiet);(e||!r)&&Sxe("Loading env from encrypted .env.vault");let n=ts._parseVault(t),i=process.env;return t&&t.processEnv!=null&&(i=t.processEnv),ts.populate(i,n,t),{parsed:n}}function SIt(t){let e=JR.resolve(process.cwd(),".env"),r="utf8",n=process.env;t&&t.processEnv!=null&&(n=t.processEnv);let i=lE(n.DOTENV_CONFIG_DEBUG||t&&t.debug),s=lE(n.DOTENV_CONFIG_QUIET||t&&t.quiet);t&&t.encoding?r=t.encoding:i&&fw("No encoding is specified. UTF-8 is used by default");let o=[e];if(t&&t.path)if(!Array.isArray(t.path))o=[vxe(t.path)];else{o=[];for(let l of t.path)o.push(vxe(l))}let a,u={};for(let l of o)try{let d=ts.parse(lZ.readFileSync(l,{encoding:r}));ts.populate(u,d,t)}catch(d){i&&fw(`Failed to load ${l} ${d.message}`),a=d}let c=ts.populate(n,u,t);if(i=lE(n.DOTENV_CONFIG_DEBUG||i),s=lE(n.DOTENV_CONFIG_QUIET||s),i||!s){let l=Object.keys(c).length,d=[];for(let p of o)try{let f=JR.relative(process.cwd(),p);d.push(f)}catch(f){i&&fw(`Failed to load ${p} ${f.message}`),a=f}Sxe(`injecting env (${l}) from ${d.join(",")} ${mIt(`-- tip: ${fIt()}`)}`)}return a?{parsed:u,error:a}:{parsed:u}}function wIt(t){if(wxe(t).length===0)return ts.configDotenv(t);let e=Axe(t);return e?ts._configVault(t):(_It(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),ts.configDotenv(t))}function AIt(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),i=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{let o=dIt.createDecipheriv("aes-256-gcm",r,i);return o.setAuthTag(s),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(c){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw o}}function CIt(t,e,r={}){let n=!!(r&&r.debug),i=!!(r&&r.override),s={};if(typeof e!="object"){let o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(i===!0&&(t[o]=e[o],s[o]=e[o]),n&&fw(i===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(t[o]=e[o],s[o]=e[o]);return s}var ts={configDotenv:SIt,_configVault:vIt,_parseVault:bIt,config:wIt,decrypt:AIt,parse:gIt,populate:CIt};mf.exports.configDotenv=ts.configDotenv;mf.exports._configVault=ts._configVault;mf.exports._parseVault=ts._parseVault;mf.exports.config=ts.config;mf.exports.decrypt=ts.decrypt;mf.exports.parse=ts.parse;mf.exports.populate=ts.populate;mf.exports=ts});var Txe,TIt,ws,hw=ce(()=>{"use strict";Txe=St(Cxe());Txe.default.config();TIt={PORT:process.env.PORT||8080,WHITELIST_ORIGINS:process.env.WHITELIST_ORIGINS,NODE_ENV:process.env.NODE_ENV,MONGO_URI:process.env.MONGO_URI,LOG_LEVEL:process.env.LOG_LEVEL||"info",AZURE_TENANT_ID:process.env.AZURE_TENANT_ID,AZURE_CLIENT_ID:process.env.AZURE_CLIENT_ID,HONEYCOMB_API_KEY:process.env.HONEYCOMB_API_KEY,ADMINA_API_CLIENT_ID:process.env.ADMINA_API_CLIENT_ID,defaultResLimit:20,defaultResOffset:0,AZURE_CLIENT_SECRETE:process.env.AZURE_CLIENT_SECRETE,AZURE_CLIENT_AUTHORITY:process.env.AZURE_CLIENT_AUTHORITY,LOGTAIL_SOURCE_TOKEN:process.env.LOGTAIL_SOURCE_TOKEN,LOG_TAIL_INGESTING_HOST:process.env.LOG_TAIL_INGESTING_HOST,GEMINI_API_KEY:process.env.GEMINI_API_KEY},ws=TIt});var mw,Oxe,xxe,pZ,fZ,Ixe,OIt,xIt,IIt,RIt,YR,hZ,Me,yf=ce(()=>{"use strict";mw=St(ROe()),Oxe=St(yxe()),xxe=St(bxe());hw();({combine:pZ,timestamp:fZ,json:Ixe,errors:OIt,align:xIt,printf:IIt,colorize:RIt}=mw.default.format),YR=[],hZ=new Oxe.Logtail(ws.LOGTAIL_SOURCE_TOKEN,{endpoint:`https://${ws.LOG_TAIL_INGESTING_HOST}`});if(ws.NODE_ENV==="local")YR.push(new mw.default.transports.Console({format:pZ(RIt({all:!0}),fZ({format:"YYYY-MM-DD hh:mm:ss A"}),xIt(),IIt(({timestamp:t,level:e,message:r,...n})=>{let i=Object.keys(n).length?`
${JSON.stringify(n)}`:"";return`${t} [${e}]: ${r}${i}`}))}));else{if(YR.push(new mw.default.transports.Console({format:pZ(fZ(),Ixe())})),!ws.LOGTAIL_SOURCE_TOKEN||!ws.LOG_TAIL_INGESTING_HOST)throw new Error("Logtail source token and ingesting host must be provided in the configuration");YR.push(new xxe.LogtailTransport(hZ))}Me=mw.default.createLogger({level:ws.LOG_LEVEL||"info",format:pZ(fZ(),OIt({stack:!0}),Ixe()),transports:YR,silent:ws.NODE_ENV==="test"})});var Ty,QR=ce(()=>{"use strict";Ty=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(s=>JSON.stringify(s))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}});var ye,br,gc,mZ,yn,Ma,Oy,dE,pE,fE,bc,xy,gf,Yr,yw,Rxe,Mh,hE,Ko,ns,nr,Ld,gw,bw,Iy,XR,Tn,mE,cu,gn=ce(()=>{"use strict";ye={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},br={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},gc=[ye.OPENID_SCOPE,ye.PROFILE_SCOPE,ye.OFFLINE_ACCESS_SCOPE],mZ=[...gc,ye.EMAIL_SCOPE],yn={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Ma={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Oy={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},dE={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},pE={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},fE={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},bc={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},xy={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},gf={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Yr={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},yw="appmetadata",Rxe="client_info",Mh="1",hE={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Ko={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},ns={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},nr={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Ld={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},gw={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},bw={username:"username",password:"password"},Iy={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},XR={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Tn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},mE=300,cu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"}});var ZR,eD,Dxe=ce(()=>{"use strict";ZR="unexpected_error",eD="post_request_failed"});var kxe,DIt,ir,_c=ce(()=>{"use strict";gn();Dxe();kxe={[ZR]:"Unexpected error in authentication.",[eD]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},DIt={unexpectedError:{code:ZR,desc:kxe[ZR]},postRequestFailed:{code:eD,desc:kxe[eD]}},ir=class t extends Error{constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||ye.EMPTY_STRING,this.errorMessage=r||ye.EMPTY_STRING,this.subError=n||ye.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}});var is={};Ha(is,{authTimeNotFound:()=>bf,authorizationCodeMissingFromServerResponse:()=>Vy,bindingKeyNotRemoved:()=>Iw,cannotAppendScopeSet:()=>$y,cannotRemoveEmptyScope:()=>jy,clientInfoDecodingError:()=>Ph,clientInfoEmptyError:()=>Ry,deviceCodeExpired:()=>Sw,deviceCodePollingCancelled:()=>vw,deviceCodeUnknownError:()=>ww,emptyInputScopeSet:()=>Bh,endSessionEndpointNotSupported:()=>Gy,endpointResolutionError:()=>Vo,hashNotDeserialized:()=>Py,invalidAssertion:()=>Tw,invalidCacheEnvironment:()=>Ef,invalidCacheRecord:()=>Uy,invalidClientCredential:()=>Ow,invalidState:()=>Pl,keyIdMissing:()=>Hy,maxAgeTranspired:()=>By,methodNotImplemented:()=>Bt,missingTenantIdError:()=>kw,multipleMatchingAccounts:()=>Ew,multipleMatchingAppMetadata:()=>qy,multipleMatchingTokens:()=>_w,nestedAppAuthBridgeDisabled:()=>Mw,networkError:()=>ky,noAccountFound:()=>Aw,noAccountInSilentRequest:()=>_f,noCryptoObject:()=>qh,noNetworkConnectivity:()=>Rw,nonceMismatch:()=>Fy,nullOrEmptyToken:()=>Dy,openIdConfigError:()=>My,platformBrokerError:()=>Pw,requestCannotBeMade:()=>Ly,stateMismatch:()=>Ny,stateNotFound:()=>Fh,tokenClaimsCnfRequiredForSignedJwt:()=>Ky,tokenParsingError:()=>Nh,tokenRefreshRequired:()=>vf,unexpectedCredentialType:()=>Cw,userCanceled:()=>Dw,userTimeoutReached:()=>xw});var Ph,Ry,Nh,Dy,Vo,ky,My,Py,Pl,Ny,Fh,Fy,bf,By,_w,Ew,qy,Ly,jy,$y,Bh,vw,Sw,ww,_f,Uy,Ef,Aw,qh,Cw,Tw,Ow,vf,xw,Ky,Vy,Iw,Gy,Hy,Rw,Dw,kw,Bt,Mw,Pw,Oi=ce(()=>{"use strict";Ph="client_info_decoding_error",Ry="client_info_empty_error",Nh="token_parsing_error",Dy="null_or_empty_token",Vo="endpoints_resolution_error",ky="network_error",My="openid_config_error",Py="hash_not_deserialized",Pl="invalid_state",Ny="state_mismatch",Fh="state_not_found",Fy="nonce_mismatch",bf="auth_time_not_found",By="max_age_transpired",_w="multiple_matching_tokens",Ew="multiple_matching_accounts",qy="multiple_matching_appMetadata",Ly="request_cannot_be_made",jy="cannot_remove_empty_scope",$y="cannot_append_scopeset",Bh="empty_input_scopeset",vw="device_code_polling_cancelled",Sw="device_code_expired",ww="device_code_unknown_error",_f="no_account_in_silent_request",Uy="invalid_cache_record",Ef="invalid_cache_environment",Aw="no_account_found",qh="no_crypto_object",Cw="unexpected_credential_type",Tw="invalid_assertion",Ow="invalid_client_credential",vf="token_refresh_required",xw="user_timeout_reached",Ky="token_claims_cnf_required_for_signedjwt",Vy="authorization_code_missing_from_server_response",Iw="binding_key_not_removed",Gy="end_session_endpoint_not_supported",Hy="key_id_missing",Rw="no_network_connectivity",Dw="user_canceled",kw="missing_tenant_id_error",Bt="method_not_implemented",Mw="nested_app_auth_bridge_disabled",Pw="platform_broker_error"});function Ae(t,e){return new yE(t,e)}var Ot,kIt,yE,qi=ce(()=>{"use strict";_c();Oi();Ot={[Ph]:"The client info could not be parsed/decoded correctly",[Ry]:"The client info was empty",[Nh]:"Token cannot be parsed",[Dy]:"The token is null or empty",[Vo]:"Endpoints cannot be resolved",[ky]:"Network request failed",[My]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Py]:"The hash parameters could not be deserialized",[Pl]:"State was not the expected format",[Ny]:"State mismatch error",[Fh]:"State not found",[Fy]:"Nonce mismatch error",[bf]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[By]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[_w]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Ew]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[qy]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Ly]:"Token request cannot be made without authorization code or refresh token.",[jy]:"Cannot remove null or empty scope from ScopeSet",[$y]:"Cannot append ScopeSet",[Bh]:"Empty input ScopeSet cannot be processed",[vw]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Sw]:"Device code is expired.",[ww]:"Device code stopped polling for unknown reasons.",[_f]:"Please pass an account object, silent flow is not supported without account information",[Uy]:"Cache record object was null or undefined.",[Ef]:"Invalid environment when attempting to create cache entry",[Aw]:"No account found in cache for given key.",[qh]:"No crypto object detected.",[Cw]:"Unexpected credential type.",[Tw]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ow]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[vf]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[xw]:"User defined timeout for device code polling reached",[Ky]:"Cannot generate a POP jwt if the token_claims are not populated",[Vy]:"Server response does not contain an authorization code to proceed",[Iw]:"Could not remove the credential's binding key from storage.",[Gy]:"The provided authority does not support logout",[Hy]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Rw]:"No network connectivity. Check your internet connection.",[Dw]:"User cancelled the flow.",[kw]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Bt]:"This method has not been implemented",[Mw]:"The nested app auth bridge is disabled",[Pw]:"An error occurred in the native broker. See the platformBrokerError property for details."},kIt={clientInfoDecodingError:{code:Ph,desc:Ot[Ph]},clientInfoEmptyError:{code:Ry,desc:Ot[Ry]},tokenParsingError:{code:Nh,desc:Ot[Nh]},nullOrEmptyToken:{code:Dy,desc:Ot[Dy]},endpointResolutionError:{code:Vo,desc:Ot[Vo]},networkError:{code:ky,desc:Ot[ky]},unableToGetOpenidConfigError:{code:My,desc:Ot[My]},hashNotDeserialized:{code:Py,desc:Ot[Py]},invalidStateError:{code:Pl,desc:Ot[Pl]},stateMismatchError:{code:Ny,desc:Ot[Ny]},stateNotFoundError:{code:Fh,desc:Ot[Fh]},nonceMismatchError:{code:Fy,desc:Ot[Fy]},authTimeNotFoundError:{code:bf,desc:Ot[bf]},maxAgeTranspired:{code:By,desc:Ot[By]},multipleMatchingTokens:{code:_w,desc:Ot[_w]},multipleMatchingAccounts:{code:Ew,desc:Ot[Ew]},multipleMatchingAppMetadata:{code:qy,desc:Ot[qy]},tokenRequestCannotBeMade:{code:Ly,desc:Ot[Ly]},removeEmptyScopeError:{code:jy,desc:Ot[jy]},appendScopeSetError:{code:$y,desc:Ot[$y]},emptyInputScopeSetError:{code:Bh,desc:Ot[Bh]},DeviceCodePollingCancelled:{code:vw,desc:Ot[vw]},DeviceCodeExpired:{code:Sw,desc:Ot[Sw]},DeviceCodeUnknownError:{code:ww,desc:Ot[ww]},NoAccountInSilentRequest:{code:_f,desc:Ot[_f]},invalidCacheRecord:{code:Uy,desc:Ot[Uy]},invalidCacheEnvironment:{code:Ef,desc:Ot[Ef]},noAccountFound:{code:Aw,desc:Ot[Aw]},noCryptoObj:{code:qh,desc:Ot[qh]},unexpectedCredentialType:{code:Cw,desc:Ot[Cw]},invalidAssertion:{code:Tw,desc:Ot[Tw]},invalidClientCredential:{code:Ow,desc:Ot[Ow]},tokenRefreshRequired:{code:vf,desc:Ot[vf]},userTimeoutReached:{code:xw,desc:Ot[xw]},tokenClaimsRequired:{code:Ky,desc:Ot[Ky]},noAuthorizationCodeFromServer:{code:Vy,desc:Ot[Vy]},bindingKeyNotRemovedError:{code:Iw,desc:Ot[Iw]},logoutNotSupported:{code:Gy,desc:Ot[Gy]},keyIdMissing:{code:Hy,desc:Ot[Hy]},noNetworkConnectivity:{code:Rw,desc:Ot[Rw]},userCanceledError:{code:Dw,desc:Ot[Dw]},missingTenantIdError:{code:kw,desc:Ot[kw]},nestedAppAuthBridgeDisabled:{code:Mw,desc:Ot[Mw]},platformBrokerError:{code:Pw,desc:Ot[Pw]}},yE=class t extends ir{constructor(e,r){super(e,r?`${Ot[e]}: ${r}`:Ot[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}}});var yZ,Mxe=ce(()=>{"use strict";qi();Oi();yZ={createNewGuid:()=>{throw Ae(Bt)},base64Decode:()=>{throw Ae(Bt)},base64Encode:()=>{throw Ae(Bt)},base64UrlEncode:()=>{throw Ae(Bt)},encodeKid:()=>{throw Ae(Bt)},async getPublicKeyThumbprint(){throw Ae(Bt)},async removeTokenBindingKey(){throw Ae(Bt)},async clearKeystore(){throw Ae(Bt)},async signJwt(){throw Ae(Bt)},async hashString(){throw Ae(Bt)}}});var xi,Nl,tD=ce(()=>{"use strict";gn();(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(xi||(xi={}));Nl=class t{constructor(e,r,n){this.level=xi.Info;let i=()=>{},s=e||t.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:xi.Info,this.correlationId=s.correlationId||ye.EMPTY_STRING,this.packageName=r||ye.EMPTY_STRING,this.packageVersion=n||ye.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xi.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${xi[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,s,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:xi.Error,containsPii:!1,correlationId:r||ye.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:xi.Error,containsPii:!0,correlationId:r||ye.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:xi.Warning,containsPii:!1,correlationId:r||ye.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:xi.Warning,containsPii:!0,correlationId:r||ye.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:xi.Info,containsPii:!1,correlationId:r||ye.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:xi.Info,containsPii:!0,correlationId:r||ye.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:xi.Verbose,containsPii:!1,correlationId:r||ye.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:xi.Verbose,containsPii:!0,correlationId:r||ye.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:xi.Trace,containsPii:!1,correlationId:r||ye.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:xi.Trace,containsPii:!0,correlationId:r||ye.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}});var rD,gE,nD=ce(()=>{"use strict";rD="@azure/msal-common",gE="15.14.1"});var zy,iD=ce(()=>{"use strict";zy={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"}});var bE,sD,_E,Sf,EE,vE,Wy,SE,wE,oD,AE,Jy,CE,TE,Lh,aD,uD,cD,lD,dD,pD,fD,hD,mD,jh=ce(()=>{"use strict";bE="redirect_uri_empty",sD="claims_request_parsing_error",_E="authority_uri_insecure",Sf="url_parse_error",EE="empty_url_error",vE="empty_input_scopes_error",Wy="invalid_claims",SE="token_request_empty",wE="logout_request_empty",oD="invalid_code_challenge_method",AE="pkce_params_missing",Jy="invalid_cloud_discovery_metadata",CE="invalid_authority_metadata",TE="untrusted_authority",Lh="missing_ssh_jwk",aD="missing_ssh_kid",uD="missing_nonce_authentication_header",cD="invalid_authentication_header",lD="cannot_set_OIDCOptions",dD="cannot_allow_platform_broker",pD="authority_mismatch",fD="invalid_request_method_for_EAR",hD="invalid_authorize_post_body_parameters",mD="invalid_platform_broker_configuration"});function xn(t){return new gZ(t)}var On,Y_r,gZ,Yy=ce(()=>{"use strict";_c();jh();On={[bE]:"A redirect URI is required for all calls, and none has been set.",[sD]:"Could not parse the given claims request object.",[_E]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Sf]:"URL could not be parsed into appropriate segments.",[EE]:"URL was empty or null.",[vE]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Wy]:"Given claims parameter must be a stringified JSON object.",[SE]:"Token request was empty and not found in cache.",[wE]:"The logout request was null or undefined.",[oD]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[AE]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Jy]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[CE]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[TE]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Lh]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[aD]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[uD]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[cD]:"Invalid authentication header provided",[lD]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[dD]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[pD]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[hD]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[fD]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[mD]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."},Y_r={redirectUriNotSet:{code:bE,desc:On[bE]},claimsRequestParsingError:{code:sD,desc:On[sD]},authorityUriInsecure:{code:_E,desc:On[_E]},urlParseError:{code:Sf,desc:On[Sf]},urlEmptyError:{code:EE,desc:On[EE]},emptyScopesError:{code:vE,desc:On[vE]},invalidClaimsRequest:{code:Wy,desc:On[Wy]},tokenRequestEmptyError:{code:SE,desc:On[SE]},logoutRequestEmptyError:{code:wE,desc:On[wE]},invalidCodeChallengeMethod:{code:oD,desc:On[oD]},invalidCodeChallengeParams:{code:AE,desc:On[AE]},invalidCloudDiscoveryMetadata:{code:Jy,desc:On[Jy]},invalidAuthorityMetadata:{code:CE,desc:On[CE]},untrustedAuthority:{code:TE,desc:On[TE]},missingSshJwk:{code:Lh,desc:On[Lh]},missingSshKid:{code:aD,desc:On[aD]},missingNonceAuthenticationHeader:{code:uD,desc:On[uD]},invalidAuthenticationHeader:{code:cD,desc:On[cD]},cannotSetOIDCOptions:{code:lD,desc:On[lD]},cannotAllowPlatformBroker:{code:dD,desc:On[dD]},authorityMismatch:{code:pD,desc:On[pD]},invalidAuthorizePostBodyParameters:{code:hD,desc:On[hD]},invalidRequestMethodForEAR:{code:fD,desc:On[fD]},invalidPlatformBrokerConfiguration:{code:mD,desc:On[mD]}},gZ=class t extends ir{constructor(e){super(e,On[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}}});var bn,$h=ce(()=>{"use strict";bn=class{static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return n.forEach(s=>{if(s.trim()){let[o,a]=s.split(/=(.+)/g,2);o&&a&&(r[i(o)]=i(a))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}}});var Li,Nw=ce(()=>{"use strict";Yy();$h();qi();gn();jh();Oi();Li=class t{constructor(e){let r=e?bn.trimArrayEntries([...e]):[],n=r?bn.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw xn(vE);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||ye.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=e&&e.length>0?e:[...gc],n=new t(r);return n.containsOnlyOIDCScopes()?n.removeScope(ye.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return mZ.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw Ae($y)}}removeScope(e){if(!e)throw Ae(jy);this.scopes.delete(e.trim())}removeOIDCScopes(){mZ.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ae(Bh);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw Ae(Bh);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):ye.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}});function OE(t,e){if(!t)throw Ae(Ry);try{let r=e(t);return JSON.parse(r)}catch{throw Ae(Ph)}}function jd(t){if(!t)throw Ae(Ph);let e=t.split(gf.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?ye.EMPTY_STRING:e[1]}}var xE=ce(()=>{"use strict";qi();gn();Oi();});function Pxe(t,e){return!!t&&!!e&&t===e.split(".")[1]}function Qy(t,e,r,n){if(n){let{oid:i,sub:s,tid:o,name:a,tfp:u,acr:c,preferred_username:l,upn:d,login_hint:p}=n,f=o||u||c||"";return{tenantId:f,localAccountId:i||s||"",name:a,username:l||d||"",loginHint:p,isHomeTenant:Pxe(f,t)}}else return{tenantId:r,localAccountId:e,username:"",isHomeTenant:Pxe(r,t)}}function yD(t,e,r,n){let i=t;if(e){let{isHomeTenant:s,...o}=e;i={...t,...o}}if(r){let{isHomeTenant:s,...o}=Qy(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...o,idTokenClaims:r,idToken:n},i}return i}var gD=ce(()=>{"use strict";});var Ec,bZ=ce(()=>{"use strict";Ec={Default:0,Adfs:1,Dsts:2,Ciam:3}});function bD(t){return t&&(t.tid||t.tfp||t.acr)||null}var _Z=ce(()=>{"use strict";});var vc,Fw=ce(()=>{"use strict";vc={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"}});var _o,_D=ce(()=>{"use strict";gn();xE();gD();qi();bZ();_Z();Fw();Oi();_o=class t{static getAccountInfo(e){let r=e.tenantProfiles||[];return r.length===0&&e.realm&&e.localAccountId&&r.push(Qy(e.homeAccountId,e.localAccountId,e.realm)),{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map(r.map(n=>[n.tenantId,n])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,r,n){let i=new t;r.authorityType===Ec.Adfs?i.authorityType=xy.ADFS_ACCOUNT_TYPE:r.protocolMode===vc.OIDC?i.authorityType=xy.GENERIC_ACCOUNT_TYPE:i.authorityType=xy.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&n&&(s=OE(e.clientInfo,n),s.xms_tdbr&&(i.dataBoundary=s.xms_tdbr==="EU"?"EU":"None")),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||r&&r.getPreferredCache();if(!o)throw Ae(Ef);i.environment=o,i.realm=s?.utid||bD(e.idTokenClaims)||"",i.localAccountId=s?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,u=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||u||"",i.loginHint=e.idTokenClaims?.login_hint,i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let c=Qy(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[c]}return i}static createFromAccountInfo(e,r,n){let i=new t;i.authorityType=e.authorityType||xy.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=r,i.msGraphHost=n;let s=Array.from(e.tenantProfiles?.values()||[]);return s.length===0&&e.tenantId&&e.localAccountId&&s.push(Qy(e.homeAccountId,e.localAccountId,e.tenantId,e.idTokenClaims)),i.tenantProfiles=s,i.dataBoundary=e.dataBoundary,i}static generateHomeAccountId(e,r,n,i,s){if(!(r===Ec.Adfs||r===Ec.Dsts)){if(e)try{let o=OE(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let s=e.idTokenClaims||{},o=r.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.loginHint===r.loginHint&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}}});var ED={};Ha(ED,{checkMaxAge:()=>Bw,extractTokenClaims:()=>wf,getJWSPayload:()=>Nxe,isKmsi:()=>EZ});function wf(t,e){let r=Nxe(t);try{let n=e(r);return JSON.parse(n)}catch{throw Ae(Nh)}}function EZ(t){if(!t.signin_state)return!1;let e=["kmsi","dvc_dmjd"];return t.signin_state.some(n=>e.includes(n.trim().toLowerCase()))}function Nxe(t){if(!t)throw Ae(Dy);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw Ae(Nh);return r[2]}function Bw(t,e){if(e===0||Date.now()-3e5>t+e)throw Ae(By)}var IE=ce(()=>{"use strict";qi();Oi();});var Uh={};Ha(Uh,{getDeserializedResponse:()=>vZ,mapToQueryString:()=>$d,normalizeUrlForComparison:()=>MIt,stripLeadingHashOrQuery:()=>Bxe});function Fxe(t){if(!t)return t;let e=t.toLowerCase();return bn.endsWith(e,"?")?e=e.slice(0,-1):bn.endsWith(e,"?/")&&(e=e.slice(0,-2)),bn.endsWith(e,"/")||(e+="/"),e}function Bxe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function vZ(t){if(!t||t.indexOf("=")<0)return null;try{let e=Bxe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw Ae(Py)}return null}function $d(t,e=!0,r){let n=new Array;return t.forEach((i,s)=>{!e&&r&&s in r?n.push(`${s}=${i}`):n.push(`${s}=${encodeURIComponent(i)}`)}),n.join("&")}function MIt(t){if(!t)return t;let e=t.split("#")[0];try{let r=new URL(e),n=r.origin+r.pathname+r.search;return Fxe(n)}catch{return Fxe(e)}}var Xy=ce(()=>{"use strict";qi();$h();Oi();});var wr,Kh=ce(()=>{"use strict";Yy();$h();gn();Xy();jh();wr=class t{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw xn(EE);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return bn.endsWith(r,"?")?r=r.slice(0,-1):bn.endsWith(r,"?/")&&(r=r.slice(0,-2)),bn.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw xn(Sf)}if(!e.HostNameAndPort||!e.PathSegments)throw xn(Sf);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw xn(_E)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Ma.COMMON||n[0]===Ma.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw xn(Sf);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw xn(Sf);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===ye.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!vZ(e)}}});function jxe(t,e){let r,n=t.canonicalAuthority;if(n){let i=new wr(n).getUrlComponents().HostNameAndPort;r=qxe(i,t.cloudDiscoveryMetadata?.metadata,Ko.CONFIG,e)||qxe(i,wZ.metadata,Ko.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}function qxe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=qw(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function $xe(t){return qw(wZ.metadata,t)}function qw(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}var Lxe,SZ,wZ,AZ,CZ=ce(()=>{"use strict";Kh();gn();Lxe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},SZ=Lxe.endpointMetadata,wZ=Lxe.instanceDiscoveryMetadata,AZ=new Set;wZ.metadata.forEach(t=>{t.aliases.forEach(e=>{AZ.add(e)})})});var TZ,vD,Uxe=ce(()=>{"use strict";TZ="cache_quota_exceeded",vD="cache_error_unknown"});function Kxe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Lw(TZ):new Lw(t.name,t.message):new Lw(vD)}var OZ,Lw,Vxe=ce(()=>{"use strict";_c();Uxe();OZ={[TZ]:"Exceeded cache storage capacity.",[vD]:"Unexpected error occurred when using cache storage."},Lw=class t extends ir{constructor(e,r){let n=r||(OZ[e]?OZ[e]:OZ[vD]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}});var Vh,jw,xZ=ce(()=>{"use strict";gn();Nw();_D();qi();gD();IE();nD();CZ();Vxe();_c();Oi();Vh=class{constructor(e,r,n,i,s){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(rD,gE),this.staticAuthorityOptions=s,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){if(Object.keys(e).length===0||Object.values(e).every(i=>!i))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let n=this.getAllAccounts(e,r);return n.length>1?n.sort(s=>s.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?_o.getAccountInfo(n[0]):null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,s){let o=null,a;if(s&&!this.tenantProfileMatchesFilter(n,s))return null;let u=this.getIdToken(e,i,r,n.tenantId);return u&&(a=wf(u.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,s))?null:(o=yD(e,n,a,u?.secret),o)}getTenantProfilesFromAccountEntity(e,r,n,i){let s=_o.getAccountInfo(e),o=s.tenantProfiles||new Map,a=this.getTokenKeys();if(n){let c=o.get(n);if(c)o=new Map([[n,c]]);else return[]}let u=[];return o.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(s,a,c,r,i);l&&u.push(l)}),u}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n,i,s){if(!e)throw Ae(Uy);try{e.account&&await this.setAccount(e.account,r,n,i),e.idToken&&s?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r,n),e.accessToken&&s?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r,n),e.refreshToken&&s?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof ir?o:Kxe(o)}}async saveAccessToken(e,r,n){let i={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},s=this.getTokenKeys(),o=Li.fromString(e.target);s.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,i,!1))return;let u=this.getAccessTokenCredential(a,r);u&&this.credentialMatchesFilter(u,i)&&Li.fromString(u.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r,n)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(s=>{let o=this.getAccount(s,r);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},u=o.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,a));u&&u.length===0||i.push(o)}),i}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===Yr.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===nr.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(n[i]=s))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(n=s)}),n}removeAllAccounts(e){this.getAllAccounts({},e).forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){this.removeAccountContext(e,r);let n=this.getAccountKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);n.filter(i).forEach(s=>{this.removeItem(s,r),this.performanceClient.incrementFields({accountsRemoved:1},r)})}removeAccountContext(e,r){let n=this.getTokenKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);n.idToken.filter(i).forEach(s=>{this.removeIdToken(s,r)}),n.accessToken.filter(i).forEach(s=>{this.removeAccessToken(s,r)}),n.refreshToken.filter(i).forEach(s=>{this.removeRefreshToken(s,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==Yr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==nr.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}getIdToken(e,r,n,i,s){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Yr.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(o,r,n),u=a.size;if(u<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(u>1){let c=a;if(!i){let l=new Map;a.forEach((p,f)=>{p.realm===e.tenantId&&l.set(f,p)});let d=l.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),l.values().next().value;c=l}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((l,d)=>{this.removeIdToken(d,r)}),s&&r&&s.addFields({multiMatchedID:a.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,s=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,{clientId:this.clientId,...e}))return;let a=this.getIdTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&s.set(o,a)}),s}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let s=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);let o=Li.createSearchScopes(r.scopes),a=r.authenticationScheme||nr.BEARER,u=a&&a.toLowerCase()!==nr.BEARER.toLowerCase()?Yr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Yr.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:a,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},l=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];l.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,c,!0)){let h=this.getAccessTokenCredential(f,s);h&&this.credentialMatchesFilter(h,c)&&d.push(h)}});let p=d.length;return p<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):p>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),d.forEach(f=>{this.removeAccessToken(this.generateCredentialKey(f),s)}),this.performanceClient.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),d[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let s=r.target.asArray();for(let o=0;o<s.length;o++){if(n&&!i.includes(s[o].toLowerCase()))return!1;if(!n&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;let o=this.getAccessTokenCredential(s,r);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,r,n,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let o=r?Mh:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Yr.REFRESH_TOKEN,clientId:this.clientId,familyId:o},u=i&&i.refreshToken||this.getTokenKeys().refreshToken,c=[];u.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){let p=this.getRefreshTokenCredential(d,n);p&&this.credentialMatchesFilter(p,a)&&c.push(p)}});let l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&s&&n&&s.addFields({multiMatchedRT:l},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(o=>n[o]),s=i.length;if(s<1)return null;if(s>1)throw Ae(qy);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===Mh)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=jxe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==Yr.ACCESS_TOKEN&&e.credentialType!==Yr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Li.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(yw)!==-1}isAuthorityMetadata(e){return e.indexOf(hE.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${hE.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},jw=class extends Vh{async setAccount(){throw Ae(Bt)}getAccount(){throw Ae(Bt)}async setIdTokenCredential(){throw Ae(Bt)}getIdTokenCredential(){throw Ae(Bt)}async setAccessTokenCredential(){throw Ae(Bt)}getAccessTokenCredential(){throw Ae(Bt)}async setRefreshTokenCredential(){throw Ae(Bt)}getRefreshTokenCredential(){throw Ae(Bt)}setAppMetadata(){throw Ae(Bt)}getAppMetadata(){throw Ae(Bt)}setServerTelemetry(){throw Ae(Bt)}getServerTelemetry(){throw Ae(Bt)}setAuthorityMetadata(){throw Ae(Bt)}getAuthorityMetadata(){throw Ae(Bt)}getAuthorityMetadataKeys(){throw Ae(Bt)}setThrottlingCache(){throw Ae(Bt)}getThrottlingCache(){throw Ae(Bt)}removeItem(){throw Ae(Bt)}getKeys(){throw Ae(Bt)}getAccountKeys(){throw Ae(Bt)}getTokenKeys(){throw Ae(Bt)}generateCredentialKey(){throw Ae(Bt)}generateAccountKey(){throw Ae(Bt)}}});var ae,ZEr,Gxe,Fl=ce(()=>{"use strict";ae={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse",LoadExternalTokens:"LoadExternalTokens",LoadAccount:"loadAccount",LoadIdToken:"loadIdToken",LoadAccessToken:"loadAccessToken",LoadRefreshToken:"loadRefreshToken"},ZEr=new Map([[ae.AcquireTokenByCode,"ATByCode"],[ae.AcquireTokenByRefreshToken,"ATByRT"],[ae.AcquireTokenSilent,"ATS"],[ae.AcquireTokenSilentAsync,"ATSAsync"],[ae.AcquireTokenPopup,"ATPopup"],[ae.AcquireTokenRedirect,"ATRedirect"],[ae.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[ae.CryptoOptsSignJwt,"CryptoSignJwt"],[ae.SilentCacheClientAcquireToken,"SltCacheClientAT"],[ae.SilentIframeClientAcquireToken,"SltIframeClientAT"],[ae.SilentRefreshClientAcquireToken,"SltRClientAT"],[ae.SsoSilent,"SsoSlt"],[ae.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[ae.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[ae.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[ae.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[ae.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[ae.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[ae.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[ae.BrokerHandhshake,"BrokerHandshake"],[ae.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[ae.AcquireTokenByBroker,"ATByBroker"],[ae.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[ae.RefreshTokenClientAcquireToken,"RTClientAT"],[ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[ae.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[ae.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[ae.AcquireTokenFromCache,"ATFromCache"],[ae.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[ae.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[ae.AcquireTokenBySilentIframe,"ATBySltIframe"],[ae.InitializeBaseRequest,"InitBaseReq"],[ae.InitializeSilentRequest,"InitSltReq"],[ae.InitializeClientApplication,"InitClientApplication"],[ae.InitializeCache,"InitCache"],[ae.ImportExistingCache,"importCache"],[ae.SetUserData,"setUserData"],[ae.LocalStorageUpdated,"localStorageUpdated"],[ae.SilentIframeClientTokenHelper,"SIClientTHelper"],[ae.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[ae.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[ae.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[ae.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[ae.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[ae.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[ae.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[ae.GetAuthCodeUrl,"GetAuthCodeUrl"],[ae.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[ae.HandleCodeResponse,"HandleCodeResp"],[ae.HandleResponseEar,"HandleRespEar"],[ae.HandleResponseCode,"HandleRespCode"],[ae.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[ae.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[ae.AuthClientAcquireToken,"AuthClientAT"],[ae.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[ae.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[ae.PopTokenGenerateCnf,"PopTGenCnf"],[ae.PopTokenGenerateKid,"PopTGenKid"],[ae.HandleServerTokenResponse,"HandleServerTRes"],[ae.DeserializeResponse,"DeserializeRes"],[ae.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[ae.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[ae.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[ae.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[ae.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[ae.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[ae.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[ae.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[ae.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[ae.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[ae.AcquireTokenByCodeAsync,"ATByCodeAsync"],[ae.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[ae.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[ae.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[ae.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[ae.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[ae.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[ae.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[ae.NativeGenerateAuthResult,"NtvGenAuthRes"],[ae.RemoveHiddenIframe,"RemoveHiddenIframe"],[ae.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[ae.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[ae.GeneratePkceCodes,"GenPkceCodes"],[ae.GenerateCodeVerifier,"GenCodeVerifier"],[ae.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[ae.Sha256Digest,"Sha256Digest"],[ae.GetRandomValues,"GetRandomValues"],[ae.GenerateHKDF,"genHKDF"],[ae.GenerateBaseKey,"genBaseKey"],[ae.Base64Decode,"b64Decode"],[ae.UrlEncodeArr,"urlEncArr"],[ae.Encrypt,"encrypt"],[ae.Decrypt,"decrypt"],[ae.GenerateEarKey,"genEarKey"],[ae.DecryptEarResponse,"decryptEarResp"]]),Gxe={NotStarted:0,InProgress:1,Completed:2}});var SD,Zy,IZ=ce(()=>{"use strict";Fl();SD=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Zy=class{generateId(){return"callback-id"}startMeasurement(e,r){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Gxe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new SD}}startPerformanceMeasurement(){return new SD}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}});function Hxe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:u,telemetry:c,serverTelemetryManager:l,persistencePlugin:d,serializableCache:p}){let f={...NIt,...r};return{authOptions:UIt(t),systemOptions:{...PIt,...e},loggerOptions:f,cacheOptions:{...FIt,...n},storageInterface:i||new jw(t.clientId,yZ,new Nl(f),new Zy),networkInterface:s||BIt,cryptoInterface:o||yZ,clientCredentials:a||LIt,libraryInfo:{...qIt,...u},telemetry:{...$It,...c},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:p||null}}function UIt(t){return{clientCapabilities:[],azureCloudOptions:jIt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function wD(t){return t.authOptions.authority.options.protocolMode===vc.OIDC}var PIt,NIt,FIt,BIt,qIt,LIt,jIt,$It,AD=ce(()=>{"use strict";Mxe();tD();gn();nD();iD();xZ();Fw();qi();IZ();Oi();PIt={tokenRenewalOffsetSeconds:mE,preventCorsPreflight:!1},NIt={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xi.Info,correlationId:ye.EMPTY_STRING},FIt={claimsBasedCachingEnabled:!1},BIt={async sendGetRequestAsync(){throw Ae(Bt)},async sendPostRequestAsync(){throw Ae(Bt)}},qIt={sku:ye.SKU,version:gE,cpu:ye.EMPTY_STRING,os:ye.EMPTY_STRING},LIt={clientSecret:ye.EMPTY_STRING,clientAssertion:void 0},jIt={azureCloudInstance:zy.None,tenant:`${ye.DEFAULT_COMMON_TENANT}`},$It={application:{appName:"",appVersion:""}}});var Go,$w=ce(()=>{"use strict";Go={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"}});var RD={};Ha(RD,{ACCESS_TOKEN:()=>GIt,BROKER_CLIENT_ID:()=>Uw,BROKER_REDIRECT_URI:()=>ID,CCS_HEADER:()=>ZIt,CLAIMS:()=>MZ,CLIENT_ASSERTION:()=>nee,CLIENT_ASSERTION_TYPE:()=>iee,CLIENT_ID:()=>Ud,CLIENT_INFO:()=>YIt,CLIENT_REQUEST_ID:()=>KZ,CLIENT_SECRET:()=>ree,CODE:()=>LZ,CODE_CHALLENGE:()=>jZ,CODE_CHALLENGE_METHOD:()=>$Z,CODE_VERIFIER:()=>UZ,DEVICE_CODE:()=>tee,DOMAIN_HINT:()=>dee,EAR_JWE_CRYPTO:()=>fee,EAR_JWK:()=>pee,ERROR:()=>KIt,ERROR_DESCRIPTION:()=>VIt,EXPIRES_IN:()=>zIt,FOCI:()=>XIt,GRANT_TYPE:()=>kZ,ID_TOKEN:()=>HIt,ID_TOKEN_HINT:()=>eee,INSTANCE_AWARE:()=>RE,LOGIN_HINT:()=>lee,LOGOUT_HINT:()=>uee,NATIVE_BROKER:()=>aee,NONCE:()=>BZ,OBO_ASSERTION:()=>see,ON_BEHALF_OF:()=>QIt,POST_LOGOUT_URI:()=>ZZ,PROMPT:()=>qZ,REDIRECT_URI:()=>CD,REFRESH_TOKEN:()=>NZ,REFRESH_TOKEN_EXPIRES_IN:()=>WIt,REQUESTED_TOKEN_USE:()=>oee,REQ_CNF:()=>OD,RESPONSE_MODE:()=>DZ,RESPONSE_TYPE:()=>RZ,RETURN_SPA_CODE:()=>xD,SCOPE:()=>PZ,SESSION_STATE:()=>JIt,SID:()=>cee,STATE:()=>FZ,TOKEN_TYPE:()=>TD,X_APP_NAME:()=>QZ,X_APP_VER:()=>XZ,X_CLIENT_CPU:()=>zZ,X_CLIENT_CURR_TELEM:()=>WZ,X_CLIENT_EXTRA_SKU:()=>eRt,X_CLIENT_LAST_TELEM:()=>JZ,X_CLIENT_OS:()=>HZ,X_CLIENT_SKU:()=>VZ,X_CLIENT_VER:()=>GZ,X_MS_LIB_CAPABILITY:()=>YZ});var Ud,CD,RZ,DZ,kZ,MZ,PZ,KIt,VIt,GIt,HIt,NZ,zIt,WIt,FZ,BZ,qZ,JIt,YIt,LZ,jZ,$Z,UZ,KZ,VZ,GZ,HZ,zZ,WZ,JZ,YZ,QZ,XZ,ZZ,eee,tee,ree,nee,iee,TD,OD,see,oee,QIt,XIt,ZIt,xD,aee,uee,cee,lee,dee,eRt,Uw,ID,RE,pee,fee,DE=ce(()=>{"use strict";Ud="client_id",CD="redirect_uri",RZ="response_type",DZ="response_mode",kZ="grant_type",MZ="claims",PZ="scope",KIt="error",VIt="error_description",GIt="access_token",HIt="id_token",NZ="refresh_token",zIt="expires_in",WIt="refresh_token_expires_in",FZ="state",BZ="nonce",qZ="prompt",JIt="session_state",YIt="client_info",LZ="code",jZ="code_challenge",$Z="code_challenge_method",UZ="code_verifier",KZ="client-request-id",VZ="x-client-SKU",GZ="x-client-VER",HZ="x-client-OS",zZ="x-client-CPU",WZ="x-client-current-telemetry",JZ="x-client-last-telemetry",YZ="x-ms-lib-capability",QZ="x-app-name",XZ="x-app-ver",ZZ="post_logout_redirect_uri",eee="id_token_hint",tee="device_code",ree="client_secret",nee="client_assertion",iee="client_assertion_type",TD="token_type",OD="req_cnf",see="assertion",oee="requested_token_use",QIt="on_behalf_of",XIt="foci",ZIt="X-AnchorMailbox",xD="return_spa_code",aee="nativebroker",uee="logout_hint",cee="sid",lee="login_hint",dee="domain_hint",eRt="x-client-xtra-sku",Uw="brk_client_id",ID="brk_redirect_uri",RE="instance_aware",pee="ear_jwk",fee="ear_jwe_crypto"});var ut={};Ha(ut,{addApplicationTelemetry:()=>Vw,addAuthorizationCode:()=>Eee,addBrokerParameters:()=>Tf,addCcsOid:()=>Af,addCcsUpn:()=>Gh,addClaims:()=>ig,addClientAssertion:()=>zw,addClientAssertionType:()=>Ww,addClientCapabilitiesToClaims:()=>zxe,addClientId:()=>rg,addClientInfo:()=>og,addClientSecret:()=>Hw,addCodeChallengeParams:()=>nRt,addCodeVerifier:()=>See,addCorrelationId:()=>sg,addDeviceCode:()=>iRt,addDomainHint:()=>gee,addEARParameters:()=>cRt,addExtraQueryParameters:()=>Cf,addGrantType:()=>Jw,addIdTokenHint:()=>yee,addInstanceAware:()=>Yw,addLibraryInfo:()=>Kw,addLoginHint:()=>kE,addLogoutHint:()=>wee,addNativeBroker:()=>rRt,addNonce:()=>_ee,addOboAssertion:()=>sRt,addPassword:()=>uRt,addPopToken:()=>Qw,addPostBodyParameters:()=>lRt,addPostLogoutRedirectUri:()=>mee,addPrompt:()=>bee,addRedirectUri:()=>ng,addRefreshToken:()=>vee,addRequestTokenUse:()=>oRt,addResponseMode:()=>hee,addResponseType:()=>tRt,addScopes:()=>tg,addServerTelemetry:()=>Zw,addSid:()=>DD,addSshJwk:()=>Xw,addState:()=>Gw,addThrottling:()=>e9,addUsername:()=>aRt,instrumentBrokerParams:()=>eg});function eg(t,e,r){if(!e)return;let n=t.get(Ud);n&&t.has(Uw)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(CD)},e)}function tRt(t,e){t.set(RZ,e)}function hee(t,e){t.set(DZ,e||fE.QUERY)}function rRt(t){t.set(aee,"1")}function tg(t,e,r=!0,n=gc){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],s=new Li(i);t.set(PZ,s.printScopes())}function rg(t,e){t.set(Ud,e)}function ng(t,e){t.set(CD,e)}function mee(t,e){t.set(ZZ,e)}function yee(t,e){t.set(eee,e)}function gee(t,e){t.set(dee,e)}function kE(t,e){t.set(lee,e)}function Gh(t,e){t.set(yn.CCS_HEADER,`UPN:${e}`)}function Af(t,e){t.set(yn.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function DD(t,e){t.set("sid",e)}function ig(t,e,r){let n=zxe(e,r);try{JSON.parse(n)}catch{throw xn(Wy)}t.set(MZ,n)}function sg(t,e){t.set(KZ,e)}function Kw(t,e){t.set(VZ,e.sku),t.set(GZ,e.version),e.os&&t.set(HZ,e.os),e.cpu&&t.set(zZ,e.cpu)}function Vw(t,e){e?.appName&&t.set(QZ,e.appName),e?.appVersion&&t.set(XZ,e.appVersion)}function bee(t,e){t.set(qZ,e)}function Gw(t,e){e&&t.set(FZ,e)}function _ee(t,e){t.set(BZ,e)}function nRt(t,e,r){if(e&&r)t.set(jZ,e),t.set($Z,r);else throw xn(AE)}function Eee(t,e){t.set(LZ,e)}function iRt(t,e){t.set(tee,e)}function vee(t,e){t.set(NZ,e)}function See(t,e){t.set(UZ,e)}function Hw(t,e){t.set(ree,e)}function zw(t,e){e&&t.set(nee,e)}function Ww(t,e){e&&t.set(iee,e)}function sRt(t,e){t.set(see,e)}function oRt(t,e){t.set(oee,e)}function Jw(t,e){t.set(kZ,e)}function og(t){t.set(Rxe,"1")}function Yw(t){t.has(RE)||t.set(RE,"true")}function Cf(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}function zxe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw xn(Wy)}return e&&e.length>0&&(r.hasOwnProperty(Oy.ACCESS_TOKEN)||(r[Oy.ACCESS_TOKEN]={}),r[Oy.ACCESS_TOKEN][Oy.XMS_CC]={values:e}),JSON.stringify(r)}function aRt(t,e){t.set(bw.username,e)}function uRt(t,e){t.set(bw.password,e)}function Qw(t,e){e&&(t.set(TD,nr.POP),t.set(OD,e))}function Xw(t,e){e&&(t.set(TD,nr.SSH),t.set(OD,e))}function Zw(t,e){t.set(WZ,e.generateCurrentRequestHeaderValue()),t.set(JZ,e.generateLastRequestHeaderValue())}function e9(t){t.set(YZ,Ld.X_MS_LIB_CAPABILITY_VALUE)}function wee(t,e){t.set(uee,e)}function Tf(t,e,r){t.has(Uw)||t.set(Uw,e),t.has(ID)||t.set(ID,r)}function cRt(t,e){t.set(pee,encodeURIComponent(e)),t.set(fee,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function lRt(t,e){Object.entries(e).forEach(([r,n])=>{n&&t.set(r,n)})}var ME=ce(()=>{"use strict";gn();DE();Nw();Yy();jh();});function Wxe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}var Jxe=ce(()=>{"use strict";});function Yxe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}var Qxe=ce(()=>{"use strict";});function Xxe(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}var Zxe=ce(()=>{"use strict";});var eIe,hr,Of=ce(()=>{"use strict";eIe=(t,e,r,n,i)=>(...s)=>{r.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}try{let a=t(...s);return o?.end({success:!0}),r.trace(`Returning result from ${e}`),a}catch(a){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw o?.end({success:!1},a),a}},hr=(t,e,r,n,i)=>(...s)=>{r.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}return n?.setPreQueueTime(e,i),t(...s).then(a=>(r.trace(`Returning result from ${e}`),o?.end({success:!0}),a)).catch(a=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw o?.end({success:!1},a),a})}});var t9,tIe=ce(()=>{"use strict";gn();Fl();Of();t9=class t{constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=Iy.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let s=await hr(this.getRegionFromIMDS.bind(this),ae.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(ye.IMDS_VERSION,i);if(s.status===br.SUCCESS&&(n=s.body,r.region_source=Iy.IMDS),s.status===br.BAD_REQUEST){let o=await hr(this.getCurrentVersion.bind(this),ae.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!o)return r.region_source=Iy.FAILED_AUTO_DETECTION,null;let a=await hr(this.getRegionFromIMDS.bind(this),ae.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(o,i);a.status===br.SUCCESS&&(n=a.body,r.region_source=Iy.IMDS)}}catch{return r.region_source=Iy.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=Iy.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${ye.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,ye.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${ye.IMDS_ENDPOINT}?format=json`,e);return r.status===br.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};t9.IMDS_OPTIONS={headers:{Metadata:"true"}}});var As={};Ha(As,{delay:()=>fRt,isCacheExpired:()=>pRt,isTokenExpired:()=>PE,nowSeconds:()=>lu,toDateFromSeconds:()=>r9,toSecondsFromDate:()=>dRt,wasClockTurnedBack:()=>Aee});function lu(){return Math.round(new Date().getTime()/1e3)}function dRt(t){return t.getTime()/1e3}function r9(t){return t?new Date(Number(t)*1e3):new Date}function PE(t,e){let r=Number(t)||0;return lu()+e>r}function pRt(t,e){let r=Number(t)+e*24*60*60*1e3;return Date.now()>r}function Aee(t){return Number(t)>lu()}function fRt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}var Hh=ce(()=>{"use strict";});var Ho={};Ha(Ho,{createAccessTokenEntity:()=>Tee,createIdTokenEntity:()=>Cee,createRefreshTokenEntity:()=>Oee,generateAppMetadataKey:()=>_Rt,generateAuthorityMetadataExpiresAt:()=>MD,isAccessTokenEntity:()=>hRt,isAppMetadataEntity:()=>ERt,isAuthorityMetadataEntity:()=>vRt,isAuthorityMetadataExpired:()=>PD,isCredentialEntity:()=>kD,isIdTokenEntity:()=>mRt,isRefreshTokenEntity:()=>yRt,isServerTelemetryEntity:()=>gRt,isThrottlingEntity:()=>bRt,updateAuthorityEndpointMetadata:()=>NE,updateCloudDiscoveryMetadata:()=>n9});function Cee(t,e,r,n,i){return{credentialType:Yr.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i,lastUpdatedAt:Date.now().toString()}}function Tee(t,e,r,n,i,s,o,a,u,c,l,d,p,f,h){let y={homeAccountId:t,credentialType:Yr.ACCESS_TOKEN,secret:r,cachedAt:lu().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:n,realm:i,target:s,tokenType:l||nr.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(y.userAssertionHash=d),c&&(y.refreshOn=c.toString()),f&&(y.requestedClaims=f,y.requestedClaimsHash=h),y.tokenType?.toLowerCase()!==nr.BEARER.toLowerCase())switch(y.credentialType=Yr.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case nr.POP:let E=wf(r,u);if(!E?.cnf?.kid)throw Ae(Ky);y.keyId=E.cnf.kid;break;case nr.SSH:y.keyId=p}return y}function Oee(t,e,r,n,i,s,o){let a={credentialType:Yr.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function kD(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function hRt(t){return t?kD(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Yr.ACCESS_TOKEN||t.credentialType===Yr.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function mRt(t){return t?kD(t)&&t.hasOwnProperty("realm")&&t.credentialType===Yr.ID_TOKEN:!1}function yRt(t){return t?kD(t)&&t.credentialType===Yr.REFRESH_TOKEN:!1}function gRt(t,e){let r=t.indexOf(ns.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}function bRt(t,e){let r=!1;t&&(r=t.indexOf(Ld.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}function _Rt({environment:t,clientId:e}){return[yw,t,e].join(gf.CACHE_KEY_SEPARATOR).toLowerCase()}function ERt(t,e){return e?t.indexOf(yw)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function vRt(t,e){return e?t.indexOf(hE.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function MD(){return lu()+hE.REFRESH_TIME_SECONDS}function NE(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}function n9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}function PD(t){return t.expiresAt<=lu()}var ND=ce(()=>{"use strict";IE();qi();gn();Hh();Oi();});function rIe(t){let n=new wr(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Ma.COMMON:case Ma.ORGANIZATIONS:case Ma.CONSUMERS:return;default:return n}}function FD(t){return t.endsWith(ye.FORWARD_SLASH)?t:`${t}${ye.FORWARD_SLASH}`}function xee(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw xn(Jy)}return{canonicalAuthority:t.authority?FD(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}var xf,BD=ce(()=>{"use strict";bZ();Jxe();Kh();qi();gn();CZ();Yy();Fw();iD();Qxe();Zxe();tIe();_c();Fl();Of();ND();Oi();jh();xf=class t{constructor(e,r,n,i,s,o,a,u){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=u||!1,this.regionDiscovery=new t9(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(ye.CIAM_AUTH_URL))return Ec.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case ye.ADFS:return Ec.Adfs;case ye.DSTS:return Ec.Dsts}return Ec.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new wr(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ae(Vo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ae(Vo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ae(Vo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ae(Gy);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ae(Vo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ae(Vo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ae(Vo)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Ec.Default&&this.protocolMode!==vc.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new wr(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,u)=>{let c=s[u];if(u===0&&this.canReplaceTenant(i)){let l=new wr(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];c!==l&&(this.logger.verbose(`Replacing tenant domain name ${c} with id ${l}`),c=l)}a!==c&&(r=r.replace(`/${c}/`,`/${a}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Ec.Adfs||this.protocolMode===vc.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(ae.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await hr(this.updateCloudDiscoveryMetadata.bind(this),ae.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await hr(this.updateEndpointMetadata.bind(this),ae.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:MD(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Ko.CACHE&&n?.source!==Ko.CACHE&&(e.expiresAt=MD(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Ko.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await hr(this.updateMetadataWithRegionalInformation.bind(this),ae.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);NE(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await hr(this.getEndpointMetadataFromNetwork.bind(this),ae.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await hr(this.updateMetadataWithRegionalInformation.bind(this),ae.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),NE(e,n,!0),Ko.NETWORK;throw Ae(My,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),NE(e,r,!1),{source:Ko.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return NE(e,i,!1),{source:Ko.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=PD(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Ko.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new wr(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw xn(CE)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ae.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return Wxe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in SZ?SZ[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==ye.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=XR.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await hr(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ae.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=XR.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=XR.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await hr(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return n9(e,n,!0),Ko.NETWORK;throw xn(TE)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||ye.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||ye.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||ye.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),n9(e,r,!1),Ko.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=$xe(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),n9(e,i,!1),Ko.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=PD(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Ko.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Ec.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=qw(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),xn(Jy)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${ye.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),s,o;if(Yxe(i.body))s=i.body,o=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(Xxe(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===ye.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=qw(o,this.hostnameAndPort)}catch(i){if(i instanceof ir)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&wr.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==zy.None){let i=r.tenant?r.tenant:ye.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return ye.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ae(Vo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return AZ.has(e)}static isPublicCloudAuthority(e){return ye.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new wr(e);i.validateAsUri();let s=i.getUrlComponents(),o=`${r}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${r}.${ye.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=wr.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new wr(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(ye.CIAM_AUTH_URL)){let s=i.HostNameAndPort.split(".")[0];r=`${r}${s}${ye.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};xf.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ma.COMMON,Ma.CONSUMERS,Ma.ORGANIZATIONS])});var qD={};Ha(qD,{createDiscoveredInstance:()=>Iee});async function Iee(t,e,r,n,i,s,o){o?.addQueueMeasurement(ae.AuthorityFactoryCreateDiscoveredInstance,s);let a=xf.transformCIAMAuthority(FD(t)),u=new xf(a,e,r,n,i,s,o);try{return await hr(u.resolveEndpointsAsync.bind(u),ae.AuthorityResolveEndpointsAsync,i,o,s)(),u}catch{throw Ae(Vo)}}var Ree=ce(()=>{"use strict";BD();qi();Fl();Of();Oi();});var Kd,i9=ce(()=>{"use strict";_c();Kd=class t extends ir{constructor(e,r,n,i,s){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,t.prototype)}}});function FE(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var LD=ce(()=>{"use strict";});var s9,nIe=ce(()=>{"use strict";gn();i9();LD();s9=class t{static generateThrottlingStorageKey(e){return`${Ld.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),s=e.getThrottlingCache(i);if(s){if(s.throttleTime<Date.now()){e.removeItem(i,n);return}throw new Kd(s.errorCodes?.join(" ")||ye.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let s={throttleTime:t.calculateThrottleTime(parseInt(n.headers[yn.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),s,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(yn.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||Ld.DEFAULT_THROTTLE_TIME_SECONDS),n+Ld.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let s=FE(r,n,i),o=this.generateThrottlingStorageKey(s);e.removeItem(o,n.correlationId)}}});var jD,iIe=ce(()=>{"use strict";_c();jD=class t extends ir{constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}}});var zo,o9=ce(()=>{"use strict";AD();tD();gn();nD();$w();xE();ME();Xy();Ree();Fl();nIe();_c();qi();iIe();Of();Oi();zo=class{constructor(e,r){this.config=Hxe(e),this.logger=new Nl(this.config.loggerOptions,rD,gE),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[yn.CONTENT_TYPE]=ye.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Go.HOME_ACCOUNT_ID:try{let n=jd(e.credential);r[yn.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Go.UPN:r[yn.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,s,o){o&&this.performanceClient?.addQueueMeasurement(o,s);let a=await this.sendPostRequest(i,e,{body:r,headers:n},s);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,r,n,i){s9.preProcess(this.cacheManager,e,i);let s;try{s=await hr(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ae.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let o=s.headers||{};this.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:o[yn.X_MS_HTTP_VERSION]||"",requestId:o[yn.X_MS_REQUEST_ID]||""},i)}catch(o){if(o instanceof jD){let a=o.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[yn.X_MS_HTTP_VERSION]||"",requestId:a[yn.X_MS_REQUEST_ID]||"",contentTypeHeader:a[yn.CONTENT_TYPE]||void 0,contentLengthHeader:a[yn.CONTENT_LENGTH]||void 0,httpStatus:o.httpStatus},i),o.error}throw o instanceof ir?o:Ae(ky)}return s9.postProcess(this.cacheManager,e,s,i),s}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(ae.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await Iee(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&Tf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Cf(r,e.tokenQueryParameters),sg(r,e.correlationId),eg(r,e.correlationId,this.performanceClient),$d(r)}}});var ag,$D,UD,Dee,sIe,oIe,aIe,ug,kee=ce(()=>{"use strict";ag="no_tokens_found",$D="native_account_unavailable",UD="refresh_token_expired",Dee="ux_not_allowed",sIe="interaction_required",oIe="consent_required",aIe="login_required",ug="bad_token"});function VD(t,e,r){let n=!!t&&uIe.indexOf(t)>-1,i=!!r&&SRt.indexOf(r)>-1,s=!!e&&uIe.some(o=>e.indexOf(o)>-1);return n||s||i}function Mee(t){return new Vd(t,KD[t])}var uIe,SRt,KD,M4r,Vd,GD=ce(()=>{"use strict";gn();_c();kee();uIe=[sIe,oIe,aIe,ug,Dee],SRt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],KD={[ag]:"No refresh token found in the cache. Please sign-in.",[$D]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[UD]:"Refresh token has expired.",[ug]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Dee]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},M4r={noTokensFoundError:{code:ag,desc:KD[ag]},native_account_unavailable:{code:$D,desc:KD[$D]},bad_token:{code:ug,desc:KD[ug]}},Vd=class t extends ir{constructor(e,r,n,i,s,o,a,u){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||ye.EMPTY_STRING,this.traceId=s||ye.EMPTY_STRING,this.correlationId=o||ye.EMPTY_STRING,this.claims=a||ye.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=u}}});var HD,cIe=ce(()=>{"use strict";gn();qi();Oi();HD=class t{static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${ye.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw Ae(qh);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw Ae(qh);if(!r)throw Ae(Pl);try{let n=r.split(ye.RESOURCE_DELIM),i=n[0],s=n.length>1?n.slice(1).join(ye.RESOURCE_DELIM):ye.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||ye.EMPTY_STRING,libraryState:a}}catch{throw Ae(Pl)}}}});var wRt,zh,zD=ce(()=>{"use strict";Hh();Kh();Fl();Of();wRt={SW:"sw"},zh=class{constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(ae.PopTokenGenerateCnf,e.correlationId);let n=await hr(this.generateKid.bind(this),ae.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(ae.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:wRt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:u,shrOptions:c}=n,d=(o?new wr(o):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:lu(),m:s?.toUpperCase(),u:d?.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:d?.AbsolutePath,q:d?.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},r,c,n.correlationId)}}});var Bl,Pee=ce(()=>{"use strict";Bl=class{constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}});function lIe(t,e,r,n,i,s,o,a,u,c,l,d){d?.verbose("setCachedAccount called");let f=t.getAccountKeys().find(w=>w.startsWith(r)),h=null;f&&(h=t.getAccount(f,i));let y=h||_o.createAccount({homeAccountId:r,idTokenClaims:s,clientInfo:o,environment:a,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,n),E=y.tenantProfiles||[],v=u||y.realm;if(v&&!E.find(w=>w.tenantId===v)){let w=Qy(r,y.localAccountId,v,s);E.push(w)}return y.tenantProfiles=E,y}var ss,a9=ce(()=>{"use strict";qi();i9();Nw();_D();GD();cIe();gn();zD();Pee();Fl();IE();_Z();gD();ND();Hh();Oi();ss=class t{constructor(e,r,n,i,s,o,a){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||ye.NOT_AVAILABLE} - Timestamp: ${e.timestamp||ye.NOT_AVAILABLE} - Description: ${e.error_description||ye.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||ye.NOT_AVAILABLE} - Trace ID: ${e.trace_id||ye.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,s=new Kd(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=br.SERVER_ERROR_RANGE_START&&e.status<=br.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(r&&e.status&&e.status>=br.CLIENT_ERROR_RANGE_START&&e.status<=br.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw VD(e.error,e.error_description,e.suberror)?new Vd(e.error,e.error_description,e.suberror,e.timestamp||ye.EMPTY_STRING,e.trace_id||ye.EMPTY_STRING,e.correlation_id||ye.EMPTY_STRING,e.claims||ye.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,r,n,i,s,o,a,u,c,l){this.performanceClient?.addQueueMeasurement(ae.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=wf(e.id_token||ye.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&d.nonce!==o.nonce)throw Ae(Fy);if(i.maxAge||i.maxAge===0){let y=d.auth_time;if(!y)throw Ae(bf);Bw(y,i.maxAge)}}this.homeAccountIdentifier=_o.generateHomeAccountId(e.client_info||ye.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,d);let p;o&&o.state&&(p=HD.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let f=this.generateCacheRecord(e,r,n,i,d,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new Bl(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),u&&!c&&f.account&&this.cacheStorage.getAllAccounts({homeAccountId:f.account.homeAccountId,environment:f.account.environment},i.correlationId).length<1)return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),this.performanceClient?.addFields({acntLoggedOut:!0},i.correlationId),await t.generateAuthenticationResult(this.cryptoObj,r,f,!1,i,d,p,void 0,l);await this.cacheStorage.saveCacheRecord(f,i.correlationId,EZ(d||{}),s,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,f,!1,i,d,p,e,l)}generateCacheRecord(e,r,n,i,s,o,a){let u=r.getPreferredCache();if(!u)throw Ae(Ef);let c=bD(s),l,d;e.id_token&&s&&(l=Cee(this.homeAccountIdentifier,u,e.id_token,this.clientId,c||""),d=lIe(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,s,e.client_info,u,c,a,void 0,this.logger));let p=null;if(e.access_token){let y=e.scope?Li.fromString(e.scope):new Li(i.scopes||[]),E=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,v=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,w=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,T=n+E,A=T+v,C=w&&w>0?n+w:void 0;p=Tee(this.homeAccountIdentifier,u,e.access_token,this.clientId,c||r.tenant||"",y.printScopes(),T,A,this.cryptoObj.base64Decode,C,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let f=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let E=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+E,this.performanceClient?.addFields({ntwkRtExpiresOnSeconds:y},i.correlationId)}f=Oee(this.homeAccountIdentifier,u,e.refresh_token,this.clientId,e.foci,o,y)}let h=null;return e.foci&&(h={clientId:this.clientId,environment:u,familyId:e.foci}),{account:d,idToken:l,accessToken:p,refreshToken:f,appMetadata:h}}static async generateAuthenticationResult(e,r,n,i,s,o,a,u,c){let l=ye.EMPTY_STRING,d=[],p=null,f,h,y=ye.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===nr.POP&&!s.popKid){let T=new zh(e),{secret:A,keyId:C}=n.accessToken;if(!C)throw Ae(Hy);l=await T.signPopToken(A,C,s)}else l=n.accessToken.secret;d=Li.fromString(n.accessToken.target).asArray(),p=r9(n.accessToken.expiresOn),f=r9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(h=r9(n.accessToken.refreshOn))}n.appMetadata&&(y=n.appMetadata.familyId===Mh?Mh:"");let E=o?.oid||o?.sub||"",v=o?.tid||"";u?.spa_accountid&&n.account&&(n.account.nativeAccountId=u?.spa_accountid);let w=n.account?yD(_o.getAccountInfo(n.account),void 0,o,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:E,tenantId:v,scopes:d,account:w,idToken:n?.idToken?.secret||"",idTokenClaims:o||{},accessToken:l,fromCache:i,expiresOn:p,extExpiresOn:f,refreshOn:h,correlationId:s.correlationId,requestId:c||ye.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||ye.EMPTY_STRING,state:a?a.userRequestState:ye.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||ye.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||ye.EMPTY_STRING,code:u?.spa_code,fromNativeBroker:!1}}}});async function Wo(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}var WD=ce(()=>{"use strict";});var u9,dIe=ce(()=>{"use strict";o9();ME();Xy();gn();DE();AD();a9();$h();qi();Kh();zD();Hh();xE();$w();Yy();Fl();Of();WD();LD();Oi();jh();u9=class extends zo{constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r,n){if(this.performanceClient?.addQueueMeasurement(ae.AuthClientAcquireToken,e.correlationId),!e.code)throw Ae(Ly);let i=lu(),s=await hr(this.executeTokenRequest.bind(this),ae.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=s.headers?.[yn.X_MS_REQUEST_ID],a=new ss(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(s.body),hr(a.handleServerTokenResponse.bind(a),ae.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(s.body,this.authority,i,e,r,n,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw xn(wE);let r=this.createLogoutUrlQueryString(e);return wr.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(ae.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=wr.appendQueryString(e.tokenEndpoint,n),s=await hr(this.createTokenRequestBody.bind(this),ae.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),o;if(r.clientInfo)try{let c=OE(r.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${c.uid}${gf.CLIENT_INFO_SEPARATOR}${c.utid}`,type:Go.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}let a=this.createTokenRequestHeaders(o||r.ccsCredential),u=FE(this.config.authOptions.clientId,r);return hr(this.executePostToTokenEndpoint.bind(this),ae.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,s,a,u,r.correlationId,ae.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ae.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(rg(r,e.embeddedClientId||e.tokenBodyParameters?.[Ud]||this.config.authOptions.clientId),this.includeRedirectUri)ng(r,e.redirectUri);else if(!e.redirectUri)throw xn(bE);if(tg(r,e.scopes,!0,this.oidcDefaultScopes),Eee(r,e.code),Kw(r,this.config.libraryInfo),Vw(r,this.config.telemetry.application),e9(r),this.serverTelemetryManager&&!wD(this.config)&&Zw(r,this.serverTelemetryManager),e.codeVerifier&&See(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&Hw(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;zw(r,await Wo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Ww(r,i.assertionType)}if(Jw(r,bc.AUTHORIZATION_CODE_GRANT),og(r),e.authenticationScheme===nr.POP){let i=new zh(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await hr(i.generateCnf.bind(i),ae.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Qw(r,s)}else if(e.authenticationScheme===nr.SSH)if(e.sshJwk)Xw(r,e.sshJwk);else throw xn(Lh);(!bn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ig(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=OE(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${gf.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Go.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case Go.HOME_ACCOUNT_ID:try{let i=jd(n.credential);Af(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Go.UPN:Gh(r,n.credential);break}return e.embeddedClientId&&Tf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Cf(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[xD])&&Cf(r,{[xD]:"1"}),eg(r,e.correlationId,this.performanceClient),$d(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&mee(r,e.postLogoutRedirectUri),e.correlationId&&sg(r,e.correlationId),e.idTokenHint&&yee(r,e.idTokenHint),e.state&&Gw(r,e.state),e.logoutHint&&wee(r,e.logoutHint),e.extraQueryParameters&&Cf(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&Yw(r),$d(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}});var ARt,cg,pIe=ce(()=>{"use strict";AD();o9();ME();Xy();gn();DE();a9();zD();$h();Yy();qi();i9();Hh();Kh();$w();xE();GD();Fl();Of();WD();LD();kee();jh();Oi();ARt=300,cg=class extends zo{constructor(e,r){super(e,r)}async acquireToken(e,r){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireToken,e.correlationId);let n=lu(),i=await hr(this.executeTokenRequest.bind(this),ae.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),s=i.headers?.[yn.X_MS_REQUEST_ID],o=new ss(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i.body),hr(o.handleServerTokenResponse.bind(o),ae.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,!0,e.forceCache,s)}async acquireTokenByRefreshToken(e,r){if(!e)throw xn(SE);if(this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ae(_f);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0,r)}catch(i){let s=i instanceof Vd&&i.errorCode===ag,o=i instanceof Kd&&i.errorCode===gw.INVALID_GRANT_ERROR&&i.subError===gw.CLIENT_MISMATCH_ERROR;if(s||o)return hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1,r);throw i}return hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1,r)}async acquireTokenWithCachedRefreshToken(e,r,n){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let i=eIe(this.cacheManager.getRefreshToken.bind(this.cacheManager),ae.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!i)throw Mee(ag);if(i.expiresOn){let o=e.refreshTokenExpirationOffsetSeconds||ARt;if(this.performanceClient?.addFields({cacheRtExpiresOnSeconds:Number(i.expiresOn),rtOffsetSeconds:o},e.correlationId),PE(i.expiresOn,o))throw Mee(UD)}let s={...e,refreshToken:i.secret,authenticationScheme:e.authenticationScheme||nr.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Go.HOME_ACCOUNT_ID}};try{return await hr(this.acquireToken.bind(this),ae.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(s,n)}catch(o){if(o instanceof Vd&&o.subError===ug){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=this.cacheManager.generateCredentialKey(i);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=wr.appendQueryString(r.tokenEndpoint,n),s=await hr(this.createTokenRequestBody.bind(this),ae.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=FE(this.config.authOptions.clientId,e);return hr(this.executePostToTokenEndpoint.bind(this),ae.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,ae.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(rg(r,e.embeddedClientId||e.tokenBodyParameters?.[Ud]||this.config.authOptions.clientId),e.redirectUri&&ng(r,e.redirectUri),tg(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Jw(r,bc.REFRESH_TOKEN_GRANT),og(r),Kw(r,this.config.libraryInfo),Vw(r,this.config.telemetry.application),e9(r),this.serverTelemetryManager&&!wD(this.config)&&Zw(r,this.serverTelemetryManager),vee(r,e.refreshToken),this.config.clientCredentials.clientSecret&&Hw(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;zw(r,await Wo(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Ww(r,n.assertionType)}if(e.authenticationScheme===nr.POP){let n=new zh(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await hr(n.generateCnf.bind(n),ae.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Qw(r,i)}else if(e.authenticationScheme===nr.SSH)if(e.sshJwk)Xw(r,e.sshJwk);else throw xn(Lh);if((!bn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ig(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Go.HOME_ACCOUNT_ID:try{let n=jd(e.ccsCredential.credential);Af(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Go.UPN:Gh(r,e.ccsCredential.credential);break}return e.embeddedClientId&&Tf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Cf(r,e.tokenBodyParameters),eg(r,e.correlationId,this.performanceClient),$d(r)}}});var c9,fIe=ce(()=>{"use strict";o9();Hh();qi();a9();gn();$h();IE();Fl();Of();BD();Oi();c9=class extends zo{constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(ae.SilentFlowClientAcquireCachedToken,e.correlationId);let r=Tn.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!bn.isEmptyObj(e.claims))throw this.setCacheOutcome(Tn.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ae(vf);if(!e.account)throw Ae(_f);let n=e.account.tenantId||rIe(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,n);if(s){if(Aee(s.cachedAt)||PE(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Tn.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ae(vf);s.refreshOn&&PE(s.refreshOn,0)&&(r=Tn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Tn.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ae(vf);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await hr(this.generateResultFromCacheRecord.bind(this),ae.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==Tn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(ae.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=wf(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw Ae(bf);Bw(i,r.maxAge)}return ss.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}}});var l9={};Ha(l9,{getAuthorizationCodePayload:()=>ORt,getAuthorizeUrl:()=>TRt,getStandardAuthorizeRequestParameters:()=>CRt,validateAuthorizationResponse:()=>hIe});function CRt(t,e,r,n){let i=e.correlationId,s=new Map;rg(s,e.embeddedClientId||e.extraQueryParameters?.[Ud]||t.clientId);let o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(tg(s,o,!0,t.authority.options.OIDCOptions?.defaultScopes),ng(s,e.redirectUri),sg(s,i),hee(s,e.responseMode),og(s),e.prompt&&(bee(s,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(gee(s,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==dE.SELECT_ACCOUNT)if(e.sid&&e.prompt===dE.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),DD(s,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let a=IRt(e.account),u=RRt(e.account);if(u&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),kE(s,u),n?.addFields({loginHintFromClaim:!0},i);try{let c=jd(e.account.homeAccountId);Af(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===dE.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),DD(s,a),n?.addFields({sidFromClaim:!0},i);try{let c=jd(e.account.homeAccountId);Af(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),kE(s,e.loginHint),Gh(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),kE(s,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let c=jd(e.account.homeAccountId);Af(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),kE(s,e.loginHint),Gh(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&_ee(s,e.nonce),e.state&&Gw(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&ig(s,e.claims,t.clientCapabilities),e.embeddedClientId&&Tf(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(RE))&&Yw(s),s}function TRt(t,e,r,n){let i=$d(e,r,n);return wr.appendQueryString(t.authorizationEndpoint,i)}function ORt(t,e){if(hIe(t,e),!t.code)throw Ae(Vy);return t}function hIe(t,e){if(!t.state||!e)throw t.state?Ae(Fh,"Cached State"):Ae(Fh,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw Ae(Pl,t.state)}try{n=decodeURIComponent(e)}catch{throw Ae(Pl,t.state)}if(r!==n)throw Ae(Ny);if(t.error||t.error_description||t.suberror){let i=xRt(t);throw VD(t.error,t.error_description,t.suberror)?new Vd(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Kd(t.error||"",t.error_description,t.suberror,i)}}function xRt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}function IRt(t){return t.idTokenClaims?.sid||null}function RRt(t){return t.loginHint||t.idTokenClaims?.login_hint||null}var mIe=ce(()=>{"use strict";ME();DE();gn();xE();Xy();Kh();qi();GD();i9();Oi();});function DRt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:s}=t,o=new Map([[0,[r,n]],[2,[i,s]]]),a=[];if(e?.length){if(a=e.split(yIe),a.length<4)return e}else a=Array.from({length:4},()=>gIe);return o.forEach((u,c)=>{u.length===2&&u[0]?.length&&u[1]?.length&&kRt({skuArr:a,index:c,skuName:u[0],skuVersion:u[1]})}),a.join(yIe)}function kRt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(gIe))}var yIe,gIe,d9,bIe=ce(()=>{"use strict";gn();_c();yIe=",",gIe="|";d9=class t{constructor(e,r){this.cacheOutcome=Tn.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||ye.EMPTY_STRING,this.wrapperVer=e.wrapperVer||ye.EMPTY_STRING,this.telemetryCacheKey=ns.CACHE_KEY+gf.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${ns.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(ns.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(ns.VALUE_SEPARATOR);return[ns.SCHEMA_VERSION,o,i].join(ns.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(ns.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(ns.VALUE_SEPARATOR),s=e.errors.length,o=r<s?ns.OVERFLOW_TRUE:ns.OVERFLOW_FALSE,a=[s,o].join(ns.VALUE_SEPARATOR);return[ns.SCHEMA_VERSION,e.cacheHits,n,i,a].join(ns.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=ns.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ir?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(ns.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,s=e.errors.length;for(r=0;r<s;r++){let o=e.failedRequests[2*r]||ye.EMPTY_STRING,a=e.failedRequests[2*r+1]||ye.EMPTY_STRING,u=e.errors[r]||ye.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+u.length+3,i<ns.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||ye.EMPTY_STRING),e.push(this.regionSource||ye.EMPTY_STRING),e.push(this.regionOutcome||ye.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return DRt(e)}}});var di=ce(()=>{"use strict";dIe();pIe();fIe();o9();$w();BD();iD();Fw();xZ();_D();Kh();mIe();ME();a9();Nw();tD();_c();qi();Oi();gn();$h();bIe();IE();Ree();ND();Hh();Xy();DE();Pee();WD();});var Wh,JD=ce(()=>{"use strict";di();Wh=class{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(a=>JSON.parse(a)),lastUpdatedAt:Date.now().toString()},o=new _o;Vh.toObject(o,s),r[n]=o}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}});var _Ie=ce(()=>{"use strict";QR();JD();});var $Rt,URt,If,Eo,ql,Ll,os,YD,EIe,vIe,SIe,wIe,QD,Nee,jl,Ii,Sc,Vr=ce(()=>{"use strict";di();$Rt="managed_identity",URt=`https://login.microsoftonline.com/${$Rt}/`,If={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},Eo={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},ql={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Ll={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},os={GET:"get",POST:"post"},YD={SUCCESS_RANGE_START:br.SUCCESS_RANGE_START,SUCCESS_RANGE_END:br.SUCCESS_RANGE_END,SERVER_ERROR:br.SERVER_ERROR},EIe="REGION_NAME",vIe="MSAL_FORCE_REGION",SIe=32,wIe={SHA256:"sha256"},QD={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Nee={KEY_SEPARATOR:"-"},jl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},Ii={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByOBO:772,acquireTokenWithManagedIdentity:773,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Sc={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"}});var BE,AIe=ce(()=>{"use strict";BE=class{static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}}});var p9,Gd,lg=ce(()=>{"use strict";p9="@azure/msal-node",Gd="3.8.6"});var XD,Fee,f9,CIe=ce(()=>{"use strict";di();Vr();AIe();lg();XD=St(require("http"),1),Fee=St(require("https"),1);f9=class{constructor(e,r,n){this.networkRequestViaProxy=(i,s,o,a)=>{let u=new URL(s),c=new URL(this.proxyUrl),l=o?.headers||{},d={host:c.hostname,port:c.port,method:"CONNECT",path:u.hostname,headers:l};this.customAgentOptions&&Object.keys(this.customAgentOptions).length&&(d.agent=new XD.default.Agent(this.customAgentOptions));let p="";if(i===os.POST){let h=o?.body||"";p=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${h.length}\r
\r
${h}`}else a&&(d.timeout=a);let f=`${i.toUpperCase()} ${u.href} HTTP/1.1\r
Host: ${u.host}\r
Connection: close\r
`+p+`\r
`;return new Promise((h,y)=>{let E=XD.default.request(d);a&&E.on("timeout",()=>{this.logUrlWithPiiAwareness(`Request timeout after ${a}ms for URL`,s),E.destroy(),y(new Error(`Request time out after ${a}ms`))}),E.end(),E.on("connect",(v,w)=>{let T=v?.statusCode||YD.SERVER_ERROR;(T<YD.SUCCESS_RANGE_START||T>YD.SUCCESS_RANGE_END)&&(E.destroy(),w.destroy(),y(new Error(`Error connecting to proxy. Http status code: ${v.statusCode}. Http status message: ${v?.statusMessage||"Unknown"}`))),w.write(f);let A=[];w.on("data",C=>{A.push(C)}),w.on("end",()=>{let x=Buffer.concat([...A]).toString().split(`\r
`),R=parseInt(x[0].split(" ")[1]),M=x[0].split(" ").slice(2).join(" "),I=x[x.length-1],F=x.slice(1,x.length-2),B=new Map;F.forEach(ne=>{let $=ne.split(new RegExp(/:\s(.*)/s)),V=$[0],me=$[1];try{let Oe=JSON.parse(me);Oe&&typeof Oe=="object"&&(me=Oe)}catch{}B.set(V,me)});let k=Object.fromEntries(B),G=BE.getNetworkResponse(k,this.parseBody(R,M,k,I),R);this.shouldDestroyRequest(R,G)&&E.destroy(),h(G)}),w.on("error",C=>{E.destroy(),w.destroy(),y(new Error(C.toString()))})}),E.on("error",v=>{this.logger.error(`HttpClient - Proxy request error: ${v.toString()}`,""),this.logUrlWithPiiAwareness("Destination URL",s),this.logUrlWithPiiAwareness("Proxy URL",this.proxyUrl),this.logger.error(`HttpClient - Method: ${i}`,""),this.logger.errorPii(`HttpClient - Headers: ${JSON.stringify(l)}`,""),E.destroy(),y(new Error(v.toString()))})})},this.networkRequestViaHttps=(i,s,o,a)=>{let u=i===os.POST,c=o?.body||"",l=new URL(s),d=o?.headers||{},p={method:i,headers:d,...BE.urlToHttpOptions(l)};return this.customAgentOptions&&Object.keys(this.customAgentOptions).length&&(p.agent=new Fee.default.Agent(this.customAgentOptions)),u?p.headers={...p.headers,"Content-Length":c.length}:a&&(p.timeout=a),new Promise((f,h)=>{let y;p.protocol==="http:"?y=XD.default.request(p):y=Fee.default.request(p),u&&y.write(c),a&&y.on("timeout",()=>{this.logUrlWithPiiAwareness(`HTTPS request timeout after ${a}ms for URL`,s),y.destroy(),h(new Error(`Request time out after ${a}ms`))}),y.end(),y.on("response",E=>{let v=E.headers,w=E.statusCode,T=E.statusMessage,A=[];E.on("data",C=>{A.push(C)}),E.on("end",()=>{let C=Buffer.concat([...A]).toString(),x=v,R=BE.getNetworkResponse(x,this.parseBody(w,T,x,C),w);this.shouldDestroyRequest(w,R)&&y.destroy(),f(R)})}),y.on("error",E=>{this.logger.error(`HttpClient - HTTPS request error: ${E.toString()}`,""),this.logUrlWithPiiAwareness("URL",s),this.logger.error(`HttpClient - Method: ${i}`,""),this.logger.errorPii(`HttpClient - Headers: ${JSON.stringify(d)}`,""),y.destroy(),h(new Error(E.toString()))})})},this.parseBody=(i,s,o,a)=>{let u;try{u=JSON.parse(a)}catch{let l,d;i>=br.CLIENT_ERROR_RANGE_START&&i<=br.CLIENT_ERROR_RANGE_END?(l="client_error",d="A client"):i>=br.SERVER_ERROR_RANGE_START&&i<=br.SERVER_ERROR_RANGE_END?(l="server_error",d="A server"):(l="unknown_error",d="An unknown"),u={error:l,error_description:`${d} error occured.
Http status code: ${i}
Http status message: ${s||"Unknown"}
Headers: ${JSON.stringify(o)}`}}return u},this.logUrlWithPiiAwareness=(i,s)=>{if(this.isPiiEnabled)this.logger.errorPii(`HttpClient - ${i}: ${s}`,"");else{let o;try{let a=new URL(s);o=`${a.protocol}//${a.host}${a.pathname}`}catch{o=s.split("?")[0]||"unknown"}this.logger.error(`HttpClient - ${i}: ${o} [Enable PII logging to see additional details]`,"")}},this.shouldDestroyRequest=(i,s)=>(i<br.SUCCESS_RANGE_START||i>br.SUCCESS_RANGE_END)&&!(s.body&&typeof s.body=="object"&&"error"in s.body&&s.body.error===jl.AUTHORIZATION_PENDING),this.proxyUrl=e||"",this.customAgentOptions=r||{},this.logger=new Nl(n||{},p9,Gd),this.isPiiEnabled=this.logger.isPiiLoggingEnabled()}async sendGetRequestAsync(e,r,n){return this.proxyUrl?this.networkRequestViaProxy(os.GET,e,r,n):this.networkRequestViaHttps(os.GET,e,r,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?this.networkRequestViaProxy(os.POST,e,r):this.networkRequestViaHttps(os.POST,e,r)}}});var Bee,qee,h9,Lee,TIe,OIe,jee,$ee,Uee,Kee,Vee,xIe,Gee,Hee,dg,pg=ce(()=>{"use strict";Vr();Bee="invalid_file_extension",qee="invalid_file_path",h9="invalid_managed_identity_id_type",Lee="invalid_secret",TIe="missing_client_id",OIe="network_unavailable",jee="platform_not_supported",$ee="unable_to_create_azure_arc",Uee="unable_to_create_cloud_shell",Kee="unable_to_create_source",Vee="unable_to_read_secret_file",xIe="user_assigned_not_available_at_runtime",Gee="www_authenticate_header_missing",Hee="www_authenticate_header_unsupported_format",dg={[Eo.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Eo.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Eo.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Eo.MSI_ENDPOINT]:"msi_endpoint_url_malformed"}});function fg(t){return new zee(t)}var KRt,zee,qE=ce(()=>{"use strict";di();pg();Vr();KRt={[Bee]:"The file path in the WWW-Authenticate header does not contain a .key file.",[qee]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[h9]:"More than one ManagedIdentityIdType was provided.",[Lee]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[jee]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[TIe]:"A ManagedIdentityId id was not provided.",[dg.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Eo.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[dg.IDENTITY_ENDPOINT]:`The Managed Identity's '${Eo.IDENTITY_ENDPOINT}' environment variable is malformed.`,[dg.IMDS_ENDPOINT]:`The Managed Identity's '${Eo.IMDS_ENDPOINT}' environment variable is malformed.`,[dg.MSI_ENDPOINT]:`The Managed Identity's '${Eo.MSI_ENDPOINT}' environment variable is malformed.`,[OIe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[$ee]:"Azure Arc Managed Identities can only be system assigned.",[Uee]:"Cloud Shell Managed Identities can only be system assigned.",[Kee]:"Unable to create a Managed Identity source based on environment variables.",[Vee]:"Unable to read the secret file.",[xIe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[Gee]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[Hee]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},zee=class t extends ir{constructor(e){super(e,KRt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}}});var IIe=ce(()=>{"use strict";qE();Vr();pg();});var as,Jh,m9=ce(()=>{"use strict";di();as={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."},redirectUriNotSupported:{code:"redirect_uri_not_supported",desc:"RedirectUri is not supported in this scenario. Please remove redirectUri from the request."}},Jh=class t extends ir{constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(as.invalidLoopbackAddressType.code,`${as.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(as.unableToLoadRedirectUri.code,`${as.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(as.noAuthCodeInResponse.code,`${as.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(as.noLoopbackServerExists.code,`${as.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(as.loopbackServerAlreadyExists.code,`${as.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(as.loopbackServerTimeout.code,`${as.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(as.stateNotFoundError.code,as.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(as.thumbprintMissing.code,as.thumbprintMissing.desc)}static createRedirectUriNotSupportedError(){return new t(as.redirectUriNotSupported.code,as.redirectUriNotSupported.desc)}}});function DIe({auth:t,broker:e,cache:r,system:n,telemetry:i}){let s={...HRt,networkClient:new f9(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||RIe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw Jh.createStateNotFoundError();return{auth:{...VRt,...t},broker:{...e},cache:{...GRt,...r},system:{...s,...n},telemetry:{...zRt,...i}}}var VRt,GRt,RIe,HRt,zRt,Wee=ce(()=>{"use strict";di();CIe();IIe();m9();VRt={clientId:ye.EMPTY_STRING,authority:ye.DEFAULT_AUTHORITY,clientSecret:ye.EMPTY_STRING,clientAssertion:ye.EMPTY_STRING,clientCertificate:{thumbprint:ye.EMPTY_STRING,thumbprintSha256:ye.EMPTY_STRING,privateKey:ye.EMPTY_STRING,x5c:ye.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:ye.EMPTY_STRING,authorityMetadata:ye.EMPTY_STRING,clientCapabilities:[],protocolMode:vc.AAD,azureCloudOptions:{azureCloudInstance:zy.None,tenant:ye.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},GRt={claimsBasedCachingEnabled:!1},RIe={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xi.Info},HRt={loggerOptions:RIe,networkClient:new f9,proxyUrl:ye.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},zRt={application:{appName:ye.EMPTY_STRING,appVersion:ye.EMPTY_STRING}}});function Jee(){return ZD>ek.length-16&&(kIe.default.randomFillSync(ek),ZD=0),ek.slice(ZD,ZD+=16)}var kIe,ek,ZD,MIe=ce(()=>{kIe=St(require("crypto")),ek=new Uint8Array(256),ZD=ek.length});var PIe,NIe=ce(()=>{PIe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function WRt(t){return typeof t=="string"&&PIe.test(t)}var FIe,BIe=ce(()=>{NIe();FIe=WRt});function JRt(t,e=0){let r=(Ys[t[e+0]]+Ys[t[e+1]]+Ys[t[e+2]]+Ys[t[e+3]]+"-"+Ys[t[e+4]]+Ys[t[e+5]]+"-"+Ys[t[e+6]]+Ys[t[e+7]]+"-"+Ys[t[e+8]]+Ys[t[e+9]]+"-"+Ys[t[e+10]]+Ys[t[e+11]]+Ys[t[e+12]]+Ys[t[e+13]]+Ys[t[e+14]]+Ys[t[e+15]]).toLowerCase();if(!FIe(r))throw TypeError("Stringified UUID is invalid");return r}var Ys,qIe,LIe=ce(()=>{BIe();Ys=[];for(let t=0;t<256;++t)Ys.push((t+256).toString(16).substr(1));qIe=JRt});function YRt(t,e,r){t=t||{};let n=t.random||(t.rng||Jee)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return qIe(n)}var Yee,jIe=ce(()=>{MIe();LIe();Yee=YRt});var $Ie=ce(()=>{jIe()});var LE,Qee=ce(()=>{"use strict";$Ie();LE=class{generateGuid(){return Yee()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}});var du,y9=ce(()=>{"use strict";di();du=class t{static base64Encode(e,r){return Buffer.from(e,r).toString(cu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,ye.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,cu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}}});var UIe,hg,tk=ce(()=>{"use strict";Vr();UIe=St(require("crypto"),1);hg=class{sha256(e){return UIe.default.createHash(wIe.SHA256).update(e).digest()}}});var KIe,rk,VIe=ce(()=>{"use strict";di();Vr();y9();tk();KIe=St(require("crypto"),1);rk=class{constructor(){this.hashUtils=new hg}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%QD.CV_CHARSET.length;for(;e.length<=SIe;){let i=KIe.default.randomBytes(1)[0];if(i>=r)continue;let s=i%QD.CV_CHARSET.length;e.push(QD.CV_CHARSET[s])}let n=e.join(ye.EMPTY_STRING);return du.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return du.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}}});var Yh,g9=ce(()=>{"use strict";di();Qee();y9();VIe();tk();Yh=class{constructor(){this.pkceGenerator=new rk,this.guidGenerator=new LE,this.hashUtils=new hg}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return du.base64Encode(e)}base64Decode(e){return du.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return du.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}}});var nk=ce(()=>{"use strict";gn();IZ();});function GIe(t){let e=t.credentialType===Yr.REFRESH_TOKEN&&t.familyId||t.clientId,r=t.tokenType&&t.tokenType.toLowerCase()!==nr.BEARER.toLowerCase()?t.tokenType.toLowerCase():"";return[t.homeAccountId,t.environment,t.credentialType,e,t.realm||"",t.target||"",t.requestedClaimsHash||"",r].join(Nee.KEY_SEPARATOR).toLowerCase()}function HIe(t){let e=t.homeAccountId.split(".")[1];return[t.homeAccountId,t.environment,e||t.tenantId||""].join(Nee.KEY_SEPARATOR).toLowerCase()}var zIe=ce(()=>{"use strict";di();Vr();});var mg,ik=ce(()=>{"use strict";di();JD();QR();nk();zIe();mg=class extends Vh{constructor(e,r,n,i){super(r,n,e,new Zy,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof _o)r.accounts[n]=i;else if(Ho.isIdTokenEntity(i))r.idTokens[n]=i;else if(Ho.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(Ho.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(Ho.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}generateCredentialKey(e){return GIe(e)}generateAccountKey(e){return HIe(e)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new _o,this.getItem(e)):null}async setAccount(e){let r=this.generateAccountKey(_o.getAccountInfo(e));this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return Ho.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return Ho.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return Ho.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return Ho.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=Ho.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&Ho.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&Ho.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&Ho.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return Wh.deserializeAllCache(Wh.deserializeJSONBlob(e))}static generateJsonCache(e){return Ty.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=this.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}});var b9,_9,Xee=ce(()=>{"use strict";ik();di();JD();QR();g9();Qee();b9={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},_9=class{constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=Ty.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=Wh.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=mg.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new Yh().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new Bl(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new Bl(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(e,r||new LE().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new Bl(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let s=i!==null,o=typeof i=="object",a=!Array.isArray(i),u=typeof e[n]<"u"&&e[n]!==null;s&&o&&a&&u?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,s=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:s,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...b9.Account,...e.Account},IdToken:{...b9.IdToken,...e.IdToken},AccessToken:{...b9.AccessToken,...e.AccessToken},RefreshToken:{...b9.RefreshToken,...e.RefreshToken},AppMetadata:{...b9.AppMetadata,...e.AppMetadata}}}}});var Zee=b((vwr,WIe)=>{var sk=gy().Buffer,QRt=require("stream"),XRt=require("util");function ok(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=sk.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=sk.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}XRt.inherits(ok,QRt);ok.prototype.write=function(e){this.buffer=sk.concat([this.buffer,sk.from(e)]),this.emit("data",e)};ok.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};WIe.exports=ok});var YIe=b((Swr,JIe)=>{"use strict";function ete(t){var e=(t/8|0)+(t%8===0?0:1);return e}var ZRt={ES256:ete(256),ES384:ete(384),ES512:ete(521)};function eDt(t){var e=ZRt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}JIe.exports=eDt});var tte=b((wwr,rRe)=>{"use strict";var ak=gy().Buffer,XIe=YIe(),uk=128,ZIe=0,tDt=32,rDt=16,nDt=2,eRe=rDt|tDt|ZIe<<6,ck=nDt|ZIe<<6;function iDt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tRe(t){if(ak.isBuffer(t))return t;if(typeof t=="string")return ak.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function sDt(t,e){t=tRe(t);var r=XIe(e),n=r+1,i=t.length,s=0;if(t[s++]!==eRe)throw new Error('Could not find expected "seq"');var o=t[s++];if(o===(uk|1)&&(o=t[s++]),i-s<o)throw new Error('"seq" specified length of "'+o+'", only "'+(i-s)+'" remaining');if(t[s++]!==ck)throw new Error('Could not find expected "int" for "r"');var a=t[s++];if(i-s-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(i-s-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var u=s;if(s+=a,t[s++]!==ck)throw new Error('Could not find expected "int" for "s"');var c=t[s++];if(i-s!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(i-s)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=s;if(s+=c,s!==i)throw new Error('Expected to consume entire buffer, but "'+(i-s)+'" bytes remain');var d=r-a,p=r-c,f=ak.allocUnsafe(d+a+p+c);for(s=0;s<d;++s)f[s]=0;t.copy(f,s,u+Math.max(-d,0),u+a),s=r;for(var h=s;s<h+p;++s)f[s]=0;return t.copy(f,s,l+Math.max(-p,0),l+c),f=f.toString("base64"),f=iDt(f),f}function QIe(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=uk;return i&&--n,n}function oDt(t,e){t=tRe(t);var r=XIe(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=QIe(t,0,r),s=QIe(t,r,t.length),o=r-i,a=r-s,u=2+o+1+1+a,c=u<uk,l=ak.allocUnsafe((c?2:3)+u),d=0;return l[d++]=eRe,c?l[d++]=u:(l[d++]=uk|1,l[d++]=u&255),l[d++]=ck,l[d++]=o,i<0?(l[d++]=0,d+=t.copy(l,d,0,r)):d+=t.copy(l,d,i,r),l[d++]=ck,l[d++]=a,s<0?(l[d++]=0,t.copy(l,d,r)):t.copy(l,d,r+s),l}rRe.exports={derToJose:sDt,joseToDer:oDt}});var iRe=b((Awr,nRe)=>{"use strict";var E9=require("buffer").Buffer,rte=require("buffer").SlowBuffer;nRe.exports=lk;function lk(t,e){if(!E9.isBuffer(t)||!E9.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}lk.install=function(){E9.prototype.equal=rte.prototype.equal=function(e){return lk(this,e)}};var aDt=E9.prototype.equal,uDt=rte.prototype.equal;lk.restore=function(){E9.prototype.equal=aDt,rte.prototype.equal=uDt}});var ote=b((Cwr,fRe)=>{var $E=gy().Buffer,wc=require("crypto"),oRe=tte(),sRe=require("util"),cDt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,v9="secret must be a string or buffer",jE="key must be a string or a buffer",lDt="key must be a string, a buffer or an object",ite=typeof wc.createPublicKey=="function";ite&&(jE+=" or a KeyObject",v9+="or a KeyObject");function aRe(t){if(!$E.isBuffer(t)&&typeof t!="string"&&(!ite||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw $l(jE)}function uRe(t){if(!$E.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw $l(lDt)}function dDt(t){if(!$E.isBuffer(t)){if(typeof t=="string")return t;if(!ite||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw $l(v9)}}function ste(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cRe(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function $l(t){var e=[].slice.call(arguments,1),r=sRe.format.bind(sRe,t).apply(null,e);return new TypeError(r)}function pDt(t){return $E.isBuffer(t)||typeof t=="string"}function S9(t){return pDt(t)||(t=JSON.stringify(t)),t}function lRe(t){return function(r,n){dDt(n),r=S9(r);var i=wc.createHmac("sha"+t,n),s=(i.update(r),i.digest("base64"));return ste(s)}}var nte,fDt="timingSafeEqual"in wc?function(e,r){return e.byteLength!==r.byteLength?!1:wc.timingSafeEqual(e,r)}:function(e,r){return nte||(nte=iRe()),nte(e,r)};function hDt(t){return function(r,n,i){var s=lRe(t)(r,i);return fDt($E.from(n),$E.from(s))}}function dRe(t){return function(r,n){uRe(n),r=S9(r);var i=wc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign(n,"base64"));return ste(s)}}function pRe(t){return function(r,n,i){aRe(i),r=S9(r),n=cRe(n);var s=wc.createVerify("RSA-SHA"+t);return s.update(r),s.verify(i,n,"base64")}}function mDt(t){return function(r,n){uRe(n),r=S9(r);var i=wc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign({key:n,padding:wc.constants.RSA_PKCS1_PSS_PADDING,saltLength:wc.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return ste(s)}}function yDt(t){return function(r,n,i){aRe(i),r=S9(r),n=cRe(n);var s=wc.createVerify("RSA-SHA"+t);return s.update(r),s.verify({key:i,padding:wc.constants.RSA_PKCS1_PSS_PADDING,saltLength:wc.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function gDt(t){var e=dRe(t);return function(){var n=e.apply(null,arguments);return n=oRe.derToJose(n,"ES"+t),n}}function bDt(t){var e=pRe(t);return function(n,i,s){i=oRe.joseToDer(i,"ES"+t).toString("base64");var o=e(n,i,s);return o}}function _Dt(){return function(){return""}}function EDt(){return function(e,r){return r===""}}fRe.exports=function(e){var r={hs:lRe,rs:dRe,ps:mDt,es:gDt,none:_Dt},n={hs:hDt,rs:pRe,ps:yDt,es:bDt,none:EDt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw $l(cDt,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:r[s](o),verify:n[s](o)}}});var ate=b((Twr,hRe)=>{var vDt=require("buffer").Buffer;hRe.exports=function(e){return typeof e=="string"?e:typeof e=="number"||vDt.isBuffer(e)?e.toString():JSON.stringify(e)}});var ERe=b((Owr,_Re)=>{var SDt=gy().Buffer,mRe=Zee(),wDt=ote(),ADt=require("stream"),yRe=ate(),ute=require("util");function gRe(t,e){return SDt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function CDt(t,e,r){r=r||"utf8";var n=gRe(yRe(t),"binary"),i=gRe(yRe(e),r);return ute.format("%s.%s",n,i)}function bRe(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,s=wDt(e.alg),o=CDt(e,r,i),a=s.sign(o,n);return ute.format("%s.%s",o,a)}function dk(t){var e=t.secret;if(e=e??t.privateKey,e=e??t.key,/^hs/i.test(t.header.alg)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new mRe(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new mRe(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}ute.inherits(dk,ADt);dk.prototype.sign=function(){try{var e=bRe({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};dk.sign=bRe;_Re.exports=dk});var RRe=b((xwr,IRe)=>{var SRe=gy().Buffer,vRe=Zee(),TDt=ote(),ODt=require("stream"),wRe=ate(),xDt=require("util"),IDt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function RDt(t){return Object.prototype.toString.call(t)==="[object Object]"}function DDt(t){if(RDt(t))return t;try{return JSON.parse(t)}catch{return}}function ARe(t){var e=t.split(".",1)[0];return DDt(SRe.from(e,"base64").toString("binary"))}function kDt(t){return t.split(".",2).join(".")}function CRe(t){return t.split(".")[2]}function MDt(t,e){e=e||"utf8";var r=t.split(".")[1];return SRe.from(r,"base64").toString(e)}function TRe(t){return IDt.test(t)&&!!ARe(t)}function ORe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=wRe(t);var i=CRe(t),s=kDt(t),o=TDt(e);return o.verify(s,i,r)}function xRe(t,e){if(e=e||{},t=wRe(t),!TRe(t))return null;var r=ARe(t);if(!r)return null;var n=MDt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:CRe(t)}}function UE(t){t=t||{};var e=t.secret;if(e=e??t.publicKey,e=e??t.key,/^hs/i.test(t.algorithm)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new vRe(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new vRe(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}xDt.inherits(UE,ODt);UE.prototype.verify=function(){try{var e=ORe(this.signature.buffer,this.algorithm,this.key.buffer),r=xRe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};UE.decode=xRe;UE.isValid=TRe;UE.verify=ORe;IRe.exports=UE});var KE=b(Qh=>{var DRe=ERe(),pk=RRe(),PDt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Qh.ALGORITHMS=PDt;Qh.sign=DRe.sign;Qh.verify=pk.verify;Qh.decode=pk.decode;Qh.isValid=pk.isValid;Qh.createSign=function(e){return new DRe(e)};Qh.createVerify=function(e){return new pk(e)}});var cte=b((Rwr,kRe)=>{var NDt=KE();kRe.exports=function(t,e){e=e||{};var r=NDt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var w9=b((Dwr,MRe)=>{var fk=function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)};fk.prototype=Object.create(Error.prototype);fk.prototype.constructor=fk;MRe.exports=fk});var lte=b((kwr,NRe)=>{var PRe=w9(),hk=function(t,e){PRe.call(this,t),this.name="NotBeforeError",this.date=e};hk.prototype=Object.create(PRe.prototype);hk.prototype.constructor=hk;NRe.exports=hk});var dte=b((Mwr,BRe)=>{var FRe=w9(),mk=function(t,e){FRe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e};mk.prototype=Object.create(FRe.prototype);mk.prototype.constructor=mk;BRe.exports=mk});var LRe=b((Pwr,qRe)=>{var VE=1e3,GE=VE*60,HE=GE*60,yg=HE*24,FDt=yg*7,BDt=yg*365.25;qRe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return qDt(t);if(r==="number"&&isFinite(t))return e.long?jDt(t):LDt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function qDt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*BDt;case"weeks":case"week":case"w":return r*FDt;case"days":case"day":case"d":return r*yg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*HE;case"minutes":case"minute":case"mins":case"min":case"m":return r*GE;case"seconds":case"second":case"secs":case"sec":case"s":return r*VE;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function LDt(t){var e=Math.abs(t);return e>=yg?Math.round(t/yg)+"d":e>=HE?Math.round(t/HE)+"h":e>=GE?Math.round(t/GE)+"m":e>=VE?Math.round(t/VE)+"s":t+"ms"}function jDt(t){var e=Math.abs(t);return e>=yg?yk(t,e,yg,"day"):e>=HE?yk(t,e,HE,"hour"):e>=GE?yk(t,e,GE,"minute"):e>=VE?yk(t,e,VE,"second"):t+" ms"}function yk(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var pte=b((Nwr,jRe)=>{var $Dt=LRe();jRe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=$Dt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var A9=b((Fwr,$Re)=>{"use strict";var UDt="2.0.0",KDt=Number.MAX_SAFE_INTEGER||9007199254740991,VDt=16,GDt=250,HDt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];$Re.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:VDt,MAX_SAFE_BUILD_LENGTH:GDt,MAX_SAFE_INTEGER:KDt,RELEASE_TYPES:HDt,SEMVER_SPEC_VERSION:UDt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var C9=b((Bwr,URe)=>{"use strict";var zDt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};URe.exports=zDt});var zE=b((Hd,KRe)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:fte,MAX_SAFE_BUILD_LENGTH:WDt,MAX_LENGTH:JDt}=A9(),YDt=C9();Hd=KRe.exports={};var QDt=Hd.re=[],XDt=Hd.safeRe=[],Qe=Hd.src=[],ZDt=Hd.safeSrc=[],Xe=Hd.t={},ekt=0,hte="[a-zA-Z0-9-]",tkt=[["\\s",1],["\\d",JDt],[hte,WDt]],rkt=t=>{for(let[e,r]of tkt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Pt=(t,e,r)=>{let n=rkt(e),i=ekt++;YDt(t,i,e),Xe[t]=i,Qe[i]=e,ZDt[i]=n,QDt[i]=new RegExp(e,r?"g":void 0),XDt[i]=new RegExp(n,r?"g":void 0)};Pt("NUMERICIDENTIFIER","0|[1-9]\\d*");Pt("NUMERICIDENTIFIERLOOSE","\\d+");Pt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${hte}*`);Pt("MAINVERSION",`(${Qe[Xe.NUMERICIDENTIFIER]})\\.(${Qe[Xe.NUMERICIDENTIFIER]})\\.(${Qe[Xe.NUMERICIDENTIFIER]})`);Pt("MAINVERSIONLOOSE",`(${Qe[Xe.NUMERICIDENTIFIERLOOSE]})\\.(${Qe[Xe.NUMERICIDENTIFIERLOOSE]})\\.(${Qe[Xe.NUMERICIDENTIFIERLOOSE]})`);Pt("PRERELEASEIDENTIFIER",`(?:${Qe[Xe.NONNUMERICIDENTIFIER]}|${Qe[Xe.NUMERICIDENTIFIER]})`);Pt("PRERELEASEIDENTIFIERLOOSE",`(?:${Qe[Xe.NONNUMERICIDENTIFIER]}|${Qe[Xe.NUMERICIDENTIFIERLOOSE]})`);Pt("PRERELEASE",`(?:-(${Qe[Xe.PRERELEASEIDENTIFIER]}(?:\\.${Qe[Xe.PRERELEASEIDENTIFIER]})*))`);Pt("PRERELEASELOOSE",`(?:-?(${Qe[Xe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Qe[Xe.PRERELEASEIDENTIFIERLOOSE]})*))`);Pt("BUILDIDENTIFIER",`${hte}+`);Pt("BUILD",`(?:\\+(${Qe[Xe.BUILDIDENTIFIER]}(?:\\.${Qe[Xe.BUILDIDENTIFIER]})*))`);Pt("FULLPLAIN",`v?${Qe[Xe.MAINVERSION]}${Qe[Xe.PRERELEASE]}?${Qe[Xe.BUILD]}?`);Pt("FULL",`^${Qe[Xe.FULLPLAIN]}$`);Pt("LOOSEPLAIN",`[v=\\s]*${Qe[Xe.MAINVERSIONLOOSE]}${Qe[Xe.PRERELEASELOOSE]}?${Qe[Xe.BUILD]}?`);Pt("LOOSE",`^${Qe[Xe.LOOSEPLAIN]}$`);Pt("GTLT","((?:<|>)?=?)");Pt("XRANGEIDENTIFIERLOOSE",`${Qe[Xe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Pt("XRANGEIDENTIFIER",`${Qe[Xe.NUMERICIDENTIFIER]}|x|X|\\*`);Pt("XRANGEPLAIN",`[v=\\s]*(${Qe[Xe.XRANGEIDENTIFIER]})(?:\\.(${Qe[Xe.XRANGEIDENTIFIER]})(?:\\.(${Qe[Xe.XRANGEIDENTIFIER]})(?:${Qe[Xe.PRERELEASE]})?${Qe[Xe.BUILD]}?)?)?`);Pt("XRANGEPLAINLOOSE",`[v=\\s]*(${Qe[Xe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Qe[Xe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Qe[Xe.XRANGEIDENTIFIERLOOSE]})(?:${Qe[Xe.PRERELEASELOOSE]})?${Qe[Xe.BUILD]}?)?)?`);Pt("XRANGE",`^${Qe[Xe.GTLT]}\\s*${Qe[Xe.XRANGEPLAIN]}$`);Pt("XRANGELOOSE",`^${Qe[Xe.GTLT]}\\s*${Qe[Xe.XRANGEPLAINLOOSE]}$`);Pt("COERCEPLAIN",`(^|[^\\d])(\\d{1,${fte}})(?:\\.(\\d{1,${fte}}))?(?:\\.(\\d{1,${fte}}))?`);Pt("COERCE",`${Qe[Xe.COERCEPLAIN]}(?:$|[^\\d])`);Pt("COERCEFULL",Qe[Xe.COERCEPLAIN]+`(?:${Qe[Xe.PRERELEASE]})?(?:${Qe[Xe.BUILD]})?(?:$|[^\\d])`);Pt("COERCERTL",Qe[Xe.COERCE],!0);Pt("COERCERTLFULL",Qe[Xe.COERCEFULL],!0);Pt("LONETILDE","(?:~>?)");Pt("TILDETRIM",`(\\s*)${Qe[Xe.LONETILDE]}\\s+`,!0);Hd.tildeTrimReplace="$1~";Pt("TILDE",`^${Qe[Xe.LONETILDE]}${Qe[Xe.XRANGEPLAIN]}$`);Pt("TILDELOOSE",`^${Qe[Xe.LONETILDE]}${Qe[Xe.XRANGEPLAINLOOSE]}$`);Pt("LONECARET","(?:\\^)");Pt("CARETTRIM",`(\\s*)${Qe[Xe.LONECARET]}\\s+`,!0);Hd.caretTrimReplace="$1^";Pt("CARET",`^${Qe[Xe.LONECARET]}${Qe[Xe.XRANGEPLAIN]}$`);Pt("CARETLOOSE",`^${Qe[Xe.LONECARET]}${Qe[Xe.XRANGEPLAINLOOSE]}$`);Pt("COMPARATORLOOSE",`^${Qe[Xe.GTLT]}\\s*(${Qe[Xe.LOOSEPLAIN]})$|^$`);Pt("COMPARATOR",`^${Qe[Xe.GTLT]}\\s*(${Qe[Xe.FULLPLAIN]})$|^$`);Pt("COMPARATORTRIM",`(\\s*)${Qe[Xe.GTLT]}\\s*(${Qe[Xe.LOOSEPLAIN]}|${Qe[Xe.XRANGEPLAIN]})`,!0);Hd.comparatorTrimReplace="$1$2$3";Pt("HYPHENRANGE",`^\\s*(${Qe[Xe.XRANGEPLAIN]})\\s+-\\s+(${Qe[Xe.XRANGEPLAIN]})\\s*$`);Pt("HYPHENRANGELOOSE",`^\\s*(${Qe[Xe.XRANGEPLAINLOOSE]})\\s+-\\s+(${Qe[Xe.XRANGEPLAINLOOSE]})\\s*$`);Pt("STAR","(<|>)?=?\\s*\\*");Pt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Pt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var gk=b((qwr,VRe)=>{"use strict";var nkt=Object.freeze({loose:!0}),ikt=Object.freeze({}),skt=t=>t?typeof t!="object"?nkt:t:ikt;VRe.exports=skt});var mte=b((Lwr,zRe)=>{"use strict";var GRe=/^[0-9]+$/,HRe=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=GRe.test(t),n=GRe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},okt=(t,e)=>HRe(e,t);zRe.exports={compareIdentifiers:HRe,rcompareIdentifiers:okt}});var vo=b((jwr,JRe)=>{"use strict";var bk=C9(),{MAX_LENGTH:WRe,MAX_SAFE_INTEGER:_k}=A9(),{safeRe:Ek,t:vk}=zE(),akt=gk(),{compareIdentifiers:yte}=mte(),gte=class t{constructor(e,r){if(r=akt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>WRe)throw new TypeError(`version is longer than ${WRe} characters`);bk("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Ek[vk.LOOSE]:Ek[vk.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>_k||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_k||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_k||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<_k)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(bk("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(bk("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return yte(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(bk("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return yte(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?Ek[vk.PRERELEASELOOSE]:Ek[vk.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),yte(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};JRe.exports=gte});var gg=b(($wr,QRe)=>{"use strict";var YRe=vo(),ukt=(t,e,r=!1)=>{if(t instanceof YRe)return t;try{return new YRe(t,e)}catch(n){if(!r)return null;throw n}};QRe.exports=ukt});var ZRe=b((Uwr,XRe)=>{"use strict";var ckt=gg(),lkt=(t,e)=>{let r=ckt(t,e);return r?r.version:null};XRe.exports=lkt});var tDe=b((Kwr,eDe)=>{"use strict";var dkt=gg(),pkt=(t,e)=>{let r=dkt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};eDe.exports=pkt});var iDe=b((Vwr,nDe)=>{"use strict";var rDe=vo(),fkt=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new rDe(t instanceof rDe?t.version:t,r).inc(e,n,i).version}catch{return null}};nDe.exports=fkt});var aDe=b((Gwr,oDe)=>{"use strict";var sDe=gg(),hkt=(t,e)=>{let r=sDe(t,null,!0),n=sDe(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};oDe.exports=hkt});var cDe=b((Hwr,uDe)=>{"use strict";var mkt=vo(),ykt=(t,e)=>new mkt(t,e).major;uDe.exports=ykt});var dDe=b((zwr,lDe)=>{"use strict";var gkt=vo(),bkt=(t,e)=>new gkt(t,e).minor;lDe.exports=bkt});var fDe=b((Wwr,pDe)=>{"use strict";var _kt=vo(),Ekt=(t,e)=>new _kt(t,e).patch;pDe.exports=Ekt});var mDe=b((Jwr,hDe)=>{"use strict";var vkt=gg(),Skt=(t,e)=>{let r=vkt(t,e);return r&&r.prerelease.length?r.prerelease:null};hDe.exports=Skt});var Ac=b((Ywr,gDe)=>{"use strict";var yDe=vo(),wkt=(t,e,r)=>new yDe(t,r).compare(new yDe(e,r));gDe.exports=wkt});var _De=b((Qwr,bDe)=>{"use strict";var Akt=Ac(),Ckt=(t,e,r)=>Akt(e,t,r);bDe.exports=Ckt});var vDe=b((Xwr,EDe)=>{"use strict";var Tkt=Ac(),Okt=(t,e)=>Tkt(t,e,!0);EDe.exports=Okt});var Sk=b((Zwr,wDe)=>{"use strict";var SDe=vo(),xkt=(t,e,r)=>{let n=new SDe(t,r),i=new SDe(e,r);return n.compare(i)||n.compareBuild(i)};wDe.exports=xkt});var CDe=b((e9r,ADe)=>{"use strict";var Ikt=Sk(),Rkt=(t,e)=>t.sort((r,n)=>Ikt(r,n,e));ADe.exports=Rkt});var ODe=b((t9r,TDe)=>{"use strict";var Dkt=Sk(),kkt=(t,e)=>t.sort((r,n)=>Dkt(n,r,e));TDe.exports=kkt});var T9=b((r9r,xDe)=>{"use strict";var Mkt=Ac(),Pkt=(t,e,r)=>Mkt(t,e,r)>0;xDe.exports=Pkt});var wk=b((n9r,IDe)=>{"use strict";var Nkt=Ac(),Fkt=(t,e,r)=>Nkt(t,e,r)<0;IDe.exports=Fkt});var bte=b((i9r,RDe)=>{"use strict";var Bkt=Ac(),qkt=(t,e,r)=>Bkt(t,e,r)===0;RDe.exports=qkt});var _te=b((s9r,DDe)=>{"use strict";var Lkt=Ac(),jkt=(t,e,r)=>Lkt(t,e,r)!==0;DDe.exports=jkt});var Ak=b((o9r,kDe)=>{"use strict";var $kt=Ac(),Ukt=(t,e,r)=>$kt(t,e,r)>=0;kDe.exports=Ukt});var Ck=b((a9r,MDe)=>{"use strict";var Kkt=Ac(),Vkt=(t,e,r)=>Kkt(t,e,r)<=0;MDe.exports=Vkt});var Ete=b((u9r,PDe)=>{"use strict";var Gkt=bte(),Hkt=_te(),zkt=T9(),Wkt=Ak(),Jkt=wk(),Ykt=Ck(),Qkt=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Gkt(t,r,n);case"!=":return Hkt(t,r,n);case">":return zkt(t,r,n);case">=":return Wkt(t,r,n);case"<":return Jkt(t,r,n);case"<=":return Ykt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};PDe.exports=Qkt});var FDe=b((c9r,NDe)=>{"use strict";var Xkt=vo(),Zkt=gg(),{safeRe:Tk,t:Ok}=zE(),eMt=(t,e)=>{if(t instanceof Xkt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Tk[Ok.COERCEFULL]:Tk[Ok.COERCE]);else{let u=e.includePrerelease?Tk[Ok.COERCERTLFULL]:Tk[Ok.COERCERTL],c;for(;(c=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Zkt(`${n}.${i}.${s}${o}${a}`,e)};NDe.exports=eMt});var qDe=b((l9r,BDe)=>{"use strict";var vte=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};BDe.exports=vte});var Cc=b((d9r,UDe)=>{"use strict";var tMt=/\s+/g,Ste=class t{constructor(e,r){if(r=nMt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof wte)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(tMt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!jDe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&lMt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&uMt)|(this.options.loose&&cMt))+":"+e,i=LDe.get(n);if(i)return i;let s=this.options.loose,o=s?Jo[So.HYPHENRANGELOOSE]:Jo[So.HYPHENRANGE];e=e.replace(o,EMt(this.options.includePrerelease)),In("hyphen replace",e),e=e.replace(Jo[So.COMPARATORTRIM],sMt),In("comparator trim",e),e=e.replace(Jo[So.TILDETRIM],oMt),In("tilde trim",e),e=e.replace(Jo[So.CARETTRIM],aMt),In("caret trim",e);let a=e.split(" ").map(d=>dMt(d,this.options)).join(" ").split(/\s+/).map(d=>_Mt(d,this.options));s&&(a=a.filter(d=>(In("loose invalid filter",d,this.options),!!d.match(Jo[So.COMPARATORLOOSE])))),In("range list",a);let u=new Map,c=a.map(d=>new wte(d,this.options));for(let d of c){if(jDe(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return LDe.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>$De(n,r)&&e.set.some(i=>$De(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new iMt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(vMt(this.set[r],e,this.options))return!0;return!1}};UDe.exports=Ste;var rMt=qDe(),LDe=new rMt,nMt=gk(),wte=O9(),In=C9(),iMt=vo(),{safeRe:Jo,t:So,comparatorTrimReplace:sMt,tildeTrimReplace:oMt,caretTrimReplace:aMt}=zE(),{FLAG_INCLUDE_PRERELEASE:uMt,FLAG_LOOSE:cMt}=A9(),jDe=t=>t.value==="<0.0.0-0",lMt=t=>t.value==="",$De=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},dMt=(t,e)=>(t=t.replace(Jo[So.BUILD],""),In("comp",t,e),t=hMt(t,e),In("caret",t),t=pMt(t,e),In("tildes",t),t=yMt(t,e),In("xrange",t),t=bMt(t,e),In("stars",t),t),Yo=t=>!t||t.toLowerCase()==="x"||t==="*",pMt=(t,e)=>t.trim().split(/\s+/).map(r=>fMt(r,e)).join(" "),fMt=(t,e)=>{let r=e.loose?Jo[So.TILDELOOSE]:Jo[So.TILDE];return t.replace(r,(n,i,s,o,a)=>{In("tilde",t,n,i,s,o,a);let u;return Yo(i)?u="":Yo(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Yo(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(In("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,In("tilde return",u),u})},hMt=(t,e)=>t.trim().split(/\s+/).map(r=>mMt(r,e)).join(" "),mMt=(t,e)=>{In("caret",t,e);let r=e.loose?Jo[So.CARETLOOSE]:Jo[So.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,u)=>{In("caret",t,i,s,o,a,u);let c;return Yo(s)?c="":Yo(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Yo(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(In("replaceCaret pr",u),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(In("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),In("caret return",c),c})},yMt=(t,e)=>(In("replaceXRanges",t,e),t.split(/\s+/).map(r=>gMt(r,e)).join(" ")),gMt=(t,e)=>{t=t.trim();let r=e.loose?Jo[So.XRANGELOOSE]:Jo[So.XRANGE];return t.replace(r,(n,i,s,o,a,u)=>{In("xRange",t,n,i,s,o,a,u);let c=Yo(s),l=c||Yo(o),d=l||Yo(a),p=d;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):l?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),In("xRange return",n),n})},bMt=(t,e)=>(In("replaceStars",t,e),t.trim().replace(Jo[So.STAR],"")),_Mt=(t,e)=>(In("replaceGTE0",t,e),t.trim().replace(Jo[e.includePrerelease?So.GTE0PRE:So.GTE0],"")),EMt=t=>(e,r,n,i,s,o,a,u,c,l,d,p)=>(Yo(n)?r="":Yo(i)?r=`>=${n}.0.0${t?"-0":""}`:Yo(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Yo(c)?u="":Yo(l)?u=`<${+c+1}.0.0-0`:Yo(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:t?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),vMt=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(In(t[n].semver),t[n].semver!==wte.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var O9=b((p9r,WDe)=>{"use strict";var x9=Symbol("SemVer ANY"),Tte=class t{static get ANY(){return x9}constructor(e,r){if(r=KDe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Cte("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===x9?this.value="":this.value=this.operator+this.semver.version,Cte("comp",this)}parse(e){let r=this.options.loose?VDe[GDe.COMPARATORLOOSE]:VDe[GDe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new HDe(n[2],this.options.loose):this.semver=x9}toString(){return this.value}test(e){if(Cte("Comparator.test",e,this.options.loose),this.semver===x9||e===x9)return!0;if(typeof e=="string")try{e=new HDe(e,this.options)}catch{return!1}return Ate(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new zDe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new zDe(this.value,r).test(e.semver):(r=KDe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Ate(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Ate(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};WDe.exports=Tte;var KDe=gk(),{safeRe:VDe,t:GDe}=zE(),Ate=Ete(),Cte=C9(),HDe=vo(),zDe=Cc()});var I9=b((f9r,JDe)=>{"use strict";var SMt=Cc(),wMt=(t,e,r)=>{try{e=new SMt(e,r)}catch{return!1}return e.test(t)};JDe.exports=wMt});var QDe=b((h9r,YDe)=>{"use strict";var AMt=Cc(),CMt=(t,e)=>new AMt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));YDe.exports=CMt});var ZDe=b((m9r,XDe)=>{"use strict";var TMt=vo(),OMt=Cc(),xMt=(t,e,r)=>{let n=null,i=null,s=null;try{s=new OMt(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new TMt(n,r))}),n};XDe.exports=xMt});var tke=b((y9r,eke)=>{"use strict";var IMt=vo(),RMt=Cc(),DMt=(t,e,r)=>{let n=null,i=null,s=null;try{s=new RMt(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new IMt(n,r))}),n};eke.exports=DMt});var ike=b((g9r,nke)=>{"use strict";var Ote=vo(),kMt=Cc(),rke=T9(),MMt=(t,e)=>{t=new kMt(t,e);let r=new Ote("0.0.0");if(t.test(r)||(r=new Ote("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new Ote(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||rke(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||rke(r,s))&&(r=s)}return r&&t.test(r)?r:null};nke.exports=MMt});var oke=b((b9r,ske)=>{"use strict";var PMt=Cc(),NMt=(t,e)=>{try{return new PMt(t,e).range||"*"}catch{return null}};ske.exports=NMt});var xk=b((_9r,lke)=>{"use strict";var FMt=vo(),cke=O9(),{ANY:BMt}=cke,qMt=Cc(),LMt=I9(),ake=T9(),uke=wk(),jMt=Ck(),$Mt=Ak(),UMt=(t,e,r,n)=>{t=new FMt(t,n),e=new qMt(e,n);let i,s,o,a,u;switch(r){case">":i=ake,s=jMt,o=uke,a=">",u=">=";break;case"<":i=uke,s=$Mt,o=ake,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(LMt(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===BMt&&(f=new cke(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&s(t,p.semver))return!1;if(p.operator===u&&o(t,p.semver))return!1}return!0};lke.exports=UMt});var pke=b((E9r,dke)=>{"use strict";var KMt=xk(),VMt=(t,e,r)=>KMt(t,e,">",r);dke.exports=VMt});var hke=b((v9r,fke)=>{"use strict";var GMt=xk(),HMt=(t,e,r)=>GMt(t,e,"<",r);fke.exports=HMt});var gke=b((S9r,yke)=>{"use strict";var mke=Cc(),zMt=(t,e,r)=>(t=new mke(t,r),e=new mke(e,r),t.intersects(e,r));yke.exports=zMt});var _ke=b((w9r,bke)=>{"use strict";var WMt=I9(),JMt=Ac();bke.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((l,d)=>JMt(l,d,r));for(let l of o)WMt(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var Cke=b((A9r,Ake)=>{"use strict";var Eke=Cc(),Ite=O9(),{ANY:xte}=Ite,R9=I9(),Rte=Ac(),YMt=(t,e,r={})=>{if(t===e)return!0;t=new Eke(t,r),e=new Eke(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=XMt(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},QMt=[new Ite(">=0.0.0-0")],vke=[new Ite(">=0.0.0")],XMt=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===xte){if(e.length===1&&e[0].semver===xte)return!0;r.includePrerelease?t=QMt:t=vke}if(e.length===1&&e[0].semver===xte){if(r.includePrerelease)return!0;e=vke}let n=new Set,i,s;for(let f of t)f.operator===">"||f.operator===">="?i=Ske(i,f,r):f.operator==="<"||f.operator==="<="?s=wke(s,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Rte(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let f of n){if(i&&!R9(f,String(i),r)||s&&!R9(f,String(s),r))return null;for(let h of e)if(!R9(f,String(h),r))return!1;return!0}let a,u,c,l,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=Ske(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!R9(i.semver,String(f),r))return!1}if(s){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=wke(s,f,r),u===f&&u!==s)return!1}else if(s.operator==="<="&&!R9(s.semver,String(f),r))return!1}if(!f.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&l&&!i&&o!==0||p||d)},Ske=(t,e,r)=>{if(!t)return e;let n=Rte(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},wke=(t,e,r)=>{if(!t)return e;let n=Rte(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};Ake.exports=YMt});var D9=b((C9r,xke)=>{"use strict";var Dte=zE(),Tke=A9(),ZMt=vo(),Oke=mte(),ePt=gg(),tPt=ZRe(),rPt=tDe(),nPt=iDe(),iPt=aDe(),sPt=cDe(),oPt=dDe(),aPt=fDe(),uPt=mDe(),cPt=Ac(),lPt=_De(),dPt=vDe(),pPt=Sk(),fPt=CDe(),hPt=ODe(),mPt=T9(),yPt=wk(),gPt=bte(),bPt=_te(),_Pt=Ak(),EPt=Ck(),vPt=Ete(),SPt=FDe(),wPt=O9(),APt=Cc(),CPt=I9(),TPt=QDe(),OPt=ZDe(),xPt=tke(),IPt=ike(),RPt=oke(),DPt=xk(),kPt=pke(),MPt=hke(),PPt=gke(),NPt=_ke(),FPt=Cke();xke.exports={parse:ePt,valid:tPt,clean:rPt,inc:nPt,diff:iPt,major:sPt,minor:oPt,patch:aPt,prerelease:uPt,compare:cPt,rcompare:lPt,compareLoose:dPt,compareBuild:pPt,sort:fPt,rsort:hPt,gt:mPt,lt:yPt,eq:gPt,neq:bPt,gte:_Pt,lte:EPt,cmp:vPt,coerce:SPt,Comparator:wPt,Range:APt,satisfies:CPt,toComparators:TPt,maxSatisfying:OPt,minSatisfying:xPt,minVersion:IPt,validRange:RPt,outside:DPt,gtr:kPt,ltr:MPt,intersects:PPt,simplifyRange:NPt,subset:FPt,SemVer:ZMt,re:Dte.re,src:Dte.src,tokens:Dte.t,SEMVER_SPEC_VERSION:Tke.SEMVER_SPEC_VERSION,RELEASE_TYPES:Tke.RELEASE_TYPES,compareIdentifiers:Oke.compareIdentifiers,rcompareIdentifiers:Oke.rcompareIdentifiers}});var Rke=b((T9r,Ike)=>{var BPt=D9();Ike.exports=BPt.satisfies(process.version,">=15.7.0")});var kke=b((O9r,Dke)=>{var qPt=D9();Dke.exports=qPt.satisfies(process.version,">=16.9.0")});var kte=b((x9r,Mke)=>{var LPt=Rke(),jPt=kke(),$Pt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},UPt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Mke.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=$Pt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(LPt)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,s=UPt[t];if(i!==s)throw new Error(`"alg" parameter "${t}" requires curve "${s}".`);break;case"rsa-pss":if(jPt){let o=parseInt(t.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:u,saltLength:c}=e.asymmetricKeyDetails;if(a!==`sha${o}`||u!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(c!==void 0&&c>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var Mte=b((I9r,Pke)=>{var KPt=D9();Pke.exports=KPt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Bke=b((R9r,Fke)=>{var _n=w9(),VPt=lte(),Nke=dte(),GPt=cte(),HPt=pte(),zPt=kte(),WPt=Mte(),JPt=KE(),{KeyObject:YPt,createSecretKey:QPt,createPublicKey:XPt}=require("crypto"),Pte=["RS256","RS384","RS512"],ZPt=["ES256","ES384","ES512"],Nte=["RS256","RS384","RS512"],eNt=["HS256","HS384","HS512"];WPt&&(Pte.splice(Pte.length,0,"PS256","PS384","PS512"),Nte.splice(Nte.length,0,"PS256","PS384","PS512"));Fke.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=function(l,d){if(l)throw l;return d},r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new _n("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new _n("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new _n("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new _n("jwt must be provided"));if(typeof t!="string")return i(new _n("jwt must be a string"));let o=t.split(".");if(o.length!==3)return i(new _n("jwt malformed"));let a;try{a=GPt(t,{complete:!0})}catch(l){return i(l)}if(!a)return i(new _n("invalid token"));let u=a.header,c;if(typeof e=="function"){if(!n)return i(new _n("verify must be called asynchronous if secret or public key is provided as a callback"));c=e}else c=function(l,d){return d(null,e)};return c(u,function(l,d){if(l)return i(new _n("error in secret or public key callback: "+l.message));let p=o[2].trim()!=="";if(!p&&d)return i(new _n("jwt signature is required"));if(p&&!d)return i(new _n("secret or public key must be provided"));if(!p&&!r.algorithms)return i(new _n('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof YPt))try{d=XPt(d)}catch{try{d=QPt(typeof d=="string"?Buffer.from(d):d)}catch{return i(new _n("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(d.type==="secret"?r.algorithms=eNt:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?r.algorithms=Nte:d.asymmetricKeyType==="ec"?r.algorithms=ZPt:r.algorithms=Pte),r.algorithms.indexOf(a.header.alg)===-1)return i(new _n("invalid algorithm"));if(u.alg.startsWith("HS")&&d.type!=="secret")return i(new _n(`secretOrPublicKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)&&d.type!=="public")return i(new _n(`secretOrPublicKey must be an asymmetric key when using ${u.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{zPt(u.alg,d)}catch(y){return i(y)}let f;try{f=JPt.verify(t,a.header.alg,d)}catch(y){return i(y)}if(!f)return i(new _n("invalid signature"));let h=a.payload;if(typeof h.nbf<"u"&&!r.ignoreNotBefore){if(typeof h.nbf!="number")return i(new _n("invalid nbf value"));if(h.nbf>s+(r.clockTolerance||0))return i(new VPt("jwt not active",new Date(h.nbf*1e3)))}if(typeof h.exp<"u"&&!r.ignoreExpiration){if(typeof h.exp!="number")return i(new _n("invalid exp value"));if(s>=h.exp+(r.clockTolerance||0))return i(new Nke("jwt expired",new Date(h.exp*1e3)))}if(r.audience){let y=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(h.aud)?h.aud:[h.aud]).some(function(w){return y.some(function(T){return T instanceof RegExp?T.test(w):T===w})}))return i(new _n("jwt audience invalid. expected: "+y.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&h.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(h.iss)===-1))return i(new _n("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&h.sub!==r.subject)return i(new _n("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&h.jti!==r.jwtid)return i(new _n("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&h.nonce!==r.nonce)return i(new _n("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof h.iat!="number")return i(new _n("iat required when maxAge is specified"));let y=HPt(r.maxAge,h.iat);if(typeof y>"u")return i(new _n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=y+(r.clockTolerance||0))return i(new Nke("maxAge exceeded",new Date(y*1e3)))}if(r.complete===!0){let y=a.signature;return i(null,{header:u,payload:h,signature:y})}return i(null,h)})}});var Kke=b((D9r,Uke)=>{var qke=1/0,jke=9007199254740991,tNt=17976931348623157e292,Lke=NaN,rNt="[object Arguments]",nNt="[object Function]",iNt="[object GeneratorFunction]",sNt="[object String]",oNt="[object Symbol]",aNt=/^\s+|\s+$/g,uNt=/^[-+]0x[0-9a-f]+$/i,cNt=/^0b[01]+$/i,lNt=/^0o[0-7]+$/i,dNt=/^(?:0|[1-9]\d*)$/,pNt=parseInt;function fNt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function hNt(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function mNt(t,e,r){if(e!==e)return hNt(t,yNt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function yNt(t){return t!==t}function gNt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function bNt(t,e){return fNt(e,function(r){return t[r]})}function _Nt(t,e){return function(r){return t(e(r))}}var Ik=Object.prototype,Bte=Ik.hasOwnProperty,Rk=Ik.toString,ENt=Ik.propertyIsEnumerable,vNt=_Nt(Object.keys,Object),SNt=Math.max;function wNt(t,e){var r=$ke(t)||xNt(t)?gNt(t.length,String):[],n=r.length,i=!!n;for(var s in t)(e||Bte.call(t,s))&&!(i&&(s=="length"||CNt(s,n)))&&r.push(s);return r}function ANt(t){if(!TNt(t))return vNt(t);var e=[];for(var r in Object(t))Bte.call(t,r)&&r!="constructor"&&e.push(r);return e}function CNt(t,e){return e=e??jke,!!e&&(typeof t=="number"||dNt.test(t))&&t>-1&&t%1==0&&t<e}function TNt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ik;return t===r}function ONt(t,e,r,n){t=qte(t)?t:qNt(t),r=r&&!n?NNt(r):0;var i=t.length;return r<0&&(r=SNt(i+r,0)),kNt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&mNt(t,e,r)>-1}function xNt(t){return INt(t)&&Bte.call(t,"callee")&&(!ENt.call(t,"callee")||Rk.call(t)==rNt)}var $ke=Array.isArray;function qte(t){return t!=null&&DNt(t.length)&&!RNt(t)}function INt(t){return Lte(t)&&qte(t)}function RNt(t){var e=Fte(t)?Rk.call(t):"";return e==nNt||e==iNt}function DNt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=jke}function Fte(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Lte(t){return!!t&&typeof t=="object"}function kNt(t){return typeof t=="string"||!$ke(t)&&Lte(t)&&Rk.call(t)==sNt}function MNt(t){return typeof t=="symbol"||Lte(t)&&Rk.call(t)==oNt}function PNt(t){if(!t)return t===0?t:0;if(t=FNt(t),t===qke||t===-qke){var e=t<0?-1:1;return e*tNt}return t===t?t:0}function NNt(t){var e=PNt(t),r=e%1;return e===e?r?e-r:e:0}function FNt(t){if(typeof t=="number")return t;if(MNt(t))return Lke;if(Fte(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Fte(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(aNt,"");var r=cNt.test(t);return r||lNt.test(t)?pNt(t.slice(2),r?2:8):uNt.test(t)?Lke:+t}function BNt(t){return qte(t)?wNt(t):ANt(t)}function qNt(t){return t?bNt(t,BNt(t)):[]}Uke.exports=ONt});var Gke=b((k9r,Vke)=>{var LNt="[object Boolean]",jNt=Object.prototype,$Nt=jNt.toString;function UNt(t){return t===!0||t===!1||KNt(t)&&$Nt.call(t)==LNt}function KNt(t){return!!t&&typeof t=="object"}Vke.exports=UNt});var Yke=b((M9r,Jke)=>{var Hke=1/0,VNt=17976931348623157e292,zke=NaN,GNt="[object Symbol]",HNt=/^\s+|\s+$/g,zNt=/^[-+]0x[0-9a-f]+$/i,WNt=/^0b[01]+$/i,JNt=/^0o[0-7]+$/i,YNt=parseInt,QNt=Object.prototype,XNt=QNt.toString;function ZNt(t){return typeof t=="number"&&t==nFt(t)}function Wke(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function eFt(t){return!!t&&typeof t=="object"}function tFt(t){return typeof t=="symbol"||eFt(t)&&XNt.call(t)==GNt}function rFt(t){if(!t)return t===0?t:0;if(t=iFt(t),t===Hke||t===-Hke){var e=t<0?-1:1;return e*VNt}return t===t?t:0}function nFt(t){var e=rFt(t),r=e%1;return e===e?r?e-r:e:0}function iFt(t){if(typeof t=="number")return t;if(tFt(t))return zke;if(Wke(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wke(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(HNt,"");var r=WNt.test(t);return r||JNt.test(t)?YNt(t.slice(2),r?2:8):zNt.test(t)?zke:+t}Jke.exports=ZNt});var Xke=b((P9r,Qke)=>{var sFt="[object Number]",oFt=Object.prototype,aFt=oFt.toString;function uFt(t){return!!t&&typeof t=="object"}function cFt(t){return typeof t=="number"||uFt(t)&&aFt.call(t)==sFt}Qke.exports=cFt});var rMe=b((N9r,tMe)=>{var lFt="[object Object]";function dFt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function pFt(t,e){return function(r){return t(e(r))}}var fFt=Function.prototype,Zke=Object.prototype,eMe=fFt.toString,hFt=Zke.hasOwnProperty,mFt=eMe.call(Object),yFt=Zke.toString,gFt=pFt(Object.getPrototypeOf,Object);function bFt(t){return!!t&&typeof t=="object"}function _Ft(t){if(!bFt(t)||yFt.call(t)!=lFt||dFt(t))return!1;var e=gFt(t);if(e===null)return!0;var r=hFt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&eMe.call(r)==mFt}tMe.exports=_Ft});var iMe=b((F9r,nMe)=>{var EFt="[object String]",vFt=Object.prototype,SFt=vFt.toString,wFt=Array.isArray;function AFt(t){return!!t&&typeof t=="object"}function CFt(t){return typeof t=="string"||!wFt(t)&&AFt(t)&&SFt.call(t)==EFt}nMe.exports=CFt});var cMe=b((B9r,uMe)=>{var TFt="Expected a function",sMe=1/0,OFt=17976931348623157e292,oMe=NaN,xFt="[object Symbol]",IFt=/^\s+|\s+$/g,RFt=/^[-+]0x[0-9a-f]+$/i,DFt=/^0b[01]+$/i,kFt=/^0o[0-7]+$/i,MFt=parseInt,PFt=Object.prototype,NFt=PFt.toString;function FFt(t,e){var r;if(typeof e!="function")throw new TypeError(TFt);return t=$Ft(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function BFt(t){return FFt(2,t)}function aMe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function qFt(t){return!!t&&typeof t=="object"}function LFt(t){return typeof t=="symbol"||qFt(t)&&NFt.call(t)==xFt}function jFt(t){if(!t)return t===0?t:0;if(t=UFt(t),t===sMe||t===-sMe){var e=t<0?-1:1;return e*OFt}return t===t?t:0}function $Ft(t){var e=jFt(t),r=e%1;return e===e?r?e-r:e:0}function UFt(t){if(typeof t=="number")return t;if(LFt(t))return oMe;if(aMe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=aMe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(IFt,"");var r=DFt.test(t);return r||kFt.test(t)?MFt(t.slice(2),r?2:8):RFt.test(t)?oMe:+t}uMe.exports=BFt});var bMe=b((q9r,gMe)=>{var lMe=pte(),KFt=Mte(),VFt=kte(),dMe=KE(),GFt=Kke(),Dk=Gke(),pMe=Yke(),jte=Xke(),hMe=rMe(),Xh=iMe(),HFt=cMe(),{KeyObject:zFt,createSecretKey:WFt,createPrivateKey:JFt}=require("crypto"),mMe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];KFt&&mMe.splice(3,0,"PS256","PS384","PS512");var YFt={expiresIn:{isValid:function(t){return pMe(t)||Xh(t)&&t},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(t){return pMe(t)||Xh(t)&&t},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(t){return Xh(t)||Array.isArray(t)},message:'"audience" must be a string or array'},algorithm:{isValid:GFt.bind(null,mMe),message:'"algorithm" must be a valid string enum value'},header:{isValid:hMe,message:'"header" must be an object'},encoding:{isValid:Xh,message:'"encoding" must be a string'},issuer:{isValid:Xh,message:'"issuer" must be a string'},subject:{isValid:Xh,message:'"subject" must be a string'},jwtid:{isValid:Xh,message:'"jwtid" must be a string'},noTimestamp:{isValid:Dk,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Xh,message:'"keyid" must be a string'},mutatePayload:{isValid:Dk,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Dk,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Dk,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},QFt={iat:{isValid:jte,message:'"iat" should be a number of seconds'},exp:{isValid:jte,message:'"exp" should be a number of seconds'},nbf:{isValid:jte,message:'"nbf" should be a number of seconds'}};function yMe(t,e,r,n){if(!hMe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let s=t[i];if(!s){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!s.isValid(r[i]))throw new Error(s.message)})}function XFt(t){return yMe(YFt,!1,t,"options")}function ZFt(t){return yMe(QFt,!0,t,"payload")}var fMe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},eBt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];gMe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),s=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function o(c){if(n)return n(c);throw c}if(!e&&r.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof zFt))try{e=JFt(e)}catch{try{e=WFt(typeof e=="string"?Buffer.from(e):e)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&e.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(e.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof t>"u")return o(new Error("payload is required"));if(i){try{ZFt(t)}catch(c){return o(c)}r.mutatePayload||(t=Object.assign({},t))}else{let c=eBt.filter(function(l){return typeof r[l]<"u"});if(c.length>0)return o(new Error("invalid "+c.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{XFt(r)}catch(c){return o(c)}if(!r.allowInvalidAsymmetricKeyTypes)try{VFt(s.alg,e)}catch(c){return o(c)}let a=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=a),typeof r.notBefore<"u"){try{t.nbf=lMe(r.notBefore,a)}catch(c){return o(c)}if(typeof t.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=lMe(r.expiresIn,a)}catch(c){return o(c)}if(typeof t.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(fMe).forEach(function(c){let l=fMe[c];if(typeof r[c]<"u"){if(typeof t[l]<"u")return o(new Error('Bad "options.'+c+'" option. The payload already has an "'+l+'" property.'));t[l]=r[c]}});let u=r.encoding||"utf8";if(typeof n=="function")n=n&&HFt(n),dMe.createSign({header:s,privateKey:e,payload:t,encoding:u}).once("error",n).once("done",function(c){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&c.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));n(null,c)});else{let c=dMe.sign({header:s,payload:t,secret:e,encoding:u});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&c.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return c}}});var EMe=b((L9r,_Me)=>{_Me.exports={decode:cte(),verify:Bke(),sign:bMe(),JsonWebTokenError:w9(),NotBeforeError:lte(),TokenExpiredError:dte()}});var vMe,Zh,kk=ce(()=>{"use strict";vMe=St(EMe(),1);di();y9();Vr();Zh=class t{static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw Ae(is.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=As.nowSeconds();this.expirationTime=i+600;let o={alg:this.useSha256?Sc.PSS_256:Sc.RSA_256},a=this.useSha256?Sc.X5T_256:Sc.X5T;Object.assign(o,{[a]:du.base64EncodeUrl(this.thumbprint,cu.HEX)}),this.publicCertificate&&Object.assign(o,{[Sc.X5C]:this.publicCertificate});let u={[Sc.AUDIENCE]:this.jwtAudience,[Sc.EXPIRATION_TIME]:this.expirationTime,[Sc.ISSUER]:this.issuer,[Sc.SUBJECT]:this.issuer,[Sc.NOT_BEFORE]:i,[Sc.JWT_ID]:e.createNewGuid()};return this.jwt=vMe.default.sign(u,this.privateKey,{header:o}),this.jwt}isExpired(){return this.expirationTime<As.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,ye.EMPTY_STRING));return n}}});var k9,$te=ce(()=>{"use strict";di();Vr();k9=class extends zo{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=As.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new ss(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e,Ii.acquireTokenByUsernamePassword)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=wr.appendQueryString(e.tokenEndpoint,n),s=await this.createTokenRequestBody(r),o=this.createTokenRequestHeaders({credential:r.username,type:Go.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,s,o,a,r.correlationId)}async createTokenRequestBody(e){let r=new Map;ut.addClientId(r,this.config.authOptions.clientId),ut.addUsername(r,e.username),ut.addPassword(r,e.password),ut.addScopes(r,e.scopes),ut.addResponseType(r,pE.IDTOKEN_TOKEN),ut.addGrantType(r,bc.RESOURCE_OWNER_PASSWORD_GRANT),ut.addClientInfo(r),ut.addLibraryInfo(r,this.config.libraryInfo),ut.addApplicationTelemetry(r,this.config.telemetry.application),ut.addThrottling(r),this.serverTelemetryManager&&ut.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();ut.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&ut.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(ut.addClientAssertion(r,await Wo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ut.addClientAssertionType(r,i.assertionType)),(!bn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ut.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&ut.addCcsUpn(r,e.username),Uh.mapToQueryString(r)}}});function SMe(t,e,r,n){let i=l9.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return ut.addLibraryInfo(i,{sku:jl.MSAL_SKU,version:Gd,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==vc.OIDC&&ut.addApplicationTelemetry(i,t.telemetry.application),ut.addResponseType(i,pE.CODE),r.codeChallenge&&r.codeChallengeMethod&&ut.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),ut.addExtraQueryParameters(i,r.extraQueryParameters||{}),l9.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}var wMe=ce(()=>{"use strict";di();Vr();lg();});var WE,Mk=ce(()=>{"use strict";di();Wee();g9();ik();Vr();Xee();kk();lg();m9();$te();wMe();WE=class{constructor(e){this.config=DIe(e),this.cryptoProvider=new Yh,this.logger=new Nl(this.config.system.loggerOptions,p9,Gd),this.storage=new mg(this.logger,this.config.auth.clientId,this.cryptoProvider,xee(this.config.auth)),this.tokenCache=new _9(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||fE.QUERY,authenticationScheme:nr.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return SMe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:nr.BEARER},i=this.initializeServerTelemetryManager(Ii.acquireTokenByCode,n.correlationId);try{let s=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(s,n.correlationId,n.redirectUri,i),a=new u9(o);return this.logger.verbose("Auth code client created",n.correlationId),await a.acquireToken(n,Ii.acquireTokenByCode,r)}catch(s){throw s instanceof ir&&s.setCorrelationId(n.correlationId),i.cacheFailedRequest(s),s}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:nr.BEARER},n=this.initializeServerTelemetryManager(Ii.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),o=new cg(s);return this.logger.verbose("Refresh token client created",r.correlationId),await o.acquireToken(r,Ii.acquireTokenByRefreshToken)}catch(i){throw i instanceof ir&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(Ii.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),o=new c9(s);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,o,s)}catch(a){if(a instanceof yE&&a.errorCode===is.tokenRefreshRequired)return new cg(s).acquireTokenByRefreshToken(r,Ii.acquireTokenSilent);throw a}}catch(i){throw i instanceof ir&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,s]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...gc]});if(s===Tn.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let o=new cg(n);try{await o.acquireTokenByRefreshToken(e,Ii.acquireTokenSilent)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(Ii.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),o=new k9(s);return this.logger.verbose("Username password client created",r.correlationId),await o.acquireToken(r)}catch(i){throw i instanceof ir&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw Jh.createStateNotFoundError();if(e!==r)throw Ae(is.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:jl.MSAL_SKU,version:Gd,cpu:process.arch||ye.EMPTY_STRING,os:process.platform||ye.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=Zh.fromAssertion(await Wo(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:jl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===nr.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=nr.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!bn.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...gc],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new d9(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let s=xf.generateAuthority(e,i||this.config.auth.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return qD.createDiscoveredInstance(s,this.config.system.networkClient,this.storage,o,this.logger,r)}clearCache(){this.storage.clear()}}});var AMe=ce(()=>{"use strict";m9();Vr();});var Ute=ce(()=>{"use strict";Vr();});var CMe=ce(()=>{"use strict";Vr();Mk();m9();AMe();Ute();lg();});var JE,Pk=ce(()=>{"use strict";di();Vr();JE=class extends zo{constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===Tn.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,s,o){let a=r,u=r,c=Tn.NOT_APPLICABLE,l;a.serializableCache&&a.persistencePlugin&&(l=new Bl(a.serializableCache,!1),await a.persistencePlugin.beforeCacheAccess(l));let d=this.readAccessTokenFromCache(i,u.managedIdentityId?.id||a.authOptions.clientId,new Li(e.scopes||[]),s,e.correlationId);return a.serializableCache&&a.persistencePlugin&&l&&await a.persistencePlugin.afterCacheAccess(l),d?As.isTokenExpired(d.expiresOn,a.systemOptions?.tokenRenewalOffsetSeconds||mE)?(o?.setCacheOutcome(Tn.CACHED_ACCESS_TOKEN_EXPIRED),[null,Tn.CACHED_ACCESS_TOKEN_EXPIRED]):(d.refreshOn&&As.isTokenExpired(d.refreshOn.toString(),0)&&(c=Tn.PROACTIVELY_REFRESHED,o?.setCacheOutcome(Tn.PROACTIVELY_REFRESHED)),[await ss.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:d,refreshToken:null,appMetadata:null},!0,e),c]):(o?.setCacheOutcome(Tn.NO_CACHED_ACCESS_TOKEN),[null,Tn.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,s){let o={homeAccountId:ye.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Yr.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:Li.createSearchScopes(n.asArray())},a=i.getAccessTokensByFilter(o,s);if(a.length<1)return null;if(a.length>1)throw Ae(is.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i,s;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let u={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};s=As.nowSeconds();let c=await this.appTokenProvider(u);i={access_token:c.accessToken,expires_in:c.expiresInSeconds,refresh_in:c.refreshInSeconds,token_type:nr.BEARER}}else{let u=this.createTokenQueryParameters(e),c=wr.appendQueryString(r.tokenEndpoint,u),l=await this.createTokenRequestBody(e),d=this.createTokenRequestHeaders(),p={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),s=As.nowSeconds();let f=await this.executePostToTokenEndpoint(c,l,d,p,e.correlationId);i=f.body,i.status=f.status}let o=new ss(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i,n),await o.handleServerTokenResponse(i,this.authority,s,e,Ii.acquireTokenByClientCredential)}async createTokenRequestBody(e){let r=new Map;ut.addClientId(r,this.config.authOptions.clientId),ut.addScopes(r,e.scopes,!1),ut.addGrantType(r,bc.CLIENT_CREDENTIALS_GRANT),ut.addLibraryInfo(r,this.config.libraryInfo),ut.addApplicationTelemetry(r,this.config.telemetry.application),ut.addThrottling(r),this.serverTelemetryManager&&ut.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();ut.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&ut.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(ut.addClientAssertion(r,await Wo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ut.addClientAssertionType(r,i.assertionType)),(!bn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ut.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Uh.mapToQueryString(r)}}});var M9,Kte=ce(()=>{"use strict";di();y9();Vr();M9=class extends zo{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Li(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(As.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(Tn.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ae(is.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(Tn.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ae(is.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,s=null;if(n){i=ED.extractTokenClaims(n.secret,du.base64Decode);let o=i.oid||i.sub,a={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:ye.EMPTY_STRING,localAccountId:o||ye.EMPTY_STRING};s=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(a),e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),ss.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Yr.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||nr.BEARER,s={credentialType:n&&n.toLowerCase()!==nr.BEARER.toLowerCase()?Yr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Yr.ACCESS_TOKEN,clientId:e,target:Li.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},o=this.cacheManager.getAccessTokensByFilter(s,r.correlationId),a=o.length;if(a<1)return null;if(a>1)throw Ae(is.multipleMatchingTokens);return o[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),s=wr.appendQueryString(r.tokenEndpoint,i),o=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=As.nowSeconds(),l=await this.executePostToTokenEndpoint(s,o,a,u,e.correlationId),d=new ss(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(l.body),await d.handleServerTokenResponse(l.body,this.authority,c,e,Ii.acquireTokenByOBO,void 0,n)}async createTokenRequestBody(e){let r=new Map;ut.addClientId(r,this.config.authOptions.clientId),ut.addScopes(r,e.scopes),ut.addGrantType(r,bc.JWT_BEARER),ut.addClientInfo(r),ut.addLibraryInfo(r,this.config.libraryInfo),ut.addApplicationTelemetry(r,this.config.telemetry.application),ut.addThrottling(r),this.serverTelemetryManager&&ut.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();ut.addCorrelationId(r,n),ut.addRequestTokenUse(r,RD.ON_BEHALF_OF),ut.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&ut.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(ut.addClientAssertion(r,await Wo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ut.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ut.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Uh.mapToQueryString(r)}}});var P9,TMe=ce(()=>{"use strict";Mk();kk();Vr();di();Pk();Kte();P9=class extends WE{constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw Ae(is.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?Zh.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):Zh.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw Ae(is.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Wo(e.clientAssertion,this.config.auth.clientId),assertionType:jl.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(p=>!gc.includes(p))},s={...e,...i,clientAssertion:r},a=new wr(s.authority).getUrlComponents().PathSegments[0];if(Object.values(Ma).includes(a))throw Ae(is.missingTenantIdError);let u=process.env[vIe],c;s.azureRegion!=="DisableMsalForceRegion"&&(!s.azureRegion&&u?c=u:c=s.azureRegion);let l={azureRegion:c,environmentRegion:process.env[EIe]},d=this.initializeServerTelemetryManager(Ii.acquireTokenByClientCredential,s.correlationId,s.skipCache);try{let p=await this.createAuthority(s.authority,s.correlationId,l,e.azureCloudOptions),f=await this.buildOauthClientConfiguration(p,s.correlationId,"",d),h=new JE(f,this.appTokenProvider);return this.logger.verbose("Client credential client created",s.correlationId),await h.acquireToken(s)}catch(p){throw p instanceof ir&&p.setCorrelationId(s.correlationId),d.cacheFailedRequest(p),p}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),s=new M9(i);return this.logger.verbose("On behalf of client created",r.correlationId),await s.acquireToken(r)}catch(n){throw n instanceof ir&&n.setCorrelationId(r.correlationId),n}}}});function OMe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}var xMe=ce(()=>{"use strict";});var Nk,IMe=ce(()=>{"use strict";di();Vr();Nk=class{constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===os.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let s=0;for(;await this.retryPolicy.pauseForRetry(i.status,s,this.logger,i.headers[yn.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),s++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(os.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(os.POST,e,r)}}});var YE,Rf,bg=ce(()=>{"use strict";di();Vr();qE();xMe();IMe();pg();YE={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Rf=class{constructor(e,r,n,i,s){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=s}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(OMe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-As.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let s=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),s.queryParameters[If.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let f=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${f}`),s.queryParameters[If.XMS_CC]=f}let o=s.headers;o[yn.CONTENT_TYPE]=ye.URL_FORM_CONTENT_TYPE;let a={headers:o};Object.keys(s.bodyParameters).length&&(a.body=s.computeParametersBodyString());let u=this.disableInternalRetries?this.networkClient:new Nk(this.networkClient,s.retryPolicy,this.logger),c=As.nowSeconds(),l;try{s.httpMethod===os.POST?l=await u.sendPostRequestAsync(s.computeUri(),a):l=await u.sendGetRequestAsync(s.computeUri(),a)}catch(f){throw f instanceof ir?f:Ae(is.networkError)}let d=new ss(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),p=await this.getServerTokenResponseAsync(l,u,s,a);return d.validateTokenResponse(p,i),d.handleServerTokenResponse(p,n,c,e,Ii.acquireTokenWithManagedIdentity)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Ll.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?YE.MANAGED_IDENTITY_CLIENT_ID_2017:YE.MANAGED_IDENTITY_CLIENT_ID;case Ll.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?YE.MANAGED_IDENTITY_RESOURCE_ID_IMDS:YE.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Ll.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),YE.MANAGED_IDENTITY_OBJECT_ID;default:throw fg(h9)}}};Rf.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new wr(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),fg(dg[t])}}});var RMe=ce(()=>{"use strict";});var XAr,DMe=ce(()=>{"use strict";nk();RMe();XAr=[br.NOT_FOUND,br.REQUEST_TIMEOUT,br.TOO_MANY_REQUESTS,br.SERVER_ERROR,br.SERVICE_UNAVAILABLE,br.GATEWAY_TIMEOUT]});var _g=ce(()=>{"use strict";DMe();});var kMe=ce(()=>{"use strict";bg();Vr();_g();});var f8r,h8r,MMe=ce(()=>{"use strict";_g();bg();qE();Vr();pg();f8r={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},h8r={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"}});var PMe=ce(()=>{"use strict";_g();bg();Vr();qE();pg();});var NMe=ce(()=>{"use strict";});var T8r,O8r,FMe=ce(()=>{"use strict";nk();NMe();T8r=[br.NOT_FOUND,br.REQUEST_TIMEOUT,br.GONE,br.TOO_MANY_REQUESTS],O8r=10*1e3});var rBt,P8r,BMe=ce(()=>{"use strict";_g();bg();Vr();FMe();rBt="/metadata/identity/oauth2/token",P8r=`http://169.254.169.254${rBt}`});var qMe=ce(()=>{"use strict";_g();bg();Vr();});var K8r,LMe=ce(()=>{"use strict";bg();Vr();_g();K8r=`Only client id is supported for user-assigned managed identity in ${ql.MACHINE_LEARNING}.`});var jMe=ce(()=>{"use strict";kMe();MMe();PMe();BMe();qMe();qE();Vr();LMe();pg();});var g5r,$Me=ce(()=>{"use strict";Wee();lg();g9();Pk();jMe();ik();Vr();tk();g5r=[ql.SERVICE_FABRIC]});var UMe=ce(()=>{"use strict";});var KMe=ce(()=>{"use strict";_Ie();CMe();TMe();Mk();Pk();Ute();Kte();$Me();$te();kk();Xee();UMe();Vr();g9();lg();});var sr={};Ha(sr,{__addDisposableResource:()=>hPe,__assign:()=>Fk,__asyncDelegator:()=>oPe,__asyncGenerator:()=>sPe,__asyncValues:()=>aPe,__await:()=>QE,__awaiter:()=>ZMe,__classPrivateFieldGet:()=>dPe,__classPrivateFieldIn:()=>fPe,__classPrivateFieldSet:()=>pPe,__createBinding:()=>qk,__decorate:()=>HMe,__disposeResources:()=>mPe,__esDecorate:()=>WMe,__exportStar:()=>tPe,__extends:()=>VMe,__generator:()=>ePe,__importDefault:()=>lPe,__importStar:()=>cPe,__makeTemplateObject:()=>uPe,__metadata:()=>XMe,__param:()=>zMe,__propKey:()=>YMe,__read:()=>Hte,__rest:()=>GMe,__rewriteRelativeImportExtension:()=>yPe,__runInitializers:()=>JMe,__setFunctionName:()=>QMe,__spread:()=>rPe,__spreadArray:()=>iPe,__spreadArrays:()=>nPe,__values:()=>Bk,default:()=>sBt});function VMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vte(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function GMe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function HMe(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function zMe(t,e){return function(r,n){e(r,n,t)}}function WMe(t,e,r,n,i,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,l=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,p=!1,f=r.length-1;f>=0;f--){var h={};for(var y in n)h[y]=y==="access"?{}:n[y];for(var y in n.access)h.access[y]=n.access[y];h.addInitializer=function(v){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var E=(0,r[f])(a==="accessor"?{get:l.get,set:l.set}:l[u],h);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(d=o(E.get))&&(l.get=d),(d=o(E.set))&&(l.set=d),(d=o(E.init))&&i.unshift(d)}else(d=o(E))&&(a==="field"?i.unshift(d):l[u]=d)}c&&Object.defineProperty(c,n.name,l),p=!0}function JMe(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function YMe(t){return typeof t=="symbol"?t:"".concat(t)}function QMe(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function XMe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ZMe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function ePe(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function tPe(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qk(e,t,r)}function Bk(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hte(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function rPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hte(arguments[e]));return t}function nPe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function iPe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function QE(t){return this instanceof QE?(this.v=t,this):new QE(t)}function sPe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(y){return new Promise(function(E,v){s.push([f,y,E,v])>1||u(f,y)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(y){p(s[0][3],y)}}function c(f){f.value instanceof QE?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function oPe(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:QE(t[i](o)),done:!1}:s?s(o):o}:s}}function aPe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Bk=="function"?Bk(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function uPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function cPe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Gte(t),n=0;n<r.length;n++)r[n]!=="default"&&qk(e,t,r[n]);return nBt(e,t),e}function lPe(t){return t&&t.__esModule?t:{default:t}}function dPe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function pPe(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function fPe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function hPe(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function mPe(t){function e(s){t.error=t.hasError?new iBt(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function yPe(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}var Vte,Fk,qk,nBt,Gte,iBt,sBt,or=ce(()=>{Vte=function(t,e){return Vte=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Vte(t,e)};Fk=function(){return Fk=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fk.apply(this,arguments)};qk=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});nBt=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Gte=function(t){return Gte=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Gte(t)};iBt=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};sBt={__extends:VMe,__assign:Fk,__rest:GMe,__decorate:HMe,__param:zMe,__esDecorate:WMe,__runInitializers:JMe,__propKey:YMe,__setFunctionName:QMe,__metadata:XMe,__awaiter:ZMe,__generator:ePe,__createBinding:qk,__exportStar:tPe,__values:Bk,__read:Hte,__spread:rPe,__spreadArrays:nPe,__spreadArray:iPe,__await:QE,__asyncGenerator:sPe,__asyncDelegator:oPe,__asyncValues:aPe,__makeTemplateObject:uPe,__importStar:cPe,__importDefault:lPe,__classPrivateFieldGet:dPe,__classPrivateFieldSet:pPe,__classPrivateFieldIn:fPe,__addDisposableResource:hPe,__disposeResources:mPe,__rewriteRelativeImportExtension:yPe}});var B9=b(Lk=>{"use strict";Object.defineProperty(Lk,"__esModule",{value:!0});Lk.RequestMethod=void 0;var gPe;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(gPe||(Lk.RequestMethod=gPe={}))});var bPe=b(jk=>{"use strict";Object.defineProperty(jk,"__esModule",{value:!0});jk.BatchRequestContent=void 0;var XE=(or(),Wt(sr)),zte=B9(),oBt=(function(){function t(e){if(this.requests=new Map,typeof e<"u"){var r=t.requestLimit;if(e.length>r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}for(var i=0,s=e;i<s.length;i++){var o=s[i];this.addRequest(o)}}}return t.validateDependencies=function(e){var r=function(o){for(var a=o.entries(),u=a.next();!u.done;){var c=u.value[1];if(c.dependsOn!==void 0&&c.dependsOn.length>0)return!1;u=a.next()}return!0},n=function(o){var a=o.entries(),u=a.next(),c=u.value[1];if(c.dependsOn!==void 0&&c.dependsOn.length>0)return!1;var l=u;for(u=a.next();!u.done;){var d=u.value[1];if(d.dependsOn===void 0||d.dependsOn.length!==1||d.dependsOn[0]!==l.value[1].id)return!1;l=u,u=a.next()}return!0},i=function(o){var a=o.entries(),u=a.next(),c=u.value[1],l;if(c.dependsOn===void 0||c.dependsOn.length===0)l=c.id;else if(c.dependsOn.length===1){var d=c.dependsOn[0];if(d!==c.id&&o.has(d))l=d;else return!1}else return!1;for(u=a.next();!u.done;){var p=u.value[1];if((p.dependsOn===void 0||p.dependsOn.length===0)&&l!==p.id||p.dependsOn!==void 0&&p.dependsOn.length!==0&&(p.dependsOn.length===1&&(p.id===l||p.dependsOn[0]!==l)||p.dependsOn.length>1))return!1;u=a.next()}return!0};if(e.size===0){var s=new Error("Empty requests map, Please provide at least one request.");throw s.name="Empty Requests Error",s}return r(e)||n(e)||i(e)},t.getRequestData=function(e){return XE.__awaiter(this,void 0,void 0,function(){var r,n,i,s;return XE.__generator(this,function(o){switch(o.label){case 0:return r={url:""},n=new RegExp("^https?://"),r.url=n.test(e.url)?"/"+e.url.split(/.*?\/\/.*?\//)[1]:e.url,r.method=e.method,i={},e.headers.forEach(function(a,u){i[u]=a}),Object.keys(i).length&&(r.headers=i),e.method===zte.RequestMethod.PATCH||e.method===zte.RequestMethod.POST||e.method===zte.RequestMethod.PUT?(s=r,[4,t.getRequestBody(e)]):[3,2];case 1:s.body=o.sent(),o.label=2;case 2:return[2,r]}})})},t.getRequestBody=function(e){return XE.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a,u,c;return XE.__generator(this,function(l){switch(l.label){case 0:r=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),i=e.clone(),[4,i.json()];case 2:return n=l.sent(),r=!0,[3,4];case 3:return s=l.sent(),[3,4];case 4:if(r)return[3,12];l.label=5;case 5:return l.trys.push([5,11,,12]),typeof Blob<"u"?[4,e.blob()]:[3,8];case 6:return o=l.sent(),a=new FileReader,[4,new Promise(function(d){a.addEventListener("load",function(){var p=a.result,f=new RegExp("^s*data:(.+?/.+?(;.+?=.+?)*)?(;base64)?,(.*)s*$"),h=f.exec(p);d(h[4])},!1),a.readAsDataURL(o)})];case 7:return n=l.sent(),[3,10];case 8:return typeof Buffer<"u"?[4,e.buffer()]:[3,10];case 9:u=l.sent(),n=u.toString("base64"),l.label=10;case 10:return r=!0,[3,12];case 11:return c=l.sent(),[3,12];case 12:return[2,n]}})})},t.prototype.addRequest=function(e){var r=t.requestLimit;if(e.id===""){var n=new Error("Id for a request is empty, Please provide an unique id");throw n.name="Empty Id For Request",n}if(this.requests.size===r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}if(this.requests.has(e.id)){var n=new Error("Adding request with duplicate id ".concat(e.id,", Make the id of the requests unique"));throw n.name="Duplicate RequestId Error",n}return this.requests.set(e.id,e),e.id},t.prototype.removeRequest=function(e){for(var r=this.requests.delete(e),n=this.requests.entries(),i=n.next();!i.done;){var s=i.value[1].dependsOn;if(typeof s<"u"){var o=s.indexOf(e);o!==-1&&s.splice(o,1),s.length===0&&delete i.value[1].dependsOn}i=n.next()}return r},t.prototype.getContent=function(){return XE.__awaiter(this,void 0,void 0,function(){var e,r,n,i,a,a,s,o,a;return XE.__generator(this,function(u){switch(u.label){case 0:if(e=[],r={requests:e},n=this.requests.entries(),i=n.next(),i.done)throw a=new Error("No requests added yet, Please add at least one request."),a.name="Empty Payload",a;if(!t.validateDependencies(this.requests))throw a=new Error(`Invalid dependency found, Dependency should be:
1. Parallel - no individual request states a dependency in the dependsOn property.
2. Serial - all individual requests depend on the previous individual request.
3. Same - all individual requests that state a dependency in the dependsOn property, state the same dependency.`),a.name="Invalid Dependency",a;u.label=1;case 1:return i.done?[3,3]:(s=i.value[1],[4,t.getRequestData(s.request)]);case 2:if(o=u.sent(),o.body!==void 0&&(o.headers===void 0||o.headers["content-type"]===void 0))throw a=new Error("Content-type header is not mentioned for request #".concat(s.id,", For request having body, Content-type header should be mentioned")),a.name="Invalid Content-type header",a;return o.id=s.id,s.dependsOn!==void 0&&s.dependsOn.length>0&&(o.dependsOn=s.dependsOn),e.push(o),i=n.next(),[3,1];case 3:return r.requests=e,[2,r]}})})},t.prototype.addDependency=function(e,r){if(!this.requests.has(e)){var n=new Error("Dependent ".concat(e," does not exists, Please check the id"));throw n.name="Invalid Dependent",n}if(typeof r<"u"&&!this.requests.has(r)){var n=new Error("Dependency ".concat(r," does not exists, Please check the id"));throw n.name="Invalid Dependency",n}if(typeof r<"u"){var i=this.requests.get(e);if(i.dependsOn===void 0&&(i.dependsOn=[]),i.dependsOn.indexOf(r)!==-1){var n=new Error("Dependency ".concat(r," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}i.dependsOn.push(r)}else{for(var s=this.requests.entries(),o=void 0,a=s.next();!a.done&&a.value[1].id!==e;)o=a,a=s.next();if(typeof o<"u"){var u=o.value[0];if(a.value[1].dependsOn===void 0&&(a.value[1].dependsOn=[]),a.value[1].dependsOn.indexOf(u)!==-1){var n=new Error("Dependency ".concat(u," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}a.value[1].dependsOn.push(u)}else{var n=new Error("Can't add dependency ".concat(r,", There is only a dependent request in the batch"));throw n.name="Invalid Dependency Addition",n}}},t.prototype.removeDependency=function(e,r){var n=this.requests.get(e);if(typeof n>"u"||n.dependsOn===void 0||n.dependsOn.length===0)return!1;if(typeof r<"u"){var i=n.dependsOn.indexOf(r);return i===-1?!1:(n.dependsOn.splice(i,1),!0)}else return delete n.dependsOn,!0},t.requestLimit=20,t})();jk.BatchRequestContent=oBt});var _Pe=b($k=>{"use strict";Object.defineProperty($k,"__esModule",{value:!0});$k.BatchResponseContent=void 0;var aBt=(or(),Wt(sr)),uBt=(function(){function t(e){this.responses=new Map,this.update(e)}return t.prototype.createResponseObject=function(e){var r=e.body,n={};if(n.status=e.status,e.statusText!==void 0&&(n.statusText=e.statusText),n.headers=e.headers,n.headers!==void 0&&n.headers["Content-Type"]!==void 0&&n.headers["Content-Type"].split(";")[0]==="application/json"){var i=JSON.stringify(r);return new Response(i,n)}return new Response(r,n)},t.prototype.update=function(e){this.nextLink=e["@odata.nextLink"];for(var r=e.responses,n=0,i=r.length;n<i;n++)this.responses.set(r[n].id,this.createResponseObject(r[n]))},t.prototype.getResponseById=function(e){return this.responses.get(e)},t.prototype.getResponses=function(){return this.responses},t.prototype.getResponsesIterator=function(){var e,r;return aBt.__generator(this,function(n){switch(n.label){case 0:e=this.responses.entries(),r=e.next(),n.label=1;case 1:return r.done?[3,3]:[4,r.value];case 2:return n.sent(),r=e.next(),[3,1];case 3:return[2]}})},t})();$k.BatchResponseContent=uBt});var Wte=b(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.GRAPH_URLS=em.GRAPH_BASE_URL=em.GRAPH_API_VERSION=void 0;em.GRAPH_API_VERSION="v1.0";em.GRAPH_BASE_URL="https://graph.microsoft.com/";em.GRAPH_URLS=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"])});var Df=b(Uk=>{"use strict";Object.defineProperty(Uk,"__esModule",{value:!0});Uk.GraphClientError=void 0;var cBt=(or(),Wt(sr)),lBt=(function(t){cBt.__extends(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e.setGraphClientError=function(r){var n;return r instanceof Error?n=r:(n=new e,n.customError=r),n},e})(Error);Uk.GraphClientError=lBt});var Kk=b(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.isCustomHost=Tc.isGraphURL=Tc.serializeContent=Tc.urlJoin=Tc.oDataQueryNames=void 0;var dBt=Wte(),pBt=Df();Tc.oDataQueryNames=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"];var fBt=function(t){var e=function(s){return s.replace(/\/+$/,"")},r=function(s){return s.replace(/^\/+/,"")},n=function(s,o){return[e(s),r(o)].join("/")},i=Array.prototype.slice.call(t);return i.reduce(n)};Tc.urlJoin=fBt;var hBt=function(t){var e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t};Tc.serializeContent=hBt;var mBt=function(t){return EPe(t)};Tc.isGraphURL=mBt;var yBt=function(t,e){return e.forEach(function(r){return gBt(r)}),EPe(t,e)};Tc.isCustomHost=yBt;var EPe=function(t,e){if(e===void 0&&(e=dBt.GRAPH_URLS),t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");var r=t.indexOf(":"),n=t.indexOf("/"),i="";if(n!==-1)return r!==-1&&r<n?(i=t.substring(0,r),e.has(i)):(i=t.substring(0,n),e.has(i))}return!1},gBt=function(t){if(t.indexOf("/")!==-1)throw new pBt.GraphClientError("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")}});var tm=b(Vk=>{"use strict";Object.defineProperty(Vk,"__esModule",{value:!0});Vk.MiddlewareControl=void 0;var bBt=(function(){function t(e){e===void 0&&(e=[]),this.middlewareOptions=new Map;for(var r=0,n=e;r<n.length;r++){var i=n[r],s=i.constructor;this.middlewareOptions.set(s,i)}}return t.prototype.getMiddlewareOptions=function(e){return this.middlewareOptions.get(e)},t.prototype.setMiddlewareOptions=function(e,r){this.middlewareOptions.set(e,r)},t})();Vk.MiddlewareControl=bBt});var ZE=b(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.cloneRequestWithNewUrl=Oc.appendRequestHeader=Oc.setRequestHeader=Oc.getRequestHeader=Oc.generateUUID=void 0;var vPe=(or(),Wt(sr)),_Bt=function(){for(var t="",e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t};Oc.generateUUID=_Bt;var EBt=function(t,e,r){var n=null;if(typeof Request<"u"&&t instanceof Request)n=t.headers.get(r);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)n=e.headers.get(r);else if(e.headers instanceof Array){for(var i=e.headers,s=0,o=i.length;s<o;s++)if(i[s][0]===r){n=i[s][1];break}}else e.headers[r]!==void 0&&(n=e.headers[r]);return n};Oc.getRequestHeader=EBt;var vBt=function(t,e,r,n){var i,s;if(typeof Request<"u"&&t instanceof Request)t.headers.set(r,n);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers((i={},i[r]=n,i));else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(r,n);else if(e.headers instanceof Array){for(var o=0,a=e.headers.length;o<a;o++){var u=e.headers[o];if(u[0]===r){u[1]=n;break}}o===a&&e.headers.push([r,n])}else Object.assign(e.headers,(s={},s[r]=n,s))};Oc.setRequestHeader=vBt;var SBt=function(t,e,r,n){var i,s;typeof Request<"u"&&t instanceof Request?t.headers.append(r,n):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers((i={},i[r]=n,i)):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(r,n):e.headers instanceof Array?e.headers.push([r,n]):e.headers===void 0?e.headers=(s={},s[r]=n,s):e.headers[r]===void 0?e.headers[r]=n:e.headers[r]+=", ".concat(n))};Oc.appendRequestHeader=SBt;var wBt=function(t,e){return vPe.__awaiter(void 0,void 0,void 0,function(){var r,n,i,s,o,a,u,c,l,d,p,f,h;return vPe.__generator(this,function(y){switch(y.label){case 0:return e.headers.get("Content-Type")?[4,e.blob()]:[3,2];case 1:return n=y.sent(),[3,4];case 2:return[4,Promise.resolve(void 0)];case 3:n=y.sent(),y.label=4;case 4:return r=n,i=e.method,s=e.headers,o=e.referrer,a=e.referrerPolicy,u=e.mode,c=e.credentials,l=e.cache,d=e.redirect,p=e.integrity,f=e.keepalive,h=e.signal,[2,new Request(t,{method:i,headers:s,body:r,referrer:o,referrerPolicy:a,mode:u,credentials:c,cache:l,redirect:d,integrity:p,keepalive:f,signal:h})]}})})};Oc.cloneRequestWithNewUrl=wBt});var Jte=b(Gk=>{"use strict";Object.defineProperty(Gk,"__esModule",{value:!0});Gk.AuthenticationHandlerOptions=void 0;var ABt=(function(){function t(e,r){this.authenticationProvider=e,this.authenticationProviderOptions=r}return t})();Gk.AuthenticationHandlerOptions=ABt});var t6=b(e6=>{"use strict";Object.defineProperty(e6,"__esModule",{value:!0});e6.TelemetryHandlerOptions=e6.FeatureUsageFlag=void 0;var SPe=tm(),Yte;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(Yte||(e6.FeatureUsageFlag=Yte={}));var CBt=(function(){function t(){this.featureUsage=Yte.NONE}return t.updateFeatureUsageFlag=function(e,r){var n;e.middlewareControl instanceof SPe.MiddlewareControl?n=e.middlewareControl.getMiddlewareOptions(t):e.middlewareControl=new SPe.MiddlewareControl,typeof n>"u"&&(n=new t,e.middlewareControl.setMiddlewareOptions(t,n)),n.setFeatureUsage(r)},t.prototype.setFeatureUsage=function(e){this.featureUsage=this.featureUsage|e},t.prototype.getFeatureUsage=function(){return this.featureUsage.toString(16)},t})();e6.TelemetryHandlerOptions=CBt});var zk=b(Hk=>{"use strict";Object.defineProperty(Hk,"__esModule",{value:!0});Hk.AuthenticationHandler=void 0;var wPe=(or(),Wt(sr)),APe=Kk(),TBt=tm(),OBt=ZE(),xBt=Jte(),CPe=t6(),IBt=(function(){function t(e){this.authenticationProvider=e}return t.prototype.execute=function(e){return wPe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a;return wPe.__generator(this,function(u){switch(u.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,APe.isGraphURL)(r)||e.customHosts&&(0,APe.isCustomHost)(r,e.customHosts)?(n=void 0,e.middlewareControl instanceof TBt.MiddlewareControl&&(n=e.middlewareControl.getMiddlewareOptions(xBt.AuthenticationHandlerOptions)),i=void 0,s=void 0,n&&(i=n.authenticationProvider,s=n.authenticationProviderOptions),i||(i=this.authenticationProvider),[4,i.getAccessToken(s)]):[3,2];case 1:return o=u.sent(),a="Bearer ".concat(o),(0,OBt.appendRequestHeader)(e.request,e.options,t.AUTHORIZATION_HEADER,a),CPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,CPe.FeatureUsageFlag.AUTHENTICATION_HANDLER_ENABLED),[3,3];case 2:e.options.headers&&delete e.options.headers[t.AUTHORIZATION_HEADER],u.label=3;case 3:return[4,this.nextMiddleware.execute(e)];case 4:return[2,u.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.AUTHORIZATION_HEADER="Authorization",t})();Hk.AuthenticationHandler=IBt});var Jk=b(Wk=>{"use strict";Object.defineProperty(Wk,"__esModule",{value:!0});Wk.HTTPMessageHandler=void 0;var TPe=(or(),Wt(sr)),RBt=(function(){function t(){}return t.prototype.execute=function(e){return TPe.__awaiter(this,void 0,void 0,function(){var r;return TPe.__generator(this,function(n){switch(n.label){case 0:return r=e,[4,fetch(e.request,e.options)];case 1:return r.response=n.sent(),[2]}})})},t})();Wk.HTTPMessageHandler=RBt});var q9=b(Yk=>{"use strict";Object.defineProperty(Yk,"__esModule",{value:!0});Yk.RetryHandlerOptions=void 0;var DBt=(function(){function t(e,r,n){if(e===void 0&&(e=t.DEFAULT_DELAY),r===void 0&&(r=t.DEFAULT_MAX_RETRIES),n===void 0&&(n=t.defaultShouldRetry),e>t.MAX_DELAY&&r>t.MAX_MAX_RETRIES){var i=new Error("Delay and MaxRetries should not be more than ".concat(t.MAX_DELAY," and ").concat(t.MAX_MAX_RETRIES));throw i.name="MaxLimitExceeded",i}else if(e>t.MAX_DELAY){var i=new Error("Delay should not be more than ".concat(t.MAX_DELAY));throw i.name="MaxLimitExceeded",i}else if(r>t.MAX_MAX_RETRIES){var i=new Error("MaxRetries should not be more than ".concat(t.MAX_MAX_RETRIES));throw i.name="MaxLimitExceeded",i}else if(e<0&&r<0){var i=new Error("Delay and MaxRetries should not be negative");throw i.name="MinExpectationNotMet",i}else if(e<0){var i=new Error("Delay should not be negative");throw i.name="MinExpectationNotMet",i}else if(r<0){var i=new Error("MaxRetries should not be negative");throw i.name="MinExpectationNotMet",i}this.delay=Math.min(e,t.MAX_DELAY),this.maxRetries=Math.min(r,t.MAX_MAX_RETRIES),this.shouldRetry=n}return t.prototype.getMaxDelay=function(){return t.MAX_DELAY},t.DEFAULT_DELAY=3,t.DEFAULT_MAX_RETRIES=3,t.MAX_DELAY=180,t.MAX_MAX_RETRIES=10,t.defaultShouldRetry=function(){return!0},t})();Yk.RetryHandlerOptions=DBt});var Xk=b(Qk=>{"use strict";Object.defineProperty(Qk,"__esModule",{value:!0});Qk.RetryHandler=void 0;var r6=(or(),Wt(sr)),Qte=B9(),kBt=tm(),OPe=ZE(),xPe=q9(),IPe=t6(),MBt=(function(){function t(e){e===void 0&&(e=new xPe.RetryHandlerOptions),this.options=e}return t.prototype.isRetry=function(e){return t.RETRY_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.isBuffered=function(e,r){var n=typeof e=="string"?r.method:e.method,i=n===Qte.RequestMethod.PUT||n===Qte.RequestMethod.PATCH||n===Qte.RequestMethod.POST;if(i){var s=(0,OPe.getRequestHeader)(e,r,"Content-Type")==="application/octet-stream";if(s)return!1}return!0},t.prototype.getDelay=function(e,r,n){var i=function(){return Number(Math.random().toFixed(3))},s=e.headers!==void 0?e.headers.get(t.RETRY_AFTER_HEADER):null,o;return s!==null?Number.isNaN(Number(s))?o=Math.round((new Date(s).getTime()-Date.now())/1e3):o=Number(s):o=r>=2?this.getExponentialBackOffTime(r)+n+i():n+i(),Math.min(o,this.options.getMaxDelay()+i())},t.prototype.getExponentialBackOffTime=function(e){return Math.round(1/2*(Math.pow(2,e)-1))},t.prototype.sleep=function(e){return r6.__awaiter(this,void 0,void 0,function(){var r;return r6.__generator(this,function(n){return r=e*1e3,[2,new Promise(function(i){return setTimeout(i,r)})]})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof kBt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof r>"u"&&(r=Object.assign(new xPe.RetryHandlerOptions,this.options)),r},t.prototype.executeWithRetry=function(e,r,n){return r6.__awaiter(this,void 0,void 0,function(){var i;return r6.__generator(this,function(s){switch(s.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return s.sent(),r<n.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&n.shouldRetry(n.delay,r,e.request,e.options,e.response)?(++r,(0,OPe.setRequestHeader)(e.request,e.options,t.RETRY_ATTEMPT_HEADER,r.toString()),i=this.getDelay(e.response,r,n.delay),[4,this.sleep(i)]):[3,4];case 2:return s.sent(),[4,this.executeWithRetry(e,r,n)];case 3:return[2,s.sent()];case 4:return[2]}})})},t.prototype.execute=function(e){return r6.__awaiter(this,void 0,void 0,function(){var r,n;return r6.__generator(this,function(i){switch(i.label){case 0:return r=0,n=this.getOptions(e),IPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,IPe.FeatureUsageFlag.RETRY_HANDLER_ENABLED),[4,this.executeWithRetry(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.RETRY_STATUS_CODES=[429,503,504],t.RETRY_ATTEMPT_HEADER="Retry-Attempt",t.RETRY_AFTER_HEADER="Retry-After",t})();Qk.RetryHandler=MBt});var L9=b(Zk=>{"use strict";Object.defineProperty(Zk,"__esModule",{value:!0});Zk.RedirectHandlerOptions=void 0;var PBt=(function(){function t(e,r){if(e===void 0&&(e=t.DEFAULT_MAX_REDIRECTS),r===void 0&&(r=t.defaultShouldRedirect),e>t.MAX_MAX_REDIRECTS){var n=new Error("MaxRedirects should not be more than ".concat(t.MAX_MAX_REDIRECTS));throw n.name="MaxLimitExceeded",n}if(e<0){var n=new Error("MaxRedirects should not be negative");throw n.name="MinExpectationNotMet",n}this.maxRedirects=e,this.shouldRedirect=r}return t.DEFAULT_MAX_REDIRECTS=5,t.MAX_MAX_REDIRECTS=20,t.defaultShouldRedirect=function(){return!0},t})();Zk.RedirectHandlerOptions=PBt});var tM=b(eM=>{"use strict";Object.defineProperty(eM,"__esModule",{value:!0});eM.RedirectHandler=void 0;var n6=(or(),Wt(sr)),NBt=B9(),FBt=tm(),BBt=ZE(),Xte=L9(),RPe=t6(),qBt=(function(){function t(e){e===void 0&&(e=new Xte.RedirectHandlerOptions),this.options=e}return t.prototype.isRedirect=function(e){return t.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.hasLocationHeader=function(e){return e.headers.has(t.LOCATION_HEADER)},t.prototype.getLocationHeader=function(e){return e.headers.get(t.LOCATION_HEADER)},t.prototype.isRelativeURL=function(e){return e.indexOf("://")===-1},t.prototype.shouldDropAuthorizationHeader=function(e,r){var n=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,i=n.exec(e),s,o;i!==null&&(s=i[0]);var a=n.exec(r);return a!==null&&(o=a[0]),typeof s<"u"&&typeof o<"u"&&s!==o},t.prototype.updateRequestUrl=function(e,r){return n6.__awaiter(this,void 0,void 0,function(){var n,i;return n6.__generator(this,function(s){switch(s.label){case 0:return n=r,typeof r.request!="string"?[3,1]:(i=e,[3,3]);case 1:return[4,(0,BBt.cloneRequestWithNewUrl)(e,r.request)];case 2:i=s.sent(),s.label=3;case 3:return n.request=i,[2]}})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof FBt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(Xte.RedirectHandlerOptions)),typeof r>"u"&&(r=Object.assign(new Xte.RedirectHandlerOptions,this.options)),r},t.prototype.executeWithRedirect=function(e,r,n){return n6.__awaiter(this,void 0,void 0,function(){var i,s;return n6.__generator(this,function(o){switch(o.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return o.sent(),i=e.response,r<n.maxRedirects&&this.isRedirect(i)&&this.hasLocationHeader(i)&&n.shouldRedirect(i)?(++r,i.status!==t.STATUS_CODE_SEE_OTHER?[3,2]:(e.options.method=NBt.RequestMethod.GET,delete e.options.body,[3,4])):[3,6];case 2:return s=this.getLocationHeader(i),!this.isRelativeURL(s)&&this.shouldDropAuthorizationHeader(i.url,s)&&delete e.options.headers[t.AUTHORIZATION_HEADER],[4,this.updateRequestUrl(s,e)];case 3:o.sent(),o.label=4;case 4:return[4,this.executeWithRedirect(e,r,n)];case 5:return o.sent(),[3,7];case 6:return[2];case 7:return[2]}})})},t.prototype.execute=function(e){return n6.__awaiter(this,void 0,void 0,function(){var r,n;return n6.__generator(this,function(i){switch(i.label){case 0:return r=0,n=this.getOptions(e),e.options.redirect=t.MANUAL_REDIRECT,RPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,RPe.FeatureUsageFlag.REDIRECT_HANDLER_ENABLED),[4,this.executeWithRedirect(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.REDIRECT_STATUS_CODES=[301,302,303,307,308],t.STATUS_CODE_SEE_OTHER=303,t.LOCATION_HEADER="Location",t.AUTHORIZATION_HEADER="Authorization",t.MANUAL_REDIRECT="manual",t})();eM.RedirectHandler=qBt});var DPe=b(rM=>{"use strict";Object.defineProperty(rM,"__esModule",{value:!0});rM.PACKAGE_VERSION=void 0;rM.PACKAGE_VERSION="3.0.7"});var sM=b(iM=>{"use strict";Object.defineProperty(iM,"__esModule",{value:!0});iM.TelemetryHandler=void 0;var kPe=(or(),Wt(sr)),MPe=Kk(),LBt=DPe(),jBt=tm(),nM=ZE(),$Bt=t6(),UBt=(function(){function t(){}return t.prototype.execute=function(e){return kPe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o;return kPe.__generator(this,function(a){switch(a.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,MPe.isGraphURL)(r)||e.customHosts&&(0,MPe.isCustomHost)(r,e.customHosts)?(n=(0,nM.getRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER),n||(n=(0,nM.generateUUID)(),(0,nM.setRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER,n)),i="".concat(t.PRODUCT_NAME,"/").concat(LBt.PACKAGE_VERSION),s=void 0,e.middlewareControl instanceof jBt.MiddlewareControl&&(s=e.middlewareControl.getMiddlewareOptions($Bt.TelemetryHandlerOptions)),s&&(o=s.getFeatureUsage(),i+=" (".concat(t.FEATURE_USAGE_STRING,"=").concat(o,")")),(0,nM.appendRequestHeader)(e.request,e.options,t.SDK_VERSION_HEADER,i)):(delete e.options.headers[t.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[t.SDK_VERSION_HEADER]),[4,this.nextMiddleware.execute(e)];case 1:return[2,a.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.CLIENT_REQUEST_ID_HEADER="client-request-id",t.SDK_VERSION_HEADER="SdkVersion",t.PRODUCT_NAME="graph-js",t.FEATURE_USAGE_STRING="featureUsage",t})();iM.TelemetryHandler=UBt});var PPe=b(oM=>{"use strict";Object.defineProperty(oM,"__esModule",{value:!0});oM.MiddlewareFactory=void 0;var KBt=zk(),VBt=Jk(),GBt=L9(),HBt=q9(),zBt=tM(),WBt=Xk(),JBt=sM(),YBt=function(){return typeof process=="object"&&typeof require=="function"},QBt=(function(){function t(){}return t.getDefaultMiddlewareChain=function(e){var r=[],n=new KBt.AuthenticationHandler(e),i=new WBt.RetryHandler(new HBt.RetryHandlerOptions),s=new JBt.TelemetryHandler,o=new VBt.HTTPMessageHandler;if(r.push(n),r.push(i),YBt()){var a=new zBt.RedirectHandler(new GBt.RedirectHandlerOptions);r.push(a)}return r.push(s),r.push(o),r},t})();oM.MiddlewareFactory=QBt});var uM=b(aM=>{"use strict";Object.defineProperty(aM,"__esModule",{value:!0});aM.ChaosStrategy=void 0;var NPe;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(NPe||(aM.ChaosStrategy=NPe={}))});var Zte=b(cM=>{"use strict";Object.defineProperty(cM,"__esModule",{value:!0});cM.ChaosHandlerOptions=void 0;var XBt=uM(),ZBt=(function(){function t(e,r,n,i,s,o){if(e===void 0&&(e=XBt.ChaosStrategy.RANDOM),r===void 0&&(r="Some error Happened"),this.chaosStrategy=e,this.statusCode=n,this.statusMessage=r,this.chaosPercentage=i!==void 0?i:10,this.responseBody=s,this.headers=o,this.chaosPercentage>100)throw new Error("Error Pecentage can not be more than 100")}return t})();cM.ChaosHandlerOptions=ZBt});var FPe=b(i6=>{"use strict";Object.defineProperty(i6,"__esModule",{value:!0});i6.httpStatusCode=i6.methodStatusCode=void 0;i6.methodStatusCode={GET:[429,500,502,503,504],POST:[429,500,502,503,504,507],PUT:[429,500,502,503,504,507],PATCH:[429,500,502,503,504],DELETE:[429,500,502,503,504,507]};i6.httpStatusCode={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"}});var LPe=b(dM=>{"use strict";Object.defineProperty(dM,"__esModule",{value:!0});dM.ChaosHandler=void 0;var lM=(or(),Wt(sr)),eqt=tm(),tqt=ZE(),BPe=FPe(),ere=Zte(),qPe=uM(),rqt=(function(){function t(e,r){e===void 0&&(e=new ere.ChaosHandlerOptions),this.options=e,this.manualMap=r}return t.prototype.createResponseHeaders=function(e,r,n){var i=e.headers?new Headers(e.headers):new Headers;return i.append("Cache-Control","no-store"),i.append("request-id",r),i.append("client-request-id",r),i.append("x-ms-ags-diagnostic",""),i.append("Date",n),i.append("Strict-Transport-Security",""),e.statusCode===429&&i.append("retry-after","3"),i},t.prototype.createResponseBody=function(e,r,n){if(e.responseBody)return e.responseBody;var i;if(e.statusCode>=400){var s=BPe.httpStatusCode[e.statusCode],o=e.statusMessage;i={error:{code:s,message:o,innerError:{"request-id":r,date:n}}}}else i={};return i},t.prototype.createResponse=function(e,r){var n=r.request,i=(0,tqt.generateUUID)(),s=new Date,o=this.createResponseHeaders(e,i,s.toString()),a=this.createResponseBody(e,i,s.toString()),u={url:n,status:e.statusCode,statusText:e.statusMessage,headers:o};r.response=new Response(typeof a=="string"?a:JSON.stringify(a),u)},t.prototype.sendRequest=function(e,r){return lM.__awaiter(this,void 0,void 0,function(){return lM.__generator(this,function(n){switch(n.label){case 0:return this.setStatusCode(e,r.request,r.options.method),e.chaosStrategy===qPe.ChaosStrategy.MANUAL&&!this.nextMiddleware||Math.floor(Math.random()*100)<e.chaosPercentage?(this.createResponse(e,r),[3,3]):[3,1];case 1:return this.nextMiddleware?[4,this.nextMiddleware.execute(r)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.getRandomStatusCode=function(e){var r=BPe.methodStatusCode[e];return r[Math.floor(Math.random()*r.length)]},t.prototype.getRelativeURL=function(e){var r=/https?:\/\/graph\.microsoft\.com\/[^/]+(.+?)(\?|$)/,n;return r.exec(e)!==null&&(n=r.exec(e)[1]),n},t.prototype.setStatusCode=function(e,r,n){var i=this;if(e.chaosStrategy===qPe.ChaosStrategy.MANUAL){if(e.statusCode===void 0){var s=this.getRelativeURL(r);this.manualMap.get(s)!==void 0?this.manualMap.get(s).get(n)!==void 0&&(e.statusCode=this.manualMap.get(s).get(n)):this.manualMap.forEach(function(o,a){var u=new RegExp(a+"$");u.test(s)&&i.manualMap.get(a).get(n)!==void 0&&(e.statusCode=i.manualMap.get(a).get(n))})}}else e.statusCode=this.getRandomStatusCode(n)},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof eqt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(ere.ChaosHandlerOptions)),typeof r>"u"&&(r=Object.assign(new ere.ChaosHandlerOptions,this.options)),r},t.prototype.execute=function(e){return lM.__awaiter(this,void 0,void 0,function(){var r;return lM.__generator(this,function(n){switch(n.label){case 0:return r=this.getOptions(e),[4,this.sendRequest(r,e)];case 1:return[2,n.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t})();dM.ChaosHandler=rqt});var j9=b(pM=>{"use strict";Object.defineProperty(pM,"__esModule",{value:!0});pM.ResponseType=void 0;var jPe;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(jPe||(pM.ResponseType=jPe={}))});var rre=b(s6=>{"use strict";Object.defineProperty(s6,"__esModule",{value:!0});s6.GraphResponseHandler=s6.DocumentType=void 0;var fM=(or(),Wt(sr)),Eg=j9(),tre;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(tre||(s6.DocumentType=tre={}));var hM;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(hM||(hM={}));var mM;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(mM||(mM={}));var nqt=(function(){function t(){}return t.parseDocumentResponse=function(e,r){return typeof DOMParser<"u"?new Promise(function(n,i){e.text().then(function(s){try{var o=new DOMParser,a=o.parseFromString(s,r);n(a)}catch(u){i(u)}})}):Promise.resolve(e.body)},t.convertResponse=function(e,r){return fM.__awaiter(this,void 0,void 0,function(){var n,i,s,o;return fM.__generator(this,function(a){switch(a.label){case 0:if(e.status===204)return[2,Promise.resolve()];switch(i=e.headers.get("Content-type"),s=r,s){case Eg.ResponseType.ARRAYBUFFER:return[3,1];case Eg.ResponseType.BLOB:return[3,3];case Eg.ResponseType.DOCUMENT:return[3,5];case Eg.ResponseType.JSON:return[3,7];case Eg.ResponseType.STREAM:return[3,9];case Eg.ResponseType.TEXT:return[3,11]}return[3,13];case 1:return[4,e.arrayBuffer()];case 2:return n=a.sent(),[3,24];case 3:return[4,e.blob()];case 4:return n=a.sent(),[3,24];case 5:return[4,t.parseDocumentResponse(e,tre.TEXT_XML)];case 6:return n=a.sent(),[3,24];case 7:return[4,e.json()];case 8:return n=a.sent(),[3,24];case 9:return[4,Promise.resolve(e.body)];case 10:return n=a.sent(),[3,24];case 11:return[4,e.text()];case 12:return n=a.sent(),[3,24];case 13:return i===null?[3,22]:(o=i.split(";")[0],new RegExp(mM.DOCUMENT).test(o)?[4,t.parseDocumentResponse(e,o)]:[3,15]);case 14:return n=a.sent(),[3,21];case 15:return new RegExp(mM.IMAGE).test(o)?(n=e.blob(),[3,21]):[3,16];case 16:return o!==hM.TEXT_PLAIN?[3,18]:[4,e.text()];case 17:return n=a.sent(),[3,21];case 18:return o!==hM.APPLICATION_JSON?[3,20]:[4,e.json()];case 19:return n=a.sent(),[3,21];case 20:n=Promise.resolve(e.body),a.label=21;case 21:return[3,23];case 22:n=Promise.resolve(e.body),a.label=23;case 23:return[3,24];case 24:return[2,n]}})})},t.getResponse=function(e,r,n){return fM.__awaiter(this,void 0,void 0,function(){var i;return fM.__generator(this,function(s){switch(s.label){case 0:return r!==Eg.ResponseType.RAW?[3,1]:[2,Promise.resolve(e)];case 1:return[4,t.convertResponse(e,r)];case 2:if(i=s.sent(),e.ok)if(typeof n=="function")n(null,i);else return[2,i];else throw i;s.label=3;case 3:return[2]}})})},t})();s6.GraphResponseHandler=nqt});var nre=b(yM=>{"use strict";Object.defineProperty(yM,"__esModule",{value:!0});yM.Range=void 0;var iqt=(function(){function t(e,r){e===void 0&&(e=-1),r===void 0&&(r=-1),this.minValue=e,this.maxValue=r}return t})();yM.Range=iqt});var ire=b(gM=>{"use strict";Object.defineProperty(gM,"__esModule",{value:!0});gM.UploadResult=void 0;var sqt=(function(){function t(e,r){this._location=r,this._responseBody=e}return Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(e){this._location=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseBody",{get:function(){return this._responseBody},set:function(e){this._responseBody=e},enumerable:!1,configurable:!0}),t.CreateUploadResult=function(e,r){return new t(e,r.get("location"))},t})();gM.UploadResult=sqt});var ore=b(_M=>{"use strict";Object.defineProperty(_M,"__esModule",{value:!0});_M.LargeFileUploadTask=void 0;var Pa=(or(),Wt(sr)),sre=Df(),oqt=rre(),$Pe=j9(),bM=nre(),aqt=ire(),uqt=(function(){function t(e,r,n,i){if(i===void 0&&(i={}),this.DEFAULT_FILE_SIZE=5*1024*1024,this.client=e,r.sliceFile)this.file=r;else throw new sre.GraphClientError("Please pass the FileUpload object, StreamUpload object or any custom implementation of the FileObject interface");this.file=r,i.rangeSize||(i.rangeSize=this.DEFAULT_FILE_SIZE),this.options=i,this.uploadSession=n,this.nextRange=new bM.Range(0,this.options.rangeSize-1)}return t.createUploadSession=function(e,r,n,i){return i===void 0&&(i={}),Pa.__awaiter(this,void 0,void 0,function(){var s,o;return Pa.__generator(this,function(a){switch(a.label){case 0:return[4,e.api(r).headers(i).post(n)];case 1:return s=a.sent(),o={url:s.uploadUrl,expiry:new Date(s.expirationDateTime),isCancelled:!1},[2,o]}})})},t.prototype.parseRange=function(e){var r=e[0];if(typeof r>"u"||r==="")return new bM.Range;var n=r.split("-"),i=parseInt(n[0],10),s=parseInt(n[1],10);return Number.isNaN(s)&&(s=this.file.size-1),new bM.Range(i,s)},t.prototype.updateTaskStatus=function(e){this.uploadSession.expiry=new Date(e.expirationDateTime),this.nextRange=this.parseRange(e.nextExpectedRanges)},t.prototype.getNextRange=function(){if(this.nextRange.minValue===-1)return this.nextRange;var e=this.nextRange.minValue,r=e+this.options.rangeSize-1;return r>=this.file.size&&(r=this.file.size-1),new bM.Range(e,r)},t.prototype.sliceFile=function(e){if(console.warn("The LargeFileUploadTask.sliceFile() function has been deprecated and moved into the FileObject interface."),this.file.content instanceof ArrayBuffer||this.file.content instanceof Blob||this.file.content instanceof Uint8Array)return this.file.content.slice(e.minValue,e.maxValue+1);throw new sre.GraphClientError("The LargeFileUploadTask.sliceFile() function expects only Blob, ArrayBuffer or Uint8Array file content. Please note that the sliceFile() function is deprecated.")},t.prototype.upload=function(){return Pa.__awaiter(this,void 0,void 0,function(){var e,r,n,i,s,o,a;return Pa.__generator(this,function(u){switch(u.label){case 0:e=this.options&&this.options.uploadEventHandlers,u.label=1;case 1:if(this.uploadSession.isCancelled)return[3,5];if(r=this.getNextRange(),r.maxValue===-1)throw n=new Error("Task with which you are trying to upload is already completed, Please check for your uploaded file"),n.name="Invalid Session",n;return[4,this.file.sliceFile(r)];case 2:return i=u.sent(),[4,this.uploadSliceGetRawResponse(i,r,this.file.size)];case 3:if(s=u.sent(),!s)throw new sre.GraphClientError("Something went wrong! Large file upload slice response is null.");return[4,oqt.GraphResponseHandler.getResponse(s)];case 4:return o=u.sent(),s.status===201||s.status===200&&o.id?(this.reportProgress(e,r),[2,aqt.UploadResult.CreateUploadResult(o,s.headers)]):(a={expirationDateTime:o.expirationDateTime||o.ExpirationDateTime,nextExpectedRanges:o.NextExpectedRanges||o.nextExpectedRanges},this.updateTaskStatus(a),this.reportProgress(e,r),[3,1]);case 5:return[2]}})})},t.prototype.reportProgress=function(e,r){e&&e.progress&&e.progress(r,e.extraCallbackParam)},t.prototype.uploadSlice=function(e,r,n){return Pa.__awaiter(this,void 0,void 0,function(){return Pa.__generator(this,function(i){switch(i.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).put(e)];case 1:return[2,i.sent()]}})})},t.prototype.uploadSliceGetRawResponse=function(e,r,n){return Pa.__awaiter(this,void 0,void 0,function(){return Pa.__generator(this,function(i){switch(i.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).responseType($Pe.ResponseType.RAW).put(e)];case 1:return[2,i.sent()]}})})},t.prototype.cancel=function(){return Pa.__awaiter(this,void 0,void 0,function(){var e;return Pa.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).responseType($Pe.ResponseType.RAW).delete()];case 1:return e=r.sent(),e.status===204&&(this.uploadSession.isCancelled=!0),[2,e]}})})},t.prototype.getStatus=function(){return Pa.__awaiter(this,void 0,void 0,function(){var e;return Pa.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).get()];case 1:return e=r.sent(),this.updateTaskStatus(e),[2,e]}})})},t.prototype.resume=function(){return Pa.__awaiter(this,void 0,void 0,function(){return Pa.__generator(this,function(e){switch(e.label){case 0:return[4,this.getStatus()];case 1:return e.sent(),[4,this.upload()];case 2:return[2,e.sent()]}})})},t.prototype.getUploadSession=function(){return this.uploadSession},t})();_M.LargeFileUploadTask=uqt});var are=b(EM=>{"use strict";Object.defineProperty(EM,"__esModule",{value:!0});EM.FileUpload=void 0;var cqt=Df(),lqt=(function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new cqt.GraphClientError("Please provide the upload content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return this.content.slice(e.minValue,e.maxValue+1)},t})();EM.FileUpload=lqt});var ure=b(vM=>{"use strict";Object.defineProperty(vM,"__esModule",{value:!0});vM.getValidRangeSize=void 0;var dqt=5*1024*1024,pqt=function(t){return t>320*1024&&(t=Math.floor(t/(320*1024))*320*1024),t},fqt=function(t){t===void 0&&(t=dqt);var e=60*1024*1024;return t>e&&(t=e),pqt(t)};vM.getValidRangeSize=fqt});var KPe=b(SM=>{"use strict";Object.defineProperty(SM,"__esModule",{value:!0});SM.OneDriveLargeFileUploadTask=void 0;var kf=(or(),Wt(sr)),UPe=Df(),hqt=are(),mqt=ore(),yqt=ure(),gqt=(function(t){kf.__extends(e,t);function e(r,n,i,s){return t.call(this,r,n,i,s)||this}return e.constructCreateSessionUrl=function(r,n){return n===void 0&&(n=e.DEFAULT_UPLOAD_PATH),r=r.trim(),n=n.trim(),n===""&&(n="/"),n[0]!=="/"&&(n="/".concat(n)),n[n.length-1]!=="/"&&(n="".concat(n,"/")),"/me/drive/root:".concat(n.split("/").map(function(i){return encodeURIComponent(i)}).join("/")).concat(encodeURIComponent(r),":/createUploadSession")},e.getFileInfo=function(r,n){var i,s;if(typeof Blob<"u"&&r instanceof Blob)i=new File([r],n),s=i.size;else if(typeof File<"u"&&r instanceof File)i=r,s=i.size;else if(typeof Uint8Array<"u"&&r instanceof Uint8Array){var o=r;s=o.byteLength,i=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}return{content:i,size:s}},e.create=function(r,n,i){return kf.__awaiter(this,void 0,void 0,function(){var s,o,a;return kf.__generator(this,function(u){if(!r||!n||!i)throw new UPe.GraphClientError("Please provide the Graph client instance, file object and OneDriveLargeFileUploadOptions value");return s=i.fileName,o=e.getFileInfo(n,s),a=new hqt.FileUpload(o.content,s,o.size),[2,this.createTaskWithFileObject(r,a,i)]})})},e.createTaskWithFileObject=function(r,n,i){return kf.__awaiter(this,void 0,void 0,function(){var s,o,a,u;return kf.__generator(this,function(c){switch(c.label){case 0:if(!r||!n||!i)throw new UPe.GraphClientError("Please provide the Graph client instance, FileObject interface implementation and OneDriveLargeFileUploadOptions value");return s=i.uploadSessionURL?i.uploadSessionURL:e.constructCreateSessionUrl(i.fileName,i.path),o={fileName:i.fileName,fileDescription:i.fileDescription,conflictBehavior:i.conflictBehavior},[4,e.createUploadSession(r,s,o)];case 1:return a=c.sent(),u=(0,yqt.getValidRangeSize)(i.rangeSize),[2,new e(r,n,a,{rangeSize:u,uploadEventHandlers:i.uploadEventHandlers})]}})})},e.createUploadSession=function(r,n,i){return kf.__awaiter(this,void 0,void 0,function(){var s;return kf.__generator(this,function(o){return s={item:{"@microsoft.graph.conflictBehavior":i?.conflictBehavior||"rename",name:i?.fileName,description:i?.fileDescription}},[2,t.createUploadSession.call(this,r,n,s)]})})},e.prototype.commit=function(r,n){return n===void 0&&(n="rename"),kf.__awaiter(this,void 0,void 0,function(){var i;return kf.__generator(this,function(s){switch(s.label){case 0:return i={name:this.file.name,"@microsoft.graph.conflictBehavior":n,"@microsoft.graph.sourceUrl":this.uploadSession.url},[4,this.client.api(r).put(i)];case 1:return[2,s.sent()]}})})},e.DEFAULT_UPLOAD_PATH="/",e})(mqt.LargeFileUploadTask);SM.OneDriveLargeFileUploadTask=gqt});var GPe=b(wM=>{"use strict";Object.defineProperty(wM,"__esModule",{value:!0});wM.StreamUpload=void 0;var VPe=(or(),Wt(sr)),$9=Df(),bqt=(function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new $9.GraphClientError("Please provide the Readable Stream content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return VPe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a,u;return VPe.__generator(this,function(c){switch(c.label){case 0:if(r=e.maxValue-e.minValue+1,n=[],this.previousSlice){if(e.minValue<this.previousSlice.range.minValue)throw new $9.GraphClientError("An error occurred while uploading the stream. Please restart the stream upload from the first byte of the file.");if(e.minValue<this.previousSlice.range.maxValue){if(i=this.previousSlice.range.minValue,s=this.previousSlice.range.maxValue,e.minValue===i&&e.maxValue===s)return[2,this.previousSlice.fileSlice];if(e.maxValue===s)return[2,this.previousSlice.fileSlice.slice(e.minValue,e.maxValue+1)];n.push(this.previousSlice.fileSlice.slice(e.minValue,s+1)),r=e.maxValue-s}}return this.content&&this.content.readable?this.content.readableLength>=r?(n.push(this.content.read(r)),[3,3]):[3,1]:[3,4];case 1:return a=(o=n).push,[4,this.readNBytesFromStream(r)];case 2:a.apply(o,[c.sent()]),c.label=3;case 3:return[3,5];case 4:throw new $9.GraphClientError("Stream is not readable.");case 5:return u=Buffer.concat(n),this.previousSlice={fileSlice:u,range:e},[2,u]}})})},t.prototype.readNBytesFromStream=function(e){var r=this;return new Promise(function(n,i){var s=[],o=e,a=0;r.content.on("end",function(){if(o>0)return i(new $9.GraphClientError("Stream ended before reading required range size"))}),r.content.on("readable",function(){for(var u;a<e&&(u=r.content.read(o))!==null;)a+=u.length,s.push(u),o>0&&(o=e-a);if(a===e)return n(Buffer.concat(s));if(!r.content||!r.content.readable)return i(new $9.GraphClientError("Error encountered while reading the stream during the upload"))})})},t})();wM.StreamUpload=bqt});var HPe=b(AM=>{"use strict";Object.defineProperty(AM,"__esModule",{value:!0});AM.PageIterator=void 0;var o6=(or(),Wt(sr)),_qt=(function(){function t(e,r,n,i){this.client=e,this.collection=r.value,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],this.callback=n,this.cursor=0,this.complete=!1,this.requestOptions=i}return t.prototype.iterationHelper=function(){if(this.collection===void 0)return!1;for(var e=!0;e&&this.cursor<this.collection.length;){var r=this.collection[this.cursor];e=this.callback(r),this.cursor++}return e},t.prototype.fetchAndUpdateNextPageData=function(){return o6.__awaiter(this,void 0,void 0,function(){var e,r;return o6.__generator(this,function(n){switch(n.label){case 0:return e=this.client.api(this.nextLink),this.requestOptions&&(this.requestOptions.headers&&(e=e.headers(this.requestOptions.headers)),this.requestOptions.middlewareOptions&&(e=e.middlewareOptions(this.requestOptions.middlewareOptions)),this.requestOptions.options&&(e=e.options(this.requestOptions.options))),[4,e.get()];case 1:return r=n.sent(),this.collection=r.value,this.cursor=0,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],[2]}})})},t.prototype.getDeltaLink=function(){return this.deltaLink},t.prototype.iterate=function(){return o6.__awaiter(this,void 0,void 0,function(){var e;return o6.__generator(this,function(r){switch(r.label){case 0:e=this.iterationHelper(),r.label=1;case 1:return e?this.nextLink===void 0?[3,3]:[4,this.fetchAndUpdateNextPageData()]:[3,5];case 2:return r.sent(),e=this.iterationHelper(),[3,4];case 3:e=!1,r.label=4;case 4:return[3,1];case 5:return this.nextLink===void 0&&this.cursor>=this.collection.length&&(this.complete=!0),[2]}})})},t.prototype.resume=function(){return o6.__awaiter(this,void 0,void 0,function(){return o6.__generator(this,function(e){return[2,this.iterate()]})})},t.prototype.isComplete=function(){return this.complete},t})();AM.PageIterator=_qt});var cre=b(TM=>{"use strict";Object.defineProperty(TM,"__esModule",{value:!0});TM.CustomAuthenticationProvider=void 0;var CM=(or(),Wt(sr)),zPe=Df(),Eqt=(function(){function t(e){this.provider=e}return t.prototype.getAccessToken=function(){return CM.__awaiter(this,void 0,void 0,function(){var e=this;return CM.__generator(this,function(r){return[2,new Promise(function(n,i){e.provider(function(s,o){return CM.__awaiter(e,void 0,void 0,function(){var a,u;return CM.__generator(this,function(c){switch(c.label){case 0:return o?(n(o),[3,3]):[3,1];case 1:return s||(a="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md",s=new zPe.GraphClientError(a)),[4,zPe.GraphClientError.setGraphClientError(s)];case 2:u=c.sent(),i(u),c.label=3;case 3:return[2]}})})})})]})})},t})();TM.CustomAuthenticationProvider=Eqt});var lre=b(OM=>{"use strict";Object.defineProperty(OM,"__esModule",{value:!0});OM.GraphError=void 0;var vqt=(or(),Wt(sr)),Sqt=(function(t){vqt.__extends(e,t);function e(r,n,i){r===void 0&&(r=-1);var s=t.call(this,n||i&&i.message)||this;return Object.setPrototypeOf(s,e.prototype),s.statusCode=r,s.code=null,s.requestId=null,s.date=new Date,s.body=null,s.stack=i?i.stack:s.stack,s}return e})(Error);OM.GraphError=Sqt});var JPe=b(xM=>{"use strict";Object.defineProperty(xM,"__esModule",{value:!0});xM.GraphErrorHandler=void 0;var WPe=(or(),Wt(sr)),dre=lre(),wqt=(function(){function t(){}return t.constructError=function(e,r,n){var i=new dre.GraphError(r,"",e);return e.name!==void 0&&(i.code=e.name),i.body=e.toString(),i.date=new Date,i.headers=n?.headers,i},t.constructErrorFromResponse=function(e,r,n){var i=e.error,s=new dre.GraphError(r,i.message);return s.code=i.code,i.innerError!==void 0&&(s.requestId=i.innerError["request-id"],s.date=new Date(i.innerError.date)),s.body=JSON.stringify(i),s.headers=n?.headers,s},t.getError=function(e,r,n,i){return e===void 0&&(e=null),r===void 0&&(r=-1),WPe.__awaiter(this,void 0,void 0,function(){var s;return WPe.__generator(this,function(o){if(e&&e.error?s=t.constructErrorFromResponse(e,r,i):e instanceof Error?s=t.constructError(e,r,i):(s=new dre.GraphError(r),s.body=e),typeof n=="function")n(s,null);else return[2,s];return[2]})})},t})();xM.GraphErrorHandler=wqt});var pre=b(IM=>{"use strict";Object.defineProperty(IM,"__esModule",{value:!0});IM.GraphRequest=void 0;var Rn=(or(),Wt(sr)),Aqt=Df(),Cqt=JPe(),U9=Kk(),Tqt=rre(),Oqt=tm(),vg=B9(),xqt=j9(),Iqt=(function(){function t(e,r,n){var i=this;this.parsePath=function(s){if(s.indexOf("https://")!==-1){s=s.replace("https://","");var o=s.indexOf("/");o!==-1&&(i.urlComponents.host="https://"+s.substring(0,o),s=s.substring(o+1,s.length));var a=s.indexOf("/");a!==-1&&(i.urlComponents.version=s.substring(0,a),s=s.substring(a+1,s.length))}s.charAt(0)==="/"&&(s=s.substr(1));var u=s.indexOf("?");if(u===-1)i.urlComponents.path=s;else{i.urlComponents.path=s.substr(0,u);for(var c=s.substring(u+1,s.length).split("&"),l=0,d=c;l<d.length;l++){var p=d[l];i.parseQueryParameter(p)}}},this.httpClient=e,this.config=r,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(n)}return t.prototype.addCsvQueryParameter=function(e,r,n){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";var i=[];n.length>1&&typeof r=="string"?i=Array.prototype.slice.call(n):typeof r=="string"?i.push(r):i=i.concat(r),this.urlComponents.oDataQueryParams[e]+=i.join(",")},t.prototype.buildFullUrl=function(){var e=(0,U9.urlJoin)([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e},t.prototype.createQueryString=function(){var e=this.urlComponents,r=[];if(Object.keys(e.oDataQueryParams).length!==0)for(var n in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,n)&&r.push(n+"="+e.oDataQueryParams[n]);if(Object.keys(e.otherURLQueryParams).length!==0)for(var n in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,n)&&r.push(n+"="+e.otherURLQueryParams[n]);if(e.otherURLQueryOptions.length!==0)for(var i=0,s=e.otherURLQueryOptions;i<s.length;i++){var o=s[i];r.push(o)}return r.length>0?"?"+r.join("&"):""},t.prototype.parseQueryParameter=function(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1)for(var r=e.split("&"),n=0,i=r;n<i.length;n++){var s=i[n];this.parseQueryParamenterString(s)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&this.setURLComponentsQueryParamater(o,e[o]);return this},t.prototype.parseQueryParamenterString=function(e){if(this.isValidQueryKeyValuePair(e)){var r=e.indexOf("="),n=e.substring(0,r),i=e.substring(r+1);this.setURLComponentsQueryParamater(n,i)}else this.urlComponents.otherURLQueryOptions.push(e)},t.prototype.setURLComponentsQueryParamater=function(e,r){if(U9.oDataQueryNames.indexOf(e)!==-1){var n=this.urlComponents.oDataQueryParams[e],i=n&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=i?n+","+r:r}else this.urlComponents.otherURLQueryParams[e]=r},t.prototype.isValidQueryKeyValuePair=function(e){var r=e.indexOf("=");if(r===-1)return!1;var n=e.indexOf("(");return!(n!==-1&&e.indexOf("(")<r)},t.prototype.updateRequestOptions=function(e){var r=Rn.__assign({},e.headers);if(this.config.fetchOptions!==void 0){var n=Rn.__assign({},this.config.fetchOptions);Object.assign(e,n),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Rn.__assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(r,e.headers),Object.assign(r,this._headers),e.headers=r},t.prototype.send=function(e,r,n){var i;return Rn.__awaiter(this,void 0,void 0,function(){var s,o,a,u,c,l,d,p;return Rn.__generator(this,function(f){switch(f.label){case 0:o=new Oqt.MiddlewareControl(this._middlewareOptions),this.updateRequestOptions(r),a=(i=this.config)===null||i===void 0?void 0:i.customHosts,f.label=1;case 1:return f.trys.push([1,4,,6]),[4,this.httpClient.sendRequest({request:e,options:r,middlewareControl:o,customHosts:a})];case 2:return u=f.sent(),s=u.response,[4,Tqt.GraphResponseHandler.getResponse(s,this._responseType,n)];case 3:return c=f.sent(),[2,c];case 4:if(l=f.sent(),l instanceof Aqt.GraphClientError)throw l;return d=void 0,s&&(d=s.status),[4,Cqt.GraphErrorHandler.getError(l,d,n,s)];case 5:throw p=f.sent(),p;case 6:return[2]}})})},t.prototype.setHeaderContentType=function(){if(!this._headers){this.header("Content-Type","application/json");return}for(var e=Object.keys(this._headers),r=0,n=e;r<n.length;r++){var i=n[r];if(i.toLowerCase()==="content-type")return}this.header("Content-Type","application/json")},t.prototype.header=function(e,r){return this._headers[e]=r,this},t.prototype.headers=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._headers[r]=e[r]);return this},t.prototype.option=function(e,r){return this._options[e]=r,this},t.prototype.options=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._options[r]=e[r]);return this},t.prototype.middlewareOptions=function(e){return this._middlewareOptions=e,this},t.prototype.version=function(e){return this.urlComponents.version=e,this},t.prototype.responseType=function(e){return this._responseType=e,this},t.prototype.select=function(e){return this.addCsvQueryParameter("$select",e,arguments),this},t.prototype.expand=function(e){return this.addCsvQueryParameter("$expand",e,arguments),this},t.prototype.orderby=function(e){return this.addCsvQueryParameter("$orderby",e,arguments),this},t.prototype.filter=function(e){return this.urlComponents.oDataQueryParams.$filter=e,this},t.prototype.search=function(e){return this.urlComponents.oDataQueryParams.$search=e,this},t.prototype.top=function(e){return this.urlComponents.oDataQueryParams.$top=e,this},t.prototype.skip=function(e){return this.urlComponents.oDataQueryParams.$skip=e,this},t.prototype.skipToken=function(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this},t.prototype.count=function(e){return e===void 0&&(e=!0),this.urlComponents.oDataQueryParams.$count=e.toString(),this},t.prototype.query=function(e){return this.parseQueryParameter(e)},t.prototype.get=function(e){return Rn.__awaiter(this,void 0,void 0,function(){var r,n,i;return Rn.__generator(this,function(s){switch(s.label){case 0:return r=this.buildFullUrl(),n={method:vg.RequestMethod.GET},[4,this.send(r,n,e)];case 1:return i=s.sent(),[2,i]}})})},t.prototype.post=function(e,r){return Rn.__awaiter(this,void 0,void 0,function(){var n,i,s;return Rn.__generator(this,function(o){switch(o.label){case 0:return n=this.buildFullUrl(),i={method:vg.RequestMethod.POST,body:(0,U9.serializeContent)(e)},s=e&&e.constructor&&e.constructor.name,s==="FormData"?i.headers={}:(this.setHeaderContentType(),i.headers=this._headers),[4,this.send(n,i,r)];case 1:return[2,o.sent()]}})})},t.prototype.create=function(e,r){return Rn.__awaiter(this,void 0,void 0,function(){return Rn.__generator(this,function(n){switch(n.label){case 0:return[4,this.post(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.put=function(e,r){return Rn.__awaiter(this,void 0,void 0,function(){var n,i;return Rn.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),i={method:vg.RequestMethod.PUT,body:(0,U9.serializeContent)(e)},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t.prototype.patch=function(e,r){return Rn.__awaiter(this,void 0,void 0,function(){var n,i;return Rn.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),i={method:vg.RequestMethod.PATCH,body:(0,U9.serializeContent)(e)},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t.prototype.update=function(e,r){return Rn.__awaiter(this,void 0,void 0,function(){return Rn.__generator(this,function(n){switch(n.label){case 0:return[4,this.patch(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.delete=function(e){return Rn.__awaiter(this,void 0,void 0,function(){var r,n;return Rn.__generator(this,function(i){switch(i.label){case 0:return r=this.buildFullUrl(),n={method:vg.RequestMethod.DELETE},[4,this.send(r,n,e)];case 1:return[2,i.sent()]}})})},t.prototype.del=function(e){return Rn.__awaiter(this,void 0,void 0,function(){return Rn.__generator(this,function(r){switch(r.label){case 0:return[4,this.delete(e)];case 1:return[2,r.sent()]}})})},t.prototype.getStream=function(e){return Rn.__awaiter(this,void 0,void 0,function(){var r,n;return Rn.__generator(this,function(i){switch(i.label){case 0:return r=this.buildFullUrl(),n={method:vg.RequestMethod.GET},this.responseType(xqt.ResponseType.STREAM),[4,this.send(r,n,e)];case 1:return[2,i.sent()]}})})},t.prototype.putStream=function(e,r){return Rn.__awaiter(this,void 0,void 0,function(){var n,i;return Rn.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),i={method:vg.RequestMethod.PUT,headers:{"Content-Type":"application/octet-stream"},body:e},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t})();IM.GraphRequest=Iqt});var fre=b(RM=>{"use strict";Object.defineProperty(RM,"__esModule",{value:!0});RM.HTTPClient=void 0;var YPe=(or(),Wt(sr)),Rqt=(function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!e||!e.length){var n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware.apply(this,e)}return t.prototype.setMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]},t.prototype.parseMiddleWareArray=function(e){e.forEach(function(r,n){n<e.length-1&&r.setNext(e[n+1])}),this.middleware=e[0]},t.prototype.sendRequest=function(e){return YPe.__awaiter(this,void 0,void 0,function(){var r;return YPe.__generator(this,function(n){switch(n.label){case 0:if(typeof e.request=="string"&&e.options===void 0)throw r=new Error,r.name="InvalidRequestOptions",r.message="Unable to execute the middleware, Please provide valid options for a request",r;return[4,this.middleware.execute(e)];case 1:return n.sent(),[2,e]}})})},t})();RM.HTTPClient=Rqt});var XPe=b(DM=>{"use strict";Object.defineProperty(DM,"__esModule",{value:!0});DM.HTTPClientFactory=void 0;var Dqt=(or(),Wt(sr)),QPe=fre(),kqt=zk(),Mqt=Jk(),Pqt=L9(),Nqt=q9(),Fqt=tM(),Bqt=Xk(),qqt=sM(),Lqt=function(){return typeof process=="object"&&typeof require=="function"},jqt=(function(){function t(){}return t.createWithAuthenticationProvider=function(e){var r=new kqt.AuthenticationHandler(e),n=new Bqt.RetryHandler(new Nqt.RetryHandlerOptions),i=new qqt.TelemetryHandler,s=new Mqt.HTTPMessageHandler;if(r.setNext(n),Lqt()){var o=new Fqt.RedirectHandler(new Pqt.RedirectHandlerOptions);n.setNext(o),o.setNext(i)}else n.setNext(i);return i.setNext(s),t.createWithMiddleware(r)},t.createWithMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(QPe.HTTPClient.bind.apply(QPe.HTTPClient,Dqt.__spreadArray([void 0],e,!1)))},t})();DM.HTTPClientFactory=jqt});var ZPe=b(kM=>{"use strict";Object.defineProperty(kM,"__esModule",{value:!0});kM.validatePolyFilling=void 0;var $qt=function(){if(typeof Promise>"u"&&typeof fetch>"u"){var t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){var t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){var t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};kM.validatePolyFilling=$qt});var rNe=b(MM=>{"use strict";Object.defineProperty(MM,"__esModule",{value:!0});MM.Client=void 0;var Uqt=(or(),Wt(sr)),eNe=Wte(),Kqt=cre(),Vqt=pre(),tNe=fre(),Gqt=XPe(),Hqt=ZPe(),zqt=(function(){function t(e){this.config={baseUrl:eNe.GRAPH_BASE_URL,debugLogging:!1,defaultVersion:eNe.GRAPH_API_VERSION},(0,Hqt.validatePolyFilling)();for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);var n;if(e.authProvider!==void 0&&e.middleware!==void 0){var i=new Error;throw i.name="AmbiguityInInitialization",i.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",i}else if(e.authProvider!==void 0)n=Gqt.HTTPClientFactory.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new(tNe.HTTPClient.bind.apply(tNe.HTTPClient,Uqt.__spreadArray([void 0],[].concat(e.middleware),!1)));else{var i=new Error;throw i.name="InvalidMiddlewareChain",i.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",i}this.httpClient=n}return t.init=function(e){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=n==="authProvider"?new Kqt.CustomAuthenticationProvider(e[n]):e[n]);return t.initWithMiddleware(r)},t.initWithMiddleware=function(e){return new t(e)},t.prototype.api=function(e){return new Vqt.GraphRequest(this.httpClient,this.config,e)},t})();MM.Client=zqt});var iNe=b(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.ResponseType=tt.GraphRequest=tt.GraphClientError=tt.GraphError=tt.CustomAuthenticationProvider=tt.Client=tt.PageIterator=tt.Range=tt.UploadResult=tt.FileUpload=tt.StreamUpload=tt.getValidRangeSize=tt.OneDriveLargeFileUploadTask=tt.LargeFileUploadTask=tt.ChaosHandler=tt.ChaosStrategy=tt.ChaosHandlerOptions=tt.TelemetryHandlerOptions=tt.FeatureUsageFlag=tt.RedirectHandlerOptions=tt.RetryHandlerOptions=tt.AuthenticationHandlerOptions=tt.MiddlewareFactory=tt.TelemetryHandler=tt.RedirectHandler=tt.RetryHandler=tt.HTTPMessageHandler=tt.AuthenticationHandler=tt.BatchResponseContent=tt.BatchRequestContent=void 0;var Wqt=bPe();Object.defineProperty(tt,"BatchRequestContent",{enumerable:!0,get:function(){return Wqt.BatchRequestContent}});var Jqt=_Pe();Object.defineProperty(tt,"BatchResponseContent",{enumerable:!0,get:function(){return Jqt.BatchResponseContent}});var Yqt=zk();Object.defineProperty(tt,"AuthenticationHandler",{enumerable:!0,get:function(){return Yqt.AuthenticationHandler}});var Qqt=Jk();Object.defineProperty(tt,"HTTPMessageHandler",{enumerable:!0,get:function(){return Qqt.HTTPMessageHandler}});var Xqt=Xk();Object.defineProperty(tt,"RetryHandler",{enumerable:!0,get:function(){return Xqt.RetryHandler}});var Zqt=tM();Object.defineProperty(tt,"RedirectHandler",{enumerable:!0,get:function(){return Zqt.RedirectHandler}});var eLt=sM();Object.defineProperty(tt,"TelemetryHandler",{enumerable:!0,get:function(){return eLt.TelemetryHandler}});var tLt=PPe();Object.defineProperty(tt,"MiddlewareFactory",{enumerable:!0,get:function(){return tLt.MiddlewareFactory}});var rLt=Jte();Object.defineProperty(tt,"AuthenticationHandlerOptions",{enumerable:!0,get:function(){return rLt.AuthenticationHandlerOptions}});var nLt=q9();Object.defineProperty(tt,"RetryHandlerOptions",{enumerable:!0,get:function(){return nLt.RetryHandlerOptions}});var iLt=L9();Object.defineProperty(tt,"RedirectHandlerOptions",{enumerable:!0,get:function(){return iLt.RedirectHandlerOptions}});var nNe=t6();Object.defineProperty(tt,"FeatureUsageFlag",{enumerable:!0,get:function(){return nNe.FeatureUsageFlag}});Object.defineProperty(tt,"TelemetryHandlerOptions",{enumerable:!0,get:function(){return nNe.TelemetryHandlerOptions}});var sLt=Zte();Object.defineProperty(tt,"ChaosHandlerOptions",{enumerable:!0,get:function(){return sLt.ChaosHandlerOptions}});var oLt=uM();Object.defineProperty(tt,"ChaosStrategy",{enumerable:!0,get:function(){return oLt.ChaosStrategy}});var aLt=LPe();Object.defineProperty(tt,"ChaosHandler",{enumerable:!0,get:function(){return aLt.ChaosHandler}});var uLt=ore();Object.defineProperty(tt,"LargeFileUploadTask",{enumerable:!0,get:function(){return uLt.LargeFileUploadTask}});var cLt=KPe();Object.defineProperty(tt,"OneDriveLargeFileUploadTask",{enumerable:!0,get:function(){return cLt.OneDriveLargeFileUploadTask}});var lLt=ure();Object.defineProperty(tt,"getValidRangeSize",{enumerable:!0,get:function(){return lLt.getValidRangeSize}});var dLt=GPe();Object.defineProperty(tt,"StreamUpload",{enumerable:!0,get:function(){return dLt.StreamUpload}});var pLt=are();Object.defineProperty(tt,"FileUpload",{enumerable:!0,get:function(){return pLt.FileUpload}});var fLt=ire();Object.defineProperty(tt,"UploadResult",{enumerable:!0,get:function(){return fLt.UploadResult}});var hLt=nre();Object.defineProperty(tt,"Range",{enumerable:!0,get:function(){return hLt.Range}});var mLt=HPe();Object.defineProperty(tt,"PageIterator",{enumerable:!0,get:function(){return mLt.PageIterator}});var yLt=rNe();Object.defineProperty(tt,"Client",{enumerable:!0,get:function(){return yLt.Client}});var gLt=cre();Object.defineProperty(tt,"CustomAuthenticationProvider",{enumerable:!0,get:function(){return gLt.CustomAuthenticationProvider}});var bLt=lre();Object.defineProperty(tt,"GraphError",{enumerable:!0,get:function(){return bLt.GraphError}});var _Lt=Df();Object.defineProperty(tt,"GraphClientError",{enumerable:!0,get:function(){return _Lt.GraphClientError}});var ELt=pre();Object.defineProperty(tt,"GraphRequest",{enumerable:!0,get:function(){return ELt.GraphRequest}});var vLt=j9();Object.defineProperty(tt,"ResponseType",{enumerable:!0,get:function(){return vLt.ResponseType}})});var Mf,hre,Dn,mre,K9,V9,G9,yre,on,pi,Pf,PM,rm=ce(()=>{"use strict";Mf=class extends Error{constructor(e,r,n,i=!0){super(e),this.statusCode=r,this.code=n,this.isOperational=i,Error.captureStackTrace(this,this.constructor),Object.setPrototypeOf(this,new.target.prototype)}},hre=class extends Mf{constructor(e="Bad Request",r="BAD_REQUEST"){super(e,400,r)}},Dn=class extends hre{constructor(e="Invalid input provided"){super(e,"INVALID_INPUT")}},mre=class extends Mf{constructor(e="Access forbidden",r="FORBIDDEN"){super(e,403,r)}},K9=class extends mre{constructor(e="You cannot re-register in the same month you deleted your account."){super(e,"REREGISTRATION_BLOCKED")}},V9=class extends Mf{constructor(e="Resource not found",r="NOT_FOUND"){super(e,404,r)}},G9=class extends V9{constructor(e="User not found"){super(e,"USER_NOT_FOUND")}},yre=class extends Mf{constructor(e="Internal server error",r="SERVER_ERROR"){super(e,500,r,!1)}},on=class extends yre{constructor(e="Database operation failed"){super(e,"DATABASE_ERROR")}},pi=class{static serialize(e){if(e)return e instanceof Mf?{name:e.name,message:e.message,code:e.code,statusCode:e.statusCode,isOperational:e.isOperational,stack:e.stack,...e.errors&&{errors:e.errors}}:e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:typeof e=="object"?{...e}:{value:e}}},Pf=class extends Mf{constructor(e="External service returned an error",r="BAD_GATEWAY"){super(e,502,r)}},PM=class extends Mf{constructor(e="External service timed out",r="GATEWAY_TIMEOUT"){super(e,504,r)}}});var sNe=b((OCr,SLt)=>{SLt.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var a6=b(pu=>{"use strict";var wLt=pu&&pu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pu,"__esModule",{value:!0});pu.getKeyIndexes=pu.hasFlag=pu.exists=pu.list=void 0;var NM=wLt(sNe());pu.list=Object.keys(NM.default);var gre={};pu.list.forEach(t=>{gre[t]=NM.default[t].flags.reduce(function(e,r){return e[r]=!0,e},{})});function ALt(t,e){return t=e?.caseInsensitive?String(t).toLowerCase():t,!!NM.default[t]}pu.exists=ALt;function CLt(t,e,r){if(t=r?.nameCaseInsensitive?String(t).toLowerCase():t,!gre[t])throw new Error("Unknown command "+t);return!!gre[t][e]}pu.hasFlag=CLt;function TLt(t,e,r){t=r?.nameCaseInsensitive?String(t).toLowerCase():t;let n=NM.default[t];if(!n)throw new Error("Unknown command "+t);if(!Array.isArray(e))throw new Error("Expect args to be an array");let i=[],s=!!(r&&r.parseExternalKey),o=(u,c)=>{let l=[],d=Number(u[c]);for(let p=0;p<d;p++)l.push(p+c+1);return l},a=(u,c,l)=>{for(let d=c;d<u.length-1;d+=1)if(String(u[d]).toLowerCase()===l.toLowerCase())return d+1;return null};switch(t){case"zunionstore":case"zinterstore":case"zdiffstore":i.push(0,...o(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":i.push(...o(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{i.push(...o(e,0));break}case"georadius":{i.push(0);let u=a(e,5,"STORE");u&&i.push(u);let c=a(e,5,"STOREDIST");c&&i.push(c);break}case"georadiusbymember":{i.push(0);let u=a(e,4,"STORE");u&&i.push(u);let c=a(e,4,"STOREDIST");c&&i.push(c);break}case"sort":case"sort_ro":i.push(0);for(let u=1;u<e.length-1;u++){let c=e[u];if(typeof c!="string")continue;let l=c.toUpperCase();l==="GET"?(u+=1,c=e[u],c!=="#"&&(s?i.push([u,oNe(c)]):i.push(u))):l==="BY"?(u+=1,s?i.push([u,oNe(e[u])]):i.push(u)):l==="STORE"&&(u+=1,i.push(u))}break;case"migrate":if(e[2]==="")for(let u=5;u<e.length-1;u++){let c=e[u];if(typeof c=="string"&&c.toUpperCase()==="KEYS"){for(let l=u+1;l<e.length;l++)i.push(l);break}}else i.push(2);break;case"xreadgroup":case"xread":for(let u=t==="xread"?0:3;u<e.length-1;u++)if(String(e[u]).toUpperCase()==="STREAMS"){for(let c=u+1;c<=u+(e.length-1-u)/2;c++)i.push(c);break}break;default:if(n.step>0){let u=n.keyStart-1,c=n.keyStop>0?n.keyStop:e.length+n.keyStop+1;for(let l=u;l<c;l+=n.step)i.push(l)}break}return i}pu.getKeyIndexes=TLt;function oNe(t){typeof t!="string"&&(t=String(t));let e=t.indexOf("->");return e===-1?t.length:e}});var aNe=b(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.tryCatch=nm.errorObj=void 0;nm.errorObj={e:{}};var bre;function OLt(t,e){try{let r=bre;return bre=null,r.apply(this,arguments)}catch(r){return nm.errorObj.e=r,nm.errorObj}}function xLt(t){return bre=t,OLt}nm.tryCatch=xLt});var im=b(_re=>{"use strict";Object.defineProperty(_re,"__esModule",{value:!0});var u6=aNe();function uNe(t){setTimeout(function(){throw t},0)}function ILt(t,e,r){return typeof e=="function"&&t.then(n=>{let i;r!==void 0&&Object(r).spread&&Array.isArray(n)?i=u6.tryCatch(e).apply(void 0,[null].concat(n)):i=n===void 0?u6.tryCatch(e)(null):u6.tryCatch(e)(null,n),i===u6.errorObj&&uNe(i.e)},n=>{if(!n){let s=new Error(n+"");Object.assign(s,{cause:n}),n=s}let i=u6.tryCatch(e)(n);i===u6.errorObj&&uNe(i.e)}),t}_re.default=ILt});var dNe=b((DCr,lNe)=>{"use strict";var cNe=require("assert"),H9=require("util");function c6(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}H9.inherits(c6,Error);Object.defineProperty(c6.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function Ere(t,e,r){cNe(e),cNe.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=r,this.buffer=e}H9.inherits(Ere,c6);Object.defineProperty(Ere.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function vre(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}H9.inherits(vre,c6);Object.defineProperty(vre.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function FM(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}H9.inherits(FM,c6);Object.defineProperty(FM.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function Sre(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}H9.inherits(Sre,FM);Object.defineProperty(Sre.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});lNe.exports={RedisError:c6,ParserError:Ere,ReplyError:vre,AbortError:FM,InterruptError:Sre}});var hNe=b((kCr,fNe)=>{"use strict";var pNe=require("assert"),l6=class extends Error{get name(){return this.constructor.name}},wre=class extends l6{constructor(e,r,n){pNe(r),pNe.strictEqual(typeof n,"number");let i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=i,this.offset=n,this.buffer=r}get name(){return this.constructor.name}},Are=class extends l6{constructor(e){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=r}get name(){return this.constructor.name}},BM=class extends l6{get name(){return this.constructor.name}},Cre=class extends BM{get name(){return this.constructor.name}};fNe.exports={RedisError:l6,ParserError:wre,ReplyError:Are,AbortError:BM,InterruptError:Cre}});var Sg=b((MCr,mNe)=>{"use strict";var RLt=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?dNe():hNe();mNe.exports=RLt});var z9=b((PCr,Tre)=>{var yNe=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],DLt=function(e){for(var r,n=0,i=0,s=[],o=e.length;n<o;n++)r=e.charCodeAt(n),r<128?s[i++]=r:r<2048?(s[i++]=r>>6|192,s[i++]=r&63|128):(r&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++n)&1023),s[i++]=r>>18|240,s[i++]=r>>12&63|128,s[i++]=r>>6&63|128,s[i++]=r&63|128):(s[i++]=r>>12|224,s[i++]=r>>6&63|128,s[i++]=r&63|128);return s},gNe=Tre.exports=function(e){for(var r,n=0,i=-1,s=0,o=0,a=typeof e=="string"?DLt(e):e,u=a.length;n<u;){if(r=a[n++],i===-1)r===123&&(i=n);else if(r!==125)o=yNe[(r^o>>8)&255]^o<<8;else if(n-1!==i)return o&16383;s=yNe[(r^s>>8)&255]^s<<8}return s&16383};Tre.exports.generateMulti=function(e){for(var r=1,n=e.length,i=gNe(e[0]);r<n;)if(gNe(e[r++])!==i)return-1;return i}});var CNe=b((NCr,ANe)=>{var _Ne=9007199254740991,kLt="[object Arguments]",MLt="[object Function]",PLt="[object GeneratorFunction]",NLt=/^(?:0|[1-9]\d*)$/;function ENe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function FLt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var W9=Object.prototype,J9=W9.hasOwnProperty,vNe=W9.toString,BLt=W9.propertyIsEnumerable,bNe=Math.max;function qLt(t,e){var r=WLt(t)||zLt(t)?FLt(t.length,String):[],n=r.length,i=!!n;for(var s in t)(e||J9.call(t,s))&&!(i&&(s=="length"||wNe(s,n)))&&r.push(s);return r}function LLt(t,e,r,n){return t===void 0||Ore(t,W9[r])&&!J9.call(n,r)?e:t}function jLt(t,e,r){var n=t[e];(!(J9.call(t,e)&&Ore(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function $Lt(t){if(!Ire(t))return HLt(t);var e=GLt(t),r=[];for(var n in t)n=="constructor"&&(e||!J9.call(t,n))||r.push(n);return r}function SNe(t,e){return e=bNe(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=bNe(r.length-e,0),s=Array(i);++n<i;)s[n]=r[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=r[n];return o[e]=s,ENe(t,this,o)}}function ULt(t,e,r,n){r||(r={});for(var i=-1,s=e.length;++i<s;){var o=e[i],a=n?n(r[o],t[o],o,r,t):void 0;jLt(r,o,a===void 0?t[o]:a)}return r}function KLt(t){return SNe(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&VLt(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}function wNe(t,e){return e=e??_Ne,!!e&&(typeof t=="number"||NLt.test(t))&&t>-1&&t%1==0&&t<e}function VLt(t,e,r){if(!Ire(r))return!1;var n=typeof e;return(n=="number"?xre(r)&&wNe(e,r.length):n=="string"&&e in r)?Ore(r[e],t):!1}function GLt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||W9;return t===r}function HLt(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function Ore(t,e){return t===e||t!==t&&e!==e}function zLt(t){return JLt(t)&&J9.call(t,"callee")&&(!BLt.call(t,"callee")||vNe.call(t)==kLt)}var WLt=Array.isArray;function xre(t){return t!=null&&QLt(t.length)&&!YLt(t)}function JLt(t){return XLt(t)&&xre(t)}function YLt(t){var e=Ire(t)?vNe.call(t):"";return e==MLt||e==PLt}function QLt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_Ne}function Ire(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function XLt(t){return!!t&&typeof t=="object"}var ZLt=KLt(function(t,e,r,n){ULt(e,tjt(e),t,n)}),ejt=SNe(function(t){return t.push(void 0,LLt),ENe(ZLt,void 0,t)});function tjt(t){return xre(t)?qLt(t,!0):$Lt(t)}ANe.exports=ejt});var xNe=b((FCr,ONe)=>{var rjt=9007199254740991,njt="[object Arguments]",ijt="[object Function]",sjt="[object GeneratorFunction]",Rre=Object.prototype,ojt=Rre.hasOwnProperty,TNe=Rre.toString,ajt=Rre.propertyIsEnumerable;function ujt(t){return ljt(t)&&ojt.call(t,"callee")&&(!ajt.call(t,"callee")||TNe.call(t)==njt)}function cjt(t){return t!=null&&pjt(t.length)&&!djt(t)}function ljt(t){return hjt(t)&&cjt(t)}function djt(t){var e=fjt(t)?TNe.call(t):"";return e==ijt||e==sjt}function pjt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rjt}function fjt(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function hjt(t){return!!t&&typeof t=="object"}ONe.exports=ujt});var qM=b(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.isArguments=sm.defaults=sm.noop=void 0;var mjt=CNe();sm.defaults=mjt;var yjt=xNe();sm.isArguments=yjt;function gjt(){}sm.noop=gjt});var RNe=b((qCr,INe)=>{var d6=1e3,p6=d6*60,f6=p6*60,wg=f6*24,bjt=wg*7,_jt=wg*365.25;INe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Ejt(t);if(r==="number"&&isFinite(t))return e.long?Sjt(t):vjt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Ejt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*_jt;case"weeks":case"week":case"w":return r*bjt;case"days":case"day":case"d":return r*wg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*f6;case"minutes":case"minute":case"mins":case"min":case"m":return r*p6;case"seconds":case"second":case"secs":case"sec":case"s":return r*d6;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function vjt(t){var e=Math.abs(t);return e>=wg?Math.round(t/wg)+"d":e>=f6?Math.round(t/f6)+"h":e>=p6?Math.round(t/p6)+"m":e>=d6?Math.round(t/d6)+"s":t+"ms"}function Sjt(t){var e=Math.abs(t);return e>=wg?LM(t,e,wg,"day"):e>=f6?LM(t,e,f6,"hour"):e>=p6?LM(t,e,p6,"minute"):e>=d6?LM(t,e,d6,"second"):t+" ms"}function LM(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Dre=b((LCr,DNe)=>{function wjt(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=RNe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function y(...E){if(!y.enabled)return;let v=y,w=Number(new Date),T=w-(d||w);v.diff=T,v.prev=d,v.curr=w,d=w,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let A=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=E[A];x=M.call(v,I),E.splice(A,1),A--}return x}),r.formatArgs.call(v,E),(v.log||r.log).apply(v,E)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:E=>{p=E}}),typeof r.init=="function"&&r.init(y),y}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,y=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,y=p,f++):(p++,f++);else if(h!==-1)f=h+1,y++,p=y;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}DNe.exports=wjt});var kNe=b((Na,jM)=>{Na.formatArgs=Cjt;Na.save=Tjt;Na.load=Ojt;Na.useColors=Ajt;Na.storage=xjt();Na.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Na.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ajt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Cjt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+jM.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Na.log=console.debug||console.log||(()=>{});function Tjt(t){try{t?Na.storage.setItem("debug",t):Na.storage.removeItem("debug")}catch{}}function Ojt(){let t;try{t=Na.storage.getItem("debug")||Na.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function xjt(){try{return localStorage}catch{}}jM.exports=Dre()(Na);var{formatters:Ijt}=jM.exports;Ijt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var PNe=b((Cs,UM)=>{var Rjt=require("tty"),$M=require("util");Cs.init=Bjt;Cs.log=Pjt;Cs.formatArgs=kjt;Cs.save=Njt;Cs.load=Fjt;Cs.useColors=Djt;Cs.destroy=$M.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Cs.colors=[6,2,3,4,5,1];try{let t=O3();t&&(t.stderr||t).level>=2&&(Cs.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Cs.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Djt(){return"colors"in Cs.inspectOpts?!!Cs.inspectOpts.colors:Rjt.isatty(process.stderr.fd)}function kjt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+UM.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Mjt()+e+" "+t[0]}function Mjt(){return Cs.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Pjt(...t){return process.stderr.write($M.formatWithOptions(Cs.inspectOpts,...t)+`
`)}function Njt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Fjt(){return process.env.DEBUG}function Bjt(t){t.inspectOpts={};let e=Object.keys(Cs.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Cs.inspectOpts[e[r]]}UM.exports=Dre()(Cs);var{formatters:MNe}=UM.exports;MNe.o=function(t){return this.inspectOpts.colors=this.useColors,$M.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};MNe.O=function(t){return this.inspectOpts.colors=this.useColors,$M.inspect(t,this.inspectOpts)}});var NNe=b((jCr,kre)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?kre.exports=kNe():kre.exports=PNe()});var qNe=b(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.genRedactedString=Nf.getStringValue=Nf.MAX_ARGUMENT_LENGTH=void 0;var qjt=NNe(),Mre=200;Nf.MAX_ARGUMENT_LENGTH=Mre;var Ljt="ioredis";function FNe(t){if(t!==null)switch(typeof t){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(t))return t.toString("hex");if(Array.isArray(t))return t.join(",");try{return JSON.stringify(t)}catch{return}case"string":return t}}Nf.getStringValue=FNe;function BNe(t,e){let{length:r}=t;return r<=e?t:t.slice(0,e)+' ... <REDACTED full-length="'+r+'">'}Nf.genRedactedString=BNe;function jjt(t){let e=(0,qjt.default)(`${Ljt}:${t}`);function r(...n){if(e.enabled){for(let i=1;i<n.length;i++){let s=FNe(n[i]);typeof s=="string"&&s.length>Mre&&(n[i]=BNe(s,Mre))}return e.apply(null,n)}}return Object.defineProperties(r,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),r}Nf.default=jjt});var jNe=b(Pre=>{"use strict";Object.defineProperty(Pre,"__esModule",{value:!0});var LNe=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,$jt={RedisCloudFixed:{ca:LNe},RedisCloudFlexible:{ca:LNe}};Pre.default=$jt});var ji=b(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.noop=Vt.defaults=Vt.Debug=Vt.getPackageMeta=Vt.zipMap=Vt.CONNECTION_CLOSED_ERROR_MSG=Vt.shuffle=Vt.sample=Vt.resolveTLSProfile=Vt.parseURL=Vt.optimizeErrorStack=Vt.toArg=Vt.convertMapToArray=Vt.convertObjectToArray=Vt.timeout=Vt.packObject=Vt.isInt=Vt.wrapMultiResult=Vt.convertBufferToString=void 0;var Ujt=require("fs"),Kjt=require("path"),$Ne=require("url"),Nre=qM();Object.defineProperty(Vt,"defaults",{enumerable:!0,get:function(){return Nre.defaults}});Object.defineProperty(Vt,"noop",{enumerable:!0,get:function(){return Nre.noop}});var Vjt=qNe();Vt.Debug=Vjt.default;var Gjt=jNe();function UNe(t,e){if(t instanceof Buffer)return t.toString(e);if(Array.isArray(t)){let r=t.length,n=Array(r);for(let i=0;i<r;++i)n[i]=t[i]instanceof Buffer&&e==="utf8"?t[i].toString():UNe(t[i],e);return n}return t}Vt.convertBufferToString=UNe;function Hjt(t){if(!t)return null;let e=[],r=t.length;for(let n=0;n<r;++n){let i=t[n];i instanceof Error?e.push([i]):e.push([null,i])}return e}Vt.wrapMultiResult=Hjt;function KNe(t){let e=parseFloat(t);return!isNaN(t)&&(e|0)===e}Vt.isInt=KNe;function zjt(t){let e={},r=t.length;for(let n=1;n<r;n+=2)e[t[n-1]]=t[n];return e}Vt.packObject=zjt;function Wjt(t,e){let r=null,n=function(){r&&(clearTimeout(r),r=null,t.apply(this,arguments))};return r=setTimeout(n,e,new Error("timeout")),n}Vt.timeout=Wjt;function Jjt(t){let e=[],r=Object.keys(t);for(let n=0,i=r.length;n<i;n++)e.push(r[n],t[r[n]]);return e}Vt.convertObjectToArray=Jjt;function Yjt(t){let e=[],r=0;return t.forEach(function(n,i){e[r]=i,e[r+1]=n,r+=2}),e}Vt.convertMapToArray=Yjt;function Qjt(t){return t===null||typeof t>"u"?"":String(t)}Vt.toArg=Qjt;function Xjt(t,e,r){let n=e.split(`
`),i="",s;for(s=1;s<n.length&&n[s].indexOf(r)!==-1;++s);for(let o=s;o<n.length;++o)i+=`
`+n[o];if(t.stack){let o=t.stack.indexOf(`
`);t.stack=t.stack.slice(0,o)+i}return t}Vt.optimizeErrorStack=Xjt;function Zjt(t){if(KNe(t))return{port:t};let e=(0,$Ne.parse)(t,!0,!0);!e.slashes&&t[0]!=="/"&&(t="//"+t,e=(0,$Ne.parse)(t,!0,!0));let r=e.query||{},n={};if(e.auth){let i=e.auth.indexOf(":");n.username=i===-1?e.auth:e.auth.slice(0,i),n.password=i===-1?"":e.auth.slice(i+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(n.db=e.pathname.slice(1)):n.path=e.pathname),e.host&&(n.host=e.hostname),e.port&&(n.port=e.port),typeof r.family=="string"){let i=Number.parseInt(r.family,10);Number.isNaN(i)||(n.family=i)}return(0,Nre.defaults)(n,r),n}Vt.parseURL=Zjt;function e$t(t){let e=t?.tls;typeof e=="string"&&(e={profile:e});let r=Gjt.default[e?.profile];return r&&(e=Object.assign({},r,e),delete e.profile,t=Object.assign({},t,{tls:e})),t}Vt.resolveTLSProfile=e$t;function t$t(t,e=0){let r=t.length;return e>=r?null:t[e+Math.floor(Math.random()*(r-e))]}Vt.sample=t$t;function r$t(t){let e=t.length;for(;e>0;){let r=Math.floor(Math.random()*e);e--,[t[e],t[r]]=[t[r],t[e]]}return t}Vt.shuffle=r$t;Vt.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function n$t(t,e){let r=new Map;return t.forEach((n,i)=>{r.set(n,e[i])}),r}Vt.zipMap=n$t;var h6=null;async function i$t(){if(h6)return h6;try{let t=(0,Kjt.resolve)(__dirname,"..","..","package.json"),e=await Ujt.promises.readFile(t,"utf8");return h6={version:JSON.parse(e).version},h6}catch{return h6={version:"error-fetching-version"},h6}}Vt.getPackageMeta=i$t});var VNe=b(m6=>{"use strict";Object.defineProperty(m6,"__esModule",{value:!0});m6.parseBlockOption=m6.parseSecondsArgument=void 0;var Fre=t=>{if(typeof t=="number")return t;if(Buffer.isBuffer(t))return Fre(t.toString());if(typeof t=="string"){let e=Number(t);return Number.isFinite(e)?e:void 0}},s$t=t=>{if(typeof t=="string")return t;if(Buffer.isBuffer(t))return t.toString()},o$t=t=>{let e=Fre(t);if(e!==void 0)return e<=0?0:e*1e3};m6.parseSecondsArgument=o$t;var a$t=t=>{for(let e=0;e<t.length;e++){let r=s$t(t[e]);if(r&&r.toLowerCase()==="block"){let n=Fre(t[e+1]);return n===void 0?void 0:n<=0?0:n}}return null};m6.parseBlockOption=a$t});var Ff=b(Lre=>{"use strict";Object.defineProperty(Lre,"__esModule",{value:!0});var GNe=a6(),u$t=z9(),c$t=im(),Ag=ji(),Bre=VNe(),zd=class t{constructor(e,r=[],n={},i){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=r.flat(),this.callback=i,this.initPromise(),n.keyPrefix){let s=n.keyPrefix instanceof Buffer,o=s?n.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(o===null&&(o=Buffer.from(n.keyPrefix)),Buffer.concat([o,a])):s?Buffer.concat([n.keyPrefix,Buffer.from(String(a))]):n.keyPrefix+a)}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,r){return r=r.toLowerCase(),!!this.getFlagMap()[e][r]}static setArgumentTransformer(e,r){this._transformer.argument[e]=r}static setReplyTransformer(e,r){this._transformer.reply[e]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(t.FLAGS).reduce((e,r)=>(e[r]={},t.FLAGS[r].forEach(n=>{e[r][n]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:u$t(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let r,n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let i=new qre;i.push(n);for(let s=0;s<this.args.length;++s){let o=this.args[s];o instanceof Buffer?o.length===0?i.push(`$0\r
\r
`):(i.push("$"+o.length+`\r
`),i.push(o),i.push(`\r
`)):i.push("$"+Buffer.byteLength(o)+`\r
`+o+`\r
`)}r=i.toBuffer()}else{r=n;for(let i=0;i<this.args.length;++i){let s=this.args[i];r+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return r}stringifyArguments(){for(let e=0;e<this.args.length;++e){let r=this.args[e];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,Ag.toArg)(r))}}transformReply(e){this.replyEncoding&&(e=(0,Ag.convertBufferToString)(e,this.replyEncoding));let r=t._transformer.reply[this.name];return r&&(e=r(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}setBlockingTimeout(e){if(e<=0)return;this._blockingTimeoutTimer&&(clearTimeout(this._blockingTimeoutTimer),this._blockingTimeoutTimer=void 0);let r=Date.now();this._blockingDeadline===void 0&&(this._blockingDeadline=r+e);let n=this._blockingDeadline-r;if(n<=0){this.resolve(null);return}this._blockingTimeoutTimer=setTimeout(()=>{if(this.isResolved){this._blockingTimeoutTimer=void 0;return}this._blockingTimeoutTimer=void 0,this.resolve(null)},n)}extractBlockingTimeout(){let e=this.args;if(!e||e.length===0)return;let r=this.name.toLowerCase();if(t.checkFlag("LAST_ARG_TIMEOUT_COMMANDS",r))return(0,Bre.parseSecondsArgument)(e[e.length-1]);if(t.checkFlag("FIRST_ARG_TIMEOUT_COMMANDS",r))return(0,Bre.parseSecondsArgument)(e[0]);if(t.checkFlag("BLOCK_OPTION_COMMANDS",r))return(0,Bre.parseBlockOption)(e)}_clearTimers(){let e=this._commandTimeoutTimer;e&&(clearTimeout(e),delete this._commandTimeoutTimer);let r=this._blockingTimeoutTimer;r&&(clearTimeout(r),delete this._blockingTimeoutTimer)}initPromise(){let e=new Promise((r,n)=>{if(!this.transformed){this.transformed=!0;let i=t._transformer.argument[this.name];i&&(this.args=i(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.reject=i=>{this._clearTimers(),this.errorStack?n((0,Ag.optimizeErrorStack)(i,this.errorStack.stack,__dirname)):n(i)}});this.promise=(0,c$t.default)(e,this.callback)}_iterateKeys(e=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,GNe.exists)(this.name,{caseInsensitive:!0}))){let r=(0,GNe.getKeyIndexes)(this.name,this.args,{nameCaseInsensitive:!0});for(let n of r)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return r=>{try{this._clearTimers(),e(this.transformReply(r)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}};Lre.default=zd;zd.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"],BLOCKING_COMMANDS:["blpop","brpop","brpoplpush","blmove","bzpopmin","bzpopmax","bzmpop","blmpop","xread","xreadgroup"],LAST_ARG_TIMEOUT_COMMANDS:["blpop","brpop","brpoplpush","blmove","bzpopmin","bzpopmax"],FIRST_ARG_TIMEOUT_COMMANDS:["bzmpop","blmpop"],BLOCK_OPTION_COMMANDS:["xread","xreadgroup"]};zd._transformer={argument:{},reply:{}};var HNe=function(t){if(t.length===1){if(t[0]instanceof Map)return(0,Ag.convertMapToArray)(t[0]);if(typeof t[0]=="object"&&t[0]!==null)return(0,Ag.convertObjectToArray)(t[0])}return t},zNe=function(t){if(t.length===2){if(t[1]instanceof Map)return[t[0]].concat((0,Ag.convertMapToArray)(t[1]));if(typeof t[1]=="object"&&t[1]!==null)return[t[0]].concat((0,Ag.convertObjectToArray)(t[1]))}return t};zd.setArgumentTransformer("mset",HNe);zd.setArgumentTransformer("msetnx",HNe);zd.setArgumentTransformer("hset",zNe);zd.setArgumentTransformer("hmset",zNe);zd.setReplyTransformer("hgetall",function(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2){let n=t[r],i=t[r+1];n in e?Object.defineProperty(e,n,{value:i,configurable:!0,enumerable:!0,writable:!0}):e[n]=i}return e}return t});var qre=class{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),r=0;for(let n of this.items){let i=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,r):e.write(n,r,i),r+=i}return e}}});var WNe=b(jre=>{"use strict";Object.defineProperty(jre,"__esModule",{value:!0});var l$t=Sg(),KM=class extends l$t.RedisError{constructor(e,r){super(e),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};jre.default=KM;KM.defaultMessage="Failed to refresh slots cache."});var VM=b(Ure=>{"use strict";Object.defineProperty(Ure,"__esModule",{value:!0});var d$t=require("stream"),$re=class extends d$t.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(r,n)=>{if(r){this.emit("error",r);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}};Ure.default=$re});var eFe=b(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.executeWithAutoPipelining=fi.getFirstValueInFlattenedArray=fi.shouldUseAutoPipelining=fi.notAllowedAutoPipelineCommands=fi.kCallbacks=fi.kExec=void 0;var YNe=qM(),p$t=z9(),JNe=im();fi.kExec=Symbol("exec");fi.kCallbacks=Symbol("callbacks");fi.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function QNe(t,e){if(t._runningAutoPipelines.has(e)||!t._autoPipelines.has(e))return;t._runningAutoPipelines.add(e);let r=t._autoPipelines.get(e);t._autoPipelines.delete(e);let n=r[fi.kCallbacks];r[fi.kCallbacks]=null,r.exec(function(i,s){if(t._runningAutoPipelines.delete(e),i)for(let o=0;o<n.length;o++)process.nextTick(n[o],i);else for(let o=0;o<n.length;o++)process.nextTick(n[o],...s[o]);t._autoPipelines.has(e)&&QNe(t,e)})}function f$t(t,e,r){return e&&t.options.enableAutoPipelining&&!t.isPipeline&&!fi.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)}fi.shouldUseAutoPipelining=f$t;function XNe(t){for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="string")return r;if(Array.isArray(r)||(0,YNe.isArguments)(r)){if(r.length===0)continue;return r[0]}let n=[r].flat();if(n.length>0)return n[0]}}fi.getFirstValueInFlattenedArray=XNe;function ZNe(t,e,r,n,i){if(t.isCluster&&!t.slots.length)return t.status==="wait"&&t.connect().catch(YNe.noop),(0,JNe.default)(new Promise(function(c,l){t.delayUntilReady(d=>{if(d){l(d);return}ZNe(t,e,r,n,null).then(c,l)})}),i);let s=t.options.keyPrefix||"",o=t.isCluster?t.slots[p$t(`${s}${XNe(n)}`)].join(","):"main";if(!t._autoPipelines.has(o)){let c=t.pipeline();c[fi.kExec]=!1,c[fi.kCallbacks]=[],t._autoPipelines.set(o,c)}let a=t._autoPipelines.get(o);a[fi.kExec]||(a[fi.kExec]=!0,setImmediate(QNe,t,o));let u=new Promise(function(c,l){a[fi.kCallbacks].push(function(d,p){if(d){l(d);return}c(p)}),e==="call"&&n.unshift(r),a[e](...n)});return(0,JNe.default)(u,i)}fi.executeWithAutoPipelining=ZNe});var tFe=b(Vre=>{"use strict";Object.defineProperty(Vre,"__esModule",{value:!0});var h$t=require("crypto"),m$t=Ff(),y$t=im(),Kre=class{constructor(e,r=null,n="",i=!1){this.lua=e,this.numberOfKeys=r,this.keyPrefix=n,this.readOnly=i,this.sha=(0,h$t.createHash)("sha1").update(e).digest("hex");let s=this.sha,o=new WeakSet;this.Command=class extends m$t.default{toWritable(u){let c=this.reject;return this.reject=l=>{l.message.indexOf("NOSCRIPT")!==-1&&o.delete(u),c.call(this,l)},o.has(u)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(o.add(u),this.name="eval",this.args[0]=e),super.toWritable(u)}}}execute(e,r,n,i){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...r],n);return s.promise=s.promise.catch(o=>{if(o.message.indexOf("NOSCRIPT")===-1)throw o;let a=new this.Command("evalsha",[this.sha,...r],n);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,y$t.default)(s.promise,i),e.sendCommand(s)}};Vre.default=Kre});var HM=b(Hre=>{"use strict";Object.defineProperty(Hre,"__esModule",{value:!0});var g$t=a6(),GM=eFe(),b$t=Ff(),_$t=tFe(),Bf=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return Gre.slice(0)}createBuiltinCommand(e){return{string:om(null,e,"utf8"),buffer:om(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=om(e,e,"utf8"),this[e+"Buffer"]=om(e+"Buffer",e,null)}defineCommand(e,r){let n=new _$t.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[e]=n,this[e]=rFe(e,e,n,"utf8"),this[e+"Buffer"]=rFe(e+"Buffer",e,n,null)}sendCommand(e,r,n){throw new Error('"sendCommand" is not implemented')}},Gre=g$t.list.filter(t=>t!=="monitor");Gre.push("sentinel");Gre.forEach(function(t){Bf.prototype[t]=om(t,t,"utf8"),Bf.prototype[t+"Buffer"]=om(t+"Buffer",t,null)});Bf.prototype.call=om("call","utf8");Bf.prototype.callBuffer=om("callBuffer",null);Bf.prototype.send_command=Bf.prototype.call;function om(t,e,r){return typeof r>"u"&&(r=e,e=null),function(...n){let i=e||n.shift(),s=n[n.length-1];typeof s=="function"?n.pop():s=void 0;let o={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,GM.shouldUseAutoPipelining)(this,t,i)?(0,GM.executeWithAutoPipelining)(this,t,i,n,s):this.sendCommand(new b$t.default(i,n,o,s))}}function rFe(t,e,r,n){return function(...i){let s=typeof i[i.length-1]=="function"?i.pop():void 0,o={replyEncoding:n};return this.options.showFriendlyErrorStack&&(o.errorStack=new Error),(0,GM.shouldUseAutoPipelining)(this,t,e)?(0,GM.executeWithAutoPipelining)(this,t,e,i,s):r.execute(this,i,o,s)}}Hre.default=Bf});var Jre=b(Wre=>{"use strict";Object.defineProperty(Wre,"__esModule",{value:!0});var zre=z9(),nFe=a6(),iFe=im(),E$t=require("util"),v$t=Ff(),S$t=ji(),w$t=HM();function A$t(t,e){let r=zre(e[0]),n=t._groupsBySlot[r];for(let i=1;i<e.length;i++)if(t._groupsBySlot[zre(e[i])]!==n)return-1;return r}var am=class extends w$t.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(n=>{let i=e.scriptsSet[n];this._shaToScript[i.sha]=i,this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),e.addedBuiltinSet.forEach(n=>{this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),this.promise=new Promise((n,i)=>{this.resolve=n,this.reject=i});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(e,r){if(this._queue[r].name==="exec"&&Array.isArray(e[1])){let i=e[1].length;for(let s=0;s<i;s++){if(e[1][s]instanceof Error)continue;let o=this._queue[r-(i-s)];try{e[1][s]=o.transformReply(e[1][s])}catch(a){e[1][s]=a}}}if(this._result[r]=e,--this.replyPending)return;if(this.isCluster){let i=!0,s;for(let o=0;o<this._result.length;++o){let a=this._result[o][0],u=this._queue[o];if(a){if(u.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:a.name,message:a.message};else if(s.name!==a.name||s.message!==a.message){i=!1;break}}else if(!u.inTransaction&&!((0,nFe.exists)(u.name,{caseInsensitive:!0})&&(0,nFe.hasFlag)(u.name,"readonly",{nameCaseInsensitive:!0}))){i=!1;break}}if(s&&i){let o=this,a=s.message.split(" "),u=this._queue,c=!1;this._queue=[];for(let f=0;f<u.length;++f){if(a[0]==="ASK"&&!c&&u[f].name!=="asking"&&(!u[f-1]||u[f-1].name!=="asking")){let h=new v$t.default("asking");h.ignore=!0,this.sendCommand(h)}u[f].initPromise(),this.sendCommand(u[f]),c=u[f].inTransaction}let l=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=function(){o.exec()},p=this.redis;if(p.handleError(s,this.leftRedirections,{moved:function(f,h){o.preferKey=h,p.slots[a[1]]=[h],p._groupsBySlot[a[1]]=p._groupsIds[p.slots[a[1]].join(";")],p.refreshSlotsCache(),o.exec()},ask:function(f,h){o.preferKey=h,o.exec()},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:()=>{l=!1},defaults:()=>{l=!1}}),l)return}}let n=0;for(let i=0;i<this._queue.length-n;++i)this._queue[i+n].ignore&&(n+=1),this._result[i]=this._result[i+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let r=this._queue.length;return e.pipelineIndex=r,e.promise.then(n=>{this.fillResult([null,n],r)}).catch(n=>{this.fillResult([n],r)}),this._queue.push(e),this}addBatch(e){let r,n,i;for(let s=0;s<e.length;++s)r=e[s],n=r[0],i=r.slice(1),this[n].apply(this,i);return this}};Wre.default=am;var C$t=am.prototype.multi;am.prototype.multi=function(){return this._transactions+=1,C$t.apply(this,arguments)};var sFe=am.prototype.execBuffer;am.prototype.execBuffer=(0,E$t.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),sFe.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");am.prototype.exec=function(t){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(S$t.noop),t&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,iFe.default)(this.promise,t)),this.redis.delayUntilReady(i=>{if(i){this.reject(i);return}this.exec(t)}),this.promise;if(this._transactions>0)return this._transactions-=1,sFe.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,iFe.default)(this.promise,t)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let i=[];for(let s=0;s<this._queue.length;s++){let o=this._queue[s].getKeys();if(o.length&&i.push(o[0]),o.length&&zre.generateMulti(o)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(i.length){if(e=A$t(this.redis,i),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let r=this;return n(),this.promise;function n(){let i=r.replyPending=r._queue.length,s;r.isCluster&&(s={slot:e,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let o="",a,u={isPipeline:!0,destination:r.isCluster?s:{redis:r.redis},write(c){typeof c!="string"?(a||(a=[]),o&&(a.push(Buffer.from(o,"utf8")),o=""),a.push(c)):o+=c,--i||(a?(o&&a.push(Buffer.from(o,"utf8")),u.destination.redis.stream.write(Buffer.concat(a))):u.destination.redis.stream.write(o),i=r._queue.length,o="",a=void 0)}};for(let c=0;c<r._queue.length;++c)r.redis.sendCommand(r._queue[c],u,s);return r.promise}}});var Xre=b(zM=>{"use strict";Object.defineProperty(zM,"__esModule",{value:!0});zM.addTransactionSupport=void 0;var Yre=ji(),Qre=im(),oFe=Jre();function T$t(t){t.pipeline=function(n){let i=new oFe.default(this);return Array.isArray(n)&&i.addBatch(n),i};let{multi:e}=t;t.multi=function(n,i){if(typeof i>"u"&&!Array.isArray(n)&&(i=n,n=null),i&&i.pipeline===!1)return e.call(this);let s=new oFe.default(this);s.multi(),Array.isArray(n)&&s.addBatch(n);let o=s.exec;s.exec=function(u){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(Yre.noop),(0,Qre.default)(new Promise((l,d)=>{this.redis.delayUntilReady(p=>{if(p){d(p);return}this.exec(s).then(l,d)})}),u);if(this._transactions>0&&o.call(s),this.nodeifiedPromise)return o.call(s);let c=o.call(s);return(0,Qre.default)(c.then(function(l){let d=l[l.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let p=0;p<l.length-1;++p)l[p][0]&&d[0].previousErrors.push(l[p][0]);throw d[0]}return(0,Yre.wrapMultiResult)(d[1])}),u)};let{execBuffer:a}=s;return s.execBuffer=function(u){return this._transactions>0&&a.call(s),s.exec(u)},s};let{exec:r}=t;t.exec=function(n){return(0,Qre.default)(r.call(this).then(function(i){return Array.isArray(i)&&(i=(0,Yre.wrapMultiResult)(i)),i}),n)}}zM.addTransactionSupport=T$t});var ene=b(Zre=>{"use strict";Object.defineProperty(Zre,"__esModule",{value:!0});function O$t(t,e){Object.getOwnPropertyNames(e.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})}Zre.default=O$t});var uFe=b(WM=>{"use strict";Object.defineProperty(WM,"__esModule",{value:!0});WM.DEFAULT_CLUSTER_OPTIONS=void 0;var aFe=require("dns");WM.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:t=>Math.min(100+t*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:aFe.resolveSrv,dnsLookup:aFe.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var y6=b(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.getConnectionName=wo.weightSrvRecords=wo.groupSrvRecords=wo.getUniqueHostnamesFromOptions=wo.normalizeNodeOptions=wo.nodeKeyToRedisOptions=wo.getNodeKey=void 0;var cFe=ji(),x$t=require("net");function I$t(t){return t.port=t.port||6379,t.host=t.host||"127.0.0.1",t.host+":"+t.port}wo.getNodeKey=I$t;function R$t(t){let e=t.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${t}`);return{host:t.slice(0,e),port:Number(t.slice(e+1))}}wo.nodeKeyToRedisOptions=R$t;function D$t(t){return t.map(e=>{let r={};if(typeof e=="object")Object.assign(r,e);else if(typeof e=="string")Object.assign(r,(0,cFe.parseURL)(e));else if(typeof e=="number")r.port=e;else throw new Error("Invalid argument "+e);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,cFe.resolveTLSProfile)(r)})}wo.normalizeNodeOptions=D$t;function k$t(t){let e={};return t.forEach(r=>{e[r.host]=!0}),Object.keys(e).filter(r=>!(0,x$t.isIP)(r))}wo.getUniqueHostnamesFromOptions=k$t;function M$t(t){let e={};for(let r of t)e.hasOwnProperty(r.priority)?(e[r.priority].totalWeight+=r.weight,e[r.priority].records.push(r)):e[r.priority]={totalWeight:r.weight,records:[r]};return e}wo.groupSrvRecords=M$t;function P$t(t){if(t.records.length===1)return t.totalWeight=0,t.records.shift();let e=Math.floor(Math.random()*(t.totalWeight+t.records.length)),r=0;for(let[n,i]of t.records.entries())if(r+=1+i.weight,r>e)return t.totalWeight-=i.weight,t.records.splice(n,1),i}wo.weightSrvRecords=P$t;function N$t(t,e){let r=`ioredis-cluster(${t})`;return e?`${r}:${e}`:r}wo.getConnectionName=N$t});var dFe=b(nne=>{"use strict";Object.defineProperty(nne,"__esModule",{value:!0});var lFe=y6(),tne=ji(),F$t=qf(),Wd=(0,tne.Debug)("cluster:subscriber"),rne=class{constructor(e,r,n=!1){this.connectionPool=e,this.emitter=r,this.isSharded=n,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){Wd("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}Wd("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(i,s)=>{!this.started||!this.subscriber||(0,lFe.getNodeKey)(this.subscriber.options)===s&&(Wd("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(Wd("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),Wd("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,tne.sample)(this.connectionPool.getNodes());if(!r){Wd("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:n}=r;Wd("selected a subscriber %s:%s",n.host,n.port);let i="subscriber";this.isSharded&&(i="ssubscriber"),this.subscriber=new F$t.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:(0,lFe.getConnectionName)(i,n.connectionName),lazyConnect:!0,tls:n.tls,retryStrategy:null}),this.subscriber.on("error",tne.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let o=e.condition||e.prevCondition;o&&o.subscriber&&(s.subscribe=o.subscriber.channels("subscribe"),s.psubscribe=o.subscriber.channels("psubscribe"),s.ssubscribe=o.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let o=0;for(let a of["subscribe","psubscribe","ssubscribe"]){let u=s[a];if(u.length!=0)if(Wd("%s %d channels",a,u.length),a==="ssubscribe")for(let c of u)o+=1,this.subscriber[a](c).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Wd("failed to ssubscribe to channel: %s",c)});else o+=1,this.subscriber[a](u).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Wd("failed to %s %d channels",a,u.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let o of["message","messageBuffer"])this.subscriber.on(o,(a,u)=>{this.emitter.emit(o,a,u)});for(let o of["pmessage","pmessageBuffer"])this.subscriber.on(o,(a,u,c)=>{this.emitter.emit(o,a,u,c)});if(this.isSharded==!0)for(let o of["smessage","smessageBuffer"])this.subscriber.on(o,(a,u)=>{this.emitter.emit(o,a,u)})}};nne.default=rne});var pFe=b(one=>{"use strict";Object.defineProperty(one,"__esModule",{value:!0});var B$t=require("events"),JM=ji(),ine=y6(),q$t=qf(),Y9=(0,JM.Debug)("cluster:connectionPool"),sne=class extends B$t.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let r=this.nodes[e];return Object.keys(r).map(n=>r[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let r=Object.keys(this.nodes[e]),n=(0,JM.sample)(r);return this.nodes[e][n]}addMasterNode(e){let r=(0,ine.getNodeKey)(e.options),n=this.createRedisFromOptions(e,e.options.readOnly);return e.options.readOnly?!1:(this.nodes.all[r]=n,this.nodes.master[r]=n,!0)}createRedisFromOptions(e,r){return new q$t.default((0,JM.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,r=!1){let n=(0,ine.getNodeKey)(e);r=!!r,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let i;return this.nodes.all[n]?(i=this.nodes.all[n],i.options.readOnly!==r&&(i.options.readOnly=r,Y9("Change role of %s to %s",n,r?"slave":"master"),i[r?"readonly":"readwrite"]().catch(JM.noop),r?(delete this.nodes.master[n],this.nodes.slave[n]=i):(delete this.nodes.slave[n],this.nodes.master[n]=i))):(Y9("Connecting to %s as %s",n,r?"slave":"master"),i=this.createRedisFromOptions(e,r),this.nodes.all[n]=i,this.nodes[r?"slave":"master"][n]=i,i.once("end",()=>{this.removeNode(n),this.emit("-node",i,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",i,n),i.on("error",function(s){this.emit("nodeError",s,n)})),i}reset(e){Y9("Reset with %O",e);let r={};e.forEach(n=>{let i=(0,ine.getNodeKey)(n);n.readOnly&&r[i]||(r[i]=n)}),Object.keys(this.nodes.all).forEach(n=>{r[n]||(Y9("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(r).forEach(n=>{let i=r[n];this.findOrCreate(i,i.readOnly)})}removeNode(e){let{nodes:r}=this;r.all[e]&&(Y9("Remove %s from the pool",e),delete r.all[e]),delete r.master[e],delete r.slave[e]}};one.default=sne});var YM=b((sTr,fFe)=>{"use strict";function Hn(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}Hn.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};Hn.prototype.get=function(e){return this.peekAt(e)};Hn.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Hn.prototype.peekFront=function(){return this.peek()};Hn.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Hn.prototype,"length",{get:function(){return this.size()}});Hn.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Hn.prototype.unshift=function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Hn.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Hn.prototype.push=function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Hn.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}};Hn.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(e<n/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};Hn.prototype.remove=function(e,r){var n=e,i,s=r;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||r<1)){if(n<0&&(n+=o),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=o)return i=this.toArray(),this.clear(),i;n+r>o&&(r=o-n);var u;for(i=new Array(r),u=0;u<r;u++)i[u]=this._list[this._head+n+u&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,u=r;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(e===0){for(this._head=this._head+r+a&this._capacityMask,u=r-1;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+e+r+a&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,u=o-(r+e);u>0;u--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};Hn.prototype.splice=function(e,r){var n=e;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,a,u=arguments.length,c=this._list.length,l=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+c&this._capacityMask);u>l;)this.unshift(arguments[--u]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+r));var d=o.length;for(s=0;s<d;s++)o[s]=this._list[this._head+n+r+s&this._capacityMask];for(r===0?(a=[],n!=i&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-d+c&this._capacityMask);l<u;)this.push(arguments[l++]);for(s=0;s<d;s++)this.push(o[s])}return a}else return this.remove(n,r)}};Hn.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};Hn.prototype.isEmpty=function(){return this._head===this._tail};Hn.prototype.toArray=function(){return this._copyArray(!1)};Hn.prototype._fromArray=function(e){var r=e.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var i=0;i<r;i++)this._list[i]=e[i]};Hn.prototype._copyArray=function(e,r){var n=this._list,i=n.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(r),a=0,u;if(e||this._head>this._tail){for(u=this._head;u<i;u++)o[a++]=n[u];for(u=0;u<this._tail;u++)o[a++]=n[u]}else for(u=this._head;u<this._tail;u++)o[a++]=n[u];return o};Hn.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Hn.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};Hn.prototype._nextPowerOf2=function(e){var r=Math.log(e)/Math.log(2),n=1<<r+1;return Math.max(n,4)};fFe.exports=Hn});var hFe=b(une=>{"use strict";Object.defineProperty(une,"__esModule",{value:!0});var L$t=ji(),j$t=YM(),$$t=(0,L$t.Debug)("delayqueue"),ane=class{constructor(){this.queues={},this.timeouts={}}push(e,r,n){let i=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new j$t),this.queues[e].push(r),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{i(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){let r=this.queues[e];if(!r)return;let{length:n}=r;if(n)for($$t("send %d commands in %s queue",n,e),this.queues[e]=null;r.length>0;)r.shift()()}};une.default=ane});var yFe=b(lne=>{"use strict";Object.defineProperty(lne,"__esModule",{value:!0});var mFe=y6(),U$t=ji(),K$t=qf(),QM=(0,U$t.Debug)("cluster:subscriberGroup:shardedSubscriber"),cne=class{constructor(e,r){this.emitter=e,this.started=!1,this.instance=null,this.messageListeners=new Map,this.onEnd=()=>{this.started=!1,this.emitter.emit("-node",this.instance,this.nodeKey)},this.onError=n=>{this.emitter.emit("nodeError",n,this.nodeKey)},this.onMoved=()=>{this.emitter.emit("moved")},this.instance=new K$t.default({port:r.port,host:r.host,username:r.username,password:r.password,enableReadyCheck:!1,offlineQueue:!0,connectionName:(0,mFe.getConnectionName)("ssubscriber",r.connectionName),lazyConnect:!0,tls:r.tls,retryStrategy:null}),this.nodeKey=(0,mFe.getNodeKey)(r),this.instance.once("end",this.onEnd),this.instance.on("error",this.onError),this.instance.on("moved",this.onMoved);for(let n of["smessage","smessageBuffer"]){let i=(...s)=>{this.emitter.emit(n,...s)};this.messageListeners.set(n,i),this.instance.on(n,i)}}async start(){if(this.started){QM("already started %s",this.nodeKey);return}try{await this.instance.connect(),QM("started %s",this.nodeKey),this.started=!0}catch(e){throw QM("failed to start %s: %s",this.nodeKey,e),this.started=!1,e}}stop(){this.started=!1,this.instance&&(this.instance.disconnect(),this.instance.removeAllListeners(),this.messageListeners.clear(),this.instance=null),QM("stopped %s",this.nodeKey)}isStarted(){return this.started}getInstance(){return this.instance}getNodeKey(){return this.nodeKey}};lne.default=cne});var gFe=b(dne=>{"use strict";Object.defineProperty(dne,"__esModule",{value:!0});var V$t=ji(),G$t=y6(),XM=z9(),H$t=yFe(),Ul=(0,V$t.Debug)("cluster:subscriberGroup"),g6=class t{constructor(e){this.subscriberGroupEmitter=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,this.failedAttemptsByNode=new Map,this.isResetting=!1,this.pendingReset=null,this.handleSubscriberConnectFailed=(r,n)=>{let s=(this.failedAttemptsByNode.get(n)||0)+1;this.failedAttemptsByNode.set(n,s);let o=Math.min(s,t.MAX_RETRY_ATTEMPTS),a=Math.min(t.BASE_BACKOFF_MS*2**o,t.MAX_BACKOFF_MS),u=Math.floor((Math.random()-.5)*(a*.5)),c=Math.max(0,a+u);Ul("Failed to connect subscriber for %s. Refreshing slots in %dms",n,c),this.subscriberGroupEmitter.emit("subscriberConnectFailed",{delay:c,error:r})},this.handleSubscriberConnectSucceeded=r=>{this.failedAttemptsByNode.delete(r)}}getResponsibleSubscriber(e){let r=this.clusterSlots[e][0];return this.shardedSubscribers.get(r)}addChannels(e){let r=XM(e[0]);for(let i of e)if(XM(i)!==r)return-1;let n=this.channels.get(r);return n?this.channels.set(r,n.concat(e)):this.channels.set(r,e),Array.from(this.channels.values()).reduce((i,s)=>i+s.length,0)}removeChannels(e){let r=XM(e[0]);for(let i of e)if(XM(i)!==r)return-1;let n=this.channels.get(r);if(n){let i=n.filter(s=>!e.includes(s));this.channels.set(r,i)}return Array.from(this.channels.values()).reduce((i,s)=>i+s.length,0)}stop(){for(let e of this.shardedSubscribers.values())e.stop();this.pendingReset=null,this.shardedSubscribers.clear(),this.subscriberToSlotsIndex.clear()}start(){let e=[];for(let r of this.shardedSubscribers.values())r.isStarted()||e.push(r.start().then(()=>{this.handleSubscriberConnectSucceeded(r.getNodeKey())}).catch(n=>{this.handleSubscriberConnectFailed(n,r.getNodeKey())}));return Promise.all(e)}async reset(e,r){if(this.isResetting){this.pendingReset={slots:e,nodes:r};return}this.isResetting=!0;try{let n=this._refreshSlots(e),i=this.hasUnhealthySubscribers();if(!n&&!i){Ul("No topology change detected or failed subscribers. Skipping reset.");return}for(let[o,a]of this.shardedSubscribers){if(this.subscriberToSlotsIndex.has(o)&&a.isStarted()){Ul("Skipping deleting subscriber for %s",o);continue}Ul("Removing subscriber for %s",o),a.stop(),this.shardedSubscribers.delete(o),this.subscriberGroupEmitter.emit("-subscriber")}let s=[];for(let[o,a]of this.subscriberToSlotsIndex){if(this.shardedSubscribers.has(o)){Ul("Skipping creating new subscriber for %s",o);continue}Ul("Creating new subscriber for %s",o);let u=r.find(l=>(0,G$t.getNodeKey)(l.options)===o);if(!u){Ul("Failed to find node for key %s",o);continue}let c=new H$t.default(this.subscriberGroupEmitter,u.options);this.shardedSubscribers.set(o,c),s.push(c.start().then(()=>{this.handleSubscriberConnectSucceeded(o)}).catch(l=>{this.handleSubscriberConnectFailed(l,o)})),this.subscriberGroupEmitter.emit("+subscriber")}await Promise.all(s),this._resubscribe(),this.subscriberGroupEmitter.emit("subscribersReady")}finally{if(this.isResetting=!1,this.pendingReset){let{slots:n,nodes:i}=this.pendingReset;this.pendingReset=null,await this.reset(n,i)}}}_refreshSlots(e){if(this._slotsAreEqual(e))return Ul("Nothing to refresh because the new cluster map is equal to the previous one."),!1;Ul("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<e.length;r++){let n=e[r][0];this.subscriberToSlotsIndex.has(n)||this.subscriberToSlotsIndex.set(n,[]),this.subscriberToSlotsIndex.get(n).push(Number(r))}return this.clusterSlots=JSON.parse(JSON.stringify(e)),!0}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,r)=>{let n=this.subscriberToSlotsIndex.get(r);n&&n.forEach(i=>{let s=e.getInstance(),o=this.channels.get(i);if(o&&o.length>0){if(s.status==="end")return;s.status==="ready"?s.ssubscribe(...o).catch(a=>{Ul("Failed to ssubscribe on node %s: %s",r,a)}):s.once("ready",()=>{s.ssubscribe(...o).catch(a=>{Ul("Failed to ssubscribe on node %s: %s",r,a)})})}})})}_slotsAreEqual(e){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(e)}hasUnhealthySubscribers(){let e=Array.from(this.shardedSubscribers.values()).some(n=>!n.isStarted()),r=Array.from(this.subscriberToSlotsIndex.keys()).some(n=>!this.shardedSubscribers.has(n));return e||r}};dne.default=g6;g6.MAX_RETRY_ATTEMPTS=10;g6.MAX_BACKOFF_MS=2e3;g6.BASE_BACKOFF_MS=100});var hne=b(fne=>{"use strict";Object.defineProperty(fne,"__esModule",{value:!0});var bFe=a6(),pne=require("events"),b6=Sg(),_Fe=im(),EFe=Ff(),ZM=WNe(),z$t=qf(),W$t=VM(),J$t=Xre(),fu=ji(),Y$t=ene(),Q$t=HM(),X$t=uFe(),Z$t=dFe(),eUt=pFe(),tUt=hFe(),_6=y6(),vFe=YM(),rUt=gFe(),En=(0,fu.Debug)("cluster"),SFe=new WeakSet,Q9=class t extends Q$t.default{constructor(e,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new tUt.default,this.offlineQueue=new vFe,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,pne.EventEmitter.call(this),this.startupNodes=e,this.options=(0,fu.defaults)({},r,X$t.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers&&this.createShardedSubscriberGroup(),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new eUt.default(this.options.redisOptions),this.connectionPool.on("-node",(n,i)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,i)=>{this.emit("node error",n,i)}),this.subscriber=new Z$t.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,i])=>{this.defineCommand(n,i)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{En("connecting failed: %s",n)})}connect(){return new Promise((e,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(i=>{if(this.connectionEpoch!==n){En("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),r(new b6.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){En("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new b6.RedisError("Connection is aborted"));return}this.connectionPool.reset(i),this.options.shardedSubscribers&&this.shardedSubscribers.reset(this.slots,this.connectionPool.getNodes("all")).catch(u=>{En("Error while starting subscribers: %s",u)});let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},o,a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",o),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((u,c)=>{u||c?(En("Ready check failed (%s). Reconnecting...",u||c),this.status==="connect"&&this.disconnect(!0)):s()}):s()};o=()=>{let u=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(u),r(u)},this.once("refresh",a),this.once("close",o),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(u=>{u&&u.message===ZM.default.defaultMessage&&(z$t.default.prototype.silentEmit.call(this,"error",u),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start().catch(u=>{En("Error while starting subscribers: %s",u)})}).catch(i=>{this.setStatus("close"),this.handleCloseEvent(i),this.invokeReadyDelayedCallbacks(i),r(i)})})}disconnect(e=!1){let r=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,En("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let n=(0,_Fe.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),n}return(0,_Fe.default)(Promise.all(this.nodes().map(n=>n.quit().catch(i=>{if(i.message===fu.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw i}))).then(()=>"OK"),e)}duplicate(e=[],r={}){let n=e.length>0?e:this.startupNodes.slice(0),i=Object.assign({},this.options,r);return new t(n,i)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let r=this,n=a=>{this.isRefreshing=!1;for(let u of this._refreshSlotsCacheCallbacks)u(a);this._refreshSlotsCacheCallbacks=[]},i=(0,fu.shuffle)(this.connectionPool.getNodes()),s=null;function o(a){if(a===i.length){let l=new ZM.default(ZM.default.defaultMessage,s);return n(l)}let u=i[a],c=`${u.options.host}:${u.options.port}`;En("getting slot cache from %s",c),r.getInfoFromNode(u,function(l){switch(r.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}l?(r.emit("node error",l,c),s=l,o(a+1)):(r.emit("refresh"),n())})}o(0)}sendCommand(e,r,n){if(this.status==="wait"&&this.connect().catch(fu.noop),this.status==="end")return e.reject(new Error(fu.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let i=this.options.scaleReads;i!=="master"&&(e.isReadOnly||(0,bFe.exists)(e.name)&&(0,bFe.hasFlag)(e.name,"readonly")||(i="master"));let s=n?n.slot:e.getSlot(),o={},a=this;if(!n&&!SFe.has(e)){SFe.add(e);let c=e.reject;e.reject=function(l){let d=u.bind(null,!0);a.handleError(l,o,{moved:function(p,f){En("command %s is moved to %s",e.name,f),s=Number(p),a.slots[p]?a.slots[p][0]=f:a.slots[p]=[f],a._groupsBySlot[p]=a._groupsIds[a.slots[p].join(";")],a.connectionPool.findOrCreate(a.natMapper(f)),u(),En("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(p,f){En("command %s is required to ask %s:%s",e.name,f);let h=a.natMapper(f);a.connectionPool.findOrCreate(h),u(!1,`${h.host}:${h.port}`)},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:function(p){c.call(e,p)},defaults:function(){c.call(e,l)}})}}u();function u(c,l){if(a.status==="end"){e.reject(new b6.AbortError("Cluster is ended."));return}let d;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)d=n.redis;else if(EFe.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||EFe.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(a.options.shardedSubscribers&&(e.name=="ssubscribe"||e.name=="sunsubscribe")){let p=a.shardedSubscribers.getResponsibleSubscriber(s);if(!p){e.reject(new b6.AbortError(`No sharded subscriber for slot: ${s}`));return}let f=-1;e.name=="ssubscribe"&&(f=a.shardedSubscribers.addChannels(e.getKeys())),e.name=="sunsubscribe"&&(f=a.shardedSubscribers.removeChannels(e.getKeys())),f!==-1?d=p.getInstance():e.reject(new b6.AbortError("Possible CROSSSLOT error: All channels must hash to the same slot"))}else d=a.subscriber.getInstance();if(!d){e.reject(new b6.AbortError("No subscriber for the cluster"));return}}else{if(!c){if(typeof s=="number"&&a.slots[s]){let p=a.slots[s];if(typeof i=="function"){let f=p.map(function(h){return a.connectionPool.getInstanceByKey(h)});d=i(f,e),Array.isArray(d)&&(d=(0,fu.sample)(d)),d||(d=f[0])}else{let f;i==="all"?f=(0,fu.sample)(p):i==="slave"&&p.length>1?f=(0,fu.sample)(p,1):f=p[0],d=a.connectionPool.getInstanceByKey(f)}}l&&(d=a.connectionPool.getInstanceByKey(l),d.asking())}d||(d=(typeof i=="function"?null:a.connectionPool.getSampleInstance(i))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=d)}d?d.sendCommand(e,r):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:r,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}handleError(e,r,n){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let i=e.message.split(" ");if(i[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",n.moved.bind(null,i[1],i[2]),{timeout:s}):n.moved(i[1],i[2])}else i[0]==="ASK"?n.ask(i[1],i[2]):i[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):i[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===fu.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new vFe}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{En('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){En("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){var r;e&&En("closed because %s",e);let n;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(n=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof n=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,En("Cluster is disconnected. Retrying after %dms",n),this.connect().catch(function(i){En("Got error %s when reconnecting. Ignoring...",i)})},n)):(this.options.shardedSubscribers&&((r=this.subscriberGroupEmitter)===null||r===void 0||r.removeAllListeners()),this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let r;for(;r=this.offlineQueue.shift();)r.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){En("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=e.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(e){let r=typeof e=="string"?e:`${e.host}:${e.port}`,n=null;return this.options.natMap&&typeof this.options.natMap=="function"?n=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(n=this.options.natMap[r]),n?(En("NAT mapping %s -> %O",r,n),Object.assign({},n)):typeof e=="string"?(0,_6.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,r){if(!e)return r(new Error("Node is disconnected"));let n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,_6.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",fu.noop),n.cluster("SLOTS",(0,fu.timeout)((i,s)=>{if(n.disconnect(),i)return En("error encountered running CLUSTER.SLOTS: %s",i),r(i);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){En("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),r();return}let o=[];En("cluster slots result count: %d",s.length);for(let u=0;u<s.length;++u){let c=s[u],l=c[0],d=c[1],p=[];for(let f=2;f<c.length;f++){if(!c[f][0])continue;let h=this.natMapper({host:c[f][0],port:c[f][1]});h.readOnly=f!==2,o.push(h),p.push(h.host+":"+h.port)}En("cluster slots result [%d]: slots %d~%d served by %s",u,l,d,p);for(let f=l;f<=d;f++)this.slots[f]=p}this._groupsIds=Object.create(null);let a=0;for(let u=0;u<16384;u++){let c=(this.slots[u]||[]).join(";");if(!c.length){this._groupsBySlot[u]=void 0;continue}this._groupsIds[c]||(this._groupsIds[c]=++a),this._groupsBySlot[u]=this._groupsIds[c]}this.connectionPool.reset(o),this.options.shardedSubscribers&&this.shardedSubscribers.reset(this.slots,this.connectionPool.getNodes("all")).catch(u=>{En("Error while starting subscribers: %s",u)}),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let r of this._readyDelayedCallbacks)process.nextTick(r,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(r,n)=>{if(r)return e(r);if(typeof n!="string")return e();let i,s=n.split(`\r
`);for(let o=0;o<s.length;++o){let a=s[o].split(":");if(a[0]==="cluster_state"){i=a[1];break}}i==="fail"?(En("cluster state not ok (%s)",i),e(null,i)):e()})}resolveSrv(e){return new Promise((r,n)=>{this.options.resolveSrv(e,(i,s)=>{if(i)return n(i);let o=this,a=(0,_6.groupSrvRecords)(s),u=Object.keys(a).sort((l,d)=>parseInt(l)-parseInt(d));function c(l){if(!u.length)return n(l);let d=u[0],p=a[d],f=(0,_6.weightSrvRecords)(p);p.records.length||u.shift(),o.dnsLookup(f.name).then(h=>r({host:h,port:f.port}),c)}c()})})}dnsLookup(e){return new Promise((r,n)=>{this.options.dnsLookup(e,(i,s)=>{i?(En("failed to resolve hostname %s to IP: %s",e,i.message),n(i)):(En("resolved hostname %s to IP %s",e,s),r(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,_6.normalizeNodeOptions)(this.startupNodes),r=(0,_6.getUniqueHostnamesFromOptions)(e);if(r.length===0)return e;let n=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),i=(0,fu.zipMap)(r,n);return e.map(s=>{let o=i.get(s.host);return o?this.options.useSRVRecords?Object.assign({},s,o):Object.assign({},s,{host:o}):s})}createScanStream(e,{key:r,options:n={}}){return new W$t.default({objectMode:!0,key:r,redis:this,command:e,...n})}createShardedSubscriberGroup(){this.subscriberGroupEmitter=new pne.EventEmitter,this.shardedSubscribers=new rUt.default(this.subscriberGroupEmitter);let e=r=>{r instanceof ZM.default&&this.disconnect(!0)};this.subscriberGroupEmitter.on("-node",(r,n)=>{this.emit("-node",r,n),this.refreshSlotsCache(e)}),this.subscriberGroupEmitter.on("subscriberConnectFailed",({delay:r,error:n})=>{this.emit("error",n),setTimeout(()=>{this.refreshSlotsCache(e)},r)}),this.subscriberGroupEmitter.on("moved",()=>{this.refreshSlotsCache(e)}),this.subscriberGroupEmitter.on("-subscriber",()=>{this.emit("-subscriber")}),this.subscriberGroupEmitter.on("+subscriber",()=>{this.emit("+subscriber")}),this.subscriberGroupEmitter.on("nodeError",(r,n)=>{this.emit("nodeError",r,n)}),this.subscriberGroupEmitter.on("subscribersReady",()=>{this.emit("subscribersReady")});for(let r of["smessage","smessageBuffer"])this.subscriberGroupEmitter.on(r,(n,i,s)=>{this.emit(r,n,i,s)})}};(0,Y$t.default)(Q9,pne.EventEmitter);(0,J$t.addTransactionSupport)(Q9.prototype);fne.default=Q9});var eP=b(yne=>{"use strict";Object.defineProperty(yne,"__esModule",{value:!0});var nUt=ji(),iUt=(0,nUt.Debug)("AbstractConnector"),mne=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,r=setTimeout(()=>{iUt("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(r)),e.end()}}};yne.default=mne});var wFe=b(bne=>{"use strict";Object.defineProperty(bne,"__esModule",{value:!0});var sUt=require("net"),oUt=require("tls"),aUt=ji(),uUt=eP(),gne=class extends uUt.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:r}=this;this.connecting=!0;let n;return"path"in r&&r.path?n={path:r.path}:(n={},"port"in r&&r.port!=null&&(n.port=r.port),"host"in r&&r.host!=null&&(n.host=r.host),"family"in r&&r.family!=null&&(n.family=r.family)),r.tls&&Object.assign(n,r.tls),new Promise((i,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error(aUt.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,oUt.connect)(n):this.stream=(0,sUt.createConnection)(n)}catch(o){s(o);return}this.stream.once("error",o=>{this.firstError=o}),i(this.stream)})})}};bne.default=gne});var AFe=b(Ene=>{"use strict";Object.defineProperty(Ene,"__esModule",{value:!0});function cUt(t,e){return(t.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(t.port||26379)===(e.port||26379)}var _ne=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++)if(cUt(e,this.sentinels[r]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};Ene.default=_ne});var TFe=b(tP=>{"use strict";Object.defineProperty(tP,"__esModule",{value:!0});tP.FailoverDetector=void 0;var lUt=ji(),vne=(0,lUt.Debug)("FailoverDetector"),CFe="+switch-master",Sne=class{constructor(e,r){this.isDisconnected=!1,this.connector=e,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){vne("Starting FailoverDetector");let e=[];for(let r of this.sentinels){let n=r.client.subscribe(CFe).catch(i=>{vne("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,i.message)});e.push(n),r.client.on("message",i=>{!this.isDisconnected&&i===CFe&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,vne("Failover detected, disconnecting"),this.connector.disconnect()}};tP.FailoverDetector=Sne});var rP=b(Z9=>{"use strict";Object.defineProperty(Z9,"__esModule",{value:!0});Z9.SentinelIterator=void 0;var dUt=require("net"),X9=ji(),pUt=require("tls"),OFe=AFe();Z9.SentinelIterator=OFe.default;var fUt=eP(),hUt=qf(),mUt=TFe(),E6=(0,X9.Debug)("SentinelConnector"),wne=class extends fUt.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new OFe.default(this.options.sentinels)}check(e){let r=!e.role||this.options.role===e.role;return r||(E6("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let r,n=async()=>{let i=this.sentinelIterator.next();if(i.done){this.sentinelIterator.reset(!1);let u=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,c=typeof u!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${u}ms.`;r&&(c+=` Last error: ${r.message}`),E6(c);let l=new Error(c);if(typeof u=="number")return e("error",l),await new Promise(d=>setTimeout(d,u)),n();throw l}let s=null,o=null;try{s=await this.resolve(i.value)}catch(u){o=u}if(!this.connecting)throw new Error(X9.CONNECTION_CLOSED_ERROR_MSG);let a=i.value.host+":"+i.value.port;if(s)return E6("resolved: %s:%s from sentinel %s",s.host,s.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,pUt.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,dUt.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",u=>{this.firstError=u}),this.stream;{let u=o?"failed to connect to sentinel "+a+" because "+o.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+s;return E6(u),e("sentinelError",new Error(u)),o&&(r=o),n()}};return n()}async updateSentinels(e){if(!this.options.updateSentinels)return;let r=await e.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(X9.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){let s=this.sentinelNatResolve(xFe(n));this.sentinelIterator.add(s)&&E6("adding sentinel %s:%s",s.host,s.port)}}),E6("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let r=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(e){let r=await e.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let n=r.map(X9.packObject).filter(i=>i.flags&&!i.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(yUt(n,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let r=`${e.host}:${e.port}`,n=e;return typeof this.options.natMap=="function"?n=this.options.natMap(r)||e:typeof this.options.natMap=="object"&&(n=this.options.natMap[r]||e),n}connectToSentinel(e,r){return new hUt.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(e){let r=this.connectToSentinel(e);r.on("error",gUt);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:n,value:i}=this.sentinelIterator.next();if(n)break;let s=this.connectToSentinel(i,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var o;(o=this.emitter)===null||o===void 0||o.emit("sentinelReconnecting")}),r.push({address:i,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new mUt.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};Z9.default=wne;function yUt(t,e){if(t.length===0)return null;let r;if(typeof e=="function")r=e(t);else if(e!==null&&typeof e=="object"){let n=Array.isArray(e)?e:[e];n.sort((i,s)=>(i.prio||(i.prio=1),s.prio||(s.prio=1),i.prio<s.prio?-1:i.prio>s.prio?1:0));for(let i=0;i<n.length;i++){for(let s=0;s<t.length;s++){let o=t[s];if(o.ip===n[i].ip&&o.port===n[i].port){r=o;break}}if(r)break}}return r||(r=(0,X9.sample)(t)),xFe(r)}function xFe(t){return{host:t.ip,port:Number(t.port)}}function gUt(){}});var IFe=b(v6=>{"use strict";Object.defineProperty(v6,"__esModule",{value:!0});v6.SentinelConnector=v6.StandaloneConnector=void 0;var bUt=wFe();v6.StandaloneConnector=bUt.default;var _Ut=rP();v6.SentinelConnector=_Ut.default});var RFe=b(Cne=>{"use strict";Object.defineProperty(Cne,"__esModule",{value:!0});var EUt=Sg(),Ane=class extends EUt.AbortError{constructor(e){let r=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Cne.default=Ane});var DFe=b(nP=>{"use strict";Object.defineProperty(nP,"__esModule",{value:!0});nP.MaxRetriesPerRequestError=void 0;var vUt=RFe();nP.MaxRetriesPerRequestError=vUt.default});var qFe=b((bTr,BFe)=>{"use strict";var Dne=require("buffer").Buffer,SUt=require("string_decoder").StringDecoder,Tne=new SUt,kFe=Sg(),wUt=kFe.ReplyError,AUt=kFe.ParserError,Kl=Dne.allocUnsafe(32*1024),Qo=0,iP=null,eA=0,One=0;function CUt(t){let e=t.buffer.length-1;var r=t.offset,n=0,i=1;for(t.buffer[r]===45&&(i=-1,r++);r<e;){let s=t.buffer[r++];if(s===13)return t.offset=r+1,i*n;n=n*10+(s-48)}}function TUt(t){let e=t.buffer.length-1;var r=t.offset,n=0,i="";for(t.buffer[r]===45&&(i+="-",r++);r<e;){var s=t.buffer[r++];if(s===13)return t.offset=r+1,n!==0&&(i+=n),i;n>429496728?(i+=n*10+(s-48),n=0):s===48&&n===0?i+=0:n=n*10+(s-48)}}function MFe(t){let e=t.offset,r=t.buffer,n=r.length-1;for(var i=e;i<n;)if(r[i++]===13)return t.offset=i+1,t.optionReturnBuffers===!0?t.buffer.slice(e,i-1):t.buffer.toString("utf8",e,i-1)}function PFe(t){let e=t.buffer.length-1;for(var r=t.offset,n=0;r<e;){let i=t.buffer[r++];if(i===13)return t.offset=r+1,n;n=n*10+(i-48)}}function OUt(t){return t.optionStringNumbers===!0?TUt(t):CUt(t)}function xUt(t){let e=PFe(t);if(e===void 0)return;if(e<0)return null;let r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}let n=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(n,r):t.buffer.toString("utf8",n,r)}function IUt(t){var e=MFe(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new wUt(e)}function RUt(t,e){let r=new AUt("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}function DUt(t){let e=PFe(t);if(e===void 0)return;if(e<0)return null;let r=new Array(e);return NFe(t,r,0)}function xne(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}function Ine(t){let e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){let n=Ine(t);if(n===void 0){xne(t,e,r);return}e[r++]=n}return NFe(t,e,r)}function NFe(t,e,r){let n=t.buffer.length;for(;r<e.length;){let i=t.offset;if(t.offset>=n){xne(t,e,r);return}let s=FFe(t,t.buffer[t.offset++]);if(s===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=i),xne(t,e,r);return}e[r]=s,r++}return e}function FFe(t,e){switch(e){case 36:return xUt(t);case 43:return MFe(t);case 42:return DUt(t);case 58:return OUt(t);case 45:return IUt(t);default:return RUt(t,e)}}function kUt(){if(Kl.length>50*1024)if(eA===1||One>eA*2){let t=Math.floor(Kl.length/10),e=t<Qo?Qo:t;Qo=0,Kl=Kl.slice(e,Kl.length)}else One++,eA--;else clearInterval(iP),eA=0,One=0,iP=null}function MUt(t){if(Kl.length<t+Qo){let e=t>78643200?2:3;Qo>1024*1024*111&&(Qo=1024*1024*50),Kl=Dne.allocUnsafe(t*e+Qo),Qo=0,eA++,iP===null&&(iP=setInterval(kUt,50))}}function PUt(t){let e=t.bufferCache,r=t.offset;var n=e.length,i=t.bigStrSize-t.totalChunkSize;if(t.offset=i,i<=2){if(n===2)return e[0].toString("utf8",r,e[0].length+i-2);n--,i=e[e.length-2].length+i}for(var s=Tne.write(e[0].slice(r)),o=1;o<n-1;o++)s+=Tne.write(e[o]);return s+=Tne.end(e[o].slice(0,i-2)),s}function NUt(t){let e=t.bufferCache,r=t.offset,n=t.bigStrSize-r-2;var i=e.length,s=t.bigStrSize-t.totalChunkSize;if(t.offset=s,s<=2){if(i===2)return e[0].slice(r,e[0].length+s-2);i--,s=e[e.length-2].length+s}MUt(n);let o=Qo;e[0].copy(Kl,o,r,e[0].length),Qo+=e[0].length-r;for(var a=1;a<i-1;a++)e[a].copy(Kl,Qo),Qo+=e[a].length;return e[a].copy(Kl,Qo,0,s-2),Qo+=s-2,Kl.slice(o,Qo)}var Rne=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let n=this.buffer.length,i=n-this.offset,s=Dne.allocUnsafe(i+e.length);if(this.buffer.copy(s,0,this.offset,n),e.copy(s,i,0,e.length),this.buffer=s,this.offset=0,this.arrayCache.length){let o=Ine(this);if(o===void 0)return;this.returnReply(o)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?NUt(this):PUt(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=Ine(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let n=this.offset,i=this.buffer[this.offset++],s=FFe(this,i);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}i===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};BFe.exports=Rne});var jFe=b((_Tr,LFe)=>{"use strict";LFe.exports=qFe()});var $Fe=b(Pne=>{"use strict";Object.defineProperty(Pne,"__esModule",{value:!0});var Mne=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,r){this.set[kne(e)][r]=!0}del(e,r){delete this.set[kne(e)][r]}channels(e){return Object.keys(this.set[kne(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};Pne.default=Mne;function kne(t){return t==="unsubscribe"?"subscribe":t==="punsubscribe"?"psubscribe":t==="sunsubscribe"?"ssubscribe":t}});var GFe=b(Fne=>{"use strict";Object.defineProperty(Fne,"__esModule",{value:!0});var UFe=Ff(),FUt=ji(),BUt=jFe(),qUt=$Fe(),LUt=(0,FUt.Debug)("dataHandler"),Nne=class{constructor(e,r){this.redis=e;let n=new BUt({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:i=>{this.returnError(i)},returnFatalError:i=>{this.returnFatalError(i)},returnReply:i=>{this.returnReply(i)}});e.stream.prependListener("data",i=>{n.execute(i)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let r=this.shiftCommand(e);if(r){if(e.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&e.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(e,r)}}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let r=this.shiftCommand(e);r&&(UFe.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new qUt.default,this.redis.condition.subscriber.add(r.command.name,e[1].toString()),KFe(r.command,e[2])||this.redis.commandQueue.unshift(r)):UFe.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?VFe(r.command,e[2])||this.redis.commandQueue.unshift(r):r.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(e)?e[0].toString():null;switch(LUt('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let n=e[1].toString();this.redis.condition.subscriber.add(r,n);let i=this.shiftCommand(e);if(!i)return;KFe(i.command,e[2])||this.redis.commandQueue.unshift(i);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(r,n);let i=e[2];Number(i)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(e);if(!s)return;VFe(s.command,i)||this.redis.commandQueue.unshift(s);break}default:{let n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let r=e.toString();if(r==="OK")return!1;let n=r.indexOf(" "),i=r.slice(0,n),s=r.indexOf('"'),o=r.slice(s+1,-1).split('" "').map(u=>u.replace(/\\"/g,'"')),a=r.slice(n+2,s-2).split(" ");return this.redis.emit("monitor",i,o,a[1],a[0]),!0}shiftCommand(e){let r=this.redis.commandQueue.shift();if(!r){let n="Command queue state error. If you can reproduce this, please report it.",i=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",i),null}return r}};Fne.default=Nne;var um=new WeakMap;function KFe(t,e){let r=um.has(t)?um.get(t):t.args.length;return r-=1,r<=0?(t.resolve(e),um.delete(t),!0):(um.set(t,r),!1)}function VFe(t,e){let r=um.has(t)?um.get(t):t.args.length;return r===0?Number(e)===0?(um.delete(t),t.resolve(e),!0):!1:(r-=1,r<=0?(t.resolve(e),!0):(um.set(t,r),!1))}});var HFe=b(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.readyHandler=xc.errorHandler=xc.closeHandler=xc.connectHandler=void 0;var jUt=Sg(),$Ut=Ff(),UUt=DFe(),Jd=ji(),KUt=GFe(),Qs=(0,Jd.Debug)("connection");function VUt(t){return function(){var e;t.setStatus("connect"),t.resetCommandQueue();let r=!1,{connectionEpoch:n}=t;t.condition.auth&&t.auth(t.condition.auth,function(s){n===t.connectionEpoch&&s&&(s.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):s.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):s.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,t.recoverFromFatalError(s,s)))}),t.condition.select&&t.select(t.condition.select).catch(s=>{t.silentEmit("error",s)}),new KUt.default(t,{stringNumbers:t.options.stringNumbers});let i=[];t.options.connectionName&&(Qs("set the connection name [%s]",t.options.connectionName),i.push(t.client("setname",t.options.connectionName).catch(Jd.noop))),t.options.disableClientInfo||(Qs("set the client info"),i.push((0,Jd.getPackageMeta)().then(s=>t.client("SETINFO","LIB-VER",s.version).catch(Jd.noop)).catch(Jd.noop)),i.push(t.client("SETINFO","LIB-NAME",!((e=t.options)===null||e===void 0)&&e.clientInfoTag?`ioredis(${t.options.clientInfoTag})`:"ioredis").catch(Jd.noop))),Promise.all(i).catch(Jd.noop).finally(()=>{t.options.enableReadyCheck||xc.readyHandler(t)(),t.options.enableReadyCheck&&t._readyCheck(function(s,o){n===t.connectionEpoch&&(s?r||t.recoverFromFatalError(new Error("Ready check failed: "+s.message),s):t.connector.check(o)?xc.readyHandler(t)():t.disconnect(!0))})})}}xc.connectHandler=VUt;function Bne(t){let e=new jUt.AbortError("Command aborted due to connection close");return e.command={name:t.name,args:t.args},e}function GUt(t){var e;let r=0;for(let n=0;n<t.length;){let i=(e=t.peekAt(n))===null||e===void 0?void 0:e.command,s=i.pipelineIndex;if((s===void 0||s===0)&&(r=0),s!==void 0&&s!==r++){t.remove(n,1),i.reject(Bne(i));continue}n++}}function HUt(t){var e;for(let r=0;r<t.length;){let n=(e=t.peekAt(r))===null||e===void 0?void 0:e.command;if(n.name==="multi")break;if(n.name==="exec"){t.remove(r,1),n.reject(Bne(n));break}n.inTransaction?(t.remove(r,1),n.reject(Bne(n))):r++}}function zUt(t){return function(){let r=t.status;if(t.setStatus("close"),t.commandQueue.length&&GUt(t.commandQueue),t.offlineQueue.length&&HUt(t.offlineQueue),r==="ready"&&(t.prevCondition||(t.prevCondition=t.condition),t.commandQueue.length&&(t.prevCommandQueue=t.commandQueue)),t.manuallyClosing)return t.manuallyClosing=!1,Qs("skip reconnecting since the connection is manually closed."),e();if(typeof t.options.retryStrategy!="function")return Qs("skip reconnecting because `retryStrategy` is not a function"),e();let n=t.options.retryStrategy(++t.retryAttempts);if(typeof n!="number")return Qs("skip reconnecting because `retryStrategy` doesn't return a number"),e();Qs("reconnect in %sms",n),t.setStatus("reconnecting",n),t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect().catch(Jd.noop)},n);let{maxRetriesPerRequest:i}=t.options;typeof i=="number"&&(i<0?Qs("maxRetriesPerRequest is negative, ignoring..."):t.retryAttempts%(i+1)===0&&(Qs("reach maxRetriesPerRequest limitation, flushing command queue..."),t.flushQueue(new UUt.MaxRetriesPerRequestError(i))))};function e(){t.setStatus("end"),t.flushQueue(new Error(Jd.CONNECTION_CLOSED_ERROR_MSG))}}xc.closeHandler=zUt;function WUt(t){return function(e){Qs("error: %s",e),t.silentEmit("error",e)}}xc.errorHandler=WUt;function JUt(t){return function(){if(t.setStatus("ready"),t.retryAttempts=0,t.options.monitor){t.call("monitor").then(()=>t.setStatus("monitoring"),n=>t.emit("error",n));let{sendCommand:r}=t;t.sendCommand=function(n){return $Ut.default.checkFlag("VALID_IN_MONITOR_MODE",n.name)?r.call(t,n):(n.reject(new Error("Connection is in monitoring mode, can't process commands.")),n.promise)},t.once("close",function(){delete t.sendCommand});return}let e=t.prevCondition?t.prevCondition.select:t.condition.select;if(t.options.readOnly&&(Qs("set the connection to readonly mode"),t.readonly().catch(Jd.noop)),t.prevCondition){let r=t.prevCondition;if(t.prevCondition=null,r.subscriber&&t.options.autoResubscribe){t.condition.select!==e&&(Qs("connect to db [%d]",e),t.select(e));let n=r.subscriber.channels("subscribe");n.length&&(Qs("subscribe %d channels",n.length),t.subscribe(n));let i=r.subscriber.channels("psubscribe");i.length&&(Qs("psubscribe %d channels",i.length),t.psubscribe(i));let s=r.subscriber.channels("ssubscribe");if(s.length){Qs("ssubscribe %s",s.length);for(let o of s)t.ssubscribe(o)}}}if(t.prevCommandQueue)if(t.options.autoResendUnfulfilledCommands)for(Qs("resend %d unfulfilled commands",t.prevCommandQueue.length);t.prevCommandQueue.length>0;){let r=t.prevCommandQueue.shift();r.select!==t.condition.select&&r.command.name!=="select"&&t.select(r.select),t.sendCommand(r.command,r.stream)}else t.prevCommandQueue=null;if(t.offlineQueue.length){Qs("send %d commands in offline queue",t.offlineQueue.length);let r=t.offlineQueue;for(t.resetOfflineQueue();r.length>0;){let n=r.shift();n.select!==t.condition.select&&n.command.name!=="select"&&t.select(n.select),t.sendCommand(n.command,n.stream)}}t.condition.select!==e&&(Qs("connect to db [%d]",e),t.select(e))}}xc.readyHandler=JUt});var zFe=b(sP=>{"use strict";Object.defineProperty(sP,"__esModule",{value:!0});sP.DEFAULT_REDIS_OPTIONS=void 0;sP.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(t){return Math.min(t*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(t){return Math.min(t*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10,blockingTimeoutGrace:100}});var qf=b(Lne=>{"use strict";Object.defineProperty(Lne,"__esModule",{value:!0});var WFe=a6(),YFe=require("events"),qne=im(),YUt=hne(),Cg=Ff(),QUt=IFe(),XUt=rP(),cm=HFe(),QFe=zFe(),ZUt=VM(),eKt=Xre(),Tg=ji(),tKt=ene(),rKt=HM(),lm=qM(),JFe=YM(),dm=(0,Tg.Debug)("redis"),pm=class t extends rKt.default{constructor(e,r,n){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,r,n),YFe.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let i=new XUt.default(this.options);i.emitter=this,this.connector=i}else this.connector=new QUt.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,s])=>{this.defineCommand(i,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(lm.noop)}static createClient(...e){return new t(...e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}connect(e){let r=new Promise((n,i)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){i(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let o=this;(0,qne.default)(this.connector.connect(function(a,u){o.silentEmit(a,u)}),function(a,u){if(a){o.flushQueue(a),o.silentEmit("error",a),i(a),o.setStatus("end");return}let c=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(c="connect"),o.stream=u,s.noDelay&&u.setNoDelay(!0),typeof s.keepAlive=="number"&&(u.connecting?u.once(c,()=>{u.setKeepAlive(!0,s.keepAlive)}):u.setKeepAlive(!0,s.keepAlive)),u.connecting){if(u.once(c,cm.connectHandler(o)),s.connectTimeout){let p=!1;u.setTimeout(s.connectTimeout,function(){if(p)return;u.setTimeout(0),u.destroy();let f=new Error("connect ETIMEDOUT");f.errorno="ETIMEDOUT",f.code="ETIMEDOUT",f.syscall="connect",cm.errorHandler(o)(f)}),u.once(c,function(){p=!0,u.setTimeout(0)})}}else if(u.destroyed){let p=o.connector.firstError;p&&process.nextTick(()=>{cm.errorHandler(o)(p)}),process.nextTick(cm.closeHandler(o))}else process.nextTick(cm.connectHandler(o));u.destroyed||(u.once("error",cm.errorHandler(o)),u.once("close",cm.closeHandler(o)));let l=function(){o.removeListener("close",d),n()};var d=function(){o.removeListener("ready",l),i(new Error(Tg.CONNECTION_CLOSED_ERROR_MSG))};o.once("ready",l),o.once("close",d)})});return(0,qne.default)(r,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?cm.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new t({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,qne.default)(new Promise(function(n,i){r.once("error",i),r.once("monitoring",function(){n(r)})}),e)}sendCommand(e,r){var n,i;if(this.status==="wait"&&this.connect().catch(lm.noop),this.status==="end")return e.reject(new Error(Tg.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((n=this.condition)===null||n===void 0)&&n.subscriber&&!Cg.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let s=this.getBlockingTimeoutInMs(e),o=this.status==="ready"||!r&&this.status==="connect"&&(0,WFe.exists)(e.name,{caseInsensitive:!0})&&((0,WFe.hasFlag)(e.name,"loading",{nameCaseInsensitive:!0})||Cg.default.checkFlag("HANDSHAKE_COMMANDS",e.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(o=!1):o=!1,o)dm.enabled&&dm("write command[%s]: %d -> %s(%o)",this._getDescription(),(i=this.condition)===null||i===void 0?void 0:i.select,e.name,e.args),r?"isPipeline"in r&&r.isPipeline?r.write(e.toWritable(r.destination.redis.stream)):r.write(e.toWritable(r)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:r,select:this.condition.select}),s!==void 0&&e.setBlockingTimeout(s),Cg.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;if(dm.enabled&&dm("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:r,select:this.condition.select}),Cg.default.checkFlag("BLOCKING_COMMANDS",e.name)){let a=this.getConfiguredBlockingTimeout();a!==void 0&&e.setBlockingTimeout(a)}}if(e.name==="select"&&(0,Tg.isInt)(e.args[0])){let a=parseInt(e.args[0],10);this.condition.select!==a&&(this.condition.select=a,this.emit("select",a),dm("switch to db [%d]",this.condition.select))}return e.promise}getBlockingTimeoutInMs(e){var r;if(!Cg.default.checkFlag("BLOCKING_COMMANDS",e.name))return;let n=this.getConfiguredBlockingTimeout();if(n===void 0)return;let i=e.extractBlockingTimeout();if(typeof i=="number")return i>0?i+((r=this.options.blockingTimeoutGrace)!==null&&r!==void 0?r:QFe.DEFAULT_REDIS_OPTIONS.blockingTimeoutGrace):n;if(i===null)return n}getConfiguredBlockingTimeout(){if(typeof this.options.blockingTimeout=="number"&&this.options.blockingTimeout>0)return this.options.blockingTimeout}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}silentEmit(e,r){let n;if(!(e==="error"&&(n=r,this.status==="end"||this.manuallyClosing&&n instanceof Error&&(n.message===Tg.CONNECTION_CLOSED_ERROR_MSG||n.syscall==="connect"||n.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,r,n){this.flushQueue(r,n),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(e,r){var n;let i=!1;switch(this.options.reconnectOnError&&!Cg.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(i=this.options.reconnectOnError(e)),i){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((n=this.condition)===null||n===void 0?void 0:n.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new JFe}resetOfflineQueue(){this.offlineQueue=new JFe}parseOptions(...e){let r={},n=!1;for(let i=0;i<e.length;++i){let s=e[i];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,lm.defaults)(r,s);else if(typeof s=="string")(0,lm.defaults)(r,(0,Tg.parseURL)(s)),s.startsWith("rediss://")&&(n=!0);else if(typeof s=="number")r.port=s;else throw new Error("Invalid argument "+s)}n&&(0,lm.defaults)(r,{tls:!0}),(0,lm.defaults)(r,t.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,Tg.resolveTLSProfile)(r)}setStatus(e,r){dm.enabled&&dm("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,r))}createScanStream(e,{key:r,options:n={}}){return new ZUt.default({objectMode:!0,key:r,redis:this,command:e,...n})}flushQueue(e,r){r=(0,lm.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let n;if(r.offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){let r=this;this.info(function(n,i){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if(typeof i!="string")return e(null,i);let s={},o=i.split(`\r
`);for(let a=0;a<o.length;++a){let[u,...c]=o[a].split(":"),l=c.join(":");l&&(s[u]=l)}if(!s.loading||s.loading==="0")e(null,s);else{let a=(s.loading_eta_seconds||1)*1e3,u=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<a?r.options.maxLoadingRetryTime:a;dm("Redis server still loading, trying again in "+u+"ms"),setTimeout(function(){r._readyCheck(e)},u)}}).catch(lm.noop)}};pm.Cluster=YUt.default;pm.Command=Cg.default;pm.defaultOptions=QFe.DEFAULT_REDIS_OPTIONS;(0,tKt.default)(pm,YFe.EventEmitter);(0,eKt.addTransactionSupport)(pm.prototype);Lne.default=pm});var oP=b((vn,ZFe)=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.print=vn.ReplyError=vn.SentinelIterator=vn.SentinelConnector=vn.AbstractConnector=vn.Pipeline=vn.ScanStream=vn.Command=vn.Cluster=vn.Redis=vn.default=void 0;vn=ZFe.exports=qf().default;var nKt=qf();Object.defineProperty(vn,"default",{enumerable:!0,get:function(){return nKt.default}});var iKt=qf();Object.defineProperty(vn,"Redis",{enumerable:!0,get:function(){return iKt.default}});var sKt=hne();Object.defineProperty(vn,"Cluster",{enumerable:!0,get:function(){return sKt.default}});var oKt=Ff();Object.defineProperty(vn,"Command",{enumerable:!0,get:function(){return oKt.default}});var aKt=VM();Object.defineProperty(vn,"ScanStream",{enumerable:!0,get:function(){return aKt.default}});var uKt=Jre();Object.defineProperty(vn,"Pipeline",{enumerable:!0,get:function(){return uKt.default}});var cKt=eP();Object.defineProperty(vn,"AbstractConnector",{enumerable:!0,get:function(){return cKt.default}});var XFe=rP();Object.defineProperty(vn,"SentinelConnector",{enumerable:!0,get:function(){return XFe.default}});Object.defineProperty(vn,"SentinelIterator",{enumerable:!0,get:function(){return XFe.SentinelIterator}});vn.ReplyError=Sg().ReplyError;Object.defineProperty(vn,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(t){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function lKt(t,e){console.log(t?"Error: "+t:"Reply: "+e)}vn.print=lKt});var eBe,jne,hi,$ne=ce(()=>{"use strict";eBe=St(oP());yf();rm();jne=new eBe.default({host:"127.0.0.1",port:6379});jne.on("connect",()=>Me.info(" Redis connected"));jne.on("error",t=>Me.error("Redis error:",{error:pi.serialize(t)}));hi=jne});var Une,us,Kne=ce(()=>{"use strict";$ne();yf();Une=class{constructor(){this.pendingRequests=new Map;this.circuitBreakerOpen=!1;this.BASE_TTL=3600;this.MAX_JITTER=300;this.INVALIDATE_TAG_SCRIPT=`
    local tag = KEYS[1]
    local members = redis.call('SMEMBERS', tag)
    if #members > 0 then
      redis.call('DEL', unpack(members))
    end
    redis.call('DEL', tag)
    return #members
  `}async get(e){if(this.circuitBreakerOpen)return Me.warn("Redis circuit breaker open, skipping cache"),null;try{let r=await hi.get(e);return r?JSON.parse(r):null}catch(r){return Me.error("Redis get error",{key:e,error:r}),this.openCircuitBreaker(),null}}async hgetall(e){if(this.circuitBreakerOpen)return null;try{let r=await hi.hgetall(e);return!r||Object.keys(r).length===0?null:this.parseHashData(r)}catch(r){return Me.error("Redis hgetall error",{key:e,error:r}),this.openCircuitBreaker(),null}}async set(e,r,n){if(this.circuitBreakerOpen)return!1;try{let i=this.getTTLWithJitter(n);return await hi.set(e,JSON.stringify(r),"EX",i),!0}catch(i){return Me.error("Redis set error",{key:e,error:i}),this.openCircuitBreaker(),!1}}async hset(e,r,n){if(this.circuitBreakerOpen)return!1;try{let i=typeof n=="object"?JSON.stringify(n):n;return await hi.hset(e,r,i),!0}catch(i){return Me.error("Redis hset error",{key:e,field:r,error:i}),this.openCircuitBreaker(),!1}}async hmset(e,r,n){if(this.circuitBreakerOpen)return!1;try{let i={};for(let[o,a]of Object.entries(r))i[o]=typeof a=="object"?JSON.stringify(a):String(a);await hi.hset(e,i);let s=this.getTTLWithJitter(n);return await hi.expire(e,s),!0}catch(i){return Me.error("Redis hmset error",{key:e,error:i}),this.openCircuitBreaker(),!1}}async delete(e){if(this.circuitBreakerOpen)return!1;try{return await hi.del(e),!0}catch(r){return Me.error("Redis delete error",{key:e,error:r}),this.openCircuitBreaker(),!1}}async deleteMany(e){if(this.circuitBreakerOpen||e.length===0)return!1;try{return await hi.del(...e),!0}catch(r){return Me.error("Redis deleteMany error",{keys:e,error:r}),this.openCircuitBreaker(),!1}}async addToTag(e,r){if(this.circuitBreakerOpen)return!1;try{return await hi.sadd(e,r),!0}catch(n){return Me.error("Redis addToTag error",{tag:e,key:r,error:n}),!1}}async invalidateTag(e){if(this.circuitBreakerOpen)return!1;try{let r=await hi.eval(this.INVALIDATE_TAG_SCRIPT,1,e);return Me.debug("Tag invalidated",{tag:e,deletedCount:r}),!0}catch(r){return Me.error("Redis invalidateTag error",{tag:e,error:r}),!1}}async getOrFetch(e,r,n){let i=await this.get(e);if(i!==null)return i;if(this.pendingRequests.has(e)){Me.info("Request coalescing: waiting for pending fetch",{key:e});try{return await this.pendingRequests.get(e)}catch(o){Me.warn("Coalesced request failed, retrying independently",{key:e,error:o})}}let s=(async()=>{try{let o=await r();return o&&await this.set(e,o,n),o}catch(o){throw this.pendingRequests.delete(e),o}finally{this.pendingRequests.delete(e)}})();return this.pendingRequests.set(e,s),s}getTTLWithJitter(e){let r=e||this.BASE_TTL,n=Math.floor(Math.random()*this.MAX_JITTER);return r+n}parseHashData(e){let r={};for(let[n,i]of Object.entries(e))try{r[n]=JSON.parse(i)}catch{r[n]=i}return r}openCircuitBreaker(){this.circuitBreakerOpen||(this.circuitBreakerOpen=!0,Me.error("Redis circuit breaker opened"),setTimeout(()=>{this.circuitBreakerOpen=!1,Me.info("Redis circuit breaker closed")},3e4))}},us=new Une});var S6,Og,Vne,dKt,Gne,Ic,aP=ce(()=>{"use strict";S6=St(ly());Og={free:{max:20,min:0,current:20},standard:{max:10,min:0,current:10},premium:{max:5,min:0,current:5}},Vne=new S6.Schema({max:{type:Number,default:0},min:{type:Number,default:0},current:{type:Number,default:0}},{_id:!1}),dKt=new S6.Schema({premium:{type:Vne},standard:{type:Vne},free:{type:Vne}},{_id:!1}),Gne=new S6.Schema({userId:{type:String,required:[!0,"User ID is required"]},docId:{type:String,required:[!0,"Document ID is required"]},chatBotPrompt:{type:dKt,default:()=>({premium:Og.premium,standard:Og.standard,free:Og.free})},title:{type:String,default:""},sender:{type:String,default:""},receivedDate:{type:Date},summary:{type:String,default:""},translatedText:{type:String,default:""},pdfBlobStorage:{type:Boolean,required:!0},targetLanguage:{type:String,default:""},structuredTranslatedText:{type:Map,of:String,default:{}},actionPlan:{type:[{title:String,reason:String}],default:[]},actionPlans:{type:[{id:{type:String,required:[!0,"Action Plan ID is required"]},title:{type:String,default:""},dueDate:{type:Date},completed:{type:Boolean,default:!1},location:{type:String,default:""}}],default:[],_id:!1}},{timestamps:!0});Gne.index({userId:1,createdAt:1});Gne.index({userId:1,docId:1},{unique:!0});Ic=(0,S6.model)("Document",Gne)});var tBe,rBe=ce(()=>{"use strict";OI();aP();tBe=t=>({limits:Rd[t],botLimits:Og[t]})});var nBe,iBe,sBe,w6,oBe=ce(()=>{"use strict";OI();nBe=St(Qm());yf();hw();KMe();iBe=St(iNe());rm();Kne();sBe=St(ly());rBe();aP();w6=class{constructor(){this.config={auth:{clientId:ws.AZURE_CLIENT_ID,clientSecret:ws.AZURE_CLIENT_SECRETE,authority:ws.AZURE_CLIENT_AUTHORITY}}}getStartOfNextMonth(){let e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,1)}getUserTag(e){return`tag:user:${e}`}async deleteUserFromEntraId(e){try{if(!e)throw new Dn("Valid userId is required");let n=await new P9(this.config).acquireTokenByClientCredential({scopes:["https://graph.microsoft.com/.default"]});return n?.accessToken?(await iBe.Client.init({authProvider:s=>s(null,n.accessToken)}).api(`/users/${e}`).delete(),!0):(Me.warn("Failed to acquire Graph token for Entra ID deletion",{userId:e}),!1)}catch(r){let n=r?.statusCode??r?.response?.status??r?.status??500;switch(n){case 404:return Me.warn("User not found in Entra ID (already deleted)",{userId:e,status:n,error:r}),!0;case 400:return Me.warn("Valid userId is required or a microsoft problem)",{userId:e,status:n,error:r}),!0;case 401:case 403:return Me.warn("Unauthorized to delete user from Entra ID",{userId:e,status:n,error:r}),!0;default:return Me.warn("Failed to delete user from Entra ID",{userId:e,status:n,error:r}),!1}}}async deleteUser(e){let r=this.getStartOfNextMonth();try{(await vh.updateOne({userId:e},{$set:{status:"deleted",deletedAt:new Date,permanentDeleteAt:r}}).exec()).matchedCount===0?Me.warn("Attempted to delete non-existent user",{userId:e}):(await us.invalidateTag(this.getUserTag(e)),Me.info("User status successfully changed to delete",{userId:e,permanentDeleteAt:r}))}catch(n){throw Me.error("Error deleting user",{userId:e,error:n}),new on("Failed to delete user")}}async updateUser(e,r){try{let n=`lengthOfDocs.${r}.current`;(await vh.updateOne({userId:e,status:"active",[n]:{$gt:0}},{$inc:{[n]:-1},$set:{updatedAt:new Date}}).exec()).modifiedCount>0&&await us.invalidateTag(this.getUserTag(e))}catch(n){throw Me.error("Failed to decrease user docs limit after document processing",{userId:e,plan:r,error:n}),new on("Failed to update user details")}}async checkIfUserExist(e){let r=e.userId,n=e.email,i=`user:${r}`,s=await us.getOrFetch(i,async()=>{Me.info("Cache miss: fetching user from DB",{userEmail:n});let o=await vh.findOne({email:n}).select("-__v").lean().exec();if(!o)return null;if(o.status==="deleted")throw Me.warn("Blocked user attempted access in the same month of deletion",{userId:r}),new K9;return await us.addToTag(this.getUserTag(r),i),{userId:String(o.userId),plan:o.plan,lengthOfDocs:o.lengthOfDocs,email:o.email,monthlyQuotaResetAt:o.monthlyQuotaResetAt}},3600);if(!s)return null;if(Me.info("Checking and performing monthly quota reset if required:",s),this.isResetRequired(s.monthlyQuotaResetAt)){let o=new Date,a=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),1));if((await vh.updateOne({userId:r,$or:[{monthlyQuotaResetAt:{$lt:a}},{monthlyQuotaResetAt:{$exists:!1}}]},{$set:{lengthOfDocs:Rd,monthlyQuotaResetAt:a}}).exec()).modifiedCount>0)try{await Ic.updateMany({userId:r},{$set:{chatBotPrompt:Og}}).exec(),await us.invalidateTag(this.getUserTag(r)),Me.info("New Month Detected - Resetting Quotas",{userId:r})}catch(c){Me.error("Document reset failed, rolling back user timestamp",{userId:r,error:pi.serialize(c)});try{await vh.updateOne({userId:r},{$set:{monthlyQuotaResetAt:new Date(a.getTime()-1)}}).exec()}catch(l){Me.error("Critical: Rollback failed",{userId:r,rollbackError:l})}}}else Me.info("Monthly quota reset not required",{userId:r});return s}isResetRequired(e){let r=new Date,n=new Date(e);return n.getUTCFullYear()!==r.getUTCFullYear()||n.getUTCMonth()!==r.getUTCMonth()}async createUserFromToken(e){let r=e.userId,n=e.email,i=e.username;try{let s=await vh.create({userId:r,email:n,username:i}),o={userId:String(s.userId),plan:s.plan,lengthOfDocs:s.lengthOfDocs,email:s.email},a=`user:${r}`;await us.set(a,{...o,monthlyQuotaResetAt:s.monthlyQuotaResetAt},3600),await us.addToTag(this.getUserTag(r),a)}catch(s){throw s.code===11e3?(Me.warn("User creation failed: Email exists (Duplicate Key)",{email:n}),new K9):(Me.error("Error creating user",{userId:r,email:n,error:pi.serialize(s)}),new on("Failed to create user"))}}async changeUserPlan(e,r){let n=await sBe.default.startSession();n.startTransaction();try{let{limits:i,botLimits:s}=tBe(r);if(!await vh.findOneAndUpdate({userId:e,status:"active"},{$set:{plan:r,lengthOfDocs:{[r]:i},updatedAt:new Date}},{session:n,new:!0}).exec())throw new G9;await Ic.updateMany({userId:e},{$set:{chatBotPrompt:{[r]:s}}},{session:n}),await n.commitTransaction(),await us.invalidateTag(this.getUserTag(e)),Me.info(`Plan changed to ${r} for user ${e}`)}catch(i){throw await n.abortTransaction(),Me.error("Plan change failed, transaction rolled back",{userId:e,error:i}),i instanceof G9?i:new on("Failed to change user plan")}finally{n.endSession()}}};w6=m1([(0,nBe.injectable)()],w6)});function aBe(t,e=0){return(Xs[t[e+0]]+Xs[t[e+1]]+Xs[t[e+2]]+Xs[t[e+3]]+"-"+Xs[t[e+4]]+Xs[t[e+5]]+"-"+Xs[t[e+6]]+Xs[t[e+7]]+"-"+Xs[t[e+8]]+Xs[t[e+9]]+"-"+Xs[t[e+10]]+Xs[t[e+11]]+Xs[t[e+12]]+Xs[t[e+13]]+Xs[t[e+14]]+Xs[t[e+15]]).toLowerCase()}var Xs,uBe=ce(()=>{Xs=[];for(let t=0;t<256;++t)Xs.push((t+256).toString(16).slice(1))});function Hne(){return uP>cP.length-16&&((0,cBe.randomFillSync)(cP),uP=0),cP.slice(uP,uP+=16)}var cBe,cP,uP,lBe=ce(()=>{cBe=require("crypto"),cP=new Uint8Array(256),uP=cP.length});var dBe,zne,pBe=ce(()=>{dBe=require("crypto"),zne={randomUUID:dBe.randomUUID}});function pKt(t,e,r){if(zne.randomUUID&&!e&&!t)return zne.randomUUID();t=t||{};let n=t.random??t.rng?.()??Hne();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return aBe(n)}var xg,fBe=ce(()=>{pBe();lBe();uBe();xg=pKt});var lP=ce(()=>{fBe()});var dP,hBe,A6,mBe=ce(()=>{"use strict";aP();dP=St(Qm());lP();yf();rm();Kne();hBe=St(ly()),A6=class{constructor(e){this.userService=e}getDocumentCacheKey(e,r){return`doc:${e}:${r}`}getDocumentListCacheKey(e){return`docs:list:${e}`}getUserTag(e){return`tag:user:${e}`}async deleteAllDocuments(e){if(!e)throw new Dn("Valid userId is required");try{let r=await Ic.deleteMany({userId:e}).exec();await us.invalidateTag(this.getUserTag(e)),Me.info("Document history cleanup completed",{userId:e,deletedCount:r.deletedCount})}catch(r){throw Me.error("Failed to delete all documents",{userId:e,error:r}),new on("Failed to delete all documents")}}async getAllDocumentsByUserId(e,r,n){if(!e.userId)throw new Dn("Valid userId is required");try{let i=e.userId,s=`${this.getDocumentListCacheKey(i)}:${r}:${n}`;return await us.getOrFetch(s,async()=>{Me.info("Cache miss: fetching documents from DB",{userId:i,limit:r,offset:n});let[a,u]=await Promise.all([Ic.countDocuments({userId:i}),Ic.find({userId:i}).sort({createdAt:1}).select("-__v").limit(r).skip(n).lean().exec()]);return await us.addToTag(this.getUserTag(i),s),{total:a,documents:u}},1800)}catch(i){throw Me.error("Failed to fetch documents",{userId:e.userId,error:i}),new on("Failed to retrieve documents")}}async createDocumentAndUpdatePlanLimit(e,r){if(!e?.userId||!e?.docId)throw new Dn("Valid document data with userId and docId required");let n=await hBe.default.startSession();n.startTransaction();try{await Ic.create([e],{session:n}),await this.userService.updateUser(e.userId,r),await n.commitTransaction(),await us.invalidateTag(this.getUserTag(e.userId)),Me.info("Document created and quota updated",{userId:e.userId,docId:e.docId})}catch(i){throw await n.abortTransaction(),Me.error("Atomic document creation failed",{userId:e.userId,error:pi.serialize(i)}),i instanceof on||i instanceof Dn?i:new on("Failed to create document and update limits")}finally{n.endSession()}}async getDocument(e,r){if(!e.userId||!r)throw new Dn("Valid userId and docId are required");try{let n=this.getDocumentCacheKey(e.userId,r);return us.getOrFetch(n,async()=>{Me.info("Cache miss: fetching document from DB",{userId:e.userId,docId:r});let i=await Ic.findOne({userId:e.userId,docId:r}).select("-__v").exec();return i&&await us.addToTag(this.getUserTag(e.userId),n),i},3600)}catch(n){throw Me.error("Failed to fetch document",{userId:e.userId,docId:r,error:pi.serialize(n)}),new on("Failed to retrieve document")}}async deleteDocument(e,r){if(!e||!r)throw new Dn("Valid userId and docId are required");try{let i=(await Ic.deleteOne({userId:e,docId:r}).exec()).deletedCount>0;return i&&await us.invalidateTag(this.getUserTag(e)),i}catch(n){throw Me.error("Failed to delete document",{userId:e,docId:r,error:n}),new on("Failed to delete document")}}async updateDocument(e,r,n){if(!e||!r)throw new Dn("Valid userId and docId are required");if(!n||Object.keys(n).length===0)throw new Dn("Valid update data is required");try{let i="$inc"in n?{...n,$set:{updatedAt:new Date}}:{$set:{...n,updatedAt:new Date}},s=await Ic.findOneAndUpdate({userId:e,docId:r},i,{new:!0,runValidators:!0,select:"-__v"}).lean().exec();return s&&await us.invalidateTag(this.getUserTag(e)),s}catch(i){throw Me.error("Failed to update document",{userId:e,docId:r,error:i}),new on("Failed to update document")}}async updateActionPlan(e,r,n,i,s){if(!e||!r)throw new Dn("Valid userId and docId are required");try{let o=this.buildActionPlanUpdate(n,i,s),a=n==="update"&&s?{arrayFilters:[{"elem.id":s}]}:{},u=await Ic.findOneAndUpdate({userId:e,docId:r},o,{new:!0,runValidators:!0,select:"-__v",...a}).lean().exec();return u&&await us.invalidateTag(this.getUserTag(e)),u}catch(o){throw Me.error("Failed to update action plan",{userId:e,docId:r,action:n,error:o}),new on("Failed to update action plan")}}buildActionPlanUpdate(e,r,n){switch(e){case"create":if(!r?.title)throw new Dn("Title is required for creating an action plan");return{$push:{actionPlans:{id:xg(),title:r.title,dueDate:r.dueDate?new Date(r.dueDate):new Date,completed:!1,location:r.location??""}},$set:{updatedAt:new Date}};case"delete":if(!n)throw new Dn("Action plan ID is required for deletion");return{$pull:{actionPlans:{id:n}},$set:{updatedAt:new Date}};case"update":if(!n)throw new Dn("Action plan ID is required for update");if(!r||Object.keys(r).length===0)throw new Dn("At least one field must be provided for update");let i={updatedAt:new Date};return r.title&&(i["actionPlans.$[elem].title"]=r.title),r.dueDate&&(i["actionPlans.$[elem].dueDate"]=new Date(r.dueDate)),r.completed!==void 0&&(i["actionPlans.$[elem].completed"]=r.completed),r.location&&(i["actionPlans.$[elem].location"]=r.location),{$set:i};default:throw new Dn('Invalid action type. Must be "create", "delete", or "update"')}}};A6=m1([(0,dP.injectable)(),dde(0,(0,dP.inject)("IUserService"))],A6)});var pP,yBe,C6,gBe=ce(()=>{"use strict";pP=St(ly());yBe=new pP.Schema({userId:{type:String,required:[!0,"User ID is required"]},docId:{type:String,required:[!0,"Document ID is required"]},translatedText:{type:String,default:""},chats:{type:[{userPrompt:{type:String,required:[!0,"Prompt is required"]},response:{type:String,required:[!0,"Response is required"]},time:{type:Date,default:Date.now}}],default:[],_id:!1}},{timestamps:!0});yBe.index({userId:1,docId:1},{unique:!0});C6=(0,pP.model)("ChatBotHistory",yBe)});var bBe,T6,_Be=ce(()=>{"use strict";gBe();bBe=St(Qm());yf();rm();T6=class{async getDocumentChatBotCollection(e,r){if(!e||!r)throw new Dn("Valid userId and docId are required");try{return await C6.findOne({userId:e,docId:r}).select("-__v").lean().exec()}catch(n){throw Me.error("Failed to retrieve chat history collection",{error:n,userId:e,docId:r}),new on("Failed to retrieve chat history")}}async updateDocumentChatBotHistory(e,r,n){try{if(!e||!r||!n||!n.userPrompt||!n.response)throw new Dn("User ID, Document ID, and valid chat data are required");if((await C6.updateOne({userId:e,docId:r},{$push:{chats:n}}).exec()).matchedCount===0)throw Me.error("Chat history collection not found for update for user:",{userId:e,docId:r}),new V9("Chat history collection not found for update");Me.info("Chat history collection updated successfully",{userId:e,docId:r})}catch(i){throw Me.error("Failed to update chat history collection",{error:i,userId:e,docId:r}),new on("Failed to update chat history collection")}}async createChatHistory(e){try{if(!e||!e.userId||!e.docId)throw new Error("Valid chat history data is required");return(await C6.create(e)).toObject()}catch(r){throw r.code===11e3?(Me.error("Chat history already exists for this document",{userId:e.userId,docId:e.docId}),new Error("Chat history already exists for this document")):(Me.error("Failed to create chat history collection",{error:r}),new Error(`Failed to create chat history collection: ${r}`))}}async deleteChatHistoryByUserId(e){if(!e)throw new Dn("User ID is required");try{let r=await C6.deleteMany({userId:e}).exec();Me.info("Chat history cleanup completed",{userId:e,deletedCount:r.deletedCount})}catch(r){throw Me.error("Failed to delete chat history",{userId:e,error:r}),new on("Failed to delete chat history")}}async deleteChatHistoryByDocument(e,r){if(!e||!r)throw new Error("User ID is required");try{return(await C6.deleteOne({userId:e,docId:r}).exec()).deletedCount>0}catch(n){throw Me.error("Failed to delete chat history",{error:n,userId:e}),new on("Failed to delete chat history")}}};T6=m1([(0,bBe.injectable)()],T6)});var wBe=b(Wne=>{var EBe=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g,fKt=/^[\u0020-\u007e\u0080-\u00ff]+$/,SBe=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/,hKt=/\\([\u0000-\u007f])/g,mKt=/([\\"])/g,yKt=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,vBe=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,gKt=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;Wne.format=bKt;Wne.parse=_Kt;function bKt(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,r=t.subtype,n=t.suffix,i=t.type;if(!i||!vBe.test(i))throw new TypeError("invalid type");if(!r||!yKt.test(r))throw new TypeError("invalid subtype");var s=i+"/"+r;if(n){if(!vBe.test(n))throw new TypeError("invalid suffix");s+="+"+n}if(e&&typeof e=="object")for(var o,a=Object.keys(e).sort(),u=0;u<a.length;u++){if(o=a[u],!SBe.test(o))throw new TypeError("invalid parameter name");s+="; "+o+"="+vKt(e[o])}return s}function _Kt(t){if(!t)throw new TypeError("argument string is required");if(typeof t=="object"&&(t=EKt(t)),typeof t!="string")throw new TypeError("argument string is required to be a string");var e=t.indexOf(";"),r=e!==-1?t.substr(0,e):t,n,i,s=SKt(r),o={},a;for(EBe.lastIndex=e;i=EBe.exec(t);){if(i.index!==e)throw new TypeError("invalid parameter format");e+=i[0].length,n=i[1].toLowerCase(),a=i[2],a[0]==='"'&&(a=a.substr(1,a.length-2).replace(hKt,"$1")),o[n]=a}if(e!==-1&&e!==t.length)throw new TypeError("invalid parameter format");return s.parameters=o,s}function EKt(t){if(typeof t.getHeader=="function")return t.getHeader("content-type");if(typeof t.headers=="object")return t.headers&&t.headers["content-type"]}function vKt(t){var e=String(t);if(SBe.test(e))return e;if(e.length>0&&!fKt.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(mKt,"\\$1")+'"'}function SKt(t){var e=gKt.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var r=e[1],n=e[2],i,s=n.lastIndexOf("+");s!==-1&&(i=n.substr(s+1),n=n.substr(0,s));var o={type:r,subtype:n,suffix:i};return o}});var ABe=b((v7r,wKt)=>{wKt.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var TBe=b((S7r,CBe)=>{CBe.exports=ABe()});var IBe=b(Fa=>{"use strict";var fP=TBe(),AKt=require("path").extname,OBe=/^\s*([^;\s]*)(?:;|\s|$)/,CKt=/^text\//i;Fa.charset=xBe;Fa.charsets={lookup:xBe};Fa.contentType=TKt;Fa.extension=OKt;Fa.extensions=Object.create(null);Fa.lookup=xKt;Fa.types=Object.create(null);IKt(Fa.extensions,Fa.types);function xBe(t){if(!t||typeof t!="string")return!1;var e=OBe.exec(t),r=e&&fP[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&CKt.test(e[1])?"UTF-8":!1}function TKt(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?Fa.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=Fa.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function OKt(t){if(!t||typeof t!="string")return!1;var e=OBe.exec(t),r=e&&Fa.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function xKt(t){if(!t||typeof t!="string")return!1;var e=AKt("x."+t).toLowerCase().substr(1);return e&&Fa.types[e]||!1}function IKt(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(fP).forEach(function(i){var s=fP[i],o=s.extensions;if(!(!o||!o.length)){t[i]=o;for(var a=0;a<o.length;a++){var u=o[a];if(e[u]){var c=r.indexOf(fP[e[u]].source),l=r.indexOf(s.source);if(e[u]!=="application/octet-stream"&&(c>l||c===l&&e[u].substr(0,12)==="application/"))continue}e[u]=i}}})}});var NBe=b((A7r,O6)=>{"use strict";var RBe=wBe(),RKt=IBe();O6.exports=DKt;O6.exports.is=DBe;O6.exports.hasBody=kBe;O6.exports.normalize=MBe;O6.exports.match=PBe;function DBe(t,e){var r,n=e,i=MKt(t);if(!i)return!1;if(n&&!Array.isArray(n))for(n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];if(!n||!n.length)return i;var s;for(r=0;r<n.length;r++)if(PBe(MBe(s=n[r]),i))return s[0]==="+"||s.indexOf("*")!==-1?i:s;return!1}function kBe(t){return t.headers["transfer-encoding"]!==void 0||!isNaN(t.headers["content-length"])}function DKt(t,e){var r=e;if(!kBe(t))return null;if(arguments.length>2){r=new Array(arguments.length-1);for(var n=0;n<r.length;n++)r[n]=arguments[n+1]}var i=t.headers["content-type"];return DBe(i,r)}function MBe(t){if(typeof t!="string")return!1;switch(t){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}return t[0]==="+"?"*/*"+t:t.indexOf("/")===-1?RKt.lookup(t):t}function PBe(t,e){if(t===!1)return!1;var r=e.split("/"),n=t.split("/");return r.length!==2||n.length!==2||n[0]!=="*"&&n[0]!==r[0]?!1:n[1].substr(0,2)==="*+"?n[1].length<=r[1].length+1&&n[1].substr(1)===r[1].substr(1-n[1].length):!(n[1]!=="*"&&n[1]!==r[1])}function kKt(t){var e=RBe.parse(t);return e.parameters=void 0,RBe.format(e)}function MKt(t){if(!t)return null;try{return kKt(t)}catch{return null}}});var hP=b((jBe,$Be)=>{"use strict";function PKt(t){if(t.length===0)return;let e=Object.create(null),r=0;for(;r<t.length;++r){let o=t.charCodeAt(r);if(Ig[o]!==1){if(o!==47||r===0)return;break}}if(r===t.length)return;let n=t.slice(0,r).toLowerCase(),i=++r;for(;r<t.length;++r){let o=t.charCodeAt(r);if(Ig[o]!==1){if(r===i||NKt(t,r,e)===void 0)return;break}}if(r===i)return;let s=t.slice(i,r).toLowerCase();return{type:n,subtype:s,params:e}}function NKt(t,e,r){for(;e<t.length;){for(;e<t.length;++e){let a=t.charCodeAt(e);if(a!==32&&a!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let a=t.charCodeAt(e);if(a!==32&&a!==9)break}if(e===t.length)return;let n,i=e;for(;e<t.length;++e){let a=t.charCodeAt(e);if(Ig[a]!==1){if(a!==61)return;break}}if(e===t.length||(n=t.slice(i,e),++e,e===t.length))return;let s="",o;if(t.charCodeAt(e)===34){o=++e;let a=!1;for(;e<t.length;++e){let u=t.charCodeAt(e);if(u===92){a?(o=e,a=!1):(s+=t.slice(o,e),a=!0);continue}if(u===34){if(a){o=e,a=!1;continue}s+=t.slice(o,e);break}if(a&&(o=e-1,a=!1),LBe[u]!==1)return}if(e===t.length)return;++e}else{for(o=e;e<t.length;++e){let a=t.charCodeAt(e);if(Ig[a]!==1){if(e===o)return;break}}s=t.slice(o,e)}n=n.toLowerCase(),r[n]===void 0&&(r[n]=s)}return r}function FKt(t,e){if(t.length===0)return;let r=Object.create(null),n=0;for(;n<t.length;++n){let s=t.charCodeAt(n);if(Ig[s]!==1){if(BKt(t,n,r,e)===void 0)return;break}}return{type:t.slice(0,n).toLowerCase(),params:r}}function BKt(t,e,r,n){for(;e<t.length;){for(;e<t.length;++e){let c=t.charCodeAt(e);if(c!==32&&c!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let c=t.charCodeAt(e);if(c!==32&&c!==9)break}if(e===t.length)return;let i,s=e;for(;e<t.length;++e){let c=t.charCodeAt(e);if(Ig[c]!==1){if(c===61)break;return}}if(e===t.length)return;let o="",a,u;if(i=t.slice(s,e),i.charCodeAt(i.length-1)===42){let c=++e;for(;e<t.length;++e){let d=t.charCodeAt(e);if(LKt[d]!==1){if(d!==39)return;break}}if(e===t.length)return;for(u=t.slice(c,e),++e;e<t.length&&t.charCodeAt(e)!==39;++e);if(e===t.length||(++e,e===t.length))return;a=e;let l=0;for(;e<t.length;++e){let d=t.charCodeAt(e);if(jKt[d]!==1){if(d===37){let p,f;if(e+2<t.length&&(p=FBe[t.charCodeAt(e+1)])!==-1&&(f=FBe[t.charCodeAt(e+2)])!==-1){let h=(p<<4)+f;o+=t.slice(a,e),o+=String.fromCharCode(h),e+=2,a=e+1,h>=128?l=2:l===0&&(l=1);continue}return}break}}if(o+=t.slice(a,e),o=qBe(o,u,l),o===void 0)return}else{if(++e,e===t.length)return;if(t.charCodeAt(e)===34){a=++e;let c=!1;for(;e<t.length;++e){let l=t.charCodeAt(e);if(l===92){c?(a=e,c=!1):(o+=t.slice(a,e),c=!0);continue}if(l===34){if(c){a=e,c=!1;continue}o+=t.slice(a,e);break}if(c&&(a=e-1,c=!1),LBe[l]!==1)return}if(e===t.length)return;++e}else{for(a=e;e<t.length;++e){let c=t.charCodeAt(e);if(Ig[c]!==1){if(e===a)return;break}}o=t.slice(a,e)}if(o=n(o,2),o===void 0)return}i=i.toLowerCase(),r[i]===void 0&&(r[i]=o)}return r}function BBe(t){let e;for(;;)switch(t){case"utf-8":case"utf8":return tA.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return tA.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return tA.utf16le;case"base64":return tA.base64;default:if(e===void 0){e=!0,t=t.toLowerCase();continue}return tA.other.bind(t)}}var tA={utf8:(t,e)=>{if(t.length===0)return"";if(typeof t=="string"){if(e<2)return t;t=Buffer.from(t,"latin1")}return t.utf8Slice(0,t.length)},latin1:(t,e)=>t.length===0?"":typeof t=="string"?t:t.latin1Slice(0,t.length),utf16le:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,"latin1")),t.ucs2Slice(0,t.length)),base64:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,"latin1")),t.base64Slice(0,t.length)),other:(t,e)=>{if(t.length===0)return"";typeof t=="string"&&(t=Buffer.from(t,"latin1"));try{return new TextDecoder(jBe).decode(t)}catch{}}};function qBe(t,e,r){let n=BBe(e);if(n)return n(t,r)}function qKt(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;--e)switch(t.charCodeAt(e)){case 47:case 92:return t=t.slice(e+1),t===".."||t==="."?"":t}return t===".."||t==="."?"":t}var Ig=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],LBe=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],LKt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],jKt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],FBe=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];$Be.exports={basename:qKt,convertToUTF8:qBe,getDecoder:BBe,parseContentType:PKt,parseDisposition:FKt}});var GBe=b((C7r,VBe)=>{"use strict";function UBe(t,e,r,n,i){for(let s=0;s<i;++s)if(t[e+s]!==r[n+s])return!1;return!0}var Jne=class{constructor(e,r){if(typeof r!="function")throw new Error("Missing match callback");if(typeof e=="string")e=Buffer.from(e);else if(!Buffer.isBuffer(e))throw new Error(`Expected Buffer for needle, got ${typeof e}`);let n=e.length;if(this.maxMatches=1/0,this.matches=0,this._cb=r,this._lookbehindSize=0,this._needle=e,this._bufPos=0,this._lookbehind=Buffer.allocUnsafe(n),this._occ=[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n],n>1)for(let i=0;i<n-1;++i)this._occ[e[i]]=n-1-i}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(e,r){let n;Buffer.isBuffer(e)||(e=Buffer.from(e,"latin1"));let i=e.length;for(this._bufPos=r||0;n!==i&&this.matches<this.maxMatches;)n=$Kt(this,e);return n}destroy(){let e=this._lookbehindSize;e&&this._cb(!1,this._lookbehind,0,e,!1),this.reset()}};function $Kt(t,e){let r=e.length,n=t._needle,i=n.length,s=-t._lookbehindSize,o=i-1,a=n[o],u=r-i,c=t._occ,l=t._lookbehind;if(s<0){for(;s<0&&s<=u;){let p=s+o,f=p<0?l[t._lookbehindSize+p]:e[p];if(f===a&&KBe(t,e,s,o))return t._lookbehindSize=0,++t.matches,s>-t._lookbehindSize?t._cb(!0,l,0,t._lookbehindSize+s,!1):t._cb(!0,void 0,0,0,!0),t._bufPos=s+i;s+=c[f]}for(;s<0&&!KBe(t,e,s,r-s);)++s;if(s<0){let p=t._lookbehindSize+s;return p>0&&t._cb(!1,l,0,p,!1),t._lookbehindSize-=p,l.copy(l,0,p,t._lookbehindSize),l.set(e,t._lookbehindSize),t._lookbehindSize+=r,t._bufPos=r,r}t._cb(!1,l,0,t._lookbehindSize,!1),t._lookbehindSize=0}s+=t._bufPos;let d=n[0];for(;s<=u;){let p=e[s+o];if(p===a&&e[s]===d&&UBe(n,0,e,s,o))return++t.matches,s>0?t._cb(!0,e,t._bufPos,s,!0):t._cb(!0,void 0,0,0,!0),t._bufPos=s+i;s+=c[p]}for(;s<r;){if(e[s]!==d||!UBe(e,s,n,0,r-s)){++s;continue}e.copy(l,0,s,r),t._lookbehindSize=r-s;break}return s>0&&t._cb(!1,e,t._bufPos,s<r?s:r,!0),t._bufPos=r,r}function KBe(t,e,r,n){let i=t._lookbehind,s=t._lookbehindSize,o=t._needle;for(let a=0;a<n;++a,++r)if((r<0?i[s+r]:e[r])!==o[a])return!1;return!0}VBe.exports=Jne});var eqe=b((T7r,ZBe)=>{"use strict";var{Readable:UKt,Writable:KKt}=require("stream"),VKt=GBe(),{basename:GKt,convertToUTF8:HBe,getDecoder:HKt,parseContentType:zKt,parseDisposition:WKt}=hP(),JKt=Buffer.from(`\r
`),YKt=Buffer.from("\r"),QKt=Buffer.from("-");function zBe(){}var XKt=2e3,x6=16*1024,mP=0,WBe=1,JBe=2,Yne=class{constructor(e){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=mP,this.name="",this.value="",this.crlf=0,this.cb=e}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=mP,this.name="",this.value="",this.crlf=0}push(e,r,n){let i=r;for(;r<n;)switch(this.state){case mP:{let s=!1;for(;r<n;++r){if(this.byteCount===x6)return-1;++this.byteCount;let o=e[r];if(tVt[o]!==1){if(o!==58||(this.name+=e.latin1Slice(i,r),this.name.length===0))return-1;++r,s=!0,this.state=WBe;break}}if(!s){this.name+=e.latin1Slice(i,r);break}}case WBe:{let s=!1;for(;r<n;++r){if(this.byteCount===x6)return-1;++this.byteCount;let o=e[r];if(o!==32&&o!==9){i=r,s=!0,this.state=JBe;break}}if(!s)break}case JBe:switch(this.crlf){case 0:for(;r<n;++r){if(this.byteCount===x6)return-1;++this.byteCount;let s=e[r];if(rVt[s]!==1){if(s!==13)return-1;++this.crlf;break}}this.value+=e.latin1Slice(i,r++);break;case 1:if(this.byteCount===x6||(++this.byteCount,e[r++]!==10))return-1;++this.crlf;break;case 2:{if(this.byteCount===x6)return-1;++this.byteCount;let s=e[r];s===32||s===9?(i=r,this.crlf=0):(++this.pairCount<XKt&&(this.name=this.name.toLowerCase(),this.header[this.name]===void 0?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),s===13?(++this.crlf,++r):(i=r,this.crlf=0,this.state=mP,this.name="",this.value=""));break}case 3:{if(this.byteCount===x6||(++this.byteCount,e[r++]!==10))return-1;let s=this.header;return this.reset(),this.cb(s),r}}break}return r}},Qne=class extends UKt{constructor(e,r){super(e),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),--r._fileEndsLeft===0&&r._finalcb){let n=r._finalcb;r._finalcb=null,process.nextTick(n)}})}_read(e){let r=this._readcb;r&&(this._readcb=null,r())}},YBe={push:(t,e)=>{},destroy:()=>{}};function ZKt(t,e){let r=t._writecb;t._writecb=null,e?t.destroy(e):r&&r()}function eVt(t,e){return t}var Xne=class extends KKt{constructor(e){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};if(super(r),!e.conType.params||typeof e.conType.params.boundary!="string")throw new Error("Multipart: Boundary not found");let n=e.conType.params.boundary,i=typeof e.defParamCharset=="string"&&e.defParamCharset?HKt(e.defParamCharset):eVt,s=e.defCharset||"utf8",o=e.preservePath,a={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.fileHwm=="number"?e.fileHwm:void 0},u=e.limits,c=u&&typeof u.fieldSize=="number"?u.fieldSize:1*1024*1024,l=u&&typeof u.fileSize=="number"?u.fileSize:1/0,d=u&&typeof u.files=="number"?u.files:1/0,p=u&&typeof u.fields=="number"?u.fields:1/0,f=u&&typeof u.parts=="number"?u.parts:1/0,h=-1,y=0,E=0,v=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let w=0,T,A=0,C,x,R,M,I=!1,F=!1,B=!1;this._hparser=null;let K=new Yne(ne=>{this._hparser=null,v=!1,R="text/plain",C=s,x="7bit",M=void 0,I=!1;let $;if(!ne["content-disposition"]){v=!0;return}let V=WKt(ne["content-disposition"][0],i);if(!V||V.type!=="form-data"){v=!0;return}if(V.params&&(V.params.name&&(M=V.params.name),V.params["filename*"]?$=V.params["filename*"]:V.params.filename&&($=V.params.filename),$!==void 0&&!o&&($=GKt($))),ne["content-type"]){let me=zKt(ne["content-type"][0]);me&&(R=`${me.type}/${me.subtype}`,me.params&&typeof me.params.charset=="string"&&(C=me.params.charset.toLowerCase()))}if(ne["content-transfer-encoding"]&&(x=ne["content-transfer-encoding"][0].toLowerCase()),R==="application/octet-stream"||$!==void 0){if(E===d){F||(F=!0,this.emit("filesLimit")),v=!0;return}if(++E,this.listenerCount("file")===0){v=!0;return}w=0,this._fileStream=new Qne(a,this),++this._fileEndsLeft,this.emit("file",M,this._fileStream,{filename:$,encoding:x,mimeType:R})}else{if(y===p){B||(B=!0,this.emit("fieldsLimit")),v=!0;return}if(++y,this.listenerCount("field")===0){v=!0;return}T=[],A=0}}),k=0,G=(ne,$,V,me,Oe)=>{e:for(;$;){if(this._hparser!==null){let fe=this._hparser.push($,V,me);if(fe===-1){this._hparser=null,K.reset(),this.emit("error",new Error("Malformed part header"));break}V=fe}if(V===me)break;if(k!==0){if(k===1){switch($[V]){case 45:k=2,++V;break;case 13:k=3,++V;break;default:k=0}if(V===me)return}if(k===2){if(k=0,$[V]===45){this._complete=!0,this._bparser=YBe;return}let fe=this._writecb;this._writecb=zBe,G(!1,QKt,0,1,!1),this._writecb=fe}else if(k===3)if(k=0,$[V]===10){if(++V,h>=f||(this._hparser=K,V===me))break;continue e}else{let fe=this._writecb;this._writecb=zBe,G(!1,YKt,0,1,!1),this._writecb=fe}}if(!v){if(this._fileStream){let fe,He=Math.min(me-V,l-w);Oe?fe=$.slice(V,V+He):(fe=Buffer.allocUnsafe(He),$.copy(fe,0,V,V+He)),w+=fe.length,w===l?(fe.length>0&&this._fileStream.push(fe),this._fileStream.emit("limit"),this._fileStream.truncated=!0,v=!0):this._fileStream.push(fe)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(T!==void 0){let fe,He=Math.min(me-V,c-A);Oe?fe=$.slice(V,V+He):(fe=Buffer.allocUnsafe(He),$.copy(fe,0,V,V+He)),A+=He,T.push(fe),A===c&&(v=!0,I=!0)}}break}if(ne){if(k=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(T!==void 0){let fe;switch(T.length){case 0:fe="";break;case 1:fe=HBe(T[0],C,0);break;default:fe=HBe(Buffer.concat(T,A),C,0)}T=void 0,A=0,this.emit("field",M,fe,{nameTruncated:!1,valueTruncated:I,encoding:x,mimeType:R})}++h===f&&this.emit("partsLimit")}};this._bparser=new VKt(`\r
--${n}`,G),this._writecb=null,this._finalcb=null,this.write(JKt)}static detect(e){return e.type==="multipart"&&e.subtype==="form-data"}_write(e,r,n){this._writecb=n,this._bparser.push(e,0),this._writecb&&ZKt(this)}_destroy(e,r){this._hparser=null,this._bparser=YBe,e||(e=XBe(this));let n=this._fileStream;n&&(this._fileStream=null,n.destroy(e)),r(e)}_final(e){if(this._bparser.destroy(),!this._complete)return e(new Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=QBe.bind(null,this,e):QBe(this,e)}};function QBe(t,e,r){if(r)return e(r);r=XBe(t),e(r)}function XBe(t){if(t._hparser)return new Error("Malformed part header");let e=t._fileStream;if(e&&(t._fileStream=null,e.destroy(new Error("Unexpected end of file"))),!t._complete)return new Error("Unexpected end of form")}var tVt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rVt=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];ZBe.exports=Xne});var rqe=b((O7r,tqe)=>{"use strict";var{Writable:nVt}=require("stream"),{getDecoder:iVt}=hP(),nie=class extends nVt{constructor(e){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};super(r);let n=e.defCharset||"utf8";e.conType.params&&typeof e.conType.params.charset=="string"&&(n=e.conType.params.charset),this.charset=n;let i=e.limits;this.fieldSizeLimit=i&&typeof i.fieldSize=="number"?i.fieldSize:1*1024*1024,this.fieldsLimit=i&&typeof i.fields=="number"?i.fields:1/0,this.fieldNameSizeLimit=i&&typeof i.fieldNameSize=="number"?i.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=iVt(n)}static detect(e){return e.type==="application"&&e.subtype==="x-www-form-urlencoded"}_write(e,r,n){if(this._fields>=this.fieldsLimit)return n();let i=0,s=e.length;if(this._lastPos=0,this._byte!==-2){if(i=Zne(this,e,i,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();this._inKey?++this._bytesKey:++this._bytesVal}e:for(;i<s;)if(this._inKey){for(i=eie(this,e,i,s);i<s;){switch(e[i]){case 61:this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue e;case 38:if(this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),n();continue;case 43:this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._key+=" ",this._lastPos=i+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=i+1,this._byte=-1,i=Zne(this,e,i+1,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();++this._bytesKey,i=eie(this,e,i,s);continue}++i,++this._bytesKey,i=eie(this,e,i,s)}this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i))}else{for(i=tie(this,e,i,s);i<s;){switch(e[i]){case 38:if(this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),n();continue e;case 43:this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._val+=" ",this._lastPos=i+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._lastPos=i+1,this._byte=-1,i=Zne(this,e,i+1,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();++this._bytesVal,i=tie(this,e,i,s);continue}++i,++this._bytesVal,i=tie(this,e,i,s)}this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i))}n()}_final(e){if(this._byte!==-2)return e(new Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),e()}};function Zne(t,e,r,n){if(r>=n)return n;if(t._byte===-1){let i=rie[e[r++]];if(i===-1)return-1;if(i>=8&&(t._encode=2),r<n){let s=rie[e[r++]];if(s===-1)return-1;t._inKey?t._key+=String.fromCharCode((i<<4)+s):t._val+=String.fromCharCode((i<<4)+s),t._byte=-2,t._lastPos=r}else t._byte=i}else{let i=rie[e[r++]];if(i===-1)return-1;t._inKey?t._key+=String.fromCharCode((t._byte<<4)+i):t._val+=String.fromCharCode((t._byte<<4)+i),t._byte=-2,t._lastPos=r}return r}function eie(t,e,r,n){if(t._bytesKey>t.fieldNameSizeLimit){for(t._keyTrunc||t._lastPos<r&&(t._key+=e.latin1Slice(t._lastPos,r-1)),t._keyTrunc=!0;r<n;++r){let i=e[r];if(i===61||i===38)break;++t._bytesKey}t._lastPos=r}return r}function tie(t,e,r,n){if(t._bytesVal>t.fieldSizeLimit){for(t._valTrunc||t._lastPos<r&&(t._val+=e.latin1Slice(t._lastPos,r-1)),t._valTrunc=!0;r<n&&e[r]!==38;++r)++t._bytesVal;t._lastPos=r}return r}var rie=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];tqe.exports=nie});var iqe=b((x7r,nqe)=>{"use strict";var{parseContentType:sVt}=hP();function oVt(t){let e=t.headers,r=sVt(e["content-type"]);if(!r)throw new Error("Malformed content type");for(let n of aVt){if(!n.detect(r))continue;let s={limits:t.limits,headers:e,conType:r,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return t.highWaterMark&&(s.highWaterMark=t.highWaterMark),t.fileHwm&&(s.fileHwm=t.fileHwm),s.defCharset=t.defCharset,s.defParamCharset=t.defParamCharset,s.preservePath=t.preservePath,new n(s)}throw new Error(`Unsupported content type: ${e["content-type"]}`)}var aVt=[eqe(),rqe()].filter(function(t){return typeof t.detect=="function"});nqe.exports=t=>{if((typeof t!="object"||t===null)&&(t={}),typeof t.headers!="object"||t.headers===null||typeof t.headers["content-type"]!="string")throw new Error("Missing Content-Type");return oVt(t)}});var oqe=b((I7r,sqe)=>{sqe.exports=cVt;var uVt=Object.prototype.hasOwnProperty;function cVt(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)uVt.call(r,n)&&(t[n]=r[n])}return t}});var uqe=b((R7r,aqe)=>{var lVt=/^[^\[]*/,dVt=/^\[(\d+)\]/,pVt=/^\[([^\]]+)\]/;function fVt(t){function e(){return[{type:"object",key:t,last:!0}]}var r=lVt.exec(t)[0];if(!r)return e();for(var n=t.length,i=r.length,s={type:"object",key:r},o=[s];i<n;){var a;if(t[i]==="["&&t[i+1]==="]"){if(i+=2,s.append=!0,i!==n)return e();continue}if(a=dVt.exec(t.substring(i)),a!==null){i+=a[0].length,s.nextType="array",s={type:"array",key:parseInt(a[1],10)},o.push(s);continue}if(a=pVt.exec(t.substring(i)),a!==null){i+=a[0].length,s.nextType="object",s={type:"object",key:a[1]},o.push(s);continue}return e()}return s.last=!0,o}aqe.exports=fVt});var pqe=b((D7r,dqe)=>{function cqe(t){return t===void 0?"undefined":Array.isArray(t)?"array":typeof t=="object"?"object":"scalar"}function lqe(t,e,r,n){switch(cqe(r)){case"undefined":e.append?t[e.key]=[n]:t[e.key]=n;break;case"array":t[e.key].push(n);break;case"object":return lqe(r,{type:"object",key:"",last:!0},r[""],n);case"scalar":t[e.key]=[t[e.key],n];break}return t}function hVt(t,e,r,n){if(e.last)return lqe(t,e,r,n);var i;switch(cqe(r)){case"undefined":return e.nextType==="array"?t[e.key]=[]:t[e.key]=Object.create(null),t[e.key];case"object":return t[e.key];case"array":return e.nextType==="array"?r:(i=Object.create(null),t[e.key]=i,r.forEach(function(s,o){s!==void 0&&(i[""+o]=s)}),i);case"scalar":return i=Object.create(null),i[""]=r,t[e.key]=i,i}}dqe.exports=hVt});var hqe=b((k7r,fqe)=>{var mVt=uqe(),yVt=pqe();function gVt(t,e,r){var n=mVt(e);n.reduce(function(i,s){return yVt(i,s,i[s.key],r)},t)}fqe.exports=gVt});var gqe=b((M7r,yqe)=>{var mqe=require("events").EventEmitter;function I6(){mqe.call(this),this.value=0}I6.prototype=Object.create(mqe.prototype);I6.prototype.increment=function(){this.value++};I6.prototype.decrement=function(){--this.value===0&&this.emit("zero")};I6.prototype.isZero=function(){return this.value===0};I6.prototype.onceZero=function(e){if(this.isZero())return e();this.once("zero",e)};yqe.exports=I6});var iie=b((P7r,_qe)=>{var bVt=require("util"),_Vt={LIMIT_PART_COUNT:"Too many parts",LIMIT_FILE_SIZE:"File too large",LIMIT_FILE_COUNT:"Too many files",LIMIT_FIELD_KEY:"Field name too long",LIMIT_FIELD_VALUE:"Field value too long",LIMIT_FIELD_COUNT:"Too many fields",LIMIT_UNEXPECTED_FILE:"Unexpected field",MISSING_FIELD_NAME:"Field name missing"};function bqe(t,e){Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=_Vt[t],this.code=t,e&&(this.field=e)}bVt.inherits(bqe,Error);_qe.exports=bqe});var Sqe=b((N7r,vqe)=>{"use strict";var Eqe=Object.getOwnPropertySymbols,EVt=Object.prototype.hasOwnProperty,vVt=Object.prototype.propertyIsEnumerable;function SVt(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function wVt(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}vqe.exports=wVt()?Object.assign:function(t,e){for(var r,n=SVt(t),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)EVt.call(r,o)&&(n[o]=r[o]);if(Eqe){i=Eqe(r);for(var a=0;a<i.length;a++)vVt.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var Cqe=b((F7r,Aqe)=>{var AVt=Sqe();function wqe(t,e){var r=t.indexOf(e);~r&&t.splice(r,1)}function yP(t,e){switch(this.strategy=t,this.req=e,t){case"NONE":break;case"VALUE":break;case"ARRAY":e.files=[];break;case"OBJECT":e.files=Object.create(null);break;default:throw new Error("Unknown file strategy: "+t)}}yP.prototype.insertPlaceholder=function(t){var e={fieldname:t.fieldname};switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":this.req.files.push(e);break;case"OBJECT":this.req.files[t.fieldname]?this.req.files[t.fieldname].push(e):this.req.files[t.fieldname]=[e];break}return e};yP.prototype.removePlaceholder=function(t){switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":wqe(this.req.files,t);break;case"OBJECT":this.req.files[t.fieldname].length===1?delete this.req.files[t.fieldname]:wqe(this.req.files[t.fieldname],t);break}};yP.prototype.replacePlaceholder=function(t,e){if(this.strategy==="VALUE"){this.req.file=e;return}delete t.fieldname,AVt(t,e)};Aqe.exports=yP});var Oqe=b((B7r,Tqe)=>{function CVt(t,e,r){var n=t.length,i=[];if(n===0)return r(null,i);function s(o){var a=t[o];e(a,function(u){u&&(u.file=a,u.field=a.fieldname,i.push(u)),o<n-1?s(o+1):r(null,i)})}s(0)}Tqe.exports=CVt});var Rqe=b((q7r,Iqe)=>{var TVt=NBe(),OVt=iqe(),xqe=oqe(),xVt=hqe(),IVt=gqe(),RVt=iie(),DVt=Cqe(),kVt=Oqe();function MVt(t){t.on("readable",()=>{for(;t.read()!==null;);})}function PVt(t){return function(r,n,i){if(!TVt(r,["multipart"]))return i();var s=t(),o=s.limits,a=s.storage,u=s.fileFilter,c=s.fileStrategy,l=s.preservePath;r.body=Object.create(null),r.on("error",function(x){A(x)});var d;try{d=OVt({headers:r.headers,limits:o,preservePath:l})}catch(x){return i(x)}var p=new DVt(c,r),f=!1,h=!1,y=!1,E=new IVt,v=[];function w(x){f||(f=!0,r.unpipe(d),MVt(r),r.resume(),setImmediate(()=>{d.removeAllListeners()}),i(x))}function T(){h&&E.isZero()&&!y&&w()}function A(x){y||(y=!0,E.onceZero(function(){function R(M,I){a._removeFile(r,M,I)}kVt(v,R,function(M,I){if(M)return w(M);x.storageErrors=I,w(x)})}))}function C(x,R){A(new RVt(x,R))}d.on("field",function(x,R,{nameTruncated:M,valueTruncated:I}){if(x==null)return C("MISSING_FIELD_NAME");if(M)return C("LIMIT_FIELD_KEY");if(I)return C("LIMIT_FIELD_VALUE",x);if(o&&Object.prototype.hasOwnProperty.call(o,"fieldNameSize")&&x.length>o.fieldNameSize)return C("LIMIT_FIELD_KEY");xVt(r.body,x,R)}),d.on("file",function(x,R,{filename:M,encoding:I,mimeType:F}){var B=!1;if(R.on("error",function(G){B&&E.decrement(),A(G)}),x==null)return C("MISSING_FIELD_NAME");if(!M)return R.resume();if(o&&Object.prototype.hasOwnProperty.call(o,"fieldNameSize")&&x.length>o.fieldNameSize)return C("LIMIT_FIELD_KEY");var K={fieldname:x,originalname:M,encoding:I,mimetype:F},k=p.insertPlaceholder(K);u(r,K,function(G,ne){if(G)return p.removePlaceholder(k),A(G);if(!ne)return p.removePlaceholder(k),R.resume();var $=!1;B=!0,E.increment(),Object.defineProperty(K,"stream",{configurable:!0,enumerable:!1,value:R}),R.on("limit",function(){$=!0,C("LIMIT_FILE_SIZE",x)}),a._handleFile(r,K,function(V,me){if($)return p.removePlaceholder(k),v.push(xqe(K,me)),E.decrement();if(V)return p.removePlaceholder(k),E.decrement(),A(V);var Oe=xqe(K,me);p.replacePlaceholder(k,Oe),v.push(Oe),E.decrement(),T()})})}),d.on("error",function(x){A(x)}),d.on("partsLimit",function(){C("LIMIT_PART_COUNT")}),d.on("filesLimit",function(){C("LIMIT_FILE_COUNT")}),d.on("fieldsLimit",function(){C("LIMIT_FIELD_COUNT")}),d.on("close",function(){h=!0,T()}),r.pipe(d)}}Iqe.exports=PVt});var Pqe=b((L7r,Mqe)=>{var rA=require("path"),Dqe=require("fs"),kqe=parseInt("0777",8);Mqe.exports=R6.mkdirp=R6.mkdirP=R6;function R6(t,e,r,n){typeof e=="function"?(r=e,e={}):(!e||typeof e!="object")&&(e={mode:e});var i=e.mode,s=e.fs||Dqe;i===void 0&&(i=kqe),n||(n=null);var o=r||function(){};t=rA.resolve(t),s.mkdir(t,i,function(a){if(!a)return n=n||t,o(null,n);switch(a.code){case"ENOENT":if(rA.dirname(t)===t)return o(a);R6(rA.dirname(t),e,function(u,c){u?o(u,c):R6(t,e,o,c)});break;default:s.stat(t,function(u,c){u||!c.isDirectory()?o(a,n):o(null,n)});break}})}R6.sync=function t(e,r,n){(!r||typeof r!="object")&&(r={mode:r});var i=r.mode,s=r.fs||Dqe;i===void 0&&(i=kqe),n||(n=null),e=rA.resolve(e);try{s.mkdirSync(e,i),n=n||e}catch(a){switch(a.code){case"ENOENT":n=t(rA.dirname(e),r,n),t(e,r,n);break;default:var o;try{o=s.statSync(e)}catch{throw a}if(!o.isDirectory())throw a;break}}return n}});var Bqe=b((j7r,Fqe)=>{var Nqe=require("fs"),NVt=require("os"),FVt=require("path"),BVt=require("crypto"),qVt=Pqe();function LVt(t,e,r){BVt.randomBytes(16,function(n,i){r(n,n?void 0:i.toString("hex"))})}function jVt(t,e,r){r(null,NVt.tmpdir())}function sie(t){this.getFilename=t.filename||LVt,typeof t.destination=="string"?(qVt.sync(t.destination),this.getDestination=function(e,r,n){n(null,t.destination)}):this.getDestination=t.destination||jVt}sie.prototype._handleFile=function(e,r,n){var i=this;i.getDestination(e,r,function(s,o){if(s)return n(s);i.getFilename(e,r,function(a,u){if(a)return n(a);var c=FVt.join(o,u),l=Nqe.createWriteStream(c);r.stream.pipe(l),l.on("error",n),l.on("finish",function(){n(null,{destination:o,filename:u,path:c,size:l.bytesWritten})})})})};sie.prototype._removeFile=function(e,r,n){var i=r.path;delete r.destination,delete r.filename,delete r.path,Nqe.unlink(i,n)};Fqe.exports=function(t){return new sie(t)}});var Lqe=b(($7r,qqe)=>{var $Vt=Object.prototype.toString,oie=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function UVt(t){return $Vt.call(t).slice(8,-1)==="ArrayBuffer"}function KVt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return oie?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function VVt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return oie?Buffer.from(t,e):new Buffer(t,e)}function GVt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return UVt(t)?KVt(t,e,r):typeof t=="string"?VVt(t,e):oie?Buffer.from(t):new Buffer(t)}qqe.exports=GVt});var Gqe=b(Et=>{var jqe=void 0,HVt=1e5,Bn=(function(){var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(r){return t.call(r).replace(/^\[object *|\]$/g,"")},HasProperty:function(r,n){return n in r},HasOwnProperty:function(r,n){return e.call(r,n)},IsCallable:function(r){return typeof r=="function"},ToInt32:function(r){return r>>0},ToUint32:function(r){return r>>>0}}})(),zVt=Math.LN2,WVt=Math.abs,gP=Math.floor,JVt=Math.log,YVt=Math.min,Vl=Math.pow,QVt=Math.round;function aie(t){if($qe&&D6){var e=$qe(t),r;for(r=0;r<e.length;r+=1)D6(t,e[r],{value:t[e[r]],writable:!1,enumerable:!1,configurable:!1})}}var D6;Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})()?D6=Object.defineProperty:D6=function(t,e,r){if(!t===Object(t))throw new TypeError("Object.defineProperty called on non-object");return Bn.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(t,e,r.get),Bn.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(t,e,r.set),Bn.HasProperty(r,"value")&&(t[e]=r.value),t};var $qe=Object.getOwnPropertyNames||function(t){if(t!==Object(t))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e=[],r;for(r in t)Bn.HasOwnProperty(t,r)&&e.push(r);return e};function XVt(t){if(!D6)return;if(t.length>HVt)throw new RangeError("Array too large for polyfill");function e(n){D6(t,n,{get:function(){return t._getter(n)},set:function(i){t._setter(n,i)},enumerable:!0,configurable:!1})}var r;for(r=0;r<t.length;r+=1)e(r)}function uie(t,e){var r=32-e;return t<<r>>r}function cie(t,e){var r=32-e;return t<<r>>>r}function ZVt(t){return[t&255]}function eGt(t){return uie(t[0],8)}function tGt(t){return[t&255]}function Uqe(t){return cie(t[0],8)}function rGt(t){return t=QVt(Number(t)),[t<0?0:t>255?255:t&255]}function nGt(t){return[t>>8&255,t&255]}function iGt(t){return uie(t[0]<<8|t[1],16)}function sGt(t){return[t>>8&255,t&255]}function oGt(t){return cie(t[0]<<8|t[1],16)}function aGt(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]}function uGt(t){return uie(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function cGt(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]}function lGt(t){return cie(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function Kqe(t,e,r){var n=(1<<e-1)-1,i,s,o,a,u,c,l,d;function p(f){var h=gP(f),y=f-h;return y<.5?h:y>.5||h%2?h+1:h}for(t!==t?(s=(1<<e)-1,o=Vl(2,r-1),i=0):t===1/0||t===-1/0?(s=(1<<e)-1,o=0,i=t<0?1:0):t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=WVt(t),t>=Vl(2,1-n)?(s=YVt(gP(JVt(t)/zVt),1023),o=p(t/Vl(2,s)*Vl(2,r)),o/Vl(2,r)>=2&&(s=s+1,o=1),s>n?(s=(1<<e)-1,o=0):(s=s+n,o=o-Vl(2,r))):(s=0,o=p(t/Vl(2,1-n-r)))),c=[],u=r;u;u-=1)c.push(o%2?1:0),o=gP(o/2);for(u=e;u;u-=1)c.push(s%2?1:0),s=gP(s/2);for(c.push(i?1:0),c.reverse(),l=c.join(""),d=[];l.length;)d.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return d}function Vqe(t,e,r){var n=[],i,s,o,a,u,c,l,d;for(i=t.length;i;i-=1)for(o=t[i-1],s=8;s;s-=1)n.push(o%2?1:0),o=o>>1;return n.reverse(),a=n.join(""),u=(1<<e-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,l=parseInt(a.substring(1,1+e),2),d=parseInt(a.substring(1+e),2),l===(1<<e)-1?d!==0?NaN:c*(1/0):l>0?c*Vl(2,l-u)*(1+d/Vl(2,r)):d!==0?c*Vl(2,-(u-1))*(d/Vl(2,r)):c<0?-0:0}function dGt(t){return Vqe(t,11,52)}function pGt(t){return Kqe(t,11,52)}function fGt(t){return Vqe(t,8,23)}function hGt(t){return Kqe(t,8,23)}(function(){var t=function(f){if(f=Bn.ToInt32(f),f<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=f,this._bytes=[],this._bytes.length=f;var h;for(h=0;h<this.byteLength;h+=1)this._bytes[h]=0;aie(this)};Et.ArrayBuffer=Et.ArrayBuffer||t;var e=function(){};function r(p,f,h){var y;return y=function(E,v,w){var T,A,C,x;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=Bn.ToInt32(arguments[0]),w<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===y)for(T=arguments[0],this.length=T.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,C=0;C<this.length;C+=1)this._setter(C,T._getter(C));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof t||Bn.Class(arguments[0])==="ArrayBuffer"))for(A=arguments[0],this.length=Bn.ToUint32(A.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,C=0;C<this.length;C+=1)x=A[C],this._setter(C,Number(x));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof t||Bn.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=E,this.byteOffset=Bn.ToUint32(v),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=Bn.ToUint32(w),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=y,aie(this),XVt(this)},y.prototype=new e,y.prototype.BYTES_PER_ELEMENT=p,y.prototype._pack=f,y.prototype._unpack=h,y.BYTES_PER_ELEMENT=p,y.prototype._getter=function(E){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(E=Bn.ToUint32(E),E>=this.length)return jqe;var v=[],w,T;for(w=0,T=this.byteOffset+E*this.BYTES_PER_ELEMENT;w<this.BYTES_PER_ELEMENT;w+=1,T+=1)v.push(this.buffer._bytes[T]);return this._unpack(v)},y.prototype.get=y.prototype._getter,y.prototype._setter=function(E,v){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(E=Bn.ToUint32(E),E>=this.length)return jqe;var w=this._pack(v),T,A;for(T=0,A=this.byteOffset+E*this.BYTES_PER_ELEMENT;T<this.BYTES_PER_ELEMENT;T+=1,A+=1)this.buffer._bytes[A]=w[T]},y.prototype.set=function(E,v){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var w,T,A,C,x,R,M,I,F,B;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(w=arguments[0],A=Bn.ToUint32(arguments[1]),A+w.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(I=this.byteOffset+A*this.BYTES_PER_ELEMENT,F=w.length*this.BYTES_PER_ELEMENT,w.buffer===this.buffer){for(B=[],x=0,R=w.byteOffset;x<F;x+=1,R+=1)B[x]=w.buffer._bytes[R];for(x=0,M=I;x<F;x+=1,M+=1)this.buffer._bytes[M]=B[x]}else for(x=0,R=w.byteOffset,M=I;x<F;x+=1,R+=1,M+=1)this.buffer._bytes[M]=w.buffer._bytes[R]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(T=arguments[0],C=Bn.ToUint32(T.length),A=Bn.ToUint32(arguments[1]),A+C>this.length)throw new RangeError("Offset plus length of array is out of range");for(x=0;x<C;x+=1)R=T[x],this._setter(A+x,Number(R))}else throw new TypeError("Unexpected argument type(s)")},y.prototype.subarray=function(E,v){function w(A,C,x){return A<C?C:A>x?x:A}E=Bn.ToInt32(E),v=Bn.ToInt32(v),arguments.length<1&&(E=0),arguments.length<2&&(v=this.length),E<0&&(E=this.length+E),v<0&&(v=this.length+v),E=w(E,0,this.length),v=w(v,0,this.length);var T=v-E;return T<0&&(T=0),new this.constructor(this.buffer,this.byteOffset+E*this.BYTES_PER_ELEMENT,T)},y}var n=r(1,ZVt,eGt),i=r(1,tGt,Uqe),s=r(1,rGt,Uqe),o=r(2,nGt,iGt),a=r(2,sGt,oGt),u=r(4,aGt,uGt),c=r(4,cGt,lGt),l=r(4,hGt,fGt),d=r(8,pGt,dGt);Et.Int8Array=Et.Int8Array||n,Et.Uint8Array=Et.Uint8Array||i,Et.Uint8ClampedArray=Et.Uint8ClampedArray||s,Et.Int16Array=Et.Int16Array||o,Et.Uint16Array=Et.Uint16Array||a,Et.Int32Array=Et.Int32Array||u,Et.Uint32Array=Et.Uint32Array||c,Et.Float32Array=Et.Float32Array||l,Et.Float64Array=Et.Float64Array||d})();(function(){function t(s,o){return Bn.IsCallable(s.get)?s.get(o):s[o]}var e=(function(){var s=new Et.Uint16Array([4660]),o=new Et.Uint8Array(s.buffer);return t(o,0)===18})(),r=function(o,a,u){if(arguments.length===0)o=new Et.ArrayBuffer(0);else if(!(o instanceof Et.ArrayBuffer||Bn.Class(o)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=o||new Et.ArrayBuffer(0),this.byteOffset=Bn.ToUint32(a),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=Bn.ToUint32(u),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");aie(this)};function n(s){return function(o,a){if(o=Bn.ToUint32(o),o+s.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");o+=this.byteOffset;var u=new Et.Uint8Array(this.buffer,o,s.BYTES_PER_ELEMENT),c=[],l;for(l=0;l<s.BYTES_PER_ELEMENT;l+=1)c.push(t(u,l));return!!a==!!e&&c.reverse(),t(new s(new Et.Uint8Array(c).buffer),0)}}r.prototype.getUint8=n(Et.Uint8Array),r.prototype.getInt8=n(Et.Int8Array),r.prototype.getUint16=n(Et.Uint16Array),r.prototype.getInt16=n(Et.Int16Array),r.prototype.getUint32=n(Et.Uint32Array),r.prototype.getInt32=n(Et.Int32Array),r.prototype.getFloat32=n(Et.Float32Array),r.prototype.getFloat64=n(Et.Float64Array);function i(s){return function(o,a,u){if(o=Bn.ToUint32(o),o+s.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c=new s([a]),l=new Et.Uint8Array(c.buffer),d=[],p,f;for(p=0;p<s.BYTES_PER_ELEMENT;p+=1)d.push(t(l,p));!!u==!!e&&d.reverse(),f=new Et.Uint8Array(this.buffer,o,s.BYTES_PER_ELEMENT),f.set(d)}}r.prototype.setUint8=i(Et.Uint8Array),r.prototype.setInt8=i(Et.Int8Array),r.prototype.setUint16=i(Et.Uint16Array),r.prototype.setInt16=i(Et.Int16Array),r.prototype.setUint32=i(Et.Uint32Array),r.prototype.setInt32=i(Et.Int32Array),r.prototype.setFloat32=i(Et.Float32Array),r.prototype.setFloat64=i(Et.Float64Array),Et.DataView=Et.DataView||r})()});var Jqe=b((K7r,Wqe)=>{var Hqe=Ih().Writable,mGt=my(),nA=Lqe();typeof Uint8Array>"u"?bP=Gqe().Uint8Array:bP=Uint8Array;var bP;function Rg(t,e){if(!(this instanceof Rg))return new Rg(t,e);typeof t=="function"&&(e=t,t={}),t||(t={});var r=t.encoding,n=!1;r?(r=String(r).toLowerCase(),(r==="u8"||r==="uint8")&&(r="uint8array")):n=!0,Hqe.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=n,e&&this.on("finish",function(){e(this.getBody())}),this.body=[]}Wqe.exports=Rg;mGt(Rg,Hqe);Rg.prototype._write=function(t,e,r){this.body.push(t),r()};Rg.prototype.inferEncoding=function(t){var e=t===void 0?this.body[0]:t;return Buffer.isBuffer(e)?"buffer":typeof Uint8Array<"u"&&e instanceof Uint8Array?"uint8array":Array.isArray(e)?"array":typeof e=="string"?"string":Object.prototype.toString.call(e)==="[object Object]"?"object":"buffer"};Rg.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?_Gt(this.body):this.encoding==="string"?gGt(this.body):this.encoding==="buffer"?bGt(this.body):this.encoding==="uint8array"?EGt(this.body):this.body)};function yGt(t){return/Array\]$/.test(Object.prototype.toString.call(t))}function zqe(t){return typeof t=="string"||yGt(t)||t&&typeof t.subarray=="function"}function gGt(t){for(var e=[],r=!1,n=0;n<t.length;n++){var i=t[n];typeof i=="string"||Buffer.isBuffer(i)?e.push(i):zqe(i)?e.push(nA(i)):e.push(nA(String(i)))}return Buffer.isBuffer(t[0])?(e=Buffer.concat(e),e=e.toString("utf8")):e=e.join(""),e}function bGt(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];Buffer.isBuffer(n)?e.push(n):zqe(n)?e.push(nA(n)):e.push(nA(String(n)))}return Buffer.concat(e)}function _Gt(t){for(var e=[],r=0;r<t.length;r++)e.push.apply(e,t[r]);return e}function EGt(t){for(var e=0,r=0;r<t.length;r++)typeof t[r]=="string"&&(t[r]=nA(t[r])),e+=t[r].length;for(var n=new bP(e),r=0,i=0;r<t.length;r++)for(var s=t[r],o=0;o<s.length;o++)n[i++]=s[o];return n}});var Qqe=b((V7r,Yqe)=>{var vGt=Jqe();function lie(t){}lie.prototype._handleFile=function(e,r,n){r.stream.pipe(vGt({encoding:"buffer"},function(i){n(null,{buffer:i,size:i.length})}))};lie.prototype._removeFile=function(e,r,n){delete r.buffer,n(null)};Yqe.exports=function(t){return new lie(t)}});var rLe=b((G7r,iA)=>{var Xqe=Rqe(),Zqe=Bqe(),eLe=Qqe(),tLe=iie();function SGt(t,e,r){r(null,!0)}function fm(t){t.storage?this.storage=t.storage:t.dest?this.storage=Zqe({destination:t.dest}):this.storage=eLe(),this.limits=t.limits,this.preservePath=t.preservePath,this.fileFilter=t.fileFilter||SGt}fm.prototype._makeMiddleware=function(t,e){function r(){var n=this.fileFilter,i=Object.create(null);t.forEach(function(o){typeof o.maxCount=="number"?i[o.name]=o.maxCount:i[o.name]=1/0});function s(o,a,u){if((i[a.fieldname]||0)<=0)return u(new tLe("LIMIT_UNEXPECTED_FILE",a.fieldname));i[a.fieldname]-=1,n(o,a,u)}return{limits:this.limits,preservePath:this.preservePath,storage:this.storage,fileFilter:s,fileStrategy:e}}return Xqe(r.bind(this))};fm.prototype.single=function(t){return this._makeMiddleware([{name:t,maxCount:1}],"VALUE")};fm.prototype.array=function(t,e){return this._makeMiddleware([{name:t,maxCount:e}],"ARRAY")};fm.prototype.fields=function(t){return this._makeMiddleware(t,"OBJECT")};fm.prototype.none=function(){return this._makeMiddleware([],"NONE")};fm.prototype.any=function(){function t(){return{limits:this.limits,preservePath:this.preservePath,storage:this.storage,fileFilter:this.fileFilter,fileStrategy:"ARRAY"}}return Xqe(t.bind(this))};function wGt(t){if(t===void 0)return new fm({});if(typeof t=="object"&&t!==null)return new fm(t);throw new TypeError("Expected object for argument options")}iA.exports=wGt;iA.exports.diskStorage=Zqe;iA.exports.memoryStorage=eLe;iA.exports.MulterError=tLe});var nLe=b((H7r,AGt)=>{AGt.exports={name:"gaxios",version:"7.1.3",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:{type:"git",directory:"packages/gaxios",url:"https://github.com/googleapis/google-cloud-node-core.git"},keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2",rimraf:"^5.0.1"},homepage:"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}});var sLe=b((z7r,iLe)=>{"use strict";var CGt=nLe();iLe.exports={pkg:CGt}});var fie=b(Rc=>{"use strict";var aLe=Rc&&Rc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.GaxiosError=Rc.GAXIOS_ERROR_SYMBOL=void 0;Rc.defaultErrorRedactor=uLe;var oLe=aLe(uC()),TGt=aLe(sLe()),die=TGt.default.pkg;Rc.GAXIOS_ERROR_SYMBOL=Symbol.for(`${die.name}-gaxios-error`);var pie=class t extends Error{config;response;code;status;error;[Rc.GAXIOS_ERROR_SYMBOL]=die.version;static[Symbol.hasInstance](e){return e&&typeof e=="object"&&Rc.GAXIOS_ERROR_SYMBOL in e&&e[Rc.GAXIOS_ERROR_SYMBOL]===die.version?!0:Function.prototype[Symbol.hasInstance].call(t,e)}constructor(e,r,n,i){if(super(e,{cause:i}),this.config=r,this.response=n,this.error=i instanceof Error?i:void 0,this.config=(0,oLe.default)(!0,{},r),this.response&&(this.response.config=(0,oLe.default)(!0,{},this.response.config)),this.response){try{this.response.data=OGt(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}i instanceof DOMException?this.code=i.name:i&&typeof i=="object"&&"code"in i&&(typeof i.code=="string"||typeof i.code=="number")&&(this.code=i.code)}static extractAPIErrorFromResponse(e,r="The request failed"){let n=r;if(typeof e.data=="string"&&(n=e.data),e.data&&typeof e.data=="object"&&"error"in e.data&&e.data.error&&!e.ok){if(typeof e.data.error=="string")return{message:e.data.error,code:e.status,status:e.statusText};if(typeof e.data.error=="object"){n="message"in e.data.error&&typeof e.data.error.message=="string"?e.data.error.message:n;let i="status"in e.data.error&&typeof e.data.error.status=="string"?e.data.error.status:e.statusText,s="code"in e.data.error&&typeof e.data.error.code=="number"?e.data.error.code:e.status;if("errors"in e.data.error&&Array.isArray(e.data.error.errors)){let o=[];for(let a of e.data.error.errors)typeof a=="object"&&"message"in a&&typeof a.message=="string"&&o.push(a.message);return Object.assign({message:o.join(`
`)||n,code:s,status:i},e.data.error)}return Object.assign({message:n,code:s,status:i},e.data.error)}}return{message:n,code:e.status,status:e.statusText}}};Rc.GaxiosError=pie;function OGt(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}function uLe(t){let e="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function r(s){s&&s.forEach((o,a)=>{(/^authentication$/i.test(a)||/^authorization$/i.test(a)||/secret/i.test(a))&&s.set(a,e)})}function n(s,o){if(typeof s=="object"&&s!==null&&typeof s[o]=="string"){let a=s[o];(/grant_type=/i.test(a)||/assertion=/i.test(a)||/secret/i.test(a))&&(s[o]=e)}}function i(s){!s||typeof s!="object"||(s instanceof FormData||s instanceof URLSearchParams||"forEach"in s&&"set"in s?s.forEach((o,a)=>{(["grant_type","assertion"].includes(a)||/secret/.test(a))&&s.set(a,e)}):("grant_type"in s&&(s.grant_type=e),"assertion"in s&&(s.assertion=e),"client_secret"in s&&(s.client_secret=e)))}return t.config&&(r(t.config.headers),n(t.config,"data"),i(t.config.data),n(t.config,"body"),i(t.config.body),t.config.url.searchParams.has("token")&&t.config.url.searchParams.set("token",e),t.config.url.searchParams.has("client_secret")&&t.config.url.searchParams.set("client_secret",e)),t.response&&(uLe({config:t.response.config}),r(t.response.headers),t.response.bodyUsed&&(n(t.response,"data"),i(t.response.data))),t}});var lLe=b(hie=>{"use strict";Object.defineProperty(hie,"__esModule",{value:!0});hie.getRetryConfig=xGt;async function xGt(t){let e=cLe(t);if(!t||!t.config||!e&&!t.config.retry)return{shouldRetry:!1};e=e||{},e.currentRetryAttempt=e.currentRetryAttempt||0,e.retry=e.retry===void 0||e.retry===null?3:e.retry,e.httpMethodsToRetry=e.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],e.noResponseRetries=e.noResponseRetries===void 0||e.noResponseRetries===null?2:e.noResponseRetries,e.retryDelayMultiplier=e.retryDelayMultiplier?e.retryDelayMultiplier:2,e.timeOfFirstRequest=e.timeOfFirstRequest?e.timeOfFirstRequest:Date.now(),e.totalTimeout=e.totalTimeout?e.totalTimeout:Number.MAX_SAFE_INTEGER,e.maxRetryDelay=e.maxRetryDelay?e.maxRetryDelay:Number.MAX_SAFE_INTEGER;let r=[[100,199],[408,408],[429,429],[500,599]];if(e.statusCodesToRetry=e.statusCodesToRetry||r,t.config.retryConfig=e,!await(e.shouldRetry||IGt)(t))return{shouldRetry:!1,config:t.config};let i=RGt(e);t.config.retryConfig.currentRetryAttempt+=1;let s=e.retryBackoff?e.retryBackoff(t,i):new Promise(o=>{setTimeout(o,i)});return e.onRetryAttempt&&await e.onRetryAttempt(t),await s,{shouldRetry:!0,config:t.config}}function IGt(t){let e=cLe(t);if(t.config.signal?.aborted&&t.code!=="TimeoutError"||t.code==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!e.httpMethodsToRetry||!e.httpMethodsToRetry.includes(t.config.method?.toUpperCase()||"GET"))return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let s=t.response.status;if(s>=n&&s<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function cLe(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}function RGt(t){let r=(t.currentRetryAttempt?0:t.retryDelay??100)+(Math.pow(t.retryDelayMultiplier,t.currentRetryAttempt)-1)/2*1e3,n=t.totalTimeout-(Date.now()-t.timeOfFirstRequest);return Math.min(r,n,t.maxRetryDelay)}});var yie=b(_P=>{"use strict";Object.defineProperty(_P,"__esModule",{value:!0});_P.GaxiosInterceptorManager=void 0;var mie=class extends Set{};_P.GaxiosInterceptorManager=mie});var pLe=b((Q7r,dLe)=>{var k6=1e3,M6=k6*60,P6=M6*60,Dg=P6*24,DGt=Dg*7,kGt=Dg*365.25;dLe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return MGt(t);if(r==="number"&&isFinite(t))return e.long?NGt(t):PGt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function MGt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*kGt;case"weeks":case"week":case"w":return r*DGt;case"days":case"day":case"d":return r*Dg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*P6;case"minutes":case"minute":case"mins":case"min":case"m":return r*M6;case"seconds":case"second":case"secs":case"sec":case"s":return r*k6;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function PGt(t){var e=Math.abs(t);return e>=Dg?Math.round(t/Dg)+"d":e>=P6?Math.round(t/P6)+"h":e>=M6?Math.round(t/M6)+"m":e>=k6?Math.round(t/k6)+"s":t+"ms"}function NGt(t){var e=Math.abs(t);return e>=Dg?EP(t,e,Dg,"day"):e>=P6?EP(t,e,P6,"hour"):e>=M6?EP(t,e,M6,"minute"):e>=k6?EP(t,e,k6,"second"):t+" ms"}function EP(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var gie=b((X7r,fLe)=>{function FGt(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=pLe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function y(...E){if(!y.enabled)return;let v=y,w=Number(new Date),T=w-(d||w);v.diff=T,v.prev=d,v.curr=w,d=w,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let A=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=E[A];x=M.call(v,I),E.splice(A,1),A--}return x}),r.formatArgs.call(v,E),(v.log||r.log).apply(v,E)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:E=>{p=E}}),typeof r.init=="function"&&r.init(y),y}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,y=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,y=p,f++):(p++,f++);else if(h!==-1)f=h+1,y++,p=y;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}fLe.exports=FGt});var hLe=b((Ba,vP)=>{Ba.formatArgs=qGt;Ba.save=LGt;Ba.load=jGt;Ba.useColors=BGt;Ba.storage=$Gt();Ba.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ba.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function BGt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function qGt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+vP.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Ba.log=console.debug||console.log||(()=>{});function LGt(t){try{t?Ba.storage.setItem("debug",t):Ba.storage.removeItem("debug")}catch{}}function jGt(){let t;try{t=Ba.storage.getItem("debug")||Ba.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function $Gt(){try{return localStorage}catch{}}vP.exports=gie()(Ba);var{formatters:UGt}=vP.exports;UGt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var yLe=b((Ts,wP)=>{var KGt=require("tty"),SP=require("util");Ts.init=YGt;Ts.log=zGt;Ts.formatArgs=GGt;Ts.save=WGt;Ts.load=JGt;Ts.useColors=VGt;Ts.destroy=SP.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ts.colors=[6,2,3,4,5,1];try{let t=O3();t&&(t.stderr||t).level>=2&&(Ts.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ts.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function VGt(){return"colors"in Ts.inspectOpts?!!Ts.inspectOpts.colors:KGt.isatty(process.stderr.fd)}function GGt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+wP.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=HGt()+e+" "+t[0]}function HGt(){return Ts.inspectOpts.hideDate?"":new Date().toISOString()+" "}function zGt(...t){return process.stderr.write(SP.formatWithOptions(Ts.inspectOpts,...t)+`
`)}function WGt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function JGt(){return process.env.DEBUG}function YGt(t){t.inspectOpts={};let e=Object.keys(Ts.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ts.inspectOpts[e[r]]}wP.exports=gie()(Ts);var{formatters:mLe}=wP.exports;mLe.o=function(t){return this.inspectOpts.colors=this.useColors,SP.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};mLe.O=function(t){return this.inspectOpts.colors=this.useColors,SP.inspect(t,this.inspectOpts)}});var _ie=b((Z7r,bie)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?bie.exports=hLe():bie.exports=yLe()});var _Le=b(qa=>{"use strict";var QGt=qa&&qa.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),XGt=qa&&qa.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),gLe=qa&&qa.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QGt(e,t,r);return XGt(e,t),e};Object.defineProperty(qa,"__esModule",{value:!0});qa.req=qa.json=qa.toBuffer=void 0;var ZGt=gLe(require("http")),eHt=gLe(require("https"));async function bLe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}qa.toBuffer=bLe;async function tHt(t){let r=(await bLe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}qa.json=tHt;function rHt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?eHt:ZGt).request(t,e),i=new Promise((s,o)=>{n.once("response",s).once("error",o).end()});return n.then=i.then.bind(i),n}qa.req=rHt});var wLe=b(hu=>{"use strict";var vLe=hu&&hu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),nHt=hu&&hu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),SLe=hu&&hu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vLe(e,t,r);return nHt(e,t),e},iHt=hu&&hu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vLe(e,t,r)};Object.defineProperty(hu,"__esModule",{value:!0});hu.Agent=void 0;var sHt=SLe(require("net")),ELe=SLe(require("http")),oHt=require("https");iHt(_Le(),hu);var Yd=Symbol("AgentBaseInternalState"),Eie=class extends ELe.Agent{constructor(e){super(e),this[Yd]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new sHt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?oHt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},s=this.getName(i),o=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,i)).then(a=>{if(this.decrementSockets(s,o),a instanceof ELe.Agent)try{return a.addRequest(e,i)}catch(u){return n(u)}this[Yd].currentSocket=a,super.createSocket(e,r,n)},a=>{this.decrementSockets(s,o),n(a)})}createConnection(){let e=this[Yd].currentSocket;if(this[Yd].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Yd].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Yd]&&(this[Yd].defaultPort=e)}get protocol(){return this[Yd].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Yd]&&(this[Yd].protocol=e)}};hu.Agent=Eie});var ALe=b(N6=>{"use strict";var aHt=N6&&N6.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(N6,"__esModule",{value:!0});N6.parseProxyResponse=void 0;var uHt=aHt(_ie()),AP=(0,uHt.default)("https-proxy-agent:parse-proxy-response");function cHt(t){return new Promise((e,r)=>{let n=0,i=[];function s(){let l=t.read();l?c(l):t.once("readable",s)}function o(){t.removeListener("end",a),t.removeListener("error",u),t.removeListener("readable",s)}function a(){o(),AP("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}function u(l){o(),AP("onerror %o",l),r(l)}function c(l){i.push(l),n+=l.length;let d=Buffer.concat(i,n),p=d.indexOf(`\r
\r
`);if(p===-1){AP("have not received end of HTTP headers yet..."),s();return}let f=d.slice(0,p).toString("ascii").split(`\r
`),h=f.shift();if(!h)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let y=h.split(" "),E=+y[1],v=y.slice(2).join(" "),w={};for(let T of f){if(!T)continue;let A=T.indexOf(":");if(A===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${T}"`));let C=T.slice(0,A).toLowerCase(),x=T.slice(A+1).trimStart(),R=w[C];typeof R=="string"?w[C]=[R,x]:Array.isArray(R)?R.push(x):w[C]=x}AP("got proxy server response: %o %o",h,w),o(),e({connect:{statusCode:E,statusText:v,headers:w},buffered:d})}t.on("error",u),t.on("end",a),s()})}N6.parseProxyResponse=cHt});var RLe=b(Dc=>{"use strict";var lHt=Dc&&Dc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),dHt=Dc&&Dc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),xLe=Dc&&Dc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lHt(e,t,r);return dHt(e,t),e},ILe=Dc&&Dc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.HttpsProxyAgent=void 0;var CP=xLe(require("net")),CLe=xLe(require("tls")),pHt=ILe(require("assert")),fHt=ILe(_ie()),hHt=wLe(),mHt=require("url"),yHt=ALe(),sA=(0,fHt.default)("https-proxy-agent"),TLe=t=>t.servername===void 0&&t.host&&!CP.isIP(t.host)?{...t,servername:t.host}:t,TP=class extends hHt.Agent{constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new mHt.URL(e):e,this.proxyHeaders=r?.headers??{},sA("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?OLe(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;n.protocol==="https:"?(sA("Creating `tls.Socket`: %o",this.connectOpts),i=CLe.connect(TLe(this.connectOpts))):(sA("Creating `net.Socket`: %o",this.connectOpts),i=CP.connect(this.connectOpts));let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},o=CP.isIPv6(r.host)?`[${r.host}]`:r.host,a=`CONNECT ${o}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let p=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(p).toString("base64")}`}s.Host=`${o}:${r.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let p of Object.keys(s))a+=`${p}: ${s[p]}\r
`;let u=(0,yHt.parseProxyResponse)(i);i.write(`${a}\r
`);let{connect:c,buffered:l}=await u;if(e.emit("proxyConnect",c),this.emit("proxyConnect",c,e),c.statusCode===200)return e.once("socket",gHt),r.secureEndpoint?(sA("Upgrading socket connection to TLS"),CLe.connect({...OLe(TLe(r),"host","path","port"),socket:i})):i;i.destroy();let d=new CP.Socket({writable:!1});return d.readable=!0,e.once("socket",p=>{sA("Replaying proxy buffer for failed request"),(0,pHt.default)(p.listenerCount("data")>0),p.push(l),p.push(null)}),d}};TP.protocols=["http","https"];Dc.HttpsProxyAgent=TP;function gHt(t){t.resume()}function OLe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});function bHt(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,s=r[0]||"text/plain",o=s;for(let l=1;l<r.length;l++)r[l]==="base64"?i=!0:r[l]&&(o+=`;${r[l]}`,r[l].indexOf("charset=")===0&&(n=r[l].substring(8)));!r[0]&&!n.length&&(o+=";charset=US-ASCII",n="US-ASCII");let a=i?"base64":"ascii",u=unescape(t.substring(e+1)),c=Buffer.from(u,a);return c.type=s,c.typeFull=o,c.charset=n,c}var DLe,kLe=ce(()=>{DLe=bHt});var PLe=b((OP,MLe)=>{(function(t,e){typeof OP=="object"&&typeof MLe<"u"?e(OP):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(OP,(function(t){"use strict";function e(){}function r(_){return typeof _=="object"&&_!==null||typeof _=="function"}let n=e;function i(_,S){try{Object.defineProperty(_,"name",{value:S,configurable:!0})}catch{}}let s=Promise,o=Promise.prototype.then,a=Promise.reject.bind(s);function u(_){return new s(_)}function c(_){return u(S=>S(_))}function l(_){return a(_)}function d(_,S,O){return o.call(_,S,O)}function p(_,S,O){d(d(_,S,O),void 0,n)}function f(_,S){p(_,S)}function h(_,S){p(_,void 0,S)}function y(_,S,O){return d(_,S,O)}function E(_){d(_,void 0,n)}let v=_=>{if(typeof queueMicrotask=="function")v=queueMicrotask;else{let S=c(void 0);v=O=>d(S,O)}return v(_)};function w(_,S,O){if(typeof _!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(_,S,O)}function T(_,S,O){try{return c(w(_,S,O))}catch(q){return l(q)}}let A=16384;class C{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(S){let O=this._back,q=O;O._elements.length===A-1&&(q={_elements:[],_next:void 0}),O._elements.push(S),q!==O&&(this._back=q,O._next=q),++this._size}shift(){let S=this._front,O=S,q=this._cursor,W=q+1,he=S._elements,ve=he[q];return W===A&&(O=S._next,W=0),--this._size,this._cursor=W,S!==O&&(this._front=O),he[q]=void 0,ve}forEach(S){let O=this._cursor,q=this._front,W=q._elements;for(;(O!==W.length||q._next!==void 0)&&!(O===W.length&&(q=q._next,W=q._elements,O=0,W.length===0));)S(W[O]),++O}peek(){let S=this._front,O=this._cursor;return S._elements[O]}}let x=Symbol("[[AbortSteps]]"),R=Symbol("[[ErrorSteps]]"),M=Symbol("[[CancelSteps]]"),I=Symbol("[[PullSteps]]"),F=Symbol("[[ReleaseSteps]]");function B(_,S){_._ownerReadableStream=S,S._reader=_,S._state==="readable"?ne(_):S._state==="closed"?V(_):$(_,S._storedError)}function K(_,S){let O=_._ownerReadableStream;return zc(O,S)}function k(_){let S=_._ownerReadableStream;S._state==="readable"?me(_,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Oe(_,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),S._readableStreamController[F](),S._reader=void 0,_._ownerReadableStream=void 0}function G(_){return new TypeError("Cannot "+_+" a stream using a released reader")}function ne(_){_._closedPromise=u((S,O)=>{_._closedPromise_resolve=S,_._closedPromise_reject=O})}function $(_,S){ne(_),me(_,S)}function V(_){ne(_),fe(_)}function me(_,S){_._closedPromise_reject!==void 0&&(E(_._closedPromise),_._closedPromise_reject(S),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0)}function Oe(_,S){$(_,S)}function fe(_){_._closedPromise_resolve!==void 0&&(_._closedPromise_resolve(void 0),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0)}let He=Number.isFinite||function(_){return typeof _=="number"&&isFinite(_)},Pe=Math.trunc||function(_){return _<0?Math.ceil(_):Math.floor(_)};function Ce(_){return typeof _=="object"||typeof _=="function"}function Rr(_,S){if(_!==void 0&&!Ce(_))throw new TypeError(`${S} is not an object.`)}function bt(_,S){if(typeof _!="function")throw new TypeError(`${S} is not a function.`)}function na(_){return typeof _=="object"&&_!==null||typeof _=="function"}function mi(_,S){if(!na(_))throw new TypeError(`${S} is not an object.`)}function Zt(_,S,O){if(_===void 0)throw new TypeError(`Parameter ${S} is required in '${O}'.`)}function P(_,S,O){if(_===void 0)throw new TypeError(`${S} is required in '${O}'.`)}function j(_){return Number(_)}function H(_){return _===0?0:_}function ie(_){return H(Pe(_))}function Y(_,S){let q=Number.MAX_SAFE_INTEGER,W=Number(_);if(W=H(W),!He(W))throw new TypeError(`${S} is not a finite number`);if(W=ie(W),W<0||W>q)throw new TypeError(`${S} is outside the accepted range of 0 to ${q}, inclusive`);return!He(W)||W===0?0:W}function te(_,S){if(!d1(_))throw new TypeError(`${S} is not a ReadableStream.`)}function de(_){return new Se(_)}function z(_,S){_._reader._readRequests.push(S)}function X(_,S,O){let W=_._reader._readRequests.shift();O?W._closeSteps():W._chunkSteps(S)}function ue(_){return _._reader._readRequests.length}function se(_){let S=_._reader;return!(S===void 0||!ze(S))}class Se{constructor(S){if(Zt(S,1,"ReadableStreamDefaultReader"),te(S,"First parameter"),p1(S))throw new TypeError("This stream has already been locked for exclusive reading by another reader");B(this,S),this._readRequests=new C}get closed(){return ze(this)?this._closedPromise:l(Lr("closed"))}cancel(S=void 0){return ze(this)?this._ownerReadableStream===void 0?l(G("cancel")):K(this,S):l(Lr("cancel"))}read(){if(!ze(this))return l(Lr("read"));if(this._ownerReadableStream===void 0)return l(G("read from"));let S,O,q=u((he,ve)=>{S=he,O=ve});return et(this,{_chunkSteps:he=>S({value:he,done:!1}),_closeSteps:()=>S({value:void 0,done:!0}),_errorSteps:he=>O(he)}),q}releaseLock(){if(!ze(this))throw Lr("releaseLock");this._ownerReadableStream!==void 0&&Ht(this)}}Object.defineProperties(Se.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(Se.prototype.cancel,"cancel"),i(Se.prototype.read,"read"),i(Se.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Se.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function ze(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_readRequests")?!1:_ instanceof Se}function et(_,S){let O=_._ownerReadableStream;O._disturbed=!0,O._state==="closed"?S._closeSteps():O._state==="errored"?S._errorSteps(O._storedError):O._readableStreamController[I](S)}function Ht(_){k(_);let S=new TypeError("Reader was released");Nr(_,S)}function Nr(_,S){let O=_._readRequests;_._readRequests=new C,O.forEach(q=>{q._errorSteps(S)})}function Lr(_){return new TypeError(`ReadableStreamDefaultReader.prototype.${_} can only be used on a ReadableStreamDefaultReader`)}let Rt=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ar{constructor(S,O){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=S,this._preventCancel=O}next(){let S=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?y(this._ongoingPromise,S,S):S(),this._ongoingPromise}return(S){let O=()=>this._returnSteps(S);return this._ongoingPromise?y(this._ongoingPromise,O,O):O()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let S=this._reader,O,q,W=u((ve,We)=>{O=ve,q=We});return et(S,{_chunkSteps:ve=>{this._ongoingPromise=void 0,v(()=>O({value:ve,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,k(S),O({value:void 0,done:!0})},_errorSteps:ve=>{this._ongoingPromise=void 0,this._isFinished=!0,k(S),q(ve)}}),W}_returnSteps(S){if(this._isFinished)return Promise.resolve({value:S,done:!0});this._isFinished=!0;let O=this._reader;if(!this._preventCancel){let q=K(O,S);return k(O),y(q,()=>({value:S,done:!0}))}return k(O),c({value:S,done:!0})}}let Mn={next(){return Fu(this)?this._asyncIteratorImpl.next():l(Z("next"))},return(_){return Fu(this)?this._asyncIteratorImpl.return(_):l(Z("return"))}};Object.setPrototypeOf(Mn,Rt);function Gc(_,S){let O=de(_),q=new ar(O,S),W=Object.create(Mn);return W._asyncIteratorImpl=q,W}function Fu(_){if(!r(_)||!Object.prototype.hasOwnProperty.call(_,"_asyncIteratorImpl"))return!1;try{return _._asyncIteratorImpl instanceof ar}catch{return!1}}function Z(_){return new TypeError(`ReadableStreamAsyncIterator.${_} can only be used on a ReadableSteamAsyncIterator`)}let oe=Number.isNaN||function(_){return _!==_};var D,N,U;function Q(_){return _.slice()}function xe(_,S,O,q,W){new Uint8Array(_).set(new Uint8Array(O,q,W),S)}let Re=_=>(typeof _.transfer=="function"?Re=S=>S.transfer():typeof structuredClone=="function"?Re=S=>structuredClone(S,{transfer:[S]}):Re=S=>S,Re(_)),Ee=_=>(typeof _.detached=="boolean"?Ee=S=>S.detached:Ee=S=>S.byteLength===0,Ee(_));function Ie(_,S,O){if(_.slice)return _.slice(S,O);let q=O-S,W=new ArrayBuffer(q);return xe(W,0,_,S,q),W}function Be(_,S){let O=_[S];if(O!=null){if(typeof O!="function")throw new TypeError(`${String(S)} is not a function`);return O}}function $e(_){let S={[Symbol.iterator]:()=>_.iterator},O=(async function*(){return yield*S})(),q=O.next;return{iterator:O,nextMethod:q,done:!1}}let dt=(U=(D=Symbol.asyncIterator)!==null&&D!==void 0?D:(N=Symbol.for)===null||N===void 0?void 0:N.call(Symbol,"Symbol.asyncIterator"))!==null&&U!==void 0?U:"@@asyncIterator";function ur(_,S="sync",O){if(O===void 0)if(S==="async"){if(O=Be(_,dt),O===void 0){let he=Be(_,Symbol.iterator),ve=ur(_,"sync",he);return $e(ve)}}else O=Be(_,Symbol.iterator);if(O===void 0)throw new TypeError("The object is not iterable");let q=w(O,_,[]);if(!r(q))throw new TypeError("The iterator method must return an object");let W=q.next;return{iterator:q,nextMethod:W,done:!1}}function wn(_){let S=w(_.nextMethod,_.iterator,[]);if(!r(S))throw new TypeError("The iterator.next() method must return an object");return S}function Va(_){return!!_.done}function S8(_){return _.value}function Uq(_){return!(typeof _!="number"||oe(_)||_<0)}function w8(_){let S=Ie(_.buffer,_.byteOffset,_.byteOffset+_.byteLength);return new Uint8Array(S)}function Kq(_){let S=_._queue.shift();return _._queueTotalSize-=S.size,_._queueTotalSize<0&&(_._queueTotalSize=0),S.value}function Vq(_,S,O){if(!Uq(O)||O===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");_._queue.push({value:S,size:O}),_._queueTotalSize+=O}function AXe(_){return _._queue.peek().value}function u1(_){_._queue=new C,_._queueTotalSize=0}function dle(_){return _===DataView}function CXe(_){return dle(_.constructor)}function TXe(_){return dle(_)?1:_.BYTES_PER_ELEMENT}class jm{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Gq(this))throw Yq("view");return this._view}respond(S){if(!Gq(this))throw Yq("respond");if(Zt(S,1,"respond"),S=Y(S,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ee(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");O8(this._associatedReadableByteStreamController,S)}respondWithNewView(S){if(!Gq(this))throw Yq("respondWithNewView");if(Zt(S,1,"respondWithNewView"),!ArrayBuffer.isView(S))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ee(S.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");x8(this._associatedReadableByteStreamController,S)}}Object.defineProperties(jm.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),i(jm.prototype.respond,"respond"),i(jm.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(jm.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class hp{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!$m(this))throw q4("byobRequest");return Jq(this)}get desiredSize(){if(!$m(this))throw q4("desiredSize");return vle(this)}close(){if(!$m(this))throw q4("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let S=this._controlledReadableByteStream._state;if(S!=="readable")throw new TypeError(`The stream (in ${S} state) is not in the readable state and cannot be closed`);B4(this)}enqueue(S){if(!$m(this))throw q4("enqueue");if(Zt(S,1,"enqueue"),!ArrayBuffer.isView(S))throw new TypeError("chunk must be an array buffer view");if(S.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(S.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let O=this._controlledReadableByteStream._state;if(O!=="readable")throw new TypeError(`The stream (in ${O} state) is not in the readable state and cannot be enqueued to`);T8(this,S)}error(S=void 0){if(!$m(this))throw q4("error");Bu(this,S)}[M](S){ple(this),u1(this);let O=this._cancelAlgorithm(S);return C8(this),O}[I](S){let O=this._controlledReadableByteStream;if(this._queueTotalSize>0){Ele(this,S);return}let q=this._autoAllocateChunkSize;if(q!==void 0){let W;try{W=new ArrayBuffer(q)}catch(ve){S._errorSteps(ve);return}let he={buffer:W,bufferByteLength:q,byteOffset:0,byteLength:q,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(he)}z(O,S),Um(this)}[F](){if(this._pendingPullIntos.length>0){let S=this._pendingPullIntos.peek();S.readerType="none",this._pendingPullIntos=new C,this._pendingPullIntos.push(S)}}}Object.defineProperties(hp.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),i(hp.prototype.close,"close"),i(hp.prototype.enqueue,"enqueue"),i(hp.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hp.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function $m(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_controlledReadableByteStream")?!1:_ instanceof hp}function Gq(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_associatedReadableByteStreamController")?!1:_ instanceof jm}function Um(_){if(!DXe(_))return;if(_._pulling){_._pullAgain=!0;return}_._pulling=!0;let O=_._pullAlgorithm();p(O,()=>(_._pulling=!1,_._pullAgain&&(_._pullAgain=!1,Um(_)),null),q=>(Bu(_,q),null))}function ple(_){zq(_),_._pendingPullIntos=new C}function Hq(_,S){let O=!1;_._state==="closed"&&(O=!0);let q=fle(S);S.readerType==="default"?X(_,q,O):BXe(_,q,O)}function fle(_){let S=_.bytesFilled,O=_.elementSize;return new _.viewConstructor(_.buffer,_.byteOffset,S/O)}function A8(_,S,O,q){_._queue.push({buffer:S,byteOffset:O,byteLength:q}),_._queueTotalSize+=q}function hle(_,S,O,q){let W;try{W=Ie(S,O,O+q)}catch(he){throw Bu(_,he),he}A8(_,W,0,q)}function mle(_,S){S.bytesFilled>0&&hle(_,S.buffer,S.byteOffset,S.bytesFilled),S2(_)}function yle(_,S){let O=Math.min(_._queueTotalSize,S.byteLength-S.bytesFilled),q=S.bytesFilled+O,W=O,he=!1,ve=q%S.elementSize,We=q-ve;We>=S.minimumFill&&(W=We-S.bytesFilled,he=!0);let vt=_._queue;for(;W>0;){let at=vt.peek(),kt=Math.min(W,at.byteLength),zt=S.byteOffset+S.bytesFilled;xe(S.buffer,zt,at.buffer,at.byteOffset,kt),at.byteLength===kt?vt.shift():(at.byteOffset+=kt,at.byteLength-=kt),_._queueTotalSize-=kt,gle(_,kt,S),W-=kt}return he}function gle(_,S,O){O.bytesFilled+=S}function ble(_){_._queueTotalSize===0&&_._closeRequested?(C8(_),V4(_._controlledReadableByteStream)):Um(_)}function zq(_){_._byobRequest!==null&&(_._byobRequest._associatedReadableByteStreamController=void 0,_._byobRequest._view=null,_._byobRequest=null)}function Wq(_){for(;_._pendingPullIntos.length>0;){if(_._queueTotalSize===0)return;let S=_._pendingPullIntos.peek();yle(_,S)&&(S2(_),Hq(_._controlledReadableByteStream,S))}}function OXe(_){let S=_._controlledReadableByteStream._reader;for(;S._readRequests.length>0;){if(_._queueTotalSize===0)return;let O=S._readRequests.shift();Ele(_,O)}}function xXe(_,S,O,q){let W=_._controlledReadableByteStream,he=S.constructor,ve=TXe(he),{byteOffset:We,byteLength:vt}=S,at=O*ve,kt;try{kt=Re(S.buffer)}catch(Xr){q._errorSteps(Xr);return}let zt={buffer:kt,bufferByteLength:kt.byteLength,byteOffset:We,byteLength:vt,bytesFilled:0,minimumFill:at,elementSize:ve,viewConstructor:he,readerType:"byob"};if(_._pendingPullIntos.length>0){_._pendingPullIntos.push(zt),Ale(W,q);return}if(W._state==="closed"){let Xr=new he(zt.buffer,zt.byteOffset,0);q._closeSteps(Xr);return}if(_._queueTotalSize>0){if(yle(_,zt)){let Xr=fle(zt);ble(_),q._chunkSteps(Xr);return}if(_._closeRequested){let Xr=new TypeError("Insufficient bytes to fill elements in the given buffer");Bu(_,Xr),q._errorSteps(Xr);return}}_._pendingPullIntos.push(zt),Ale(W,q),Um(_)}function IXe(_,S){S.readerType==="none"&&S2(_);let O=_._controlledReadableByteStream;if(Qq(O))for(;Cle(O)>0;){let q=S2(_);Hq(O,q)}}function RXe(_,S,O){if(gle(_,S,O),O.readerType==="none"){mle(_,O),Wq(_);return}if(O.bytesFilled<O.minimumFill)return;S2(_);let q=O.bytesFilled%O.elementSize;if(q>0){let W=O.byteOffset+O.bytesFilled;hle(_,O.buffer,W-q,q)}O.bytesFilled-=q,Hq(_._controlledReadableByteStream,O),Wq(_)}function _le(_,S){let O=_._pendingPullIntos.peek();zq(_),_._controlledReadableByteStream._state==="closed"?IXe(_,O):RXe(_,S,O),Um(_)}function S2(_){return _._pendingPullIntos.shift()}function DXe(_){let S=_._controlledReadableByteStream;return S._state!=="readable"||_._closeRequested||!_._started?!1:!!(se(S)&&ue(S)>0||Qq(S)&&Cle(S)>0||vle(_)>0)}function C8(_){_._pullAlgorithm=void 0,_._cancelAlgorithm=void 0}function B4(_){let S=_._controlledReadableByteStream;if(!(_._closeRequested||S._state!=="readable")){if(_._queueTotalSize>0){_._closeRequested=!0;return}if(_._pendingPullIntos.length>0){let O=_._pendingPullIntos.peek();if(O.bytesFilled%O.elementSize!==0){let q=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Bu(_,q),q}}C8(_),V4(S)}}function T8(_,S){let O=_._controlledReadableByteStream;if(_._closeRequested||O._state!=="readable")return;let{buffer:q,byteOffset:W,byteLength:he}=S;if(Ee(q))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let ve=Re(q);if(_._pendingPullIntos.length>0){let We=_._pendingPullIntos.peek();if(Ee(We.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");zq(_),We.buffer=Re(We.buffer),We.readerType==="none"&&mle(_,We)}if(se(O))if(OXe(_),ue(O)===0)A8(_,ve,W,he);else{_._pendingPullIntos.length>0&&S2(_);let We=new Uint8Array(ve,W,he);X(O,We,!1)}else Qq(O)?(A8(_,ve,W,he),Wq(_)):A8(_,ve,W,he);Um(_)}function Bu(_,S){let O=_._controlledReadableByteStream;O._state==="readable"&&(ple(_),u1(_),C8(_),Jle(O,S))}function Ele(_,S){let O=_._queue.shift();_._queueTotalSize-=O.byteLength,ble(_);let q=new Uint8Array(O.buffer,O.byteOffset,O.byteLength);S._chunkSteps(q)}function Jq(_){if(_._byobRequest===null&&_._pendingPullIntos.length>0){let S=_._pendingPullIntos.peek(),O=new Uint8Array(S.buffer,S.byteOffset+S.bytesFilled,S.byteLength-S.bytesFilled),q=Object.create(jm.prototype);MXe(q,_,O),_._byobRequest=q}return _._byobRequest}function vle(_){let S=_._controlledReadableByteStream._state;return S==="errored"?null:S==="closed"?0:_._strategyHWM-_._queueTotalSize}function O8(_,S){let O=_._pendingPullIntos.peek();if(_._controlledReadableByteStream._state==="closed"){if(S!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(S===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(O.bytesFilled+S>O.byteLength)throw new RangeError("bytesWritten out of range")}O.buffer=Re(O.buffer),_le(_,S)}function x8(_,S){let O=_._pendingPullIntos.peek();if(_._controlledReadableByteStream._state==="closed"){if(S.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(S.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(O.byteOffset+O.bytesFilled!==S.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(O.bufferByteLength!==S.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(O.bytesFilled+S.byteLength>O.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let W=S.byteLength;O.buffer=Re(S.buffer),_le(_,W)}function Sle(_,S,O,q,W,he,ve){S._controlledReadableByteStream=_,S._pullAgain=!1,S._pulling=!1,S._byobRequest=null,S._queue=S._queueTotalSize=void 0,u1(S),S._closeRequested=!1,S._started=!1,S._strategyHWM=he,S._pullAlgorithm=q,S._cancelAlgorithm=W,S._autoAllocateChunkSize=ve,S._pendingPullIntos=new C,_._readableStreamController=S;let We=O();p(c(We),()=>(S._started=!0,Um(S),null),vt=>(Bu(S,vt),null))}function kXe(_,S,O){let q=Object.create(hp.prototype),W,he,ve;S.start!==void 0?W=()=>S.start(q):W=()=>{},S.pull!==void 0?he=()=>S.pull(q):he=()=>c(void 0),S.cancel!==void 0?ve=vt=>S.cancel(vt):ve=()=>c(void 0);let We=S.autoAllocateChunkSize;if(We===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Sle(_,q,W,he,ve,O,We)}function MXe(_,S,O){_._associatedReadableByteStreamController=S,_._view=O}function Yq(_){return new TypeError(`ReadableStreamBYOBRequest.prototype.${_} can only be used on a ReadableStreamBYOBRequest`)}function q4(_){return new TypeError(`ReadableByteStreamController.prototype.${_} can only be used on a ReadableByteStreamController`)}function PXe(_,S){Rr(_,S);let O=_?.mode;return{mode:O===void 0?void 0:NXe(O,`${S} has member 'mode' that`)}}function NXe(_,S){if(_=`${_}`,_!=="byob")throw new TypeError(`${S} '${_}' is not a valid enumeration value for ReadableStreamReaderMode`);return _}function FXe(_,S){var O;Rr(_,S);let q=(O=_?.min)!==null&&O!==void 0?O:1;return{min:Y(q,`${S} has member 'min' that`)}}function wle(_){return new c1(_)}function Ale(_,S){_._reader._readIntoRequests.push(S)}function BXe(_,S,O){let W=_._reader._readIntoRequests.shift();O?W._closeSteps(S):W._chunkSteps(S)}function Cle(_){return _._reader._readIntoRequests.length}function Qq(_){let S=_._reader;return!(S===void 0||!Km(S))}class c1{constructor(S){if(Zt(S,1,"ReadableStreamBYOBReader"),te(S,"First parameter"),p1(S))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!$m(S._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");B(this,S),this._readIntoRequests=new C}get closed(){return Km(this)?this._closedPromise:l(I8("closed"))}cancel(S=void 0){return Km(this)?this._ownerReadableStream===void 0?l(G("cancel")):K(this,S):l(I8("cancel"))}read(S,O={}){if(!Km(this))return l(I8("read"));if(!ArrayBuffer.isView(S))return l(new TypeError("view must be an array buffer view"));if(S.byteLength===0)return l(new TypeError("view must have non-zero byteLength"));if(S.buffer.byteLength===0)return l(new TypeError("view's buffer must have non-zero byteLength"));if(Ee(S.buffer))return l(new TypeError("view's buffer has been detached"));let q;try{q=FXe(O,"options")}catch(at){return l(at)}let W=q.min;if(W===0)return l(new TypeError("options.min must be greater than 0"));if(CXe(S)){if(W>S.byteLength)return l(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(W>S.length)return l(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return l(G("read from"));let he,ve,We=u((at,kt)=>{he=at,ve=kt});return Tle(this,S,W,{_chunkSteps:at=>he({value:at,done:!1}),_closeSteps:at=>he({value:at,done:!0}),_errorSteps:at=>ve(at)}),We}releaseLock(){if(!Km(this))throw I8("releaseLock");this._ownerReadableStream!==void 0&&qXe(this)}}Object.defineProperties(c1.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(c1.prototype.cancel,"cancel"),i(c1.prototype.read,"read"),i(c1.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(c1.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Km(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_readIntoRequests")?!1:_ instanceof c1}function Tle(_,S,O,q){let W=_._ownerReadableStream;W._disturbed=!0,W._state==="errored"?q._errorSteps(W._storedError):xXe(W._readableStreamController,S,O,q)}function qXe(_){k(_);let S=new TypeError("Reader was released");Ole(_,S)}function Ole(_,S){let O=_._readIntoRequests;_._readIntoRequests=new C,O.forEach(q=>{q._errorSteps(S)})}function I8(_){return new TypeError(`ReadableStreamBYOBReader.prototype.${_} can only be used on a ReadableStreamBYOBReader`)}function L4(_,S){let{highWaterMark:O}=_;if(O===void 0)return S;if(oe(O)||O<0)throw new RangeError("Invalid highWaterMark");return O}function R8(_){let{size:S}=_;return S||(()=>1)}function D8(_,S){Rr(_,S);let O=_?.highWaterMark,q=_?.size;return{highWaterMark:O===void 0?void 0:j(O),size:q===void 0?void 0:LXe(q,`${S} has member 'size' that`)}}function LXe(_,S){return bt(_,S),O=>j(_(O))}function jXe(_,S){Rr(_,S);let O=_?.abort,q=_?.close,W=_?.start,he=_?.type,ve=_?.write;return{abort:O===void 0?void 0:$Xe(O,_,`${S} has member 'abort' that`),close:q===void 0?void 0:UXe(q,_,`${S} has member 'close' that`),start:W===void 0?void 0:KXe(W,_,`${S} has member 'start' that`),write:ve===void 0?void 0:VXe(ve,_,`${S} has member 'write' that`),type:he}}function $Xe(_,S,O){return bt(_,O),q=>T(_,S,[q])}function UXe(_,S,O){return bt(_,O),()=>T(_,S,[])}function KXe(_,S,O){return bt(_,O),q=>w(_,S,[q])}function VXe(_,S,O){return bt(_,O),(q,W)=>T(_,S,[q,W])}function xle(_,S){if(!w2(_))throw new TypeError(`${S} is not a WritableStream.`)}function GXe(_){if(typeof _!="object"||_===null)return!1;try{return typeof _.aborted=="boolean"}catch{return!1}}let HXe=typeof AbortController=="function";function zXe(){if(HXe)return new AbortController}class l1{constructor(S={},O={}){S===void 0?S=null:mi(S,"First parameter");let q=D8(O,"Second parameter"),W=jXe(S,"First parameter");if(Rle(this),W.type!==void 0)throw new RangeError("Invalid type is specified");let ve=R8(q),We=L4(q,1);aZe(this,W,We,ve)}get locked(){if(!w2(this))throw F8("locked");return A2(this)}abort(S=void 0){return w2(this)?A2(this)?l(new TypeError("Cannot abort a stream that already has a writer")):k8(this,S):l(F8("abort"))}close(){return w2(this)?A2(this)?l(new TypeError("Cannot close a stream that already has a writer")):cd(this)?l(new TypeError("Cannot close an already-closing stream")):Dle(this):l(F8("close"))}getWriter(){if(!w2(this))throw F8("getWriter");return Ile(this)}}Object.defineProperties(l1.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),i(l1.prototype.abort,"abort"),i(l1.prototype.close,"close"),i(l1.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(l1.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Ile(_){return new mp(_)}function WXe(_,S,O,q,W=1,he=()=>1){let ve=Object.create(l1.prototype);Rle(ve);let We=Object.create(C2.prototype);return Ble(ve,We,_,S,O,q,W,he),ve}function Rle(_){_._state="writable",_._storedError=void 0,_._writer=void 0,_._writableStreamController=void 0,_._writeRequests=new C,_._inFlightWriteRequest=void 0,_._closeRequest=void 0,_._inFlightCloseRequest=void 0,_._pendingAbortRequest=void 0,_._backpressure=!1}function w2(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_writableStreamController")?!1:_ instanceof l1}function A2(_){return _._writer!==void 0}function k8(_,S){var O;if(_._state==="closed"||_._state==="errored")return c(void 0);_._writableStreamController._abortReason=S,(O=_._writableStreamController._abortController)===null||O===void 0||O.abort(S);let q=_._state;if(q==="closed"||q==="errored")return c(void 0);if(_._pendingAbortRequest!==void 0)return _._pendingAbortRequest._promise;let W=!1;q==="erroring"&&(W=!0,S=void 0);let he=u((ve,We)=>{_._pendingAbortRequest={_promise:void 0,_resolve:ve,_reject:We,_reason:S,_wasAlreadyErroring:W}});return _._pendingAbortRequest._promise=he,W||Zq(_,S),he}function Dle(_){let S=_._state;if(S==="closed"||S==="errored")return l(new TypeError(`The stream (in ${S} state) is not in the writable state and cannot be closed`));let O=u((W,he)=>{let ve={_resolve:W,_reject:he};_._closeRequest=ve}),q=_._writer;return q!==void 0&&_._backpressure&&S==="writable"&&aL(q),uZe(_._writableStreamController),O}function JXe(_){return u((O,q)=>{let W={_resolve:O,_reject:q};_._writeRequests.push(W)})}function Xq(_,S){if(_._state==="writable"){Zq(_,S);return}eL(_)}function Zq(_,S){let O=_._writableStreamController;_._state="erroring",_._storedError=S;let q=_._writer;q!==void 0&&Mle(q,S),!eZe(_)&&O._started&&eL(_)}function eL(_){_._state="errored",_._writableStreamController[R]();let S=_._storedError;if(_._writeRequests.forEach(W=>{W._reject(S)}),_._writeRequests=new C,_._pendingAbortRequest===void 0){M8(_);return}let O=_._pendingAbortRequest;if(_._pendingAbortRequest=void 0,O._wasAlreadyErroring){O._reject(S),M8(_);return}let q=_._writableStreamController[x](O._reason);p(q,()=>(O._resolve(),M8(_),null),W=>(O._reject(W),M8(_),null))}function YXe(_){_._inFlightWriteRequest._resolve(void 0),_._inFlightWriteRequest=void 0}function QXe(_,S){_._inFlightWriteRequest._reject(S),_._inFlightWriteRequest=void 0,Xq(_,S)}function XXe(_){_._inFlightCloseRequest._resolve(void 0),_._inFlightCloseRequest=void 0,_._state==="erroring"&&(_._storedError=void 0,_._pendingAbortRequest!==void 0&&(_._pendingAbortRequest._resolve(),_._pendingAbortRequest=void 0)),_._state="closed";let O=_._writer;O!==void 0&&$le(O)}function ZXe(_,S){_._inFlightCloseRequest._reject(S),_._inFlightCloseRequest=void 0,_._pendingAbortRequest!==void 0&&(_._pendingAbortRequest._reject(S),_._pendingAbortRequest=void 0),Xq(_,S)}function cd(_){return!(_._closeRequest===void 0&&_._inFlightCloseRequest===void 0)}function eZe(_){return!(_._inFlightWriteRequest===void 0&&_._inFlightCloseRequest===void 0)}function tZe(_){_._inFlightCloseRequest=_._closeRequest,_._closeRequest=void 0}function rZe(_){_._inFlightWriteRequest=_._writeRequests.shift()}function M8(_){_._closeRequest!==void 0&&(_._closeRequest._reject(_._storedError),_._closeRequest=void 0);let S=_._writer;S!==void 0&&sL(S,_._storedError)}function tL(_,S){let O=_._writer;O!==void 0&&S!==_._backpressure&&(S?mZe(O):aL(O)),_._backpressure=S}class mp{constructor(S){if(Zt(S,1,"WritableStreamDefaultWriter"),xle(S,"First parameter"),A2(S))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=S,S._writer=this;let O=S._state;if(O==="writable")!cd(S)&&S._backpressure?q8(this):Ule(this),B8(this);else if(O==="erroring")oL(this,S._storedError),B8(this);else if(O==="closed")Ule(this),fZe(this);else{let q=S._storedError;oL(this,q),jle(this,q)}}get closed(){return Vm(this)?this._closedPromise:l(Gm("closed"))}get desiredSize(){if(!Vm(this))throw Gm("desiredSize");if(this._ownerWritableStream===void 0)throw $4("desiredSize");return oZe(this)}get ready(){return Vm(this)?this._readyPromise:l(Gm("ready"))}abort(S=void 0){return Vm(this)?this._ownerWritableStream===void 0?l($4("abort")):nZe(this,S):l(Gm("abort"))}close(){if(!Vm(this))return l(Gm("close"));let S=this._ownerWritableStream;return S===void 0?l($4("close")):cd(S)?l(new TypeError("Cannot close an already-closing stream")):kle(this)}releaseLock(){if(!Vm(this))throw Gm("releaseLock");this._ownerWritableStream!==void 0&&Ple(this)}write(S=void 0){return Vm(this)?this._ownerWritableStream===void 0?l($4("write to")):Nle(this,S):l(Gm("write"))}}Object.defineProperties(mp.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),i(mp.prototype.abort,"abort"),i(mp.prototype.close,"close"),i(mp.prototype.releaseLock,"releaseLock"),i(mp.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(mp.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Vm(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_ownerWritableStream")?!1:_ instanceof mp}function nZe(_,S){let O=_._ownerWritableStream;return k8(O,S)}function kle(_){let S=_._ownerWritableStream;return Dle(S)}function iZe(_){let S=_._ownerWritableStream,O=S._state;return cd(S)||O==="closed"?c(void 0):O==="errored"?l(S._storedError):kle(_)}function sZe(_,S){_._closedPromiseState==="pending"?sL(_,S):hZe(_,S)}function Mle(_,S){_._readyPromiseState==="pending"?Kle(_,S):yZe(_,S)}function oZe(_){let S=_._ownerWritableStream,O=S._state;return O==="errored"||O==="erroring"?null:O==="closed"?0:qle(S._writableStreamController)}function Ple(_){let S=_._ownerWritableStream,O=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Mle(_,O),sZe(_,O),S._writer=void 0,_._ownerWritableStream=void 0}function Nle(_,S){let O=_._ownerWritableStream,q=O._writableStreamController,W=cZe(q,S);if(O!==_._ownerWritableStream)return l($4("write to"));let he=O._state;if(he==="errored")return l(O._storedError);if(cd(O)||he==="closed")return l(new TypeError("The stream is closing or closed and cannot be written to"));if(he==="erroring")return l(O._storedError);let ve=JXe(O);return lZe(q,S,W),ve}let Fle={};class C2{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!rL(this))throw iL("abortReason");return this._abortReason}get signal(){if(!rL(this))throw iL("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(S=void 0){if(!rL(this))throw iL("error");this._controlledWritableStream._state==="writable"&&Lle(this,S)}[x](S){let O=this._abortAlgorithm(S);return P8(this),O}[R](){u1(this)}}Object.defineProperties(C2.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(C2.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function rL(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_controlledWritableStream")?!1:_ instanceof C2}function Ble(_,S,O,q,W,he,ve,We){S._controlledWritableStream=_,_._writableStreamController=S,S._queue=void 0,S._queueTotalSize=void 0,u1(S),S._abortReason=void 0,S._abortController=zXe(),S._started=!1,S._strategySizeAlgorithm=We,S._strategyHWM=ve,S._writeAlgorithm=q,S._closeAlgorithm=W,S._abortAlgorithm=he;let vt=nL(S);tL(_,vt);let at=O(),kt=c(at);p(kt,()=>(S._started=!0,N8(S),null),zt=>(S._started=!0,Xq(_,zt),null))}function aZe(_,S,O,q){let W=Object.create(C2.prototype),he,ve,We,vt;S.start!==void 0?he=()=>S.start(W):he=()=>{},S.write!==void 0?ve=at=>S.write(at,W):ve=()=>c(void 0),S.close!==void 0?We=()=>S.close():We=()=>c(void 0),S.abort!==void 0?vt=at=>S.abort(at):vt=()=>c(void 0),Ble(_,W,he,ve,We,vt,O,q)}function P8(_){_._writeAlgorithm=void 0,_._closeAlgorithm=void 0,_._abortAlgorithm=void 0,_._strategySizeAlgorithm=void 0}function uZe(_){Vq(_,Fle,0),N8(_)}function cZe(_,S){try{return _._strategySizeAlgorithm(S)}catch(O){return j4(_,O),1}}function qle(_){return _._strategyHWM-_._queueTotalSize}function lZe(_,S,O){try{Vq(_,S,O)}catch(W){j4(_,W);return}let q=_._controlledWritableStream;if(!cd(q)&&q._state==="writable"){let W=nL(_);tL(q,W)}N8(_)}function N8(_){let S=_._controlledWritableStream;if(!_._started||S._inFlightWriteRequest!==void 0)return;if(S._state==="erroring"){eL(S);return}if(_._queue.length===0)return;let q=AXe(_);q===Fle?dZe(_):pZe(_,q)}function j4(_,S){_._controlledWritableStream._state==="writable"&&Lle(_,S)}function dZe(_){let S=_._controlledWritableStream;tZe(S),Kq(_);let O=_._closeAlgorithm();P8(_),p(O,()=>(XXe(S),null),q=>(ZXe(S,q),null))}function pZe(_,S){let O=_._controlledWritableStream;rZe(O);let q=_._writeAlgorithm(S);p(q,()=>{YXe(O);let W=O._state;if(Kq(_),!cd(O)&&W==="writable"){let he=nL(_);tL(O,he)}return N8(_),null},W=>(O._state==="writable"&&P8(_),QXe(O,W),null))}function nL(_){return qle(_)<=0}function Lle(_,S){let O=_._controlledWritableStream;P8(_),Zq(O,S)}function F8(_){return new TypeError(`WritableStream.prototype.${_} can only be used on a WritableStream`)}function iL(_){return new TypeError(`WritableStreamDefaultController.prototype.${_} can only be used on a WritableStreamDefaultController`)}function Gm(_){return new TypeError(`WritableStreamDefaultWriter.prototype.${_} can only be used on a WritableStreamDefaultWriter`)}function $4(_){return new TypeError("Cannot "+_+" a stream using a released writer")}function B8(_){_._closedPromise=u((S,O)=>{_._closedPromise_resolve=S,_._closedPromise_reject=O,_._closedPromiseState="pending"})}function jle(_,S){B8(_),sL(_,S)}function fZe(_){B8(_),$le(_)}function sL(_,S){_._closedPromise_reject!==void 0&&(E(_._closedPromise),_._closedPromise_reject(S),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="rejected")}function hZe(_,S){jle(_,S)}function $le(_){_._closedPromise_resolve!==void 0&&(_._closedPromise_resolve(void 0),_._closedPromise_resolve=void 0,_._closedPromise_reject=void 0,_._closedPromiseState="resolved")}function q8(_){_._readyPromise=u((S,O)=>{_._readyPromise_resolve=S,_._readyPromise_reject=O}),_._readyPromiseState="pending"}function oL(_,S){q8(_),Kle(_,S)}function Ule(_){q8(_),aL(_)}function Kle(_,S){_._readyPromise_reject!==void 0&&(E(_._readyPromise),_._readyPromise_reject(S),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="rejected")}function mZe(_){q8(_)}function yZe(_,S){oL(_,S)}function aL(_){_._readyPromise_resolve!==void 0&&(_._readyPromise_resolve(void 0),_._readyPromise_resolve=void 0,_._readyPromise_reject=void 0,_._readyPromiseState="fulfilled")}function gZe(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let uL=gZe();function bZe(_){if(!(typeof _=="function"||typeof _=="object")||_.name!=="DOMException")return!1;try{return new _,!0}catch{return!1}}function _Ze(){let _=uL?.DOMException;return bZe(_)?_:void 0}function EZe(){let _=function(O,q){this.message=O||"",this.name=q||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return i(_,"DOMException"),_.prototype=Object.create(Error.prototype),Object.defineProperty(_.prototype,"constructor",{value:_,writable:!0,configurable:!0}),_}let vZe=_Ze()||EZe();function Vle(_,S,O,q,W,he){let ve=de(_),We=Ile(S);_._disturbed=!0;let vt=!1,at=c(void 0);return u((kt,zt)=>{let Xr;if(he!==void 0){if(Xr=()=>{let ct=he.reason!==void 0?he.reason:new vZe("Aborted","AbortError"),cr=[];q||cr.push(()=>S._state==="writable"?k8(S,ct):c(void 0)),W||cr.push(()=>_._state==="readable"?zc(_,ct):c(void 0)),ia(()=>Promise.all(cr.map(ln=>ln())),!0,ct)},he.aborted){Xr();return}he.addEventListener("abort",Xr)}function Wc(){return u((ct,cr)=>{function ln(Ga){Ga?ct():d(I2(),ln,cr)}ln(!1)})}function I2(){return vt?c(!0):d(We._readyPromise,()=>u((ct,cr)=>{et(ve,{_chunkSteps:ln=>{at=d(Nle(We,ln),void 0,e),ct(!1)},_closeSteps:()=>ct(!0),_errorSteps:cr})}))}if(gp(_,ve._closedPromise,ct=>(q?qu(!0,ct):ia(()=>k8(S,ct),!0,ct),null)),gp(S,We._closedPromise,ct=>(W?qu(!0,ct):ia(()=>zc(_,ct),!0,ct),null)),xo(_,ve._closedPromise,()=>(O?qu():ia(()=>iZe(We)),null)),cd(S)||S._state==="closed"){let ct=new TypeError("the destination writable stream closed before all data could be piped to it");W?qu(!0,ct):ia(()=>zc(_,ct),!0,ct)}E(Wc());function h1(){let ct=at;return d(at,()=>ct!==at?h1():void 0)}function gp(ct,cr,ln){ct._state==="errored"?ln(ct._storedError):h(cr,ln)}function xo(ct,cr,ln){ct._state==="closed"?ln():f(cr,ln)}function ia(ct,cr,ln){if(vt)return;vt=!0,S._state==="writable"&&!cd(S)?f(h1(),Ga):Ga();function Ga(){return p(ct(),()=>bp(cr,ln),R2=>bp(!0,R2)),null}}function qu(ct,cr){vt||(vt=!0,S._state==="writable"&&!cd(S)?f(h1(),()=>bp(ct,cr)):bp(ct,cr))}function bp(ct,cr){return Ple(We),k(ve),he!==void 0&&he.removeEventListener("abort",Xr),ct?zt(cr):kt(void 0),null}})}class yp{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!L8(this))throw $8("desiredSize");return cL(this)}close(){if(!L8(this))throw $8("close");if(!O2(this))throw new TypeError("The stream is not in a state that permits close");Hm(this)}enqueue(S=void 0){if(!L8(this))throw $8("enqueue");if(!O2(this))throw new TypeError("The stream is not in a state that permits enqueue");return T2(this,S)}error(S=void 0){if(!L8(this))throw $8("error");Hc(this,S)}[M](S){u1(this);let O=this._cancelAlgorithm(S);return j8(this),O}[I](S){let O=this._controlledReadableStream;if(this._queue.length>0){let q=Kq(this);this._closeRequested&&this._queue.length===0?(j8(this),V4(O)):U4(this),S._chunkSteps(q)}else z(O,S),U4(this)}[F](){}}Object.defineProperties(yp.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),i(yp.prototype.close,"close"),i(yp.prototype.enqueue,"enqueue"),i(yp.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(yp.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function L8(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_controlledReadableStream")?!1:_ instanceof yp}function U4(_){if(!Gle(_))return;if(_._pulling){_._pullAgain=!0;return}_._pulling=!0;let O=_._pullAlgorithm();p(O,()=>(_._pulling=!1,_._pullAgain&&(_._pullAgain=!1,U4(_)),null),q=>(Hc(_,q),null))}function Gle(_){let S=_._controlledReadableStream;return!O2(_)||!_._started?!1:!!(p1(S)&&ue(S)>0||cL(_)>0)}function j8(_){_._pullAlgorithm=void 0,_._cancelAlgorithm=void 0,_._strategySizeAlgorithm=void 0}function Hm(_){if(!O2(_))return;let S=_._controlledReadableStream;_._closeRequested=!0,_._queue.length===0&&(j8(_),V4(S))}function T2(_,S){if(!O2(_))return;let O=_._controlledReadableStream;if(p1(O)&&ue(O)>0)X(O,S,!1);else{let q;try{q=_._strategySizeAlgorithm(S)}catch(W){throw Hc(_,W),W}try{Vq(_,S,q)}catch(W){throw Hc(_,W),W}}U4(_)}function Hc(_,S){let O=_._controlledReadableStream;O._state==="readable"&&(u1(_),j8(_),Jle(O,S))}function cL(_){let S=_._controlledReadableStream._state;return S==="errored"?null:S==="closed"?0:_._strategyHWM-_._queueTotalSize}function SZe(_){return!Gle(_)}function O2(_){let S=_._controlledReadableStream._state;return!_._closeRequested&&S==="readable"}function Hle(_,S,O,q,W,he,ve){S._controlledReadableStream=_,S._queue=void 0,S._queueTotalSize=void 0,u1(S),S._started=!1,S._closeRequested=!1,S._pullAgain=!1,S._pulling=!1,S._strategySizeAlgorithm=ve,S._strategyHWM=he,S._pullAlgorithm=q,S._cancelAlgorithm=W,_._readableStreamController=S;let We=O();p(c(We),()=>(S._started=!0,U4(S),null),vt=>(Hc(S,vt),null))}function wZe(_,S,O,q){let W=Object.create(yp.prototype),he,ve,We;S.start!==void 0?he=()=>S.start(W):he=()=>{},S.pull!==void 0?ve=()=>S.pull(W):ve=()=>c(void 0),S.cancel!==void 0?We=vt=>S.cancel(vt):We=()=>c(void 0),Hle(_,W,he,ve,We,O,q)}function $8(_){return new TypeError(`ReadableStreamDefaultController.prototype.${_} can only be used on a ReadableStreamDefaultController`)}function AZe(_,S){return $m(_._readableStreamController)?TZe(_):CZe(_)}function CZe(_,S){let O=de(_),q=!1,W=!1,he=!1,ve=!1,We,vt,at,kt,zt,Xr=u(xo=>{zt=xo});function Wc(){return q?(W=!0,c(void 0)):(q=!0,et(O,{_chunkSteps:ia=>{v(()=>{W=!1;let qu=ia,bp=ia;he||T2(at._readableStreamController,qu),ve||T2(kt._readableStreamController,bp),q=!1,W&&Wc()})},_closeSteps:()=>{q=!1,he||Hm(at._readableStreamController),ve||Hm(kt._readableStreamController),(!he||!ve)&&zt(void 0)},_errorSteps:()=>{q=!1}}),c(void 0))}function I2(xo){if(he=!0,We=xo,ve){let ia=Q([We,vt]),qu=zc(_,ia);zt(qu)}return Xr}function h1(xo){if(ve=!0,vt=xo,he){let ia=Q([We,vt]),qu=zc(_,ia);zt(qu)}return Xr}function gp(){}return at=K4(gp,Wc,I2),kt=K4(gp,Wc,h1),h(O._closedPromise,xo=>(Hc(at._readableStreamController,xo),Hc(kt._readableStreamController,xo),(!he||!ve)&&zt(void 0),null)),[at,kt]}function TZe(_){let S=de(_),O=!1,q=!1,W=!1,he=!1,ve=!1,We,vt,at,kt,zt,Xr=u(ct=>{zt=ct});function Wc(ct){h(ct._closedPromise,cr=>(ct!==S||(Bu(at._readableStreamController,cr),Bu(kt._readableStreamController,cr),(!he||!ve)&&zt(void 0)),null))}function I2(){Km(S)&&(k(S),S=de(_),Wc(S)),et(S,{_chunkSteps:cr=>{v(()=>{q=!1,W=!1;let ln=cr,Ga=cr;if(!he&&!ve)try{Ga=w8(cr)}catch(R2){Bu(at._readableStreamController,R2),Bu(kt._readableStreamController,R2),zt(zc(_,R2));return}he||T8(at._readableStreamController,ln),ve||T8(kt._readableStreamController,Ga),O=!1,q?gp():W&&xo()})},_closeSteps:()=>{O=!1,he||B4(at._readableStreamController),ve||B4(kt._readableStreamController),at._readableStreamController._pendingPullIntos.length>0&&O8(at._readableStreamController,0),kt._readableStreamController._pendingPullIntos.length>0&&O8(kt._readableStreamController,0),(!he||!ve)&&zt(void 0)},_errorSteps:()=>{O=!1}})}function h1(ct,cr){ze(S)&&(k(S),S=wle(_),Wc(S));let ln=cr?kt:at,Ga=cr?at:kt;Tle(S,ct,1,{_chunkSteps:D2=>{v(()=>{q=!1,W=!1;let k2=cr?ve:he;if(cr?he:ve)k2||x8(ln._readableStreamController,D2);else{let ude;try{ude=w8(D2)}catch(hL){Bu(ln._readableStreamController,hL),Bu(Ga._readableStreamController,hL),zt(zc(_,hL));return}k2||x8(ln._readableStreamController,D2),T8(Ga._readableStreamController,ude)}O=!1,q?gp():W&&xo()})},_closeSteps:D2=>{O=!1;let k2=cr?ve:he,J8=cr?he:ve;k2||B4(ln._readableStreamController),J8||B4(Ga._readableStreamController),D2!==void 0&&(k2||x8(ln._readableStreamController,D2),!J8&&Ga._readableStreamController._pendingPullIntos.length>0&&O8(Ga._readableStreamController,0)),(!k2||!J8)&&zt(void 0)},_errorSteps:()=>{O=!1}})}function gp(){if(O)return q=!0,c(void 0);O=!0;let ct=Jq(at._readableStreamController);return ct===null?I2():h1(ct._view,!1),c(void 0)}function xo(){if(O)return W=!0,c(void 0);O=!0;let ct=Jq(kt._readableStreamController);return ct===null?I2():h1(ct._view,!0),c(void 0)}function ia(ct){if(he=!0,We=ct,ve){let cr=Q([We,vt]),ln=zc(_,cr);zt(ln)}return Xr}function qu(ct){if(ve=!0,vt=ct,he){let cr=Q([We,vt]),ln=zc(_,cr);zt(ln)}return Xr}function bp(){}return at=Wle(bp,gp,ia),kt=Wle(bp,xo,qu),Wc(S),[at,kt]}function OZe(_){return r(_)&&typeof _.getReader<"u"}function xZe(_){return OZe(_)?RZe(_.getReader()):IZe(_)}function IZe(_){let S,O=ur(_,"async"),q=e;function W(){let ve;try{ve=wn(O)}catch(vt){return l(vt)}let We=c(ve);return y(We,vt=>{if(!r(vt))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Va(vt))Hm(S._readableStreamController);else{let kt=S8(vt);T2(S._readableStreamController,kt)}})}function he(ve){let We=O.iterator,vt;try{vt=Be(We,"return")}catch(zt){return l(zt)}if(vt===void 0)return c(void 0);let at;try{at=w(vt,We,[ve])}catch(zt){return l(zt)}let kt=c(at);return y(kt,zt=>{if(!r(zt))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return S=K4(q,W,he,0),S}function RZe(_){let S,O=e;function q(){let he;try{he=_.read()}catch(ve){return l(ve)}return y(he,ve=>{if(!r(ve))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(ve.done)Hm(S._readableStreamController);else{let We=ve.value;T2(S._readableStreamController,We)}})}function W(he){try{return c(_.cancel(he))}catch(ve){return l(ve)}}return S=K4(O,q,W,0),S}function DZe(_,S){Rr(_,S);let O=_,q=O?.autoAllocateChunkSize,W=O?.cancel,he=O?.pull,ve=O?.start,We=O?.type;return{autoAllocateChunkSize:q===void 0?void 0:Y(q,`${S} has member 'autoAllocateChunkSize' that`),cancel:W===void 0?void 0:kZe(W,O,`${S} has member 'cancel' that`),pull:he===void 0?void 0:MZe(he,O,`${S} has member 'pull' that`),start:ve===void 0?void 0:PZe(ve,O,`${S} has member 'start' that`),type:We===void 0?void 0:NZe(We,`${S} has member 'type' that`)}}function kZe(_,S,O){return bt(_,O),q=>T(_,S,[q])}function MZe(_,S,O){return bt(_,O),q=>T(_,S,[q])}function PZe(_,S,O){return bt(_,O),q=>w(_,S,[q])}function NZe(_,S){if(_=`${_}`,_!=="bytes")throw new TypeError(`${S} '${_}' is not a valid enumeration value for ReadableStreamType`);return _}function FZe(_,S){return Rr(_,S),{preventCancel:!!_?.preventCancel}}function zle(_,S){Rr(_,S);let O=_?.preventAbort,q=_?.preventCancel,W=_?.preventClose,he=_?.signal;return he!==void 0&&BZe(he,`${S} has member 'signal' that`),{preventAbort:!!O,preventCancel:!!q,preventClose:!!W,signal:he}}function BZe(_,S){if(!GXe(_))throw new TypeError(`${S} is not an AbortSignal.`)}function qZe(_,S){Rr(_,S);let O=_?.readable;P(O,"readable","ReadableWritablePair"),te(O,`${S} has member 'readable' that`);let q=_?.writable;return P(q,"writable","ReadableWritablePair"),xle(q,`${S} has member 'writable' that`),{readable:O,writable:q}}class to{constructor(S={},O={}){S===void 0?S=null:mi(S,"First parameter");let q=D8(O,"Second parameter"),W=DZe(S,"First parameter");if(lL(this),W.type==="bytes"){if(q.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let he=L4(q,0);kXe(this,W,he)}else{let he=R8(q),ve=L4(q,1);wZe(this,W,ve,he)}}get locked(){if(!d1(this))throw zm("locked");return p1(this)}cancel(S=void 0){return d1(this)?p1(this)?l(new TypeError("Cannot cancel a stream that already has a reader")):zc(this,S):l(zm("cancel"))}getReader(S=void 0){if(!d1(this))throw zm("getReader");return PXe(S,"First parameter").mode===void 0?de(this):wle(this)}pipeThrough(S,O={}){if(!d1(this))throw zm("pipeThrough");Zt(S,1,"pipeThrough");let q=qZe(S,"First parameter"),W=zle(O,"Second parameter");if(p1(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(A2(q.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let he=Vle(this,q.writable,W.preventClose,W.preventAbort,W.preventCancel,W.signal);return E(he),q.readable}pipeTo(S,O={}){if(!d1(this))return l(zm("pipeTo"));if(S===void 0)return l("Parameter 1 is required in 'pipeTo'.");if(!w2(S))return l(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let q;try{q=zle(O,"Second parameter")}catch(W){return l(W)}return p1(this)?l(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):A2(S)?l(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Vle(this,S,q.preventClose,q.preventAbort,q.preventCancel,q.signal)}tee(){if(!d1(this))throw zm("tee");let S=AZe(this);return Q(S)}values(S=void 0){if(!d1(this))throw zm("values");let O=FZe(S,"First parameter");return Gc(this,O.preventCancel)}[dt](S){return this.values(S)}static from(S){return xZe(S)}}Object.defineProperties(to,{from:{enumerable:!0}}),Object.defineProperties(to.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),i(to.from,"from"),i(to.prototype.cancel,"cancel"),i(to.prototype.getReader,"getReader"),i(to.prototype.pipeThrough,"pipeThrough"),i(to.prototype.pipeTo,"pipeTo"),i(to.prototype.tee,"tee"),i(to.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(to.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(to.prototype,dt,{value:to.prototype.values,writable:!0,configurable:!0});function K4(_,S,O,q=1,W=()=>1){let he=Object.create(to.prototype);lL(he);let ve=Object.create(yp.prototype);return Hle(he,ve,_,S,O,q,W),he}function Wle(_,S,O){let q=Object.create(to.prototype);lL(q);let W=Object.create(hp.prototype);return Sle(q,W,_,S,O,0,void 0),q}function lL(_){_._state="readable",_._reader=void 0,_._storedError=void 0,_._disturbed=!1}function d1(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_readableStreamController")?!1:_ instanceof to}function p1(_){return _._reader!==void 0}function zc(_,S){if(_._disturbed=!0,_._state==="closed")return c(void 0);if(_._state==="errored")return l(_._storedError);V4(_);let O=_._reader;if(O!==void 0&&Km(O)){let W=O._readIntoRequests;O._readIntoRequests=new C,W.forEach(he=>{he._closeSteps(void 0)})}let q=_._readableStreamController[M](S);return y(q,e)}function V4(_){_._state="closed";let S=_._reader;if(S!==void 0&&(fe(S),ze(S))){let O=S._readRequests;S._readRequests=new C,O.forEach(q=>{q._closeSteps()})}}function Jle(_,S){_._state="errored",_._storedError=S;let O=_._reader;O!==void 0&&(me(O,S),ze(O)?Nr(O,S):Ole(O,S))}function zm(_){return new TypeError(`ReadableStream.prototype.${_} can only be used on a ReadableStream`)}function Yle(_,S){Rr(_,S);let O=_?.highWaterMark;return P(O,"highWaterMark","QueuingStrategyInit"),{highWaterMark:j(O)}}let Qle=_=>_.byteLength;i(Qle,"size");class U8{constructor(S){Zt(S,1,"ByteLengthQueuingStrategy"),S=Yle(S,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=S.highWaterMark}get highWaterMark(){if(!Zle(this))throw Xle("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Zle(this))throw Xle("size");return Qle}}Object.defineProperties(U8.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(U8.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Xle(_){return new TypeError(`ByteLengthQueuingStrategy.prototype.${_} can only be used on a ByteLengthQueuingStrategy`)}function Zle(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_byteLengthQueuingStrategyHighWaterMark")?!1:_ instanceof U8}let ede=()=>1;i(ede,"size");class K8{constructor(S){Zt(S,1,"CountQueuingStrategy"),S=Yle(S,"First parameter"),this._countQueuingStrategyHighWaterMark=S.highWaterMark}get highWaterMark(){if(!rde(this))throw tde("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!rde(this))throw tde("size");return ede}}Object.defineProperties(K8.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(K8.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function tde(_){return new TypeError(`CountQueuingStrategy.prototype.${_} can only be used on a CountQueuingStrategy`)}function rde(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_countQueuingStrategyHighWaterMark")?!1:_ instanceof K8}function LZe(_,S){Rr(_,S);let O=_?.cancel,q=_?.flush,W=_?.readableType,he=_?.start,ve=_?.transform,We=_?.writableType;return{cancel:O===void 0?void 0:KZe(O,_,`${S} has member 'cancel' that`),flush:q===void 0?void 0:jZe(q,_,`${S} has member 'flush' that`),readableType:W,start:he===void 0?void 0:$Ze(he,_,`${S} has member 'start' that`),transform:ve===void 0?void 0:UZe(ve,_,`${S} has member 'transform' that`),writableType:We}}function jZe(_,S,O){return bt(_,O),q=>T(_,S,[q])}function $Ze(_,S,O){return bt(_,O),q=>w(_,S,[q])}function UZe(_,S,O){return bt(_,O),(q,W)=>T(_,S,[q,W])}function KZe(_,S,O){return bt(_,O),q=>T(_,S,[q])}class V8{constructor(S={},O={},q={}){S===void 0&&(S=null);let W=D8(O,"Second parameter"),he=D8(q,"Third parameter"),ve=LZe(S,"First parameter");if(ve.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(ve.writableType!==void 0)throw new RangeError("Invalid writableType specified");let We=L4(he,0),vt=R8(he),at=L4(W,1),kt=R8(W),zt,Xr=u(Wc=>{zt=Wc});VZe(this,Xr,at,kt,We,vt),HZe(this,ve),ve.start!==void 0?zt(ve.start(this._transformStreamController)):zt(void 0)}get readable(){if(!nde(this))throw ade("readable");return this._readable}get writable(){if(!nde(this))throw ade("writable");return this._writable}}Object.defineProperties(V8.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(V8.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function VZe(_,S,O,q,W,he){function ve(){return S}function We(Xr){return JZe(_,Xr)}function vt(Xr){return YZe(_,Xr)}function at(){return QZe(_)}_._writable=WXe(ve,We,at,vt,O,q);function kt(){return XZe(_)}function zt(Xr){return ZZe(_,Xr)}_._readable=K4(ve,kt,zt,W,he),_._backpressure=void 0,_._backpressureChangePromise=void 0,_._backpressureChangePromise_resolve=void 0,G8(_,!0),_._transformStreamController=void 0}function nde(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_transformStreamController")?!1:_ instanceof V8}function ide(_,S){Hc(_._readable._readableStreamController,S),dL(_,S)}function dL(_,S){z8(_._transformStreamController),j4(_._writable._writableStreamController,S),pL(_)}function pL(_){_._backpressure&&G8(_,!1)}function G8(_,S){_._backpressureChangePromise!==void 0&&_._backpressureChangePromise_resolve(),_._backpressureChangePromise=u(O=>{_._backpressureChangePromise_resolve=O}),_._backpressure=S}class f1{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!H8(this))throw W8("desiredSize");let S=this._controlledTransformStream._readable._readableStreamController;return cL(S)}enqueue(S=void 0){if(!H8(this))throw W8("enqueue");sde(this,S)}error(S=void 0){if(!H8(this))throw W8("error");zZe(this,S)}terminate(){if(!H8(this))throw W8("terminate");WZe(this)}}Object.defineProperties(f1.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),i(f1.prototype.enqueue,"enqueue"),i(f1.prototype.error,"error"),i(f1.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(f1.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function H8(_){return!r(_)||!Object.prototype.hasOwnProperty.call(_,"_controlledTransformStream")?!1:_ instanceof f1}function GZe(_,S,O,q,W){S._controlledTransformStream=_,_._transformStreamController=S,S._transformAlgorithm=O,S._flushAlgorithm=q,S._cancelAlgorithm=W,S._finishPromise=void 0,S._finishPromise_resolve=void 0,S._finishPromise_reject=void 0}function HZe(_,S){let O=Object.create(f1.prototype),q,W,he;S.transform!==void 0?q=ve=>S.transform(ve,O):q=ve=>{try{return sde(O,ve),c(void 0)}catch(We){return l(We)}},S.flush!==void 0?W=()=>S.flush(O):W=()=>c(void 0),S.cancel!==void 0?he=ve=>S.cancel(ve):he=()=>c(void 0),GZe(_,O,q,W,he)}function z8(_){_._transformAlgorithm=void 0,_._flushAlgorithm=void 0,_._cancelAlgorithm=void 0}function sde(_,S){let O=_._controlledTransformStream,q=O._readable._readableStreamController;if(!O2(q))throw new TypeError("Readable side is not in a state that permits enqueue");try{T2(q,S)}catch(he){throw dL(O,he),O._readable._storedError}SZe(q)!==O._backpressure&&G8(O,!0)}function zZe(_,S){ide(_._controlledTransformStream,S)}function ode(_,S){let O=_._transformAlgorithm(S);return y(O,void 0,q=>{throw ide(_._controlledTransformStream,q),q})}function WZe(_){let S=_._controlledTransformStream,O=S._readable._readableStreamController;Hm(O);let q=new TypeError("TransformStream terminated");dL(S,q)}function JZe(_,S){let O=_._transformStreamController;if(_._backpressure){let q=_._backpressureChangePromise;return y(q,()=>{let W=_._writable;if(W._state==="erroring")throw W._storedError;return ode(O,S)})}return ode(O,S)}function YZe(_,S){let O=_._transformStreamController;if(O._finishPromise!==void 0)return O._finishPromise;let q=_._readable;O._finishPromise=u((he,ve)=>{O._finishPromise_resolve=he,O._finishPromise_reject=ve});let W=O._cancelAlgorithm(S);return z8(O),p(W,()=>(q._state==="errored"?x2(O,q._storedError):(Hc(q._readableStreamController,S),fL(O)),null),he=>(Hc(q._readableStreamController,he),x2(O,he),null)),O._finishPromise}function QZe(_){let S=_._transformStreamController;if(S._finishPromise!==void 0)return S._finishPromise;let O=_._readable;S._finishPromise=u((W,he)=>{S._finishPromise_resolve=W,S._finishPromise_reject=he});let q=S._flushAlgorithm();return z8(S),p(q,()=>(O._state==="errored"?x2(S,O._storedError):(Hm(O._readableStreamController),fL(S)),null),W=>(Hc(O._readableStreamController,W),x2(S,W),null)),S._finishPromise}function XZe(_){return G8(_,!1),_._backpressureChangePromise}function ZZe(_,S){let O=_._transformStreamController;if(O._finishPromise!==void 0)return O._finishPromise;let q=_._writable;O._finishPromise=u((he,ve)=>{O._finishPromise_resolve=he,O._finishPromise_reject=ve});let W=O._cancelAlgorithm(S);return z8(O),p(W,()=>(q._state==="errored"?x2(O,q._storedError):(j4(q._writableStreamController,S),pL(_),fL(O)),null),he=>(j4(q._writableStreamController,he),pL(_),x2(O,he),null)),O._finishPromise}function W8(_){return new TypeError(`TransformStreamDefaultController.prototype.${_} can only be used on a TransformStreamDefaultController`)}function fL(_){_._finishPromise_resolve!==void 0&&(_._finishPromise_resolve(),_._finishPromise_resolve=void 0,_._finishPromise_reject=void 0)}function x2(_,S){_._finishPromise_reject!==void 0&&(E(_._finishPromise),_._finishPromise_reject(S),_._finishPromise_resolve=void 0,_._finishPromise_reject=void 0)}function ade(_){return new TypeError(`TransformStream.prototype.${_} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=U8,t.CountQueuingStrategy=K8,t.ReadableByteStreamController=hp,t.ReadableStream=to,t.ReadableStreamBYOBReader=c1,t.ReadableStreamBYOBRequest=jm,t.ReadableStreamDefaultController=yp,t.ReadableStreamDefaultReader=Se,t.TransformStream=V8,t.TransformStreamDefaultController=f1,t.WritableStream=l1,t.WritableStreamDefaultController=C2,t.WritableStreamDefaultWriter=mp}))});var NLe=b(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,PLe())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(s){let a=await i.slice(n,Math.min(i.size,n+65536)).arrayBuffer();n+=a.byteLength,s.enqueue(new Uint8Array(a)),n===i.size&&s.close()}})})}catch{}});async function*vie(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,i=r.byteOffset+r.byteLength;for(;n!==i;){let s=Math.min(i-n,FLe),o=r.buffer.slice(n,n+s);n+=o.byteLength,yield new Uint8Array(o)}}else yield r;else{let n=0,i=r;for(;n!==i.size;){let o=await i.slice(n,Math.min(i.size,n+FLe)).arrayBuffer();n+=o.byteLength,yield new Uint8Array(o)}}}var aOr,FLe,BLe,_Ht,Gl,oA=ce(()=>{aOr=St(NLe(),1);FLe=65536;BLe=class Sie{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let s of e){let o;ArrayBuffer.isView(s)?o=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?o=new Uint8Array(s.slice(0)):s instanceof Sie?o=s:o=n.encode(`${s}`),this.#r+=ArrayBuffer.isView(o)?o.byteLength:o.size,this.#e.push(o)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let i=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let n of vie(this.#e,!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of vie(this.#e,!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=vie(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:i}=this,s=e<0?Math.max(i+e,0):Math.min(e,i),o=r<0?Math.max(i+r,0):Math.min(r,i),a=Math.max(o-s,0),u=this.#e,c=[],l=0;for(let p of u){if(l>=a)break;let f=ArrayBuffer.isView(p)?p.byteLength:p.size;if(s&&f<=s)s-=f,o-=f;else{let h;ArrayBuffer.isView(p)?(h=p.subarray(s,Math.min(f,o)),l+=h.byteLength):(h=p.slice(s,Math.min(f,o)),l+=h.size),o-=f,c.push(h),s=0}}let d=new Sie([],{type:String(n).toLowerCase()});return d.#r=a,d.#e=c,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(BLe.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});_Ht=BLe,Gl=_Ht});var EHt,vHt,hm,wie=ce(()=>{oA();EHt=class extends Gl{#e=0;#t="";constructor(e,r,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let i=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Gl&&/^(File)$/.test(e[Symbol.toStringTag])}},vHt=EHt,hm=vHt});function jLe(t,e=Gl){var r=`${qLe()}${qLe()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((s,o)=>typeof s=="string"?n.push(i+Aie(o)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+Aie(o)+`"; filename="${Aie(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var aA,SHt,wHt,qLe,AHt,LLe,Aie,kg,mm,xP=ce(()=>{oA();wie();({toStringTag:aA,iterator:SHt,hasInstance:wHt}=Symbol),qLe=Math.random,AHt="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),LLe=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[aA])?[(r=r!==void 0?r+"":e[aA]=="File"?e.name:"blob",t),e.name!==r||e[aA]=="blob"?new hm([e],r,e):e]:[t,e+""]),Aie=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),kg=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},mm=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[aA](){return"FormData"}[SHt](){return this.entries()}static[wHt](e){return e&&typeof e=="object"&&e[aA]==="FormData"&&!AHt.some(r=>typeof e[r]!="function")}append(...e){kg("append",arguments,2),this.#e.push(LLe(...e))}delete(e){kg("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){kg("get",arguments,1),e+="";for(var r=this.#e,n=r.length,i=0;i<n;i++)if(r[i][0]===e)return r[i][1];return null}getAll(e,r){return kg("getAll",arguments,1),r=[],e+="",this.#e.forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return kg("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){kg("forEach",arguments,1);for(var[n,i]of this)e.call(r,i,n,this)}set(...e){kg("set",arguments,2);var r=[],n=!0;e=LLe(...e),this.#e.forEach(i=>{i[0]===e[0]?n&&(n=!r.push(e)):r.push(i)}),n&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var Lf,IP=ce(()=>{Lf=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}});var Xo,Cie=ce(()=>{IP();Xo=class extends Lf{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}});var RP,Tie,uA,$Le,ULe,KLe,DP=ce(()=>{RP=Symbol.toStringTag,Tie=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[RP]==="URLSearchParams",uA=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[RP]),$Le=t=>typeof t=="object"&&(t[RP]==="AbortSignal"||t[RP]==="EventTarget"),ULe=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},KLe=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n}});var GLe=b((EOr,VLe)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}VLe.exports=globalThis.DOMException});var Mg,HLe,zLe,Oie,WLe,JLe,YLe,QLe,XLe,ZLe,kP,xie=ce(()=>{Mg=require("node:fs"),HLe=require("node:path"),zLe=St(GLe(),1);wie();oA();({stat:Oie}=Mg.promises),WLe=(t,e)=>XLe((0,Mg.statSync)(t),t,e),JLe=(t,e)=>Oie(t).then(r=>XLe(r,t,e)),YLe=(t,e)=>Oie(t).then(r=>ZLe(r,t,e)),QLe=(t,e)=>ZLe((0,Mg.statSync)(t),t,e),XLe=(t,e,r="")=>new Gl([new kP({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],{type:r}),ZLe=(t,e,r="")=>new hm([new kP({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],(0,HLe.basename)(e),{type:r,lastModified:t.mtimeMs}),kP=class t{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,r){return new t({path:this.#e,lastModified:this.lastModified,size:r-e,start:this.#t+e})}async*stream(){let{mtimeMs:e}=await Oie(this.#e);if(e>this.lastModified)throw new zLe.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Mg.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var tje={};Ha(tje,{toFormData:()=>DHt});function RHt(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,s)=>String.fromCharCode(s)),n}async function DHt(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new Iie(r[1]||r[2]),i,s,o,a,u,c,l=[],d=new mm,p=v=>{o+=E.decode(v,{stream:!0})},f=v=>{l.push(v)},h=()=>{let v=new hm(l,c,{type:u});d.append(a,v)},y=()=>{d.append(a,o)},E=new TextDecoder("utf-8");E.decode(),n.onPartBegin=function(){n.onPartData=p,n.onPartEnd=y,i="",s="",o="",a="",u="",c=null,l.length=0},n.onHeaderField=function(v){i+=E.decode(v,{stream:!0})},n.onHeaderValue=function(v){s+=E.decode(v,{stream:!0})},n.onHeaderEnd=function(){if(s+=E.decode(),i=i.toLowerCase(),i==="content-disposition"){let v=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(a=v[2]||v[3]||""),c=RHt(s),c&&(n.onPartData=f,n.onPartEnd=h)}else i==="content-type"&&(u=s);s="",i=""};for await(let v of t)n.write(v);return n.end(),d}var Qd,Sn,eje,ym,MP,PP,CHt,cA,THt,OHt,xHt,IHt,Pg,Iie,rje=ce(()=>{xie();xP();Qd=0,Sn={START_BOUNDARY:Qd++,HEADER_FIELD_START:Qd++,HEADER_FIELD:Qd++,HEADER_VALUE_START:Qd++,HEADER_VALUE:Qd++,HEADER_VALUE_ALMOST_DONE:Qd++,HEADERS_ALMOST_DONE:Qd++,PART_DATA_START:Qd++,PART_DATA:Qd++,END:Qd++},eje=1,ym={PART_BOUNDARY:eje,LAST_BOUNDARY:eje*=2},MP=10,PP=13,CHt=32,cA=45,THt=58,OHt=97,xHt=122,IHt=t=>t|32,Pg=()=>{},Iie=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=Pg,this.onHeaderField=Pg,this.onHeadersEnd=Pg,this.onHeaderValue=Pg,this.onPartBegin=Pg,this.onPartData=Pg,this.onPartEnd=Pg,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Sn.START_BOUNDARY}write(e){let r=0,n=e.length,i=this.index,{lookbehind:s,boundary:o,boundaryChars:a,index:u,state:c,flags:l}=this,d=this.boundary.length,p=d-1,f=e.length,h,y,E=A=>{this[A+"Mark"]=r},v=A=>{delete this[A+"Mark"]},w=(A,C,x,R)=>{(C===void 0||C!==x)&&this[A](R&&R.subarray(C,x))},T=(A,C)=>{let x=A+"Mark";x in this&&(C?(w(A,this[x],r,e),delete this[x]):(w(A,this[x],e.length,e),this[x]=0))};for(r=0;r<n;r++)switch(h=e[r],c){case Sn.START_BOUNDARY:if(u===o.length-2){if(h===cA)l|=ym.LAST_BOUNDARY;else if(h!==PP)return;u++;break}else if(u-1===o.length-2){if(l&ym.LAST_BOUNDARY&&h===cA)c=Sn.END,l=0;else if(!(l&ym.LAST_BOUNDARY)&&h===MP)u=0,w("onPartBegin"),c=Sn.HEADER_FIELD_START;else return;break}h!==o[u+2]&&(u=-2),h===o[u+2]&&u++;break;case Sn.HEADER_FIELD_START:c=Sn.HEADER_FIELD,E("onHeaderField"),u=0;case Sn.HEADER_FIELD:if(h===PP){v("onHeaderField"),c=Sn.HEADERS_ALMOST_DONE;break}if(u++,h===cA)break;if(h===THt){if(u===1)return;T("onHeaderField",!0),c=Sn.HEADER_VALUE_START;break}if(y=IHt(h),y<OHt||y>xHt)return;break;case Sn.HEADER_VALUE_START:if(h===CHt)break;E("onHeaderValue"),c=Sn.HEADER_VALUE;case Sn.HEADER_VALUE:h===PP&&(T("onHeaderValue",!0),w("onHeaderEnd"),c=Sn.HEADER_VALUE_ALMOST_DONE);break;case Sn.HEADER_VALUE_ALMOST_DONE:if(h!==MP)return;c=Sn.HEADER_FIELD_START;break;case Sn.HEADERS_ALMOST_DONE:if(h!==MP)return;w("onHeadersEnd"),c=Sn.PART_DATA_START;break;case Sn.PART_DATA_START:c=Sn.PART_DATA,E("onPartData");case Sn.PART_DATA:if(i=u,u===0){for(r+=p;r<f&&!(e[r]in a);)r+=d;r-=p,h=e[r]}if(u<o.length)o[u]===h?(u===0&&T("onPartData",!0),u++):u=0;else if(u===o.length)u++,h===PP?l|=ym.PART_BOUNDARY:h===cA?l|=ym.LAST_BOUNDARY:u=0;else if(u-1===o.length)if(l&ym.PART_BOUNDARY){if(u=0,h===MP){l&=~ym.PART_BOUNDARY,w("onPartEnd"),w("onPartBegin"),c=Sn.HEADER_FIELD_START;break}}else l&ym.LAST_BOUNDARY&&h===cA?(w("onPartEnd"),c=Sn.END,l=0):u=0;if(u>0)s[u-1]=h;else if(i>0){let A=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);w("onPartData",0,i,A),i=0,E("onPartData"),r--}break;case Sn.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}T("onHeaderField"),T("onHeaderValue"),T("onPartData"),this.index=u,this.state=c,this.flags=l}end(){if(this.state===Sn.HEADER_FIELD_START&&this.index===0||this.state===Sn.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Sn.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});async function Rie(t){if(t[La].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[La].disturbed=!0,t[La].error)throw t[La].error;let{body:e}=t;if(e===null)return mu.Buffer.alloc(0);if(!(e instanceof kc.default))return mu.Buffer.alloc(0);let r=[],n=0;try{for await(let i of e){if(t.size>0&&n+i.length>t.size){let s=new Xo(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}n+=i.length,r.push(i)}}catch(i){throw i instanceof Lf?i:new Xo(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?mu.Buffer.from(r.join("")):mu.Buffer.concat(r,n)}catch(i){throw new Xo(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new Xo(`Premature close of server response while trying to fetch ${t.url}`)}var kc,jf,mu,kHt,La,Xd,F6,MHt,NP,nje,ije,FP=ce(()=>{kc=St(require("node:stream"),1),jf=require("node:util"),mu=require("node:buffer");oA();xP();Cie();IP();DP();kHt=(0,jf.promisify)(kc.default.pipeline),La=Symbol("Body internals"),Xd=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Tie(e)?e=mu.Buffer.from(e.toString()):uA(e)||mu.Buffer.isBuffer(e)||(jf.types.isAnyArrayBuffer(e)?e=mu.Buffer.from(e):ArrayBuffer.isView(e)?e=mu.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof kc.default||(e instanceof mm?(e=jLe(e),n=e.type.split("=")[1]):e=mu.Buffer.from(String(e))));let i=e;mu.Buffer.isBuffer(e)?i=kc.default.Readable.from(e):uA(e)&&(i=kc.default.Readable.from(e.stream())),this[La]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof kc.default&&e.on("error",s=>{let o=s instanceof Lf?s:new Xo(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[La].error=o})}get body(){return this[La].stream}get bodyUsed(){return this[La].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await Rie(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new mm,i=new URLSearchParams(await this.text());for(let[s,o]of i)n.append(s,o);return n}let{toFormData:r}=await Promise.resolve().then(()=>(rje(),tje));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[La].body&&this[La].body.type||"",r=await this.arrayBuffer();return new Gl([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Rie(this);return new TextDecoder().decode(e)}buffer(){return Rie(this)}};Xd.prototype.buffer=(0,jf.deprecate)(Xd.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Xd.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,jf.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});F6=(t,e)=>{let r,n,{body:i}=t[La];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof kc.default&&typeof i.getBoundary!="function"&&(r=new kc.PassThrough({highWaterMark:e}),n=new kc.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[La].stream=r,i=n),i},MHt=(0,jf.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),NP=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Tie(t)?"application/x-www-form-urlencoded;charset=UTF-8":uA(t)?t.type||null:mu.Buffer.isBuffer(t)||jf.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof mm?`multipart/form-data; boundary=${e[La].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${MHt(t)}`:t instanceof kc.default?null:"text/plain;charset=UTF-8",nje=t=>{let{body:e}=t[La];return e===null?0:uA(e)?e.size:mu.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},ije=async(t,{body:e})=>{e===null?t.end():await kHt(e,t)}});function sje(t=[]){return new ja(t.reduce((e,r,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return BP(e),kie(e,String(r)),!0}catch{return!1}}))}var Die,lA,BP,kie,ja,qP=ce(()=>{Die=require("node:util"),lA=St(require("node:http"),1),BP=typeof lA.default.validateHeaderName=="function"?lA.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},kie=typeof lA.default.validateHeaderValue=="function"?lA.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},ja=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[i,s]of Object.entries(n))r.push(...s.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!Die.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||Die.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(BP(n),kie(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(o,a)=>(BP(o),kie(o,String(a)),URLSearchParams.prototype[i].call(n,String(o).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return o=>(BP(o),URLSearchParams.prototype[i].call(n,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(ja.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}))});var PHt,dA,Mie=ce(()=>{PHt=new Set([301,302,303,307,308]),dA=t=>PHt.has(t)});var Hl,yu,oje=ce(()=>{qP();FP();Mie();Hl=Symbol("Response internals"),yu=class t extends Xd{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,i=new ja(r.headers);if(e!==null&&!i.has("Content-Type")){let s=NP(e,this);s&&i.append("Content-Type",s)}this[Hl]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[Hl].type}get url(){return this[Hl].url||""}get status(){return this[Hl].status}get ok(){return this[Hl].status>=200&&this[Hl].status<300}get redirected(){return this[Hl].counter>0}get statusText(){return this[Hl].statusText}get headers(){return this[Hl].headers}get highWaterMark(){return this[Hl].highWaterMark}clone(){return new t(F6(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!dA(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[Hl].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let i=new ja(r&&r.headers);return i.has("content-type")||i.set("content-type","application/json"),new t(n,{...r,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(yu.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}})});var aje,uje=ce(()=>{aje=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""}});function cje(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}function fje(t){if(!dje.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function NHt(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=(0,lje.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function B6(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:NHt(t)}function hje(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,s=cje(i),o=cje(i,!0);s.toString().length>4096&&(s=o),e&&(s=e(s)),r&&(o=r(o));let a=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return o;case"unsafe-url":return s;case"strict-origin":return B6(s)&&!B6(a)?"no-referrer":o.toString();case"strict-origin-when-cross-origin":return s.origin===a.origin?s:B6(s)&&!B6(a)?"no-referrer":o;case"same-origin":return s.origin===a.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===a.origin?s:o;case"no-referrer-when-downgrade":return B6(s)&&!B6(a)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function mje(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&dje.has(n)&&(r=n);return r}var lje,dje,pje,Pie=ce(()=>{lje=require("node:net");dje=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),pje="strict-origin-when-cross-origin"});var yje,gje,Os,pA,FHt,gm,bje,_je=ce(()=>{yje=require("node:url"),gje=require("node:util");qP();FP();DP();uje();Pie();Os=Symbol("Request internals"),pA=t=>typeof t=="object"&&typeof t[Os]=="object",FHt=(0,gje.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),gm=class t extends Xd{constructor(e,r={}){let n;if(pA(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!pA(r)&&"data"in r&&FHt(),(r.body!=null||pA(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body?r.body:pA(e)&&e.body!==null?F6(e):null;super(s,{size:r.size||e.size||0});let o=new ja(r.headers||e.headers||{});if(s!==null&&!o.has("Content-Type")){let c=NP(s,this);c&&o.set("Content-Type",c)}let a=pA(e)?e.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!$Le(a))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let u=r.referrer==null?e.referrer:r.referrer;if(u==="")u="no-referrer";else if(u){let c=new URL(u);u=/^about:(\/\/)?client$/.test(c)?"client":c}else u=void 0;this[Os]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:a,referrer:u},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[Os].method}get url(){return(0,yje.format)(this[Os].parsedURL)}get headers(){return this[Os].headers}get redirect(){return this[Os].redirect}get signal(){return this[Os].signal}get referrer(){if(this[Os].referrer==="no-referrer")return"";if(this[Os].referrer==="client")return"about:client";if(this[Os].referrer)return this[Os].referrer.toString()}get referrerPolicy(){return this[Os].referrerPolicy}set referrerPolicy(e){this[Os].referrerPolicy=fje(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(gm.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});bje=t=>{let{parsedURL:e}=t[Os],r=new ja(t[Os].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let a=nje(t);typeof a=="number"&&!Number.isNaN(a)&&(n=String(a))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=pje),t.referrer&&t.referrer!=="no-referrer"?t[Os].referrer=hje(t):t[Os].referrer="no-referrer",t[Os].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=t;typeof i=="function"&&(i=i(e));let s=aje(e),o={path:e.pathname+s,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:e,options:o}}});var fA,Eje=ce(()=>{IP();fA=class extends Lf{constructor(e,r="aborted"){super(e,r)}}});var wje={};Ha(wje,{AbortError:()=>fA,Blob:()=>Gl,FetchError:()=>Xo,File:()=>hm,FormData:()=>mm,Headers:()=>ja,Request:()=>gm,Response:()=>yu,blobFrom:()=>JLe,blobFromSync:()=>WLe,default:()=>Nie,fileFrom:()=>YLe,fileFromSync:()=>QLe,isRedirect:()=>dA});async function Nie(t,e){return new Promise((r,n)=>{let i=new gm(t,e),{parsedURL:s,options:o}=bje(i);if(!BHt.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let h=DLe(i.url),y=new yu(h,{headers:{"Content-Type":h.typeFull}});r(y);return}let a=(s.protocol==="https:"?Sje.default:vje.default).request,{signal:u}=i,c=null,l=()=>{let h=new fA("The operation was aborted.");n(h),i.body&&i.body instanceof gu.default.Readable&&i.body.destroy(h),!(!c||!c.body)&&c.body.emit("error",h)};if(u&&u.aborted){l();return}let d=()=>{l(),f()},p=a(s.toString(),o);u&&u.addEventListener("abort",d);let f=()=>{p.abort(),u&&u.removeEventListener("abort",d)};p.on("error",h=>{n(new Xo(`request to ${i.url} failed, reason: ${h.message}`,"system",h)),f()}),qHt(p,h=>{c&&c.body&&c.body.destroy(h)}),process.version<"v14"&&p.on("socket",h=>{let y;h.prependListener("end",()=>{y=h._eventsCount}),h.prependListener("close",E=>{if(c&&y<h._eventsCount&&!E){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",v)}})}),p.on("response",h=>{p.setTimeout(0);let y=sje(h.rawHeaders);if(dA(h.statusCode)){let A=y.get("Location"),C=null;try{C=A===null?null:new URL(A,i.url)}catch{if(i.redirect!=="manual"){n(new Xo(`uri requested responds with an invalid redirect URL: ${A}`,"invalid-redirect")),f();return}}switch(i.redirect){case"error":n(new Xo(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),f();return;case"manual":break;case"follow":{if(C===null)break;if(i.counter>=i.follow){n(new Xo(`maximum redirect reached at: ${i.url}`,"max-redirect")),f();return}let x={headers:new ja(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:F6(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!ULe(i.url,C)||!KLe(i.url,C))for(let M of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(M);if(h.statusCode!==303&&i.body&&e.body instanceof gu.default.Readable){n(new Xo("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&i.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length"));let R=mje(y);R&&(x.referrerPolicy=R),r(Nie(new gm(C,x))),f();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}u&&h.once("end",()=>{u.removeEventListener("abort",d)});let E=(0,gu.pipeline)(h,new gu.PassThrough,A=>{A&&n(A)});process.version<"v12.10"&&h.on("aborted",d);let v={url:i.url,status:h.statusCode,statusText:h.statusMessage,headers:y,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},w=y.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||w===null||h.statusCode===204||h.statusCode===304){c=new yu(E,v),r(c);return}let T={flush:Ng.default.Z_SYNC_FLUSH,finishFlush:Ng.default.Z_SYNC_FLUSH};if(w==="gzip"||w==="x-gzip"){E=(0,gu.pipeline)(E,Ng.default.createGunzip(T),A=>{A&&n(A)}),c=new yu(E,v),r(c);return}if(w==="deflate"||w==="x-deflate"){let A=(0,gu.pipeline)(h,new gu.PassThrough,C=>{C&&n(C)});A.once("data",C=>{(C[0]&15)===8?E=(0,gu.pipeline)(E,Ng.default.createInflate(),x=>{x&&n(x)}):E=(0,gu.pipeline)(E,Ng.default.createInflateRaw(),x=>{x&&n(x)}),c=new yu(E,v),r(c)}),A.once("end",()=>{c||(c=new yu(E,v),r(c))});return}if(w==="br"){E=(0,gu.pipeline)(E,Ng.default.createBrotliDecompress(),A=>{A&&n(A)}),c=new yu(E,v),r(c);return}c=new yu(E,v),r(c)}),ije(p,i).catch(n)})}function qHt(t,e){let r=hA.Buffer.from(`0\r
\r
`),n=!1,i=!1,s;t.on("response",o=>{let{headers:a}=o;n=a["transfer-encoding"]==="chunked"&&!a["content-length"]}),t.on("socket",o=>{let a=()=>{if(n&&!i){let c=new Error("Premature close");c.code="ERR_STREAM_PREMATURE_CLOSE",e(c)}},u=c=>{i=hA.Buffer.compare(c.slice(-5),r)===0,!i&&s&&(i=hA.Buffer.compare(s.slice(-3),r.slice(0,3))===0&&hA.Buffer.compare(c.slice(-2),r.slice(3))===0),s=c};o.prependListener("close",a),o.on("data",u),t.on("close",()=>{o.removeListener("close",a),o.removeListener("data",u)})})}var vje,Sje,Ng,gu,hA,BHt,Aje=ce(()=>{vje=St(require("node:http"),1),Sje=St(require("node:https"),1),Ng=St(require("node:zlib"),1),gu=St(require("node:stream"),1),hA=require("node:buffer");kLe();FP();oje();qP();_je();Cie();Eje();Mie();xP();DP();Pie();xie();BHt=new Set(["data:","http:","https:"])});var Oje=b(L6=>{"use strict";var LHt=L6&&L6.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},q6;Object.defineProperty(L6,"__esModule",{value:!0});L6.Gaxios=void 0;var jHt=LHt(uC()),$Ht=require("https"),Fg=fie(),UHt=lLe(),Cje=require("stream"),Tje=yie(),KHt=async()=>globalThis.crypto?.randomUUID()||(await import("crypto")).randomUUID(),VHt=204,LP=class{agentCache=new Map;defaults;interceptors;constructor(e){this.defaults=e||{},this.interceptors={request:new Tje.GaxiosInterceptorManager,response:new Tje.GaxiosInterceptorManager}}fetch(...e){let r=e[0],n=e[1],i,s=new Headers;return typeof r=="string"?i=new URL(r):r instanceof URL?i=r:r&&r.url&&(i=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&q6.mergeHeaders(s,r.headers),n&&q6.mergeHeaders(s,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:s,url:i}):this.request({...n,headers:s,url:i})}async request(e={}){let r=await this.#n(e);return r=await this.#t(r),this.#r(this._request(r))}async _defaultAdapter(e){let r=e.fetchImplementation||this.defaults.fetchImplementation||await q6.#u(),n={...e};delete n.data;let i=await r(e.url,n),s=await this.getResponseData(e,i);return Object.getOwnPropertyDescriptor(i,"data")?.configurable||Object.defineProperties(i,{data:{configurable:!0,writable:!0,enumerable:!0,value:s}}),Object.assign(i,{config:e,data:s})}async _request(e){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let i=[];for await(let s of r.data)i.push(s);r.data=i.toString()}let n=Fg.GaxiosError.extractAPIErrorFromResponse(r,`Request failed with status code ${r.status}`);throw new Fg.GaxiosError(n?.message,e,r,n)}return r}catch(r){let n;r instanceof Fg.GaxiosError?n=r:r instanceof Error?n=new Fg.GaxiosError(r.message,e,void 0,r):n=new Fg.GaxiosError("Unexpected Gaxios Error",e,void 0,r);let{shouldRetry:i,config:s}=await(0,UHt.getRetryConfig)(n);if(i&&s)return n.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,e.retryConfig=n.config?.retryConfig,this.#i(e),this._request(e);throw e.errorRedactor&&e.errorRedactor(n),n}}async getResponseData(e,r){if(r.status===VHt)return"";if(e.maxContentLength&&r.headers.has("content-length")&&e.maxContentLength<Number.parseInt(r.headers?.get("content-length")||""))throw new Fg.GaxiosError("Response's `Content-Length` is over the limit.",e,Object.assign(r,{config:e}));switch(e.responseType){case"stream":return r.body;case"json":{let n=await r.text();try{return JSON.parse(n)}catch{return n}}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"text":return r.text();default:return this.getResponseDataFromContentType(r)}}#e(e,r=[]){let n=new URL(e),i=[...r],s=(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[];for(let o of s)i.push(o.trim());for(let o of i)if(o instanceof RegExp){if(o.test(n.toString()))return!1}else if(o instanceof URL){if(o.origin===n.origin)return!1}else if(o.startsWith("*.")||o.startsWith(".")){let a=o.replace(/^\*\./,".");if(n.hostname.endsWith(a))return!1}else if(o===n.origin||o===n.hostname||o===n.href)return!1;return!0}async#t(e){let r=Promise.resolve(e);for(let n of this.interceptors.request.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#r(e){let r=Promise.resolve(e);for(let n of this.interceptors.response.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#n(e){let r=new Headers(this.defaults.headers);q6.mergeHeaders(r,e.headers);let n=(0,jHt.default)(!0,{},this.defaults,e);if(!n.url)throw new Error("URL is required.");if(n.baseURL&&(n.url=new URL(n.url,n.baseURL)),n.url=new URL(n.url),n.params)if(n.paramsSerializer){let o=n.paramsSerializer(n.params);o.startsWith("?")&&(o=o.slice(1));let a=n.url.toString().includes("?")?"&":"?";n.url=n.url+a+o}else{let o=n.url instanceof URL?n.url:new URL(n.url);for(let[a,u]of new URLSearchParams(n.params))o.searchParams.append(a,u);n.url=o}typeof e.maxContentLength=="number"&&(n.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(n.follow=e.maxRedirects);let i=typeof n.data=="string"||n.data instanceof ArrayBuffer||n.data instanceof Blob||globalThis.File&&n.data instanceof File||n.data instanceof FormData||n.data instanceof Cje.Readable||n.data instanceof ReadableStream||n.data instanceof String||n.data instanceof URLSearchParams||ArrayBuffer.isView(n.data)||["Blob","File","FormData"].includes(n.data?.constructor?.name||"");if(n.multipart?.length){let o=await KHt();r.set("content-type",`multipart/related; boundary=${o}`),n.body=Cje.Readable.from(this.getMultipartRequest(n.multipart,o))}else i?n.body=n.data:typeof n.data=="object"?r.get("Content-Type")==="application/x-www-form-urlencoded"?n.body=n.paramsSerializer?n.paramsSerializer(n.data):new URLSearchParams(n.data):(r.has("content-type")||r.set("content-type","application/json"),n.body=JSON.stringify(n.data)):n.data&&(n.body=n.data);n.validateStatus=n.validateStatus||this.validateStatus,n.responseType=n.responseType||"unknown",!r.has("accept")&&n.responseType==="json"&&r.set("accept","application/json");let s=n.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(!n.agent)if(s&&this.#e(n.url,n.noProxy)){let o=await q6.#a();this.agentCache.has(s)?n.agent=this.agentCache.get(s):(n.agent=new o(s,{cert:n.cert,key:n.key}),this.agentCache.set(s,n.agent))}else n.cert&&n.key&&(this.agentCache.has(n.key)?n.agent=this.agentCache.get(n.key):(n.agent=new $Ht.Agent({cert:n.cert,key:n.key}),this.agentCache.set(n.key,n.agent)));return typeof n.errorRedactor!="function"&&n.errorRedactor!==!1&&(n.errorRedactor=Fg.defaultErrorRedactor),n.body&&!("duplex"in n)&&(n.duplex="half"),this.#i(n),Object.assign(n,{headers:r,url:n.url instanceof URL?n.url:new URL(n.url)})}#i(e){if(e.timeout){let r=AbortSignal.timeout(e.timeout);e.signal&&!e.signal.aborted?e.signal=AbortSignal.any([e.signal,r]):e.signal=r}}validateStatus(e){return e>=200&&e<300}async getResponseDataFromContentType(e){let r=e.headers.get("Content-Type");if(r===null)return e.text();if(r=r.toLowerCase(),r.includes("application/json")){let n=await e.text();try{n=JSON.parse(n)}catch{}return n}else return r.match(/^text\//)?e.text():e.blob()}async*getMultipartRequest(e,r){let n=`--${r}--`;for(let i of e){let s=i.headers.get("Content-Type")||"application/octet-stream";yield`--${r}\r
Content-Type: ${s}\r
\r
`,typeof i.content=="string"?yield i.content:yield*i.content,yield`\r
`}yield n}static#s;static#o;static async#a(){return this.#s||=(await Promise.resolve().then(()=>St(RLe()))).HttpsProxyAgent,this.#s}static async#u(){let e=typeof window<"u"&&!!window;return this.#o||=e?window.fetch:(await Promise.resolve().then(()=>(Aje(),wje))).default,this.#o}static mergeHeaders(e,...r){e=e instanceof Headers?e:new Headers(e);for(let n of r)(n instanceof Headers?n:new Headers(n)).forEach((s,o)=>{o==="set-cookie"?e.append(o,s):e.set(o,s)});return e}};L6.Gaxios=LP;q6=LP});var Zs=b(Zo=>{"use strict";var GHt=Zo&&Zo.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),HHt=Zo&&Zo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&GHt(e,t,r)};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.instance=Zo.Gaxios=Zo.GaxiosError=void 0;Zo.request=WHt;var xje=Oje();Object.defineProperty(Zo,"Gaxios",{enumerable:!0,get:function(){return xje.Gaxios}});var zHt=fie();Object.defineProperty(Zo,"GaxiosError",{enumerable:!0,get:function(){return zHt.GaxiosError}});HHt(yie(),Zo);Zo.instance=new xje.Gaxios;async function WHt(t){return Zo.instance.request(t)}});var Fie=b(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.GCE_LINUX_BIOS_PATHS=void 0;zl.isGoogleCloudServerless=Dje;zl.isGoogleComputeEngineLinux=kje;zl.isGoogleComputeEngineMACAddress=Mje;zl.isGoogleComputeEngine=Pje;zl.detectGCPResidency=YHt;var Ije=require("fs"),Rje=require("os");zl.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var JHt=/^42:01/;function Dje(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function kje(){if((0,Rje.platform)()!=="linux")return!1;try{(0,Ije.statSync)(zl.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,Ije.readFileSync)(zl.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch{return!1}}function Mje(){let t=(0,Rje.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:r}of e)if(JHt.test(r))return!0}return!1}function Pje(){return kje()||Mje()}function YHt(){return Dje()||Pje()}});var Nje=b(jP=>{"use strict";Object.defineProperty(jP,"__esModule",{value:!0});jP.Colours=void 0;var Ao=class t{static isEnabled(e){return e&&e.isTTY&&(typeof e.getColorDepth=="function"?e.getColorDepth()>2:!0)}static refresh(){t.enabled=t.isEnabled(process==null?void 0:process.stderr),this.enabled?(t.reset="\x1B[0m",t.bright="\x1B[1m",t.dim="\x1B[2m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.white="\x1B[37m",t.grey="\x1B[90m"):(t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="")}};jP.Colours=Ao;Ao.enabled=!1;Ao.reset="";Ao.bright="";Ao.dim="";Ao.red="";Ao.green="";Ao.yellow="";Ao.blue="";Ao.magenta="";Ao.cyan="";Ao.white="";Ao.grey="";Ao.refresh()});var Lje=b(Qr=>{"use strict";var QHt=Qr&&Qr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),XHt=Qr&&Qr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Fje=Qr&&Qr.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&QHt(r,e,n[i]);return XHt(r,e),r}})();Object.defineProperty(Qr,"__esModule",{value:!0});Qr.env=Qr.DebugLogBackendBase=Qr.placeholder=Qr.AdhocDebugLogger=Qr.LogSeverity=void 0;Qr.getNodeBackend=qie;Qr.getDebugBackend=ezt;Qr.getStructuredBackend=tzt;Qr.setBackend=rzt;Qr.log=qje;var ZHt=require("events"),mA=Fje(require("process")),Bje=Fje(require("util")),bu=Nje(),Wl;(function(t){t.DEFAULT="DEFAULT",t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR"})(Wl||(Qr.LogSeverity=Wl={}));var yA=class extends ZHt.EventEmitter{constructor(e,r){super(),this.namespace=e,this.upstream=r,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(n,i)=>this.on(n,i)}),this.func.debug=(...n)=>this.invokeSeverity(Wl.DEBUG,...n),this.func.info=(...n)=>this.invokeSeverity(Wl.INFO,...n),this.func.warn=(...n)=>this.invokeSeverity(Wl.WARNING,...n),this.func.error=(...n)=>this.invokeSeverity(Wl.ERROR,...n),this.func.sublog=n=>qje(n,this.func)}invoke(e,...r){if(this.upstream)try{this.upstream(e,...r)}catch{}try{this.emit("log",e,r)}catch{}}invokeSeverity(e,...r){this.invoke({severity:e},...r)}};Qr.AdhocDebugLogger=yA;Qr.placeholder=new yA("",()=>{}).func;var j6=class{constructor(){var e;this.cached=new Map,this.filters=[],this.filtersSet=!1;let r=(e=mA.env[Qr.env.nodeEnables])!==null&&e!==void 0?e:"*";r==="all"&&(r="*"),this.filters=r.split(",")}log(e,r,...n){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let i=this.cached.get(e);i||(i=this.makeLogger(e),this.cached.set(e,i)),i(r,...n)}catch(i){console.error(i)}}};Qr.DebugLogBackendBase=j6;var Bie=class extends j6{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(e){return this.enabledRegexp.test(e)}makeLogger(e){return this.enabledRegexp.test(e)?(r,...n)=>{var i;let s=`${bu.Colours.green}${e}${bu.Colours.reset}`,o=`${bu.Colours.yellow}${mA.pid}${bu.Colours.reset}`,a;switch(r.severity){case Wl.ERROR:a=`${bu.Colours.red}${r.severity}${bu.Colours.reset}`;break;case Wl.INFO:a=`${bu.Colours.magenta}${r.severity}${bu.Colours.reset}`;break;case Wl.WARNING:a=`${bu.Colours.yellow}${r.severity}${bu.Colours.reset}`;break;default:a=(i=r.severity)!==null&&i!==void 0?i:Wl.DEFAULT;break}let u=Bje.formatWithOptions({colors:bu.Colours.enabled},...n),c=Object.assign({},r);delete c.severity;let l=Object.getOwnPropertyNames(c).length?JSON.stringify(c):"",d=l?`${bu.Colours.grey}${l}${bu.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",o,s,a,u,l?` ${d}`:"")}:()=>{}}setFilters(){let r=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${r}$`,"i")}};function qie(){return new Bie}var Lie=class extends j6{constructor(e){super(),this.debugPkg=e}makeLogger(e){let r=this.debugPkg(e);return(n,...i)=>{r(i[0],...i.slice(1))}}setFilters(){var e;let r=(e=mA.env.NODE_DEBUG)!==null&&e!==void 0?e:"";mA.env.NODE_DEBUG=`${r}${r?",":""}${this.filters.join(",")}`}};function ezt(t){return new Lie(t)}var jie=class extends j6{constructor(e){var r;super(),this.upstream=(r=e)!==null&&r!==void 0?r:void 0}makeLogger(e){var r;let n=(r=this.upstream)===null||r===void 0?void 0:r.makeLogger(e);return(i,...s)=>{var o;let a=(o=i.severity)!==null&&o!==void 0?o:Wl.INFO,u=Object.assign({severity:a,message:Bje.format(...s)},i),c=JSON.stringify(u);n?n(i,c):console.log("%s",c)}}setFilters(){var e;(e=this.upstream)===null||e===void 0||e.setFilters()}};function tzt(t){return new jie(t)}Qr.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};var $ie=new Map,_u;function rzt(t){_u=t,$ie.clear()}function qje(t,e){if(!_u&&!mA.env[Qr.env.nodeEnables]||!t)return Qr.placeholder;e&&(t=`${e.instance.namespace}:${t}`);let r=$ie.get(t);if(r)return r.func;if(_u===null)return Qr.placeholder;_u===void 0&&(_u=qie());let n=(()=>{let i;return new yA(t,(o,...a)=>{if(i!==_u){if(_u===null)return;_u===void 0&&(_u=qie()),i=_u}_u?.log(t,o,...a)})})();return $ie.set(t,n),n.func}});var Uie=b(Bg=>{"use strict";var nzt=Bg&&Bg.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),izt=Bg&&Bg.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nzt(e,t,r)};Object.defineProperty(Bg,"__esModule",{value:!0});izt(Lje(),Bg)});var bA=b(ht=>{"use strict";var $je=ht&&ht.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),szt=ht&&ht.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),ozt=ht&&ht.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&$je(r,e,n[i]);return szt(r,e),r}})(),azt=ht&&ht.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$je(e,t,r)};Object.defineProperty(ht,"__esModule",{value:!0});ht.gcpResidencyCache=ht.METADATA_SERVER_DETECTION=ht.HEADERS=ht.HEADER_VALUE=ht.HEADER_NAME=ht.SECONDARY_HOST_ADDRESS=ht.HOST_ADDRESS=ht.BASE_PATH=void 0;ht.instance=fzt;ht.project=hzt;ht.universe=mzt;ht.bulk=yzt;ht.isAvailable=bzt;ht.resetIsAvailableCache=_zt;ht.getGCPResidency=Gie;ht.setGCPResidency=Uje;ht.requestTimeout=Kje;var Kie=Zs(),uzt=FU(),czt=Fie(),lzt=ozt(Uie());ht.BASE_PATH="/computeMetadata/v1";ht.HOST_ADDRESS="http://169.254.169.254";ht.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";ht.HEADER_NAME="Metadata-Flavor";ht.HEADER_VALUE="Google";ht.HEADERS=Object.freeze({[ht.HEADER_NAME]:ht.HEADER_VALUE});var jje=lzt.log("gcp-metadata");ht.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function Vie(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||ht.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(ht.BASE_PATH,t).href}function dzt(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function gA(t,e={},r=3,n=!1){let i=new Headers(ht.HEADERS),s="",o={};if(typeof t=="object"){let d=t;new Headers(d.headers).forEach((p,f)=>i.set(f,p)),s=d.metadataKey,o=d.params||o,r=d.noResponseRetries||r,n=d.fastFail||n}else s=t;typeof e=="string"?s+=`/${e}`:(dzt(e),e.property&&(s+=`/${e.property}`),new Headers(e.headers).forEach((d,p)=>i.set(p,d)),o=e.params||o);let a=n?pzt:Kie.request,u={url:`${Vie()}/${s}`,headers:i,retryConfig:{noResponseRetries:r},params:o,responseType:"text",timeout:Kje()};jje.info("instance request %j",u);let c=await a(u);jje.info("instance metadata is %s",c.data);let l=c.headers.get(ht.HEADER_NAME);if(l!==ht.HEADER_VALUE)throw new RangeError(`Invalid response from metadata service: incorrect ${ht.HEADER_NAME} header. Expected '${ht.HEADER_VALUE}', got ${l?`'${l}'`:"no header"}`);if(typeof c.data=="string")try{return uzt.parse(c.data)}catch{}return c.data}async function pzt(t){let e={...t,url:t.url?.toString().replace(Vie(),Vie(ht.SECONDARY_HOST_ADDRESS))},r=(0,Kie.request)(t),n=(0,Kie.request)(e);return Promise.any([r,n])}function fzt(t){return gA("instance",t)}function hzt(t){return gA("project",t)}function mzt(t){return gA("universe",t)}async function yzt(t){let e={};return await Promise.all(t.map(r=>(async()=>{let n=await gA(r),i=r.metadataKey;e[i]=n})())),e}function gzt(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var $P;async function bzt(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in ht.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(ht.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return Gie();case"ping-only":}}try{return $P===void 0&&($P=gA("instance",void 0,gzt(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await $P,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code.toString()))){let r="UNKNOWN";e.code&&(r=e.code.toString()),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}}function _zt(){$P=void 0}ht.gcpResidencyCache=null;function Gie(){return ht.gcpResidencyCache===null&&Uje(),ht.gcpResidencyCache}function Uje(t=null){ht.gcpResidencyCache=t!==null?t:(0,czt.detectGCPResidency)()}function Kje(){return Gie()?0:3e3}azt(Fie(),ht)});var Hje=b(UP=>{"use strict";UP.byteLength=vzt;UP.toByteArray=wzt;UP.fromByteArray=Tzt;var Zd=[],Mc=[],Ezt=typeof Uint8Array<"u"?Uint8Array:Array,Hie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(qg=0,Vje=Hie.length;qg<Vje;++qg)Zd[qg]=Hie[qg],Mc[Hie.charCodeAt(qg)]=qg;var qg,Vje;Mc[45]=62;Mc[95]=63;function Gje(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function vzt(t){var e=Gje(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Szt(t,e,r){return(e+r)*3/4-r}function wzt(t){var e,r=Gje(t),n=r[0],i=r[1],s=new Ezt(Szt(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Mc[t.charCodeAt(u)]<<18|Mc[t.charCodeAt(u+1)]<<12|Mc[t.charCodeAt(u+2)]<<6|Mc[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Mc[t.charCodeAt(u)]<<2|Mc[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=Mc[t.charCodeAt(u)]<<10|Mc[t.charCodeAt(u+1)]<<4|Mc[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Azt(t){return Zd[t>>18&63]+Zd[t>>12&63]+Zd[t>>6&63]+Zd[t&63]}function Czt(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Azt(n));return i.join("")}function Tzt(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Czt(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Zd[e>>2]+Zd[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Zd[e>>10]+Zd[e>>4&63]+Zd[e<<2&63]+"=")),i.join("")}});var Wie=b(zie=>{"use strict";Object.defineProperty(zie,"__esModule",{value:!0});zie.fromArrayBufferToHex=Ozt;function Ozt(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}});var zje=b(KP=>{"use strict";Object.defineProperty(KP,"__esModule",{value:!0});KP.BrowserCrypto=void 0;var $6=Hje(),xzt=Wie(),Jie=class t{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return $6.fromByteArray(new Uint8Array(n))}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),$6.fromByteArray(r)}static padBase64(e){for(;e.length%4!==0;)e+="=";return e}async verify(e,r,n){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s=new TextEncoder().encode(r),o=$6.toByteArray(t.padBase64(n)),a=await window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return await window.crypto.subtle.verify(i,a,o,s)}async sign(e,r){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),s=await window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),o=await window.crypto.subtle.sign(n,s,i);return $6.fromByteArray(new Uint8Array(o))}decodeBase64StringUtf8(e){let r=$6.toByteArray(t.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return $6.fromByteArray(r)}async sha256DigestHex(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return(0,xzt.fromArrayBufferToHex)(n)}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,s=await window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",s,i.encode(r))}};KP.BrowserCrypto=Jie});var Wje=b(VP=>{"use strict";Object.defineProperty(VP,"__esModule",{value:!0});VP.NodeCrypto=void 0;var U6=require("crypto"),Yie=class{async sha256DigestBase64(e){return U6.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return U6.randomBytes(e).toString("base64")}async verify(e,r,n){let i=U6.createVerify("RSA-SHA256");return i.update(r),i.end(),i.verify(e,n,"base64")}async sign(e,r){let n=U6.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return U6.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:Rzt(e);return Izt(U6.createHmac("sha256",n).update(r).digest())}};VP.NodeCrypto=Yie;function Izt(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function Rzt(t){return Buffer.from(t)}});var _A=b($f=>{"use strict";var Dzt=$f&&$f.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),kzt=$f&&$f.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dzt(e,t,r)};Object.defineProperty($f,"__esModule",{value:!0});$f.createCrypto=Nzt;$f.hasBrowserCrypto=Jje;var Mzt=zje(),Pzt=Wje();kzt(Wie(),$f);function Nzt(){return Jje()?new Mzt.BrowserCrypto:new Pzt.NodeCrypto}function Jje(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}});var Jl=b(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.LRUCache=void 0;Uf.snakeToCamel=Qje;Uf.originalOrCamelOptions=Lzt;Uf.removeUndefinedValuesInObject=jzt;Uf.isValidFile=$zt;Uf.getWellKnownCertificateConfigFileLocation=Uzt;var Fzt=require("fs"),Bzt=require("os"),Qie=require("path"),qzt="certificate_config.json",Yje="gcloud";function Qje(t){return t.replace(/([_][^_])/g,e=>e.slice(1).toUpperCase())}function Lzt(t){function e(r){let n=t||{};return n[r]??n[Qje(r)]}return{get:e}}var Xie=class{capacity;#e=new Map;maxAge;constructor(e){this.capacity=e.capacity,this.maxAge=e.maxAge}#t(e,r){this.#e.delete(e),this.#e.set(e,{value:r,lastAccessed:Date.now()})}set(e,r){this.#t(e,r),this.#r()}get(e){let r=this.#e.get(e);if(r)return this.#t(e,r.value),this.#r(),r.value}#r(){let e=this.maxAge?Date.now()-this.maxAge:0,r=this.#e.entries().next();for(;!r.done&&(this.#e.size>this.capacity||r.value[1].lastAccessed<e);)this.#e.delete(r.value[0]),r=this.#e.entries().next()}};Uf.LRUCache=Xie;function jzt(t){return Object.entries(t).forEach(([e,r])=>{(r===void 0||r==="undefined")&&delete t[e]}),t}async function $zt(t){try{return(await Fzt.promises.lstat(t)).isFile()}catch{return!1}}function Uzt(){let t=process.env.CLOUDSDK_CONFIG||(Kzt()?Qie.join(process.env.APPDATA||"",Yje):Qie.join(process.env.HOME||"",".config",Yje));return Qie.join(t,qzt)}function Kzt(){return Bzt.platform().startsWith("win")}});var Xje=b((_xr,Vzt)=>{Vzt.exports={name:"google-auth-library",version:"10.5.0",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"}});var Zie=b(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.USER_AGENT=bm.PRODUCT_NAME=bm.pkg=void 0;var Zje=Xje();bm.pkg=Zje;var e$e="google-api-nodejs-client";bm.PRODUCT_NAME=e$e;var Gzt=`${e$e}/${Zje.version}`;bm.USER_AGENT=Gzt});var Eu=b(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.AuthClient=Yl.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=Yl.DEFAULT_UNIVERSE=void 0;var Hzt=require("events"),ese=Zs(),zzt=Jl(),Wzt=Uie(),tse=Zie();Yl.DEFAULT_UNIVERSE="googleapis.com";Yl.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=300*1e3;var rse=class t extends Hzt.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=Yl.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=Yl.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(e={}){super();let r=(0,zzt.originalOrCamelOptions)(e);this.apiKey=e.apiKey,this.projectId=r.get("project_id")??null,this.quotaProjectId=r.get("quota_project_id"),this.credentials=r.get("credentials")??{},this.universeDomain=r.get("universe_domain")??Yl.DEFAULT_UNIVERSE,this.transporter=e.transporter??new ese.Gaxios(e.transporterOptions),r.get("useAuthRequestParameters")!==!1&&(this.transporter.interceptors.request.add(t.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(t.DEFAULT_RESPONSE_INTERCEPTOR)),e.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=e.forceRefreshOnFailure??!1}fetch(...e){let r=e[0],n=e[1],i,s=new Headers;return typeof r=="string"?i=new URL(r):r instanceof URL?i=r:r&&r.url&&(i=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&ese.Gaxios.mergeHeaders(s,r.headers),n&&ese.Gaxios.mergeHeaders(s,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:s,url:i}):this.request({...n,headers:s,url:i})}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e.has("x-goog-user-project")&&this.quotaProjectId&&e.set("x-goog-user-project",this.quotaProjectId),e}addUserProjectAndAuthHeaders(e,r){let n=r.get("x-goog-user-project"),i=r.get("authorization");return n&&e.set("x-goog-user-project",n),i&&e.set("authorization",i),e}static log=(0,Wzt.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async e=>{if(!e.headers.has("x-goog-api-client")){let n=process.version.replace(/^v/,"");e.headers.set("x-goog-api-client",`gl-node/${n}`)}let r=e.headers.get("User-Agent");r?r.includes(`${tse.PRODUCT_NAME}/`)||e.headers.set("User-Agent",`${r} ${tse.USER_AGENT}`):e.headers.set("User-Agent",tse.USER_AGENT);try{let n=e,i=n[t.RequestMethodNameSymbol],s=`${Math.floor(Math.random()*1e3)}`;n[t.RequestLogIdSymbol]=s;let o={url:e.url,headers:e.headers};i?t.log.info("%s [%s] request %j",i,s,o):t.log.info("[%s] request %j",s,o)}catch{}return e}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],i=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] response %j",n,i,e.data):t.log.info("[%s] response %j",i,e.data)}catch{}return e},rejected:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],i=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] error %j",n,i,e.response?.data):t.log.error("[%s] error %j",i,e.response?.data)}catch{}throw e}};static setMethodName(e,r){try{let n=e;n[t.RequestMethodNameSymbol]=r}catch{}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};Yl.AuthClient=rse});var ise=b(GP=>{"use strict";Object.defineProperty(GP,"__esModule",{value:!0});GP.LoginTicket=void 0;var nse=class{envelope;payload;constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};GP.LoginTicket=nse});var Lg=b(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.OAuth2Client=ep.ClientAuthentication=ep.CertificateFormat=ep.CodeChallengeMethod=void 0;var t$e=Zs(),Jzt=require("querystring"),Yzt=require("stream"),Qzt=tte(),r$e=Jl(),sse=_A(),K6=Eu(),Xzt=ise(),n$e;(function(t){t.Plain="plain",t.S256="S256"})(n$e||(ep.CodeChallengeMethod=n$e={}));var Kf;(function(t){t.PEM="PEM",t.JWK="JWK"})(Kf||(ep.CertificateFormat=Kf={}));var EA;(function(t){t.ClientSecretPost="ClientSecretPost",t.ClientSecretBasic="ClientSecretBasic",t.None="None"})(EA||(ep.ClientAuthentication=EA={}));var ose=class t extends K6.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=Kf.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(e={},r,n){super(typeof e=="object"?e:{}),typeof e!="object"&&(e={clientId:e,clientSecret:r,redirectUri:n}),this._clientId=e.clientId||e.client_id,this._clientSecret=e.clientSecret||e.client_secret,this.redirectUri=e.redirectUri||e.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...e.endpoints},this.clientAuthentication=e.clientAuthentication||EA.ClientSecretPost,this.issuers=e.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+Jzt.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let e=(0,sse.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),s=(await e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:s}}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}async getTokenAsync(e){let r=this.endpoints.oauth2TokenUrl.toString(),n=new Headers,i={client_id:e.client_id||this._clientId,code_verifier:e.codeVerifier,code:e.code,grant_type:"authorization_code",redirect_uri:e.redirect_uri||this.redirectUri};if(this.clientAuthentication===EA.ClientSecretBasic){let u=Buffer.from(`${this._clientId}:${this._clientSecret}`);n.set("authorization",`Basic ${u.toString("base64")}`)}this.clientAuthentication===EA.ClientSecretPost&&(i.client_secret=this._clientSecret);let s={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,r$e.removeUndefinedValuesInObject)(i)),headers:n};K6.AuthClient.setMethodName(s,"getTokenAsync");let o=await this.transporter.request(s),a=o.data;return o.data&&o.data.expires_in&&(a.expiry_date=new Date().getTime()+o.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:o}}async refreshToken(e){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r}async refreshTokenNoCache(e){if(!e)throw new Error("No refresh token is set.");let r=this.endpoints.oauth2TokenUrl.toString(),n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i;try{let o={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,r$e.removeUndefinedValuesInObject)(n))};K6.AuthClient.setMethodName(o,"refreshTokenNoCache"),i=await this.transporter.request(o)}catch(o){throw o instanceof t$e.GaxiosError&&o.message==="invalid_grant"&&o.response?.data&&/ReAuth/i.test(o.response.data.error_description)&&(o.message=JSON.stringify(o.response.data)),o}let s=i.data;return i.data&&i.data.expires_in&&(s.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete s.expires_in),this.emit("tokens",s),{tokens:s,res:i}}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){let e=await this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=await this.processAndValidateRefreshHandler();if(n?.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=await this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(e){return(await this.getRequestMetadataAsync(e)).headers}async getRequestMetadataAsync(e){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let a=new Headers({authorization:r.token_type+" "+r.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let u=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let n=null,i=null;try{n=await this.refreshToken(r.refresh_token),i=n.tokens}catch(a){let u=a;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let s=this.credentials;s.token_type=s.token_type||"Bearer",i.refresh_token=s.refresh_token,this.credentials=i;let o=new Headers({authorization:s.token_type+" "+i.access_token});return{headers:this.addSharedMetadataHeaders(o),res:n.res}}static getRevokeTokenUrl(e){return new t().getRevokeTokenURL(e).toString()}getRevokeTokenURL(e){let r=new URL(this.endpoints.oauth2RevokeUrl);return r.searchParams.append("token",e),r}revokeToken(e,r){let n={...t.RETRY_CONFIG,url:this.getRevokeTokenURL(e).toString(),method:"POST"};if(K6.AuthClient.setMethodName(n,"revokeToken"),r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){try{let n=await this.getRequestMetadataAsync();return e.headers=t$e.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,n.headers),this.apiKey&&e.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(e)}catch(n){let i=n.response;if(i){let s=i.status,o=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),a=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,u=i.config.data instanceof Yzt.Readable,c=s===401||s===403;if(!r&&c&&!u&&o)return await this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&c&&!u&&a){let l=await this.processAndValidateRefreshHandler();return l?.access_token&&this.setCredentials(l),this.requestAsync(e,!0)}}throw n}}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}async verifyIdTokenAsync(e){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,this.issuers,e.maxExpiry)}async getTokenInfo(e){let{data:r}=await this.transporter.request({...t.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${e}`},url:this.endpoints.tokenInfoUrl.toString()}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){let e=new Date().getTime(),r=(0,sse.hasBrowserCrypto)()?Kf.JWK:Kf.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case Kf.PEM:i=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case Kf.JWK:i=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw new Error(`Unsupported certificate format ${r}`)}try{let c={...t.RETRY_CONFIG,url:i};K6.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),n=await this.transporter.request(c)}catch(c){throw c instanceof Error&&(c.message=`Failed to retrieve verification certificates: ${c.message}`),c}let s=n?.headers.get("cache-control"),o=-1;if(s){let c=/max-age=(?<maxAge>[0-9]+)/.exec(s)?.groups?.maxAge;c&&(o=Number(c)*1e3)}let a={};switch(r){case Kf.PEM:a=n.data;break;case Kf.JWK:for(let c of n.data.keys)a[c.kid]=c;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=o===-1?null:new Date(u.getTime()+o),this.certificateCache=a,this.certificateCacheFormat=r,{certs:a,format:r,res:n}}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let e,r=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let n={...t.RETRY_CONFIG,url:r};K6.AuthClient.setMethodName(n,"getIapPublicKeysAsync"),e=await this.transporter.request(n)}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(e,r,n,i,s){let o=(0,sse.createCrypto)();s||(s=t.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let a=e.split(".");if(a.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=a[0]+"."+a[1],c=a[2],l,d;try{l=JSON.parse(o.decodeBase64StringUtf8(a[0]))}catch(T){throw T instanceof Error&&(T.message=`Can't parse token envelope: ${a[0]}': ${T.message}`),T}if(!l)throw new Error("Can't parse token envelope: "+a[0]);try{d=JSON.parse(o.decodeBase64StringUtf8(a[1]))}catch(T){throw T instanceof Error&&(T.message=`Can't parse token payload '${a[0]}`),T}if(!d)throw new Error("Can't parse token payload: "+a[1]);if(!Object.prototype.hasOwnProperty.call(r,l.kid))throw new Error("No pem found for envelope: "+JSON.stringify(l));let p=r[l.kid];if(l.alg==="ES256"&&(c=Qzt.joseToDer(c,"ES256").toString("base64")),!await o.verify(p,u,c))throw new Error("Invalid token signature: "+e);if(!d.iat)throw new Error("No issue time in token: "+JSON.stringify(d));if(!d.exp)throw new Error("No expiration time in token: "+JSON.stringify(d));let h=Number(d.iat);if(isNaN(h))throw new Error("iat field using invalid format");let y=Number(d.exp);if(isNaN(y))throw new Error("exp field using invalid format");let E=new Date().getTime()/1e3;if(y>=E+s)throw new Error("Expiration time too far in future: "+JSON.stringify(d));let v=h-t.CLOCK_SKEW_SECS_,w=y+t.CLOCK_SKEW_SECS_;if(E<v)throw new Error("Token used too early, "+E+" < "+v+": "+JSON.stringify(d));if(E>w)throw new Error("Token used too late, "+E+" > "+w+": "+JSON.stringify(d));if(i&&i.indexOf(d.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+d.iss);if(typeof n<"u"&&n!==null){let T=d.aud,A=!1;if(n.constructor===Array?A=n.indexOf(T)>-1:A=T===n,!A)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new Xzt.LoginTicket(l,d)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let e=await this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};ep.OAuth2Client=ose});var use=b(HP=>{"use strict";Object.defineProperty(HP,"__esModule",{value:!0});HP.Compute=void 0;var Zzt=Zs(),i$e=bA(),eWt=Lg(),ase=class extends eWt.OAuth2Client{serviceAccountEmail;scopes;constructor(e={}){super(e),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=Array.isArray(e.scopes)?e.scopes:e.scopes?[e.scopes]:[]}async refreshTokenNoCache(){let e=`service-accounts/${this.serviceAccountEmail}/token`,r;try{let i={property:e};this.scopes.length>0&&(i.params={scopes:this.scopes.join(",")}),r=await i$e.instance(i)}catch(i){throw i instanceof Zzt.GaxiosError&&(i.message=`Could not refresh access token: ${i.message}`,this.wrapError(i)),i}let n=r;return r&&r.expires_in&&(n.expiry_date=new Date().getTime()+r.expires_in*1e3,delete n.expires_in),this.emit("tokens",n),{tokens:n,res:null}}async fetchIdToken(e){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=await i$e.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n}wrapError(e){let r=e.response;r&&r.status&&(e.status=r.status,r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};HP.Compute=ase});var lse=b(zP=>{"use strict";Object.defineProperty(zP,"__esModule",{value:!0});zP.IdTokenClient=void 0;var tWt=Lg(),cse=class extends tWt.OAuth2Client{targetAudience;idTokenProvider;constructor(e){super(e),this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let r=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:r,expiry_date:this.getIdTokenExpiryDate(r)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};zP.IdTokenClient=cse});var dse=b(V6=>{"use strict";Object.defineProperty(V6,"__esModule",{value:!0});V6.GCPEnv=void 0;V6.clear=rWt;V6.getEnv=nWt;var s$e=bA(),tp;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",t.NONE="NONE"})(tp||(V6.GCPEnv=tp={}));var vA;function rWt(){vA=void 0}async function nWt(){return vA||(vA=iWt(),vA)}async function iWt(){let t=tp.NONE;return sWt()?t=tp.APP_ENGINE:oWt()?t=tp.CLOUD_FUNCTIONS:await lWt()?await cWt()?t=tp.KUBERNETES_ENGINE:aWt()?t=tp.CLOUD_RUN:uWt()?t=tp.CLOUD_RUN_JOBS:t=tp.COMPUTE_ENGINE:t=tp.NONE,t}function sWt(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function oWt(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function aWt(){return!!process.env.K_CONFIGURATION}function uWt(){return!!process.env.CLOUD_RUN_JOB}async function cWt(){try{return await s$e.instance("attributes/cluster-name"),!0}catch{return!1}}async function lWt(){return s$e.isAvailable()}});var E$e=b(JP=>{"use strict";Object.defineProperty(JP,"__esModule",{value:!0});JP.GoogleToken=void 0;var o$e=WP(require("fs")),dWt=Zs(),pWt=WP(KE()),fWt=WP(require("path")),hWt=require("util");function WP(t,e){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(WP=function(s,o){if(!o&&s&&s.__esModule)return s;var a,u,c={__proto__:null,default:s};if(s===null||Vf(s)!="object"&&typeof s!="function")return c;if(a=o?n:r){if(a.has(s))return a.get(s);a.set(s,c)}for(var l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((u=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(u.get||u.set)?a(c,l,u):c[l]=s[l]);return c})(t,e)}function Vf(t){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(t)}function mWt(t,e){m$e(t,e),e.add(t)}function yWt(t,e,r){m$e(t,e),e.set(t,r)}function m$e(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a$e(t,e,r){return t.set(Ql(t,e),r),r}function u$e(t,e){return t.get(Ql(t,e))}function Ql(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function c$e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b$e(n.key),n)}}function y$e(t,e,r){return e&&c$e(t.prototype,e),r&&c$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gWt(t,e,r){return e=CA(e),bWt(t,gse()?Reflect.construct(e,r||[],CA(t).constructor):e.apply(t,r))}function bWt(t,e){if(e&&(Vf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Wt(t)}function _Wt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EWt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e)}function pse(t){var e=typeof Map=="function"?new Map:void 0;return pse=function(n){if(n===null||!SWt(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return vWt(n,arguments,CA(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),AA(i,n)},pse(t)}function vWt(t,e,r){if(gse())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&AA(i,r.prototype),i}function gse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gse=function(){return!!t})()}function SWt(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function AA(t,e){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},AA(t,e)}function CA(t){return CA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CA(t)}function vu(t,e,r){return(e=b$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b$e(t){var e=wWt(t,"string");return Vf(e)=="symbol"?e:e+""}function wWt(t,e){if(Vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wu(){var t,e,r=typeof Symbol=="function"?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(f,h,y,E){var v=h&&h.prototype instanceof a?h:a,w=Object.create(v.prototype);return Su(w,"_invoke",(function(T,A,C){var x,R,M,I=0,F=C||[],B=!1,K={p:0,n:0,v:t,a:k,f:k.bind(t,4),d:function(ne,$){return x=ne,R=0,M=t,K.n=$,o}};function k(G,ne){for(R=G,M=ne,e=0;!B&&I&&!$&&e<F.length;e++){var $,V=F[e],me=K.p,Oe=V[2];G>3?($=Oe===ne)&&(M=V[(R=V[4])?5:(R=3,3)],V[4]=V[5]=t):V[0]<=me&&(($=G<2&&me<V[1])?(R=0,K.v=ne,K.n=V[1]):me<Oe&&($=G<3||V[0]>ne||ne>Oe)&&(V[4]=G,V[5]=ne,K.n=Oe,R=0))}if($||G>1)return o;throw B=!0,ne}return function(G,ne,$){if(I>1)throw TypeError("Generator is already running");for(B&&ne===1&&k(ne,$),R=ne,M=$;(e=R<2?t:M)||!B;){x||(R?R<3?(R>1&&(K.n=-1),k(R,M)):K.n=M:K.v=M);try{if(I=2,x){if(R||(G="next"),e=x[G]){if(!(e=e.call(x,M)))throw TypeError("iterator result is not an object");if(!e.done)return e;M=e.value,R<2&&(R=0)}else R===1&&(e=x.return)&&e.call(x),R<2&&(M=TypeError("The iterator does not provide a '"+G+"' method"),R=1);x=t}else if((e=(B=K.n<0)?M:T.call(A,K))!==o)break}catch(V){x=t,R=1,M=V}finally{I=1}}return{value:e,done:B}}})(f,y,E),!0),w}var o={};function a(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(Su(e={},n,function(){return this}),e),d=c.prototype=a.prototype=Object.create(l);function p(f){return Object.setPrototypeOf?Object.setPrototypeOf(f,c):(f.__proto__=c,Su(f,i,"GeneratorFunction")),f.prototype=Object.create(d),f}return u.prototype=c,Su(d,"constructor",c),Su(c,"constructor",u),u.displayName="GeneratorFunction",Su(c,i,"GeneratorFunction"),Su(d),Su(d,i,"Generator"),Su(d,n,function(){return this}),Su(d,"toString",function(){return"[object Generator]"}),(wu=function(){return{w:s,m:p}})()}function Su(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Su=function(o,a,u,c){if(a)i?i(o,a,{value:u,enumerable:!c,configurable:!c,writable:!c}):o[a]=u;else{var l=function(p,f){Su(o,p,function(h){return this._invoke(p,f,h)})};l("next",0),l("throw",1),l("return",2)}},Su(t,e,r,n)}function l$e(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void r(c)}a.done?e(u):Promise.resolve(u).then(n,i)}function G6(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){l$e(s,n,i,o,a,"next",u)}function a(u){l$e(s,n,i,o,a,"throw",u)}o(void 0)})}}var d$e=o$e.readFile?(0,hWt.promisify)(o$e.readFile):G6(wu().m(function t(){return wu().w(function(e){for(;;)switch(e.n){case 0:throw new wA("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return e.a(2)}},t)})),p$e="https://oauth2.googleapis.com/token",AWt="https://oauth2.googleapis.com/revoke?token=",wA=(function(t){function e(r,n){var i;return g$e(this,e),i=gWt(this,e,[r]),vu(i,"code",void 0),i.code=n,i}return EWt(e,t),y$e(e)})(pse(Error)),SA=new WeakMap,rp=new WeakSet,Oxr=JP.GoogleToken=(function(){function t(e){g$e(this,t),mWt(this,rp),vu(this,"expiresAt",void 0),vu(this,"key",void 0),vu(this,"keyFile",void 0),vu(this,"iss",void 0),vu(this,"sub",void 0),vu(this,"scope",void 0),vu(this,"rawToken",void 0),vu(this,"tokenExpires",void 0),vu(this,"email",void 0),vu(this,"additionalClaims",void 0),vu(this,"eagerRefreshThresholdMillis",void 0),vu(this,"transporter",{request:function(n){return(0,dWt.request)(n)}}),yWt(this,SA,void 0),Ql(rp,this,_$e).call(this,e)}return y$e(t,[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var r=new Date().getTime();return this.rawToken&&this.expiresAt?r>=this.expiresAt:!0}},{key:"isTokenExpiring",value:function(){var r,n=new Date().getTime(),i=(r=this.eagerRefreshThresholdMillis)!==null&&r!==void 0?r:0;return this.rawToken&&this.expiresAt?this.expiresAt<=n+i:!0}},{key:"getToken",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Vf(r)==="object"&&(n=r,r=void 0),n=Object.assign({forceRefresh:!1},n),r){var i=r;Ql(rp,this,f$e).call(this,n).then(function(s){return i(null,s)},r);return}return Ql(rp,this,f$e).call(this,n)}},{key:"getCredentials",value:(function(){var e=G6(wu().m(function n(i){var s,o,a,u,c,l,d;return wu().w(function(p){for(;;)switch(p.n){case 0:s=fWt.extname(i),d=s,p.n=d===".json"?1:d===".der"||d===".crt"||d===".pem"?4:d===".p12"||d===".pfx"?6:7;break;case 1:return p.n=2,d$e(i,"utf8");case 2:if(o=p.v,a=JSON.parse(o),u=a.private_key,c=a.client_email,!(!u||!c)){p.n=3;break}throw new wA("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return p.a(2,{privateKey:u,clientEmail:c});case 4:return p.n=5,d$e(i,"utf8");case 5:return l=p.v,p.a(2,{privateKey:l});case 6:throw new wA("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new wA("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return p.a(2)}},n)}));function r(n){return e.apply(this,arguments)}return r})()},{key:"revokeToken",value:function(r){if(r){Ql(rp,this,h$e).call(this).then(function(){return r()},r);return}return Ql(rp,this,h$e).call(this)}}])})();function f$e(t){return fse.apply(this,arguments)}function fse(){return fse=G6(wu().m(function t(e){return wu().w(function(r){for(;;)switch(r.n){case 0:if(!(u$e(SA,this)&&!e.forceRefresh)){r.n=1;break}return r.a(2,u$e(SA,this));case 1:return r.p=1,r.n=2,a$e(SA,this,Ql(rp,this,CWt).call(this,e));case 2:return r.a(2,r.v);case 3:return r.p=3,a$e(SA,this,void 0),r.f(3);case 4:return r.a(2)}},t,this,[[1,,3,4]])})),fse.apply(this,arguments)}function CWt(t){return hse.apply(this,arguments)}function hse(){return hse=G6(wu().m(function t(e){var r;return wu().w(function(n){for(;;)switch(n.n){case 0:if(!(this.isTokenExpiring()===!1&&e.forceRefresh===!1)){n.n=1;break}return n.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){n.n=2;break}throw new Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){n.n=4;break}return n.n=3,this.getCredentials(this.keyFile);case 3:r=n.v,this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||Ql(rp,this,TWt).call(this);case 4:return n.a(2,Ql(rp,this,OWt).call(this))}},t,this)})),hse.apply(this,arguments)}function TWt(){if(!this.iss)throw new wA("email is required.","MISSING_CREDENTIALS")}function h$e(){return mse.apply(this,arguments)}function mse(){return mse=G6(wu().m(function t(){var e;return wu().w(function(r){for(;;)switch(r.n){case 0:if(this.accessToken){r.n=1;break}throw new Error("No token to revoke.");case 1:return e=AWt+this.accessToken,r.n=2,this.transporter.request({url:e,retry:!0});case 2:Ql(rp,this,_$e).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return r.a(2)}},t,this)})),mse.apply(this,arguments)}function _$e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,Vf(t.scope)==="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis,t.transporter&&(this.transporter=t.transporter)}function OWt(){return yse.apply(this,arguments)}function yse(){return yse=G6(wu().m(function t(){var e,r,n,i,s,o,a,u,c,l;return wu().w(function(d){for(;;)switch(d.n){case 0:return e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:p$e,exp:e+3600,iat:e,sub:this.sub},r),i=pWt.sign({header:{alg:"RS256"},payload:n,secret:this.key}),d.p=1,d.n=2,this.transporter.request({method:"POST",url:p$e,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return s=d.v,this.rawToken=s.data,this.expiresAt=s.data.expires_in===null||s.data.expires_in===void 0?void 0:(e+s.data.expires_in)*1e3,d.a(2,this.rawToken);case 3:throw d.p=3,l=d.v,this.rawToken=void 0,this.tokenExpires=void 0,u=l.response&&(o=l.response)!==null&&o!==void 0&&o.data?(a=l.response)===null||a===void 0?void 0:a.data:{},u.error&&(c=u.error_description?": ".concat(u.error_description):"",l.message="".concat(u.error).concat(c)),l;case 4:return d.a(2)}},t,this,[[1,3]])})),yse.apply(this,arguments)}});var _se=b(YP=>{"use strict";Object.defineProperty(YP,"__esModule",{value:!0});YP.JWTAccess=void 0;var xWt=KE(),IWt=Jl(),v$e={alg:"RS256",typ:"JWT"},bse=class t{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new IWt.LRUCache({capacity:500,maxAge:3600*1e3});constructor(e,r,n,i){this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i??300*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),s=this.cache.get(i),o=Date.now();if(s&&s.expiration-o>this.eagerRefreshThresholdMillis)return new Headers(s.headers);let a=Math.floor(Date.now()/1e3),u=t.getExpirationTime(a),c;if(Array.isArray(n)&&(n=n.join(" ")),n?c={iss:this.email,sub:this.email,scope:n,exp:u,iat:a}:c={iss:this.email,sub:this.email,aud:e,exp:u,iat:a},r){for(let h in c)if(r[h])throw new Error(`The '${h}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let l=this.keyId?{...v$e,kid:this.keyId}:v$e,d=Object.assign(c,r),p=xWt.sign({header:l,payload:d,secret:this.key}),f=new Headers({authorization:`Bearer ${p}`});return this.cache.set(i,{expiration:u*1e3,headers:f}),f}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",s=>i+=s).on("error",n).on("end",()=>{try{let s=JSON.parse(i);this.fromJSON(s),r()}catch(s){n(s)}})})}};YP.JWTAccess=bse});var vse=b(XP=>{"use strict";Object.defineProperty(XP,"__esModule",{value:!0});XP.JWT=void 0;var S$e=E$e(),RWt=_se(),DWt=Lg(),QP=Eu(),Ese=class t extends DWt.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(e={}){super(e),this.email=e.email,this.keyFile=e.keyFile,this.key=e.key,this.keyId=e.keyId,this.scopes=e.scopes,this.subject=e.subject,this.additionalClaims=e.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){let r=new t(this);return r.scopes=e,r}async getRequestMetadataAsync(e){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let r=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==QP.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==QP.DEFAULT_UNIVERSE)throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${QP.DEFAULT_UNIVERSE}`);if(!this.apiKey&&r)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:n}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${n.id_token}`}))}}else{this.access||(this.access=new RWt.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let n;this.hasUserScopes()?n=this.scopes:e||(n=this.defaultScopes);let i=this.useJWTAccessWithScope||this.universeDomain!==QP.DEFAULT_UNIVERSE,s=await this.access.getRequestHeaders(e??void 0,this.additionalClaims,i?n:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(e):{headers:new Headers}}async fetchIdToken(e){let r=new S$e.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e},transporter:this.transporter});if(await r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}async authorizeAsync(){let e=await this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens}async refreshTokenNoCache(){let e=this.createGToken(),n={access_token:(await e.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:e.expiresAt,id_token:e.idToken};return this.emit("tokens",n),{res:null,tokens:n}}createGToken(){return this.gtoken||(this.gtoken=new S$e.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);this.fromJSON(s),r()}catch(s){n(s)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=await this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}};XP.JWT=Ese});var wse=b(H6=>{"use strict";Object.defineProperty(H6,"__esModule",{value:!0});H6.UserRefreshClient=H6.USER_REFRESH_ACCOUNT_TYPE=void 0;var kWt=Lg(),MWt=Eu();H6.USER_REFRESH_ACCOUNT_TYPE="authorized_user";var Sse=class t extends kWt.OAuth2Client{_refreshToken;constructor(e,r,n,i,s){let o=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:s};super(o),this._refreshToken=o.refreshToken,this.credentials.refresh_token=o.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(e){let r={...t.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:e})};return MWt.AuthClient.setMethodName(r,"fetchIdToken"),(await this.transporter.request(r)).data.id_token}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}async fromStreamAsync(e){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);return this.fromJSON(s),r()}catch(s){return n(s)}})})}static fromJSON(e){let r=new t;return r.fromJSON(e),r}};H6.UserRefreshClient=Sse});var Cse=b(z6=>{"use strict";Object.defineProperty(z6,"__esModule",{value:!0});z6.Impersonated=z6.IMPERSONATED_ACCOUNT_TYPE=void 0;var w$e=Lg(),PWt=Zs(),NWt=Jl();z6.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";var Ase=class t extends w$e.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(e={}){if(super(e),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=e.sourceClient??new w$e.OAuth2Client,this.targetPrincipal=e.targetPrincipal??"",this.delegates=e.delegates??[],this.targetScopes=e.targetScopes??[],this.lifetime=e.lifetime??3600,!!!(0,NWt.originalOrCamelOptions)(e).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=e.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(e){await this.sourceClient.getAccessToken();let r=`projects/-/serviceAccounts/${this.targetPrincipal}`,n=`${this.endpoint}/v1/${r}:signBlob`,i={delegates:this.delegates,payload:Buffer.from(e).toString("base64")};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:n,data:i,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let e="projects/-/serviceAccounts/"+this.targetPrincipal,r=`${this.endpoint}/v1/${e}:generateAccessToken`,n={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},i=await this.sourceClient.request({...t.RETRY_CONFIG,url:r,data:n,method:"POST"}),s=i.data;return this.credentials.access_token=s.accessToken,this.credentials.expiry_date=Date.parse(s.expireTime),{tokens:this.credentials,res:i}}catch(e){if(!(e instanceof Error))throw e;let r=0,n="";throw e instanceof PWt.GaxiosError&&(r=e?.response?.data?.error?.status,n=e?.response?.data?.error?.message),r&&n?(e.message=`${r}: unable to impersonate: ${n}`,e):(e.message=`unable to impersonate: ${e}`,e)}}async fetchIdToken(e,r){await this.sourceClient.getAccessToken();let n=`projects/-/serviceAccounts/${this.targetPrincipal}`,i=`${this.endpoint}/v1/${n}:generateIdToken`,s={delegates:this.delegates,audience:e,includeEmail:r?.includeEmail??!0,useEmailAzp:r?.includeEmail??!0};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:i,data:s,method:"POST"})).data.token}};z6.Impersonated=Ase});var Ose=b(TA=>{"use strict";Object.defineProperty(TA,"__esModule",{value:!0});TA.OAuthClientAuthHandler=void 0;TA.getErrorFromOAuthErrorResponse=qWt;var W6=Zs(),FWt=_A(),BWt=["PUT","POST","PATCH"],Tse=class{#e=(0,FWt.createCrypto)();#t;transporter;constructor(e){e&&"clientId"in e?(this.#t=e,this.transporter=new W6.Gaxios):(this.#t=e?.clientAuthentication,this.transporter=e?.transporter||new W6.Gaxios)}applyClientAuthenticationOptions(e,r){e.headers=W6.Gaxios.mergeHeaders(e.headers),this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){if(r)e.headers=W6.Gaxios.mergeHeaders(e.headers,{authorization:`Bearer ${r}`});else if(this.#t?.confidentialClientType==="basic"){e.headers=W6.Gaxios.mergeHeaders(e.headers);let n=this.#t.clientId,i=this.#t.clientSecret||"",s=this.#e.encodeBase64StringUtf8(`${n}:${i}`);W6.Gaxios.mergeHeaders(e.headers,{authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){if(this.#t?.confidentialClientType==="request-body"){let r=(e.method||"GET").toUpperCase();if(!BWt.includes(r))throw new Error(`${r} HTTP method does not support ${this.#t.confidentialClientType} client authentication`);let i=new Headers(e.headers).get("content-type");if(i?.startsWith("application/x-www-form-urlencoded")||e.data instanceof URLSearchParams){let s=new URLSearchParams(e.data??"");s.append("client_id",this.#t.clientId),s.append("client_secret",this.#t.clientSecret||""),e.data=s}else if(i?.startsWith("application/json"))e.data=e.data||{},Object.assign(e.data,{client_id:this.#t.clientId,client_secret:this.#t.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.#t.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};TA.OAuthClientAuthHandler=Tse;function qWt(t,e){let r=t.error,n=t.error_description,i=t.error_uri,s=`Error code ${r}`;typeof n<"u"&&(s+=`: ${n}`),typeof i<"u"&&(s+=` - ${i}`);let o=new Error(s);if(e){let a=Object.keys(e);e.stack&&a.push("stack"),a.forEach(u=>{u!=="message"&&Object.defineProperty(o,u,{value:e[u],writable:!1,enumerable:!0})})}return o}});var eN=b(ZP=>{"use strict";Object.defineProperty(ZP,"__esModule",{value:!0});ZP.StsCredentials=void 0;var LWt=Zs(),jWt=Eu(),A$e=Ose(),$Wt=Jl(),xse=class t extends A$e.OAuthClientAuthHandler{#e;constructor(e={tokenExchangeEndpoint:""},r){(typeof e!="object"||e instanceof URL)&&(e={tokenExchangeEndpoint:e,clientAuthentication:r}),super(e),this.#e=e.tokenExchangeEndpoint}async exchangeToken(e,r,n){let i={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:e.scope?.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:e.actingParty?.actorToken,actor_token_type:e.actingParty?.actorTokenType,options:n&&JSON.stringify(n)},s={...t.RETRY_CONFIG,url:this.#e.toString(),method:"POST",headers:r,data:new URLSearchParams((0,$Wt.removeUndefinedValuesInObject)(i))};jWt.AuthClient.setMethodName(s,"exchangeToken"),this.applyClientAuthenticationOptions(s);try{let o=await this.transporter.request(s),a=o.data;return a.res=o,a}catch(o){throw o instanceof LWt.GaxiosError&&o.response?(0,A$e.getErrorFromOAuthErrorResponse)(o.response.data,o):o}}};ZP.StsCredentials=xse});var _m=b(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.BaseExternalAccountClient=Pc.CLOUD_RESOURCE_MANAGER=Pc.EXTERNAL_ACCOUNT_TYPE=Pc.EXPIRATION_TIME_OFFSET=void 0;var UWt=Zs(),KWt=require("stream"),Ise=Eu(),VWt=eN(),C$e=Jl(),GWt=Zie(),HWt="urn:ietf:params:oauth:grant-type:token-exchange",zWt="urn:ietf:params:oauth:token-type:access_token",Rse="https://www.googleapis.com/auth/cloud-platform",WWt=3600;Pc.EXPIRATION_TIME_OFFSET=300*1e3;Pc.EXTERNAL_ACCOUNT_TYPE="external_account";Pc.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var JWt="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",YWt="https://sts.{universeDomain}/v1/token",Dse=class t extends Ise.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#e=null;constructor(e){super(e);let r=(0,C$e.originalOrCamelOptions)(e),n=r.get("type");if(n&&n!==Pc.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Pc.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);let i=r.get("client_id"),s=r.get("client_secret");this.tokenUrl=r.get("token_url")??YWt.replace("{universeDomain}",this.universeDomain);let o=r.get("subject_token_type"),a=r.get("workforce_pool_user_project"),u=r.get("service_account_impersonation_url"),c=r.get("service_account_impersonation"),l=(0,C$e.originalOrCamelOptions)(c).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(r.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),i&&(this.clientAuth={confidentialClientType:"basic",clientId:i,clientSecret:s}),this.stsCredential=new VWt.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=r.get("scopes")||[Rse],this.cachedAccessToken=null,this.audience=r.get("audience"),this.subjectTokenType=o,this.workforcePoolUserProject=a;let d=new RegExp(JWt);if(this.workforcePoolUserProject&&!this.audience.match(d))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=u,this.serviceAccountImpersonationLifetime=l,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=WWt),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);return/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl)?.groups?.email||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async getProjectId(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=await this.getRequestHeaders(),n={...t.RETRY_CONFIG,headers:r,url:`${this.cloudResourceManagerURL.toString()}${e}`};Ise.AuthClient.setMethodName(n,"getProjectId");let i=await this.transporter.request(n);return this.projectId=i.data.projectId,this.projectId}return null}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=UWt.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof KWt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){this.#e=this.#e||this.#t();try{return await this.#e}finally{this.#e=null}}async#t(){let e=await this.retrieveSubjectToken(),r={grantType:HWt,audience:this.audience,requestedTokenType:zWt,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[Rse]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),s=await this.stsCredential.exchangeToken(r,i,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(s.access_token):s.expires_in?this.cachedAccessToken={access_token:s.access_token,expiry_date:new Date().getTime()+s.expires_in*1e3,res:s.res}:this.cachedAccessToken={access_token:s.access_token,res:s.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}async getImpersonatedAccessToken(e){let r={...t.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${e}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};Ise.AuthClient.setMethodName(r,"getImpersonatedAccessToken");let n=await this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:this.scopes||[Rse]}getMetricsHeaderValue(){let e=process.version.replace(/^v/,""),r=this.serviceAccountImpersonationUrl!==void 0,n=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${e} auth/${GWt.pkg.version} google-byoid-sdk source/${n} sa-impersonation/${r} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}};Pc.BaseExternalAccountClient=Dse});var T$e=b(tN=>{"use strict";Object.defineProperty(tN,"__esModule",{value:!0});tN.FileSubjectTokenSupplier=void 0;var Mse=require("util"),Pse=require("fs"),QWt=(0,Mse.promisify)(Pse.readFile??(()=>{})),XWt=(0,Mse.promisify)(Pse.realpath??(()=>{})),ZWt=(0,Mse.promisify)(Pse.lstat??(()=>{})),kse=class{filePath;formatType;subjectTokenFieldName;constructor(e){this.filePath=e.filePath,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName}async getSubjectToken(){let e=this.filePath;try{if(e=await XWt(e),!(await ZWt(e)).isFile())throw new Error}catch(i){throw i instanceof Error&&(i.message=`The file at ${e} does not exist, or it is not a file. ${i.message}`),i}let r,n=await QWt(e,{encoding:"utf8"});if(this.formatType==="text"?r=n:this.formatType==="json"&&this.subjectTokenFieldName&&(r=JSON.parse(n)[this.subjectTokenFieldName]),!r)throw new Error("Unable to parse the subject_token from the credential_source file");return r}};tN.FileSubjectTokenSupplier=kse});var O$e=b(rN=>{"use strict";Object.defineProperty(rN,"__esModule",{value:!0});rN.UrlSubjectTokenSupplier=void 0;var eJt=Eu(),Nse=class{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(e){this.url=e.url,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName,this.headers=e.headers,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getSubjectToken(e){let r={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};eJt.AuthClient.setMethodName(r,"getSubjectToken");let n;if(this.formatType==="text"?n=(await e.transporter.request(r)).data:this.formatType==="json"&&this.subjectTokenFieldName&&(n=(await e.transporter.request(r)).data[this.subjectTokenFieldName]),!n)throw new Error("Unable to parse the subject_token from the credential_source URL");return n}};rN.UrlSubjectTokenSupplier=Nse});var x$e=b(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.CertificateSubjectTokenSupplier=Au.InvalidConfigurationError=Au.CertificateSourceUnavailableError=Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;var nN=Jl(),iN=require("fs"),sN=require("crypto"),tJt=require("https");Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";var np=class extends Error{constructor(e){super(e),this.name="CertificateSourceUnavailableError"}};Au.CertificateSourceUnavailableError=np;var Nc=class extends Error{constructor(e){super(e),this.name="InvalidConfigurationError"}};Au.InvalidConfigurationError=Nc;var Fse=class{certificateConfigPath;trustChainPath;cert;key;constructor(e){if(!e.useDefaultCertificateConfig&&!e.certificateConfigLocation)throw new Nc("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(e.useDefaultCertificateConfig&&e.certificateConfigLocation)throw new Nc("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=e.trustChainPath,this.certificateConfigPath=e.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new Nc("Cannot create mTLS Agent with missing certificate or key");return new tJt.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#e();let{certPath:e,keyPath:r}=await this.#t();return{cert:this.cert,key:this.key}=await this.#r(e,r),await this.#n(this.cert)}async#e(){let e=this.certificateConfigPath;if(e){if(await(0,nN.isValidFile)(e))return e;throw new np(`Provided certificate config path is invalid: ${e}`)}let r=process.env[Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(r){if(await(0,nN.isValidFile)(r))return r;throw new np(`Path from environment variable "${Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${r}`)}let n=(0,nN.getWellKnownCertificateConfigFileLocation)();if(await(0,nN.isValidFile)(n))return n;throw new np(`Could not find certificate configuration file. Searched override path, the "${Au.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${n}).`)}async#t(){let e=this.certificateConfigPath,r;try{r=await iN.promises.readFile(e,"utf8")}catch{throw new np(`Failed to read certificate config file at: ${e}`)}try{let n=JSON.parse(r),i=n?.cert_configs?.workload?.cert_path,s=n?.cert_configs?.workload?.key_path;if(!i||!s)throw new Nc(`Certificate config file (${e}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:i,keyPath:s}}catch(n){throw n instanceof Nc?n:new Nc(`Failed to parse certificate config from ${e}: ${n.message}`)}}async#r(e,r){let n,i;try{n=await iN.promises.readFile(e),new sN.X509Certificate(n)}catch(s){let o=s instanceof Error?s.message:String(s);throw new np(`Failed to read certificate file at ${e}: ${o}`)}try{i=await iN.promises.readFile(r),(0,sN.createPrivateKey)(i)}catch(s){let o=s instanceof Error?s.message:String(s);throw new np(`Failed to read private key file at ${r}: ${o}`)}return{cert:n,key:i}}async#n(e){let r=new sN.X509Certificate(e);if(!this.trustChainPath)return JSON.stringify([r.raw.toString("base64")]);try{let s=((await iN.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((u,c)=>{try{return new sN.X509Certificate(u)}catch(l){let d=l instanceof Error?l.message:String(l);throw new Nc(`Failed to parse certificate at index ${c} in trust chain file ${this.trustChainPath}: ${d}`)}}),o=s.findIndex(u=>r.raw.equals(u.raw)),a;if(o===-1)a=[r,...s];else if(o===0)a=s;else throw new Nc(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${o}).`);return JSON.stringify(a.map(u=>u.raw.toString("base64")))}catch(n){if(n instanceof Nc)throw n;let i=n instanceof Error?n.message:String(n);throw new np(`Failed to process certificate chain from ${this.trustChainPath}: ${i}`)}}};Au.CertificateSubjectTokenSupplier=Fse});var Lse=b(oN=>{"use strict";Object.defineProperty(oN,"__esModule",{value:!0});oN.IdentityPoolClient=void 0;var rJt=_m(),Bse=Jl(),nJt=T$e(),iJt=O$e(),I$e=x$e(),sJt=eN(),R$e=Zs(),qse=class t extends rJt.BaseExternalAccountClient{subjectTokenSupplier;constructor(e){super(e);let r=(0,Bse.originalOrCamelOptions)(e),n=r.get("credential_source"),i=r.get("subject_token_supplier");if(!n&&!i)throw new Error("A credential source or subject token supplier must be specified.");if(n&&i)throw new Error("Only one of credential source or subject token supplier can be specified.");if(i)this.subjectTokenSupplier=i,this.credentialSourceType="programmatic";else{let s=(0,Bse.originalOrCamelOptions)(n),o=(0,Bse.originalOrCamelOptions)(s.get("format")),a=o.get("type")||"text",u=o.get("subject_token_field_name");if(a!=="json"&&a!=="text")throw new Error(`Invalid credential_source format "${a}"`);if(a==="json"&&!u)throw new Error("Missing subject_token_field_name for JSON credential_source format");let c=s.get("file"),l=s.get("url"),d=s.get("certificate"),p=s.get("headers");if(c&&l||l&&d||c&&d)throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(c)this.credentialSourceType="file",this.subjectTokenSupplier=new nJt.FileSubjectTokenSupplier({filePath:c,formatType:a,subjectTokenFieldName:u});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new iJt.UrlSubjectTokenSupplier({url:l,formatType:a,subjectTokenFieldName:u,headers:p,additionalGaxiosOptions:t.RETRY_CONFIG});else if(d){this.credentialSourceType="certificate";let f=new I$e.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:d.use_default_certificate_config,certificateConfigLocation:d.certificate_config_location,trustChainPath:d.trust_chain_path});this.subjectTokenSupplier=f}else throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let e=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof I$e.CertificateSubjectTokenSupplier){let r=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new sJt.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new R$e.Gaxios({agent:r})}),this.transporter=new R$e.Gaxios({...this.transporter.defaults||{},agent:r})}return e}};oN.IdentityPoolClient=qse});var $se=b(uN=>{"use strict";Object.defineProperty(uN,"__esModule",{value:!0});uN.AwsRequestSigner=void 0;var aN=Zs(),k$e=_A(),D$e="AWS4-HMAC-SHA256",oJt="aws4_request",jse=class{getCredentials;region;crypto;constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,k$e.createCrypto)()}async getRequestOptions(e){if(!e.url)throw new RangeError('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",s=e.body||r,o=e.headers,a=await this.getCredentials(),u=new URL(n);if(typeof s!="string"&&s!==void 0)throw new TypeError(`'requestPayload' is expected to be a string if provided. Got: ${s}`);let c=await uJt({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.slice(1),method:i,region:this.region,securityCredentials:a,requestPayload:s,additionalAmzHeaders:o}),l=aN.Gaxios.mergeHeaders(c.amzDate?{"x-amz-date":c.amzDate}:{},{authorization:c.authorizationHeader,host:u.host},o||{});a.token&&aN.Gaxios.mergeHeaders(l,{"x-amz-security-token":a.token});let d={url:n,method:i,headers:l};return s!==void 0&&(d.body=s),d}};uN.AwsRequestSigner=jse;async function OA(t,e,r){return await t.signWithHmacSha256(e,r)}async function aJt(t,e,r,n,i){let s=await OA(t,`AWS4${e}`,r),o=await OA(t,s,n),a=await OA(t,o,i);return await OA(t,a,"aws4_request")}async function uJt(t){let e=aN.Gaxios.mergeHeaders(t.additionalAmzHeaders),r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,s=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),o=i.toISOString().replace(/[-]/g,"").replace(/T.*/,"");t.securityCredentials.token&&e.set("x-amz-security-token",t.securityCredentials.token);let a=aN.Gaxios.mergeHeaders({host:t.host},e.has("date")?{}:{"x-amz-date":s},e),u="",c=[...a.keys()].sort();c.forEach(w=>{u+=`${w}:${a.get(w)}
`});let l=c.join(";"),d=await t.crypto.sha256DigestHex(r),p=`${t.method.toUpperCase()}
${t.canonicalUri}
${t.canonicalQuerystring}
${u}
${l}
${d}`,f=`${o}/${t.region}/${n}/${oJt}`,h=`${D$e}
${s}
${f}
`+await t.crypto.sha256DigestHex(p),y=await aJt(t.crypto,t.securityCredentials.secretAccessKey,o,t.region,n),E=await OA(t.crypto,y,h),v=`${D$e} Credential=${t.securityCredentials.accessKeyId}/${f}, SignedHeaders=${l}, Signature=${(0,k$e.fromArrayBufferToHex)(E)}`;return{amzDate:e.has("date")?void 0:s,authorizationHeader:v,canonicalQuerystring:t.canonicalQuerystring}}});var M$e=b(lN=>{"use strict";Object.defineProperty(lN,"__esModule",{value:!0});lN.DefaultAwsSecurityCredentialsSupplier=void 0;var cN=Eu(),Use=class{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(e){this.regionUrl=e.regionUrl,this.securityCredentialsUrl=e.securityCredentialsUrl,this.imdsV2SessionTokenUrl=e.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getAwsRegion(e){if(this.#n)return this.#n;let r=new Headers;if(!this.#n&&this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter)),!this.regionUrl)throw new RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let n={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:r};cN.AuthClient.setMethodName(n,"getAwsRegion");let i=await e.transporter.request(n);return i.data.substr(0,i.data.length-1)}async getAwsSecurityCredentials(e){if(this.#i)return this.#i;let r=new Headers;this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter));let n=await this.#t(r,e.transporter),i=await this.#r(n,r,e.transporter);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,token:i.Token}}async#e(e){let r={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return cN.AuthClient.setMethodName(r,"#getImdsV2SessionToken"),(await e.request(r)).data}async#t(e,r){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let n={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:e};return cN.AuthClient.setMethodName(n,"#getAwsRoleName"),(await r.request(n)).data}async#r(e,r,n){let i={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${e}`,headers:r};return cN.AuthClient.setMethodName(i,"#retrieveAwsSecurityCredentials"),(await n.request(i)).data}get#n(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get#i(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}};lN.DefaultAwsSecurityCredentialsSupplier=Use});var Vse=b(dN=>{"use strict";Object.defineProperty(dN,"__esModule",{value:!0});dN.AwsClient=void 0;var cJt=$se(),lJt=_m(),dJt=M$e(),P$e=Jl(),pJt=Zs(),Kse=class t extends lJt.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static#e="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(e){super(e);let r=(0,P$e.originalOrCamelOptions)(e),n=r.get("credential_source"),i=r.get("aws_security_credentials_supplier");if(!n&&!i)throw new Error("A credential source or AWS security credentials supplier must be specified.");if(n&&i)throw new Error("Only one of credential source or AWS security credentials supplier can be specified.");if(i)this.awsSecurityCredentialsSupplier=i,this.regionalCredVerificationUrl=t.#e,this.credentialSourceType="programmatic";else{let s=(0,P$e.originalOrCamelOptions)(n);this.environmentId=s.get("environment_id");let o=s.get("region_url"),a=s.get("url"),u=s.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new dJt.DefaultAwsSecurityCredentialsSupplier({regionUrl:o,securityCredentialsUrl:a,imdsV2SessionTokenUrl:u}),this.regionalCredVerificationUrl=s.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let e=this.environmentId?.match(/^(aws)(\d+)$/);if(!e||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(e[2],10)!==1)throw new Error(`aws version "${e[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new cJt.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let e=await this.awsRequestSigner.getRequestOptions({...t.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[];return pJt.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},e.headers).forEach((i,s)=>r.push({key:s,value:i})),encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))}};dN.AwsClient=Kse});var Jse=b($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.InvalidSubjectTokenError=$i.InvalidMessageFieldError=$i.InvalidCodeFieldError=$i.InvalidTokenTypeFieldError=$i.InvalidExpirationTimeFieldError=$i.InvalidSuccessFieldError=$i.InvalidVersionFieldError=$i.ExecutableResponseError=$i.ExecutableResponse=void 0;var pN="urn:ietf:params:oauth:token-type:saml2",Gse="urn:ietf:params:oauth:token-type:id_token",Hse="urn:ietf:params:oauth:token-type:jwt",zse=class{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(e){if(!e.version)throw new fN("Executable response must contain a 'version' field.");if(e.success===void 0)throw new hN("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==pN&&this.tokenType!==Gse&&this.tokenType!==Hse)throw new mN(`Executable response must contain a 'token_type' field when successful and it must be one of ${Gse}, ${Hse}, or ${pN}.`);if(this.tokenType===pN){if(!e.saml_response)throw new xA(`Executable response must contain a 'saml_response' field when token_type=${pN}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new xA(`Executable response must contain a 'id_token' field when token_type=${Gse} or ${Hse}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new yN("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new gN("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}};$i.ExecutableResponse=zse;var ip=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};$i.ExecutableResponseError=ip;var fN=class extends ip{};$i.InvalidVersionFieldError=fN;var hN=class extends ip{};$i.InvalidSuccessFieldError=hN;var Wse=class extends ip{};$i.InvalidExpirationTimeFieldError=Wse;var mN=class extends ip{};$i.InvalidTokenTypeFieldError=mN;var yN=class extends ip{};$i.InvalidCodeFieldError=yN;var gN=class extends ip{};$i.InvalidMessageFieldError=gN;var xA=class extends ip{};$i.InvalidSubjectTokenError=xA});var Xse=b(J6=>{"use strict";Object.defineProperty(J6,"__esModule",{value:!0});J6.PluggableAuthHandler=J6.ExecutableError=void 0;var jg=Jse(),fJt=require("child_process"),Yse=require("fs"),bN=class extends Error{code;constructor(e,r){super(`The executable failed with exit code: ${r} and error message: ${e}.`),this.code=r,Object.setPrototypeOf(this,new.target.prototype)}};J6.ExecutableError=bN;var Qse=class t{commandComponents;timeoutMillis;outputFile;constructor(e){if(!e.command)throw new Error("No command provided.");if(this.commandComponents=t.parseCommand(e.command),this.timeoutMillis=e.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=e.outputFile}retrieveResponseFromExecutable(e){return new Promise((r,n)=>{let i=fJt.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(e)}}),s="";i.stdout.on("data",a=>{s+=a}),i.stderr.on("data",a=>{s+=a});let o=setTimeout(()=>(i.removeAllListeners(),i.kill(),n(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);i.on("close",a=>{if(clearTimeout(o),a===0)try{let u=JSON.parse(s),c=new jg.ExecutableResponse(u);return r(c)}catch(u){return u instanceof jg.ExecutableResponseError?n(u):n(new jg.ExecutableResponseError(`The executable returned an invalid response: ${s}`))}else return n(new bN(s,a.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let e;try{e=await Yse.promises.realpath(this.outputFile)}catch{return}if(!(await Yse.promises.lstat(e)).isFile())return;let r=await Yse.promises.readFile(e,{encoding:"utf8"});if(r!=="")try{let n=JSON.parse(r);return new jg.ExecutableResponse(n).isValid()?new jg.ExecutableResponse(n):void 0}catch(n){throw n instanceof jg.ExecutableResponseError?n:new jg.ExecutableResponseError(`The output file contained an invalid response: ${r}`)}}static parseCommand(e){let r=e.match(/(?:[^\s"]+|"[^"]*")+/g);if(!r)throw new Error(`Provided command: "${e}" could not be parsed.`);for(let n=0;n<r.length;n++)r[n][0]==='"'&&r[n].slice(-1)==='"'&&(r[n]=r[n].slice(1,-1));return r}};J6.PluggableAuthHandler=Qse});var eoe=b(Y6=>{"use strict";Object.defineProperty(Y6,"__esModule",{value:!0});Y6.PluggableAuthClient=Y6.ExecutableError=void 0;var hJt=_m(),mJt=Jse(),N$e=Xse(),yJt=Xse();Object.defineProperty(Y6,"ExecutableError",{enumerable:!0,get:function(){return yJt.ExecutableError}});var gJt=30*1e3,F$e=5*1e3,B$e=120*1e3,bJt="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",q$e=1,Zse=class extends hJt.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(e){if(super(e),!e.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=e.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(e.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=gJt;else if(this.timeoutMillis=e.credential_source.executable.timeout_millis,this.timeoutMillis<F$e||this.timeoutMillis>B$e)throw new Error(`Timeout must be between ${F$e} and ${B$e} milliseconds.`);this.outputFile=e.credential_source.executable.output_file,this.handler=new N$e.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(process.env[bJt]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let e;if(this.outputFile&&(e=await this.handler.retrieveCachedResponse()),!e){let r=new Map;r.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),r.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),r.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&r.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let n=this.getServiceAccountEmail();n&&r.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",n),e=await this.handler.retrieveResponseFromExecutable(r)}if(e.version>q$e)throw new Error(`Version of executable is not currently supported, maximum supported version is ${q$e}.`);if(!e.success)throw new N$e.ExecutableError(e.errorMessage,e.errorCode);if(this.outputFile&&!e.expirationTime)throw new mJt.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(e.isExpired())throw new Error("Executable response is expired.");return e.subjectToken}};Y6.PluggableAuthClient=Zse});var roe=b(_N=>{"use strict";Object.defineProperty(_N,"__esModule",{value:!0});_N.ExternalAccountClient=void 0;var _Jt=_m(),EJt=Lse(),vJt=Vse(),SJt=eoe(),toe=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e){return e&&e.type===_Jt.EXTERNAL_ACCOUNT_TYPE?e.credential_source?.environment_id?new vJt.AwsClient(e):e.credential_source?.executable?new SJt.PluggableAuthClient(e):new EJt.IdentityPoolClient(e):null}};_N.ExternalAccountClient=toe});var soe=b(Q6=>{"use strict";Object.defineProperty(Q6,"__esModule",{value:!0});Q6.ExternalAccountAuthorizedUserClient=Q6.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;var j$e=Eu(),L$e=Ose(),$$e=Zs(),wJt=require("stream"),AJt=_m();Q6.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";var CJt="https://sts.{universeDomain}/v1/oauthtoken",noe=class t extends L$e.OAuthClientAuthHandler{#e;constructor(e){super(e),this.#e=e.tokenRefreshEndpoint}async refreshToken(e,r){let n={...t.RETRY_CONFIG,url:this.#e,method:"POST",headers:r,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})};j$e.AuthClient.setMethodName(n,"refreshToken"),this.applyClientAuthenticationOptions(n);try{let i=await this.transporter.request(n),s=i.data;return s.res=i,s}catch(i){throw i instanceof $$e.GaxiosError&&i.response?(0,L$e.getErrorFromOAuthErrorResponse)(i.response.data,i):i}}},ioe=class extends j$e.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(e){super(e),e.universe_domain&&(this.universeDomain=e.universe_domain),this.refreshToken=e.refresh_token;let r={confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret};this.externalAccountAuthorizedUserHandler=new noe({tokenRefreshEndpoint:e.token_url??CJt.replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:r}),this.cachedAccessToken=null,this.quotaProjectId=e.quota_project_id,typeof e?.eagerRefreshThresholdMillis!="number"?this.eagerRefreshThresholdMillis=AJt.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!e?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=$$e.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof wJt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){let e=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+e.expires_in*1e3,res:e.res},e.refresh_token!==void 0&&(this.refreshToken=e.refresh_token),this.cachedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};Q6.ExternalAccountAuthorizedUserClient=ioe});var G$e=b(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.GoogleAuth=Xl.GoogleAuthExceptionMessages=void 0;var TJt=require("child_process"),IA=require("fs"),OJt=Zs(),RA=bA(),xJt=require("os"),ooe=require("path"),IJt=_A(),RJt=use(),DJt=lse(),kJt=dse(),X6=vse(),U$e=wse(),Z6=Cse(),MJt=roe(),DA=_m(),aoe=Eu(),K$e=soe(),V$e=Jl();Xl.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};var uoe=class{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#e=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(e={}){if(this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.clientOptions=e.clientOptions||{},this.jsonContent=e.credentials||null,this.apiKey=e.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw new RangeError(Xl.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);e.universeDomain&&(this.clientOptions.universeDomain=e.universeDomain)}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===Xl.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||=await this.getProductionProjectId(),e||=await this.getFileProjectId(),e||=await this.getDefaultServiceProjectId(),e||=await this.getGCEProjectId(),e||=await this.getExternalAccountClientProjectId(),e)return this._cachedProjectId=e,e;throw new Error(Xl.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let e;try{e=await RA.universe("universe-domain"),e||=aoe.DEFAULT_UNIVERSE}catch(r){if(r&&r?.response?.status===404)e=aoe.DEFAULT_UNIVERSE;else throw r}return e}async getUniverseDomain(){let e=(0,V$e.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{e??=(await this.getClient()).universeDomain}catch{e??=aoe.DEFAULT_UNIVERSE}return e}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}async getApplicationDefaultAsync(e={}){if(this.cachedCredential)return await this.#t(this.cachedCredential,null);let r;if(r=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof X6.JWT?r.scopes=this.scopes:r instanceof DA.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(r=await this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof X6.JWT?r.scopes=this.scopes:r instanceof DA.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(await this._checkIsGCE())return e.scopes=this.getAnyScopes(),await this.#t(new RJt.Compute(e));throw new Error(Xl.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async#t(e,r=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let n=await this.getProjectIdOptional();return r&&(e.quotaProjectId=r),this.cachedCredential=e,{credential:e,projectId:n}}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=RA.getGCPResidency()||await RA.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=ooe.join(i,".config"))}return r&&(r=ooe.join(r,"gcloud","application_default_credentials.json"),IA.existsSync(r)||(r=null)),r?await this._getApplicationCredentialsFromFilePath(r,e):null}async _getApplicationCredentialsFromFilePath(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=IA.realpathSync(e),!IA.lstatSync(e).isFile())throw new Error}catch(i){throw i instanceof Error&&(i.message=`The file at ${e} does not exist, or it is not a file. ${i.message}`),i}let n=IA.createReadStream(e);return this.fromStream(n,r)}fromImpersonatedJSON(e){if(!e)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==Z6.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${Z6.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");let r=this.fromJSON(e.source_credentials);if(e.service_account_impersonation_url?.length>256)throw new RangeError(`Target principal is too long: ${e.service_account_impersonation_url}`);let n=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(e.service_account_impersonation_url)?.groups?.target;if(!n)throw new RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);let i=(this.scopes||e.scopes||this.defaultScopes)??[];return new Z6.Impersonated({...e,sourceClient:r,targetPrincipal:n,targetScopes:Array.isArray(i)?i:[i]})}fromJSON(e,r={}){let n,i=(0,V$e.originalOrCamelOptions)(r).get("universe_domain");return e.type===U$e.USER_REFRESH_ACCOUNT_TYPE?(n=new U$e.UserRefreshClient(r),n.fromJSON(e)):e.type===Z6.IMPERSONATED_ACCOUNT_TYPE?n=this.fromImpersonatedJSON(e):e.type===DA.EXTERNAL_ACCOUNT_TYPE?(n=MJt.ExternalAccountClient.fromJSON({...e,...r}),n.scopes=this.getAnyScopes()):e.type===K$e.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?n=new K$e.ExternalAccountAuthorizedUserClient({...e,...r}):(r.scopes=this.scopes,n=new X6.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),i&&(n.universeDomain=i),n}_cacheClientFromJSON(e,r){let n=this.fromJSON(e,r);return this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(s=>n(null,s),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let s=[];e.setEncoding("utf8").on("error",i).on("data",o=>s.push(o)).on("end",()=>{try{try{let o=JSON.parse(s.join("")),a=this._cacheClientFromJSON(o,r);return n(a)}catch(o){if(!this.keyFilename)throw o;let a=new X6.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),n(a)}}catch(o){return i(o)}})})}fromAPIKey(e,r={}){return new X6.JWT({...r,apiKey:e})}_isWindows(){let e=xJt.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(e=>{(0,TJt.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch{}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=await this.getClient();if(r&&r.projectId)return r.projectId}let e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==DA.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await RA.project("project-id")}catch{return null}}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}async getCredentialsAsync(){let e=await this.getClient();if(e instanceof Z6.Impersonated)return{client_email:e.getTargetPrincipal()};if(e instanceof DA.BaseExternalAccountClient){let r=e.getServiceAccountEmail();if(r)return{client_email:r,universe_domain:e.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[r,n]=await Promise.all([RA.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:r,universe_domain:n}}throw new Error(Xl.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#e=this.#e||this.#r();try{return await this.#e}finally{this.#e=null}}async#r(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let e=ooe.resolve(this.keyFilename),r=IA.createReadStream(e);return await this.fromStreamAsync(r,this.clientOptions)}else if(this.apiKey){let e=await this.fromAPIKey(this.apiKey,this.clientOptions);e.scopes=this.scopes;let{credential:r}=await this.#t(e);return r}else{let{credential:e}=await this.getApplicationDefaultAsync(this.clientOptions);return e}}async getIdTokenClient(e){let r=await this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new DJt.IdTokenClient({targetAudience:e,idTokenProvider:r})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e={}){let r=e.url,i=await(await this.getClient()).getRequestHeaders(r);return e.headers=OJt.Gaxios.mergeHeaders(e.headers,i),e}async fetch(...e){return(await this.getClient()).fetch(...e)}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,kJt.getEnv)()}async sign(e,r){let n=await this.getClient(),i=await this.getUniverseDomain();if(r=r||`https://iamcredentials.${i}/v1/projects/-/serviceAccounts/`,n instanceof Z6.Impersonated)return(await n.sign(e)).signedBlob;let s=(0,IJt.createCrypto)();if(n instanceof X6.JWT&&n.key)return await s.sign(n.key,e);let o=await this.getCredentials();if(!o.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(s,o.client_email,e,r)}async signBlob(e,r,n,i){let s=new URL(i+`${r}:signBlob`);return(await this.request({method:"POST",url:s.href,data:{payload:e.encodeBase64StringUtf8(n)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}};Xl.GoogleAuth=uoe});var H$e=b(EN=>{"use strict";Object.defineProperty(EN,"__esModule",{value:!0});EN.IAMAuth=void 0;var coe=class{selector;token;constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};EN.IAMAuth=coe});var z$e=b(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.DownscopedClient=sp.EXPIRATION_TIME_OFFSET=sp.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var PJt=Zs(),NJt=require("stream"),loe=Eu(),FJt=eN(),BJt="urn:ietf:params:oauth:grant-type:token-exchange",qJt="urn:ietf:params:oauth:token-type:access_token",LJt="urn:ietf:params:oauth:token-type:access_token";sp.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;sp.EXPIRATION_TIME_OFFSET=300*1e3;var doe=class extends loe.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(e,r={accessBoundary:{accessBoundaryRules:[]}}){if(super(e instanceof loe.AuthClient?{}:e),e instanceof loe.AuthClient?(this.authClient=e,this.credentialAccessBoundary=r):(this.authClient=e.authClient,this.credentialAccessBoundary=e.credentialAccessBoundary),this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>sp.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${sp.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let n of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(n.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new FJt.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=PJt.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof NJt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){let e=(await this.authClient.getAccessToken()).token,r={grantType:BJt,requestedTokenType:qJt,subjectToken:e,subjectTokenType:LJt},n=await this.stsCredential.exchangeToken(r,void 0,this.credentialAccessBoundary),i=this.authClient.credentials?.expiry_date||null,s=n.expires_in?new Date().getTime()+n.expires_in*1e3:i;return this.cachedDownscopedAccessToken={access_token:n.access_token,expiry_date:s,res:n.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};sp.DownscopedClient=doe});var W$e=b(vN=>{"use strict";Object.defineProperty(vN,"__esModule",{value:!0});vN.PassThroughClient=void 0;var jJt=Eu(),poe=class extends jJt.AuthClient{async request(e){return this.transporter.request(e)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}};vN.PassThroughClient=poe});var Z$e=b(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.GoogleAuth=it.auth=it.PassThroughClient=it.ExternalAccountAuthorizedUserClient=it.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=it.ExecutableError=it.PluggableAuthClient=it.DownscopedClient=it.BaseExternalAccountClient=it.ExternalAccountClient=it.IdentityPoolClient=it.AwsRequestSigner=it.AwsClient=it.UserRefreshClient=it.LoginTicket=it.ClientAuthentication=it.OAuth2Client=it.CodeChallengeMethod=it.Impersonated=it.JWT=it.JWTAccess=it.IdTokenClient=it.IAMAuth=it.GCPEnv=it.Compute=it.DEFAULT_UNIVERSE=it.AuthClient=it.gaxios=it.gcpMetadata=void 0;var J$e=G$e();Object.defineProperty(it,"GoogleAuth",{enumerable:!0,get:function(){return J$e.GoogleAuth}});it.gcpMetadata=bA();it.gaxios=Zs();var Y$e=Eu();Object.defineProperty(it,"AuthClient",{enumerable:!0,get:function(){return Y$e.AuthClient}});Object.defineProperty(it,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return Y$e.DEFAULT_UNIVERSE}});var $Jt=use();Object.defineProperty(it,"Compute",{enumerable:!0,get:function(){return $Jt.Compute}});var UJt=dse();Object.defineProperty(it,"GCPEnv",{enumerable:!0,get:function(){return UJt.GCPEnv}});var KJt=H$e();Object.defineProperty(it,"IAMAuth",{enumerable:!0,get:function(){return KJt.IAMAuth}});var VJt=lse();Object.defineProperty(it,"IdTokenClient",{enumerable:!0,get:function(){return VJt.IdTokenClient}});var GJt=_se();Object.defineProperty(it,"JWTAccess",{enumerable:!0,get:function(){return GJt.JWTAccess}});var HJt=vse();Object.defineProperty(it,"JWT",{enumerable:!0,get:function(){return HJt.JWT}});var zJt=Cse();Object.defineProperty(it,"Impersonated",{enumerable:!0,get:function(){return zJt.Impersonated}});var foe=Lg();Object.defineProperty(it,"CodeChallengeMethod",{enumerable:!0,get:function(){return foe.CodeChallengeMethod}});Object.defineProperty(it,"OAuth2Client",{enumerable:!0,get:function(){return foe.OAuth2Client}});Object.defineProperty(it,"ClientAuthentication",{enumerable:!0,get:function(){return foe.ClientAuthentication}});var WJt=ise();Object.defineProperty(it,"LoginTicket",{enumerable:!0,get:function(){return WJt.LoginTicket}});var JJt=wse();Object.defineProperty(it,"UserRefreshClient",{enumerable:!0,get:function(){return JJt.UserRefreshClient}});var YJt=Vse();Object.defineProperty(it,"AwsClient",{enumerable:!0,get:function(){return YJt.AwsClient}});var QJt=$se();Object.defineProperty(it,"AwsRequestSigner",{enumerable:!0,get:function(){return QJt.AwsRequestSigner}});var XJt=Lse();Object.defineProperty(it,"IdentityPoolClient",{enumerable:!0,get:function(){return XJt.IdentityPoolClient}});var ZJt=roe();Object.defineProperty(it,"ExternalAccountClient",{enumerable:!0,get:function(){return ZJt.ExternalAccountClient}});var eYt=_m();Object.defineProperty(it,"BaseExternalAccountClient",{enumerable:!0,get:function(){return eYt.BaseExternalAccountClient}});var tYt=z$e();Object.defineProperty(it,"DownscopedClient",{enumerable:!0,get:function(){return tYt.DownscopedClient}});var Q$e=eoe();Object.defineProperty(it,"PluggableAuthClient",{enumerable:!0,get:function(){return Q$e.PluggableAuthClient}});Object.defineProperty(it,"ExecutableError",{enumerable:!0,get:function(){return Q$e.ExecutableError}});var X$e=soe();Object.defineProperty(it,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return X$e.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}});Object.defineProperty(it,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return X$e.ExternalAccountAuthorizedUserClient}});var rYt=W$e();Object.defineProperty(it,"PassThroughClient",{enumerable:!0,get:function(){return rYt.PassThroughClient}});var nYt=new J$e.GoogleAuth;it.auth=nYt});var Gf=b((Zxr,rUe)=>{"use strict";var eUe=["nodebuffer","arraybuffer","fragments"],tUe=typeof Blob<"u";tUe&&eUe.push("blob");rUe.exports={BINARY_TYPES:eUe,CLOSE_TIMEOUT:3e4,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:tUe,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var kA=b((eIr,SN)=>{"use strict";var{EMPTY_BUFFER:iYt}=Gf(),hoe=Buffer[Symbol.species];function sYt(t,e){if(t.length===0)return iYt;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return n<e?new hoe(r.buffer,r.byteOffset,n):r}function nUe(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[s]^e[s&3]}function iUe(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function oYt(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function moe(t){if(moe.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new hoe(t):ArrayBuffer.isView(t)?e=new hoe(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),moe.readOnly=!1),e}SN.exports={concat:sYt,mask:nUe,toArrayBuffer:oYt,toBuffer:moe,unmask:iUe};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");SN.exports.mask=function(e,r,n,i,s){s<48?nUe(e,r,n,i,s):t.mask(e,r,n,i,s)},SN.exports.unmask=function(e,r){e.length<32?iUe(e,r):t.unmask(e,r)}}catch{}});var aUe=b((tIr,oUe)=>{"use strict";var sUe=Symbol("kDone"),yoe=Symbol("kRun"),goe=class{constructor(e){this[sUe]=()=>{this.pending--,this[yoe]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[yoe]()}[yoe](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[sUe])}}};oUe.exports=goe});var PA=b((rIr,dUe)=>{"use strict";var MA=require("zlib"),uUe=kA(),aYt=aUe(),{kStatusCode:cUe}=Gf(),uYt=Buffer[Symbol.species],cYt=Buffer.from([0,0,255,255]),AN=Symbol("permessage-deflate"),Hf=Symbol("total-length"),e4=Symbol("callback"),Em=Symbol("buffers"),t4=Symbol("error"),wN,boe=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!wN){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;wN=new aYt(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[e4];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){wN.add(i=>{this._decompress(e,r,(s,o)=>{i(),n(s,o)})})}compress(e,r,n){wN.add(i=>{this._compress(e,r,(s,o)=>{i(),n(s,o)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?MA.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=MA.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[AN]=this,this._inflate[Hf]=0,this._inflate[Em]=[],this._inflate.on("error",dYt),this._inflate.on("data",lUe)}this._inflate[e4]=n,this._inflate.write(e),r&&this._inflate.write(cYt),this._inflate.flush(()=>{let s=this._inflate[t4];if(s){this._inflate.close(),this._inflate=null,n(s);return}let o=uUe.concat(this._inflate[Em],this._inflate[Hf]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Hf]=0,this._inflate[Em]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?MA.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=MA.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Hf]=0,this._deflate[Em]=[],this._deflate.on("data",lYt)}this._deflate[e4]=n,this._deflate.write(e),this._deflate.flush(MA.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=uUe.concat(this._deflate[Em],this._deflate[Hf]);r&&(s=new uYt(s.buffer,s.byteOffset,s.length-4)),this._deflate[e4]=null,this._deflate[Hf]=0,this._deflate[Em]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};dUe.exports=boe;function lYt(t){this[Em].push(t),this[Hf]+=t.length}function lUe(t){if(this[Hf]+=t.length,this[AN]._maxPayload<1||this[Hf]<=this[AN]._maxPayload){this[Em].push(t);return}this[t4]=new RangeError("Max payload size exceeded"),this[t4].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[t4][cUe]=1009,this.removeListener("data",lUe),this.reset()}function dYt(t){if(this[AN]._inflate=null,this[t4]){this[e4](this[t4]);return}t[cUe]=1007,this[e4](t)}});var r4=b((nIr,CN)=>{"use strict";var{isUtf8:pUe}=require("buffer"),{hasBlob:pYt}=Gf(),fYt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function hYt(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function _oe(t){let e=t.length,r=0;for(;r<e;)if((t[r]&128)===0)r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function mYt(t){return pYt&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}CN.exports={isBlob:mYt,isValidStatusCode:hYt,isValidUTF8:_oe,tokenChars:fYt};if(pUe)CN.exports.isValidUTF8=function(t){return t.length<24?_oe(t):pUe(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");CN.exports.isValidUTF8=function(e){return e.length<32?_oe(e):t(e)}}catch{}});var Aoe=b((iIr,_Ue)=>{"use strict";var{Writable:yYt}=require("stream"),fUe=PA(),{BINARY_TYPES:gYt,EMPTY_BUFFER:hUe,kStatusCode:bYt,kWebSocket:_Yt}=Gf(),{concat:Eoe,toArrayBuffer:EYt,unmask:vYt}=kA(),{isValidStatusCode:SYt,isValidUTF8:mUe}=r4(),TN=Buffer[Symbol.species],Fc=0,yUe=1,gUe=2,bUe=3,voe=4,Soe=5,ON=6,woe=class extends yYt{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||gYt[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[_Yt]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Fc}_write(e,r,n){if(this._opcode===8&&this._state==Fc)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new TN(n.buffer,n.byteOffset+e,n.length-e),new TN(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new TN(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case Fc:this.getInfo(e);break;case yUe:this.getPayloadLength16(e);break;case gUe:this.getPayloadLength64(e);break;case bUe:this.getMask();break;case voe:this.getData(e);break;case Soe:case ON:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(r[0]&64)===64;if(n&&!this._extensions[fUe.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=yUe:this._payloadLength===127?this._state=gUe:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=bUe:this._state=voe}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=voe}getData(e){let r=hUe;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&vYt(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=Soe,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[fUe.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(s)}this.dataMessage(r),this._state===Fc&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=Fc;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Eoe(n,r):this._binaryType==="arraybuffer"?i=EYt(Eoe(n,r)):this._binaryType==="blob"?i=new Blob(n):i=n,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=Fc):(this._state=ON,setImmediate(()=>{this.emit("message",i,!0),this._state=Fc,this.startLoop(e)}))}else{let i=Eoe(n,r);if(!this._skipUTF8Validation&&!mUe(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===Soe||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=Fc):(this._state=ON,setImmediate(()=>{this.emit("message",i,!1),this._state=Fc,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,hUe),this.end();else{let n=e.readUInt16BE(0);if(!SYt(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(s);return}let i=new TN(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!mUe(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(s);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=Fc;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=Fc):(this._state=ON,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=Fc,this.startLoop(r)}))}createError(e,r,n,i,s){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=s,o[bYt]=i,o}};_Ue.exports=woe});var Ooe=b((oIr,SUe)=>{"use strict";var{Duplex:sIr}=require("stream"),{randomFillSync:wYt}=require("crypto"),EUe=PA(),{EMPTY_BUFFER:AYt,kWebSocket:CYt,NOOP:TYt}=Gf(),{isBlob:n4,isValidStatusCode:OYt}=r4(),{mask:vUe,toBuffer:$g}=kA(),Bc=Symbol("kByteLength"),xYt=Buffer.alloc(4),xN=8*1024,Ug,i4=xN,Zl=0,IYt=1,RYt=2,Coe=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=Zl,this.onerror=TYt,this[CYt]=void 0}static frame(e,r){let n,i=!1,s=2,o=!1;r.mask&&(n=r.maskBuffer||xYt,r.generateMask?r.generateMask(n):(i4===xN&&(Ug===void 0&&(Ug=Buffer.alloc(xN)),wYt(Ug,0,xN),i4=0),n[0]=Ug[i4++],n[1]=Ug[i4++],n[2]=Ug[i4++],n[3]=Ug[i4++]),o=(n[0]|n[1]|n[2]|n[3])===0,s=6);let a;typeof e=="string"?(!r.mask||o)&&r[Bc]!==void 0?a=r[Bc]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!o);let u=a;a>=65536?(s+=8,u=127):a>125&&(s+=2,u=126);let c=Buffer.allocUnsafe(i?a+s:s);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[s-4]=n[0],c[s-3]=n[1],c[s-2]=n[2],c[s-1]=n[3],o?[c,e]:i?(vUe(e,n,c,s,a),[c]):(vUe(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,i){let s;if(e===void 0)s=AYt;else{if(typeof e!="number"||!OYt(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[Bc]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==Zl?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(t.frame(s,o),i)}ping(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):n4(e)?(i=e.size,s=!1):(e=$g(e),i=e.length,s=$g.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Bc]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};n4(e)?this._state!==Zl?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Zl?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):n4(e)?(i=e.size,s=!1):(e=$g(e),i=e.length,s=$g.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Bc]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};n4(e)?this._state!==Zl?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Zl?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let i=this._extensions[EUe.extensionName],s=r.binary?2:1,o=r.compress,a,u;typeof e=="string"?(a=Buffer.byteLength(e),u=!1):n4(e)?(a=e.size,u=!1):(e=$g(e),a=e.length,u=$g.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=i._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0);let c={[Bc]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:o};n4(e)?this._state!==Zl?this.enqueue([this.getBlobData,e,this._compress,c,n]):this.getBlobData(e,this._compress,c,n):this._state!==Zl?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}getBlobData(e,r,n,i){this._bufferedBytes+=n[Bc],this._state=RYt,e.arrayBuffer().then(s=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(Toe,this,a,i);return}this._bufferedBytes-=n[Bc];let o=$g(s);r?this.dispatch(o,r,n,i):(this._state=Zl,this.sendFrame(t.frame(o,n),i),this.dequeue())}).catch(s=>{process.nextTick(DYt,this,s,i)})}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let s=this._extensions[EUe.extensionName];this._bufferedBytes+=n[Bc],this._state=IYt,s.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");Toe(this,u,i);return}this._bufferedBytes-=n[Bc],this._state=Zl,n.readOnly=!1,this.sendFrame(t.frame(a,n),i),this.dequeue()})}dequeue(){for(;this._state===Zl&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Bc],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Bc],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};SUe.exports=Coe;function Toe(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let i=t._queue[n],s=i[i.length-1];typeof s=="function"&&s(e)}}function DYt(t,e,r){Toe(t,e,r),t.onerror(e)}});var DUe=b((aIr,RUe)=>{"use strict";var{kForOnEventAttribute:NA,kListener:xoe}=Gf(),wUe=Symbol("kCode"),AUe=Symbol("kData"),CUe=Symbol("kError"),TUe=Symbol("kMessage"),OUe=Symbol("kReason"),s4=Symbol("kTarget"),xUe=Symbol("kType"),IUe=Symbol("kWasClean"),zf=class{constructor(e){this[s4]=null,this[xUe]=e}get target(){return this[s4]}get type(){return this[xUe]}};Object.defineProperty(zf.prototype,"target",{enumerable:!0});Object.defineProperty(zf.prototype,"type",{enumerable:!0});var Kg=class extends zf{constructor(e,r={}){super(e),this[wUe]=r.code===void 0?0:r.code,this[OUe]=r.reason===void 0?"":r.reason,this[IUe]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[wUe]}get reason(){return this[OUe]}get wasClean(){return this[IUe]}};Object.defineProperty(Kg.prototype,"code",{enumerable:!0});Object.defineProperty(Kg.prototype,"reason",{enumerable:!0});Object.defineProperty(Kg.prototype,"wasClean",{enumerable:!0});var o4=class extends zf{constructor(e,r={}){super(e),this[CUe]=r.error===void 0?null:r.error,this[TUe]=r.message===void 0?"":r.message}get error(){return this[CUe]}get message(){return this[TUe]}};Object.defineProperty(o4.prototype,"error",{enumerable:!0});Object.defineProperty(o4.prototype,"message",{enumerable:!0});var FA=class extends zf{constructor(e,r={}){super(e),this[AUe]=r.data===void 0?null:r.data}get data(){return this[AUe]}};Object.defineProperty(FA.prototype,"data",{enumerable:!0});var kYt={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[NA]&&i[xoe]===e&&!i[NA])return;let n;if(t==="message")n=function(s,o){let a=new FA("message",{data:o?s:s.toString()});a[s4]=this,IN(e,this,a)};else if(t==="close")n=function(s,o){let a=new Kg("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[s4]=this,IN(e,this,a)};else if(t==="error")n=function(s){let o=new o4("error",{error:s,message:s.message});o[s4]=this,IN(e,this,o)};else if(t==="open")n=function(){let s=new zf("open");s[s4]=this,IN(e,this,s)};else return;n[NA]=!!r[NA],n[xoe]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[xoe]===e&&!r[NA]){this.removeListener(t,r);break}}};RUe.exports={CloseEvent:Kg,ErrorEvent:o4,Event:zf,EventTarget:kYt,MessageEvent:FA};function IN(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Ioe=b((uIr,kUe)=>{"use strict";var{tokenChars:BA}=r4();function op(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function MYt(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,s=!1,o,a,u=-1,c=-1,l=-1,d=0;for(;d<t.length;d++)if(c=t.charCodeAt(d),o===void 0)if(l===-1&&BA[c]===1)u===-1&&(u=d);else if(d!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=t.slice(u,l);c===44?(op(e,f,r),r=Object.create(null)):o=f,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(l===-1&&BA[c]===1)u===-1&&(u=d);else if(c===32||c===9)l===-1&&u!==-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d),op(r,t.slice(u,l),!0),c===44&&(op(e,o,r),r=Object.create(null),o=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,d),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(i){if(BA[c]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1?u=d:n||(n=!0),i=!1}else if(s)if(BA[c]===1)u===-1&&(u=d);else if(c===34&&u!==-1)s=!1,l=d;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===34&&t.charCodeAt(d-1)===61)s=!0;else if(l===-1&&BA[c]===1)u===-1&&(u=d);else if(u!==-1&&(c===32||c===9))l===-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=t.slice(u,l);n&&(f=f.replace(/\\/g,""),n=!1),op(r,a,f),c===44&&(op(e,o,r),r=Object.create(null),o=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(u===-1||s||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=d);let p=t.slice(u,l);return o===void 0?op(e,p,r):(a===void 0?op(r,p,!0):n?op(r,a,p.replace(/\\/g,"")):op(r,a,p),op(e,o,r)),e}function PYt(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}kUe.exports={format:PYt,parse:MYt}});var MN=b((dIr,VUe)=>{"use strict";var NYt=require("events"),FYt=require("https"),BYt=require("http"),NUe=require("net"),qYt=require("tls"),{randomBytes:LYt,createHash:jYt}=require("crypto"),{Duplex:cIr,Readable:lIr}=require("stream"),{URL:Roe}=require("url"),vm=PA(),$Yt=Aoe(),UYt=Ooe(),{isBlob:KYt}=r4(),{BINARY_TYPES:MUe,CLOSE_TIMEOUT:VYt,EMPTY_BUFFER:RN,GUID:GYt,kForOnEventAttribute:Doe,kListener:HYt,kStatusCode:zYt,kWebSocket:xs,NOOP:FUe}=Gf(),{EventTarget:{addEventListener:WYt,removeEventListener:JYt}}=DUe(),{format:YYt,parse:QYt}=Ioe(),{toBuffer:XYt}=kA(),BUe=Symbol("kAborted"),koe=[8,13],Wf=["CONNECTING","OPEN","CLOSING","CLOSED"],ZYt=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,qn=class t extends NYt{constructor(e,r,n){super(),this._binaryType=MUe[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=RN,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),qUe(this,e,r,n)):(this._autoPong=n.autoPong,this._closeTimeout=n.closeTimeout,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){MUe.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new $Yt({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),s=new UYt(e,this._extensions,n.generateMask);this._receiver=i,this._sender=s,this._socket=e,i[xs]=this,s[xs]=this,e[xs]=this,i.on("conclude",rQt),i.on("drain",nQt),i.on("error",iQt),i.on("message",sQt),i.on("ping",oQt),i.on("pong",aQt),s.onerror=uQt,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",$Ue),e.on("data",kN),e.on("end",UUe),e.on("error",KUe),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[vm.extensionName]&&this._extensions[vm.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Cu(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),jUe(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Moe(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||RN,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Moe(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||RN,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Moe(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[vm.extensionName]||(i.compress=!1),this._sender.send(e||RN,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Cu(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(qn,"CONNECTING",{enumerable:!0,value:Wf.indexOf("CONNECTING")});Object.defineProperty(qn.prototype,"CONNECTING",{enumerable:!0,value:Wf.indexOf("CONNECTING")});Object.defineProperty(qn,"OPEN",{enumerable:!0,value:Wf.indexOf("OPEN")});Object.defineProperty(qn.prototype,"OPEN",{enumerable:!0,value:Wf.indexOf("OPEN")});Object.defineProperty(qn,"CLOSING",{enumerable:!0,value:Wf.indexOf("CLOSING")});Object.defineProperty(qn.prototype,"CLOSING",{enumerable:!0,value:Wf.indexOf("CLOSING")});Object.defineProperty(qn,"CLOSED",{enumerable:!0,value:Wf.indexOf("CLOSED")});Object.defineProperty(qn.prototype,"CLOSED",{enumerable:!0,value:Wf.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(qn.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(qn.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[Doe])return e[HYt];return null},set(e){for(let r of this.listeners(t))if(r[Doe]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[Doe]:!0})}})});qn.prototype.addEventListener=WYt;qn.prototype.removeEventListener=JYt;VUe.exports=qn;function qUe(t,e,r,n){let i={allowSynchronousEvents:!0,autoPong:!0,closeTimeout:VYt,protocolVersion:koe[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=i.autoPong,t._closeTimeout=i.closeTimeout,!koe.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${koe.join(", ")})`);let s;if(e instanceof Roe)s=e;else try{s=new Roe(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",u;if(s.protocol!=="ws:"&&!o&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!s.pathname?u="The URL's pathname is empty":s.hash&&(u="The URL contains a fragment identifier"),u){let y=new SyntaxError(u);if(t._redirects===0)throw y;DN(t,y);return}let c=o?443:80,l=LYt(16).toString("base64"),d=o?FYt.request:BYt.request,p=new Set,f;if(i.createConnection=i.createConnection||(o?tQt:eQt),i.defaultPort=i.defaultPort||c,i.port=s.port||c,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(f=new vm(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=YYt({[vm.extensionName]:f.offer()})),r.length){for(let y of r){if(typeof y!="string"||!ZYt.test(y)||p.has(y))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(y)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){let y=i.path.split(":");i.socketPath=y[0],i.path=y[1]}let h;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?i.socketPath:s.host;let y=n&&n.headers;if(n={...n,headers:{}},y)for(let[E,v]of Object.entries(y))n.headers[E.toLowerCase()]=v}else if(t.listenerCount("redirect")===0){let y=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!y||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,y||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),h=t._req=d(i),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=d(i);i.timeout&&h.on("timeout",()=>{Cu(t,h,"Opening handshake has timed out")}),h.on("error",y=>{h===null||h[BUe]||(h=t._req=null,DN(t,y))}),h.on("response",y=>{let E=y.headers.location,v=y.statusCode;if(E&&i.followRedirects&&v>=300&&v<400){if(++t._redirects>i.maxRedirects){Cu(t,h,"Maximum redirects exceeded");return}h.abort();let w;try{w=new Roe(E,e)}catch{let A=new SyntaxError(`Invalid URL: ${E}`);DN(t,A);return}qUe(t,w,r,n)}else t.emit("unexpected-response",h,y)||Cu(t,h,`Unexpected server response: ${y.statusCode}`)}),h.on("upgrade",(y,E,v)=>{if(t.emit("upgrade",y),t.readyState!==qn.CONNECTING)return;h=t._req=null;let w=y.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){Cu(t,E,"Invalid Upgrade header");return}let T=jYt("sha1").update(l+GYt).digest("base64");if(y.headers["sec-websocket-accept"]!==T){Cu(t,E,"Invalid Sec-WebSocket-Accept header");return}let A=y.headers["sec-websocket-protocol"],C;if(A!==void 0?p.size?p.has(A)||(C="Server sent an invalid subprotocol"):C="Server sent a subprotocol but none was requested":p.size&&(C="Server sent no subprotocol"),C){Cu(t,E,C);return}A&&(t._protocol=A);let x=y.headers["sec-websocket-extensions"];if(x!==void 0){if(!f){Cu(t,E,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let R;try{R=QYt(x)}catch{Cu(t,E,"Invalid Sec-WebSocket-Extensions header");return}let M=Object.keys(R);if(M.length!==1||M[0]!==vm.extensionName){Cu(t,E,"Server indicated an extension that was not requested");return}try{f.accept(R[vm.extensionName])}catch{Cu(t,E,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[vm.extensionName]=f}t.setSocket(E,v,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(h,t):h.end()}function DN(t,e){t._readyState=qn.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function eQt(t){return t.path=t.socketPath,NUe.connect(t)}function tQt(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=NUe.isIP(t.host)?"":t.host),qYt.connect(t)}function Cu(t,e,r){t._readyState=qn.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Cu),e.setHeader?(e[BUe]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(DN,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function Moe(t,e,r){if(e){let n=KYt(e)?e.size:XYt(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${Wf[t.readyState]})`);process.nextTick(r,n)}}function rQt(t,e){let r=this[xs];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[xs]!==void 0&&(r._socket.removeListener("data",kN),process.nextTick(LUe,r._socket),t===1005?r.close():r.close(t,e))}function nQt(){let t=this[xs];t.isPaused||t._socket.resume()}function iQt(t){let e=this[xs];e._socket[xs]!==void 0&&(e._socket.removeListener("data",kN),process.nextTick(LUe,e._socket),e.close(t[zYt])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function PUe(){this[xs].emitClose()}function sQt(t,e){this[xs].emit("message",t,e)}function oQt(t){let e=this[xs];e._autoPong&&e.pong(t,!this._isServer,FUe),e.emit("ping",t)}function aQt(t){this[xs].emit("pong",t)}function LUe(t){t.resume()}function uQt(t){let e=this[xs];e.readyState!==qn.CLOSED&&(e.readyState===qn.OPEN&&(e._readyState=qn.CLOSING,jUe(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function jUe(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),t._closeTimeout)}function $Ue(){let t=this[xs];if(this.removeListener("close",$Ue),this.removeListener("data",kN),this.removeListener("end",UUe),t._readyState=qn.CLOSING,!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&this._readableState.length!==0){let e=this.read(this._readableState.length);t._receiver.write(e)}t._receiver.end(),this[xs]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",PUe),t._receiver.on("finish",PUe))}function kN(t){this[xs]._receiver.write(t)||this.pause()}function UUe(){let t=this[xs];t._readyState=qn.CLOSING,t._receiver.end(),this.end()}function KUe(){let t=this[xs];this.removeListener("error",KUe),this.on("error",FUe),t&&(t._readyState=qn.CLOSING,this.destroy())}});var WUe=b((fIr,zUe)=>{"use strict";var pIr=MN(),{Duplex:cQt}=require("stream");function GUe(t){t.emit("close")}function lQt(){!this.destroyed&&this._writableState.finished&&this.destroy()}function HUe(t){this.removeListener("error",HUe),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function dQt(t,e){let r=!0,n=new cQt({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&n._readableState.objectMode?s.toString():s;n.push(a)||t.pause()}),t.once("error",function(s){n.destroyed||(r=!1,n.destroy(s))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(GUe,n);return}let o=!1;t.once("error",function(u){o=!0,s(u)}),t.once("close",function(){o||s(i),process.nextTick(GUe,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,s,o)});return}t.send(i,o)},n.on("end",lQt),n.on("error",HUe),n}zUe.exports=dQt});var YUe=b((hIr,JUe)=>{"use strict";var{tokenChars:pQt}=r4();function fQt(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(n===-1&&pQt[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}JUe.exports={parse:fQt}});var nKe=b((yIr,rKe)=>{"use strict";var hQt=require("events"),PN=require("http"),{Duplex:mIr}=require("stream"),{createHash:mQt}=require("crypto"),QUe=Ioe(),Vg=PA(),yQt=YUe(),gQt=MN(),{CLOSE_TIMEOUT:bQt,GUID:_Qt,kWebSocket:EQt}=Gf(),vQt=/^[+/0-9A-Za-z]{22}==$/,XUe=0,ZUe=1,tKe=2,Poe=class extends hQt{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,closeTimeout:bQt,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:gQt,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=PN.createServer((n,i)=>{let s=PN.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=SQt(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=XUe}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===tKe){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(qA,this);return}if(e&&this.once("close",e),this._state!==ZUe)if(this._state=ZUe,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(qA,this):process.nextTick(qA,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{qA(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",eKe);let s=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Gg(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){Gg(this,e,r,400,"Invalid Upgrade header");return}if(s===void 0||!vQt.test(s)){Gg(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==13&&a!==8){Gg(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(e)){LA(r,400);return}let u=e.headers["sec-websocket-protocol"],c=new Set;if(u!==void 0)try{c=yQt.parse(u)}catch{Gg(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&l!==void 0){let p=new Vg(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=QUe.parse(l);f[Vg.extensionName]&&(p.accept(f[Vg.extensionName]),d[Vg.extensionName]=p)}catch{Gg(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,h,y,E)=>{if(!f)return LA(r,h||401,y,E);this.completeUpgrade(d,s,c,e,r,n,i)});return}if(!this.options.verifyClient(p))return LA(r,401)}this.completeUpgrade(d,s,c,e,r,n,i)}completeUpgrade(e,r,n,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[EQt])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>XUe)return LA(s,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${mQt("sha1").update(r+_Qt).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;d&&(c.push(`Sec-WebSocket-Protocol: ${d}`),l._protocol=d)}if(e[Vg.extensionName]){let d=e[Vg.extensionName].params,p=QUe.format({[Vg.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${p}`),l._extensions=e}this.emit("headers",c,i),s.write(c.concat(`\r
`).join(`\r
`)),s.removeListener("error",eKe),l.setSocket(s,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(qA,this)})),a(l,i)}};rKe.exports=Poe;function SQt(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function qA(t){t._state=tKe,t.emit("close")}function eKe(){this.destroy()}function LA(t,e,r,n){r=r||PN.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${PN.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function Gg(t,e,r,n,i,s){if(t.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,Gg),t.emit("wsClientError",o,r,e)}else LA(r,n,i,s)}});var wQt,AQt,CQt,Noe,TQt,iKe=ce(()=>{wQt=St(WUe(),1),AQt=St(Aoe(),1),CQt=St(Ooe(),1),Noe=St(MN(),1),TQt=St(nKe(),1)});function RQt(){return{geminiUrl:xQt,vertexUrl:IQt}}function DQt(t,e,r,n){var i,s;if(!t?.baseUrl){let o=RQt();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:r:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}function Ge(t,e){let r=/\{([^}]+)\}/g;return t.replace(r,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function g(t,e,r){for(let s=0;s<e.length-1;s++){let o=e[s];if(o.endsWith("[]")){let a=o.slice(0,-2);if(!(a in t))if(Array.isArray(r))t[a]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){let u=t[a];if(Array.isArray(r))for(let c=0;c<u.length;c++){let l=u[c];g(l,e.slice(s+1),r[c])}else for(let c of u)g(c,e.slice(s+1),r)}return}else if(o.endsWith("[0]")){let a=o.slice(0,-3);a in t||(t[a]=[{}]);let u=t[a];g(u[0],e.slice(s+1),r);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}let n=e[e.length-1],i=t[n];if(i!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===i)return;if(typeof i=="object"&&typeof r=="object"&&i!==null&&r!==null)Object.assign(i,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[n]=r}function m(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return r;let i=e[n];if(i.endsWith("[]")){let s=i.slice(0,-2);if(s in t){let o=t[s];return Array.isArray(o)?o.map(a=>m(a,e.slice(n+1),r)):r}else return r}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return r;throw n}}function kQt(t,e){for(let[r,n]of Object.entries(e)){let i=r.split("."),s=n.split("."),o=new Set,a=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){a=u;break}if(a!==-1&&s.length>a)for(let u=a;u<s.length;u++){let c=s[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}Loe(t,i,s,0,o)}}function Loe(t,e,r,n,i){if(n>=e.length||typeof t!="object"||t===null)return;let s=e[n];if(s.endsWith("[]")){let o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(let u of a[o])Loe(u,e,r,n+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),u={};for(let c of a)u[c]=o[c];for(let[c,l]of Object.entries(u)){let d=[];for(let p of r.slice(n))p==="*"?d.push(c):d.push(p);g(o,d,l)}for(let c of a)delete o[c]}}else{let o=t;s in o&&Loe(o[s],e,r,n+1,i)}}function Lae(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function MQt(t){let e={},r=m(t,["operationName"]);r!=null&&g(e,["operationName"],r);let n=m(t,["resourceName"]);return n!=null&&g(e,["_url","resourceName"],n),e}function PQt(t){let e={},r=m(t,["name"]);r!=null&&g(e,["name"],r);let n=m(t,["metadata"]);n!=null&&g(e,["metadata"],n);let i=m(t,["done"]);i!=null&&g(e,["done"],i);let s=m(t,["error"]);s!=null&&g(e,["error"],s);let o=m(t,["response","generateVideoResponse"]);return o!=null&&g(e,["response"],FQt(o)),e}function NQt(t){let e={},r=m(t,["name"]);r!=null&&g(e,["name"],r);let n=m(t,["metadata"]);n!=null&&g(e,["metadata"],n);let i=m(t,["done"]);i!=null&&g(e,["done"],i);let s=m(t,["error"]);s!=null&&g(e,["error"],s);let o=m(t,["response"]);return o!=null&&g(e,["response"],BQt(o)),e}function FQt(t){let e={},r=m(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>qQt(o))),g(e,["generatedVideos"],s)}let n=m(t,["raiMediaFilteredCount"]);n!=null&&g(e,["raiMediaFilteredCount"],n);let i=m(t,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function BQt(t){let e={},r=m(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>LQt(o))),g(e,["generatedVideos"],s)}let n=m(t,["raiMediaFilteredCount"]);n!=null&&g(e,["raiMediaFilteredCount"],n);let i=m(t,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function qQt(t){let e={},r=m(t,["video"]);return r!=null&&g(e,["video"],GQt(r)),e}function LQt(t){let e={},r=m(t,["_self"]);return r!=null&&g(e,["video"],HQt(r)),e}function jQt(t){let e={},r=m(t,["operationName"]);return r!=null&&g(e,["_url","operationName"],r),e}function $Qt(t){let e={},r=m(t,["operationName"]);return r!=null&&g(e,["_url","operationName"],r),e}function UQt(t){let e={},r=m(t,["name"]);r!=null&&g(e,["name"],r);let n=m(t,["metadata"]);n!=null&&g(e,["metadata"],n);let i=m(t,["done"]);i!=null&&g(e,["done"],i);let s=m(t,["error"]);s!=null&&g(e,["error"],s);let o=m(t,["response"]);return o!=null&&g(e,["response"],KQt(o)),e}function KQt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["parent"]);n!=null&&g(e,["parent"],n);let i=m(t,["documentName"]);return i!=null&&g(e,["documentName"],i),e}function jae(t){let e={},r=m(t,["name"]);r!=null&&g(e,["name"],r);let n=m(t,["metadata"]);n!=null&&g(e,["metadata"],n);let i=m(t,["done"]);i!=null&&g(e,["done"],i);let s=m(t,["error"]);s!=null&&g(e,["error"],s);let o=m(t,["response"]);return o!=null&&g(e,["response"],VQt(o)),e}function VQt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["parent"]);n!=null&&g(e,["parent"],n);let i=m(t,["documentName"]);return i!=null&&g(e,["documentName"],i),e}function GQt(t){let e={},r=m(t,["uri"]);r!=null&&g(e,["uri"],r);let n=m(t,["encodedVideo"]);n!=null&&g(e,["videoBytes"],Lae(n));let i=m(t,["encoding"]);return i!=null&&g(e,["mimeType"],i),e}function HQt(t){let e={},r=m(t,["gcsUri"]);r!=null&&g(e,["uri"],r);let n=m(t,["bytesBase64Encoded"]);n!=null&&g(e,["videoBytes"],Lae(n));let i=m(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Mr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function MVe(t,e){let r=Mr(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function PVe(t){return Array.isArray(t)?t.map(e=>tF(e)):[tF(t)]}function tF(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function NVe(t){let e=tF(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FVe(t){let e=tF(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nVe(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function BVe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>nVe(e)):[nVe(t)]}function nae(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function iVe(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function sVe(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Co(t){if(t==null)throw new Error("ContentUnion is required");return nae(t)?t:{role:"user",parts:BVe(t)}}function $ae(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{let n=Co(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){let r=Co(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Co(r)):[Co(e)]}function qc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(iVe(t)||sVe(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Co(t)]}let e=[],r=[],n=nae(t[0]);for(let i of t){let s=nae(i);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(iVe(i)||sVe(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(i)}}return n||e.push({role:"user",parts:BVe(r)}),e}function zQt(t,e){t.includes("null")&&(e.nullable=!0);let r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(Sm).includes(r[0].toUpperCase())?r[0].toUpperCase():Sm.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let n of r)e.anyOf.push({type:Object.values(Sm).includes(n.toUpperCase())?n.toUpperCase():Sm.TYPE_UNSPECIFIED})}}function c4(t){let e={},r=["items"],n=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&zQt(t.type,e);for(let[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Sm).includes(a.toUpperCase())?a.toUpperCase():Sm.TYPE_UNSPECIFIED}else if(r.includes(o))e[o]=c4(a);else if(n.includes(o)){let u=[];for(let c of a){if(c.type=="null"){e.nullable=!0;continue}u.push(c4(c))}e[o]=u}else if(i.includes(o)){let u={};for(let[c,l]of Object.entries(a))u[c]=c4(l);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Uae(t){return c4(t)}function Kae(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vae(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function f4(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=c4(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=c4(e.response));return t}function h4(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let r of t)e.push(r);return e}function WQt(t,e,r,n=1){let i=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:i?`${r}/${e}`:e}function Qf(t,e){if(typeof e!="string")throw new Error("name must be a string");return WQt(t,e,"cachedContents")}function qVe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Am(t){return Lae(t)}function JQt(t){return t!=null&&typeof t=="object"&&"name"in t}function LVe(t){return t!=null&&typeof t=="object"&&"video"in t}function jVe(t){return t!=null&&typeof t=="object"&&"uri"in t}function Gae(t){var e;let r;if(JQt(t)&&(r=t.name),!(jVe(t)&&(r=t.uri,r===void 0))&&!(LVe(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){let i=r.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${r}`);r=i[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function $Ve(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function UVe(t){for(let e of["models","tunedModels","publisherModels"])if(YQt(t,e))return t[e];return[]}function YQt(t,e){return t!==null&&typeof t=="object"&&e in t}function QQt(t,e={}){let r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(n.responseJsonSchema=r.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function XQt(t,e={}){let r=[],n=new Set;for(let i of t){let s=i.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);let o=QQt(i,e);o.functionDeclarations&&r.push(...o.functionDeclarations)}return{functionDeclarations:r}}function KVe(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;let n=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,i=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function ZQt(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function VVe(t){if(typeof t!="object"||t===null)return{};let e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;let i=r.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(let o of i){if(typeof o!="object"||o===null)continue;let u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function m4(t,e){let r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function GVe(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function eXt(t){let e={},r=m(t,["responsesFile"]);r!=null&&g(e,["fileName"],r);let n=m(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>PXt(o))),g(e,["inlinedResponses"],s)}let i=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["inlinedEmbedContentResponses"],s)}return e}function tXt(t){let e={},r=m(t,["predictionsFormat"]);r!=null&&g(e,["format"],r);let n=m(t,["gcsDestination","outputUriPrefix"]);n!=null&&g(e,["gcsUri"],n);let i=m(t,["bigqueryDestination","outputUri"]);return i!=null&&g(e,["bigqueryUri"],i),e}function rXt(t){let e={},r=m(t,["format"]);r!=null&&g(e,["predictionsFormat"],r);let n=m(t,["gcsUri"]);n!=null&&g(e,["gcsDestination","outputUriPrefix"],n);let i=m(t,["bigqueryUri"]);if(i!=null&&g(e,["bigqueryDestination","outputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function jN(t){let e={},r=m(t,["name"]);r!=null&&g(e,["name"],r);let n=m(t,["metadata","displayName"]);n!=null&&g(e,["displayName"],n);let i=m(t,["metadata","state"]);i!=null&&g(e,["state"],GVe(i));let s=m(t,["metadata","createTime"]);s!=null&&g(e,["createTime"],s);let o=m(t,["metadata","endTime"]);o!=null&&g(e,["endTime"],o);let a=m(t,["metadata","updateTime"]);a!=null&&g(e,["updateTime"],a);let u=m(t,["metadata","model"]);u!=null&&g(e,["model"],u);let c=m(t,["metadata","output"]);return c!=null&&g(e,["dest"],eXt(VVe(c))),e}function iae(t){let e={},r=m(t,["name"]);r!=null&&g(e,["name"],r);let n=m(t,["displayName"]);n!=null&&g(e,["displayName"],n);let i=m(t,["state"]);i!=null&&g(e,["state"],GVe(i));let s=m(t,["error"]);s!=null&&g(e,["error"],s);let o=m(t,["createTime"]);o!=null&&g(e,["createTime"],o);let a=m(t,["startTime"]);a!=null&&g(e,["startTime"],a);let u=m(t,["endTime"]);u!=null&&g(e,["endTime"],u);let c=m(t,["updateTime"]);c!=null&&g(e,["updateTime"],c);let l=m(t,["model"]);l!=null&&g(e,["model"],l);let d=m(t,["inputConfig"]);d!=null&&g(e,["src"],nXt(d));let p=m(t,["outputConfig"]);p!=null&&g(e,["dest"],tXt(VVe(p)));let f=m(t,["completionStats"]);return f!=null&&g(e,["completionStats"],f),e}function nXt(t){let e={},r=m(t,["instancesFormat"]);r!=null&&g(e,["format"],r);let n=m(t,["gcsSource","uris"]);n!=null&&g(e,["gcsUri"],n);let i=m(t,["bigquerySource","inputUri"]);return i!=null&&g(e,["bigqueryUri"],i),e}function iXt(t,e){let r={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let n=m(e,["fileName"]);n!=null&&g(r,["fileName"],n);let i=m(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>MXt(t,o))),g(r,["requests","requests"],s)}return r}function sXt(t){let e={},r=m(t,["format"]);r!=null&&g(e,["instancesFormat"],r);let n=m(t,["gcsUri"]);n!=null&&g(e,["gcsSource","uris"],n);let i=m(t,["bigqueryUri"]);if(i!=null&&g(e,["bigquerySource","inputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function oXt(t){let e={},r=m(t,["data"]);if(r!=null&&g(e,["data"],r),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function aXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],m4(t,n)),r}function uXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],m4(t,n)),r}function cXt(t){let e={},r=m(t,["content"]);r!=null&&g(e,["content"],r);let n=m(t,["citationMetadata"]);n!=null&&g(e,["citationMetadata"],lXt(n));let i=m(t,["tokenCount"]);i!=null&&g(e,["tokenCount"],i);let s=m(t,["finishReason"]);s!=null&&g(e,["finishReason"],s);let o=m(t,["avgLogprobs"]);o!=null&&g(e,["avgLogprobs"],o);let a=m(t,["groundingMetadata"]);a!=null&&g(e,["groundingMetadata"],a);let u=m(t,["index"]);u!=null&&g(e,["index"],u);let c=m(t,["logprobsResult"]);c!=null&&g(e,["logprobsResult"],c);let l=m(t,["safetyRatings"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(f=>f)),g(e,["safetyRatings"],p)}let d=m(t,["urlContextMetadata"]);return d!=null&&g(e,["urlContextMetadata"],d),e}function lXt(t){let e={},r=m(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),g(e,["citations"],n)}return e}function HVe(t){let e={},r=m(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>$Xt(s))),g(e,["parts"],i)}let n=m(t,["role"]);return n!=null&&g(e,["role"],n),e}function dXt(t,e){let r={},n=m(t,["displayName"]);if(e!==void 0&&n!=null&&g(e,["batch","displayName"],n),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function pXt(t,e){let r={},n=m(t,["displayName"]);e!==void 0&&n!=null&&g(e,["displayName"],n);let i=m(t,["dest"]);return e!==void 0&&i!=null&&g(e,["outputConfig"],rXt(ZQt(i))),r}function oVe(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["_url","model"],Mr(t,n));let i=m(e,["src"]);i!=null&&g(r,["batch","inputConfig"],iXt(t,KVe(t,i)));let s=m(e,["config"]);return s!=null&&dXt(s,r),r}function fXt(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["model"],Mr(t,n));let i=m(e,["src"]);i!=null&&g(r,["inputConfig"],sXt(KVe(t,i)));let s=m(e,["config"]);return s!=null&&pXt(s,r),r}function hXt(t,e){let r={},n=m(t,["displayName"]);return e!==void 0&&n!=null&&g(e,["batch","displayName"],n),r}function mXt(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["_url","model"],Mr(t,n));let i=m(e,["src"]);i!=null&&g(r,["batch","inputConfig"],SXt(t,i));let s=m(e,["config"]);return s!=null&&hXt(s,r),r}function yXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],m4(t,n)),r}function gXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],m4(t,n)),r}function bXt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["name"]);n!=null&&g(e,["name"],n);let i=m(t,["done"]);i!=null&&g(e,["done"],i);let s=m(t,["error"]);return s!=null&&g(e,["error"],s),e}function _Xt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["name"]);n!=null&&g(e,["name"],n);let i=m(t,["done"]);i!=null&&g(e,["done"],i);let s=m(t,["error"]);return s!=null&&g(e,["error"],s),e}function EXt(t,e){let r={},n=m(e,["contents"]);if(n!=null){let s=$ae(t,n);Array.isArray(s)&&(s=s.map(o=>o)),g(r,["requests[]","request","content"],s)}let i=m(e,["config"]);return i!=null&&(g(r,["_self"],vXt(i,r)),kQt(r,{"requests[].*":"requests[].request.*"})),r}function vXt(t,e){let r={},n=m(t,["taskType"]);e!==void 0&&n!=null&&g(e,["requests[]","taskType"],n);let i=m(t,["title"]);e!==void 0&&i!=null&&g(e,["requests[]","title"],i);let s=m(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&g(e,["requests[]","outputDimensionality"],s),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function SXt(t,e){let r={},n=m(e,["fileName"]);n!=null&&g(r,["file_name"],n);let i=m(e,["inlinedRequests"]);return i!=null&&g(r,["requests"],EXt(t,i)),r}function wXt(t){let e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=m(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function AXt(t){let e={},r=m(t,["id"]);r!=null&&g(e,["id"],r);let n=m(t,["args"]);n!=null&&g(e,["args"],n);let i=m(t,["name"]);if(i!=null&&g(e,["name"],i),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CXt(t){let e={},r=m(t,["allowedFunctionNames"]);r!=null&&g(e,["allowedFunctionNames"],r);let n=m(t,["mode"]);if(n!=null&&g(e,["mode"],n),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function TXt(t,e,r){let n={},i=m(e,["systemInstruction"]);r!==void 0&&i!=null&&g(r,["systemInstruction"],HVe(Co(i)));let s=m(e,["temperature"]);s!=null&&g(n,["temperature"],s);let o=m(e,["topP"]);o!=null&&g(n,["topP"],o);let a=m(e,["topK"]);a!=null&&g(n,["topK"],a);let u=m(e,["candidateCount"]);u!=null&&g(n,["candidateCount"],u);let c=m(e,["maxOutputTokens"]);c!=null&&g(n,["maxOutputTokens"],c);let l=m(e,["stopSequences"]);l!=null&&g(n,["stopSequences"],l);let d=m(e,["responseLogprobs"]);d!=null&&g(n,["responseLogprobs"],d);let p=m(e,["logprobs"]);p!=null&&g(n,["logprobs"],p);let f=m(e,["presencePenalty"]);f!=null&&g(n,["presencePenalty"],f);let h=m(e,["frequencyPenalty"]);h!=null&&g(n,["frequencyPenalty"],h);let y=m(e,["seed"]);y!=null&&g(n,["seed"],y);let E=m(e,["responseMimeType"]);E!=null&&g(n,["responseMimeType"],E);let v=m(e,["responseSchema"]);v!=null&&g(n,["responseSchema"],Uae(v));let w=m(e,["responseJsonSchema"]);if(w!=null&&g(n,["responseJsonSchema"],w),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=m(e,["safetySettings"]);if(r!==void 0&&T!=null){let k=T;Array.isArray(k)&&(k=k.map(G=>UXt(G))),g(r,["safetySettings"],k)}let A=m(e,["tools"]);if(r!==void 0&&A!=null){let k=h4(A);Array.isArray(k)&&(k=k.map(G=>VXt(f4(G)))),g(r,["tools"],k)}let C=m(e,["toolConfig"]);if(r!==void 0&&C!=null&&g(r,["toolConfig"],KXt(C)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let x=m(e,["cachedContent"]);r!==void 0&&x!=null&&g(r,["cachedContent"],Qf(t,x));let R=m(e,["responseModalities"]);R!=null&&g(n,["responseModalities"],R);let M=m(e,["mediaResolution"]);M!=null&&g(n,["mediaResolution"],M);let I=m(e,["speechConfig"]);if(I!=null&&g(n,["speechConfig"],Kae(I)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let F=m(e,["thinkingConfig"]);F!=null&&g(n,["thinkingConfig"],F);let B=m(e,["imageConfig"]);B!=null&&g(n,["imageConfig"],kXt(B));let K=m(e,["enableEnhancedCivicAnswers"]);if(K!=null&&g(n,["enableEnhancedCivicAnswers"],K),m(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function OXt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>cXt(c))),g(e,["candidates"],u)}let i=m(t,["modelVersion"]);i!=null&&g(e,["modelVersion"],i);let s=m(t,["promptFeedback"]);s!=null&&g(e,["promptFeedback"],s);let o=m(t,["responseId"]);o!=null&&g(e,["responseId"],o);let a=m(t,["usageMetadata"]);return a!=null&&g(e,["usageMetadata"],a),e}function xXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],m4(t,n)),r}function IXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],m4(t,n)),r}function RXt(t){let e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=m(t,["enableWidget"]);return r!=null&&g(e,["enableWidget"],r),e}function DXt(t){let e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=m(t,["timeRangeFilter"]);return r!=null&&g(e,["timeRangeFilter"],r),e}function kXt(t){let e={},r=m(t,["aspectRatio"]);r!=null&&g(e,["aspectRatio"],r);let n=m(t,["imageSize"]);if(n!=null&&g(e,["imageSize"],n),m(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function MXt(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["request","model"],Mr(t,n));let i=m(e,["contents"]);if(i!=null){let a=qc(i);Array.isArray(a)&&(a=a.map(u=>HVe(u))),g(r,["request","contents"],a)}let s=m(e,["metadata"]);s!=null&&g(r,["metadata"],s);let o=m(e,["config"]);return o!=null&&g(r,["request","generationConfig"],TXt(t,o,m(r,["request"],{}))),r}function PXt(t){let e={},r=m(t,["response"]);r!=null&&g(e,["response"],OXt(r));let n=m(t,["metadata"]);n!=null&&g(e,["metadata"],n);let i=m(t,["error"]);return i!=null&&g(e,["error"],i),e}function NXt(t,e){let r={},n=m(t,["pageSize"]);e!==void 0&&n!=null&&g(e,["_query","pageSize"],n);let i=m(t,["pageToken"]);if(e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function FXt(t,e){let r={},n=m(t,["pageSize"]);e!==void 0&&n!=null&&g(e,["_query","pageSize"],n);let i=m(t,["pageToken"]);e!==void 0&&i!=null&&g(e,["_query","pageToken"],i);let s=m(t,["filter"]);return e!==void 0&&s!=null&&g(e,["_query","filter"],s),r}function BXt(t){let e={},r=m(t,["config"]);return r!=null&&NXt(r,e),e}function qXt(t){let e={},r=m(t,["config"]);return r!=null&&FXt(r,e),e}function LXt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["nextPageToken"]);n!=null&&g(e,["nextPageToken"],n);let i=m(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>jN(o))),g(e,["batchJobs"],s)}return e}function jXt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["nextPageToken"]);n!=null&&g(e,["nextPageToken"],n);let i=m(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>iae(o))),g(e,["batchJobs"],s)}return e}function $Xt(t){let e={},r=m(t,["mediaResolution"]);r!=null&&g(e,["mediaResolution"],r);let n=m(t,["codeExecutionResult"]);n!=null&&g(e,["codeExecutionResult"],n);let i=m(t,["executableCode"]);i!=null&&g(e,["executableCode"],i);let s=m(t,["fileData"]);s!=null&&g(e,["fileData"],wXt(s));let o=m(t,["functionCall"]);o!=null&&g(e,["functionCall"],AXt(o));let a=m(t,["functionResponse"]);a!=null&&g(e,["functionResponse"],a);let u=m(t,["inlineData"]);u!=null&&g(e,["inlineData"],oXt(u));let c=m(t,["text"]);c!=null&&g(e,["text"],c);let l=m(t,["thought"]);l!=null&&g(e,["thought"],l);let d=m(t,["thoughtSignature"]);d!=null&&g(e,["thoughtSignature"],d);let p=m(t,["videoMetadata"]);return p!=null&&g(e,["videoMetadata"],p),e}function UXt(t){let e={},r=m(t,["category"]);if(r!=null&&g(e,["category"],r),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=m(t,["threshold"]);return n!=null&&g(e,["threshold"],n),e}function KXt(t){let e={},r=m(t,["retrievalConfig"]);r!=null&&g(e,["retrievalConfig"],r);let n=m(t,["functionCallingConfig"]);return n!=null&&g(e,["functionCallingConfig"],CXt(n)),e}function VXt(t){let e={};if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=m(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);let n=m(t,["fileSearch"]);n!=null&&g(e,["fileSearch"],n);let i=m(t,["codeExecution"]);if(i!=null&&g(e,["codeExecution"],i),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=m(t,["functionDeclarations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>d)),g(e,["functionDeclarations"],l)}let o=m(t,["googleMaps"]);o!=null&&g(e,["googleMaps"],RXt(o));let a=m(t,["googleSearch"]);a!=null&&g(e,["googleSearch"],DXt(a));let u=m(t,["googleSearchRetrieval"]);u!=null&&g(e,["googleSearchRetrieval"],u);let c=m(t,["urlContext"]);return c!=null&&g(e,["urlContext"],c),e}function GXt(t){let e={},r=m(t,["data"]);if(r!=null&&g(e,["data"],r),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function aVe(t){let e={},r=m(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>hZt(s))),g(e,["parts"],i)}let n=m(t,["role"]);return n!=null&&g(e,["role"],n),e}function HXt(t,e){let r={},n=m(t,["ttl"]);e!==void 0&&n!=null&&g(e,["ttl"],n);let i=m(t,["expireTime"]);e!==void 0&&i!=null&&g(e,["expireTime"],i);let s=m(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);let o=m(t,["contents"]);if(e!==void 0&&o!=null){let l=qc(o);Array.isArray(l)&&(l=l.map(d=>aVe(d))),g(e,["contents"],l)}let a=m(t,["systemInstruction"]);e!==void 0&&a!=null&&g(e,["systemInstruction"],aVe(Co(a)));let u=m(t,["tools"]);if(e!==void 0&&u!=null){let l=u;Array.isArray(l)&&(l=l.map(d=>yZt(d))),g(e,["tools"],l)}let c=m(t,["toolConfig"]);if(e!==void 0&&c!=null&&g(e,["toolConfig"],mZt(c)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function zXt(t,e){let r={},n=m(t,["ttl"]);e!==void 0&&n!=null&&g(e,["ttl"],n);let i=m(t,["expireTime"]);e!==void 0&&i!=null&&g(e,["expireTime"],i);let s=m(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);let o=m(t,["contents"]);if(e!==void 0&&o!=null){let d=qc(o);Array.isArray(d)&&(d=d.map(p=>p)),g(e,["contents"],d)}let a=m(t,["systemInstruction"]);e!==void 0&&a!=null&&g(e,["systemInstruction"],Co(a));let u=m(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>gZt(p))),g(e,["tools"],d)}let c=m(t,["toolConfig"]);e!==void 0&&c!=null&&g(e,["toolConfig"],c);let l=m(t,["kmsKeyName"]);return e!==void 0&&l!=null&&g(e,["encryption_spec","kmsKeyName"],l),r}function WXt(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["model"],MVe(t,n));let i=m(e,["config"]);return i!=null&&HXt(i,r),r}function JXt(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["model"],MVe(t,n));let i=m(e,["config"]);return i!=null&&zXt(i,r),r}function YXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],Qf(t,n)),r}function QXt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],Qf(t,n)),r}function XXt(t){let e={},r=m(t,["sdkHttpResponse"]);return r!=null&&g(e,["sdkHttpResponse"],r),e}function ZXt(t){let e={},r=m(t,["sdkHttpResponse"]);return r!=null&&g(e,["sdkHttpResponse"],r),e}function eZt(t){let e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=m(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function tZt(t){let e={},r=m(t,["id"]);r!=null&&g(e,["id"],r);let n=m(t,["args"]);n!=null&&g(e,["args"],n);let i=m(t,["name"]);if(i!=null&&g(e,["name"],i),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rZt(t){let e={},r=m(t,["allowedFunctionNames"]);r!=null&&g(e,["allowedFunctionNames"],r);let n=m(t,["mode"]);if(n!=null&&g(e,["mode"],n),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nZt(t){let e={},r=m(t,["description"]);r!=null&&g(e,["description"],r);let n=m(t,["name"]);n!=null&&g(e,["name"],n);let i=m(t,["parameters"]);i!=null&&g(e,["parameters"],i);let s=m(t,["parametersJsonSchema"]);s!=null&&g(e,["parametersJsonSchema"],s);let o=m(t,["response"]);o!=null&&g(e,["response"],o);let a=m(t,["responseJsonSchema"]);if(a!=null&&g(e,["responseJsonSchema"],a),m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function iZt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],Qf(t,n)),r}function sZt(t,e){let r={},n=m(e,["name"]);return n!=null&&g(r,["_url","name"],Qf(t,n)),r}function oZt(t){let e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=m(t,["enableWidget"]);return r!=null&&g(e,["enableWidget"],r),e}function aZt(t){let e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=m(t,["timeRangeFilter"]);return r!=null&&g(e,["timeRangeFilter"],r),e}function uZt(t,e){let r={},n=m(t,["pageSize"]);e!==void 0&&n!=null&&g(e,["_query","pageSize"],n);let i=m(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),r}function cZt(t,e){let r={},n=m(t,["pageSize"]);e!==void 0&&n!=null&&g(e,["_query","pageSize"],n);let i=m(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),r}function lZt(t){let e={},r=m(t,["config"]);return r!=null&&uZt(r,e),e}function dZt(t){let e={},r=m(t,["config"]);return r!=null&&cZt(r,e),e}function pZt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["nextPageToken"]);n!=null&&g(e,["nextPageToken"],n);let i=m(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["cachedContents"],s)}return e}function fZt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["nextPageToken"]);n!=null&&g(e,["nextPageToken"],n);let i=m(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["cachedContents"],s)}return e}function hZt(t){let e={},r=m(t,["mediaResolution"]);r!=null&&g(e,["mediaResolution"],r);let n=m(t,["codeExecutionResult"]);n!=null&&g(e,["codeExecutionResult"],n);let i=m(t,["executableCode"]);i!=null&&g(e,["executableCode"],i);let s=m(t,["fileData"]);s!=null&&g(e,["fileData"],eZt(s));let o=m(t,["functionCall"]);o!=null&&g(e,["functionCall"],tZt(o));let a=m(t,["functionResponse"]);a!=null&&g(e,["functionResponse"],a);let u=m(t,["inlineData"]);u!=null&&g(e,["inlineData"],GXt(u));let c=m(t,["text"]);c!=null&&g(e,["text"],c);let l=m(t,["thought"]);l!=null&&g(e,["thought"],l);let d=m(t,["thoughtSignature"]);d!=null&&g(e,["thoughtSignature"],d);let p=m(t,["videoMetadata"]);return p!=null&&g(e,["videoMetadata"],p),e}function mZt(t){let e={},r=m(t,["retrievalConfig"]);r!=null&&g(e,["retrievalConfig"],r);let n=m(t,["functionCallingConfig"]);return n!=null&&g(e,["functionCallingConfig"],rZt(n)),e}function yZt(t){let e={};if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=m(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);let n=m(t,["fileSearch"]);n!=null&&g(e,["fileSearch"],n);let i=m(t,["codeExecution"]);if(i!=null&&g(e,["codeExecution"],i),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=m(t,["functionDeclarations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>d)),g(e,["functionDeclarations"],l)}let o=m(t,["googleMaps"]);o!=null&&g(e,["googleMaps"],oZt(o));let a=m(t,["googleSearch"]);a!=null&&g(e,["googleSearch"],aZt(a));let u=m(t,["googleSearchRetrieval"]);u!=null&&g(e,["googleSearchRetrieval"],u);let c=m(t,["urlContext"]);return c!=null&&g(e,["urlContext"],c),e}function gZt(t){let e={},r=m(t,["retrieval"]);r!=null&&g(e,["retrieval"],r);let n=m(t,["computerUse"]);if(n!=null&&g(e,["computerUse"],n),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=m(t,["codeExecution"]);i!=null&&g(e,["codeExecution"],i);let s=m(t,["enterpriseWebSearch"]);s!=null&&g(e,["enterpriseWebSearch"],s);let o=m(t,["functionDeclarations"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>nZt(p))),g(e,["functionDeclarations"],d)}let a=m(t,["googleMaps"]);a!=null&&g(e,["googleMaps"],a);let u=m(t,["googleSearch"]);u!=null&&g(e,["googleSearch"],u);let c=m(t,["googleSearchRetrieval"]);c!=null&&g(e,["googleSearchRetrieval"],c);let l=m(t,["urlContext"]);return l!=null&&g(e,["urlContext"],l),e}function bZt(t,e){let r={},n=m(t,["ttl"]);e!==void 0&&n!=null&&g(e,["ttl"],n);let i=m(t,["expireTime"]);return e!==void 0&&i!=null&&g(e,["expireTime"],i),r}function _Zt(t,e){let r={},n=m(t,["ttl"]);e!==void 0&&n!=null&&g(e,["ttl"],n);let i=m(t,["expireTime"]);return e!==void 0&&i!=null&&g(e,["expireTime"],i),r}function EZt(t,e){let r={},n=m(e,["name"]);n!=null&&g(r,["_url","name"],Qf(t,n));let i=m(e,["config"]);return i!=null&&bZt(i,r),r}function vZt(t,e){let r={},n=m(e,["name"]);n!=null&&g(r,["_url","name"],Qf(t,n));let i=m(e,["config"]);return i!=null&&_Zt(i,r),r}function rF(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function uVe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xt(t){return this instanceof xt?(this.v=t,this):new xt(t)}function ed(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(y){return new Promise(function(E,v){s.push([f,y,E,v])>1||u(f,y)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(y){p(s[0][3],y)}}function c(f){f.value instanceof xt?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function td(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof uVe=="function"?uVe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function SZt(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:zVe(r)}function zVe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function wZt(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function cVe(t){if(t===void 0||t.length===0)return[];let e=[],r=t.length,n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{let i=[],s=!0;for(;n<r&&t[n].role==="model";)i.push(t[n]),s&&!zVe(t[n])&&(s=!1),n++;s?e.push(...i):e.pop()}return e}function AZt(t){let e={},r=m(t,["file"]);return r!=null&&g(e,["file"],r),e}function CZt(t){let e={},r=m(t,["sdkHttpResponse"]);return r!=null&&g(e,["sdkHttpResponse"],r),e}function TZt(t){let e={},r=m(t,["name"]);return r!=null&&g(e,["_url","file"],Gae(r)),e}function OZt(t){let e={},r=m(t,["sdkHttpResponse"]);return r!=null&&g(e,["sdkHttpResponse"],r),e}function xZt(t){let e={},r=m(t,["name"]);return r!=null&&g(e,["_url","file"],Gae(r)),e}function IZt(t){let e={},r=m(t,["uris"]);return r!=null&&g(e,["uris"],r),e}function RZt(t,e){let r={},n=m(t,["pageSize"]);e!==void 0&&n!=null&&g(e,["_query","pageSize"],n);let i=m(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),r}function DZt(t){let e={},r=m(t,["config"]);return r!=null&&RZt(r,e),e}function kZt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["nextPageToken"]);n!=null&&g(e,["nextPageToken"],n);let i=m(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["files"],s)}return e}function MZt(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["files"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["files"],i)}return e}function $N(t){let e={},r=m(t,["data"]);if(r!=null&&g(e,["data"],r),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function PZt(t){let e={},r=m(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>YZt(s))),g(e,["parts"],i)}let n=m(t,["role"]);return n!=null&&g(e,["role"],n),e}function NZt(t){let e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=m(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function FZt(t){let e={},r=m(t,["id"]);r!=null&&g(e,["id"],r);let n=m(t,["args"]);n!=null&&g(e,["args"],n);let i=m(t,["name"]);if(i!=null&&g(e,["name"],i),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BZt(t){let e={},r=m(t,["description"]);r!=null&&g(e,["description"],r);let n=m(t,["name"]);n!=null&&g(e,["name"],n);let i=m(t,["parameters"]);i!=null&&g(e,["parameters"],i);let s=m(t,["parametersJsonSchema"]);s!=null&&g(e,["parametersJsonSchema"],s);let o=m(t,["response"]);o!=null&&g(e,["response"],o);let a=m(t,["responseJsonSchema"]);if(a!=null&&g(e,["responseJsonSchema"],a),m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function qZt(t){let e={},r=m(t,["modelSelectionConfig"]);r!=null&&g(e,["modelConfig"],r);let n=m(t,["responseJsonSchema"]);n!=null&&g(e,["responseJsonSchema"],n);let i=m(t,["audioTimestamp"]);i!=null&&g(e,["audioTimestamp"],i);let s=m(t,["candidateCount"]);s!=null&&g(e,["candidateCount"],s);let o=m(t,["enableAffectiveDialog"]);o!=null&&g(e,["enableAffectiveDialog"],o);let a=m(t,["frequencyPenalty"]);a!=null&&g(e,["frequencyPenalty"],a);let u=m(t,["logprobs"]);u!=null&&g(e,["logprobs"],u);let c=m(t,["maxOutputTokens"]);c!=null&&g(e,["maxOutputTokens"],c);let l=m(t,["mediaResolution"]);l!=null&&g(e,["mediaResolution"],l);let d=m(t,["presencePenalty"]);d!=null&&g(e,["presencePenalty"],d);let p=m(t,["responseLogprobs"]);p!=null&&g(e,["responseLogprobs"],p);let f=m(t,["responseMimeType"]);f!=null&&g(e,["responseMimeType"],f);let h=m(t,["responseModalities"]);h!=null&&g(e,["responseModalities"],h);let y=m(t,["responseSchema"]);y!=null&&g(e,["responseSchema"],y);let E=m(t,["routingConfig"]);E!=null&&g(e,["routingConfig"],E);let v=m(t,["seed"]);v!=null&&g(e,["seed"],v);let w=m(t,["speechConfig"]);w!=null&&g(e,["speechConfig"],w);let T=m(t,["stopSequences"]);T!=null&&g(e,["stopSequences"],T);let A=m(t,["temperature"]);A!=null&&g(e,["temperature"],A);let C=m(t,["thinkingConfig"]);C!=null&&g(e,["thinkingConfig"],C);let x=m(t,["topK"]);x!=null&&g(e,["topK"],x);let R=m(t,["topP"]);if(R!=null&&g(e,["topP"],R),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function LZt(t){let e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=m(t,["enableWidget"]);return r!=null&&g(e,["enableWidget"],r),e}function jZt(t){let e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=m(t,["timeRangeFilter"]);return r!=null&&g(e,["timeRangeFilter"],r),e}function $Zt(t,e){let r={},n=m(t,["generationConfig"]);e!==void 0&&n!=null&&g(e,["setup","generationConfig"],n);let i=m(t,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);let s=m(t,["temperature"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","temperature"],s);let o=m(t,["topP"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","topP"],o);let a=m(t,["topK"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","topK"],a);let u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","maxOutputTokens"],u);let c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","mediaResolution"],c);let l=m(t,["seed"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","seed"],l);let d=m(t,["speechConfig"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","speechConfig"],Vae(d));let p=m(t,["thinkingConfig"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","thinkingConfig"],p);let f=m(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=m(t,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["setup","systemInstruction"],PZt(Co(h)));let y=m(t,["tools"]);if(e!==void 0&&y!=null){let x=h4(y);Array.isArray(x)&&(x=x.map(R=>XZt(f4(R)))),g(e,["setup","tools"],x)}let E=m(t,["sessionResumption"]);e!==void 0&&E!=null&&g(e,["setup","sessionResumption"],QZt(E));let v=m(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&g(e,["setup","inputAudioTranscription"],v);let w=m(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&g(e,["setup","outputAudioTranscription"],w);let T=m(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&g(e,["setup","realtimeInputConfig"],T);let A=m(t,["contextWindowCompression"]);e!==void 0&&A!=null&&g(e,["setup","contextWindowCompression"],A);let C=m(t,["proactivity"]);if(e!==void 0&&C!=null&&g(e,["setup","proactivity"],C),m(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function UZt(t,e){let r={},n=m(t,["generationConfig"]);e!==void 0&&n!=null&&g(e,["setup","generationConfig"],qZt(n));let i=m(t,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);let s=m(t,["temperature"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","temperature"],s);let o=m(t,["topP"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","topP"],o);let a=m(t,["topK"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","topK"],a);let u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","maxOutputTokens"],u);let c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","mediaResolution"],c);let l=m(t,["seed"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","seed"],l);let d=m(t,["speechConfig"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","speechConfig"],Vae(d));let p=m(t,["thinkingConfig"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","thinkingConfig"],p);let f=m(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=m(t,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["setup","systemInstruction"],Co(h));let y=m(t,["tools"]);if(e!==void 0&&y!=null){let R=h4(y);Array.isArray(R)&&(R=R.map(M=>ZZt(f4(M)))),g(e,["setup","tools"],R)}let E=m(t,["sessionResumption"]);e!==void 0&&E!=null&&g(e,["setup","sessionResumption"],E);let v=m(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&g(e,["setup","inputAudioTranscription"],v);let w=m(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&g(e,["setup","outputAudioTranscription"],w);let T=m(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&g(e,["setup","realtimeInputConfig"],T);let A=m(t,["contextWindowCompression"]);e!==void 0&&A!=null&&g(e,["setup","contextWindowCompression"],A);let C=m(t,["proactivity"]);e!==void 0&&C!=null&&g(e,["setup","proactivity"],C);let x=m(t,["explicitVadSignal"]);return e!==void 0&&x!=null&&g(e,["setup","explicitVadSignal"],x),r}function KZt(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["setup","model"],Mr(t,n));let i=m(e,["config"]);return i!=null&&g(r,["config"],$Zt(i,r)),r}function VZt(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["setup","model"],Mr(t,n));let i=m(e,["config"]);return i!=null&&g(r,["config"],UZt(i,r)),r}function GZt(t){let e={},r=m(t,["musicGenerationConfig"]);return r!=null&&g(e,["musicGenerationConfig"],r),e}function HZt(t){let e={},r=m(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),g(e,["weightedPrompts"],n)}return e}function zZt(t){let e={},r=m(t,["media"]);if(r!=null){let c=PVe(r);Array.isArray(c)&&(c=c.map(l=>$N(l))),g(e,["mediaChunks"],c)}let n=m(t,["audio"]);n!=null&&g(e,["audio"],$N(FVe(n)));let i=m(t,["audioStreamEnd"]);i!=null&&g(e,["audioStreamEnd"],i);let s=m(t,["video"]);s!=null&&g(e,["video"],$N(NVe(s)));let o=m(t,["text"]);o!=null&&g(e,["text"],o);let a=m(t,["activityStart"]);a!=null&&g(e,["activityStart"],a);let u=m(t,["activityEnd"]);return u!=null&&g(e,["activityEnd"],u),e}function WZt(t){let e={},r=m(t,["media"]);if(r!=null){let c=PVe(r);Array.isArray(c)&&(c=c.map(l=>l)),g(e,["mediaChunks"],c)}let n=m(t,["audio"]);n!=null&&g(e,["audio"],FVe(n));let i=m(t,["audioStreamEnd"]);i!=null&&g(e,["audioStreamEnd"],i);let s=m(t,["video"]);s!=null&&g(e,["video"],NVe(s));let o=m(t,["text"]);o!=null&&g(e,["text"],o);let a=m(t,["activityStart"]);a!=null&&g(e,["activityStart"],a);let u=m(t,["activityEnd"]);return u!=null&&g(e,["activityEnd"],u),e}function JZt(t){let e={},r=m(t,["setupComplete"]);r!=null&&g(e,["setupComplete"],r);let n=m(t,["serverContent"]);n!=null&&g(e,["serverContent"],n);let i=m(t,["toolCall"]);i!=null&&g(e,["toolCall"],i);let s=m(t,["toolCallCancellation"]);s!=null&&g(e,["toolCallCancellation"],s);let o=m(t,["usageMetadata"]);o!=null&&g(e,["usageMetadata"],eer(o));let a=m(t,["goAway"]);a!=null&&g(e,["goAway"],a);let u=m(t,["sessionResumptionUpdate"]);u!=null&&g(e,["sessionResumptionUpdate"],u);let c=m(t,["voiceActivityDetectionSignal"]);c!=null&&g(e,["voiceActivityDetectionSignal"],c);let l=m(t,["voiceActivity"]);return l!=null&&g(e,["voiceActivity"],ter(l)),e}function YZt(t){let e={},r=m(t,["mediaResolution"]);r!=null&&g(e,["mediaResolution"],r);let n=m(t,["codeExecutionResult"]);n!=null&&g(e,["codeExecutionResult"],n);let i=m(t,["executableCode"]);i!=null&&g(e,["executableCode"],i);let s=m(t,["fileData"]);s!=null&&g(e,["fileData"],NZt(s));let o=m(t,["functionCall"]);o!=null&&g(e,["functionCall"],FZt(o));let a=m(t,["functionResponse"]);a!=null&&g(e,["functionResponse"],a);let u=m(t,["inlineData"]);u!=null&&g(e,["inlineData"],$N(u));let c=m(t,["text"]);c!=null&&g(e,["text"],c);let l=m(t,["thought"]);l!=null&&g(e,["thought"],l);let d=m(t,["thoughtSignature"]);d!=null&&g(e,["thoughtSignature"],d);let p=m(t,["videoMetadata"]);return p!=null&&g(e,["videoMetadata"],p),e}function QZt(t){let e={},r=m(t,["handle"]);if(r!=null&&g(e,["handle"],r),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function XZt(t){let e={};if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=m(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);let n=m(t,["fileSearch"]);n!=null&&g(e,["fileSearch"],n);let i=m(t,["codeExecution"]);if(i!=null&&g(e,["codeExecution"],i),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=m(t,["functionDeclarations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>d)),g(e,["functionDeclarations"],l)}let o=m(t,["googleMaps"]);o!=null&&g(e,["googleMaps"],LZt(o));let a=m(t,["googleSearch"]);a!=null&&g(e,["googleSearch"],jZt(a));let u=m(t,["googleSearchRetrieval"]);u!=null&&g(e,["googleSearchRetrieval"],u);let c=m(t,["urlContext"]);return c!=null&&g(e,["urlContext"],c),e}function ZZt(t){let e={},r=m(t,["retrieval"]);r!=null&&g(e,["retrieval"],r);let n=m(t,["computerUse"]);if(n!=null&&g(e,["computerUse"],n),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=m(t,["codeExecution"]);i!=null&&g(e,["codeExecution"],i);let s=m(t,["enterpriseWebSearch"]);s!=null&&g(e,["enterpriseWebSearch"],s);let o=m(t,["functionDeclarations"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>BZt(p))),g(e,["functionDeclarations"],d)}let a=m(t,["googleMaps"]);a!=null&&g(e,["googleMaps"],a);let u=m(t,["googleSearch"]);u!=null&&g(e,["googleSearch"],u);let c=m(t,["googleSearchRetrieval"]);c!=null&&g(e,["googleSearchRetrieval"],c);let l=m(t,["urlContext"]);return l!=null&&g(e,["urlContext"],l),e}function eer(t){let e={},r=m(t,["promptTokenCount"]);r!=null&&g(e,["promptTokenCount"],r);let n=m(t,["cachedContentTokenCount"]);n!=null&&g(e,["cachedContentTokenCount"],n);let i=m(t,["candidatesTokenCount"]);i!=null&&g(e,["responseTokenCount"],i);let s=m(t,["toolUsePromptTokenCount"]);s!=null&&g(e,["toolUsePromptTokenCount"],s);let o=m(t,["thoughtsTokenCount"]);o!=null&&g(e,["thoughtsTokenCount"],o);let a=m(t,["totalTokenCount"]);a!=null&&g(e,["totalTokenCount"],a);let u=m(t,["promptTokensDetails"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>h)),g(e,["promptTokensDetails"],f)}let c=m(t,["cacheTokensDetails"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>h)),g(e,["cacheTokensDetails"],f)}let l=m(t,["candidatesTokensDetails"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>h)),g(e,["responseTokensDetails"],f)}let d=m(t,["toolUsePromptTokensDetails"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>h)),g(e,["toolUsePromptTokensDetails"],f)}let p=m(t,["trafficType"]);return p!=null&&g(e,["trafficType"],p),e}function ter(t){let e={},r=m(t,["type"]);return r!=null&&g(e,["voiceActivityType"],r),e}function rer(t,e){let r={},n=m(t,["data"]);if(n!=null&&g(r,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=m(t,["mimeType"]);return i!=null&&g(r,["mimeType"],i),r}function ner(t,e){let r={},n=m(t,["content"]);n!=null&&g(r,["content"],n);let i=m(t,["citationMetadata"]);i!=null&&g(r,["citationMetadata"],ier(i));let s=m(t,["tokenCount"]);s!=null&&g(r,["tokenCount"],s);let o=m(t,["finishReason"]);o!=null&&g(r,["finishReason"],o);let a=m(t,["avgLogprobs"]);a!=null&&g(r,["avgLogprobs"],a);let u=m(t,["groundingMetadata"]);u!=null&&g(r,["groundingMetadata"],u);let c=m(t,["index"]);c!=null&&g(r,["index"],c);let l=m(t,["logprobsResult"]);l!=null&&g(r,["logprobsResult"],l);let d=m(t,["safetyRatings"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>h)),g(r,["safetyRatings"],f)}let p=m(t,["urlContextMetadata"]);return p!=null&&g(r,["urlContextMetadata"],p),r}function ier(t,e){let r={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(r,["citations"],i)}return r}function ser(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["contents"]);if(s!=null){let o=qc(s);Array.isArray(o)&&(o=o.map(a=>a)),g(n,["contents"],o)}return n}function oer(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(r,["tokensInfo"],s)}return r}function aer(t,e){let r={},n=m(t,["values"]);n!=null&&g(r,["values"],n);let i=m(t,["statistics"]);return i!=null&&g(r,["statistics"],uer(i)),r}function uer(t,e){let r={},n=m(t,["truncated"]);n!=null&&g(r,["truncated"],n);let i=m(t,["token_count"]);return i!=null&&g(r,["tokenCount"],i),r}function _F(t,e){let r={},n=m(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>gtr(o))),g(r,["parts"],s)}let i=m(t,["role"]);return i!=null&&g(r,["role"],i),r}function cer(t,e){let r={},n=m(t,["controlType"]);n!=null&&g(r,["controlType"],n);let i=m(t,["enableControlImageComputation"]);return i!=null&&g(r,["computeControl"],i),r}function ler(t,e){let r={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return r}function der(t,e,r){let n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],Co(i));let s=m(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>QVe(u))),g(e,["tools"],a)}let o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&g(e,["generationConfig"],rtr(o)),n}function per(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["contents"]);if(s!=null){let a=qc(s);Array.isArray(a)&&(a=a.map(u=>_F(u))),g(n,["contents"],a)}let o=m(e,["config"]);return o!=null&&ler(o),n}function fer(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["contents"]);if(s!=null){let a=qc(s);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}let o=m(e,["config"]);return o!=null&&der(o,n),n}function her(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["totalTokens"]);i!=null&&g(r,["totalTokens"],i);let s=m(t,["cachedContentTokenCount"]);return s!=null&&g(r,["cachedContentTokenCount"],s),r}function mer(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["totalTokens"]);return i!=null&&g(r,["totalTokens"],i),r}function yer(t,e,r){let n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Mr(t,i)),n}function ger(t,e,r){let n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Mr(t,i)),n}function ber(t,e){let r={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(r,["sdkHttpResponse"],n),r}function _er(t,e){let r={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(r,["sdkHttpResponse"],n),r}function Eer(t,e,r){let n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);let s=m(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);let o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);let a=m(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);let u=m(t,["guidanceScale"]);e!==void 0&&u!=null&&g(e,["parameters","guidanceScale"],u);let c=m(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);let l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);let d=m(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);let p=m(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);let f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);let h=m(t,["language"]);e!==void 0&&h!=null&&g(e,["parameters","language"],h);let y=m(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);let E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);let v=m(t,["addWatermark"]);e!==void 0&&v!=null&&g(e,["parameters","addWatermark"],v);let w=m(t,["labels"]);e!==void 0&&w!=null&&g(e,["labels"],w);let T=m(t,["editMode"]);e!==void 0&&T!=null&&g(e,["parameters","editMode"],T);let A=m(t,["baseSteps"]);return e!==void 0&&A!=null&&g(e,["parameters","editConfig","baseSteps"],A),n}function ver(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);let o=m(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>wtr(c))),g(n,["instances[0]","referenceImages"],u)}let a=m(e,["config"]);return a!=null&&Eer(a,n),n}function Ser(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>EF(o))),g(r,["generatedImages"],s)}return r}function wer(t,e,r){let n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);let s=m(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);let o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Aer(t,e,r){let n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);let s=m(t,["title"]);e!==void 0&&s!=null&&g(e,["instances[]","title"],s);let o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&g(e,["parameters","outputDimensionality"],o);let a=m(t,["mimeType"]);e!==void 0&&a!=null&&g(e,["instances[]","mimeType"],a);let u=m(t,["autoTruncate"]);return e!==void 0&&u!=null&&g(e,["parameters","autoTruncate"],u),n}function Cer(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["contents"]);if(s!=null){let u=$ae(t,s);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["requests[]","content"],u)}let o=m(e,["config"]);o!=null&&wer(o,n);let a=m(e,["model"]);return a!==void 0&&g(n,["requests[]","model"],Mr(t,a)),n}function Ter(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["contents"]);if(s!=null){let a=$ae(t,s);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["instances[]","content"],a)}let o=m(e,["config"]);return o!=null&&Aer(o,n),n}function Oer(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(r,["embeddings"],o)}let s=m(t,["metadata"]);return s!=null&&g(r,["metadata"],s),r}function xer(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>aer(a))),g(r,["embeddings"],o)}let s=m(t,["metadata"]);return s!=null&&g(r,["metadata"],s),r}function Ier(t,e){let r={},n=m(t,["endpoint"]);n!=null&&g(r,["name"],n);let i=m(t,["deployedModelId"]);return i!=null&&g(r,["deployedModelId"],i),r}function Rer(t,e){let r={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=m(t,["fileUri"]);n!=null&&g(r,["fileUri"],n);let i=m(t,["mimeType"]);return i!=null&&g(r,["mimeType"],i),r}function Der(t,e){let r={},n=m(t,["id"]);n!=null&&g(r,["id"],n);let i=m(t,["args"]);i!=null&&g(r,["args"],i);let s=m(t,["name"]);if(s!=null&&g(r,["name"],s),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return r}function ker(t,e){let r={},n=m(t,["allowedFunctionNames"]);n!=null&&g(r,["allowedFunctionNames"],n);let i=m(t,["mode"]);if(i!=null&&g(r,["mode"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return r}function Mer(t,e){let r={},n=m(t,["description"]);n!=null&&g(r,["description"],n);let i=m(t,["name"]);i!=null&&g(r,["name"],i);let s=m(t,["parameters"]);s!=null&&g(r,["parameters"],s);let o=m(t,["parametersJsonSchema"]);o!=null&&g(r,["parametersJsonSchema"],o);let a=m(t,["response"]);a!=null&&g(r,["response"],a);let u=m(t,["responseJsonSchema"]);if(u!=null&&g(r,["responseJsonSchema"],u),m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return r}function Per(t,e,r,n){let i={},s=m(e,["systemInstruction"]);r!==void 0&&s!=null&&g(r,["systemInstruction"],_F(Co(s)));let o=m(e,["temperature"]);o!=null&&g(i,["temperature"],o);let a=m(e,["topP"]);a!=null&&g(i,["topP"],a);let u=m(e,["topK"]);u!=null&&g(i,["topK"],u);let c=m(e,["candidateCount"]);c!=null&&g(i,["candidateCount"],c);let l=m(e,["maxOutputTokens"]);l!=null&&g(i,["maxOutputTokens"],l);let d=m(e,["stopSequences"]);d!=null&&g(i,["stopSequences"],d);let p=m(e,["responseLogprobs"]);p!=null&&g(i,["responseLogprobs"],p);let f=m(e,["logprobs"]);f!=null&&g(i,["logprobs"],f);let h=m(e,["presencePenalty"]);h!=null&&g(i,["presencePenalty"],h);let y=m(e,["frequencyPenalty"]);y!=null&&g(i,["frequencyPenalty"],y);let E=m(e,["seed"]);E!=null&&g(i,["seed"],E);let v=m(e,["responseMimeType"]);v!=null&&g(i,["responseMimeType"],v);let w=m(e,["responseSchema"]);w!=null&&g(i,["responseSchema"],Uae(w));let T=m(e,["responseJsonSchema"]);if(T!=null&&g(i,["responseJsonSchema"],T),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let A=m(e,["safetySettings"]);if(r!==void 0&&A!=null){let G=A;Array.isArray(G)&&(G=G.map(ne=>Atr(ne))),g(r,["safetySettings"],G)}let C=m(e,["tools"]);if(r!==void 0&&C!=null){let G=h4(C);Array.isArray(G)&&(G=G.map(ne=>Dtr(f4(ne)))),g(r,["tools"],G)}let x=m(e,["toolConfig"]);if(r!==void 0&&x!=null&&g(r,["toolConfig"],Rtr(x)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let R=m(e,["cachedContent"]);r!==void 0&&R!=null&&g(r,["cachedContent"],Qf(t,R));let M=m(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);let I=m(e,["mediaResolution"]);I!=null&&g(i,["mediaResolution"],I);let F=m(e,["speechConfig"]);if(F!=null&&g(i,["speechConfig"],Kae(F)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let B=m(e,["thinkingConfig"]);B!=null&&g(i,["thinkingConfig"],B);let K=m(e,["imageConfig"]);K!=null&&g(i,["imageConfig"],atr(K));let k=m(e,["enableEnhancedCivicAnswers"]);if(k!=null&&g(i,["enableEnhancedCivicAnswers"],k),m(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Ner(t,e,r,n){let i={},s=m(e,["systemInstruction"]);r!==void 0&&s!=null&&g(r,["systemInstruction"],Co(s));let o=m(e,["temperature"]);o!=null&&g(i,["temperature"],o);let a=m(e,["topP"]);a!=null&&g(i,["topP"],a);let u=m(e,["topK"]);u!=null&&g(i,["topK"],u);let c=m(e,["candidateCount"]);c!=null&&g(i,["candidateCount"],c);let l=m(e,["maxOutputTokens"]);l!=null&&g(i,["maxOutputTokens"],l);let d=m(e,["stopSequences"]);d!=null&&g(i,["stopSequences"],d);let p=m(e,["responseLogprobs"]);p!=null&&g(i,["responseLogprobs"],p);let f=m(e,["logprobs"]);f!=null&&g(i,["logprobs"],f);let h=m(e,["presencePenalty"]);h!=null&&g(i,["presencePenalty"],h);let y=m(e,["frequencyPenalty"]);y!=null&&g(i,["frequencyPenalty"],y);let E=m(e,["seed"]);E!=null&&g(i,["seed"],E);let v=m(e,["responseMimeType"]);v!=null&&g(i,["responseMimeType"],v);let w=m(e,["responseSchema"]);w!=null&&g(i,["responseSchema"],Uae(w));let T=m(e,["responseJsonSchema"]);T!=null&&g(i,["responseJsonSchema"],T);let A=m(e,["routingConfig"]);A!=null&&g(i,["routingConfig"],A);let C=m(e,["modelSelectionConfig"]);C!=null&&g(i,["modelConfig"],C);let x=m(e,["safetySettings"]);if(r!==void 0&&x!=null){let me=x;Array.isArray(me)&&(me=me.map(Oe=>Oe)),g(r,["safetySettings"],me)}let R=m(e,["tools"]);if(r!==void 0&&R!=null){let me=h4(R);Array.isArray(me)&&(me=me.map(Oe=>QVe(f4(Oe)))),g(r,["tools"],me)}let M=m(e,["toolConfig"]);r!==void 0&&M!=null&&g(r,["toolConfig"],M);let I=m(e,["labels"]);r!==void 0&&I!=null&&g(r,["labels"],I);let F=m(e,["cachedContent"]);r!==void 0&&F!=null&&g(r,["cachedContent"],Qf(t,F));let B=m(e,["responseModalities"]);B!=null&&g(i,["responseModalities"],B);let K=m(e,["mediaResolution"]);K!=null&&g(i,["mediaResolution"],K);let k=m(e,["speechConfig"]);k!=null&&g(i,["speechConfig"],Kae(k));let G=m(e,["audioTimestamp"]);G!=null&&g(i,["audioTimestamp"],G);let ne=m(e,["thinkingConfig"]);ne!=null&&g(i,["thinkingConfig"],ne);let $=m(e,["imageConfig"]);if($!=null&&g(i,["imageConfig"],utr($)),m(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let V=m(e,["modelArmorConfig"]);return r!==void 0&&V!=null&&g(r,["modelArmorConfig"],V),i}function lVe(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["contents"]);if(s!=null){let a=qc(s);Array.isArray(a)&&(a=a.map(u=>_F(u))),g(n,["contents"],a)}let o=m(e,["config"]);return o!=null&&g(n,["generationConfig"],Per(t,o,n)),n}function dVe(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["contents"]);if(s!=null){let a=qc(s);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}let o=m(e,["config"]);return o!=null&&g(n,["generationConfig"],Ner(t,o,n)),n}function pVe(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(l=>ner(l))),g(r,["candidates"],c)}let s=m(t,["modelVersion"]);s!=null&&g(r,["modelVersion"],s);let o=m(t,["promptFeedback"]);o!=null&&g(r,["promptFeedback"],o);let a=m(t,["responseId"]);a!=null&&g(r,["responseId"],a);let u=m(t,["usageMetadata"]);return u!=null&&g(r,["usageMetadata"],u),r}function fVe(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),g(r,["candidates"],l)}let s=m(t,["createTime"]);s!=null&&g(r,["createTime"],s);let o=m(t,["modelVersion"]);o!=null&&g(r,["modelVersion"],o);let a=m(t,["promptFeedback"]);a!=null&&g(r,["promptFeedback"],a);let u=m(t,["responseId"]);u!=null&&g(r,["responseId"],u);let c=m(t,["usageMetadata"]);return c!=null&&g(r,["usageMetadata"],c),r}function Fer(t,e,r){let n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);let s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&g(e,["parameters","aspectRatio"],s);let o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&g(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=m(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);let u=m(t,["personGeneration"]);e!==void 0&&u!=null&&g(e,["parameters","personGeneration"],u);let c=m(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&g(e,["parameters","includeSafetyAttributes"],c);let l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&g(e,["parameters","includeRaiReason"],l);let d=m(t,["language"]);e!==void 0&&d!=null&&g(e,["parameters","language"],d);let p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","mimeType"],p);let f=m(t,["outputCompressionQuality"]);if(e!==void 0&&f!=null&&g(e,["parameters","outputOptions","compressionQuality"],f),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let h=m(t,["imageSize"]);if(e!==void 0&&h!=null&&g(e,["parameters","sampleImageSize"],h),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ber(t,e,r){let n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);let s=m(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);let o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);let a=m(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);let u=m(t,["guidanceScale"]);e!==void 0&&u!=null&&g(e,["parameters","guidanceScale"],u);let c=m(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);let l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);let d=m(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);let p=m(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);let f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);let h=m(t,["language"]);e!==void 0&&h!=null&&g(e,["parameters","language"],h);let y=m(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);let E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);let v=m(t,["addWatermark"]);e!==void 0&&v!=null&&g(e,["parameters","addWatermark"],v);let w=m(t,["labels"]);e!==void 0&&w!=null&&g(e,["labels"],w);let T=m(t,["imageSize"]);e!==void 0&&T!=null&&g(e,["parameters","sampleImageSize"],T);let A=m(t,["enhancePrompt"]);return e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A),n}function qer(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);let o=m(e,["config"]);return o!=null&&Fer(o,n),n}function Ler(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);let o=m(e,["config"]);return o!=null&&Ber(o,n),n}function jer(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Xer(a))),g(r,["generatedImages"],o)}let s=m(t,["positivePromptSafetyAttributes"]);return s!=null&&g(r,["positivePromptSafetyAttributes"],JVe(s)),r}function $er(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>EF(a))),g(r,["generatedImages"],o)}let s=m(t,["positivePromptSafetyAttributes"]);return s!=null&&g(r,["positivePromptSafetyAttributes"],YVe(s)),r}function Uer(t,e,r){let n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let s=m(t,["durationSeconds"]);if(e!==void 0&&s!=null&&g(e,["parameters","durationSeconds"],s),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);let a=m(t,["resolution"]);e!==void 0&&a!=null&&g(e,["parameters","resolution"],a);let u=m(t,["personGeneration"]);if(e!==void 0&&u!=null&&g(e,["parameters","personGeneration"],u),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=m(t,["negativePrompt"]);e!==void 0&&c!=null&&g(e,["parameters","negativePrompt"],c);let l=m(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&g(e,["parameters","enhancePrompt"],l),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let d=m(t,["lastFrame"]);e!==void 0&&d!=null&&g(e,["instances[0]","lastFrame"],vF(d));let p=m(t,["referenceImages"]);if(e!==void 0&&p!=null){let f=p;Array.isArray(f)&&(f=f.map(h=>Vtr(h))),g(e,["instances[0]","referenceImages"],f)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Ker(t,e,r){let n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);let s=m(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);let o=m(t,["fps"]);e!==void 0&&o!=null&&g(e,["parameters","fps"],o);let a=m(t,["durationSeconds"]);e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a);let u=m(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);let c=m(t,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);let l=m(t,["resolution"]);e!==void 0&&l!=null&&g(e,["parameters","resolution"],l);let d=m(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);let p=m(t,["pubsubTopic"]);e!==void 0&&p!=null&&g(e,["parameters","pubsubTopic"],p);let f=m(t,["negativePrompt"]);e!==void 0&&f!=null&&g(e,["parameters","negativePrompt"],f);let h=m(t,["enhancePrompt"]);e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h);let y=m(t,["generateAudio"]);e!==void 0&&y!=null&&g(e,["parameters","generateAudio"],y);let E=m(t,["lastFrame"]);e!==void 0&&E!=null&&g(e,["instances[0]","lastFrame"],nd(E));let v=m(t,["referenceImages"]);if(e!==void 0&&v!=null){let A=v;Array.isArray(A)&&(A=A.map(C=>Gtr(C))),g(e,["instances[0]","referenceImages"],A)}let w=m(t,["mask"]);e!==void 0&&w!=null&&g(e,["instances[0]","mask"],Ktr(w));let T=m(t,["compressionQuality"]);return e!==void 0&&T!=null&&g(e,["parameters","compressionQuality"],T),n}function Ver(t,e){let r={},n=m(t,["name"]);n!=null&&g(r,["name"],n);let i=m(t,["metadata"]);i!=null&&g(r,["metadata"],i);let s=m(t,["done"]);s!=null&&g(r,["done"],s);let o=m(t,["error"]);o!=null&&g(r,["error"],o);let a=m(t,["response","generateVideoResponse"]);return a!=null&&g(r,["response"],Wer(a)),r}function Ger(t,e){let r={},n=m(t,["name"]);n!=null&&g(r,["name"],n);let i=m(t,["metadata"]);i!=null&&g(r,["metadata"],i);let s=m(t,["done"]);s!=null&&g(r,["done"],s);let o=m(t,["error"]);o!=null&&g(r,["error"],o);let a=m(t,["response"]);return a!=null&&g(r,["response"],Jer(a)),r}function Her(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);let o=m(e,["image"]);o!=null&&g(n,["instances[0]","image"],vF(o));let a=m(e,["video"]);a!=null&&g(n,["instances[0]","video"],XVe(a));let u=m(e,["source"]);u!=null&&Yer(u,n);let c=m(e,["config"]);return c!=null&&Uer(c,n),n}function zer(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);let o=m(e,["image"]);o!=null&&g(n,["instances[0]","image"],nd(o));let a=m(e,["video"]);a!=null&&g(n,["instances[0]","video"],ZVe(a));let u=m(e,["source"]);u!=null&&Qer(u,n);let c=m(e,["config"]);return c!=null&&Ker(c,n),n}function Wer(t,e){let r={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>etr(a))),g(r,["generatedVideos"],o)}let i=m(t,["raiMediaFilteredCount"]);i!=null&&g(r,["raiMediaFilteredCount"],i);let s=m(t,["raiMediaFilteredReasons"]);return s!=null&&g(r,["raiMediaFilteredReasons"],s),r}function Jer(t,e){let r={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ttr(a))),g(r,["generatedVideos"],o)}let i=m(t,["raiMediaFilteredCount"]);i!=null&&g(r,["raiMediaFilteredCount"],i);let s=m(t,["raiMediaFilteredReasons"]);return s!=null&&g(r,["raiMediaFilteredReasons"],s),r}function Yer(t,e,r){let n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);let s=m(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],vF(s));let o=m(t,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],XVe(o)),n}function Qer(t,e,r){let n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);let s=m(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],nd(s));let o=m(t,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],ZVe(o)),n}function Xer(t,e){let r={},n=m(t,["_self"]);n!=null&&g(r,["image"],ctr(n));let i=m(t,["raiFilteredReason"]);i!=null&&g(r,["raiFilteredReason"],i);let s=m(t,["_self"]);return s!=null&&g(r,["safetyAttributes"],JVe(s)),r}function EF(t,e){let r={},n=m(t,["_self"]);n!=null&&g(r,["image"],WVe(n));let i=m(t,["raiFilteredReason"]);i!=null&&g(r,["raiFilteredReason"],i);let s=m(t,["_self"]);s!=null&&g(r,["safetyAttributes"],YVe(s));let o=m(t,["prompt"]);return o!=null&&g(r,["enhancedPrompt"],o),r}function Zer(t,e){let r={},n=m(t,["_self"]);n!=null&&g(r,["mask"],WVe(n));let i=m(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(r,["labels"],s)}return r}function etr(t,e){let r={},n=m(t,["video"]);return n!=null&&g(r,["video"],$tr(n)),r}function ttr(t,e){let r={},n=m(t,["_self"]);return n!=null&&g(r,["video"],Utr(n)),r}function rtr(t,e){let r={},n=m(t,["modelSelectionConfig"]);n!=null&&g(r,["modelConfig"],n);let i=m(t,["responseJsonSchema"]);i!=null&&g(r,["responseJsonSchema"],i);let s=m(t,["audioTimestamp"]);s!=null&&g(r,["audioTimestamp"],s);let o=m(t,["candidateCount"]);o!=null&&g(r,["candidateCount"],o);let a=m(t,["enableAffectiveDialog"]);a!=null&&g(r,["enableAffectiveDialog"],a);let u=m(t,["frequencyPenalty"]);u!=null&&g(r,["frequencyPenalty"],u);let c=m(t,["logprobs"]);c!=null&&g(r,["logprobs"],c);let l=m(t,["maxOutputTokens"]);l!=null&&g(r,["maxOutputTokens"],l);let d=m(t,["mediaResolution"]);d!=null&&g(r,["mediaResolution"],d);let p=m(t,["presencePenalty"]);p!=null&&g(r,["presencePenalty"],p);let f=m(t,["responseLogprobs"]);f!=null&&g(r,["responseLogprobs"],f);let h=m(t,["responseMimeType"]);h!=null&&g(r,["responseMimeType"],h);let y=m(t,["responseModalities"]);y!=null&&g(r,["responseModalities"],y);let E=m(t,["responseSchema"]);E!=null&&g(r,["responseSchema"],E);let v=m(t,["routingConfig"]);v!=null&&g(r,["routingConfig"],v);let w=m(t,["seed"]);w!=null&&g(r,["seed"],w);let T=m(t,["speechConfig"]);T!=null&&g(r,["speechConfig"],T);let A=m(t,["stopSequences"]);A!=null&&g(r,["stopSequences"],A);let C=m(t,["temperature"]);C!=null&&g(r,["temperature"],C);let x=m(t,["thinkingConfig"]);x!=null&&g(r,["thinkingConfig"],x);let R=m(t,["topK"]);R!=null&&g(r,["topK"],R);let M=m(t,["topP"]);if(M!=null&&g(r,["topP"],M),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function ntr(t,e,r){let n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Mr(t,i)),n}function itr(t,e,r){let n={},i=m(e,["model"]);return i!=null&&g(n,["_url","name"],Mr(t,i)),n}function str(t,e){let r={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=m(t,["enableWidget"]);return n!=null&&g(r,["enableWidget"],n),r}function otr(t,e){let r={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=m(t,["timeRangeFilter"]);return n!=null&&g(r,["timeRangeFilter"],n),r}function atr(t,e){let r={},n=m(t,["aspectRatio"]);n!=null&&g(r,["aspectRatio"],n);let i=m(t,["imageSize"]);if(i!=null&&g(r,["imageSize"],i),m(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return r}function utr(t,e){let r={},n=m(t,["aspectRatio"]);n!=null&&g(r,["aspectRatio"],n);let i=m(t,["imageSize"]);i!=null&&g(r,["imageSize"],i);let s=m(t,["personGeneration"]);s!=null&&g(r,["personGeneration"],s);let o=m(t,["outputMimeType"]);o!=null&&g(r,["imageOutputOptions","mimeType"],o);let a=m(t,["outputCompressionQuality"]);return a!=null&&g(r,["imageOutputOptions","compressionQuality"],a),r}function ctr(t,e){let r={},n=m(t,["bytesBase64Encoded"]);n!=null&&g(r,["imageBytes"],Am(n));let i=m(t,["mimeType"]);return i!=null&&g(r,["mimeType"],i),r}function WVe(t,e){let r={},n=m(t,["gcsUri"]);n!=null&&g(r,["gcsUri"],n);let i=m(t,["bytesBase64Encoded"]);i!=null&&g(r,["imageBytes"],Am(i));let s=m(t,["mimeType"]);return s!=null&&g(r,["mimeType"],s),r}function vF(t,e){let r={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=m(t,["imageBytes"]);n!=null&&g(r,["bytesBase64Encoded"],Am(n));let i=m(t,["mimeType"]);return i!=null&&g(r,["mimeType"],i),r}function nd(t,e){let r={},n=m(t,["gcsUri"]);n!=null&&g(r,["gcsUri"],n);let i=m(t,["imageBytes"]);i!=null&&g(r,["bytesBase64Encoded"],Am(i));let s=m(t,["mimeType"]);return s!=null&&g(r,["mimeType"],s),r}function ltr(t,e,r,n){let i={},s=m(e,["pageSize"]);r!==void 0&&s!=null&&g(r,["_query","pageSize"],s);let o=m(e,["pageToken"]);r!==void 0&&o!=null&&g(r,["_query","pageToken"],o);let a=m(e,["filter"]);r!==void 0&&a!=null&&g(r,["_query","filter"],a);let u=m(e,["queryBase"]);return r!==void 0&&u!=null&&g(r,["_url","models_url"],$Ve(t,u)),i}function dtr(t,e,r,n){let i={},s=m(e,["pageSize"]);r!==void 0&&s!=null&&g(r,["_query","pageSize"],s);let o=m(e,["pageToken"]);r!==void 0&&o!=null&&g(r,["_query","pageToken"],o);let a=m(e,["filter"]);r!==void 0&&a!=null&&g(r,["_query","filter"],a);let u=m(e,["queryBase"]);return r!==void 0&&u!=null&&g(r,["_url","models_url"],$Ve(t,u)),i}function ptr(t,e,r){let n={},i=m(e,["config"]);return i!=null&&ltr(t,i,n),n}function ftr(t,e,r){let n={},i=m(e,["config"]);return i!=null&&dtr(t,i,n),n}function htr(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["nextPageToken"]);i!=null&&g(r,["nextPageToken"],i);let s=m(t,["_self"]);if(s!=null){let o=UVe(s);Array.isArray(o)&&(o=o.map(a=>lae(a))),g(r,["models"],o)}return r}function mtr(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["nextPageToken"]);i!=null&&g(r,["nextPageToken"],i);let s=m(t,["_self"]);if(s!=null){let o=UVe(s);Array.isArray(o)&&(o=o.map(a=>dae(a))),g(r,["models"],o)}return r}function ytr(t,e){let r={},n=m(t,["maskMode"]);n!=null&&g(r,["maskMode"],n);let i=m(t,["segmentationClasses"]);i!=null&&g(r,["maskClasses"],i);let s=m(t,["maskDilation"]);return s!=null&&g(r,["dilation"],s),r}function lae(t,e){let r={},n=m(t,["name"]);n!=null&&g(r,["name"],n);let i=m(t,["displayName"]);i!=null&&g(r,["displayName"],i);let s=m(t,["description"]);s!=null&&g(r,["description"],s);let o=m(t,["version"]);o!=null&&g(r,["version"],o);let a=m(t,["_self"]);a!=null&&g(r,["tunedModelInfo"],ktr(a));let u=m(t,["inputTokenLimit"]);u!=null&&g(r,["inputTokenLimit"],u);let c=m(t,["outputTokenLimit"]);c!=null&&g(r,["outputTokenLimit"],c);let l=m(t,["supportedGenerationMethods"]);l!=null&&g(r,["supportedActions"],l);let d=m(t,["temperature"]);d!=null&&g(r,["temperature"],d);let p=m(t,["maxTemperature"]);p!=null&&g(r,["maxTemperature"],p);let f=m(t,["topP"]);f!=null&&g(r,["topP"],f);let h=m(t,["topK"]);h!=null&&g(r,["topK"],h);let y=m(t,["thinking"]);return y!=null&&g(r,["thinking"],y),r}function dae(t,e){let r={},n=m(t,["name"]);n!=null&&g(r,["name"],n);let i=m(t,["displayName"]);i!=null&&g(r,["displayName"],i);let s=m(t,["description"]);s!=null&&g(r,["description"],s);let o=m(t,["versionId"]);o!=null&&g(r,["version"],o);let a=m(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(f=>Ier(f))),g(r,["endpoints"],p)}let u=m(t,["labels"]);u!=null&&g(r,["labels"],u);let c=m(t,["_self"]);c!=null&&g(r,["tunedModelInfo"],Mtr(c));let l=m(t,["defaultCheckpointId"]);l!=null&&g(r,["defaultCheckpointId"],l);let d=m(t,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>f)),g(r,["checkpoints"],p)}return r}function gtr(t,e){let r={},n=m(t,["mediaResolution"]);n!=null&&g(r,["mediaResolution"],n);let i=m(t,["codeExecutionResult"]);i!=null&&g(r,["codeExecutionResult"],i);let s=m(t,["executableCode"]);s!=null&&g(r,["executableCode"],s);let o=m(t,["fileData"]);o!=null&&g(r,["fileData"],Rer(o));let a=m(t,["functionCall"]);a!=null&&g(r,["functionCall"],Der(a));let u=m(t,["functionResponse"]);u!=null&&g(r,["functionResponse"],u);let c=m(t,["inlineData"]);c!=null&&g(r,["inlineData"],rer(c));let l=m(t,["text"]);l!=null&&g(r,["text"],l);let d=m(t,["thought"]);d!=null&&g(r,["thought"],d);let p=m(t,["thoughtSignature"]);p!=null&&g(r,["thoughtSignature"],p);let f=m(t,["videoMetadata"]);return f!=null&&g(r,["videoMetadata"],f),r}function btr(t,e){let r={},n=m(t,["productImage"]);return n!=null&&g(r,["image"],nd(n)),r}function _tr(t,e,r){let n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);let s=m(t,["baseSteps"]);e!==void 0&&s!=null&&g(e,["parameters","baseSteps"],s);let o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);let a=m(t,["seed"]);e!==void 0&&a!=null&&g(e,["parameters","seed"],a);let u=m(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);let c=m(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);let l=m(t,["addWatermark"]);e!==void 0&&l!=null&&g(e,["parameters","addWatermark"],l);let d=m(t,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);let p=m(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);let f=m(t,["enhancePrompt"]);e!==void 0&&f!=null&&g(e,["parameters","enhancePrompt"],f);let h=m(t,["labels"]);return e!==void 0&&h!=null&&g(e,["labels"],h),n}function Etr(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["source"]);s!=null&&Str(s,n);let o=m(e,["config"]);return o!=null&&_tr(o,n),n}function vtr(t,e){let r={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>EF(s))),g(r,["generatedImages"],i)}return r}function Str(t,e,r){let n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);let s=m(t,["personImage"]);e!==void 0&&s!=null&&g(e,["instances[0]","personImage","image"],nd(s));let o=m(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>btr(u))),g(e,["instances[0]","productImages"],a)}return n}function wtr(t,e){let r={},n=m(t,["referenceImage"]);n!=null&&g(r,["referenceImage"],nd(n));let i=m(t,["referenceId"]);i!=null&&g(r,["referenceId"],i);let s=m(t,["referenceType"]);s!=null&&g(r,["referenceType"],s);let o=m(t,["maskImageConfig"]);o!=null&&g(r,["maskImageConfig"],ytr(o));let a=m(t,["controlImageConfig"]);a!=null&&g(r,["controlImageConfig"],cer(a));let u=m(t,["styleImageConfig"]);u!=null&&g(r,["styleImageConfig"],u);let c=m(t,["subjectImageConfig"]);return c!=null&&g(r,["subjectImageConfig"],c),r}function JVe(t,e){let r={},n=m(t,["safetyAttributes","categories"]);n!=null&&g(r,["categories"],n);let i=m(t,["safetyAttributes","scores"]);i!=null&&g(r,["scores"],i);let s=m(t,["contentType"]);return s!=null&&g(r,["contentType"],s),r}function YVe(t,e){let r={},n=m(t,["safetyAttributes","categories"]);n!=null&&g(r,["categories"],n);let i=m(t,["safetyAttributes","scores"]);i!=null&&g(r,["scores"],i);let s=m(t,["contentType"]);return s!=null&&g(r,["contentType"],s),r}function Atr(t,e){let r={},n=m(t,["category"]);if(n!=null&&g(r,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=m(t,["threshold"]);return i!=null&&g(r,["threshold"],i),r}function Ctr(t,e){let r={},n=m(t,["image"]);return n!=null&&g(r,["image"],nd(n)),r}function Ttr(t,e,r){let n={},i=m(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);let s=m(t,["maxPredictions"]);e!==void 0&&s!=null&&g(e,["parameters","maxPredictions"],s);let o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&g(e,["parameters","confidenceThreshold"],o);let a=m(t,["maskDilation"]);e!==void 0&&a!=null&&g(e,["parameters","maskDilation"],a);let u=m(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&g(e,["parameters","binaryColorThreshold"],u);let c=m(t,["labels"]);return e!==void 0&&c!=null&&g(e,["labels"],c),n}function Otr(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["source"]);s!=null&&Itr(s,n);let o=m(e,["config"]);return o!=null&&Ttr(o,n),n}function xtr(t,e){let r={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Zer(s))),g(r,["generatedMasks"],i)}return r}function Itr(t,e,r){let n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);let s=m(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],nd(s));let o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&g(e,["instances[0]","scribble"],Ctr(o)),n}function Rtr(t,e){let r={},n=m(t,["retrievalConfig"]);n!=null&&g(r,["retrievalConfig"],n);let i=m(t,["functionCallingConfig"]);return i!=null&&g(r,["functionCallingConfig"],ker(i)),r}function Dtr(t,e){let r={};if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=m(t,["computerUse"]);n!=null&&g(r,["computerUse"],n);let i=m(t,["fileSearch"]);i!=null&&g(r,["fileSearch"],i);let s=m(t,["codeExecution"]);if(s!=null&&g(r,["codeExecution"],s),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=m(t,["functionDeclarations"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>p)),g(r,["functionDeclarations"],d)}let a=m(t,["googleMaps"]);a!=null&&g(r,["googleMaps"],str(a));let u=m(t,["googleSearch"]);u!=null&&g(r,["googleSearch"],otr(u));let c=m(t,["googleSearchRetrieval"]);c!=null&&g(r,["googleSearchRetrieval"],c);let l=m(t,["urlContext"]);return l!=null&&g(r,["urlContext"],l),r}function QVe(t,e){let r={},n=m(t,["retrieval"]);n!=null&&g(r,["retrieval"],n);let i=m(t,["computerUse"]);if(i!=null&&g(r,["computerUse"],i),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=m(t,["codeExecution"]);s!=null&&g(r,["codeExecution"],s);let o=m(t,["enterpriseWebSearch"]);o!=null&&g(r,["enterpriseWebSearch"],o);let a=m(t,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(f=>Mer(f))),g(r,["functionDeclarations"],p)}let u=m(t,["googleMaps"]);u!=null&&g(r,["googleMaps"],u);let c=m(t,["googleSearch"]);c!=null&&g(r,["googleSearch"],c);let l=m(t,["googleSearchRetrieval"]);l!=null&&g(r,["googleSearchRetrieval"],l);let d=m(t,["urlContext"]);return d!=null&&g(r,["urlContext"],d),r}function ktr(t,e){let r={},n=m(t,["baseModel"]);n!=null&&g(r,["baseModel"],n);let i=m(t,["createTime"]);i!=null&&g(r,["createTime"],i);let s=m(t,["updateTime"]);return s!=null&&g(r,["updateTime"],s),r}function Mtr(t,e){let r={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(r,["baseModel"],n);let i=m(t,["createTime"]);i!=null&&g(r,["createTime"],i);let s=m(t,["updateTime"]);return s!=null&&g(r,["updateTime"],s),r}function Ptr(t,e,r){let n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);let s=m(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);let o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),n}function Ntr(t,e,r){let n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);let s=m(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);let o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),n}function Ftr(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","name"],Mr(t,i));let s=m(e,["config"]);return s!=null&&Ptr(s,n),n}function Btr(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["config"]);return s!=null&&Ntr(s,n),n}function qtr(t,e,r){let n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);let s=m(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&g(e,["parameters","safetySetting"],s);let o=m(t,["personGeneration"]);e!==void 0&&o!=null&&g(e,["parameters","personGeneration"],o);let a=m(t,["includeRaiReason"]);e!==void 0&&a!=null&&g(e,["parameters","includeRaiReason"],a);let u=m(t,["outputMimeType"]);e!==void 0&&u!=null&&g(e,["parameters","outputOptions","mimeType"],u);let c=m(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","compressionQuality"],c);let l=m(t,["enhanceInputImage"]);e!==void 0&&l!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],l);let d=m(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],d);let p=m(t,["labels"]);e!==void 0&&p!=null&&g(e,["labels"],p);let f=m(t,["numberOfImages"]);e!==void 0&&f!=null&&g(e,["parameters","sampleCount"],f);let h=m(t,["mode"]);return e!==void 0&&h!=null&&g(e,["parameters","mode"],h),n}function Ltr(t,e,r){let n={},i=m(e,["model"]);i!=null&&g(n,["_url","model"],Mr(t,i));let s=m(e,["image"]);s!=null&&g(n,["instances[0]","image"],nd(s));let o=m(e,["upscaleFactor"]);o!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],o);let a=m(e,["config"]);return a!=null&&qtr(a,n),n}function jtr(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>EF(o))),g(r,["generatedImages"],s)}return r}function $tr(t,e){let r={},n=m(t,["uri"]);n!=null&&g(r,["uri"],n);let i=m(t,["encodedVideo"]);i!=null&&g(r,["videoBytes"],Am(i));let s=m(t,["encoding"]);return s!=null&&g(r,["mimeType"],s),r}function Utr(t,e){let r={},n=m(t,["gcsUri"]);n!=null&&g(r,["uri"],n);let i=m(t,["bytesBase64Encoded"]);i!=null&&g(r,["videoBytes"],Am(i));let s=m(t,["mimeType"]);return s!=null&&g(r,["mimeType"],s),r}function Ktr(t,e){let r={},n=m(t,["image"]);n!=null&&g(r,["_self"],nd(n));let i=m(t,["maskMode"]);return i!=null&&g(r,["maskMode"],i),r}function Vtr(t,e){let r={},n=m(t,["image"]);n!=null&&g(r,["image"],vF(n));let i=m(t,["referenceType"]);return i!=null&&g(r,["referenceType"],i),r}function Gtr(t,e){let r={},n=m(t,["image"]);n!=null&&g(r,["image"],nd(n));let i=m(t,["referenceType"]);return i!=null&&g(r,["referenceType"],i),r}function XVe(t,e){let r={},n=m(t,["uri"]);n!=null&&g(r,["uri"],n);let i=m(t,["videoBytes"]);i!=null&&g(r,["encodedVideo"],Am(i));let s=m(t,["mimeType"]);return s!=null&&g(r,["encoding"],s),r}function ZVe(t,e){let r={},n=m(t,["uri"]);n!=null&&g(r,["gcsUri"],n);let i=m(t,["videoBytes"]);i!=null&&g(r,["bytesBase64Encoded"],Am(i));let s=m(t,["mimeType"]);return s!=null&&g(r,["mimeType"],s),r}function Htr(t,e){let r={},n=m(t,["displayName"]);return e!==void 0&&n!=null&&g(e,["displayName"],n),r}function ztr(t){let e={},r=m(t,["config"]);return r!=null&&Htr(r,e),e}function Wtr(t,e){let r={},n=m(t,["force"]);return e!==void 0&&n!=null&&g(e,["_query","force"],n),r}function Jtr(t){let e={},r=m(t,["name"]);r!=null&&g(e,["_url","name"],r);let n=m(t,["config"]);return n!=null&&Wtr(n,e),e}function Ytr(t){let e={},r=m(t,["name"]);return r!=null&&g(e,["_url","name"],r),e}function Qtr(t,e){let r={},n=m(t,["customMetadata"]);if(e!==void 0&&n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["customMetadata"],s)}let i=m(t,["chunkingConfig"]);return e!==void 0&&i!=null&&g(e,["chunkingConfig"],i),r}function Xtr(t){let e={},r=m(t,["name"]);r!=null&&g(e,["name"],r);let n=m(t,["metadata"]);n!=null&&g(e,["metadata"],n);let i=m(t,["done"]);i!=null&&g(e,["done"],i);let s=m(t,["error"]);s!=null&&g(e,["error"],s);let o=m(t,["response"]);return o!=null&&g(e,["response"],err(o)),e}function Ztr(t){let e={},r=m(t,["fileSearchStoreName"]);r!=null&&g(e,["_url","file_search_store_name"],r);let n=m(t,["fileName"]);n!=null&&g(e,["fileName"],n);let i=m(t,["config"]);return i!=null&&Qtr(i,e),e}function err(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["parent"]);n!=null&&g(e,["parent"],n);let i=m(t,["documentName"]);return i!=null&&g(e,["documentName"],i),e}function trr(t,e){let r={},n=m(t,["pageSize"]);e!==void 0&&n!=null&&g(e,["_query","pageSize"],n);let i=m(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),r}function rrr(t){let e={},r=m(t,["config"]);return r!=null&&trr(r,e),e}function nrr(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["nextPageToken"]);n!=null&&g(e,["nextPageToken"],n);let i=m(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["fileSearchStores"],s)}return e}function eGe(t,e){let r={},n=m(t,["mimeType"]);e!==void 0&&n!=null&&g(e,["mimeType"],n);let i=m(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);let s=m(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}let o=m(t,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),r}function irr(t){let e={},r=m(t,["fileSearchStoreName"]);r!=null&&g(e,["_url","file_search_store_name"],r);let n=m(t,["config"]);return n!=null&&eGe(n,e),e}function srr(t){let e={},r=m(t,["sdkHttpResponse"]);return r!=null&&g(e,["sdkHttpResponse"],r),e}async function hVe(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let r=t.status,n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(n);throw r>=400&&r<600?new KA({message:i,status:r}):new Error(i)}}function frr(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,o){let a=Object.assign({},s);for(let u in o)if(Object.prototype.hasOwnProperty.call(o,u)){let c=o[u],l=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&l&&typeof l=="object"&&!Array.isArray(l)?a[u]=n(l,c):(l&&c&&typeof l!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof l}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}let i=n(r,e);t.body=JSON.stringify(i)}function tGe(t){for(let e of t)if(yrr(e)||typeof e=="object"&&"inputSchema"in e)return!0;return mrr}function rGe(t){var e;let r=(e=t[pae])!==null&&e!==void 0?e:"";t[pae]=(r+` ${hrr}`).trimStart()}function yrr(t){return t!==null&&typeof t=="object"&&t instanceof hae}function grr(t){return ed(this,arguments,function*(r,n=100){let i,s=0;for(;s<n;){let o=yield xt(r.listTools({cursor:i}));for(let a of o.tools)yield yield xt(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}async function brr(t,e,r){let n=new rae,i;r.data instanceof Blob?i=JSON.parse(await r.data.text()):i=JSON.parse(r.data),Object.assign(n,i),e(n)}function _rr(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function Err(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}async function Srr(t,e,r){let n=new tae,i;r.data instanceof Blob?i=await r.data.text():r.data instanceof ArrayBuffer?i=new TextDecoder().decode(r.data):i=r.data;let s=JSON.parse(i);if(t.isVertexAI()){let o=JZt(s);Object.assign(n,o)}else Object.assign(n,s);e(n)}function Arr(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function Crr(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}function yVe(t){var e,r,n;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let o of(r=t?.tools)!==null&&r!==void 0?r:[])if(l4(o)){i=!0;break}if(!i)return!0;let s=(n=t?.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function l4(t){return"callTool"in t&&typeof t.callTool=="function"}function Trr(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(i=>l4(i)))!==null&&n!==void 0?n:!1}function gVe(t){var e;let r=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((n,i)=>{if(l4(n))return;let s=n;s.functionDeclarations&&s.functionDeclarations.length>0&&r.push(i)}),r}function bVe(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}function Orr(t){let e={},r=m(t,["data"]);if(r!=null&&g(e,["data"],r),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function xrr(t){let e={},r=m(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Brr(s))),g(e,["parts"],i)}let n=m(t,["role"]);return n!=null&&g(e,["role"],n),e}function Irr(t,e,r){let n={},i=m(e,["expireTime"]);r!==void 0&&i!=null&&g(r,["expireTime"],i);let s=m(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&g(r,["newSessionExpireTime"],s);let o=m(e,["uses"]);r!==void 0&&o!=null&&g(r,["uses"],o);let a=m(e,["liveConnectConstraints"]);r!==void 0&&a!=null&&g(r,["bidiGenerateContentSetup"],Frr(t,a));let u=m(e,["lockAdditionalFields"]);return r!==void 0&&u!=null&&g(r,["fieldMask"],u),n}function Rrr(t,e){let r={},n=m(e,["config"]);return n!=null&&g(r,["config"],Irr(t,n,r)),r}function Drr(t){let e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=m(t,["fileUri"]);r!=null&&g(e,["fileUri"],r);let n=m(t,["mimeType"]);return n!=null&&g(e,["mimeType"],n),e}function krr(t){let e={},r=m(t,["id"]);r!=null&&g(e,["id"],r);let n=m(t,["args"]);n!=null&&g(e,["args"],n);let i=m(t,["name"]);if(i!=null&&g(e,["name"],i),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Mrr(t){let e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=m(t,["enableWidget"]);return r!=null&&g(e,["enableWidget"],r),e}function Prr(t){let e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=m(t,["timeRangeFilter"]);return r!=null&&g(e,["timeRangeFilter"],r),e}function Nrr(t,e){let r={},n=m(t,["generationConfig"]);e!==void 0&&n!=null&&g(e,["setup","generationConfig"],n);let i=m(t,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);let s=m(t,["temperature"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","temperature"],s);let o=m(t,["topP"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","topP"],o);let a=m(t,["topK"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","topK"],a);let u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","maxOutputTokens"],u);let c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","mediaResolution"],c);let l=m(t,["seed"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","seed"],l);let d=m(t,["speechConfig"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","speechConfig"],Vae(d));let p=m(t,["thinkingConfig"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","thinkingConfig"],p);let f=m(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=m(t,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["setup","systemInstruction"],xrr(Co(h)));let y=m(t,["tools"]);if(e!==void 0&&y!=null){let x=h4(y);Array.isArray(x)&&(x=x.map(R=>Lrr(f4(R)))),g(e,["setup","tools"],x)}let E=m(t,["sessionResumption"]);e!==void 0&&E!=null&&g(e,["setup","sessionResumption"],qrr(E));let v=m(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&g(e,["setup","inputAudioTranscription"],v);let w=m(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&g(e,["setup","outputAudioTranscription"],w);let T=m(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&g(e,["setup","realtimeInputConfig"],T);let A=m(t,["contextWindowCompression"]);e!==void 0&&A!=null&&g(e,["setup","contextWindowCompression"],A);let C=m(t,["proactivity"]);if(e!==void 0&&C!=null&&g(e,["setup","proactivity"],C),m(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function Frr(t,e){let r={},n=m(e,["model"]);n!=null&&g(r,["setup","model"],Mr(t,n));let i=m(e,["config"]);return i!=null&&g(r,["config"],Nrr(i,r)),r}function Brr(t){let e={},r=m(t,["mediaResolution"]);r!=null&&g(e,["mediaResolution"],r);let n=m(t,["codeExecutionResult"]);n!=null&&g(e,["codeExecutionResult"],n);let i=m(t,["executableCode"]);i!=null&&g(e,["executableCode"],i);let s=m(t,["fileData"]);s!=null&&g(e,["fileData"],Drr(s));let o=m(t,["functionCall"]);o!=null&&g(e,["functionCall"],krr(o));let a=m(t,["functionResponse"]);a!=null&&g(e,["functionResponse"],a);let u=m(t,["inlineData"]);u!=null&&g(e,["inlineData"],Orr(u));let c=m(t,["text"]);c!=null&&g(e,["text"],c);let l=m(t,["thought"]);l!=null&&g(e,["thought"],l);let d=m(t,["thoughtSignature"]);d!=null&&g(e,["thoughtSignature"],d);let p=m(t,["videoMetadata"]);return p!=null&&g(e,["videoMetadata"],p),e}function qrr(t){let e={},r=m(t,["handle"]);if(r!=null&&g(e,["handle"],r),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Lrr(t){let e={};if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=m(t,["computerUse"]);r!=null&&g(e,["computerUse"],r);let n=m(t,["fileSearch"]);n!=null&&g(e,["fileSearch"],n);let i=m(t,["codeExecution"]);if(i!=null&&g(e,["codeExecution"],i),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=m(t,["functionDeclarations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>d)),g(e,["functionDeclarations"],l)}let o=m(t,["googleMaps"]);o!=null&&g(e,["googleMaps"],Mrr(o));let a=m(t,["googleSearch"]);a!=null&&g(e,["googleSearch"],Prr(a));let u=m(t,["googleSearchRetrieval"]);u!=null&&g(e,["googleSearchRetrieval"],u);let c=m(t,["urlContext"]);return c!=null&&g(e,["urlContext"],c),e}function jrr(t){let e=[];for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){let i=Object.keys(n).map(s=>`${r}.${s}`);e.push(...i)}else e.push(r)}return e.join(",")}function $rr(t,e){let r=null,n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){let s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(r){let s=jrr(r);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));let u=[];s&&u.push(s),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}function Urr(t,e){let r={},n=m(t,["force"]);return e!==void 0&&n!=null&&g(e,["_query","force"],n),r}function Krr(t){let e={},r=m(t,["name"]);r!=null&&g(e,["_url","name"],r);let n=m(t,["config"]);return n!=null&&Urr(n,e),e}function Vrr(t){let e={},r=m(t,["name"]);return r!=null&&g(e,["_url","name"],r),e}function Grr(t,e){let r={},n=m(t,["pageSize"]);e!==void 0&&n!=null&&g(e,["_query","pageSize"],n);let i=m(t,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),r}function Hrr(t){let e={},r=m(t,["parent"]);r!=null&&g(e,["_url","parent"],r);let n=m(t,["config"]);return n!=null&&Grr(n,e),e}function zrr(t){let e={},r=m(t,["sdkHttpResponse"]);r!=null&&g(e,["sdkHttpResponse"],r);let n=m(t,["nextPageToken"]);n!=null&&g(e,["nextPageToken"],n);let i=m(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["documents"],s)}return e}function Aae(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}function Zrr(t){if(!t)return!0;for(let e in t)return!1;return!0}function enr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function inr(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}function onr(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let i=n[1]||0,s=n[2]||0,o=n[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}function unr(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function iGe(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function cnr(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return iGe({start(){},async pull(r){let{done:n,value:i}=await e.next();n?r.close():r.enqueue(i)},async cancel(){var r;await((r=e.return)===null||r===void 0?void 0:r.call(e))}})}function sGe(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function lnr(t){var e,r;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((r=(e=t[Symbol.asyncIterator]()).return)===null||r===void 0?void 0:r.call(e));return}let n=t.getReader(),i=n.cancel();n.releaseLock(),await i}function Foe(t,e,r){return oGe(),new File(t,e??"unknown_file",r)}function pnr(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}async function ynr(t,e,r){if(oGe(),t=await t,hnr(t))return t instanceof File?t:Foe([await t.arrayBuffer()],t.name);if(mnr(t)){let i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Foe(await Oae(i),e,r)}let n=await Oae(t);if(e||(e=pnr(t)),!r?.type){let i=n.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(r=Object.assign(Object.assign({},r),{type:i}))}return Foe(n,e,r)}async function Oae(t){var e,r,n,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(aGe(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(fnr(t))try{for(var a=!0,u=td(t),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let l=i;o.push(...await Oae(l))}}catch(l){r={error:l}}finally{try{!a&&!e&&(n=u.return)&&await n.call(u)}finally{if(r)throw r.error}}else{let l=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${l?`; constructor: ${l}`:""}${gnr(t)}`)}return o}function gnr(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function uGe(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}function _nr(t){let e=0;for(let i of t)e+=i.length;let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}function Hae(t){let e;return(BN??(e=new globalThis.TextEncoder,BN=e.encode.bind(e)))(t)}function wVe(t){let e;return(qN??(e=new globalThis.TextDecoder,qN=e.decode.bind(e)))(t)}function Enr(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function vnr(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}function UA(){}function LN(t,e,r){return!e||mF[t]>mF[r]?UA:e[t].bind(e)}function ea(t){var e;let r=t.logger,n=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!r)return Snr;let i=CVe.get(r);if(i&&i[0]===n)return i[1];let s={error:LN("error",r,n),warn:LN("warn",r,n),info:LN("info",r,n),debug:LN("debug",r,n)};return CVe.set(r,[n,s]),s}function wnr(t,e){return ed(this,arguments,function*(){var n,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new $a("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new $a("Attempted to iterate over a response with no body");let a=new Iae,u=new p4,c=sGe(t.body);try{for(var l=!0,d=td(Anr(c)),p;p=yield xt(d.next()),n=p.done,!n;l=!0){o=p.value,l=!1;let f=o;for(let h of u.decode(f)){let y=a.decode(h);y&&(yield yield xt(y))}}}catch(f){i={error:f}}finally{try{!l&&!n&&(s=d.return)&&(yield xt(s.call(d)))}finally{if(i)throw i.error}}for(let f of u.flush()){let h=a.decode(f);h&&(yield yield xt(h))}})}function Anr(t){return ed(this,arguments,function*(){var r,n,i,s;let o=new Uint8Array;try{for(var a=!0,u=td(t),c;c=yield xt(u.next()),r=c.done,!r;a=!0){s=c.value,a=!1;let l=s;if(l==null)continue;let d=l instanceof ArrayBuffer?new Uint8Array(l):typeof l=="string"?Hae(l):l,p=new Uint8Array(o.length+d.length);p.set(o),p.set(d,o.length),o=p;let f;for(;(f=vnr(o))!==-1;)yield yield xt(o.slice(0,f)),o=o.slice(f)}}catch(l){n={error:l}}finally{try{!a&&!r&&(i=u.return)&&(yield xt(i.call(u)))}finally{if(n)throw n.error}}o.length>0&&(yield yield xt(o))})}function Cnr(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}async function Tnr(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return ea(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):xae.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let u=r.headers.get("content-type"),c=(a=u?.split(";")[0])===null||a===void 0?void 0:a.trim();return c?.includes("application/json")||c?.endsWith("+json")?await r.json():await r.text()})();return ea(t).debug(`[${n}] response parsed`,Hg({retryOfRequestLogID:i,url:r.url,status:r.status,body:o,durationMs:Date.now()-s})),o}function*Onr(t){if(!t)return;if(cGe in t){let{values:n,nulls:i}=t;yield*n.entries();for(let s of i)yield[s,null];return}let e=!1,r;t instanceof Headers?r=t.entries():_Ve(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let s=_Ve(n[1])?n[1]:[n[1]],o=!1;for(let a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}function xnr(t){let e;if(t){if(e=t,e.scopes){if(typeof e.scopes=="string"&&e.scopes!==$A||Array.isArray(e.scopes)&&e.scopes.indexOf($A)<0)throw new Error(`Invalid auth scopes. Scopes must include: ${$A}`)}else return e.scopes=[$A],e;return e}else return e={scopes:[$A]},e}async function Inr(t,e){var r,n,i;let s=Gae(t.file);if(s!==void 0)return await e.request({path:`files/${s}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal});if(LVe(t.file)){let o=(i=t.file.video)===null||i===void 0?void 0:i.videoBytes;if(typeof o=="string")return o;throw new Error("Failed to download generated video, Uri or videoBytes not found.")}else if(jVe(t.file)){let o=t.file.videoBytes;if(typeof o=="string")return o;throw new Error("Failed to download video, Uri or videoBytes not found.")}else throw new Error("Unsupported file type")}function Rnr(t,e){let r={},n=m(t,["name"]);return n!=null&&g(r,["_url","name"],n),r}function Dnr(t,e){let r={},n=m(t,["name"]);return n!=null&&g(r,["_url","name"],n),r}function knr(t,e){let r={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(r,["sdkHttpResponse"],n),r}function Mnr(t,e){let r={},n=m(t,["sdkHttpResponse"]);return n!=null&&g(r,["sdkHttpResponse"],n),r}function Pnr(t,e,r){let n={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=m(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&g(e,["displayName"],i),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=m(t,["epochCount"]);e!==void 0&&s!=null&&g(e,["tuningTask","hyperparameters","epochCount"],s);let o=m(t,["learningRateMultiplier"]);if(o!=null&&g(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(m(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(m(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let a=m(t,["batchSize"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","batchSize"],a);let u=m(t,["learningRate"]);if(e!==void 0&&u!=null&&g(e,["tuningTask","hyperparameters","learningRate"],u),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(m(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(m(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(m(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(m(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return n}function Nnr(t,e,r){let n={},i=m(r,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let C=m(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec"],qoe(C))}else if(i==="PREFERENCE_TUNING"){let C=m(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec"],qoe(C))}else if(i==="DISTILLATION"){let C=m(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["distillationSpec"],qoe(C))}let s=m(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&g(e,["tunedModelDisplayName"],s);let o=m(t,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);let a=m(r,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let C=m(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(a==="PREFERENCE_TUNING"){let C=m(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}else if(a==="DISTILLATION"){let C=m(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["distillationSpec","hyperParameters","epochCount"],C)}let u=m(r,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let C=m(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(u==="PREFERENCE_TUNING"){let C=m(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}else if(u==="DISTILLATION"){let C=m(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["distillationSpec","hyperParameters","learningRateMultiplier"],C)}let c=m(r,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let C=m(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(c==="PREFERENCE_TUNING"){let C=m(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}else if(c==="DISTILLATION"){let C=m(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["distillationSpec","exportLastCheckpointOnly"],C)}let l=m(r,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let C=m(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(l==="PREFERENCE_TUNING"){let C=m(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}else if(l==="DISTILLATION"){let C=m(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["distillationSpec","hyperParameters","adapterSize"],C)}let d=m(r,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let C=m(t,["tuningMode"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","tuningMode"],C)}let p=m(t,["customBaseModel"]);e!==void 0&&p!=null&&g(e,["customBaseModel"],p);let f=m(r,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let C=m(t,["batchSize"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","batchSize"],C)}let h=m(r,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){let C=m(t,["learningRate"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRate"],C)}let y=m(t,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);let E=m(t,["beta"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],E);let v=m(t,["baseTeacherModel"]);e!==void 0&&v!=null&&g(e,["distillationSpec","baseTeacherModel"],v);let w=m(t,["tunedTeacherModelSource"]);e!==void 0&&w!=null&&g(e,["distillationSpec","tunedTeacherModelSource"],w);let T=m(t,["sftLossWeightMultiplier"]);e!==void 0&&T!=null&&g(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],T);let A=m(t,["outputUri"]);return e!==void 0&&A!=null&&g(e,["outputUri"],A),n}function Fnr(t,e){let r={},n=m(t,["baseModel"]);n!=null&&g(r,["baseModel"],n);let i=m(t,["preTunedModel"]);i!=null&&g(r,["preTunedModel"],i);let s=m(t,["trainingDataset"]);s!=null&&znr(s);let o=m(t,["config"]);return o!=null&&Pnr(o,r),r}function Bnr(t,e){let r={},n=m(t,["baseModel"]);n!=null&&g(r,["baseModel"],n);let i=m(t,["preTunedModel"]);i!=null&&g(r,["preTunedModel"],i);let s=m(t,["trainingDataset"]);s!=null&&Wnr(s,r,e);let o=m(t,["config"]);return o!=null&&Nnr(o,r,e),r}function qnr(t,e){let r={},n=m(t,["name"]);return n!=null&&g(r,["_url","name"],n),r}function Lnr(t,e){let r={},n=m(t,["name"]);return n!=null&&g(r,["_url","name"],n),r}function jnr(t,e,r){let n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);let s=m(t,["pageToken"]);e!==void 0&&s!=null&&g(e,["_query","pageToken"],s);let o=m(t,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),n}function $nr(t,e,r){let n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);let s=m(t,["pageToken"]);e!==void 0&&s!=null&&g(e,["_query","pageToken"],s);let o=m(t,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),n}function Unr(t,e){let r={},n=m(t,["config"]);return n!=null&&jnr(n,r),r}function Knr(t,e){let r={},n=m(t,["config"]);return n!=null&&$nr(n,r),r}function Vnr(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["nextPageToken"]);i!=null&&g(r,["nextPageToken"],i);let s=m(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>dGe(a))),g(r,["tuningJobs"],o)}return r}function Gnr(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["nextPageToken"]);i!=null&&g(r,["nextPageToken"],i);let s=m(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Nae(a))),g(r,["tuningJobs"],o)}return r}function Hnr(t,e){let r={},n=m(t,["name"]);n!=null&&g(r,["model"],n);let i=m(t,["name"]);return i!=null&&g(r,["endpoint"],i),r}function znr(t,e){let r={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=m(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(r,["examples","examples"],i)}return r}function Wnr(t,e,r){let n={},i=m(r,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let o=m(t,["gcsUri"]);e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){let o=m(t,["gcsUri"]);e!==void 0&&o!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(i==="DISTILLATION"){let o=m(t,["gcsUri"]);e!==void 0&&o!=null&&g(e,["distillationSpec","promptDatasetUri"],o)}let s=m(r,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){let o=m(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){let o=m(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(s==="DISTILLATION"){let o=m(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&g(e,["distillationSpec","promptDatasetUri"],o)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function dGe(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["name"]);i!=null&&g(r,["name"],i);let s=m(t,["state"]);s!=null&&g(r,["state"],qVe(s));let o=m(t,["createTime"]);o!=null&&g(r,["createTime"],o);let a=m(t,["tuningTask","startTime"]);a!=null&&g(r,["startTime"],a);let u=m(t,["tuningTask","completeTime"]);u!=null&&g(r,["endTime"],u);let c=m(t,["updateTime"]);c!=null&&g(r,["updateTime"],c);let l=m(t,["description"]);l!=null&&g(r,["description"],l);let d=m(t,["baseModel"]);d!=null&&g(r,["baseModel"],d);let p=m(t,["_self"]);return p!=null&&g(r,["tunedModel"],Hnr(p)),r}function Nae(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["name"]);i!=null&&g(r,["name"],i);let s=m(t,["state"]);s!=null&&g(r,["state"],qVe(s));let o=m(t,["createTime"]);o!=null&&g(r,["createTime"],o);let a=m(t,["startTime"]);a!=null&&g(r,["startTime"],a);let u=m(t,["endTime"]);u!=null&&g(r,["endTime"],u);let c=m(t,["updateTime"]);c!=null&&g(r,["updateTime"],c);let l=m(t,["error"]);l!=null&&g(r,["error"],l);let d=m(t,["description"]);d!=null&&g(r,["description"],d);let p=m(t,["baseModel"]);p!=null&&g(r,["baseModel"],p);let f=m(t,["tunedModel"]);f!=null&&g(r,["tunedModel"],f);let h=m(t,["preTunedModel"]);h!=null&&g(r,["preTunedModel"],h);let y=m(t,["supervisedTuningSpec"]);y!=null&&g(r,["supervisedTuningSpec"],y);let E=m(t,["preferenceOptimizationSpec"]);E!=null&&g(r,["preferenceOptimizationSpec"],E);let v=m(t,["distillationSpec"]);v!=null&&g(r,["distillationSpec"],v);let w=m(t,["tuningDataStats"]);w!=null&&g(r,["tuningDataStats"],w);let T=m(t,["encryptionSpec"]);T!=null&&g(r,["encryptionSpec"],T);let A=m(t,["partnerModelTuningSpec"]);A!=null&&g(r,["partnerModelTuningSpec"],A);let C=m(t,["customBaseModel"]);C!=null&&g(r,["customBaseModel"],C);let x=m(t,["experiment"]);x!=null&&g(r,["experiment"],x);let R=m(t,["labels"]);R!=null&&g(r,["labels"],R);let M=m(t,["outputUri"]);M!=null&&g(r,["outputUri"],M);let I=m(t,["pipelineJob"]);I!=null&&g(r,["pipelineJob"],I);let F=m(t,["serviceAccount"]);F!=null&&g(r,["serviceAccount"],F);let B=m(t,["tunedModelDisplayName"]);B!=null&&g(r,["tunedModelDisplayName"],B);let K=m(t,["veoTuningSpec"]);return K!=null&&g(r,["veoTuningSpec"],K),r}function Jnr(t,e){let r={},n=m(t,["sdkHttpResponse"]);n!=null&&g(r,["sdkHttpResponse"],n);let i=m(t,["name"]);i!=null&&g(r,["name"],i);let s=m(t,["metadata"]);s!=null&&g(r,["metadata"],s);let o=m(t,["done"]);o!=null&&g(r,["done"],o);let a=m(t,["error"]);return a!=null&&g(r,["error"],a),r}function qoe(t,e){let r={},n=m(t,["gcsUri"]);n!=null&&g(r,["validationDatasetUri"],n);let i=m(t,["vertexDatasetResource"]);return i!=null&&g(r,["validationDatasetUri"],i),r}async function Ynr(t,e,r){var n;let i=await yGe(t,e,r),s=await i?.json();if(((n=i?.headers)===null||n===void 0?void 0:n[wm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Qnr(t,e,r){var n;let i=await yGe(t,e,r),s=await i?.json();if(((n=i?.headers)===null||n===void 0?void 0:n[wm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let o=jae(s),a=new eF;return Object.assign(a,o),a}async function yGe(t,e,r){var n,i;let s=0,o=0,a=new Jg(new Response),u="upload";for(s=t.size;o<s;){let c=Math.min(pGe,s-o),l=t.slice(o,o+c);o+c>=s&&(u+=", finalize");let d=0,p=hGe;for(;d<fGe&&(a=await r.request({path:"",body:l,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((n=a?.headers)===null||n===void 0)&&n[wm]));)d++,await gGe(p),p=p*mGe;if(o+=c,((i=a?.headers)===null||i===void 0?void 0:i[wm])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Xnr(t){return{size:t.size,type:t.type}}function gGe(t){return new Promise(e=>setTimeout(e,t))}function Wg(t){var e,r,n;return(n=(r=(e=process==null?void 0:process.env)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0}function eir(t){return tir(Wg(t))}function tir(t){return t===void 0?!1:t.toLowerCase()==="true"}function rir(){let t=Wg("GOOGLE_API_KEY"),e=Wg("GEMINI_API_KEY");return t&&e&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),t||e||void 0}var OVe,xVe,bF,IVe,RVe,DVe,kVe,xQt,IQt,rd,sKe,oKe,aKe,Sm,uKe,cKe,lKe,dKe,pKe,fKe,hKe,mKe,yKe,gKe,bKe,_Ke,EKe,vKe,SKe,wKe,AKe,UN,CKe,TKe,OKe,joe,xKe,IKe,$oe,RKe,DKe,kKe,MKe,PKe,NKe,FKe,BKe,qKe,LKe,jKe,$Ke,UKe,KKe,VKe,GKe,HKe,zKe,WKe,JKe,YKe,QKe,XKe,ZKe,eVe,tVe,rVe,u4,Jg,zg,KN,VN,Uoe,Koe,Voe,Goe,GN,HN,zN,Hoe,WN,JN,YN,QN,XN,zoe,Woe,Joe,Yoe,Qoe,Xoe,Zoe,eae,ZN,tae,rae,eF,Jf,Yf,sae,oae,aae,uae,KA,cae,orr,arr,urr,pae,crr,lrr,drr,prr,fae,hrr,mrr,hae,mae,yae,vrr,gae,wrr,bae,mVe,_ae,Eae,vae,Sae,wae,nGe,Wrr,Cae,$a,Ua,VA,d4,nF,iF,sF,oF,aF,uF,cF,lF,dF,Jrr,Yrr,Tae,Qrr,Xrr,_Ve,tnr,rnr,nnr,a4,snr,EVe,vVe,NN,anr,dnr,oGe,fnr,aGe,hnr,mnr,pF,SVe,bnr,FN,fF,hF,BN,qN,p4,mF,AVe,Snr,CVe,Hg,xae,Iae,Rae,cGe,jA,Boe,lGe,yF,Ui,TVe,$A,Dae,kae,Mae,Pae,Fae,pGe,fGe,hGe,mGe,wm,Bae,qae,Znr,gF,bGe=ce(()=>{OVe=St(Z$e(),1),xVe=require("fs"),bF=St(require("fs/promises"),1),IVe=require("fs/promises"),RVe=require("node:stream"),DVe=require("node:stream/promises");iKe();kVe=St(require("path"),1);rd=class{};(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(sKe||(sKe={}));(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(oKe||(oKe={}));(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(aKe||(aKe={}));(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Sm||(Sm={}));(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(uKe||(uKe={}));(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(cKe||(cKe={}));(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(lKe||(lKe={}));(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(dKe||(dKe={}));(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(pKe||(pKe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fKe||(fKe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(hKe||(hKe={}));(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(mKe||(mKe={}));(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(yKe||(yKe={}));(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(gKe||(gKe={}));(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(bKe||(bKe={}));(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(_Ke||(_Ke={}));(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(EKe||(EKe={}));(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vKe||(vKe={}));(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(SKe||(SKe={}));(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(wKe||(wKe={}));(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(AKe||(AKe={}));(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(UN||(UN={}));(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(CKe||(CKe={}));(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TKe||(TKe={}));(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OKe||(OKe={}));(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(joe||(joe={}));(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(xKe||(xKe={}));(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(IKe||(IKe={}));(function(t){t.COLLECTION="COLLECTION"})($oe||($oe={}));(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(RKe||(RKe={}));(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(DKe||(DKe={}));(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(kKe||(kKe={}));(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(MKe||(MKe={}));(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(PKe||(PKe={}));(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(NKe||(NKe={}));(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(FKe||(FKe={}));(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(BKe||(BKe={}));(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qKe||(qKe={}));(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(LKe||(LKe={}));(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(jKe||(jKe={}));(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})($Ke||($Ke={}));(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(UKe||(UKe={}));(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(KKe||(KKe={}));(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(VKe||(VKe={}));(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(GKe||(GKe={}));(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(HKe||(HKe={}));(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zKe||(zKe={}));(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(WKe||(WKe={}));(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(JKe||(JKe={}));(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(YKe||(YKe={}));(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(QKe||(QKe={}));(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(XKe||(XKe={}));(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ZKe||(ZKe={}));(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(eVe||(eVe={}));(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(tVe||(tVe={}));(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(rVe||(rVe={}));(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(u4||(u4={}));Jg=class{constructor(e){let r={};for(let n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}},zg=class{get text(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",l=!1,d=[];for(let p of(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(let[f,h]of Object.entries(p))f!=="text"&&f!=="thought"&&f!=="thoughtSignature"&&(h!==null||h!==void 0)&&d.push(f);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;l=!0,c+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?c:void 0}get data(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",l=[];for(let d of(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(let[p,f]of Object.entries(d))p!=="inlineData"&&(f!==null||f!==void 0)&&l.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(c+=atob(d.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(l=>l.functionCall).map(l=>l.functionCall).filter(l=>l!==void 0);if(c?.length!==0)return c}get executableCode(){var e,r,n,i,s,o,a,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let l=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if(l?.length!==0)return(c=l?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,r,n,i,s,o,a,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let l=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if(l?.length!==0)return(c=l?.[0])===null||c===void 0?void 0:c.output}},KN=class{},VN=class{},Uoe=class{},Koe=class{},Voe=class{},Goe=class{},GN=class{},HN=class{},zN=class{},Hoe=class{},WN=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){let n=new t,i,s=e;return r?i=NQt(s):i=PQt(s),Object.assign(n,i),n}},JN=class{},YN=class{},QN=class{},XN=class{},zoe=class{},Woe=class{},Joe=class{},Yoe=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){let n=new t,s=UQt(e);return Object.assign(n,s),n}},Qoe=class{},Xoe=class{},Zoe=class{},eae=class{},ZN=class{},tae=class{get text(){var e,r,n;let i="",s=!1,o=[];for(let a of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&o.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,r,n;let i="",s=[];for(let o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[a,u]of Object.entries(o))a!=="inlineData"&&u!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}},rae=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}},eF=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){let n=new t,s=jae(e);return Object.assign(n,s),n}};(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Jf||(Jf={}));Yf=class{constructor(e,r,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,i)}init(e,r,n){var i,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!n||Object.keys(n).length===0?o={config:{}}:typeof n=="object"?o=Object.assign({},n):o=n,o.config&&(o.config.pageToken=r.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};sae=class extends rd{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yf(Jf.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)}}createInlinedGenerateContentRequest(e){let r=oVe(this.apiClient,e),n=r._url,i=Ge("{model}:batchGenerateContent",n),a=r.batch.inputConfig.requests,u=a.requests,c=[];for(let l of u){let d=Object.assign({},l);if(d.systemInstruction){let p=d.systemInstruction;delete d.systemInstruction;let f=d.request;f.systemInstruction=p,d.request=f}c.push(d)}return a.requests=c,delete r.config,delete r._url,delete r._query,{path:i,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){let n=r?Object.assign({},r):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),n.dest===void 0){let s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?n.dest=`${s.slice(0,-6)}/dest`:n.dest=`${s}_dest_${i}`;else if(o)n.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=fXt(this.apiClient,e);return a=Ge("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>iae(l))}else{let c=oVe(this.apiClient,e);return a=Ge("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>jN(l))}}async createEmbeddingsInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=mXt(this.apiClient,e);return s=Ge("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>jN(u))}}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=IXt(this.apiClient,e);return a=Ge("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>iae(l))}else{let c=xXt(this.apiClient,e);return a=Ge("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>jN(l))}}async cancel(e){var r,n,i,s;let o="",a={};if(this.apiClient.isVertexAI()){let u=uXt(this.apiClient,e);o=Ge("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{let u=aXt(this.apiClient,e);o=Ge("batches/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=qXt(e);return a=Ge("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=jXt(l),p=new ZN;return Object.assign(p,d),p})}else{let c=BXt(e);return a=Ge("batches",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=LXt(l),p=new ZN;return Object.assign(p,d),p})}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=gXt(this.apiClient,e);return a=Ge("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>_Xt(l))}else{let c=yXt(this.apiClient,e);return a=Ge("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>bXt(l))}}};oae=class extends rd{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yf(Jf.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=JXt(this.apiClient,e);return a=Ge("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=WXt(this.apiClient,e);return a=Ge("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=sZt(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=iZt(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=QXt(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=ZXt(l),p=new QN;return Object.assign(p,d),p})}else{let c=YXt(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=XXt(l),p=new QN;return Object.assign(p,d),p})}}async update(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=vZt(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=EZt(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=dZt(e);return a=Ge("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=fZt(l),p=new XN;return Object.assign(p,d),p})}else{let c=lZt(e);return a=Ge("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=pZt(l),p=new XN;return Object.assign(p,d),p})}}};aae=class{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new uae(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},uae=class{constructor(e,r,n,i={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),wZt(s)}async sendMessage(e){var r;await this.sendPromise;let n=Co(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,o,a;let u=await i,c=(o=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,l=u.automaticFunctionCallingHistory,d=this.getHistory(!0).length,p=[];l!=null&&(p=(a=l.slice(d))!==null&&a!==void 0?a:[]);let f=c?[c]:[];this.recordHistory(n,f,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var r;await this.sendPromise;let n=Co(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let s=await i;return this.processStreamResponse(s,n)}getHistory(e=!1){let r=e?cVe(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){return ed(this,arguments,function*(){var i,s,o,a,u,c;let l=[];try{for(var d=!0,p=td(e),f;f=yield xt(p.next()),i=f.done,!i;d=!0){a=f.value,d=!1;let h=a;if(SZt(h)){let y=(c=(u=h.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;y!==void 0&&l.push(y)}yield yield xt(h)}}catch(h){s={error:h}}finally{try{!d&&!i&&(o=p.return)&&(yield xt(o.call(p)))}finally{if(s)throw s.error}}this.recordHistory(r,l)})}recordHistory(e,r,n){let i=[];r.length>0&&r.every(s=>s.role!==void 0)?i=r:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...cVe(n)):this.history.push(e),this.history.push(...i)}};KA=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};cae=class extends rd{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yf(Jf.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=DZt(e);return s=Ge("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=kZt(u),l=new Qoe;return Object.assign(l,c),l})}}async createInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=AZt(e);return s=Ge("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=CZt(u),l=new Xoe;return Object.assign(l,c),l})}}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=xZt(e);return s=Ge("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=TZt(e);return s=Ge("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=OZt(u),l=new Zoe;return Object.assign(l,c),l})}}async registerFilesInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=IZt(e);return s=Ge("files:register",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=MZt(u),l=new eae;return Object.assign(l,c),l})}}};orr="Content-Type",arr="X-Server-Timeout",urr="User-Agent",pae="x-goog-api-client",crr="1.39.0",lrr=`google-genai-sdk/${crr}`,drr="v1beta1",prr="v1beta",fae=class{constructor(e){var r,n,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(r=e.httpOptions)===null||r===void 0?void 0:r.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:drr}else{if(!this.clientOptions.apiKey)throw new KA({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:prr,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){let i=[this.getRequestUrlInternal(r)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,r){return!(r.baseUrl&&r.baseUrlResourceScope===$oe.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e,r),i=this.constructUrl(e.path,r,n);if(e.queryParams)for(let[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,r){let n=JSON.parse(JSON.stringify(e));for(let[i,s]of Object.entries(r))typeof s=="object"?n[i]=Object.assign(Object.assign({},n[i]),s):s!==void 0&&(n[i]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e,r),i=this.constructUrl(e.path,r,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n,i){if(r&&r.timeout||i){let s=new AbortController,o=s.signal;if(r.timeout&&r?.timeout>0){let a=setTimeout(()=>s.abort(),r.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return r&&r.extraBody!==null&&frr(e,r.extraBody),e.headers=await this.getHeadersInternal(r,n),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await hVe(i),new Jg(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await hVe(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return ed(this,arguments,function*(){var n;let i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="",a="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:l}=yield xt(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let d=s.decode(l,{stream:!0});try{let h=JSON.parse(d);if("error"in h){let y=JSON.parse(JSON.stringify(h.error)),E=y.status,v=y.code,w=`got status: ${E}. ${JSON.stringify(h)}`;if(v>=400&&v<600)throw new KA({message:w,status:v})}}catch(h){if(h.name==="ApiError")throw h}o+=d;let p=-1,f=0;for(;;){p=-1,f=0;for(let E of u){let v=o.indexOf(E);v!==-1&&(p===-1||v<p)&&(p=v,f=E.length)}if(p===-1)break;let h=o.substring(0,p);o=o.substring(p+f);let y=h.trim();if(y.startsWith(a)){let E=y.substring(a.length).trim();try{let v=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield xt(new Jg(v))}catch(v){throw new Error(`exception parsing stream chunk ${E}. ${v}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){let e={},r=lrr+" "+this.clientOptions.userAgentExtra;return e[urr]=r,e[pae]=r,e[orr]="application/json",e}async getHeadersInternal(e,r){let n=new Headers;if(e&&e.headers){for(let[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(arr,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,r),n}getFileName(e){var r;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(r=n.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),n}async uploadFile(e,r){var n;let i={};r!=null&&(i.mimeType=r.mimeType,i.name=r.name,i.displayName=r.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);let a=(n=r?.mimeType)!==null&&n!==void 0?n:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;let u={file:i},c=this.getFileName(e),l=Ge("upload/v1beta/files",u._url),d=await this.fetchUploadUrl(l,i.sizeBytes,i.mimeType,c,u,r?.httpOptions);return s.upload(e,d,this)}async uploadFileToFileSearchStore(e,r,n){var i;let s=this.clientOptions.uploader,o=await s.stat(r),a=String(o.size),u=(i=n?.mimeType)!==null&&i!==void 0?i:o.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${e}:uploadToFileSearchStore`,l=this.getFileName(r),d={};n!=null&&eGe(n,d);let p=await this.fetchUploadUrl(c,a,u,l,d,n?.httpOptions);return s.uploadToFileSearchStore(r,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,n,i,s,o){var a;let u={};o?u=o:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${n}`},i?{"X-Goog-Upload-File-Name":i}:{})};let c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:u});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let l=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}};hrr="mcp_used/unknown",mrr=!1;hae=class t{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new t(e,r)}async initialize(){var e,r,n,i;if(this.mcpTools.length>0)return;let s={},o=[];for(let l of this.mcpClients)try{for(var a=!0,u=(r=void 0,td(grr(l))),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let d=i;o.push(d);let p=d.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=l}}catch(d){r={error:d}}finally{try{!a&&!e&&(n=u.return)&&await n.call(u)}finally{if(r)throw r.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),XQt(this.mcpTools,this.config)}async callTool(e){await this.initialize();let r=[];for(let n of e)if(n.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[n.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let o=await i.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return r}};mae=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Err(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},l=new Promise(T=>{c=T}),d=e.callbacks,p=function(){c({})},f=this.apiClient,h={onopen:p,onmessage:T=>{brr(f,d.onmessage,T)},onerror:(r=d?.onerror)!==null&&r!==void 0?r:function(T){},onclose:(n=d?.onclose)!==null&&n!==void 0?n:function(T){}},y=this.webSocketFactory.create(u,_rr(o),h);y.connect(),await l;let w={setup:{model:Mr(this.apiClient,e.model)}};return y.send(JSON.stringify(w)),new yae(y,this.apiClient)}},yae=class{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let r=HZt(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let r=GZt(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){let r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(u4.PLAY)}pause(){this.sendPlaybackControl(u4.PAUSE)}stop(){this.sendPlaybackControl(u4.STOP)}resetContext(){this.sendPlaybackControl(u4.RESET_CONTEXT)}close(){this.conn.close()}};vrr="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";gae=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new mae(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),l,d=this.apiClient.getHeaders();e.config&&e.config.tools&&tGe(e.config.tools)&&rGe(d);let p=Crr(d);if(this.apiClient.isVertexAI()){let I=this.apiClient.getProject(),F=this.apiClient.getLocation(),B=this.apiClient.getApiKey(),K=!!I&&!!F||!!B;this.apiClient.getCustomBaseUrl()&&!K?l=u:(l=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,l))}else{let I=this.apiClient.getApiKey(),F="BidiGenerateContent",B="key";I?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",B="access_token"),l=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${B}=${I}`}let f=()=>{},h=new Promise(I=>{f=I}),y=e.callbacks,E=function(){var I;(I=y?.onopen)===null||I===void 0||I.call(y),f({})},v=this.apiClient,w={onopen:E,onmessage:I=>{Srr(v,y.onmessage,I)},onerror:(r=y?.onerror)!==null&&r!==void 0?r:function(I){},onclose:(n=y?.onclose)!==null&&n!==void 0?n:function(I){}},T=this.webSocketFactory.create(l,Arr(p),w);T.connect(),await h;let A=Mr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){let I=this.apiClient.getProject(),F=this.apiClient.getLocation();I&&F&&(A=`projects/${I}/locations/${F}/`+A)}let C={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[UN.AUDIO]}:e.config.responseModalities=[UN.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let x=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],R=[];for(let I of x)if(this.isCallableTool(I)){let F=I;R.push(await F.tool())}else R.push(I);R.length>0&&(e.config.tools=R);let M={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=VZt(this.apiClient,M):C=KZt(this.apiClient,M),delete C.config,T.send(JSON.stringify(C)),new bae(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},wrr={turnComplete:!0},bae=class{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=qc(r.turns),e.isVertexAI()||(n=n.map(i=>_F(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(let s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(vrr)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},wrr),e);let r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:WZt(e)}:r={realtimeInput:zZt(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}};mVe=10;_ae=class extends rd{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,i,s,o,a;let u=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!Trr(r)||yVe(r.config))return await this.generateContentInternal(u);let c=gVe(r);if(c.length>0){let y=c.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let l,d,p=qc(u.contents),f=(s=(i=(n=u.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:mVe,h=0;for(;h<f&&(l=await this.generateContentInternal(u),!(!l.functionCalls||l.functionCalls.length===0));){let y=l.candidates[0].content,E=[];for(let v of(a=(o=r.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(l4(v)){let T=await v.callTool(l.functionCalls);E.push(...T)}h++,d={role:"user",parts:E},u.contents=qc(u.contents),u.contents.push(y),u.contents.push(d),bVe(u.config)&&(p.push(y),p.push(d))}return bVe(u.config)&&(l.automaticFunctionCallingHistory=p),l},this.generateContentStream=async r=>{var n,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(r),yVe(r.config)){let d=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(d)}let u=gVe(r);if(u.length>0){let d=u.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${d}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(s=(i=(n=r?.config)===null||n===void 0?void 0:n.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,l=(a=(o=r?.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var i;let s,o=[];if(n?.generatedImages)for(let u of n.generatedImages)u&&u?.safetyAttributes&&((i=u?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=u?.safetyAttributes:o.push(u);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:n.sdkHttpResponse},a}),this.list=async r=>{var n;let o={config:Object.assign(Object.assign({},{queryBase:!0}),r?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((n=o.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Yf(Jf.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async r=>{let n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));let i={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(i)},this.generateVideos=async r=>{var n,i,s,o,a,u;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=r.video)===null||n===void 0)&&n.uri&&(!((i=r.video)===null||i===void 0)&&i.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((o=(s=r.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((u=(a=r.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,i;let s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;let o=await Promise.all(s.map(async u=>l4(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&tGe(e.config.tools)){let u=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{},c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),rGe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var r,n,i;let s=new Map;for(let o of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(l4(o)){let a=o,u=await a.tool();for(let c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var r,n,i;let s=(i=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:mVe,o=!1,a=0,u=await this.initAfcToolsMap(e);return(function(c,l,d){return ed(this,arguments,function*(){for(var p,f,h,y,E,v;a<s;){o&&(a++,o=!1);let C=yield xt(c.processParamsMaybeAddMcpUsage(d)),x=yield xt(c.generateContentStreamInternal(C)),R=[],M=[];try{for(var w=!0,T=(f=void 0,td(x)),A;A=yield xt(T.next()),p=A.done,!p;w=!0){y=A.value,w=!1;let I=y;if(yield yield xt(I),I.candidates&&(!((E=I.candidates[0])===null||E===void 0)&&E.content)){M.push(I.candidates[0].content);for(let F of(v=I.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(l.has(F.functionCall.name)){let B=yield xt(l.get(F.functionCall.name).callTool([F.functionCall]));R.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${l.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(I){f={error:I}}finally{try{!w&&!p&&(h=T.return)&&(yield xt(h.call(T)))}finally{if(f)throw f.error}}if(R.length>0){o=!0;let I=new zg;I.candidates=[{content:{role:"user",parts:R}}],yield yield xt(I);let F=[];F.push(...M),F.push({role:"user",parts:R});let B=qc(d.contents).concat(F);d.contents=B}else break}})})(this,u,e)}async generateContentInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=dVe(this.apiClient,e);return a=Ge("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=fVe(l),p=new zg;return Object.assign(p,d),p})}else{let c=lVe(this.apiClient,e);return a=Ge("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=pVe(l),p=new zg;return Object.assign(p,d),p})}}async generateContentStreamInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=dVe(this.apiClient,e);return a=Ge("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),o.then(function(d){return ed(this,arguments,function*(){var p,f,h,y;try{for(var E=!0,v=td(d),w;w=yield xt(v.next()),p=w.done,!p;E=!0){y=w.value,E=!1;let T=y,A=fVe(yield xt(T.json()),e);A.sdkHttpResponse={headers:T.headers};let C=new zg;Object.assign(C,A),yield yield xt(C)}}catch(T){f={error:T}}finally{try{!E&&!p&&(h=v.return)&&(yield xt(h.call(v)))}finally{if(f)throw f.error}}})})}else{let c=lVe(this.apiClient,e);return a=Ge("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(d){return ed(this,arguments,function*(){var p,f,h,y;try{for(var E=!0,v=td(d),w;w=yield xt(v.next()),p=w.done,!p;E=!0){y=w.value,E=!1;let T=y,A=pVe(yield xt(T.json()),e);A.sdkHttpResponse={headers:T.headers};let C=new zg;Object.assign(C,A),yield yield xt(C)}}catch(T){f={error:T}}finally{try{!E&&!p&&(h=v.return)&&(yield xt(h.call(v)))}finally{if(f)throw f.error}}})})}}async embedContent(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Ter(this.apiClient,e);return a=Ge("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=xer(l),p=new KN;return Object.assign(p,d),p})}else{let c=Cer(this.apiClient,e);return a=Ge("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Oer(l),p=new KN;return Object.assign(p,d),p})}}async generateImagesInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Ler(this.apiClient,e);return a=Ge("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=$er(l),p=new VN;return Object.assign(p,d),p})}else{let c=qer(this.apiClient,e);return a=Ge("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=jer(l),p=new VN;return Object.assign(p,d),p})}}async editImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=ver(this.apiClient,e);return s=Ge("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=Ser(u),l=new Uoe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Ltr(this.apiClient,e);return s=Ge("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=jtr(u),l=new Koe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Etr(this.apiClient,e);return s=Ge("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=vtr(u),l=new Voe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Otr(this.apiClient,e);return s=Ge("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=xtr(u),l=new Goe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=itr(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>dae(l))}else{let c=ntr(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>lae(l))}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=ftr(this.apiClient,e);return a=Ge("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=mtr(l),p=new GN;return Object.assign(p,d),p})}else{let c=ptr(this.apiClient,e);return a=Ge("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=htr(l),p=new GN;return Object.assign(p,d),p})}}async update(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Btr(this.apiClient,e);return a=Ge("{model}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>dae(l))}else{let c=Ftr(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>lae(l))}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=ger(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=_er(l),p=new HN;return Object.assign(p,d),p})}else{let c=yer(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=ber(l),p=new HN;return Object.assign(p,d),p})}}async countTokens(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=fer(this.apiClient,e);return a=Ge("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=mer(l),p=new zN;return Object.assign(p,d),p})}else{let c=per(this.apiClient,e);return a=Ge("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=her(l),p=new zN;return Object.assign(p,d),p})}}async computeTokens(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=ser(this.apiClient,e);return s=Ge("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=oer(u),l=new Hoe;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=zer(this.apiClient,e);return a=Ge("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>{let d=Ger(l),p=new WN;return Object.assign(p,d),p})}else{let c=Her(this.apiClient,e);return a=Ge("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>{let d=Ver(l),p=new WN;return Object.assign(p,d),p})}}};Eae=class extends rd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=r.name.split("/operations/")[0],s;n&&"httpOptions"in n&&(s=n.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=r.name.split("/operations/")[0],s;n&&"httpOptions"in n&&(s=n.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=$Qt(e);return a=Ge("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o}else{let c=jQt(e);return a=Ge("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o}}async fetchPredictVideosOperationInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=MQt(e);return s=Ge("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};vae=class extends rd{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=Rrr(this.apiClient,e);s=Ge("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;let u=$rr(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),i.then(c=>c)}}};Sae=class extends rd{constructor(e){super(),this.apiClient=e,this.list=async r=>new Yf(Jf.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:r.parent,config:n.config}),await this.listInternal(r),r)}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Vrr(e);return s=Ge("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let o=Krr(e);i=Ge("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Hrr(e);return s=Ge("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=zrr(u),l=new zoe;return Object.assign(l,c),l})}}};wae=class extends rd{constructor(e,r=new Sae(e)){super(),this.apiClient=e,this.documents=r,this.list=async(n={})=>new Yf(Jf.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=ztr(e);return s=Ge("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ytr(e);return s=Ge("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let o=Jtr(e);i=Ge("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=rrr(e);return s=Ge("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=nrr(u),l=new Woe;return Object.assign(l,c),l})}}async uploadToFileSearchStoreInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=irr(e);return s=Ge("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=srr(u),l=new Joe;return Object.assign(l,c),l})}}async importFile(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ztr(e);return s=Ge("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=Xtr(u),l=new Yoe;return Object.assign(l,c),l})}}};nGe=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return nGe=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))},Wrr=()=>nGe();Cae=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};$a=class extends Error{},Ua=class t extends $a{constructor(e,r,n,i){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=i,this.error=r}static makeMessage(e,r,n){let i=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e||!i)return new d4({message:n,cause:Cae(r)});let s=r;return e===400?new iF(e,s,n,i):e===401?new sF(e,s,n,i):e===403?new oF(e,s,n,i):e===404?new aF(e,s,n,i):e===409?new uF(e,s,n,i):e===422?new cF(e,s,n,i):e===429?new lF(e,s,n,i):e>=500?new dF(e,s,n,i):new t(e,s,n,i)}},VA=class extends Ua{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},d4=class extends Ua{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},nF=class extends d4{constructor({message:e}={}){super({message:e??"Request timed out."})}},iF=class extends Ua{},sF=class extends Ua{},oF=class extends Ua{},aF=class extends Ua{},uF=class extends Ua{},cF=class extends Ua{},lF=class extends Ua{},dF=class extends Ua{};Jrr=/^[a-z][a-z0-9+.-]*:/i,Yrr=t=>Jrr.test(t),Tae=t=>(Tae=Array.isArray,Tae(t)),Qrr=Tae,Xrr=Qrr,_Ve=Xrr;tnr=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new $a(`${t} must be an integer`);if(e<0)throw new $a(`${t} must be a positive integer`);return e},rnr=t=>{try{return JSON.parse(t)}catch{return}};nnr=t=>new Promise(e=>setTimeout(e,t));a4="0.0.1";snr=()=>{var t,e,r,n,i;let s=inr();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":a4,"X-Stainless-OS":vVe(Deno.build.os),"X-Stainless-Arch":EVe(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":a4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":a4,"X-Stainless-OS":vVe((r=globalThis.process.platform)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Arch":EVe((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};let o=onr();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":a4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":a4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};EVe=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",vVe=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),anr=()=>NN??(NN=snr());dnr=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});oGe=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,r=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};fnr=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";aGe=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",hnr=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&aGe(t),mnr=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";pF=class{constructor(e){this._client=e}};pF._key=[];SVe=Object.freeze(Object.create(null)),bnr=(t=uGe)=>(function(r,...n){if(r.length===1)return r[0];let i=!1,s=[],o=r.reduce((l,d,p)=>{var f,h,y;/[?#]/.test(d)&&(i=!0);let E=n[p],v=(i?encodeURIComponent:t)(""+E);return p!==n.length&&(E==null||typeof E=="object"&&E.toString===((y=Object.getPrototypeOf((h=Object.getPrototypeOf((f=E.hasOwnProperty)!==null&&f!==void 0?f:SVe))!==null&&h!==void 0?h:SVe))===null||y===void 0?void 0:y.toString))&&(v=E+"",s.push({start:l.length+d.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),l+d+(p===n.length?"":v)},""),a=o.split(/[?#]/,1)[0],u=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=u.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((l,d)=>l.start-d.start),s.length>0){let l=0,d=s.reduce((p,f)=>{let h=" ".repeat(f.start-l),y="^".repeat(f.length);return l=f.start+f.length,p+h+y},"");throw new $a(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${o}
${d}`)}return o}),FN=bnr(uGe);fF=class extends pF{create(e,r){var n;let{api_version:i=this._client.apiVersion}=e,s=rF(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new $a("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new $a("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(FN`/${i}/interactions`,Object.assign(Object.assign({body:s},r),{stream:(n=e.stream)!==null&&n!==void 0?n:!1}))}delete(e,r={},n){let{api_version:i=this._client.apiVersion}=r??{};return this._client.delete(FN`/${i}/interactions/${e}`,n)}cancel(e,r={},n){let{api_version:i=this._client.apiVersion}=r??{};return this._client.post(FN`/${i}/interactions/${e}/cancel`,n)}get(e,r={},n){var i;let s=r??{},{api_version:o=this._client.apiVersion}=s,a=rF(s,["api_version"]);return this._client.get(FN`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},n),{stream:(i=r?.stream)!==null&&i!==void 0?i:!1}))}};fF._key=Object.freeze(["interactions"]);hF=class extends fF{};p4=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Hae(e):e;this.buffer=_nr([this.buffer,r]);let n=[],i;for(;(i=Enr(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){n.push(wVe(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=wVe(this.buffer.subarray(0,s));n.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}};p4.NEWLINE_CHARS=new Set([`
`,"\r"]);p4.NEWLINE_REGEXP=/\r\n|[\n\r]/g;mF={off:0,error:200,warn:300,info:400,debug:500},AVe=(t,e,r)=>{if(t){if(enr(mF,t))return t;ea(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(mF))}`)}};Snr={error:UA,warn:UA,info:UA,debug:UA},CVe=new WeakMap;Hg=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);xae=class t{constructor(e,r,n){this.iterator=e,this.controller=r,this.client=n}static fromSSEResponse(e,r,n){let i=!1,s=n?ea(n):console;function o(){return ed(this,arguments,function*(){var u,c,l,d;if(i)throw new $a("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var f=!0,h=td(wnr(e,r)),y;y=yield xt(h.next()),u=y.done,!u;f=!0){d=y.value,f=!1;let E=d;if(!p)if(E.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield xt(JSON.parse(E.data))}catch(v){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),v}}}catch(E){c={error:E}}finally{try{!f&&!u&&(l=h.return)&&(yield xt(l.call(h)))}finally{if(c)throw c.error}}p=!0}catch(E){if(Aae(E))return yield xt(void 0);throw E}finally{p||r.abort()}})}return new t(o,r,n)}static fromReadableStream(e,r,n){let i=!1;function s(){return ed(this,arguments,function*(){var u,c,l,d;let p=new p4,f=sGe(e);try{for(var h=!0,y=td(f),E;E=yield xt(y.next()),u=E.done,!u;h=!0){d=E.value,h=!1;let v=d;for(let w of p.decode(v))yield yield xt(w)}}catch(v){c={error:v}}finally{try{!h&&!u&&(l=y.return)&&(yield xt(l.call(y)))}finally{if(c)throw c.error}}for(let v of p.flush())yield yield xt(v)})}function o(){return ed(this,arguments,function*(){var u,c,l,d;if(i)throw new $a("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var f=!0,h=td(s()),y;y=yield xt(h.next()),u=y.done,!u;f=!0){d=y.value,f=!1;let E=d;p||E&&(yield yield xt(JSON.parse(E)))}}catch(E){c={error:E}}finally{try{!f&&!u&&(l=h.return)&&(yield xt(l.call(h)))}finally{if(c)throw c.error}}p=!0}catch(E){if(Aae(E))return yield xt(void 0);throw E}finally{p||r.abort()}})}return new t(o,r,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),i=s=>({next:()=>{if(s.length===0){let o=n.next();e.push(o),r.push(o)}return s.shift()}});return[new t(()=>i(e),this.controller,this.client),new t(()=>i(r),this.controller,this.client)]}toReadableStream(){let e=this,r;return iGe({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:i,done:s}=await r.next();if(s)return n.close();let o=Hae(JSON.stringify(i)+`
`);n.enqueue(o)}catch(i){n.error(i)}},async cancel(){var n;await((n=r.return)===null||n===void 0?void 0:n.call(r))}})}};Iae=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=Cnr(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}};Rae=class t extends Promise{constructor(e,r,n=Tnr){super(i=>{i(null)}),this.responsePromise=r,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(r,n)=>e(await this.parseResponse(r,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};cGe=Symbol("brand.privateNullableHeaders");jA=t=>{let e=new Headers,r=new Set;for(let n of t){let i=new Set;for(let[s,o]of Onr(n)){let a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),r.add(a)):(e.append(s,o),r.delete(a))}}return{[cGe]:!0,values:e,nulls:r}};Boe=t=>{var e,r,n,i,s,o;if(typeof globalThis.process<"u")return(n=(r=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};yF=class t{constructor(e){var r,n,i,s,o,a,u,{baseURL:c=Boe("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:l=(r=Boe("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:d="v1beta"}=e,p=rF(e,["baseURL","apiKey","apiVersion"]);let f=Object.assign(Object.assign({apiKey:l,apiVersion:d},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=f.baseURL,this.timeout=(n=f.timeout)!==null&&n!==void 0?n:t.DEFAULT_TIMEOUT,this.logger=(i=f.logger)!==null&&i!==void 0?i:console;let h="warn";this.logLevel=h,this.logLevel=(o=(s=AVe(f.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:AVe(Boe("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:h,this.fetchOptions=f.fetchOptions,this.maxRetries=(a=f.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(u=f.fetch)!==null&&u!==void 0?u:unr(),this.encoder=dnr,this._options=f,this.apiKey=l,this.apiVersion=d,this.clientAdapter=f.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){let r=jA([e.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return jA([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return jA([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new $a(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${a4}`}defaultIdempotencyKey(){return`stainless-node-retry-${Wrr()}`}makeStatusError(e,r,n,i){return Ua.generate(e,r,n,i)}buildURL(e,r,n){let i=!this.baseURLOverridden()&&n||this.baseURL,s=Yrr(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Zrr(o)||(r=Object.assign(Object.assign({},o),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){let r=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>Object.assign({method:e,path:r},i)))}request(e,r=null){return new Rae(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){var i,s,o;let a=await e,u=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;r==null&&(r=u),await this.prepareOptions(a);let{req:c,url:l,timeout:d}=await this.buildRequest(a,{retryCount:u-r});await this.prepareRequest(c,{url:l,options:a});let p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=n===void 0?"":`, retryOf: ${n}`,h=Date.now();if(ea(this).debug(`[${p}] sending request`,Hg({retryOfRequestLogID:n,method:a.method,url:l,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new VA;let y=new AbortController,E=await this.fetchWithTimeout(l,c,d,y).catch(Cae),v=Date.now();if(E instanceof globalThis.Error){let T=`retrying, ${r} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new VA;let A=Aae(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(r)return ea(this).info(`[${p}] connection ${A?"timed out":"failed"} - ${T}`),ea(this).debug(`[${p}] connection ${A?"timed out":"failed"} (${T})`,Hg({retryOfRequestLogID:n,url:l,durationMs:v-h,message:E.message})),this.retryRequest(a,r,n??p);throw ea(this).info(`[${p}] connection ${A?"timed out":"failed"} - error; no more retries left`),ea(this).debug(`[${p}] connection ${A?"timed out":"failed"} (error; no more retries left)`,Hg({retryOfRequestLogID:n,url:l,durationMs:v-h,message:E.message})),A?new nF:new d4({cause:E})}let w=`[${p}${f}] ${c.method} ${l} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${v-h}ms`;if(!E.ok){let T=await this.shouldRetry(E);if(r&&T){let I=`retrying, ${r} attempts remaining`;return await lnr(E.body),ea(this).info(`${w} - ${I}`),ea(this).debug(`[${p}] response error (${I})`,Hg({retryOfRequestLogID:n,url:E.url,status:E.status,headers:E.headers,durationMs:v-h})),this.retryRequest(a,r,n??p,E.headers)}let A=T?"error; no more retries left":"error; not retryable";ea(this).info(`${w} - ${A}`);let C=await E.text().catch(I=>Cae(I).message),x=rnr(C),R=x?void 0:C;throw ea(this).debug(`[${p}] response error (${A})`,Hg({retryOfRequestLogID:n,url:E.url,status:E.status,headers:E.headers,message:R,durationMs:Date.now()-h})),this.makeStatusError(E.status,x,R,E.headers)}return ea(this).info(w),ea(this).debug(`[${p}] response start`,Hg({retryOfRequestLogID:n,url:E.url,status:E.status,headers:E.headers,durationMs:v-h})),{response:E,options:a,controller:y,requestLogID:p,retryOfRequestLogID:n,startTime:h}}async fetchWithTimeout(e,r,n,i){let s=r||{},{signal:o,method:a}=s,u=rF(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());let c=setTimeout(()=>i.abort(),n),l=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,d=Object.assign(Object.assign(Object.assign({signal:i.signal},l?{duplex:"half"}:{}),{method:"GET"}),u);a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(c)}}async shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,i){var s;let o,a=i?.get("retry-after-ms");if(a){let c=parseFloat(a);Number.isNaN(c)||(o=c)}let u=i?.get("retry-after");if(u&&!o){let c=parseFloat(u);Number.isNaN(c)?o=Date.parse(u)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){let c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,c)}return await nnr(o),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let s=r-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:r=0}={}){var n,i,s;let o=Object.assign({},e),{method:a,path:u,query:c,defaultBaseURL:l}=o,d=this.buildURL(u,c,l);"timeout"in o&&tnr("timeout",o.timeout),o.timeout=(n=o.timeout)!==null&&n!==void 0?n:this.timeout;let{bodyHeaders:p,body:f}=this.buildBody({options:o}),h=await this.buildHeaders({options:e,method:a,bodyHeaders:p,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:h},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"}),f&&{body:f}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:d,timeout:o.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:i}){let s={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let o=await this.authHeaders(e),a=jA([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),anr()),this._options.defaultHeaders,n,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=jA([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:cnr(e)}:this.encoder({body:e,headers:n})}};yF.DEFAULT_TIMEOUT=6e4;Ui=class extends yF{constructor(){super(...arguments),this.interactions=new hF(this)}};lGe=Ui;Ui.GeminiNextGenAPIClient=lGe;Ui.GeminiNextGenAPIClientError=$a;Ui.APIError=Ua;Ui.APIConnectionError=d4;Ui.APIConnectionTimeoutError=nF;Ui.APIUserAbortError=VA;Ui.NotFoundError=aF;Ui.ConflictError=uF;Ui.RateLimitError=lF;Ui.BadRequestError=iF;Ui.AuthenticationError=sF;Ui.InternalServerError=dF;Ui.PermissionDeniedError=oF;Ui.UnprocessableEntityError=cF;Ui.toFile=ynr;Ui.Interactions=hF;TVe="x-goog-api-key",$A="https://www.googleapis.com/auth/cloud-platform",Dae=class{constructor(e){if(e.apiKey!==void 0){this.apiKey=e.apiKey;return}let r=xnr(e.googleAuthOptions);this.googleAuth=new OVe.GoogleAuth(r)}async addAuthHeaders(e,r){if(this.apiKey!==void 0){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(e);return}return this.addGoogleAuthHeaders(e,r)}addKeyHeader(e){if(e.get(TVe)===null){if(this.apiKey===void 0)throw new Error("Trying to set API key header but apiKey is not set");e.append(TVe,this.apiKey)}}async addGoogleAuthHeaders(e,r){if(this.googleAuth===void 0)throw new Error("Trying to set google-auth headers but googleAuth is unset");let n=await this.googleAuth.getRequestHeaders(r);for(let[i,s]of n)e.get(i)===null&&e.append(i,s)}};kae=class{async download(e,r){if(e.downloadPath){let n=await Inr(e,r);if(n instanceof Jg){let i=(0,xVe.createWriteStream)(e.downloadPath);RVe.Readable.fromWeb(n.responseInternal.body).pipe(i),await(0,DVe.finished)(i)}else try{await(0,IVe.writeFile)(e.downloadPath,n,{encoding:"base64"})}catch(i){throw new Error(`Failed to write file to ${e.downloadPath}: ${i}`)}}}};Mae=class{create(e,r,n){return new Pae(e,r,n)}},Pae=class{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new Noe.default(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};Fae=class extends rd{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yf(Jf.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.get=async r=>await this.getInternal(r),this.tune=async r=>{var n;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){let i={tunedModelName:r.baseModel};!((n=r.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(i.checkpointId=r.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},r),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{let i=Object.assign({},r);return await this.tuneInternal(i)}else{let i=Object.assign({},r),s=await this.tuneMldevInternal(i),o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:joe.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Lnr(e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>Nae(l))}else{let c=qnr(e);return a=Ge("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>dGe(l))}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Knr(e);return a=Ge("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Gnr(l),p=new JN;return Object.assign(p,d),p})}else{let c=Unr(e);return a=Ge("tunedModels",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Vnr(l),p=new JN;return Object.assign(p,d),p})}}async cancel(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Dnr(e);return a=Ge("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Mnr(l),p=new YN;return Object.assign(p,d),p})}else{let c=Rnr(e);return a=Ge("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=knr(l),p=new YN;return Object.assign(p,d),p})}}async tuneInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Bnr(e,e);return s=Ge("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>Nae(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Fnr(e);return s=Ge("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>Jnr(u))}}},pGe=1024*1024*8,fGe=3,hGe=1e3,mGe=2,wm="x-goog-upload-status";Bae=class{async stat(e){let r={size:0,type:void 0};if(typeof e=="string"){let n=await bF.stat(e);return r.size=n.size,r.type=this.inferMimeType(e),r}else return await Xnr(e)}async upload(e,r,n){return typeof e=="string"?await this.uploadFileFromPath(e,r,n):Ynr(e,r,n)}async uploadToFileSearchStore(e,r,n){return typeof e=="string"?await this.uploadFileToFileSearchStoreFromPath(e,r,n):Qnr(e,r,n)}inferMimeType(e){let r=e.slice(e.lastIndexOf(".")+1);return{aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"}[r.toLowerCase()]}async uploadFileFromPath(e,r,n){var i;let s=await this.uploadFileFromPathInternal(e,r,n),o=await s?.json();if(((i=s?.headers)===null||i===void 0?void 0:i[wm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async uploadFileToFileSearchStoreFromPath(e,r,n){var i;let s=await this.uploadFileFromPathInternal(e,r,n),o=await s?.json();if(((i=s?.headers)===null||i===void 0?void 0:i[wm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let a=jae(o),u=new eF;return Object.assign(u,a),u}async uploadFileFromPathInternal(e,r,n){var i,s;let o=0,a=0,u=new Jg(new Response),c="upload",l,d=kVe.basename(e);try{if(l=await bF.open(e,"r"),!l)throw new Error("Failed to open file");for(o=(await l.stat()).size;a<o;){let p=Math.min(pGe,o-a);a+p>=o&&(c+=", finalize");let f=new Uint8Array(p),{bytesRead:h}=await l.read(f,0,p,a);if(h!==p)throw new Error(`Failed to read ${p} bytes from file at offset ${a}. bytes actually read: ${h}`);let y=new Blob([f]),E=0,v=hGe;for(;E<fGe&&(u=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:r,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h),"X-Goog-Upload-File-Name":d}}}),!(!((i=u?.headers)===null||i===void 0)&&i[wm]));)E++,await gGe(v),v=v*mGe;if(a+=h,((s=u?.headers)===null||s===void 0?void 0:s[wm])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}finally{l&&await l.close()}}};qae=class extends cae{async registerFiles(e){if(typeof process>"u"||!process.versions||!process.versions.node)throw new Error("registerFiles is only supported in Node.js environments.");let n=await e.auth.getRequestHeaders(),i=e.config||{},s=i.httpOptions||{},o=Object.assign({},s.headers||{});if(n)if(typeof n[Symbol.iterator]=="function")for(let[a,u]of n)o[a]=u;else for(let[a,u]of Object.entries(n))o[a]=u;return this._registerFiles({uris:e.uris,config:Object.assign(Object.assign({},i),{httpOptions:Object.assign(Object.assign({},s),{headers:o})})})}};Znr="gl-node/",gF=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let r=new Ui({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=r.interactions,this._interactions}constructor(e){var r,n,i,s,o,a;if((e.project||e.location)&&e.apiKey)throw new Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=(n=(r=e.vertexai)!==null&&r!==void 0?r:eir("GOOGLE_GENAI_USE_VERTEXAI"))!==null&&n!==void 0?n:!1;let u=rir(),c=Wg("GOOGLE_CLOUD_PROJECT"),l=Wg("GOOGLE_CLOUD_LOCATION");if(this.apiKey=(i=e.apiKey)!==null&&i!==void 0?i:u,this.project=(s=e.project)!==null&&s!==void 0?s:c,this.location=(o=e.location)!==null&&o!==void 0?o:l,!this.vertexai&&!this.apiKey)throw new Error("API key must be set when using the Gemini API.");e.vertexai&&(!((a=e.googleAuthOptions)===null||a===void 0)&&a.credentials&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(c||l)&&e.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(e.project||e.location)&&u?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(c||l)&&u&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),!this.location&&!this.apiKey&&(this.location="global"));let d=DQt(e.httpOptions,e.vertexai,Wg("GOOGLE_VERTEX_BASE_URL"),Wg("GOOGLE_GEMINI_BASE_URL"));d&&(e.httpOptions?e.httpOptions.baseUrl=d:e.httpOptions={baseUrl:d}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let p=new Dae({apiKey:this.apiKey,googleAuthOptions:e.googleAuthOptions});this.apiClient=new fae({auth:p,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Znr+process.version,uploader:new Bae,downloader:new kae}),this.models=new _ae(this.apiClient),this.live=new gae(this.apiClient,p,new Mae),this.batches=new sae(this.apiClient),this.chats=new aae(this.models,this.apiClient),this.caches=new oae(this.apiClient),this.files=new qae(this.apiClient),this.operations=new Eae(this.apiClient),this.authTokens=new vae(this.apiClient),this.tunings=new Fae(this.apiClient),this.fileSearchStores=new wae(this.apiClient)}}});var SF,_Ge=ce(()=>{"use strict";SF=class{buildPromptForTranslateDocument(e){return`
      You are a translation assistant. ALL OUTPUT MUST BE IN ${e}. 
      If you ever include any text that is not in ${e}, the response will be considered INVALID.

      Task:
      Analyze the document provided. Ignore all images, photos, logos, diagrams, and visual artifacts. 
      Extract only the legible text, translate it into ${e}, and produce a JSON object with the following properties only:

      - "translatedText": a single string containing the FULL translated document text in ${e}.
      - "structuredTranslatedText": an object mapping page keys to HTML strings for each page, e.g. { "page1": "...", "page2": "..." }.
        Each page string must be valid HTML (semantic tags) and include only the translated text (no original-language text), with inline Tailwind CSS classes allowed.

      REQUIRED FORMAT (must be raw JSON only):
      - Respond with raw JSON only. Do NOT add any surrounding text, Markdown, or code fences.
      - The JSON must parse with JSON.parse() without error.
      - Property names must be exactly: translatedText, structuredTranslatedText.

      IMPORTANT BEHAVIORAL RULES:
      1. ALL textual content (including inside structuredTranslatedText HTML) MUST BE IN ${e}. Do NOT include any original-language fragments or English.
      2. The value of translatedText MUST EXACTLY MATCH the textual content inside the structuredTranslatedText HTML (ignoring HTML tags). They must contain the same translation.
      3. Use semantic HTML elements (p, h1-h6, ul/li, etc.). You may include inline Tailwind classes on those tags.
      4. Do NOT include any additional properties, metadata, comments, or explanatory text.
      5. If you cannot translate or detect the language, return this JSON with an "error" property explaining the issue, and no other text: { "error": "explanation in ${e}" }.
      6. If the translation would be identical to the input (e.g., input already in ${e}), still return the JSON object with translatedText in ${e}.
      
      7. **STRICTLY IGNORE IMAGES AND GRAPHICS**: 
         - Do NOT attempt to translate text inside complex logos, stamps, or low-quality images.
         - Do NOT write descriptions of images (e.g., do NOT write "[Logo]", "[Signature]", or "[Image of house]"). 
         - Do NOT use HTML <img> tags. 
         - Focus ONLY on the main body text, headers, and tables.

      PLACEHOLDER EXAMPLE (do NOT return this example; output must be real JSON as specified):
      {
        "translatedText": "<TRANSLATED_TEXT_IN_${e}>",
        "structuredTranslatedText": {
          "page1": "<p class="text-base">&lt;TRANSLATED_TEXT_FOR_PAGE_1_IN_${e}&gt;</p>"
        }
      }

      Remember:
      - Raw JSON only. No markdown, no code fences, no explanation.
      - All content must be in ${e}.
      - IGNORE IMAGES.
      `}buildPromptForSummarizeDocument(e,r){return`
You are a multilingual document analysis assistant.

Your task:
1. Carefully read the following document written in ${r}.
2. Extract structured information and produce a concise, factual JSON summary.
3. **All textual fields (title, sender, summary, action plan, action plans, etc.) must be written fully in ${r}.**

---

### DOCUMENT CONTENT
${e}

---

### OUTPUT FORMAT
Return only **raw JSON** (no markdown, no code fences, no explanations).
The JSON must include these exact keys and meanings:

{
  "title": "string \u2014 short descriptive title of the document (in ${r})",
  "receivedDate": "string \u2014 date when the document was received (ISO 8601 format, e.g. ${new Date().toISOString()})",
  "sender": "string \u2014 name of the person, organization, or institution that sent or authored the document (in ${r})",
  "summary": "string \u2014 comprehensive and factual summary of the document\u2019s full content (in ${r})",

  "actionPlan": [
    {
      "title": "string \u2014 key point, recommendation, or insight derived from the document (in ${r})",
      "reason": "string \u2014 explanation or context for why this key point or recommendation is important (in ${r})"
    }
  ],

  "actionPlans": [
    {
      "title": "string \u2014 specific actionable task the user should perform based on this document (in ${r})",
      "due_date": "string \u2014 ISO 8601 date by which this task should be completed",
      "completed": false,
      "location": "string \u2014 where or in what context this action should take place (in ${r})"
    }
  ]
}

---

### DIFFERENCE BETWEEN actionPlan AND actionPlans
- **actionPlan** = Key insights or recommendations *summarized from* the document. Think of them as what the document is *telling or advising* the reader.
  - Example: \u201CRenew your ID before expiry.\u201D / \u201CKeep record of transaction history.\u201D
- **actionPlans** = Specific actionable tasks the *user needs to do* as a result of the document.
  - Example: \u201CVisit the municipal office to renew ID before 2025-12-31.\u201D / \u201CSend follow-up email to finance department.\u201D

---

### CRITICAL INSTRUCTIONS
- All text must be written fully in ${r}.
- If the document is already in ${r}, keep it in that same language.
- Avoid English or mixed-language responses.
- Ensure the JSON is valid and can be parsed directly with \`JSON.parse()\`.
- Do NOT include markdown, explanations, or text outside the JSON.
- If any information is missing, infer it if possible, or leave the field as an empty string ("").

---

### EXAMPLE (placeholders only \u2014 do not output in English):
{
  "title": "<TITOLO_DEL_DOCUMENTO>",
  "receivedDate": "${new Date().toISOString()}",
  "sender": "<MITTENTE>",
  "summary": "<RIASSUNTO_COMPLETO_IN_${r.toUpperCase()}>",
  "actionPlan": [
    { "title": "<PUNTO_CHIAVE>", "reason": "<SPIEGAZIONE>" }
  ],
  "actionPlans": [
    { "title": "<AZIONE_DA_FARE>", "due_date": "${new Date().toISOString()}", "completed": false, "location": "<LUOGO>" }
  ]
}
`}buildChatBotPrompt(e,r,n){let i=!!n,s=`
You are an expert, highly knowledgeable assistant helping the user understand and discuss a document${i?" and an attached file":""}.

Your goal is to provide clear, accurate, comprehensive, and genuinely helpful responses that enable the user to fully understand the topic and make informed decisions.

Context:
- Translated document text: ${e.translatedText||"No translated text available"}
${i?"- The user has attached a specific file for you to analyze.":""}

Guidelines:
- Base your answers strictly on the translated text, the conversation history${i?", and the content of the attached file":""}.
- Provide thorough and well-structured explanations when needed, not just brief summaries.
- Be factual, precise, and technically accurate.
- Anticipate follow-up questions and proactively clarify complex points.
- When appropriate, include links to official documentation, specifications, or trusted technical resources to guide the user further.
- Do not hallucinate information or fabricate sources.

Language Rule:
- Always respond in the same language as the user's current prompt (${r}), even if the document or attached file is written in a different language.
`.trim(),o=[];e.chats.forEach(c=>{o.push({role:"user",parts:[{text:c.userPrompt}]}),c.response&&o.push({role:"model",parts:[{text:c.response}]})});let a=[];n&&a.push({inlineData:{mimeType:n.mimetype,data:n.buffer.toString("base64")}});let u=r;return i&&(u=`${r}

[System Note: User has attached a file. Analyze it in context. Respond in the language of this prompt.]`),a.push({text:u}),o.push({role:"user",parts:a}),{systemInstruction:s,contents:o}}}});var _Ir,EGe,y4,vGe=ce(()=>{"use strict";_Ir=St(rLe());bGe();lP();EGe=St(Qm());yf();hw();_Ge();rm();y4=class{constructor(){this.model="gemini-2.5-flash";this.geminiAi=new gF({apiKey:ws.GEMINI_API_KEY}),this.userPrompt=new SF}async translateDocument(e,r){if(!e||!e.buffer)throw new Dn("A valid file is required for translation");let i=[{text:this.userPrompt.buildPromptForTranslateDocument(r)},{inlineData:{mimeType:e.mimetype,data:e.buffer.toString("base64")}}];try{let s=await this.geminiAi.models.generateContent({model:this.model,contents:i,config:{responseMimeType:"application/json",httpOptions:{timeout:12e4}}});if(!s)throw Me.error("Upstream Gemini AI provider returned a null response object"),new Pf("The translation service failed to generate a response. Please try again with a valid document.");let o=s.text;if(!o)throw Me.error("Upstream AI provider response contained no text content",{response:s}),new Pf("The translation service failed to generate a response. Please try again with a valid document.");return this.parseResponse(o)}catch(s){if(s.isOperational)throw s;this.handleGeminiError(s,"document translation")}}async summarizeDocument(e,r){let n=this.userPrompt.buildPromptForSummarizeDocument(e,r);try{let i=[{text:n}],o=(await this.geminiAi.models.generateContent({model:this.model,contents:i,config:{responseMimeType:"application/json"}})).text;if(!o)throw new Error("No response received from Gemini AI");return this.parseResponse(o)}catch(i){throw Me.error("Gemini document summarization failed",{message:i.message,name:i.name,stack:i.stack,cause:i.cause,isNetworkError:i.message?.includes("fetch failed"),hint:i.message?.includes("fetch failed")?"Likely a network or API connection issue (check endpoint and key).":"Internal Gemini processing error."}),new Error(i||"Gemini summarization translation failed")}}parseResponse(e){try{let r=e.trim(),n=r.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(n&&n[1])r=n[1].trim();else{let s=r.indexOf("{"),o=r.lastIndexOf("}");s!==-1&&o!==-1&&o>s&&(r=r.substring(s,o+1))}let i=JSON.parse(r);return{translatedText:i.translatedText??"",structuredTranslatedText:i.structuredTranslatedText??{},title:i.title??"",sender:i.sender??"",receivedDate:i.receivedDate??new Date().toISOString(),summary:i.summary??"",actionPlan:i.actionPlan??[],actionPlans:Array.isArray(i.actionPlans)?i.actionPlans.map(s=>({id:xg(),title:s.title??"",dueDate:s.due_date??new Date().toISOString(),completed:s.completed??!1,location:s.location??""})):[]}}catch(r){throw Me.error("Failed to parse AI JSON response",{originalResponse:e,error:pi.serialize(r)}),new Pf("The translation service returned an unreadable result. Please try again with a valid document.")}}async*chatBotStream(e,r,n){try{let{systemInstruction:i,contents:s}=this.userPrompt.buildChatBotPrompt(e,r,n),o=await this.geminiAi.models.generateContentStream({model:this.model,contents:s,config:{systemInstruction:i}});for await(let a of o){let u=a.text;u&&(yield u)}}catch(i){this.handleGeminiError(i,"chat")}}handleGeminiError(e,r){let n=e.message||"";throw Me.error(`Upstream AI Provider Error during ${r}`,{provider:"Google Gemini",technicalMessage:n,stack:e.stack,status:e.status,error:pi.serialize(e)}),n.includes("deadline exceeded")||n.includes("timeout")?new PM("The request took too long to process. Please try again with a smaller file.","AI_PROCESSING_TIMEOUT"):n.includes("fetch failed")||n.includes("network")?new Pf("The AI processing service is temporarily unreachable. Please try again later if possible with a smaller document."):e.status===429?new Pf("AI processing limit reached. Please try again in a moment.","AI_RATE_LIMIT_EXCEEDED"):new Pf("An error occurred while processing the document.","AI_PROVIDER_ERROR")}};y4=m1([(0,EGe.injectable)()],y4)});var SGe=b(()=>{"use strict";var GA=St(Qm());oBe();mBe();_Be();vGe();GA.container.register("IUserService",{useClass:w6});GA.container.register("IDocumentService",{useClass:A6});GA.container.register("IGeminiAIService",{useClass:y4});GA.container.register("IChatBotService",{useClass:T6})});var Yae=b(wF=>{"use strict";Object.defineProperty(wF,"__esModule",{value:!0});wF.AsyncFifoQueue=void 0;var zae=class{constructor(e){this.value=void 0,this.next=null,this.value=e}},Wae=class{constructor(){this.length=0,this.head=null,this.tail=null}push(e){let r=new zae(e);return this.length?this.tail.next=r:this.head=r,this.tail=r,this.length+=1,r}shift(){if(this.length){let e=this.head;return this.head=this.head.next,this.length-=1,e}else return null}},Jae=class{constructor(e=!1){this.ignoreErrors=e,this.queue=new Wae,this.pending=new Set,this.newPromise()}add(e){this.pending.add(e),e.then(r=>{this.pending.delete(e),this.queue.length===0&&this.resolvePromise(r),this.queue.push(r)}).catch(r=>{this.ignoreErrors&&this.queue.push(void 0),this.pending.delete(e),this.rejectPromise(r)})}async waitAll(){await Promise.all(this.pending)}numTotal(){return this.pending.size+this.queue.length}numPending(){return this.pending.size}numQueued(){return this.queue.length}resolvePromise(e){this.resolve(e),this.newPromise()}rejectPromise(e){this.reject(e),this.newPromise()}newPromise(){this.nextPromise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}async wait(){return this.nextPromise}async fetch(){var e;if(!(this.pending.size===0&&this.queue.length===0)){for(;this.queue.length===0;)try{await this.wait()}catch(r){this.ignoreErrors||console.error("Unexpected Error in AsyncFifoQueue",r)}return(e=this.queue.shift())===null||e===void 0?void 0:e.value}}};wF.AsyncFifoQueue=Jae});var Qae=b(AF=>{"use strict";Object.defineProperty(AF,"__esModule",{value:!0});AF.Backoffs=void 0;var g4=class{static normalize(e){if(Number.isFinite(e))return{type:"fixed",delay:e};if(e)return e}static calculate(e,r,n,i,s){if(e)return nir(e,s)(r,e.type,n,i)}};AF.Backoffs=g4;g4.builtinStrategies={fixed:function(t,e=0){return function(){if(e>0){let r=t*(1-e);return Math.floor(Math.random()*t*e+r)}else return t}},exponential:function(t,e=0){return function(r){if(e>0){let n=Math.round(Math.pow(2,r-1)*t),i=n*(1-e);return Math.floor(Math.random()*n*e+i)}else return Math.round(Math.pow(2,r-1)*t)}}};function nir(t,e){if(t.type in g4.builtinStrategies)return g4.builtinStrategies[t.type](t.delay,t.jitter);if(e)return e;throw new Error(`Unknown backoff strategy ${t.type}.
      If a custom backoff strategy is used, specify it when the queue is created.`)}});var AGe=b(CF=>{"use strict";Object.defineProperty(CF,"__esModule",{value:!0});CF.ChildCommand=void 0;var wGe;(function(t){t[t.Init=0]="Init",t[t.Start=1]="Start",t[t.Stop=2]="Stop",t[t.GetChildrenValuesResponse=3]="GetChildrenValuesResponse",t[t.GetIgnoredChildrenFailuresResponse=4]="GetIgnoredChildrenFailuresResponse",t[t.MoveToWaitingChildrenResponse=5]="MoveToWaitingChildrenResponse"})(wGe||(CF.ChildCommand=wGe={}))});var TGe=b(TF=>{"use strict";Object.defineProperty(TF,"__esModule",{value:!0});TF.ErrorCode=void 0;var CGe;(function(t){t[t.JobNotExist=-1]="JobNotExist",t[t.JobLockNotExist=-2]="JobLockNotExist",t[t.JobNotInState=-3]="JobNotInState",t[t.JobPendingChildren=-4]="JobPendingChildren",t[t.ParentJobNotExist=-5]="ParentJobNotExist",t[t.JobLockMismatch=-6]="JobLockMismatch",t[t.ParentJobCannotBeReplaced=-7]="ParentJobCannotBeReplaced",t[t.JobBelongsToJobScheduler=-8]="JobBelongsToJobScheduler",t[t.JobHasFailedChildren=-9]="JobHasFailedChildren",t[t.SchedulerJobIdCollision=-10]="SchedulerJobIdCollision",t[t.SchedulerJobSlotsBusy=-11]="SchedulerJobSlotsBusy"})(CGe||(TF.ErrorCode=CGe={}))});var xGe=b(OF=>{"use strict";Object.defineProperty(OF,"__esModule",{value:!0});OF.ParentCommand=void 0;var OGe;(function(t){t[t.Completed=0]="Completed",t[t.Error=1]="Error",t[t.Failed=2]="Failed",t[t.InitFailed=3]="InitFailed",t[t.InitCompleted=4]="InitCompleted",t[t.Log=5]="Log",t[t.MoveToDelayed=6]="MoveToDelayed",t[t.MoveToWait=7]="MoveToWait",t[t.Progress=8]="Progress",t[t.Update=9]="Update",t[t.GetChildrenValues=10]="GetChildrenValues",t[t.GetIgnoredChildrenFailures=11]="GetIgnoredChildrenFailures",t[t.MoveToWaitingChildren=12]="MoveToWaitingChildren"})(OGe||(OF.ParentCommand=OGe={}))});var RGe=b(xF=>{"use strict";Object.defineProperty(xF,"__esModule",{value:!0});xF.MetricsTime=void 0;var IGe;(function(t){t[t.ONE_MINUTE=1]="ONE_MINUTE",t[t.FIVE_MINUTES=5]="FIVE_MINUTES",t[t.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",t[t.THIRTY_MINUTES=30]="THIRTY_MINUTES",t[t.ONE_HOUR=60]="ONE_HOUR",t[t.ONE_WEEK=10080]="ONE_WEEK",t[t.TWO_WEEKS=20160]="TWO_WEEKS",t[t.ONE_MONTH=80640]="ONE_MONTH"})(IGe||(xF.MetricsTime=IGe={}))});var MGe=b(b4=>{"use strict";Object.defineProperty(b4,"__esModule",{value:!0});b4.SpanKind=b4.TelemetryAttributes=void 0;var DGe;(function(t){t.QueueName="bullmq.queue.name",t.QueueOperation="bullmq.queue.operation",t.BulkCount="bullmq.job.bulk.count",t.BulkNames="bullmq.job.bulk.names",t.JobName="bullmq.job.name",t.JobId="bullmq.job.id",t.JobKey="bullmq.job.key",t.JobIds="bullmq.job.ids",t.JobAttemptsMade="bullmq.job.attempts.made",t.DeduplicationKey="bullmq.job.deduplication.key",t.JobOptions="bullmq.job.options",t.JobProgress="bullmq.job.progress",t.QueueDrainDelay="bullmq.queue.drain.delay",t.QueueGrace="bullmq.queue.grace",t.QueueCleanLimit="bullmq.queue.clean.limit",t.QueueRateLimit="bullmq.queue.rate.limit",t.JobType="bullmq.job.type",t.QueueOptions="bullmq.queue.options",t.QueueEventMaxLength="bullmq.queue.event.max.length",t.WorkerOptions="bullmq.worker.options",t.WorkerName="bullmq.worker.name",t.WorkerId="bullmq.worker.id",t.WorkerRateLimit="bullmq.worker.rate.limit",t.WorkerDoNotWaitActive="bullmq.worker.do.not.wait.active",t.WorkerForceClose="bullmq.worker.force.close",t.WorkerStalledJobs="bullmq.worker.stalled.jobs",t.WorkerFailedJobs="bullmq.worker.failed.jobs",t.WorkerJobsToExtendLocks="bullmq.worker.jobs.to.extend.locks",t.JobFinishedTimestamp="bullmq.job.finished.timestamp",t.JobProcessedTimestamp="bullmq.job.processed.timestamp",t.JobResult="bullmq.job.result",t.JobFailedReason="bullmq.job.failed.reason",t.FlowName="bullmq.flow.name",t.JobSchedulerId="bullmq.job.scheduler.id"})(DGe||(b4.TelemetryAttributes=DGe={}));var kGe;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(kGe||(b4.SpanKind=kGe={}))});var Tu=b(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});var HA=(or(),Wt(sr));HA.__exportStar(AGe(),Yg);HA.__exportStar(TGe(),Yg);HA.__exportStar(xGe(),Yg);HA.__exportStar(RGe(),Yg);HA.__exportStar(MGe(),Yg)});var eue=b(IF=>{"use strict";Object.defineProperty(IF,"__esModule",{value:!0});IF.Child=void 0;var iir=require("child_process"),sir=require("net"),oir=require("worker_threads"),Xae=Tu(),air=require("events"),uir={1:"Uncaught Fatal Exception",2:"Unused",3:"Internal JavaScript Parse Error",4:"Internal JavaScript Evaluation Failure",5:"Fatal Error",6:"Non-function Internal Exception Handler",7:"Internal Exception Handler Run-Time Failure",8:"Unused",9:"Invalid Argument",10:"Internal JavaScript Run-Time Failure",12:"Invalid Debug Argument",13:"Unfinished Top-Level Await"},Zae=class extends air.EventEmitter{constructor(e,r,n={useWorkerThreads:!1}){super(),this.mainFile=e,this.processFile=r,this.opts=n,this._exitCode=null,this._signalCode=null,this._killed=!1}get pid(){if(this.childProcess)return this.childProcess.pid;if(this.worker)return Math.abs(this.worker.threadId);throw new Error("No child process or worker thread")}get exitCode(){return this._exitCode}get signalCode(){return this._signalCode}get killed(){return this.childProcess?this.childProcess.killed:this._killed}async init(){let e=await dir(process.execArgv),r;this.opts.useWorkerThreads?this.worker=r=new oir.Worker(this.mainFile,Object.assign({execArgv:e,stdin:!0,stdout:!0,stderr:!0},this.opts.workerThreadsOptions?this.opts.workerThreadsOptions:{})):this.childProcess=r=(0,iir.fork)(this.mainFile,[],Object.assign({execArgv:e,stdio:"pipe"},this.opts.workerForkOptions?this.opts.workerForkOptions:{})),r.on("exit",(n,i)=>{this._exitCode=n,i=typeof i>"u"?null:i,this._signalCode=i,this._killed=!0,this.emit("exit",n,i),r.removeAllListeners(),this.removeAllListeners()}),r.on("error",(...n)=>this.emit("error",...n)),r.on("message",(...n)=>this.emit("message",...n)),r.on("close",(...n)=>this.emit("close",...n)),r.stdout.pipe(process.stdout),r.stderr.pipe(process.stderr),await this.initChild()}async send(e){return new Promise((r,n)=>{this.childProcess?this.childProcess.send(e,i=>{i?n(i):r()}):this.worker?r(this.worker.postMessage(e)):r()})}killProcess(e="SIGKILL"){this.childProcess?this.childProcess.kill(e):this.worker&&this.worker.terminate()}async kill(e="SIGKILL",r){if(this.hasProcessExited())return;let n=cir(this.childProcess||this.worker);if(this.killProcess(e),r!==void 0&&(r===0||isFinite(r))){let i=setTimeout(()=>{this.hasProcessExited()||this.killProcess("SIGKILL")},r);await n,clearTimeout(i)}await n}async initChild(){let e=new Promise((r,n)=>{let i=o=>{if(o.cmd===Xae.ParentCommand.InitCompleted)r();else if(o.cmd===Xae.ParentCommand.InitFailed){let a=new Error;a.stack=o.err.stack,a.message=o.err.message,n(a)}this.off("message",i),this.off("close",s)},s=(o,a)=>{o>128&&(o-=128);let u=uir[o]||`Unknown exit code ${o}`;n(new Error(`Error initializing child: ${u} and signal ${a}`)),this.off("message",i),this.off("close",s)};this.on("message",i),this.on("close",s)});await this.send({cmd:Xae.ChildCommand.Init,value:this.processFile}),await e}hasProcessExited(){return!!(this.exitCode!==null||this.signalCode)}};IF.Child=Zae;function cir(t){return new Promise(e=>{t.once("exit",()=>e())})}var lir=async()=>new Promise(t=>{let e=(0,sir.createServer)();e.listen(0,()=>{let{port:r}=e.address();e.close(()=>t(r))})}),dir=async t=>{let e=[],r=[];for(let n=0;n<t.length;n++){let i=t[n];if(i.indexOf("--inspect")===-1)e.push(i);else{let s=i.split("=")[0],o=await lir();r.push(`${s}=${o}`)}}return e.concat(r)}});var nue=b((RF,rue)=>{"use strict";Object.defineProperty(RF,"__esModule",{value:!0});RF.ChildPool=void 0;var PGe=require("path"),pir=eue(),fir=3e4,hir=()=>typeof require=="function"&&typeof rue=="object"&&typeof rue.exports=="object",tue=class{constructor({mainFile:e=hir()?PGe.join(process.cwd(),"dist/cjs/classes/main.js"):PGe.join(process.cwd(),"dist/esm/classes/main.js"),useWorkerThreads:r,workerForkOptions:n,workerThreadsOptions:i}){this.retained={},this.free={},this.opts={mainFile:e,useWorkerThreads:r,workerForkOptions:n,workerThreadsOptions:i}}async retain(e){let r=this.getFree(e).pop();if(r)return this.retained[r.pid]=r,r;r=new pir.Child(this.opts.mainFile,e,{useWorkerThreads:this.opts.useWorkerThreads,workerForkOptions:this.opts.workerForkOptions,workerThreadsOptions:this.opts.workerThreadsOptions}),r.on("exit",this.remove.bind(this,r));try{if(await r.init(),r.exitCode!==null||r.signalCode!==null)throw new Error("Child exited before it could be retained");return this.retained[r.pid]=r,r}catch(n){throw console.error(n),this.release(r),n}}release(e){delete this.retained[e.pid],this.getFree(e.processFile).push(e)}remove(e){delete this.retained[e.pid];let r=this.getFree(e.processFile),n=r.indexOf(e);n>-1&&r.splice(n,1)}async kill(e,r="SIGKILL"){return this.remove(e),e.kill(r,fir)}async clean(){let e=Object.values(this.retained).concat(this.getAllFree());this.retained={},this.free={},await Promise.all(e.map(r=>this.kill(r,"SIGTERM")))}getFree(e){return this.free[e]=this.free[e]||[]}getAllFree(){return Object.values(this.free).reduce((e,r)=>e.concat(r),[])}};RF.ChildPool=tue});var Lc=b(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.QUEUE_EVENT_SUFFIX=gt.toString=gt.errorToJSON=gt.parseObjectValues=gt.isRedisVersionLowerThan=gt.childSend=gt.asyncSend=gt.DELAY_TIME_1=gt.DELAY_TIME_5=gt.clientCommandMessageReg=gt.optsEncodeMap=gt.optsDecodeMap=gt.errorObject=void 0;gt.tryCatch=gir;gt.lengthInUtf8Bytes=bir;gt.isEmpty=_ir;gt.array2obj=Eir;gt.objectToFlatArray=vir;gt.delay=Sir;gt.increaseMaxListeners=NGe;gt.invertObject=FGe;gt.isRedisInstance=BGe;gt.isRedisCluster=wir;gt.decreaseMaxListeners=Air;gt.removeAllQueueData=Cir;gt.getParentKey=Tir;gt.isNotConnectionError=Oir;gt.removeUndefinedFields=Fir;gt.trace=Bir;var mir=oP(),yir=ji(),iue=D9(),sue=Tu();gt.errorObject={value:null};function gir(t,e,r){try{return t.apply(e,r)}catch(n){return gt.errorObject.value=n,gt.errorObject}}function bir(t){return Buffer.byteLength(t,"utf8")}function _ir(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Eir(t){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}function vir(t){let e=[];for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&t[r]!==void 0&&(e[e.length]=r,e[e.length]=t[r]);return e}function Sir(t,e){return new Promise(r=>{let n,i=()=>{e?.signal.removeEventListener("abort",i),clearTimeout(n),r()};n=setTimeout(i,t),e?.signal.addEventListener("abort",i)})}function NGe(t,e){let r=t.getMaxListeners();t.setMaxListeners(r+e)}function FGe(t){return Object.entries(t).reduce((e,[r,n])=>(e[n]=r,e),{})}gt.optsDecodeMap={de:"deduplication",fpof:"failParentOnFailure",cpof:"continueParentOnFailure",idof:"ignoreDependencyOnFailure",kl:"keepLogs",rdof:"removeDependencyOnFailure"};gt.optsEncodeMap=Object.assign(Object.assign({},FGe(gt.optsDecodeMap)),{debounce:"de"});function BGe(t){return t?["connect","disconnect","duplicate"].every(r=>typeof t[r]=="function"):!1}function wir(t){return BGe(t)&&t.isCluster}function Air(t,e){NGe(t,-e)}async function Cir(t,e,r=process.env.BULLMQ_TEST_PREFIX||"bull"){if(t instanceof mir.Cluster)return Promise.resolve(!1);let n=`${r}:${e}:*`;await await new Promise((s,o)=>{let a=t.scanStream({match:n});a.on("data",u=>{if(u.length){let c=t.pipeline();u.forEach(l=>{c.del(l)}),c.exec().catch(l=>{o(l)})}}),a.on("end",()=>s()),a.on("error",u=>o(u))}),await t.quit()}function Tir(t){if(t)return`${t.queue}:${t.id}`}gt.clientCommandMessageReg=/ERR unknown command ['`]\s*client\s*['`]/;gt.DELAY_TIME_5=5e3;gt.DELAY_TIME_1=100;function Oir(t){let{code:e,message:r}=t;return r!==yir.CONNECTION_CLOSED_ERROR_MSG&&!r.includes("ECONNREFUSED")&&e!=="ECONNREFUSED"}var xir=(t,e)=>new Promise((r,n)=>{typeof t.send=="function"?t.send(e,i=>{i?n(i):r()}):typeof t.postMessage=="function"?r(t.postMessage(e)):r()});gt.asyncSend=xir;var Iir=(t,e)=>(0,gt.asyncSend)(t,e);gt.childSend=Iir;var Rir=(t,e)=>{let r=iue.valid(iue.coerce(t));return iue.lt(r,e)};gt.isRedisVersionLowerThan=Rir;var Dir=t=>{let e={};for(let r of Object.entries(t))e[r[0]]=JSON.parse(r[1]);return e};gt.parseObjectValues=Dir;var kir=t=>{let e=new WeakSet;return e.add(t),(r,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}},Mir=t=>{let e={};return Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]}),JSON.parse(JSON.stringify(e,kir(t)))};gt.errorToJSON=Mir;var Pir=1/0,Nir=t=>{if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return`${t.map(r=>r==null?r:(0,gt.toString)(r))}`;if(typeof t=="symbol"||Object.prototype.toString.call(t)=="[object Symbol]")return t.toString();let e=`${t}`;return e==="0"&&1/t===-Pir?"-0":e};gt.toString=Nir;gt.QUEUE_EVENT_SUFFIX=":qe";function Fir(t){let e={};for(let r in t)t[r]!==void 0&&(e[r]=t[r]);return e}async function Bir(t,e,r,n,i,s,o){if(t){let{tracer:a,contextManager:u}=t,c=u.active(),l;o&&(l=u.fromMetadata(c,o));let d=i?`${n} ${i}`:n,p=a.startSpan(d,{kind:e},l);try{p.setAttributes({[sue.TelemetryAttributes.QueueName]:r,[sue.TelemetryAttributes.QueueOperation]:n});let f,h;return e===sue.SpanKind.CONSUMER&&l?f=p.setSpanOnContext(l):f=p.setSpanOnContext(c),s.length==2&&(h=u.getMetadata(f)),await u.with(f,()=>s(p,h))}catch(f){throw p.recordException(f),f}finally{p.end()}}else return s()}});var qGe=b(DF=>{"use strict";Object.defineProperty(DF,"__esModule",{value:!0});DF.ChildProcessor=void 0;var Ou=Tu(),oue=Lc(),Cm;(function(t){t[t.Idle=0]="Idle",t[t.Started=1]="Started",t[t.Terminating=2]="Terminating",t[t.Errored=3]="Errored"})(Cm||(Cm={}));var aue=process.env.NODE_ENV==="test"?500:5e3,cue=class{constructor(e,r){this.send=e,this.receiver=r}async init(e){let r;try{let{default:i}=await import(e);if(r=i,r.default&&(r=r.default),typeof r!="function")throw new Error("No function is exported in processor file")}catch(i){return this.status=Cm.Errored,this.send({cmd:Ou.ParentCommand.InitFailed,err:(0,oue.errorToJSON)(i)})}let n=r;r=function(i,s){try{return Promise.resolve(n(i,s))}catch(o){return Promise.reject(o)}},this.processor=r,this.status=Cm.Idle,await this.send({cmd:Ou.ParentCommand.InitCompleted})}async start(e,r){if(this.status!==Cm.Idle)return this.send({cmd:Ou.ParentCommand.Error,err:(0,oue.errorToJSON)(new Error("cannot start a not idling child process"))});this.status=Cm.Started,this.currentJobPromise=(async()=>{try{let n=this.wrapJob(e,this.send),i=await this.processor(n,r);await this.send({cmd:Ou.ParentCommand.Completed,value:typeof i>"u"?null:i})}catch(n){await this.send({cmd:Ou.ParentCommand.Failed,value:(0,oue.errorToJSON)(n.message?n:new Error(n))})}finally{this.status=Cm.Idle,this.currentJobPromise=void 0}})()}async stop(){}async waitForCurrentJobAndExit(){this.status=Cm.Terminating;try{await this.currentJobPromise}finally{process.exit(process.exitCode||0)}}wrapJob(e,r){let n=Object.assign(Object.assign({},e),{queueQualifiedName:e.queueQualifiedName,data:JSON.parse(e.data||"{}"),opts:e.opts,returnValue:JSON.parse(e.returnvalue||"{}"),async updateProgress(i){this.progress=i,await r({cmd:Ou.ParentCommand.Progress,value:i})},log:async i=>{await r({cmd:Ou.ParentCommand.Log,value:i})},moveToDelayed:async(i,s)=>{await r({cmd:Ou.ParentCommand.MoveToDelayed,value:{timestamp:i,token:s}})},moveToWait:async i=>{await r({cmd:Ou.ParentCommand.MoveToWait,value:{token:i}})},moveToWaitingChildren:async(i,s)=>{let o=Math.random().toString(36).substring(2,15);return await r({requestId:o,cmd:Ou.ParentCommand.MoveToWaitingChildren,value:{token:i,opts:s}}),uue(o,this.receiver,aue,"moveToWaitingChildren")},updateData:async i=>{await r({cmd:Ou.ParentCommand.Update,value:i}),n.data=i},getChildrenValues:async()=>{let i=Math.random().toString(36).substring(2,15);return await r({requestId:i,cmd:Ou.ParentCommand.GetChildrenValues}),uue(i,this.receiver,aue,"getChildrenValues")},getIgnoredChildrenFailures:async()=>{let i=Math.random().toString(36).substring(2,15);return await r({requestId:i,cmd:Ou.ParentCommand.GetIgnoredChildrenFailures}),uue(i,this.receiver,aue,"getIgnoredChildrenFailures")}});return n}};DF.ChildProcessor=cue;var uue=async(t,e,r,n)=>new Promise((i,s)=>{let o=a=>{a.requestId===t&&(i(a.value),e.off("message",o))};e.on("message",o),setTimeout(()=>{e.off("message",o),s(new Error(`TimeoutError: ${n} timed out in (${r}ms)`))},r)})});var LGe=b(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.DelayedError=Qg.DELAYED_ERROR=void 0;Qg.DELAYED_ERROR="bullmq:movedToDelayed";var lue=class extends Error{constructor(e=Qg.DELAYED_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Qg.DelayedError=lue});var jGe=b(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.RateLimitError=Xg.RATE_LIMIT_ERROR=void 0;Xg.RATE_LIMIT_ERROR="bullmq:rateLimitExceeded";var due=class extends Error{constructor(e=Xg.RATE_LIMIT_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Xg.RateLimitError=due});var fue=b(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.UnrecoverableError=Zg.UNRECOVERABLE_ERROR=void 0;Zg.UNRECOVERABLE_ERROR="bullmq:unrecoverable";var pue=class extends Error{constructor(e=Zg.UNRECOVERABLE_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Zg.UnrecoverableError=pue});var $Ge=b(e2=>{"use strict";Object.defineProperty(e2,"__esModule",{value:!0});e2.WaitingChildrenError=e2.WAITING_CHILDREN_ERROR=void 0;e2.WAITING_CHILDREN_ERROR="bullmq:movedToWaitingChildren";var hue=class extends Error{constructor(e=e2.WAITING_CHILDREN_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};e2.WaitingChildrenError=hue});var UGe=b(t2=>{"use strict";Object.defineProperty(t2,"__esModule",{value:!0});t2.WaitingError=t2.WAITING_ERROR=void 0;t2.WAITING_ERROR="bullmq:movedToWait";var mue=class extends Error{constructor(e=t2.WAITING_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};t2.WaitingError=mue});var kF=b(r2=>{"use strict";Object.defineProperty(r2,"__esModule",{value:!0});var zA=(or(),Wt(sr));zA.__exportStar(LGe(),r2);zA.__exportStar(jGe(),r2);zA.__exportStar(fue(),r2);zA.__exportStar($Ge(),r2);zA.__exportStar(UGe(),r2)});var KGe=b(yue=>{"use strict";Object.defineProperty(yue,"__esModule",{value:!0});yue.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var VGe=b(gue=>{"use strict";Object.defineProperty(gue,"__esModule",{value:!0});gue.default="00000000-0000-0000-0000-000000000000"});var GGe=b(bue=>{"use strict";Object.defineProperty(bue,"__esModule",{value:!0});bue.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var WA=b(_ue=>{"use strict";Object.defineProperty(_ue,"__esModule",{value:!0});var qir=GGe();function Lir(t){return typeof t=="string"&&qir.default.test(t)}_ue.default=Lir});var JA=b(Eue=>{"use strict";Object.defineProperty(Eue,"__esModule",{value:!0});var jir=WA();function $ir(t){if(!(0,jir.default)(t))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(t.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(t.slice(9,13),16))>>>8,e&255,(e=parseInt(t.slice(14,18),16))>>>8,e&255,(e=parseInt(t.slice(19,23),16))>>>8,e&255,(e=parseInt(t.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}Eue.default=$ir});var Xf=b(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0});YA.unsafeStringify=void 0;var Uir=WA(),eo=[];for(let t=0;t<256;++t)eo.push((t+256).toString(16).slice(1));function HGe(t,e=0){return(eo[t[e+0]]+eo[t[e+1]]+eo[t[e+2]]+eo[t[e+3]]+"-"+eo[t[e+4]]+eo[t[e+5]]+"-"+eo[t[e+6]]+eo[t[e+7]]+"-"+eo[t[e+8]]+eo[t[e+9]]+"-"+eo[t[e+10]]+eo[t[e+11]]+eo[t[e+12]]+eo[t[e+13]]+eo[t[e+14]]+eo[t[e+15]]).toLowerCase()}YA.unsafeStringify=HGe;function Kir(t,e=0){let r=HGe(t,e);if(!(0,Uir.default)(r))throw TypeError("Stringified UUID is invalid");return r}YA.default=Kir});var NF=b(vue=>{"use strict";Object.defineProperty(vue,"__esModule",{value:!0});var Vir=require("crypto"),PF=new Uint8Array(256),MF=PF.length;function Gir(){return MF>PF.length-16&&((0,Vir.randomFillSync)(PF),MF=0),PF.slice(MF,MF+=16)}vue.default=Gir});var Sue=b(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});XA.updateV1State=void 0;var zGe=NF(),Hir=Xf(),QA={};function zir(t,e,r){let n,i=t?._v6??!1;if(t){let s=Object.keys(t);s.length===1&&s[0]==="_v6"&&(t=void 0)}if(t)n=WGe(t.random??t.rng?.()??(0,zGe.default)(),t.msecs,t.nsecs,t.clockseq,t.node,e,r);else{let s=Date.now(),o=(0,zGe.default)();JGe(QA,s,o),n=WGe(o,QA.msecs,QA.nsecs,i?void 0:QA.clockseq,i?void 0:QA.node,e,r)}return e??(0,Hir.unsafeStringify)(n)}function JGe(t,e,r){return t.msecs??=-1/0,t.nsecs??=0,e===t.msecs?(t.nsecs++,t.nsecs>=1e4&&(t.node=void 0,t.nsecs=0)):e>t.msecs?t.nsecs=0:e<t.msecs&&(t.node=void 0),t.node||(t.node=r.slice(10,16),t.node[0]|=1,t.clockseq=(r[8]<<8|r[9])&16383),t.msecs=e,t}XA.updateV1State=JGe;function WGe(t,e,r,n,i,s,o=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),o=0;else if(o<0||o+16>s.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);e??=Date.now(),r??=0,n??=(t[8]<<8|t[9])&16383,i??=t.slice(10,16),e+=122192928e5;let a=((e&268435455)*1e4+r)%4294967296;s[o++]=a>>>24&255,s[o++]=a>>>16&255,s[o++]=a>>>8&255,s[o++]=a&255;let u=e/4294967296*1e4&268435455;s[o++]=u>>>8&255,s[o++]=u&255,s[o++]=u>>>24&15|16,s[o++]=u>>>16&255,s[o++]=n>>>8|128,s[o++]=n&255;for(let c=0;c<6;++c)s[o++]=i[c];return s}XA.default=zir});var Aue=b(wue=>{"use strict";Object.defineProperty(wue,"__esModule",{value:!0});var Wir=JA(),Jir=Xf();function Yir(t){let e=typeof t=="string"?(0,Wir.default)(t):t,r=Qir(e);return typeof t=="string"?(0,Jir.unsafeStringify)(r):r}wue.default=Yir;function Qir(t){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var YGe=b(Cue=>{"use strict";Object.defineProperty(Cue,"__esModule",{value:!0});var Xir=require("crypto");function Zir(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),(0,Xir.createHash)("md5").update(t).digest()}Cue.default=Zir});var ZA=b(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.URL=Zf.DNS=Zf.stringToBytes=void 0;var QGe=JA(),esr=Xf();function XGe(t){t=unescape(encodeURIComponent(t));let e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r);return e}Zf.stringToBytes=XGe;Zf.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Zf.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function tsr(t,e,r,n,i,s){let o=typeof r=="string"?XGe(r):r,a=typeof n=="string"?(0,QGe.default)(n):n;if(typeof n=="string"&&(n=(0,QGe.default)(n)),n?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(a),u.set(o,a.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){s=s||0;for(let c=0;c<16;++c)i[s+c]=u[c];return i}return(0,esr.unsafeStringify)(u)}Zf.default=tsr});var eHe=b(n2=>{"use strict";Object.defineProperty(n2,"__esModule",{value:!0});n2.URL=n2.DNS=void 0;var rsr=YGe(),Tue=ZA(),ZGe=ZA();Object.defineProperty(n2,"DNS",{enumerable:!0,get:function(){return ZGe.DNS}});Object.defineProperty(n2,"URL",{enumerable:!0,get:function(){return ZGe.URL}});function Oue(t,e,r,n){return(0,Tue.default)(48,rsr.default,t,e,r,n)}Oue.DNS=Tue.DNS;Oue.URL=Tue.URL;n2.default=Oue});var tHe=b(xue=>{"use strict";Object.defineProperty(xue,"__esModule",{value:!0});var nsr=require("crypto");xue.default={randomUUID:nsr.randomUUID}});var nHe=b(Iue=>{"use strict";Object.defineProperty(Iue,"__esModule",{value:!0});var rHe=tHe(),isr=NF(),ssr=Xf();function osr(t,e,r){if(rHe.default.randomUUID&&!e&&!t)return rHe.default.randomUUID();t=t||{};let n=t.random??t.rng?.()??(0,isr.default)();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,ssr.unsafeStringify)(n)}Iue.default=osr});var iHe=b(Rue=>{"use strict";Object.defineProperty(Rue,"__esModule",{value:!0});var asr=require("crypto");function usr(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),(0,asr.createHash)("sha1").update(t).digest()}Rue.default=usr});var oHe=b(i2=>{"use strict";Object.defineProperty(i2,"__esModule",{value:!0});i2.URL=i2.DNS=void 0;var csr=iHe(),Due=ZA(),sHe=ZA();Object.defineProperty(i2,"DNS",{enumerable:!0,get:function(){return sHe.DNS}});Object.defineProperty(i2,"URL",{enumerable:!0,get:function(){return sHe.URL}});function kue(t,e,r,n){return(0,Due.default)(80,csr.default,t,e,r,n)}kue.DNS=Due.DNS;kue.URL=Due.URL;i2.default=kue});var aHe=b(Mue=>{"use strict";Object.defineProperty(Mue,"__esModule",{value:!0});var lsr=Xf(),dsr=Sue(),psr=Aue();function fsr(t,e,r){t??={},r??=0;let n=(0,dsr.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,psr.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,lsr.unsafeStringify)(n)}Mue.default=fsr});var uHe=b(Pue=>{"use strict";Object.defineProperty(Pue,"__esModule",{value:!0});var hsr=JA(),msr=Xf();function ysr(t){let e=typeof t=="string"?(0,hsr.default)(t):t,r=gsr(e);return typeof t=="string"?(0,msr.unsafeStringify)(r):r}Pue.default=ysr;function gsr(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var pHe=b(e8=>{"use strict";Object.defineProperty(e8,"__esModule",{value:!0});e8.updateV7State=void 0;var cHe=NF(),bsr=Xf(),Nue={};function _sr(t,e,r){let n;if(t)n=lHe(t.random??t.rng?.()??(0,cHe.default)(),t.msecs,t.seq,e,r);else{let i=Date.now(),s=(0,cHe.default)();dHe(Nue,i,s),n=lHe(s,Nue.msecs,Nue.seq,e,r)}return e??(0,bsr.unsafeStringify)(n)}function dHe(t,e,r){return t.msecs??=-1/0,t.seq??=0,e>t.msecs?(t.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],t.msecs=e):(t.seq=t.seq+1|0,t.seq===0&&t.msecs++),t}e8.updateV7State=dHe;function lHe(t,e,r,n,i=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),i=0;else if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??=Date.now(),r??=t[6]*127<<24|t[7]<<16|t[8]<<8|t[9],n[i++]=e/1099511627776&255,n[i++]=e/4294967296&255,n[i++]=e/16777216&255,n[i++]=e/65536&255,n[i++]=e/256&255,n[i++]=e&255,n[i++]=112|r>>>28&15,n[i++]=r>>>20&255,n[i++]=128|r>>>14&63,n[i++]=r>>>6&255,n[i++]=r<<2&255|t[10]&3,n[i++]=t[11],n[i++]=t[12],n[i++]=t[13],n[i++]=t[14],n[i++]=t[15],n}e8.default=_sr});var fHe=b(Fue=>{"use strict";Object.defineProperty(Fue,"__esModule",{value:!0});var Esr=WA();function vsr(t){if(!(0,Esr.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}Fue.default=vsr});var FF=b(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.version=qr.validate=qr.v7=qr.v6ToV1=qr.v6=qr.v5=qr.v4=qr.v3=qr.v1ToV6=qr.v1=qr.stringify=qr.parse=qr.NIL=qr.MAX=void 0;var Ssr=KGe();Object.defineProperty(qr,"MAX",{enumerable:!0,get:function(){return Ssr.default}});var wsr=VGe();Object.defineProperty(qr,"NIL",{enumerable:!0,get:function(){return wsr.default}});var Asr=JA();Object.defineProperty(qr,"parse",{enumerable:!0,get:function(){return Asr.default}});var Csr=Xf();Object.defineProperty(qr,"stringify",{enumerable:!0,get:function(){return Csr.default}});var Tsr=Sue();Object.defineProperty(qr,"v1",{enumerable:!0,get:function(){return Tsr.default}});var Osr=Aue();Object.defineProperty(qr,"v1ToV6",{enumerable:!0,get:function(){return Osr.default}});var xsr=eHe();Object.defineProperty(qr,"v3",{enumerable:!0,get:function(){return xsr.default}});var Isr=nHe();Object.defineProperty(qr,"v4",{enumerable:!0,get:function(){return Isr.default}});var Rsr=oHe();Object.defineProperty(qr,"v5",{enumerable:!0,get:function(){return Rsr.default}});var Dsr=aHe();Object.defineProperty(qr,"v6",{enumerable:!0,get:function(){return Dsr.default}});var ksr=uHe();Object.defineProperty(qr,"v6ToV1",{enumerable:!0,get:function(){return ksr.default}});var Msr=pHe();Object.defineProperty(qr,"v7",{enumerable:!0,get:function(){return Msr.default}});var Psr=WA();Object.defineProperty(qr,"validate",{enumerable:!0,get:function(){return Psr.default}});var Nsr=fHe();Object.defineProperty(qr,"version",{enumerable:!0,get:function(){return Nsr.default}})});var yHe=b((bRr,mHe)=>{"use strict";var hHe=()=>process.platform==="linux",BF=null,Fsr=()=>{if(!BF)if(hHe()&&process.report){let t=process.report.excludeNetwork;process.report.excludeNetwork=!0,BF=process.report.getReport(),process.report.excludeNetwork=t}else BF={};return BF};mHe.exports={isLinux:hHe,getReport:Fsr}});var bHe=b((_Rr,gHe)=>{"use strict";var _4=require("fs"),Bsr="/usr/bin/ldd",qsr="/proc/self/exe",qF=2048,Lsr=t=>{let e=_4.openSync(t,"r"),r=Buffer.alloc(qF),n=_4.readSync(e,r,0,qF,0);return _4.close(e,()=>{}),r.subarray(0,n)},jsr=t=>new Promise((e,r)=>{_4.open(t,"r",(n,i)=>{if(n)r(n);else{let s=Buffer.alloc(qF);_4.read(i,s,0,qF,0,(o,a)=>{e(s.subarray(0,a)),_4.close(i,()=>{})})}})});gHe.exports={LDD_PATH:Bsr,SELF_PATH:qsr,readFileSync:Lsr,readFile:jsr}});var EHe=b((ERr,_He)=>{"use strict";var $sr=t=>{if(t.length<64||t.readUInt32BE(0)!==2135247942||t.readUInt8(4)!==2||t.readUInt8(5)!==1)return null;let e=t.readUInt32LE(32),r=t.readUInt16LE(54),n=t.readUInt16LE(56);for(let i=0;i<n;i++){let s=e+i*r;if(t.readUInt32LE(s)===3){let a=t.readUInt32LE(s+8),u=t.readUInt32LE(s+32);return t.subarray(a,a+u).toString().replace(/\0.*$/g,"")}}return null};_He.exports={interpreterPath:$sr}});var LHe=b((vRr,qHe)=>{"use strict";var SHe=require("child_process"),{isLinux:E4,getReport:wHe}=yHe(),{LDD_PATH:LF,SELF_PATH:AHe,readFile:Bue,readFileSync:que}=bHe(),{interpreterPath:CHe}=EHe(),ap,up,cp,THe="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",Tm="",OHe=()=>Tm||new Promise(t=>{SHe.exec(THe,(e,r)=>{Tm=e?" ":r,t(Tm)})}),xHe=()=>{if(!Tm)try{Tm=SHe.execSync(THe,{encoding:"utf8"})}catch{Tm=" "}return Tm},e1="glibc",IHe=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,s2="musl",Usr=t=>t.includes("libc.musl-")||t.includes("ld-musl-"),RHe=()=>{let t=wHe();return t.header&&t.header.glibcVersionRuntime?e1:Array.isArray(t.sharedObjects)&&t.sharedObjects.some(Usr)?s2:null},DHe=t=>{let[e,r]=t.split(/[\r\n]+/);return e&&e.includes(e1)?e1:r&&r.includes(s2)?s2:null},kHe=t=>{if(t){if(t.includes("/ld-musl-"))return s2;if(t.includes("/ld-linux-"))return e1}return null},MHe=t=>(t=t.toString(),t.includes("musl")?s2:t.includes("GNU C Library")?e1:null),Ksr=async()=>{if(up!==void 0)return up;up=null;try{let t=await Bue(LF);up=MHe(t)}catch{}return up},Vsr=()=>{if(up!==void 0)return up;up=null;try{let t=que(LF);up=MHe(t)}catch{}return up},Gsr=async()=>{if(ap!==void 0)return ap;ap=null;try{let t=await Bue(AHe),e=CHe(t);ap=kHe(e)}catch{}return ap},Hsr=()=>{if(ap!==void 0)return ap;ap=null;try{let t=que(AHe),e=CHe(t);ap=kHe(e)}catch{}return ap},PHe=async()=>{let t=null;if(E4()&&(t=await Gsr(),!t&&(t=await Ksr(),t||(t=RHe()),!t))){let e=await OHe();t=DHe(e)}return t},NHe=()=>{let t=null;if(E4()&&(t=Hsr(),!t&&(t=Vsr(),t||(t=RHe()),!t))){let e=xHe();t=DHe(e)}return t},zsr=async()=>E4()&&await PHe()!==e1,Wsr=()=>E4()&&NHe()!==e1,Jsr=async()=>{if(cp!==void 0)return cp;cp=null;try{let e=(await Bue(LF)).match(IHe);e&&(cp=e[1])}catch{}return cp},Ysr=()=>{if(cp!==void 0)return cp;cp=null;try{let e=que(LF).match(IHe);e&&(cp=e[1])}catch{}return cp},FHe=()=>{let t=wHe();return t.header&&t.header.glibcVersionRuntime?t.header.glibcVersionRuntime:null},vHe=t=>t.trim().split(/\s+/)[1],BHe=t=>{let[e,r,n]=t.split(/[\r\n]+/);return e&&e.includes(e1)?vHe(e):r&&n&&r.includes(s2)?vHe(n):null},Qsr=async()=>{let t=null;if(E4()&&(t=await Jsr(),t||(t=FHe()),!t)){let e=await OHe();t=BHe(e)}return t},Xsr=()=>{let t=null;if(E4()&&(t=Ysr(),t||(t=FHe()),!t)){let e=xHe();t=BHe(e)}return t};qHe.exports={GLIBC:e1,MUSL:s2,family:PHe,familySync:NHe,isNonGlibcLinux:zsr,isNonGlibcLinuxSync:Wsr,version:Qsr,versionSync:Xsr}});var ZHe=b((SRr,XHe)=>{var Zsr=require("fs"),id=require("path"),eor=require("url"),UHe=require("os"),KHe=typeof __webpack_require__=="function"?__non_webpack_require__:require,tor=process.config&&process.config.variables||{},ror=!!process.env.PREBUILDS_ONLY,Kue=process.versions,jue=Kue.modules;(Kue.deno||process.isBun)&&(jue="unsupported");var Lue=sor()?"electron":ior()?"node-webkit":"node",jF=process.env.npm_config_arch||UHe.arch(),$F=process.env.npm_config_platform||UHe.platform(),VHe=process.env.LIBC||(oor($F)?"musl":"glibc"),$ue=process.env.ARM_VERSION||(jF==="arm64"?"8":tor.arm_version)||"",GHe=(Kue.uv||"").split(".")[0];XHe.exports=lp;function lp(t){return KHe(lp.resolve(t))}lp.resolve=lp.path=function(t){t=id.resolve(t||".");var e="",r;try{e=KHe(id.join(t,"package.json")).name;var n=e.toUpperCase().replace(/-/g,"_");process.env[n+"_PREBUILD"]&&(t=process.env[n+"_PREBUILD"])}catch(y){r=y}if(!ror){var i=jHe(id.join(t,"build/Release"),$He);if(i)return i;var s=jHe(id.join(t,"build/Debug"),$He);if(s)return s}var o=f(t);if(o)return o;var a=f(id.dirname(process.execPath));if(a)return a;var u=(e[0]=="@"?"":"@"+e+"/")+e+"-"+$F+"-"+jF,c;try{var l=id.dirname(require("module").createRequire(eor.pathToFileURL(id.join(t,"package.json"))).resolve(u));return h(l)}catch(y){c=y}var d=["platform="+$F,"arch="+jF,"runtime="+Lue,"abi="+jue,"uv="+GHe,$ue?"armv="+$ue:"","libc="+VHe,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");let p="No native build was found for "+d+`
    attempted loading from: `+t+" and package: "+u+`
`;throw r&&(p+="Error finding package.json: "+r.message+`
`),c&&(p+="Error resolving package: "+c.message+`
`),new Error(p);function f(y){var E=Uue(id.join(y,"prebuilds")).map(HHe),v=E.filter(zHe($F,jF)).sort(WHe)[0];if(v)return h(id.join(y,"prebuilds",v.name))}function h(y){var E=Uue(y).map(JHe),v=E.filter(YHe(Lue,jue)),w=v.sort(QHe(Lue))[0];if(w)return id.join(y,w.file)}};function Uue(t){try{return Zsr.readdirSync(t)}catch{return[]}}function jHe(t,e){var r=Uue(t).filter(e);return r[0]&&id.join(t,r[0])}function $He(t){return/\.node$/.test(t)}function HHe(t){var e=t.split("-");if(e.length===2){var r=e[0],n=e[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:t,platform:r,architectures:n}}}function zHe(t,e){return function(r){return r==null||r.platform!==t?!1:r.architectures.includes(e)}}function WHe(t,e){return t.architectures.length-e.architectures.length}function JHe(t){var e=t.split("."),r=e.pop(),n={file:t,specificity:0};if(r==="node"){for(var i=0;i<e.length;i++){var s=e[i];if(s==="node"||s==="electron"||s==="node-webkit")n.runtime=s;else if(s==="napi")n.napi=!0;else if(s.slice(0,3)==="abi")n.abi=s.slice(3);else if(s.slice(0,2)==="uv")n.uv=s.slice(2);else if(s.slice(0,4)==="armv")n.armv=s.slice(4);else if(s==="glibc"||s==="musl")n.libc=s;else continue;n.specificity++}return n}}function YHe(t,e){return function(r){return!(r==null||r.runtime!==t&&!nor(r)||r.abi!==e&&!r.napi||r.uv&&r.uv!==GHe||r.armv&&r.armv!==$ue||r.libc&&r.libc!==VHe)}}function nor(t){return t.runtime==="node"&&t.napi}function QHe(t){return function(e,r){return e.runtime!==r.runtime?e.runtime===t?-1:1:e.abi!==r.abi?e.abi?-1:1:e.specificity!==r.specificity?e.specificity>r.specificity?-1:1:0}}function ior(){return!!(process.versions&&process.versions.nw)}function sor(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function oor(t){if(t!=="linux")return!1;let{familySync:e,MUSL:r}=LHe();return e()===r}lp.parseTags=JHe;lp.matchTags=YHe;lp.compareTags=QHe;lp.parseTuple=HHe;lp.matchTuple=zHe;lp.compareTuples=WHe});var eze=b((wRr,Gue)=>{var Vue=typeof __webpack_require__=="function"?__non_webpack_require__:require;typeof Vue.addon=="function"?Gue.exports=Vue.addon.bind(Vue):Gue.exports=ZHe()});var rze=b((ARr,tze)=>{tze.exports=eze()(__dirname)});var Bze=b(Gr=>{"use strict";var gze=require("stream"),aor=require("module"),Jue;try{Jue=new TextDecoder}catch{}var qe,Iu,J=0,tce=[],u2=tce,n8=0,un={},_r,r1,xu=0,jc=0,cs,n1,Oo=[],mr,nze={useRecords:!1,mapsAsObjects:!0},zF=class{},rce=new zF;rce.name="MessagePack 0xC1";var Om=!1,bze=2,Yue,Que,Xue;try{new Function("")}catch{bze=1/0}var xm=class t{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,r){if(qe)return Oze(()=>(JF(),this?this.unpack(e,r):t.prototype.unpack.call(nze,e,r)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof Buffer<"u"?Buffer.from(e):new Uint8Array(e)),typeof r=="object"?(Iu=r.end||e.length,J=r.start||0):(J=0,Iu=r>-1?r:e.length),n8=0,jc=0,r1=null,u2=tce,cs=null,qe=e;try{mr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw qe=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof t){if(un=this,this.structures)return _r=this.structures,UF(r);(!_r||_r.length>0)&&(_r=[])}else un=nze,(!_r||_r.length>0)&&(_r=[]);return UF(r)}unpackMultiple(e,r){let n,i=0;try{Om=!0;let s=e.length,o=this?this.unpack(e,s):ZF.unpack(e,s);if(r){if(r(o,i,J)===!1)return;for(;J<s;)if(i=J,r(UF(),i,J)===!1)return}else{for(n=[o];J<s;)i=J,n.push(UF());return n}}catch(s){throw s.lastPosition=i,s.values=n,s}finally{Om=!1,JF()}}_mergeStructures(e,r){Que&&(e=Que.call(this,e)),e=e||[],Object.isFrozen(e)&&(e=e.map(n=>n.slice(0)));for(let n=0,i=e.length;n<i;n++){let s=e[n];s&&(s.isShared=!0,n>=32&&(s.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in r||[])if(n>=0){let i=e[n],s=r[n];s&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[n]=i),e[n]=s)}return this.structures=e}decode(e,r){return this.unpack(e,r)}};function UF(t){try{if(!un.trusted&&!Om){let r=_r.sharedLength||0;r<_r.length&&(_r.length=r)}let e;if(un.randomAccessStructure&&qe[J]<64&&qe[J]>=32&&Yue?(e=Yue(qe,J,Iu,un),qe=null,!(t&&t.lazy)&&e&&(e=e.toJSON()),J=Iu):e=Ri(),cs&&(J=cs.postBundlePosition,cs=null),Om&&(_r.restoreStructures=null),J==Iu)_r&&_r.restoreStructures&&ize(),_r=null,qe=null,n1&&(n1=null);else{if(J>Iu)throw new Error("Unexpected end of MessagePack data");if(!Om){let r;try{r=JSON.stringify(e,(n,i)=>typeof i=="bigint"?`${i}n`:i).slice(0,100)}catch(n){r="(JSON view not available "+n+")"}throw new Error("Data read, but end of buffer not reached "+r)}}return e}catch(e){throw _r&&_r.restoreStructures&&ize(),JF(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||J>Iu)&&(e.incomplete=!0),e}}function ize(){for(let t in _r.restoreStructures)_r[t]=_r.restoreStructures[t];_r.restoreStructures=null}function Ri(){let t=qe[J++];if(t<160)if(t<128){if(t<64)return t;{let e=_r[t&63]||un.getStructures&&_ze()[t&63];return e?(e.read||(e.read=nce(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,un.mapsAsObjects){let e={};for(let r=0;r<t;r++){let n=Aze();n==="__proto__"&&(n="__proto_"),e[n]=Ri()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(Ri(),Ri());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=Ri();return un.freezeData?Object.freeze(e):e}else if(t<192){let e=t-160;if(jc>=J)return r1.slice(J-xu,(J+=e)-xu);if(jc==0&&Iu<140){let r=e<16?ice(e):wze(e);if(r!=null)return r}return WF(e)}else{let e;switch(t){case 192:return null;case 193:return cs?(e=Ri(),e>0?cs[1].slice(cs.position1,cs.position1+=e):cs[0].slice(cs.position0,cs.position0-=e)):rce;case 194:return!1;case 195:return!0;case 196:if(e=qe[J++],e===void 0)throw new Error("Unexpected end of buffer");return Hue(e);case 197:return e=mr.getUint16(J),J+=2,Hue(e);case 198:return e=mr.getUint32(J),J+=4,Hue(e);case 199:return o2(qe[J++]);case 200:return e=mr.getUint16(J),J+=2,o2(e);case 201:return e=mr.getUint32(J),J+=4,o2(e);case 202:if(e=mr.getFloat32(J),un.useFloat32>2){let r=A4[(qe[J]&127)<<1|qe[J+1]>>7];return J+=4,(r*e+(e>0?.5:-.5)>>0)/r}return J+=4,e;case 203:return e=mr.getFloat64(J),J+=8,e;case 204:return qe[J++];case 205:return e=mr.getUint16(J),J+=2,e;case 206:return e=mr.getUint32(J),J+=4,e;case 207:return un.int64AsType==="number"?(e=mr.getUint32(J)*4294967296,e+=mr.getUint32(J+4)):un.int64AsType==="string"?e=mr.getBigUint64(J).toString():un.int64AsType==="auto"?(e=mr.getBigUint64(J),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=mr.getBigUint64(J),J+=8,e;case 208:return mr.getInt8(J++);case 209:return e=mr.getInt16(J),J+=2,e;case 210:return e=mr.getInt32(J),J+=4,e;case 211:return un.int64AsType==="number"?(e=mr.getInt32(J)*4294967296,e+=mr.getUint32(J+4)):un.int64AsType==="string"?e=mr.getBigInt64(J).toString():un.int64AsType==="auto"?(e=mr.getBigInt64(J),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=mr.getBigInt64(J),J+=8,e;case 212:if(e=qe[J++],e==114)return lze(qe[J++]&63);{let r=Oo[e];if(r)return r.read?(J++,r.read(Ri())):r.noBuffer?(J++,r()):r(qe.subarray(J,++J));throw new Error("Unknown extension "+e)}case 213:return e=qe[J],e==114?(J++,lze(qe[J++]&63,qe[J++])):o2(2);case 214:return o2(4);case 215:return o2(8);case 216:return o2(16);case 217:return e=qe[J++],jc>=J?r1.slice(J-xu,(J+=e)-xu):Eze(e);case 218:return e=mr.getUint16(J),J+=2,jc>=J?r1.slice(J-xu,(J+=e)-xu):vze(e);case 219:return e=mr.getUint32(J),J+=4,jc>=J?r1.slice(J-xu,(J+=e)-xu):Sze(e);case 220:return e=mr.getUint16(J),J+=2,oze(e);case 221:return e=mr.getUint32(J),J+=4,oze(e);case 222:return e=mr.getUint16(J),J+=2,aze(e);case 223:return e=mr.getUint32(J),J+=4,aze(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}var uor=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function nce(t,e){function r(){if(r.count++>bze){let i=t.read=new Function("r","return function(){return "+(un.freezeData?"Object.freeze":"")+"({"+t.map(s=>s==="__proto__"?"__proto_:r()":uor.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"})}")(Ri);return t.highByte===0&&(t.read=sze(e,t.read)),i()}let n={};for(let i=0,s=t.length;i<s;i++){let o=t[i];o==="__proto__"&&(o="__proto_"),n[o]=Ri()}return un.freezeData?Object.freeze(n):n}return r.count=0,t.highByte===0?sze(e,r):r}var sze=(t,e)=>function(){let r=qe[J++];if(r===0)return e();let n=t<32?-(t+(r<<5)):t+(r<<5),i=_r[n]||_ze()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=nce(i,t)),i.read()};function _ze(){let t=Oze(()=>(qe=null,un.getStructures()));return _r=un._mergeStructures(t,_r)}var WF=c2,Eze=c2,vze=c2,Sze=c2;Gr.isNativeAccelerationEnabled=!1;function cor(t){Gr.isNativeAccelerationEnabled=!0,WF=e(1),Eze=e(2),vze=e(3),Sze=e(5);function e(r){return function(i){let s=u2[n8++];if(s==null){if(cs)return c2(i);let a=qe.byteOffset,u=t(J-r+a,Iu+a,qe.buffer);if(typeof u=="string")s=u,u2=tce;else if(u2=u,n8=1,jc=1,s=u2[0],s===void 0)throw new Error("Unexpected end of buffer")}let o=s.length;return o<=i?(J+=i,s):(r1=s,xu=J,jc=J+o,J+=i,s.slice(0,i))}}}function c2(t){let e;if(t<16&&(e=ice(t)))return e;if(t>64&&Jue)return Jue.decode(qe.subarray(J,J+=t));let r=J+t,n=[];for(e="";J<r;){let i=qe[J++];if((i&128)===0)n.push(i);else if((i&224)===192){let s=qe[J++]&63;n.push((i&31)<<6|s)}else if((i&240)===224){let s=qe[J++]&63,o=qe[J++]&63;n.push((i&31)<<12|s<<6|o)}else if((i&248)===240){let s=qe[J++]&63,o=qe[J++]&63,a=qe[J++]&63,u=(i&7)<<18|s<<12|o<<6|a;u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u)}else n.push(i);n.length>=4096&&(e+=Is.apply(String,n),n.length=0)}return n.length>0&&(e+=Is.apply(String,n)),e}function lor(t,e,r){let n=qe;qe=t,J=e;try{return c2(r)}finally{qe=n}}function oze(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=Ri();return un.freezeData?Object.freeze(e):e}function aze(t){if(un.mapsAsObjects){let e={};for(let r=0;r<t;r++){let n=Aze();n==="__proto__"&&(n="__proto_"),e[n]=Ri()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(Ri(),Ri());return e}}var Is=String.fromCharCode;function wze(t){let e=J,r=new Array(t);for(let n=0;n<t;n++){let i=qe[J++];if((i&128)>0){J=e;return}r[n]=i}return Is.apply(String,r)}function ice(t){if(t<4)if(t<2){if(t===0)return"";{let e=qe[J++];if((e&128)>1){J-=1;return}return Is(e)}}else{let e=qe[J++],r=qe[J++];if((e&128)>0||(r&128)>0){J-=2;return}if(t<3)return Is(e,r);let n=qe[J++];if((n&128)>0){J-=3;return}return Is(e,r,n)}else{let e=qe[J++],r=qe[J++],n=qe[J++],i=qe[J++];if((e&128)>0||(r&128)>0||(n&128)>0||(i&128)>0){J-=4;return}if(t<6){if(t===4)return Is(e,r,n,i);{let s=qe[J++];if((s&128)>0){J-=5;return}return Is(e,r,n,i,s)}}else if(t<8){let s=qe[J++],o=qe[J++];if((s&128)>0||(o&128)>0){J-=6;return}if(t<7)return Is(e,r,n,i,s,o);let a=qe[J++];if((a&128)>0){J-=7;return}return Is(e,r,n,i,s,o,a)}else{let s=qe[J++],o=qe[J++],a=qe[J++],u=qe[J++];if((s&128)>0||(o&128)>0||(a&128)>0||(u&128)>0){J-=8;return}if(t<10){if(t===8)return Is(e,r,n,i,s,o,a,u);{let c=qe[J++];if((c&128)>0){J-=9;return}return Is(e,r,n,i,s,o,a,u,c)}}else if(t<12){let c=qe[J++],l=qe[J++];if((c&128)>0||(l&128)>0){J-=10;return}if(t<11)return Is(e,r,n,i,s,o,a,u,c,l);let d=qe[J++];if((d&128)>0){J-=11;return}return Is(e,r,n,i,s,o,a,u,c,l,d)}else{let c=qe[J++],l=qe[J++],d=qe[J++],p=qe[J++];if((c&128)>0||(l&128)>0||(d&128)>0||(p&128)>0){J-=12;return}if(t<14){if(t===12)return Is(e,r,n,i,s,o,a,u,c,l,d,p);{let f=qe[J++];if((f&128)>0){J-=13;return}return Is(e,r,n,i,s,o,a,u,c,l,d,p,f)}}else{let f=qe[J++],h=qe[J++];if((f&128)>0||(h&128)>0){J-=14;return}if(t<15)return Is(e,r,n,i,s,o,a,u,c,l,d,p,f,h);let y=qe[J++];if((y&128)>0){J-=15;return}return Is(e,r,n,i,s,o,a,u,c,l,d,p,f,h,y)}}}}}function uze(){let t=qe[J++],e;if(t<192)e=t-160;else switch(t){case 217:e=qe[J++];break;case 218:e=mr.getUint16(J),J+=2;break;case 219:e=mr.getUint32(J),J+=4;break;default:throw new Error("Expected string")}return c2(e)}function Hue(t){return un.copyBuffers?Uint8Array.prototype.slice.call(qe,J,J+=t):qe.subarray(J,J+=t)}function o2(t){let e=qe[J++];if(Oo[e]){let r;return Oo[e](qe.subarray(J,r=J+=t),n=>{J=n;try{return Ri()}finally{J=r}})}else throw new Error("Unknown extension type "+e)}var cze=new Array(4096);function Aze(){let t=qe[J++];if(t>=160&&t<192){if(t=t-160,jc>=J)return r1.slice(J-xu,(J+=t)-xu);if(!(jc==0&&Iu<180))return WF(t)}else return J--,Cze(Ri());let e=(t<<5^(t>1?mr.getUint16(J):t>0?qe[J]:0))&4095,r=cze[e],n=J,i=J+t-3,s,o=0;if(r&&r.bytes==t){for(;n<i;){if(s=mr.getUint32(n),s!=r[o++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(s=qe[n++],s!=r[o++]){n=1879048192;break}if(n===i)return J=n,r.string;i-=3,n=J}for(r=[],cze[e]=r,r.bytes=t;n<i;)s=mr.getUint32(n),r.push(s),n+=4;for(i+=3;n<i;)s=qe[n++],r.push(s);let a=t<16?ice(t):wze(t);return a!=null?r.string=a:r.string=WF(t)}function Cze(t){if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";if(un.allowArraysInMapKeys&&Array.isArray(t)&&t.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return t.flat().toString();throw new Error(`Invalid property type for record: ${typeof t}`)}var lze=(t,e)=>{let r=Ri().map(Cze),n=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let i=_r[t];return i&&(i.isShared||Om)&&((_r.restoreStructures||(_r.restoreStructures=[]))[t]=i),_r[t]=r,r.read=nce(r,n),r.read()};Oo[0]=()=>{};Oo[0].noBuffer=!0;Oo[66]=t=>{let e=t.byteLength%8||8,r=BigInt(t[0]&128?t[0]-256:t[0]);for(let n=1;n<e;n++)r<<=BigInt(8),r+=BigInt(t[n]);if(t.byteLength!==e){let n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=(s,o)=>{let a=o-s;if(a<=40){let d=n.getBigUint64(s);for(let p=s+8;p<o;p+=8)d<<=64n,d|=n.getBigUint64(p);return d}let u=s+(a>>4<<3),c=i(s,u),l=i(u,o);return c<<BigInt((o-u)*8)|l};r=r<<BigInt((n.byteLength-e)*8)|i(e,n.byteLength)}return r};var dze={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:typeof AggregateError=="function"?AggregateError:null};Oo[101]=()=>{let t=Ri();if(!dze[t[0]]){let e=Error(t[1],{cause:t[2]});return e.name=t[0],e}return dze[t[0]](t[1],{cause:t[2]})};Oo[105]=t=>{if(un.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=mr.getUint32(J-4);n1||(n1=new Map);let r=qe[J],n;r>=144&&r<160||r==220||r==221?n=[]:r>=128&&r<144||r==222||r==223?n=new Map:(r>=199&&r<=201||r>=212&&r<=216)&&qe[J+1]===115?n=new Set:n={};let i={target:n};n1.set(e,i);let s=Ri();if(i.used)Object.assign(n,s);else return i.target=s;if(n instanceof Map)for(let[o,a]of s.entries())n.set(o,a);if(n instanceof Set)for(let o of Array.from(s))n.add(o);return n};Oo[112]=t=>{if(un.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=mr.getUint32(J-4),r=n1.get(e);return r.used=!0,r.target};Oo[115]=()=>new Set(Ri());var Tze=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array"),dor=typeof globalThis=="object"?globalThis:window;Oo[116]=t=>{let e=t[0],r=Uint8Array.prototype.slice.call(t,1).buffer,n=Tze[e];if(!n){if(e===16)return r;if(e===17)return new DataView(r);throw new Error("Could not find typed array for code "+e)}return new dor[n](r)};Oo[120]=()=>{let t=Ri();return new RegExp(t[0],t[1])};var por=[];Oo[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=J;return J+=e-t.length,cs=por,cs=[uze(),uze()],cs.position0=0,cs.position1=0,cs.postBundlePosition=J,J=r,Ri()};Oo[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Oze(t){Xue&&Xue();let e=Iu,r=J,n=n8,i=xu,s=jc,o=r1,a=u2,u=n1,c=cs,l=new Uint8Array(qe.slice(0,Iu)),d=_r,p=_r.slice(0,_r.length),f=un,h=Om,y=t();return Iu=e,J=r,n8=n,xu=i,jc=s,r1=o,u2=a,n1=u,cs=c,qe=l,Om=h,_r=d,_r.splice(0,_r.length,...p),un=f,mr=new DataView(qe.buffer,qe.byteOffset,qe.byteLength),y}function JF(){qe=null,n1=null,_r=null}function hor(t){t.unpack?Oo[t.type]=t.unpack:Oo[t.type]=t}var A4=new Array(147);for(let t=0;t<256;t++)A4[t]=+("1e"+Math.floor(45.15-t*.30103));var mor=xm,ZF=new xm({useRecords:!1}),yor=ZF.unpack,gor=ZF.unpackMultiple,bor=ZF.unpack,xze={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},Ize=new Float32Array(1),pze=new Uint8Array(Ize.buffer,0,4);function _or(t){Ize[0]=t;let e=A4[(pze[3]&127)<<1|pze[2]>>7];return(e*t+(t>0?.5:-.5)>>0)/e}function Eor(t,e,r){Yue=t,Que=e,Xue=r}var VF;try{VF=new TextEncoder}catch{}var YF,sce,w4=typeof Buffer<"u",KF=w4?function(t){return Buffer.allocUnsafeSlow(t)}:Uint8Array,Rze=w4?Buffer:Uint8Array,fze=w4?4294967296:2144337920,pe,t8,an,ee=0,To,zn=null,Dze,vor=21760,Sor=/[\u0080-\uFFFF]/,t1=Symbol("record-id"),Im=class extends xm{constructor(e){super(e),this.offset=0;let r,n,i,s,o=Rze.prototype.utf8Write?function(k,G){return pe.utf8Write(k,G,pe.byteLength-G)}:VF&&VF.encodeInto?function(k,G){return VF.encodeInto(k,pe.subarray(G)).written}:!1,a=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,l=e.maxSharedStructures;if(l==null&&(l=c?32:0),l>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let d=e.maxOwnStructures;d==null&&(d=c?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let p=l>32||d+l>64,f=l+64,h=l+d+64;if(h>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let y=[],E=0,v=0;this.pack=this.encode=function(k,G){if(pe||(pe=new KF(8192),an=pe.dataView||(pe.dataView=new DataView(pe.buffer,0,8192)),ee=0),To=pe.length-10,To-ee<2048?(pe=new KF(pe.length),an=pe.dataView||(pe.dataView=new DataView(pe.buffer,0,pe.length)),To=pe.length-10,ee=0):ee=ee+7&2147483640,r=ee,G&Nor&&(ee+=G&255),s=a.structuredClone?new Map:null,a.bundleStrings&&typeof k!="string"?(zn=[],zn.size=1/0):zn=null,i=a.structures,i){i.uninitialized&&(i=a._mergeStructures(a.getStructures()));let $=i.sharedLength||0;if($>l)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let V=0;V<$;V++){let me=i[V];if(!me)continue;let Oe,fe=i.transitions;for(let He=0,Pe=me.length;He<Pe;He++){let Ce=me[He];Oe=fe[Ce],Oe||(Oe=fe[Ce]=Object.create(null)),fe=Oe}fe[t1]=V+64}this.lastNamedStructuresLength=$}u||(i.nextId=$+64)}n&&(n=!1);let ne;try{a.randomAccessStructure&&k&&k.constructor&&k.constructor===Object?K(k):A(k);let $=zn;if(zn&&mze(r,A,0),s&&s.idsToInsert){let V=s.idsToInsert.sort((He,Pe)=>He.offset>Pe.offset?1:-1),me=V.length,Oe=-1;for(;$&&me>0;){let He=V[--me].offset+r;He<$.stringsPosition+r&&Oe===-1&&(Oe=0),He>$.position+r?Oe>=0&&(Oe+=6):(Oe>=0&&(an.setUint32($.position+r,an.getUint32($.position+r)+Oe),Oe=-1),$=$.previous,me++)}Oe>=0&&$&&an.setUint32($.position+r,an.getUint32($.position+r)+Oe),ee+=V.length*6,ee>To&&I(ee),a.offset=ee;let fe=wor(pe.subarray(r,ee),V);return s=null,fe}return a.offset=ee,G&Mor?(pe.start=r,pe.end=ee,pe):pe.subarray(r,ee)}catch($){throw ne=$,$}finally{if(i&&(w(),n&&a.saveStructures)){let $=i.sharedLength||0,V=pe.subarray(r,ee),me=kze(i,a);if(!ne)return a.saveStructures(me,me.isCompatible)===!1?a.pack(k,G):(a.lastNamedStructuresLength=$,pe.length>1073741824&&(pe=null),V)}pe.length>1073741824&&(pe=null),G&Por&&(ee=r)}};let w=()=>{v<10&&v++;let k=i.sharedLength||0;if(i.length>k&&!u&&(i.length=k),E>1e4)i.transitions=null,v=0,E=0,y.length>0&&(y=[]);else if(y.length>0&&!u){for(let G=0,ne=y.length;G<ne;G++)y[G][t1]=0;y=[]}},T=k=>{var G=k.length;G<16?pe[ee++]=144|G:G<65536?(pe[ee++]=220,pe[ee++]=G>>8,pe[ee++]=G&255):(pe[ee++]=221,an.setUint32(ee,G),ee+=4);for(let ne=0;ne<G;ne++)A(k[ne])},A=k=>{ee>To&&(pe=I(ee));var G=typeof k,ne;if(G==="string"){let $=k.length;if(zn&&$>=4&&$<4096){if((zn.size+=$)>vor){let fe,He=(zn[0]?zn[0].length*3+zn[1].length:0)+10;ee+He>To&&(pe=I(ee+He));let Pe;zn.position?(Pe=zn,pe[ee]=200,ee+=3,pe[ee++]=98,fe=ee-r,ee+=4,mze(r,A,0),an.setUint16(fe+r-3,ee-r-fe)):(pe[ee++]=214,pe[ee++]=98,fe=ee-r,ee+=4),zn=["",""],zn.previous=Pe,zn.size=0,zn.position=fe}let Oe=Sor.test(k);zn[Oe?0:1]+=k,pe[ee++]=193,A(Oe?-$:$);return}let V;$<32?V=1:$<256?V=2:$<65536?V=3:V=5;let me=$*3;if(ee+me>To&&(pe=I(ee+me)),$<64||!o){let Oe,fe,He,Pe=ee+V;for(Oe=0;Oe<$;Oe++)fe=k.charCodeAt(Oe),fe<128?pe[Pe++]=fe:fe<2048?(pe[Pe++]=fe>>6|192,pe[Pe++]=fe&63|128):(fe&64512)===55296&&((He=k.charCodeAt(Oe+1))&64512)===56320?(fe=65536+((fe&1023)<<10)+(He&1023),Oe++,pe[Pe++]=fe>>18|240,pe[Pe++]=fe>>12&63|128,pe[Pe++]=fe>>6&63|128,pe[Pe++]=fe&63|128):(pe[Pe++]=fe>>12|224,pe[Pe++]=fe>>6&63|128,pe[Pe++]=fe&63|128);ne=Pe-ee-V}else ne=o(k,ee+V);ne<32?pe[ee++]=160|ne:ne<256?(V<2&&pe.copyWithin(ee+2,ee+1,ee+1+ne),pe[ee++]=217,pe[ee++]=ne):ne<65536?(V<3&&pe.copyWithin(ee+3,ee+2,ee+2+ne),pe[ee++]=218,pe[ee++]=ne>>8,pe[ee++]=ne&255):(V<5&&pe.copyWithin(ee+5,ee+3,ee+3+ne),pe[ee++]=219,an.setUint32(ee,ne),ee+=4),ee+=ne}else if(G==="number")if(k>>>0===k)k<32||k<128&&this.useRecords===!1||k<64&&!this.randomAccessStructure?pe[ee++]=k:k<256?(pe[ee++]=204,pe[ee++]=k):k<65536?(pe[ee++]=205,pe[ee++]=k>>8,pe[ee++]=k&255):(pe[ee++]=206,an.setUint32(ee,k),ee+=4);else if(k>>0===k)k>=-32?pe[ee++]=256+k:k>=-128?(pe[ee++]=208,pe[ee++]=k+256):k>=-32768?(pe[ee++]=209,an.setInt16(ee,k),ee+=2):(pe[ee++]=210,an.setInt32(ee,k),ee+=4);else{let $;if(($=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){pe[ee++]=202,an.setFloat32(ee,k);let V;if($<4||(V=k*A4[(pe[ee]&127)<<1|pe[ee+1]>>7])>>0===V){ee+=4;return}else ee--}pe[ee++]=203,an.setFloat64(ee,k),ee+=8}else if(G==="object"||G==="function")if(!k)pe[ee++]=192;else{if(s){let V=s.get(k);if(V){if(!V.id){let me=s.idsToInsert||(s.idsToInsert=[]);V.id=me.push(V)}pe[ee++]=214,pe[ee++]=112,an.setUint32(ee,V.id),ee+=4;return}else s.set(k,{offset:ee-r})}let $=k.constructor;if($===Object)M(k);else if($===Array)T(k);else if($===Map)if(this.mapAsEmptyObject)pe[ee++]=128;else{ne=k.size,ne<16?pe[ee++]=128|ne:ne<65536?(pe[ee++]=222,pe[ee++]=ne>>8,pe[ee++]=ne&255):(pe[ee++]=223,an.setUint32(ee,ne),ee+=4);for(let[V,me]of k)A(V),A(me)}else{for(let V=0,me=YF.length;V<me;V++){let Oe=sce[V];if(k instanceof Oe){let fe=YF[V];if(fe.write){fe.type&&(pe[ee++]=212,pe[ee++]=fe.type,pe[ee++]=0);let bt=fe.write.call(this,k);bt===k?Array.isArray(k)?T(k):M(k):A(bt);return}let He=pe,Pe=an,Ce=ee;pe=null;let Rr;try{Rr=fe.pack.call(this,k,bt=>(pe=He,He=null,ee+=bt,ee>To&&I(ee),{target:pe,targetView:an,position:ee-bt}),A)}finally{He&&(pe=He,an=Pe,ee=Ce,To=pe.length-10)}Rr&&(Rr.length+ee>To&&I(Rr.length+ee),ee=hze(Rr,pe,ee,fe.type));return}}if(Array.isArray(k))T(k);else{if(k.toJSON){let V=k.toJSON();if(V!==k)return A(V)}if(G==="function")return A(this.writeFunction&&this.writeFunction(k));M(k)}}}else if(G==="boolean")pe[ee++]=k?195:194;else if(G==="bigint"){if(k<9223372036854776e3&&k>=-9223372036854776e3)pe[ee++]=211,an.setBigInt64(ee,k);else if(k<18446744073709552e3&&k>0)pe[ee++]=207,an.setBigUint64(ee,k);else if(this.largeBigIntToFloat)pe[ee++]=203,an.setFloat64(ee,Number(k));else{if(this.largeBigIntToString)return A(k.toString());if(this.useBigIntExtension||this.moreTypes){let $=k<0?BigInt(-1):BigInt(0),V;if(k>>BigInt(65536)===$){let me=BigInt(18446744073709552e3)-BigInt(1),Oe=[];for(;Oe.push(k&me),k>>BigInt(63)!==$;)k>>=BigInt(64);V=new Uint8Array(new BigUint64Array(Oe).buffer),V.reverse()}else{let me=k<0,Oe=(me?~k:k).toString(16);if(Oe.length%2?Oe="0"+Oe:parseInt(Oe.charAt(0),16)>=8&&(Oe="00"+Oe),w4)V=Buffer.from(Oe,"hex");else{V=new Uint8Array(Oe.length/2);for(let fe=0;fe<V.length;fe++)V[fe]=parseInt(Oe.slice(fe*2,fe*2+2),16)}if(me)for(let fe=0;fe<V.length;fe++)V[fe]=~V[fe]}V.length+ee>To&&I(V.length+ee),ee=hze(V,pe,ee,66);return}else throw new RangeError(k+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}ee+=8}else if(G==="undefined")this.encodeUndefinedAsNil?pe[ee++]=192:(pe[ee++]=212,pe[ee++]=0,pe[ee++]=0);else throw new Error("Unknown type: "+G)},C=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?k=>{let G;if(this.skipValues){G=[];for(let V in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(V))&&!this.skipValues.includes(k[V])&&G.push(V)}else G=Object.keys(k);let ne=G.length;ne<16?pe[ee++]=128|ne:ne<65536?(pe[ee++]=222,pe[ee++]=ne>>8,pe[ee++]=ne&255):(pe[ee++]=223,an.setUint32(ee,ne),ee+=4);let $;if(this.coercibleKeyAsNumber)for(let V=0;V<ne;V++){$=G[V];let me=Number($);A(isNaN(me)?$:me),A(k[$])}else for(let V=0;V<ne;V++)A($=G[V]),A(k[$])}:k=>{pe[ee++]=222;let G=ee-r;ee+=2;let ne=0;for(let $ in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty($))&&(A($),A(k[$]),ne++);if(ne>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');pe[G+++r]=ne>>8,pe[G+r]=ne&255},x=this.useRecords===!1?C:e.progressiveRecords&&!p?k=>{let G,ne=i.transitions||(i.transitions=Object.create(null)),$=ee++-r,V;for(let me in k)if(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(me)){if(G=ne[me],G)ne=G;else{let Oe=Object.keys(k),fe=ne;ne=i.transitions;let He=0;for(let Pe=0,Ce=Oe.length;Pe<Ce;Pe++){let Rr=Oe[Pe];G=ne[Rr],G||(G=ne[Rr]=Object.create(null),He++),ne=G}$+r+1==ee?(ee--,F(ne,Oe,He)):B(ne,Oe,$,He),V=!0,ne=fe[me]}A(k[me])}if(!V){let me=ne[t1];me?pe[$+r]=me:B(ne,Object.keys(k),$,0)}}:k=>{let G,ne=i.transitions||(i.transitions=Object.create(null)),$=0;for(let me in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(me))&&(G=ne[me],G||(G=ne[me]=Object.create(null),$++),ne=G);let V=ne[t1];V?V>=96&&p?(pe[ee++]=((V-=96)&31)+96,pe[ee++]=V>>5):pe[ee++]=V:F(ne,ne.__keys__||Object.keys(k),$);for(let me in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(me))&&A(k[me])},R=typeof this.useRecords=="function"&&this.useRecords,M=R?k=>{R(k)?x(k):C(k)}:x,I=k=>{let G;if(k>16777216){if(k-r>fze)throw new Error("Packed buffer would be larger than maximum buffer size");G=Math.min(fze,Math.round(Math.max((k-r)*(k>67108864?1.25:2),4194304)/4096)*4096)}else G=(Math.max(k-r<<2,pe.length-1)>>12)+1<<12;let ne=new KF(G);return an=ne.dataView||(ne.dataView=new DataView(ne.buffer,0,G)),k=Math.min(k,pe.length),pe.copy?pe.copy(ne,0,r,k):ne.set(pe.slice(r,k)),ee-=r,r=0,To=ne.length-10,pe=ne},F=(k,G,ne)=>{let $=i.nextId;$||($=64),$<f&&this.shouldShareStructure&&!this.shouldShareStructure(G)?($=i.nextOwnId,$<h||($=f),i.nextOwnId=$+1):($>=h&&($=f),i.nextId=$+1);let V=G.highByte=$>=96&&p?$-96>>5:-1;k[t1]=$,k.__keys__=G,i[$-64]=G,$<f?(G.isShared=!0,i.sharedLength=$-63,n=!0,V>=0?(pe[ee++]=($&31)+96,pe[ee++]=V):pe[ee++]=$):(V>=0?(pe[ee++]=213,pe[ee++]=114,pe[ee++]=($&31)+96,pe[ee++]=V):(pe[ee++]=212,pe[ee++]=114,pe[ee++]=$),ne&&(E+=v*ne),y.length>=d&&(y.shift()[t1]=0),y.push(k),A(G))},B=(k,G,ne,$)=>{let V=pe,me=ee,Oe=To,fe=r;pe=t8,ee=0,r=0,pe||(t8=pe=new KF(8192)),To=pe.length-10,F(k,G,$),t8=pe;let He=ee;if(pe=V,ee=me,To=Oe,r=fe,He>1){let Pe=ee+He-1;Pe>To&&I(Pe);let Ce=ne+r;pe.copyWithin(Ce+He,Ce+1,ee),pe.set(t8.slice(0,He),Ce),ee=Pe}else pe[ne+r]=t8[0]},K=k=>{let G=Dze(k,pe,r,ee,i,I,(ne,$,V)=>{if(V)return n=!0;ee=$;let me=pe;return A(ne),w(),me!==pe?{position:ee,targetView:an,target:pe}:ee},this);if(G===0)return M(k);ee=G}}useBuffer(e){pe=e,pe.dataView||(pe.dataView=new DataView(pe.buffer,pe.byteOffset,pe.byteLength)),an=pe.dataView,ee=0}set position(e){ee=e}get position(){return ee}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}};sce=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,zF];YF=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:s,position:o}=e(6);i[o++]=214,i[o++]=255,s.setUint32(o,n)}else if(n>0&&n<4294967296){let{target:i,targetView:s,position:o}=e(10);i[o++]=215,i[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:i,targetView:s,position:o}=e(3);i[o++]=212,i[o++]=255,i[o++]=255}else{let{target:i,targetView:s,position:o}=e(15);i[o++]=199,i[o++]=12,i[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){if(this.setAsEmptyObject)return e(0),r({});let n=Array.from(t),{target:i,position:s}=e(this.moreTypes?3:0);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),r(n)}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),r([t.name,t.message,t.cause])}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),r([t.source,t.flags])}},{pack(t,e){this.moreTypes?zue(t,16,e):Wue(w4?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==Rze&&this.moreTypes?zue(t,Tze.indexOf(r.name),e):Wue(t,e)}},{pack(t,e){this.moreTypes?zue(t,17,e):Wue(w4?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];function zue(t,e,r,n){let i=t.byteLength;if(i+1<256){var{target:s,position:o}=r(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=r(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:a}=r(7+i);s[o++]=201,a.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=e,t.buffer||(t=new Uint8Array(t)),s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function Wue(t,e){let r=t.byteLength;var n,i;if(r<256){var{target:n,position:i}=e(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=e(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=r&255}else{var{target:n,position:i,targetView:s}=e(r+5);n[i++]=198,s.setUint32(i,r),i+=4}n.set(t,i)}function hze(t,e,r,n){let i=t.length;switch(i){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:i<256?(e[r++]=199,e[r++]=i):i<65536?(e[r++]=200,e[r++]=i>>8,e[r++]=i&255):(e[r++]=201,e[r++]=i>>24,e[r++]=i>>16&255,e[r++]=i>>8&255,e[r++]=i&255)}return e[r++]=n,e.set(t,r),r+=i,r}function wor(t,e){let r,n=e.length*6,i=t.length-n;for(;r=e.pop();){let s=r.offset,o=r.id;t.copyWithin(s+n,s,i),n-=6;let a=s+n;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,i=s}return t}function mze(t,e,r){if(zn.length>0){an.setUint32(zn.position+t,ee+r-zn.position-t),zn.stringsPosition=ee-t;let n=zn;zn=null,e(n[0]),e(n[1])}}function Aor(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");sce.unshift(t.Class),YF.unshift(t)}hor(t)}function kze(t,e){return t.isCompatible=r=>{let n=!r||(e.lastNamedStructuresLength||0)===r.length;return n||e._mergeStructures(r),n},t}function Cor(t,e){Dze=t,kze=e}var Mze=new Im({useRecords:!1}),Tor=Mze.pack,Oor=Mze.pack,xor=Im,{NEVER:Ior,ALWAYS:Ror,DECIMAL_ROUND:Dor,DECIMAL_FIT:kor}=xze,Mor=512,Por=1024,Nor=2048,Zue=3,S4=0,r8=2,GF=1,oce=16,Pze=["num","object","string","ascii"];Pze[oce]="date";var For=[!1,!0,!0,!1,!1,!0,!0,!1],Nze;try{new Function(""),Nze=!0}catch{}var a2,Bor=typeof Buffer<"u",HF,dp;try{HF=new TextEncoder}catch{}var qor=Bor?function(t,e,r){return t.utf8Write(e,r,t.byteLength-r)}:HF&&HF.encodeInto?function(t,e,r){return HF.encodeInto(e,t.subarray(r)).written}:!1;Cor(Fze,Kor);function Fze(t,e,r,n,i,s,o,a){let u=a.typedStructs||(a.typedStructs=[]),c=e.dataView,l=(u.lastStringStart||100)+n,d=e.length-10,p=n;n>d&&(e=s(n),c=e.dataView,n-=r,p-=r,l-=r,r=0,d=e.length-10);let f,h=l,y=u.transitions||(u.transitions=Object.create(null)),E=u.nextId||u.length,v=E<15?1:E<240?2:E<61440?3:E<15728640?4:0;if(v===0)return 0;n+=v;let w=[],T,A=0;for(let x in t){let R=t[x],M=y[x];switch(M||(y[x]=M={key:x,parent:y,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),n>d&&(e=s(n),c=e.dataView,n-=r,p-=r,l-=r,h-=r,r=0,d=e.length-10),typeof R){case"number":let I=R;if(E<200||!M.num64){if(I>>0===I&&I<536870912&&I>-520093696){I<246&&I>=0&&(M.num8&&!(E>200&&M.num32)||I<32&&!M.num32)?(y=M.num8||Ka(M,S4,1),e[n++]=I):(y=M.num32||Ka(M,S4,4),c.setUint32(n,I,!0),n+=4);break}else if(I<4294967296&&I>=-2147483648&&(c.setFloat32(n,I,!0),For[e[n+3]>>>5])){let k;if((k=I*A4[(e[n+3]&127)<<1|e[n+2]>>7])>>0===k){y=M.num32||Ka(M,S4,4),n+=4;break}}}y=M.num64||Ka(M,S4,8),c.setFloat64(n,I,!0),n+=8;break;case"string":let F=R.length;if(f=h-l,(F<<2)+h>d&&(e=s((F<<2)+h),c=e.dataView,n-=r,p-=r,l-=r,h-=r,r=0,d=e.length-10),F>65280+f>>2){w.push(x,R,n-p);break}let B,K=h;if(F<64){let k,G,ne;for(k=0;k<F;k++)G=R.charCodeAt(k),G<128?e[h++]=G:G<2048?(B=!0,e[h++]=G>>6|192,e[h++]=G&63|128):(G&64512)===55296&&((ne=R.charCodeAt(k+1))&64512)===56320?(B=!0,G=65536+((G&1023)<<10)+(ne&1023),k++,e[h++]=G>>18|240,e[h++]=G>>12&63|128,e[h++]=G>>6&63|128,e[h++]=G&63|128):(B=!0,e[h++]=G>>12|224,e[h++]=G>>6&63|128,e[h++]=G&63|128)}else h+=qor(e,R,h),B=h-K>F;if(f<160||f<246&&(M.ascii8||M.string8)){if(B)(y=M.string8)||(u.length>10&&(y=M.ascii8)?(y.__type=r8,M.ascii8=null,M.string8=y,o(null,0,!0)):y=Ka(M,r8,1));else if(f===0&&!T){T=!0,y=M.ascii0||Ka(M,Zue,0);break}else!(y=M.ascii8)&&!(u.length>10&&(y=M.string8))&&(y=Ka(M,Zue,1));e[n++]=f}else y=M.string16||Ka(M,r8,2),c.setUint16(n,f,!0),n+=2;break;case"object":if(R){R.constructor===Date?(y=M.date64||Ka(M,oce,8),c.setFloat64(n,R.getTime(),!0),n+=8):w.push(x,R,A);break}else M=yze(M,n,c,-10),M?(y=M,n=a2):w.push(x,R,A);break;case"boolean":y=M.num8||M.ascii8||Ka(M,S4,1),e[n++]=R?249:248;break;case"undefined":M=yze(M,n,c,-9),M?(y=M,n=a2):w.push(x,R,A);break;default:w.push(x,R,A)}A++}for(let x=0,R=w.length;x<R;){let M=w[x++],I=w[x++],F=w[x++],B=y[M];B||(y[M]=B={key:M,parent:y,enumerationOffset:F-A,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null});let K;if(I){let k;f=h-l,f<65280?(y=B.object16,y?k=2:(y=B.object32)?k=4:(y=Ka(B,GF,2),k=2)):(y=B.object32||Ka(B,GF,4),k=4),K=o(I,h),typeof K=="object"?(h=K.position,c=K.targetView,e=K.target,l-=r,n-=r,p-=r,r=0):h=K,k===2?(c.setUint16(n,f,!0),n+=2):(c.setUint32(n,f,!0),n+=4)}else y=B.object16||Ka(B,GF,2),c.setInt16(n,I===null?-10:-9,!0),n+=2;A++}let C=y[t1];if(C==null){C=a.typedStructs.length;let x=[],R=y,M,I;for(;(I=R.__type)!==void 0;){let F=R.__size;R=R.__parent,M=R.key;let B=[I,F,M];R.enumerationOffset&&B.push(R.enumerationOffset),x.push(B),R=R.parent}x.reverse(),y[t1]=C,a.typedStructs[C]=x,o(null,0,!0)}switch(v){case 1:if(C>=16)return 0;e[p]=C+32;break;case 2:if(C>=256)return 0;e[p]=56,e[p+1]=C;break;case 3:if(C>=65536)return 0;e[p]=57,c.setUint16(p+1,C,!0);break;case 4:if(C>=16777216)return 0;c.setUint32(p,(C<<8)+58,!0);break}if(n<l){if(l===h)return n;e.copyWithin(n,l,h),h+=n-l,u.lastStringStart=n-p}else if(n>l)return l===h?n:(u.lastStringStart=n-p,Fze(t,e,r,p,i,s,o,a));return h}function yze(t,e,r,n){let i;if(i=t.ascii8||t.num8)return r.setInt8(e,n,!0),a2=e+1,i;if(i=t.string16||t.object16)return r.setInt16(e,n,!0),a2=e+2,i;if(i=t.num32)return r.setUint32(e,3758096640+n,!0),a2=e+4,i;if(i=t.num64)return r.setFloat64(e,NaN,!0),r.setInt8(e,n),a2=e+8,i;a2=e}function Ka(t,e,r){let n=Pze[e]+(r<<3),i=t[n]||(t[n]=Object.create(null));return i.__type=e,i.__size=r,i.__parent=t,i}function Lor(t){if(!(t instanceof Map))return t;let e=t.get("typed")||[];Object.isFrozen(e)&&(e=e.map(i=>i.slice(0)));let r=t.get("named"),n=Object.create(null);for(let i=0,s=e.length;i<s;i++){let o=e[i],a=n;for(let[u,c,l]of o){let d=a[l];d||(a[l]=d={key:l,parent:a,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),a=Ka(d,u,c)}a[t1]=i}return e.transitions=n,this.typedStructs=e,this.lastTypedStructuresLength=e.length,r}var ece=Symbol.for("source");function jor(t,e,r,n){let i=t[e++]-32;if(i>=24)switch(i){case 24:i=t[e++];break;case 25:i=t[e++]+(t[e++]<<8);break;case 26:i=t[e++]+(t[e++]<<8)+(t[e++]<<16);break;case 27:i=t[e++]+(t[e++]<<8)+(t[e++]<<16)+(t[e++]<<24);break}let s=n.typedStructs&&n.typedStructs[i];if(!s){if(t=Uint8Array.prototype.slice.call(t,e,r),r-=e,e=0,!n.getStructures)throw new Error(`Reference to shared structure ${i} without getStructures method`);if(n._mergeStructures(n.getStructures()),!n.typedStructs)throw new Error("Could not find any shared typed structures");if(n.lastTypedStructuresLength=n.typedStructs.length,s=n.typedStructs[i],!s)throw new Error("Could not find typed structure "+i)}var o=s.construct,a=s.fullConstruct;if(!o){o=s.construct=function(){},a=s.fullConstruct=function(){},a.prototype=n.structPrototype||{};var u=o.prototype=n.structPrototype?Object.create(n.structPrototype):{};let l=[],d=0,p;for(let f=0,h=s.length;f<h;f++){let y=s[f],[E,v,w,T]=y;w==="__proto__"&&(w="__proto_");let A={key:w,offset:d};T?l.splice(f+T,0,A):l.push(A);let C;switch(v){case 0:C=()=>0;break;case 1:C=(R,M)=>{let I=R.bytes[M+A.offset];return I>=246?v4(I):I};break;case 2:C=(R,M)=>{let I=R.bytes,B=(I.dataView||(I.dataView=new DataView(I.buffer,I.byteOffset,I.byteLength))).getUint16(M+A.offset,!0);return B>=65280?v4(B&255):B};break;case 4:C=(R,M)=>{let I=R.bytes,B=(I.dataView||(I.dataView=new DataView(I.buffer,I.byteOffset,I.byteLength))).getUint32(M+A.offset,!0);return B>=4294967040?v4(B&255):B};break}A.getRef=C,d+=v;let x;switch(E){case Zue:p&&!p.next&&(p.next=A),p=A,A.multiGetCount=0,x=function(R){let M=R.bytes,I=R.position,F=d+I,B=C(R,I);if(typeof B!="number")return B;let K,k=A.next;for(;k&&(K=k.getRef(R,I),typeof K!="number");)K=null,k=k.next;return K==null&&(K=R.bytesEnd-F),R.srcString?R.srcString.slice(B,K):lor(M,B+F,K-B)};break;case r8:case GF:p&&!p.next&&(p.next=A),p=A,x=function(R){let M=R.position,I=d+M,F=C(R,M);if(typeof F!="number")return F;let B=R.bytes,K,k=A.next;for(;k&&(K=k.getRef(R,M),typeof K!="number");)K=null,k=k.next;if(K==null&&(K=R.bytesEnd-I),E===r8)return B.toString("utf8",F+I,K+I);dp=R;try{return n.unpack(B,{start:F+I,end:K+I})}finally{dp=null}};break;case S4:switch(v){case 4:x=function(R){let M=R.bytes,I=M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength)),F=R.position+A.offset,B=I.getInt32(F,!0);if(B<536870912){if(B>-520093696)return B;if(B>-536870912)return v4(B&255)}let K=I.getFloat32(F,!0),k=A4[(M[F+3]&127)<<1|M[F+2]>>7];return(k*K+(K>0?.5:-.5)>>0)/k};break;case 8:x=function(R){let M=R.bytes,F=(M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength))).getFloat64(R.position+A.offset,!0);if(isNaN(F)){let B=M[R.position+A.offset];if(B>=246)return v4(B)}return F};break;case 1:x=function(R){let I=R.bytes[R.position+A.offset];return I<246?I:v4(I)};break}break;case oce:x=function(R){let M=R.bytes,I=M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength));return new Date(I.getFloat64(R.position+A.offset,!0))};break}A.get=x}if(Nze){let f=[],h=[],y=0,E;for(let w of l){if(n.alwaysLazyProperty&&n.alwaysLazyProperty(w.key)){E=!0;continue}Object.defineProperty(u,w.key,{get:$or(w.get),enumerable:!0});let T="v"+y++;h.push(T),f.push("o["+JSON.stringify(w.key)+"]="+T+"(s)")}E&&f.push("__proto__:this");let v=new Function(...h,"var c=this;return function(s){var o=new c();"+f.join(";")+";return o;}").apply(a,l.map(w=>w.get));Object.defineProperty(u,"toJSON",{value(w){return v.call(this,this[ece])}})}else Object.defineProperty(u,"toJSON",{value(f){let h={};for(let y=0,E=l.length;y<E;y++){let v=l[y].key;h[v]=this[v]}return h}})}var c=new o;return c[ece]={bytes:t,position:e,srcString:"",bytesEnd:r},c}function v4(t){switch(t){case 246:return null;case 247:return;case 248:return!1;case 249:return!0}throw new Error("Unknown constant")}function $or(t){return function(){return t(this[ece])}}function Uor(){dp&&(dp.bytes=Uint8Array.prototype.slice.call(dp.bytes,dp.position,dp.bytesEnd),dp.position=0,dp.bytesEnd=dp.bytes.length)}function Kor(t,e){if(e.typedStructs){let n=new Map;n.set("named",t),n.set("typed",e.typedStructs),t=n}let r=e.lastTypedStructuresLength||0;return t.isCompatible=n=>{let i=!0;return n instanceof Map?((n.get("named")||[]).length!==(e.lastNamedStructuresLength||0)&&(i=!1),(n.get("typed")||[]).length!==r&&(i=!1)):(n instanceof Array||Array.isArray(n))&&n.length!==(e.lastNamedStructuresLength||0)&&(i=!1),i||e._mergeStructures(n),i},e.lastTypedStructuresLength=e.typedStructs&&e.typedStructs.length,t}Eor(jor,Lor,Uor);var QF=class extends gze.Transform{constructor(e){e||(e={}),e.writableObjectMode=!0,super(e),e.sequential=!0,this.packr=e.packr||new Im(e)}_transform(e,r,n){this.push(this.packr.pack(e)),n()}},XF=class extends gze.Transform{constructor(e){e||(e={}),e.objectMode=!0,super(e),e.structures=[],this.unpackr=e.unpackr||new xm(e)}_transform(e,r,n){this.incompleteBuffer&&(e=Buffer.concat([this.incompleteBuffer,e]),this.incompleteBuffer=null);let i;try{i=this.unpackr.unpackMultiple(e)}catch(s){if(s.incomplete)this.incompleteBuffer=e.slice(s.lastPosition),i=s.values;else throw s}finally{for(let s of i||[])s===null&&(s=this.getNullValue()),this.push(s)}n&&n()}getNullValue(){return Symbol.for(null)}};function Vor(t,e={}){if(!t||typeof t!="object")throw new Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable");if(typeof t[Symbol.iterator]=="function")return Gor(t,e);if(typeof t.then=="function"||typeof t[Symbol.asyncIterator]=="function")return Hor(t,e);throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}function*Gor(t,e){let r=new Im(e);for(let n of t)yield r.pack(n)}async function*Hor(t,e){let r=new Im(e);for await(let n of t)yield r.pack(n)}function zor(t,e={}){if(!t||typeof t!="object")throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");let r=new xm(e),n,i=s=>{let o;n&&(s=Buffer.concat([n,s]),n=void 0);try{o=r.unpackMultiple(s)}catch(a){if(a.incomplete)n=s.slice(a.lastPosition),o=a.values;else throw a}return o};if(typeof t[Symbol.iterator]=="function")return(function*(){for(let o of t)yield*i(o)})();if(typeof t[Symbol.asyncIterator]=="function")return(async function*(){for await(let o of t)yield*i(o)})()}var Wor=zor,Jor=Vor,Yor=!1,Qor=!0,Xor=process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED!==void 0&&process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED.toLowerCase()==="true";if(!Xor){let t;try{typeof require=="function"?t=rze():t=aor.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("node.cjs",document.baseURI).href)("msgpackr-extract"),t&&cor(t.extractStrings)}catch{}}Gr.ALWAYS=Ror;Gr.C1=rce;Gr.DECIMAL_FIT=kor;Gr.DECIMAL_ROUND=Dor;Gr.Decoder=mor;Gr.DecoderStream=XF;Gr.Encoder=xor;Gr.EncoderStream=QF;Gr.FLOAT32_OPTIONS=xze;Gr.NEVER=Ior;Gr.Packr=Im;Gr.PackrStream=QF;Gr.Unpackr=xm;Gr.UnpackrStream=XF;Gr.addExtension=Aor;Gr.clearSource=JF;Gr.decode=bor;Gr.decodeIter=Wor;Gr.encode=Oor;Gr.encodeIter=Jor;Gr.mapsAsObjects=Qor;Gr.pack=Tor;Gr.roundFloat32=_or;Gr.unpack=yor;Gr.unpackMultiple=gor;Gr.useRecords=Yor});var tB=b(eB=>{"use strict";Object.defineProperty(eB,"__esModule",{value:!0});eB.version=void 0;eB.version="5.67.2"});var cce=b(i8=>{"use strict";Object.defineProperty(i8,"__esModule",{value:!0});i8.Scripts=void 0;i8.raw2NextJobData=uce;var Zor=Bze(),ear=new Zor.Packr({useRecords:!1,encodeUndefinedAsNil:!0}),Rs=ear.pack,sd=Tu(),Rm=Lc(),tar=tB(),rar=kF(),ace=class{constructor(e){this.queue=e,this.version=tar.version;let r=this.queue.keys;this.moveToFinishedKeys=[r.wait,r.active,r.prioritized,r.events,r.stalled,r.limiter,r.delayed,r.paused,r.meta,r.pc,void 0,void 0,void 0,void 0]}execCommand(e,r,n){let i=`${r}:${this.version}`;return e[i](n)}async isJobInList(e,r){let n=await this.queue.client,i;return(0,Rm.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?i=await this.execCommand(n,"isJobInList",[e,r]):i=await n.lpos(e,r),Number.isInteger(i)}addDelayedJobArgs(e,r,n){let i=this.queue.keys,s=[i.marker,i.meta,i.id,i.delayed,i.completed,i.events];return s.push(Rs(n),e.data,r),s}addDelayedJob(e,r,n,i){let s=this.addDelayedJobArgs(r,n,i);return this.execCommand(e,"addDelayedJob",s)}addPrioritizedJobArgs(e,r,n){let i=this.queue.keys,s=[i.marker,i.meta,i.id,i.prioritized,i.delayed,i.completed,i.active,i.events,i.pc];return s.push(Rs(n),e.data,r),s}addPrioritizedJob(e,r,n,i){let s=this.addPrioritizedJobArgs(r,n,i);return this.execCommand(e,"addPrioritizedJob",s)}addParentJobArgs(e,r,n){let i=this.queue.keys,s=[i.meta,i.id,i.delayed,i["waiting-children"],i.completed,i.events];return s.push(Rs(n),e.data,r),s}addParentJob(e,r,n,i){let s=this.addParentJobArgs(r,n,i);return this.execCommand(e,"addParentJob",s)}addStandardJobArgs(e,r,n){let i=this.queue.keys,s=[i.wait,i.paused,i.meta,i.id,i.completed,i.delayed,i.active,i.events,i.marker];return s.push(Rs(n),e.data,r),s}addStandardJob(e,r,n,i){let s=this.addStandardJobArgs(r,n,i);return this.execCommand(e,"addStandardJob",s)}async addJob(e,r,n,i,s={}){let o=this.queue.keys,a=r.parent,u=[o[""],typeof i<"u"?i:"",r.name,r.timestamp,r.parentKey||null,s.parentDependenciesKey||null,a,r.repeatJobKey,r.deduplicationId?`${o.de}:${r.deduplicationId}`:null],c;if(n.repeat){let d=Object.assign({},n.repeat);d.startDate&&(d.startDate=+new Date(d.startDate)),d.endDate&&(d.endDate=+new Date(d.endDate)),c=Rs(Object.assign(Object.assign({},n),{repeat:d}))}else c=Rs(n);let l;if(s.addToWaitingChildren?l=await this.addParentJob(e,r,c,u):typeof n.delay=="number"&&n.delay>0?l=await this.addDelayedJob(e,r,c,u):n.priority?l=await this.addPrioritizedJob(e,r,c,u):l=await this.addStandardJob(e,r,c,u),l<0)throw this.finishedErrors({code:l,parentKey:s.parentKey,command:"addJob"});return l}pauseArgs(e){let r="wait",n="paused";e||(r="paused",n="wait");let i=[r,n,"meta","prioritized"].map(o=>this.queue.toKey(o));i.push(this.queue.keys.events,this.queue.keys.delayed,this.queue.keys.marker);let s=[e?"paused":"resumed"];return i.concat(s)}async pause(e){let r=await this.queue.client,n=this.pauseArgs(e);return this.execCommand(r,"pause",n)}addRepeatableJobArgs(e,r,n,i){let s=this.queue.keys,o=[s.repeat,s.delayed],a=[r,Rs(n),i,e,s[""]];return o.concat(a)}async addRepeatableJob(e,r,n,i){let s=await this.queue.client,o=this.addRepeatableJobArgs(e,r,n,i);return this.execCommand(s,"addRepeatableJob",o)}async removeDeduplicationKey(e,r){let n=await this.queue.client,s=[`${this.queue.keys.de}:${e}`],o=[r];return this.execCommand(n,"removeDeduplicationKey",s.concat(o))}async addJobScheduler(e,r,n,i,s,o,a){let u=await this.queue.client,c=this.queue.keys,l=[c.repeat,c.delayed,c.wait,c.paused,c.meta,c.prioritized,c.marker,c.id,c.events,c.pc,c.active],d=[r,Rs(s),e,n,Rs(i),Rs(o),Date.now(),c[""],a?this.queue.toKey(a):""],p=await this.execCommand(u,"addJobScheduler",l.concat(d));if(typeof p=="number"&&p<0)throw this.finishedErrors({code:p,command:"addJobScheduler"});return p}async updateRepeatableJobMillis(e,r,n,i){let s=[this.queue.keys.repeat,n,r,i];return this.execCommand(e,"updateRepeatableJobMillis",s)}async updateJobSchedulerNextMillis(e,r,n,i,s){let o=await this.queue.client,a=this.queue.keys,u=[a.repeat,a.delayed,a.wait,a.paused,a.meta,a.prioritized,a.marker,a.id,a.events,a.pc,s?this.queue.toKey(s):"",a.active],c=[r,e,n,Rs(i),Date.now(),a[""],s];return this.execCommand(o,"updateJobScheduler",u.concat(c))}removeRepeatableArgs(e,r,n){let i=this.queue.keys,s=[i.repeat,i.delayed,i.events],o=[e,this.getRepeatConcatOptions(r,n),n,i[""]];return s.concat(o)}getRepeatConcatOptions(e,r){return r&&r.split(":").length>2?r:e}async removeRepeatable(e,r,n){let i=await this.queue.client,s=this.removeRepeatableArgs(e,r,n);return this.execCommand(i,"removeRepeatable",s)}async removeJobScheduler(e){let r=await this.queue.client,n=this.queue.keys,i=[n.repeat,n.delayed,n.events],s=[e,n[""]];return this.execCommand(r,"removeJobScheduler",i.concat(s))}removeArgs(e,r){let n=[e,"repeat"].map(s=>this.queue.toKey(s)),i=[e,r?1:0,this.queue.toKey("")];return n.concat(i)}async remove(e,r){let n=await this.queue.client,i=this.removeArgs(e,r),s=await this.execCommand(n,"removeJob",i);if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"removeJob"});return s}async removeUnprocessedChildren(e){let r=await this.queue.client,n=[this.queue.toKey(e),this.queue.keys.meta,this.queue.toKey(""),e];await this.execCommand(r,"removeUnprocessedChildren",n)}async extendLock(e,r,n,i){i=i||await this.queue.client;let s=[this.queue.toKey(e)+":lock",this.queue.keys.stalled,r,n,e];return this.execCommand(i,"extendLock",s)}async extendLocks(e,r,n){let i=await this.queue.client,s=[this.queue.keys.stalled,this.queue.toKey(""),Rs(r),Rs(e),n];return this.execCommand(i,"extendLocks",s)}async updateData(e,r){let n=await this.queue.client,i=[this.queue.toKey(e.id)],s=JSON.stringify(r),o=await this.execCommand(n,"updateData",i.concat([s]));if(o<0)throw this.finishedErrors({code:o,jobId:e.id,command:"updateData"})}async updateProgress(e,r){let n=await this.queue.client,i=[this.queue.toKey(e),this.queue.keys.events,this.queue.keys.meta],s=JSON.stringify(r),o=await this.execCommand(n,"updateProgress",i.concat([e,s]));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"updateProgress"})}async addLog(e,r,n){let i=await this.queue.client,s=[this.queue.toKey(e),this.queue.toKey(e)+":logs"],o=await this.execCommand(i,"addLog",s.concat([e,r,n||""]));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"addLog"});return o}moveToFinishedArgs(e,r,n,i,s,o,a,u=!0,c){var l,d,p,f,h,y,E;let v=this.queue.keys,w=this.queue.opts,T=s==="completed"?w.removeOnComplete:w.removeOnFail,A=this.queue.toKey(`metrics:${s}`),C=this.moveToFinishedKeys;C[10]=v[s],C[11]=this.queue.toKey((l=e.id)!==null&&l!==void 0?l:""),C[12]=A,C[13]=this.queue.keys.marker;let x=this.getKeepJobs(i,T),R=[e.id,a,n,typeof r>"u"?"null":r,s,!u||this.queue.closing?0:1,v[""],Rs({token:o,name:w.name,keepJobs:x,limiter:w.limiter,lockDuration:w.lockDuration,attempts:e.opts.attempts,maxMetricsSize:!((d=w.metrics)===null||d===void 0)&&d.maxDataPoints?(p=w.metrics)===null||p===void 0?void 0:p.maxDataPoints:"",fpof:!!(!((f=e.opts)===null||f===void 0)&&f.failParentOnFailure),cpof:!!(!((h=e.opts)===null||h===void 0)&&h.continueParentOnFailure),idof:!!(!((y=e.opts)===null||y===void 0)&&y.ignoreDependencyOnFailure),rdof:!!(!((E=e.opts)===null||E===void 0)&&E.removeDependencyOnFailure)}),c?Rs((0,Rm.objectToFlatArray)(c)):void 0];return C.concat(R)}getKeepJobs(e,r){return typeof e>"u"?r||{count:e?0:-1}:typeof e=="object"?e:typeof e=="number"?{count:e}:{count:e?0:-1}}async moveToFinished(e,r){let n=await this.queue.client,i=await this.execCommand(n,"moveToFinished",r);if(i<0)throw this.finishedErrors({code:i,jobId:e,command:"moveToFinished",state:"active"});if(typeof i<"u")return uce(i)}drainArgs(e){let r=this.queue.keys,n=[r.wait,r.paused,r.delayed,r.prioritized,r.repeat],i=[r[""],e?"1":"0"];return n.concat(i)}async drain(e){let r=await this.queue.client,n=this.drainArgs(e);return this.execCommand(r,"drain",n)}removeChildDependencyArgs(e,r){let i=[this.queue.keys[""]],s=[this.queue.toKey(e),r];return i.concat(s)}async removeChildDependency(e,r){let n=await this.queue.client,i=this.removeChildDependencyArgs(e,r),s=await this.execCommand(n,"removeChildDependency",i);switch(s){case 0:return!0;case 1:return!1;default:throw this.finishedErrors({code:s,jobId:e,parentKey:r,command:"removeChildDependency"})}}getRangesArgs(e,r,n,i){let s=this.queue.keys,o=e.map(c=>c==="waiting"?"wait":c),a=[s[""]],u=[r,n,i?"1":"0",...o];return a.concat(u)}async getRanges(e,r=0,n=1,i=!1){let s=await this.queue.client,o=this.getRangesArgs(e,r,n,i);return await this.execCommand(s,"getRanges",o)}getCountsArgs(e){let r=this.queue.keys,n=e.map(o=>o==="waiting"?"wait":o),i=[r[""]],s=[...n];return i.concat(s)}async getCounts(e){let r=await this.queue.client,n=this.getCountsArgs(e);return await this.execCommand(r,"getCounts",n)}getCountsPerPriorityArgs(e){let r=[this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized],n=e;return r.concat(n)}async getCountsPerPriority(e){let r=await this.queue.client,n=this.getCountsPerPriorityArgs(e);return await this.execCommand(r,"getCountsPerPriority",n)}getDependencyCountsArgs(e,r){let n=[`${e}:processed`,`${e}:dependencies`,`${e}:failed`,`${e}:unsuccessful`].map(s=>this.queue.toKey(s)),i=r;return n.concat(i)}async getDependencyCounts(e,r){let n=await this.queue.client,i=this.getDependencyCountsArgs(e,r);return await this.execCommand(n,"getDependencyCounts",i)}moveToCompletedArgs(e,r,n,i,s=!1){let o=Date.now();return this.moveToFinishedArgs(e,r,"returnvalue",n,"completed",i,o,s)}moveToFailedArgs(e,r,n,i,s=!1,o){let a=Date.now();return this.moveToFinishedArgs(e,r,"failedReason",n,"failed",i,a,s,o)}async isFinished(e,r=!1){let n=await this.queue.client,i=["completed","failed",e].map(s=>this.queue.toKey(s));return this.execCommand(n,"isFinished",i.concat([e,r?"1":""]))}async getState(e){let r=await this.queue.client,n=["completed","failed","delayed","active","wait","paused","waiting-children","prioritized"].map(i=>this.queue.toKey(i));return(0,Rm.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?this.execCommand(r,"getState",n.concat([e])):this.execCommand(r,"getStateV2",n.concat([e]))}async changeDelay(e,r){let n=await this.queue.client,i=this.changeDelayArgs(e,r),s=await this.execCommand(n,"changeDelay",i);if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"changeDelay",state:"delayed"})}changeDelayArgs(e,r){let n=Date.now();return[this.queue.keys.delayed,this.queue.keys.meta,this.queue.keys.marker,this.queue.keys.events].concat([r,JSON.stringify(n),e,this.queue.toKey(e)])}async changePriority(e,r=0,n=!1){let i=await this.queue.client,s=this.changePriorityArgs(e,r,n),o=await this.execCommand(i,"changePriority",s);if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"changePriority"})}changePriorityArgs(e,r=0,n=!1){return[this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.active,this.queue.keys.pc,this.queue.keys.marker].concat([r,this.queue.toKey(""),e,n?1:0])}moveToDelayedArgs(e,r,n,i,s={}){let o=this.queue.keys;return[o.marker,o.active,o.prioritized,o.delayed,this.queue.toKey(e),o.events,o.meta,o.stalled].concat([this.queue.keys[""],r,e,n,i,s.skipAttempt?"1":"0",s.fieldsToUpdate?Rs((0,Rm.objectToFlatArray)(s.fieldsToUpdate)):void 0])}moveToWaitingChildrenArgs(e,r,n){let i=Date.now(),s=(0,Rm.getParentKey)(n.child);return["active","waiting-children",e,`${e}:dependencies`,`${e}:unsuccessful`,"stalled","events"].map(a=>this.queue.toKey(a)).concat([r,s??"",JSON.stringify(i),e,this.queue.toKey("")])}isMaxedArgs(){let e=this.queue.keys;return[e.meta,e.active]}async isMaxed(){let e=await this.queue.client,r=this.isMaxedArgs();return!!await this.execCommand(e,"isMaxed",r)}async moveToDelayed(e,r,n,i="0",s={}){let o=await this.queue.client,a=this.moveToDelayedArgs(e,r,i,n,s),u=await this.execCommand(o,"moveToDelayed",a);if(u<0)throw this.finishedErrors({code:u,jobId:e,command:"moveToDelayed",state:"active"})}async moveToWaitingChildren(e,r,n={}){let i=await this.queue.client,s=this.moveToWaitingChildrenArgs(e,r,n),o=await this.execCommand(i,"moveToWaitingChildren",s);switch(o){case 0:return!0;case 1:return!1;default:throw this.finishedErrors({code:o,jobId:e,command:"moveToWaitingChildren",state:"active"})}}getRateLimitTtlArgs(e){return[this.queue.keys.limiter,this.queue.keys.meta].concat([e??"0"])}async getRateLimitTtl(e){let r=await this.queue.client,n=this.getRateLimitTtlArgs(e);return this.execCommand(r,"getRateLimitTtl",n)}async cleanJobsInSet(e,r,n=0){let i=await this.queue.client;return this.execCommand(i,"cleanJobsInSet",[this.queue.toKey(e),this.queue.toKey("events"),this.queue.toKey("repeat"),this.queue.toKey(""),r,n,e])}getJobSchedulerArgs(e){return[this.queue.keys.repeat].concat([e])}async getJobScheduler(e){let r=await this.queue.client,n=this.getJobSchedulerArgs(e);return this.execCommand(r,"getJobScheduler",n)}retryJobArgs(e,r,n,i={}){let s=[this.queue.keys.active,this.queue.keys.wait,this.queue.keys.paused,this.queue.toKey(e),this.queue.keys.meta,this.queue.keys.events,this.queue.keys.delayed,this.queue.keys.prioritized,this.queue.keys.pc,this.queue.keys.marker,this.queue.keys.stalled],o=(r?"R":"L")+"PUSH";return s.concat([this.queue.toKey(""),Date.now(),o,e,n,i.fieldsToUpdate?Rs((0,Rm.objectToFlatArray)(i.fieldsToUpdate)):void 0])}async retryJob(e,r,n="0",i={}){let s=await this.queue.client,o=this.retryJobArgs(e,r,n,i),a=await this.execCommand(s,"retryJob",o);if(a<0)throw this.finishedErrors({code:a,jobId:e,command:"retryJob",state:"active"})}moveJobsToWaitArgs(e,r,n){let i=[this.queue.toKey(""),this.queue.keys.events,this.queue.toKey(e),this.queue.toKey("wait"),this.queue.toKey("paused"),this.queue.keys.meta,this.queue.keys.active,this.queue.keys.marker],s=[r,n,e];return i.concat(s)}async retryJobs(e="failed",r=1e3,n=new Date().getTime()){let i=await this.queue.client,s=this.moveJobsToWaitArgs(e,r,n);return this.execCommand(i,"moveJobsToWait",s)}async promoteJobs(e=1e3){let r=await this.queue.client,n=this.moveJobsToWaitArgs("delayed",e,Number.MAX_VALUE);return this.execCommand(r,"moveJobsToWait",n)}async reprocessJob(e,r,n={}){let i=await this.queue.client,s=[this.queue.toKey(e.id),this.queue.keys.events,this.queue.toKey(r),this.queue.keys.wait,this.queue.keys.meta,this.queue.keys.paused,this.queue.keys.active,this.queue.keys.marker],o=[e.id,(e.opts.lifo?"R":"L")+"PUSH",r==="failed"?"failedReason":"returnvalue",r,n.resetAttemptsMade?"1":"0",n.resetAttemptsStarted?"1":"0"],a=await this.execCommand(i,"reprocessJob",s.concat(o));if(a!==1)throw this.finishedErrors({code:a,jobId:e.id,command:"reprocessJob",state:r})}async getMetrics(e,r=0,n=-1){let i=await this.queue.client,s=[this.queue.toKey(`metrics:${e}`),this.queue.toKey(`metrics:${e}:data`)],o=[r,n];return await this.execCommand(i,"getMetrics",s.concat(o))}async moveToActive(e,r,n){let i=this.queue.opts,s=this.queue.keys,o=[s.wait,s.active,s.prioritized,s.events,s.stalled,s.limiter,s.delayed,s.paused,s.meta,s.pc,s.marker],a=[s[""],Date.now(),Rs({token:r,lockDuration:i.lockDuration,limiter:i.limiter,name:n})],u=await this.execCommand(e,"moveToActive",o.concat(a));return uce(u)}async promote(e){let r=await this.queue.client,n=[this.queue.keys.delayed,this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.active,this.queue.keys.pc,this.queue.keys.events,this.queue.keys.marker],i=[this.queue.toKey(""),e],s=await this.execCommand(r,"promote",n.concat(i));if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"promote",state:"delayed"})}moveStalledJobsToWaitArgs(){let e=this.queue.opts,r=[this.queue.keys.stalled,this.queue.keys.wait,this.queue.keys.active,this.queue.keys["stalled-check"],this.queue.keys.meta,this.queue.keys.paused,this.queue.keys.marker,this.queue.keys.events],n=[e.maxStalledCount,this.queue.toKey(""),Date.now(),e.stalledInterval];return r.concat(n)}async moveStalledJobsToWait(){let e=await this.queue.client,r=this.moveStalledJobsToWaitArgs();return this.execCommand(e,"moveStalledJobsToWait",r)}async moveJobFromActiveToWait(e,r="0"){let n=await this.queue.client,i=[this.queue.keys.active,this.queue.keys.wait,this.queue.keys.stalled,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.limiter,this.queue.keys.prioritized,this.queue.keys.marker,this.queue.keys.events],s=[e,r,this.queue.toKey(e)],o=await this.execCommand(n,"moveJobFromActiveToWait",i.concat(s));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"moveJobFromActiveToWait",state:"active"});return o}async obliterate(e){let r=await this.queue.client,n=[this.queue.keys.meta,this.queue.toKey("")],i=[e.count,e.force?"force":null],s=await this.execCommand(r,"obliterate",n.concat(i));if(s<0)switch(s){case-1:throw new Error("Cannot obliterate non-paused queue");case-2:throw new Error("Cannot obliterate queue with active jobs")}return s}async paginate(e,r){let n=await this.queue.client,i=[e],s=5,o=r.end>=0?r.end-r.start+1:1/0,a="0",u=0,c,l,d,p=[],f=[];do{let h=[r.start+p.length,r.end,a,u,s];r.fetchJobs&&h.push(1),[a,u,c,l,d]=await this.execCommand(n,"paginate",i.concat(h)),p=p.concat(c),d&&d.length&&(f=f.concat(d.map(Rm.array2obj)))}while(a!="0"&&p.length<o);if(p.length&&Array.isArray(p[0])){let h=[];for(let y=0;y<p.length;y++){let[E,v]=p[y];try{h.push({id:E,v:JSON.parse(v)})}catch(w){h.push({id:E,err:w.message})}}return{cursor:a,items:h,total:l,jobs:f}}else return{cursor:a,items:p.map(h=>({id:h})),total:l,jobs:f}}finishedErrors({code:e,jobId:r,parentKey:n,command:i,state:s}){let o;switch(e){case sd.ErrorCode.JobNotExist:o=new Error(`Missing key for job ${r}. ${i}`);break;case sd.ErrorCode.JobLockNotExist:o=new Error(`Missing lock for job ${r}. ${i}`);break;case sd.ErrorCode.JobNotInState:o=new Error(`Job ${r} is not in the ${s} state. ${i}`);break;case sd.ErrorCode.JobPendingChildren:o=new Error(`Job ${r} has pending dependencies. ${i}`);break;case sd.ErrorCode.ParentJobNotExist:o=new Error(`Missing key for parent job ${n}. ${i}`);break;case sd.ErrorCode.JobLockMismatch:o=new Error(`Lock mismatch for job ${r}. Cmd ${i} from ${s}`);break;case sd.ErrorCode.ParentJobCannotBeReplaced:o=new Error(`The parent job ${n} cannot be replaced. ${i}`);break;case sd.ErrorCode.JobBelongsToJobScheduler:o=new Error(`Job ${r} belongs to a job scheduler and cannot be removed directly. ${i}`);break;case sd.ErrorCode.JobHasFailedChildren:o=new rar.UnrecoverableError(`Cannot complete job ${r} because it has at least one failed child. ${i}`);break;case sd.ErrorCode.SchedulerJobIdCollision:o=new Error(`Cannot create job scheduler iteration - job ID already exists. ${i}`);break;case sd.ErrorCode.SchedulerJobSlotsBusy:o=new Error(`Cannot create job scheduler iteration - current and next time slots already have jobs. ${i}`);break;default:o=new Error(`Unknown code ${e} error for ${r}. ${i}`)}return o.code=e,o}};i8.Scripts=ace;function uce(t){if(t){let e=[null,t[1],t[2],t[3]];return t[0]&&(e[0]=(0,Rm.array2obj)(t[0])),e}return[]}});var nB=b(rB=>{"use strict";Object.defineProperty(rB,"__esModule",{value:!0});rB.createScripts=void 0;var nar=cce(),iar=t=>new nar.Scripts({keys:t.keys,client:t.client,get redisVersion(){return t.redisVersion},toKey:t.toKey,opts:t.opts,closing:t.closing});rB.createScripts=iar});var C4=b(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.Job=Dm.PRIORITY_LIMIT=void 0;var qze=(or(),Wt(sr)),sar=require("util"),ta=Lc(),oar=nB(),Lze=Qae(),aar=fue(),iB=Tu(),uar=(0,sar.debuglog)("bull");Dm.PRIORITY_LIMIT=2**21;var lce=class t{constructor(e,r,n,i={},s){this.queue=e,this.name=r,this.data=n,this.opts=i,this.id=s,this.progress=0,this.returnvalue=null,this.stacktrace=null,this.delay=0,this.priority=0,this.attemptsStarted=0,this.attemptsMade=0,this.stalledCounter=0;let o=this.opts,{repeatJobKey:a}=o,u=qze.__rest(o,["repeatJobKey"]);this.opts=Object.assign({attempts:0},u),this.delay=this.opts.delay,this.priority=this.opts.priority||0,this.repeatJobKey=a,this.timestamp=i.timestamp?i.timestamp:Date.now(),this.opts.backoff=Lze.Backoffs.normalize(i.backoff),this.parentKey=(0,ta.getParentKey)(i.parent),i.parent&&(this.parent={id:i.parent.id,queueKey:i.parent.queue},i.failParentOnFailure&&(this.parent.fpof=!0),i.removeDependencyOnFailure&&(this.parent.rdof=!0),i.ignoreDependencyOnFailure&&(this.parent.idof=!0),i.continueParentOnFailure&&(this.parent.cpof=!0)),this.debounceId=i.debounce?i.debounce.id:void 0,this.deduplicationId=i.deduplication?i.deduplication.id:this.debounceId,this.toKey=e.toKey.bind(e),this.createScripts(),this.queueQualifiedName=e.qualifiedName}static async create(e,r,n,i){let s=await e.client,o=new this(e,r,n,i,i&&i.jobId);return o.id=await o.addJob(s,{parentKey:o.parentKey,parentDependenciesKey:o.parentKey?`${o.parentKey}:dependencies`:""}),o}static async createBulk(e,r){let n=await e.client,i=r.map(a=>{var u;return new this(e,a.name,a.data,a.opts,(u=a.opts)===null||u===void 0?void 0:u.jobId)}),s=n.pipeline();for(let a of i)a.addJob(s,{parentKey:a.parentKey,parentDependenciesKey:a.parentKey?`${a.parentKey}:dependencies`:""});let o=await s.exec();for(let a=0;a<o.length;++a){let[u,c]=o[a];if(u)throw u;i[a].id=c}return i}static fromJSON(e,r,n){let i=JSON.parse(r.data||"{}"),s=t.optsFromJSON(r.opts),o=new this(e,r.name,i,s,r.id||n);return o.progress=JSON.parse(r.progress||"0"),o.delay=parseInt(r.delay),o.priority=parseInt(r.priority),o.timestamp=parseInt(r.timestamp),r.finishedOn&&(o.finishedOn=parseInt(r.finishedOn)),r.processedOn&&(o.processedOn=parseInt(r.processedOn)),r.rjk&&(o.repeatJobKey=r.rjk),r.deid&&(o.debounceId=r.deid,o.deduplicationId=r.deid),r.failedReason&&(o.failedReason=r.failedReason),o.attemptsStarted=parseInt(r.ats||"0"),o.attemptsMade=parseInt(r.attemptsMade||r.atm||"0"),o.stalledCounter=parseInt(r.stc||"0"),r.defa&&(o.deferredFailure=r.defa),o.stacktrace=car(r.stacktrace),typeof r.returnvalue=="string"&&(o.returnvalue=jze(r.returnvalue)),r.parentKey&&(o.parentKey=r.parentKey),r.parent&&(o.parent=JSON.parse(r.parent)),r.pb&&(o.processedBy=r.pb),r.nrjid&&(o.nextRepeatableJobId=r.nrjid),o}createScripts(){this.scripts=(0,oar.createScripts)(this.queue)}static optsFromJSON(e,r=ta.optsDecodeMap){let n=JSON.parse(e||"{}"),i=Object.entries(n),s={};for(let o of i){let[a,u]=o;r[a]?s[r[a]]=u:a==="tm"?s.telemetry=Object.assign(Object.assign({},s.telemetry),{metadata:u}):a==="omc"?s.telemetry=Object.assign(Object.assign({},s.telemetry),{omitContext:u}):s[a]=u}return s}static async fromId(e,r){if(r){let i=await(await e.client).hgetall(e.toKey(r));return(0,ta.isEmpty)(i)?void 0:this.fromJSON(e,i,r)}}static addJobLog(e,r,n,i){return e.scripts.addLog(r,n,i)}toJSON(){let e=this,{queue:r,scripts:n}=e;return qze.__rest(e,["queue","scripts"])}asJSON(){return(0,ta.removeUndefinedFields)({id:this.id,name:this.name,data:JSON.stringify(typeof this.data>"u"?{}:this.data),opts:t.optsAsJSON(this.opts),parent:this.parent?Object.assign({},this.parent):void 0,parentKey:this.parentKey,progress:this.progress,attemptsMade:this.attemptsMade,attemptsStarted:this.attemptsStarted,stalledCounter:this.stalledCounter,finishedOn:this.finishedOn,processedOn:this.processedOn,timestamp:this.timestamp,failedReason:JSON.stringify(this.failedReason),stacktrace:JSON.stringify(this.stacktrace),debounceId:this.debounceId,deduplicationId:this.deduplicationId,repeatJobKey:this.repeatJobKey,returnvalue:JSON.stringify(this.returnvalue),nrjid:this.nextRepeatableJobId})}static optsAsJSON(e={},r=ta.optsEncodeMap){let n=Object.entries(e),i={};for(let[s,o]of n)if(!(typeof o>"u"))if(s in r){let u=r[s];i[u]=o}else s==="telemetry"?(o.metadata!==void 0&&(i.tm=o.metadata),o.omitContext!==void 0&&(i.omc=o.omitContext)):i[s]=o;return i}asJSONSandbox(){return Object.assign(Object.assign({},this.asJSON()),{queueName:this.queueName,queueQualifiedName:this.queueQualifiedName,prefix:this.prefix})}updateData(e){return this.data=e,this.scripts.updateData(this,e)}async updateProgress(e){this.progress=e,await this.scripts.updateProgress(this.id,e),this.queue.emit("progress",this,e)}async log(e){return t.addJobLog(this.queue,this.id,e,this.opts.keepLogs)}async removeChildDependency(){return await this.scripts.removeChildDependency(this.id,this.parentKey)?(this.parent=void 0,this.parentKey=void 0,!0):!1}async clearLogs(e){let r=await this.queue.client,n=this.toKey(this.id)+":logs";e?await r.ltrim(n,-e,-1):await r.del(n)}async remove({removeChildren:e=!0}={}){await this.queue.waitUntilReady();let r=this.queue,n=this;if(await this.scripts.remove(n.id,e))r.emit("removed",n);else throw new Error(`Job ${this.id} could not be removed because it is locked by another worker`)}async removeUnprocessedChildren(){let e=this.id;await this.scripts.removeUnprocessedChildren(e)}extendLock(e,r){return this.scripts.extendLock(this.id,e,r)}async moveToCompleted(e,r,n=!0){return this.queue.trace(iB.SpanKind.INTERNAL,"complete",this.queue.name,async i=>{this.setSpanJobAttributes(i),await this.queue.waitUntilReady(),this.returnvalue=e||void 0;let s=(0,ta.tryCatch)(JSON.stringify,JSON,[e]);if(s===ta.errorObject)throw ta.errorObject.value;let o=this.scripts.moveToCompletedArgs(this,s,this.opts.removeOnComplete,r,n),a=await this.scripts.moveToFinished(this.id,o);return this.finishedOn=o[this.scripts.moveToFinishedKeys.length+1],this.attemptsMade+=1,a})}moveToWait(e){return this.scripts.moveJobFromActiveToWait(this.id,e)}async shouldRetryJob(e){if(this.attemptsMade+1<this.opts.attempts&&!this.discarded&&!(e instanceof aar.UnrecoverableError||e.name=="UnrecoverableError")){let r=this.queue.opts,n=await Lze.Backoffs.calculate(this.opts.backoff,this.attemptsMade+1,e,this,r.settings&&r.settings.backoffStrategy);return[n!=-1,n==-1?0:n]}else return[!1,0]}async moveToFailed(e,r,n=!1){this.failedReason=e?.message;let[i,s]=await this.shouldRetryJob(e);return this.queue.trace(iB.SpanKind.INTERNAL,this.getSpanOperation(i,s),this.queue.name,async(o,a)=>{var u,c;this.setSpanJobAttributes(o);let l;!(!((c=(u=this.opts)===null||u===void 0?void 0:u.telemetry)===null||c===void 0)&&c.omitContext)&&a&&(l=a);let d;this.updateStacktrace(e);let p={failedReason:this.failedReason,stacktrace:JSON.stringify(this.stacktrace),tm:l},f;if(i)s?d=await this.scripts.moveToDelayed(this.id,Date.now(),s,r,{fieldsToUpdate:p}):d=await this.scripts.retryJob(this.id,this.opts.lifo,r,{fieldsToUpdate:p});else{let h=this.scripts.moveToFailedArgs(this,this.failedReason,this.opts.removeOnFail,r,n,p);d=await this.scripts.moveToFinished(this.id,h),f=h[this.scripts.moveToFinishedKeys.length+1]}return f&&typeof f=="number"&&(this.finishedOn=f),s&&typeof s=="number"&&(this.delay=s),this.attemptsMade+=1,d})}getSpanOperation(e,r){return e?r?"delay":"retry":"fail"}isCompleted(){return this.isInZSet("completed")}isFailed(){return this.isInZSet("failed")}isDelayed(){return this.isInZSet("delayed")}isWaitingChildren(){return this.isInZSet("waiting-children")}isActive(){return this.isInList("active")}async isWaiting(){return await this.isInList("wait")||await this.isInList("paused")}get queueName(){return this.queue.name}get prefix(){return this.queue.opts.prefix}getState(){return this.scripts.getState(this.id)}async changeDelay(e){await this.scripts.changeDelay(this.id,e),this.delay=e}async changePriority(e){await this.scripts.changePriority(this.id,e.priority,e.lifo),this.priority=e.priority||0}async getChildrenValues(){let r=await(await this.queue.client).hgetall(this.toKey(`${this.id}:processed`));if(r)return(0,ta.parseObjectValues)(r)}async getIgnoredChildrenFailures(){return(await this.queue.client).hgetall(this.toKey(`${this.id}:failed`))}async getFailedChildrenValues(){return(await this.queue.client).hgetall(this.toKey(`${this.id}:failed`))}async getDependencies(e={}){let n=(await this.queue.client).multi();if(!e.processed&&!e.unprocessed&&!e.ignored&&!e.failed){n.hgetall(this.toKey(`${this.id}:processed`)),n.smembers(this.toKey(`${this.id}:dependencies`)),n.hgetall(this.toKey(`${this.id}:failed`)),n.zrange(this.toKey(`${this.id}:unsuccessful`),0,-1);let[[i,s],[o,a],[u,c],[l,d]]=await n.exec();return{processed:(0,ta.parseObjectValues)(s),unprocessed:a,failed:d,ignored:c}}else{let i={cursor:0,count:20},s=[];if(e.processed){s.push("processed");let y=Object.assign(Object.assign({},i),e.processed);n.hscan(this.toKey(`${this.id}:processed`),y.cursor,"COUNT",y.count)}if(e.unprocessed){s.push("unprocessed");let y=Object.assign(Object.assign({},i),e.unprocessed);n.sscan(this.toKey(`${this.id}:dependencies`),y.cursor,"COUNT",y.count)}if(e.ignored){s.push("ignored");let y=Object.assign(Object.assign({},i),e.ignored);n.hscan(this.toKey(`${this.id}:failed`),y.cursor,"COUNT",y.count)}let o;if(e.failed){s.push("failed");let y=Object.assign(Object.assign({},i),e.failed);o=y.cursor+y.count,n.zrange(this.toKey(`${this.id}:unsuccessful`),y.cursor,y.count-1)}let a=await n.exec(),u,c,l,d,p,f,h;return s.forEach((y,E)=>{switch(y){case"processed":{u=a[E][1][0];let v=a[E][1][1],w={};for(let T=0;T<v.length;++T)T%2&&(w[v[T-1]]=JSON.parse(v[T]));c=w;break}case"failed":{p=a[E][1];break}case"ignored":{f=a[E][1][0];let v=a[E][1][1],w={};for(let T=0;T<v.length;++T)T%2&&(w[v[T-1]]=v[T]);h=w;break}case"unprocessed":{l=a[E][1][0],d=a[E][1][1];break}}}),Object.assign(Object.assign(Object.assign(Object.assign({},u?{processed:c,nextProcessedCursor:Number(u)}:{}),f?{ignored:h,nextIgnoredCursor:Number(f)}:{}),o?{failed:p,nextFailedCursor:o}:{}),l?{unprocessed:d,nextUnprocessedCursor:Number(l)}:{})}}async getDependenciesCount(e={}){let r=[];Object.entries(e).forEach(([o,a])=>{a&&r.push(o)});let n=r.length?r:["processed","unprocessed","ignored","failed"],i=await this.scripts.getDependencyCounts(this.id,n),s={};return i.forEach((o,a)=>{s[`${n[a]}`]=o||0}),s}async waitUntilFinished(e,r){await this.queue.waitUntilReady();let n=this.id;return new Promise(async(i,s)=>{let o;r&&(o=setTimeout(()=>u(`Job wait ${this.name} timed out before finishing, no finish notification arrived after ${r}ms (id=${n})`),r));function a(y){d(),i(y.returnvalue)}function u(y){d(),s(new Error(y.failedReason||y))}let c=`completed:${n}`,l=`failed:${n}`;e.on(c,a),e.on(l,u),this.queue.on("closing",u);let d=()=>{clearInterval(o),e.removeListener(c,a),e.removeListener(l,u),this.queue.removeListener("closing",u)};await e.waitUntilReady();let[p,f]=await this.scripts.isFinished(n,!0);p!=0&&(p==-1||p==2?u({failedReason:f}):a({returnvalue:jze(f)}))})}async moveToDelayed(e,r){let n=Date.now(),i=e-n,s=i>0?i:0,o=await this.scripts.moveToDelayed(this.id,n,s,r,{skipAttempt:!0});return this.delay=s,o}async moveToWaitingChildren(e,r={}){return await this.scripts.moveToWaitingChildren(this.id,e,r)}async promote(){let e=this.id;await this.scripts.promote(e),this.delay=0}async retry(e="failed",r={}){await this.scripts.reprocessJob(this,e,r),this.failedReason=null,this.finishedOn=null,this.processedOn=null,this.returnvalue=null,r.resetAttemptsMade&&(this.attemptsMade=0),r.resetAttemptsStarted&&(this.attemptsStarted=0)}discard(){this.discarded=!0}async isInZSet(e){return await(await this.queue.client).zscore(this.queue.toKey(e),this.id)!==null}async isInList(e){return this.scripts.isJobInList(this.queue.toKey(e),this.id)}addJob(e,r){let n=this.asJSON();return this.validateOptions(n),this.scripts.addJob(e,n,n.opts,this.id,r)}async removeDeduplicationKey(){return this.deduplicationId?await this.scripts.removeDeduplicationKey(this.deduplicationId,this.id)>0:!1}validateOptions(e){var r,n,i,s,o,a,u,c;let l=["removeDependencyOnFailure","failParentOnFailure","continueParentOnFailure","ignoreDependencyOnFailure"];if(this.opts.sizeLimit&&(0,ta.lengthInUtf8Bytes)(e.data)>this.opts.sizeLimit)throw new Error(`The size of job ${this.name} exceeds the limit ${this.opts.sizeLimit} bytes`);if(this.opts.delay&&this.opts.repeat&&!(!((r=this.opts.repeat)===null||r===void 0)&&r.count))throw new Error("Delay and repeat options could not be used together");let p=l.filter(f=>this.opts[f]);if(p.length>1){let f=p.join(", ");throw new Error(`The following options cannot be used together: ${f}`)}if(!((n=this.opts)===null||n===void 0)&&n.jobId){if(`${parseInt(this.opts.jobId,10)}`===((i=this.opts)===null||i===void 0?void 0:i.jobId))throw new Error("Custom Id cannot be integers");if(!((s=this.opts)===null||s===void 0)&&s.jobId.includes(":")&&((a=(o=this.opts)===null||o===void 0?void 0:o.jobId)===null||a===void 0?void 0:a.split(":").length)!==3)throw new Error("Custom Id cannot contain :")}if(this.opts.priority){if(Math.trunc(this.opts.priority)!==this.opts.priority)throw new Error("Priority should not be float");if(this.opts.priority>Dm.PRIORITY_LIMIT)throw new Error(`Priority should be between 0 and ${Dm.PRIORITY_LIMIT}`)}if(this.opts.deduplication&&!(!((u=this.opts.deduplication)===null||u===void 0)&&u.id))throw new Error("Deduplication id must be provided");if(this.opts.debounce&&!(!((c=this.opts.debounce)===null||c===void 0)&&c.id))throw new Error("Debounce id must be provided");if(typeof this.opts.backoff=="object"&&typeof this.opts.backoff.jitter=="number"&&(this.opts.backoff.jitter<0||this.opts.backoff.jitter>1))throw new Error("Jitter should be between 0 and 1")}updateStacktrace(e){this.stacktrace=this.stacktrace||[],e?.stack&&(this.stacktrace.push(e.stack),this.opts.stackTraceLimit===0?this.stacktrace=[]:this.opts.stackTraceLimit&&(this.stacktrace=this.stacktrace.slice(-this.opts.stackTraceLimit)))}setSpanJobAttributes(e){e?.setAttributes({[iB.TelemetryAttributes.JobName]:this.name,[iB.TelemetryAttributes.JobId]:this.id})}};Dm.Job=lce;function car(t){if(!t)return[];let e=(0,ta.tryCatch)(JSON.parse,JSON,[t]);return e===ta.errorObject||!(e instanceof Array)?[]:e}function jze(t){let e=(0,ta.tryCatch)(JSON.parse,JSON,[t]);if(e!==ta.errorObject)return e;uar("corrupted returnvalue: "+t,e)}});var oB=b(sB=>{"use strict";Object.defineProperty(sB,"__esModule",{value:!0});sB.QueueKeys=void 0;var dce=class{constructor(e="bull"){this.prefix=e}getKeys(e){let r={};return["","active","wait","waiting-children","paused","id","delayed","prioritized","stalled-check","completed","failed","stalled","repeat","limiter","meta","events","pc","marker","de"].forEach(n=>{r[n]=this.toKey(e,n)}),r}toKey(e,r){return`${this.getQueueQualifiedName(e)}:${r}`}getQueueQualifiedName(e){return`${this.prefix}:${e}`}};sB.QueueKeys=dce});var $ze=b(aB=>{"use strict";Object.defineProperty(aB,"__esModule",{value:!0});aB.addDelayedJob=void 0;var lar=`--[[
  Adds a delayed job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - computes timestamp.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
    Input:
      KEYS[1] 'marker',
      KEYS[2] 'meta'
      KEYS[3] 'id'
      KEYS[4] 'delayed'
      KEYS[5] 'completed'
      KEYS[6] events stream key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (use custom instead of one generated automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local metaKey = KEYS[2]
local idKey = KEYS[3]
local delayedKey = KEYS[4]
local completedKey = KEYS[5]
local eventsKey = KEYS[6]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local opts = cmsgpack.unpack(ARGV[3])
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, delayedKey, deduplicationKey,
  eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
local delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],
    opts, timestamp, parentKey, parentData, repeatJobKey)
addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, KEYS[1], delay)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;aB.addDelayedJob={name:"addDelayedJob",content:lar,keys:6}});var Uze=b(uB=>{"use strict";Object.defineProperty(uB,"__esModule",{value:!0});uB.addJobScheduler=void 0;var dar=`--[[
  Adds a job scheduler, i.e. a job factory that creates jobs based on a given schedule (repeat options).
    Input:
      KEYS[1]  'repeat' key
      KEYS[2]  'delayed' key
      KEYS[3]  'wait' key
      KEYS[4]  'paused' key
      KEYS[5]  'meta' key
      KEYS[6]  'prioritized' key
      KEYS[7]  'marker' key
      KEYS[8]  'id' key
      KEYS[9]  'events' key
      KEYS[10] 'pc' priority counter
      KEYS[11] 'active' key
      ARGV[1] next milliseconds
      ARGV[2] msgpacked options
            [1]  name
            [2]  tz?
            [3]  pattern?
            [4]  endDate?
            [5]  every?
      ARGV[3] jobs scheduler id
      ARGV[4] Json stringified template data
      ARGV[5] mspacked template opts
      ARGV[6] msgpacked delayed opts
      ARGV[7] timestamp
      ARGV[8] prefix key
      ARGV[9] producer key
      Output:
        repeatableKey  - OK
]] local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local waitKey = KEYS[3]
local pausedKey = KEYS[4]
local metaKey = KEYS[5]
local prioritizedKey = KEYS[6]
local eventsKey = KEYS[9]
local nextMillis = ARGV[1]
local jobSchedulerId = ARGV[3]
local templateOpts = cmsgpack.unpack(ARGV[5])
local now = tonumber(ARGV[7])
local prefixKey = ARGV[8]
local jobOpts = cmsgpack.unpack(ARGV[6])
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
local function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, 
  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,
  data, jobSchedulerId, repeatDelay)
  opts['delay'] = repeatDelay
  opts['jobId'] = jobId
  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,
    opts, timestamp, nil, nil, jobSchedulerId)
  if delay ~= 0 then
    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)
  else
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
    -- Standard or priority add
    if priority == 0 then
      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
      -- Priority add
      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)
    end
    -- Emit waiting event
    rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents,  "*", "event", "waiting", "jobId", jobId)
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
--[[
  Function to store a job scheduler
]]
local function storeJobScheduler(schedulerId, schedulerKey, repeatKey, nextMillis, opts,
  templateData, templateOpts)
  rcall("ZADD", repeatKey, nextMillis, schedulerId)
  local optionalValues = {}
  if opts['tz'] then
    table.insert(optionalValues, "tz")
    table.insert(optionalValues, opts['tz'])
  end
  if opts['limit'] then
    table.insert(optionalValues, "limit")
    table.insert(optionalValues, opts['limit'])
  end
  if opts['pattern'] then
    table.insert(optionalValues, "pattern")
    table.insert(optionalValues, opts['pattern'])
  end
  if opts['startDate'] then
    table.insert(optionalValues, "startDate")
    table.insert(optionalValues, opts['startDate'])
  end
  if opts['endDate'] then
    table.insert(optionalValues, "endDate")
    table.insert(optionalValues, opts['endDate'])
  end
  if opts['every'] then
    table.insert(optionalValues, "every")
    table.insert(optionalValues, opts['every'])
  end
  if opts['offset'] then
    table.insert(optionalValues, "offset")
    table.insert(optionalValues, opts['offset'])
  else
    local offset = rcall("HGET", schedulerKey, "offset")
    if offset then
      table.insert(optionalValues, "offset")
      table.insert(optionalValues, tonumber(offset))
    end
  end
  local jsonTemplateOpts = cjson.encode(templateOpts)
  if jsonTemplateOpts and jsonTemplateOpts ~= '{}' then
    table.insert(optionalValues, "opts")
    table.insert(optionalValues, jsonTemplateOpts)
  end
  if templateData and templateData ~= '{}' then
    table.insert(optionalValues, "data")
    table.insert(optionalValues, templateData)
  end
  table.insert(optionalValues, "ic")
  table.insert(optionalValues, rcall("HGET", schedulerKey, "ic") or 1)
  rcall("DEL", schedulerKey) -- remove all attributes and then re-insert new ones
  rcall("HMSET", schedulerKey, "name", opts['name'], unpack(optionalValues))
end
local function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
    local nextMillis
    if not prevMillis then
        if startDate then
            -- Assuming startDate is passed as milliseconds from JavaScript
            nextMillis = tonumber(startDate)
            nextMillis = nextMillis > now and nextMillis or now
        else
            nextMillis = now
        end
    else
        nextMillis = prevMillis + every
        -- check if we may have missed some iterations
        if nextMillis < now then
            nextMillis = math.floor(now / every) * every + every + (offset or 0)
        end
    end
    if not offset or offset == 0 then
        local timeSlot = math.floor(nextMillis / every) * every;
        offset = nextMillis - timeSlot;
    end
    -- Return a tuple nextMillis, offset
    return math.floor(nextMillis), math.floor(offset)
end
-- If we are overriding a repeatable job we must delete the delayed job for
-- the next iteration.
local schedulerKey = repeatKey .. ":" .. jobSchedulerId
local maxEvents = getOrSetMaxEvents(metaKey)
local templateData = ARGV[4]
local prevMillis = rcall("ZSCORE", repeatKey, jobSchedulerId)
if prevMillis then
    prevMillis = tonumber(prevMillis)
end
local schedulerOpts = cmsgpack.unpack(ARGV[2])
local every = schedulerOpts['every']
-- For backwards compatibility we also check the offset from the job itself.
-- could be removed in future major versions.
local jobOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0
local offset = schedulerOpts['offset'] or jobOffset or 0
local newOffset = offset
local updatedEvery = false
if every then
    -- if we changed the 'every' value we need to reset millis to nil
    local millis = prevMillis
    if prevMillis then
        local prevEvery = tonumber(rcall("HGET", schedulerKey, "every"))
        if prevEvery ~= every then
            millis = nil
            updatedEvery = true
        end
    end
    local startDate = schedulerOpts['startDate']
    nextMillis, newOffset = getJobSchedulerEveryNextMillis(millis, every, now, offset, startDate)
end
local function removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, jobId, metaKey,
    eventsKey)
    if rcall("ZSCORE", delayedKey, jobId) then
        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
        rcall("ZREM", delayedKey, jobId)
        return true
    elseif rcall("ZSCORE", prioritizedKey, jobId) then
        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
        rcall("ZREM", prioritizedKey, jobId)
        return true
    else
        local pausedOrWaitKey = waitKey
        if isQueuePaused(metaKey) then
            pausedOrWaitKey = pausedKey
        end
        if rcall("LREM", pausedOrWaitKey, 1, jobId) > 0 then
            removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
            return true
        end
    end
    return false
end
local removedPrevJob = false
if prevMillis then
    local currentJobId = "repeat:" .. jobSchedulerId .. ":" .. prevMillis
    local currentJobKey = schedulerKey .. ":" .. prevMillis
    -- In theory it should always exist the currentJobKey if there is a prevMillis unless something has
    -- gone really wrong.
    if rcall("EXISTS", currentJobKey) == 1 then
        removedPrevJob = removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, currentJobId,
            metaKey, eventsKey)
    end
end
if removedPrevJob then
    -- The jobs has been removed and we want to replace it, so lets use the same millis.
    if every and not updatedEvery then
        nextMillis = prevMillis
    end
else
    -- Special case where no job was removed, and we need to add the next iteration.
    schedulerOpts['offset'] = newOffset
end
-- Check for job ID collision with existing jobs (in any state)
local jobId = "repeat:" .. jobSchedulerId .. ":" .. nextMillis
local jobKey = prefixKey .. jobId
-- If there's already a job with this ID, in a state 
-- that is not updatable (active, completed, failed) we must 
-- handle the collision
local hasCollision = false
if rcall("EXISTS", jobKey) == 1 then
    if every then
        -- For 'every' case: try next time slot to avoid collision
        local nextSlotMillis = nextMillis + every
        local nextSlotJobId = "repeat:" .. jobSchedulerId .. ":" .. nextSlotMillis
        local nextSlotJobKey = prefixKey .. nextSlotJobId
        if rcall("EXISTS", nextSlotJobKey) == 0 then
            -- Next slot is free, use it
            nextMillis = nextSlotMillis
            jobId = nextSlotJobId
        else
            -- Next slot also has a job, return error code
            return -11 -- SchedulerJobSlotsBusy
        end
    else
        hasCollision = true
    end
end
local delay = nextMillis - now
-- Fast Clamp delay to minimum of 0
if delay < 0 then
    delay = 0
end
local nextJobKey = schedulerKey .. ":" .. nextMillis
if not hasCollision or removedPrevJob then
    -- jobId already calculated above during collision check
    storeJobScheduler(jobSchedulerId, schedulerKey, repeatKey, nextMillis, schedulerOpts, templateData, templateOpts)
    rcall("INCR", KEYS[8])
    addJobFromScheduler(nextJobKey, jobId, jobOpts, waitKey, pausedKey, KEYS[11], metaKey, prioritizedKey, KEYS[10],
        delayedKey, KEYS[7], eventsKey, schedulerOpts['name'], maxEvents, now, templateData, jobSchedulerId, delay)
elseif hasCollision then
    -- For 'pattern' case: return error code
    return -10 -- SchedulerJobIdCollision
end
if ARGV[9] ~= "" then
    rcall("HSET", ARGV[9], "nrjid", jobId)
end
return {jobId .. "", delay}
`;uB.addJobScheduler={name:"addJobScheduler",content:dar,keys:11}});var Kze=b(cB=>{"use strict";Object.defineProperty(cB,"__esModule",{value:!0});cB.addLog=void 0;var par=`--[[
  Add job log
  Input:
    KEYS[1] job id key
    KEYS[2] job logs key
    ARGV[1] id
    ARGV[2] log
    ARGV[3] keepLogs
  Output:
    -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
  local logCount = rcall("RPUSH", KEYS[2], ARGV[2])
  if ARGV[3] ~= '' then
    local keepLogs = tonumber(ARGV[3])
    rcall("LTRIM", KEYS[2], -keepLogs, -1)
    return math.min(keepLogs, logCount)
  end
  return logCount
else
  return -1
end
`;cB.addLog={name:"addLog",content:par,keys:2}});var Vze=b(lB=>{"use strict";Object.defineProperty(lB,"__esModule",{value:!0});lB.addParentJob=void 0;var far=`--[[
  Adds a parent job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - adds the job to the waiting-children zset
    Input:
      KEYS[1] 'meta'
      KEYS[2] 'id'
      KEYS[3] 'delayed'
      KEYS[4] 'waiting-children'
      KEYS[5] 'completed'
      KEYS[6] events stream key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local metaKey = KEYS[1]
local idKey = KEYS[2]
local completedKey = KEYS[5]
local eventsKey = KEYS[6]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
-- Store the job.
storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,
         parentKey, parentData, repeatJobKey)
local waitChildrenKey = KEYS[4]
rcall("ZADD", waitChildrenKey, timestamp, jobId)
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
      "waiting-children", "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;lB.addParentJob={name:"addParentJob",content:far,keys:6}});var Gze=b(dB=>{"use strict";Object.defineProperty(dB,"__esModule",{value:!0});dB.addPrioritizedJob=void 0;var har=`--[[
  Adds a priotitized job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'marker',
      KEYS[2] 'meta'
      KEYS[3] 'id'
      KEYS[4] 'prioritized'
      KEYS[5] 'delayed'
      KEYS[6] 'completed'
      KEYS[7] 'active'
      KEYS[8] events stream key
      KEYS[9] 'pc' priority counter
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]] 
local metaKey = KEYS[2]
local idKey = KEYS[3]
local priorityKey = KEYS[4]
local completedKey = KEYS[6]
local activeKey = KEYS[7]
local eventsKey = KEYS[8]
local priorityCounterKey = KEYS[9]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[5],
  deduplicationKey, eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
-- Store the job.
local delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],
                                 opts, timestamp, parentKey, parentData,
                                 repeatJobKey)
-- Add the job to the prioritized set
local isPausedOrMaxed = isQueuePausedOrMaxed(metaKey, activeKey)
addJobWithPriority( KEYS[1], priorityKey, priority, jobId, priorityCounterKey, isPausedOrMaxed)
-- Emit waiting event
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;dB.addPrioritizedJob={name:"addPrioritizedJob",content:har,keys:9}});var Hze=b(pB=>{"use strict";Object.defineProperty(pB,"__esModule",{value:!0});pB.addRepeatableJob=void 0;var mar=`--[[
  Adds a repeatable job
    Input:
      KEYS[1] 'repeat' key
      KEYS[2] 'delayed' key
      ARGV[1] next milliseconds
      ARGV[2] msgpacked options
            [1]  name
            [2]  tz?
            [3]  pattern?
            [4]  endDate?
            [5]  every?
      ARGV[3] legacy custom key TODO: remove this logic in next breaking change
      ARGV[4] custom key
      ARGV[5] prefix key
      Output:
        repeatableKey  - OK
]]
local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local nextMillis = ARGV[1]
local legacyCustomKey = ARGV[3]
local customKey = ARGV[4]
local prefixKey = ARGV[5]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function storeRepeatableJob(repeatKey, customKey, nextMillis, rawOpts)
  rcall("ZADD", repeatKey, nextMillis, customKey)
  local opts = cmsgpack.unpack(rawOpts)
  local optionalValues = {}
  if opts['tz'] then
    table.insert(optionalValues, "tz")
    table.insert(optionalValues, opts['tz'])
  end
  if opts['pattern'] then
    table.insert(optionalValues, "pattern")
    table.insert(optionalValues, opts['pattern'])
  end
  if opts['endDate'] then
    table.insert(optionalValues, "endDate")
    table.insert(optionalValues, opts['endDate'])
  end
  if opts['every'] then
    table.insert(optionalValues, "every")
    table.insert(optionalValues, opts['every'])
  end
  rcall("HMSET", repeatKey .. ":" .. customKey, "name", opts['name'],
    unpack(optionalValues))
  return customKey
end
-- If we are overriding a repeatable job we must delete the delayed job for
-- the next iteration.
local prevMillis = rcall("ZSCORE", repeatKey, customKey)
if prevMillis then
  local delayedJobId =  "repeat:" .. customKey .. ":" .. prevMillis
  local nextDelayedJobId =  repeatKey .. ":" .. customKey .. ":" .. nextMillis
  if rcall("ZSCORE", delayedKey, delayedJobId)
   and rcall("EXISTS", nextDelayedJobId) ~= 1 then
    removeJob(delayedJobId, true, prefixKey, true --[[remove debounce key]])
    rcall("ZREM", delayedKey, delayedJobId)
  end
end
-- Keep backwards compatibility with old repeatable jobs (<= 3.0.0)
if rcall("ZSCORE", repeatKey, legacyCustomKey) ~= false then
  return storeRepeatableJob(repeatKey, legacyCustomKey, nextMillis, ARGV[2])
end
return storeRepeatableJob(repeatKey, customKey, nextMillis, ARGV[2])
`;pB.addRepeatableJob={name:"addRepeatableJob",content:mar,keys:2}});var zze=b(fB=>{"use strict";Object.defineProperty(fB,"__esModule",{value:!0});fB.addStandardJob=void 0;var yar=`--[[
  Adds a job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - if delayed:
      - computes timestamp.
      - adds to delayed zset.
      - Emits a global event 'delayed' if the job is delayed.
    - if not delayed
      - Adds the jobId to the wait/paused list in one of three ways:
         - LIFO
         - FIFO
         - prioritized.
      - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'wait',
      KEYS[2] 'paused'
      KEYS[3] 'meta'
      KEYS[4] 'id'
      KEYS[5] 'completed'
      KEYS[6] 'delayed'
      KEYS[7] 'active'
      KEYS[8] events stream key
      KEYS[9] marker key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local eventsKey = KEYS[8]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", KEYS[4])
local metaKey = KEYS[3]
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, KEYS[5], eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[6],
  deduplicationKey, eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
-- Store the job.
storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,
         parentKey, parentData, repeatJobKey)
local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[1], KEYS[2])
-- LIFO or FIFO
local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
addJobInTargetList(target, KEYS[9], pushCmd, isPausedOrMaxed, jobId)
-- Emit waiting event
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;fB.addStandardJob={name:"addStandardJob",content:yar,keys:9}});var Wze=b(hB=>{"use strict";Object.defineProperty(hB,"__esModule",{value:!0});hB.changeDelay=void 0;var gar=`--[[
  Change job delay when it is in delayed set.
  Input:
    KEYS[1] delayed key
    KEYS[2] meta key
    KEYS[3] marker key
    KEYS[4] events stream
    ARGV[1] delay
    ARGV[2] timestamp
    ARGV[3] the id of the job
    ARGV[4] job key
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in delayed set.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
if rcall("EXISTS", ARGV[4]) == 1 then
  local jobId = ARGV[3]
  local delay = tonumber(ARGV[1])
  local score, delayedTimestamp = getDelayedScore(KEYS[1], ARGV[2], delay)
  local numRemovedElements = rcall("ZREM", KEYS[1], jobId)
  if numRemovedElements < 1 then
    return -3
  end
  rcall("HSET", ARGV[4], "delay", delay)
  rcall("ZADD", KEYS[1], score, jobId)
  local maxEvents = getOrSetMaxEvents(KEYS[2])
  rcall("XADD", KEYS[4], "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(KEYS[3], KEYS[1])
  return 0
else
  return -1
end`;hB.changeDelay={name:"changeDelay",content:gar,keys:4}});var Jze=b(mB=>{"use strict";Object.defineProperty(mB,"__esModule",{value:!0});mB.changePriority=void 0;var bar=`--[[
  Change job priority
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] 'active'
    KEYS[6] 'pc' priority counter
    KEYS[7] 'marker'
    ARGV[1] priority value
    ARGV[2] prefix key
    ARGV[3] job id
    ARGV[4] lifo
    Output:
       0  - OK
      -1  - Missing job
]]
local jobId = ARGV[3]
local jobKey = ARGV[2] .. jobId
local priority = tonumber(ARGV[1])
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
local function reAddJobWithNewPriority( prioritizedKey, markerKey, targetKey,
    priorityCounter, lifo, priority, jobId, isPausedOrMaxed)
    if priority == 0 then
        local pushCmd = lifo and 'RPUSH' or 'LPUSH'
        addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
        if lifo then
            pushBackJobWithPriority(prioritizedKey, priority, jobId)
        else
            addJobWithPriority(markerKey, prioritizedKey, priority, jobId,
                priorityCounter, isPausedOrMaxed)
        end
    end
end
if rcall("EXISTS", jobKey) == 1 then
    local metaKey = KEYS[3]
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[5], KEYS[1], KEYS[2])
    local prioritizedKey = KEYS[4]
    local priorityCounterKey = KEYS[6]
    local markerKey = KEYS[7]
    -- Re-add with the new priority
    if rcall("ZREM", prioritizedKey, jobId) > 0 then
        reAddJobWithNewPriority( prioritizedKey, markerKey, target,
            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)
    elseif rcall("LREM", target, -1, jobId) > 0 then
        reAddJobWithNewPriority( prioritizedKey, markerKey, target,
            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)
    end
    rcall("HSET", jobKey, "priority", priority)
    return 0
else
    return -1
end
`;mB.changePriority={name:"changePriority",content:bar,keys:7}});var Yze=b(yB=>{"use strict";Object.defineProperty(yB,"__esModule",{value:!0});yB.cleanJobsInSet=void 0;var _ar=`--[[
  Remove jobs from the specific set.
  Input:
    KEYS[1]  set key,
    KEYS[2]  events stream key
    KEYS[3]  repeat key
    ARGV[1]  jobKey prefix
    ARGV[2]  timestamp
    ARGV[3]  limit the number of jobs to be removed. 0 is unlimited
    ARGV[4]  set name, can be any of 'wait', 'active', 'paused', 'delayed', 'completed', or 'failed'
]]
local rcall = redis.call
local repeatKey = KEYS[3]
local rangeStart = 0
local rangeEnd = -1
local limit = tonumber(ARGV[3])
-- If we're only deleting _n_ items, avoid retrieving all items
-- for faster performance
--
-- Start from the tail of the list, since that's where oldest elements
-- are generally added for FIFO lists
if limit > 0 then
  rangeStart = -1 - limit + 1
  rangeEnd = -1
end
-- Includes
--[[
  Function to clean job list.
  Returns jobIds and deleted count number.
]]
-- Includes
--[[
  Function to get the latest saved timestamp.
]]
local function getTimestamp(jobKey, attributes)
  if #attributes == 1 then
    return rcall("HGET", jobKey, attributes[1])
  end
  local jobTs
  for _, ts in ipairs(rcall("HMGET", jobKey, unpack(attributes))) do
    if (ts) then
      jobTs = ts
      break
    end
  end
  return jobTs
end
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function cleanList(listKey, jobKeyPrefix, rangeStart, rangeEnd,
  timestamp, isWaiting, jobSchedulersKey)
  local jobs = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  local deleted = {}
  local deletedCount = 0
  local jobTS
  local deletionMarker = ''
  local jobIdsLen = #jobs
  for i, job in ipairs(jobs) do
    if limit > 0 and deletedCount >= limit then
      break
    end
    local jobKey = jobKeyPrefix .. job
    if (isWaiting or rcall("EXISTS", jobKey .. ":lock") == 0) and
      not isJobSchedulerJob(job, jobKey, jobSchedulersKey) then
      -- Find the right timestamp of the job to compare to maxTimestamp:
      -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
      -- * processedOn represents when the job was last attempted, but it doesn't get populated until
      --   the job is first tried
      -- * timestamp is the original job submission time
      -- Fetch all three of these (in that order) and use the first one that is set so that we'll leave jobs
      -- that have been active within the grace period:
      jobTS = getTimestamp(jobKey, {"finishedOn", "processedOn", "timestamp"})
      if (not jobTS or jobTS <= timestamp) then
        -- replace the entry with a deletion marker; the actual deletion will
        -- occur at the end of the script
        rcall("LSET", listKey, rangeEnd - jobIdsLen + i, deletionMarker)
        removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]])
        deletedCount = deletedCount + 1
        table.insert(deleted, job)
      end
    end
  end
  rcall("LREM", listKey, 0, deletionMarker)
  return {deleted, deletedCount}
end
--[[
  Function to clean job set.
  Returns jobIds and deleted count number.
]] 
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  We use ZRANGEBYSCORE to make the case where we're deleting a limited number
  of items in a sorted set only run a single iteration. If we simply used
  ZRANGE, we may take a long time traversing through jobs that are within the
  grace period.
]]
local function getJobsInZset(zsetKey, rangeEnd, limit)
  if limit > 0 then
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd, "LIMIT", 0, limit)
  else
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd)
  end
end
local function cleanSet(
    setKey,
    jobKeyPrefix,
    rangeEnd,
    timestamp,
    limit,
    attributes,
    isFinished,
    jobSchedulersKey)
    local jobs = getJobsInZset(setKey, rangeEnd, limit)
    local deleted = {}
    local deletedCount = 0
    local jobTS
    for i, job in ipairs(jobs) do
        if limit > 0 and deletedCount >= limit then
            break
        end
        local jobKey = jobKeyPrefix .. job
        -- Extract a Job Scheduler Id from jobId ("repeat:job-scheduler-id:millis") 
        -- and check if it is in the scheduled jobs
        if not (jobSchedulersKey and isJobSchedulerJob(job, jobKey, jobSchedulersKey)) then
            if isFinished then
                removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )
                deletedCount = deletedCount + 1
                table.insert(deleted, job)
            else
                -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
                jobTS = getTimestamp(jobKey, attributes)
                if (not jobTS or jobTS <= timestamp) then
                    removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )
                    deletedCount = deletedCount + 1
                    table.insert(deleted, job)
                end
            end
        end
    end
    if (#deleted > 0) then
        for from, to in batches(#deleted, 7000) do
            rcall("ZREM", setKey, unpack(deleted, from, to))
        end
    end
    return {deleted, deletedCount}
end
local result
if ARGV[4] == "active" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], false --[[ hasFinished ]],
                      repeatKey)
elseif ARGV[4] == "delayed" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"processedOn", "timestamp"}, false  --[[ hasFinished ]], repeatKey)
elseif ARGV[4] == "prioritized" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"timestamp"}, false  --[[ hasFinished ]], repeatKey)
elseif ARGV[4] == "wait" or ARGV[4] == "paused" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], true --[[ hasFinished ]],
                      repeatKey)
else
  rangeEnd = ARGV[2]
  -- No need to pass repeat key as in that moment job won't be related to a job scheduler
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"finishedOn"}, true  --[[ hasFinished ]])
end
rcall("XADD", KEYS[2], "*", "event", "cleaned", "count", result[2])
return result[1]
`;yB.cleanJobsInSet={name:"cleanJobsInSet",content:_ar,keys:3}});var Qze=b(gB=>{"use strict";Object.defineProperty(gB,"__esModule",{value:!0});gB.drain=void 0;var Ear=`--[[
  Drains the queue, removes all jobs that are waiting
  or delayed, but not active, completed or failed
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'delayed'
    KEYS[4] 'prioritized'
    KEYS[5] 'jobschedulers' (repeat)
    ARGV[1]  queue key prefix
    ARGV[2]  should clean delayed jobs
]]
local rcall = redis.call
local queueBaseKey = ARGV[1]
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to filter out jobs to ignore from a table.
]]
local function filterOutJobsToIgnore(jobs, jobsToIgnore)
  local filteredJobs = {}
  for i = 1, #jobs do
    if not jobsToIgnore[jobs[i]] then
      table.insert(filteredJobs, jobs[i])
    end
  end
  return filteredJobs
end
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey, true --[[remove debounce key]])
  end
  return max - #keys
end
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getListItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getZSetItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
-- We must not remove delayed jobs if they are associated to a job scheduler.
local scheduledJobs = {}
local jobSchedulers = rcall("ZRANGE", KEYS[5], 0, -1, "WITHSCORES")
-- For every job scheduler, get the current delayed job id.
for i = 1, #jobSchedulers, 2 do
    local jobSchedulerId = jobSchedulers[i]
    local jobSchedulerMillis = jobSchedulers[i + 1]
    local delayedJobId = "repeat:" .. jobSchedulerId .. ":" .. jobSchedulerMillis
    scheduledJobs[delayedJobId] = true
end
removeListJobs(KEYS[1], true, queueBaseKey, 0, scheduledJobs) -- wait
removeListJobs(KEYS[2], true, queueBaseKey, 0, scheduledJobs) -- paused
if ARGV[2] == "1" then
  removeZSetJobs(KEYS[3], true, queueBaseKey, 0, scheduledJobs) -- delayed
end
removeZSetJobs(KEYS[4], true, queueBaseKey, 0, scheduledJobs) -- prioritized
`;gB.drain={name:"drain",content:Ear,keys:5}});var Xze=b(bB=>{"use strict";Object.defineProperty(bB,"__esModule",{value:!0});bB.extendLock=void 0;var Sar=`--[[
  Extend lock and removes the job from the stalled set.
  Input:
    KEYS[1] 'lock',
    KEYS[2] 'stalled'
    ARGV[1]  token
    ARGV[2]  lock duration in milliseconds
    ARGV[3]  jobid
  Output:
    "1" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  --   if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2], "XX") then
  if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2]) then
    rcall("SREM", KEYS[2], ARGV[3])
    return 1
  end
end
return 0
`;bB.extendLock={name:"extendLock",content:Sar,keys:2}});var Zze=b(_B=>{"use strict";Object.defineProperty(_B,"__esModule",{value:!0});_B.extendLocks=void 0;var war=`--[[
  Extend locks for multiple jobs and remove them from the stalled set if successful.
  Return the list of job IDs for which the operation failed.
  KEYS[1] = stalled key
  ARGV[1] = baseKey
  ARGV[2] = tokens
  ARGV[3] = jobIds
  ARGV[4] = lockDuration (ms)
  Output:
    An array of failed job IDs. If empty, all succeeded.
]]
local rcall = redis.call
local stalledKey = KEYS[1]
local baseKey = ARGV[1]
local tokens = cmsgpack.unpack(ARGV[2])
local jobIds = cmsgpack.unpack(ARGV[3])
local lockDuration = ARGV[4]
local jobCount = #jobIds
local failedJobs = {}
for i = 1, jobCount, 1 do
    local lockKey = baseKey .. jobIds[i] .. ':lock'
    local jobId = jobIds[i]
    local token = tokens[i]
    local currentToken = rcall("GET", lockKey)
    if currentToken then
        if currentToken == token then
            local setResult = rcall("SET", lockKey, token, "PX", lockDuration)
            if setResult then
                rcall("SREM", stalledKey, jobId)
            else
                table.insert(failedJobs, jobId)
            end
        else
            table.insert(failedJobs, jobId)
        end
    else
        table.insert(failedJobs, jobId)
    end
end
return failedJobs
`;_B.extendLocks={name:"extendLocks",content:war,keys:1}});var eWe=b(EB=>{"use strict";Object.defineProperty(EB,"__esModule",{value:!0});EB.getCounts=void 0;var Aar=`--[[
  Get counts per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1...] types
]]
local rcall = redis.call;
local prefix = KEYS[1]
local results = {}
for i = 1, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        results[#results+1] = count-1
      else
        results[#results+1] = 0
      end
    else
      results[#results+1] = rcall("LLEN", stateKey)
    end
  elseif ARGV[i] == "active" then
    results[#results+1] = rcall("LLEN", stateKey)
  else
    results[#results+1] = rcall("ZCARD", stateKey)
  end
end
return results
`;EB.getCounts={name:"getCounts",content:Aar,keys:1}});var tWe=b(vB=>{"use strict";Object.defineProperty(vB,"__esModule",{value:!0});vB.getCountsPerPriority=void 0;var Car=`--[[
  Get counts per provided states
    Input:
      KEYS[1] wait key
      KEYS[2] paused key
      KEYS[3] meta key
      KEYS[4] prioritized key
      ARGV[1...] priorities
]]
local rcall = redis.call
local results = {}
local waitKey = KEYS[1]
local pausedKey = KEYS[2]
local prioritizedKey = KEYS[4]
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
for i = 1, #ARGV do
  local priority = tonumber(ARGV[i])
  if priority == 0 then
    if isQueuePaused(KEYS[3]) then
      results[#results+1] = rcall("LLEN", pausedKey)
    else
      results[#results+1] = rcall("LLEN", waitKey)
    end
  else
    results[#results+1] = rcall("ZCOUNT", prioritizedKey,
      priority * 0x100000000, (priority + 1)  * 0x100000000 - 1)
  end
end
return results
`;vB.getCountsPerPriority={name:"getCountsPerPriority",content:Car,keys:4}});var rWe=b(SB=>{"use strict";Object.defineProperty(SB,"__esModule",{value:!0});SB.getDependencyCounts=void 0;var Tar=`--[[
  Get counts per child states
    Input:
      KEYS[1]    processed key
      KEYS[2]    unprocessed key
      KEYS[3]    ignored key
      KEYS[4]    failed key
      ARGV[1...] types
]]
local rcall = redis.call;
local processedKey = KEYS[1]
local unprocessedKey = KEYS[2]
local ignoredKey = KEYS[3]
local failedKey = KEYS[4]
local results = {}
for i = 1, #ARGV do
  if ARGV[i] == "processed" then
    results[#results+1] = rcall("HLEN", processedKey)
  elseif ARGV[i] == "unprocessed" then
    results[#results+1] = rcall("SCARD", unprocessedKey)
  elseif ARGV[i] == "ignored" then
    results[#results+1] = rcall("HLEN", ignoredKey)
  else
    results[#results+1] = rcall("ZCARD", failedKey)
  end
end
return results
`;SB.getDependencyCounts={name:"getDependencyCounts",content:Tar,keys:4}});var nWe=b(wB=>{"use strict";Object.defineProperty(wB,"__esModule",{value:!0});wB.getJobScheduler=void 0;var Oar=`--[[
  Get job scheduler record.
  Input:
    KEYS[1] 'repeat' key
    ARGV[1] id
]]
local rcall = redis.call
local jobSchedulerKey = KEYS[1] .. ":" .. ARGV[1]
local score = rcall("ZSCORE", KEYS[1], ARGV[1])
if score then
  return {rcall("HGETALL", jobSchedulerKey), score} -- get job data
end
return {nil, nil}
`;wB.getJobScheduler={name:"getJobScheduler",content:Oar,keys:1}});var iWe=b(AB=>{"use strict";Object.defineProperty(AB,"__esModule",{value:!0});AB.getMetrics=void 0;var xar=`--[[
  Get metrics
  Input:
    KEYS[1] 'metrics' key
    KEYS[2] 'metrics data' key
    ARGV[1] start index
    ARGV[2] end index
]]
local rcall = redis.call;
local metricsKey = KEYS[1]
local dataKey = KEYS[2]
local metrics = rcall("HMGET", metricsKey, "count", "prevTS", "prevCount")
local data = rcall("LRANGE", dataKey, tonumber(ARGV[1]), tonumber(ARGV[2]))
local numPoints = rcall("LLEN", dataKey)
return {metrics, data, numPoints}
`;AB.getMetrics={name:"getMetrics",content:xar,keys:2}});var sWe=b(CB=>{"use strict";Object.defineProperty(CB,"__esModule",{value:!0});CB.getRanges=void 0;var Iar=`--[[
  Get job ids per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1]    start
      ARGV[2]    end
      ARGV[3]    asc
      ARGV[4...] types
]]
local rcall = redis.call
local prefix = KEYS[1]
local rangeStart = tonumber(ARGV[1])
local rangeEnd = tonumber(ARGV[2])
local asc = ARGV[3]
local results = {}
local function getRangeInList(listKey, asc, rangeStart, rangeEnd, results)
  if asc == "1" then
    local modifiedRangeStart
    local modifiedRangeEnd
    if rangeStart == -1 then
      modifiedRangeStart = 0
    else
      modifiedRangeStart = -(rangeStart + 1)
    end
    if rangeEnd == -1 then
      modifiedRangeEnd = 0
    else
      modifiedRangeEnd = -(rangeEnd + 1)
    end
    results[#results+1] = rcall("LRANGE", listKey,
      modifiedRangeEnd,
      modifiedRangeStart)
  else
    results[#results+1] = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  end
end
for i = 4, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
      else
        results[#results+1] = {}
      end
    else
      getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
    end
  elseif ARGV[i] == "active" then
    getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
  else
    if asc == "1" then
      results[#results+1] = rcall("ZRANGE", stateKey, rangeStart, rangeEnd)
    else
      results[#results+1] = rcall("ZREVRANGE", stateKey, rangeStart, rangeEnd)
    end
  end
end
return results
`;CB.getRanges={name:"getRanges",content:Iar,keys:1}});var oWe=b(TB=>{"use strict";Object.defineProperty(TB,"__esModule",{value:!0});TB.getRateLimitTtl=void 0;var Rar=`--[[
  Get rate limit ttl
    Input:
      KEYS[1] 'limiter'
      KEYS[2] 'meta'
      ARGV[1] maxJobs
]]
local rcall = redis.call
-- Includes
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
local rateLimiterKey = KEYS[1]
if ARGV[1] ~= "0" then
  return getRateLimitTTL(tonumber(ARGV[1]), rateLimiterKey)
else
  local rateLimitMax = rcall("HGET", KEYS[2], "max")
  if rateLimitMax then
    return getRateLimitTTL(tonumber(rateLimitMax), rateLimiterKey)
  end
  return rcall("PTTL", rateLimiterKey)
end
`;TB.getRateLimitTtl={name:"getRateLimitTtl",content:Rar,keys:2}});var aWe=b(OB=>{"use strict";Object.defineProperty(OB,"__esModule",{value:!0});OB.getState=void 0;var Dar=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'prioritized'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) then
  return "prioritized"
end
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local active_items = rcall("LRANGE", KEYS[4] , 0, -1)
if checkItemInList(active_items, ARGV[1]) ~= nil then
  return "active"
end
local wait_items = rcall("LRANGE", KEYS[5] , 0, -1)
if checkItemInList(wait_items, ARGV[1]) ~= nil then
  return "waiting"
end
local paused_items = rcall("LRANGE", KEYS[6] , 0, -1)
if checkItemInList(paused_items, ARGV[1]) ~= nil then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7], ARGV[1]) then
  return "waiting-children"
end
return "unknown"
`;OB.getState={name:"getState",content:Dar,keys:8}});var uWe=b(xB=>{"use strict";Object.defineProperty(xB,"__esModule",{value:!0});xB.getStateV2=void 0;var kar=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) then
  return "prioritized"
end
if rcall("LPOS", KEYS[4] , ARGV[1]) then
  return "active"
end
if rcall("LPOS", KEYS[5] , ARGV[1]) then
  return "waiting"
end
if rcall("LPOS", KEYS[6] , ARGV[1]) then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7] , ARGV[1]) then
  return "waiting-children"
end
return "unknown"
`;xB.getStateV2={name:"getStateV2",content:kar,keys:8}});var cWe=b(IB=>{"use strict";Object.defineProperty(IB,"__esModule",{value:!0});IB.isFinished=void 0;var Mar=`--[[
  Checks if a job is finished (.i.e. is in the completed or failed set)
  Input: 
    KEYS[1] completed key
    KEYS[2] failed key
    KEYS[3] job key
    ARGV[1] job id
    ARGV[2] return value?
  Output:
    0 - Not finished.
    1 - Completed.
    2 - Failed.
   -1 - Missing job. 
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[3]) ~= 1 then
  if ARGV[2] == "1" then
    return {-1,"Missing key for job " .. KEYS[3] .. ". isFinished"}
  end  
  return -1
end
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  if ARGV[2] == "1" then
    local returnValue = rcall("HGET", KEYS[3], "returnvalue")
    return {1,returnValue}
  end
  return 1
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  if ARGV[2] == "1" then
    local failedReason = rcall("HGET", KEYS[3], "failedReason")
    return {2,failedReason}
  end
  return 2
end
if ARGV[2] == "1" then
  return {0}
end
return 0
`;IB.isFinished={name:"isFinished",content:Mar,keys:3}});var lWe=b(RB=>{"use strict";Object.defineProperty(RB,"__esModule",{value:!0});RB.isJobInList=void 0;var Par=`--[[
  Checks if job is in a given list.
  Input:
    KEYS[1]
    ARGV[1]
  Output:
    1 if element found in the list.
]]
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local items = redis.call("LRANGE", KEYS[1] , 0, -1)
return checkItemInList(items, ARGV[1])
`;RB.isJobInList={name:"isJobInList",content:Par,keys:1}});var dWe=b(DB=>{"use strict";Object.defineProperty(DB,"__esModule",{value:!0});DB.isMaxed=void 0;var Nar=`--[[
  Checks if queue is maxed.
  Input:
    KEYS[1] meta key
    KEYS[2] active key
  Output:
    1 if element found in the list.
]]
local rcall = redis.call
-- Includes
--[[
  Function to check if queue is maxed or not.
]]
local function isQueueMaxed(queueMetaKey, activeKey)
  local maxConcurrency = rcall("HGET", queueMetaKey, "concurrency")
  if maxConcurrency then
    local activeCount = rcall("LLEN", activeKey)
    if activeCount >= tonumber(maxConcurrency) then
      return true
    end
  end
  return false
end
return isQueueMaxed(KEYS[1], KEYS[2])
`;DB.isMaxed={name:"isMaxed",content:Nar,keys:2}});var pWe=b(kB=>{"use strict";Object.defineProperty(kB,"__esModule",{value:!0});kB.moveJobFromActiveToWait=void 0;var Far=`--[[
  Function to move job from active state to wait.
  Input:
    KEYS[1]  active key
    KEYS[2]  wait key
    KEYS[3]  stalled key
    KEYS[4]  paused key
    KEYS[5]  meta key
    KEYS[6]  limiter key
    KEYS[7]  prioritized key
    KEYS[8]  marker key
    KEYS[9]  event key
    ARGV[1] job id
    ARGV[2] lock token
    ARGV[3] job id key
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
local jobId = ARGV[1]
local token = ARGV[2]
local jobKey = ARGV[3]
if rcall("EXISTS", jobKey) == 0 then
  return -1
end
local errorCode = removeLock(jobKey, KEYS[3], token, jobId)
if errorCode < 0 then
  return errorCode
end
local metaKey = KEYS[5]
local removed = rcall("LREM", KEYS[1], 1, jobId)
if removed > 0 then
  local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[1], KEYS[2], KEYS[4])
  local priority = tonumber(rcall("HGET", ARGV[3], "priority")) or 0
  if priority > 0 then
    pushBackJobWithPriority(KEYS[7], priority, jobId)
  else
    addJobInTargetList(target, KEYS[8], "RPUSH", isPausedOrMaxed, jobId)
  end
  local maxEvents = getOrSetMaxEvents(metaKey)
  -- Emit waiting event
  rcall("XADD", KEYS[9], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", jobId, "prev", "active")
end
local pttl = rcall("PTTL", KEYS[6])
if pttl > 0 then
  return pttl
else
  return 0
end
`;kB.moveJobFromActiveToWait={name:"moveJobFromActiveToWait",content:Far,keys:9}});var fWe=b(MB=>{"use strict";Object.defineProperty(MB,"__esModule",{value:!0});MB.moveJobsToWait=void 0;var Bar=`--[[
  Move completed, failed or delayed jobs to wait.
  Note: Does not support jobs with priorities.
  Input:
    KEYS[1] base key
    KEYS[2] events stream
    KEYS[3] state key (failed, completed, delayed)
    KEYS[4] 'wait'
    KEYS[5] 'paused'
    KEYS[6] 'meta'
    KEYS[7] 'active'
    KEYS[8] 'marker'
    ARGV[1] count
    ARGV[2] timestamp
    ARGV[3] prev state
  Output:
    1  means the operation is not completed
    0  means the operation is completed
]]
local maxCount = tonumber(ARGV[1])
local timestamp = tonumber(ARGV[2])
local rcall = redis.call;
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local metaKey = KEYS[6]
local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[4], KEYS[5])
local jobs = rcall('ZRANGEBYSCORE', KEYS[3], 0, timestamp, 'LIMIT', 0, maxCount)
if (#jobs > 0) then
    if ARGV[3] == "failed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "failedReason")
        end
    elseif ARGV[3] == "completed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "returnvalue")
        end
    end
    local maxEvents = getOrSetMaxEvents(metaKey)
    for i, key in ipairs(jobs) do
        -- Emit waiting event
        rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event",
              "waiting", "jobId", key, "prev", ARGV[3]);
    end
    for from, to in batches(#jobs, 7000) do
        rcall("ZREM", KEYS[3], unpack(jobs, from, to))
        rcall("LPUSH", target, unpack(jobs, from, to))
    end
    addBaseMarkerIfNeeded(KEYS[8], isPausedOrMaxed)
end
maxCount = maxCount - #jobs
if (maxCount <= 0) then return 1 end
return 0
`;MB.moveJobsToWait={name:"moveJobsToWait",content:Bar,keys:8}});var hWe=b(PB=>{"use strict";Object.defineProperty(PB,"__esModule",{value:!0});PB.moveStalledJobsToWait=void 0;var qar=`--[[
  Move stalled jobs to wait.
    Input:
      KEYS[1] 'stalled' (SET)
      KEYS[2] 'wait',   (LIST)
      KEYS[3] 'active', (LIST)
      KEYS[4] 'stalled-check', (KEY)
      KEYS[5] 'meta', (KEY)
      KEYS[6] 'paused', (LIST)
      KEYS[7] 'marker'
      KEYS[8] 'event stream' (STREAM)
      ARGV[1]  Max stalled job count
      ARGV[2]  queue.toKey('')
      ARGV[3]  timestamp
      ARGV[4]  max check time
    Events:
      'stalled' with stalled job id.
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to move job to wait to be picked up by a waiting worker.
]]
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey,
  jobId, pushCmd)
  local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
  addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId", jobId, 'prev', 'active')
end
--[[
  Function to trim events, default 10000.
]]
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = getOrSetMaxEvents(metaKey)
  if maxEvents then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
local stalledKey = KEYS[1]
local waitKey = KEYS[2]
local activeKey = KEYS[3]
local stalledCheckKey = KEYS[4]
local metaKey = KEYS[5]
local pausedKey = KEYS[6]
local markerKey = KEYS[7]
local eventStreamKey = KEYS[8]
local maxStalledJobCount = tonumber(ARGV[1])
local queueKeyPrefix = ARGV[2]
local timestamp = ARGV[3]
local maxCheckTime = ARGV[4]
if rcall("EXISTS", stalledCheckKey) == 1 then
    return {}
end
rcall("SET", stalledCheckKey, timestamp, "PX", maxCheckTime)
-- Trim events before emiting them to avoid trimming events emitted in this script
trimEvents(metaKey, eventStreamKey)
-- Move all stalled jobs to wait
local stalling = rcall('SMEMBERS', stalledKey)
local stalled = {}
if (#stalling > 0) then
    rcall('DEL', stalledKey)
    -- Remove from active list
    for i, jobId in ipairs(stalling) do
        -- Markers in waitlist DEPRECATED in v5: Remove in v6.
        if string.sub(jobId, 1, 2) == "0:" then
            -- If the jobId is a delay marker ID we just remove it.
            rcall("LREM", activeKey, 1, jobId)
        else
            local jobKey = queueKeyPrefix .. jobId
            -- Check that the lock is also missing, then we can handle this job as really stalled.
            if (rcall("EXISTS", jobKey .. ":lock") == 0) then
                --  Remove from the active queue.
                local removed = rcall("LREM", activeKey, 1, jobId)
                if (removed > 0) then
                    -- If this job has been stalled too many times, such as if it crashes the worker, then fail it.
                    local stalledCount = rcall("HINCRBY", jobKey, "stc", 1)
                    -- Check if this is a repeatable job by looking at job options
                    local jobOpts = rcall("HGET", jobKey, "opts")
                    local isRepeatableJob = false
                    if jobOpts then
                        local opts = cjson.decode(jobOpts)
                        if opts and opts["repeat"] then
                            isRepeatableJob = true
                        end
                    end
                    -- Only fail job if it exceeds stall limit AND is not a repeatable job
                    if stalledCount > maxStalledJobCount and not isRepeatableJob then
                        local failedReason = "job stalled more than allowable limit"
                        rcall("HSET", jobKey, "defa", failedReason)
                    end
                    moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey, jobId,
                        "RPUSH")
                    -- Emit the stalled event
                    rcall("XADD", eventStreamKey, "*", "event", "stalled", "jobId", jobId)
                    table.insert(stalled, jobId)
                end
            end
        end
    end
end
-- Mark potentially stalled jobs
local active = rcall('LRANGE', activeKey, 0, -1)
if (#active > 0) then
    for from, to in batches(#active, 7000) do
        rcall('SADD', stalledKey, unpack(active, from, to))
    end
end
return stalled
`;PB.moveStalledJobsToWait={name:"moveStalledJobsToWait",content:qar,keys:8}});var mWe=b(NB=>{"use strict";Object.defineProperty(NB,"__esModule",{value:!0});NB.moveToActive=void 0;var Lar=`--[[
  Move next job to be processed to active, lock it and fetch its data. The job
  may be delayed, in that case we need to move it to the delayed set instead.
  This operation guarantees that the worker owns the job during the lock
  expiration time. The worker is responsible of keeping the lock fresh
  so that no other worker picks this job again.
  Input:
    KEYS[1] wait key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] stream events key
    KEYS[5] stalled key
    -- Rate limiting
    KEYS[6] rate limiter key
    KEYS[7] delayed key
    -- Delayed jobs
    KEYS[8] paused key
    KEYS[9] meta key
    KEYS[10] pc priority counter
    -- Marker
    KEYS[11] marker key
    -- Arguments
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] opts
    opts - token - lock token
    opts - lockDuration
    opts - limiter
    opts - name - worker name
]]
local rcall = redis.call
local waitKey = KEYS[1]
local activeKey = KEYS[2]
local eventStreamKey = KEYS[4]
local rateLimiterKey = KEYS[6]
local delayedKey = KEYS[7]
local opts = cmsgpack.unpack(ARGV[3])
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,
    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  -- get a lock
  if opts['token'] ~= "0" then
    local lockKey = jobKey .. ':lock'
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  local optionalValues = {}
  if opts['name'] then
    -- Set "processedBy" field to the worker name
    table.insert(optionalValues, "pb")
    table.insert(optionalValues, opts['name'])
  end
  rcall("XADD", eventStreamKey, "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HMSET", jobKey, "processedOn", processedOn, unpack(optionalValues))
  rcall("HINCRBY", jobKey, "ats", 1)
  addBaseMarkerIfNeeded(markerKey, false)
  -- rate limit delay must be 0 in this case to prevent adding more delay
  -- when job that is moved to active needs to be processed
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
local target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(KEYS[9],
    activeKey, waitKey, KEYS[8])
-- Check if there are delayed jobs that we can move to wait.
local markerKey = KEYS[11]
promoteDelayedJobs(delayedKey, markerKey, target, KEYS[3], eventStreamKey, ARGV[1],
                   ARGV[2], KEYS[10], isPausedOrMaxed)
local maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))
local expireTime = getRateLimitTTL(maxJobs, rateLimiterKey)
-- Check if we are rate limited first.
if expireTime > 0 then return {0, 0, expireTime, 0} end
-- paused or maxed queue
if isPausedOrMaxed then return {0, 0, 0, 0} end
local limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration
-- no job ID, try non-blocking move from wait to active
local jobId = rcall("RPOPLPUSH", waitKey, activeKey)
-- Markers in waitlist DEPRECATED in v5: Will be completely removed in v6.
if jobId and string.sub(jobId, 1, 2) == "0:" then
    rcall("LREM", activeKey, 1, jobId)
    jobId = rcall("RPOPLPUSH", waitKey, activeKey)
end
if jobId then
    return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],
                                   maxJobs, limiterDuration, markerKey, opts)
else
    jobId = moveJobFromPrioritizedToActive(KEYS[3], activeKey, KEYS[10])
    if jobId then
        return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],
                                       maxJobs, limiterDuration, markerKey, opts)
    end
end
-- Return the timestamp for the next delayed job if any.
local nextTimestamp = getNextDelayedTimestamp(delayedKey)
if nextTimestamp ~= nil then return {0, 0, 0, nextTimestamp} end
return {0, 0, 0, 0}
`;NB.moveToActive={name:"moveToActive",content:Lar,keys:11}});var yWe=b(FB=>{"use strict";Object.defineProperty(FB,"__esModule",{value:!0});FB.moveToDelayed=void 0;var jar=`--[[
  Moves job from active to delayed set.
  Input:
    KEYS[1] marker key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] delayed key
    KEYS[5] job key
    KEYS[6] events stream
    KEYS[7] meta key
    KEYS[8] stalled key
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] the id of the job
    ARGV[4] queue token
    ARGV[5] delay value
    ARGV[6] skip attempt
    ARGV[7] optional job fields to update
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in active set.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local jobKey = KEYS[5]
local metaKey = KEYS[7]
local token = ARGV[4] 
if rcall("EXISTS", jobKey) == 1 then
    local errorCode = removeLock(jobKey, KEYS[8], token, ARGV[3])
    if errorCode < 0 then
        return errorCode
    end
    updateJobFields(jobKey, ARGV[7])
    local delayedKey = KEYS[4]
    local jobId = ARGV[3]
    local delay = tonumber(ARGV[5])
    local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
    if numRemovedElements < 1 then return -3 end
    local score, delayedTimestamp = getDelayedScore(delayedKey, ARGV[2], delay)
    if ARGV[6] == "0" then
        rcall("HINCRBY", jobKey, "atm", 1)
    end
    rcall("HSET", jobKey, "delay", ARGV[5])
    local maxEvents = getOrSetMaxEvents(metaKey)
    rcall("ZADD", delayedKey, score, jobId)
    rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "delayed",
          "jobId", jobId, "delay", delayedTimestamp)
    -- Check if we need to push a marker job to wake up sleeping workers.
    local markerKey = KEYS[1]
    addDelayMarkerIfNeeded(markerKey, delayedKey)
    return 0
else
    return -1
end
`;FB.moveToDelayed={name:"moveToDelayed",content:jar,keys:8}});var gWe=b(BB=>{"use strict";Object.defineProperty(BB,"__esModule",{value:!0});BB.moveToFinished=void 0;var $ar=`--[[
  Move job from active to a finished status (completed o failed)
  A job can only be moved to completed if it was active.
  The job must be locked before it can be moved to a finished status,
  and the lock must be released in this script.
    Input:
      KEYS[1] wait key
      KEYS[2] active key
      KEYS[3] prioritized key
      KEYS[4] event stream key
      KEYS[5] stalled key
      -- Rate limiting
      KEYS[6] rate limiter key
      KEYS[7] delayed key
      KEYS[8] paused key
      KEYS[9] meta key
      KEYS[10] pc priority counter
      KEYS[11] completed/failed key
      KEYS[12] jobId key
      KEYS[13] metrics key
      KEYS[14] marker key
      ARGV[1]  jobId
      ARGV[2]  timestamp
      ARGV[3]  msg property returnvalue / failedReason
      ARGV[4]  return value / failed reason
      ARGV[5]  target (completed/failed)
      ARGV[6]  fetch next?
      ARGV[7]  keys prefix
      ARGV[8]  opts
      ARGV[9]  job fields to update
      opts - token - lock token
      opts - keepJobs
      opts - lockDuration - lock duration in milliseconds
      opts - attempts max attempts
      opts - maxMetricsSize
      opts - fpof - fail parent on fail
      opts - cpof - continue parent on fail
      opts - idof - ignore dependency on fail
      opts - rdof - remove dependency on fail
      opts - name - worker name
    Output:
      0 OK
      -1 Missing key.
      -2 Missing lock.
      -3 Job not in active set
      -4 Job has pending children
      -6 Lock is not owned by this client
      -9 Job has failed children
    Events:
      'completed/failed'
]]
local rcall = redis.call
--- Includes
--[[
  Functions to collect metrics based on a current and previous count of jobs.
  Granualarity is fixed at 1 minute.
]]
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
local function collectMetrics(metaKey, dataPointsList, maxDataPoints,
                                 timestamp)
    -- Increment current count
    local count = rcall("HINCRBY", metaKey, "count", 1) - 1
    -- Compute how many data points we need to add to the list, N.
    local prevTS = rcall("HGET", metaKey, "prevTS")
    if not prevTS then
        -- If prevTS is nil, set it to the current timestamp
        rcall("HSET", metaKey, "prevTS", timestamp, "prevCount", 0)
        return
    end
    local N = math.min(math.floor(timestamp / 60000) - math.floor(prevTS / 60000), tonumber(maxDataPoints))
    if N > 0 then
        local delta = count - rcall("HGET", metaKey, "prevCount")
        -- If N > 1, add N-1 zeros to the list
        if N > 1 then
            local points = {}
            points[1] = delta
            for i = 2, N do
                points[i] = 0
            end
            for from, to in batches(#points, 7000) do
                rcall("LPUSH", dataPointsList, unpack(points, from, to))
            end
        else
            -- LPUSH delta to the list
            rcall("LPUSH", dataPointsList, delta)
        end
        -- LTRIM to keep list to its max size
        rcall("LTRIM", dataPointsList, 0, maxDataPoints - 1)
        -- update prev count with current count
        rcall("HSET", metaKey, "prevCount", count, "prevTS", timestamp)
    end
end
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to recursively move from waitingChildren to failed.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local handleChildFailureAndMoveParentToWait = function (parentQueueKey, parentKey, parentId, jobIdKey, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    local parentDelayedKey = parentQueueKey .. ":delayed"
    local parentWaitingChildrenOrDelayedKey
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then
      parentWaitingChildrenOrDelayedKey = parentWaitingChildrenKey
    elseif rcall("ZSCORE", parentDelayedKey, parentId) then
      parentWaitingChildrenOrDelayedKey = parentDelayedKey
      rcall("HSET", parentKey, "delay", 0)
    end
    if parentWaitingChildrenOrDelayedKey then
      rcall("ZREM", parentWaitingChildrenOrDelayedKey, parentId)
      local deferredFailure = "child " .. jobIdKey .. " failed"
      rcall("HSET", parentKey, "defa", deferredFailure)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    else
      if not rcall("ZSCORE", parentQueueKey .. ":failed", parentId) then
        local deferredFailure = "child " .. jobIdKey .. " failed"
        rcall("HSET", parentKey, "defa", deferredFailure)
      end
    end
  end
end
local moveChildFromDependenciesIfNeeded = function (rawParentData, childKey, failedReason, timestamp)
  if rawParentData then
    local parentData = cjson.decode(rawParentData)
    local parentKey = parentData['queueKey'] .. ':' .. parentData['id']
    local parentDependenciesChildrenKey = parentKey .. ":dependencies"
    if parentData['fpof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        local parentUnsuccessfulChildrenKey = parentKey .. ":unsuccessful"
        rcall("ZADD", parentUnsuccessfulChildrenKey, timestamp, childKey)
        handleChildFailureAndMoveParentToWait(
          parentData['queueKey'],
          parentKey,
          parentData['id'],
          childKey,
          timestamp
        )
      end
    elseif parentData['cpof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        local parentFailedChildrenKey = parentKey .. ":failed"
        rcall("HSET", parentFailedChildrenKey, childKey, failedReason)
        moveParentToWaitIfNeeded(parentData['queueKey'], parentKey, parentData['id'], timestamp)
      end
    elseif parentData['idof'] or parentData['rdof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        moveParentToWaitIfNoPendingDependencies(parentData['queueKey'], parentDependenciesChildrenKey,
          parentKey, parentData['id'], timestamp)
        if parentData['idof'] then
          local parentFailedChildrenKey = parentKey .. ":failed"
          rcall("HSET", parentFailedChildrenKey, childKey, failedReason)
        end
      end
    end
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
local function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,
    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  -- get a lock
  if opts['token'] ~= "0" then
    local lockKey = jobKey .. ':lock'
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  local optionalValues = {}
  if opts['name'] then
    -- Set "processedBy" field to the worker name
    table.insert(optionalValues, "pb")
    table.insert(optionalValues, opts['name'])
  end
  rcall("XADD", eventStreamKey, "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HMSET", jobKey, "processedOn", processedOn, unpack(optionalValues))
  rcall("HINCRBY", jobKey, "ats", 1)
  addBaseMarkerIfNeeded(markerKey, false)
  -- rate limit delay must be 0 in this case to prevent adding more delay
  -- when job that is moved to active needs to be processed
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
--[[
  Function to remove deduplication key if needed
  when a job is moved to completed or failed states.
]]
local function removeDeduplicationKeyIfNeededOnFinalization(prefixKey,
  deduplicationId, jobId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local pttl = rcall("PTTL", deduplicationKey)
    if pttl == 0 then
      return rcall("DEL", deduplicationKey)
    end
    if pttl == -1 then
      local currentJobId = rcall('GET', deduplicationKey)
      if currentJobId and currentJobId == jobId then
        return rcall("DEL", deduplicationKey)
      end
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Functions to remove jobs by max age.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix, maxLimit)
  local start = timestamp - maxAge * 1000
  local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf", "LIMIT", 0, maxLimit)
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix, false --[[remove debounce key]])
  end
  rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)
end
--[[
  Functions to remove jobs by max count.
]]
-- Includes
local function removeJobsByMaxCount(maxCount, targetSet, prefix)
  local start = maxCount
  local jobIds = rcall("ZREVRANGE", targetSet, start, -1)
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix, false --[[remove debounce key]])
  end
  rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1))
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to trim events, default 10000.
]]
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = getOrSetMaxEvents(metaKey)
  if maxEvents then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local jobIdKey = KEYS[12]
if rcall("EXISTS", jobIdKey) == 1 then -- Make sure job exists
    -- Make sure it does not have pending dependencies
    -- It must happen before removing lock
    if ARGV[5] == "completed" then
        if rcall("SCARD", jobIdKey .. ":dependencies") ~= 0 then
            return -4
        end
        if rcall("ZCARD", jobIdKey .. ":unsuccessful") ~= 0 then
            return -9
        end
    end
    local opts = cmsgpack.unpack(ARGV[8])
    local token = opts['token']
    local errorCode = removeLock(jobIdKey, KEYS[5], token, ARGV[1])
    if errorCode < 0 then
        return errorCode
    end
    updateJobFields(jobIdKey, ARGV[9]);
    local attempts = opts['attempts']
    local maxMetricsSize = opts['maxMetricsSize']
    local maxCount = opts['keepJobs']['count']
    local maxAge = opts['keepJobs']['age']
    local maxLimit = opts['keepJobs']['limit'] or 1000
    local jobAttributes = rcall("HMGET", jobIdKey, "parentKey", "parent", "deid")
    local parentKey = jobAttributes[1] or ""
    local parentId = ""
    local parentQueueKey = ""
    if jobAttributes[2] then -- TODO: need to revisit this logic if it's still needed
        local jsonDecodedParent = cjson.decode(jobAttributes[2])
        parentId = jsonDecodedParent['id']
        parentQueueKey = jsonDecodedParent['queueKey']
    end
    local jobId = ARGV[1]
    local timestamp = ARGV[2]
    -- Remove from active list (if not active we shall return error)
    local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
    if (numRemovedElements < 1) then
        return -3
    end
    local eventStreamKey = KEYS[4]
    local metaKey = KEYS[9]
    -- Trim events before emiting them to avoid trimming events emitted in this script
    trimEvents(metaKey, eventStreamKey)
    local prefix = ARGV[7]
    removeDeduplicationKeyIfNeededOnFinalization(prefix, jobAttributes[3], jobId)
    -- If job has a parent we need to
    -- 1) remove this job id from parents dependencies
    -- 2) move the job Id to parent "processed" set
    -- 3) push the results into parent "results" list
    -- 4) if parent's dependencies is empty, then move parent to "wait/paused". Note it may be a different queue!.
    if parentId == "" and parentKey ~= "" then
        parentId = getJobIdFromKey(parentKey)
        parentQueueKey = getJobKeyPrefix(parentKey, ":" .. parentId)
    end
    if parentId ~= "" then
        if ARGV[5] == "completed" then
            local dependenciesSet = parentKey .. ":dependencies"
            if rcall("SREM", dependenciesSet, jobIdKey) == 1 then
                updateParentDepsIfNeeded(parentKey, parentQueueKey, dependenciesSet, parentId, jobIdKey, ARGV[4],
                    timestamp)
            end
        else
            moveChildFromDependenciesIfNeeded(jobAttributes[2], jobIdKey, ARGV[4], timestamp)
        end
    end
    local attemptsMade = rcall("HINCRBY", jobIdKey, "atm", 1)
    -- Remove job?
    if maxCount ~= 0 then
        local targetSet = KEYS[11]
        -- Add to complete/failed set
        rcall("ZADD", targetSet, timestamp, jobId)
        rcall("HSET", jobIdKey, ARGV[3], ARGV[4], "finishedOn", timestamp)
        -- "returnvalue" / "failedReason" and "finishedOn"
        if ARGV[5] == "failed" then
            rcall("HDEL", jobIdKey, "defa")
        end
        -- Remove old jobs?
        if maxAge ~= nil then
            removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix, maxLimit)
        end
        if maxCount ~= nil and maxCount > 0 then
            removeJobsByMaxCount(maxCount, targetSet, prefix)
        end
    else
        removeJobKeys(jobIdKey)
        if parentKey ~= "" then
            -- TODO: when a child is removed when finished, result or failure in parent
            -- must not be deleted, those value references should be deleted when the parent
            -- is deleted
            removeParentDependencyKey(jobIdKey, false, parentKey, jobAttributes[3])
        end
    end
    rcall("XADD", eventStreamKey, "*", "event", ARGV[5], "jobId", jobId, ARGV[3], ARGV[4], "prev", "active")
    if ARGV[5] == "failed" then
        if tonumber(attemptsMade) >= tonumber(attempts) then
            rcall("XADD", eventStreamKey, "*", "event", "retries-exhausted", "jobId", jobId, "attemptsMade",
                attemptsMade)
        end
    end
    -- Collect metrics
    if maxMetricsSize ~= "" then
        collectMetrics(KEYS[13], KEYS[13] .. ':data', maxMetricsSize, timestamp)
    end
    -- Try to get next job to avoid an extra roundtrip if the queue is not closing,
    -- and not rate limited.
    if (ARGV[6] == "1") then
        local target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(metaKey, KEYS[2],
            KEYS[1], KEYS[8])
        local markerKey = KEYS[14]
        -- Check if there are delayed jobs that can be promoted
        promoteDelayedJobs(KEYS[7], markerKey, target, KEYS[3], eventStreamKey, prefix, timestamp, KEYS[10],
            isPausedOrMaxed)
        local maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))
        -- Check if we are rate limited first.
        local expireTime = getRateLimitTTL(maxJobs, KEYS[6])
        if expireTime > 0 then
            return {0, 0, expireTime, 0}
        end
        -- paused or maxed queue
        if isPausedOrMaxed then
            return {0, 0, 0, 0}
        end
        local limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration
        jobId = rcall("RPOPLPUSH", KEYS[1], KEYS[2])
        if jobId then
            -- Markers in waitlist DEPRECATED in v5: Remove in v6.
            if string.sub(jobId, 1, 2) == "0:" then
                rcall("LREM", KEYS[2], 1, jobId)
                -- If jobId is special ID 0:delay (delay greater than 0), then there is no job to process
                -- but if ID is 0:0, then there is at least 1 prioritized job to process
                if jobId == "0:0" then
                    jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])
                    return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                        limiterDuration, markerKey, opts)
                end
            else
                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                    limiterDuration, markerKey, opts)
            end
        else
            jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])
            if jobId then
                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                    limiterDuration, markerKey, opts)
            end
        end
        -- Return the timestamp for the next delayed job if any.
        local nextTimestamp = getNextDelayedTimestamp(KEYS[7])
        if nextTimestamp ~= nil then
            -- The result is guaranteed to be positive, since the
            -- ZRANGEBYSCORE command would have return a job otherwise.
            return {0, 0, 0, nextTimestamp}
        end
    end
    local waitLen = rcall("LLEN", KEYS[1])
    if waitLen == 0 then
        local activeLen = rcall("LLEN", KEYS[2])
        if activeLen == 0 then
            local prioritizedLen = rcall("ZCARD", KEYS[3])
            if prioritizedLen == 0 then
                rcall("XADD", eventStreamKey, "*", "event", "drained")
            end
        end
    end
    return 0
else
    return -1
end
`;BB.moveToFinished={name:"moveToFinished",content:$ar,keys:14}});var bWe=b(qB=>{"use strict";Object.defineProperty(qB,"__esModule",{value:!0});qB.moveToWaitingChildren=void 0;var Uar=`--[[
  Moves job from active to waiting children set.
  Input:
    KEYS[1] active key
    KEYS[2] wait-children key
    KEYS[3] job key
    KEYS[4] job dependencies key
    KEYS[5] job unsuccessful key
    KEYS[6] stalled key
    KEYS[7] events key
    ARGV[1] token
    ARGV[2] child key
    ARGV[3] timestamp
    ARGV[4] jobId
    ARGV[5] prefix
  Output:
    0 - OK
    1 - There are not pending dependencies.
   -1 - Missing job.
   -2 - Missing lock
   -3 - Job not in active set
   -9 - Job has failed children
]]
local rcall = redis.call
local activeKey = KEYS[1]
local waitingChildrenKey = KEYS[2]
local jobKey = KEYS[3]
local jobDependenciesKey = KEYS[4]
local jobUnsuccessfulKey = KEYS[5]
local stalledKey = KEYS[6]
local eventStreamKey = KEYS[7]
local token = ARGV[1]
local timestamp = ARGV[3]
local jobId = ARGV[4]
--- Includes
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
local function removeJobFromActive(activeKey, stalledKey, jobKey, jobId,
    token)
  local errorCode = removeLock(jobKey, stalledKey, token, jobId)
  if errorCode < 0 then
    return errorCode
  end
  local numRemovedElements = rcall("LREM", activeKey, -1, jobId)
  if numRemovedElements < 1 then
    return -3
  end
  return 0
end
local function moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
    jobKey, jobId, timestamp, token)
  local errorCode = removeJobFromActive(activeKey, stalledKey, jobKey, jobId, token)
  if errorCode < 0 then
    return errorCode
  end
  local score = tonumber(timestamp)
  rcall("ZADD", waitingChildrenKey, score, jobId)
  rcall("XADD", eventStreamKey, "*", "event", "waiting-children", "jobId", jobId, 'prev', 'active')
  return 0
end
if rcall("EXISTS", jobKey) == 1 then
  if rcall("ZCARD", jobUnsuccessfulKey) ~= 0 then
    return -9
  else
    if ARGV[2] ~= "" then
      if rcall("SISMEMBER", jobDependenciesKey, ARGV[2]) ~= 0 then
        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
          jobKey, jobId, timestamp, token)
      end
      return 1
    else
      if rcall("SCARD", jobDependenciesKey) ~= 0 then 
        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
          jobKey, jobId, timestamp, token)
      end
      return 1
    end    
  end
end
return -1
`;qB.moveToWaitingChildren={name:"moveToWaitingChildren",content:Uar,keys:7}});var _We=b(LB=>{"use strict";Object.defineProperty(LB,"__esModule",{value:!0});LB.obliterate=void 0;var Kar=`--[[
  Completely obliterates a queue and all of its contents
  This command completely destroys a queue including all of its jobs, current or past 
  leaving no trace of its existence. Since this script needs to iterate to find all the job
  keys, consider that this call may be slow for very large queues.
  The queue needs to be "paused" or it will return an error
  If the queue has currently active jobs then the script by default will return error,
  however this behaviour can be overrided using the 'force' option.
  Input:
    KEYS[1] meta
    KEYS[2] base
    ARGV[1] count
    ARGV[2] force
]]
local maxCount = tonumber(ARGV[1])
local baseKey = KEYS[2]
local rcall = redis.call
-- Includes
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey, true --[[remove debounce key]])
  end
  return max - #keys
end
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to filter out jobs to ignore from a table.
]]
local function filterOutJobsToIgnore(jobs, jobsToIgnore)
  local filteredJobs = {}
  for i = 1, #jobs do
    if not jobsToIgnore[jobs[i]] then
      table.insert(filteredJobs, jobs[i])
    end
  end
  return filteredJobs
end
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getListItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getZSetItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
local function removeLockKeys(keys)
  for i, key in ipairs(keys) do
    rcall("DEL", baseKey .. key .. ':lock')
  end
end
-- 1) Check if paused, if not return with error.
if rcall("HEXISTS", KEYS[1], "paused") ~= 1 then
  return -1 -- Error, NotPaused
end
-- 2) Check if there are active jobs, if there are and not "force" return error.
local activeKey = baseKey .. 'active'
local activeJobs = getListItems(activeKey, maxCount)
if (#activeJobs > 0) then
  if(ARGV[2] == "") then 
    return -2 -- Error, ExistActiveJobs
  end
end
removeLockKeys(activeJobs)
maxCount = removeJobs(activeJobs, true, baseKey, maxCount)
rcall("LTRIM", activeKey, #activeJobs, -1)
if(maxCount <= 0) then
  return 1
end
local delayedKey = baseKey .. 'delayed'
maxCount = removeZSetJobs(delayedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local repeatKey = baseKey .. 'repeat'
local repeatJobsIds = getZSetItems(repeatKey, maxCount)
for i, key in ipairs(repeatJobsIds) do
  local jobKey = repeatKey .. ":" .. key
  rcall("DEL", jobKey)
end
if(#repeatJobsIds > 0) then
  for from, to in batches(#repeatJobsIds, 7000) do
    rcall("ZREM", repeatKey, unpack(repeatJobsIds, from, to))
  end
end
maxCount = maxCount - #repeatJobsIds
if(maxCount <= 0) then
  return 1
end
local completedKey = baseKey .. 'completed'
maxCount = removeZSetJobs(completedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local waitKey = baseKey .. 'paused'
maxCount = removeListJobs(waitKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local prioritizedKey = baseKey .. 'prioritized'
maxCount = removeZSetJobs(prioritizedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local failedKey = baseKey .. 'failed'
maxCount = removeZSetJobs(failedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
if(maxCount > 0) then
  rcall("DEL",
    baseKey .. 'events',
    baseKey .. 'delay',
    baseKey .. 'stalled-check',
    baseKey .. 'stalled',
    baseKey .. 'id',
    baseKey .. 'pc',
    baseKey .. 'marker',
    baseKey .. 'meta',
    baseKey .. 'metrics:completed',
    baseKey .. 'metrics:completed:data',
    baseKey .. 'metrics:failed',
    baseKey .. 'metrics:failed:data')
  return 0
else
  return 1
end
`;LB.obliterate={name:"obliterate",content:Kar,keys:2}});var EWe=b(jB=>{"use strict";Object.defineProperty(jB,"__esModule",{value:!0});jB.paginate=void 0;var Var=`--[[
    Paginate a set or hash
    Input:
      KEYS[1] key pointing to the set or hash to be paginated.
      ARGV[1]  page start offset
      ARGV[2]  page end offset (-1 for all the elements)
      ARGV[3]  cursor
      ARGV[4]  offset
      ARGV[5]  max iterations
      ARGV[6]  fetch jobs?
    Output:
      [cursor, offset, items, numItems]
]]
local rcall = redis.call
-- Includes
--[[
  Function to achieve pagination for a set or hash.
  This function simulates pagination in the most efficient way possible
  for a set using sscan or hscan.
  The main limitation is that sets are not order preserving, so the
  pagination is not stable. This means that if the set is modified
  between pages, the same element may appear in different pages.
]] -- Maximum number of elements to be returned by sscan per iteration.
local maxCount = 100
-- Finds the cursor, and returns the first elements available for the requested page.
local function findPage(key, command, pageStart, pageSize, cursor, offset,
                        maxIterations, fetchJobs)
    local items = {}
    local jobs = {}
    local iterations = 0
    repeat
        -- Iterate over the set using sscan/hscan.
        local result = rcall(command, key, cursor, "COUNT", maxCount)
        cursor = result[1]
        local members = result[2]
        local step = 1
        if command == "HSCAN" then
            step = 2
        end
        if #members == 0 then
            -- If the result is empty, we can return the result.
            return cursor, offset, items, jobs
        end
        local chunkStart = offset
        local chunkEnd = offset + #members / step
        local pageEnd = pageStart + pageSize
        if chunkEnd < pageStart then
            -- If the chunk is before the page, we can skip it.
            offset = chunkEnd
        elseif chunkStart > pageEnd then
            -- If the chunk is after the page, we can return the result.
            return cursor, offset, items, jobs
        else
            -- If the chunk is overlapping the page, we need to add the elements to the result.
            for i = 1, #members, step do
                if offset >= pageEnd then
                    return cursor, offset, items, jobs
                end
                if offset >= pageStart then
                    local index = #items + 1
                    if fetchJobs ~= nil then
                        jobs[#jobs+1] = rcall("HGETALL", members[i])
                    end
                    if step == 2 then
                        items[index] = {members[i], members[i + 1]}
                    else
                        items[index] = members[i]
                    end
                end
                offset = offset + 1
            end
        end
        iterations = iterations + 1
    until cursor == "0" or iterations >= maxIterations
    return cursor, offset, items, jobs
end
local key = KEYS[1]
local scanCommand = "SSCAN"
local countCommand = "SCARD"
local type = rcall("TYPE", key)["ok"]
if type == "none" then
    return {0, 0, {}, 0}
elseif type == "hash" then
    scanCommand = "HSCAN"
    countCommand = "HLEN"
elseif type ~= "set" then
    return
        redis.error_reply("Pagination is only supported for sets and hashes.")
end
local numItems = rcall(countCommand, key)
local startOffset = tonumber(ARGV[1])
local endOffset = tonumber(ARGV[2])
if endOffset == -1 then 
  endOffset = numItems
end
local pageSize = (endOffset - startOffset) + 1
local cursor, offset, items, jobs = findPage(key, scanCommand, startOffset,
                                       pageSize, ARGV[3], tonumber(ARGV[4]),
                                       tonumber(ARGV[5]), ARGV[6])
return {cursor, offset, items, numItems, jobs}
`;jB.paginate={name:"paginate",content:Var,keys:1}});var vWe=b($B=>{"use strict";Object.defineProperty($B,"__esModule",{value:!0});$B.pause=void 0;var Gar=`--[[
  Pauses or resumes a queue globably.
  Input:
    KEYS[1] 'wait' or 'paused''
    KEYS[2] 'paused' or 'wait'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] events stream key
    KEYS[6] 'delayed'
    KEYS|7] 'marker'
    ARGV[1] 'paused' or 'resumed'
  Event:
    publish paused or resumed event.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
local markerKey = KEYS[7]
local hasJobs = rcall("EXISTS", KEYS[1]) == 1
--TODO: check this logic to be reused when changing a delay
if hasJobs then rcall("RENAME", KEYS[1], KEYS[2]) end
if ARGV[1] == "paused" then
    rcall("HSET", KEYS[3], "paused", 1)
    rcall("DEL", markerKey)
else
    rcall("HDEL", KEYS[3], "paused")
    if hasJobs or rcall("ZCARD", KEYS[4]) > 0 then
        -- Add marker if there are waiting or priority jobs
        rcall("ZADD", markerKey, 0, "0")
    else
        addDelayMarkerIfNeeded(markerKey, KEYS[6])
    end
end
rcall("XADD", KEYS[5], "*", "event", ARGV[1]);
`;$B.pause={name:"pause",content:Gar,keys:7}});var SWe=b(UB=>{"use strict";Object.defineProperty(UB,"__esModule",{value:!0});UB.promote=void 0;var Har=`--[[
  Promotes a job that is currently "delayed" to the "waiting" state
    Input:
      KEYS[1] 'delayed'
      KEYS[2] 'wait'
      KEYS[3] 'paused'
      KEYS[4] 'meta'
      KEYS[5] 'prioritized'
      KEYS[6] 'active'
      KEYS[7] 'pc' priority counter
      KEYS[8] 'event stream'
      KEYS[9] 'marker'
      ARGV[1]  queue.toKey('')
      ARGV[2]  jobId
    Output:
       0 - OK
      -3 - Job not in delayed zset.
    Events:
      'waiting'
]]
local rcall = redis.call
local jobId = ARGV[2]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
if rcall("ZREM", KEYS[1], jobId) == 1 then
    local jobKey = ARGV[1] .. jobId
    local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
    local metaKey = KEYS[4]
    local markerKey = KEYS[9]
    -- Remove delayed "marker" from the wait list if there is any.
    -- Since we are adding a job we do not need the marker anymore.
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[6], KEYS[2], KEYS[3])
    local marker = rcall("LINDEX", target, 0)
    if marker and string.sub(marker, 1, 2) == "0:" then rcall("LPOP", target) end
    if priority == 0 then
        -- LIFO or FIFO
        addJobInTargetList(target, markerKey, "LPUSH", isPausedOrMaxed, jobId)
    else
        addJobWithPriority(markerKey, KEYS[5], priority, jobId, KEYS[7], isPausedOrMaxed)
    end
    rcall("XADD", KEYS[8], "*", "event", "waiting", "jobId", jobId, "prev",
          "delayed");
    rcall("HSET", jobKey, "delay", 0)
    return 0
else
    return -3
end
`;UB.promote={name:"promote",content:Har,keys:9}});var wWe=b(KB=>{"use strict";Object.defineProperty(KB,"__esModule",{value:!0});KB.releaseLock=void 0;var zar=`--[[
  Release lock
    Input:
      KEYS[1] 'lock',
      ARGV[1]  token
      ARGV[2]  lock duration in milliseconds
    Output:
      "OK" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  return rcall("DEL", KEYS[1])
else
  return 0
end
`;KB.releaseLock={name:"releaseLock",content:zar,keys:1}});var AWe=b(VB=>{"use strict";Object.defineProperty(VB,"__esModule",{value:!0});VB.removeChildDependency=void 0;var War=`--[[
  Break parent-child dependency by removing
  child reference from parent
  Input:
    KEYS[1] 'key' prefix,
    ARGV[1] job key
    ARGV[2] parent key
    Output:
       0  - OK
       1  - There is not relationship.
      -1  - Missing job key
      -5  - Missing parent key
]]
local rcall = redis.call
local jobKey = ARGV[1]
local parentKey = ARGV[2]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
if rcall("EXISTS", jobKey) ~= 1 then return -1 end
if rcall("EXISTS", parentKey) ~= 1 then return -5 end
if removeParentDependencyKey(jobKey, false, parentKey, KEYS[1], nil) then
  rcall("HDEL", jobKey, "parentKey", "parent")
  return 0
else
  return 1
end`;VB.removeChildDependency={name:"removeChildDependency",content:War,keys:1}});var CWe=b(GB=>{"use strict";Object.defineProperty(GB,"__esModule",{value:!0});GB.removeDeduplicationKey=void 0;var Jar=`--[[
  Remove deduplication key if it matches the job id.
  Input:
    KEYS[1] deduplication key
    ARGV[1] job id
  Output:
    0 - false
    1 - true
]]
local rcall = redis.call
local deduplicationKey = KEYS[1]
local jobId = ARGV[1]
local currentJobId = rcall('GET', deduplicationKey)
if currentJobId and currentJobId == jobId then
  return rcall("DEL", deduplicationKey)
end
return 0
`;GB.removeDeduplicationKey={name:"removeDeduplicationKey",content:Jar,keys:1}});var TWe=b(HB=>{"use strict";Object.defineProperty(HB,"__esModule",{value:!0});HB.removeJob=void 0;var Yar=`--[[
    Remove a job from all the statuses it may be in as well as all its data.
    In order to be able to remove a job, it cannot be active.
    Input:
      KEYS[1] jobKey
      KEYS[2] repeat key
      ARGV[1] jobId
      ARGV[2] remove children
      ARGV[3] queue prefix
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to recursively check if there are no locks
  on the jobs to be removed.
  returns:
    boolean
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function isLocked( prefix, jobId, removeChildren)
  local jobKey = prefix .. jobId;
  -- Check if this job is locked
  local lockKey = jobKey .. ':lock'
  local lock = rcall("GET", lockKey)
  if not lock then
    if removeChildren == "1" then
      local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
      if (#dependencies > 0) then
        for i, childJobKey in ipairs(dependencies) do
          -- We need to get the jobId for this job.
          local childJobId = getJobIdFromKey(childJobKey)
          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
          local result = isLocked( childJobPrefix, childJobId, removeChildren )
          if result then
            return true
          end
        end
      end
    end
    return false
  end
  return true
end
--[[
    Remove a job from all the statuses it may be in as well as all its data,
    including its children. Active children can be ignored.
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove from any state.
  returns:
    prev state
]]
local function removeJobFromAnyState( prefix, jobId)
  -- We start with the ZSCORE checks, since they have O(1) complexity
  if rcall("ZSCORE", prefix .. "completed", jobId) then
    rcall("ZREM", prefix .. "completed", jobId)
    return "completed"
  elseif rcall("ZSCORE", prefix .. "waiting-children", jobId) then
    rcall("ZREM", prefix .. "waiting-children", jobId)
    return "waiting-children"
  elseif rcall("ZSCORE", prefix .. "delayed", jobId) then
    rcall("ZREM", prefix .. "delayed", jobId)
    return "delayed"
  elseif rcall("ZSCORE", prefix .. "failed", jobId) then
    rcall("ZREM", prefix .. "failed", jobId)
    return "failed"
  elseif rcall("ZSCORE", prefix .. "prioritized", jobId) then
    rcall("ZREM", prefix .. "prioritized", jobId)
    return "prioritized"
  -- We remove only 1 element from the list, since we assume they are not added multiple times
  elseif rcall("LREM", prefix .. "wait", 1, jobId) == 1 then
    return "wait"
  elseif rcall("LREM", prefix .. "paused", 1, jobId) == 1 then
    return "paused"
  elseif rcall("LREM", prefix .. "active", 1, jobId) == 1 then
    return "active"
  end
  return "unknown"
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local removeJobChildren
local removeJobWithChildren
removeJobChildren = function(prefix, jobKey, options)
    -- Check if this job has children
    -- If so, we are going to try to remove the children recursively in a depth-first way
    -- because if some job is locked, we must exit with an error.
    if not options.ignoreProcessed then
        local processed = rcall("HGETALL", jobKey .. ":processed")
        if #processed > 0 then
            for i = 1, #processed, 2 do
                local childJobId = getJobIdFromKey(processed[i])
                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local failed = rcall("HGETALL", jobKey .. ":failed")
        if #failed > 0 then
            for i = 1, #failed, 2 do
                local childJobId = getJobIdFromKey(failed[i])
                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local unsuccessful = rcall("ZRANGE", jobKey .. ":unsuccessful", 0, -1)
        if #unsuccessful > 0 then
            for i = 1, #unsuccessful, 1 do
                local childJobId = getJobIdFromKey(unsuccessful[i])
                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
    end
    local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
    if #dependencies > 0 then
        for i, childJobKey in ipairs(dependencies) do
            local childJobId = getJobIdFromKey(childJobKey)
            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
        end
    end
end
removeJobWithChildren = function(prefix, jobId, parentKey, options)
    local jobKey = prefix .. jobId
    if options.ignoreLocked then
        if isLocked(prefix, jobId) then
            return
        end
    end
    -- Check if job is in the failed zset
    local failedSet = prefix .. "failed"
    if not (options.ignoreProcessed and rcall("ZSCORE", failedSet, jobId)) then
        removeParentDependencyKey(jobKey, false, parentKey, nil)
        if options.removeChildren then
            removeJobChildren(prefix, jobKey, options)
        end
        local prev = removeJobFromAnyState(prefix, jobId)
        local deduplicationId = rcall("HGET", jobKey, "deid")
        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobId, deduplicationId)
        if removeJobKeys(jobKey) > 0 then
            local metaKey = prefix .. "meta"
            local maxEvents = getOrSetMaxEvents(metaKey)
            rcall("XADD", prefix .. "events", "MAXLEN", "~", maxEvents, "*", "event", "removed",
                "jobId", jobId, "prev", prev)
        end
    end
end
local jobId = ARGV[1]
local shouldRemoveChildren = ARGV[2]
local prefix = ARGV[3]
local jobKey = KEYS[1]
local repeatKey = KEYS[2]
if isJobSchedulerJob(jobId, jobKey, repeatKey) then
    return -8
end
if not isLocked(prefix, jobId, shouldRemoveChildren) then
    local options = {
        removeChildren = shouldRemoveChildren == "1",
        ignoreProcessed = false,
        ignoreLocked = false
    }
    removeJobWithChildren(prefix, jobId, nil, options)
    return 1
end
return 0
`;HB.removeJob={name:"removeJob",content:Yar,keys:2}});var OWe=b(zB=>{"use strict";Object.defineProperty(zB,"__esModule",{value:!0});zB.removeJobScheduler=void 0;var Qar=`--[[
  Removes a job scheduler and its next scheduled job.
  Input:
    KEYS[1] job schedulers key
    KEYS[2] delayed jobs key
    KEYS[3] events key
    ARGV[1] job scheduler id
    ARGV[2] prefix key
  Output:
    0 - OK
    1 - Missing repeat job
  Events:
    'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local jobSchedulerId = ARGV[1]
local prefix = ARGV[2]
local millis = rcall("ZSCORE", KEYS[1], jobSchedulerId)
if millis then
  -- Delete next programmed job.
  local delayedJobId = "repeat:" .. jobSchedulerId .. ":" .. millis
  if(rcall("ZREM", KEYS[2], delayedJobId) == 1) then
    removeJobKeys(prefix .. delayedJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", delayedJobId, "prev", "delayed")
  end
end
if(rcall("ZREM", KEYS[1], jobSchedulerId) == 1) then
  rcall("DEL", KEYS[1] .. ":" .. jobSchedulerId)
  return 0
end
return 1
`;zB.removeJobScheduler={name:"removeJobScheduler",content:Qar,keys:3}});var xWe=b(WB=>{"use strict";Object.defineProperty(WB,"__esModule",{value:!0});WB.removeRepeatable=void 0;var Xar=`--[[
  Removes a repeatable job
  Input:
    KEYS[1] repeat jobs key
    KEYS[2] delayed jobs key
    KEYS[3] events key
    ARGV[1] old repeat job id
    ARGV[2] options concat
    ARGV[3] repeat job key
    ARGV[4] prefix key
  Output:
    0 - OK
    1 - Missing repeat job
  Events:
    'removed'
]]
local rcall = redis.call
local millis = rcall("ZSCORE", KEYS[1], ARGV[2])
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
-- legacy removal TODO: remove in next breaking change
if millis then
  -- Delete next programmed job.
  local repeatJobId = ARGV[1] .. millis
  if(rcall("ZREM", KEYS[2], repeatJobId) == 1) then
    removeJobKeys(ARGV[4] .. repeatJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", repeatJobId, "prev", "delayed");
  end
end
if(rcall("ZREM", KEYS[1], ARGV[2]) == 1) then
  return 0
end
-- new removal
millis = rcall("ZSCORE", KEYS[1], ARGV[3])
if millis then
  -- Delete next programmed job.
  local repeatJobId = "repeat:" .. ARGV[3] .. ":" .. millis
  if(rcall("ZREM", KEYS[2], repeatJobId) == 1) then
    removeJobKeys(ARGV[4] .. repeatJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", repeatJobId, "prev", "delayed")
  end
end
if(rcall("ZREM", KEYS[1], ARGV[3]) == 1) then
  rcall("DEL", KEYS[1] .. ":" .. ARGV[3])
  return 0
end
return 1
`;WB.removeRepeatable={name:"removeRepeatable",content:Xar,keys:3}});var IWe=b(JB=>{"use strict";Object.defineProperty(JB,"__esModule",{value:!0});JB.removeUnprocessedChildren=void 0;var Zar=`--[[
    Remove a job from all the statuses it may be in as well as all its data.
    In order to be able to remove a job, it cannot be active.
    Input:
      KEYS[1] jobKey
      KEYS[2] meta key
      ARGV[1] prefix
      ARGV[2] jobId
    Events:
      'removed' for every children removed
]]
-- Includes
--[[
    Remove a job from all the statuses it may be in as well as all its data,
    including its children. Active children can be ignored.
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove from any state.
  returns:
    prev state
]]
local function removeJobFromAnyState( prefix, jobId)
  -- We start with the ZSCORE checks, since they have O(1) complexity
  if rcall("ZSCORE", prefix .. "completed", jobId) then
    rcall("ZREM", prefix .. "completed", jobId)
    return "completed"
  elseif rcall("ZSCORE", prefix .. "waiting-children", jobId) then
    rcall("ZREM", prefix .. "waiting-children", jobId)
    return "waiting-children"
  elseif rcall("ZSCORE", prefix .. "delayed", jobId) then
    rcall("ZREM", prefix .. "delayed", jobId)
    return "delayed"
  elseif rcall("ZSCORE", prefix .. "failed", jobId) then
    rcall("ZREM", prefix .. "failed", jobId)
    return "failed"
  elseif rcall("ZSCORE", prefix .. "prioritized", jobId) then
    rcall("ZREM", prefix .. "prioritized", jobId)
    return "prioritized"
  -- We remove only 1 element from the list, since we assume they are not added multiple times
  elseif rcall("LREM", prefix .. "wait", 1, jobId) == 1 then
    return "wait"
  elseif rcall("LREM", prefix .. "paused", 1, jobId) == 1 then
    return "paused"
  elseif rcall("LREM", prefix .. "active", 1, jobId) == 1 then
    return "active"
  end
  return "unknown"
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
--[[
  Function to recursively check if there are no locks
  on the jobs to be removed.
  returns:
    boolean
]]
local function isLocked( prefix, jobId, removeChildren)
  local jobKey = prefix .. jobId;
  -- Check if this job is locked
  local lockKey = jobKey .. ':lock'
  local lock = rcall("GET", lockKey)
  if not lock then
    if removeChildren == "1" then
      local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
      if (#dependencies > 0) then
        for i, childJobKey in ipairs(dependencies) do
          -- We need to get the jobId for this job.
          local childJobId = getJobIdFromKey(childJobKey)
          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
          local result = isLocked( childJobPrefix, childJobId, removeChildren )
          if result then
            return true
          end
        end
      end
    end
    return false
  end
  return true
end
local removeJobChildren
local removeJobWithChildren
removeJobChildren = function(prefix, jobKey, options)
    -- Check if this job has children
    -- If so, we are going to try to remove the children recursively in a depth-first way
    -- because if some job is locked, we must exit with an error.
    if not options.ignoreProcessed then
        local processed = rcall("HGETALL", jobKey .. ":processed")
        if #processed > 0 then
            for i = 1, #processed, 2 do
                local childJobId = getJobIdFromKey(processed[i])
                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local failed = rcall("HGETALL", jobKey .. ":failed")
        if #failed > 0 then
            for i = 1, #failed, 2 do
                local childJobId = getJobIdFromKey(failed[i])
                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local unsuccessful = rcall("ZRANGE", jobKey .. ":unsuccessful", 0, -1)
        if #unsuccessful > 0 then
            for i = 1, #unsuccessful, 1 do
                local childJobId = getJobIdFromKey(unsuccessful[i])
                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
    end
    local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
    if #dependencies > 0 then
        for i, childJobKey in ipairs(dependencies) do
            local childJobId = getJobIdFromKey(childJobKey)
            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
        end
    end
end
removeJobWithChildren = function(prefix, jobId, parentKey, options)
    local jobKey = prefix .. jobId
    if options.ignoreLocked then
        if isLocked(prefix, jobId) then
            return
        end
    end
    -- Check if job is in the failed zset
    local failedSet = prefix .. "failed"
    if not (options.ignoreProcessed and rcall("ZSCORE", failedSet, jobId)) then
        removeParentDependencyKey(jobKey, false, parentKey, nil)
        if options.removeChildren then
            removeJobChildren(prefix, jobKey, options)
        end
        local prev = removeJobFromAnyState(prefix, jobId)
        local deduplicationId = rcall("HGET", jobKey, "deid")
        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobId, deduplicationId)
        if removeJobKeys(jobKey) > 0 then
            local metaKey = prefix .. "meta"
            local maxEvents = getOrSetMaxEvents(metaKey)
            rcall("XADD", prefix .. "events", "MAXLEN", "~", maxEvents, "*", "event", "removed",
                "jobId", jobId, "prev", prev)
        end
    end
end
local prefix = ARGV[1]
local jobId = ARGV[2]
local jobKey = KEYS[1]
local metaKey = KEYS[2]
local options = {
  removeChildren = "1",
  ignoreProcessed = true,
  ignoreLocked = true
}
removeJobChildren(prefix, jobKey, options) 
`;JB.removeUnprocessedChildren={name:"removeUnprocessedChildren",content:Zar,keys:2}});var RWe=b(YB=>{"use strict";Object.defineProperty(YB,"__esModule",{value:!0});YB.reprocessJob=void 0;var eur=`--[[
  Attempts to reprocess a job
  Input:
    KEYS[1] job key
    KEYS[2] events stream
    KEYS[3] job state
    KEYS[4] wait key
    KEYS[5] meta
    KEYS[6] paused key
    KEYS[7] active key
    KEYS[8] marker key
    ARGV[1] job.id
    ARGV[2] (job.opts.lifo ? 'R' : 'L') + 'PUSH'
    ARGV[3] propVal - failedReason/returnvalue
    ARGV[4] prev state - failed/completed
    ARGV[5] reset attemptsMade - "1" or "0"
    ARGV[6] reset attemptsStarted - "1" or "0"
  Output:
     1 means the operation was a success
    -1 means the job does not exist
    -3 means the job was not found in the expected set.
]]
local rcall = redis.call;
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local jobKey = KEYS[1]
if rcall("EXISTS", jobKey) == 1 then
  local jobId = ARGV[1]
  if (rcall("ZREM", KEYS[3], jobId) == 1) then
    local attributesToRemove = {}
    if ARGV[5] == "1" then
      table.insert(attributesToRemove, "atm")
    end
    if ARGV[6] == "1" then
      table.insert(attributesToRemove, "ats")
    end
    rcall("HDEL", jobKey, "finishedOn", "processedOn", ARGV[3], unpack(attributesToRemove))
    local target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[7], KEYS[4], KEYS[6])
    addJobInTargetList(target, KEYS[8], ARGV[2], isPausedOrMaxed, jobId)
    local parentKey = rcall("HGET", jobKey, "parentKey")
    if parentKey and rcall("EXISTS", parentKey) == 1 then
      if ARGV[4] == "failed" then
        if rcall("ZREM", parentKey .. ":unsuccessful", jobKey) == 1 or
          rcall("ZREM", parentKey .. ":failed", jobKey) == 1 then
          rcall("SADD", parentKey .. ":dependencies", jobKey)
        end
      else
        if rcall("HDEL", parentKey .. ":processed", jobKey) == 1 then
          rcall("SADD", parentKey .. ":dependencies", jobKey)
        end
      end
    end
    local maxEvents = getOrSetMaxEvents(KEYS[5])
    -- Emit waiting event
    rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId, "prev", ARGV[4]);
    return 1
  else
    return -3
  end
else
  return -1
end
`;YB.reprocessJob={name:"reprocessJob",content:eur,keys:8}});var DWe=b(QB=>{"use strict";Object.defineProperty(QB,"__esModule",{value:!0});QB.retryJob=void 0;var tur=`--[[
  Retries a failed job by moving it back to the wait queue.
    Input:
      KEYS[1]  'active',
      KEYS[2]  'wait'
      KEYS[3]  'paused'
      KEYS[4]  job key
      KEYS[5]  'meta'
      KEYS[6]  events stream
      KEYS[7]  delayed key
      KEYS[8]  prioritized key
      KEYS[9]  'pc' priority counter
      KEYS[10] 'marker'
      KEYS[11] 'stalled'
      ARGV[1]  key prefix
      ARGV[2]  timestamp
      ARGV[3]  pushCmd
      ARGV[4]  jobId
      ARGV[5]  token
      ARGV[6]  optional job fields to update
    Events:
      'waiting'
    Output:
     0  - OK
     -1 - Missing key
     -2 - Missing lock
     -3 - Job not in active set
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[1], KEYS[2], KEYS[3])
local markerKey = KEYS[10]
-- Check if there are delayed jobs that we can move to wait.
-- test example: when there are delayed jobs between retries
promoteDelayedJobs(KEYS[7], markerKey, target, KEYS[8], KEYS[6], ARGV[1], ARGV[2], KEYS[9], isPausedOrMaxed)
local jobKey = KEYS[4]
if rcall("EXISTS", jobKey) == 1 then
  local errorCode = removeLock(jobKey, KEYS[11], ARGV[5], ARGV[4]) 
  if errorCode < 0 then
    return errorCode
  end
  updateJobFields(jobKey, ARGV[6])
  local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[4])
  if (numRemovedElements < 1) then return -3 end
  local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
  --need to re-evaluate after removing job from active
  isPausedOrMaxed = isQueuePausedOrMaxed(KEYS[5], KEYS[1])
  -- Standard or priority add
  if priority == 0 then
    addJobInTargetList(target, markerKey, ARGV[3], isPausedOrMaxed, ARGV[4])
  else
    addJobWithPriority(markerKey, KEYS[8], priority, ARGV[4], KEYS[9], isPausedOrMaxed)
  end
  rcall("HINCRBY", jobKey, "atm", 1)
  local maxEvents = getOrSetMaxEvents(KEYS[5])
  -- Emit waiting event
  rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", ARGV[4], "prev", "active")
  return 0
else
  return -1
end
`;QB.retryJob={name:"retryJob",content:tur,keys:11}});var kWe=b(XB=>{"use strict";Object.defineProperty(XB,"__esModule",{value:!0});XB.saveStacktrace=void 0;var rur=`--[[
  Save stacktrace and failedReason.
  Input:
    KEYS[1] job key
    ARGV[1]  stacktrace
    ARGV[2]  failedReason
  Output:
     0 - OK
    -1 - Missing key
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then
  rcall("HMSET", KEYS[1], "stacktrace", ARGV[1], "failedReason", ARGV[2])
  return 0
else
  return -1
end
`;XB.saveStacktrace={name:"saveStacktrace",content:rur,keys:1}});var MWe=b(ZB=>{"use strict";Object.defineProperty(ZB,"__esModule",{value:!0});ZB.updateData=void 0;var nur=`--[[
  Update job data
  Input:
    KEYS[1] Job id key
    ARGV[1] data
  Output:
    0 - OK
   -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS",KEYS[1]) == 1 then -- // Make sure job exists
  rcall("HSET", KEYS[1], "data", ARGV[1])
  return 0
else
  return -1
end
`;ZB.updateData={name:"updateData",content:nur,keys:1}});var PWe=b(eq=>{"use strict";Object.defineProperty(eq,"__esModule",{value:!0});eq.updateJobScheduler=void 0;var iur=`--[[
  Updates a job scheduler and adds next delayed job
  Input:
    KEYS[1]  'repeat' key
    KEYS[2]  'delayed'
    KEYS[3]  'wait' key
    KEYS[4]  'paused' key
    KEYS[5]  'meta'
    KEYS[6]  'prioritized' key
    KEYS[7]  'marker',
    KEYS[8]  'id'
    KEYS[9]  events stream key
    KEYS[10] 'pc' priority counter
    KEYS[11] producer key
    KEYS[12] 'active' key
    ARGV[1] next milliseconds
    ARGV[2] jobs scheduler id
    ARGV[3] Json stringified delayed data
    ARGV[4] msgpacked delayed opts
    ARGV[5] timestamp
    ARGV[6] prefix key
    ARGV[7] producer id
    Output:
      next delayed job id  - OK
]] local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local waitKey = KEYS[3]
local pausedKey = KEYS[4]
local metaKey = KEYS[5]
local prioritizedKey = KEYS[6]
local nextMillis = tonumber(ARGV[1])
local jobSchedulerId = ARGV[2]
local timestamp = tonumber(ARGV[5])
local prefixKey = ARGV[6]
local producerId = ARGV[7]
local jobOpts = cmsgpack.unpack(ARGV[4])
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
local function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, 
  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,
  data, jobSchedulerId, repeatDelay)
  opts['delay'] = repeatDelay
  opts['jobId'] = jobId
  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,
    opts, timestamp, nil, nil, jobSchedulerId)
  if delay ~= 0 then
    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)
  else
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
    -- Standard or priority add
    if priority == 0 then
      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
      -- Priority add
      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)
    end
    -- Emit waiting event
    rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents,  "*", "event", "waiting", "jobId", jobId)
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
    local nextMillis
    if not prevMillis then
        if startDate then
            -- Assuming startDate is passed as milliseconds from JavaScript
            nextMillis = tonumber(startDate)
            nextMillis = nextMillis > now and nextMillis or now
        else
            nextMillis = now
        end
    else
        nextMillis = prevMillis + every
        -- check if we may have missed some iterations
        if nextMillis < now then
            nextMillis = math.floor(now / every) * every + every + (offset or 0)
        end
    end
    if not offset or offset == 0 then
        local timeSlot = math.floor(nextMillis / every) * every;
        offset = nextMillis - timeSlot;
    end
    -- Return a tuple nextMillis, offset
    return math.floor(nextMillis), math.floor(offset)
end
local prevMillis = rcall("ZSCORE", repeatKey, jobSchedulerId)
-- Validate that scheduler exists.
-- If it does not exist we should not iterate anymore.
if prevMillis then
    prevMillis = tonumber(prevMillis)
    local schedulerKey = repeatKey .. ":" .. jobSchedulerId
    local schedulerAttributes = rcall("HMGET", schedulerKey, "name", "data", "every", "startDate", "offset")
    local every = tonumber(schedulerAttributes[3])
    local now = tonumber(timestamp)
    -- If every is not found in scheduler attributes, try to get it from job options
    if not every and jobOpts['repeat'] and jobOpts['repeat']['every'] then
        every = tonumber(jobOpts['repeat']['every'])
    end
    if every then
        local startDate = schedulerAttributes[4]
        local jobOptsOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0
        local offset = schedulerAttributes[5] or jobOptsOffset or 0
        local newOffset
        nextMillis, newOffset = getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
        if not offset then
            rcall("HSET", schedulerKey, "offset", newOffset)
            jobOpts['repeat']['offset'] = newOffset
        end
    end
    local nextDelayedJobId = "repeat:" .. jobSchedulerId .. ":" .. nextMillis
    local nextDelayedJobKey = schedulerKey .. ":" .. nextMillis
    local currentDelayedJobId = "repeat:" .. jobSchedulerId .. ":" .. prevMillis
    if producerId == currentDelayedJobId then
        local eventsKey = KEYS[9]
        local maxEvents = getOrSetMaxEvents(metaKey)
        if rcall("EXISTS", nextDelayedJobKey) ~= 1 then
            rcall("ZADD", repeatKey, nextMillis, jobSchedulerId)
            rcall("HINCRBY", schedulerKey, "ic", 1)
            rcall("INCR", KEYS[8])
            -- TODO: remove this workaround in next breaking change,
            -- all job-schedulers must save job data
            local templateData = schedulerAttributes[2] or ARGV[3]
            if templateData and templateData ~= '{}' then
                rcall("HSET", schedulerKey, "data", templateData)
            end
            local delay = nextMillis - now
            -- Fast Clamp delay to minimum of 0
            if delay < 0 then
                delay = 0
            end
            jobOpts["delay"] = delay
            addJobFromScheduler(nextDelayedJobKey, nextDelayedJobId, jobOpts, waitKey, pausedKey, KEYS[12], metaKey,
                prioritizedKey, KEYS[10], delayedKey, KEYS[7], eventsKey, schedulerAttributes[1], maxEvents, ARGV[5],
                templateData or '{}', jobSchedulerId, delay)
            -- TODO: remove this workaround in next breaking change
            if KEYS[11] ~= "" then
                rcall("HSET", KEYS[11], "nrjid", nextDelayedJobId)
            end
            return nextDelayedJobId .. "" -- convert to string
        else
            rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "duplicated", "jobId", nextDelayedJobId)
        end
    end
end
`;eq.updateJobScheduler={name:"updateJobScheduler",content:iur,keys:12}});var NWe=b(tq=>{"use strict";Object.defineProperty(tq,"__esModule",{value:!0});tq.updateProgress=void 0;var sur=`--[[
  Update job progress
  Input:
    KEYS[1] Job id key
    KEYS[2] event stream key
    KEYS[3] meta key
    ARGV[1] id
    ARGV[2] progress
  Output:
     0 - OK
    -1 - Missing job.
  Event:
    progress(jobId, progress)
]]
local rcall = redis.call
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
    local maxEvents = getOrSetMaxEvents(KEYS[3])
    rcall("HSET", KEYS[1], "progress", ARGV[2])
    rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event", "progress",
          "jobId", ARGV[1], "data", ARGV[2]);
    return 0
else
    return -1
end
`;tq.updateProgress={name:"updateProgress",content:sur,keys:3}});var FWe=b(rq=>{"use strict";Object.defineProperty(rq,"__esModule",{value:!0});rq.updateRepeatableJobMillis=void 0;var our=`--[[
  Adds a repeatable job
    Input:
      KEYS[1] 'repeat' key
      ARGV[1] next milliseconds
      ARGV[2] custom key
      ARGV[3] legacy custom key TODO: remove this logic in next breaking change
      Output:
        repeatableKey  - OK
]]
local rcall = redis.call
local repeatKey = KEYS[1]
local nextMillis = ARGV[1]
local customKey = ARGV[2]
local legacyCustomKey = ARGV[3]
if rcall("ZSCORE", repeatKey, customKey) then
    rcall("ZADD", repeatKey, nextMillis, customKey)
    return customKey
elseif rcall("ZSCORE", repeatKey, legacyCustomKey) ~= false then
    rcall("ZADD", repeatKey, nextMillis, legacyCustomKey)
    return legacyCustomKey
end
return ''
`;rq.updateRepeatableJobMillis={name:"updateRepeatableJobMillis",content:our,keys:1}});var BWe=b(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});var mt=(or(),Wt(sr));mt.__exportStar($ze(),lt);mt.__exportStar(Uze(),lt);mt.__exportStar(Kze(),lt);mt.__exportStar(Vze(),lt);mt.__exportStar(Gze(),lt);mt.__exportStar(Hze(),lt);mt.__exportStar(zze(),lt);mt.__exportStar(Wze(),lt);mt.__exportStar(Jze(),lt);mt.__exportStar(Yze(),lt);mt.__exportStar(Qze(),lt);mt.__exportStar(Xze(),lt);mt.__exportStar(Zze(),lt);mt.__exportStar(eWe(),lt);mt.__exportStar(tWe(),lt);mt.__exportStar(rWe(),lt);mt.__exportStar(nWe(),lt);mt.__exportStar(iWe(),lt);mt.__exportStar(sWe(),lt);mt.__exportStar(oWe(),lt);mt.__exportStar(aWe(),lt);mt.__exportStar(uWe(),lt);mt.__exportStar(cWe(),lt);mt.__exportStar(lWe(),lt);mt.__exportStar(dWe(),lt);mt.__exportStar(pWe(),lt);mt.__exportStar(fWe(),lt);mt.__exportStar(hWe(),lt);mt.__exportStar(mWe(),lt);mt.__exportStar(yWe(),lt);mt.__exportStar(gWe(),lt);mt.__exportStar(bWe(),lt);mt.__exportStar(_We(),lt);mt.__exportStar(EWe(),lt);mt.__exportStar(vWe(),lt);mt.__exportStar(SWe(),lt);mt.__exportStar(wWe(),lt);mt.__exportStar(AWe(),lt);mt.__exportStar(CWe(),lt);mt.__exportStar(TWe(),lt);mt.__exportStar(OWe(),lt);mt.__exportStar(xWe(),lt);mt.__exportStar(IWe(),lt);mt.__exportStar(RWe(),lt);mt.__exportStar(DWe(),lt);mt.__exportStar(kWe(),lt);mt.__exportStar(MWe(),lt);mt.__exportStar(PWe(),lt);mt.__exportStar(NWe(),lt);mt.__exportStar(FWe(),lt)});var o8=b(nq=>{"use strict";Object.defineProperty(nq,"__esModule",{value:!0});nq.RedisConnection=void 0;var aur=(or(),Wt(sr)),uur=require("events"),qWe=oP(),LWe=ji(),Ru=Lc(),cur=tB(),lur=BWe(),dur=["BullMQ: WARNING! Your redis options maxRetriesPerRequest must be null","and will be overridden by BullMQ."].join(" "),pur="BullMQ: Your redis options maxRetriesPerRequest must be null.",s8=class t extends uur.EventEmitter{constructor(e,r){if(super(),this.extraOptions=r,this.capabilities={canDoubleTimeout:!1,canBlockFor1Ms:!0},this.status="initializing",this.packageVersion=cur.version,this.extraOptions=Object.assign({shared:!1,blocking:!0,skipVersionCheck:!1,skipWaitingForReady:!1},r),!(0,Ru.isRedisInstance)(e))this.checkBlockingOptions(dur,e),this.opts=Object.assign({port:6379,host:"127.0.0.1",retryStrategy:function(n){return Math.max(Math.min(Math.exp(n),2e4),1e3)}},e),this.extraOptions.blocking&&(this.opts.maxRetriesPerRequest=null);else{if(this._client=e,this._client.options.keyPrefix)throw new Error("BullMQ: ioredis does not support ioredis prefixes, use the prefix option instead.");(0,Ru.isRedisCluster)(this._client)?this.opts=this._client.options.redisOptions:this.opts=this._client.options,this.checkBlockingOptions(pur,this.opts,!0)}this.skipVersionCheck=r?.skipVersionCheck||!!(this.opts&&this.opts.skipVersionCheck),this.handleClientError=n=>{this.emit("error",n)},this.handleClientClose=()=>{this.emit("close")},this.handleClientReady=()=>{this.emit("ready")},this.initializing=this.init(),this.initializing.catch(n=>this.emit("error",n))}checkBlockingOptions(e,r,n=!1){if(this.extraOptions.blocking&&r&&r.maxRetriesPerRequest){if(n)throw new Error(e);console.error(e)}}static async waitUntilReady(e){if(e.status==="ready")return;if(e.status==="wait")return e.connect();if(e.status==="end")throw new Error(LWe.CONNECTION_CLOSED_ERROR_MSG);let r,n,i;try{await new Promise((s,o)=>{let a;i=u=>{a=u},r=()=>{s()},n=()=>{e.status!=="end"?o(a||new Error(LWe.CONNECTION_CLOSED_ERROR_MSG)):a?o(a):s()},(0,Ru.increaseMaxListeners)(e,3),e.once("ready",r),e.on("end",n),e.once("error",i)})}finally{e.removeListener("end",n),e.removeListener("error",i),e.removeListener("ready",r),(0,Ru.decreaseMaxListeners)(e,3)}}get client(){return this.initializing}loadCommands(e,r){let n=r||lur;for(let i in n){let s=`${n[i].name}:${e}`;this._client[s]||this._client.defineCommand(s,{numberOfKeys:n[i].keys,lua:n[i].content})}}async init(){if(!this._client){let e=this.opts,{url:r}=e,n=aur.__rest(e,["url"]);this._client=r?new qWe.default(r,n):new qWe.default(n)}if((0,Ru.increaseMaxListeners)(this._client,3),this._client.on("error",this.handleClientError),this._client.on("close",this.handleClientClose),this._client.on("ready",this.handleClientReady),this.extraOptions.skipWaitingForReady||await t.waitUntilReady(this._client),this.loadCommands(this.packageVersion),this._client.status!=="end"){if(this.version=await this.getRedisVersion(),this.skipVersionCheck!==!0&&!this.closing){if((0,Ru.isRedisVersionLowerThan)(this.version,t.minimumVersion))throw new Error(`Redis version needs to be greater or equal than ${t.minimumVersion} Current: ${this.version}`);(0,Ru.isRedisVersionLowerThan)(this.version,t.recommendedMinimumVersion)&&console.warn(`It is highly recommended to use a minimum Redis version of ${t.recommendedMinimumVersion}
             Current: ${this.version}`)}this.capabilities={canDoubleTimeout:!(0,Ru.isRedisVersionLowerThan)(this.version,"6.0.0"),canBlockFor1Ms:!(0,Ru.isRedisVersionLowerThan)(this.version,"7.0.8")},this.status="ready"}return this._client}async disconnect(e=!0){let r=await this.client;if(r.status!=="end"){let n,i;if(!e)return r.disconnect();let s=new Promise((o,a)=>{(0,Ru.increaseMaxListeners)(r,2),r.once("end",o),r.once("error",a),n=o,i=a});r.disconnect();try{await s}finally{(0,Ru.decreaseMaxListeners)(r,2),r.removeListener("end",n),r.removeListener("error",i)}}}async reconnect(){return(await this.client).connect()}async close(e=!1){if(!this.closing){let r=this.status;this.status="closing",this.closing=!0;try{r==="ready"&&await this.initializing,this.extraOptions.shared||(r=="initializing"||e?this._client.disconnect():await this._client.quit(),this._client.status="end")}catch(n){if((0,Ru.isNotConnectionError)(n))throw n}finally{this._client.off("error",this.handleClientError),this._client.off("close",this.handleClientClose),this._client.off("ready",this.handleClientReady),(0,Ru.decreaseMaxListeners)(this._client,3),this.removeAllListeners(),this.status="closed"}}}async getRedisVersion(){if(this.skipVersionCheck)return t.minimumVersion;let e=await this._client.info(),r="redis_version:",n="maxmemory_policy:",i=e.split(/\r?\n/),s;for(let o=0;o<i.length;o++){if(i[o].indexOf(n)===0){let a=i[o].substr(n.length);a!=="noeviction"&&console.warn(`IMPORTANT! Eviction policy is ${a}. It should be "noeviction"`)}i[o].indexOf(r)===0&&(s=i[o].substr(r.length))}return s}get redisVersion(){return this.version}};nq.RedisConnection=s8;s8.minimumVersion="5.0.0";s8.recommendedMinimumVersion="6.2.0"});var jWe=b(sq=>{"use strict";Object.defineProperty(sq,"__esModule",{value:!0});sq.FlowProducer=void 0;var fur=require("events"),hur=FF(),l2=Lc(),mur=C4(),iq=oB(),yur=o8(),km=Tu(),pce=class extends fur.EventEmitter{constructor(e={connection:{}},r=yur.RedisConnection){super(),this.opts=e,this.opts=Object.assign({prefix:"bull"},e),this.connection=new r(e.connection,{shared:(0,l2.isRedisInstance)(e.connection),blocking:!1,skipVersionCheck:e.skipVersionCheck,skipWaitingForReady:e.skipWaitingForReady}),this.connection.on("error",n=>this.emit("error",n)),this.connection.on("close",()=>{this.closing||this.emit("ioredis:close")}),this.queueKeys=new iq.QueueKeys(e.prefix),e?.telemetry&&(this.telemetry=e.telemetry)}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}get client(){return this.connection.client}get Job(){return mur.Job}waitUntilReady(){return this.client}async add(e,r){var n;if(this.closing)return;let s=(await this.connection.client).multi(),o=(n=e?.opts)===null||n===void 0?void 0:n.parent,a=(0,l2.getParentKey)(o),u=a?`${a}:dependencies`:void 0;return(0,l2.trace)(this.telemetry,km.SpanKind.PRODUCER,e.queueName,"addFlow",e.queueName,async c=>{c?.setAttributes({[km.TelemetryAttributes.FlowName]:e.name});let l=await this.addNode({multi:s,node:e,queuesOpts:r?.queuesOptions,parent:{parentOpts:o,parentDependenciesKey:u}});return await s.exec(),l})}async getFlow(e){if(this.closing)return;let r=await this.connection.client,n=Object.assign({depth:10,maxChildren:20,prefix:this.opts.prefix},e);return this.getNode(r,n)}async addBulk(e){if(this.closing)return;let n=(await this.connection.client).multi();return(0,l2.trace)(this.telemetry,km.SpanKind.PRODUCER,"","addBulkFlows","",async i=>{i?.setAttributes({[km.TelemetryAttributes.BulkCount]:e.length,[km.TelemetryAttributes.BulkNames]:e.map(o=>o.name).join(",")});let s=await this.addNodes(n,e);return await n.exec(),s})}async addNode({multi:e,node:r,parent:n,queuesOpts:i}){var s,o;let a=r.prefix||this.opts.prefix,u=this.queueFromNode(r,new iq.QueueKeys(a),a),c=i&&i[r.queueName],l=(s=c?.defaultJobOptions)!==null&&s!==void 0?s:{},d=((o=r.opts)===null||o===void 0?void 0:o.jobId)||(0,hur.v4)();return(0,l2.trace)(this.telemetry,km.SpanKind.PRODUCER,r.queueName,"addNode",r.queueName,async(p,f)=>{var h,y;p?.setAttributes({[km.TelemetryAttributes.JobName]:r.name,[km.TelemetryAttributes.JobId]:d});let E=r.opts,v=E?.telemetry;if(f&&E){let A=(h=E.telemetry)===null||h===void 0?void 0:h.omitContext,C=((y=E.telemetry)===null||y===void 0?void 0:y.metadata)||!A&&f;(C||A)&&(v={metadata:C,omitContext:A})}let w=new this.Job(u,r.name,r.data,Object.assign(Object.assign(Object.assign({},l),E),{parent:n?.parentOpts,telemetry:v}),d),T=(0,l2.getParentKey)(n?.parentOpts);if(r.children&&r.children.length>0){let A=d,C=new iq.QueueKeys(r.prefix||this.opts.prefix);await w.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,addToWaitingChildren:!0,parentKey:T});let x=`${C.toKey(r.queueName,A)}:dependencies`,R=await this.addChildren({multi:e,nodes:r.children,parent:{parentOpts:{id:A,queue:C.getQueueQualifiedName(r.queueName)},parentDependenciesKey:x},queuesOpts:i});return{job:w,children:R}}else return await w.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,parentKey:T}),{job:w}})}addNodes(e,r){return Promise.all(r.map(n=>{var i;let s=(i=n?.opts)===null||i===void 0?void 0:i.parent,o=(0,l2.getParentKey)(s),a=o?`${o}:dependencies`:void 0;return this.addNode({multi:e,node:n,parent:{parentOpts:s,parentDependenciesKey:a}})}))}async getNode(e,r){let n=this.queueFromNode(r,new iq.QueueKeys(r.prefix),r.prefix),i=await this.Job.fromId(n,r.id);if(i){let{processed:s={},unprocessed:o=[],failed:a=[],ignored:u={}}=await i.getDependencies({failed:{count:r.maxChildren},processed:{count:r.maxChildren},unprocessed:{count:r.maxChildren},ignored:{count:r.maxChildren}}),c=Object.keys(s),l=Object.keys(u),d=c.length+o.length+l.length+a.length,p=r.depth-1;if(d>0&&p){let f=await this.getChildren(e,[...c,...o,...a,...l],p,r.maxChildren);return{job:i,children:f}}else return{job:i}}}addChildren({multi:e,nodes:r,parent:n,queuesOpts:i}){return Promise.all(r.map(s=>this.addNode({multi:e,node:s,parent:n,queuesOpts:i})))}getChildren(e,r,n,i){let s=o=>{let[a,u,c]=o.split(":");return this.getNode(e,{id:c,queueName:u,prefix:a,depth:n,maxChildren:i})};return Promise.all([...r.map(s)])}queueFromNode(e,r,n){return{client:this.connection.client,name:e.queueName,keys:r.getKeys(e.queueName),toKey:i=>r.toKey(e.queueName,i),opts:{prefix:n,connection:{}},qualifiedName:r.getQueueQualifiedName(e.queueName),closing:this.closing,waitUntilReady:async()=>this.connection.client,removeListener:this.removeListener.bind(this),emit:this.emit.bind(this),on:this.on.bind(this),redisVersion:this.connection.redisVersion,trace:async()=>{}}}async close(){this.closing||(this.closing=this.connection.close()),await this.closing}disconnect(){return this.connection.disconnect()}};sq.FlowProducer=pce});var yYe=b(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var s1=class extends Error{},Sce=class extends s1{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},wce=class extends s1{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Ace=class extends s1{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Nm=class extends s1{},fq=class extends s1{constructor(e){super(`Invalid unit ${e}`)}},Ds=class extends s1{},pp=class extends s1{constructor(){super("Zone is an abstract class")}},Ve="numeric",ud="short",Mu="long",hq={year:Ve,month:Ve,day:Ve},gJe={year:Ve,month:ud,day:Ve},gur={year:Ve,month:ud,day:Ve,weekday:ud},bJe={year:Ve,month:Mu,day:Ve},_Je={year:Ve,month:Mu,day:Ve,weekday:Mu},EJe={hour:Ve,minute:Ve},vJe={hour:Ve,minute:Ve,second:Ve},SJe={hour:Ve,minute:Ve,second:Ve,timeZoneName:ud},wJe={hour:Ve,minute:Ve,second:Ve,timeZoneName:Mu},AJe={hour:Ve,minute:Ve,hourCycle:"h23"},CJe={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23"},TJe={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:ud},OJe={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:Mu},xJe={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve},IJe={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve,second:Ve},RJe={year:Ve,month:ud,day:Ve,hour:Ve,minute:Ve},DJe={year:Ve,month:ud,day:Ve,hour:Ve,minute:Ve,second:Ve},bur={year:Ve,month:ud,day:Ve,weekday:ud,hour:Ve,minute:Ve},kJe={year:Ve,month:Mu,day:Ve,hour:Ve,minute:Ve,timeZoneName:ud},MJe={year:Ve,month:Mu,day:Ve,hour:Ve,minute:Ve,second:Ve,timeZoneName:ud},PJe={year:Ve,month:Mu,day:Ve,weekday:Mu,hour:Ve,minute:Ve,timeZoneName:Mu},NJe={year:Ve,month:Mu,day:Ve,weekday:Mu,hour:Ve,minute:Ve,second:Ve,timeZoneName:Mu},Bm=class{get type(){throw new pp}get name(){throw new pp}get ianaName(){return this.name}get isUniversal(){throw new pp}offsetName(e,r){throw new pp}formatOffset(e,r){throw new pp}offset(e){throw new pp}equals(e){throw new pp}get isValid(){throw new pp}},fce=null,p8=class t extends Bm{static get instance(){return fce===null&&(fce=new t),fce}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return HJe(e,r,n)}formatOffset(e,r){return d8(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},Cce=new Map;function _ur(t){let e=Cce.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Cce.set(t,e)),e}var Eur={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function vur(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,s,o,a,u,c,l]=n;return[o,i,s,a,u,c,l]}function Sur(t,e){let r=t.formatToParts(e),n=[];for(let i=0;i<r.length;i++){let{type:s,value:o}=r[i],a=Eur[s];s==="era"?n[a]=o:At(a)||(n[a]=parseInt(o,10))}return n}var hce=new Map,o1=class t extends Bm{static create(e){let r=hce.get(e);return r===void 0&&hce.set(e,r=new t(e)),r}static resetCache(){hce.clear(),Cce.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return HJe(e,r,n,this.name)}formatOffset(e,r){return d8(this.offset(e),r)}offset(e){if(!this.valid)return NaN;let r=new Date(e);if(isNaN(r))return NaN;let n=_ur(this.name),[i,s,o,a,u,c,l]=n.formatToParts?Sur(n,r):vur(n,r);a==="BC"&&(i=-Math.abs(i)+1);let p=vq({year:i,month:s,day:o,hour:u===24?0:u,minute:c,second:l,millisecond:0}),f=+r,h=f%1e3;return f-=h>=0?h:1e3+h,(p-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},$We={};function wur(t,e={}){let r=JSON.stringify([t,e]),n=$We[r];return n||(n=new Intl.ListFormat(t,e),$We[r]=n),n}var Tce=new Map;function Oce(t,e={}){let r=JSON.stringify([t,e]),n=Tce.get(r);return n===void 0&&(n=new Intl.DateTimeFormat(t,e),Tce.set(r,n)),n}var xce=new Map;function Aur(t,e={}){let r=JSON.stringify([t,e]),n=xce.get(r);return n===void 0&&(n=new Intl.NumberFormat(t,e),xce.set(r,n)),n}var Ice=new Map;function Cur(t,e={}){let{base:r,...n}=e,i=JSON.stringify([t,n]),s=Ice.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),Ice.set(i,s)),s}var u8=null;function Tur(){return u8||(u8=new Intl.DateTimeFormat().resolvedOptions().locale,u8)}var Rce=new Map;function FJe(t){let e=Rce.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),Rce.set(t,e)),e}var Dce=new Map;function Our(t){let e=Dce.get(t);if(!e){let r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in e||(e={...BJe,...e}),Dce.set(t,e)}return e}function xur(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let r=t.indexOf("-u-");if(r===-1)return[t];{let n,i;try{n=Oce(t).resolvedOptions(),i=t}catch{let u=t.substring(0,r);n=Oce(u).resolvedOptions(),i=u}let{numberingSystem:s,calendar:o}=n;return[i,s,o]}}function Iur(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function Rur(t){let e=[];for(let r=1;r<=12;r++){let n=Ln.utc(2009,r,1);e.push(t(n))}return e}function Dur(t){let e=[];for(let r=1;r<=7;r++){let n=Ln.utc(2016,11,13+r);e.push(t(n))}return e}function oq(t,e,r,n){let i=t.listingMode();return i==="error"?null:i==="en"?r(e):n(e)}function kur(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||FJe(t.locale).numberingSystem==="latn"}var kce=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:i,floor:s,...o}=n;if(!r||Object.keys(o).length>0){let a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=Aur(e,a)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):Kce(e,3);return Ki(r,this.padTo)}}},Mce=class{constructor(e,r,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&o1.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=Oce(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){let n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},Pce=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&VJe()&&(this.rtf=Cur(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):Zur(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},BJe={firstDay:1,minimalDays:4,weekend:[6,7]},cn=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,n,i,s=!1){let o=e||kn.defaultLocale,a=o||(s?"en-US":Tur()),u=r||kn.defaultNumberingSystem,c=n||kn.defaultOutputCalendar,l=Fce(i)||kn.defaultWeekSettings;return new t(a,u,c,l,o)}static resetCache(){u8=null,Tce.clear(),xce.clear(),Ice.clear(),Rce.clear(),Dce.clear()}static fromObject({locale:e,numberingSystem:r,outputCalendar:n,weekSettings:i}={}){return t.create(e,r,n,i)}constructor(e,r,n,i,s){let[o,a,u]=xur(e);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=n||u||null,this.weekSettings=i,this.intl=Iur(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=kur(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Fce(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return oq(this,e,JJe,()=>{let n=this.intl==="ja"||this.intl.startsWith("ja-");r&=!n;let i=r?{month:e,day:"numeric"}:{month:e},s=r?"format":"standalone";if(!this.monthsCache[s][e]){let o=n?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[s][e]=Rur(o)}return this.monthsCache[s][e]})}weekdays(e,r=!1){return oq(this,e,XJe,()=>{let n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=r?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Dur(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return oq(this,void 0,()=>ZJe,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ln.utc(2016,11,13,9),Ln.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return oq(this,e,eYe,()=>{let r={era:e};return this.eraCache[e]||(this.eraCache[e]=[Ln.utc(-40,1,1),Ln.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,r,n){let i=this.dtFormatter(e,r),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new kce(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new Mce(e,this.intl,r)}relFormatter(e={}){return new Pce(this.intl,this.isEnglish(),e)}listFormatter(e={}){return wur(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||FJe(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:GJe()?Our(this.locale):BJe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}},mce=null,Pu=class t extends Bm{static get utcInstance(){return mce===null&&(mce=new t(0)),mce}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(Sq(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${d8(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${d8(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return d8(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},mq=class extends Bm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Pm(t,e){if(At(t)||t===null)return e;if(t instanceof Bm)return t;if(qur(t)){let r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?p8.instance:r==="utc"||r==="gmt"?Pu.utcInstance:Pu.parseSpecifier(r)||o1.create(t)}else return Fm(t)?Pu.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new mq(t)}var Lce={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},UWe={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Mur=Lce.hanidec.replace(/[\[|\]]/g,"").split("");function Pur(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(Lce.hanidec)!==-1)e+=Mur.indexOf(t[r]);else for(let i in UWe){let[s,o]=UWe[i];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}var Nce=new Map;function Nur(){Nce.clear()}function od({numberingSystem:t},e=""){let r=t||"latn",n=Nce.get(r);n===void 0&&(n=new Map,Nce.set(r,n));let i=n.get(e);return i===void 0&&(i=new RegExp(`${Lce[r]}${e}`),n.set(e,i)),i}var KWe=()=>Date.now(),VWe="system",GWe=null,HWe=null,zWe=null,WWe=60,JWe,YWe=null,kn=class{static get now(){return KWe}static set now(e){KWe=e}static set defaultZone(e){VWe=e}static get defaultZone(){return Pm(VWe,p8.instance)}static get defaultLocale(){return GWe}static set defaultLocale(e){GWe=e}static get defaultNumberingSystem(){return HWe}static set defaultNumberingSystem(e){HWe=e}static get defaultOutputCalendar(){return zWe}static set defaultOutputCalendar(e){zWe=e}static get defaultWeekSettings(){return YWe}static set defaultWeekSettings(e){YWe=Fce(e)}static get twoDigitCutoffYear(){return WWe}static set twoDigitCutoffYear(e){WWe=e%100}static get throwOnInvalid(){return JWe}static set throwOnInvalid(e){JWe=e}static resetCaches(){cn.resetCache(),o1.resetCache(),Ln.resetCache(),Nur()}},ku=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},qJe=[0,31,59,90,120,151,181,212,243,273,304,334],LJe=[0,31,60,91,121,152,182,213,244,274,305,335];function Uc(t,e){return new ku("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function jce(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let i=n.getUTCDay();return i===0?7:i}function jJe(t,e,r){return r+(h8(t)?LJe:qJe)[e-1]}function $Je(t,e){let r=h8(t)?LJe:qJe,n=r.findIndex(s=>s<e),i=e-r[n];return{month:n+1,day:i}}function $ce(t,e){return(t-e+7)%7+1}function yq(t,e=4,r=1){let{year:n,month:i,day:s}=t,o=jJe(n,i,s),a=$ce(jce(n,i,s),r),u=Math.floor((o-a+14-e)/7),c;return u<1?(c=n-1,u=f8(c,e,r)):u>f8(n,e,r)?(c=n+1,u=1):c=n,{weekYear:c,weekNumber:u,weekday:a,...wq(t)}}function QWe(t,e=4,r=1){let{weekYear:n,weekNumber:i,weekday:s}=t,o=$ce(jce(n,1,e),r),a=I4(n),u=i*7+s-o-7+e,c;u<1?(c=n-1,u+=I4(c)):u>a?(c=n+1,u-=I4(n)):c=n;let{month:l,day:d}=$Je(c,u);return{year:c,month:l,day:d,...wq(t)}}function yce(t){let{year:e,month:r,day:n}=t,i=jJe(e,r,n);return{year:e,ordinal:i,...wq(t)}}function XWe(t){let{year:e,ordinal:r}=t,{month:n,day:i}=$Je(e,r);return{year:e,month:n,day:i,...wq(t)}}function ZWe(t,e){if(!At(t.localWeekday)||!At(t.localWeekNumber)||!At(t.localWeekYear)){if(!At(t.weekday)||!At(t.weekNumber)||!At(t.weekYear))throw new Nm("Cannot mix locale-based week fields with ISO-based week fields");return At(t.localWeekday)||(t.weekday=t.localWeekday),At(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),At(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Fur(t,e=4,r=1){let n=Eq(t.weekYear),i=Kc(t.weekNumber,1,f8(t.weekYear,e,r)),s=Kc(t.weekday,1,7);return n?i?s?!1:Uc("weekday",t.weekday):Uc("week",t.weekNumber):Uc("weekYear",t.weekYear)}function Bur(t){let e=Eq(t.year),r=Kc(t.ordinal,1,I4(t.year));return e?r?!1:Uc("ordinal",t.ordinal):Uc("year",t.year)}function UJe(t){let e=Eq(t.year),r=Kc(t.month,1,12),n=Kc(t.day,1,gq(t.year,t.month));return e?r?n?!1:Uc("day",t.day):Uc("month",t.month):Uc("year",t.year)}function KJe(t){let{hour:e,minute:r,second:n,millisecond:i}=t,s=Kc(e,0,23)||e===24&&r===0&&n===0&&i===0,o=Kc(r,0,59),a=Kc(n,0,59),u=Kc(i,0,999);return s?o?a?u?!1:Uc("millisecond",i):Uc("second",n):Uc("minute",r):Uc("hour",e)}function At(t){return typeof t>"u"}function Fm(t){return typeof t=="number"}function Eq(t){return typeof t=="number"&&t%1===0}function qur(t){return typeof t=="string"}function Lur(t){return Object.prototype.toString.call(t)==="[object Date]"}function VJe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function GJe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function jur(t){return Array.isArray(t)?t:[t]}function eJe(t,e,r){if(t.length!==0)return t.reduce((n,i)=>{let s=[e(i),i];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function $ur(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function D4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fce(t){if(t==null)return null;if(typeof t!="object")throw new Ds("Week settings must be an object");if(!Kc(t.firstDay,1,7)||!Kc(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Kc(e,1,7)))throw new Ds("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Kc(t,e,r){return Eq(t)&&t>=e&&t<=r}function Uur(t,e){return t-e*Math.floor(t/e)}function Ki(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function Mm(t){if(!(At(t)||t===null||t===""))return parseInt(t,10)}function d2(t){if(!(At(t)||t===null||t===""))return parseFloat(t)}function Uce(t){if(!(At(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Kce(t,e,r="round"){let n=10**e;switch(r){case"expand":return t>0?Math.ceil(t*n)/n:Math.floor(t*n)/n;case"trunc":return Math.trunc(t*n)/n;case"round":return Math.round(t*n)/n;case"floor":return Math.floor(t*n)/n;case"ceil":return Math.ceil(t*n)/n;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function h8(t){return t%4===0&&(t%100!==0||t%400===0)}function I4(t){return h8(t)?366:365}function gq(t,e){let r=Uur(e-1,12)+1,n=t+(e-r)/12;return r===2?h8(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function vq(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function tJe(t,e,r){return-$ce(jce(t,1,e),r)+e-1}function f8(t,e=4,r=1){let n=tJe(t,e,r),i=tJe(t+1,e,r);return(I4(t)-n+i)/7}function Bce(t){return t>99?t:t>kn.twoDigitCutoffYear?1900+t:2e3+t}function HJe(t,e,r,n=null){let i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);let o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function Sq(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function zJe(t){let e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new Ds(`Invalid unit value ${t}`);return e}function bq(t,e){let r={};for(let n in t)if(D4(t,n)){let i=t[n];if(i==null)continue;r[e(n)]=zJe(i)}return r}function d8(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Ki(r,2)}:${Ki(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${Ki(r,2)}${Ki(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function wq(t){return $ur(t,["hour","minute","second","millisecond"])}var Kur=["January","February","March","April","May","June","July","August","September","October","November","December"],WJe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vur=["J","F","M","A","M","J","J","A","S","O","N","D"];function JJe(t){switch(t){case"narrow":return[...Vur];case"short":return[...WJe];case"long":return[...Kur];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var YJe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],QJe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Gur=["M","T","W","T","F","S","S"];function XJe(t){switch(t){case"narrow":return[...Gur];case"short":return[...QJe];case"long":return[...YJe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var ZJe=["AM","PM"],Hur=["Before Christ","Anno Domini"],zur=["BC","AD"],Wur=["B","A"];function eYe(t){switch(t){case"narrow":return[...Wur];case"short":return[...zur];case"long":return[...Hur];default:return null}}function Jur(t){return ZJe[t.hour<12?0:1]}function Yur(t,e){return XJe(e)[t.weekday-1]}function Qur(t,e){return JJe(e)[t.month-1]}function Xur(t,e){return eYe(e)[t.year<0?0:1]}function Zur(t,e,r="always",n=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&s){let d=t==="days";switch(e){case 1:return d?"tomorrow":`next ${i[t][0]}`;case-1:return d?"yesterday":`last ${i[t][0]}`;case 0:return d?"today":`this ${i[t][0]}`}}let o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,c=i[t],l=n?u?c[1]:c[2]||c[1]:u?i[t][0]:t;return o?`${a} ${l} ago`:`in ${a} ${l}`}function rJe(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var ecr={D:hq,DD:gJe,DDD:bJe,DDDD:_Je,t:EJe,tt:vJe,ttt:SJe,tttt:wJe,T:AJe,TT:CJe,TTT:TJe,TTTT:OJe,f:xJe,ff:RJe,fff:kJe,ffff:PJe,F:IJe,FF:DJe,FFF:MJe,FFFF:NJe},Du=class t{static create(e,r={}){return new t(e,r)}static parseFormat(e){let r=null,n="",i=!1,s=[];for(let o=0;o<e.length;o++){let a=e.charAt(o);a==="'"?((n.length>0||i)&&s.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),r=null,n="",i=!i):i||a===r?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,r=a)}return n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return ecr[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0,n=void 0){if(this.opts.forceSimple)return Ki(e,r);let i={...this.opts};return r>0&&(i.padTo=r),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,h)=>this.loc.extract(e,f,h),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>n?Jur(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(f,h)=>n?Qur(e,f):s(h?{month:f}:{month:f,day:"numeric"},"month"),c=(f,h)=>n?Yur(e,f):s(h?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),l=f=>{let h=t.macroTokenToFormatOpts(f);return h?this.formatWithSystemDefault(e,h):f},d=f=>n?Xur(e,f):s({era:f},"era"),p=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return l(f)}};return rJe(t.parseFormat(r),p)}formatDurationFromString(e,r){let n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=l=>{switch(l[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(l,d)=>p=>{let f=i(p);if(f){let h=d.isNegativeDuration&&f!==d.largestUnit?n:1,y;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?y="never":this.opts.signMode==="all"?y="always":y="auto",this.num(l.get(f)*h,p.length,y)}else return p},o=t.parseFormat(r),a=o.reduce((l,{literal:d,val:p})=>d?l:l.concat(p),[]),u=e.shiftTo(...a.map(i).filter(l=>l)),c={isNegativeDuration:u<0,largestUnit:Object.keys(u.values)[0]};return rJe(o,s(u,c))}},tYe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function k4(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function M4(...t){return e=>t.reduce(([r,n,i],s)=>{let[o,a,u]=s(e,i);return[{...r,...o},a||n,u]},[{},null,1]).slice(0,2)}function P4(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let i=r.exec(t);if(i)return n(i)}return[null,null]}function rYe(...t){return(e,r)=>{let n={},i;for(i=0;i<t.length;i++)n[t[i]]=Mm(e[r+i]);return[n,null,r+i]}}var nYe=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,tcr=`(?:${nYe.source}?(?:\\[(${tYe.source})\\])?)?`,Vce=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,iYe=RegExp(`${Vce.source}${tcr}`),Gce=RegExp(`(?:[Tt]${iYe.source})?`),rcr=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ncr=/(\d{4})-?W(\d\d)(?:-?(\d))?/,icr=/(\d{4})-?(\d{3})/,scr=rYe("weekYear","weekNumber","weekDay"),ocr=rYe("year","ordinal"),acr=/(\d{4})-(\d\d)-(\d\d)/,sYe=RegExp(`${Vce.source} ?(?:${nYe.source}|(${tYe.source}))?`),ucr=RegExp(`(?: ${sYe.source})?`);function R4(t,e,r){let n=t[e];return At(n)?r:Mm(n)}function ccr(t,e){return[{year:R4(t,e),month:R4(t,e+1,1),day:R4(t,e+2,1)},null,e+3]}function N4(t,e){return[{hours:R4(t,e,0),minutes:R4(t,e+1,0),seconds:R4(t,e+2,0),milliseconds:Uce(t[e+3])},null,e+4]}function m8(t,e){let r=!t[e]&&!t[e+1],n=Sq(t[e+1],t[e+2]),i=r?null:Pu.instance(n);return[{},i,e+3]}function y8(t,e){let r=t[e]?o1.create(t[e]):null;return[{},r,e+1]}var lcr=RegExp(`^T?${Vce.source}$`),dcr=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function pcr(t){let[e,r,n,i,s,o,a,u,c]=t,l=e[0]==="-",d=u&&u[0]==="-",p=(f,h=!1)=>f!==void 0&&(h||f&&l)?-f:f;return[{years:p(d2(r)),months:p(d2(n)),weeks:p(d2(i)),days:p(d2(s)),hours:p(d2(o)),minutes:p(d2(a)),seconds:p(d2(u),u==="-0"),milliseconds:p(Uce(c),d)}]}var fcr={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Hce(t,e,r,n,i,s,o){let a={year:e.length===2?Bce(Mm(e)):Mm(e),month:WJe.indexOf(r)+1,day:Mm(n),hour:Mm(i),minute:Mm(s)};return o&&(a.second=Mm(o)),t&&(a.weekday=t.length>3?YJe.indexOf(t)+1:QJe.indexOf(t)+1),a}var hcr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function mcr(t){let[,e,r,n,i,s,o,a,u,c,l,d]=t,p=Hce(e,i,n,r,s,o,a),f;return u?f=fcr[u]:c?f=0:f=Sq(l,d),[p,new Pu(f)]}function ycr(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var gcr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,bcr=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,_cr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function nJe(t){let[,e,r,n,i,s,o,a]=t;return[Hce(e,i,n,r,s,o,a),Pu.utcInstance]}function Ecr(t){let[,e,r,n,i,s,o,a]=t;return[Hce(e,a,r,n,i,s,o),Pu.utcInstance]}var vcr=k4(rcr,Gce),Scr=k4(ncr,Gce),wcr=k4(icr,Gce),Acr=k4(iYe),oYe=M4(ccr,N4,m8,y8),Ccr=M4(scr,N4,m8,y8),Tcr=M4(ocr,N4,m8,y8),Ocr=M4(N4,m8,y8);function xcr(t){return P4(t,[vcr,oYe],[Scr,Ccr],[wcr,Tcr],[Acr,Ocr])}function Icr(t){return P4(ycr(t),[hcr,mcr])}function Rcr(t){return P4(t,[gcr,nJe],[bcr,nJe],[_cr,Ecr])}function Dcr(t){return P4(t,[dcr,pcr])}var kcr=M4(N4);function Mcr(t){return P4(t,[lcr,kcr])}var Pcr=k4(acr,ucr),Ncr=k4(sYe),Fcr=M4(N4,m8,y8);function Bcr(t){return P4(t,[Pcr,oYe],[Ncr,Fcr])}var iJe="Invalid Duration",aYe={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},qcr={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...aYe},$c=146097/400,T4=146097/4800,Lcr={years:{quarters:4,months:12,weeks:$c/7,days:$c,hours:$c*24,minutes:$c*24*60,seconds:$c*24*60*60,milliseconds:$c*24*60*60*1e3},quarters:{months:3,weeks:$c/28,days:$c/4,hours:$c*24/4,minutes:$c*24*60/4,seconds:$c*24*60*60/4,milliseconds:$c*24*60*60*1e3/4},months:{weeks:T4/7,days:T4,hours:T4*24,minutes:T4*24*60,seconds:T4*24*60*60,milliseconds:T4*24*60*60*1e3},...aYe},f2=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],jcr=f2.slice(0).reverse();function i1(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new ls(n)}function uYe(t,e){var r;let n=(r=e.milliseconds)!=null?r:0;for(let i of jcr.slice(1))e[i]&&(n+=e[i]*t[i].milliseconds);return n}function sJe(t,e){let r=uYe(t,e)<0?-1:1;f2.reduceRight((n,i)=>{if(At(e[i]))return n;if(n){let s=e[n]*r,o=t[i][n],a=Math.floor(s/o);e[i]+=a*r,e[n]-=a*o*r}return i},null),f2.reduce((n,i)=>{if(At(e[i]))return n;if(n){let s=e[n]%1;e[n]-=s,e[i]+=s*t[n][i]}return i},null)}function oJe(t){let e={};for(let[r,n]of Object.entries(t))n!==0&&(e[r]=n);return e}var ls=class t{constructor(e){let r=e.conversionAccuracy==="longterm"||!1,n=r?Lcr:qcr;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||cn.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,r){return t.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new Ds(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:bq(e,t.normalizeUnit),loc:cn.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(Fm(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new Ds(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=Dcr(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=Mcr(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new Ds("need to specify a reason the Duration is invalid");let n=e instanceof ku?e:new ku(e,r);if(kn.throwOnInvalid)throw new Ace(n);return new t({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new fq(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Du.create(this.loc,n).formatDurationFromString(this,e):iJe}toHuman(e={}){if(!this.isValid)return iJe;let r=e.showZeros!==!1,n=f2.map(i=>{let s=this.values[i];return At(s)||s===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Kce(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Ln.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?uYe(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e),n={};for(let i of f2)(D4(r.values,i)||D4(this.values,i))&&(n[i]=r.get(i)+this.get(i));return i1(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=zJe(e(this.values[n],n));return i1(this,{values:r},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...bq(e,t.normalizeUnit)};return i1(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n,matrix:i}={}){let o={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:i,conversionAccuracy:n};return i1(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return sJe(this.matrix,e),i1(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=oJe(this.normalize().shiftToAll().toObject());return i1(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>t.normalizeUnit(o));let r={},n={},i=this.toObject(),s;for(let o of f2)if(e.indexOf(o)>=0){s=o;let a=0;for(let c in n)a+=this.matrix[c][o]*n[c],n[c]=0;Fm(i[o])&&(a+=i[o]);let u=Math.trunc(a);r[o]=u,n[o]=(a*1e3-u*1e3)/1e3}else Fm(i[o])&&(n[o]=i[o]);for(let o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return sJe(this.matrix,r),i1(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return i1(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;let e=oJe(this.values);return i1(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(let n of f2)if(!r(this.values[n],e.values[n]))return!1;return!0}},O4="Invalid Interval";function $cr(t,e){return!t||!t.isValid?m2.invalid("missing or invalid start"):!e||!e.isValid?m2.invalid("missing or invalid end"):e<t?m2.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var m2=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new Ds("need to specify a reason the Interval is invalid");let n=e instanceof ku?e:new ku(e,r);if(kn.throwOnInvalid)throw new wce(n);return new t({invalid:n})}static fromDateTimes(e,r){let n=a8(e),i=a8(r),s=$cr(n,i);return s??new t({start:n,end:i})}static after(e,r){let n=ls.fromDurationLike(r),i=a8(e);return t.fromDateTimes(i,i.plus(n))}static before(e,r){let n=ls.fromDurationLike(r),i=a8(e);return t.fromDateTimes(i.minus(n),i)}static fromISO(e,r){let[n,i]=(e||"").split("/",2);if(n&&i){let s,o;try{s=Ln.fromISO(n,r),o=s.isValid}catch{o=!1}let a,u;try{a=Ln.fromISO(i,r),u=a.isValid}catch{u=!1}if(o&&u)return t.fromDateTimes(s,a);if(o){let c=ls.fromISO(i,r);if(c.isValid)return t.after(s,c)}else if(u){let c=ls.fromISO(n,r);if(c.isValid)return t.before(a,c)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;let n=this.start.startOf(e,r),i;return r!=null&&r.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(e,r),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?t.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(a8).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[],{s:i}=this,s=0;for(;i<this.e;){let o=r[s]||this.e,a=+o>+this.e?this.e:o;n.push(t.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(e){let r=ls.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,s,o=[];for(;n<this.e;){let a=this.start.plus(r.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(t.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:t.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return t.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,c)=>u.time-c.time);for(let u of a)n+=u.type==="s"?1:-1,n===1?r=u.time:(r&&+r!=+u.time&&i.push(t.fromDateTimes(r,u.time)),r=null);return t.merge(i)}difference(...e){return t.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:O4}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=hq,r={}){return this.isValid?Du.create(this.s.loc.clone(r),e).formatInterval(this):O4}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:O4}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:O4}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:O4}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:O4}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):ls.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}},h2=class{static hasDST(e=kn.defaultZone){let r=Ln.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return o1.isValidZone(e)}static normalizeZone(e){return Pm(e,kn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||cn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||cn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||cn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||cn.create(r,n,s)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||cn.create(r,n,s)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||cn.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||cn.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return cn.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return cn.create(r,null,"gregory").eras(e)}static features(){return{relative:VJe(),localeWeek:GJe()}}};function aJe(t,e){let r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(ls.fromMillis(n).as("days"))}function Ucr(t,e,r){let n=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{let l=aJe(u,c);return(l-l%7)/7}],["days",aJe]],i={},s=t,o,a;for(let[u,c]of n)r.indexOf(u)>=0&&(o=u,i[u]=c(t,e),a=s.plus(i),a>e?(i[u]--,t=s.plus(i),t>e&&(a=t,i[u]--,t=s.plus(i))):t=a);return[t,i,a,o]}function Kcr(t,e,r,n){let[i,s,o,a]=Ucr(t,e,r),u=e-i,c=r.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));let l=ls.fromObject(s,n);return c.length>0?ls.fromMillis(u,n).shiftTo(...c).plus(l):l}var Vcr="missing Intl.DateTimeFormat.formatToParts support";function Pr(t,e=r=>r){return{regex:t,deser:([r])=>e(Pur(r))}}var Gcr="\xA0",cYe=`[ ${Gcr}]`,lYe=new RegExp(cYe,"g");function Hcr(t){return t.replace(/\./g,"\\.?").replace(lYe,cYe)}function uJe(t){return t.replace(/\./g,"").replace(lYe," ").toLowerCase()}function ad(t,e){return t===null?null:{regex:RegExp(t.map(Hcr).join("|")),deser:([r])=>t.findIndex(n=>uJe(r)===uJe(n))+e}}function cJe(t,e){return{regex:t,deser:([,r,n])=>Sq(r,n),groups:e}}function aq(t){return{regex:t,deser:([e])=>e}}function zcr(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Wcr(t,e){let r=od(e),n=od(e,"{2}"),i=od(e,"{3}"),s=od(e,"{4}"),o=od(e,"{6}"),a=od(e,"{1,2}"),u=od(e,"{1,3}"),c=od(e,"{1,6}"),l=od(e,"{1,9}"),d=od(e,"{2,4}"),p=od(e,"{4,6}"),f=E=>({regex:RegExp(zcr(E.val)),deser:([v])=>v,literal:!0}),y=(E=>{if(t.literal)return f(E);switch(E.val){case"G":return ad(e.eras("short"),0);case"GG":return ad(e.eras("long"),0);case"y":return Pr(c);case"yy":return Pr(d,Bce);case"yyyy":return Pr(s);case"yyyyy":return Pr(p);case"yyyyyy":return Pr(o);case"M":return Pr(a);case"MM":return Pr(n);case"MMM":return ad(e.months("short",!0),1);case"MMMM":return ad(e.months("long",!0),1);case"L":return Pr(a);case"LL":return Pr(n);case"LLL":return ad(e.months("short",!1),1);case"LLLL":return ad(e.months("long",!1),1);case"d":return Pr(a);case"dd":return Pr(n);case"o":return Pr(u);case"ooo":return Pr(i);case"HH":return Pr(n);case"H":return Pr(a);case"hh":return Pr(n);case"h":return Pr(a);case"mm":return Pr(n);case"m":return Pr(a);case"q":return Pr(a);case"qq":return Pr(n);case"s":return Pr(a);case"ss":return Pr(n);case"S":return Pr(u);case"SSS":return Pr(i);case"u":return aq(l);case"uu":return aq(a);case"uuu":return Pr(r);case"a":return ad(e.meridiems(),0);case"kkkk":return Pr(s);case"kk":return Pr(d,Bce);case"W":return Pr(a);case"WW":return Pr(n);case"E":case"c":return Pr(r);case"EEE":return ad(e.weekdays("short",!1),1);case"EEEE":return ad(e.weekdays("long",!1),1);case"ccc":return ad(e.weekdays("short",!0),1);case"cccc":return ad(e.weekdays("long",!0),1);case"Z":case"ZZ":return cJe(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return cJe(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return aq(/[a-z_+-/]{1,256}?/i);case" ":return aq(/[^\S\n\r]/);default:return f(E)}})(t)||{invalidReason:Vcr};return y.token=t,y}var Jcr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Ycr(t,e,r){let{type:n,value:i}=t;if(n==="literal"){let u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}let s=e[n],o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=Jcr[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function Qcr(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function Xcr(t,e,r){let n=t.match(e);if(n){let i={},s=1;for(let o in r)if(D4(r,o)){let a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}else return[n,{}]}function Zcr(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return At(t.z)||(r=o1.create(t.z)),At(t.Z)||(r||(r=new Pu(t.Z)),n=t.Z),At(t.q)||(t.M=(t.q-1)*3+1),At(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),At(t.u)||(t.S=Uce(t.u)),[Object.keys(t).reduce((s,o)=>{let a=e(o);return a&&(s[a]=t[o]),s},{}),r,n]}var gce=null;function elr(){return gce||(gce=Ln.fromMillis(1555555555555)),gce}function tlr(t,e){if(t.literal)return t;let r=Du.macroTokenToFormatOpts(t.val),n=fYe(r,e);return n==null||n.includes(void 0)?t:n}function dYe(t,e){return Array.prototype.concat(...t.map(r=>tlr(r,e)))}var _q=class{constructor(e,r){if(this.locale=e,this.format=r,this.tokens=dYe(Du.parseFormat(r),e),this.units=this.tokens.map(n=>Wcr(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){let[n,i]=Qcr(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){let[r,n]=Xcr(e,this.regex,this.handlers),[i,s,o]=n?Zcr(n):[null,null,void 0];if(D4(n,"a")&&D4(n,"H"))throw new Nm("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function pYe(t,e,r){return new _q(t,r).explainFromTokens(e)}function rlr(t,e,r){let{result:n,zone:i,specificOffset:s,invalidReason:o}=pYe(t,e,r);return[n,i,s,o]}function fYe(t,e){if(!t)return null;let n=Du.create(e,t).dtFormatter(elr()),i=n.formatToParts(),s=n.resolvedOptions();return i.map(o=>Ycr(o,t,s))}var bce="Invalid DateTime",lJe=864e13;function c8(t){return new ku("unsupported zone",`the zone "${t.name}" is not supported`)}function _ce(t){return t.weekData===null&&(t.weekData=yq(t.c)),t.weekData}function Ece(t){return t.localWeekData===null&&(t.localWeekData=yq(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function p2(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Ln({...r,...e,old:r})}function hYe(t,e,r){let n=t-e*60*1e3,i=r.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;let s=r.offset(n);return i===s?[n,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function uq(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function lq(t,e,r){return hYe(vq(t),e,r)}function dJe(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:i,day:Math.min(t.c.day,gq(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=ls.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=vq(s),[u,c]=hYe(a,r,t.zone);return o!==0&&(u+=o,c=t.zone.offset(u)),{ts:u,o:c}}function x4(t,e,r,n,i,s){let{setZone:o,zone:a}=r;if(t&&Object.keys(t).length!==0||e){let u=e||a,c=Ln.fromObject(t,{...r,zone:u,specificOffset:s});return o?c:c.setZone(a)}else return Ln.invalid(new ku("unparsable",`the input "${i}" can't be parsed as ${n}`))}function cq(t,e,r=!0){return t.isValid?Du.create(cn.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function vce(t,e,r){let n=t.c.year>9999||t.c.year<0,i="";if(n&&t.c.year>=0&&(i+="+"),i+=Ki(t.c.year,n?6:4),r==="year")return i;if(e){if(i+="-",i+=Ki(t.c.month),r==="month")return i;i+="-"}else if(i+=Ki(t.c.month),r==="month")return i;return i+=Ki(t.c.day),i}function pJe(t,e,r,n,i,s,o){let a=!r||t.c.millisecond!==0||t.c.second!==0,u="";switch(o){case"day":case"month":case"year":break;default:if(u+=Ki(t.c.hour),o==="hour")break;if(e){if(u+=":",u+=Ki(t.c.minute),o==="minute")break;a&&(u+=":",u+=Ki(t.c.second))}else{if(u+=Ki(t.c.minute),o==="minute")break;a&&(u+=Ki(t.c.second))}if(o==="second")break;a&&(!n||t.c.millisecond!==0)&&(u+=".",u+=Ki(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!s?u+="Z":t.o<0?(u+="-",u+=Ki(Math.trunc(-t.o/60)),u+=":",u+=Ki(Math.trunc(-t.o%60))):(u+="+",u+=Ki(Math.trunc(t.o/60)),u+=":",u+=Ki(Math.trunc(t.o%60)))),s&&(u+="["+t.zone.ianaName+"]"),u}var mYe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},nlr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},ilr={ordinal:1,hour:0,minute:0,second:0,millisecond:0},dq=["year","month","day","hour","minute","second","millisecond"],slr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],olr=["year","ordinal","hour","minute","second","millisecond"];function pq(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new fq(t);return e}function fJe(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return pq(t)}}function alr(t){if(l8===void 0&&(l8=kn.now()),t.type!=="iana")return t.offset(l8);let e=t.name,r=qce.get(e);return r===void 0&&(r=t.offset(l8),qce.set(e,r)),r}function hJe(t,e){let r=Pm(e.zone,kn.defaultZone);if(!r.isValid)return Ln.invalid(c8(r));let n=cn.fromObject(e),i,s;if(At(t.year))i=kn.now();else{for(let u of dq)At(t[u])&&(t[u]=mYe[u]);let o=UJe(t)||KJe(t);if(o)return Ln.invalid(o);let a=alr(r);[i,s]=lq(t,a,r)}return new Ln({ts:i,zone:r,loc:n,o:s})}function mJe(t,e,r){let n=At(r.round)?!0:r.round,i=At(r.rounding)?"trunc":r.rounding,s=(a,u)=>(a=Kce(a,n||r.calendary?0:2,r.calendary?"round":i),e.loc.clone(r).relFormatter(r).format(a,u)),o=a=>r.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(r.unit)return s(o(r.unit),r.unit);for(let a of r.units){let u=o(a);if(Math.abs(u)>=1)return s(u,a)}return s(t>e?-0:0,r.units[r.units.length-1])}function yJe(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var l8,qce=new Map,Ln=class t{constructor(e){let r=e.zone||kn.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new ku("invalid input"):null)||(r.isValid?null:c8(r));this.ts=At(e.ts)?kn.now():e.ts;let i=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,s]=[e.old.c,e.old.o];else{let a=Fm(e.o)&&!e.old?e.o:r.offset(this.ts);i=uq(this.ts,a),n=Number.isNaN(i.year)?new ku("invalid input"):null,i=n?null:i,s=n?null:a}this._zone=r,this.loc=e.loc||cn.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,r]=yJe(arguments),[n,i,s,o,a,u,c]=r;return hJe({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static utc(){let[e,r]=yJe(arguments),[n,i,s,o,a,u,c]=r;return e.zone=Pu.utcInstance,hJe({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static fromJSDate(e,r={}){let n=Lur(e)?e.valueOf():NaN;if(Number.isNaN(n))return t.invalid("invalid input");let i=Pm(r.zone,kn.defaultZone);return i.isValid?new t({ts:n,zone:i,loc:cn.fromObject(r)}):t.invalid(c8(i))}static fromMillis(e,r={}){if(Fm(e))return e<-lJe||e>lJe?t.invalid("Timestamp out of range"):new t({ts:e,zone:Pm(r.zone,kn.defaultZone),loc:cn.fromObject(r)});throw new Ds(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Fm(e))return new t({ts:e*1e3,zone:Pm(r.zone,kn.defaultZone),loc:cn.fromObject(r)});throw new Ds("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=Pm(r.zone,kn.defaultZone);if(!n.isValid)return t.invalid(c8(n));let i=cn.fromObject(r),s=bq(e,fJe),{minDaysInFirstWeek:o,startOfWeek:a}=ZWe(s,i),u=kn.now(),c=At(r.specificOffset)?n.offset(u):r.specificOffset,l=!At(s.ordinal),d=!At(s.year),p=!At(s.month)||!At(s.day),f=d||p,h=s.weekYear||s.weekNumber;if((f||l)&&h)throw new Nm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&l)throw new Nm("Can't mix ordinal dates with month/day");let y=h||s.weekday&&!f,E,v,w=uq(u,c);y?(E=slr,v=nlr,w=yq(w,o,a)):l?(E=olr,v=ilr,w=yce(w)):(E=dq,v=mYe);let T=!1;for(let F of E){let B=s[F];At(B)?T?s[F]=v[F]:s[F]=w[F]:T=!0}let A=y?Fur(s,o,a):l?Bur(s):UJe(s),C=A||KJe(s);if(C)return t.invalid(C);let x=y?QWe(s,o,a):l?XWe(s):s,[R,M]=lq(x,c,n),I=new t({ts:R,zone:n,o:M,loc:i});return s.weekday&&f&&e.weekday!==I.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${I.toISO()}`):I.isValid?I:t.invalid(I.invalid)}static fromISO(e,r={}){let[n,i]=xcr(e);return x4(n,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,i]=Icr(e);return x4(n,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,i]=Rcr(e);return x4(n,i,r,"HTTP",r)}static fromFormat(e,r,n={}){if(At(e)||At(r))throw new Ds("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=n,o=cn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,c,l]=rlr(o,e,r);return l?t.invalid(l):x4(a,u,n,`format ${r}`,e,c)}static fromString(e,r,n={}){return t.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,i]=Bcr(e);return x4(n,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new Ds("need to specify a reason the DateTime is invalid");let n=e instanceof ku?e:new ku(e,r);if(kn.throwOnInvalid)throw new Sce(n);return new t({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){let n=fYe(e,cn.fromObject(r));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(e,r={}){return dYe(Du.parseFormat(e),cn.fromObject(r)).map(i=>i.val).join("")}static resetCache(){l8=void 0,qce.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?_ce(this).weekYear:NaN}get weekNumber(){return this.isValid?_ce(this).weekNumber:NaN}get weekday(){return this.isValid?_ce(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Ece(this).weekday:NaN}get localWeekNumber(){return this.isValid?Ece(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Ece(this).weekYear:NaN}get ordinal(){return this.isValid?yce(this.c).ordinal:NaN}get monthShort(){return this.isValid?h2.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?h2.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?h2.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?h2.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,r=6e4,n=vq(this.c),i=this.zone.offset(n-e),s=this.zone.offset(n+e),o=this.zone.offset(n-i*r),a=this.zone.offset(n-s*r);if(o===a)return[this];let u=n-o*r,c=n-a*r,l=uq(u,o),d=uq(c,a);return l.hour===d.hour&&l.minute===d.minute&&l.second===d.second&&l.millisecond===d.millisecond?[p2(this,{ts:u}),p2(this,{ts:c})]:[this]}get isInLeapYear(){return h8(this.year)}get daysInMonth(){return gq(this.year,this.month)}get daysInYear(){return this.isValid?I4(this.year):NaN}get weeksInWeekYear(){return this.isValid?f8(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?f8(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:i}=Du.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(Pu.instance(e),r)}toLocal(){return this.setZone(kn.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=Pm(e,kn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||n){let s=e.offset(this.ts),o=this.toObject();[i]=lq(o,s,e)}return p2(this,{ts:i,zone:e})}else return t.invalid(c8(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return p2(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=bq(e,fJe),{minDaysInFirstWeek:n,startOfWeek:i}=ZWe(r,this.loc),s=!At(r.weekYear)||!At(r.weekNumber)||!At(r.weekday),o=!At(r.ordinal),a=!At(r.year),u=!At(r.month)||!At(r.day),c=a||u,l=r.weekYear||r.weekNumber;if((c||o)&&l)throw new Nm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new Nm("Can't mix ordinal dates with month/day");let d;s?d=QWe({...yq(this.c,n,i),...r},n,i):At(r.ordinal)?(d={...this.toObject(),...r},At(r.day)&&(d.day=Math.min(gq(d.year,d.month),d.day))):d=XWe({...yce(this.c),...r});let[p,f]=lq(d,this.o,this.zone);return p2(this,{ts:p,o:f})}plus(e){if(!this.isValid)return this;let r=ls.fromDurationLike(e);return p2(this,dJe(this,r))}minus(e){if(!this.isValid)return this;let r=ls.fromDurationLike(e).negate();return p2(this,dJe(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;let n={},i=ls.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(r){let s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(n.weekNumber=this.weekNumber-1),n.weekday=s}else n.weekday=1;if(i==="quarters"){let s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?Du.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):bce}toLocaleString(e=hq,r={}){return this.isValid?Du.create(this.loc.clone(r),e).formatDateTime(this):bce}toLocaleParts(e={}){return this.isValid?Du.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=pq(o);let a=e==="extended",u=vce(this,a,o);return dq.indexOf(o)>=3&&(u+="T"),u+=pJe(this,a,r,n,i,s,o),u}toISODate({format:e="extended",precision:r="day"}={}){return this.isValid?vce(this,e==="extended",pq(r)):null}toISOWeekDate(){return cq(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=pq(a),(i&&dq.indexOf(a)>=3?"T":"")+pJe(this,o==="extended",r,e,n,s,a)):null}toRFC2822(){return cq(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return cq(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?vce(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(n&&(i+=" "),r?i+="z":e&&(i+="ZZ")),cq(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():bce}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return ls.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=jur(r).map(ls.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,c=Kcr(a,u,s,i);return o?c.negate():c}diffNow(e="milliseconds",r={}){return this.diff(t.now(),e,r)}until(e){return this.isValid?m2.fromDateTimes(this,e):this}hasSame(e,r,n){if(!this.isValid)return!1;let i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(r,n)<=i&&i<=s.endOf(r,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||t.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),mJe(r,this.plus(n),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?mJe(e.base||t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(t.isDateTime))throw new Ds("min requires all arguments be DateTimes");return eJe(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new Ds("max requires all arguments be DateTimes");return eJe(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:i=null,numberingSystem:s=null}=n,o=cn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return pYe(o,e,r)}static fromStringExplain(e,r,n={}){return t.fromFormatExplain(e,r,n)}static buildFormatParser(e,r={}){let{locale:n=null,numberingSystem:i=null}=r,s=cn.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new _q(s,e)}static fromFormatParser(e,r,n={}){if(At(e)||At(r))throw new Ds("fromFormatParser requires an input string and a format parser");let{locale:i=null,numberingSystem:s=null}=n,o=cn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(r.locale))throw new Ds(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);let{result:a,zone:u,specificOffset:c,invalidReason:l}=r.explainFromTokens(e);return l?t.invalid(l):x4(a,u,n,`format ${r.format}`,e,c)}static get DATE_SHORT(){return hq}static get DATE_MED(){return gJe}static get DATE_MED_WITH_WEEKDAY(){return gur}static get DATE_FULL(){return bJe}static get DATE_HUGE(){return _Je}static get TIME_SIMPLE(){return EJe}static get TIME_WITH_SECONDS(){return vJe}static get TIME_WITH_SHORT_OFFSET(){return SJe}static get TIME_WITH_LONG_OFFSET(){return wJe}static get TIME_24_SIMPLE(){return AJe}static get TIME_24_WITH_SECONDS(){return CJe}static get TIME_24_WITH_SHORT_OFFSET(){return TJe}static get TIME_24_WITH_LONG_OFFSET(){return OJe}static get DATETIME_SHORT(){return xJe}static get DATETIME_SHORT_WITH_SECONDS(){return IJe}static get DATETIME_MED(){return RJe}static get DATETIME_MED_WITH_SECONDS(){return DJe}static get DATETIME_MED_WITH_WEEKDAY(){return bur}static get DATETIME_FULL(){return kJe}static get DATETIME_FULL_WITH_SECONDS(){return MJe}static get DATETIME_HUGE(){return PJe}static get DATETIME_HUGE_WITH_SECONDS(){return NJe}};function a8(t){if(Ln.isDateTime(t))return t;if(t&&t.valueOf&&Fm(t.valueOf()))return Ln.fromJSDate(t);if(t&&typeof t=="object")return Ln.fromObject(t);throw new Ds(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var ulr="3.7.2";Nu.DateTime=Ln;Nu.Duration=ls;Nu.FixedOffsetZone=Pu;Nu.IANAZone=o1;Nu.Info=h2;Nu.Interval=m2;Nu.InvalidZone=mq;Nu.Settings=kn;Nu.SystemZone=p8;Nu.VERSION=ulr;Nu.Zone=Bm});var bYe=b((DDr,gYe)=>{"use strict";var y2=yYe();It.prototype.addYear=function(){this._date=this._date.plus({years:1})};It.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")};It.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")};It.prototype.addHour=function(){var t=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=t&&(this._date=this._date.plus({hours:1}))};It.prototype.addMinute=function(){var t=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<t&&(this._date=this._date.plus({hours:1}))};It.prototype.addSecond=function(){var t=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<t&&(this._date=this._date.plus({hours:1}))};It.prototype.subtractYear=function(){this._date=this._date.minus({years:1})};It.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")};It.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")};It.prototype.subtractHour=function(){var t=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=t&&(this._date=this._date.minus({hours:1}))};It.prototype.subtractMinute=function(){var t=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))};It.prototype.subtractSecond=function(){var t=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))};It.prototype.getDate=function(){return this._date.day};It.prototype.getFullYear=function(){return this._date.year};It.prototype.getDay=function(){var t=this._date.weekday;return t==7?0:t};It.prototype.getMonth=function(){return this._date.month-1};It.prototype.getHours=function(){return this._date.hour};It.prototype.getMinutes=function(){return this._date.minute};It.prototype.getSeconds=function(){return this._date.second};It.prototype.getMilliseconds=function(){return this._date.millisecond};It.prototype.getTime=function(){return this._date.valueOf()};It.prototype.getUTCDate=function(){return this._getUTC().day};It.prototype.getUTCFullYear=function(){return this._getUTC().year};It.prototype.getUTCDay=function(){var t=this._getUTC().weekday;return t==7?0:t};It.prototype.getUTCMonth=function(){return this._getUTC().month-1};It.prototype.getUTCHours=function(){return this._getUTC().hour};It.prototype.getUTCMinutes=function(){return this._getUTC().minute};It.prototype.getUTCSeconds=function(){return this._getUTC().second};It.prototype.toISOString=function(){return this._date.toUTC().toISO()};It.prototype.toJSON=function(){return this._date.toJSON()};It.prototype.setDate=function(t){this._date=this._date.set({day:t})};It.prototype.setFullYear=function(t){this._date=this._date.set({year:t})};It.prototype.setDay=function(t){this._date=this._date.set({weekday:t})};It.prototype.setMonth=function(t){this._date=this._date.set({month:t+1})};It.prototype.setHours=function(t){this._date=this._date.set({hour:t})};It.prototype.setMinutes=function(t){this._date=this._date.set({minute:t})};It.prototype.setSeconds=function(t){this._date=this._date.set({second:t})};It.prototype.setMilliseconds=function(t){this._date=this._date.set({millisecond:t})};It.prototype._getUTC=function(){return this._date.toUTC()};It.prototype.toString=function(){return this.toDate().toString()};It.prototype.toDate=function(){return this._date.toJSDate()};It.prototype.isLastDayOfMonth=function(){var t=this._date.plus({days:1}).startOf("day");return this._date.month!==t.month};It.prototype.isLastWeekdayOfMonth=function(){var t=this._date.plus({days:7}).startOf("day");return this._date.month!==t.month};function It(t,e){var r={zone:e};if(t?t instanceof It?this._date=t._date:t instanceof Date?this._date=y2.DateTime.fromJSDate(t,r):typeof t=="number"?this._date=y2.DateTime.fromMillis(t,r):typeof t=="string"&&(this._date=y2.DateTime.fromISO(t,r),this._date.isValid||(this._date=y2.DateTime.fromRFC2822(t,r)),this._date.isValid||(this._date=y2.DateTime.fromSQL(t,r)),this._date.isValid||(this._date=y2.DateTime.fromFormat(t,"EEE, d MMM yyyy HH:mm:ss",r))):this._date=y2.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(t));e&&e!==this._date.zoneName&&(this._date=this._date.setZone(e))}gYe.exports=It});var vYe=b((kDr,EYe)=>{"use strict";function g2(t){return{start:t,count:1}}function _Ye(t,e){t.end=e,t.step=e-t.start,t.count=2}function zce(t,e,r){e&&(e.count===2?(t.push(g2(e.start)),t.push(g2(e.end))):t.push(e)),r&&t.push(r)}function clr(t){for(var e=[],r=void 0,n=0;n<t.length;n++){var i=t[n];typeof i!="number"?(zce(e,r,g2(i)),r=void 0):r?r.count===1?_Ye(r,i):r.step===i-r.end?(r.count++,r.end=i):r.count===2?(e.push(g2(r.start)),r=g2(r.end),_Ye(r,i)):(zce(e,r),r=g2(i)):r=g2(i)}return zce(e,r),e}EYe.exports=clr});var wYe=b((MDr,SYe)=>{"use strict";var llr=vYe();function dlr(t,e,r){var n=llr(t);if(n.length===1){var i=n[0],s=i.step;if(s===1&&i.start===e&&i.end===r)return"*";if(s!==1&&i.start===e&&i.end===r-s+1)return"*/"+s}for(var o=[],a=0,u=n.length;a<u;++a){var c=n[a];if(c.count===1){o.push(c.start);continue}var s=c.step;if(c.step===1){o.push(c.start+"-"+c.end);continue}var l=c.start==0?c.count-1:c.count;c.step*l>c.end?o=o.concat(Array.from({length:c.end-c.start+1}).map(function(p,f){var h=c.start+f;return(h-c.start)%c.step===0?h:null}).filter(function(p){return p!=null})):c.end===r-c.step+1?o.push(c.start+"/"+c.step):o.push(c.start+"-"+c.end+"/"+c.step)}return o.join(",")}SYe.exports=dlr});var TYe=b((PDr,CYe)=>{"use strict";var b2=bYe(),plr=wYe(),AYe=1e4;function Je(t,e){this._options=e,this._utc=e.utc||!1,this._tz=this._utc?"UTC":e.tz,this._currentDate=new b2(e.currentDate,this._tz),this._startDate=e.startDate?new b2(e.startDate,this._tz):null,this._endDate=e.endDate?new b2(e.endDate,this._tz):null,this._isIterator=e.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=e.nthDayOfWeek||0,this.fields=Je._freezeFields(t)}Je.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"];Je.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"};Je.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}];Je.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31];Je.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}};Je.parseDefaults=["0","*","*","*","*","*"];Je.standardValidCharacters=/^[,*\d/-]+$/;Je.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/;Je.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/;Je.validCharacters={second:Je.standardValidCharacters,minute:Je.standardValidCharacters,hour:Je.standardValidCharacters,dayOfMonth:Je.dayOfMonthValidCharacters,month:Je.standardValidCharacters,dayOfWeek:Je.dayOfWeekValidCharacters};Je._isValidConstraintChar=function(e,r){return typeof r!="string"?!1:e.chars.some(function(n){return r.indexOf(n)>-1})};Je._parseField=function(e,r,n){switch(e){case"month":case"dayOfWeek":var i=Je.aliases[e];r=r.replace(/[a-z]{3}/gi,function(u){if(u=u.toLowerCase(),typeof i[u]<"u")return i[u];throw new Error('Validation error, cannot resolve alias "'+u+'"')});break}if(!Je.validCharacters[e].test(r))throw new Error("Invalid characters, got value: "+r);r.indexOf("*")!==-1?r=r.replace(/\*/g,n.min+"-"+n.max):r.indexOf("?")!==-1&&(r=r.replace(/\?/g,n.min+"-"+n.max));function s(u){var c=[];function l(h){if(h instanceof Array)for(var y=0,E=h.length;y<E;y++){var v=h[y];if(Je._isValidConstraintChar(n,v)){c.push(v);continue}if(typeof v!="number"||Number.isNaN(v)||v<n.min||v>n.max)throw new Error("Constraint error, got value "+v+" expected range "+n.min+"-"+n.max);c.push(v)}else{if(Je._isValidConstraintChar(n,h)){c.push(h);return}var w=+h;if(Number.isNaN(w)||w<n.min||w>n.max)throw new Error("Constraint error, got value "+h+" expected range "+n.min+"-"+n.max);e==="dayOfWeek"&&(w=w%7),c.push(w)}}var d=u.split(",");if(!d.every(function(h){return h.length>0}))throw new Error("Invalid list value format");if(d.length>1)for(var p=0,f=d.length;p<f;p++)l(o(d[p]));else l(o(u));return c.sort(Je._sortCompareFn),c}function o(u){var c=1,l=u.split("/");if(l.length>2)throw new Error("Invalid repeat: "+u);return l.length>1?(l[0]==+l[0]&&(l=[l[0]+"-"+n.max,l[1]]),a(l[0],l[l.length-1])):a(u,c)}function a(u,c){var l=[],d=u.split("-");if(d.length>1){if(d.length<2)return+u;if(!d[0].length){if(!d[1].length)throw new Error("Invalid range: "+u);return+u}var p=+d[0],f=+d[1];if(Number.isNaN(p)||Number.isNaN(f)||p<n.min||f>n.max)throw new Error("Constraint error, got range "+p+"-"+f+" expected range "+n.min+"-"+n.max);if(p>f)throw new Error("Invalid range: "+u);var h=+c;if(Number.isNaN(h)||h<=0)throw new Error("Constraint error, cannot repeat at every "+h+" time.");e==="dayOfWeek"&&f%7===0&&l.push(0);for(var y=p,E=f;y<=E;y++){var v=l.indexOf(y)!==-1;!v&&h>0&&h%c===0?(h=1,l.push(y)):h++}return l}return Number.isNaN(+u)?u:+u}return s(r)};Je._sortCompareFn=function(t,e){var r=typeof t=="number",n=typeof e=="number";return r&&n?t-e:!r&&n?1:r&&!n?-1:t.localeCompare(e)};Je._handleMaxDaysInMonth=function(t){if(t.month.length===1){var e=Je.daysInMonth[t.month[0]-1];if(t.dayOfMonth[0]>e)throw new Error("Invalid explicit day of month definition");return t.dayOfMonth.filter(function(r){return r==="L"?!0:r<=e}).sort(Je._sortCompareFn)}};Je._freezeFields=function(t){for(var e=0,r=Je.map.length;e<r;++e){var n=Je.map[e],i=t[n];t[n]=Object.freeze(i)}return Object.freeze(t)};Je.prototype._applyTimezoneShift=function(t,e,r){if(r==="Month"||r==="Day"){var n=t.getTime();t[e+r]();var i=t.getTime();n===i&&(t.getMinutes()===0&&t.getSeconds()===0?t.addHour():t.getMinutes()===59&&t.getSeconds()===59&&t.subtractHour())}else{var s=t.getHours();t[e+r]();var o=t.getHours(),a=o-s;a===2?this.fields.hour.length!==24&&(this._dstStart=o):a===0&&t.getMinutes()===0&&t.getSeconds()===0&&this.fields.hour.length!==24&&(this._dstEnd=o)}};Je.prototype._findSchedule=function(e){function r(v,w){for(var T=0,A=w.length;T<A;T++)if(w[T]>=v)return w[T]===v;return w[0]===v}function n(v,w){if(w<6){if(v.getDate()<8&&w===1)return!0;var T=v.getDate()%7?1:0,A=v.getDate()-v.getDate()%7,C=Math.floor(A/7)+T;return C===w}return!1}function i(v){return v.length>0&&v.some(function(w){return typeof w=="string"&&w.indexOf("L")>=0})}e=e||!1;var s=e?"subtract":"add",o=new b2(this._currentDate,this._tz),a=this._startDate,u=this._endDate,c=o.getTime(),l=0;function d(v){return v.some(function(w){if(!i([w]))return!1;var T=Number.parseInt(w[0])%7;if(Number.isNaN(T))throw new Error("Invalid last weekday of the month expression: "+w);return o.getDay()===T&&o.isLastWeekdayOfMonth()})}for(;l<AYe;){if(l++,e){if(a&&o.getTime()-a.getTime()<0)throw new Error("Out of the timespan range")}else if(u&&u.getTime()-o.getTime()<0)throw new Error("Out of the timespan range");var p=r(o.getDate(),this.fields.dayOfMonth);i(this.fields.dayOfMonth)&&(p=p||o.isLastDayOfMonth());var f=r(o.getDay(),this.fields.dayOfWeek);i(this.fields.dayOfWeek)&&(f=f||d(this.fields.dayOfWeek));var h=this.fields.dayOfMonth.length>=Je.daysInMonth[o.getMonth()],y=this.fields.dayOfWeek.length===Je.constraints[5].max-Je.constraints[5].min+1,E=o.getHours();if(!p&&(!f||y)){this._applyTimezoneShift(o,s,"Day");continue}if(!h&&y&&!p){this._applyTimezoneShift(o,s,"Day");continue}if(h&&!y&&!f){this._applyTimezoneShift(o,s,"Day");continue}if(this._nthDayOfWeek>0&&!n(o,this._nthDayOfWeek)){this._applyTimezoneShift(o,s,"Day");continue}if(!r(o.getMonth()+1,this.fields.month)){this._applyTimezoneShift(o,s,"Month");continue}if(r(E,this.fields.hour)){if(this._dstEnd===E&&!e){this._dstEnd=null,this._applyTimezoneShift(o,"add","Hour");continue}}else if(this._dstStart!==E){this._dstStart=null,this._applyTimezoneShift(o,s,"Hour");continue}else if(!r(E-1,this.fields.hour)){o[s+"Hour"]();continue}if(!r(o.getMinutes(),this.fields.minute)){this._applyTimezoneShift(o,s,"Minute");continue}if(!r(o.getSeconds(),this.fields.second)){this._applyTimezoneShift(o,s,"Second");continue}if(c===o.getTime()){s==="add"||o.getMilliseconds()===0?this._applyTimezoneShift(o,s,"Second"):o.setMilliseconds(0);continue}break}if(l>=AYe)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new b2(o,this._tz),this._hasIterated=!0,o};Je.prototype.next=function(){var e=this._findSchedule();return this._isIterator?{value:e,done:!this.hasNext()}:e};Je.prototype.prev=function(){var e=this._findSchedule(!0);return this._isIterator?{value:e,done:!this.hasPrev()}:e};Je.prototype.hasNext=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(),!0}catch{return!1}finally{this._currentDate=t,this._hasIterated=e}};Je.prototype.hasPrev=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(!0),!0}catch{return!1}finally{this._currentDate=t,this._hasIterated=e}};Je.prototype.iterate=function(e,r){var n=[];if(e>=0)for(var i=0,s=e;i<s;i++)try{var o=this.next();n.push(o),r&&r(o,i)}catch{break}else for(var i=0,s=e;i>s;i--)try{var o=this.prev();n.push(o),r&&r(o,i)}catch{break}return n};Je.prototype.reset=function(e){this._currentDate=new b2(e||this._options.currentDate)};Je.prototype.stringify=function(e){for(var r=[],n=e?0:1,i=Je.map.length;n<i;++n){var s=Je.map[n],o=this.fields[s],a=Je.constraints[n];s==="dayOfMonth"&&this.fields.month.length===1?a={min:1,max:Je.daysInMonth[this.fields.month[0]-1]}:s==="dayOfWeek"&&(a={min:0,max:6},o=o[o.length-1]===7?o.slice(0,-1):o),r.push(plr(o,a.min,a.max))}return r.join(" ")};Je.parse=function(e,r){var n=this;typeof r=="function"&&(r={});function i(s,o){o||(o={}),typeof o.currentDate>"u"&&(o.currentDate=new b2(void 0,n._tz)),Je.predefined[s]&&(s=Je.predefined[s]);var a=[],u=(s+"").trim().split(/\s+/);if(u.length>6)throw new Error("Invalid cron expression");for(var c=Je.map.length-u.length,l=0,d=Je.map.length;l<d;++l){var p=Je.map[l],f=u[u.length>d?l:l-c];if(l<c||!f)a.push(Je._parseField(p,Je.parseDefaults[l],Je.constraints[l]));else{var h=p==="dayOfWeek"?w(f):f;a.push(Je._parseField(p,h,Je.constraints[l]))}}for(var y={},l=0,d=Je.map.length;l<d;l++){var E=Je.map[l];y[E]=a[l]}var v=Je._handleMaxDaysInMonth(y);return y.dayOfMonth=v||y.dayOfMonth,new Je(y,o);function w(T){var A=T.split("#");if(A.length>1){var C=+A[A.length-1];if(/,/.test(T))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(T))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(T))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(A.length>2||Number.isNaN(C)||C<1||C>5)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return o.nthDayOfWeek=C,A[0]}return T}}return i(e,r)};Je.fieldsToExpression=function(e,r){function n(p,f,h){if(!f)throw new Error("Validation error, Field "+p+" is missing");if(f.length===0)throw new Error("Validation error, Field "+p+" contains no values");for(var y=0,E=f.length;y<E;y++){var v=f[y];if(!Je._isValidConstraintChar(h,v)&&(typeof v!="number"||Number.isNaN(v)||v<h.min||v>h.max))throw new Error("Constraint error, got value "+v+" expected range "+h.min+"-"+h.max)}}for(var i={},s=0,o=Je.map.length;s<o;++s){var a=Je.map[s],u=e[a];n(a,u,Je.constraints[s]);for(var c=[],l=-1;++l<u.length;)c[l]=u[l];if(u=c.sort(Je._sortCompareFn).filter(function(p,f,h){return!f||p!==h[f-1]}),u.length!==c.length)throw new Error("Validation error, Field "+a+" contains duplicate values");i[a]=u}var d=Je._handleMaxDaysInMonth(i);return i.dayOfMonth=d||i.dayOfMonth,new Je(i,r||{})};CYe.exports=Je});var Wce=b((NDr,OYe)=>{"use strict";var Aq=TYe();function qm(){}qm._parseEntry=function(e){var r=e.split(" ");if(r.length===6)return{interval:Aq.parse(e)};if(r.length>6)return{interval:Aq.parse(r.slice(0,6).join(" ")),command:r.slice(6,r.length)};throw new Error("Invalid entry: "+e)};qm.parseExpression=function(e,r){return Aq.parse(e,r)};qm.fieldsToExpression=function(e,r){return Aq.fieldsToExpression(e,r)};qm.parseString=function(e){for(var r=e.split(`
`),n={variables:{},expressions:[],errors:{}},i=0,s=r.length;i<s;i++){var o=r[i],a=null,u=o.trim();if(u.length>0){if(u.match(/^#/))continue;if(a=u.match(/^(.*)=(.*)$/))n.variables[a[1]]=a[2];else{var c=null;try{c=qm._parseEntry("0 "+u),n.expressions.push(c.interval)}catch(l){n.errors[u]=l}}}}return n};qm.parseFile=function(e,r){require("fs").readFile(e,function(n,i){if(n){r(n);return}return r(null,qm.parseString(i.toString()))})};OYe.exports=qm});var Lm=b(Cq=>{"use strict";Object.defineProperty(Cq,"__esModule",{value:!0});Cq.QueueBase=void 0;var flr=require("events"),g8=Lc(),hlr=nB(),mlr=o8(),ylr=C4(),glr=oB(),Jce=class extends flr.EventEmitter{constructor(e,r={connection:{}},n=mlr.RedisConnection,i=!1){if(super(),this.name=e,this.opts=r,this.closed=!1,this.hasBlockingConnection=!1,this.hasBlockingConnection=i,this.opts=Object.assign({prefix:"bull"},r),!e)throw new Error("Queue name must be provided");if(e.includes(":"))throw new Error("Queue name cannot contain :");this.connection=new n(r.connection,{shared:(0,g8.isRedisInstance)(r.connection),blocking:i,skipVersionCheck:r.skipVersionCheck,skipWaitingForReady:r.skipWaitingForReady}),this.connection.on("error",o=>this.emit("error",o)),this.connection.on("close",()=>{this.closing||this.emit("ioredis:close")});let s=new glr.QueueKeys(r.prefix);this.qualifiedName=s.getQueueQualifiedName(e),this.keys=s.getKeys(e),this.toKey=o=>s.toKey(e,o),this.createScripts()}get client(){return this.connection.client}createScripts(){this.scripts=(0,hlr.createScripts)(this)}get redisVersion(){return this.connection.redisVersion}get Job(){return ylr.Job}emit(e,...r){try{return super.emit(e,...r)}catch(n){try{return super.emit("error",n)}catch(i){return console.error(i),!1}}}waitUntilReady(){return this.client}base64Name(){return Buffer.from(this.name).toString("base64")}clientName(e=""){let r=this.base64Name();return`${this.opts.prefix}:${r}${e}`}async close(){this.closing||(this.closing=this.connection.close()),await this.closing,this.closed=!0}disconnect(){return this.connection.disconnect()}async checkConnectionError(e,r=g8.DELAY_TIME_5){try{return await e()}catch(n){if((0,g8.isNotConnectionError)(n)&&this.emit("error",n),!this.closing&&r)await(0,g8.delay)(r);else return}}trace(e,r,n,i,s){return(0,g8.trace)(this.opts.telemetry,e,this.name,r,n,i,s)}};Cq.QueueBase=Jce});var Oq=b(_2=>{"use strict";Object.defineProperty(_2,"__esModule",{value:!0});_2.defaultRepeatStrategy=_2.JobScheduler=void 0;var blr=(or(),Wt(sr)),_lr=Wce(),Tq=C4(),Elr=Lm(),b8=Tu(),vlr=Lc(),Yce=class extends Elr.QueueBase{constructor(e,r,n){super(e,r,n),this.repeatStrategy=r.settings&&r.settings.repeatStrategy||_2.defaultRepeatStrategy}async upsertJobScheduler(e,r,n,i,s,{override:o,producerId:a}){let{every:u,limit:c,pattern:l,offset:d}=r;if(l&&u)throw new Error("Both .pattern and .every options are defined for this repeatable job");if(!l&&!u)throw new Error("Either .pattern or .every options must be defined for this repeatable job");if(r.immediately&&r.startDate)throw new Error("Both .immediately and .startDate options are defined for this repeatable job");r.immediately&&r.every&&console.warn("Using option immediately with every does not affect the job's schedule. Job will run immediately anyway.");let p=r.count?r.count+1:1;if(typeof r.limit<"u"&&p>r.limit)return;let f=Date.now(),{endDate:h}=r;if(h&&f>new Date(h).getTime())return;let y=s.prevMillis||0;f=y<f?f:y;let{immediately:E}=r,v=blr.__rest(r,["immediately"]),w,T=null;if(l&&(w=await this.repeatStrategy(f,r,n),w<f&&(w=f)),w||u)return this.trace(b8.SpanKind.PRODUCER,"add",`${this.name}.${n}`,async(A,C)=>{var x,R;let M=s.telemetry;if(C){let F=(x=s.telemetry)===null||x===void 0?void 0:x.omitContext,B=((R=s.telemetry)===null||R===void 0?void 0:R.metadata)||!F&&C;(B||F)&&(M={metadata:B,omitContext:F})}let I=this.getNextJobOpts(w,e,Object.assign(Object.assign({},s),{repeat:v,telemetry:M}),p,T);if(o){w<f&&(w=f);let[F,B]=await this.scripts.addJobScheduler(e,w,JSON.stringify(typeof i>"u"?{}:i),Tq.Job.optsAsJSON(s),{name:n,startDate:r.startDate?new Date(r.startDate).getTime():void 0,endDate:h?new Date(h).getTime():void 0,tz:r.tz,pattern:l,every:u,limit:c,offset:T},Tq.Job.optsAsJSON(I),a),K=typeof B=="string"?parseInt(B,10):B,k=new this.Job(this,n,i,Object.assign(Object.assign({},I),{delay:K}),F);return k.id=F,A?.setAttributes({[b8.TelemetryAttributes.JobSchedulerId]:e,[b8.TelemetryAttributes.JobId]:k.id}),k}else{let F=await this.scripts.updateJobSchedulerNextMillis(e,w,JSON.stringify(typeof i>"u"?{}:i),Tq.Job.optsAsJSON(I),a);if(F){let B=new this.Job(this,n,i,I,F);return B.id=F,A?.setAttributes({[b8.TelemetryAttributes.JobSchedulerId]:e,[b8.TelemetryAttributes.JobId]:B.id}),B}}})}getNextJobOpts(e,r,n,i,s){var o,a;let u=this.getSchedulerNextJobId({jobSchedulerId:r,nextMillis:e}),c=Date.now(),l=e+s-c,d=Object.assign(Object.assign({},n),{jobId:u,delay:l<0?0:l,timestamp:c,prevMillis:e,repeatJobKey:r});return d.repeat=Object.assign(Object.assign({},n.repeat),{offset:s,count:i,startDate:!((o=n.repeat)===null||o===void 0)&&o.startDate?new Date(n.repeat.startDate).getTime():void 0,endDate:!((a=n.repeat)===null||a===void 0)&&a.endDate?new Date(n.repeat.endDate).getTime():void 0}),d}async removeJobScheduler(e){return this.scripts.removeJobScheduler(e)}async getSchedulerData(e,r,n){let i=await e.hgetall(this.toKey("repeat:"+r));return this.transformSchedulerData(r,i,n)}transformSchedulerData(e,r,n){if(r){let i={key:e,name:r.name,next:n};return r.ic&&(i.iterationCount=parseInt(r.ic)),r.limit&&(i.limit=parseInt(r.limit)),r.startDate&&(i.startDate=parseInt(r.startDate)),r.endDate&&(i.endDate=parseInt(r.endDate)),r.tz&&(i.tz=r.tz),r.pattern&&(i.pattern=r.pattern),r.every&&(i.every=parseInt(r.every)),r.offset&&(i.offset=parseInt(r.offset)),(r.data||r.opts)&&(i.template=this.getTemplateFromJSON(r.data,r.opts)),i}if(e.includes(":"))return this.keyToData(e,n)}keyToData(e,r){let n=e.split(":"),i=n.slice(4).join(":")||null;return{key:e,name:n[0],id:n[1]||null,endDate:parseInt(n[2])||null,tz:n[3]||null,pattern:i,next:r}}async getScheduler(e){let[r,n]=await this.scripts.getJobScheduler(e);return this.transformSchedulerData(e,r?(0,vlr.array2obj)(r):null,n?parseInt(n):null)}getTemplateFromJSON(e,r){let n={};return e&&(n.data=JSON.parse(e)),r&&(n.opts=Tq.Job.optsFromJSON(r)),n}async getJobSchedulers(e=0,r=-1,n=!1){let i=await this.client,s=this.keys.repeat,o=n?await i.zrange(s,e,r,"WITHSCORES"):await i.zrevrange(s,e,r,"WITHSCORES"),a=[];for(let u=0;u<o.length;u+=2)a.push(this.getSchedulerData(i,o[u],parseInt(o[u+1])));return Promise.all(a)}async getSchedulersCount(){let e=this.keys.repeat;return(await this.client).zcard(e)}getSchedulerNextJobId({nextMillis:e,jobSchedulerId:r}){return`repeat:${r}:${e}`}};_2.JobScheduler=Yce;var Slr=(t,e)=>{let{pattern:r}=e,n=new Date(t),i=e.startDate&&new Date(e.startDate),s=i>n?i:n,o=(0,_lr.parseExpression)(r,Object.assign(Object.assign({},e),{currentDate:s}));try{return e.immediately?new Date().getTime():o.next().getTime()}catch{}};_2.defaultRepeatStrategy=Slr});var Qce=b((qDr,xYe)=>{var{EventEmitter:wlr}=require("events"),xq=class{constructor(){this.eventEmitter=new wlr,this.onabort=null,this.aborted=!1,this.reason=void 0}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(e,r){this.eventEmitter.removeListener(e,r)}addEventListener(e,r){this.eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[n]=="function"&&this[n](r),this.eventEmitter.emit(e,r)}throwIfAborted(){if(this.aborted)throw this.reason}static abort(e){let r=new _8;return r.abort(),r.signal}static timeout(e){let r=new _8;return setTimeout(()=>r.abort(new Error("TimeoutError")),e),r.signal}},_8=class{constructor(){this.signal=new xq}abort(e){this.signal.aborted||(this.signal.aborted=!0,e?this.signal.reason=e:this.signal.reason=new Error("AbortError"),this.signal.dispatchEvent("abort"))}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}};xYe.exports={AbortController:_8,AbortSignal:xq}});var Zce=b(Rq=>{"use strict";Object.defineProperty(Rq,"__esModule",{value:!0});Rq.LockManager=void 0;var Alr=Qce(),Iq=Tu(),Xce=class{constructor(e,r){this.worker=e,this.opts=r,this.trackedJobs=new Map,this.closed=!1}start(){this.closed||this.opts.lockRenewTime>0&&this.startLockExtenderTimer()}async extendLocks(e){await this.worker.trace(Iq.SpanKind.INTERNAL,"extendLocks",this.worker.name,async r=>{r?.setAttributes({[Iq.TelemetryAttributes.WorkerId]:this.opts.workerId,[Iq.TelemetryAttributes.WorkerName]:this.opts.workerName,[Iq.TelemetryAttributes.WorkerJobsToExtendLocks]:e});try{let n=e.map(o=>{var a;return((a=this.trackedJobs.get(o))===null||a===void 0?void 0:a.token)||""}),i=await this.worker.extendJobLocks(e,n,this.opts.lockDuration);if(i.length>0){this.worker.emit("lockRenewalFailed",i);for(let o of i)this.worker.emit("error",new Error(`could not renew lock for job ${o}`))}let s=e.filter(o=>!i.includes(o));s.length>0&&this.worker.emit("locksRenewed",{count:s.length,jobIds:s})}catch(n){this.worker.emit("error",n)}})}startLockExtenderTimer(){clearTimeout(this.lockRenewalTimer),this.closed||(this.lockRenewalTimer=setTimeout(async()=>{let e=Date.now(),r=[];for(let n of this.trackedJobs.keys()){let i=this.trackedJobs.get(n),{ts:s,token:o,abortController:a}=i;if(!s){this.trackedJobs.set(n,{token:o,ts:e,abortController:a});continue}s+this.opts.lockRenewTime/2<e&&(this.trackedJobs.set(n,{token:o,ts:e,abortController:a}),r.push(n))}r.length&&await this.extendLocks(r),this.startLockExtenderTimer()},this.opts.lockRenewTime/2))}async close(){this.closed||(this.closed=!0,this.lockRenewalTimer&&(clearTimeout(this.lockRenewalTimer),this.lockRenewalTimer=void 0),this.trackedJobs.clear())}trackJob(e,r,n,i=!1){let s=i?new Alr.AbortController:void 0;return!this.closed&&e&&this.trackedJobs.set(e,{token:r,ts:n,abortController:s}),s}untrackJob(e){this.trackedJobs.delete(e)}getActiveJobCount(){return this.trackedJobs.size}isRunning(){return!this.closed&&this.lockRenewalTimer!==void 0}cancelJob(e,r){let n=this.trackedJobs.get(e);return n?.abortController?(n.abortController.abort(r),!0):!1}cancelAllJobs(e){for(let r of this.trackedJobs.values())r.abortController&&r.abortController.abort(e)}getTrackedJobIds(){return Array.from(this.trackedJobs.keys())}};Rq.LockManager=Xce});var RYe=b(kq=>{"use strict";Object.defineProperty(kq,"__esModule",{value:!0});kq.QueueEvents=void 0;var IYe=(or(),Wt(sr)),Dq=Lc(),Clr=Lm(),ele=class extends Clr.QueueBase{constructor(e,r={connection:{}},n){var{connection:i,autorun:s=!0}=r,o=IYe.__rest(r,["connection","autorun"]);super(e,Object.assign(Object.assign({},o),{connection:(0,Dq.isRedisInstance)(i)?i.duplicate():i}),n,!0),this.running=!1,this.blocking=!1,this.opts=Object.assign({blockingTimeout:1e4},this.opts),s&&this.run().catch(a=>this.emit("error",a))}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}async run(){if(this.running)throw new Error("Queue Events is already running.");try{this.running=!0;let e=await this.client;try{await e.client("SETNAME",this.clientName(Dq.QUEUE_EVENT_SUFFIX))}catch(r){if(!Dq.clientCommandMessageReg.test(r.message))throw r}await this.consumeEvents(e)}catch(e){throw this.running=!1,e}}async consumeEvents(e){let r=this.opts,n=this.keys.events,i=r.lastEventId||"$";for(;!this.closing;){this.blocking=!0;let s=await this.checkConnectionError(()=>e.xread("BLOCK",r.blockingTimeout,"STREAMS",n,i));if(this.blocking=!1,s){let a=s[0][1];for(let u=0;u<a.length;u++){i=a[u][0];let c=(0,Dq.array2obj)(a[u][1]);switch(c.event){case"progress":c.data=JSON.parse(c.data);break;case"completed":c.returnvalue=JSON.parse(c.returnvalue);break}let{event:l}=c,d=IYe.__rest(c,["event"]);l==="drained"?this.emit(l,i):(this.emit(l,d,i),d.jobId&&this.emit(`${l}:${d.jobId}`,d,i))}}}}async close(){return this.closing||(this.closing=(async()=>{try{(await this.client).disconnect(),await this.connection.close(this.blocking)}finally{this.closed=!0}})()),this.closing}};kq.QueueEvents=ele});var DYe=b(Mq=>{"use strict";Object.defineProperty(Mq,"__esModule",{value:!0});Mq.QueueEventsProducer=void 0;var Tlr=(or(),Wt(sr)),Olr=Lm(),tle=class extends Olr.QueueBase{constructor(e,r={connection:{}},n){super(e,Object.assign({blockingConnection:!1},r),n),this.opts=r}async publishEvent(e,r=1e3){let n=await this.client,i=this.keys.events,{eventName:s}=e,o=Tlr.__rest(e,["eventName"]),a=["MAXLEN","~",r,"*","event",s];for(let[u,c]of Object.entries(o))a.push(u,c);await n.xadd(i,...a)}async close(){this.closing||(this.closing=this.connection.close()),await this.closing}};Mq.QueueEventsProducer=tle});var nle=b(Pq=>{"use strict";Object.defineProperty(Pq,"__esModule",{value:!0});Pq.QueueGetters=void 0;var xlr=(or(),Wt(sr)),Ilr=Lm(),kYe=Lc(),rle=class extends Ilr.QueueBase{getJob(e){return this.Job.fromId(this,e)}commandByType(e,r,n){return e.map(i=>{i=i==="waiting"?"wait":i;let s=this.toKey(i);switch(i){case"completed":case"failed":case"delayed":case"prioritized":case"repeat":case"waiting-children":return n(s,r?"zcard":"zrange");case"active":case"wait":case"paused":return n(s,r?"llen":"lrange")}})}sanitizeJobTypes(e){let r=typeof e=="string"?[e]:e;if(Array.isArray(r)&&r.length>0){let n=[...r];return n.indexOf("waiting")!==-1&&n.push("paused"),[...new Set(n)]}return["active","completed","delayed","failed","paused","prioritized","waiting","waiting-children"]}async count(){return await this.getJobCountByTypes("waiting","paused","delayed","prioritized","waiting-children")}async getRateLimitTtl(e){return this.scripts.getRateLimitTtl(e)}async getDebounceJobId(e){return(await this.client).get(`${this.keys.de}:${e}`)}async getDeduplicationJobId(e){return(await this.client).get(`${this.keys.de}:${e}`)}async getGlobalConcurrency(){let r=await(await this.client).hget(this.keys.meta,"concurrency");return r?Number(r):null}async getGlobalRateLimit(){let e=await this.client,[r,n]=await e.hmget(this.keys.meta,"max","duration");return r&&n?{max:Number(r),duration:Number(n)}:null}async getJobCountByTypes(...e){let r=await this.getJobCounts(...e);return Object.values(r).reduce((n,i)=>n+i,0)}async getJobCounts(...e){let r=this.sanitizeJobTypes(e),n=await this.scripts.getCounts(r),i={};return n.forEach((s,o)=>{i[r[o]]=s||0}),i}getJobState(e){return this.scripts.getState(e)}async getMeta(){let r=await(await this.client).hgetall(this.keys.meta),{concurrency:n,max:i,duration:s,paused:o,"opts.maxLenEvents":a}=r,c=xlr.__rest(r,["concurrency","max","duration","paused","opts.maxLenEvents"]);return n&&(c.concurrency=Number(n)),a&&(c.maxLenEvents=Number(a)),i&&(c.max=Number(i)),s&&(c.duration=Number(s)),c.paused=o==="1",c}getCompletedCount(){return this.getJobCountByTypes("completed")}getFailedCount(){return this.getJobCountByTypes("failed")}getDelayedCount(){return this.getJobCountByTypes("delayed")}getActiveCount(){return this.getJobCountByTypes("active")}getPrioritizedCount(){return this.getJobCountByTypes("prioritized")}async getCountsPerPriority(e){let r=[...new Set(e)],n=await this.scripts.getCountsPerPriority(r),i={};return n.forEach((s,o)=>{i[`${r[o]}`]=s||0}),i}getWaitingCount(){return this.getJobCountByTypes("waiting")}getWaitingChildrenCount(){return this.getJobCountByTypes("waiting-children")}getWaiting(e=0,r=-1){return this.getJobs(["waiting"],e,r,!0)}getWaitingChildren(e=0,r=-1){return this.getJobs(["waiting-children"],e,r,!0)}getActive(e=0,r=-1){return this.getJobs(["active"],e,r,!0)}getDelayed(e=0,r=-1){return this.getJobs(["delayed"],e,r,!0)}getPrioritized(e=0,r=-1){return this.getJobs(["prioritized"],e,r,!0)}getCompleted(e=0,r=-1){return this.getJobs(["completed"],e,r,!1)}getFailed(e=0,r=-1){return this.getJobs(["failed"],e,r,!1)}async getDependencies(e,r,n,i){let s=this.toKey(r=="processed"?`${e}:processed`:`${e}:dependencies`),{items:o,total:a,jobs:u}=await this.scripts.paginate(s,{start:n,end:i,fetchJobs:!0});return{items:o,jobs:u,total:a}}async getRanges(e,r=0,n=1,i=!1){let s=[];this.commandByType(e,!1,(u,c)=>{switch(c){case"lrange":s.push("lrange");break;case"zrange":s.push("zrange");break}});let o=await this.scripts.getRanges(e,r,n,i),a=[];return o.forEach((u,c)=>{let l=u||[];i&&s[c]==="lrange"?a=a.concat(l.reverse()):a=a.concat(l)}),[...new Set(a)]}async getJobs(e,r=0,n=-1,i=!1){let s=this.sanitizeJobTypes(e),o=await this.getRanges(s,r,n,i);return Promise.all(o.map(a=>this.Job.fromId(this,a)))}async getJobLogs(e,r=0,n=-1,i=!0){let o=(await this.client).multi(),a=this.toKey(e+":logs");i?o.lrange(a,r,n):o.lrange(a,-(n+1),-(r+1)),o.llen(a);let u=await o.exec();return i||u[0][1].reverse(),{logs:u[0][1],count:u[1][1]}}async baseGetClients(e){let r=await this.client;try{if(r.isCluster){let n=r.nodes(),i=[];for(let o=0;o<n.length;o++){let u=await n[o].client("LIST"),c=this.parseClientList(u,e);i.push(c)}return i.reduce((o,a)=>o.length>a.length?o:a,[])}else{let n=await r.client("LIST");return this.parseClientList(n,e)}}catch(n){if(!kYe.clientCommandMessageReg.test(n.message))throw n;return[{name:"GCP does not support client list"}]}}getWorkers(){let e=`${this.clientName()}`,r=`${this.clientName()}:w:`,n=i=>i&&(i===e||i.startsWith(r));return this.baseGetClients(n)}async getWorkersCount(){return(await this.getWorkers()).length}async getQueueEvents(){let e=`${this.clientName()}${kYe.QUEUE_EVENT_SUFFIX}`;return this.baseGetClients(r=>r===e)}async getMetrics(e,r=0,n=-1){let[i,s,o]=await this.scripts.getMetrics(e,r,n);return{meta:{count:parseInt(i[0]||"0",10),prevTS:parseInt(i[1]||"0",10),prevCount:parseInt(i[2]||"0",10)},data:s.map(a=>+a||0),count:o}}parseClientList(e,r){let n=e.split(/\r?\n/),i=[];return n.forEach(s=>{let o={};s.split(" ").forEach(function(c){let l=c.indexOf("="),d=c.substring(0,l),p=c.substring(l+1);o[d]=p});let u=o.name;r(u)&&(o.name=this.name,o.rawname=u,i.push(o))}),i}async exportPrometheusMetrics(e){let r=await this.getJobCounts(),n=[];n.push("# HELP bullmq_job_count Number of jobs in the queue by state"),n.push("# TYPE bullmq_job_count gauge");let i=e?Object.keys(e).reduce((s,o)=>`${s}, ${o}="${e[o]}"`,""):"";for(let[s,o]of Object.entries(r))n.push(`bullmq_job_count{queue="${this.name}", state="${s}"${i}} ${o}`);return n.join(`
`)}};Pq.QueueGetters=rle});var Nq=b(E2=>{"use strict";Object.defineProperty(E2,"__esModule",{value:!0});E2.getNextMillis=E2.Repeat=void 0;var Rlr=(or(),Wt(sr)),Dlr=Wce(),klr=require("crypto"),Mlr=Lm(),ile=class extends Mlr.QueueBase{constructor(e,r,n){super(e,r,n),this.repeatStrategy=r.settings&&r.settings.repeatStrategy||E2.getNextMillis,this.repeatKeyHashAlgorithm=r.settings&&r.settings.repeatKeyHashAlgorithm||"md5"}async updateRepeatableJob(e,r,n,{override:i}){var s,o;let a=Object.assign({},n.repeat);(s=a.pattern)!==null&&s!==void 0||(a.pattern=a.cron),delete a.cron;let u=a.count?a.count+1:1;if(typeof a.limit<"u"&&u>a.limit)return;let c=Date.now(),{endDate:l}=a;if(l&&c>new Date(l).getTime())return;let d=n.prevMillis||0;c=d<c?c:d;let p=await this.repeatStrategy(c,a,e),{every:f,pattern:h}=a,y=!!((f||h)&&a.immediately),E=y&&f?c-p:void 0;if(p){!d&&n.jobId&&(a.jobId=n.jobId);let v=MYe(e,a),w=(o=n.repeat.key)!==null&&o!==void 0?o:this.hash(v),T;if(i)T=await this.scripts.addRepeatableJob(w,p,{name:e,endDate:l?new Date(l).getTime():void 0,tz:a.tz,pattern:h,every:f},v);else{let x=await this.client;T=await this.scripts.updateRepeatableJobMillis(x,w,p,v)}let{immediately:A}=a,C=Rlr.__rest(a,["immediately"]);return this.createNextJob(e,p,T,Object.assign(Object.assign({},n),{repeat:Object.assign({offset:E},C)}),r,u,y)}}async createNextJob(e,r,n,i,s,o,a){let u=this.getRepeatJobKey(e,r,n,s),c=Date.now(),l=r+(i.repeat.offset?i.repeat.offset:0)-c,d=Object.assign(Object.assign({},i),{jobId:u,delay:l<0||a?0:l,timestamp:c,prevMillis:r,repeatJobKey:n});return d.repeat=Object.assign(Object.assign({},i.repeat),{count:o}),this.Job.create(this,e,s,d)}getRepeatJobKey(e,r,n,i){return n.split(":").length>2?this.getRepeatJobId({name:e,nextMillis:r,namespace:this.hash(n),jobId:i?.id}):this.getRepeatDelayedJobId({customKey:n,nextMillis:r})}async removeRepeatable(e,r,n){var i;let s=MYe(e,Object.assign(Object.assign({},r),{jobId:n})),o=(i=r.key)!==null&&i!==void 0?i:this.hash(s),a=this.getRepeatJobId({name:e,nextMillis:"",namespace:this.hash(s),jobId:n??r.jobId,key:r.key});return this.scripts.removeRepeatable(a,s,o)}async removeRepeatableByKey(e){let r=this.keyToData(e),n=this.getRepeatJobId({name:r.name,nextMillis:"",namespace:this.hash(e),jobId:r.id});return this.scripts.removeRepeatable(n,"",e)}async getRepeatableData(e,r,n){let i=await e.hgetall(this.toKey("repeat:"+r));return i?{key:r,name:i.name,endDate:parseInt(i.endDate)||null,tz:i.tz||null,pattern:i.pattern||null,every:i.every||null,next:n}:this.keyToData(r,n)}keyToData(e,r){let n=e.split(":"),i=n.slice(4).join(":")||null;return{key:e,name:n[0],id:n[1]||null,endDate:parseInt(n[2])||null,tz:n[3]||null,pattern:i,next:r}}async getRepeatableJobs(e=0,r=-1,n=!1){let i=await this.client,s=this.keys.repeat,o=n?await i.zrange(s,e,r,"WITHSCORES"):await i.zrevrange(s,e,r,"WITHSCORES"),a=[];for(let u=0;u<o.length;u+=2)a.push(this.getRepeatableData(i,o[u],parseInt(o[u+1])));return Promise.all(a)}async getRepeatableCount(){return(await this.client).zcard(this.toKey("repeat"))}hash(e){return(0,klr.createHash)(this.repeatKeyHashAlgorithm).update(e).digest("hex")}getRepeatDelayedJobId({nextMillis:e,customKey:r}){return`repeat:${r}:${e}`}getRepeatJobId({name:e,nextMillis:r,namespace:n,jobId:i,key:s}){return`repeat:${s??this.hash(`${e}${i||""}${n}`)}:${r}`}};E2.Repeat=ile;function MYe(t,e){let r=e.endDate?new Date(e.endDate).getTime():"",n=e.tz||"",i=e.pattern,s=i||String(e.every)||"",o=e.jobId?e.jobId:"";return`${t}:${o}:${r}:${n}:${s}`}var Plr=(t,e)=>{let r=e.pattern;if(r&&e.every)throw new Error("Both .pattern and .every options are defined for this repeatable job");if(e.every)return Math.floor(t/e.every)*e.every+(e.immediately?0:e.every);let n=e.startDate&&new Date(e.startDate)>new Date(t)?new Date(e.startDate):new Date(t),i=(0,Dlr.parseExpression)(r,Object.assign(Object.assign({},e),{currentDate:n}));try{return e.immediately?new Date().getTime():i.next().getTime()}catch{}};E2.getNextMillis=Plr});var PYe=b(Fq=>{"use strict";Object.defineProperty(Fq,"__esModule",{value:!0});Fq.Queue=void 0;var Nlr=FF(),Flr=C4(),Blr=nle(),qlr=Nq(),Gt=Tu(),Llr=Oq(),jlr=tB(),sle=class extends Blr.QueueGetters{constructor(e,r,n){var i;super(e,Object.assign({},r),n),this.token=(0,Nlr.v4)(),this.libName="bullmq",this.jobsOpts=(i=r?.defaultJobOptions)!==null&&i!==void 0?i:{},this.waitUntilReady().then(s=>{if(!this.closing&&!r?.skipMetasUpdate)return s.hmset(this.keys.meta,this.metaValues)}).catch(s=>{})}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}get defaultJobOptions(){return Object.assign({},this.jobsOpts)}get metaValues(){var e,r,n,i;return{"opts.maxLenEvents":(i=(n=(r=(e=this.opts)===null||e===void 0?void 0:e.streams)===null||r===void 0?void 0:r.events)===null||n===void 0?void 0:n.maxLen)!==null&&i!==void 0?i:1e4,version:`${this.libName}:${jlr.version}`}}async getVersion(){return await(await this.client).hget(this.keys.meta,"version")}get repeat(){return new Promise(async e=>{this._repeat||(this._repeat=new qlr.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:await this.client})),this._repeat.on("error",r=>this.emit.bind(this,r))),e(this._repeat)})}get jobScheduler(){return new Promise(async e=>{this._jobScheduler||(this._jobScheduler=new Llr.JobScheduler(this.name,Object.assign(Object.assign({},this.opts),{connection:await this.client})),this._jobScheduler.on("error",r=>this.emit.bind(this,r))),e(this._jobScheduler)})}async setGlobalConcurrency(e){return(await this.client).hset(this.keys.meta,"concurrency",e)}async setGlobalRateLimit(e,r){return(await this.client).hset(this.keys.meta,"max",e,"duration",r)}async removeGlobalConcurrency(){return(await this.client).hdel(this.keys.meta,"concurrency")}async removeGlobalRateLimit(){return(await this.client).hdel(this.keys.meta,"max","duration")}async add(e,r,n){return this.trace(Gt.SpanKind.PRODUCER,"add",`${this.name}.${e}`,async(i,s)=>{var o;if(s&&!(!((o=n?.telemetry)===null||o===void 0)&&o.omitContext)){let u={metadata:s};n=Object.assign(Object.assign({},n),{telemetry:u})}let a=await this.addJob(e,r,n);return i?.setAttributes({[Gt.TelemetryAttributes.JobName]:e,[Gt.TelemetryAttributes.JobId]:a.id}),a})}async addJob(e,r,n){if(n&&n.repeat){if(n.repeat.endDate&&+new Date(n.repeat.endDate)<Date.now())throw new Error("End date must be greater than current timestamp");return(await this.repeat).updateRepeatableJob(e,r,Object.assign(Object.assign({},this.jobsOpts),n),{override:!0})}else{let i=n?.jobId;if(i=="0"||i?.startsWith("0:"))throw new Error("JobId cannot be '0' or start with 0:");let s=await this.Job.create(this,e,r,Object.assign(Object.assign(Object.assign({},this.jobsOpts),n),{jobId:i}));return this.emit("waiting",s),s}}async addBulk(e){return this.trace(Gt.SpanKind.PRODUCER,"addBulk",this.name,async(r,n)=>(r&&r.setAttributes({[Gt.TelemetryAttributes.BulkNames]:e.map(i=>i.name),[Gt.TelemetryAttributes.BulkCount]:e.length}),await this.Job.createBulk(this,e.map(i=>{var s,o,a,u,c,l;let d=(s=i.opts)===null||s===void 0?void 0:s.telemetry;if(n){let p=(a=(o=i.opts)===null||o===void 0?void 0:o.telemetry)===null||a===void 0?void 0:a.omitContext,f=((c=(u=i.opts)===null||u===void 0?void 0:u.telemetry)===null||c===void 0?void 0:c.metadata)||!p&&n;(f||p)&&(d={metadata:f,omitContext:p})}return{name:i.name,data:i.data,opts:Object.assign(Object.assign(Object.assign({},this.jobsOpts),i.opts),{jobId:(l=i.opts)===null||l===void 0?void 0:l.jobId,telemetry:d})}}))))}async upsertJobScheduler(e,r,n){var i,s;if(r.endDate&&+new Date(r.endDate)<Date.now())throw new Error("End date must be greater than current timestamp");return(await this.jobScheduler).upsertJobScheduler(e,r,(i=n?.name)!==null&&i!==void 0?i:e,(s=n?.data)!==null&&s!==void 0?s:{},Object.assign(Object.assign({},this.jobsOpts),n?.opts),{override:!0})}async pause(){await this.trace(Gt.SpanKind.INTERNAL,"pause",this.name,async()=>{await this.scripts.pause(!0),this.emit("paused")})}async close(){await this.trace(Gt.SpanKind.INTERNAL,"close",this.name,async()=>{this.closing||this._repeat&&await this._repeat.close(),await super.close()})}async rateLimit(e){await this.trace(Gt.SpanKind.INTERNAL,"rateLimit",this.name,async r=>{r?.setAttributes({[Gt.TelemetryAttributes.QueueRateLimit]:e}),await this.client.then(n=>n.set(this.keys.limiter,Number.MAX_SAFE_INTEGER,"PX",e))})}async resume(){await this.trace(Gt.SpanKind.INTERNAL,"resume",this.name,async()=>{await this.scripts.pause(!1),this.emit("resumed")})}async isPaused(){return await(await this.client).hexists(this.keys.meta,"paused")===1}isMaxed(){return this.scripts.isMaxed()}async getRepeatableJobs(e,r,n){return(await this.repeat).getRepeatableJobs(e,r,n)}async getJobScheduler(e){return(await this.jobScheduler).getScheduler(e)}async getJobSchedulers(e,r,n){return(await this.jobScheduler).getJobSchedulers(e,r,n)}async getJobSchedulersCount(){return(await this.jobScheduler).getSchedulersCount()}async removeRepeatable(e,r,n){return this.trace(Gt.SpanKind.INTERNAL,"removeRepeatable",`${this.name}.${e}`,async i=>(i?.setAttributes({[Gt.TelemetryAttributes.JobName]:e,[Gt.TelemetryAttributes.JobId]:n}),!await(await this.repeat).removeRepeatable(e,r,n)))}async removeJobScheduler(e){return!await(await this.jobScheduler).removeJobScheduler(e)}async removeDebounceKey(e){return this.trace(Gt.SpanKind.INTERNAL,"removeDebounceKey",`${this.name}`,async r=>(r?.setAttributes({[Gt.TelemetryAttributes.JobKey]:e}),await(await this.client).del(`${this.keys.de}:${e}`)))}async removeDeduplicationKey(e){return this.trace(Gt.SpanKind.INTERNAL,"removeDeduplicationKey",`${this.name}`,async r=>(r?.setAttributes({[Gt.TelemetryAttributes.DeduplicationKey]:e}),(await this.client).del(`${this.keys.de}:${e}`)))}async removeRateLimitKey(){return(await this.client).del(this.keys.limiter)}async removeRepeatableByKey(e){return this.trace(Gt.SpanKind.INTERNAL,"removeRepeatableByKey",`${this.name}`,async r=>(r?.setAttributes({[Gt.TelemetryAttributes.JobKey]:e}),!await(await this.repeat).removeRepeatableByKey(e)))}async remove(e,{removeChildren:r=!0}={}){return this.trace(Gt.SpanKind.INTERNAL,"remove",this.name,async n=>{n?.setAttributes({[Gt.TelemetryAttributes.JobId]:e,[Gt.TelemetryAttributes.JobOptions]:JSON.stringify({removeChildren:r})});let i=await this.scripts.remove(e,r);return i===1&&this.emit("removed",e),i})}async updateJobProgress(e,r){await this.trace(Gt.SpanKind.INTERNAL,"updateJobProgress",this.name,async n=>{n?.setAttributes({[Gt.TelemetryAttributes.JobId]:e,[Gt.TelemetryAttributes.JobProgress]:JSON.stringify(r)}),await this.scripts.updateProgress(e,r),this.emit("progress",e,r)})}async addJobLog(e,r,n){return Flr.Job.addJobLog(this,e,r,n)}async drain(e=!1){await this.trace(Gt.SpanKind.INTERNAL,"drain",this.name,async r=>{r?.setAttributes({[Gt.TelemetryAttributes.QueueDrainDelay]:e}),await this.scripts.drain(e)})}async clean(e,r,n="completed"){return this.trace(Gt.SpanKind.INTERNAL,"clean",this.name,async i=>{let s=r||1/0,o=Math.min(1e4,s),a=Date.now()-e,u=0,c=[],l=n==="waiting"?"wait":n;for(;u<s;){let d=await this.scripts.cleanJobsInSet(l,a,o);if(this.emit("cleaned",d,l),u+=d.length,c.push(...d),d.length<o)break}return i?.setAttributes({[Gt.TelemetryAttributes.QueueGrace]:e,[Gt.TelemetryAttributes.JobType]:n,[Gt.TelemetryAttributes.QueueCleanLimit]:s,[Gt.TelemetryAttributes.JobIds]:c}),c})}async obliterate(e){await this.trace(Gt.SpanKind.INTERNAL,"obliterate",this.name,async()=>{await this.pause();let r=0;do r=await this.scripts.obliterate(Object.assign({force:!1,count:1e3},e));while(r)})}async retryJobs(e={}){await this.trace(Gt.SpanKind.PRODUCER,"retryJobs",this.name,async r=>{r?.setAttributes({[Gt.TelemetryAttributes.QueueOptions]:JSON.stringify(e)});let n=0;do n=await this.scripts.retryJobs(e.state,e.count,e.timestamp);while(n)})}async promoteJobs(e={}){await this.trace(Gt.SpanKind.INTERNAL,"promoteJobs",this.name,async r=>{r?.setAttributes({[Gt.TelemetryAttributes.QueueOptions]:JSON.stringify(e)});let n=0;do n=await this.scripts.promoteJobs(e.count);while(n)})}async trimEvents(e){return this.trace(Gt.SpanKind.INTERNAL,"trimEvents",this.name,async r=>(r?.setAttributes({[Gt.TelemetryAttributes.QueueEventMaxLength]:e}),await(await this.client).xtrim(this.keys.events,"MAXLEN","~",e)))}async removeDeprecatedPriorityKey(){return(await this.client).del(this.toKey("priority"))}};Fq.Queue=sle});var ale=b(ole=>{"use strict";Object.defineProperty(ole,"__esModule",{value:!0});var ra=Tu(),$lr=(t,e)=>async function(n,i){let s,o,a;try{let u=new Promise((c,l)=>{(async()=>{try{a=(p,f)=>{l(new Error("Unexpected exit code: "+p+" signal: "+f))},s=await e.retain(t),s.on("exit",a),o=async p=>{var f,h,y,E,v;try{switch(p.cmd){case ra.ParentCommand.Completed:c(p.value);break;case ra.ParentCommand.Failed:case ra.ParentCommand.Error:{let w=new Error;Object.assign(w,p.value),l(w);break}case ra.ParentCommand.Progress:await n.updateProgress(p.value);break;case ra.ParentCommand.Log:await n.log(p.value);break;case ra.ParentCommand.MoveToDelayed:await n.moveToDelayed((f=p.value)===null||f===void 0?void 0:f.timestamp,(h=p.value)===null||h===void 0?void 0:h.token);break;case ra.ParentCommand.MoveToWait:await n.moveToWait((y=p.value)===null||y===void 0?void 0:y.token);break;case ra.ParentCommand.MoveToWaitingChildren:{let w=await n.moveToWaitingChildren((E=p.value)===null||E===void 0?void 0:E.token,(v=p.value)===null||v===void 0?void 0:v.opts);s.send({requestId:p.requestId,cmd:ra.ChildCommand.MoveToWaitingChildrenResponse,value:w})}break;case ra.ParentCommand.Update:await n.updateData(p.value);break;case ra.ParentCommand.GetChildrenValues:{let w=await n.getChildrenValues();s.send({requestId:p.requestId,cmd:ra.ChildCommand.GetChildrenValuesResponse,value:w})}break;case ra.ParentCommand.GetIgnoredChildrenFailures:{let w=await n.getIgnoredChildrenFailures();s.send({requestId:p.requestId,cmd:ra.ChildCommand.GetIgnoredChildrenFailuresResponse,value:w})}break}}catch(w){l(w)}},s.on("message",o),s.send({cmd:ra.ChildCommand.Start,job:n.asJSONSandbox(),token:i})}catch(p){l(p)}})()});return await u,u}finally{s&&(s.off("message",o),s.off("exit",a),s.exitCode===null&&s.signalCode===null&&e.release(s))}};ole.default=$lr});var FYe=b((qq,NYe)=>{"use strict";Object.defineProperty(qq,"__esModule",{value:!0});qq.Worker=void 0;var Bq=require("fs"),Ulr=require("url"),E8=require("path"),Klr=FF(),Vlr=Qce(),v8=Lc(),Glr=Lm(),Hlr=Nq(),zlr=nue(),Wlr=o8(),Jlr=ale(),Ylr=Yae(),F4=kF(),Qt=Tu(),Qlr=Oq(),Xlr=Zce(),Zlr=10,ule=class extends Glr.QueueBase{static RateLimitError(){return new F4.RateLimitError}constructor(e,r,n,i){if(super(e,Object.assign(Object.assign({drainDelay:5,concurrency:1,lockDuration:3e4,maximumRateLimitDelay:3e4,maxStalledCount:1,stalledInterval:3e4,autorun:!0,runRetryDelay:15e3},n),{blockingConnection:!0}),i),this.abortDelayController=null,this.blockUntil=0,this.drained=!1,this.limitUntil=0,this.processorAcceptsSignal=!1,this.waiting=null,this.running=!1,this.mainLoopRunning=null,!n||!n.connection)throw new Error("Worker requires a connection");if(typeof this.opts.maxStalledCount!="number"||this.opts.maxStalledCount<0)throw new Error("maxStalledCount must be greater or equal than 0");if(typeof this.opts.maxStartedAttempts=="number"&&this.opts.maxStartedAttempts<0)throw new Error("maxStartedAttempts must be greater or equal than 0");if(typeof this.opts.stalledInterval!="number"||this.opts.stalledInterval<=0)throw new Error("stalledInterval must be greater than 0");if(typeof this.opts.drainDelay!="number"||this.opts.drainDelay<=0)throw new Error("drainDelay must be greater than 0");if(this.concurrency=this.opts.concurrency,this.opts.lockRenewTime=this.opts.lockRenewTime||this.opts.lockDuration/2,this.id=(0,Klr.v4)(),this.createLockManager(),r){if(typeof r=="function")this.processFn=r,this.processorAcceptsSignal=r.length>=3;else{if(r instanceof Ulr.URL){if(!Bq.existsSync(r))throw new Error(`URL ${r} does not exist in the local file system`);r=r.href}else{let d=r+([".js",".ts",".flow",".cjs",".mjs"].includes(E8.extname(r))?"":".js");if(!Bq.existsSync(d))throw new Error(`File ${d} does not exist`)}let o=E8.dirname(NYe.filename||__filename),a=E8.join(o,"main-worker.js"),u=E8.join(o,"main.js"),c=this.opts.useWorkerThreads?a:u;try{Bq.statSync(c)}catch{let d=this.opts.useWorkerThreads?"main-worker.js":"main.js";c=E8.join(process.cwd(),`dist/cjs/classes/${d}`),Bq.statSync(c)}this.childPool=new zlr.ChildPool({mainFile:c,useWorkerThreads:this.opts.useWorkerThreads,workerForkOptions:this.opts.workerForkOptions,workerThreadsOptions:this.opts.workerThreadsOptions}),this.createSandbox(r)}this.opts.autorun&&this.run().catch(o=>this.emit("error",o))}let s=this.clientName()+(this.opts.name?`:w:${this.opts.name}`:"");this.blockingConnection=new Wlr.RedisConnection((0,v8.isRedisInstance)(n.connection)?n.connection.isCluster?n.connection.duplicate(void 0,{redisOptions:{connectionName:s}}):n.connection.duplicate({connectionName:s}):Object.assign(Object.assign({},n.connection),{connectionName:s}),{shared:!1,blocking:!0,skipVersionCheck:n.skipVersionCheck}),this.blockingConnection.on("error",o=>this.emit("error",o)),this.blockingConnection.on("ready",()=>setTimeout(()=>this.emit("ready"),0))}createLockManager(){this.lockManager=new Xlr.LockManager(this,{lockRenewTime:this.opts.lockRenewTime,lockDuration:this.opts.lockDuration,workerId:this.id,workerName:this.opts.name})}createSandbox(e){this.processFn=(0,Jlr.default)(e,this.childPool).bind(this)}async extendJobLocks(e,r,n){return this.scripts.extendLocks(e,r,n)}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}callProcessJob(e,r,n){return this.processFn(e,r,n)}createJob(e,r){return this.Job.fromJSON(this,e,r)}async waitUntilReady(){return await super.waitUntilReady(),this.blockingConnection.client}cancelJob(e,r){return this.lockManager.cancelJob(e,r)}cancelAllJobs(e){this.lockManager.cancelAllJobs(e)}set concurrency(e){if(typeof e!="number"||e<1||!isFinite(e))throw new Error("concurrency must be a finite number greater than 0");this._concurrency=e}get concurrency(){return this._concurrency}get repeat(){return new Promise(async e=>{if(!this._repeat){let r=await this.client;this._repeat=new Hlr.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:r})),this._repeat.on("error",n=>this.emit.bind(this,n))}e(this._repeat)})}get jobScheduler(){return new Promise(async e=>{if(!this._jobScheduler){let r=await this.client;this._jobScheduler=new Qlr.JobScheduler(this.name,Object.assign(Object.assign({},this.opts),{connection:r})),this._jobScheduler.on("error",n=>this.emit.bind(this,n))}e(this._jobScheduler)})}async run(){if(!this.processFn)throw new Error("No process function is defined.");if(this.running)throw new Error("Worker is already running.");try{if(this.running=!0,this.closing||this.paused)return;await this.startStalledCheckTimer(),this.opts.skipLockRenewal||this.lockManager.start();let e=await this.client,r=await this.blockingConnection.client;this.mainLoopRunning=this.mainLoop(e,r),await this.mainLoopRunning}finally{this.running=!1}}async waitForRateLimit(){var e;let r=this.limitUntil;if(r>Date.now()){(e=this.abortDelayController)===null||e===void 0||e.abort(),this.abortDelayController=new Vlr.AbortController;let n=this.getRateLimitDelay(r-Date.now());await this.delay(n,this.abortDelayController),this.drained=!1,this.limitUntil=0}}async mainLoop(e,r){let n=new Ylr.AsyncFifoQueue,i=0;for(;!this.closing&&!this.paused||n.numTotal()>0;){for(;!this.closing&&!this.paused&&!this.waiting&&n.numTotal()<this._concurrency&&!this.isRateLimited();){let o=`${this.id}:${i++}`,a=this.retryIfFailed(()=>this._getNextJob(e,r,o,{block:!0}),{delayInMs:this.opts.runRetryDelay,onlyEmitError:!0});if(n.add(a),this.waiting&&n.numTotal()>1||!await a&&n.numTotal()>1||this.blockUntil)break}let s;do s=await n.fetch();while(!s&&n.numQueued()>0);if(s){let o=s.token;n.add(this.processJob(s,o,()=>n.numTotal()<=this._concurrency))}else n.numQueued()===0&&await this.waitForRateLimit()}}async getNextJob(e,{block:r=!0}={}){var n,i;let s=await this._getNextJob(await this.client,await this.blockingConnection.client,e,{block:r});return this.trace(Qt.SpanKind.INTERNAL,"getNextJob",this.name,async o=>(o?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.QueueName]:this.name,[Qt.TelemetryAttributes.WorkerName]:this.opts.name,[Qt.TelemetryAttributes.WorkerOptions]:JSON.stringify({block:r}),[Qt.TelemetryAttributes.JobId]:s?.id}),s),(i=(n=s?.opts)===null||n===void 0?void 0:n.telemetry)===null||i===void 0?void 0:i.metadata)}async _getNextJob(e,r,n,{block:i=!0}={}){if(!this.paused&&!this.closing){if(this.drained&&i&&!this.limitUntil&&!this.waiting){this.waiting=this.waitForJob(r,this.blockUntil);try{if(this.blockUntil=await this.waiting,this.blockUntil<=0||this.blockUntil-Date.now()<1)return await this.moveToActive(e,n,this.opts.name)}finally{this.waiting=null}}else if(!this.isRateLimited())return this.moveToActive(e,n,this.opts.name)}}async rateLimit(e){await this.trace(Qt.SpanKind.INTERNAL,"rateLimit",this.name,async r=>{r?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.WorkerRateLimit]:e}),await this.client.then(n=>n.set(this.keys.limiter,Number.MAX_SAFE_INTEGER,"PX",e))})}get minimumBlockTimeout(){return this.blockingConnection.capabilities.canBlockFor1Ms?.001:.002}isRateLimited(){return this.limitUntil>Date.now()}async moveToActive(e,r,n){let[i,s,o,a]=await this.scripts.moveToActive(e,r,n);return this.updateDelays(o,a),this.nextJobFromJobData(i,s,r)}async waitForJob(e,r){if(this.paused)return 1/0;let n;try{if(!this.closing&&!this.isRateLimited()){let i=this.getBlockTimeout(r);if(i>0){i=this.blockingConnection.capabilities.canDoubleTimeout?i:Math.ceil(i),n=setTimeout(async()=>{e.disconnect(!this.closing)},i*1e3+1e3),this.updateDelays();let s=await e.bzpopmin(this.keys.marker,i);if(s){let[o,a,u]=s;if(a){let c=parseInt(u);return r&&c>r?r:c}}}return 0}}catch(i){(0,v8.isNotConnectionError)(i)&&this.emit("error",i),this.closing||await this.delay()}finally{clearTimeout(n)}return 1/0}getBlockTimeout(e){let r=this.opts;if(e){let n=e-Date.now();return n<=0?n:n<this.minimumBlockTimeout*1e3?this.minimumBlockTimeout:Math.min(n/1e3,Zlr)}else return Math.max(r.drainDelay,this.minimumBlockTimeout)}getRateLimitDelay(e){return Math.min(e,this.opts.maximumRateLimitDelay)}async delay(e,r){await(0,v8.delay)(e||v8.DELAY_TIME_1,r)}updateDelays(e=0,r=0){let n=Math.max(e,0);n>0?this.limitUntil=Date.now()+n:this.limitUntil=0,this.blockUntil=Math.max(r,0)||0}async nextJobFromJobData(e,r,n){if(!e)this.drained||(this.emit("drained"),this.drained=!0);else{this.drained=!1;let i=this.createJob(e,r);i.token=n;try{await this.retryIfFailed(async()=>{i.repeatJobKey&&i.repeatJobKey.split(":").length<5?await(await this.jobScheduler).upsertJobScheduler(i.repeatJobKey,i.opts.repeat,i.name,i.data,i.opts,{override:!1,producerId:i.id}):i.opts.repeat&&await(await this.repeat).updateRepeatableJob(i.name,i.data,i.opts,{override:!1})},{delayInMs:this.opts.runRetryDelay})}catch(s){let o=s instanceof Error?s.message:String(s),a=new Error(`Failed to add repeatable job for next iteration: ${o}`);this.emit("error",a);return}return i}}async processJob(e,r,n=()=>!0){var i,s;let o=(s=(i=e.opts)===null||i===void 0?void 0:i.telemetry)===null||s===void 0?void 0:s.metadata;return this.trace(Qt.SpanKind.CONSUMER,"process",this.name,async a=>{a?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.WorkerName]:this.opts.name,[Qt.TelemetryAttributes.JobId]:e.id,[Qt.TelemetryAttributes.JobName]:e.name}),this.emit("active",e,"waiting");let u=Date.now(),c=this.lockManager.trackJob(e.id,r,u,this.processorAcceptsSignal);try{let l=this.getUnrecoverableErrorMessage(e);if(l)return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleFailed(new F4.UnrecoverableError(l),e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a});let d=await this.callProcessJob(e,r,c?c.signal:void 0);return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleCompleted(d,e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a})}catch(l){return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleFailed(l,e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a,onlyEmitError:!0})}finally{this.lockManager.untrackJob(e.id),a?.setAttributes({[Qt.TelemetryAttributes.JobFinishedTimestamp]:Date.now(),[Qt.TelemetryAttributes.JobProcessedTimestamp]:u})}},o)}getUnrecoverableErrorMessage(e){if(e.deferredFailure)return e.deferredFailure;if(this.opts.maxStartedAttempts&&this.opts.maxStartedAttempts<e.attemptsStarted)return"job started more than allowable limit"}async handleCompleted(e,r,n,i=()=>!0,s){if(!this.connection.closing){let o=await r.moveToCompleted(e,n,i()&&!(this.closing||this.paused));if(this.emit("completed",r,e,"active"),s?.addEvent("job completed",{[Qt.TelemetryAttributes.JobResult]:JSON.stringify(e)}),s?.setAttributes({[Qt.TelemetryAttributes.JobAttemptsMade]:r.attemptsMade}),Array.isArray(o)){let[a,u,c,l]=o;return this.updateDelays(c,l),this.nextJobFromJobData(a,u,n)}}}async handleFailed(e,r,n,i=()=>!0,s){if(!this.connection.closing){if(e.message===F4.RATE_LIMIT_ERROR){let a=await this.moveLimitedBackToWait(r,n);this.limitUntil=a>0?Date.now()+a:0;return}if(e instanceof F4.DelayedError||e.name=="DelayedError"||e instanceof F4.WaitingError||e.name=="WaitingError"||e instanceof F4.WaitingChildrenError||e.name=="WaitingChildrenError"){let a=await this.client;return this.moveToActive(a,n,this.opts.name)}let o=await r.moveToFailed(e,n,i()&&!(this.closing||this.paused));if(this.emit("failed",r,e,"active"),s?.addEvent("job failed",{[Qt.TelemetryAttributes.JobFailedReason]:e.message}),s?.setAttributes({[Qt.TelemetryAttributes.JobAttemptsMade]:r.attemptsMade}),Array.isArray(o)){let[a,u,c,l]=o;return this.updateDelays(c,l),this.nextJobFromJobData(a,u,n)}}}async pause(e){await this.trace(Qt.SpanKind.INTERNAL,"pause",this.name,async r=>{var n;r?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.WorkerName]:this.opts.name,[Qt.TelemetryAttributes.WorkerDoNotWaitActive]:e}),this.paused||(this.paused=!0,e||await this.whenCurrentJobsFinished(),(n=this.stalledCheckStopper)===null||n===void 0||n.call(this),this.emit("paused"))})}resume(){this.running||this.trace(Qt.SpanKind.INTERNAL,"resume",this.name,e=>{e?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.WorkerName]:this.opts.name}),this.paused=!1,this.processFn&&this.run(),this.emit("resumed")})}isPaused(){return!!this.paused}isRunning(){return this.running}async close(e=!1){return this.closing?this.closing:(this.closing=(async()=>{await this.trace(Qt.SpanKind.INTERNAL,"close",this.name,async r=>{var n,i;r?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.WorkerName]:this.opts.name,[Qt.TelemetryAttributes.WorkerForceClose]:e}),this.emit("closing","closing queue"),(n=this.abortDelayController)===null||n===void 0||n.abort();let s=[()=>e||this.whenCurrentJobsFinished(!1),()=>this.lockManager.close(),()=>{var o;return(o=this.childPool)===null||o===void 0?void 0:o.clean()},()=>this.blockingConnection.close(e),()=>this.connection.close(e)];for(let o of s)try{await o()}catch(a){this.emit("error",a)}(i=this.stalledCheckStopper)===null||i===void 0||i.call(this),this.closed=!0,this.emit("closed")})})(),await this.closing)}async startStalledCheckTimer(){this.opts.skipStalledCheck||this.closing||await this.trace(Qt.SpanKind.INTERNAL,"startStalledCheckTimer",this.name,async e=>{e?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.WorkerName]:this.opts.name}),this.stalledChecker().catch(r=>{this.emit("error",r)})})}async stalledChecker(){for(;!(this.closing||this.paused);)await this.checkConnectionError(()=>this.moveStalledJobsToWait()),await new Promise(e=>{let r=setTimeout(e,this.opts.stalledInterval);this.stalledCheckStopper=()=>{clearTimeout(r),e()}})}async whenCurrentJobsFinished(e=!0){this.waiting?await this.blockingConnection.disconnect(e):e=!1,this.mainLoopRunning&&await this.mainLoopRunning,e&&await this.blockingConnection.reconnect()}async retryIfFailed(e,r){var n;let i=0,s=r.maxRetries||1/0;do try{return await e()}catch(o){if((n=r.span)===null||n===void 0||n.recordException(o.message),(0,v8.isNotConnectionError)(o)){if(!this.paused&&!this.closing&&this.emit("error",o),r.onlyEmitError)return;throw o}else if(r.delayInMs&&!this.closing&&!this.closed&&await this.delay(r.delayInMs,this.abortDelayController),i+1>=s)throw o}while(++i<s)}async moveStalledJobsToWait(){await this.trace(Qt.SpanKind.INTERNAL,"moveStalledJobsToWait",this.name,async e=>{let r=await this.scripts.moveStalledJobsToWait();e?.setAttributes({[Qt.TelemetryAttributes.WorkerId]:this.id,[Qt.TelemetryAttributes.WorkerName]:this.opts.name,[Qt.TelemetryAttributes.WorkerStalledJobs]:r}),r.forEach(n=>{e?.addEvent("job stalled",{[Qt.TelemetryAttributes.JobId]:n}),this.emit("stalled",n,"active")})})}moveLimitedBackToWait(e,r){return e.moveToWait(r)}};qq.Worker=ule});var BYe=b(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});var Di=(or(),Wt(sr));Di.__exportStar(Yae(),Wn);Di.__exportStar(Qae(),Wn);Di.__exportStar(eue(),Wn);Di.__exportStar(nue(),Wn);Di.__exportStar(qGe(),Wn);Di.__exportStar(kF(),Wn);Di.__exportStar(jWe(),Wn);Di.__exportStar(C4(),Wn);Di.__exportStar(Oq(),Wn);Di.__exportStar(Zce(),Wn);Di.__exportStar(Lm(),Wn);Di.__exportStar(RYe(),Wn);Di.__exportStar(DYe(),Wn);Di.__exportStar(nle(),Wn);Di.__exportStar(oB(),Wn);Di.__exportStar(PYe(),Wn);Di.__exportStar(o8(),Wn);Di.__exportStar(Nq(),Wn);Di.__exportStar(ale(),Wn);Di.__exportStar(cce(),Wn);Di.__exportStar(FYe(),Wn)});var LYe=b(qYe=>{"use strict";Object.defineProperty(qYe,"__esModule",{value:!0})});var $Ye=b(jYe=>{"use strict";Object.defineProperty(jYe,"__esModule",{value:!0})});var KYe=b(UYe=>{"use strict";Object.defineProperty(UYe,"__esModule",{value:!0})});var GYe=b(VYe=>{"use strict";Object.defineProperty(VYe,"__esModule",{value:!0})});var zYe=b(HYe=>{"use strict";Object.defineProperty(HYe,"__esModule",{value:!0})});var JYe=b(WYe=>{"use strict";Object.defineProperty(WYe,"__esModule",{value:!0})});var QYe=b(YYe=>{"use strict";Object.defineProperty(YYe,"__esModule",{value:!0})});var ZYe=b(XYe=>{"use strict";Object.defineProperty(XYe,"__esModule",{value:!0})});var tQe=b(eQe=>{"use strict";Object.defineProperty(eQe,"__esModule",{value:!0})});var nQe=b(rQe=>{"use strict";Object.defineProperty(rQe,"__esModule",{value:!0})});var sQe=b(iQe=>{"use strict";Object.defineProperty(iQe,"__esModule",{value:!0})});var aQe=b(oQe=>{"use strict";Object.defineProperty(oQe,"__esModule",{value:!0})});var cQe=b(uQe=>{"use strict";Object.defineProperty(uQe,"__esModule",{value:!0})});var dQe=b(lQe=>{"use strict";Object.defineProperty(lQe,"__esModule",{value:!0})});var fQe=b(pQe=>{"use strict";Object.defineProperty(pQe,"__esModule",{value:!0})});var mQe=b(hQe=>{"use strict";Object.defineProperty(hQe,"__esModule",{value:!0})});var gQe=b(yQe=>{"use strict";Object.defineProperty(yQe,"__esModule",{value:!0})});var _Qe=b(bQe=>{"use strict";Object.defineProperty(bQe,"__esModule",{value:!0})});var vQe=b(Lq=>{"use strict";Object.defineProperty(Lq,"__esModule",{value:!0});Lq.ClientType=void 0;var EQe;(function(t){t.blocking="blocking",t.normal="normal"})(EQe||(Lq.ClientType=EQe={}))});var wQe=b(SQe=>{"use strict";Object.defineProperty(SQe,"__esModule",{value:!0})});var CQe=b(AQe=>{"use strict";Object.defineProperty(AQe,"__esModule",{value:!0})});var OQe=b(TQe=>{"use strict";Object.defineProperty(TQe,"__esModule",{value:!0})});var IQe=b(xQe=>{"use strict";Object.defineProperty(xQe,"__esModule",{value:!0})});var DQe=b(RQe=>{"use strict";Object.defineProperty(RQe,"__esModule",{value:!0})});var MQe=b(kQe=>{"use strict";Object.defineProperty(kQe,"__esModule",{value:!0})});var NQe=b(PQe=>{"use strict";Object.defineProperty(PQe,"__esModule",{value:!0})});var BQe=b(FQe=>{"use strict";Object.defineProperty(FQe,"__esModule",{value:!0})});var LQe=b(qQe=>{"use strict";Object.defineProperty(qQe,"__esModule",{value:!0})});var $Qe=b(jQe=>{"use strict";Object.defineProperty(jQe,"__esModule",{value:!0})});var KQe=b(UQe=>{"use strict";Object.defineProperty(UQe,"__esModule",{value:!0})});var GQe=b(VQe=>{"use strict";Object.defineProperty(VQe,"__esModule",{value:!0})});var zQe=b(HQe=>{"use strict";Object.defineProperty(HQe,"__esModule",{value:!0})});var JQe=b(WQe=>{"use strict";Object.defineProperty(WQe,"__esModule",{value:!0})});var YQe=b(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});var Ir=(or(),Wt(sr));Ir.__exportStar(LYe(),Er);Ir.__exportStar($Ye(),Er);Ir.__exportStar(KYe(),Er);Ir.__exportStar(GYe(),Er);Ir.__exportStar(zYe(),Er);Ir.__exportStar(JYe(),Er);Ir.__exportStar(QYe(),Er);Ir.__exportStar(ZYe(),Er);Ir.__exportStar(tQe(),Er);Ir.__exportStar(nQe(),Er);Ir.__exportStar(sQe(),Er);Ir.__exportStar(aQe(),Er);Ir.__exportStar(cQe(),Er);Ir.__exportStar(dQe(),Er);Ir.__exportStar(fQe(),Er);Ir.__exportStar(mQe(),Er);Ir.__exportStar(gQe(),Er);Ir.__exportStar(_Qe(),Er);Ir.__exportStar(vQe(),Er);Ir.__exportStar(wQe(),Er);Ir.__exportStar(CQe(),Er);Ir.__exportStar(OQe(),Er);Ir.__exportStar(IQe(),Er);Ir.__exportStar(DQe(),Er);Ir.__exportStar(MQe(),Er);Ir.__exportStar(NQe(),Er);Ir.__exportStar(BQe(),Er);Ir.__exportStar(LQe(),Er);Ir.__exportStar($Qe(),Er);Ir.__exportStar(KQe(),Er);Ir.__exportStar(GQe(),Er);Ir.__exportStar(zQe(),Er);Ir.__exportStar(JQe(),Er)});var XQe=b(QQe=>{"use strict";Object.defineProperty(QQe,"__esModule",{value:!0})});var eXe=b(ZQe=>{"use strict";Object.defineProperty(ZQe,"__esModule",{value:!0})});var rXe=b(tXe=>{"use strict";Object.defineProperty(tXe,"__esModule",{value:!0})});var iXe=b(nXe=>{"use strict";Object.defineProperty(nXe,"__esModule",{value:!0})});var oXe=b(sXe=>{"use strict";Object.defineProperty(sXe,"__esModule",{value:!0})});var uXe=b(aXe=>{"use strict";Object.defineProperty(aXe,"__esModule",{value:!0})});var lXe=b(cXe=>{"use strict";Object.defineProperty(cXe,"__esModule",{value:!0})});var pXe=b(dXe=>{"use strict";Object.defineProperty(dXe,"__esModule",{value:!0})});var hXe=b(fXe=>{"use strict";Object.defineProperty(fXe,"__esModule",{value:!0})});var yXe=b(mXe=>{"use strict";Object.defineProperty(mXe,"__esModule",{value:!0})});var gXe=b(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var fp=(or(),Wt(sr));fp.__exportStar(XQe(),Vc);fp.__exportStar(eXe(),Vc);fp.__exportStar(rXe(),Vc);fp.__exportStar(iXe(),Vc);fp.__exportStar(oXe(),Vc);fp.__exportStar(uXe(),Vc);fp.__exportStar(lXe(),Vc);fp.__exportStar(pXe(),Vc);fp.__exportStar(hXe(),Vc);fp.__exportStar(yXe(),Vc)});var _Xe=b(bXe=>{"use strict";Object.defineProperty(bXe,"__esModule",{value:!0})});var EXe=b(a1=>{"use strict";Object.defineProperty(a1,"__esModule",{value:!0});var v2=(or(),Wt(sr));v2.__exportStar(BYe(),a1);v2.__exportStar(Tu(),a1);v2.__exportStar(YQe(),a1);v2.__exportStar(gXe(),a1);v2.__exportStar(Lc(),a1);v2.__exportStar(_Xe(),a1);v2.__exportStar(nB(),a1)});var Vkr=St(fde()),Gkr=St(SGe());OI();var wXe=St(EXe()),cle=St(Qm());$ne();yf();lP();var jq=St(ly());hw();yf();rm();var edr={dbName:"Admina-Api",appName:"Admina-Api",serverApi:{version:"1",strict:!0,deprecationErrors:!0}},vXe=async(t="Application")=>{if(!ws.MONGO_URI)throw new on("MongoDB URI is not defined in the configuration.");if(jq.default.connection.readyState===1){Me.info(`${t} is already connected to MongoDB.`);return}try{await jq.default.connect(ws.MONGO_URI,edr),Me.info(`${t} connected to the database successfully.`,{uri:ws.MONGO_URI,context:t})}catch(e){throw Me.error(`Error connecting ${t} to the database:`,{error:pi.serialize(e)}),new on("Database connection failed")}},SXe=async(t="Application")=>{try{await jq.default.disconnect(),Me.info(`\u{1F6D1} ${t} disconnected from the database successfully.`)}catch(e){if(e instanceof Error)throw new on(e.message);Me.error(`Error disconnecting ${t} from the database`,{error:pi.serialize(e)})}};rm();var $q=St(require("fs/promises")),lle=class{constructor(){this.queueName="translation-queue";this.concurrency=5;this.connectionOptions={host:"127.0.0.1",port:6379};this.init(),this.setupSignalHandlers()}async init(){try{await vXe("Worker"),this.worker=new wXe.Worker(this.queueName,this.processJob.bind(this),{connection:this.connectionOptions,concurrency:this.concurrency,limiter:{max:50,duration:1e4}}),this.setupListeners(),Me.info(`Worker started on queue "${this.queueName}" with concurrency: ${this.concurrency}`)}catch(e){Me.error("Failed to start worker:",{error:pi.serialize(e)}),process.exit(1)}}async processJob(e){let{data:r,id:n,attemptsMade:i}=e,{docId:s,user:o,targetLanguage:a,file:u}=r,c=`job:${s}`,l=Date.now();Me.info(`[Job Start] ID: ${n} | Doc: ${s} | Attempt: ${i+1}`,{user:o.email,attempt:i+1});try{let d=cle.container.resolve("IGeminiAIService"),p=cle.container.resolve("IDocumentService"),f=await $q.default.readFile(u.filePath),h={fieldname:"file",originalname:u.originalname,mimetype:u.mimetype,buffer:f,size:f.length};Me.info(`[Job Progress] Doc: ${s} -> Translating`,{jobId:n});try{await hi.hset(c,"status","translate"),await hi.expire(c,1800)}catch{throw new on("Failed to initialize job status in Redis")}let y=await d.translateDocument(h,a);Me.info(`[Job Progress] Doc: ${s} -> Summarizing`,{jobId:n}),await hi.hset(c,"status","summarize");let E=await d.summarizeDocument(y.translatedText,a);await hi.hset(c,"status","saving");let v={title:E.title||"",sender:E.sender||"",receivedDate:E.receivedDate||new Date,summary:E.summary||"",actionPlan:E.actionPlan||[],actionPlans:(E.actionPlans||[]).map(T=>({id:T.id||xg(),title:T.title||"",dueDate:T.dueDate||new Date,completed:!1,location:T.location||""})),userId:o.userId.toString(),docId:s,translatedText:y.translatedText,structuredTranslatedText:y.structuredTranslatedText,targetLanguage:a,pdfBlobStorage:!1};Me.info(`[Job Progress] Doc: ${s} -> Creating Document and Saving to DB`,{jobId:n}),await p.createDocumentAndUpdatePlanLimit(v,o.plan),await hi.hset(c,"status","completed"),await $q.default.unlink(u.filePath).catch(T=>Me.error("Failed to delete temp file",T));let w=(Date.now()-l)/1e3;Me.info(`[Job Success] ID: ${n} | Doc: ${s} | Duration: ${w}s`)}catch(d){let p=i+1>=(e.opts.attempts||1);throw Me.error(`[Job Failed] ID: ${n} | Doc: ${s} | Attempt: ${i+1}`,{error:pi.serialize(d),isFinalAttempt:p,code:d.code||"UNKNOWN"}),await hi.hset(c,{status:"error",error:d.message}),e.attemptsMade+1>=(e.opts.attempts||1)&&await $q.default.unlink(u.filePath).catch(f=>Me.error("Failed to delete temp file",f)),d}}setupListeners(){this.worker&&(this.worker.on("completed",async e=>{let r=e.data.user.email;await hi.del(`lock:user:${r}`),Me.info(`Lock released for user: ${r} in worker`)}),this.worker.on("failed",async(e,r)=>{Me.error(`BullMQ Event: Job ${e?.id} failed`,{error:pi.serialize(r)}),e&&e.attemptsMade>=e.opts.attempts&&(await hi.del(`lock:user:${e.data.user.email}`),Me.warn(`Job ${e.id} permanently failed. Lock released.`))}),this.worker.on("error",e=>{Me.error("Worker connection error:",{error:pi.serialize(e)})}))}setupSignalHandlers(){let e=async r=>{Me.warn(`Worker received ${r}, shutting down...`);try{this.worker&&(await this.worker.close(),Me.info("BullMQ Worker closed.")),await SXe("Worker"),hi.status==="ready"&&(await hi.quit(),Me.info("Redis disconnected.")),await hZ.flush(),Me.info("Worker shutdown complete."),process.exit(0)}catch(n){Me.error("Error during worker shutdown",{error:pi.serialize(n)}),process.exit(1)}};process.on("SIGTERM",()=>e("SIGTERM")),process.on("SIGINT",()=>e("SIGINT"))}};new lle;
/**
 * @copyright 2025 Adeniyi Bella
 * @license Apache-2.0
 */
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

mongoose/lib/connectionState.js:
  (*!
   * Connection states
   *)

mongoose/lib/helpers/immediate.js:
  (*!
   * Centralize this so we can more easily work around issues with people
   * stubbing out `process.nextTick()` in tests using sinon:
   * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
   * See gh-6074
   *)

mongoose/lib/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/error/mongooseError.js:
mongoose/lib/options.js:
mongoose/lib/helpers/clone.js:
mongoose/lib/helpers/error/combinePathErrors.js:
mongoose/lib/schema/operators/exists.js:
mongoose/lib/schema/operators/type.js:
mongoose/lib/helpers/schematype/handleImmutable.js:
mongoose/lib/helpers/document/applyDefaults.js:
mongoose/lib/helpers/document/cleanModifiedSubpaths.js:
mongoose/lib/helpers/projection/isDefiningProjection.js:
mongoose/lib/helpers/projection/isExclusive.js:
mongoose/lib/helpers/projection/isPathSelectedInclusive.js:
mongoose/lib/helpers/schema/idGetter.js:
mongoose/lib/helpers/schema/handleTimestampOption.js:
mongoose/lib/helpers/update/applyTimestampsToChildren.js:
mongoose/lib/helpers/update/applyTimestampsToUpdate.js:
mongoose/lib/constants.js:
mongoose/lib/helpers/model/applyHooks.js:
mongoose/lib/types/map.js:
mongoose/lib/options/schemaArrayOptions.js:
mongoose/lib/options/schemaNumberOptions.js:
mongoose/lib/options/schemaBufferOptions.js:
mongoose/lib/options/schemaDateOptions.js:
mongoose/lib/plugins/saveSubdocs.js:
mongoose/lib/plugins/sharding.js:
mongoose/lib/plugins/validateBeforeSave.js:
mongoose/lib/helpers/model/discriminator.js:
mongoose/lib/options/schemaDocumentArrayOptions.js:
mongoose/lib/schema/map.js:
mongoose/lib/options/schemaObjectIdOptions.js:
mongoose/lib/options/schemaStringOptions.js:
mongoose/lib/schema/union.js:
mongoose/lib/driver.js:
mongoose/lib/helpers/query/castUpdate.js:
mongoose/lib/helpers/projection/isInclusive.js:
mongoose/lib/helpers/query/hasDollarKeys.js:
mongoose/lib/helpers/query/selectPopulatedFields.js:
mongoose/lib/helpers/populate/leanPopulateMap.js:
mongoose/lib/helpers/populate/getVirtual.js:
mongoose/lib/helpers/populate/getSchemaTypes.js:
mongoose/lib/helpers/populate/getModelsMapForPopulate.js:
mongoose/lib/helpers/parallelLimit.js:
mongoose/lib/helpers/populate/removeDeselectedForeignField.js:
  (*!
   * ignore
   *)

mongoose/lib/types/objectid.js:
  (*!
   * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
   *)

mongoose/lib/drivers/node-mongodb-native/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from abstract Collection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/cursor/changeStream.js:
mongoose/lib/error/serverSelection.js:
mongoose/lib/stateMachine.js:
mongoose/lib/helpers/common.js:
mongoose/lib/utils.js:
mongoose/lib/schema/subdocument.js:
mongoose/lib/cursor/queryCursor.js:
mquery/lib/utils.js:
mongoose/lib/cursor/aggregationCursor.js:
mongoose/lib/documentProvider.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)

mongoose/lib/error/cast.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/error/notFound.js:
mongoose/lib/error/validator.js:
mongoose/lib/error/version.js:
mongoose/lib/error/parallelSave.js:
mongoose/lib/error/overwriteModel.js:
mongoose/lib/error/missingSchema.js:
mongoose/lib/error/bulkSaveIncompleteError.js:
mongoose/lib/error/divergentArray.js:
mongoose/lib/error/parallelValidate.js:
mongoose/lib/error/invalidSchemaOption.js:
mongoose/lib/error/bulkWriteError.js:
mongoose/lib/error/eachAsyncMultiError.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * exports
   *)

mongoose/lib/error/validation.js:
mongoose/lib/error/setOptionError.js:
  (*!
   * Module requirements
   *)
  (*!
   * Module exports
   *)

mongoose/lib/error/strict.js:
mongoose/lib/error/strictPopulate.js:
mongoose/lib/error/objectExpected.js:
mongoose/lib/error/objectParameter.js:
mongoose/lib/cast.js:
mongoose/lib/error/syncIndexes.js:
mongoose/lib/helpers/cursor/eachAsync.js:
mongoose/lib/helpers/updateValidators.js:
mongoose/lib/index.js:
  (*!
   * Module dependencies.
   *)

mongoose/lib/error/index.js:
mongoose/lib/types/index.js:
mongoose/lib/schema/index.js:
mongoose/lib/drivers/node-mongodb-native/index.js:
  (*!
   * Module exports.
   *)

mpath/lib/index.js:
  (*!
   * Split a string path into components delimited by '.' or
   * '[\d+]'
   *
   * #### Example:
   *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
   *)
  (*!
   * Recursively set nested arrays
   *)
  (*!
   * Returns the value passed to it.
   *)

mongoose/lib/internal.js:
  (*!
   * Dependencies
   *)

mongoose/lib/types/buffer.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Buffer.
   *)
  (*!
   * Compile other Buffer methods marking this buffer as modified.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/mixed.js:
mongoose/lib/schema/documentArrayElement.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/helpers/document/compile.js:
  (*!
   * exports
   *)

mongoose/lib/queryHelpers.js:
  (*!
   * Module dependencies
   *)
  (*!
   * ignore
   *)

mongoose/lib/types/subdocument.js:
  (*!
   * ignore
   *)
  (*!
   * Sets this sub-documents parent document.
   *
   * @api private
   *)

mongoose/lib/types/arraySubdocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Subdocument
   *)
  (*!
   * ignore
   *)
  (*!
   * Sets this sub-documents parent document.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/types/array/methods/index.js:
  (*!
   * ignore
   *)
  (*!
   * Minimize _just_ empty objects along the path chain specified
   * by `parts`, ignoring all other paths. Useful in cases where
   * you want to minimize after unsetting a path.
   *
   * #### Example:
   *
   *     const obj = { foo: { bar: { baz: {} } }, a: {} };
   *     _minimizePath(obj, 'foo.bar.baz');
   *     obj; // { a: {} }
   *)
  (*!
   * If `docs` isn't all instances of the right model, depopulate `arr`
   *)

mongoose/lib/types/array/index.js:
mongoose/lib/types/documentArray/index.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/document.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Document exposes the NodeJS event emitter API, so you can use
   * `on`, `once`, etc.
   *)
  (*!
   * Converts to POJO when you use the document for querying
   *)
  (*!
   * Runs queued functions
   *)
  (*!
   * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
   *)
  (*!
   * Applies virtuals properties to `json`.
   *)
  (*!
   * Check if the given document only has primitive values
   *)
  (*!
   * Increment this document's version if necessary.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schemaType.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/virtualType.js:
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/schema/operators/bitwise.js:
mongoose/lib/schema/operators/helpers.js:
mongoose/lib/schema/operators/geospatial.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)

mongoose/lib/schema/number.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/array.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Virtuals defined on this array itself.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/bigint.js:
mongoose/lib/schema/boolean.js:
mongoose/lib/schema/buffer.js:
mongoose/lib/schema/decimal128.js:
mongoose/lib/schema/double.js:
mongoose/lib/schema/int32.js:
mongoose/lib/schema/objectId.js:
mongoose/lib/schema/string.js:
mongoose/lib/schema/uuid.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/date.js:
  (*!
   * Module requirements.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/documentArray.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaArray.
   *)
  (*!
   * ignore
   *)
  (*!
   * Handle casting $elemMatch operators
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter.
   *)
  (*!
   * ignore
   *)
  (*!
   * Get this schema's default toObject/toJSON options, including Mongoose global
   * options.
   *)
  (*!
   * Recursively set options on implicitly created schemas
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter
   *)
  (*!
   * Reset document state in between transaction retries re: gh-13698
   *)
  (*!
   * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
   *)
  (*!
   * Get the default buffer timeout for this connection
   *)
  (*!
   * ignore
   *)
  (*!
   * Called internally by `openUri()` to create a MongoClient instance.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/drivers/node-mongodb-native/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from Connection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/validOptions.js:
  (*!
   * Valid mongoose options
   *)

mquery/lib/mquery.js:
  (*!
   * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
   *
   *     Thing.where('type').nin(array)
   *)
  (*!
   * @ignore
   *)
  (*!
   * limit, skip, batchSize, comment
   *
   * Sets these associated options.
   *
   *     query.comment('feed query');
   *)
  (*!
   * Internal helper for updateMany, updateOne
   *)
  (*!
   * Permissions
   *)
  (*!
   * Exports.
   *)

mongoose/lib/query.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * inherit mquery
   *)
  (*!
   * Overwrite mquery's `_distinct`, because Mongoose uses that name
   * to store the field to apply distinct on.
   *)
  (*!
   * ignore
   *)
  (*!
   * If `translateAliases` option is set, call `Model.translateAliases()`
   * on the following query properties: filter, projection, update, distinct.
   *)
  (*!
   * Convert sort values
   *)
  (*!
   * Export
   *)

mongoose/lib/aggregate.js:
  (*!
   * Module dependencies
   *)
  (*!
   * define methods
   *)
  (*!
   * Helpers
   *)
  (*!
   * Exports
   *)

mongoose/lib/model.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Give the constructor the ability to emit events.
   *)
  (*!
   * Populates `docs` for a single `populateOptions` instance.
   *)
  (*!
   * Applies query middleware from this model's schema to this model's
   * Query constructor.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/browserDocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from the NodeJS document
   *)
  (*!
   * ignore
   *)
  (*!
   * Browser doc exposes the event emitter API
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/mongoose.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
   * No-op if there is already a default connection.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/CacheHelpers.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.8.6 2026-01-17 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.14.1 2026-01-17 *)

media-typer/index.js:
  (*!
   * media-typer
   * Copyright(c) 2014 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

type-is/index.js:
  (*!
   * type-is
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2014-2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

gtoken/build/cjs/src/index.cjs:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
